(globalThis.TURBOPACK=globalThis.TURBOPACK||[]).push(["object"==typeof document?document.currentScript:void 0,{268639:e=>{"use strict";e.s({ERROR_API_KEY_EXPIRED:()=>w,ERROR_API_KEY_INVALID:()=>_,ERROR_API_KEY_MISSING:()=>y,ERROR_BAD_REQUEST_FORMAT:()=>O,ERROR_BAD_RESPONSE_FORMAT:()=>s,ERROR_CLIENT_TIMEOUT:()=>i,ERROR_CSP_BLOCK:()=>c,ERROR_FORBIDDEN_ENDPOINT:()=>p,ERROR_FORBIDDEN_HEADER:()=>A,ERROR_FORBIDDEN_ORIGIN:()=>T,ERROR_GENERAL_SERVER_FAILURE:()=>I,ERROR_INSTALLATION_METHOD_RESTRICTED:()=>v,ERROR_INTEGRATION_FAILURE:()=>g,ERROR_INVALID_ENDPOINT:()=>l,ERROR_INVALID_PROXY_INTEGRATION_HEADERS:()=>m,ERROR_INVALID_PROXY_INTEGRATION_SECRET:()=>E,ERROR_NETWORK_ABORT:()=>a,ERROR_NETWORK_CONNECTION:()=>o,ERROR_NETWORK_RESTRICTED:()=>R,ERROR_RATE_LIMIT:()=>b,ERROR_SCRIPT_LOAD_FAIL:()=>P,ERROR_SERVER_TIMEOUT:()=>S,ERROR_SUBSCRIPTION_NOT_ACTIVE:()=>f,ERROR_TOKEN_EXPIRED:()=>C,ERROR_TOKEN_INVALID:()=>k,ERROR_TOKEN_MISSING:()=>N,ERROR_UNSUPPORTED_VERSION:()=>h,ERROR_WRONG_REGION:()=>d,default:()=>V,defaultEndpoint:()=>r,defaultScriptUrlPattern:()=>x,defaultTlsEndpoint:()=>n,load:()=>j});var t=e.i(808691),r={default:"endpoint"},n={default:"tlsEndpoint"},i="Client timeout",o="Network connection error",a="Network request aborted",s="Response cannot be parsed",c="Blocked by CSP",l="The endpoint parameter is not a valid URL";function u(e){for(var t="",r=0;r<e.length;++r)if(r>0){var n=e[r].toLowerCase();n!==e[r]?t+=" ".concat(n):t+=e[r]}else t+=e[r].toUpperCase();return t}var d=u("WrongRegion"),f=u("SubscriptionNotActive"),h=u("UnsupportedVersion"),v=u("InstallationMethodRestricted"),p=u("HostnameRestricted"),g=u("IntegrationFailed"),R=u("NetworkRestricted"),E=u("InvalidProxyIntegrationSecret"),m=u("InvalidProxyIntegrationHeaders"),y="API key required",_="API key not found",w="API key expired",O="Request cannot be parsed",I="Request failed",S="Request failed to process",b="Too many requests, rate limit exceeded",T="Not available for this origin",A="Not available with restricted header",N=y,k=_,C=w,P="Failed to load the JS script of the agent",D="9319",L="https://fpnpmcdn.net/v<version>/<apiKey>/loader_v<loaderVersion>.js",x=L;function j(e){e.scriptUrlPattern;var r,n,i,o,a,s,u,d,f=e.token,h=e.apiKey,v=void 0===h?f:h,p=(0,t.__rest)(e,["scriptUrlPattern","token","apiKey"]),g=null!==(r="scriptUrlPattern",d=Object.prototype.hasOwnProperty.call(e,r)?e[r]:void 0)&&void 0!==d?d:L,R=(a=[],i="visibilitychange",s=function(){a.push({time:new Date,state:document.visibilityState})},(n=document).addEventListener(i,s,void 0),u=function(){return n.removeEventListener(i,s,o)},s(),[a,u]),E=R[0],m=R[1];return Promise.resolve().then(function(){if(!v||"string"!=typeof v)throw Error(y);return function(e,r){var n,i,o,a,s,u,d=[],f=(n=(0,t.__spreadArray)([],e,!0),i={current:function(){return n[0]},postpone:function(){var e=n.shift();void 0!==e&&n.push(e)},exclude:function(){n.shift()}},s=0,o=function(){return Math.random()*Math.min(3e3,100*Math.pow(2,s++))},a=new Set,[i.current(),function(e,t){var r,n=t instanceof Error?t.message:"";if(n===c||n===l)i.exclude(),r=0;else if(n===D)i.exclude();else if(n===P){var s=Date.now()-e.getTime()<50,u=i.current();u&&s&&!a.has(u)&&(a.add(u),r=0),i.postpone()}else i.postpone();var d=i.current();return void 0===d?void 0:[d,null!=r?r:e.getTime()+o()-Date.now()]}]),h=f[0],v=f[1];if(void 0===h)return Promise.reject(TypeError("The list of script URL patterns is empty"));var p=function(e){var t=new Date,n=function(r){return d.push({url:e,startedAt:t,finishedAt:new Date,error:r})},i=r(e);return i.then(function(){return n()},n),i.catch(function(e){if(null!=u||(u=e),d.length>=5)throw u;var r=v(t,e);if(!r)throw u;var n=r[0],i=r[1];return new Promise(function(e){return setTimeout(e,i)}).then(function(){return p(n)})})};return p(h).then(function(e){return[e,d]})}((Array.isArray(g)?g:[g]).map(function(e){var t,r;return t=String(e),r=encodeURIComponent,t.replace(/<[^<>]+>/g,function(e){return"<version>"===e?"3":"<apiKey>"===e?r(v):"<loaderVersion>"===e?r("3.11.11"):e})}),M)}).catch(function(e){throw m(),e instanceof Error&&e.message===D?Error(P):e}).then(function(e){var r=e[0],n=e[1];return m(),r.load((0,t.__assign)((0,t.__assign)({},p),{ldi:{attempts:n,visibilityStates:E}}))})}function M(e){var t,r,n,i,o,a,s;return(t=function(){return new Promise(function(t,r){if(function(e){if(URL.prototype)try{return new URL(e,location.href),!1}catch(e){if(e instanceof Error&&"TypeError"===e.name)return!0;throw e}}(e))throw Error(l);var n=document.createElement("script"),i=function(){var e;return null==(e=n.parentNode)?void 0:e.removeChild(n)},o=document.head||document.getElementsByTagName("head")[0];n.onload=function(){i(),t()},n.onerror=function(){i(),r(Error(P))},n.async=!0,n.src=e,o.appendChild(n)})},r=function(){throw Error(c)},i=document,o="securitypolicyviolation",a=function(t){var r=new URL(e,location.href),i=t.blockedURI;i!==r.href&&i!==r.protocol.slice(0,-1)&&i!==r.origin||(n=t,s())},i.addEventListener(o,a),s=function(){return i.removeEventListener(o,a)},Promise.resolve().then(t).then(function(e){return s(),e},function(e){return new Promise(function(e){var t=new MessageChannel;t.port1.onmessage=function(){return e()},t.port2.postMessage(null)}).then(function(){if(s(),n)return r(n);throw e})})).then(U)}function U(){var e,t,r=window,n="__fpjs_p_l_b",i=r[n];if((null==(t=null==(e=Object.getOwnPropertyDescriptor)?void 0:e.call(Object,r,n))?void 0:t.configurable)?delete r[n]:t&&!t.writable||(r[n]=void 0),"function"!=typeof(null==i?void 0:i.load))throw Error(D);return i}var V={load:j,defaultScriptUrlPattern:x,ERROR_SCRIPT_LOAD_FAIL:P,ERROR_API_KEY_EXPIRED:w,ERROR_API_KEY_INVALID:_,ERROR_API_KEY_MISSING:y,ERROR_BAD_REQUEST_FORMAT:O,ERROR_BAD_RESPONSE_FORMAT:s,ERROR_CLIENT_TIMEOUT:i,ERROR_CSP_BLOCK:c,ERROR_FORBIDDEN_ENDPOINT:p,ERROR_FORBIDDEN_HEADER:A,ERROR_FORBIDDEN_ORIGIN:T,ERROR_GENERAL_SERVER_FAILURE:I,ERROR_INSTALLATION_METHOD_RESTRICTED:v,ERROR_INTEGRATION_FAILURE:g,ERROR_INVALID_ENDPOINT:l,ERROR_INVALID_PROXY_INTEGRATION_HEADERS:m,ERROR_INVALID_PROXY_INTEGRATION_SECRET:E,ERROR_NETWORK_ABORT:a,ERROR_NETWORK_CONNECTION:o,ERROR_NETWORK_RESTRICTED:R,ERROR_RATE_LIMIT:b,ERROR_SERVER_TIMEOUT:S,ERROR_SUBSCRIPTION_NOT_ACTIVE:f,ERROR_TOKEN_EXPIRED:C,ERROR_TOKEN_INVALID:k,ERROR_TOKEN_MISSING:N,ERROR_UNSUPPORTED_VERSION:h,ERROR_WRONG_REGION:d,defaultEndpoint:r,defaultTlsEndpoint:n}},474447:e=>{"use strict";e.s({FpjsClient:()=>g});var t,r=e.i(808691),n=e.i(268639);let i="@fpjs@client@",o=()=>Date.now();class a{toKey(){return"".concat(JSON.stringify(this.tag),"__").concat(JSON.stringify(this.linkedId),"__").concat(this.extendedResult)}constructor(e){var t;this.tag=e.tag||null,this.linkedId=e.linkedId||null,this.extendedResult=null!=(t=e.extendedResult)&&t}}function s(e,t){return"".concat(t,"__").concat(e)}function c(e,t){return e.replace("".concat(t,"__"),"")}class l{set(e,t){window.localStorage.setItem(s(e,this.prefix),JSON.stringify(t))}get(e){let t=window.localStorage.getItem(s(e,this.prefix));if(t)try{return JSON.parse(t)}catch(e){return}}remove(e){window.localStorage.removeItem(s(e,this.prefix))}allKeys(){return Object.keys(window.localStorage).filter(e=>e.startsWith(this.prefix)).map(e=>c(e,this.prefix))}constructor(e=i){this.prefix=e}}class u{set(e,t){window.sessionStorage.setItem(s(e,this.prefix),JSON.stringify(t))}get(e){let t=window.sessionStorage.getItem(s(e,this.prefix));if(t)try{return JSON.parse(t)}catch(e){return}}remove(e){window.sessionStorage.removeItem(s(e,this.prefix))}allKeys(){return Object.keys(window.sessionStorage).filter(e=>e.startsWith(this.prefix)).map(e=>c(e,this.prefix))}constructor(e=i){this.prefix=e}}class d{get(e){return(0,r.__awaiter)(this,void 0,void 0,function*(){let t=yield this.cache.get(e.toKey());if(!t)return;let r=Math.floor((yield this.nowProvider())/1e3);return t.expiresAt<r?void(yield this.cache.remove(e.toKey())):t.body})}set(e,t){return(0,r.__awaiter)(this,void 0,void 0,function*(){let r=yield this.wrapCacheEntry(t);yield this.cache.set(e.toKey(),r)})}clearCache(){return(0,r.__awaiter)(this,void 0,void 0,function*(){let e=yield this.cache.allKeys();yield Promise.all(e.map(e=>this.cache.remove(e)))})}wrapCacheEntry(e){return(0,r.__awaiter)(this,void 0,void 0,function*(){return{body:e,expiresAt:Math.floor((yield this.nowProvider())/1e3)+this.cacheTime}})}constructor(e,t=3600,r){this.cache=e,this.cacheTime=t,this.nowProvider=r||o}}class f{constructor(){this.enclosedCache=function(){let e={};return{set(t,r){e[t]=r},get(t){let r=e[t];if(r)return r},remove(t){delete e[t]},allKeys:()=>Object.keys(e)}}()}}class h{set(){}get(){}remove(){}allKeys(){return[]}}!function(e){e.Memory="memory",e.LocalStorage="localstorage",e.SessionStorage="sessionstorage",e.NoCache="nocache"}(t||(t={}));let v={[t.Memory]:()=>new f().enclosedCache,[t.LocalStorage]:e=>new l(e),[t.SessionStorage]:e=>new u(e),[t.NoCache]:()=>new h},p=e=>v[e];class g{init(e){return(0,r.__awaiter)(this,void 0,void 0,function*(){var t,r;if(!this.loadOptions&&!e)throw TypeError("No load options provided");let i=Object.assign(Object.assign(Object.assign({},this.loadOptions),e),{integrationInfo:[...(null==(t=this.loadOptions)?void 0:t.integrationInfo)||[],...(null==e?void 0:e.integrationInfo)||[],"fingerprintjs-pro-spa/".concat("1.3.2")]});if(!this.agentPromise){let e=null!=(r=this.customAgent)?r:n;this.agentPromise=e.load(i).then(e=>(this.agent=e,e)).catch(e=>{throw this.agentPromise=null,e})}return this.agentPromise})}getVisitorData(){return(0,r.__awaiter)(this,arguments,void 0,function*(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=g.makeCacheKey(e).toKey();if(!this.inFlightRequests.has(r)){let n=this._identify(e,t).finally(()=>{this.inFlightRequests.delete(r)});this.inFlightRequests.set(r,n)}return yield this.inFlightRequests.get(r)})}getVisitorDataFromCache(){return(0,r.__awaiter)(this,arguments,void 0,function*(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=g.makeCacheKey(e),r=yield this.cacheManager.get(t);return r?Object.assign(Object.assign({},r),{cacheHit:!0}):void 0})}isInCache(){return(0,r.__awaiter)(this,arguments,void 0,function*(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!!(yield this.getVisitorDataFromCache(e))})}clearCache(){return(0,r.__awaiter)(this,void 0,void 0,function*(){yield this.cacheManager.clearCache()})}static makeCacheKey(e){return new a(e)}_identify(e){return(0,r.__awaiter)(this,arguments,void 0,function*(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=g.makeCacheKey(e);if(!t){let e=yield this.cacheManager.get(r);if(e)return Object.assign(Object.assign({},e),{cacheHit:!0})}let n=yield this.agent.get(e);return yield this.cacheManager.set(r,n),Object.assign(Object.assign({},n),{cacheHit:!1})})}constructor(e){var r;let n;if(this.inFlightRequests=new Map,this.agentPromise=null,this.customAgent=null==e?void 0:e.customAgent,this.agent={get:()=>{throw Error("FPJSAgent hasn't loaded yet. Make sure to call the init() method first.")}},this.loadOptions=null==e?void 0:e.loadOptions,(null==e?void 0:e.cache)&&(null==e?void 0:e.cacheLocation)&&console.warn("Both `cache` and `cacheLocation` options have been specified in the FpjsClient configuration; ignoring `cacheLocation` and using `cache`."),null==e?void 0:e.cache)n=e.cache;else{if(this.cacheLocation=(null==e?void 0:e.cacheLocation)||t.SessionStorage,!p(this.cacheLocation))throw Error('Invalid cache location "'.concat(this.cacheLocation,'"'));(e=>{switch(e){case t.SessionStorage:try{window.sessionStorage.getItem("item")}catch(e){return!1}return!0;case t.LocalStorage:try{window.localStorage.getItem("item")}catch(e){return!1}return!0;default:return!0}})(this.cacheLocation)||(this.cacheLocation=t.Memory),n=p(this.cacheLocation)(null==e?void 0:e.cachePrefix)}if((null==e?void 0:e.cacheTimeInSeconds)&&e.cacheTimeInSeconds>86400)throw Error("Cache time cannot exceed 86400 seconds (24 hours)");let i=null!=(r=null==e?void 0:e.cacheTimeInSeconds)?r:3600;this.cacheManager=new d(n,i)}}n.defaultEndpoint,n.defaultTlsEndpoint,n.defaultScriptUrlPattern},885836:e=>{"use strict";e.s({}),e.i(474447)},407308:e=>{"use strict";var{m:t,e:r}=e;t.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(i=n;0!=i--;)if(!e(t[i],r[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(o=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(i=n;0!=i--;)if(!Object.prototype.hasOwnProperty.call(r,o[i]))return!1;for(i=n;0!=i--;){var n,i,o,a=o[i];if(!e(t[a],r[a]))return!1}return!0}return t!=t&&r!=r}},444042:e=>{"use strict";e.s({FpjsProvider:()=>g,useVisitorData:()=>m});var t,r=e.i(373150),n=e.i(290479);e.i(885836);var i=e.i(474447),o=e.i(407308),a=function(){throw Error("You forgot to wrap your component in <FpjsProvider>.")},s=(0,r.createContext)({getVisitorData:a,clearCache:a}),c=function(e,t){return(c=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},l=function(){return(l=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function u(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)0>t.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function d(e,t,r,n){return new(r||(r=Promise))(function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})}function f(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){var l=[s,c];if(r)throw TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&l[0]?n.return:l[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,l[1])).done)return i;switch(n=0,i&&(l=[2&l[0],i.value]),l[0]){case 0:case 1:i=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,n=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===l[0]||2===l[0])){a=0;continue}if(3===l[0]&&(!i||l[1]>i[0]&&l[1]<i[3])){a.label=l[1];break}if(6===l[0]&&a.label<i[1]){a.label=i[1],i=l;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(l);break}i[2]&&a.ops.pop(),a.trys.pop();continue}l=t.call(e,a)}catch(e){l=[6,e],n=0}finally{r=i=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}}function h(e,t,r){if(r||2==arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}"function"==typeof SuppressedError&&SuppressedError,!function(e){e.React="react",e.Preact="preact",e.Next="next",e.Unknown="unknown"}(t||(t={}));var v=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=i}function i(t){return e.call(this,t)||this}return c(i,e),i.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n),i.prototype.render=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(!this.detectedEnv){var i=e.length>0;this.detectedEnv=function(e){try{var r,n=JSON.parse("%DETECTED_ENV%");if("object"==typeof n)return n}catch(e){}var i=e.context;return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if("undefined"==typeof window)return!1;for(var r=0;r<e.length;r++)if((0,e[r])())return!0;return!1}(function(){return"next"in window&&!!window.next},function(){return document.querySelector("script[id=__NEXT_DATA__]")})?{name:t.Next,version:null==(r=null==window?void 0:window.next)?void 0:r.version}:i.classRenderReceivesAnyArguments?{name:t.Preact}:i.classRenderReceivesAnyArguments?{name:t.Unknown}:{name:t.React}}({context:{classRenderReceivesAnyArguments:i}})}return(0,r.cloneElement)(this.props.children,{env:this.detectedEnv})},i}(r.Component),p="@fingerprintjs/fingerprintjs-pro-react".split("/")[1];function g(e){return(0,n.jsx)(v,{children:(0,n.jsx)(R,l({},e))})}function R(e){var t=this,o=e.children,a=e.forceRebuild,c=e.cache,u=e.cacheTimeInSeconds,v=e.cachePrefix,g=e.cacheLocation,R=e.customAgent,E=e.loadOptions,m=e.env,y=(0,r.useRef)(),_=(0,r.useRef)(),w=(0,r.useMemo)(function(){return{cache:c,cacheTimeInSeconds:u,cachePrefix:v,cacheLocation:g,customAgent:R,loadOptions:E}},[E,c,u,v,g,R]),O=(0,r.useCallback)(function(){var e="".concat(p,"/").concat("2.7.0");if(m){var t=m.version?"".concat(m.name,"/").concat(m.version):m.name;e+="/".concat(t)}var r=l(l({},w),{loadOptions:l(l({},E),{integrationInfo:h(h([],E.integrationInfo||[],!0),[e],!1)})}),n=new i.FpjsClient(r);return _.current=n.init(),n},[w,m,E]),I=(0,r.useCallback)(function(){return d(t,void 0,void 0,function(){var e=this;return f(this,function(t){switch(t.label){case 0:var r,n,i,o,a,s;if("undefined"==typeof window||void 0===window.document)throw Error("FpjsProvider client cannot be used in SSR");if(y.current)return[3,2];return[4,(n=(r={checkCondition:function(){return!!y.current}}).checkCondition,o=void 0===(i=r.intervalMs)?250:i,s=void 0===(a=r.timeoutMs)?2e3:a,new Promise(function(e,t){var r=setTimeout(function(){clearInterval(i),t(Error("Timeout"))},s),i=setInterval(function(){n()&&(clearTimeout(r),clearInterval(i),e())},o)})).catch(function(){return d(e,void 0,void 0,function(){return f(this,function(e){return O(),[2]})})})];case 1:t.sent(),t.label=2;case 2:return[2,y.current]}})})},[O]),S=(0,r.useCallback)(function(e,r){return d(t,void 0,void 0,function(){var t;return f(this,function(n){switch(n.label){case 0:return[4,I()];case 1:return t=n.sent(),[4,_.current];case 2:return n.sent(),[2,t.getVisitorData(e,r)]}})})},[I]),b=(0,r.useCallback)(function(){return d(t,void 0,void 0,function(){return f(this,function(e){switch(e.label){case 0:return[4,I()];case 1:return[4,e.sent().clearCache()];case 2:return e.sent(),[2]}})})},[I]),T=(0,r.useMemo)(function(){return{clearCache:b,getVisitorData:S}},[b,S]);return(0,r.useEffect)(function(){(!y.current||a)&&(y.current=O())},[a,w,O]),(0,n.jsx)(s.Provider,{value:T,children:o})}function E(e,t){if(!e)throw TypeError("".concat(t," must not be null or undefined"))}function m(e,t){var n=this;void 0===e&&(e={}),void 0===t&&(t=y),E(e,"getOptions");var i=t.immediate,a=(0,r.useContext)(s).getVisitorData,c=(0,r.useState)(e),v=c[0],p=c[1],g=(0,r.useState)({isLoading:i}),R=g[0],m=g[1],_=(0,r.useCallback)(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return d(n,h([],e,!0),void 0,function(e){var t,r,n,i,o,s;return void 0===e&&(e={}),f(this,function(c){switch(c.label){case 0:E(e,"getDataParams"),t=e.ignoreCache,r=u(e,["ignoreCache"]),c.label=1;case 1:return c.trys.push([1,3,4,5]),m(function(e){return l(l({},e),{isLoading:!0})}),n=v.ignoreCache,i=u(v,["ignoreCache"]),[4,a(l(l({},i),r),"boolean"==typeof t?t:n)];case 2:return o=c.sent(),m(function(e){return l(l({},e),{data:o,isLoading:!1,error:void 0})}),[2,o];case 3:var d;throw(s=(d=c.sent())instanceof Error?d:Error(String(d))).name="FPJSAgentError",m(function(e){return l(l({},e),{data:void 0,error:s})}),s;case 4:return m(function(e){return e.isLoading?l(l({},e),{isLoading:!1}):e}),[7];case 5:return[2]}})})},[v,a]);return(0,r.useEffect)(function(){i&&_().catch(function(e){console.error("Failed to fetch visitor data on mount: ".concat(e))})},[i,_]),Object.is(v,e)||(0,o.default)(v,e)||p(e),{getData:_,isLoading:R.isLoading,data:R.data,error:R.error}}var y={immediate:!0}},923328:e=>{"use strict";e.s({}),e.i(373150),e.i(290479),e.i(885836),e.i(407308),e.i(444042)},494429:e=>{"use strict";e.s({INTERNAL_buildStoreRev1:()=>v,INTERNAL_initializeStoreHooks:()=>p,INTERNAL_registerAbortHandler:()=>g});let t={get url(){return`file://${e.P("node_modules/.pnpm/jotai@2.12.5_@types+react@19.1.8_react@19.1.0/node_modules/jotai/esm/vanilla/internals.mjs")}`}},r=(e,t)=>e.unstable_is?e.unstable_is(t):t===e,n=e=>"v"in e||"e"in e,i=e=>{if("e"in e)throw e.e;if((t.env?t.env.MODE:void 0)!=="production"&&!("v"in e))throw Error("[Bug] atom state is not initialized");return e.v},o=new WeakMap,a=e=>{var t;return c(e)&&!!(null==(t=o.get(e))?void 0:t[0])},s=(e,t)=>{let r=o.get(e);if(!r){r=[!0,new Set],o.set(e,r);let t=()=>{r[0]=!1};e.then(t,t)}r[1].add(t)},c=e=>"function"==typeof(null==e?void 0:e.then),l=(e,t,r)=>{r.p.has(e)||(r.p.add(e),t.then(()=>{r.p.delete(e)},()=>{r.p.delete(e)}))},u=(e,t,r)=>{let n=r(e),i="v"in n,a=n.v;if(c(t))for(let i of n.d.keys())l(e,t,r(i));n.v=t,delete n.e,i&&Object.is(a,n.v)||(++n.n,c(a)&&(e=>{let t=o.get(e);(null==t?void 0:t[0])&&(t[0]=!1,t[1].forEach(e=>e()))})(a))},d=(e,t,r)=>{var n;let i=new Set;for(let t of(null==(n=r.get(e))?void 0:n.t)||[])r.has(t)&&i.add(t);for(let e of t.p)i.add(e);return i},f=()=>{let e={},t=new WeakMap,r=r=>{var n,i;null==(n=t.get(e))||n.forEach(e=>e(r)),null==(i=t.get(r))||i.forEach(e=>e())};return r.add=(r,n)=>{let i=r||e,o=(t.has(i)?t:t.set(i,new Set)).get(i);return o.add(n),()=>{null==o||o.delete(n),o.size||t.delete(i)}},r},h=Symbol(),v=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new WeakMap,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new WeakMap,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new WeakMap,v=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Set,p=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new Set,g=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new Set,R=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},E=arguments.length>7&&void 0!==arguments[7]?arguments[7]:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e.read(...r)},m=arguments.length>8&&void 0!==arguments[8]?arguments[8]:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e.write(...r)},y=arguments.length>9&&void 0!==arguments[9]?arguments[9]:(e,t)=>{var r;return null==(r=e.unstable_onInit)?void 0:r.call(e,t)},_=arguments.length>10&&void 0!==arguments[10]?arguments[10]:(e,t)=>{var r;return null==(r=e.onMount)?void 0:r.call(e,t)};for(var w=arguments.length,O=Array(w>11?w-11:0),I=11;I<w;I++)O[I-11]=arguments[I];let S=O[0]||(r=>{if((t.env?t.env.MODE:void 0)!=="production"&&!r)throw Error("Atom is undefined or null");let n=e.get(r);return n||(n={d:new Map,p:new Set,n:0},e.set(r,n),null==y||y(r,L)),n}),b=O[1]||(()=>{let e=[],t=t=>{try{t()}catch(t){e.push(t)}};do{R.f&&t(R.f);let e=new Set,r=e.add.bind(e);v.forEach(e=>{var t;return null==(t=o.get(e))?void 0:t.l.forEach(r)}),v.clear(),g.forEach(r),g.clear(),p.forEach(r),p.clear(),e.forEach(t),v.size&&T()}while(v.size||g.size||p.size)if(e.length)throw AggregateError(e)}),T=O[2]||(()=>{let e=[],r=new WeakSet,n=new WeakSet,i=Array.from(v);for(;i.length;){let a=i[i.length-1],s=S(a);if(n.has(a)){i.pop();continue}if(r.has(a)){if(f.get(a)===s.n)e.push([a,s]);else if((t.env?t.env.MODE:void 0)!=="production"&&f.has(a))throw Error("[Bug] invalidated atom exists");n.add(a),i.pop();continue}for(let e of(r.add(a),d(a,s,o)))r.has(e)||i.push(e)}for(let t=e.length-1;t>=0;--t){let[r,n]=e[t],i=!1;for(let e of n.d.keys())if(e!==r&&v.has(e)){i=!0;break}i&&(A(r),C(r)),f.delete(r)}}),A=O[3]||(e=>{var d;let h,p,g=S(e);if(n(g)&&(o.has(e)&&f.get(e)!==g.n||Array.from(g.d).every(e=>{let[t,r]=e;return A(t).n===r})))return g;g.d.clear();let m=!0,y=()=>{o.has(e)&&(C(e),T(),b())},_=g.n;try{let d=E(e,t=>{var s;if(r(e,t)){let e=S(t);if(!n(e))if("init"in t)u(t,t.init,S);else throw Error("no atom init");return i(e)}let c=A(t);try{return i(c)}finally{g.d.set(t,c.n),a(g.v)&&l(e,g.v,c),null==(s=o.get(t))||s.t.add(e),m||y()}},{get signal(){return h||(h=new AbortController),h.signal},get setSelf(){return(t.env?t.env.MODE:void 0)==="production"||e.write||console.warn("setSelf function cannot be used with read-only atom"),!p&&e.write&&(p=function(){for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];if((t.env?t.env.MODE:void 0)!=="production"&&m&&console.warn("setSelf function cannot be called in sync"),!m)try{return k(e,...n)}finally{T(),b()}}),p}});return u(e,d,S),c(d)&&(s(d,()=>null==h?void 0:h.abort()),d.then(y,y)),g}catch(e){return delete g.v,g.e=e,++g.n,g}finally{m=!1,_!==g.n&&f.get(e)===_&&(f.set(e,g.n),v.add(e),null==(d=R.c)||d.call(R,e))}}),N=O[4]||(e=>{let t=[e];for(;t.length;){let e=t.pop(),r=S(e);for(let n of d(e,r,o)){let e=S(n);f.set(n,e.n),t.push(n)}}}),k=O[5]||function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];let a=!0;try{return m(e,e=>i(A(e)),function(t){for(var n,i=arguments.length,o=Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];let c=S(t);try{if(!r(e,t))return k(t,...o);{if(!("init"in t))throw Error("atom not writable");let e=c.n,r=o[0];u(t,r,S),C(t),e!==c.n&&(v.add(t),null==(n=R.c)||n.call(R,t),N(t));return}}finally{a||(T(),b())}},...n)}finally{a=!1}},C=O[6]||(e=>{var t;let r=S(e),n=o.get(e);if(n&&!a(r.v)){for(let[i,o]of r.d)if(!n.d.has(i)){let r=S(i);P(i).t.add(e),n.d.add(i),o!==r.n&&(v.add(i),null==(t=R.c)||t.call(R,i),N(i))}for(let t of n.d||[])if(!r.d.has(t)){n.d.delete(t);let r=D(t);null==r||r.t.delete(e)}}}),P=O[7]||(e=>{var t;let r=S(e),n=o.get(e);if(!n){for(let t of(A(e),r.d.keys()))P(t).t.add(e);n={l:new Set,d:new Set(r.d.keys()),t:new Set},o.set(e,n),null==(t=R.m)||t.call(R,e),e.write&&p.add(()=>{let t=!0;try{let r=_(e,function(){for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];try{return k(e,...n)}finally{t||(T(),b())}});r&&(n.u=()=>{t=!0;try{r()}finally{t=!1}})}finally{t=!1}})}return n}),D=O[8]||(e=>{var t;let r=S(e),n=o.get(e);if(n&&!n.l.size&&!Array.from(n.t).some(t=>{var r;return null==(r=o.get(t))?void 0:r.d.has(e)})){for(let i of(n.u&&g.add(n.u),n=void 0,o.delete(e),null==(t=R.u)||t.call(R,e),r.d.keys())){let t=D(i);null==t||t.t.delete(e)}return}return n}),L={get:e=>i(A(e)),set:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];try{return k(e,...r)}finally{T(),b()}},sub:(e,t)=>{let r=P(e).l;return r.add(t),b(),()=>{r.delete(t),D(e),b()}}};return Object.defineProperty(L,h,{value:[e,o,f,v,p,g,R,E,m,y,_,S,b,T,A,N,k,C,P,D]}),L},p=e=>(e.c||(e.c=f()),e.m||(e.m=f()),e.u||(e.u=f()),e.f||(e.f=(()=>{let e=new Set,t=()=>{e.forEach(e=>e())};return t.add=t=>(e.add(t),()=>{e.delete(t)}),t})()),e),g=s},647968:e=>{"use strict";let t,r;e.s({atom:()=>a,createStore:()=>l,getDefaultStore:()=>u});var n=e.i(494429);let i={get url(){return`file://${e.P("node_modules/.pnpm/jotai@2.12.5_@types+react@19.1.8_react@19.1.0/node_modules/jotai/esm/vanilla.mjs")}`}},o=0;function a(e,t){let r="atom".concat(++o),n={toString(){return(i.env?i.env.MODE:void 0)!=="production"&&this.debugLabel?r+":"+this.debugLabel:r}};return"function"==typeof e?n.read=e:(n.init=e,n.read=s,n.write=c),t&&(n.write=t),n}function s(e){return e(this)}function c(e,t,r){return t(this,"function"==typeof r?r(e(this)):r)}function l(){return t?t():(i.env?i.env.MODE:void 0)!=="production"?(()=>{let e=0,t=(0,n.INTERNAL_initializeStoreHooks)({}),r=new WeakMap,i=new WeakMap,o=(0,n.INTERNAL_buildStoreRev1)(r,i,void 0,void 0,void 0,void 0,t,void 0,function(t,r,n){for(var i=arguments.length,o=Array(i>3?i-3:0),a=3;a<i;a++)o[a-3]=arguments[a];return e?n(t,...o):t.write(r,n,...o)}),a=new Set;return t.m.add(void 0,e=>{a.add(e),r.get(e).m=i.get(e)}),t.u.add(void 0,e=>{a.delete(e);let t=r.get(e);delete t.m}),Object.assign(o,{dev4_get_internal_weak_map:()=>(console.log("Deprecated: Use devstore from the devtools library"),r),dev4_get_mounted_atoms:()=>a,dev4_restore_atoms:t=>{o.set({read:()=>null,write:(r,n)=>{++e;try{for(let[e,r]of t)"init"in e&&n(e,r)}finally{--e}}})}})})():(0,n.INTERNAL_buildStoreRev1)()}function u(){return r||(r=l(),(i.env?i.env.MODE:void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=r),globalThis.__JOTAI_DEFAULT_STORE__!==r&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),r}},276236:e=>{"use strict";e.s({getUserPlanDetails:()=>r});var t=e.i(266199);function r(e){var r,n;let i,o,a="FREE",s="NONE",c="CANCELED",l=null,u=!1,d=null==(r=e.subscription)?void 0:r.find(e=>"ACTIVE"===e.status),f=null==(n=e.subscription)?void 0:n.find(e=>"PAST_DUE"===e.status),h=e.teamsMemberOf.find(e=>"ACTIVE"===e.status),v=null==h?void 0:h.team.subscription;switch((null==v?void 0:v.status)==="ACTIVE"?(a=v.plan,s=v.billingInterval,c=v.status,l=v.createdAt):d?(a=d.plan,s=d.billingInterval,c=d.status,l=d.createdAt):(null==f?void 0:f.status)==="PAST_DUE"&&(c="PAST_DUE"),a){case"FREE":i=0x1400000,o=120;break;case"PRO":case"PREMIUM":i=0x12c00000,o=1e4;break;case"FRIEND":a="PREMIUM",i=0x12c00000,o=1e4,u=!0;break;case"TEAM":a="PRO",i=0x12c00000,o=1e4;break;default:i=0x1e00000,o=120,a="FREE"}let p=(0,t.default)(l).format("YYYY-MM-DD HH:mm:ss");return{planName:a=a.toLowerCase().replace(/\w\S*/g,e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()),fileSizeLimit:i,pageLimit:o,billingInterval:s,status:c,createdAt:p,isFriendPlan:u}}},711211:e=>{"use strict";e.s({AuthRedirect:()=>i}),e.i(396133);var t=e.i(547946),r=e.i(397711),n=e.i(373150);function i(e){var i;let{isLandingPage:o}=e,a=(0,r.useRouter)(),s=(0,r.usePathname)(),c=(0,r.useSearchParams)(),l=(0,t.useSession)();return(0,n.useEffect)(()=>{var e;if(!l.isPending&&!(null==(e=l.data)?void 0:e.user)&&(!o||"/papers"===s)){let e=null==c?void 0:c.toString(),t="".concat(s).concat(e?"?".concat(e):"");a.push("/login?callbackUrl=".concat(encodeURIComponent(t)))}},[l.isPending,null==(i=l.data)?void 0:i.user,o,s,c,a]),null}},230923:e=>{"use strict";e.s({CheckoutCompleteHandler:()=>n});var t=e.i(118246),r=e.i(373150);function n(e){let{onCheckoutComplete:n}=e,[i]=(0,t.useQueryState)("checkout_complete",t.parseAsBoolean);return(0,r.useEffect)(()=>{n(i||!1)},[i,n]),null}},527941:e=>{"use strict";e.s({default:()=>r});var t=e.i(814733);let r=function(){let{onSuccess:e,onError:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.api.useUtils(),{mutateAsync:i}=t.api.user.update.useMutation({onMutate:async e=>{let{email:t,...r}=e;await n.user.byEmail.cancel();let i=n.user.byEmail.getData(t);return n.user.byEmail.setData(t,e=>e?{...e,...r}:void 0),{prevData:i}},onError(e,t,i){let{email:o}=t;null==r||r(),n.user.byEmail.setData(o,null==i?void 0:i.prevData)},onSettled(e,t,r){let{email:i,citationFormat:o}=r;n.user.byEmail.invalidate(i),void 0!==o&&(n.citations.formatFromMetadata.invalidate(),n.citations.format.invalidate())},onSuccess:(t,r)=>{null==e||e({...r.workspaceName&&{workspaceName:r.workspaceName},...r.displayName&&{displayName:r.displayName}})}});return{updateUser:i}}},440840:e=>{"use strict";e.s({useImpersonation:()=>i}),e.i(396133);var t=e.i(547946),r=e.i(647968),n=e.i(373150);(0,r.atom)(!1);let i=()=>{let{data:e}=t.authClient.useSession(),r=!!(null==e?void 0:e.session.impersonatedBy),i=(0,n.useCallback)(async()=>{if(r)return!0;let{data:e}=await t.authClient.getSession();return!!(null==e?void 0:e.session.impersonatedBy)},[e,r]);return{isAdmin:r,checkAdmin:i,exitImpersonation:async()=>{await t.authClient.admin.stopImpersonating(),window.location.reload()}}}},994204:e=>{"use strict";e.s({hasActivePremiumPlan:()=>t});let t=e=>{if(!e||!e.subscription||0===e.subscription.length)return!1;let t=["PRO","PREMIUM","UNLIMITED","TEAM","FRIEND"];return e.subscription.some(e=>t.includes(e.plan)&&"ACTIVE"===e.status)}},552684:e=>{"use strict";e.s({isDev:()=>n});var t=e.i(369587);let r="preview"===t.env.NEXT_PUBLIC_VERCEL_ENV,n="production"!==t.env.NEXT_PUBLIC_VERCEL_ENV&&!r},898659:e=>{"use strict";e.s({DeviceChecker:()=>f});var t=e.i(885905),r=e.i(527941),n=e.i(440840),i=e.i(252390),o=e.i(994204),a=e.i(552684),s=e.i(814733);e.i(923328);var c=e.i(444042),l=e.i(238635),u=e.i(397711),d=e.i(373150);function f(){let{user:e,userLoading:f}=(0,t.useAuth)(),h=(0,u.useRouter)(),v=(0,u.usePathname)(),p=(0,u.useSearchParams)(),{track:g}=(0,i.default)(),{checkAdmin:R}=(0,n.useImpersonation)(),{updateUser:E}=(0,r.default)(),{getData:m}=(0,c.useVisitorData)({extendedResult:!0},{immediate:!1}),{mutateAsync:y}=s.api.fingerprint.addDevice.useMutation();return(0,d.useEffect)(()=>{if(!f&&!a.isDev&&"true"===(null==p?void 0:p.get("checkDevice"))){if(e&&!(0,o.hasActivePremiumPlan)(e)||!e){let e=new URLSearchParams(null==p?void 0:p.toString());e.delete("checkDevice");let t="".concat(v).concat(e.toString()?"?".concat(e.toString()):"");h.replace(t);return}(async()=>{if(await R())return;let t=await m();if(!t.visitorId)return void l.captureMessage("No visitorId found");e.uniqueVisitorId||await E({uniqueVisitorId:t.visitorId,email:e.email});let r=e.devices.find(e=>e.uniqueVisitorId===t.visitorId);if(r&&!r.exceedsLimit)return;if(null==r?void 0:r.exceedsLimit)return void g("Account Sharing Detected",{userId:e.id,email:e.email,uniqueVisitorId:t.visitorId});let n="".concat(t.browserName,"-").concat(t.os,"-").concat(t.device),i=[...new Set(e.devices.map(e=>"".concat(e.userId,"-").concat(e.uniqueVisitorId)))];g("new_device_added",{userId:e.id,email:e.email,uniqueVisitorId:t.visitorId,deviceName:n,exceedsLimit:i.length>=3}),y({uniqueVisitorId:t.visitorId,name:n,exceedsLimit:i.length>=3}),i.length<3||g("Account Sharing Detected",{userId:e.id,email:e.email,uniqueVisitorId:t.visitorId})})().finally(()=>{let e=new URLSearchParams(null==p?void 0:p.toString());e.delete("checkDevice");let t="".concat(v).concat(e.toString()?"?".concat(e.toString()):"");h.replace(t)})}},[e,p,f,v,h,R,m,E,g,y]),null}},906494:e=>{"use strict";var{m:t,e:r}=e;r.parse=function(e,t){if("string"!=typeof e)throw TypeError("argument str must be a string");var r={},n=e.length;if(n<2)return r;var o=t&&t.decode||d,a=0,s=0,c=0;do{if(-1===(s=e.indexOf("=",a)))break;if(-1===(c=e.indexOf(";",a)))c=n;else if(s>c){a=e.lastIndexOf(";",s-1)+1;continue}var f=l(e,a,s),h=u(e,s,f),v=e.slice(f,h);if(!i.call(r,v)){var p=l(e,s+1,c),g=u(e,c,p);34===e.charCodeAt(p)&&34===e.charCodeAt(g-1)&&(p++,g--);var R=e.slice(p,g);r[v]=function(e,t){try{return t(e)}catch(t){return e}}(R,o)}a=c+1}while(a<n)return r},r.serialize=function(e,t,r){var i=r&&r.encode||encodeURIComponent;if("function"!=typeof i)throw TypeError("option encode is invalid");if(!o.test(e))throw TypeError("argument name is invalid");var l=i(t);if(!a.test(l))throw TypeError("argument val is invalid");var u=e+"="+l;if(!r)return u;if(null!=r.maxAge){var d=Math.floor(r.maxAge);if(!isFinite(d))throw TypeError("option maxAge is invalid");u+="; Max-Age="+d}if(r.domain){if(!s.test(r.domain))throw TypeError("option domain is invalid");u+="; Domain="+r.domain}if(r.path){if(!c.test(r.path))throw TypeError("option path is invalid");u+="; Path="+r.path}if(r.expires){var f,h=r.expires;if(f=h,"[object Date]"!==n.call(f)||isNaN(h.valueOf()))throw TypeError("option expires is invalid");u+="; Expires="+h.toUTCString()}if(r.httpOnly&&(u+="; HttpOnly"),r.secure&&(u+="; Secure"),r.partitioned&&(u+="; Partitioned"),r.priority)switch("string"==typeof r.priority?r.priority.toLowerCase():r.priority){case"low":u+="; Priority=Low";break;case"medium":u+="; Priority=Medium";break;case"high":u+="; Priority=High";break;default:throw TypeError("option priority is invalid")}if(r.sameSite)switch("string"==typeof r.sameSite?r.sameSite.toLowerCase():r.sameSite){case!0:case"strict":u+="; SameSite=Strict";break;case"lax":u+="; SameSite=Lax";break;case"none":u+="; SameSite=None";break;default:throw TypeError("option sameSite is invalid")}return u};var n=Object.prototype.toString,i=Object.prototype.hasOwnProperty,o=/^[!#$%&'*+\-.^_`|~0-9A-Za-z]+$/,a=/^("?)[\u0021\u0023-\u002B\u002D-\u003A\u003C-\u005B\u005D-\u007E]*\1$/,s=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,c=/^[\u0020-\u003A\u003D-\u007E]*$/;function l(e,t,r){do{var n=e.charCodeAt(t);if(32!==n&&9!==n)return t}while(++t<r)return r}function u(e,t,r){for(;t>r;){var n=e.charCodeAt(--t);if(32!==n&&9!==n)return t+1}return r}function d(e){return -1!==e.indexOf("%")?decodeURIComponent(e):e}},849595:e=>{"use strict";var{m:t,e:r}=e,n=e.e&&e.e.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=e.e&&e.e.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)0>t.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};Object.defineProperty(r,"__esModule",{value:!0}),r.hasCookie=r.deleteCookie=r.setCookie=r.getCookie=r.getCookies=void 0;var o=e.r(906494),a=function(){return"undefined"!=typeof window},s=function(e){return!!e&&"getAll"in e&&"set"in e&&"function"==typeof e.getAll&&"function"==typeof e.set},c=function(e){return!!(null==e?void 0:e.req)&&"cookies"in e.req&&s(null==e?void 0:e.req.cookies)||!!(null==e?void 0:e.res)&&"cookies"in e.res&&s(null==e?void 0:e.res.cookies)||!!(null==e?void 0:e.cookies)&&s(e.cookies())},l=function(e){var t={};return e.getAll().forEach(function(e){var r=e.name,n=e.value;t[r]=n}),t},u=function(e){try{if("string"==typeof e)return e;return JSON.stringify(e)}catch(t){return e}};r.getCookies=function(e){if(c(e)){if(null==e?void 0:e.req)return l(e.req.cookies);if(null==e?void 0:e.cookies)return l(e.cookies())}if(e&&(t=e.req),!a())return t&&t.cookies?t.cookies:t&&t.headers.cookie?(0,o.parse)(t.headers.cookie):{};for(var t,r={},n=document.cookie?document.cookie.split("; "):[],i=0,s=n.length;i<s;i++){var u=n[i].split("="),d=u.slice(1).join("=");r[u[0]]=d}return r},r.getCookie=function(e,t){var n=(0,r.getCookies)(t)[e];if(void 0!==n)return n?n.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent):n},r.setCookie=function(e,t,r){if(c(r)){var s,l,d,f=r.req,h=r.res,v=r.cookies,p=i(r,["req","res","cookies"]),g=n({name:e,value:u(t)},p);f&&f.cookies.set(g),h&&h.cookies.set(g),v&&v().set(g);return}if(r){var f=r.req,h=r.res,R=i(r,["req","res"]);l=f,d=h,s=R}var E=(0,o.serialize)(e,u(t),n({path:"/"},s));if(a())document.cookie=E;else if(d&&l){var m=d.getHeader("Set-Cookie");if(Array.isArray(m)||(m=m?[String(m)]:[]),d.setHeader("Set-Cookie",m.concat(E)),l&&l.cookies){var y=l.cookies;""===t?delete y[e]:y[e]=u(t)}if(l&&l.headers&&l.headers.cookie){var y=(0,o.parse)(l.headers.cookie);""===t?delete y[e]:y[e]=u(t),l.headers.cookie=Object.entries(y).reduce(function(e,t){return e.concat("".concat(t[0],"=").concat(t[1],";"))},"")}}},r.deleteCookie=function(e,t){return(0,r.setCookie)(e,"",n(n({},t),{maxAge:-1}))},r.hasCookie=function(e,t){return!!e&&(0,r.getCookies)(t).hasOwnProperty(e)}},437194:e=>{"use strict";e.s({identifyTikTok:()=>o,persistTtclid:()=>n,trackTikTokEvent:()=>r});var t=e.i(849595);function r(e,t,r){let n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"tt_evt",t=Math.random().toString(36).slice(2,10);return"".concat(e,"_").concat(Date.now(),"_").concat(t)}(),i=(null==r?void 0:r.sendServer)!==!1;if(window.ttq)try{window.ttq.track(e,t,{event_id:n})}catch(e){}if(i)try{let r={...null!=t?t:{}};r.event_id=n,fetch("/api/tiktok/track",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({event:e,event_time:Math.floor(Date.now()/1e3),page:{url:window.location.href,referrer:document.referrer},properties:r})})}catch(e){}}function n(){try{let e=function(){try{return new URL(window.location.href).searchParams.get("ttclid")}catch(e){return null}}();if(!e)return;let r=new Date(Date.now()+6048e5);(0,t.setCookie)("ttclid",e,{path:"/",expires:r,sameSite:"lax"}),localStorage.setItem("ttclid",e)}catch(e){}}async function i(e){let t=new TextEncoder().encode(e.trim().toLowerCase());return Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",t))).map(e=>e.toString(16).padStart(2,"0")).join("")}async function o(e){if(!window.ttq||!window.ttq.identify)return;let t={};if(e.email&&(t.email=await i(e.email)),e.externalId&&(t.external_id=await i(e.externalId)),Object.keys(t).length>0)try{window.ttq.identify(t)}catch(e){}}},885905:e=>{"use strict";e.s({AuthContextProvider:()=>g,useAuth:()=>R});var t=e.i(290479),r=e.i(238635),n=e.i(375768);e.i(396133);var i=e.i(547946),o=e.i(276236),a=e.i(623053),s=e.i(373150),c=e.i(711211),l=e.i(230923),u=e.i(898659),d=e.i(440840),f=e.i(252390),h=e.i(437194),v=e.i(814733);let p=(0,s.createContext)({}),g=e=>{var g,R,E,m,y,_;let{children:w,isLandingPage:O}=e,I=(0,a.usePostHog)(),{track:S}=(0,f.default)(),[b,T]=(0,s.useState)(!1),{checkAdmin:A}=(0,d.useImpersonation)(),N=(0,i.useSession)(),k=(0,s.useRef)(null);(0,s.useEffect)(()=>{var e;(null==(e=N.data)?void 0:e.user.email)&&localStorage.setItem("anara_user_email",N.data.user.email)},[null==(g=N.data)?void 0:g.user.email]),(0,s.useEffect)(()=>{let e=()=>{N.refetch()};return window.addEventListener("focus",e),()=>{window.removeEventListener("focus",e)}},[]);let{data:C,isLoading:P}=v.api.user.byEmail.useQuery(null!=(_=null==(R=N.data)?void 0:R.user.email)?_:n.skipToken,{enabled:!!(null==(E=N.data)?void 0:E.user.email),refetchInterval:e=>{if(!e.state.data||!b)return!1;let t=(0,o.getUserPlanDetails)(e.state.data);return(null==t?void 0:t.status)!=="ACTIVE"&&5e3},refetchOnWindowFocus:!0,staleTime:0}),D=C?(0,o.getUserPlanDetails)(C):null;(0,s.useEffect)(()=>{let e=window.navigator.userAgent,t=window.location.href;if(!C&&e.includes("Mobile")&&(e.includes("iPhone")||e.includes("iPad"))&&e.includes("Instagram")){window.location.href="x-safari-".concat(t);return}},[C]);let L=(0,s.useCallback)(async e=>{var t;if(r.setUser({id:null==(t=N.data)?void 0:t.user.id,email:e.email}),await A())return;let n=(0,o.getUserPlanDetails)(e);if(!n)return;let i={$email:e.email,$plan:"ACTIVE"!==n.status?"FREE":n.planName,$billing_interval:n.billingInterval};if(e.displayName&&(i.$name=e.displayName),!I._isIdentified()||I.get_distinct_id()!==e.id){I.identify(e.id,i),S("Sign In");try{e.isNewUser&&(0,h.trackTikTokEvent)("CompleteRegistration",{},{sendServer:!0})}catch(e){}}},[A,I,S,null==(m=N.data)?void 0:m.user.id]);(0,s.useEffect)(()=>{C&&k.current!==C.id&&(L(C),k.current=C.id)},[C,L]);let x=(0,s.useCallback)(e=>{T(e)},[]);return(0,t.jsxs)(p.Provider,{value:{user:C,userLoading:P,userPlanDetails:D,isLoggedIn:!!(null==(y=N.data)?void 0:y.user)},children:[(0,t.jsxs)(s.Suspense,{fallback:null,children:[(0,t.jsx)(c.AuthRedirect,{isLandingPage:O}),(0,t.jsx)(u.DeviceChecker,{}),(0,t.jsx)(l.CheckoutCompleteHandler,{onCheckoutComplete:x})]}),w]})},R=()=>{let e=(0,s.useContext)(p);if(void 0===e)throw Error("useSession must be used within a SessionProvider");return e}}}]);

//# sourceMappingURL=5d3f266abe86b862.js.map