(globalThis.TURBOPACK=globalThis.TURBOPACK||[]).push(["object"==typeof document?document.currentScript:void 0,{844157:e=>{"use strict";e.s({env:()=>r});var t=e.i(774349),n=e.i(555168);let r=(0,t.createEnv)({server:{AWS_REGION:n.z.string(),RESEND_API_KEY:n.z.string(),RESEND_AUDIENCE_ID:n.z.string(),SLACK_ANARA_BOT_TOKEN:n.z.string(),SLACK_WEBHOOK_BASE_URL:n.z.string(),SLACK_WEBHOOK_FEEDBACK:n.z.string(),SLACK_WEBHOOK_COMPANY_SIGNUP:n.z.string(),SLACK_WEBHOOK_WORK:n.z.string(),SLACK_WEBHOOK_NPS:n.z.string(),SLACK_WEBHOOK_TEAM:n.z.string(),SLACK_WEBHOOK_COMPLETE_PURCHASE:n.z.string(),SLACK_WEBHOOK_REWARDFUL:n.z.string(),FILE_CONVERTER_URL:n.z.string(),FILE_CONVERTER_API_KEY:n.z.string(),AZURE_OPENAI_API_KEY_41:n.z.string(),GOOGLE_GENERATIVE_AI_API_KEY:n.z.string(),CHURNKEY_API_KEY:n.z.string(),US_STRIPE_SECRET_KEY:n.z.string(),EXA_API_KEY:n.z.string(),NODE_ENV:n.z.string().optional(),JINA_API_KEY:n.z.string(),GOOGLE_PRIVATE_KEY:n.z.string(),GOOGLE_CLIENT_EMAIL:n.z.string(),GOOGLE_PROJECT_ID:n.z.string()},client:{NEXT_PUBLIC_BUCKET_NAME:n.z.string(),NEXT_PUBLIC_DOCUMENT_BUCKET_NAME:n.z.string(),NEXT_PUBLIC_AUDIO_BUCKET_NAME:n.z.string(),NEXT_PUBLIC_VIDEO_BUCKET_NAME:n.z.string(),NEXT_PUBLIC_UPLOADED_AUDIO_BUCKET_NAME:n.z.string(),NEXT_PUBLIC_ATTACHMENT_BUCKET_NAME:n.z.string(),NEXT_PUBLIC_CONVERT_BUCKET_NAME:n.z.string(),NEXT_PUBLIC_APP_VERSION:n.z.string()},experimental__runtimeEnv:{NEXT_PUBLIC_BUCKET_NAME:"chat-book",NEXT_PUBLIC_DOCUMENT_BUCKET_NAME:"unriddle-production-documentsbucket-bnkuaovd",NEXT_PUBLIC_AUDIO_BUCKET_NAME:"unriddle-production-audiobucket-bnwxmxhz",NEXT_PUBLIC_VIDEO_BUCKET_NAME:"unriddle-production-videobucket-chuccxem",NEXT_PUBLIC_UPLOADED_AUDIO_BUCKET_NAME:"unriddle-production-uploadedaudiobucket-cbuhrffb",NEXT_PUBLIC_ATTACHMENT_BUCKET_NAME:"unriddle-production-attachmentbucket-chahbfvr",NEXT_PUBLIC_CONVERT_BUCKET_NAME:"unriddle-production-convertbucket-hznnbndx",NEXT_PUBLIC_APP_VERSION:"0.3.0"}})},719421:e=>{"use strict";e.s({formatTimeAgo:()=>n}),e.i(238635),e.i(281186);var t=e.i(555168);e.i(844157),t.z.enum(["feedback","signup","workSignup","nps","newTeam","completePurchase","rewardful","dispute"]);let n=e=>{let t,n=new Date,r=Math.floor(Math.abs(n.getTime()-e.getTime())/864e5);if(n.toDateString()===e.toDateString())t="today";else if(1===r)t="yesterday";else if(r<7)t="".concat(r," days ago");else if(r<30){let e=Math.floor(r/7);t="".concat(e," week").concat(e>1?"s":""," ago")}else{let e=Math.floor(r/30);t="".concat(e," month").concat(e>1?"s":""," ago")}return t}},564083:e=>{"use strict";e.s({default:()=>a});var t=e.i(290479),n=e.i(704255),r=e.i(463371),i=e.i(289702);let a=e=>{let{handlePurposeSelect:a,selectedPurpose:o,handleNextStep:s}=e;return(0,t.jsxs)(r.default,{heading:"How are you planning to use Anara?",subHeading:"This helps us customize your experience",children:[(0,t.jsxs)("div",{className:"w-full flex flex-col mb-4 gap-4",children:[(0,t.jsx)(n.Button,{variant:"onboarding",onClick:()=>a("work"),className:(0,i.cn)("work"===o&&"bg-blue/10 border-blue"),children:"For work"}),(0,t.jsx)(n.Button,{variant:"onboarding",onClick:()=>a("study"),className:(0,i.cn)("study"===o&&"bg-blue/10 border-blue"),children:"For studying"}),(0,t.jsx)(n.Button,{variant:"onboarding",onClick:()=>a("personal"),className:(0,i.cn)("personal"===o&&"bg-blue/10 border-blue"),children:"For personal use"})]}),(0,t.jsx)(n.Button,{className:"h-14 rounded-6 hover:scale-[1.02] ease-in transition-transform",onClick:s,disabled:!o,children:"Continue"})]})}},66987:e=>{"use strict";e.s({default:()=>o});var t=e.i(290479),n=e.i(381612),r=e.i(688862),i=e.i(34818),a=e.i(373150);let o=e=>{let{options:o,label:s,onSelect:l}=e,[u,c]=(0,a.useState)(!1),[d,h]=(0,a.useState)(null),p=(0,a.useRef)(null);(0,a.useEffect)(()=>{let e=e=>{var t;if(!(null==(t=p.current)?void 0:t.contains(e.target))){if(!u)return;c(!1)}};return window.addEventListener("mousedown",e),()=>{window.removeEventListener("mousedown",e)}},[u,c]);let f={initial:{opacity:0,y:-16,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-16,scale:.9},transition:{ease:"easeOut",duration:.1}};return(0,t.jsxs)("div",{className:"relative",ref:p,children:[(0,t.jsxs)("button",{className:"px-7 h-14 font-semibold flex items-center justify-between text-sm rounded-6 gap-2 mt-2 bg-none border-2 border-border-primary w-full ".concat(d?"text-text-primary":"text-text-secondary"),onClick:()=>{c(!u)},children:[d?d.label:s,u?(0,t.jsx)(r.ChevronUp,{color:"#9a9a9a",strokeWidth:3,size:12,direction:u?"up":"down"}):(0,t.jsx)(n.ChevronDown,{color:"#9a9a9a",strokeWidth:3,size:12})]}),u&&(0,t.jsx)(i.motion.div,{className:"absolute top-[3.2rem] flex flex-col bg-background-primary border-border-primary border-2 rounded-6 w-full shadow-light z-20",initial:"initial",animate:"animate",exit:"exit",variants:f,transition:f.transition,children:(0,t.jsx)("div",{className:"p-1",children:o.map((e,n)=>(0,t.jsx)("button",{className:"px-4 py-3 text-sm flex flex-row items-center w-full justify-start gap-3 rounded-4 hover:bg-control-primary cursor-pointer font-medium",onClick:()=>(e=>{h(e),l(e),c(!1)})(e),children:(0,t.jsx)("span",{className:"flex flex-row items-center",children:e.label})},n))})})]})}},381048:e=>{"use strict";e.s({default:()=>c});var t=e.i(290479),n=e.i(704255),r=e.i(66987),i=e.i(463371);let a=[{label:"Researcher",value:"researcher"},{label:"Healthcare",value:"healthcare"},{label:"Educator",value:"educator"},{label:"Lawyer",value:"lawyer"},{label:"Consulting",value:"consulting"},{label:"Finance",value:"finance"},{label:"Operations",value:"operations"},{label:"Engineering",value:"engineering"},{label:"Marketing",value:"marketing"},{label:"Student",value:"student"},{label:"Design",value:"design"},{label:"Other",value:"other"}],o=[{label:"Executive (C-level / VP)",value:"executive"},{label:"Department lead",value:"department_lead"},{label:"Team manager",value:"team_manager"},{label:"Team member",value:"team_member"},{label:"Solo / Freelancer",value:"solo"},{label:"Using Anara just for myself",value:"self"}],s=[{label:"1-50",value:"1-50"},{label:"51-150",value:"51-150"},{label:"151-1000",value:"151-1000"},{label:"1001-10K",value:"1001-10k"},{label:"10K+",value:"10k+"}],l=[{label:"High-school",value:"high_school"},{label:"Undergraduate",value:"undergraduate"},{label:"Postgraduate",value:"postgraduate"},{label:"PhD & beyond",value:"phd"}],u=[{label:"Instagram",value:"instagram"},{label:"TikTok",value:"tiktok"},{label:"Reddit",value:"reddit"},{label:"YouTube",value:"youtube"},{label:"Facebook",value:"facebook"},{label:"Google",value:"google"},{label:"LinkedIn",value:"linkedin"},{label:"X / Twitter",value:"twitter"},{label:"Friend",value:"friend"},{label:"AI",value:"ai"},{label:"Other",value:"other"}],c=e=>{let{handleSelect:c,handleNextStep:d,purpose:h,disabled:p}=e;switch(h){case"work":return(0,t.jsxs)(i.default,{heading:"Tell us about yourself",subHeading:"This helps us customize your experience",children:[(0,t.jsxs)("div",{className:"w-full flex flex-col mb-4 gap-2",children:[(0,t.jsx)(r.default,{options:a,label:"What kind of work do you do?",onSelect:e=>c({value:e.label},"workType")}),(0,t.jsx)(r.default,{options:o,label:"What's your role?",onSelect:e=>c({value:e.label},"workRole")}),(0,t.jsx)(r.default,{options:s,label:"How big is your company?",onSelect:e=>c({value:e.label},"companySize")}),(0,t.jsx)(r.default,{options:u,label:"Where did you hear about us?",onSelect:e=>c({value:e.label},"hearAboutUs")})]}),(0,t.jsx)(n.Button,{onClick:d,disabled:p,variant:p?"secondary":"default",className:"h-14 rounded-6 hover:scale-[1.02] ease-in transition-transform",children:"Continue"})]});case"study":return(0,t.jsxs)(i.default,{heading:"Tell us about yourself",subHeading:"This helps us customize your experience",children:[(0,t.jsxs)("div",{className:"w-full flex flex-col mb-4 gap-2",children:[(0,t.jsx)(r.default,{options:l,label:"What's your level of education?",onSelect:e=>c(e,"educationLevel")}),(0,t.jsx)(r.default,{options:u,label:"Where did you hear about us?",onSelect:e=>c(e,"hearAboutUs")})]}),(0,t.jsx)(n.Button,{onClick:d,disabled:p,variant:p?"secondary":"default",className:"h-14 rounded-6 hover:scale-[1.02] ease-in transition-transform",children:"Continue"})]});case"personal":return(0,t.jsxs)(i.default,{heading:"Tell us about yourself",subHeading:"This helps us customize your experience",children:[(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsx)(r.default,{options:u,label:"Where did you hear about us?",onSelect:e=>c(e,"hearAboutUs")})}),(0,t.jsx)(n.Button,{onClick:d,disabled:p,variant:p?"secondary":"default",className:"h-14 rounded-6 hover:scale-[1.02] ease-in transition-transform",children:"Continue"})]});default:return null}}},242724:e=>{"use strict";e.s({default:()=>p});var t=e.i(290479),n=e.i(334145),r=e.i(373150),i=e.i(525094),a=e.i(555168),o=e.i(704255),s=e.i(663018),l=e.i(571227),u=e.i(252390),c=e.i(814733),d=e.i(289702);let h=a.z.string().min(1,"Email is required").email("Invalid email format"),p=function(e){let{handleNextStep:a}=e,[p,f]=(0,r.useState)(!1),[m,g]=(0,r.useState)(["","",""]),[y,b]=(0,r.useState)([]),[x,w]=(0,r.useState)(""),[k,S]=(0,r.useState)(["","",""]),{track:_}=(0,u.default)(),C=(0,r.useRef)(null),{mutate:A,isPending:E}=c.api.referral.sendReferralEmails.useMutation(),{mutate:T,isPending:M}=c.api.referral.upsertAffiliate.useMutation(),I=e=>{var t,n;if(!e)return{isValid:!0};let r=h.safeParse(e);return{isValid:r.success,error:r.success?void 0:(null==(n=r.error)||null==(t=n.issues)?void 0:t.length)>0?r.error.issues[0].message:"Invalid email format"}},N=()=>p?null==y?void 0:y.filter(e=>e.isValid).map(e=>e.value):null==m?void 0:m.filter(e=>e&&I(e).isValid),D=N(),P=e=>{let t=e.trim();if(!t)return;let n=I(t);b([...y,{id:Math.random().toString(36).substring(2,9),value:t,isValid:n.isValid}]),w("")};return(0,t.jsxs)("div",{className:"bg-background-primary p-9",children:[(0,t.jsxs)("div",{className:"text-center mb-9",children:[(0,t.jsx)("h2",{className:"text-2xl leading-[120%] font-semibold mb-4",children:"Invite and earn $10 cash for every friend that joins"}),(0,t.jsx)("p",{className:"text-text-secondary font-medium text-sm leading-[130%]",children:"You get $10 cash, they get $10 off"})]}),(0,t.jsx)("div",{className:"space-y-4",children:p?(0,t.jsx)("div",{className:"border-2 bg-background-primary rounded-4 p-4 min-h-32 max-h-44 mb-7 cursor-text overflow-y-auto",onClick:()=>{C.current&&C.current.focus()},children:(0,t.jsxs)("div",{className:"flex flex-wrap gap-3",children:[y.map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-3 px-3 py-2 rounded-4 text-sm ".concat(e.isValid?"bg-popover-hover-solid":"bg-control-destructive border-destructive-solid"),children:[(0,t.jsx)("span",{children:e.value}),(0,t.jsx)("button",{type:"button",onClick:()=>{var t;return t=e.id,void b(y.filter(e=>e.id!==t))},className:"text-text-secondary/50 hover:text-text-secondary",children:(0,t.jsx)(n.X,{size:14})})]},e.id)),(0,t.jsx)("input",{ref:C,type:"text",value:x,onChange:e=>w(e.target.value),onKeyDown:e=>{if("Enter"===e.key||","===e.key)e.preventDefault(),P(x);else if("Backspace"===e.key&&!x&&y.length>0){let e=[...y];e.pop(),b(e)}},onPaste:e=>{for(let t of(e.preventDefault(),e.clipboardData.getData("text").split(/[,;\s]+/)))t.trim()&&P(t.trim())},onBlur:()=>{x&&P(x)},className:"flex-grow bg-transparent min-w-[120px] outline-none border-none text-sm tracking-[-0.24px]",placeholder:0===y.length?"Enter emails":""})]})}):(0,t.jsxs)(t.Fragment,{children:[m.map((e,n)=>(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(l.Input,{type:"email",placeholder:"Email",value:e,onChange:e=>((e,t)=>{let n=[...m];n[e]=t,g(n);let r=[...k],i=I(t);r[e]=i.error||"",S(r)})(n,e.target.value),className:(0,d.cn)("w-full h-14  rounded-6 border-2",k[n]&&"border-destructive-solid")}),k[n]&&(0,t.jsx)("p",{className:"text-red-500 text-xs mt-2",children:k[n]})]},"".concat(n+1,"sdaa"))),(0,t.jsx)("div",{className:"flex items-center justify-center w-full pb-6",children:(0,t.jsx)("button",{onClick:()=>{b(m.filter(e=>e&&I(e).isValid).map(e=>({id:Math.random().toString(36).substring(2,9),value:e,isValid:!0}))),f(!0),w(""),setTimeout(()=>{C.current&&C.current.focus()},0),_("onboarding_referral_toggle_invites")},className:"hover:bg-control-primary px-4 py-2 rounded-4 text-text-secondary font-medium text-xs leading-[20px] tracking-[-0.32px] flex items-center justify-center",children:"+ Add more invites"})})]})}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(o.Button,{className:"w-full  rounded-6 h-14",variant:"inverse",onClick:()=>{let e=N();if(0===e.length)return void a();_("onboarding_referral_submit",{emails_total_referred:e.length}),A({emails:e},{onSuccess:e=>{e&&-1!==e.successful||(0,i.toast)("Something went wrong when sending invites"),a()}})},disabled:E,children:E?(0,t.jsx)(s.LoadingSpinner,{variant:"small",color:"gray"}):D.length>0?"Invite and take me to Anara":"Take me to Anara"}),(0,t.jsx)(o.Button,{variant:"secondary",className:"w-full rounded-6 h-14",onClick:()=>{_("onboarding_referral_copy_link"),T({},{onSuccess:e=>{e?((0,i.toast)("Invite link copied to clipboard"),navigator.clipboard.writeText(e||"")):(0,i.toast)("Something went wrong when getting affiliate url")}})},disabled:M,children:M?(0,t.jsx)(s.LoadingSpinner,{variant:"small",color:"gray"}):"Copy invite link"})]}),(0,t.jsx)("div",{className:"text-center text-sm text-text-primary mt-7",children:"Join 2M+ researchers"})]})}},785663:e=>{"use strict";e.s({default:()=>w});var t=e.i(290479),n=e.i(457443),r=e.i(885905),i=e.i(250928),a=e.i(527941),o=e.i(705222),s=e.i(252390),l=e.i(814733),u=e.i(289702),c=e.i(719421),d=e.i(397711),h=e.i(118246),p=e.i(623053),f=e.i(373150),m=e.i(332938),g=e.i(956073),y=e.i(564083),b=e.i(381048),x=e.i(242724);let w=()=>{let{user:e}=(0,r.useAuth)(),{userCountry:w}=(0,i.useUnriddle)(),[k,S]=(0,f.useState)("purpose"),[_,C]=(0,f.useState)({}),[A,E]=(0,f.useState)(null),[T,M]=(0,f.useState)(!1),[I,N]=(0,f.useState)(!1),{track:D}=(0,s.default)(),{updateUser:P}=(0,a.default)(),R=(0,d.useRouter)(),O=(0,d.usePathname)(),j=(0,d.useSearchParams)(),{mutateAsync:F}=l.api.slack.message.useMutation(),{mutateAsync:L}=l.api.userOnboarding.upsert.useMutation(),z=(0,p.usePostHog)(),{height:B}=(0,o.default)(),[U]=(0,h.useQueryState)("chatbotId",h.parseAsString);(0,f.useEffect)(()=>{let e=new URLSearchParams((null==j?void 0:j.toString())||"");return e.set("onboarding","true"),R.replace("".concat(O,"?").concat(e.toString())),()=>{let e=new URLSearchParams((null==j?void 0:j.toString())||"");e.delete("onboarding");let t=e.toString();R.replace("".concat(O).concat(t?"?".concat(t):""))}},[O,R,j]),(0,f.useEffect)(()=>{e&&!e.isOnboarded&&window.gtag&&window.gtag("event","conversion",{send_to:"AW-16774945281/OXIACKLMueoZEIG09b4-"})},[e]);let H=async t=>{let n={..._,[k]:t};switch(C(n),k){case"purpose":S("questions");break;case"questions":S("referral");break;case"referral":if(N(!0),"work"===n.purpose){let t=(t=>{let n=new Date(e?e.createdAt:"");return"New Work user:\n  - Email: ".concat(e?e.email:"N/A","\n  - Work type: ").concat(t.workType,"\n  - Work role: ").concat(t.workRole,"\n  - Company size: ").concat(t.companySize,"\n  - Heard about us from: ").concat(t.hearAboutUs,"\n  - Country: ").concat(w,"\n  - Account created: ").concat((0,c.formatTimeAgo)(n))})(n);try{await F({message:t,type:"workSignup"})}catch(e){console.error("Failed to send message to Slack",e)}}e&&localStorage.setItem("isOnboarded_".concat(e.id),"true"),D("Onboarding Complete",n),U&&R.push("/b/".concat(U));try{e?(await P({email:e.email,isOnboarded:!0,...n}),await L(n),z.setPersonProperties(n)):console.error("User is null or undefined")}catch(e){console.error("Failed to update onboarding response",e)}finally{N(!1)}}M(!1)};return!e||(null==e?void 0:e.isOnboarded)?null:(0,t.jsx)(n.Dialog,{open:!1===e.isOnboarded,children:(0,t.jsx)(n.DialogContent,{className:"!w-screen h-dvh max-w-none m-0 p-0 rounded-[0px]",hideCloseButton:!0,children:(0,t.jsxs)("div",{className:"w-full h-full flex flex-col justify-center items-center",children:[(0,t.jsx)(g.default,{onBack:()=>{let e=["purpose","questions","referral"],t=e.indexOf(k);t>0&&S(e[t-1])},disabled:"purpose"===k}),(0,t.jsxs)("div",{className:(0,u.cn)("w-full max-w-sm flex flex-col items-stretch px-7",B<700&&"pt-24"),children:["purpose"===k&&(0,t.jsx)(y.default,{handlePurposeSelect:e=>{E(e),M(!0)},selectedPurpose:A,handleNextStep:()=>{A&&H(A)}}),"questions"===k&&(0,t.jsx)(b.default,{handleSelect:(e,t)=>{C(n=>{let r={...n,[t]:e.value};return"questions"===k&&M(("work"===_.purpose?["workType","workRole","companySize","hearAboutUs"]:"study"===_.purpose?["educationLevel","hearAboutUs"]:"personal"===_.purpose?["hearAboutUs"]:[]).every(e=>r[e])),r})},handleNextStep:()=>H(_[k]||""),disabled:!T||I,purpose:A}),"referral"===k&&(0,t.jsx)(x.default,{handleNextStep:()=>H("referral")})]}),(0,t.jsx)(m.default,{variant:k})]})})})}},116075:e=>{"use strict";e.s({CircleAlert:()=>t.default});var t=e.i(353178)},894663:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("circle-dashed",[["path",{d:"M10.1 2.182a10 10 0 0 1 3.8 0",key:"5ilxe3"}],["path",{d:"M13.9 21.818a10 10 0 0 1-3.8 0",key:"11zvb9"}],["path",{d:"M17.609 3.721a10 10 0 0 1 2.69 2.7",key:"1iw5b2"}],["path",{d:"M2.182 13.9a10 10 0 0 1 0-3.8",key:"c0bmvh"}],["path",{d:"M20.279 17.609a10 10 0 0 1-2.7 2.69",key:"1ruxm7"}],["path",{d:"M21.818 10.1a10 10 0 0 1 0 3.8",key:"qkgqxc"}],["path",{d:"M3.721 6.391a10 10 0 0 1 2.7-2.69",key:"1mcia2"}],["path",{d:"M6.391 20.279a10 10 0 0 1-2.69-2.7",key:"1fvljs"}]])},338403:e=>{"use strict";e.s({CircleDashed:()=>t.default});var t=e.i(894663)},957575:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]])},343741:e=>{"use strict";e.s({ClipboardIcon:()=>t.default});var t=e.i(957575)},960744:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("file-audio",[["path",{d:"M17.5 22h.5a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"rslqgf"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M2 19a2 2 0 1 1 4 0v1a2 2 0 1 1-4 0v-4a6 6 0 0 1 12 0v4a2 2 0 1 1-4 0v-1a2 2 0 1 1 4 0",key:"9f7x3i"}]])},979461:e=>{"use strict";e.s({FileAudio:()=>t.default});var t=e.i(960744)},768104:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("file-image",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]])},269456:e=>{"use strict";e.s({FileImage:()=>t.default});var t=e.i(768104)},402537:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("file-pen",[["path",{d:"M12.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v9.5",key:"1couwa"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M13.378 15.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1y4qbx"}]])},578018:e=>{"use strict";e.s({FilePen:()=>t.default});var t=e.i(402537)},837918:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},360911:e=>{"use strict";e.s({FileText:()=>t.default});var t=e.i(837918)},777800:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("file-play",[["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}],["path",{d:"M15.033 13.44a.647.647 0 0 1 0 1.12l-4.065 2.352a.645.645 0 0 1-.968-.56v-4.704a.645.645 0 0 1 .967-.56z",key:"1tzo1f"}]])},770523:e=>{"use strict";e.s({FileVideo:()=>t.default});var t=e.i(777800)},90935:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]])},884575:e=>{"use strict";e.s({FolderIcon:()=>t.default});var t=e.i(90935)},350129:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]])},502753:e=>{"use strict";e.s({Globe:()=>t.default});var t=e.i(350129)},358056:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("layers-2",[["path",{d:"M13 13.74a2 2 0 0 1-2 0L2.5 8.87a1 1 0 0 1 0-1.74L11 2.26a2 2 0 0 1 2 0l8.5 4.87a1 1 0 0 1 0 1.74z",key:"15q6uc"}],["path",{d:"m20 14.285 1.5.845a1 1 0 0 1 0 1.74L13 21.74a2 2 0 0 1-2 0l-8.5-4.87a1 1 0 0 1 0-1.74l1.5-.845",key:"byia6g"}]])},471851:e=>{"use strict";e.s({Layers2:()=>t.default});var t=e.i(358056)},29124:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("messages-square",[["path",{d:"M16 10a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 14.286V4a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z",key:"1n2ejm"}],["path",{d:"M20 9a2 2 0 0 1 2 2v10.286a.71.71 0 0 1-1.212.502l-2.202-2.202A2 2 0 0 0 17.172 19H10a2 2 0 0 1-2-2v-1",key:"1qfcsi"}]])},165393:e=>{"use strict";e.s({MessagesSquareIcon:()=>t.default});var t=e.i(29124)},92943:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("mic",[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]])},28492:e=>{"use strict";e.s({Mic:()=>t.default});var t=e.i(92943)},998145:e=>{"use strict";e.s({default:()=>f});var t=e.i(343741),n=e.i(979461),r=e.i(269456),i=e.i(578018),a=e.i(360911),o=e.i(770523),s=e.i(884575),l=e.i(490282),u=e.i(502753),c=e.i(471851),d=e.i(165393),h=e.i(28492),p=e.i(430266);let f=e=>{let{type:f,collapsed:m,fallback:g=null}=e;return(0,p.match)(f).with("DOCUMENT",()=>a.FileText).with("GROUP",()=>m?s.FolderIcon:l.FolderOpen).with("NOTE",()=>i.FilePen).with("WEBSITE",()=>u.Globe).with("IMAGE",()=>r.FileImage).with("TEXT",()=>t.ClipboardIcon).with("VIDEO",()=>o.FileVideo).with("RECORDING",()=>h.Mic).with("AUDIO",()=>n.FileAudio).with("QUIZ",()=>c.Layers2).with("NOTHING","CHAT",()=>d.MessagesSquareIcon).otherwise(()=>g)}},461655:e=>{"use strict";e.s({default:()=>o});var t=e.i(373150),n=e.i(684175),r=e.i(814733),i=e.i(46621),a=e.i(852951);let o=e=>{let{addChatbot:o}=(0,a.useWorkspaceActions)(),{currentPath:s}=(0,n.useActiveSidebarLibrary)(),{mutate:l}=(0,i.useMarkStepCompletedWithTracking)(),{mutateAsync:u,isPending:c,error:d}=r.api.chatbot.createNote.useMutation({...e,onSuccess:(t,n,r)=>{var i;t&&(l({workflowKey:"create-new-note",stepKey:"create-note"}),o({...t,isIndexed:!1,ingestionStatus:null,publicationDate:null,updatedAt:new Date,authors:null,summary:null,parentChatbotId:t.id,lastViewedAt:null,publication:null,volume:null,issue:null,pages:null,doi:null,issn:null,isbn:null,abstract:null,citationCount:0,docMetadataurl:null}),null==e||null==(i=e.onSuccess)||i.call(e,t,n,r))}});return{createNote:(0,t.useCallback)(e=>{let t,n;return(null==s?void 0:s.type)==="GROUP"&&(t=s.id),(null==s?void 0:s.teamId)&&(n=s.teamId),u({...e,groupId:t,teamId:n})},[s]),isPending:c,error:d}}},328885:e=>{"use strict";e.s({ClientSideSuspense:()=>r});var t=e.i(373150),n=e.i(290479);function r(e){let[r,i]=(0,t.useState)(!1);return(0,t.useEffect)(()=>{i(!0)},[]),(0,n.jsx)(t.Suspense,{fallback:e.fallback,children:r?"function"==typeof e.children?e.children():e.children:e.fallback})}},103447:e=>{"use strict";e.s({RoomProvider:()=>t._RoomProvider});var t=e.i(208955)},227261:e=>{"use strict";e.s({default:()=>p,getDefaults:()=>d,getNoteSessionId:()=>o,isLibraryView:()=>h,useChatbotStore:()=>c});var t=e.i(224879),n=e.i(555168),r=e.i(138626),i=e.i(496438),a=e.i(144992);let o=()=>{let e=sessionStorage.getItem("editor-session-id"),n=sessionStorage.getItem("editor-session-created-at");if(e&&n&&"string"==typeof e){let t=new Date(n);if((new Date().getTime()-t.getTime())/6e4<10)return e}let r=(0,t.default)(),i=new Date().toISOString();return sessionStorage.setItem("editor-session-id",r),sessionStorage.setItem("editor-session-created-at",i),r},s=n.z.enum(["metadata","notes","chat","note-history","metadata.related","metadata.annotations"]),l=e=>{let t=e.includes("metadata");if([t,e.includes("notes"),e.includes("note-history")].filter(Boolean).length>1){let t=Math.max(e.lastIndexOf("metadata"),e.lastIndexOf("notes"),e.lastIndexOf("note-history")),n=e[t];return[...e.filter(e=>"metadata"!==e&&"notes"!==e&&"note-history"!==e),n]}return e},u=(0,a.createZustandContext)(e=>{let{active:t,track:n,mode:i}=e;return(0,r.createStore)((e,r)=>({active:t,mode:i,setMode:t=>{e({mode:t})},viewerState:"minimized",setViewerState:t=>{let i=r().viewerState;i!==t&&(n("viewer_state_changed",{from:i,to:t}),e({viewerState:t}))},toggleViewer:()=>{let e=r().viewerState;r().setViewerState("minimized"===e?"maximized":"minimized")},viewerSize:{width:600,height:800},setViewerSize:t=>{e({viewerSize:t})},setAll:t=>{let i=l(t.map(e=>s.parse(e)));((e,t,n)=>{let r=t.filter(e=>!n.includes(e)),i=n.filter(e=>!t.includes(e));for(let t of r)e("sidebar_open",{sidebar:t});for(let t of i)e("sidebar_closed",{sidebar:t})})(n,i,r().active),e({active:i})},viewType:"table",setViewType:t=>{e({viewType:t})},toggle:(t,i)=>{let a=r().active;n(i?"sidebar_open":"sidebar_closed",{sidebar:t}),i?(e({active:l([...a,t])}),"note-history"===t&&e({isHistorySidebarOpen:!0})):(e({active:a.filter(e=>e!==t)}),"note-history"===t&&(r().resetVersionHistory(),e({isHistorySidebarOpen:!1})))},collapseRightSidebar:()=>{let t=r().active,i=t.find(e=>"metadata"===e||"notes"===e||"note-history"===e);i&&n("sidebar_closed",{sidebar:i}),e({active:t.filter(e=>"metadata"!==e&&"notes"!==e&&"note-history"!==e)})},selectedVersion:null,isPreviewingVersion:!1,isHistorySidebarOpen:!1,selectVersion:t=>{if(!t.contents)return void console.error("Version missing contents:",t);let n=Date.now();e({selectedVersion:{...t,_timestamp:n},isPreviewingVersion:!0})},closeVersionPreview:()=>{e({selectedVersion:null,isPreviewingVersion:!1})},toggleHistorySidebar:()=>{let t=!r().isHistorySidebarOpen;e({isHistorySidebarOpen:t}),(0,r().toggle)("note-history",t),t||r().resetVersionHistory()},resetVersionHistory:()=>{e({selectedVersion:null,isPreviewingVersion:!1})}}))}),c=e=>(0,i.useStore)(u.useContext(),e),d=e=>e&&h(e)?[]:(null==e?void 0:e.type)==="full-chat-library"?["chat"]:"NOTE"===(null==e?void 0:e.chatbotType)?[]:["chat"],h=e=>(null==e?void 0:e.type)==="full-chat-library"&&e.isInLibraryWindow,p=u},410601:e=>{"use strict";e.s({useGlobalEditor:()=>i});var t=e.i(647968),n=e.i(608294);let r=(0,e.i(227348).atomFamily)(e=>(0,t.atom)(null)),i=e=>{let[t,i]=(0,n.useAtom)(r(e));return{editor:t,setEditor:i}}},71963:e=>{"use strict";e.s({})},131841:e=>{"use strict";e.s({}),e.i(71963)},58247:e=>{"use strict";function t(e){this.content=e}e.s({default:()=>n}),t.prototype={constructor:t,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return -1},get:function(e){var t=this.find(e);return -1==t?void 0:this.content[t+1]},update:function(e,n,r){var i=r&&r!=e?this.remove(r):this,a=i.find(e),o=i.content.slice();return -1==a?o.push(r||e,n):(o[a+1]=n,r&&(o[a]=r)),new t(o)},remove:function(e){var n=this.find(e);if(-1==n)return this;var r=this.content.slice();return r.splice(n,2),new t(r)},addToStart:function(e,n){return new t([e,n].concat(this.remove(e).content))},addToEnd:function(e,n){var r=this.remove(e).content.slice();return r.push(e,n),new t(r)},addBefore:function(e,n,r){var i=this.remove(n),a=i.content.slice(),o=i.find(e);return a.splice(-1==o?a.length:o,0,n,r),new t(a)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return(e=t.from(e)).size?new t(e.content.concat(this.subtract(e).content)):this},append:function(e){return(e=t.from(e)).size?new t(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var n=this;e=t.from(e);for(var r=0;r<e.content.length;r+=2)n=n.remove(e.content[r]);return n},toObject:function(){var e={};return this.forEach(function(t,n){e[t]=n}),e},get size(){return this.content.length>>1}},t.from=function(e){if(e instanceof t)return e;var n=[];if(e)for(var r in e)n.push(r,e[r]);return new t(n)};let n=t},490077:e=>{"use strict";e.s({DOMParser:()=>z,DOMSerializer:()=>K,Fragment:()=>n,Mark:()=>o,MarkType:()=>j,Node:()=>k,NodeRange:()=>x,ReplaceError:()=>s,Schema:()=>F,Slice:()=>l});var t=e.i(58247);class n{nodesBetween(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4?arguments[4]:void 0;for(let a=0,o=0;o<t;a++){let s=this.content[a],l=o+s.nodeSize;if(l>e&&!1!==n(s,r+o,i||null,a)&&s.content.size){let i=o+1;s.nodesBetween(Math.max(0,e-i),Math.min(s.content.size,t-i),n,r+i)}o=l}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,n,r){let i="",a=!0;return this.nodesBetween(e,t,(o,s)=>{let l=o.isText?o.text.slice(Math.max(e,s)-s,t-s):o.isLeaf?r?"function"==typeof r?r(o):r:o.type.spec.leafText?o.type.spec.leafText(o):"":"";o.isBlock&&(o.isLeaf&&l||o.isTextblock)&&n&&(a?a=!1:i+=n),i+=l},0),i}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,i=this.content.slice(),a=0;for(t.isText&&t.sameMarkup(r)&&(i[i.length-1]=t.withText(t.text+r.text),a=1);a<e.content.length;a++)i.push(e.content[a]);return new n(i,this.size+e.size)}cut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.size;if(0==e&&t==this.size)return this;let r=[],i=0;if(t>e)for(let n=0,a=0;a<t;n++){let o=this.content[n],s=a+o.nodeSize;s>e&&((a<e||s>t)&&(o=o.isText?o.cut(Math.max(0,e-a),Math.min(o.text.length,t-a)):o.cut(Math.max(0,e-a-1),Math.min(o.content.size,t-a-1))),r.push(o),i+=o.nodeSize),a=s}return new n(r,i)}cutByIndex(e,t){return e==t?n.empty:0==e&&t==this.content.length?this:new n(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let i=this.content.slice(),a=this.size+t.nodeSize-r.nodeSize;return i[e]=t,new n(i,a)}addToStart(e){return new n([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new n(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,n=0;t<this.content.length;t++){let r=this.content[t];e(r,n,t),n+=r.nodeSize}}findDiffStart(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function e(t,n,r){for(let i=0;;i++){if(i==t.childCount||i==n.childCount)return t.childCount==n.childCount?null:r;let a=t.child(i),o=n.child(i);if(a==o){r+=a.nodeSize;continue}if(!a.sameMarkup(o))return r;if(a.isText&&a.text!=o.text){for(let e=0;a.text[e]==o.text[e];e++)r++;return r}if(a.content.size||o.content.size){let t=e(a.content,o.content,r+1);if(null!=t)return t}r+=a.nodeSize}}(this,e,t)}findDiffEnd(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.size,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.size;return function e(t,n,r,i){for(let a=t.childCount,o=n.childCount;;){if(0==a||0==o)return a==o?null:{a:r,b:i};let s=t.child(--a),l=n.child(--o),u=s.nodeSize;if(s==l){r-=u,i-=u;continue}if(!s.sameMarkup(l))return{a:r,b:i};if(s.isText&&s.text!=l.text){let e=0,t=Math.min(s.text.length,l.text.length);for(;e<t&&s.text[s.text.length-e-1]==l.text[l.text.length-e-1];)e++,r--,i--;return{a:r,b:i}}if(s.content.size||l.content.size){let t=e(s.content,l.content,r-1,i-1);if(t)return t}r-=u,i-=u}}(this,e,t,n)}findIndex(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;if(0==e)return i(0,e);if(e==this.size)return i(this.content.length,e);if(e>this.size||e<0)throw RangeError("Position ".concat(e," outside of fragment (").concat(this,")"));for(let n=0,r=0;;n++){let a=r+this.child(n).nodeSize;if(a>=e){if(a==e||t>0)return i(n+1,a);return i(n,r)}r=a}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return n.empty;if(!Array.isArray(t))throw RangeError("Invalid input for Fragment.fromJSON");return new n(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return n.empty;let t,r=0;for(let n=0;n<e.length;n++){let i=e[n];r+=i.nodeSize,n&&i.isText&&e[n-1].sameMarkup(i)?(t||(t=e.slice(0,n)),t[t.length-1]=i.withText(t[t.length-1].text+i.text)):t&&t.push(i)}return new n(t||e,r)}static from(e){if(!e)return n.empty;if(e instanceof n)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new n([e],e.nodeSize);throw RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}constructor(e,t){if(this.content=e,this.size=t||0,null==t)for(let t=0;t<e.length;t++)this.size+=e[t].nodeSize}}n.empty=new n([],0);let r={index:0,offset:0};function i(e,t){return r.index=e,r.offset=t,r}function a(e,t){if(e===t)return!0;if(!(e&&"object"==typeof e)||!(t&&"object"==typeof t))return!1;let n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!a(e[n],t[n]))return!1}else{for(let n in e)if(!(n in t)||!a(e[n],t[n]))return!1;for(let n in t)if(!(n in e))return!1}return!0}class o{addToSet(e){let t,n=!1;for(let r=0;r<e.length;r++){let i=e[r];if(this.eq(i))return e;if(this.type.excludes(i.type))t||(t=e.slice(0,r));else{if(i.type.excludes(this.type))return e;!n&&i.type.rank>this.type.rank&&(t||(t=e.slice(0,r)),t.push(this),n=!0),t&&t.push(i)}}return t||(t=e.slice()),n||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&a(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw RangeError("Invalid input for Mark.fromJSON");let n=e.marks[t.type];if(!n)throw RangeError("There is no mark type ".concat(t.type," in this schema"));let r=n.create(t.attrs);return n.checkAttrs(r.attrs),r}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].eq(t[n]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&0==e.length)return o.none;if(e instanceof o)return[e];let t=e.slice();return t.sort((e,t)=>e.type.rank-t.type.rank),t}constructor(e,t){this.type=e,this.attrs=t}}o.none=[];class s extends Error{}class l{get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let n=function e(t,n,r,i){let{index:a,offset:o}=t.findIndex(n),s=t.maybeChild(a);if(o==n||s.isText)return i&&!i.canReplace(a,a,r)?null:t.cut(0,n).append(r).append(t.cut(n));let l=e(s.content,n-o-1,r);return l&&t.replaceChild(a,s.copy(l))}(this.content,e+this.openStart,t);return n&&new l(n,this.openStart,this.openEnd)}removeBetween(e,t){return new l(function e(t,n,r){let{index:i,offset:a}=t.findIndex(n),o=t.maybeChild(i),{index:s,offset:l}=t.findIndex(r);if(a==n||o.isText){if(l!=r&&!t.child(s).isText)throw RangeError("Removing non-flat range");return t.cut(0,n).append(t.cut(r))}if(i!=s)throw RangeError("Removing non-flat range");return t.replaceChild(i,o.copy(e(o.content,n-a-1,r-a-1)))}(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return l.empty;let r=t.openStart||0,i=t.openEnd||0;if("number"!=typeof r||"number"!=typeof i)throw RangeError("Invalid input for Slice.fromJSON");return new l(n.fromJSON(e,t.content),r,i)}static maxOpen(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],n=0,r=0;for(let r=e.firstChild;r&&!r.isLeaf&&(t||!r.type.spec.isolating);r=r.firstChild)n++;for(let n=e.lastChild;n&&!n.isLeaf&&(t||!n.type.spec.isolating);n=n.lastChild)r++;return new l(e,n,r)}constructor(e,t,n){this.content=e,this.openStart=t,this.openEnd=n}}function u(e,t){if(!t.type.compatibleContent(e.type))throw new s("Cannot join "+t.type.name+" onto "+e.type.name)}function c(e,t,n){let r=e.node(n);return u(r,t.node(n)),r}function d(e,t){let n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function h(e,t,n,r){let i=(t||e).node(n),a=0,o=t?t.index(n):i.childCount;e&&(a=e.index(n),e.depth>n?a++:e.textOffset&&(d(e.nodeAfter,r),a++));for(let e=a;e<o;e++)d(i.child(e),r);t&&t.depth==n&&t.textOffset&&d(t.nodeBefore,r)}function p(e,t){return e.type.checkContent(t),e.copy(t)}function f(e,t,r){let i=[];return h(null,e,r,i),e.depth>r&&d(p(c(e,t,r+1),f(e,t,r+1)),i),h(t,null,r,i),new n(i)}l.empty=new l(n.empty,0,0);class m{resolveDepth(e){return null==e?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[3*this.resolveDepth(e)]}index(e){return this.path[3*this.resolveDepth(e)+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e!=this.depth||this.textOffset?1:0)}start(e){return 0==(e=this.resolveDepth(e))?0:this.path[3*e-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(!(e=this.resolveDepth(e)))throw RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]}after(e){if(!(e=this.resolveDepth(e)))throw RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]+this.path[3*e].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let n=this.pos-this.path[this.path.length-1],r=e.child(t);return n?e.child(t).cut(n):r}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):0==e?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let n=this.path[3*t],r=0==t?0:this.path[3*t-1]+1;for(let t=0;t<e;t++)r+=n.child(t).nodeSize;return r}marks(){let e=this.parent,t=this.index();if(0==e.content.size)return o.none;if(this.textOffset)return e.child(t).marks;let n=e.maybeChild(t-1),r=e.maybeChild(t);if(!n){let e=n;n=r,r=e}let i=n.marks;for(var a=0;a<i.length;a++)!1!==i[a].type.spec.inclusive||r&&i[a].isInSet(r.marks)||(i=i[a--].removeFromSet(i));return i}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let n=t.marks,r=e.parent.maybeChild(e.index());for(var i=0;i<n.length;i++)!1!==n[i].type.spec.inclusive||r&&n[i].isInSet(r.marks)||(n=n[i--].removeFromSet(n));return n}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,t=arguments.length>1?arguments[1]:void 0;if(e.pos<this.pos)return e.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!t||t(this.node(n))))return new x(this,e,n);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw RangeError("Position "+t+" out of range");let n=[],r=0,i=t;for(let t=e;;){let{index:e,offset:a}=t.content.findIndex(i),o=i-a;if(n.push(t,e,r+a),!o||(t=t.child(e)).isText)break;i=o-1,r+=a+1}return new m(t,n,i)}static resolveCached(e,t){let n=b.get(e);if(n)for(let e=0;e<n.elts.length;e++){let r=n.elts[e];if(r.pos==t)return r}else b.set(e,n=new g);let r=n.elts[n.i]=m.resolve(e,t);return n.i=(n.i+1)%y,r}constructor(e,t,n){this.pos=e,this.path=t,this.parentOffset=n,this.depth=t.length/3-1}}class g{constructor(){this.elts=[],this.i=0}}let y=12,b=new WeakMap;class x{get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}constructor(e,t,n){this.$from=e,this.$to=t,this.depth=n}}let w=Object.create(null);class k{get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.content.nodesBetween(e,t,n,r,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,n,r){return this.content.textBetween(e,t,n,r)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,n){return this.type==e&&a(this.attrs,t||e.defaultAttrs||w)&&o.sameSet(this.marks,n||o.none)}copy(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e==this.content?this:new k(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new k(this.type,this.attrs,this.content,e)}cut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.content.size;return 0==e&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.content.size,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e==t)return l.empty;let r=this.resolve(e),i=this.resolve(t),a=n?0:r.sharedDepth(t),o=r.start(a);return new l(r.node(a).content.cut(r.pos-o,i.pos-o),r.depth-a,i.depth-a)}replace(e,t,r){var i=this.resolve(e),a=this.resolve(t);if(r.openStart>i.depth)throw new s("Inserted content deeper than insertion position");if(i.depth-r.openStart!=a.depth-r.openEnd)throw new s("Inconsistent open depths");return function e(t,r,i,a){let o=t.index(a),s=t.node(a);if(o==r.index(a)&&a<t.depth-i.openStart){let n=e(t,r,i,a+1);return s.copy(s.content.replaceChild(o,n))}if(!i.content.size)return p(s,f(t,r,a));if(i.openStart||i.openEnd||t.depth!=a||r.depth!=a){let{start:e,end:o}=function(e,t){let r=t.depth-e.openStart,i=t.node(r).copy(e.content);for(let e=r-1;e>=0;e--)i=t.node(e).copy(n.from(i));return{start:i.resolveNoCache(e.openStart+r),end:i.resolveNoCache(i.content.size-e.openEnd-r)}}(i,t);return p(s,function e(t,r,i,a,o){let s=t.depth>o&&c(t,r,o+1),l=a.depth>o&&c(i,a,o+1),m=[];return h(null,t,o,m),s&&l&&r.index(o)==i.index(o)?(u(s,l),d(p(s,e(t,r,i,a,o+1)),m)):(s&&d(p(s,f(t,r,o+1)),m),h(r,i,o,m),l&&d(p(l,f(i,a,o+1)),m)),h(a,null,o,m),new n(m)}(t,e,o,r,a))}{let e=t.parent,n=e.content;return p(e,n.cut(0,t.parentOffset).append(i.content).append(n.cut(r.parentOffset)))}}(i,a,r,0)}nodeAt(e){for(let t=this;;){let{index:n,offset:r}=t.content.findIndex(e);if(!(t=t.maybeChild(n)))return null;if(r==e||t.isText)return t;e-=r+1}}childAfter(e){let{index:t,offset:n}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:n}}childBefore(e){if(0==e)return{node:null,index:0,offset:0};let{index:t,offset:n}=this.content.findIndex(e);if(n<e)return{node:this.content.child(t),index:t,offset:n};let r=this.content.child(t-1);return{node:r,index:t-1,offset:n-r.nodeSize}}resolve(e){return m.resolveCached(this,e)}resolveNoCache(e){return m.resolve(this,e)}rangeHasMark(e,t,n){let r=!1;return t>e&&this.nodesBetween(e,t,e=>(n.isInSet(e.marks)&&(r=!0),!r)),r}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),_(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.empty,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:r.childCount,o=this.contentMatchAt(e).matchFragment(r,i,a),s=o&&o.matchFragment(this.content,t);if(!s||!s.validEnd)return!1;for(let e=i;e<a;e++)if(!this.type.allowsMarks(r.child(e).marks))return!1;return!0}canReplaceWith(e,t,n,r){if(r&&!this.type.allowsMarks(r))return!1;let i=this.contentMatchAt(e).matchType(n),a=i&&i.matchFragment(this.content,t);return!!a&&a.validEnd}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=o.none;for(let t=0;t<this.marks.length;t++){let n=this.marks[t];n.type.checkAttrs(n.attrs),e=n.addToSet(e)}if(!o.sameSet(e,this.marks))throw RangeError("Invalid collection of marks for node ".concat(this.type.name,": ").concat(this.marks.map(e=>e.type.name)));this.content.forEach(e=>e.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(e=>e.toJSON())),e}static fromJSON(e,t){let r;if(!t)throw RangeError("Invalid input for Node.fromJSON");if(t.marks){if(!Array.isArray(t.marks))throw RangeError("Invalid mark data for Node.fromJSON");r=t.marks.map(e.markFromJSON)}if("text"==t.type){if("string"!=typeof t.text)throw RangeError("Invalid text node in JSON");return e.text(t.text,r)}let i=n.fromJSON(e,t.content),a=e.nodeType(t.type).create(t.attrs,i,r);return a.type.checkAttrs(a.attrs),a}constructor(e,t,r,i=o.none){this.type=e,this.attrs=t,this.marks=i,this.content=r||n.empty}}k.prototype.text=void 0;class S extends k{toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):_(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new S(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new S(this.type,this.attrs,e,this.marks)}cut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.text.length;return 0==e&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}constructor(e,t,n,r){if(super(e,t,null,r),!n)throw RangeError("Empty text nodes are not allowed");this.text=n}}function _(e,t){for(let n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}class C{static parse(e,t){var n;let r,i=new A(e,t);if(null==i.next)return C.empty;let a=function e(t){let n=[];do n.push(function(t){let n=[];do n.push(function(t){let n=function(t){if(t.eat("(")){let n=e(t);return t.eat(")")||t.err("Missing closing paren"),n}if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=(function(e,t){let n=e.nodeTypes,r=n[t];if(r)return[r];let i=[];for(let e in n){let r=n[e];r.isInGroup(t)&&i.push(r)}return 0==i.length&&e.err("No node type or group '"+t+"' found"),i})(t,t.next).map(e=>(null==t.inline?t.inline=e.isInline:t.inline!=e.isInline&&t.err("Mixing inline and block content"),{type:"name",value:e}));return t.pos++,1==e.length?e[0]:{type:"choice",exprs:e}}}(t);for(;;)if(t.eat("+"))n={type:"plus",expr:n};else if(t.eat("*"))n={type:"star",expr:n};else if(t.eat("?"))n={type:"opt",expr:n};else if(t.eat("{"))n=function(e,t){let n=E(e),r=n;return e.eat(",")&&(r="}"!=e.next?E(e):-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}(t,n);else break;return n}(t));while(t.next&&")"!=t.next&&"|"!=t.next)return 1==n.length?n[0]:{type:"seq",exprs:n}}(t));while(t.eat("|"))return 1==n.length?n[0]:{type:"choice",exprs:n}}(i);i.next&&i.err("Unexpected trailing text");let o=(n=function(e){let t=[[]];return i(function e(t,a){if("choice"==t.type)return t.exprs.reduce((t,n)=>t.concat(e(n,a)),[]);if("seq"==t.type)for(let r=0;;r++){let o=e(t.exprs[r],a);if(r==t.exprs.length-1)return o;i(o,a=n())}else if("star"==t.type){let o=n();return r(a,o),i(e(t.expr,o),o),[r(o)]}else if("plus"==t.type){let o=n();return i(e(t.expr,a),o),i(e(t.expr,o),o),[r(o)]}else if("opt"==t.type)return[r(a)].concat(e(t.expr,a));else if("range"==t.type){let o=a;for(let r=0;r<t.min;r++){let r=n();i(e(t.expr,o),r),o=r}if(-1==t.max)i(e(t.expr,o),o);else for(let a=t.min;a<t.max;a++){let a=n();r(o,a),i(e(t.expr,o),a),o=a}return[r(o)]}else if("name"==t.type)return[r(a,void 0,t.value)];else throw Error("Unknown expr type")}(e,0),n()),t;function n(){return t.push([])-1}function r(e,n,r){let i={term:r,to:n};return t[e].push(i),i}function i(e,t){e.forEach(e=>e.to=t)}}(a),r=Object.create(null),function e(t){let i=[];t.forEach(e=>{n[e].forEach(e=>{let t,{term:r,to:a}=e;if(r){for(let e=0;e<i.length;e++)i[e][0]==r&&(t=i[e][1]);M(n,a).forEach(e=>{t||i.push([r,t=[]]),-1==t.indexOf(e)&&t.push(e)})}})});let a=r[t.join(",")]=new C(t.indexOf(n.length-1)>-1);for(let t=0;t<i.length;t++){let n=i[t][1].sort(T);a.next.push({type:i[t][0],next:r[n.join(",")]||e(n)})}return a}(M(n,0)));return function(e,t){for(let n=0,r=[e];n<r.length;n++){let e=r[n],i=!e.validEnd,a=[];for(let t=0;t<e.next.length;t++){let{type:n,next:o}=e.next[t];a.push(n.name),i&&!(n.isText||n.hasRequiredAttrs())&&(i=!1),-1==r.indexOf(o)&&r.push(o)}i&&t.err("Only non-generatable nodes ("+a.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(o,i),o}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.childCount,r=this;for(let i=t;r&&i<n;i++)r=r.matchType(e.child(i).type);return r}get inlineContent(){return 0!=this.next.length&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let n=0;n<e.next.length;n++)if(this.next[t].type==e.next[n].type)return!0;return!1}fillBefore(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=[this];return function a(o,s){let l=o.matchFragment(e,r);if(l&&(!t||l.validEnd))return n.from(s.map(e=>e.createAndFill()));for(let e=0;e<o.next.length;e++){let{type:t,next:n}=o.next[e];if(!(t.isText||t.hasRequiredAttrs())&&-1==i.indexOf(n)){i.push(n);let e=a(n,s.concat(t));if(e)return e}}return null}(this,[])}findWrapping(e){for(let t=0;t<this.wrapCache.length;t+=2)if(this.wrapCache[t]==e)return this.wrapCache[t+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let r=n.shift(),i=r.match;if(i.matchType(e)){let e=[];for(let t=r;t.type;t=t.via)e.push(t.type);return e.reverse()}for(let e=0;e<i.next.length;e++){let{type:a,next:o}=i.next[e];a.isLeaf||a.hasRequiredAttrs()||a.name in t||r.type&&!o.validEnd||(n.push({match:a.contentMatch,type:a,via:r}),t[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw RangeError("There's no ".concat(e,"th edge in this content match"));return this.next[e]}toString(){let e=[];return!function t(n){e.push(n);for(let r=0;r<n.next.length;r++)-1==e.indexOf(n.next[r].next)&&t(n.next[r].next)}(this),e.map((t,n)=>{let r=n+(t.validEnd?"*":" ")+" ";for(let n=0;n<t.next.length;n++)r+=(n?", ":"")+t.next[n].type.name+"->"+e.indexOf(t.next[n].next);return r}).join("\n")}constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}}C.empty=new C(!0);class A{get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw SyntaxError(e+" (in content expression '"+this.string+"')")}constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}}function E(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function T(e,t){return t-e}function M(e,t){let n=[];return function t(r){let i=e[r];if(1==i.length&&!i[0].term)return t(i[0].to);n.push(r);for(let e=0;e<i.length;e++){let{term:r,to:a}=i[e];r||-1!=n.indexOf(a)||t(a)}}(t),n.sort(T)}function I(e){let t=Object.create(null);for(let n in e){let r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function N(e,t){let n=Object.create(null);for(let r in e){let i=t&&t[r];if(void 0===i){let t=e[r];if(t.hasDefault)i=t.default;else throw RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function D(e,t,n,r){for(let r in t)if(!(r in e))throw RangeError("Unsupported attribute ".concat(r," for ").concat(n," of type ").concat(r));for(let n in e){let r=e[n];r.validate&&r.validate(t[n])}}function P(e,t){let n=Object.create(null);if(t)for(let r in t)n[r]=new O(e,r,t[r]);return n}class R{get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==C.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:N(this.attrs,e)}create(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;if(this.isText)throw Error("NodeType.create can't construct text nodes");return new k(this,this.computeAttrs(e),n.from(t),o.setFrom(r))}createChecked(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;return t=n.from(t),this.checkContent(t),new k(this,this.computeAttrs(e),t,o.setFrom(r))}createAndFill(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;if(e=this.computeAttrs(e),(t=n.from(t)).size){let e=this.contentMatch.fillBefore(t);if(!e)return null;t=e.append(t)}let i=this.contentMatch.matchFragment(t),a=i&&i.fillBefore(n.empty,!0);return a?new k(this,e,t.append(a),o.setFrom(r)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let t=0;t<e.childCount;t++)if(!this.allowsMarks(e.child(t).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw RangeError("Invalid content for node ".concat(this.name,": ").concat(e.toString().slice(0,50)))}checkAttrs(e){D(this.attrs,e,"node",this.name)}allowsMarkType(e){return null==this.markSet||this.markSet.indexOf(e)>-1}allowsMarks(e){if(null==this.markSet)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){let t;if(null==this.markSet)return e;for(let n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?t&&t.push(e[n]):t||(t=e.slice(0,n));return t?t.length?t:o.none:e}static compile(e,t){let n=Object.create(null);e.forEach((e,r)=>n[e]=new R(e,t,r));let r=t.spec.topNode||"doc";if(!n[r])throw RangeError("Schema is missing its top node type ('"+r+"')");if(!n.text)throw RangeError("Every schema needs a 'text' type");for(let e in n.text.attrs)throw RangeError("The text node type should not have attributes");return n}constructor(e,t,n){this.name=e,this.schema=t,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=P(e,n.attrs),this.defaultAttrs=I(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==e),this.isText="text"==e}}class O{get isRequired(){return!this.hasDefault}constructor(e,t,n){this.hasDefault=Object.prototype.hasOwnProperty.call(n,"default"),this.default=n.default,this.validate="string"==typeof n.validate?function(e,t,n){let r=n.split("|");return n=>{let i=null===n?"null":typeof n;if(0>r.indexOf(i))throw RangeError("Expected value of type ".concat(r," for attribute ").concat(t," on type ").concat(e,", got ").concat(i))}}(e,t,n.validate):n.validate}}class j{create(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return!e&&this.instance?this.instance:new o(this,N(this.attrs,e))}static compile(e,t){let n=Object.create(null),r=0;return e.forEach((e,i)=>n[e]=new j(e,r++,t,i)),n}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){D(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}constructor(e,t,n,r){this.name=e,this.rank=t,this.schema=n,this.spec=r,this.attrs=P(e,r.attrs),this.excluded=null;let i=I(this.attrs);this.instance=i?new o(this,i):null}}class F{node(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if("string"==typeof e)e=this.nodeType(e);else if(e instanceof R){if(e.schema!=this)throw RangeError("Node type from different schema used ("+e.name+")")}else throw RangeError("Invalid node type: "+e);return e.createChecked(t,n,r)}text(e,t){let n=this.nodes.text;return new S(n,n.defaultAttrs,e,o.setFrom(t))}mark(e,t){return"string"==typeof e&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return k.fromJSON(this,e)}markFromJSON(e){return o.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw RangeError("Unknown node type: "+e);return t}constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let t in e)n[t]=e[t];n.nodes=t.default.from(e.nodes),n.marks=t.default.from(e.marks||{}),this.nodes=R.compile(this.spec.nodes,this),this.marks=j.compile(this.spec.marks,this);let r=Object.create(null);for(let e in this.nodes){if(e in this.marks)throw RangeError(e+" can not be both a node and a mark");let t=this.nodes[e],n=t.spec.content||"",i=t.spec.marks;if(t.contentMatch=r[n]||(r[n]=C.parse(n,this.nodes)),t.inlineContent=t.contentMatch.inlineContent,t.spec.linebreakReplacement){if(this.linebreakReplacement)throw RangeError("Multiple linebreak nodes defined");if(!t.isInline||!t.isLeaf)throw RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=t}t.markSet="_"==i?null:i?L(this,i.split(" ")):""!=i&&t.inlineContent?null:[]}for(let e in this.marks){let t=this.marks[e],n=t.spec.excludes;t.excluded=null==n?[t]:""==n?[]:L(this,n.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}}function L(e,t){let n=[];for(let r=0;r<t.length;r++){let i=t[r],a=e.marks[i],o=a;if(a)n.push(a);else for(let t in e.marks){let r=e.marks[t];("_"==i||r.spec.group&&r.spec.group.split(" ").indexOf(i)>-1)&&n.push(o=r)}if(!o)throw SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}class z{parse(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new q(this,t,!1);return n.addAll(e,o.none,t.from,t.to),n.finish()}parseSlice(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new q(this,t,!0);return n.addAll(e,o.none,t.from,t.to),l.maxOpen(n.finish())}matchTag(e,t,n){for(let a=n?this.tags.indexOf(n)+1:0;a<this.tags.length;a++){var r,i;let n=this.tags[a];if(r=e,i=n.tag,(r.matches||r.msMatchesSelector||r.webkitMatchesSelector||r.mozMatchesSelector).call(r,i)&&(void 0===n.namespace||e.namespaceURI==n.namespace)&&(!n.context||t.matchesContext(n.context))){if(n.getAttrs){let t=n.getAttrs(e);if(!1===t)continue;n.attrs=t||void 0}return n}}}matchStyle(e,t,n,r){for(let i=r?this.styles.indexOf(r)+1:0;i<this.styles.length;i++){let r=this.styles[i],a=r.style;if(0==a.indexOf(e)&&(!r.context||n.matchesContext(r.context))&&(!(a.length>e.length)||61==a.charCodeAt(e.length)&&a.slice(e.length+1)==t)){if(r.getAttrs){let e=r.getAttrs(t);if(!1===e)continue;r.attrs=e||void 0}return r}}}static schemaRules(e){let t=[];function n(e){let n=null==e.priority?50:e.priority,r=0;for(;r<t.length;r++){let e=t[r];if((null==e.priority?50:e.priority)<n)break}t.splice(r,0,e)}for(let t in e.marks){let r=e.marks[t].spec.parseDOM;r&&r.forEach(e=>{n(e=G(e)),e.mark||e.ignore||e.clearMark||(e.mark=t)})}for(let t in e.nodes){let r=e.nodes[t].spec.parseDOM;r&&r.forEach(e=>{n(e=G(e)),e.node||e.ignore||e.mark||(e.node=t)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new z(e,z.schemaRules(e)))}constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let n=this.matchedStyles=[];t.forEach(e=>{if(null!=e.tag)this.tags.push(e);else if(null!=e.style){let t=/[^=]*/.exec(e.style)[0];0>n.indexOf(t)&&n.push(t),this.styles.push(e)}}),this.normalizeLists=!this.tags.some(t=>{if(!/^(ul|ol)\b/.test(t.tag)||!t.node)return!1;let n=e.nodes[t.node];return n.contentMatch.matchType(n)})}}let B={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},U={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},H={ol:!0,ul:!0};function W(e,t,n){return null!=t?!!t|2*("full"===t):e&&"pre"==e.whitespace?3:-5&n}class V{findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(n.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let t=this.type.contentMatch,n;return(n=t.findWrapping(e.type))?(this.match=t,n):null}}return this.match.findWrapping(e.type)}finish(e){if(!(1&this.options)){let e=this.content[this.content.length-1],t;e&&e.isText&&(t=/[ \t\r\n\u000c]+$/.exec(e.text))&&(e.text.length==t[0].length?this.content.pop():this.content[this.content.length-1]=e.withText(e.text.slice(0,e.text.length-t[0].length)))}let t=n.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(n.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!B.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}constructor(e,t,n,r,i,a){this.type=e,this.attrs=t,this.marks=n,this.solid=r,this.options=a,this.content=[],this.activeMarks=o.none,this.match=i||(4&a?null:e.contentMatch)}}class q{get top(){return this.nodes[this.open]}addDOM(e,t){3==e.nodeType?this.addTextNode(e,t):1==e.nodeType&&this.addElement(e,t)}addTextNode(e,t){let n=e.nodeValue,r=this.top,i=2&r.options?"full":this.localPreserveWS||(1&r.options)>0;if("full"===i||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(i)n="full"!==i?n.replace(/\r?\n|\r/g," "):n.replace(/\r\n?/g,"\n");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let t=r.content[r.content.length-1],i=e.previousSibling;(!t||i&&"BR"==i.nodeName||t.isText&&/[ \t\r\n\u000c]$/.test(t.text))&&(n=n.slice(1))}n&&this.insertNode(this.parser.schema.text(n),t),this.findInText(e)}else this.findInside(e)}addElement(e,t,n){let r=this.localPreserveWS,i=this.top;("PRE"==e.tagName||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let a=e.nodeName.toLowerCase(),o;H.hasOwnProperty(a)&&this.parser.normalizeLists&&function(e){for(let t=e.firstChild,n=null;t;t=t.nextSibling){let e=1==t.nodeType?t.nodeName.toLowerCase():null;e&&H.hasOwnProperty(e)&&n?(n.appendChild(t),t=n):"li"==e?n=t:e&&(n=null)}}(e);let s=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(o=this.parser.matchTag(e,this,n));e:if(s?s.ignore:U.hasOwnProperty(a))this.findInside(e),this.ignoreFallback(e,t);else if(!s||s.skip||s.closeParent){s&&s.closeParent?this.open=Math.max(0,this.open-1):s&&s.skip.nodeType&&(e=s.skip);let n,r=this.needsBlock;if(B.hasOwnProperty(a))i.content.length&&i.content[0].isInline&&this.open&&(this.open--,i=this.top),n=!0,i.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let o=s&&s.skip?t:this.readStyles(e,t);o&&this.addAll(e,o),n&&this.sync(i),this.needsBlock=r}else{let n=this.readStyles(e,t);n&&this.addElementByRule(e,s,n,!1===s.consuming?o:void 0)}this.localPreserveWS=r}leafFallback(e,t){"BR"==e.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode("\n"),t)}ignoreFallback(e,t){"BR"!=e.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"),t)}readStyles(e,t){let n=e.style;if(n&&n.length)for(let e=0;e<this.parser.matchedStyles.length;e++){let r=this.parser.matchedStyles[e],i=n.getPropertyValue(r);if(i)for(let e;;){let n=this.parser.matchStyle(r,i,this,e);if(!n)break;if(n.ignore)return null;if(t=n.clearMark?t.filter(e=>!n.clearMark(e)):t.concat(this.parser.schema.marks[n.mark].create(n.attrs)),!1===n.consuming)e=n;else break}}return t}addElementByRule(e,t,n,r){let i,a;if(t.node)if((a=this.parser.schema.nodes[t.node]).isLeaf)this.insertNode(a.create(t.attrs),n)||this.leafFallback(e,n);else{let e=this.enter(a,t.attrs||null,n,t.preserveWhitespace);e&&(i=!0,n=e)}else{let e=this.parser.schema.marks[t.mark];n=n.concat(e.create(t.attrs))}let o=this.top;if(a&&a.isLeaf)this.findInside(e);else if(r)this.addElement(e,n,r);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(e=>this.insertNode(e,n));else{let r=e;"string"==typeof t.contentElement?r=e.querySelector(t.contentElement):"function"==typeof t.contentElement?r=t.contentElement(e):t.contentElement&&(r=t.contentElement),this.findAround(e,r,!0),this.addAll(r,n),this.findAround(e,r,!1)}i&&this.sync(o)&&this.open--}addAll(e,t,n,r){let i=n||0;for(let a=n?e.childNodes[n]:e.firstChild,o=null==r?null:e.childNodes[r];a!=o;a=a.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(a,t);this.findAtPoint(e,i)}findPlace(e,t){let n,r;for(let t=this.open;t>=0;t--){let i=this.nodes[t],a=i.findWrapping(e);if(a&&(!n||n.length>a.length)&&(n=a,r=i,!a.length)||i.solid)break}if(!n)return null;this.sync(r);for(let e=0;e<n.length;e++)t=this.enterInner(n[e],null,t,!1);return t}insertNode(e,t){if(e.isInline&&this.needsBlock&&!this.top.type){let e=this.textblockFromContext();e&&(t=this.enterInner(e,null,t))}let n=this.findPlace(e,t);if(n){this.closeExtra();let t=this.top;t.match&&(t.match=t.match.matchType(e.type));let r=o.none;for(let i of n.concat(e.marks))(t.type?t.type.allowsMarkType(i.type):$(i.type,e.type))&&(r=i.addToSet(r));return t.content.push(e.mark(r)),!0}return!1}enter(e,t,n,r){let i=this.findPlace(e.create(t),n);return i&&(i=this.enterInner(e,t,n,!0,r)),i}enterInner(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4?arguments[4]:void 0;this.closeExtra();let a=this.top;a.match=a.match&&a.match.matchType(e);let s=W(e,i,a.options);4&a.options&&0==a.content.length&&(s|=4);let l=o.none;return n=n.filter(t=>(a.type?!a.type.allowsMarkType(t.type):!$(t.type,e))||(l=t.addToSet(l),!1)),this.nodes.push(new V(e,t,l,r,null,s)),this.open++,n}closeExtra(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;else this.localPreserveWS&&(this.nodes[t].options|=1);return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let n=this.nodes[t].content;for(let t=n.length-1;t>=0;t--)e+=n[t].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==t&&(this.find[n].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)null==this.find[t].pos&&1==e.nodeType&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,n){if(e!=t&&this.find)for(let r=0;r<this.find.length;r++)null==this.find[r].pos&&1==e.nodeType&&e.contains(this.find[r].node)&&t.compareDocumentPosition(this.find[r].node)&(n?2:4)&&(this.find[r].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),n=this.options.context,r=!this.isOpen&&(!n||n.parent.type==this.nodes[0].type),i=-(n?n.depth+1:0)+ +!r,a=(e,o)=>{for(;e>=0;e--){let s=t[e];if(""==s){if(e==t.length-1||0==e)continue;for(;o>=i;o--)if(a(e-1,o))return!0;return!1}{let e=o>0||0==o&&r?this.nodes[o].type:n&&o>=i?n.node(o-i).type:null;if(!e||e.name!=s&&!e.isInGroup(s))return!1;o--}}return!0};return a(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let n=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let e in this.parser.schema.nodes){let t=this.parser.schema.nodes[e];if(t.isTextblock&&t.defaultAttrs)return t}}constructor(e,t,n){this.parser=e,this.options=t,this.isOpen=n,this.open=0,this.localPreserveWS=!1;let r=t.topNode,i,a=W(null,t.preserveWhitespace,0)|4*!!n;i=r?new V(r.type,r.attrs,o.none,!0,t.topMatch||r.type.contentMatch,a):n?new V(null,null,o.none,!0,null,a):new V(e.schema.topNodeType,null,o.none,!0,null,a),this.nodes=[i],this.find=t.findPositions,this.needsBlock=!1}}function G(e){let t={};for(let n in e)t[n]=e[n];return t}function $(e,t){let n=t.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(e))continue;let a=[],o=e=>{a.push(e);for(let n=0;n<e.edgeCount;n++){let{type:r,next:i}=e.edge(n);if(r==t||0>a.indexOf(i)&&o(i))return!0}};if(o(i.contentMatch))return!0}}class K{serializeFragment(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;n||(n=X(t).createDocumentFragment());let r=n,i=[];return e.forEach(e=>{if(i.length||e.marks.length){let n=0,a=0;for(;n<i.length&&a<e.marks.length;){let t=e.marks[a];if(!this.marks[t.type.name]){a++;continue}if(!t.eq(i[n][0])||!1===t.type.spec.spanning)break;n++,a++}for(;n<i.length;)r=i.pop()[1];for(;a<e.marks.length;){let n=e.marks[a++],o=this.serializeMark(n,e.isInline,t);o&&(i.push([n,r]),r.appendChild(o.dom),r=o.contentDOM||o.dom)}}r.appendChild(this.serializeNodeInner(e,t))}),n}serializeNodeInner(e,t){let{dom:n,contentDOM:r}=J(X(t),this.nodes[e.type.name](e),null,e.attrs);if(r){if(e.isLeaf)throw RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,r)}return n}serializeNode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.serializeNodeInner(e,t);for(let r=e.marks.length-1;r>=0;r--){let i=this.serializeMark(e.marks[r],e.isInline,t);i&&((i.contentDOM||i.dom).appendChild(n),n=i.dom)}return n}serializeMark(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.marks[e.type.name];return r&&J(X(n),r(e,t),null,e.attrs)}static renderSpec(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return J(e,t,n,r)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new K(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=Y(e.nodes);return t.text||(t.text=e=>e.text),t}static marksFromSchema(e){return Y(e.marks)}constructor(e,t){this.nodes=e,this.marks=t}}function Y(e){let t={};for(let n in e){let r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function X(e){return e.document||window.document}let Z=new WeakMap;function J(e,t,n,r){let i,a,o;if("string"==typeof t)return{dom:e.createTextNode(t)};if(null!=t.nodeType)return{dom:t};if(t.dom&&null!=t.dom.nodeType)return t;let s=t[0],l;if("string"!=typeof s)throw RangeError("Invalid array passed to renderSpec");if(r&&(void 0===(a=Z.get(r))&&Z.set(r,(o=null,!function e(t){if(t&&"object"==typeof t)if(Array.isArray(t))if("string"==typeof t[0])o||(o=[]),o.push(t);else for(let n=0;n<t.length;n++)e(t[n]);else for(let n in t)e(t[n])}(r),a=o)),l=a)&&l.indexOf(t)>-1)throw RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let u=s.indexOf(" ");u>0&&(n=s.slice(0,u),s=s.slice(u+1));let c=n?e.createElementNS(n,s):e.createElement(s),d=t[1],h=1;if(d&&"object"==typeof d&&null==d.nodeType&&!Array.isArray(d)){for(let e in h=2,d)if(null!=d[e]){let t=e.indexOf(" ");t>0?c.setAttributeNS(e.slice(0,t),e.slice(t+1),d[e]):c.setAttribute(e,d[e])}}for(let a=h;a<t.length;a++){let o=t[a];if(0===o){if(a<t.length-1||a>h)throw RangeError("Content hole must be the only child of its parent node");return{dom:c,contentDOM:c}}{let{dom:t,contentDOM:a}=J(e,o,n,r);if(c.appendChild(t),a){if(i)throw RangeError("Multiple content holes");i=a}}}return{dom:c,contentDOM:i}}},47542:e=>{"use strict";e.s({Mapping:()=>i,RemoveMarkStep:()=>c,ReplaceAroundStep:()=>f,ReplaceStep:()=>p,Transform:()=>z,canJoin:()=>_,canSplit:()=>S,dropPoint:()=>E,findWrapping:()=>b,joinPoint:()=>A,liftTarget:()=>y,replaceStep:()=>T});var t=e.i(490077);class n{get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}constructor(e,t,n){this.pos=e,this.delInfo=t,this.recover=n}}class r{recover(e){let t=0,n=65535&e;if(!this.inverted)for(let e=0;e<n;e++)t+=this.ranges[3*e+2]-this.ranges[3*e+1];return this.ranges[3*n]+t+(e-(65535&e))/65536}mapResult(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._map(e,t,!1)}map(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._map(e,t,!0)}_map(e,t,r){let i=0,a=this.inverted?2:1,o=this.inverted?1:2;for(let s=0;s<this.ranges.length;s+=3){let l=this.ranges[s]-(this.inverted?i:0);if(l>e)break;let u=this.ranges[s+a],c=this.ranges[s+o],d=l+u;if(e<=d){let a=u?e==l?-1:e==d?1:t:t,o=l+i+(a<0?0:c);if(r)return o;let h=e==(t<0?l:d)?null:s/3+(e-l)*65536,p=e==l?2:e==d?1:4;return(t<0?e!=l:e!=d)&&(p|=8),new n(o,p,h)}i+=c-u}return r?e+i:new n(e+i,0,null)}touches(e,t){let n=0,r=65535&t,i=this.inverted?2:1,a=this.inverted?1:2;for(let t=0;t<this.ranges.length;t+=3){let o=this.ranges[t]-(this.inverted?n:0);if(o>e)break;let s=this.ranges[t+i];if(e<=o+s&&t==3*r)return!0;n+=this.ranges[t+a]-s}return!1}forEach(e){let t=this.inverted?2:1,n=this.inverted?1:2;for(let r=0,i=0;r<this.ranges.length;r+=3){let a=this.ranges[r],o=a-(this.inverted?i:0),s=a+(this.inverted?0:i),l=this.ranges[r+t],u=this.ranges[r+n];e(o,o+l,s,s+u),i+=u-l}}invert(){return new r(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return 0==e?r.empty:new r(e<0?[0,-e,0]:[0,0,e])}constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&r.empty)return r.empty}}r.empty=new r([]);class i{get maps(){return this._maps}slice(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.maps.length;return new i(this._maps,this.mirror,e,t)}appendMap(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),null!=t&&this.setMirror(this._maps.length-1,t)}appendMapping(e){for(let t=0,n=this._maps.length;t<e._maps.length;t++){let r=e.getMirror(t);this.appendMap(e._maps[t],null!=r&&r<t?n+r:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,n=this._maps.length+e._maps.length;t>=0;t--){let r=e.getMirror(t);this.appendMap(e._maps[t].invert(),null!=r&&r>t?n-r-1:void 0)}}invert(){let e=new i;return e.appendMappingInverted(this),e}map(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this.mirror)return this._map(e,t,!0);for(let n=this.from;n<this.to;n++)e=this._maps[n].map(e,t);return e}mapResult(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._map(e,t,!1)}_map(e,t,r){let i=0;for(let n=this.from;n<this.to;n++){let r=this._maps[n].mapResult(e,t);if(null!=r.recover){let t=this.getMirror(n);if(null!=t&&t>n&&t<this.to){n=t,e=this._maps[t].recover(r.recover);continue}}i|=r.delInfo,e=r.pos}return r?e:new n(e,i,null)}constructor(e,t,n=0,r=e?e.length:0){this.mirror=t,this.from=n,this.to=r,this._maps=e||[],this.ownData=!(e||t)}}let a=Object.create(null);class o{getMap(){return r.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw RangeError("Invalid input for Step.fromJSON");let n=a[t.stepType];if(!n)throw RangeError("No step type ".concat(t.stepType," defined"));return n.fromJSON(e,t)}static jsonID(e,t){if(e in a)throw RangeError("Duplicate use of step JSON ID "+e);return a[e]=t,t.prototype.jsonID=e,t}}class s{static ok(e){return new s(e,null)}static fail(e){return new s(null,e)}static fromReplace(e,n,r,i){try{return s.ok(e.replace(n,r,i))}catch(e){if(e instanceof t.ReplaceError)return s.fail(e.message);throw e}}constructor(e,t){this.doc=e,this.failed=t}}function l(e,n,r){let i=[];for(let t=0;t<e.childCount;t++){let a=e.child(t);a.content.size&&(a=a.copy(l(a.content,n,a))),a.isInline&&(a=n(a,r,t)),i.push(a)}return t.Fragment.fromArray(i)}class u extends o{apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),a=new t.Slice(l(n.content,(e,t)=>e.isAtom&&t.type.allowsMarkType(this.mark.type)?e.mark(this.mark.addToSet(e.marks)):e,i),n.openStart,n.openEnd);return s.fromReplace(e,this.from,this.to,a)}invert(){return new c(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new u(t.pos,n.pos,this.mark)}merge(e){return e instanceof u&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new u(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw RangeError("Invalid input for AddMarkStep.fromJSON");return new u(t.from,t.to,e.markFromJSON(t.mark))}constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}}o.jsonID("addMark",u);class c extends o{apply(e){let n=e.slice(this.from,this.to),r=new t.Slice(l(n.content,e=>e.mark(this.mark.removeFromSet(e.marks)),e),n.openStart,n.openEnd);return s.fromReplace(e,this.from,this.to,r)}invert(){return new u(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new c(t.pos,n.pos,this.mark)}merge(e){return e instanceof c&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new c(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw RangeError("Invalid input for RemoveMarkStep.fromJSON");return new c(t.from,t.to,e.markFromJSON(t.mark))}constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}}o.jsonID("removeMark",c);class d extends o{apply(e){let n=e.nodeAt(this.pos);if(!n)return s.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return s.fromReplace(e,this.pos,this.pos+1,new t.Slice(t.Fragment.from(r),0,+!n.isLeaf))}invert(e){let t=e.nodeAt(this.pos);if(t){let e=this.mark.addToSet(t.marks);if(e.length==t.marks.length){for(let n=0;n<t.marks.length;n++)if(!t.marks[n].isInSet(e))return new d(this.pos,t.marks[n]);return new d(this.pos,this.mark)}}return new h(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new d(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if("number"!=typeof t.pos)throw RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new d(t.pos,e.markFromJSON(t.mark))}constructor(e,t){super(),this.pos=e,this.mark=t}}o.jsonID("addNodeMark",d);class h extends o{apply(e){let n=e.nodeAt(this.pos);if(!n)return s.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return s.fromReplace(e,this.pos,this.pos+1,new t.Slice(t.Fragment.from(r),0,+!n.isLeaf))}invert(e){let t=e.nodeAt(this.pos);return t&&this.mark.isInSet(t.marks)?new d(this.pos,this.mark):this}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new h(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if("number"!=typeof t.pos)throw RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new h(t.pos,e.markFromJSON(t.mark))}constructor(e,t){super(),this.pos=e,this.mark=t}}o.jsonID("removeNodeMark",h);class p extends o{apply(e){return this.structure&&m(e,this.from,this.to)?s.fail("Structure replace would overwrite content"):s.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new r([this.from,this.to-this.from,this.slice.size])}invert(e){return new p(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deletedAcross&&n.deletedAcross?null:new p(t.pos,Math.max(t.pos,n.pos),this.slice,this.structure)}merge(e){if(!(e instanceof p)||e.structure||this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart)if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;else{let n=this.slice.size+e.slice.size==0?t.Slice.empty:new t.Slice(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new p(e.from,this.to,n,this.structure)}{let n=this.slice.size+e.slice.size==0?t.Slice.empty:new t.Slice(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new p(this.from,this.to+(e.to-e.from),n,this.structure)}}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw RangeError("Invalid input for ReplaceStep.fromJSON");return new p(n.from,n.to,t.Slice.fromJSON(e,n.slice),!!n.structure)}constructor(e,t,n,r=!1){super(),this.from=e,this.to=t,this.slice=n,this.structure=r}}o.jsonID("replace",p);class f extends o{apply(e){if(this.structure&&(m(e,this.from,this.gapFrom)||m(e,this.gapTo,this.to)))return s.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return s.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,t.content);return n?s.fromReplace(e,this.from,this.to,n):s.fail("Content does not fit in gap")}getMap(){return new r([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new f(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1),r=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),i=this.to==this.gapTo?n.pos:e.map(this.gapTo,1);return t.deletedAcross&&n.deletedAcross||r<t.pos||i>n.pos?null:new f(t.pos,n.pos,r,i,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if("number"!=typeof n.from||"number"!=typeof n.to||"number"!=typeof n.gapFrom||"number"!=typeof n.gapTo||"number"!=typeof n.insert)throw RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new f(n.from,n.to,n.gapFrom,n.gapTo,t.Slice.fromJSON(e,n.slice),n.insert,!!n.structure)}constructor(e,t,n,r,i,a,o=!1){super(),this.from=e,this.to=t,this.gapFrom=n,this.gapTo=r,this.slice=i,this.insert=a,this.structure=o}}function m(e,t,n){let r=e.resolve(t),i=n-t,a=r.depth;for(;i>0&&a>0&&r.indexAfter(a)==r.node(a).childCount;)a--,i--;if(i>0){let e=r.node(a).maybeChild(r.indexAfter(a));for(;i>0;){if(!e||e.isLeaf)return!0;e=e.firstChild,i--}}return!1}function g(e,n,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r.contentMatch,a=!(arguments.length>4)||void 0===arguments[4]||arguments[4],o=e.doc.nodeAt(n),s=[],l=n+1;for(let n=0;n<o.childCount;n++){let u=o.child(n),d=l+u.nodeSize,h=i.matchType(u.type);if(h){i=h;for(let t=0;t<u.marks.length;t++)r.allowsMarkType(u.marks[t].type)||e.step(new c(l,d,u.marks[t]));if(a&&u.isText&&"pre"!=r.whitespace){let e,n=/\r?\n|\r/g,i;for(;e=n.exec(u.text);)i||(i=new t.Slice(t.Fragment.from(r.schema.text(" ",r.allowedMarks(u.marks))),0,0)),s.push(new p(l+e.index,l+e.index+e[0].length,i))}}else s.push(new p(l,d,t.Slice.empty));l=d}if(!i.validEnd){let n=i.fillBefore(t.Fragment.empty,!0);e.replace(l,l,new t.Slice(n,0,0))}for(let t=s.length-1;t>=0;t--)e.step(s[t])}function y(e){let t=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let n=e.depth;;--n){let r=e.$from.node(n),i=e.$from.index(n),a=e.$to.indexAfter(n);if(n<e.depth&&r.canReplace(i,a,t))return n;if(0==n||r.type.spec.isolating||!((0==i||r.canReplace(i,r.childCount))&&(a==r.childCount||r.canReplace(0,a))))break}return null}function b(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e,i=function(e,t){let{parent:n,startIndex:r,endIndex:i}=e,a=n.contentMatchAt(r).findWrapping(t);if(!a)return null;let o=a.length?a[0]:t;return n.canReplaceWith(r,i,o)?a:null}(e,t),a=i&&function(e,t){let{parent:n,startIndex:r,endIndex:i}=e,a=n.child(r),o=t.contentMatch.findWrapping(a.type);if(!o)return null;let s=(o.length?o[o.length-1]:t).contentMatch;for(let e=r;s&&e<i;e++)s=s.matchType(n.child(e).type);return s&&s.validEnd?o:null}(r,t);return a?i.map(x).concat({type:t,attrs:n}).concat(a.map(x)):null}function x(e){return{type:e,attrs:null}}function w(e,t,n,r){t.forEach((i,a)=>{if(i.isText){let o,s=/\r?\n|\r/g;for(;o=s.exec(i.text);){let i=e.mapping.slice(r).map(n+1+a+o.index);e.replaceWith(i,i+1,t.type.schema.linebreakReplacement.create())}}})}function k(e,t,n,r){t.forEach((i,a)=>{if(i.type==i.type.schema.linebreakReplacement){let i=e.mapping.slice(r).map(n+1+a);e.replaceWith(i,i+1,t.type.schema.text("\n"))}})}function S(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,i=e.resolve(t),a=i.depth-n,o=r&&r[r.length-1]||i.parent;if(a<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let e=i.depth-1,t=n-2;e>a;e--,t--){let n=i.node(e),a=i.index(e);if(n.type.spec.isolating)return!1;let o=n.content.cutByIndex(a,n.childCount),s=r&&r[t+1];s&&(o=o.replaceChild(0,s.type.create(s.attrs)));let l=r&&r[t]||n;if(!n.canReplace(a+1,n.childCount)||!l.type.validContent(o))return!1}let s=i.indexAfter(a),l=r&&r[0];return i.node(a).canReplaceWith(s,s,l?l.type:i.node(a+1).type)}function _(e,t){let n=e.resolve(t),r=n.index();return C(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function C(e,t){return!!(e&&t&&!e.isLeaf&&function(e,t){t.content.size||e.type.compatibleContent(t.type);let n=e.contentMatchAt(e.childCount),{linebreakReplacement:r}=e.type.schema;for(let i=0;i<t.childCount;i++){let a=t.child(i),o=a.type==r?e.type.schema.nodes.text:a.type;if(!(n=n.matchType(o))||!e.type.allowsMarks(a.marks))return!1}return n.validEnd}(e,t))}function A(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=e.resolve(t);for(let e=r.depth;;e--){let i,a,o=r.index(e);if(e==r.depth?(i=r.nodeBefore,a=r.nodeAfter):n>0?(i=r.node(e+1),o++,a=r.node(e).maybeChild(o)):(i=r.node(e).maybeChild(o-1),a=r.node(e+1)),i&&!i.isTextblock&&C(i,a)&&r.node(e).canReplace(o,o+1))return t;if(0==e)break;t=n<0?r.before(e):r.after(e)}}function E(e,t,n){let r=e.resolve(t);if(!n.content.size)return t;let i=n.content;for(let e=0;e<n.openStart;e++)i=i.firstChild.content;for(let e=1;e<=(0==n.openStart&&n.size?2:1);e++)for(let t=r.depth;t>=0;t--){let n=t==r.depth?0:r.pos<=(r.start(t+1)+r.end(t+1))/2?-1:1,a=r.index(t)+ +(n>0),o=r.node(t),s=!1;if(1==e)s=o.canReplace(a,a,i);else{let e=o.contentMatchAt(a).findWrapping(i.firstChild.type);s=e&&o.canReplaceWith(a,a,e[0])}if(s)return 0==n?r.pos:n<0?r.before(t+1):r.after(t+1)}return null}function T(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.Slice.empty;if(n==r&&!i.size)return null;let a=e.resolve(n),o=e.resolve(r);return M(a,o,i)?new p(n,r,i):new I(a,o,i).fit()}function M(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}o.jsonID("replaceAround",f);class I{get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let e=this.findFittable();e?this.placeNodes(e):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let a=this.placed,o=r.depth,s=i.depth;for(;o&&s&&1==a.childCount;)a=a.firstChild.content,o--,s--;let l=new t.Slice(a,o,s);return e>-1?new f(r.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new p(r.pos,i.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,n=0,r=this.unplaced.openEnd;n<e;n++){let i=t.firstChild;if(t.childCount>1&&(r=0),i.type.spec.isolating&&r<=n){e=n;break}t=i.content}for(let n=1;n<=2;n++)for(let r=1==n?e:this.unplaced.openStart;r>=0;r--){let e=null,i=(r?(e=P(this.unplaced.content,r-1).firstChild).content:this.unplaced.content).firstChild;for(let a=this.depth;a>=0;a--){let{type:o,match:s}=this.frontier[a],l,u=null;if(1==n&&(i?s.matchType(i.type)||(u=s.fillBefore(t.Fragment.from(i),!1)):e&&o.compatibleContent(e.type)))return{sliceDepth:r,frontierDepth:a,parent:e,inject:u};if(2==n&&i&&(l=s.findWrapping(i.type)))return{sliceDepth:r,frontierDepth:a,parent:e,wrap:l};if(e&&s.matchType(e.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=P(e,n);return!!i.childCount&&!i.firstChild.isLeaf&&(this.unplaced=new t.Slice(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=P(e,n);if(i.childCount<=1&&n>0){let a=e.size-n<=n+i.size;this.unplaced=new t.Slice(N(e,n-1,1),n-1,a?n-1:r)}else this.unplaced=new t.Slice(N(e,n,1),n,r)}placeNodes(e){let{sliceDepth:n,frontierDepth:r,parent:i,inject:a,wrap:o}=e;for(;this.depth>r;)this.closeFrontierNode();if(o)for(let e=0;e<o.length;e++)this.openFrontierNode(o[e]);let s=this.unplaced,l=i?i.content:s.content,u=s.openStart-n,c=0,d=[],{match:h,type:p}=this.frontier[r];if(a){for(let e=0;e<a.childCount;e++)d.push(a.child(e));h=h.matchFragment(a)}let f=l.size+n-(s.content.size-s.openEnd);for(;c<l.childCount;){let e=l.child(c),n=h.matchType(e.type);if(!n)break;(++c>1||0==u||e.content.size)&&(h=n,d.push(function e(n,r,i){if(r<=0)return n;let a=n.content;return r>1&&(a=a.replaceChild(0,e(a.firstChild,r-1,1==a.childCount?i-1:0))),r>0&&(a=n.type.contentMatch.fillBefore(a).append(a),i<=0&&(a=a.append(n.type.contentMatch.matchFragment(a).fillBefore(t.Fragment.empty,!0)))),n.copy(a)}(e.mark(p.allowedMarks(e.marks)),1==c?u:0,c==l.childCount?f:-1)))}let m=c==l.childCount;m||(f=-1),this.placed=D(this.placed,r,t.Fragment.from(d)),this.frontier[r].match=h,m&&f<0&&i&&i.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let e=0,t=l;e<f;e++){let e=t.lastChild;this.frontier.push({type:e.type,match:e.contentMatchAt(e.childCount)}),t=e.content}this.unplaced=m?0==n?t.Slice.empty:new t.Slice(N(s.content,n-1,1),n-1,f<0?s.openEnd:n-1):new t.Slice(N(s.content,n,c),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return -1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!R(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return -1;let{depth:n}=this.$to,r=this.$to.after(n);for(;n>1&&r==this.$to.end(--n);)++r;return r}findCloseLevel(e){t:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:n,type:r}=this.frontier[t],i=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),a=R(e,t,r,n,i);if(a){for(let n=t-1;n>=0;n--){let{match:t,type:r}=this.frontier[n],i=R(e,n,r,t,!0);if(!i||i.childCount)continue t}return{depth:t,fit:a,move:i?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=D(this.placed,t.depth,t.fit)),e=t.move;for(let n=t.depth+1;n<=e.depth;n++){let t=e.node(n),r=t.type.contentMatch.fillBefore(t.content,!0,e.index(n));this.openFrontierNode(t.type,t.attrs,r)}return e}openFrontierNode(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2?arguments[2]:void 0,i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=D(this.placed,this.depth,t.Fragment.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let e=this.frontier.pop().match.fillBefore(t.Fragment.empty,!0);e.childCount&&(this.placed=D(this.placed,this.frontier.length,e))}constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=t.Fragment.empty;for(let t=0;t<=e.depth;t++){let n=e.node(t);this.frontier.push({type:n.type,match:n.contentMatchAt(e.indexAfter(t))})}for(let n=e.depth;n>0;n--)this.placed=t.Fragment.from(e.node(n).copy(this.placed))}}function N(e,t,n){return 0==t?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(N(e.firstChild.content,t-1,n)))}function D(e,t,n){return 0==t?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(D(e.lastChild.content,t-1,n)))}function P(e,t){for(let n=0;n<t;n++)e=e.firstChild.content;return e}function R(e,t,n,r,i){let a=e.node(t),o=i?e.indexAfter(t):e.index(t);if(o==a.childCount&&!n.compatibleContent(a.type))return null;let s=r.fillBefore(a.content,!0,o);return s&&!function(e,t,n){for(let r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}(n,a.content,o)?s:null}function O(e,t){let n=[],r=Math.min(e.depth,t.depth);for(let i=r;i>=0;i--){let r=e.start(i);if(r<e.pos-(e.depth-i)||t.end(i)>t.pos+(t.depth-i)||e.node(i).type.spec.isolating||t.node(i).type.spec.isolating)break;(r==t.start(i)||i==e.depth&&i==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&i&&t.start(i-1)==r-1)&&n.push(i)}return n}class j extends o{apply(e){let n=e.nodeAt(this.pos);if(!n)return s.fail("No node at attribute step's position");let r=Object.create(null);for(let e in n.attrs)r[e]=n.attrs[e];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return s.fromReplace(e,this.pos,this.pos+1,new t.Slice(t.Fragment.from(i),0,+!n.isLeaf))}getMap(){return r.empty}invert(e){return new j(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new j(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if("number"!=typeof t.pos||"string"!=typeof t.attr)throw RangeError("Invalid input for AttrStep.fromJSON");return new j(t.pos,t.attr,t.value)}constructor(e,t,n){super(),this.pos=e,this.attr=t,this.value=n}}o.jsonID("attr",j);class F extends o{apply(e){let t=Object.create(null);for(let n in e.attrs)t[n]=e.attrs[n];t[this.attr]=this.value;let n=e.type.create(t,e.content,e.marks);return s.ok(n)}getMap(){return r.empty}invert(e){return new F(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if("string"!=typeof t.attr)throw RangeError("Invalid input for DocAttrStep.fromJSON");return new F(t.attr,t.value)}constructor(e,t){super(),this.attr=e,this.value=t}}o.jsonID("docAttr",F);let L=class extends Error{};(L=function e(t){let n=Error.call(this,t);return n.__proto__=e.prototype,n}).prototype=Object.create(Error.prototype),L.prototype.constructor=L,L.prototype.name="TransformError";class z{get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new L(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.Slice.empty,i=T(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new t.Slice(t.Fragment.from(r),0,0))}delete(e,n){return this.replace(e,n,t.Slice.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,n,r){return!function(e,n,r,i){if(!i.size)return e.deleteRange(n,r);let a=e.doc.resolve(n),o=e.doc.resolve(r);if(M(a,o,i))return e.step(new p(n,r,i));let s=O(a,e.doc.resolve(r));0==s[s.length-1]&&s.pop();let l=-(a.depth+1);s.unshift(l);for(let e=a.depth,t=a.pos-1;e>0;e--,t--){let n=a.node(e).type.spec;if(n.defining||n.definingAsContext||n.isolating)break;s.indexOf(e)>-1?l=e:a.before(e)==t&&s.splice(1,0,-e)}let u=s.indexOf(l),c=[],d=i.openStart;for(let e=i.content,t=0;;t++){let n=e.firstChild;if(c.push(n),t==i.openStart)break;e=n.content}for(let e=d-1;e>=0;e--){var h;let t=c[e],n=(h=t.type).spec.defining||h.spec.definingForContent;if(n&&!t.sameMarkup(a.node(Math.abs(l)-1)))d=e;else if(n||!t.type.isTextblock)break}for(let n=i.openStart;n>=0;n--){let l=(n+d+1)%(i.openStart+1),h=c[l];if(h)for(let n=0;n<s.length;n++){let c=s[(n+u)%s.length],d=!0;c<0&&(d=!1,c=-c);let p=a.node(c-1),f=a.index(c-1);if(p.canReplaceWith(f,f,h.type,h.marks))return e.replace(a.before(c),d?o.after(c):r,new t.Slice(function e(n,r,i,a,o){if(r<i){let t=n.firstChild;n=n.replaceChild(0,t.copy(e(t.content,r+1,i,a,t)))}if(r>a){let e=o.contentMatchAt(0),r=e.fillBefore(n).append(n);n=r.append(e.matchFragment(r).fillBefore(t.Fragment.empty,!0))}return n}(i.content,0,i.openStart,l),l,i.openEnd))}}let f=e.steps.length;for(let t=s.length-1;t>=0&&(e.replace(n,r,i),!(e.steps.length>f));t--){let e=s[t];e<0||(n=a.before(e),r=o.after(e))}}(this,e,n,r),this}replaceRangeWith(e,n,r){var i=e,a=n;if(!r.isInline&&i==a&&this.doc.resolve(i).parent.content.size){let e=function(e,t,n){let r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(0==r.parentOffset)for(let e=r.depth-1;e>=0;e--){let t=r.index(e);if(r.node(e).canReplaceWith(t,t,n))return r.before(e+1);if(t>0)return null}if(r.parentOffset==r.parent.content.size)for(let e=r.depth-1;e>=0;e--){let t=r.indexAfter(e);if(r.node(e).canReplaceWith(t,t,n))return r.after(e+1);if(t<r.node(e).childCount)break}return null}(this.doc,i,r.type);null!=e&&(i=a=e)}return this.replaceRange(i,a,new t.Slice(t.Fragment.from(r),0,0)),this}deleteRange(e,t){return!function(e,t,n){let r=e.doc.resolve(t),i=e.doc.resolve(n),a=O(r,i);for(let t=0;t<a.length;t++){let n=a[t],o=t==a.length-1;if(o&&0==n||r.node(n).type.contentMatch.validEnd)return e.delete(r.start(n),i.end(n));if(n>0&&(o||r.node(n-1).canReplace(r.index(n-1),i.indexAfter(n-1))))return e.delete(r.before(n),i.after(n))}for(let a=1;a<=r.depth&&a<=i.depth;a++)if(t-r.start(a)==r.depth-a&&n>r.end(a)&&i.end(a)-n!=i.depth-a&&r.start(a-1)==i.start(a-1)&&r.node(a-1).canReplace(r.index(a-1),i.index(a-1)))return e.delete(r.before(a),n);e.delete(t,n)}(this,e,t),this}lift(e,n){return!function(e,n,r){let{$from:i,$to:a,depth:o}=n,s=i.before(o+1),l=a.after(o+1),u=s,c=l,d=t.Fragment.empty,h=0;for(let e=o,n=!1;e>r;e--)n||i.index(e)>0?(n=!0,d=t.Fragment.from(i.node(e).copy(d)),h++):u--;let p=t.Fragment.empty,m=0;for(let e=o,n=!1;e>r;e--)n||a.after(e+1)<a.end(e)?(n=!0,p=t.Fragment.from(a.node(e).copy(p)),m++):c++;e.step(new f(u,c,s,l,new t.Slice(d.append(p),h,m),d.size-h,!0))}(this,e,n),this}join(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return!function(e,n,r){let i=null,{linebreakReplacement:a}=e.doc.type.schema,o=e.doc.resolve(n-r),s=o.node().type;if(a&&s.inlineContent){let e="pre"==s.whitespace,t=!!s.contentMatch.matchType(a);e&&!t?i=!1:!e&&t&&(i=!0)}let l=e.steps.length;if(!1===i){let t=e.doc.resolve(n+r);k(e,t.node(),t.before(),l)}s.inlineContent&&g(e,n+r-1,s,o.node().contentMatchAt(o.index()),null==i);let u=e.mapping.slice(l),c=u.map(n-r);if(e.step(new p(c,u.map(n+r,-1),t.Slice.empty,!0)),!0===i){let t=e.doc.resolve(c);w(e,t.node(),t.before(),e.steps.length)}}(this,e,n),this}wrap(e,n){return!function(e,n,r){let i=t.Fragment.empty;for(let e=r.length-1;e>=0;e--){if(i.size){let t=r[e].type.contentMatch.matchFragment(i);if(!t||!t.validEnd)throw RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}i=t.Fragment.from(r[e].type.create(r[e].attrs,i))}let a=n.start,o=n.end;e.step(new f(a,o,a,o,new t.Slice(i,0,0),r.length,!0))}(this,e,n),this}setBlockType(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;var a=this;if(!r.isTextblock)throw RangeError("Type given to setBlockType should be a textblock");let o=a.steps.length;return a.doc.nodesBetween(e,n,(e,n)=>{var s,l,u;let c,d,h="function"==typeof i?i(e):i;if(e.isTextblock&&!e.hasMarkup(r,h)&&(s=a.doc,l=a.mapping.slice(o).map(n),u=r,d=(c=s.resolve(l)).index(),c.parent.canReplaceWith(d,d+1,u))){let i=null;if(r.schema.linebreakReplacement){let e="pre"==r.whitespace,t=!!r.contentMatch.matchType(r.schema.linebreakReplacement);e&&!t?i=!1:!e&&t&&(i=!0)}!1===i&&k(a,e,n,o),g(a,a.mapping.slice(o).map(n,1),r,void 0,null===i);let s=a.mapping.slice(o),l=s.map(n,1),u=s.map(n+e.nodeSize,1);return a.step(new f(l,u,l+1,u-1,new t.Slice(t.Fragment.from(r.create(h,null,e.marks)),0,0),1,!0)),!0===i&&w(a,e,n,o),!1}}),this}setNodeMarkup(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3?arguments[3]:void 0;return!function(e,n,r,i,a){let o=e.doc.nodeAt(n);if(!o)throw RangeError("No node at given position");r||(r=o.type);let s=r.create(i,null,a||o.marks);if(o.isLeaf)return e.replaceWith(n,n+o.nodeSize,s);if(!r.validContent(o.content))throw RangeError("Invalid content for node type "+r.name);e.step(new f(n,n+o.nodeSize,n+1,n+o.nodeSize-1,new t.Slice(t.Fragment.from(s),0,0),1,!0))}(this,e,n,r,i),this}setNodeAttribute(e,t,n){return this.step(new j(e,t,n)),this}setDocAttribute(e,t){return this.step(new F(e,t)),this}addNodeMark(e,t){return this.step(new d(e,t)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw RangeError("No node at position "+e);if(n instanceof t.Mark)n.isInSet(r.marks)&&this.step(new h(e,n));else{let t=r.marks,i,a=[];for(;i=n.isInSet(t);)a.push(new h(e,i)),t=i.removeFromSet(t);for(let e=a.length-1;e>=0;e--)this.step(a[e])}return this}split(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2?arguments[2]:void 0;return!function(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3?arguments[3]:void 0,a=e.doc.resolve(n),o=t.Fragment.empty,s=t.Fragment.empty;for(let e=a.depth,n=a.depth-r,l=r-1;e>n;e--,l--){o=t.Fragment.from(a.node(e).copy(o));let n=i&&i[l];s=t.Fragment.from(n?n.type.create(n.attrs,s):a.node(e).copy(s))}e.step(new p(n,n,new t.Slice(o.append(s),r,r),!0))}(this,e,n,r),this}addMark(e,t,n){var r;let i,a,o,s;return r=this,o=[],s=[],r.doc.nodesBetween(e,t,(r,l,d)=>{if(!r.isInline)return;let h=r.marks;if(!n.isInSet(h)&&d.type.allowsMarkType(n.type)){let d=Math.max(l,e),p=Math.min(l+r.nodeSize,t),f=n.addToSet(h);for(let e=0;e<h.length;e++)h[e].isInSet(f)||(i&&i.to==d&&i.mark.eq(h[e])?i.to=p:o.push(i=new c(d,p,h[e])));a&&a.to==d?a.to=p:s.push(a=new u(d,p,n))}}),o.forEach(e=>r.step(e)),s.forEach(e=>r.step(e)),this}removeMark(e,n,r){var i;let a,o;return i=this,a=[],o=0,i.doc.nodesBetween(e,n,(i,s)=>{if(!i.isInline)return;o++;let l=null;if(r instanceof t.MarkType){let e=i.marks,t;for(;t=r.isInSet(e);)(l||(l=[])).push(t),e=t.removeFromSet(e)}else r?r.isInSet(i.marks)&&(l=[r]):l=i.marks;if(l&&l.length){let t=Math.min(s+i.nodeSize,n);for(let n=0;n<l.length;n++){let r=l[n],i;for(let e=0;e<a.length;e++){let t=a[e];t.step==o-1&&r.eq(a[e].style)&&(i=t)}i?(i.to=t,i.step=o):a.push({style:r,from:Math.max(s,e),to:t,step:o})}}}),a.forEach(e=>i.step(new c(e.from,e.to,e.style))),this}clearIncompatible(e,t,n){return g(this,e,t,n),this}constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new i}}},968617:e=>{"use strict";e.s({AllSelection:()=>h,EditorState:()=>k,NodeSelection:()=>c,Plugin:()=>S,PluginKey:()=>A,Selection:()=>i,SelectionRange:()=>a,TextSelection:()=>l});var t=e.i(490077),n=e.i(47542);let r=Object.create(null);class i{get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.Slice.empty,r=n.content.lastChild,i=null;for(let e=0;e<n.openEnd;e++)i=r,r=r.lastChild;let a=e.steps.length,o=this.ranges;for(let s=0;s<o.length;s++){let{$from:l,$to:u}=o[s],c=e.mapping.slice(a);e.replaceRange(c.map(l.pos),c.map(u.pos),s?t.Slice.empty:n),0==s&&m(e,a,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,t){let n=e.steps.length,r=this.ranges;for(let i=0;i<r.length;i++){let{$from:a,$to:o}=r[i],s=e.mapping.slice(n),l=s.map(a.pos),u=s.map(o.pos);i?e.deleteRange(l,u):(e.replaceRangeWith(l,u,t),m(e,n,t.isInline?-1:1))}}static findFrom(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.parent.inlineContent?new l(e):f(e.node(0),e.parent,e.pos,e.index(),t,n);if(r)return r;for(let r=e.depth-1;r>=0;r--){let i=t<0?f(e.node(0),e.node(r),e.before(r+1),e.index(r),t,n):f(e.node(0),e.node(r),e.after(r+1),e.index(r)+1,t,n);if(i)return i}return null}static near(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.findFrom(e,t)||this.findFrom(e,-t)||new h(e.node(0))}static atStart(e){return f(e,e,0,0,1)||new h(e)}static atEnd(e){return f(e,e,e.content.size,e.childCount,-1)||new h(e)}static fromJSON(e,t){if(!t||!t.type)throw RangeError("Invalid input for Selection.fromJSON");let n=r[t.type];if(!n)throw RangeError("No selection type ".concat(t.type," defined"));return n.fromJSON(e,t)}static jsonID(e,t){if(e in r)throw RangeError("Duplicate use of selection JSON ID "+e);return r[e]=t,t.prototype.jsonID=e,t}getBookmark(){return l.between(this.$anchor,this.$head).getBookmark()}constructor(e,t,n){this.$anchor=e,this.$head=t,this.ranges=n||[new a(e.min(t),e.max(t))]}}i.prototype.visible=!0;class a{constructor(e,t){this.$from=e,this.$to=t}}let o=!1;function s(e){o||e.parent.inlineContent||(o=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class l extends i{get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let n=e.resolve(t.map(this.head));if(!n.parent.inlineContent)return i.near(n);let r=e.resolve(t.map(this.anchor));return new l(r.parent.inlineContent?r:n,n)}replace(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.Slice.empty;if(super.replace(e,n),n==t.Slice.empty){let t=this.$from.marksAcross(this.$to);t&&e.ensureMarks(t)}}eq(e){return e instanceof l&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new u(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if("number"!=typeof t.anchor||"number"!=typeof t.head)throw RangeError("Invalid input for TextSelection.fromJSON");return new l(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=e.resolve(t);return new this(r,n==t?r:e.resolve(n))}static between(e,t,n){let r=e.pos-t.pos;if((!n||r)&&(n=r>=0?1:-1),!t.parent.inlineContent){let e=i.findFrom(t,n,!0)||i.findFrom(t,-n,!0);if(!e)return i.near(t,n);t=e.$head}return e.parent.inlineContent||(0==r?e=t:(e=(i.findFrom(e,-n,!0)||i.findFrom(e,n,!0)).$anchor).pos<t.pos!=r<0&&(e=t)),new l(e,t)}constructor(e,t=e){s(e),s(t),super(e,t)}}i.jsonID("text",l);class u{map(e){return new u(e.map(this.anchor),e.map(this.head))}resolve(e){return l.between(e.resolve(this.anchor),e.resolve(this.head))}constructor(e,t){this.anchor=e,this.head=t}}class c extends i{map(e,t){let{deleted:n,pos:r}=t.mapResult(this.anchor),a=e.resolve(r);return n?i.near(a):new c(a)}content(){return new t.Slice(t.Fragment.from(this.node),0,0)}eq(e){return e instanceof c&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new d(this.anchor)}static fromJSON(e,t){if("number"!=typeof t.anchor)throw RangeError("Invalid input for NodeSelection.fromJSON");return new c(e.resolve(t.anchor))}static create(e,t){return new c(e.resolve(t))}static isSelectable(e){return!e.isText&&!1!==e.type.spec.selectable}constructor(e){let t=e.nodeAfter;super(e,e.node(0).resolve(e.pos+t.nodeSize)),this.node=t}}c.prototype.visible=!1,i.jsonID("node",c);class d{map(e){let{deleted:t,pos:n}=e.mapResult(this.anchor);return t?new u(n,n):new d(n)}resolve(e){let t=e.resolve(this.anchor),n=t.nodeAfter;return n&&c.isSelectable(n)?new c(t):i.near(t)}constructor(e){this.anchor=e}}class h extends i{replace(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.Slice.empty;if(n==t.Slice.empty){e.delete(0,e.doc.content.size);let t=i.atStart(e.doc);t.eq(e.selection)||e.setSelection(t)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new h(e)}map(e){return new h(e)}eq(e){return e instanceof h}getBookmark(){return p}constructor(e){super(e.resolve(0),e.resolve(e.content.size))}}i.jsonID("all",h);let p={map(){return this},resolve:e=>new h(e)};function f(e,t,n,r,i){let a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(t.inlineContent)return l.create(e,n);for(let o=r-(i>0?0:1);i>0?o<t.childCount:o>=0;o+=i){let r=t.child(o);if(r.isAtom){if(!a&&c.isSelectable(r))return c.create(e,n-(i<0?r.nodeSize:0))}else{let t=f(e,r,n+i,i<0?r.childCount:0,i,a);if(t)return t}n+=r.nodeSize*i}return null}function m(e,t,r){let a,o=e.steps.length-1;if(o<t)return;let s=e.steps[o];(s instanceof n.ReplaceStep||s instanceof n.ReplaceAroundStep)&&(e.mapping.maps[o].forEach((e,t,n,r)=>{null==a&&(a=r)}),e.setSelection(i.near(e.doc.resolve(a),r)))}class g extends n.Transform{get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(1|this.updated)&-3,this.storedMarks=null,this}get selectionSet(){return(1&this.updated)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=2,this}ensureMarks(e){return t.Mark.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(2&this.updated)>0}addStep(e,t){super.addStep(e,t),this.updated=-3&this.updated,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e){let n=!(arguments.length>1)||void 0===arguments[1]||arguments[1],r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||t.Mark.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,n){let r=this.doc.type.schema;if(null==t)return e?this.replaceSelectionWith(r.text(e),!0):this.deleteSelection();{if(null==n&&(n=t),n=null==n?t:n,!e)return this.deleteRange(t,n);let a=this.storedMarks;if(!a){let e=this.doc.resolve(t);a=n==t?e.marks():e.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(t,n,r.text(e,a)),this.selection.empty||this.setSelection(i.near(this.selection.$to)),this}}setMeta(e,t){return this.meta["string"==typeof e?e:e.key]=t,this}getMeta(e){return this.meta["string"==typeof e?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=4,this}get scrolledIntoView(){return(4&this.updated)>0}constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}}function y(e,t){return t&&e?e.bind(t):e}class b{constructor(e,t,n){this.name=e,this.init=y(t.init,n),this.apply=y(t.apply,n)}}let x=[new b("doc",{init:e=>e.doc||e.schema.topNodeType.createAndFill(),apply:e=>e.doc}),new b("selection",{init:(e,t)=>e.selection||i.atStart(t.doc),apply:e=>e.selection}),new b("storedMarks",{init:e=>e.storedMarks||null,apply:(e,t,n,r)=>r.selection.$cursor?e.storedMarks:null}),new b("scrollToSelection",{init:()=>0,apply:(e,t)=>e.scrolledIntoView?t+1:t})];class w{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=x.slice(),t&&t.forEach(e=>{if(this.pluginsByKey[e.key])throw RangeError("Adding different instances of a keyed plugin ("+e.key+")");this.plugins.push(e),this.pluginsByKey[e.key]=e,e.spec.state&&this.fields.push(new b(e.key,e.spec.state,e))})}}class k{get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;for(let n=0;n<this.config.plugins.length;n++)if(n!=t){let t=this.config.plugins[n];if(t.spec.filterTransaction&&!t.spec.filterTransaction.call(t,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],n=this.applyInner(e),r=null;for(;;){let i=!1;for(let a=0;a<this.config.plugins.length;a++){let o=this.config.plugins[a];if(o.spec.appendTransaction){let s=r?r[a].n:0,l=r?r[a].state:this,u=s<t.length&&o.spec.appendTransaction.call(o,s?t.slice(s):t,l,n);if(u&&n.filterTransaction(u,a)){if(u.setMeta("appendedTransaction",e),!r){r=[];for(let e=0;e<this.config.plugins.length;e++)r.push(e<a?{state:n,n:t.length}:{state:this,n:0})}t.push(u),n=n.applyInner(u),i=!0}r&&(r[a]={state:n,n:t.length})}}if(!i)return{state:n,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw RangeError("Applying a mismatched transaction");let t=new k(this.config),n=this.config.fields;for(let r=0;r<n.length;r++){let i=n[r];t[i.name]=i.apply(e,this[i.name],this,t)}return t}get tr(){return new g(this)}static create(e){let t=new w(e.doc?e.doc.type.schema:e.schema,e.plugins),n=new k(t);for(let r=0;r<t.fields.length;r++)n[t.fields[r].name]=t.fields[r].init(e,n);return n}reconfigure(e){let t=new w(this.schema,e.plugins),n=t.fields,r=new k(t);for(let t=0;t<n.length;t++){let i=n[t].name;r[i]=this.hasOwnProperty(i)?this[i]:n[t].init(e,r)}return r}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(e=>e.toJSON())),e&&"object"==typeof e)for(let n in e){if("doc"==n||"selection"==n)throw RangeError("The JSON fields `doc` and `selection` are reserved");let r=e[n],i=r.spec.state;i&&i.toJSON&&(t[n]=i.toJSON.call(r,this[r.key]))}return t}static fromJSON(e,n,r){if(!n)throw RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw RangeError("Required config field 'schema' missing");let a=new w(e.schema,e.plugins),o=new k(a);return a.fields.forEach(a=>{if("doc"==a.name)o.doc=t.Node.fromJSON(e.schema,n.doc);else if("selection"==a.name)o.selection=i.fromJSON(o.doc,n.selection);else if("storedMarks"==a.name)n.storedMarks&&(o.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let t in r){let i=r[t],s=i.spec.state;if(i.key==a.name&&s&&s.fromJSON&&Object.prototype.hasOwnProperty.call(n,t)){o[a.name]=s.fromJSON.call(i,e,n[t],o);return}}o[a.name]=a.init(e,o)}}),o}constructor(e){this.config=e}}class S{getState(e){return e[this.key]}constructor(e){this.spec=e,this.props={},e.props&&function e(t,n,r){for(let i in t){let a=t[i];a instanceof Function?a=a.bind(n):"handleDOMEvents"==i&&(a=e(a,n,{})),r[i]=a}return r}(e.props,this,this.props),this.key=e.key?e.key.key:C("plugin")}}let _=Object.create(null);function C(e){return e in _?e+"$"+ ++_[e]:(_[e]=0,e+"$")}class A{get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}constructor(e="key"){this.key=C(e)}}},357362:e=>{"use strict";e.s({})},125492:e=>{"use strict";e.s({}),e.i(357362)},954647:e=>{"use strict";e.s({Decoration:()=>tp,DecorationSet:()=>tg,EditorView:()=>tz});var t=e.i(968617),n=e.i(490077),r=e.i(47542);let i=function(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t},a=function(e){let t=e.assignedSlot||e.parentNode;return t&&11==t.nodeType?t.host:t},o=null,s=function(e,t,n){let r=o||(o=document.createRange());return r.setEnd(e,null==n?e.nodeValue.length:n),r.setStart(e,t||0),r},l=function(){o=null},u=function(e,t,n,r){return n&&(d(e,t,n,r,-1)||d(e,t,n,r,1))},c=/^(img|br|input|textarea|hr)$/i;function d(e,t,n,r,a){for(;;){if(e==n&&t==r)return!0;if(t==(a<0?0:h(e))){let n=e.parentNode;if(!n||1!=n.nodeType||p(e)||c.test(e.nodeName)||"false"==e.contentEditable)return!1;t=i(e)+(a<0?0:1),e=n}else{if(1!=e.nodeType||"false"==(e=e.childNodes[t+(a<0?-1:0)]).contentEditable)return!1;t=a<0?h(e):0}}}function h(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function p(e){let t;for(let n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}let f=function(e){return e.focusNode&&u(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function m(e,t){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}let g="undefined"!=typeof navigator?navigator:null,y="undefined"!=typeof document?document:null,b=g&&g.userAgent||"",x=/Edge\/(\d+)/.exec(b),w=/MSIE \d/.exec(b),k=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(b),S=!!(w||k||x),_=w?document.documentMode:k?+k[1]:x?+x[1]:0,C=!S&&/gecko\/(\d+)/i.test(b);C&&(/Firefox\/(\d+)/.exec(b)||[0,0])[1];let A=!S&&/Chrome\/(\d+)/.exec(b),E=!!A,T=A?+A[1]:0,M=!S&&!!g&&/Apple Computer/.test(g.vendor),I=M&&(/Mobile\/\w+/.test(b)||!!g&&g.maxTouchPoints>2),N=I||!!g&&/Mac/.test(g.platform),D=!!g&&/Win/.test(g.platform),P=/Android \d/.test(b),R=!!y&&"webkitFontSmoothing"in y.documentElement.style,O=R?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function j(e,t){return"number"==typeof e?e:e[t]}function F(e,t,n){let r=e.someProp("scrollThreshold")||0,i=e.someProp("scrollMargin")||5,o=e.dom.ownerDocument;for(let s=n||e.dom;s;s=a(s)){if(1!=s.nodeType)continue;let e=s,n=e==o.body,a=n?function(e){let t=e.defaultView&&e.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}(o):function(e){let t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*r}}(e),l=0,u=0;if(t.top<a.top+j(r,"top")?u=-(a.top-t.top+j(i,"top")):t.bottom>a.bottom-j(r,"bottom")&&(u=t.bottom-t.top>a.bottom-a.top?t.top+j(i,"top")-a.top:t.bottom-a.bottom+j(i,"bottom")),t.left<a.left+j(r,"left")?l=-(a.left-t.left+j(i,"left")):t.right>a.right-j(r,"right")&&(l=t.right-a.right+j(i,"right")),l||u)if(n)o.defaultView.scrollBy(l,u);else{let n=e.scrollLeft,r=e.scrollTop;u&&(e.scrollTop+=u),l&&(e.scrollLeft+=l);let i=e.scrollLeft-n,a=e.scrollTop-r;t={left:t.left-i,top:t.top-a,right:t.right-i,bottom:t.bottom-a}}if(n||/^(fixed|sticky)$/.test(getComputedStyle(s).position))break}}function L(e){let t=[],n=e.ownerDocument;for(let r=e;r&&(t.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),e!=n);r=a(r));return t}function z(e,t){for(let n=0;n<e.length;n++){let{dom:r,top:i,left:a}=e[n];r.scrollTop!=i+t&&(r.scrollTop=i+t),r.scrollLeft!=a&&(r.scrollLeft=a)}}let B=null;function U(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function H(e){return e.top<e.bottom||e.left<e.right}function W(e,t){let n=e.getClientRects();if(n.length){let e=n[t<0?0:n.length-1];if(H(e))return e}return Array.prototype.find.call(n,H)||e.getBoundingClientRect()}let V=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function q(e,t,n){let{node:r,offset:i,atom:a}=e.docView.domFromPos(t,n<0?-1:1),o=R||C;if(3==r.nodeType)if(o&&(V.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let e=W(s(r,i,i),n);if(C&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let t=W(s(r,i-1,i-1),-1);if(t.top==e.top){let n=W(s(r,i,i+1),-1);if(n.top!=e.top)return G(n,n.left<t.left)}}return e}else{let e=i,t=i,a=n<0?1:-1;return n<0&&!i?(t++,a=-1):n>=0&&i==r.nodeValue.length?(e--,a=1):n<0?e--:t++,G(W(s(r,e,t),a),a<0)}if(!e.state.doc.resolve(t-(a||0)).parent.inlineContent){if(null==a&&i&&(n<0||i==h(r))){let e=r.childNodes[i-1];if(1==e.nodeType)return $(e.getBoundingClientRect(),!1)}if(null==a&&i<h(r)){let e=r.childNodes[i];if(1==e.nodeType)return $(e.getBoundingClientRect(),!0)}return $(r.getBoundingClientRect(),n>=0)}if(null==a&&i&&(n<0||i==h(r))){let e=r.childNodes[i-1],t=3==e.nodeType?s(e,h(e)-!o):1!=e.nodeType||"BR"==e.nodeName&&e.nextSibling?null:e;if(t)return G(W(t,1),!1)}if(null==a&&i<h(r)){let e=r.childNodes[i];for(;e.pmViewDesc&&e.pmViewDesc.ignoreForCoords;)e=e.nextSibling;let t=e?3==e.nodeType?s(e,0,+!o):1==e.nodeType?e:null:null;if(t)return G(W(t,-1),!0)}return G(W(3==r.nodeType?s(r):r,-n),n>=0)}function G(e,t){if(0==e.width)return e;let n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function $(e,t){if(0==e.height)return e;let n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function K(e,t,n){let r=e.state,i=e.root.activeElement;r!=t&&e.updateState(t),i!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),i!=e.dom&&i&&i.focus()}}let Y=/[\u0590-\u08ac]/,X=null,Z=null,J=!1;class Q{matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,n){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,n=this.posAtStart;;t++){let r=this.children[t];if(r==e)return n;n+=r.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,n){let r;if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode))if(n<0){let n,r;if(e==this.contentDOM)n=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;n=e.previousSibling}for(;n&&!((r=n.pmViewDesc)&&r.parent==this);)n=n.previousSibling;return n?this.posBeforeChild(r)+r.size:this.posAtStart}else{let n,r;if(e==this.contentDOM)n=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;n=e.nextSibling}for(;n&&!((r=n.pmViewDesc)&&r.parent==this);)n=n.nextSibling;return n?this.posBeforeChild(r):this.posAtEnd}if(e==this.dom&&this.contentDOM)r=t>i(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))r=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(let t=e;;t=t.parentNode){if(t==this.dom){r=!1;break}if(t.previousSibling)break}if(null==r&&t==e.childNodes.length)for(let t=e;;t=t.parentNode){if(t==this.dom){r=!0;break}if(t.nextSibling)break}}return(null==r?n>0:r)?this.posAtEnd:this.posAtStart}nearestDesc(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(let n=!0,r=e;r;r=r.parentNode){let i=this.getDesc(r),a;if(i&&(!t||i.node))if(!n||!(a=i.nodeDOM)||(1==a.nodeType?a.contains(1==e.nodeType?e:e.parentNode):a==e))return i;else n=!1}}getDesc(e){let t=e.pmViewDesc;for(let e=t;e;e=e.parent)if(e==this)return t}posFromDOM(e,t,n){for(let r=e;r;r=r.parentNode){let i=this.getDesc(r);if(i)return i.localPosFromDOM(e,t,n)}return -1}descAt(e){for(let t=0,n=0;t<this.children.length;t++){let r=this.children[t],i=n+r.size;if(n==e&&i!=n){for(;!r.border&&r.children.length;)r=r.children[0];return r}if(e<i)return r.descAt(e-n-r.border);n=i}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let n=0,r=0;for(let t=0;n<this.children.length;n++){let i=this.children[n],a=t+i.size;if(a>e||i instanceof eo){r=e-t;break}t=a}if(r)return this.children[n].domFromPos(r-this.children[n].border,t);for(let e;n&&!(e=this.children[n-1]).size&&e instanceof ee&&e.side>=0;n--);if(t<=0){let e,r=!0;for(;(e=n?this.children[n-1]:null)&&e.dom.parentNode!=this.contentDOM;n--,r=!1);return e&&t&&r&&!e.border&&!e.domAtom?e.domFromPos(e.size,t):{node:this.contentDOM,offset:e?i(e.dom)+1:0}}{let e,r=!0;for(;(e=n<this.children.length?this.children[n]:null)&&e.dom.parentNode!=this.contentDOM;n++,r=!1);return e&&r&&!e.border&&!e.domAtom?e.domFromPos(0,t):{node:this.contentDOM,offset:e?i(e.dom):this.contentDOM.childNodes.length}}}parseRange(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let r=-1,a=-1;for(let o=n,s=0;;s++){let n=this.children[s],l=o+n.size;if(-1==r&&e<=l){let a=o+n.border;if(e>=a&&t<=l-n.border&&n.node&&n.contentDOM&&this.contentDOM.contains(n.contentDOM))return n.parseRange(e,t,a);e=o;for(let t=s;t>0;t--){let n=this.children[t-1];if(n.size&&n.dom.parentNode==this.contentDOM&&!n.emptyChildAt(1)){r=i(n.dom)+1;break}e-=n.size}-1==r&&(r=0)}if(r>-1&&(l>t||s==this.children.length-1)){t=l;for(let e=s+1;e<this.children.length;e++){let n=this.children[e];if(n.size&&n.dom.parentNode==this.contentDOM&&!n.emptyChildAt(-1)){a=i(n.dom);break}t+=n.size}-1==a&&(a=this.contentDOM.childNodes.length);break}o=l}return{node:this.contentDOM,from:e,to:t,fromOffset:r,toOffset:a}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:n}=this.domFromPos(e,0);if(1!=t.nodeType||n==t.childNodes.length)throw RangeError("No node after pos "+e);return t.childNodes[n]}setSelection(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=Math.min(e,t),o=Math.max(e,t);for(let i=0,s=0;i<this.children.length;i++){let l=this.children[i],u=s+l.size;if(a>s&&o<u)return l.setSelection(e-s-l.border,t-s-l.border,n,r);s=u}let s=this.domFromPos(e,e?-1:1),l=t==e?s:this.domFromPos(t,t?-1:1),c=n.getSelection(),d=!1;if((C||M)&&e==t){let{node:e,offset:t}=s;if(3==e.nodeType){if((d=!!(t&&"\n"==e.nodeValue[t-1]))&&t==e.nodeValue.length)for(let t=e,n;t;t=t.parentNode){if(n=t.nextSibling){"BR"==n.nodeName&&(s=l={node:n.parentNode,offset:i(n)+1});break}let e=t.pmViewDesc;if(e&&e.node&&e.node.isBlock)break}}else{let n=e.childNodes[t-1];d=n&&("BR"==n.nodeName||"false"==n.contentEditable)}}if(C&&c.focusNode&&c.focusNode!=l.node&&1==c.focusNode.nodeType){let e=c.focusNode.childNodes[c.focusOffset];e&&"false"==e.contentEditable&&(r=!0)}if(!(r||d&&M)&&u(s.node,s.offset,c.anchorNode,c.anchorOffset)&&u(l.node,l.offset,c.focusNode,c.focusOffset))return;let h=!1;if((c.extend||e==t)&&!d){c.collapse(s.node,s.offset);try{e!=t&&c.extend(l.node,l.offset),h=!0}catch(e){}}if(!h){if(e>t){let e=s;s=l,l=e}let n=document.createRange();n.setEnd(l.node,l.offset),n.setStart(s.node,s.offset),c.removeAllRanges(),c.addRange(n)}}ignoreMutation(e){return!this.contentDOM&&"selection"!=e.type}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let n=0,r=0;r<this.children.length;r++){let i=this.children[r],a=n+i.size;if(n==a?e<=a&&t>=n:e<a&&t>n){let r=n+i.border,o=a-i.border;if(e>=r&&t<=o){this.dirty=e==n||t==a?2:1,e==r&&t==o&&(i.contentLost||i.dom.parentNode!=this.contentDOM)?i.dirty=3:i.markDirty(e-r,t-r);return}i.dirty=i.dom!=i.contentDOM||i.dom.parentNode!=this.contentDOM||i.children.length?3:2}n=a}this.dirty=2}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let n=1==e?2:1;t.dirty<n&&(t.dirty=n)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}constructor(e,t,n,r){this.parent=e,this.children=t,this.dom=n,this.contentDOM=r,this.dirty=0,n.pmViewDesc=this}}class ee extends Q{matchesWidget(e){return 0==this.dirty&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return!!t&&t(e)}ignoreMutation(e){return"selection"!=e.type||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}constructor(e,t,n,r){let i,a=t.type.toDOM;if("function"==typeof a&&(a=a(n,()=>i?i.parent?i.parent.posBeforeChild(i):void 0:r)),!t.type.spec.raw){if(1!=a.nodeType){let e=document.createElement("span");e.appendChild(a),a=e}a.contentEditable="false",a.classList.add("ProseMirror-widget")}super(e,[],a,null),this.widget=t,this.widget=t,i=this}}class et extends Q{get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue}constructor(e,t,n,r){super(e,[],t,null),this.textDOM=n,this.text=r}}class en extends Q{static create(e,t,r,i){let a=i.nodeViews[t.type.name],o=a&&a(t,i,r);return o&&o.dom||(o=n.DOMSerializer.renderSpec(document,t.type.spec.toDOM(t,r),null,t.attrs)),new en(e,t,o.dom,o.contentDOM||o.dom)}parseRule(){return 3&this.dirty||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return 3!=this.dirty&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),0!=this.dirty){let e=this.parent;for(;!e.node;)e=e.parent;e.dirty<this.dirty&&(e.dirty=this.dirty),this.dirty=0}}slice(e,t,n){let r=en.create(this.parent,this.mark,!0,n),i=this.children,a=this.size;t<a&&(i=ev(i,t,a,n)),e>0&&(i=ev(i,0,e,n));for(let e=0;e<i.length;e++)i[e].parent=r;return r.children=i,r}constructor(e,t,n,r){super(e,[],n,r),this.mark=t}}class er extends Q{static create(e,t,r,i,a,o){let s=a.nodeViews[t.type.name],l,u=s&&s(t,a,()=>l?l.parent?l.parent.posBeforeChild(l):void 0:o,r,i),c=u&&u.dom,d=u&&u.contentDOM;if(t.isText)if(c){if(3!=c.nodeType)throw RangeError("Text must be rendered as a DOM text node")}else c=document.createTextNode(t.text);else if(!c){let e=n.DOMSerializer.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs);({dom:c,contentDOM:d}=e)}d||t.isText||"BR"==c.nodeName||(c.hasAttribute("contenteditable")||(c.contentEditable="false"),t.type.spec.draggable&&(c.draggable=!0));let h=c;return(c=eh(c,r,t),u)?l=new es(e,t,r,i,c,d||null,h,u,a,o+1):t.isText?new ea(e,t,r,i,c,h,a):new er(e,t,r,i,c,d||null,h,a,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(e.preserveWhitespace="full"),this.contentDOM)if(this.contentLost){for(let t=this.children.length-1;t>=0;t--){let n=this.children[t];if(this.dom.contains(n.dom.parentNode)){e.contentElement=n.dom.parentNode;break}}e.contentElement||(e.getContent=()=>n.Fragment.empty)}else e.contentElement=this.contentDOM;else e.getContent=()=>this.node.content;return e}matchesNode(e,t,n){return 0==this.dirty&&e.eq(this.node)&&ep(t,this.outerDeco)&&n.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return+!this.node.isLeaf}updateChildren(e,t){let r=this.node.inlineContent,i=t,a=e.composing?this.localCompositionInfo(e,t):null,o=a&&a.pos>-1?a:null,s=a&&a.pos<0,l=new em(this,o&&o.node,e);(function(e,t,n,r){let i=t.locals(e),a=0;if(0==i.length){for(let n=0;n<e.childCount;n++){let o=e.child(n);r(o,i,t.forChild(a,o),n),a+=o.nodeSize}return}let o=0,s=[],l=null;for(let u=0;;){let c,d,h,p;for(;o<i.length&&i[o].to==a;){let e=i[o++];e.widget&&(c?(d||(d=[c])).push(e):c=e)}if(c)if(d){d.sort(eg);for(let e=0;e<d.length;e++)n(d[e],u,!!l)}else n(c,u,!!l);if(l)p=-1,h=l,l=null;else if(u<e.childCount)p=u,h=e.child(u++);else break;for(let e=0;e<s.length;e++)s[e].to<=a&&s.splice(e--,1);for(;o<i.length&&i[o].from<=a&&i[o].to>a;)s.push(i[o++]);let f=a+h.nodeSize;if(h.isText){let e=f;o<i.length&&i[o].from<e&&(e=i[o].from);for(let t=0;t<s.length;t++)s[t].to<e&&(e=s[t].to);e<f&&(l=h.cut(e-a),h=h.cut(0,e-a),f=e,p=-1)}else for(;o<i.length&&i[o].to<f;)o++;let m=h.isInline&&!h.isLeaf?s.filter(e=>!e.inline):s.slice();r(h,m,t.forChild(a,h),p),a=f}})(this.node,this.innerDeco,(t,a,o)=>{t.spec.marks?l.syncToMarks(t.spec.marks,r,e):t.type.side>=0&&!o&&l.syncToMarks(a==this.node.childCount?n.Mark.none:this.node.child(a).marks,r,e),l.placeWidget(t,e,i)},(t,n,o,u)=>{let c;l.syncToMarks(t.marks,r,e),l.findNodeMatch(t,n,o,u)||s&&e.state.selection.from>i&&e.state.selection.to<i+t.nodeSize&&(c=l.findIndexWithChild(a.node))>-1&&l.updateNodeAt(t,n,o,c,e)||l.updateNextNode(t,n,o,e,u,i)||l.addNode(t,n,o,e,i),i+=t.nodeSize}),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||2==this.dirty)&&(o&&this.protectLocalComposition(e,o),function e(t,n,r){let i=t.firstChild,a=!1;for(let o=0;o<n.length;o++){let s=n[o],l=s.dom;if(l.parentNode==t){for(;l!=i;)i=ef(i),a=!0;i=i.nextSibling}else a=!0,t.insertBefore(l,i);if(s instanceof en){let n=i?i.previousSibling:t.lastChild;e(s.contentDOM,s.children,r),i=n?n.nextSibling:t.firstChild}}for(;i;)i=ef(i),a=!0;a&&r.trackWrites==t&&(r.trackWrites=null)}(this.contentDOM,this.children,e),I&&function(e){if("UL"==e.nodeName||"OL"==e.nodeName){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof t.TextSelection)||r<n||i>n+this.node.content.size)return null;let a=e.input.compositionNode;if(!a||!this.dom.contains(a.parentNode))return null;if(!this.node.inlineContent)return{node:a,pos:-1,text:""};{let e=a.nodeValue,t=function(e,t,n,r){for(let i=0,a=0;i<e.childCount&&a<=r;){let o=e.child(i++),s=a;if(a+=o.nodeSize,!o.isText)continue;let l=o.text;for(;i<e.childCount;){let t=e.child(i++);if(a+=t.nodeSize,!t.isText)break;l+=t.text}if(a>=n){if(a>=r&&l.slice(r-t.length-s,r-s)==t)return r-t.length;let e=s<r?l.lastIndexOf(t,r-s-1):-1;if(e>=0&&e+t.length+s>=n)return s+e;if(n==r&&l.length>=r+t.length-s&&l.slice(r-s,r-s+t.length)==t)return r}}return -1}(this.node.content,e,r-n,i-n);return t<0?null:{node:a,pos:t,text:e}}}protectLocalComposition(e,t){let{node:n,pos:r,text:i}=t;if(this.getDesc(n))return;let a=n;for(;a.parentNode!=this.contentDOM;a=a.parentNode){for(;a.previousSibling;)a.parentNode.removeChild(a.previousSibling);for(;a.nextSibling;)a.parentNode.removeChild(a.nextSibling);a.pmViewDesc&&(a.pmViewDesc=void 0)}let o=new et(this,a,n,i);e.input.compositionNodes.push(o),this.children=ev(this.children,r,r+i.length,e,o)}update(e,t,n,r){return 3!=this.dirty&&!!e.sameMarkup(this.node)&&(this.updateInner(e,t,n,r),!0)}updateInner(e,t,n,r){this.updateOuterDeco(t),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=0}updateOuterDeco(e){if(ep(e,this.outerDeco))return;let t=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=ed(this.dom,this.nodeDOM,ec(this.outerDeco,this.node,t),ec(e,this.node,t)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){1==this.nodeDOM.nodeType&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}constructor(e,t,n,r,i,a,o,s,l){super(e,[],i,a),this.node=t,this.outerDeco=n,this.innerDeco=r,this.nodeDOM=o}}function ei(e,t,n,r,i){eh(r,t,e);let a=new er(void 0,e,t,n,r,r,r,i,0);return a.contentDOM&&a.updateChildren(i,0),a}class ea extends er{parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,n,r){return 3!=this.dirty&&(0==this.dirty||!!this.inParent())&&!!e.sameMarkup(this.node)&&(this.updateOuterDeco(t),(0!=this.dirty||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=e,this.dirty=0,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,n){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,n)}ignoreMutation(e){return"characterData"!=e.type&&"selection"!=e.type}slice(e,t,n){let r=this.node.cut(e,t),i=document.createTextNode(r.text);return new ea(this.parent,r,this.outerDeco,this.innerDeco,i,i,n)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(0==e||t==this.nodeDOM.nodeValue.length)&&(this.dirty=3)}get domAtom(){return!1}isText(e){return this.node.text==e}constructor(e,t,n,r,i,a,o){super(e,t,n,r,i,null,a,o,0)}}class eo extends Q{parseRule(){return{ignore:!0}}matchesHack(e){return 0==this.dirty&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return"IMG"==this.dom.nodeName}}class es extends er{update(e,t,n,r){if(3==this.dirty)return!1;if(this.spec.update){let i=this.spec.update(e,t,n);return i&&this.updateInner(e,t,n,r),i}return(!!this.contentDOM||!!e.isLeaf)&&super.update(e,t,n,r)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,n,r){this.spec.setSelection?this.spec.setSelection(e,t,n):super.setSelection(e,t,n,r)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}constructor(e,t,n,r,i,a,o,s,l,u){super(e,t,n,r,i,a,o,l,u),this.spec=s}}let el=function(e){e&&(this.nodeName=e)};el.prototype=Object.create(null);let eu=[new el];function ec(e,t,n){if(0==e.length)return eu;let r=n?eu[0]:new el,i=[r];for(let a=0;a<e.length;a++){let o=e[a].type.attrs;if(o)for(let e in o.nodeName&&i.push(r=new el(o.nodeName)),o){let a=o[e];null!=a&&(n&&1==i.length&&i.push(r=new el(t.isInline?"span":"div")),"class"==e?r.class=(r.class?r.class+" ":"")+a:"style"==e?r.style=(r.style?r.style+";":"")+a:"nodeName"!=e&&(r[e]=a))}}return i}function ed(e,t,n,r){if(n==eu&&r==eu)return t;let i=t;for(let t=0;t<r.length;t++){let a=r[t],o=n[t];if(t){let t;o&&o.nodeName==a.nodeName&&i!=e&&(t=i.parentNode)&&t.nodeName.toLowerCase()==a.nodeName||((t=document.createElement(a.nodeName)).pmIsDeco=!0,t.appendChild(i),o=eu[0]),i=t}!function(e,t,n){for(let r in t)"class"==r||"style"==r||"nodeName"==r||r in n||e.removeAttribute(r);for(let r in n)"class"!=r&&"style"!=r&&"nodeName"!=r&&n[r]!=t[r]&&e.setAttribute(r,n[r]);if(t.class!=n.class){let r=t.class?t.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let t=0;t<r.length;t++)-1==i.indexOf(r[t])&&e.classList.remove(r[t]);for(let t=0;t<i.length;t++)-1==r.indexOf(i[t])&&e.classList.add(i[t]);0==e.classList.length&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style){let n=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,r;for(;r=n.exec(t.style);)e.style.removeProperty(r[1])}n.style&&(e.style.cssText+=n.style)}}(i,o||eu[0],a)}return i}function eh(e,t,n){return ed(e,e,eu,ec(t,n,1!=e.nodeType))}function ep(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function ef(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class em{destroyBetween(e,t){if(e!=t){for(let n=e;n<t;n++)this.top.children[n].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,n){let r=0,i=this.stack.length>>1,a=Math.min(i,e.length);for(;r<a&&(r==i-1?this.top:this.stack[r+1<<1]).matchesMark(e[r])&&!1!==e[r].type.spec.spanning;)r++;for(;r<i;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),i--;for(;i<e.length;){this.stack.push(this.top,this.index+1);let r=-1;for(let t=this.index;t<Math.min(this.index+3,this.top.children.length);t++){let n=this.top.children[t];if(n.matchesMark(e[i])&&!this.isLocked(n.dom)){r=t;break}}if(r>-1)r>this.index&&(this.changed=!0,this.destroyBetween(this.index,r)),this.top=this.top.children[this.index];else{let r=en.create(this.top,e[i],t,n);this.top.children.splice(this.index,0,r),this.top=r,this.changed=!0}this.index=0,i++}}findNodeMatch(e,t,n,r){let i=-1,a;if(r>=this.preMatch.index&&(a=this.preMatch.matches[r-this.preMatch.index]).parent==this.top&&a.matchesNode(e,t,n))i=this.top.children.indexOf(a,this.index);else for(let r=this.index,a=Math.min(this.top.children.length,r+5);r<a;r++){let a=this.top.children[r];if(a.matchesNode(e,t,n)&&!this.preMatch.matched.has(a)){i=r;break}}return!(i<0)&&(this.destroyBetween(this.index,i),this.index++,!0)}updateNodeAt(e,t,n,r,i){let a=this.top.children[r];return 3==a.dirty&&a.dom==a.contentDOM&&(a.dirty=2),!!a.update(e,t,n,i)&&(this.destroyBetween(this.index,r),this.index++,!0)}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return -1;if(t==this.top.contentDOM){let t=e.pmViewDesc;if(t){for(let e=this.index;e<this.top.children.length;e++)if(this.top.children[e]==t)return e}return -1}e=t}}updateNextNode(e,t,n,r,i,a){for(let o=this.index;o<this.top.children.length;o++){let s=this.top.children[o];if(s instanceof er){let l=this.preMatch.matched.get(s);if(null!=l&&l!=i)return!1;let u=s.dom,c,d=this.isLocked(u)&&!(e.isText&&s.node&&s.node.isText&&s.nodeDOM.nodeValue==e.text&&3!=s.dirty&&ep(t,s.outerDeco));if(!d&&s.update(e,t,n,r))return this.destroyBetween(this.index,o),s.dom!=u&&(this.changed=!0),this.index++,!0;if(!d&&(c=this.recreateWrapper(s,e,t,n,r,a)))return this.top.children[this.index]=c,c.contentDOM&&(c.dirty=2,c.updateChildren(r,a+1),c.dirty=0),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,n,r,i,a){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content))return null;let o=er.create(this.top,t,n,r,i,a);if(o.contentDOM)for(let t of(o.children=e.children,e.children=[],o.children))t.parent=o;return e.destroy(),o}addNode(e,t,n,r,i){let a=er.create(this.top,e,t,n,r,i);a.contentDOM&&a.updateChildren(r,i+1),this.top.children.splice(this.index++,0,a),this.changed=!0}placeWidget(e,t,n){let r=this.index<this.top.children.length?this.top.children[this.index]:null;if(r&&r.matchesWidget(e)&&(e==r.widget||!r.widget.type.toDOM.parentNode))this.index++;else{let r=new ee(this.top,e,t,n);this.top.children.splice(this.index++,0,r),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof en;)e=(t=e).children[t.children.length-1];(!e||!(e instanceof ea)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((M||E)&&e&&"false"==e.dom.contentEditable&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let n=document.createElement(e);"IMG"==e&&(n.className="ProseMirror-separator",n.alt=""),"BR"==e&&(n.className="ProseMirror-trailingBreak");let r=new eo(this.top,[],n,null);t!=this.top?t.children.push(r):t.children.splice(this.index++,0,r),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||1==e.nodeType&&e.contains(this.lock.parentNode))}constructor(e,t,n){this.lock=t,this.view=n,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=function(e,t){let n=t,r=n.children.length,i=e.childCount,a=new Map,o=[];n:for(;i>0;){let s;for(;;)if(r){let e=n.children[r-1];if(e instanceof en)n=e,r=e.children.length;else{s=e,r--;break}}else if(n==t)break n;else r=n.parent.children.indexOf(n),n=n.parent;let l=s.node;if(l){if(l!=e.child(i-1))break;--i,a.set(s,i),o.push(s)}}return{index:i,matched:a,matches:o.reverse()}}(e.node.content,e)}}function eg(e,t){return e.type.side-t.type.side}function ev(e,t,n,r,i){let a=[];for(let o=0,s=0;o<e.length;o++){let l=e[o],u=s,c=s+=l.size;u>=n||c<=t?a.push(l):(u<t&&a.push(l.slice(0,t-u,r)),i&&(a.push(i),i=void 0),c>n&&a.push(l.slice(n-u,l.size,r)))}return a}function ey(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=e.domSelectionRange(),a=e.state.doc;if(!r.focusNode)return null;let o=e.docView.nearestDesc(r.focusNode),s=o&&0==o.size,l=e.docView.posFromDOM(r.focusNode,r.focusOffset,1);if(l<0)return null;let u=a.resolve(l),c,d;if(f(r)){for(c=u;o&&!o.node;)o=o.parent;let e=o.node;if(o&&e.isAtom&&t.NodeSelection.isSelectable(e)&&o.parent&&!(e.isInline&&function(e,t,n){for(let r=0==t,a=t==h(e);r||a;){if(e==n)return!0;let t=i(e);if(!(e=e.parentNode))return!1;r=r&&0==t,a=a&&t==h(e)}}(r.focusNode,r.focusOffset,o.dom))){let e=o.posBefore;d=new t.NodeSelection(l==e?u:a.resolve(e))}}else{let t=e.docView.posFromDOM(r.anchorNode,r.anchorOffset,1);if(t<0)return null;c=a.resolve(t)}if(!d){let t="pointer"==n||e.state.selection.head<u.pos&&!s?1:-1;d=eE(e,c,u,t)}return d}function eb(e){return e.editable?e.hasFocus():eM(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function ex(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.state.selection;if(eC(e,r),eb(e)){if(!n&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&E){let t=e.domSelectionRange(),n=e.domObserver.currentSelection;if(t.anchorNode&&n.anchorNode&&u(t.anchorNode,t.anchorOffset,n.anchorNode,n.anchorOffset)){e.input.mouseDown.delayedSelectionSync=!0,e.domObserver.setCurSelection();return}}if(e.domObserver.disconnectSelection(),e.cursorWrapper)!function(e){let t=e.domSelection(),n=document.createRange();if(!t)return;let r=e.cursorWrapper.dom,a="IMG"==r.nodeName;a?n.setStart(r.parentNode,i(r)+1):n.setStart(r,0),n.collapse(!0),t.removeAllRanges(),t.addRange(n),!a&&!e.state.selection.visible&&S&&_<=11&&(r.disabled=!0,r.disabled=!1)}(e);else{var a;let i,o,s,l,{anchor:u,head:c}=r,d,h;ew&&!(r instanceof t.TextSelection)&&(r.$from.parent.inlineContent||(d=ek(e,r.from)),r.empty||r.$from.parent.inlineContent||(h=ek(e,r.to))),e.docView.setSelection(u,c,e.root,n),ew&&(d&&e_(d),h&&e_(h)),r.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&((i=(a=e).dom.ownerDocument).removeEventListener("selectionchange",a.input.hideSelectionGuard),s=(o=a.domSelectionRange()).anchorNode,l=o.anchorOffset,i.addEventListener("selectionchange",a.input.hideSelectionGuard=()=>{(o.anchorNode!=s||o.anchorOffset!=l)&&(i.removeEventListener("selectionchange",a.input.hideSelectionGuard),setTimeout(()=>{(!eb(a)||a.state.selection.visible)&&a.dom.classList.remove("ProseMirror-hideselection")},20))})))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}let ew=M||E&&T<63;function ek(e,t){let{node:n,offset:r}=e.docView.domFromPos(t,0),i=r<n.childNodes.length?n.childNodes[r]:null,a=r?n.childNodes[r-1]:null;if(M&&i&&"false"==i.contentEditable)return eS(i);if((!i||"false"==i.contentEditable)&&(!a||"false"==a.contentEditable)){if(i)return eS(i);else if(a)return eS(a)}}function eS(e){return e.contentEditable="true",M&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function e_(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function eC(e,n){if(n instanceof t.NodeSelection){let t=e.docView.descAt(n.from);t!=e.lastSelectedViewDesc&&(eA(e),t&&t.selectNode(),e.lastSelectedViewDesc=t)}else eA(e)}function eA(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function eE(e,n,r,i){return e.someProp("createSelectionBetween",t=>t(e,n,r))||t.TextSelection.between(n,r,i)}function eT(e){return(!e.editable||!!e.hasFocus())&&eM(e)}function eM(e){let t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(e){return!1}}function eI(e,n){let{$anchor:r,$head:i}=e.selection,a=n>0?r.max(i):r.min(i),o=a.parent.inlineContent?a.depth?e.doc.resolve(n>0?a.after():a.before()):null:a;return o&&t.Selection.findFrom(o,n)}function eN(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function eD(e,n,r){let i=e.state.selection;if(i instanceof t.TextSelection){if(r.indexOf("s")>-1){let{$head:r}=i,a=r.textOffset?null:n<0?r.nodeBefore:r.nodeAfter;if(!a||a.isText||!a.isLeaf)return!1;let o=e.state.doc.resolve(r.pos+a.nodeSize*(n<0?-1:1));return eN(e,new t.TextSelection(i.$anchor,o))}else if(!i.empty)return!1;else if(e.endOfTextblock(n>0?"forward":"backward")){let r=eI(e.state,n);return!!r&&r instanceof t.NodeSelection&&eN(e,r)}else if(!(N&&r.indexOf("m")>-1)){let r=i.$head,a=r.textOffset?null:n<0?r.nodeBefore:r.nodeAfter,o;if(!a||a.isText)return!1;let s=n<0?r.pos-a.nodeSize:r.pos;return!!(a.isAtom||(o=e.docView.descAt(s))&&!o.contentDOM)&&(t.NodeSelection.isSelectable(a)?eN(e,new t.NodeSelection(n<0?e.state.doc.resolve(r.pos-a.nodeSize):r)):!!R&&eN(e,new t.TextSelection(e.state.doc.resolve(n<0?s:s+a.nodeSize))))}}else{if(i instanceof t.NodeSelection&&i.node.isInline)return eN(e,new t.TextSelection(n>0?i.$to:i.$from));let r=eI(e.state,n);return!!r&&eN(e,r)}}function eP(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function eR(e,t){let n=e.pmViewDesc;return n&&0==n.size&&(t<0||e.nextSibling||"BR"!=e.nodeName)}function eO(e,t){return t<0?function(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let a,o,s=!1;for(C&&1==n.nodeType&&r<eP(n)&&eR(n.childNodes[r],-1)&&(s=!0);;)if(r>0)if(1!=n.nodeType)break;else{let e=n.childNodes[r-1];if(eR(e,-1))a=n,o=--r;else if(3==e.nodeType)r=(n=e).nodeValue.length;else break}else if(ej(n))break;else{let t=n.previousSibling;for(;t&&eR(t,-1);)a=n.parentNode,o=i(t),t=t.previousSibling;if(t)r=eP(n=t);else{if((n=n.parentNode)==e.dom)break;r=0}}s?eF(e,n,r):a&&eF(e,a,o)}(e):function(e){let t,n,r=e.domSelectionRange(),a=r.focusNode,o=r.focusOffset;if(!a)return;let s=eP(a);for(;;)if(o<s){if(1!=a.nodeType)break;if(eR(a.childNodes[o],1))t=a,n=++o;else break}else if(ej(a))break;else{let r=a.nextSibling;for(;r&&eR(r,1);)t=r.parentNode,n=i(r)+1,r=r.nextSibling;if(r)o=0,s=eP(a=r);else{if((a=a.parentNode)==e.dom)break;o=s=0}}t&&eF(e,t,n)}(e)}function ej(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function eF(e,t,n){if(3!=t.nodeType){let e,r;(r=function(e,t){for(;e&&t==e.childNodes.length&&!p(e);)t=i(e)+1,e=e.parentNode;for(;e&&t<e.childNodes.length;){let n=e.childNodes[t];if(3==n.nodeType)return n;if(1==n.nodeType&&"false"==n.contentEditable)break;e=n,t=0}}(t,n))?(t=r,n=0):(e=function(e,t){for(;e&&!t&&!p(e);)t=i(e),e=e.parentNode;for(;e&&t;){let n=e.childNodes[t-1];if(3==n.nodeType)return n;if(1==n.nodeType&&"false"==n.contentEditable)break;t=(e=n).childNodes.length}}(t,n))&&(t=e,n=e.nodeValue.length)}let r=e.domSelection();if(!r)return;if(f(r)){let e=document.createRange();e.setEnd(t,n),e.setStart(t,n),r.removeAllRanges(),r.addRange(e)}else r.extend&&r.extend(t,n);e.domObserver.setCurSelection();let{state:a}=e;setTimeout(()=>{e.state==a&&ex(e)},50)}function eL(e,t){let n=e.state.doc.resolve(t);if(!(E||D)&&n.parent.inlineContent){let r=e.coordsAtPos(t);if(t>n.start()){let n=e.coordsAtPos(t-1),i=(n.top+n.bottom)/2;if(i>r.top&&i<r.bottom&&Math.abs(n.left-r.left)>1)return n.left<r.left?"ltr":"rtl"}if(t<n.end()){let n=e.coordsAtPos(t+1),i=(n.top+n.bottom)/2;if(i>r.top&&i<r.bottom&&Math.abs(n.left-r.left)>1)return n.left>r.left?"ltr":"rtl"}}return"rtl"==getComputedStyle(e.dom).direction?"rtl":"ltr"}function ez(e,n,r){let i=e.state.selection;if(i instanceof t.TextSelection&&!i.empty||r.indexOf("s")>-1||N&&r.indexOf("m")>-1)return!1;let{$from:a,$to:o}=i;if(!a.parent.inlineContent||e.endOfTextblock(n<0?"up":"down")){let r=eI(e.state,n);if(r&&r instanceof t.NodeSelection)return eN(e,r)}if(!a.parent.inlineContent){let r=n<0?a:o,s=i instanceof t.AllSelection?t.Selection.near(r,n):t.Selection.findFrom(r,n);return!!s&&eN(e,s)}return!1}function eB(e,n){if(!(e.state.selection instanceof t.TextSelection))return!0;let{$head:r,$anchor:i,empty:a}=e.state.selection;if(!r.sameParent(i))return!0;if(!a)return!1;if(e.endOfTextblock(n>0?"forward":"backward"))return!0;let o=!r.textOffset&&(n<0?r.nodeBefore:r.nodeAfter);if(o&&!o.isText){let t=e.state.tr;return n<0?t.delete(r.pos-o.nodeSize,r.pos):t.delete(r.pos,r.pos+o.nodeSize),e.dispatch(t),!0}return!1}function eU(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function eH(e,t){e.someProp("transformCopied",n=>{t=n(t,e)});let r=[],{content:i,openStart:a,openEnd:o}=t;for(;a>1&&o>1&&1==i.childCount&&1==i.firstChild.childCount;){a--,o--;let e=i.firstChild;r.push(e.type.name,e.attrs!=e.type.defaultAttrs?e.attrs:null),i=e.content}let s=e.someProp("clipboardSerializer")||n.DOMSerializer.fromSchema(e.state.schema),l=eX(),u=l.createElement("div");u.appendChild(s.serializeFragment(i,{document:l}));let c=u.firstChild,d,h=0;for(;c&&1==c.nodeType&&(d=eK[c.nodeName.toLowerCase()]);){for(let e=d.length-1;e>=0;e--){let t=l.createElement(d[e]);for(;u.firstChild;)t.appendChild(u.firstChild);u.appendChild(t),h++}c=u.firstChild}return c&&1==c.nodeType&&c.setAttribute("data-pm-slice","".concat(a," ").concat(o).concat(h?" -".concat(h):""," ").concat(JSON.stringify(r))),{dom:u,text:e.someProp("clipboardTextSerializer",n=>n(t,e))||t.content.textBetween(0,t.content.size,"\n\n"),slice:t}}function eW(e,t,r,i,a){let o,s,l=a.parent.type.spec.code;if(!r&&!t)return null;let u=t&&(i||l||!r);if(u){if(e.someProp("transformPastedText",n=>{t=n(t,l||i,e)}),l)return t?new n.Slice(n.Fragment.from(e.state.schema.text(t.replace(/\r\n?/g,"\n"))),0,0):n.Slice.empty;let r=e.someProp("clipboardTextParser",n=>n(t,a,i,e));if(r)s=r;else{let r=a.marks(),{schema:i}=e.state,s=n.DOMSerializer.fromSchema(i);o=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(e=>{let t=o.appendChild(document.createElement("p"));e&&t.appendChild(s.serializeNode(i.text(e,r)))})}}else e.someProp("transformPastedHTML",t=>{r=t(r,e)}),o=function(e){let t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));let n=eX().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(e),i;if((i=r&&eK[r[1].toLowerCase()])&&(e=i.map(e=>"<"+e+">").join("")+e+i.map(e=>"</"+e+">").reverse().join("")),n.innerHTML=e,i)for(let e=0;e<i.length;e++)n=n.querySelector(i[e])||n;return n}(r),R&&function(e){let t=e.querySelectorAll(E?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<t.length;n++){let r=t[n];1==r.childNodes.length&&""==r.textContent&&r.parentNode&&r.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),r)}}(o);let c=o&&o.querySelector("[data-pm-slice]"),d=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(d&&d[3])for(let e=+d[3];e>0;e--){let e=o.firstChild;for(;e&&1!=e.nodeType;)e=e.nextSibling;if(!e)break;o=e}if(s||(s=(e.someProp("clipboardParser")||e.someProp("domParser")||n.DOMParser.fromSchema(e.state.schema)).parseSlice(o,{preserveWhitespace:!!(u||d),context:a,ruleFromNode:e=>"BR"!=e.nodeName||e.nextSibling||!e.parentNode||eV.test(e.parentNode.nodeName)?null:{ignore:!0}})),d)s=function(e,t){if(!e.size)return e;let r=e.content.firstChild.type.schema,i;try{i=JSON.parse(t)}catch(t){return e}let{content:a,openStart:o,openEnd:s}=e;for(let e=i.length-2;e>=0;e-=2){let t=r.nodes[i[e]];if(!t||t.hasRequiredAttrs())break;a=n.Fragment.from(t.create(i[e+1],a)),o++,s++}return new n.Slice(a,o,s)}(e$(s,+d[1],+d[2]),d[4]);else if((s=n.Slice.maxOpen(function(e,t){if(e.childCount<2)return e;for(let r=t.depth;r>=0;r--){let i=t.node(r).contentMatchAt(t.index(r)),a,o=[];if(e.forEach(e=>{if(!o)return;let t=i.findWrapping(e.type),r;if(!t)return o=null;if(r=o.length&&a.length&&function e(t,r,i,a,o){if(o<t.length&&o<r.length&&t[o]==r[o]){let s=e(t,r,i,a.lastChild,o+1);if(s)return a.copy(a.content.replaceChild(a.childCount-1,s));if(a.contentMatchAt(a.childCount).matchType(o==t.length-1?i.type:t[o+1]))return a.copy(a.content.append(n.Fragment.from(eq(i,t,o+1))))}}(t,a,e,o[o.length-1],0))o[o.length-1]=r;else{o.length&&(o[o.length-1]=function e(t,r){if(0==r)return t;let i=t.content.replaceChild(t.childCount-1,e(t.lastChild,r-1)),a=t.contentMatchAt(t.childCount).fillBefore(n.Fragment.empty,!0);return t.copy(i.append(a))}(o[o.length-1],a.length));let r=eq(e,t);o.push(r),i=i.matchType(r.type),a=t}}),o)return n.Fragment.from(o)}return e}(s.content,a),!0)).openStart||s.openEnd){let e=0,t=0;for(let t=s.content.firstChild;e<s.openStart&&!t.type.spec.isolating;e++,t=t.firstChild);for(let e=s.content.lastChild;t<s.openEnd&&!e.type.spec.isolating;t++,e=e.lastChild);s=e$(s,e,t)}return e.someProp("transformPasted",t=>{s=t(s,e)}),s}let eV=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function eq(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;for(let i=t.length-1;i>=r;i--)e=t[i].create(null,n.Fragment.from(e));return e}function eG(e,t,r,i,a,o){let s=t<0?e.firstChild:e.lastChild,l=s.content;return e.childCount>1&&(o=0),a<i-1&&(l=eG(l,t,r,i,a+1,o)),a>=r&&(l=t<0?s.contentMatchAt(0).fillBefore(l,o<=a).append(l):l.append(s.contentMatchAt(s.childCount).fillBefore(n.Fragment.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,s.copy(l))}function e$(e,t,r){return t<e.openStart&&(e=new n.Slice(eG(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),r<e.openEnd&&(e=new n.Slice(eG(e.content,1,r,e.openEnd,0,0),e.openStart,r)),e}let eK={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},eY=null;function eX(){return eY||(eY=document.implementation.createHTMLDocument("title"))}let eZ={},eJ={},eQ={touchstart:!0,touchmove:!0};class e0{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function e1(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function e2(e){e.someProp("handleDOMEvents",t=>{for(let n in t)e.input.eventHandlers[n]||e.dom.addEventListener(n,e.input.eventHandlers[n]=t=>e3(e,t))})}function e3(e,t){return e.someProp("handleDOMEvents",n=>{let r=n[t.type];return!!r&&(r(e,t)||t.defaultPrevented)})}function e5(e){return{left:e.clientX,top:e.clientY}}function e4(e,t,n,r,i){if(-1==r)return!1;let a=e.state.doc.resolve(r);for(let r=a.depth+1;r>0;r--)if(e.someProp(t,t=>r>a.depth?t(e,n,a.nodeAfter,a.before(r),i,!0):t(e,n,a.node(r),a.before(r),i,!1)))return!0;return!1}function e9(e,t,n){if(e.focused||e.focus(),e.state.selection.eq(t))return;let r=e.state.tr.setSelection(t);"pointer"==n&&r.setMeta("pointer",!0),e.dispatch(r)}eJ.keydown=(e,t)=>{if((e.input.shiftKey=16==t.keyCode||t.shiftKey,!e7(e,t))&&(e.input.lastKeyCode=t.keyCode,e.input.lastKeyCodeTime=Date.now(),!P||!E||13!=t.keyCode))if(229!=t.keyCode&&e.domObserver.forceFlush(),!I||13!=t.keyCode||t.ctrlKey||t.altKey||t.metaKey)e.someProp("handleKeyDown",n=>n(e,t))||function(e,t){let n,r=t.keyCode,i=(n="",t.ctrlKey&&(n+="c"),t.metaKey&&(n+="m"),t.altKey&&(n+="a"),t.shiftKey&&(n+="s"),n);if(8==r||N&&72==r&&"c"==i)return eB(e,-1)||eO(e,-1);if(46==r&&!t.shiftKey||N&&68==r&&"c"==i)return eB(e,1)||eO(e,1);if(13==r||27==r)return!0;if(37==r||N&&66==r&&"c"==i){let t=37==r?"ltr"==eL(e,e.state.selection.from)?-1:1:-1;return eD(e,t,i)||eO(e,t)}if(39==r||N&&70==r&&"c"==i){let t=39==r?"ltr"==eL(e,e.state.selection.from)?1:-1:1;return eD(e,t,i)||eO(e,t)}else if(38==r||N&&80==r&&"c"==i)return ez(e,-1,i)||eO(e,-1);else if(40==r||N&&78==r&&"c"==i)return function(e){if(!M||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(t&&1==t.nodeType&&0==n&&t.firstChild&&"false"==t.firstChild.contentEditable){let n=t.firstChild;eU(e,n,"true"),setTimeout(()=>eU(e,n,"false"),20)}return!1}(e)||ez(e,1,i)||eO(e,1);else if(i==(N?"m":"c")&&(66==r||73==r||89==r||90==r))return!0;return!1}(e,t)?t.preventDefault():e1(e,"key");else{let t=Date.now();e.input.lastIOSEnter=t,e.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{e.input.lastIOSEnter==t&&(e.someProp("handleKeyDown",t=>t(e,m(13,"Enter"))),e.input.lastIOSEnter=0)},200)}},eJ.keyup=(e,t)=>{16==t.keyCode&&(e.input.shiftKey=!1)},eJ.keypress=(e,n)=>{if(e7(e,n)||!n.charCode||n.ctrlKey&&!n.altKey||N&&n.metaKey)return;if(e.someProp("handleKeyPress",t=>t(e,n)))return void n.preventDefault();let r=e.state.selection;if(!(r instanceof t.TextSelection)||!r.$from.sameParent(r.$to)){let t=String.fromCharCode(n.charCode);/[\r\n]/.test(t)||e.someProp("handleTextInput",n=>n(e,r.$from.pos,r.$to.pos,t))||e.dispatch(e.state.tr.insertText(t).scrollIntoView()),n.preventDefault()}};let e8=N?"metaKey":"ctrlKey";eZ.mousedown=(e,n)=>{e.input.shiftKey=n.shiftKey;let r=tr(e),i=Date.now(),a="singleClick";i-e.input.lastClick.time<500&&function(e,t){let n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}(n,e.input.lastClick)&&!n[e8]&&("singleClick"==e.input.lastClick.type?a="doubleClick":"doubleClick"==e.input.lastClick.type&&(a="tripleClick")),e.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:a};let o=e.posAtCoords(e5(n));o&&("singleClick"==a?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new e6(e,o,n,!!r)):("doubleClick"==a?function(e,t,n,r){return e4(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",n=>n(e,t,r))}:function(e,n,r,i){return e4(e,"handleTripleClickOn",n,r,i)||e.someProp("handleTripleClick",t=>t(e,n,i))||function(e,n,r){if(0!=r.button)return!1;let i=e.state.doc;if(-1==n)return!!i.inlineContent&&(e9(e,t.TextSelection.create(i,0,i.content.size),"pointer"),!0);let a=i.resolve(n);for(let n=a.depth+1;n>0;n--){let r=n>a.depth?a.nodeAfter:a.node(n),o=a.before(n);if(r.inlineContent)e9(e,t.TextSelection.create(i,o+1,o+1+r.content.size),"pointer");else{if(!t.NodeSelection.isSelectable(r))continue;e9(e,t.NodeSelection.create(i,o),"pointer")}return!0}}(e,r,i)})(e,o.pos,o.inside,n)?n.preventDefault():e1(e,"pointer"))};class e6{done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>ex(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;if(this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(e5(e))),this.updateAllowDefault(e),this.allowDefault||!n)e1(this.view,"pointer");else{var r,i,a,o;(r=this.view,i=n.pos,a=n.inside,o=this.selectNode,e4(r,"handleClickOn",i,a,e)||r.someProp("handleClick",t=>t(r,i,e))||(o?function(e,n){if(-1==n)return!1;let r=e.state.selection,i,a;r instanceof t.NodeSelection&&(i=r.node);let o=e.state.doc.resolve(n);for(let e=o.depth+1;e>0;e--){let n=e>o.depth?o.nodeAfter:o.node(e);if(t.NodeSelection.isSelectable(n)){a=i&&r.$from.depth>0&&e>=r.$from.depth&&o.before(r.$from.depth+1)==r.$from.pos?o.before(r.$from.depth):o.before(e);break}}return null!=a&&(e9(e,t.NodeSelection.create(e.state.doc,a),"pointer"),!0)}(r,a):function(e,n){if(-1==n)return!1;let r=e.state.doc.resolve(n),i=r.nodeAfter;return!!(i&&i.isAtom&&t.NodeSelection.isSelectable(i))&&(e9(e,new t.NodeSelection(r),"pointer"),!0)}(r,a)))?e.preventDefault():0==e.button&&(this.flushed||M&&this.mightDrag&&!this.mightDrag.node.isAtom||E&&!this.view.state.selection.visible&&2>=Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to)))?(e9(this.view,t.Selection.near(this.view.state.doc.resolve(n.pos)),"pointer"),e.preventDefault()):e1(this.view,"pointer")}}move(e){this.updateAllowDefault(e),e1(this.view,"pointer"),0==e.buttons&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}constructor(e,n,r,i){let a,o;if(this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[e8],this.allowDefault=r.shiftKey,n.inside>-1)a=e.state.doc.nodeAt(n.inside),o=n.inside;else{let t=e.state.doc.resolve(n.pos);a=t.parent,o=t.depth?t.before():0}let s=i?null:r.target,l=s?e.docView.nearestDesc(s,!0):null;this.target=l&&1==l.dom.nodeType?l.dom:null;let{selection:u}=e.state;(0==r.button&&a.type.spec.draggable&&!1!==a.type.spec.selectable||u instanceof t.NodeSelection&&u.from<=o&&u.to>o)&&(this.mightDrag={node:a,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&C&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),e1(e,"pointer")}}function e7(e,t){return!!e.composing||!!(M&&500>Math.abs(t.timeStamp-e.input.compositionEndedAt))&&(e.input.compositionEndedAt=-2e8,!0)}eZ.touchstart=e=>{e.input.lastTouch=Date.now(),tr(e),e1(e,"pointer")},eZ.touchmove=e=>{e.input.lastTouch=Date.now(),e1(e,"pointer")},eZ.contextmenu=e=>tr(e);let te=P?5e3:-1;function tt(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout(()=>tr(e),t))}function tn(e){let t;for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=((t=document.createEvent("Event")).initEvent("event",!0,!0),t.timeStamp));e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function tr(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!P||!(e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),tn(e),t||e.docView&&e.docView.dirty){let n=ey(e);return n&&!n.eq(e.state.selection)?e.dispatch(e.state.tr.setSelection(n)):(e.markCursor||t)&&!e.state.selection.empty?e.dispatch(e.state.tr.deleteSelection()):e.updateState(e.state),!0}return!1}}eJ.compositionstart=eJ.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:n}=e,r=n.selection.$to;if(n.selection instanceof t.TextSelection&&(n.storedMarks||!r.textOffset&&r.parentOffset&&r.nodeBefore.marks.some(e=>!1===e.type.spec.inclusive)))e.markCursor=e.state.storedMarks||r.marks(),tr(e,!0),e.markCursor=null;else if(tr(e,!n.selection.empty),C&&n.selection.empty&&r.parentOffset&&!r.textOffset&&r.nodeBefore.marks.length){let t=e.domSelectionRange();for(let n=t.focusNode,r=t.focusOffset;n&&1==n.nodeType&&0!=r;){let t=r<0?n.lastChild:n.childNodes[r-1];if(!t)break;if(3==t.nodeType){let n=e.domSelection();n&&n.collapse(t,t.nodeValue.length);break}n=t,r=-1}}e.input.composing=!0}tt(e,te)},eJ.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionNode=null,e.input.compositionPendingChanges&&Promise.resolve().then(()=>e.domObserver.flush()),e.input.compositionID++,tt(e,20))};let ti=S&&_<15||I&&O<604;function ta(e,t,r,i,a){let o=eW(e,t,r,i,e.state.selection.$from);if(e.someProp("handlePaste",t=>t(e,a,o||n.Slice.empty)))return!0;if(!o)return!1;let s=0==o.openStart&&0==o.openEnd&&1==o.content.childCount?o.content.firstChild:null,l=s?e.state.tr.replaceSelectionWith(s,i):e.state.tr.replaceSelection(o);return e.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function to(e){let t=e.getData("text/plain")||e.getData("Text");if(t)return t;let n=e.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}eZ.copy=eJ.cut=(e,t)=>{let n=e.state.selection,r="cut"==t.type;if(n.empty)return;let i=ti?null:t.clipboardData,{dom:a,text:o}=eH(e,n.content());i?(t.preventDefault(),i.clearData(),i.setData("text/html",a.innerHTML),i.setData("text/plain",o)):function(e,t){if(!e.dom.parentNode)return;let n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),e.focus()},50)}(e,a),r&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))},eJ.paste=(e,t)=>{if(e.composing&&!P)return;let n=ti?null:t.clipboardData,r=e.input.shiftKey&&45!=e.input.lastKeyCode;n&&ta(e,to(n),n.getData("text/html"),r,t)?t.preventDefault():function(e,t){if(!e.dom.parentNode)return;let n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=e.input.shiftKey&&45!=e.input.lastKeyCode;setTimeout(()=>{e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?ta(e,r.value,null,i,t):ta(e,r.textContent,r.innerHTML,i,t)},50)}(e,t)};class ts{constructor(e,t,n){this.slice=e,this.move=t,this.node=n}}let tl=N?"altKey":"ctrlKey";for(let e in eZ.dragstart=(e,n)=>{let r,i=e.input.mouseDown;if(i&&i.done(),!n.dataTransfer)return;let a=e.state.selection,o=a.empty?null:e.posAtCoords(e5(n));if(o&&o.pos>=a.from&&o.pos<=(a instanceof t.NodeSelection?a.to-1:a.to));else if(i&&i.mightDrag)r=t.NodeSelection.create(e.state.doc,i.mightDrag.pos);else if(n.target&&1==n.target.nodeType){let i=e.docView.nearestDesc(n.target,!0);i&&i.node.type.spec.draggable&&i!=e.docView&&(r=t.NodeSelection.create(e.state.doc,i.posBefore))}let s=(r||e.state.selection).content(),{dom:l,text:u,slice:c}=eH(e,s);n.dataTransfer.files.length&&E&&!(T>120)||n.dataTransfer.clearData(),n.dataTransfer.setData(ti?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",ti||n.dataTransfer.setData("text/plain",u),e.dragging=new ts(c,!n[tl],r)},eZ.dragend=e=>{let t=e.dragging;window.setTimeout(()=>{e.dragging==t&&(e.dragging=null)},50)},eJ.dragover=eJ.dragenter=(e,t)=>t.preventDefault(),eJ.drop=(e,i)=>{let a=e.dragging;if(e.dragging=null,!i.dataTransfer)return;let o=e.posAtCoords(e5(i));if(!o)return;let s=e.state.doc.resolve(o.pos),l=a&&a.slice;l?e.someProp("transformPasted",t=>{l=t(l,e)}):l=eW(e,to(i.dataTransfer),ti?null:i.dataTransfer.getData("text/html"),!1,s);let u=!!(a&&!i[tl]);if(e.someProp("handleDrop",t=>t(e,i,l||n.Slice.empty,u)))return void i.preventDefault();if(!l)return;i.preventDefault();let c=l?(0,r.dropPoint)(e.state.doc,s.pos,l):s.pos;null==c&&(c=s.pos);let d=e.state.tr;if(u){let{node:e}=a;e?e.replace(d):d.deleteSelection()}let h=d.mapping.map(c),p=0==l.openStart&&0==l.openEnd&&1==l.content.childCount,f=d.doc;if(p?d.replaceRangeWith(h,h,l.content.firstChild):d.replaceRange(h,h,l),d.doc.eq(f))return;let m=d.doc.resolve(h);if(p&&t.NodeSelection.isSelectable(l.content.firstChild)&&m.nodeAfter&&m.nodeAfter.sameMarkup(l.content.firstChild))d.setSelection(new t.NodeSelection(m));else{let t=d.mapping.map(c);d.mapping.maps[d.mapping.maps.length-1].forEach((e,n,r,i)=>t=i),d.setSelection(eE(e,m,d.doc.resolve(t)))}e.focus(),e.dispatch(d.setMeta("uiEvent","drop"))},eZ.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&ex(e)},20))},eZ.blur=(e,t)=>{e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),t.relatedTarget&&e.dom.contains(t.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)},eZ.beforeinput=(e,t)=>{if(E&&P&&"deleteContentBackward"==t.inputType){e.domObserver.flushSoon();let{domChangeCount:t}=e.input;setTimeout(()=>{if(e.input.domChangeCount!=t||(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",t=>t(e,m(8,"Backspace")))))return;let{$cursor:n}=e.state.selection;n&&n.pos>0&&e.dispatch(e.state.tr.delete(n.pos-1,n.pos).scrollIntoView())},50)}},eJ)eZ[e]=eJ[e];function tu(e,t){if(e==t)return!0;for(let n in e)if(e[n]!==t[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}class tc{map(e,t,n,r){let{pos:i,deleted:a}=e.mapResult(t.from+r,this.side<0?-1:1);return a?null:new tp(i-n,i-n,this)}valid(){return!0}eq(e){return this==e||e instanceof tc&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&tu(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}constructor(e,t){this.toDOM=e,this.spec=t||tm,this.side=this.spec.side||0}}class td{map(e,t,n,r){let i=e.map(t.from+r,this.spec.inclusiveStart?-1:1)-n,a=e.map(t.to+r,this.spec.inclusiveEnd?1:-1)-n;return i>=a?null:new tp(i,a,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof td&&tu(this.attrs,e.attrs)&&tu(this.spec,e.spec)}static is(e){return e.type instanceof td}destroy(){}constructor(e,t){this.attrs=e,this.spec=t||tm}}class th{map(e,t,n,r){let i=e.mapResult(t.from+r,1);if(i.deleted)return null;let a=e.mapResult(t.to+r,-1);return a.deleted||a.pos<=i.pos?null:new tp(i.pos-n,a.pos-n,this)}valid(e,t){let{index:n,offset:r}=e.content.findIndex(t.from),i;return r==t.from&&!(i=e.child(n)).isText&&r+i.nodeSize==t.to}eq(e){return this==e||e instanceof th&&tu(this.attrs,e.attrs)&&tu(this.spec,e.spec)}destroy(){}constructor(e,t){this.attrs=e,this.spec=t||tm}}class tp{copy(e,t){return new tp(e,t,this.type)}eq(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,n){return this.type.map(e,this,t,n)}static widget(e,t,n){return new tp(e,e,new tc(t,n))}static inline(e,t,n,r){return new tp(e,t,new td(n,r))}static node(e,t,n,r){return new tp(e,t,new th(n,r))}get spec(){return this.type.spec}get inline(){return this.type instanceof td}get widget(){return this.type instanceof tc}constructor(e,t,n){this.from=e,this.to=t,this.type=n}}let tf=[],tm={};class tg{static create(e,t){return t.length?tk(t,e,0,tm):tv}find(e,t,n){let r=[];return this.findInner(null==e?0:e,null==t?1e9:t,r,0,n),r}findInner(e,t,n,r,i){for(let a=0;a<this.local.length;a++){let o=this.local[a];o.from<=t&&o.to>=e&&(!i||i(o.spec))&&n.push(o.copy(o.from+r,o.to+r))}for(let a=0;a<this.children.length;a+=3)if(this.children[a]<t&&this.children[a+1]>e){let o=this.children[a]+1;this.children[a+2].findInner(e-o,t-o,n,r+o,i)}}map(e,t,n){return this==tv||0==e.maps.length?this:this.mapInner(e,t,0,0,n||tm)}mapInner(e,t,n,r,i){let a;for(let o=0;o<this.local.length;o++){let s=this.local[o].map(e,n,r);s&&s.type.valid(t,s)?(a||(a=[])).push(s):i.onRemove&&i.onRemove(this.local[o].spec)}return this.children.length?function(e,t,n,r,i,a,o){let s=e.slice();for(let e=0,t=a;e<n.maps.length;e++){let r=0;n.maps[e].forEach((e,n,i,a)=>{let o=a-i-(n-e);for(let i=0;i<s.length;i+=3){let a=s[i+1];if(a<0||e>a+t-r)continue;let l=s[i]+t-r;n>=l?s[i+1]=e<=l?-2:-1:e>=t&&o&&(s[i]+=o,s[i+1]+=o)}r+=o}),t=n.maps[e].map(t,-1)}let l=!1;for(let t=0;t<s.length;t+=3)if(s[t+1]<0){if(-2==s[t+1]){l=!0,s[t+1]=-1;continue}let u=n.map(e[t]+a),c=u-i;if(c<0||c>=r.content.size){l=!0;continue}let d=n.map(e[t+1]+a,-1)-i,{index:h,offset:p}=r.content.findIndex(c),f=r.maybeChild(h);if(f&&p==c&&p+f.nodeSize==d){let r=s[t+2].mapInner(n,f,u+1,e[t]+a+1,o);r!=tv?(s[t]=c,s[t+1]=d,s[t+2]=r):(s[t+1]=-2,l=!0)}else l=!0}if(l){let l=tk(function(e,t,n,r,i,a,o){for(let s=0;s<e.length;s+=3)-1==e[s+1]&&function e(t,a){for(let e=0;e<t.local.length;e++){let s=t.local[e].map(r,i,a);s?n.push(s):o.onRemove&&o.onRemove(t.local[e].spec)}for(let n=0;n<t.children.length;n+=3)e(t.children[n+2],t.children[n]+a+1)}(e[s+2],t[s]+a+1);return n}(s,e,t,n,i,a,o),r,0,o);t=l.local;for(let e=0;e<s.length;e+=3)s[e+1]<0&&(s.splice(e,3),e-=3);for(let e=0,t=0;e<l.children.length;e+=3){let n=l.children[e];for(;t<s.length&&s[t]<n;)t+=3;s.splice(t,0,l.children[e],l.children[e+1],l.children[e+2])}}return new tg(t.sort(tS),s)}(this.children,a||[],e,t,n,r,i):a?new tg(a.sort(tS),tf):tv}add(e,t){return t.length?this==tv?tg.create(e,t):this.addInner(e,t,0):this}addInner(e,t,n){let r,i=0;e.forEach((e,a)=>{let o=a+n,s;if(s=tx(t,e,o)){for(r||(r=this.children.slice());i<r.length&&r[i]<a;)i+=3;r[i]==a?r[i+2]=r[i+2].addInner(e,s,o+1):r.splice(i,0,a,a+e.nodeSize,tk(s,e,o+1,tm)),i+=3}});let a=tb(i?tw(t):t,-n);for(let t=0;t<a.length;t++)a[t].type.valid(e,a[t])||a.splice(t--,1);return new tg(a.length?this.local.concat(a).sort(tS):this.local,r||this.children)}remove(e){return 0==e.length||this==tv?this:this.removeInner(e,0)}removeInner(e,t){let n=this.children,r=this.local;for(let r=0;r<n.length;r+=3){let i,a=n[r]+t,o=n[r+1]+t;for(let t=0,n;t<e.length;t++)(n=e[t])&&n.from>a&&n.to<o&&(e[t]=null,(i||(i=[])).push(n));if(!i)continue;n==this.children&&(n=this.children.slice());let s=n[r+2].removeInner(i,a+1);s!=tv?n[r+2]=s:(n.splice(r,3),r-=3)}if(r.length){for(let n=0,i;n<e.length;n++)if(i=e[n])for(let e=0;e<r.length;e++)r[e].eq(i,t)&&(r==this.local&&(r=this.local.slice()),r.splice(e--,1))}return n==this.children&&r==this.local?this:r.length||n.length?new tg(r,n):tv}forChild(e,t){let n,r;if(this==tv)return this;if(t.isLeaf)return tg.empty;for(let t=0;t<this.children.length;t+=3)if(this.children[t]>=e){this.children[t]==e&&(n=this.children[t+2]);break}let i=e+1,a=i+t.content.size;for(let e=0;e<this.local.length;e++){let t=this.local[e];if(t.from<a&&t.to>i&&t.type instanceof td){let e=Math.max(i,t.from)-i,n=Math.min(a,t.to)-i;e<n&&(r||(r=[])).push(t.copy(e,n))}}if(r){let e=new tg(r.sort(tS),tf);return n?new ty([e,n]):e}return n||tv}eq(e){if(this==e)return!0;if(!(e instanceof tg)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return t_(this.localsInner(e))}localsInner(e){if(this==tv)return tf;if(e.inlineContent||!this.local.some(td.is))return this.local;let t=[];for(let e=0;e<this.local.length;e++)this.local[e].type instanceof td||t.push(this.local[e]);return t}forEachSet(e){e(this)}constructor(e,t){this.local=e.length?e:tf,this.children=t.length?t:tf}}tg.empty=new tg([],[]),tg.removeOverlap=t_;let tv=tg.empty;class ty{map(e,t){let n=this.members.map(n=>n.map(e,t,tm));return ty.from(n)}forChild(e,t){if(t.isLeaf)return tg.empty;let n=[];for(let r=0;r<this.members.length;r++){let i=this.members[r].forChild(e,t);i!=tv&&(i instanceof ty?n=n.concat(i.members):n.push(i))}return ty.from(n)}eq(e){if(!(e instanceof ty)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,n=!0;for(let r=0;r<this.members.length;r++){let i=this.members[r].localsInner(e);if(i.length)if(t){n&&(t=t.slice(),n=!1);for(let e=0;e<i.length;e++)t.push(i[e])}else t=i}return t?t_(n?t:t.sort(tS)):tf}static from(e){switch(e.length){case 0:return tv;case 1:return e[0];default:return new ty(e.every(e=>e instanceof tg)?e:e.reduce((e,t)=>e.concat(t instanceof tg?t:t.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}constructor(e){this.members=e}}function tb(e,t){if(!t||!e.length)return e;let n=[];for(let r=0;r<e.length;r++){let i=e[r];n.push(new tp(i.from+t,i.to+t,i.type))}return n}function tx(e,t,n){if(t.isLeaf)return null;let r=n+t.nodeSize,i=null;for(let t=0,a;t<e.length;t++)(a=e[t])&&a.from>n&&a.to<r&&((i||(i=[])).push(a),e[t]=null);return i}function tw(e){let t=[];for(let n=0;n<e.length;n++)null!=e[n]&&t.push(e[n]);return t}function tk(e,t,n,r){let i=[],a=!1;t.forEach((t,o)=>{let s=tx(e,t,o+n);if(s){a=!0;let e=tk(s,t,n+o+1,r);e!=tv&&i.push(o,o+t.nodeSize,e)}});let o=tb(a?tw(e):e,-n).sort(tS);for(let e=0;e<o.length;e++)o[e].type.valid(t,o[e])||(r.onRemove&&r.onRemove(o[e].spec),o.splice(e--,1));return o.length||i.length?new tg(o,i):tv}function tS(e,t){return e.from-t.from||e.to-t.to}function t_(e){let t=e;for(let n=0;n<t.length-1;n++){let r=t[n];if(r.from!=r.to)for(let i=n+1;i<t.length;i++){let a=t[i];if(a.from==r.from){a.to!=r.to&&(t==e&&(t=e.slice()),t[i]=a.copy(a.from,r.to),tC(t,i+1,a.copy(r.to,a.to)));continue}a.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,a.from),tC(t,i,r.copy(a.from,r.to)));break}}return t}function tC(e,t,n){for(;t<e.length&&tS(n,e[t])>0;)t++;e.splice(t,0,n)}function tA(e){let t=[];return e.someProp("decorations",n=>{let r=n(e.state);r&&r!=tv&&t.push(r)}),e.cursorWrapper&&t.push(tg.create(e.state.doc,[e.cursorWrapper.deco])),ty.from(t)}let tE={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},tT=S&&_<=11;class tM{set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}}class tI{flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,tE)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(eT(this.view)){if(this.suppressingSelectionUpdates)return ex(this.view);if(S&&_<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&u(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,n;for(let n=e.focusNode;n;n=a(n))t.add(n);for(let r=e.anchorNode;r;r=a(r))if(t.has(r)){n=r;break}let r=n&&this.view.docView.nearestDesc(n);if(r&&r.ignoreMutation({type:"selection",target:3==n.nodeType?n.parentNode:n}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){var e;let{view:n}=this;if(!n.docView||this.flushingSoon>-1)return;let r=this.pendingRecords();r.length&&(this.queue=[]);let i=n.domSelectionRange(),a=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(i)&&eT(n)&&!this.ignoreSelectionChange(i),o=-1,s=-1,l=!1,u=[];if(n.editable)for(let e=0;e<r.length;e++){let t=this.registerMutation(r[e],u);t&&(o=o<0?t.from:Math.min(t.from,o),s=s<0?t.to:Math.max(t.to,s),t.typeOver&&(l=!0))}if(C&&u.length){let e=u.filter(e=>"BR"==e.nodeName);if(2==e.length){let[t,n]=e;t.parentNode&&t.parentNode.parentNode==n.parentNode?n.remove():t.remove()}else{let{focusNode:t}=this.currentSelection;for(let r of e){let e=r.parentNode;e&&"LI"==e.nodeName&&(!t||function(e,t){for(let n=t.parentNode;n&&n!=e.dom;n=n.parentNode){let t=e.docView.nearestDesc(n,!0);if(t&&t.node.isBlock)return n}return null}(n,t)!=e)&&r.remove()}}}let c=null;o<0&&a&&n.input.lastFocus>Date.now()-200&&Math.max(n.input.lastTouch,n.input.lastClick.time)<Date.now()-300&&f(i)&&(c=ey(n))&&c.eq(t.Selection.near(n.state.doc.resolve(0),1))?(n.input.lastFocus=0,ex(n),this.currentSelection.set(i),n.scrollToSelection()):(o>-1||a)&&(o>-1&&(n.docView.markDirty(o,s),e=n,!tN.has(e)&&(tN.set(e,null),-1!==["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace))&&(e.requiresGeckoHackNode=C,tD||(console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),tD=!0))),this.handleDOMChange(o,s,l,u),n.docView&&n.docView.dirty?n.updateState(n.state):this.currentSelection.eq(i)||ex(n),this.currentSelection.set(i))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let n=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(n==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style"))||!n||n.ignoreMutation(e))return null;if("childList"==e.type){for(let n=0;n<e.addedNodes.length;n++){let r=e.addedNodes[n];t.push(r),3==r.nodeType&&(this.lastChangedTextNode=r)}if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};let r=e.previousSibling,a=e.nextSibling;if(S&&_<=11&&e.addedNodes.length)for(let t=0;t<e.addedNodes.length;t++){let{previousSibling:n,nextSibling:i}=e.addedNodes[t];(!n||0>Array.prototype.indexOf.call(e.addedNodes,n))&&(r=n),(!i||0>Array.prototype.indexOf.call(e.addedNodes,i))&&(a=i)}let o=r&&r.parentNode==e.target?i(r)+1:0,s=n.localPosFromDOM(e.target,o,-1),l=a&&a.parentNode==e.target?i(a):e.target.childNodes.length;return{from:s,to:n.localPosFromDOM(e.target,l,1)}}return"attributes"==e.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:(this.lastChangedTextNode=e.target,{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new tM,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(e=>{for(let t=0;t<e.length;t++)this.queue.push(e[t]);S&&_<=11&&e.some(e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length)?this.flushSoon():this.flush()}),tT&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}}let tN=new WeakMap,tD=!1;function tP(e,t){let n=t.startContainer,r=t.startOffset,i=t.endContainer,a=t.endOffset,o=e.domAtPos(e.state.selection.anchor);return u(o.node,o.offset,i,a)&&([n,r,i,a]=[i,a,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:a}}function tR(e){let t=e.pmViewDesc;if(t)return t.parseRule();if("BR"==e.nodeName&&e.parentNode){if(M&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let e=document.createElement("div");return e.appendChild(document.createElement("li")),{skip:e}}else if(e.parentNode.lastChild==e||M&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if("IMG"==e.nodeName&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}let tO=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function tj(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:eE(e,t.resolve(n.anchor),t.resolve(n.head))}function tF(e,t,n){let r=e.depth,i=t?e.end():e.pos;for(;r>0&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,i++,t=!1;if(n){let t=e.node(r).maybeChild(e.indexAfter(r));for(;t&&!t.isLeaf;)t=t.firstChild,i++}return i}function tL(e){if(2!=e.length)return!1;let t=e.charCodeAt(0),n=e.charCodeAt(1);return t>=56320&&t<=57343&&n>=55296&&n<=56319}class tz{get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;for(let t in this._props={},e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&e2(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(tV),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let e in this._props)t[e]=this._props[e];for(let n in t.state=this.state,e)t[n]=e[n];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var n,r,a;let o=this.state,s=!1,l=!1;e.storedMarks&&this.composing&&(tn(this),l=!0),this.state=e;let c=o.plugins!=e.plugins||this._props.plugins!=t.plugins;if(c||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let e=tW(this);(function(e,t){let n=0,r=0;for(let r in e){if(e[r]!=t[r])return!0;n++}for(let e in t)r++;return n!=r})(e,this.nodeViews)&&(this.nodeViews=e,s=!0)}(c||t.handleDOMEvents!=this._props.handleDOMEvents)&&e2(this),this.editable=tH(this),tU(this);let d=tA(this),f=tB(this),m=o.plugins==e.plugins||o.doc.eq(e.doc)?e.scrollToSelection>o.scrollToSelection?"to selection":"preserve":"reset",g=s||!this.docView.matchesNode(e.doc,f,d);(g||!e.selection.eq(o.selection))&&(l=!0);let y="preserve"==m&&l&&null==this.dom.style.overflowAnchor&&function(e){let t,n,r=e.dom.getBoundingClientRect(),i=Math.max(0,r.top);for(let a=(r.left+r.right)/2,o=i+1;o<Math.min(innerHeight,r.bottom);o+=5){let r=e.root.elementFromPoint(a,o);if(!r||r==e.dom||!e.dom.contains(r))continue;let s=r.getBoundingClientRect();if(s.top>=i-20){t=r,n=s.top;break}}return{refDOM:t,refTop:n,stack:L(e.dom)}}(this);if(l){let t,n,l;this.domObserver.stop();let c=g&&(S||E)&&!this.composing&&!o.selection.empty&&!e.selection.empty&&(r=o.selection,a=e.selection,l=Math.min(r.$anchor.sharedDepth(r.head),a.$anchor.sharedDepth(a.head)),r.$anchor.start(l)!=a.$anchor.start(l));if(g){let t=E?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=function(e){let t=e.domSelectionRange();if(!t.focusNode)return null;let n=function(e,t){for(;;){if(3==e.nodeType&&t)return e;if(1==e.nodeType&&t>0){if("false"==e.contentEditable)return null;t=h(e=e.childNodes[t-1])}else{if(!e.parentNode||p(e))return null;t=i(e),e=e.parentNode}}}(t.focusNode,t.focusOffset),r=function(e,t){for(;;){if(3==e.nodeType&&t<e.nodeValue.length)return e;if(1==e.nodeType&&t<e.childNodes.length){if("false"==e.contentEditable)return null;e=e.childNodes[t],t=0}else{if(!e.parentNode||p(e))return null;t=i(e)+1,e=e.parentNode}}}(t.focusNode,t.focusOffset);if(n&&r&&n!=r){let t=r.pmViewDesc,i=e.domObserver.lastChangedTextNode;if(n==i||r==i)return i;if(!t||!t.isText(r.nodeValue))return r;if(e.input.compositionNode==r){let e=n.pmViewDesc;if(!(!e||!e.isText(n.nodeValue)))return r}}return n||r}(this)),(s||!this.docView.update(e.doc,f,d,this))&&(this.docView.updateOuterDeco(f),this.docView.destroy(),this.docView=ei(e.doc,f,d,this.dom,this)),t&&!this.trackWrites&&(c=!0)}c||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&(t=this.docView.domFromPos(this.state.selection.anchor,0),n=this.domSelectionRange(),u(t.node,t.offset,n.anchorNode,n.anchorOffset)))?ex(this,c):(eC(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(o),(null==(n=this.dragging)?void 0:n.node)&&!o.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,o),"reset"==m?this.dom.scrollTop=0:"to selection"==m?this.scrollToSelection():y&&function(e){let{refDOM:t,refTop:n,stack:r}=e,i=t?t.getBoundingClientRect().top:0;z(r,0==i?0:i-n)}(y)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(this.someProp("handleScrollToSelection",e=>e(this)));else if(this.state.selection instanceof t.NodeSelection){let t=this.docView.domAfterPos(this.state.selection.from);1==t.nodeType&&F(this,t.getBoundingClientRect(),e)}else F(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(e&&e.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(let t=0;t<this.pluginViews.length;t++){let n=this.pluginViews[t];n.update&&n.update(this,e)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let e=0;e<this.directPlugins.length;e++){let t=this.directPlugins[e];t.spec.view&&this.pluginViews.push(t.spec.view(this))}for(let e=0;e<this.state.plugins.length;e++){let t=this.state.plugins[e];t.spec.view&&this.pluginViews.push(t.spec.view(this))}}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let e=r.from+(this.state.doc.content.size-n.doc.content.size);(e>0&&this.state.doc.nodeAt(e))==r.node&&(i=e)}this.dragging=new ts(e.slice,e.move,i<0?void 0:t.NodeSelection.create(this.state.doc,i))}someProp(e,t){let n=this._props&&this._props[e],r;if(null!=n&&(r=t?t(n):n))return r;for(let n=0;n<this.directPlugins.length;n++){let i=this.directPlugins[n].props[e];if(null!=i&&(r=t?t(i):i))return r}let i=this.state.plugins;if(i)for(let n=0;n<i.length;n++){let a=i[n].props[e];if(null!=a&&(r=t?t(a):a))return r}}hasFocus(){if(S){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if("false"==e.contentEditable)return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&function(e){if(e.setActive)return e.setActive();if(B)return e.focus(B);let t=L(e);e.focus(null==B?{get preventScroll(){return B={preventScroll:!0},!0}}:void 0),B||(B=!1,z(t,0))}(this.dom),ex(this),this.domObserver.start()}get root(){let e=this._root;if(null==e){for(let e=this.dom.parentNode;e;e=e.parentNode)if(9==e.nodeType||11==e.nodeType&&e.host)return e.getSelection||(Object.getPrototypeOf(e).getSelection=()=>e.ownerDocument.getSelection()),this._root=e}return e||document}updateRoot(){this._root=null}posAtCoords(e){return function(e,t){var n;let r,i,o=e.dom.ownerDocument,l,u=0,c=function(e,t,n){if(e.caretPositionFromPoint)try{let r=e.caretPositionFromPoint(t,n);if(r)return{node:r.offsetNode,offset:Math.min(h(r.offsetNode),r.offset)}}catch(e){}if(e.caretRangeFromPoint){let r=e.caretRangeFromPoint(t,n);if(r)return{node:r.startContainer,offset:Math.min(h(r.startContainer),r.startOffset)}}}(o,t.left,t.top);c&&({node:l,offset:u}=c);let d=(e.root.elementFromPoint?e.root:o).elementFromPoint(t.left,t.top);if(!d||!e.dom.contains(1!=d.nodeType?d.parentNode:d)){let n=e.dom.getBoundingClientRect();if(!U(t,n)||!(d=function e(t,n,r){let i=t.childNodes.length;if(i&&r.top<r.bottom)for(let a=Math.max(0,Math.min(i-1,Math.floor(i*(n.top-r.top)/(r.bottom-r.top))-2)),o=a;;){let r=t.childNodes[o];if(1==r.nodeType){let t=r.getClientRects();for(let i=0;i<t.length;i++){let a=t[i];if(U(n,a))return e(r,n,a)}}if((o=(o+1)%i)==a)break}return t}(e.dom,t,n)))return null}if(M)for(let e=d;l&&e;e=a(e))e.draggable&&(l=void 0);if(d=(r=(n=d).parentNode)&&/^li$/i.test(r.nodeName)&&t.left<n.getBoundingClientRect().left?r:n,l){let n;if(C&&1==l.nodeType&&(u=Math.min(u,l.childNodes.length))<l.childNodes.length){let e=l.childNodes[u],n;"IMG"==e.nodeName&&(n=e.getBoundingClientRect()).right<=t.left&&n.bottom>t.top&&u++}R&&u&&1==l.nodeType&&1==(n=l.childNodes[u-1]).nodeType&&"false"==n.contentEditable&&n.getBoundingClientRect().top>=t.top&&u--,l==e.dom&&u==l.childNodes.length-1&&1==l.lastChild.nodeType&&t.top>l.lastChild.getBoundingClientRect().bottom?i=e.state.doc.content.size:(0==u||1!=l.nodeType||"BR"!=l.childNodes[u-1].nodeName)&&(i=function(e,t,n,r){let i=-1;for(let n=t,a=!1;n!=e.dom;){let t=e.docView.nearestDesc(n,!0);if(!t)return null;if(1==t.dom.nodeType&&(t.node.isBlock&&t.parent||!t.contentDOM)){let e=t.dom.getBoundingClientRect();if(t.node.isBlock&&t.parent&&(!a&&e.left>r.left||e.top>r.top?i=t.posBefore:(!a&&e.right<r.left||e.bottom<r.top)&&(i=t.posAfter),a=!0),!t.contentDOM&&i<0&&!t.node.isText)return(t.node.isBlock?r.top<(e.top+e.bottom)/2:r.left<(e.left+e.right)/2)?t.posBefore:t.posAfter}n=t.dom.parentNode}return i>-1?i:e.docView.posFromDOM(t,n,-1)}(e,l,u,t))}null==i&&(i=function(e,t,n){let{node:r,offset:i}=function e(t,n){let r,i,a,o=2e8,l,u=0,c=n.top,d=n.top;for(let e=t.firstChild,h=0;e;e=e.nextSibling,h++){let t;if(1==e.nodeType)t=e.getClientRects();else{if(3!=e.nodeType)continue;t=s(e).getClientRects()}for(let s=0;s<t.length;s++){let p=t[s];if(p.top<=c&&p.bottom>=d){c=Math.max(p.bottom,c),d=Math.min(p.top,d);let t=p.left>n.left?p.left-n.left:p.right<n.left?n.left-p.right:0;if(t<o){a=e,o=t,l=t&&3==a.nodeType?{left:p.right<n.left?p.right:p.left,top:n.top}:n,1==e.nodeType&&t&&(u=h+ +(n.left>=(p.left+p.right)/2));continue}}else p.top>n.top&&!r&&p.left<=n.left&&p.right>=n.left&&(r=e,i={left:Math.max(p.left,Math.min(p.right,n.left)),top:p.top});!a&&(n.left>=p.right&&n.top>=p.top||n.left>=p.left&&n.top>=p.bottom)&&(u=h+1)}}return(!a&&r&&(a=r,l=i,o=0),a&&3==a.nodeType)?function(e,t){let n=e.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(e,i+1),r.setStart(e,i);let n=W(r,1);if(n.top!=n.bottom&&U(t,n))return{node:e,offset:i+ +(t.left>=(n.left+n.right)/2)}}return{node:e,offset:0}}(a,l):!a||o&&1==a.nodeType?{node:t,offset:u}:e(a,l)}(t,n),a=-1;if(1==r.nodeType&&!r.firstChild){let e=r.getBoundingClientRect();a=e.left!=e.right&&n.left>(e.left+e.right)/2?1:-1}return e.docView.posFromDOM(r,i,a)}(e,d,t));let p=e.docView.nearestDesc(d,!0);return{pos:i,inside:p?p.posAtStart-p.border:-1}}(this,e)}coordsAtPos(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return q(this,e,t)}domAtPos(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=this.docView.posFromDOM(e,t,n);if(null==r)throw RangeError("DOM position not inside the editor");return r}endOfTextblock(e,t){return function(e,t,n){let r,i;return X==t&&Z==n?J:(X=t,Z=n,J="up"==n||"down"==n?(r=t.selection,i="up"==n?r.$from:r.$to,K(e,t,()=>{let{node:t}=e.docView.domFromPos(i.pos,"up"==n?-1:1);for(;;){let n=e.docView.nearestDesc(t,!0);if(!n)break;if(n.node.isBlock){t=n.contentDOM||n.dom;break}t=n.dom.parentNode}let r=q(e,i.pos,1);for(let e=t.firstChild;e;e=e.nextSibling){let t;if(1==e.nodeType)t=e.getClientRects();else{if(3!=e.nodeType)continue;t=s(e,0,e.nodeValue.length).getClientRects()}for(let e=0;e<t.length;e++){let i=t[e];if(i.bottom>i.top+1&&("up"==n?r.top-i.top>(i.bottom-r.top)*2:i.bottom-r.bottom>(r.bottom-i.top)*2))return!1}}return!0})):function(e,t,n){let{$head:r}=t.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,a=i==r.parent.content.size,o=e.domSelection();return o?Y.test(r.parent.textContent)&&o.modify?K(e,t,()=>{let{focusNode:t,focusOffset:i,anchorNode:a,anchorOffset:s}=e.domSelectionRange(),l=o.caretBidiLevel;o.modify("move",n,"character");let u=r.depth?e.docView.domAfterPos(r.before()):e.dom,{focusNode:c,focusOffset:d}=e.domSelectionRange(),h=c&&!u.contains(1==c.nodeType?c:c.parentNode)||t==c&&i==d;try{o.collapse(a,s),t&&(t!=a||i!=s)&&o.extend&&o.extend(t,i)}catch(e){}return null!=l&&(o.caretBidiLevel=l),h}):"left"==n||"backward"==n?!i:a:r.pos==r.start()||r.pos==r.end()}(e,t,n))}(this,t||this.state,e)}pasteHTML(e,t){return ta(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return ta(this,e,null,!0,t||new ClipboardEvent("paste"))}destroy(){if(this.docView){for(let e in this.domObserver.stop(),this.input.eventHandlers)this.dom.removeEventListener(e,this.input.eventHandlers[e]);clearTimeout(this.input.composingTimeout),clearTimeout(this.input.lastIOSEnterFallbackTimeout),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],tA(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,l()}}get isDestroyed(){return null==this.docView}dispatchEvent(e){!e3(this,e)&&eZ[e.type]&&(this.editable||!(e.type in eJ))&&eZ[e.type](this,e)}dispatch(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?M&&11===this.root.nodeType&&function(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}(this.dom.ownerDocument)==this.dom&&function(e,t){let n;if(t.getComposedRanges){let n=t.getComposedRanges(e.root)[0];if(n)return tP(e,n)}function r(e){e.preventDefault(),e.stopImmediatePropagation(),n=e.getTargetRanges()[0]}return e.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",r,!0),n?tP(e,n):null}(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}constructor(e,r){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new e0,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=r,this.state=r.state,this.directPlugins=r.plugins||[],this.directPlugins.forEach(tV),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):"function"==typeof e?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=tH(this),tU(this),this.nodeViews=tW(this),this.docView=ei(this.state.doc,tB(this),tA(this),this.dom,this),this.domObserver=new tI(this,(e,r,i,a)=>(function(e,r,i,a,o){let s,l,u,c,d,h,p=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,r<0){let t=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,n=ey(e,t);if(n&&!e.state.selection.eq(n)){if(E&&P&&13===e.input.lastKeyCode&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",t=>t(e,m(13,"Enter"))))return;let r=e.state.tr.setSelection(n);"pointer"==t?r.setMeta("pointer",!0):"key"==t&&r.scrollIntoView(),p&&r.setMeta("composition",p),e.dispatch(r)}return}let g=e.state.doc.resolve(r),y=g.sharedDepth(i);r=g.before(y+1),i=e.state.doc.resolve(i).after(y+1);let b=e.state.selection,x=function(e,t,r){let i,{node:a,fromOffset:o,toOffset:s,from:l,to:u}=e.docView.parseRange(t,r),c=e.domSelectionRange(),d=c.anchorNode;if(d&&e.dom.contains(1==d.nodeType?d:d.parentNode)&&(i=[{node:d,offset:c.anchorOffset}],f(c)||i.push({node:c.focusNode,offset:c.focusOffset})),E&&8===e.input.lastKeyCode)for(let e=s;e>o;e--){let t=a.childNodes[e-1],n=t.pmViewDesc;if("BR"==t.nodeName&&!n){s=e;break}if(!n||n.size)break}let h=e.state.doc,p=e.someProp("domParser")||n.DOMParser.fromSchema(e.state.schema),m=h.resolve(l),g=null,y=p.parse(a,{topNode:m.parent,topMatch:m.parent.contentMatchAt(m.index()),topOpen:!0,from:o,to:s,preserveWhitespace:"pre"!=m.parent.type.whitespace||"full",findPositions:i,ruleFromNode:tR,context:m});if(i&&null!=i[0].pos){let e=i[0].pos,t=i[1]&&i[1].pos;null==t&&(t=e),g={anchor:e+l,head:t+l}}return{doc:y,sel:g,from:l,to:u}}(e,r,i),w=e.state.doc,k=w.slice(x.from,x.to);8===e.input.lastKeyCode&&Date.now()-100<e.input.lastKeyCodeTime?(s=e.state.selection.to,l="end"):(s=e.state.selection.from,l="start"),e.input.lastKeyCode=null;let C=function(e,t,n,r,i){let a=e.findDiffStart(t,n);if(null==a)return null;let{a:o,b:s}=e.findDiffEnd(t,n+e.size,n+t.size);if("end"==i){let e=Math.max(0,a-Math.min(o,s));r-=o+e-a}if(o<a&&e.size<t.size){let e=r<=a&&r>=o?a-r:0;(a-=e)&&a<t.size&&tL(t.textBetween(a-1,a+1))&&(a+=e?1:-1),s=a+(s-o),o=a}else if(s<a){let t=r<=a&&r>=s?a-r:0;(a-=t)&&a<e.size&&tL(e.textBetween(a-1,a+1))&&(a+=t?1:-1),o=a+(o-s),s=a}return{start:a,endA:o,endB:s}}(k.content,x.doc.content,x.from,s,l);if(C&&e.input.domChangeCount++,(I&&e.input.lastIOSEnter>Date.now()-225||P)&&o.some(e=>1==e.nodeType&&!tO.test(e.nodeName))&&(!C||C.endA>=C.endB)&&e.someProp("handleKeyDown",t=>t(e,m(13,"Enter")))){e.input.lastIOSEnter=0;return}if(!C)if(a&&b instanceof t.TextSelection&&!b.empty&&b.$head.sameParent(b.$anchor)&&!e.composing&&!(x.sel&&x.sel.anchor!=x.sel.head))C={start:b.from,endA:b.to,endB:b.to};else{if(x.sel){let t=tj(e,e.state.doc,x.sel);if(t&&!t.eq(e.state.selection)){let n=e.state.tr.setSelection(t);p&&n.setMeta("composition",p),e.dispatch(n)}}return}e.state.selection.from<e.state.selection.to&&C.start==C.endB&&e.state.selection instanceof t.TextSelection&&(C.start>e.state.selection.from&&C.start<=e.state.selection.from+2&&e.state.selection.from>=x.from?C.start=e.state.selection.from:C.endA<e.state.selection.to&&C.endA>=e.state.selection.to-2&&e.state.selection.to<=x.to&&(C.endB+=e.state.selection.to-C.endA,C.endA=e.state.selection.to)),S&&_<=11&&C.endB==C.start+1&&C.endA==C.start&&C.start>x.from&&" "==x.doc.textBetween(C.start-x.from-1,C.start-x.from+1)&&(C.start--,C.endA--,C.endB--);let A=x.doc.resolveNoCache(C.start-x.from),T=x.doc.resolveNoCache(C.endB-x.from),M=w.resolve(C.start),N=A.sameParent(T)&&A.parent.inlineContent&&M.end()>=C.endA;if((I&&e.input.lastIOSEnter>Date.now()-225&&(!N||o.some(e=>"DIV"==e.nodeName||"P"==e.nodeName))||!N&&A.pos<x.doc.content.size&&!A.sameParent(T)&&(u=t.Selection.findFrom(x.doc.resolve(A.pos+1),1,!0))&&u.head==T.pos)&&e.someProp("handleKeyDown",t=>t(e,m(13,"Enter")))){e.input.lastIOSEnter=0;return}if(e.state.selection.anchor>C.start&&function(e,t,n,r,i){if(n-t<=i.pos-r.pos||tF(r,!0,!1)<i.pos)return!1;let a=e.resolve(t);if(!r.parent.isTextblock){let e=a.nodeAfter;return null!=e&&n==t+e.nodeSize}if(a.parentOffset<a.parent.content.size||!a.parent.isTextblock)return!1;let o=e.resolve(tF(a,!0,!0));return!(!o.parent.isTextblock||o.pos>n||tF(o,!0,!1)<n)&&r.parent.content.cut(r.parentOffset).eq(o.parent.content)}(w,C.start,C.endA,A,T)&&e.someProp("handleKeyDown",t=>t(e,m(8,"Backspace")))){P&&E&&e.domObserver.suppressSelectionUpdates();return}E&&P&&C.endB==C.start&&(e.input.lastAndroidDelete=Date.now()),P&&!N&&A.start()!=T.start()&&0==T.parentOffset&&A.depth==T.depth&&x.sel&&x.sel.anchor==x.sel.head&&x.sel.head==C.endA&&(C.endB-=2,T=x.doc.resolveNoCache(C.endB-x.from),setTimeout(()=>{e.someProp("handleKeyDown",function(t){return t(e,m(13,"Enter"))})},20));let D=C.start,R=C.endA;if(N){if(A.pos==T.pos)S&&_<=11&&0==A.parentOffset&&(e.domObserver.suppressSelectionUpdates(),setTimeout(()=>ex(e),20)),c=e.state.tr.delete(D,R),d=w.resolve(C.start).marksAcross(w.resolve(C.endA));else if(C.endA==C.endB&&(h=function(e,t){let r=e.firstChild.marks,i=t.firstChild.marks,a=r,o=i,s,l,u;for(let e=0;e<i.length;e++)a=i[e].removeFromSet(a);for(let e=0;e<r.length;e++)o=r[e].removeFromSet(o);if(1==a.length&&0==o.length)l=a[0],s="add",u=e=>e.mark(l.addToSet(e.marks));else{if(0!=a.length||1!=o.length)return null;l=o[0],s="remove",u=e=>e.mark(l.removeFromSet(e.marks))}let c=[];for(let e=0;e<t.childCount;e++)c.push(u(t.child(e)));if(n.Fragment.from(c).eq(e))return{mark:l,type:s}}(A.parent.content.cut(A.parentOffset,T.parentOffset),M.parent.content.cut(M.parentOffset,C.endA-M.start()))))c=e.state.tr,"add"==h.type?c.addMark(D,R,h.mark):c.removeMark(D,R,h.mark);else if(A.parent.child(A.index()).isText&&A.index()==T.index()-!T.textOffset){let t=A.parent.textBetween(A.parentOffset,T.parentOffset);if(e.someProp("handleTextInput",n=>n(e,D,R,t)))return;c=e.state.tr.insertText(t,D,R)}}if(c||(c=e.state.tr.replace(D,R,x.doc.slice(C.start-x.from,C.endB-x.from))),x.sel){let t=tj(e,c.doc,x.sel);t&&!(E&&P&&e.composing&&t.empty&&(C.start!=C.endB||e.input.lastAndroidDelete<Date.now()-100)&&(t.head==D||t.head==c.mapping.map(R)-1)||S&&t.empty&&t.head==D)&&c.setSelection(t)}d&&c.ensureMarks(d),p&&c.setMeta("composition",p),e.dispatch(c.scrollIntoView())})(this,e,r,i,a)),this.domObserver.start(),function(e){for(let t in eZ){let n=eZ[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=t=>{!function(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n=t.target;n!=e.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}(e,t)||e3(e,t)||!e.editable&&t.type in eJ||n(e,t)},eQ[t]?{passive:!0}:void 0)}M&&e.dom.addEventListener("input",()=>null),e2(e)}(this),this.updatePluginViews()}}function tB(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",n=>{if("function"==typeof n&&(n=n(e.state)),n)for(let e in n)"class"==e?t.class+=" "+n[e]:"style"==e?t.style=(t.style?t.style+";":"")+n[e]:t[e]||"contenteditable"==e||"nodeName"==e||(t[e]=String(n[e]))}),t.translate||(t.translate="no"),[tp.node(0,e.state.doc.content.size,t)]}function tU(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:tp.widget(e.state.selection.from,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function tH(e){return!e.someProp("editable",t=>!1===t(e.state))}function tW(e){let t=Object.create(null);function n(e){for(let n in e)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=e[n])}return e.someProp("nodeViews",n),e.someProp("markViews",n),t}function tV(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw RangeError("Plugins passed directly to the view must not have a state component")}},725251:e=>{"use strict";e.s({})},471089:e=>{"use strict";e.s({}),e.i(725251)},167805:e=>{"use strict";e.s({base:()=>t,keyName:()=>s});for(var t={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},n={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},r="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),i="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),a=0;a<10;a++)t[48+a]=t[96+a]=String(a);for(var a=1;a<=24;a++)t[a+111]="F"+a;for(var a=65;a<=90;a++)t[a]=String.fromCharCode(a+32),n[a]=String.fromCharCode(a);for(var o in t)n.hasOwnProperty(o)||(n[o]=t[o]);function s(e){var a=!(r&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||i&&e.shiftKey&&e.key&&1==e.key.length||"Unidentified"==e.key)&&e.key||(e.shiftKey?n:t)[e.keyCode]||e.key||"Unidentified";return"Esc"==a&&(a="Escape"),"Del"==a&&(a="Delete"),"Left"==a&&(a="ArrowLeft"),"Up"==a&&(a="ArrowUp"),"Right"==a&&(a="ArrowRight"),"Down"==a&&(a="ArrowDown"),a}},991654:e=>{"use strict";e.s({keydownHandler:()=>s,keymap:()=>o});var t=e.i(167805),n=e.i(968617);let r="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),i="undefined"!=typeof navigator&&/Win/.test(navigator.platform);function a(e,t){let n=!(arguments.length>2)||void 0===arguments[2]||arguments[2];return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),n&&t.shiftKey&&(e="Shift-"+e),e}function o(e){return new n.Plugin({props:{handleKeyDown:s(e)}})}function s(e){let n=function(e){let t=Object.create(null);for(let n in e)t[function(e){let t,n,i,a,o=e.split(/-(?!$)/),s=o[o.length-1];"Space"==s&&(s=" ");for(let e=0;e<o.length-1;e++){let s=o[e];if(/^(cmd|meta|m)$/i.test(s))a=!0;else if(/^a(lt)?$/i.test(s))t=!0;else if(/^(c|ctrl|control)$/i.test(s))n=!0;else if(/^s(hift)?$/i.test(s))i=!0;else if(/^mod$/i.test(s))r?a=!0:n=!0;else throw Error("Unrecognized modifier name: "+s)}return t&&(s="Alt-"+s),n&&(s="Ctrl-"+s),a&&(s="Meta-"+s),i&&(s="Shift-"+s),s}(n)]=e[n];return t}(e);return function(e,r){let o=(0,t.keyName)(r),s,l=n[a(o,r)];if(l&&l(e.state,e.dispatch,e))return!0;if(1==o.length&&" "!=o){if(r.shiftKey){let t=n[a(o,r,!1)];if(t&&t(e.state,e.dispatch,e))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(i&&r.ctrlKey&&r.altKey)&&(s=t.base[r.keyCode])&&s!=o){let t=n[a(s,r)];if(t&&t(e.state,e.dispatch,e))return!0}}return!1}}},357414:e=>{"use strict";e.s({})},988191:e=>{"use strict";e.s({}),e.i(357414)},356739:e=>{"use strict";e.s({})},922181:e=>{"use strict";e.s({}),e.i(356739)},864402:e=>{"use strict";e.s({})},772989:e=>{"use strict";e.s({}),e.i(864402)},80464:e=>{"use strict";e.s({createParagraphNear:()=>_,deleteSelection:()=>i,exitCode:()=>S,joinBackward:()=>o,joinDown:()=>b,joinForward:()=>f,joinTextblockBackward:()=>s,joinTextblockForward:()=>l,joinUp:()=>y,lift:()=>x,liftEmptyBlock:()=>C,newlineInCode:()=>w,selectNodeBackward:()=>d,selectNodeForward:()=>m,selectParentNode:()=>A,selectTextblockEnd:()=>I,selectTextblockStart:()=>M,setBlockType:()=>D,wrapIn:()=>N});var t=e.i(47542),n=e.i(490077),r=e.i(968617);let i=(e,t)=>!e.selection.empty&&(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);function a(e,t){let{$cursor:n}=e.selection;return n&&(t?t.endOfTextblock("backward",e):!(n.parentOffset>0))?n:null}let o=(e,i,o)=>{let s=a(e,o);if(!s)return!1;let l=h(s);if(!l){let n=s.blockRange(),r=n&&(0,t.liftTarget)(n);return null!=r&&(i&&i(e.tr.lift(n,r).scrollIntoView()),!0)}let u=l.nodeBefore;if(E(e,l,i,-1))return!0;if(0==s.parent.content.size&&(c(u,"end")||r.NodeSelection.isSelectable(u)))for(let a=s.depth;;a--){let o=(0,t.replaceStep)(e.doc,s.before(a),s.after(a),n.Slice.empty);if(o&&o.slice.size<o.to-o.from){if(i){let t=e.tr.step(o);t.setSelection(c(u,"end")?r.Selection.findFrom(t.doc.resolve(t.mapping.map(l.pos,-1)),-1):r.NodeSelection.create(t.doc,l.pos-u.nodeSize)),i(t.scrollIntoView())}return!0}if(1==a||s.node(a-1).childCount>1)break}return!!u.isAtom&&l.depth==s.depth-1&&(i&&i(e.tr.delete(l.pos-u.nodeSize,l.pos).scrollIntoView()),!0)},s=(e,t,n)=>{let r=a(e,n);if(!r)return!1;let i=h(r);return!!i&&u(e,i,t)},l=(e,t,n)=>{let r=p(e,n);if(!r)return!1;let i=g(r);return!!i&&u(e,i,t)};function u(e,i,a){let o=i.nodeBefore,s=i.pos-1;for(;!o.isTextblock;s--){if(o.type.spec.isolating)return!1;let e=o.lastChild;if(!e)return!1;o=e}let l=i.nodeAfter,u=i.pos+1;for(;!l.isTextblock;u++){if(l.type.spec.isolating)return!1;let e=l.firstChild;if(!e)return!1;l=e}let c=(0,t.replaceStep)(e.doc,s,u,n.Slice.empty);if(!c||c.from!=s||c instanceof t.ReplaceStep&&c.slice.size>=u-s)return!1;if(a){let t=e.tr.step(c);t.setSelection(r.TextSelection.create(t.doc,s)),a(t.scrollIntoView())}return!0}function c(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];for(let r=e;r;r="start"==t?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&1!=r.childCount)break}return!1}let d=(e,t,n)=>{let{$head:i,empty:a}=e.selection,o=i;if(!a)return!1;if(i.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):i.parentOffset>0)return!1;o=h(i)}let s=o&&o.nodeBefore;return!!s&&!!r.NodeSelection.isSelectable(s)&&(t&&t(e.tr.setSelection(r.NodeSelection.create(e.doc,o.pos-s.nodeSize)).scrollIntoView()),!0)};function h(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function p(e,t){let{$cursor:n}=e.selection;return n&&(t?t.endOfTextblock("forward",e):!(n.parentOffset<n.parent.content.size))?n:null}let f=(e,i,a)=>{let o=p(e,a);if(!o)return!1;let s=g(o);if(!s)return!1;let l=s.nodeAfter;if(E(e,s,i,1))return!0;if(0==o.parent.content.size&&(c(l,"start")||r.NodeSelection.isSelectable(l))){let a=(0,t.replaceStep)(e.doc,o.before(),o.after(),n.Slice.empty);if(a&&a.slice.size<a.to-a.from){if(i){let t=e.tr.step(a);t.setSelection(c(l,"start")?r.Selection.findFrom(t.doc.resolve(t.mapping.map(s.pos)),1):r.NodeSelection.create(t.doc,t.mapping.map(s.pos))),i(t.scrollIntoView())}return!0}}return!!l.isAtom&&s.depth==o.depth-1&&(i&&i(e.tr.delete(s.pos,s.pos+l.nodeSize).scrollIntoView()),!0)},m=(e,t,n)=>{let{$head:i,empty:a}=e.selection,o=i;if(!a)return!1;if(i.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):i.parentOffset<i.parent.content.size)return!1;o=g(i)}let s=o&&o.nodeAfter;return!!s&&!!r.NodeSelection.isSelectable(s)&&(t&&t(e.tr.setSelection(r.NodeSelection.create(e.doc,o.pos)).scrollIntoView()),!0)};function g(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}let y=(e,n)=>{let i=e.selection,a=i instanceof r.NodeSelection,o;if(a){if(i.node.isTextblock||!(0,t.canJoin)(e.doc,i.from))return!1;o=i.from}else if(null==(o=(0,t.joinPoint)(e.doc,i.from,-1)))return!1;if(n){let t=e.tr.join(o);a&&t.setSelection(r.NodeSelection.create(t.doc,o-e.doc.resolve(o).nodeBefore.nodeSize)),n(t.scrollIntoView())}return!0},b=(e,n)=>{let i=e.selection,a;if(i instanceof r.NodeSelection){if(i.node.isTextblock||!(0,t.canJoin)(e.doc,i.to))return!1;a=i.to}else if(null==(a=(0,t.joinPoint)(e.doc,i.to,1)))return!1;return n&&n(e.tr.join(a).scrollIntoView()),!0},x=(e,n)=>{let{$from:r,$to:i}=e.selection,a=r.blockRange(i),o=a&&(0,t.liftTarget)(a);return null!=o&&(n&&n(e.tr.lift(a,o).scrollIntoView()),!0)},w=(e,t)=>{let{$head:n,$anchor:r}=e.selection;return!!n.parent.type.spec.code&&!!n.sameParent(r)&&(t&&t(e.tr.insertText("\n").scrollIntoView()),!0)};function k(e){for(let t=0;t<e.edgeCount;t++){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}let S=(e,t)=>{let{$head:n,$anchor:i}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(i))return!1;let a=n.node(-1),o=n.indexAfter(-1),s=k(a.contentMatchAt(o));if(!s||!a.canReplaceWith(o,o,s))return!1;if(t){let i=n.after(),a=e.tr.replaceWith(i,i,s.createAndFill());a.setSelection(r.Selection.near(a.doc.resolve(i),1)),t(a.scrollIntoView())}return!0},_=(e,t)=>{let n=e.selection,{$from:i,$to:a}=n;if(n instanceof r.AllSelection||i.parent.inlineContent||a.parent.inlineContent)return!1;let o=k(a.parent.contentMatchAt(a.indexAfter()));if(!o||!o.isTextblock)return!1;if(t){let n=(!i.parentOffset&&a.index()<a.parent.childCount?i:a).pos,s=e.tr.insert(n,o.createAndFill());s.setSelection(r.TextSelection.create(s.doc,n+1)),t(s.scrollIntoView())}return!0},C=(e,n)=>{let{$cursor:r}=e.selection;if(!r||r.parent.content.size)return!1;if(r.depth>1&&r.after()!=r.end(-1)){let i=r.before();if((0,t.canSplit)(e.doc,i))return n&&n(e.tr.split(i).scrollIntoView()),!0}let i=r.blockRange(),a=i&&(0,t.liftTarget)(i);return null!=a&&(n&&n(e.tr.lift(i,a).scrollIntoView()),!0)},A=(e,t)=>{let{$from:n,to:i}=e.selection,a,o=n.sharedDepth(i);return 0!=o&&(a=n.before(o),t&&t(e.tr.setSelection(r.NodeSelection.create(e.doc,a))),!0)};function E(e,i,a,o){let s,l,u,d=i.nodeBefore,h=i.nodeAfter,p,f,m=d.type.spec.isolating||h.type.spec.isolating;if(!m&&(s=i.nodeBefore,l=i.nodeAfter,u=i.index(),s&&l&&s.type.compatibleContent(l.type)&&(!s.content.size&&i.parent.canReplace(u-1,u)?(a&&a(e.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!!i.parent.canReplace(u,u+1)&&!!(l.isTextblock||(0,t.canJoin)(e.doc,i.pos))&&(a&&a(e.tr.join(i.pos).scrollIntoView()),!0))))return!0;let g=!m&&i.parent.canReplace(i.index(),i.index()+1);if(g&&(p=(f=d.contentMatchAt(d.childCount)).findWrapping(h.type))&&f.matchType(p[0]||h.type).validEnd){if(a){let r=i.pos+h.nodeSize,o=n.Fragment.empty;for(let e=p.length-1;e>=0;e--)o=n.Fragment.from(p[e].create(null,o));o=n.Fragment.from(d.copy(o));let s=e.tr.step(new t.ReplaceAroundStep(i.pos-1,r,i.pos,r,new n.Slice(o,1,0),p.length,!0)),l=s.doc.resolve(r+2*p.length);l.nodeAfter&&l.nodeAfter.type==d.type&&(0,t.canJoin)(s.doc,l.pos)&&s.join(l.pos),a(s.scrollIntoView())}return!0}let y=h.type.spec.isolating||o>0&&m?null:r.Selection.findFrom(i,1),b=y&&y.$from.blockRange(y.$to),x=b&&(0,t.liftTarget)(b);if(null!=x&&x>=i.depth)return a&&a(e.tr.lift(b,x).scrollIntoView()),!0;if(g&&c(h,"start",!0)&&c(d,"end")){let r=d,o=[];for(;o.push(r),!r.isTextblock;)r=r.lastChild;let s=h,l=1;for(;!s.isTextblock;s=s.firstChild)l++;if(r.canReplace(r.childCount,r.childCount,s.content)){if(a){let r=n.Fragment.empty;for(let e=o.length-1;e>=0;e--)r=n.Fragment.from(o[e].copy(r));a(e.tr.step(new t.ReplaceAroundStep(i.pos-o.length,i.pos+h.nodeSize,i.pos+l,i.pos+h.nodeSize-l,new n.Slice(r,o.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function T(e){return function(t,n){let i=t.selection,a=e<0?i.$from:i.$to,o=a.depth;for(;a.node(o).isInline;){if(!o)return!1;o--}return!!a.node(o).isTextblock&&(n&&n(t.tr.setSelection(r.TextSelection.create(t.doc,e<0?a.start(o):a.end(o)))),!0)}}let M=T(-1),I=T(1);function N(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(r,i){let{$from:a,$to:o}=r.selection,s=a.blockRange(o),l=s&&(0,t.findWrapping)(s,e,n);return!!l&&(i&&i(r.tr.wrap(s,l).scrollIntoView()),!0)}}function D(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n,r){let i=!1;for(let r=0;r<n.selection.ranges.length&&!i;r++){let{$from:{pos:a},$to:{pos:o}}=n.selection.ranges[r];n.doc.nodesBetween(a,o,(r,a)=>{if(i)return!1;if(!(!r.isTextblock||r.hasMarkup(e,t)))if(r.type==e)i=!0;else{let t=n.doc.resolve(a),r=t.index();i=t.parent.canReplaceWith(r,r+1,e)}})}if(!i)return!1;if(r){let i=n.tr;for(let r=0;r<n.selection.ranges.length;r++){let{$from:{pos:a},$to:{pos:o}}=n.selection.ranges[r];i.setBlockType(a,o,e,t)}r(i.scrollIntoView())}return!0}}function P(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n,r){for(let i=0;i<t.length;i++)if(t[i](e,n,r))return!0;return!1}}let R=P(i,o,d),O=P(i,f,m),j={Enter:P(w,_,C,(e,n)=>{let{$from:i,$to:a}=e.selection;if(e.selection instanceof r.NodeSelection&&e.selection.node.isBlock)return!!i.parentOffset&&!!(0,t.canSplit)(e.doc,i.pos)&&(n&&n(e.tr.split(i.pos).scrollIntoView()),!0);if(!i.depth)return!1;let o=[],s,l,u=!1,c=!1;for(let e=i.depth;;e--){if(i.node(e).isBlock){let t;u=i.end(e)==i.pos+(i.depth-e),c=i.start(e)==i.pos-(i.depth-e),l=k(i.node(e-1).contentMatchAt(i.indexAfter(e-1)));o.unshift(t||(u&&l?{type:l}:null)),s=e;break}if(1==e)return!1;o.unshift(null)}let d=e.tr;(e.selection instanceof r.TextSelection||e.selection instanceof r.AllSelection)&&d.deleteSelection();let h=d.mapping.map(i.pos),p=(0,t.canSplit)(d.doc,h,o.length,o);if(p||(o[0]=l?{type:l}:null,p=(0,t.canSplit)(d.doc,h,o.length,o)),!p)return!1;if(d.split(h,o.length,o),!u&&c&&i.node(s).type!=l){let e=d.mapping.map(i.before(s)),t=d.doc.resolve(e);l&&i.node(s-1).canReplaceWith(t.index(),t.index()+1,l)&&d.setNodeMarkup(d.mapping.map(i.before(s)),l)}return n&&n(d.scrollIntoView()),!0}),"Mod-Enter":S,Backspace:R,"Mod-Backspace":R,"Shift-Backspace":R,Delete:O,"Mod-Delete":O,"Mod-a":(e,t)=>(t&&t(e.tr.setSelection(new r.AllSelection(e.doc))),!0)},F={"Ctrl-h":j.Backspace,"Alt-Backspace":j["Mod-Backspace"],"Ctrl-d":j.Delete,"Ctrl-Alt-Backspace":j["Mod-Delete"],"Alt-Delete":j["Mod-Delete"],"Alt-d":j["Mod-Delete"],"Ctrl-a":M,"Ctrl-e":I};for(let e in j)F[e]=j[e];"undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):"undefined"!=typeof os&&os.platform&&os.platform()},440467:e=>{"use strict";e.s({})},811407:e=>{"use strict";e.s({}),e.i(440467)},732307:e=>{"use strict";e.s({liftListItem:()=>i,sinkListItem:()=>a,wrapInList:()=>r});var t=e.i(47542),n=e.i(490077);function r(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(i,a){let{$from:o,$to:s}=i.selection,l=o.blockRange(s);if(!l)return!1;let u=a?i.tr:null;return!!function(e,r,i){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=!1,s=r,l=r.$from.doc;if(r.depth>=2&&r.$from.node(r.depth-1).type.compatibleContent(i)&&0==r.startIndex){if(0==r.$from.index(r.depth-1))return!1;let e=l.resolve(r.start-2);s=new n.NodeRange(e,e,r.depth),r.endIndex<r.parent.childCount&&(r=new n.NodeRange(r.$from,l.resolve(r.$to.end(r.depth)),r.depth)),o=!0}let u=(0,t.findWrapping)(s,i,a,r);return!!u&&(e&&function(e,r,i,a,o){let s=n.Fragment.empty;for(let e=i.length-1;e>=0;e--)s=n.Fragment.from(i[e].type.create(i[e].attrs,s));e.step(new t.ReplaceAroundStep(r.start-2*!!a,r.end,r.start,r.end,new n.Slice(s,0,0),i.length,!0));let l=0;for(let e=0;e<i.length;e++)i[e].type==o&&(l=e+1);let u=i.length-l,c=r.start+i.length-2*!!a,d=r.parent;for(let n=r.startIndex,i=r.endIndex,a=!0;n<i;n++,a=!1)!a&&(0,t.canSplit)(e.doc,c,u)&&(e.split(c,u),c+=2*u),c+=d.child(n).nodeSize}(e,r,u,o,i),!0)}(u,l,e,r)&&(a&&a(u.scrollIntoView()),!0)}}function i(e){return function(r,i){let{$from:a,$to:o}=r.selection,s=a.blockRange(o,t=>t.childCount>0&&t.firstChild.type==e);return!!s&&(!i||(a.node(s.depth-1).type==e?function(e,r,i,a){let o=e.tr,s=a.end,l=a.$to.end(a.depth);s<l&&(o.step(new t.ReplaceAroundStep(s-1,l,s,l,new n.Slice(n.Fragment.from(i.create(null,a.parent.copy())),1,0),1,!0)),a=new n.NodeRange(o.doc.resolve(a.$from.pos),o.doc.resolve(l),a.depth));let u=(0,t.liftTarget)(a);if(null==u)return!1;o.lift(a,u);let c=o.doc.resolve(o.mapping.map(s,-1)-1);return(0,t.canJoin)(o.doc,c.pos)&&c.nodeBefore.type==c.nodeAfter.type&&o.join(c.pos),r(o.scrollIntoView()),!0}(r,i,e,s):function(e,r,i){let a=e.tr,o=i.parent;for(let e=i.end,t=i.endIndex-1,n=i.startIndex;t>n;t--)e-=o.child(t).nodeSize,a.delete(e-1,e+1);let s=a.doc.resolve(i.start),l=s.nodeAfter;if(a.mapping.map(i.end)!=i.start+s.nodeAfter.nodeSize)return!1;let u=0==i.startIndex,c=i.endIndex==o.childCount,d=s.node(-1),h=s.index(-1);if(!d.canReplace(h+ +!u,h+1,l.content.append(c?n.Fragment.empty:n.Fragment.from(o))))return!1;let p=s.pos,f=p+l.nodeSize;return a.step(new t.ReplaceAroundStep(p-!!u,f+ +!!c,p+1,f-1,new n.Slice((u?n.Fragment.empty:n.Fragment.from(o.copy(n.Fragment.empty))).append(c?n.Fragment.empty:n.Fragment.from(o.copy(n.Fragment.empty))),+!u,+!c),+!u)),r(a.scrollIntoView()),!0}(r,i,s)))}}function a(e){return function(r,i){let{$from:a,$to:o}=r.selection,s=a.blockRange(o,t=>t.childCount>0&&t.firstChild.type==e);if(!s)return!1;let l=s.startIndex;if(0==l)return!1;let u=s.parent,c=u.child(l-1);if(c.type!=e)return!1;if(i){let a=c.lastChild&&c.lastChild.type==u.type,o=n.Fragment.from(a?e.create():null),l=new n.Slice(n.Fragment.from(e.create(null,n.Fragment.from(u.type.create(null,o)))),a?3:1,0),d=s.start,h=s.end;i(r.tr.step(new t.ReplaceAroundStep(d-(a?3:1),h,d,h,l,1,!0)).scrollIntoView())}return!0}}e.i(968617)},691283:e=>{"use strict";e.s({Editor:()=>tL,Extension:()=>e_,Mark:()=>eb,MarkView:()=>t$,Node:()=>tK,NodeView:()=>tY,callOrReturn:()=>E,canInsertNode:()=>tV,combineTransactionSteps:()=>p,escapeForRegEx:()=>tq,extensions:()=>eS,findChildren:()=>b,findChildrenInRange:()=>x,findParentNode:()=>k,findParentNodeClosestToPos:()=>w,generateJSON:()=>F,getAttributes:()=>q,getChangedRanges:()=>G,getExtensionField:()=>S,getHTMLFromFragment:()=>C,getMarksBetween:()=>J,getNodeAtPosition:()=>Q,getNodeType:()=>W,getRenderedAttributes:()=>N,getText:()=>z,getTextSerializersFromSchema:()=>B,isAtEndOfNode:()=>ea,isAtStartOfNode:()=>eo,isNodeActive:()=>ei,isNodeEmpty:()=>eu,isNodeSelection:()=>ec,isTextSelection:()=>ed,markInputRule:()=>tz,markPasteRule:()=>tX,mergeAttributes:()=>I,nodeInputRule:()=>tB,posToDOMRect:()=>ep,textInputRule:()=>tH,textblockTypeInputRule:()=>tU,wrappingInputRule:()=>tW}),e.i(131841);var t=e.i(968617);e.i(125492);var n=e.i(954647);e.i(471089);var r=e.i(991654);e.i(988191);var i=e.i(47542);e.i(922181);var a=e.i(490077);e.i(772989);var o=e.i(80464);e.i(811407);var s=e.i(732307),l=Object.defineProperty,u=(e,t)=>{for(var n in t)l(e,n,{get:t[n],enumerable:!0})};function c(e){let{state:t,transaction:n}=e,{selection:r}=n,{doc:i}=n,{storedMarks:a}=n;return{...t,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return a},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,a=n.storedMarks,n}}}var d=class{get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){let{rawCommands:e,editor:t,state:n}=this,{view:r}=t,{tr:i}=n,a=this.buildProps(i);return Object.fromEntries(Object.entries(e).map(e=>{let[t,n]=e;var o=this;return[t,function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];let l=n(...t)(a);return i.getMeta("preventDispatch")||o.hasCustomState||r.dispatch(i),l}]}))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],{rawCommands:n,editor:r,state:i}=this,{view:a}=r,o=[],s=!!e,l=e||i.tr,u=()=>(s||!t||l.getMeta("preventDispatch")||this.hasCustomState||a.dispatch(l),o.every(e=>!0===e)),c={...Object.fromEntries(Object.entries(n).map(e=>{let[n,r]=e;var i=this;return[n,function(){for(var e=arguments.length,n=Array(e),a=0;a<e;a++)n[a]=arguments[a];let s=i.buildProps(l,t),u=r(...n)(s);return o.push(u),c}]})),run:u};return c}createCan(e){let{rawCommands:t,state:n}=this,r=e||n.tr,i=this.buildProps(r,!1);return{...Object.fromEntries(Object.entries(t).map(e=>{let[t,n]=e;return[t,function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return n(...t)({...i,dispatch:void 0})}]})),chain:()=>this.createChain(r,!1)}}buildProps(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],{rawCommands:n,editor:r,state:i}=this,{view:a}=r,o={tr:e,editor:r,view:a,state:c({state:i,transaction:e}),dispatch:t?()=>void 0:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(n).map(e=>{let[t,n]=e;return[t,function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return n(...t)(o)}]}))}};return o}constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}},h=class{on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];let i=this.callbacks[e];return i&&i.forEach(e=>e.apply(this,n)),this}off(e,t){let n=this.callbacks[e];return n&&(t?this.callbacks[e]=n.filter(e=>e!==t):delete this.callbacks[e]),this}once(e,t){var n=this;let r=function(){for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];n.off(e,r),t.apply(n,a)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}constructor(){this.callbacks={}}};function p(e,t){let n=new i.Transform(e);return t.forEach(e=>{e.steps.forEach(e=>{n.step(e)})}),n}var f=e=>{let t=e.childNodes;for(let n=t.length-1;n>=0;n-=1){let r=t[n];3===r.nodeType&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?e.removeChild(r):1===r.nodeType&&f(r)}return e};function m(e){if("undefined"==typeof window)throw Error("[tiptap error]: there is no window object available, so this function cannot be used");return f(new window.DOMParser().parseFromString("<body>".concat(e,"</body>"),"text/html").body)}function g(e,t,n){if(e instanceof a.Node||e instanceof a.Fragment)return e;n={slice:!0,parseOptions:{},...n};let r="object"==typeof e&&null!==e,i="string"==typeof e;if(r)try{if(Array.isArray(e)&&e.length>0)return a.Fragment.fromArray(e.map(e=>t.nodeFromJSON(e)));let r=t.nodeFromJSON(e);return n.errorOnInvalidContent&&r.check(),r}catch(r){if(n.errorOnInvalidContent)throw Error("[tiptap error]: Invalid JSON content",{cause:r});return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",r),g("",t,n)}if(i){if(n.errorOnInvalidContent){let r=!1,i="",o=new a.Schema({topNode:t.spec.topNode,marks:t.spec.marks,nodes:t.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:e=>(r=!0,i="string"==typeof e?e:e.outerHTML,null)}]}})});if(n.slice?a.DOMParser.fromSchema(o).parseSlice(m(e),n.parseOptions):a.DOMParser.fromSchema(o).parse(m(e),n.parseOptions),n.errorOnInvalidContent&&r)throw Error("[tiptap error]: Invalid HTML content",{cause:Error("Invalid element found: ".concat(i))})}let r=a.DOMParser.fromSchema(t);return n.slice?r.parseSlice(m(e),n.parseOptions).content:r.parse(m(e),n.parseOptions)}return g("",t,n)}function y(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return g(e,t,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}function b(e,t){let n=[];return e.descendants((e,r)=>{t(e)&&n.push({node:e,pos:r})}),n}function x(e,t,n){let r=[];return e.nodesBetween(t.from,t.to,(e,t)=>{n(e)&&r.push({node:e,pos:t})}),r}function w(e,t){for(let n=e.depth;n>0;n-=1){let r=e.node(n);if(t(r))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:r}}}function k(e){return t=>w(t.$from,e)}function S(e,t,n){return void 0===e.config[t]&&e.parent?S(e.parent,t,n):"function"==typeof e.config[t]?e.config[t].bind({...n,parent:e.parent?S(e.parent,t,n):null}):e.config[t]}function _(e){return e.map(e=>{let t={name:e.name,options:e.options,storage:e.storage},n=S(e,"addExtensions",t);return n?[e,..._(n())]:e}).flat(10)}function C(e,t){let n=a.DOMSerializer.fromSchema(t).serializeFragment(e),r=document.implementation.createHTMLDocument().createElement("div");return r.appendChild(n),r.innerHTML}function A(e){return"function"==typeof e}function E(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return A(e)?t?e.bind(t)(...r):e(...r):e}function T(e){let t=e.filter(e=>"extension"===e.type);return{baseExtensions:t,nodeExtensions:e.filter(e=>"node"===e.type),markExtensions:e.filter(e=>"mark"===e.type)}}function M(e){let t=[],{nodeExtensions:n,markExtensions:r}=T(e),i=[...n,...r],a={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return e.forEach(e=>{let n={name:e.name,options:e.options,storage:e.storage,extensions:i},r=S(e,"addGlobalAttributes",n);r&&r().forEach(e=>{e.types.forEach(n=>{Object.entries(e.attributes).forEach(e=>{let[r,i]=e;t.push({type:n,name:r,attribute:{...a,...i}})})})})}),i.forEach(e=>{let n={name:e.name,options:e.options,storage:e.storage},r=S(e,"addAttributes",n);r&&Object.entries(r()).forEach(n=>{let[r,i]=n,o={...a,...i};"function"==typeof(null==o?void 0:o.default)&&(o.default=o.default()),(null==o?void 0:o.isRequired)&&(null==o?void 0:o.default)===void 0&&delete o.default,t.push({type:e.name,name:r,attribute:o})})}),t}function I(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(e=>!!e).reduce((e,t)=>{let n={...e};return Object.entries(t).forEach(e=>{let[t,r]=e;if(!n[t]){n[t]=r;return}if("class"===t){let e=r?String(r).split(" "):[],i=n[t]?n[t].split(" "):[],a=e.filter(e=>!i.includes(e));n[t]=[...i,...a].join(" ")}else if("style"===t){let e=r?r.split(";").map(e=>e.trim()).filter(Boolean):[],i=n[t]?n[t].split(";").map(e=>e.trim()).filter(Boolean):[],a=new Map;i.forEach(e=>{let[t,n]=e.split(":").map(e=>e.trim());a.set(t,n)}),e.forEach(e=>{let[t,n]=e.split(":").map(e=>e.trim());a.set(t,n)}),n[t]=Array.from(a.entries()).map(e=>{let[t,n]=e;return"".concat(t,": ").concat(n)}).join("; ")}else n[t]=r}),n},{})}function N(e,t){return t.filter(t=>t.type===e.type.name).filter(e=>e.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(e.attrs)||{}:{[t.name]:e.attrs[t.name]}).reduce((e,t)=>I(e,t),{})}function D(e,t){return"style"in e?e:{...e,getAttrs:n=>{let r=e.getAttrs?e.getAttrs(n):e.attrs;if(!1===r)return!1;let i=t.reduce((e,t)=>{var r;let i=t.attribute.parseHTML?t.attribute.parseHTML(n):"string"!=typeof(r=n.getAttribute(t.name))?r:r.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(r):"true"===r||"false"!==r&&r;return null==i?e:{...e,[t.name]:i}},{});return{...r,...i}}}}function P(e){return Object.fromEntries(Object.entries(e).filter(e=>{let[t,n]=e;return!("attrs"===t&&function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 0===Object.keys(e).length&&e.constructor===Object}(n))&&null!=n}))}function R(e,t){var n;let r=M(e),{nodeExtensions:i,markExtensions:o}=T(e),s=null==(n=i.find(e=>S(e,"topNode")))?void 0:n.name,l=Object.fromEntries(i.map(n=>{let i=r.filter(e=>e.type===n.name),a={name:n.name,options:n.options,storage:n.storage,editor:t},o=P({...e.reduce((e,t)=>{let r=S(t,"extendNodeSchema",a);return{...e,...r?r(n):{}}},{}),content:E(S(n,"content",a)),marks:E(S(n,"marks",a)),group:E(S(n,"group",a)),inline:E(S(n,"inline",a)),atom:E(S(n,"atom",a)),selectable:E(S(n,"selectable",a)),draggable:E(S(n,"draggable",a)),code:E(S(n,"code",a)),whitespace:E(S(n,"whitespace",a)),linebreakReplacement:E(S(n,"linebreakReplacement",a)),defining:E(S(n,"defining",a)),isolating:E(S(n,"isolating",a)),attrs:Object.fromEntries(i.map(e=>{var t,n;return[e.name,{default:null==(t=null==e?void 0:e.attribute)?void 0:t.default,validate:null==(n=null==e?void 0:e.attribute)?void 0:n.validate}]}))}),s=E(S(n,"parseHTML",a));s&&(o.parseDOM=s.map(e=>D(e,i)));let l=S(n,"renderHTML",a);l&&(o.toDOM=e=>l({node:e,HTMLAttributes:N(e,i)}));let u=S(n,"renderText",a);return u&&(o.toText=u),[n.name,o]})),u=Object.fromEntries(o.map(n=>{let i=r.filter(e=>e.type===n.name),a={name:n.name,options:n.options,storage:n.storage,editor:t},o=P({...e.reduce((e,t)=>{let r=S(t,"extendMarkSchema",a);return{...e,...r?r(n):{}}},{}),inclusive:E(S(n,"inclusive",a)),excludes:E(S(n,"excludes",a)),group:E(S(n,"group",a)),spanning:E(S(n,"spanning",a)),code:E(S(n,"code",a)),attrs:Object.fromEntries(i.map(e=>{var t,n;return[e.name,{default:null==(t=null==e?void 0:e.attribute)?void 0:t.default,validate:null==(n=null==e?void 0:e.attribute)?void 0:n.validate}]}))}),s=E(S(n,"parseHTML",a));s&&(o.parseDOM=s.map(e=>D(e,i)));let l=S(n,"renderHTML",a);return l&&(o.toDOM=e=>l({mark:e,HTMLAttributes:N(e,i)})),[n.name,o]}));return new a.Schema({topNode:s,nodes:l,marks:u})}function O(e){return e.sort((e,t)=>{let n=S(e,"priority")||100,r=S(t,"priority")||100;return n>r?-1:+(n<r)})}function j(e){var t;let n=O(_(e)),r=Array.from(new Set((t=n.map(e=>e.name)).filter((e,n)=>t.indexOf(e)!==n)));return r.length&&console.warn("[tiptap warn]: Duplicate extension names found: [".concat(r.map(e=>"'".concat(e,"'")).join(", "),"]. This can lead to issues.")),n}function F(e,t){let n=R(j(t),void 0),r=m(e);return a.DOMParser.fromSchema(n).parse(r).toJSON()}function L(e,t,n){let{from:r,to:i}=t,{blockSeparator:a="\n\n",textSerializers:o={}}=n||{},s="";return e.nodesBetween(r,i,(e,n,l,u)=>{var c;e.isBlock&&n>r&&(s+=a);let d=null==o?void 0:o[e.type.name];if(d)return l&&(s+=d({node:e,pos:n,parent:l,index:u,range:t})),!1;e.isText&&(s+=null==(c=null==e?void 0:e.text)?void 0:c.slice(Math.max(r,n)-n,i-n))}),s}function z(e,t){let n={from:0,to:e.content.size};return L(e,n,t)}function B(e){return Object.fromEntries(Object.entries(e.nodes).filter(e=>{let[,t]=e;return t.spec.toText}).map(e=>{let[t,n]=e;return[t,n.spec.toText]}))}function U(e,t){if("string"==typeof e){if(!t.marks[e])throw Error("There is no mark type named '".concat(e,"'. Maybe you forgot to add the extension?"));return t.marks[e]}return e}function H(e,t){let n=U(t,e.schema),{from:r,to:i,empty:a}=e.selection,o=[];a?(e.storedMarks&&o.push(...e.storedMarks),o.push(...e.selection.$head.marks())):e.doc.nodesBetween(r,i,e=>{o.push(...e.marks)});let s=o.find(e=>e.type.name===n.name);return s?{...s.attrs}:{}}function W(e,t){if("string"==typeof e){if(!t.nodes[e])throw Error("There is no node type named '".concat(e,"'. Maybe you forgot to add the extension?"));return t.nodes[e]}return e}function V(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function q(e,t){let n=V("string"==typeof t?t:t.name,e.schema);if("node"===n){let n=W(t,e.schema),{from:r,to:i}=e.selection,a=[];e.doc.nodesBetween(r,i,e=>{a.push(e)});let o=a.reverse().find(e=>e.type.name===n.name);return o?{...o.attrs}:{}}return"mark"===n?H(e,t):{}}function G(e){let{mapping:t,steps:n}=e,r=[];t.maps.forEach((e,i)=>{let a=[];if(e.ranges.length)e.forEach((e,t)=>{a.push({from:e,to:t})});else{let{from:e,to:t}=n[i];if(void 0===e||void 0===t)return;a.push({from:e,to:t})}a.forEach(e=>{let{from:n,to:a}=e,o=t.slice(i).map(n,-1),s=t.slice(i).map(a),l=t.invert().map(o,-1),u=t.invert().map(s);r.push({oldRange:{from:l,to:u},newRange:{from:o,to:s}})})});let i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:JSON.stringify,n={};return e.filter(e=>{let r=t(e);return!Object.prototype.hasOwnProperty.call(n,r)&&(n[r]=!0)})}(r);return 1===i.length?i:i.filter((e,t)=>!i.filter((e,n)=>n!==t).some(t=>e.oldRange.from>=t.oldRange.from&&e.oldRange.to<=t.oldRange.to&&e.newRange.from>=t.newRange.from&&e.newRange.to<=t.newRange.to))}function $(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function K(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{strict:!0},r=Object.keys(t);return!r.length||r.every(r=>n.strict?t[r]===e[r]:$(t[r])?t[r].test(e[r]):t[r]===e[r])}function Y(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e.find(e=>e.type===t&&K(Object.fromEntries(Object.keys(n).map(t=>[t,e.attrs[t]])),n))}function X(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return!!Y(e,t,n)}function Z(e,t,n){var r;if(!e||!t)return;let i=e.parent.childAfter(e.parentOffset);if(i.node&&i.node.marks.some(e=>e.type===t)||(i=e.parent.childBefore(e.parentOffset)),!i.node||!i.node.marks.some(e=>e.type===t)||(n=n||(null==(r=i.node.marks[0])?void 0:r.attrs),!Y([...i.node.marks],t,n)))return;let a=i.index,o=e.start()+i.offset,s=a+1,l=o+i.node.nodeSize;for(;a>0&&X([...e.parent.child(a-1).marks],t,n);)a-=1,o-=e.parent.child(a).nodeSize;for(;s<e.parent.childCount&&X([...e.parent.child(s).marks],t,n);)l+=e.parent.child(s).nodeSize,s+=1;return{from:o,to:l}}function J(e,t,n){let r=[];return e===t?n.resolve(e).marks().forEach(t=>{let i=Z(n.resolve(e),t.type);i&&r.push({mark:t,...i})}):n.nodesBetween(e,t,(e,t)=>{e&&(null==e?void 0:e.nodeSize)!==void 0&&r.push(...e.marks.map(n=>({from:t,to:t+e.nodeSize,mark:n})))}),r}var Q=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:20,i=e.doc.resolve(n),a=r,o=null;for(;a>0&&null===o;){let e=i.node(a);(null==e?void 0:e.type.name)===t?o=e:a-=1}return[o,a]};function ee(e,t){return t.nodes[e]||t.marks[e]||null}function et(e,t,n){return Object.fromEntries(Object.entries(n).filter(n=>{let[r]=n,i=e.find(e=>e.type===t&&e.name===r);return!!i&&i.attribute.keepOnSplit}))}var en=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n="",r=e.parentOffset;return e.parent.nodesBetween(Math.max(0,r-t),r,(e,t,i,a)=>{var o,s;let l=(null==(s=(o=e.type.spec).toText)?void 0:s.call(o,{node:e,pos:t,parent:i,index:a}))||e.textContent||"%leaf%";n+=e.isAtom&&!e.isText?l:l.slice(0,Math.max(0,r-t))}),n};function er(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{empty:r,ranges:i}=e.selection,a=t?U(t,e.schema):null;if(r)return!!(e.storedMarks||e.selection.$from.marks()).filter(e=>!a||a.name===e.type.name).find(e=>K(e.attrs,n,{strict:!1}));let o=0,s=[];if(i.forEach(t=>{let{$from:n,$to:r}=t,i=n.pos,a=r.pos;e.doc.nodesBetween(i,a,(e,t)=>{if(!e.isText&&!e.marks.length)return;let n=Math.max(i,t),r=Math.min(a,t+e.nodeSize);o+=r-n,s.push(...e.marks.map(e=>({mark:e,from:n,to:r})))})}),0===o)return!1;let l=s.filter(e=>!a||a.name===e.mark.type.name).filter(e=>K(e.mark.attrs,n,{strict:!1})).reduce((e,t)=>e+t.to-t.from,0),u=s.filter(e=>!a||e.mark.type!==a&&e.mark.type.excludes(a)).reduce((e,t)=>e+t.to-t.from,0);return(l>0?l+u:l)>=o}function ei(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{from:r,to:i,empty:a}=e.selection,o=t?W(t,e.schema):null,s=[];e.doc.nodesBetween(r,i,(e,t)=>{if(e.isText)return;let n=Math.max(r,t),a=Math.min(i,t+e.nodeSize);s.push({node:e,from:n,to:a})});let l=i-r,u=s.filter(e=>!o||o.name===e.node.type.name).filter(e=>K(e.node.attrs,n,{strict:!1}));return a?!!u.length:u.reduce((e,t)=>e+t.to-t.from,0)>=l}var ea=(e,t)=>{let{$from:n,$to:r,$anchor:i}=e.selection;if(t){let n=k(e=>e.type.name===t)(e.selection);if(!n)return!1;let r=e.doc.resolve(n.pos+1);return i.pos+1===r.end()}return!(r.parentOffset<r.parent.nodeSize-2)&&n.pos===r.pos},eo=e=>{let{$from:t,$to:n}=e.selection;return!(t.parentOffset>0)&&t.pos===n.pos};function es(e,t){return Array.isArray(t)?t.some(t=>("string"==typeof t?t:t.name)===e.name):t}function el(e,t){let{nodeExtensions:n}=T(t),r=n.find(t=>t.name===e);if(!r)return!1;let i={name:r.name,options:r.options,storage:r.storage},a=E(S(r,"group",i));return"string"==typeof a&&a.split(" ").includes("list")}function eu(e){var t;let{checkChildren:n=!0,ignoreWhitespace:r=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(r){if("hardBreak"===e.type.name)return!0;if(e.isText)return/^\s*$/m.test(null!=(t=e.text)?t:"")}if(e.isText)return!e.text;if(e.isAtom||e.isLeaf)return!1;if(0===e.content.childCount)return!0;if(n){let t=!0;return e.content.forEach(e=>{!1!==t&&(eu(e,{ignoreWhitespace:r,checkChildren:n})||(t=!1))}),t}return!1}function ec(e){return e instanceof t.NodeSelection}function ed(e){return e instanceof t.TextSelection}function eh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Math.min(Math.max(e,t),n)}function ep(e,t,n){let r=e.state.doc.content.size,i=eh(t,0,r),a=eh(n,0,r),o=e.coordsAtPos(i),s=e.coordsAtPos(a,-1),l=Math.min(o.top,s.top),u=Math.max(o.bottom,s.bottom),c=Math.min(o.left,s.left),d=Math.max(o.right,s.right),h={top:l,bottom:u,left:c,right:d,width:d-c,height:u-l,x:c,y:l};return{...h,toJSON:()=>h}}function ef(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!n)return null;let r=t.Selection.atStart(e),i=t.Selection.atEnd(e);if("start"===n||!0===n)return r;if("end"===n)return i;let a=r.from,o=i.to;return"all"===n?t.TextSelection.create(e,eh(0,a,o),eh(e.content.size,a,o)):t.TextSelection.create(e,eh(n,a,o),eh(n,a,o))}var em=class{constructor(e){this.find=e.find,this.handler=e.handler}};function eg(e){var t;let{editor:n,from:r,to:i,text:a,rules:o,plugin:s}=e,{view:l}=n;if(l.composing)return!1;let u=l.state.doc.resolve(r);if(u.parent.type.spec.code||(null==(t=u.nodeBefore||u.nodeAfter)?void 0:t.marks.find(e=>e.type.spec.code)))return!1;let h=!1,p=en(u)+a;return o.forEach(e=>{if(h)return;let t=((e,t)=>{if($(t))return t.exec(e);let n=t(e);if(!n)return null;let r=[n.text];return r.index=n.index,r.input=e,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r})(p,e.find);if(!t)return;let o=l.state.tr,u=c({state:l.state,transaction:o}),f={from:r-(t[0].length-a.length),to:i},{commands:m,chain:g,can:y}=new d({editor:n,state:u});null!==e.handler({state:u,range:f,match:t,commands:m,chain:g,can:y})&&o.steps.length&&(o.setMeta(s,{transform:o,from:r,to:i,text:a}),l.dispatch(o),h=!0)}),h}function ev(e){return"Object"===Object.prototype.toString.call(e).slice(8,-1)&&e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}var ey=class{get options(){return{...E(S(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...E(S(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.extend({...this.config,addOptions:()=>(function e(t,n){let r={...t};return ev(t)&&ev(n)&&Object.keys(n).forEach(i=>{ev(n[i])&&ev(t[i])?r[i]=e(t[i],n[i]):r[i]=n[i]}),r})(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new this.constructor({...this.config,...e});return t.parent=this,this.child=t,t.name="name"in e?e.name:t.parent.name,t}constructor(e={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...e},this.name=this.config.name}},eb=class e extends ey{static create(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new e("function"==typeof t?t():t)}static handleExit(e){let{editor:t,mark:n}=e,{tr:r}=t.state,i=t.state.selection.$from;if(i.pos===i.end()){let e=i.marks();if(!e.find(e=>(null==e?void 0:e.type.name)===n.name))return!1;let a=e.find(e=>(null==e?void 0:e.type.name)===n.name);return a&&r.removeStoredMark(a),r.insertText(" ",i.pos),t.view.dispatch(r),!0}return!1}configure(e){return super.configure(e)}extend(e){let t="function"==typeof e?e():e;return super.extend(t)}constructor(){super(...arguments),this.type="mark"}},ex=class{constructor(e){this.find=e.find,this.handler=e.handler}},ew=null,ek=class{get commands(){return this.extensions.reduce((e,t)=>{let n={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:this.editor,type:ee(t.name,this.schema)},r=S(t,"addCommands",n);return r?{...e,...r()}:e},{})}get plugins(){let{editor:e}=this;return O([...this.extensions].reverse()).map(n=>{let i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:e,type:ee(n.name,this.schema)},o=[],s=S(n,"addKeyboardShortcuts",i),l={};if("mark"===n.type&&S(n,"exitable",i)&&(l.ArrowRight=()=>eb.handleExit({editor:e,mark:n})),s){let t=Object.fromEntries(Object.entries(s()).map(t=>{let[n,r]=t;return[n,()=>r({editor:e})]}));l={...l,...t}}let u=(0,r.keymap)(l);o.push(u);let h=S(n,"addInputRules",i);if(es(n,e.options.enableInputRules)&&h){let n=h();if(n&&n.length){let r=function(e){let{editor:n,rules:r}=e,i=new t.Plugin({state:{init:()=>null,apply(e,t,o){let s=e.getMeta(i);if(s)return s;let l=e.getMeta("applyInputRules");return l&&setTimeout(()=>{let{text:e}=l;"string"==typeof e||(e=C(a.Fragment.from(e),o.schema));let{from:t}=l,s=t+e.length;eg({editor:n,from:t,to:s,text:e,rules:r,plugin:i})}),e.selectionSet||e.docChanged?null:t}},props:{handleTextInput:(e,t,a,o)=>eg({editor:n,from:t,to:a,text:o,rules:r,plugin:i}),handleDOMEvents:{compositionend:e=>(setTimeout(()=>{let{$cursor:t}=e.state.selection;t&&eg({editor:n,from:t.pos,to:t.pos,text:"",rules:r,plugin:i})}),!1)},handleKeyDown(e,t){if("Enter"!==t.key)return!1;let{$cursor:a}=e.state.selection;return!!a&&eg({editor:n,from:a.pos,to:a.pos,text:"\n",rules:r,plugin:i})}},isInputRules:!0});return i}({editor:e,rules:n}),i=Array.isArray(r)?r:[r];o.push(...i)}}let p=S(n,"addPasteRules",i);if(es(n,e.options.enablePasteRules)&&p){let n=p();if(n&&n.length){let r=function(e){let n,{editor:r,rules:i}=e,o=null,s=!1,l=!1,u="undefined"!=typeof ClipboardEvent?new ClipboardEvent("paste"):null;try{n="undefined"!=typeof DragEvent?new DragEvent("drop"):null}catch(e){n=null}let h=e=>{let{state:t,from:i,to:a,rule:o,pasteEvt:s}=e,l=t.tr;if(function(e){let{editor:t,state:n,from:r,to:i,rule:a,pasteEvent:o,dropEvent:s}=e,{commands:l,chain:u,can:c}=new d({editor:t,state:n}),h=[];return n.doc.nodesBetween(r,i,(e,t)=>{var d,p,f,m,g;if((null==(p=null==(d=e.type)?void 0:d.spec)?void 0:p.code)||!(e.isText||e.isTextblock||e.isInline))return;let y=null!=(g=null!=(m=null==(f=e.content)?void 0:f.size)?m:e.nodeSize)?g:0,b=Math.max(r,t),x=Math.min(i,t+y);b>=x||((e,t,n)=>{if($(t))return[...e.matchAll(t)];let r=t(e,n);return r?r.map(t=>{let n=[t.text];return n.index=t.index,n.input=e,n.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),n.push(t.replaceWith)),n}):[]})(e.isText?e.text||"":e.textBetween(b-t,x-t,void 0,""),a.find,o).forEach(e=>{if(void 0===e.index)return;let t=b+e.index+1,r=t+e[0].length,i={from:n.tr.mapping.map(t),to:n.tr.mapping.map(r)},d=a.handler({state:n,range:i,match:e,commands:l,chain:u,can:c,pasteEvent:o,dropEvent:s});h.push(d)})}),h.every(e=>null!==e)}({editor:r,state:c({state:t,transaction:l}),from:Math.max(i-1,0),to:a.b-1,rule:o,pasteEvent:s,dropEvent:n})&&l.steps.length){try{n="undefined"!=typeof DragEvent?new DragEvent("drop"):null}catch(e){n=null}return u="undefined"!=typeof ClipboardEvent?new ClipboardEvent("paste"):null,l}};return i.map(e=>new t.Plugin({view(e){let t=t=>{var n;(o=(null==(n=e.dom.parentElement)?void 0:n.contains(t.target))?e.dom.parentElement:null)&&(ew=r)},n=()=>{ew&&(ew=null)};return window.addEventListener("dragstart",t),window.addEventListener("dragend",n),{destroy(){window.removeEventListener("dragstart",t),window.removeEventListener("dragend",n)}}},props:{handleDOMEvents:{drop:(e,t)=>{if(l=o===e.dom.parentElement,n=t,!l){let e=ew;(null==e?void 0:e.isEditable)&&setTimeout(()=>{let t=e.state.selection;t&&e.commands.deleteRange({from:t.from,to:t.to})},10)}return!1},paste:(e,t)=>{var n;let r=null==(n=t.clipboardData)?void 0:n.getData("text/html");return u=t,s=!!(null==r?void 0:r.includes("data-pm-slice")),!1}}},appendTransaction:(t,n,r)=>{let i=t[0],o="paste"===i.getMeta("uiEvent")&&!s,c="drop"===i.getMeta("uiEvent")&&!l,d=i.getMeta("applyPasteRules"),p=!!d;if(!o&&!c&&!p)return;if(p){let{text:t}=d;"string"==typeof t||(t=C(a.Fragment.from(t),r.schema));let{from:n}=d,i=n+t.length;return h({rule:e,state:r,from:n,to:{b:i},pasteEvt:(e=>{var t;let n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return null==(t=n.clipboardData)||t.setData("text/html",e),n})(t)})}let f=n.doc.content.findDiffStart(r.doc.content),m=n.doc.content.findDiffEnd(r.doc.content);if("number"==typeof f&&m&&f!==m.b)return h({rule:e,state:r,from:f,to:m,pasteEvt:u})}}))}({editor:e,rules:n});o.push(...r)}}let f=S(n,"addProseMirrorPlugins",i);if(f){let e=f();o.push(...e)}return o}).flat()}get attributes(){return M(this.extensions)}get nodeViews(){let{editor:e}=this,{nodeExtensions:t}=T(this.extensions);return Object.fromEntries(t.filter(e=>!!S(e,"addNodeView")).map(t=>{let n=this.attributes.filter(e=>e.type===t.name),r={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:e,type:W(t.name,this.schema)},i=S(t,"addNodeView",r);return i?[t.name,(r,a,o,s,l)=>{let u=N(r,n);return i()({node:r,view:a,getPos:o,decorations:s,innerDecorations:l,editor:e,extension:t,HTMLAttributes:u})}]:[]}))}get markViews(){let{editor:e}=this,{markExtensions:t}=T(this.extensions);return Object.fromEntries(t.filter(e=>!!S(e,"addMarkView")).map(t=>{let n=this.attributes.filter(e=>e.type===t.name),r={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:e,type:U(t.name,this.schema)},i=S(t,"addMarkView",r);return i?[t.name,(r,a,o)=>{let s=N(r,n);return i()({mark:r,view:a,inline:o,editor:e,extension:t,HTMLAttributes:s,updateAttributes:t=>{tG(r,e,t)}})}]:[]}))}setupExtensions(){let e=this.extensions;this.editor.extensionStorage=Object.fromEntries(e.map(e=>[e.name,e.storage])),e.forEach(e=>{var t;let n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:ee(e.name,this.schema)};"mark"===e.type&&(null==(t=E(S(e,"keepOnSplit",n)))||t)&&this.splittableMarks.push(e.name);let r=S(e,"onBeforeCreate",n),i=S(e,"onCreate",n),a=S(e,"onUpdate",n),o=S(e,"onSelectionUpdate",n),s=S(e,"onTransaction",n),l=S(e,"onFocus",n),u=S(e,"onBlur",n),c=S(e,"onDestroy",n);r&&this.editor.on("beforeCreate",r),i&&this.editor.on("create",i),a&&this.editor.on("update",a),o&&this.editor.on("selectionUpdate",o),s&&this.editor.on("transaction",s),l&&this.editor.on("focus",l),u&&this.editor.on("blur",u),c&&this.editor.on("destroy",c)})}constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=j(e),this.schema=R(this.extensions,t),this.setupExtensions()}};ek.resolve=j,ek.sort=O,ek.flatten=_;var eS={};u(eS,{ClipboardTextSerializer:()=>eC,Commands:()=>tT,Delete:()=>tM,Drop:()=>tI,Editable:()=>tN,FocusEvents:()=>tP,Keymap:()=>tR,Paste:()=>tO,Tabindex:()=>tj,focusEventsPluginKey:()=>tD});var e_=class e extends ey{static create(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new e("function"==typeof t?t():t)}configure(e){return super.configure(e)}extend(e){let t="function"==typeof e?e():e;return super.extend(t)}constructor(){super(...arguments),this.type="extension"}},eC=e_.create({name:"clipboardTextSerializer",addOptions:()=>({blockSeparator:void 0}),addProseMirrorPlugins(){return[new t.Plugin({key:new t.PluginKey("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{let{editor:e}=this,{state:t,schema:n}=e,{doc:r,selection:i}=t,{ranges:a}=i,o=Math.min(...a.map(e=>e.$from.pos)),s=Math.max(...a.map(e=>e.$to.pos)),l=B(n);return L(r,{from:o,to:s},{...void 0!==this.options.blockSeparator?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),eA={};u(eA,{blur:()=>eE,clearContent:()=>eT,clearNodes:()=>eM,command:()=>eI,createParagraphNear:()=>eN,cut:()=>eD,deleteCurrentNode:()=>eP,deleteNode:()=>eR,deleteRange:()=>eO,deleteSelection:()=>ej,enter:()=>eF,exitCode:()=>eL,extendMarkRange:()=>ez,first:()=>eB,focus:()=>eW,forEach:()=>eV,insertContent:()=>eq,insertContentAt:()=>eG,joinBackward:()=>eY,joinDown:()=>eK,joinForward:()=>eX,joinItemBackward:()=>eZ,joinItemForward:()=>eJ,joinTextblockBackward:()=>eQ,joinTextblockForward:()=>e0,joinUp:()=>e$,keyboardShortcut:()=>e2,lift:()=>e3,liftEmptyBlock:()=>e5,liftListItem:()=>e4,newlineInCode:()=>e9,resetAttributes:()=>e6,scrollIntoView:()=>e7,selectAll:()=>te,selectNodeBackward:()=>tt,selectNodeForward:()=>tn,selectParentNode:()=>tr,selectTextblockEnd:()=>ti,selectTextblockStart:()=>ta,setContent:()=>to,setMark:()=>ts,setMeta:()=>tl,setNode:()=>tu,setNodeSelection:()=>tc,setTextSelection:()=>td,sinkListItem:()=>th,splitBlock:()=>tf,splitListItem:()=>tm,toggleList:()=>ty,toggleMark:()=>tb,toggleNode:()=>tx,toggleWrap:()=>tw,undoInputRule:()=>tk,unsetAllMarks:()=>tS,unsetMark:()=>t_,updateAttributes:()=>tC,wrapIn:()=>tA,wrapInList:()=>tE});var eE=()=>e=>{let{editor:t,view:n}=e;return requestAnimationFrame(()=>{var e;t.isDestroyed||(n.dom.blur(),null==(e=null==window?void 0:window.getSelection())||e.removeAllRanges())}),!0},eT=function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];return t=>{let{commands:n}=t;return n.setContent("",{emitUpdate:e})}},eM=()=>e=>{let{state:t,tr:n,dispatch:r}=e,{selection:a}=n,{ranges:o}=a;return!r||(o.forEach(e=>{let{$from:r,$to:a}=e;t.doc.nodesBetween(r.pos,a.pos,(e,t)=>{if(e.type.isText)return;let{doc:r,mapping:a}=n,o=r.resolve(a.map(t)),s=r.resolve(a.map(t+e.nodeSize)),l=o.blockRange(s);if(!l)return;let u=(0,i.liftTarget)(l);if(e.type.isTextblock){let{defaultType:e}=o.parent.contentMatchAt(o.index());n.setNodeMarkup(l.start,e)}(u||0===u)&&n.lift(l,u)})}),!0)},eI=e=>t=>e(t),eN=()=>e=>{let{state:t,dispatch:n}=e;return(0,o.createParagraphNear)(t,n)},eD=(e,n)=>r=>{let{editor:i,tr:a}=r,{state:o}=i,s=o.doc.slice(e.from,e.to);a.deleteRange(e.from,e.to);let l=a.mapping.map(n);return a.insert(l,s.content),a.setSelection(new t.TextSelection(a.doc.resolve(Math.max(l-1,0)))),!0},eP=()=>e=>{let{tr:t,dispatch:n}=e,{selection:r}=t,i=r.$anchor.node();if(i.content.size>0)return!1;let a=t.selection.$anchor;for(let e=a.depth;e>0;e-=1)if(a.node(e).type===i.type){if(n){let n=a.before(e),r=a.after(e);t.delete(n,r).scrollIntoView()}return!0}return!1},eR=e=>t=>{let{tr:n,state:r,dispatch:i}=t,a=W(e,r.schema),o=n.selection.$anchor;for(let e=o.depth;e>0;e-=1)if(o.node(e).type===a){if(i){let t=o.before(e),r=o.after(e);n.delete(t,r).scrollIntoView()}return!0}return!1},eO=e=>t=>{let{tr:n,dispatch:r}=t,{from:i,to:a}=e;return r&&n.delete(i,a),!0},ej=()=>e=>{let{state:t,dispatch:n}=e;return(0,o.deleteSelection)(t,n)},eF=()=>e=>{let{commands:t}=e;return t.keyboardShortcut("Enter")},eL=()=>e=>{let{state:t,dispatch:n}=e;return(0,o.exitCode)(t,n)},ez=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r=>{let{tr:i,state:a,dispatch:o}=r,s=U(e,a.schema),{doc:l,selection:u}=i,{$from:c,from:d,to:h}=u;if(o){let e=Z(c,s,n);if(e&&e.from<=d&&e.to>=h){let n=t.TextSelection.create(l,e.from,e.to);i.setSelection(n)}}return!0}},eB=e=>t=>{let n="function"==typeof e?e(t):e;for(let e=0;e<n.length;e+=1)if(n[e](t))return!0;return!1};function eU(){return"Android"===navigator.platform||/android/i.test(navigator.userAgent)}function eH(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var eW=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{editor:r,view:i,tr:a,dispatch:o}=n;t={scrollIntoView:!0,...t};let s=()=>{(eH()||eU())&&i.dom.focus(),requestAnimationFrame(()=>{!r.isDestroyed&&(i.focus(),(null==t?void 0:t.scrollIntoView)&&r.commands.scrollIntoView())})};if(i.hasFocus()&&null===e||!1===e)return!0;if(o&&null===e&&!ed(r.state.selection))return s(),!0;let l=ef(a.doc,e)||r.state.selection,u=r.state.selection.eq(l);return o&&(u||a.setSelection(l),u&&a.storedMarks&&a.setStoredMarks(a.storedMarks),s()),!0}},eV=(e,t)=>n=>e.every((e,r)=>t(e,{...n,index:r})),eq=(e,t)=>n=>{let{tr:r,commands:i}=n;return i.insertContentAt({from:r.selection.from,to:r.selection.to},e,t)},eG=(e,n,r)=>o=>{var s;let{tr:l,dispatch:u,editor:c}=o;if(u){let o,u;r={parseOptions:c.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...r};let{selection:d}=c.state,h=e=>{c.emit("contentError",{editor:c,error:e,disableCollaboration:()=>{"collaboration"in c.storage&&"object"==typeof c.storage.collaboration&&c.storage.collaboration&&(c.storage.collaboration.isDisabled=!0)}})},p={preserveWhitespace:"full",...r.parseOptions};if(!r.errorOnInvalidContent&&!c.options.enableContentCheck&&c.options.emitContentError)try{g(n,c.schema,{parseOptions:p,errorOnInvalidContent:!0})}catch(e){h(e)}try{o=g(n,c.schema,{parseOptions:p,errorOnInvalidContent:null!=(s=r.errorOnInvalidContent)?s:c.options.enableContentCheck})}catch(e){return h(e),!1}let{from:f,to:m}="number"==typeof e?{from:e,to:e}:{from:e.from,to:e.to},y=!0,b=!0;if((!("type"in o)?o:[o]).forEach(e=>{e.check(),y=!!y&&e.isText&&0===e.marks.length,b=!!b&&e.isBlock}),f===m&&b){let{parent:e}=l.doc.resolve(f);!e.isTextblock||e.type.spec.code||e.childCount||(f-=1,m+=1)}if(y){if(Array.isArray(n))u=n.map(e=>e.text||"").join("");else if(n instanceof a.Fragment){let e="";n.forEach(t=>{t.text&&(e+=t.text)}),u=e}else u="object"==typeof n&&n&&n.text?n.text:n;l.insertText(u,f,m)}else{u=o;let e=0===d.$from.parentOffset,t=d.$from.node().isText||d.$from.node().isTextblock,n=d.$from.node().content.size>0;e&&t&&n&&(f=Math.max(0,f-1)),l.replaceWith(f,m,u)}r.updateSelection&&function(e,n,r){let a=e.steps.length-1;if(a<n)return;let o=e.steps[a];if(!(o instanceof i.ReplaceStep||o instanceof i.ReplaceAroundStep))return;let s=e.mapping.maps[a],l=0;s.forEach((e,t,n,r)=>{0===l&&(l=r)}),e.setSelection(t.Selection.near(e.doc.resolve(l),-1))}(l,l.steps.length-1,0),r.applyInputRules&&l.setMeta("applyInputRules",{from:f,text:u}),r.applyPasteRules&&l.setMeta("applyPasteRules",{from:f,text:u})}return!0},e$=()=>e=>{let{state:t,dispatch:n}=e;return(0,o.joinUp)(t,n)},eK=()=>e=>{let{state:t,dispatch:n}=e;return(0,o.joinDown)(t,n)},eY=()=>e=>{let{state:t,dispatch:n}=e;return(0,o.joinBackward)(t,n)},eX=()=>e=>{let{state:t,dispatch:n}=e;return(0,o.joinForward)(t,n)},eZ=()=>e=>{let{state:t,dispatch:n,tr:r}=e;try{let e=(0,i.joinPoint)(t.doc,t.selection.$from.pos,-1);if(null==e)return!1;return r.join(e,2),n&&n(r),!0}catch(e){return!1}},eJ=()=>e=>{let{state:t,dispatch:n,tr:r}=e;try{let e=(0,i.joinPoint)(t.doc,t.selection.$from.pos,1);if(null==e)return!1;return r.join(e,2),n&&n(r),!0}catch(e){return!1}},eQ=()=>e=>{let{state:t,dispatch:n}=e;return(0,o.joinTextblockBackward)(t,n)},e0=()=>e=>{let{state:t,dispatch:n}=e;return(0,o.joinTextblockForward)(t,n)};function e1(){return"undefined"!=typeof navigator&&/Mac/.test(navigator.platform)}var e2=e=>t=>{let{editor:n,view:r,tr:i,dispatch:a}=t,o=(function(e){let t,n,r,i,a=e.split(/-(?!$)/),o=a[a.length-1];"Space"===o&&(o=" ");for(let e=0;e<a.length-1;e+=1){let o=a[e];if(/^(cmd|meta|m)$/i.test(o))i=!0;else if(/^a(lt)?$/i.test(o))t=!0;else if(/^(c|ctrl|control)$/i.test(o))n=!0;else if(/^s(hift)?$/i.test(o))r=!0;else if(/^mod$/i.test(o))eH()||e1()?i=!0:n=!0;else throw Error("Unrecognized modifier name: ".concat(o))}return t&&(o="Alt-".concat(o)),n&&(o="Ctrl-".concat(o)),i&&(o="Meta-".concat(o)),r&&(o="Shift-".concat(o)),o})(e).split(/-(?!$)/),s=o.find(e=>!["Alt","Ctrl","Meta","Shift"].includes(e)),l=new KeyboardEvent("keydown",{key:"Space"===s?" ":s,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),u=n.captureTransaction(()=>{r.someProp("handleKeyDown",e=>e(r,l))});return null==u||u.steps.forEach(e=>{let t=e.map(i.mapping);t&&a&&i.maybeStep(t)}),!0},e3=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{state:r,dispatch:i}=n,a=W(e,r.schema);return!!ei(r,a,t)&&(0,o.lift)(r,i)}},e5=()=>e=>{let{state:t,dispatch:n}=e;return(0,o.liftEmptyBlock)(t,n)},e4=e=>t=>{let{state:n,dispatch:r}=t,i=W(e,n.schema);return(0,s.liftListItem)(i)(n,r)},e9=()=>e=>{let{state:t,dispatch:n}=e;return(0,o.newlineInCode)(t,n)};function e8(e,t){let n="string"==typeof t?[t]:t;return Object.keys(e).reduce((t,r)=>(n.includes(r)||(t[r]=e[r]),t),{})}var e6=(e,t)=>n=>{let{tr:r,state:i,dispatch:a}=n,o=null,s=null,l=V("string"==typeof e?e:e.name,i.schema);return!!l&&("node"===l&&(o=W(e,i.schema)),"mark"===l&&(s=U(e,i.schema)),a&&r.selection.ranges.forEach(e=>{i.doc.nodesBetween(e.$from.pos,e.$to.pos,(e,n)=>{o&&o===e.type&&r.setNodeMarkup(n,void 0,e8(e.attrs,t)),s&&e.marks.length&&e.marks.forEach(i=>{s===i.type&&r.addMark(n,n+e.nodeSize,s.create(e8(i.attrs,t)))})})}),!0)},e7=()=>e=>{let{tr:t,dispatch:n}=e;return n&&t.scrollIntoView(),!0},te=()=>e=>{let{tr:n,dispatch:r}=e;if(r){let e=new t.AllSelection(n.doc);n.setSelection(e)}return!0},tt=()=>e=>{let{state:t,dispatch:n}=e;return(0,o.selectNodeBackward)(t,n)},tn=()=>e=>{let{state:t,dispatch:n}=e;return(0,o.selectNodeForward)(t,n)},tr=()=>e=>{let{state:t,dispatch:n}=e;return(0,o.selectParentNode)(t,n)},ti=()=>e=>{let{state:t,dispatch:n}=e;return(0,o.selectTextblockEnd)(t,n)},ta=()=>e=>{let{state:t,dispatch:n}=e;return(0,o.selectTextblockStart)(t,n)},to=function(e){let{errorOnInvalidContent:t,emitUpdate:n=!0,parseOptions:r={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i=>{let{editor:a,tr:o,dispatch:s,commands:l}=i,{doc:u}=o;if("full"!==r.preserveWhitespace){let i=y(e,a.schema,r,{errorOnInvalidContent:null!=t?t:a.options.enableContentCheck});return s&&o.replaceWith(0,u.content.size,i).setMeta("preventUpdate",!n),!0}return s&&o.setMeta("preventUpdate",!n),l.insertContentAt({from:0,to:u.content.size},e,{parseOptions:r,errorOnInvalidContent:null!=t?t:a.options.enableContentCheck})}},ts=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{tr:r,state:i,dispatch:a}=n,{selection:o}=r,{empty:s,ranges:l}=o,u=U(e,i.schema);if(a)if(s){let e=H(i,u);r.addStoredMark(u.create({...e,...t}))}else l.forEach(e=>{let n=e.$from.pos,a=e.$to.pos;i.doc.nodesBetween(n,a,(e,i)=>{let o=Math.max(i,n),s=Math.min(i+e.nodeSize,a);e.marks.find(e=>e.type===u)?e.marks.forEach(e=>{u===e.type&&r.addMark(o,s,u.create({...e.attrs,...t}))}):r.addMark(o,s,u.create(t))})});return function(e,t,n){var r;let{selection:i}=t,a=null;if(ed(i)&&(a=i.$cursor),a){let t=null!=(r=e.storedMarks)?r:a.marks();return a.parent.type.allowsMarkType(n)&&(!!n.isInSet(t)||!t.some(e=>e.type.excludes(n)))}let{ranges:o}=i;return o.some(t=>{let{$from:r,$to:i}=t,a=0===r.depth&&e.doc.inlineContent&&e.doc.type.allowsMarkType(n);return e.doc.nodesBetween(r.pos,i.pos,(e,t,r)=>{if(a)return!1;if(e.isInline){let t=!r||r.type.allowsMarkType(n),i=!!n.isInSet(e.marks)||!e.marks.some(e=>e.type.excludes(n));a=t&&i}return!a}),a})}(i,r,u)}},tl=(e,t)=>n=>{let{tr:r}=n;return r.setMeta(e,t),!0},tu=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let r,{state:i,dispatch:a,chain:s}=n,l=W(e,i.schema);return(i.selection.$anchor.sameParent(i.selection.$head)&&(r=i.selection.$anchor.parent.attrs),l.isTextblock)?s().command(e=>{let{commands:n}=e;return!!(0,o.setBlockType)(l,{...r,...t})(i)||n.clearNodes()}).command(e=>{let{state:n}=e;return(0,o.setBlockType)(l,{...r,...t})(n,a)}).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)}},tc=e=>n=>{let{tr:r,dispatch:i}=n;if(i){let{doc:n}=r,i=eh(e,0,n.content.size),a=t.NodeSelection.create(n,i);r.setSelection(a)}return!0},td=e=>n=>{let{tr:r,dispatch:i}=n;if(i){let{doc:n}=r,{from:i,to:a}="number"==typeof e?{from:e,to:e}:e,o=t.TextSelection.atStart(n).from,s=t.TextSelection.atEnd(n).to,l=eh(i,o,s),u=eh(a,o,s),c=t.TextSelection.create(n,l,u);r.setSelection(c)}return!0},th=e=>t=>{let{state:n,dispatch:r}=t,i=W(e,n.schema);return(0,s.sinkListItem)(i)(n,r)};function tp(e,t){let n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){let r=n.filter(e=>null==t?void 0:t.includes(e.type.name));e.tr.ensureMarks(r)}}var tf=function(){let{keepMarks:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n=>{let{tr:r,state:a,dispatch:o,editor:s}=n,{selection:l,doc:u}=r,{$from:c,$to:d}=l,h=et(s.extensionManager.attributes,c.node().type.name,c.node().attrs);if(l instanceof t.NodeSelection&&l.node.isBlock)return!!c.parentOffset&&!!(0,i.canSplit)(u,c.pos)&&(o&&(e&&tp(a,s.extensionManager.splittableMarks),r.split(c.pos).scrollIntoView()),!0);if(!c.parent.isBlock)return!1;let p=d.parentOffset===d.parent.content.size,f=0===c.depth?void 0:function(e){for(let t=0;t<e.edgeCount;t+=1){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}(c.node(-1).contentMatchAt(c.indexAfter(-1))),m=p&&f?[{type:f,attrs:h}]:void 0,g=(0,i.canSplit)(r.doc,r.mapping.map(c.pos),1,m);if(!m&&!g&&(0,i.canSplit)(r.doc,r.mapping.map(c.pos),1,f?[{type:f}]:void 0)&&(g=!0,m=f?[{type:f,attrs:h}]:void 0),o){if(g&&(l instanceof t.TextSelection&&r.deleteSelection(),r.split(r.mapping.map(c.pos),1,m),f&&!p&&!c.parentOffset&&c.parent.type!==f)){let e=r.mapping.map(c.before()),t=r.doc.resolve(e);c.node(-1).canReplaceWith(t.index(),t.index()+1,f)&&r.setNodeMarkup(r.mapping.map(c.before()),f)}e&&tp(a,s.extensionManager.splittableMarks),r.scrollIntoView()}return g}},tm=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r=>{var o;let{tr:s,state:l,dispatch:u,editor:c}=r,d=W(e,l.schema),{$from:h,$to:p}=l.selection,f=l.selection.node;if(f&&f.isBlock||h.depth<2||!h.sameParent(p))return!1;let m=h.node(-1);if(m.type!==d)return!1;let g=c.extensionManager.attributes;if(0===h.parent.content.size&&h.node(-1).childCount===h.indexAfter(-1)){if(2===h.depth||h.node(-3).type!==d||h.index(-2)!==h.node(-2).childCount-1)return!1;if(u){let e=a.Fragment.empty,r=h.index(-1)?1:h.index(-2)?2:3;for(let t=h.depth-r;t>=h.depth-3;t-=1)e=a.Fragment.from(h.node(t).copy(e));let i=h.indexAfter(-1)<h.node(-2).childCount?1:h.indexAfter(-2)<h.node(-3).childCount?2:3,l={...et(g,h.node().type.name,h.node().attrs),...n},u=(null==(o=d.contentMatch.defaultType)?void 0:o.createAndFill(l))||void 0;e=e.append(a.Fragment.from(d.createAndFill(null,u)||void 0));let c=h.before(h.depth-(r-1));s.replace(c,h.after(-i),new a.Slice(e,4-r,0));let p=-1;s.doc.nodesBetween(c,s.doc.content.size,(e,t)=>{if(p>-1)return!1;e.isTextblock&&0===e.content.size&&(p=t+1)}),p>-1&&s.setSelection(t.TextSelection.near(s.doc.resolve(p))),s.scrollIntoView()}return!0}let y=p.pos===h.end()?m.contentMatchAt(0).defaultType:null,b={...et(g,m.type.name,m.attrs),...n},x={...et(g,h.node().type.name,h.node().attrs),...n};s.delete(h.pos,p.pos);let w=y?[{type:d,attrs:b},{type:y,attrs:x}]:[{type:d,attrs:b}];if(!(0,i.canSplit)(s.doc,h.pos,2))return!1;if(u){let{selection:e,storedMarks:t}=l,{splittableMarks:n}=c.extensionManager,r=t||e.$to.parentOffset&&e.$from.marks();if(s.split(h.pos,2,w).scrollIntoView(),!r||!u)return!0;let i=r.filter(e=>n.includes(e.type.name));s.ensureMarks(i)}return!0}},tg=(e,t)=>{let n=k(e=>e.type===t)(e.selection);if(!n)return!0;let r=e.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(void 0===r)return!0;let a=e.doc.nodeAt(r);return!(n.node.type===(null==a?void 0:a.type)&&(0,i.canJoin)(e.doc,n.pos))||(e.join(n.pos),!0)},tv=(e,t)=>{let n=k(e=>e.type===t)(e.selection);if(!n)return!0;let r=e.doc.resolve(n.start).after(n.depth);if(void 0===r)return!0;let a=e.doc.nodeAt(r);return!(n.node.type===(null==a?void 0:a.type)&&(0,i.canJoin)(e.doc,r))||(e.join(r),!0)},ty=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return i=>{let{editor:a,tr:o,state:s,dispatch:l,chain:u,commands:c,can:d}=i,{extensions:h,splittableMarks:p}=a.extensionManager,f=W(e,s.schema),m=W(t,s.schema),{selection:g,storedMarks:y}=s,{$from:b,$to:x}=g,w=b.blockRange(x),S=y||g.$to.parentOffset&&g.$from.marks();if(!w)return!1;let _=k(e=>el(e.type.name,h))(g);if(w.depth>=1&&_&&w.depth-_.depth<=1){if(_.node.type===f)return c.liftListItem(m);if(el(_.node.type.name,h)&&f.validContent(_.node.content)&&l)return u().command(()=>(o.setNodeMarkup(_.pos,f),!0)).command(()=>tg(o,f)).command(()=>tv(o,f)).run()}return n&&S&&l?u().command(()=>{let e=d().wrapInList(f,r),t=S.filter(e=>p.includes(e.type.name));return o.ensureMarks(t),!!e||c.clearNodes()}).wrapInList(f,r).command(()=>tg(o,f)).command(()=>tv(o,f)).run():u().command(()=>!!d().wrapInList(f,r)||c.clearNodes()).wrapInList(f,r).command(()=>tg(o,f)).command(()=>tv(o,f)).run()}},tb=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=>{let{state:i,commands:a}=r,{extendEmptyMarkRange:o=!1}=n,s=U(e,i.schema);return er(i,s,t)?a.unsetMark(s,{extendEmptyMarkRange:o}):a.setMark(s,t)}},tx=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=>{let i,{state:a,commands:o}=r,s=W(e,a.schema),l=W(t,a.schema),u=ei(a,s,n);return(a.selection.$anchor.sameParent(a.selection.$head)&&(i=a.selection.$anchor.parent.attrs),u)?o.setNode(l,i):o.setNode(s,{...i,...n})}},tw=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{state:r,commands:i}=n,a=W(e,r.schema);return ei(r,a,t)?i.lift(a):i.wrapIn(a,t)}},tk=()=>e=>{let{state:t,dispatch:n}=e,r=t.plugins;for(let e=0;e<r.length;e+=1){let i,a=r[e];if(a.spec.isInputRules&&(i=a.getState(t))){if(n){let e=t.tr,n=i.transform;for(let t=n.steps.length-1;t>=0;t-=1)e.step(n.steps[t].invert(n.docs[t]));if(i.text){let n=e.doc.resolve(i.from).marks();e.replaceWith(i.from,i.to,t.schema.text(i.text,n))}else e.delete(i.from,i.to)}return!0}}return!1},tS=()=>e=>{let{tr:t,dispatch:n}=e,{selection:r}=t,{empty:i,ranges:a}=r;return!!i||(n&&a.forEach(e=>{t.removeMark(e.$from.pos,e.$to.pos)}),!0)},t_=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{var r;let{tr:i,state:a,dispatch:o}=n,{extendEmptyMarkRange:s=!1}=t,{selection:l}=i,u=U(e,a.schema),{$from:c,empty:d,ranges:h}=l;if(!o)return!0;if(d&&s){let{from:e,to:t}=l,n=null==(r=c.marks().find(e=>e.type===u))?void 0:r.attrs,a=Z(c,u,n);a&&(e=a.from,t=a.to),i.removeMark(e,t,u)}else h.forEach(e=>{i.removeMark(e.$from.pos,e.$to.pos,u)});return i.removeStoredMark(u),!0}},tC=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{tr:r,state:i,dispatch:a}=n,o=null,s=null,l=V("string"==typeof e?e:e.name,i.schema);return!!l&&("node"===l&&(o=W(e,i.schema)),"mark"===l&&(s=U(e,i.schema)),a&&r.selection.ranges.forEach(e=>{let n,a,l,u,c=e.$from.pos,d=e.$to.pos;r.selection.empty?i.doc.nodesBetween(c,d,(e,t)=>{o&&o===e.type&&(l=Math.max(t,c),u=Math.min(t+e.nodeSize,d),n=t,a=e)}):i.doc.nodesBetween(c,d,(e,i)=>{i<c&&o&&o===e.type&&(l=Math.max(i,c),u=Math.min(i+e.nodeSize,d),n=i,a=e),i>=c&&i<=d&&(o&&o===e.type&&r.setNodeMarkup(i,void 0,{...e.attrs,...t}),s&&e.marks.length&&e.marks.forEach(n=>{if(s===n.type){let a=Math.max(i,c),o=Math.min(i+e.nodeSize,d);r.addMark(a,o,s.create({...n.attrs,...t}))}}))}),a&&(void 0!==n&&r.setNodeMarkup(n,void 0,{...a.attrs,...t}),s&&a.marks.length&&a.marks.forEach(e=>{s===e.type&&r.addMark(l,u,s.create({...e.attrs,...t}))}))}),!0)}},tA=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{state:r,dispatch:i}=n,a=W(e,r.schema);return(0,o.wrapIn)(a,t)(r,i)}},tE=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{state:r,dispatch:i}=n,a=W(e,r.schema);return(0,s.wrapInList)(a,t)(r,i)}},tT=e_.create({name:"commands",addCommands:()=>({...eA})}),tM=e_.create({name:"delete",onUpdate(e){var t,n,r;let{transaction:a,appendedTransactions:o}=e,s=()=>{var e,t,n,r;if(null!=(r=null==(n=null==(t=null==(e=this.editor.options.coreExtensionOptions)?void 0:e.delete)?void 0:t.filterTransaction)?void 0:n.call(t,a))?r:a.getMeta("y-sync$"))return;let s=p(a.before,[a,...o]);G(s).forEach(e=>{s.mapping.mapResult(e.oldRange.from).deletedAfter&&s.mapping.mapResult(e.oldRange.to).deletedBefore&&s.before.nodesBetween(e.oldRange.from,e.oldRange.to,(t,n)=>{let r=n+t.nodeSize-2,i=e.oldRange.from<=n&&r<=e.oldRange.to;this.editor.emit("delete",{type:"node",node:t,from:n,to:r,newFrom:s.mapping.map(n),newTo:s.mapping.map(r),deletedRange:e.oldRange,newRange:e.newRange,partial:!i,editor:this.editor,transaction:a,combinedTransform:s})})});let l=s.mapping;s.steps.forEach((e,t)=>{var n,r;if(e instanceof i.RemoveMarkStep){let i=l.slice(t).map(e.from,-1),o=l.slice(t).map(e.to),u=l.invert().map(i,-1),c=l.invert().map(o),d=null==(n=s.doc.nodeAt(i-1))?void 0:n.marks.some(t=>t.eq(e.mark)),h=null==(r=s.doc.nodeAt(o))?void 0:r.marks.some(t=>t.eq(e.mark));this.editor.emit("delete",{type:"mark",mark:e.mark,from:e.from,to:e.to,deletedRange:{from:u,to:c},newRange:{from:i,to:o},partial:!!(h||d),editor:this.editor,transaction:a,combinedTransform:s})}})};null==(r=null==(n=null==(t=this.editor.options.coreExtensionOptions)?void 0:t.delete)?void 0:n.async)||r?setTimeout(s,0):s()}}),tI=e_.create({name:"drop",addProseMirrorPlugins(){return[new t.Plugin({key:new t.PluginKey("tiptapDrop"),props:{handleDrop:(e,t,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:t,slice:n,moved:r})}}})]}}),tN=e_.create({name:"editable",addProseMirrorPlugins(){return[new t.Plugin({key:new t.PluginKey("editable"),props:{editable:()=>this.editor.options.editable}})]}}),tD=new t.PluginKey("focusEvents"),tP=e_.create({name:"focusEvents",addProseMirrorPlugins(){let{editor:e}=this;return[new t.Plugin({key:tD,props:{handleDOMEvents:{focus:(t,n)=>{e.isFocused=!0;let r=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1},blur:(t,n)=>{e.isFocused=!1;let r=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1}}}})]}}),tR=e_.create({name:"keymap",addKeyboardShortcuts(){let e=()=>this.editor.commands.first(e=>{let{commands:n}=e;return[()=>n.undoInputRule(),()=>n.command(e=>{let{tr:r}=e,{selection:i,doc:a}=r,{empty:o,$anchor:s}=i,{pos:l,parent:u}=s,c=s.parent.isTextblock&&l>0?r.doc.resolve(l-1):s,d=c.parent.type.spec.isolating,h=s.pos-s.parentOffset,p=d&&1===c.parent.childCount?h===s.pos:t.Selection.atStart(a).from===l;return!!o&&!!u.type.isTextblock&&!u.textContent.length&&!!p&&(!p||"paragraph"!==s.parent.type.name)&&n.clearNodes()}),()=>n.deleteSelection(),()=>n.joinBackward(),()=>n.selectNodeBackward()]}),n=()=>this.editor.commands.first(e=>{let{commands:t}=e;return[()=>t.deleteSelection(),()=>t.deleteCurrentNode(),()=>t.joinForward(),()=>t.selectNodeForward()]}),r={Enter:()=>this.editor.commands.first(e=>{let{commands:t}=e;return[()=>t.newlineInCode(),()=>t.createParagraphNear(),()=>t.liftEmptyBlock(),()=>t.splitBlock()]}),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:n,"Mod-Delete":n,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},a={...r,"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":n,"Ctrl-Alt-Backspace":n,"Alt-Delete":n,"Alt-d":n,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return eH()||e1()?a:i},addProseMirrorPlugins(){return[new t.Plugin({key:new t.PluginKey("clearDocument"),appendTransaction:(e,n,r)=>{if(e.some(e=>e.getMeta("composition")))return;let i=e.some(e=>e.docChanged)&&!n.doc.eq(r.doc),a=e.some(e=>e.getMeta("preventClearDocument"));if(!i||a)return;let{empty:o,from:s,to:l}=n.selection,u=t.Selection.atStart(n.doc).from,h=t.Selection.atEnd(n.doc).to;if(o||s!==u||l!==h||!eu(r.doc))return;let p=r.tr,f=c({state:r,transaction:p}),{commands:m}=new d({editor:this.editor,state:f});if(m.clearNodes(),p.steps.length)return p}})]}}),tO=e_.create({name:"paste",addProseMirrorPlugins(){return[new t.Plugin({key:new t.PluginKey("tiptapPaste"),props:{handlePaste:(e,t,n)=>{this.editor.emit("paste",{editor:this.editor,event:t,slice:n})}}})]}}),tj=e_.create({name:"tabindex",addProseMirrorPlugins(){return[new t.Plugin({key:new t.PluginKey("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),tF=class e{get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return null!=(e=this.actualDepth)?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,n=this.to;if(this.isBlock){if(0===this.content.size)return void console.error("You cant set content on a block node. Tried to set content on ".concat(this.name," at ").concat(this.pos));t=this.from+1,n=this.to-1}this.editor.commands.insertContentAt({from:t,to:n},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+ +!this.node.isText}get parent(){if(0===this.depth)return null;let t=this.resolvedPos.start(this.resolvedPos.depth-1);return new e(this.resolvedPos.doc.resolve(t),this.editor)}get before(){let t=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.from-3)),new e(t,this.editor)}get after(){let t=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.to+3)),new e(t,this.editor)}get children(){let t=[];return this.node.content.forEach((n,r)=>{let i=n.isBlock&&!n.isTextblock,a=n.isAtom&&!n.isText,o=this.pos+r+ +!a;if(o<0||o>this.resolvedPos.doc.nodeSize-2)return;let s=this.resolvedPos.doc.resolve(o);if(!i&&s.depth<=this.depth)return;let l=new e(s,this.editor,i,i?n:null);i&&(l.actualDepth=this.depth+1),t.push(new e(s,this.editor,i,i?n:null))}),t}get firstChild(){return this.children[0]||null}get lastChild(){let e=this.children;return e[e.length-1]||null}closest(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,r=this.parent;for(;r&&!n;){if(r.node.type.name===e)if(Object.keys(t).length>0){let e=r.node.attrs,n=Object.keys(t);for(let r=0;r<n.length;r+=1){let i=n[r];if(e[i]!==t[i])break}}else n=r;r=r.parent}return n}querySelector(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[];if(!this.children||0===this.children.length)return r;let i=Object.keys(t);return this.children.forEach(a=>{(!n||!(r.length>0))&&(a.node.type.name===e&&i.every(e=>t[e]===a.node.attrs[e])&&r.push(a),n&&r.length>0||(r=r.concat(a.querySelectorAll(e,t,n))))}),r}setAttribute(e){let{tr:t}=this.editor.state;t.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(t)}constructor(e,t,n=!1,r=null){this.currentNode=null,this.actualDepth=null,this.isBlock=n,this.resolvedPos=e,this.editor=t,this.currentNode=r}},tL=class extends h{mount(e){if("undefined"==typeof document)throw Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(e),this.emit("mount",{editor:this}),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){let e=this.editorView.dom;(null==e?void 0:e.editor)&&delete e.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css)try{"function"==typeof this.css.remove?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(e){console.warn("Failed to remove CSS element:",e)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&"undefined"!=typeof document&&(this.css=function(e,t,n){let r=document.querySelector("style[data-tiptap-style".concat("","]"));if(null!==r)return r;let i=document.createElement("style");return t&&i.setAttribute("nonce",t),i.setAttribute("data-tiptap-style".concat(""),""),i.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(i),i}('.ProseMirror {\n  position: relative;\n}\n\n.ProseMirror {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  white-space: break-spaces;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n  font-feature-settings: "liga" 0; /* the above doesn\'t seem to work in Edge */\n}\n\n.ProseMirror [contenteditable="false"] {\n  white-space: normal;\n}\n\n.ProseMirror [contenteditable="false"] [contenteditable="true"] {\n  white-space: pre-wrap;\n}\n\n.ProseMirror pre {\n  white-space: pre-wrap;\n}\n\nimg.ProseMirror-separator {\n  display: inline !important;\n  border: none !important;\n  margin: 0 !important;\n  width: 0 !important;\n  height: 0 !important;\n}\n\n.ProseMirror-gapcursor {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n  margin: 0;\n}\n\n.ProseMirror-gapcursor:after {\n  content: "";\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid black;\n  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n}\n\n@keyframes ProseMirror-cursor-blink {\n  to {\n    visibility: hidden;\n  }\n}\n\n.ProseMirror-hideselection *::selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection *::-moz-selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection * {\n  caret-color: transparent;\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n  display: block;\n}',this.options.injectNonce))}setOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options={...this.options,...e},this.editorView&&this.state&&!this.isDestroyed&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:e=>{this.editorState=e},dispatch:e=>{this.editorState=this.state.apply(e)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(e,t)=>{if("state"===t)return this.editorState;if(t in e)return Reflect.get(e,t);throw Error("[tiptap error]: The editor view is not available. Cannot access view['".concat(t,"']. The editor may not be mounted yet."))}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(e,t){let n=A(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(e){if(this.isDestroyed)return;let t=this.state.plugins,n=t;if([].concat(e).forEach(e=>{let t="string"==typeof e?"".concat(e,"$"):e.key;n=n.filter(e=>!e.key.startsWith(t))}),t.length===n.length)return;let r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var e,t;let n=[...this.options.enableCoreExtensions?[tN,eC.configure({blockSeparator:null==(t=null==(e=this.options.coreExtensionOptions)?void 0:e.clipboardTextSerializer)?void 0:t.blockSeparator}),tT,tP,tR,tj,tI,tO,tM].filter(e=>"object"!=typeof this.options.enableCoreExtensions||!1!==this.options.enableCoreExtensions[e.name]):[],...this.options.extensions].filter(e=>["extension","node","mark"].includes(null==e?void 0:e.type));this.extensionManager=new ek(n,this)}createCommandManager(){this.commandManager=new d({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let e;try{e=y(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(t){if(!(t instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(t.message))throw t;this.emit("contentError",{editor:this,error:t,disableCollaboration:()=>{"collaboration"in this.storage&&"object"==typeof this.storage.collaboration&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(e=>"collaboration"!==e.name),this.createExtensionManager()}}),e=y(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return e}createView(e){var t;this.editorView=new n.EditorView(e,{...this.options.editorProps,attributes:{role:"textbox",...null==(t=this.options.editorProps)?void 0:t.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState});let r=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(r),this.createNodeViews(),this.prependClass(),this.injectCSS(),this.view.dom.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className="tiptap ".concat(this.view.dom.className)}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;let t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(e=>{var t;return null==(t=this.capturedTransaction)?void 0:t.step(e)});return}let{state:t,transactions:n}=this.state.applyTransaction(e),r=!this.state.selection.eq(t.selection),i=n.includes(e),a=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),!i)return;this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e,appendedTransactions:n.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});let o=n.findLast(e=>e.getMeta("focus")||e.getMeta("blur")),s=null==o?void 0:o.getMeta("focus"),l=null==o?void 0:o.getMeta("blur");s&&this.emit("focus",{editor:this,event:s.event,transaction:o}),l&&this.emit("blur",{editor:this,event:l.event,transaction:o}),e.getMeta("preventUpdate")||!n.some(e=>e.docChanged)||a.doc.eq(t.doc)||this.emit("update",{editor:this,transaction:e,appendedTransactions:n.slice(1)})}getAttributes(e){return q(this.state,e)}isActive(e,t){let n="string"==typeof e?e:null,r="string"==typeof e?t:e;return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t)return ei(e,null,n)||er(e,null,n);let r=V(t,e.schema);return"node"===r?ei(e,t,n):"mark"===r&&er(e,t,n)}(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return C(this.state.doc.content,this.schema)}getText(e){let{blockSeparator:t="\n\n",textSerializers:n={}}=e||{};return z(this.state.doc,{blockSeparator:t,textSerializers:{...B(this.schema),...n}})}get isEmpty(){return eu(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var e,t;return null==(t=null==(e=this.editorView)?void 0:e.isDestroyed)||t}$node(e,t){var n;return(null==(n=this.$doc)?void 0:n.querySelector(e,t))||null}$nodes(e,t){var n;return(null==(n=this.$doc)?void 0:n.querySelectorAll(e,t))||null}$pos(e){return new tF(this.state.doc.resolve(e),this)}get $doc(){return this.$pos(0)}constructor(e={}){super(),this.css=null,this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:"undefined"!=typeof document?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:e=>{let{error:t}=e;throw t},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",e=>{let{event:t,slice:n,moved:r}=e;return this.options.onDrop(t,n,r)}),this.on("paste",e=>{let{event:t,slice:n}=e;return this.options.onPaste(t,n)}),this.on("delete",this.options.onDelete);let n=this.createDoc(),r=ef(n,this.options.autofocus);this.editorState=t.EditorState.create({doc:n,schema:this.schema,selection:r||void 0}),this.options.element&&this.mount(this.options.element)}};function tz(e){return new em({find:e.find,handler:t=>{let{state:n,range:r,match:i}=t,a=E(e.getAttributes,void 0,i);if(!1===a||null===a)return null;let{tr:o}=n,s=i[i.length-1],l=i[0];if(s){let t=l.search(/\S/),i=r.from+l.indexOf(s),u=i+s.length;if(J(r.from,r.to,n.doc).filter(t=>t.mark.type.excluded.find(n=>n===e.type&&n!==t.mark.type)).filter(e=>e.to>i).length)return null;u<r.to&&o.delete(u,r.to),i>r.from&&o.delete(r.from+t,i);let c=r.from+t+s.length;o.addMark(r.from+t,c,e.type.create(a||{})),o.removeStoredMark(e.type)}}})}function tB(e){return new em({find:e.find,handler:t=>{let{state:n,range:r,match:i}=t,a=E(e.getAttributes,void 0,i)||{},{tr:o}=n,s=r.from,l=r.to,u=e.type.create(a);if(i[1]){let e=s+i[0].lastIndexOf(i[1]);e>l?e=l:l=e+i[1].length;let t=i[0][i[0].length-1];o.insertText(t,s+i[0].length-1),o.replaceWith(e,l,u)}else if(i[0]){let t=e.type.isInline?s:s-1;o.insert(t,e.type.create(a)).delete(o.mapping.map(s),o.mapping.map(l))}o.scrollIntoView()}})}function tU(e){return new em({find:e.find,handler:t=>{let{state:n,range:r,match:i}=t,a=n.doc.resolve(r.from),o=E(e.getAttributes,void 0,i)||{};if(!a.node(-1).canReplaceWith(a.index(-1),a.indexAfter(-1),e.type))return null;n.tr.delete(r.from,r.to).setBlockType(r.from,r.from,e.type,o)}})}function tH(e){return new em({find:e.find,handler:t=>{let{state:n,range:r,match:i}=t,a=e.replace,o=r.from,s=r.to;if(i[1]){let e=i[0].lastIndexOf(i[1]);a+=i[0].slice(e+i[1].length);let t=(o+=e)-s;t>0&&(a=i[0].slice(e-t,e)+a,o=s)}n.tr.insertText(a,o,s)}})}function tW(e){return new em({find:e.find,handler:t=>{let{state:n,range:r,match:a,chain:o}=t,s=E(e.getAttributes,void 0,a)||{},l=n.tr.delete(r.from,r.to),u=l.doc.resolve(r.from).blockRange(),c=u&&(0,i.findWrapping)(u,e.type,s);if(!c)return null;if(l.wrap(u,c),e.keepMarks&&e.editor){let{selection:t,storedMarks:r}=n,{splittableMarks:i}=e.editor.extensionManager,a=r||t.$to.parentOffset&&t.$from.marks();if(a){let e=a.filter(e=>i.includes(e.type.name));l.ensureMarks(e)}}if(e.keepAttributes){let t="bulletList"===e.type.name||"orderedList"===e.type.name?"listItem":"taskList";o().updateAttributes(t,s).run()}let d=l.doc.resolve(r.from-1).nodeBefore;d&&d.type===e.type&&(0,i.canJoin)(l.doc,r.from-1)&&(!e.joinPredicate||e.joinPredicate(a,d))&&l.join(r.from-1)}})}function tV(e,n){let{selection:r}=e,{$from:i}=r;if(r instanceof t.NodeSelection){let e=i.index();return i.parent.canReplaceWith(e,e+1,n)}let a=i.depth;for(;a>=0;){let e=i.index(a);if(i.node(a).contentMatchAt(e).matchType(n))return!0;a-=1}return!1}function tq(e){return e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}function tG(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{state:r}=t,{doc:i,tr:a}=r;i.descendants((t,r)=>{let i=a.mapping.map(r),o=a.mapping.map(r)+t.nodeSize,s=null;if(t.marks.forEach(t=>{if(t!==e)return!1;s=t}),!s)return;let l=!1;if(Object.keys(n).forEach(e=>{n[e]!==s.attrs[e]&&(l=!0)}),l){let t=e.type.create({...e.attrs,...n});a.removeMark(i,o,e.type),a.addMark(i,o,t)}}),a.docChanged&&t.view.dispatch(a)}var t$=class{get dom(){return this.editor.view.dom}get contentDOM(){return null}updateAttributes(e,t){tG(t||this.mark,this.editor,e)}ignoreMutation(e){return!this.dom||!this.contentDOM||("function"==typeof this.options.ignoreMutation?this.options.ignoreMutation({mutation:e}):!("selection"===e.type||this.dom.contains(e.target)&&"childList"===e.type&&(eH()||eU())&&this.editor.isFocused&&[...Array.from(e.addedNodes),...Array.from(e.removedNodes)].every(e=>e.isContentEditable))&&(this.contentDOM===e.target&&"attributes"===e.type||!this.contentDOM.contains(e.target)))}constructor(e,t,n){this.component=e,this.editor=t.editor,this.options={...n},this.mark=t.mark,this.HTMLAttributes=t.HTMLAttributes}},tK=class e extends ey{static create(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new e("function"==typeof t?t():t)}configure(e){return super.configure(e)}extend(e){let t="function"==typeof e?e():e;return super.extend(t)}constructor(){super(...arguments),this.type="node"}},tY=class{mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(e){var n,r,i,a,o,s,l;let{view:u}=this.editor,c=e.target,d=3===c.nodeType?null==(n=c.parentElement)?void 0:n.closest("[data-drag-handle]"):c.closest("[data-drag-handle]");if(!this.dom||(null==(r=this.contentDOM)?void 0:r.contains(c))||!d)return;let h=0,p=0;if(this.dom!==d){let t=this.dom.getBoundingClientRect(),n=d.getBoundingClientRect(),r=null!=(a=e.offsetX)?a:null==(i=e.nativeEvent)?void 0:i.offsetX,l=null!=(s=e.offsetY)?s:null==(o=e.nativeEvent)?void 0:o.offsetY;h=n.x-t.x+r,p=n.y-t.y+l}let f=this.dom.cloneNode(!0);try{let e=this.dom.getBoundingClientRect();f.style.width="".concat(Math.round(e.width),"px"),f.style.height="".concat(Math.round(e.height),"px"),f.style.boxSizing="border-box",f.style.pointerEvents="none"}catch(e){}let m=null;try{(m=document.createElement("div")).style.position="absolute",m.style.top="-9999px",m.style.left="-9999px",m.style.pointerEvents="none",m.appendChild(f),document.body.appendChild(m),null==(l=e.dataTransfer)||l.setDragImage(f,h,p)}finally{m&&setTimeout(()=>{try{null==m||m.remove()}catch(e){}},0)}let g=this.getPos();if("number"!=typeof g)return;let y=t.NodeSelection.create(u.state.doc,g),b=u.state.tr.setSelection(y);u.dispatch(b)}stopEvent(e){var n;if(!this.dom)return!1;if("function"==typeof this.options.stopEvent)return this.options.stopEvent({event:e});let r=e.target;if(!(this.dom.contains(r)&&!(null==(n=this.contentDOM)?void 0:n.contains(r))))return!1;let i=e.type.startsWith("drag"),a="drop"===e.type;if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(r.tagName)||r.isContentEditable)&&!a&&!i)return!0;let{isEditable:o}=this.editor,{isDragging:s}=this,l=!!this.node.type.spec.draggable,u=t.NodeSelection.isSelectable(this.node),c="copy"===e.type,d="paste"===e.type,h="cut"===e.type,p="mousedown"===e.type;if(!l&&u&&i&&e.target===this.dom&&e.preventDefault(),l&&i&&!s&&e.target===this.dom)return e.preventDefault(),!1;if(l&&o&&!s&&p){let e=r.closest("[data-drag-handle]");e&&(this.dom===e||this.dom.contains(e))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("drop",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!s&&!a&&!c&&!d&&!h&&(!p||!u)}ignoreMutation(e){return!this.dom||!this.contentDOM||("function"==typeof this.options.ignoreMutation?this.options.ignoreMutation({mutation:e}):!!this.node.isLeaf||!!this.node.isAtom||!("selection"===e.type||this.dom.contains(e.target)&&"childList"===e.type&&(eH()||eU())&&this.editor.isFocused&&[...Array.from(e.addedNodes),...Array.from(e.removedNodes)].every(e=>e.isContentEditable))&&(this.contentDOM===e.target&&"attributes"===e.type||!this.contentDOM.contains(e.target)))}updateAttributes(e){this.editor.commands.command(t=>{let{tr:n}=t,r=this.getPos();return"number"==typeof r&&(n.setNodeMarkup(r,void 0,{...this.node.attrs,...e}),!0)})}deleteNode(){let e=this.getPos();if("number"!=typeof e)return;let t=e+this.node.nodeSize;this.editor.commands.deleteRange({from:e,to:t})}constructor(e,t,n){this.isDragging=!1,this.component=e,this.editor=t.editor,this.options={stopEvent:null,ignoreMutation:null,...n},this.extension=t.extension,this.node=t.node,this.decorations=t.decorations,this.innerDecorations=t.innerDecorations,this.view=t.view,this.HTMLAttributes=t.HTMLAttributes,this.getPos=t.getPos,this.mount()}};function tX(e){return new ex({find:e.find,handler:t=>{let{state:n,range:r,match:i,pasteEvent:a}=t,o=E(e.getAttributes,void 0,i,a);if(!1===o||null===o)return null;let{tr:s}=n,l=i[i.length-1],u=i[0],c=r.to;if(l){let t=u.search(/\S/),i=r.from+u.indexOf(l),a=i+l.length;if(J(r.from,r.to,n.doc).filter(t=>t.mark.type.excluded.find(n=>n===e.type&&n!==t.mark.type)).filter(e=>e.to>i).length)return null;a<r.to&&s.delete(a,r.to),i>r.from&&s.delete(r.from+t,i),c=r.from+t+l.length,s.addMark(r.from+t,c,e.type.create(o||{})),s.removeStoredMark(e.type)}}})}},806879:e=>{"use strict";e.s({any:()=>a,copy:()=>n,create:()=>t,map:()=>i,setIfUndefined:()=>r});let t=()=>new Map,n=e=>{let n=t();return e.forEach((e,t)=>{n.set(t,e)}),n},r=(e,t,n)=>{let r=e.get(t);return void 0===r&&e.set(t,r=n()),r},i=(e,t)=>{let n=[];for(let[r,i]of e)n.push(t(i,r));return n},a=(e,t)=>{for(let[n,r]of e)if(t(r,n))return!0;return!1}},43200:e=>{"use strict";e.s({create:()=>t,from:()=>n});let t=()=>new Set,n=e=>new Set(e)},130807:e=>{"use strict";e.s({appendTo:()=>n,equalFlat:()=>a,from:()=>r,isArray:()=>s,last:()=>t,map:()=>l,some:()=>i,unfold:()=>o}),e.i(43200);let t=e=>e[e.length-1],n=(e,t)=>{for(let n=0;n<t.length;n++)e.push(t[n])},r=Array.from,i=(e,t)=>{for(let n=0;n<e.length;n++)if(t(e[n],n,e))return!0;return!1},a=(e,t)=>e.length===t.length&&((e,t)=>{for(let n=0;n<e.length;n++)if(!t(e[n],n,e))return!1;return!0})(e,(e,n)=>e===t[n]),o=(e,t)=>{let n=Array(e);for(let r=0;r<e;r++)n[r]=t(r,n);return n},s=Array.isArray,l=(e,t)=>{let n=Array(e.length);for(let r=0;r<e.length;r++)n[r]=t(e[r],r,e);return n}},741240:e=>{"use strict";e.s({Observable:()=>a,ObservableV2:()=>i});var t=e.i(806879),n=e.i(43200),r=e.i(130807);class i{on(e,r){return t.setIfUndefined(this._observers,e,n.create).add(r),r}once(e,t){var n=this;let r=function(){for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];n.off(e,r),t(...a)};this.on(e,r)}off(e,t){let n=this._observers.get(e);void 0!==n&&(n.delete(t),0===n.size&&this._observers.delete(e))}emit(e,n){return r.from((this._observers.get(e)||t.create()).values()).forEach(e=>e(...n))}destroy(){this._observers=t.create()}constructor(){this._observers=t.create()}}class a{on(e,r){t.setIfUndefined(this._observers,e,n.create).add(r)}once(e,t){var n=this;let r=function(){for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];n.off(e,r),t(...a)};this.on(e,r)}off(e,t){let n=this._observers.get(e);void 0!==n&&(n.delete(t),0===n.size&&this._observers.delete(e))}emit(e,n){return r.from((this._observers.get(e)||t.create()).values()).forEach(e=>e(...n))}destroy(){this._observers=t.create()}constructor(){this._observers=t.create()}}},640738:e=>{"use strict";e.s({abs:()=>r,ceil:()=>n,exp10:()=>l,floor:()=>t,isNegativeZero:()=>u,log10:()=>a,max:()=>s,min:()=>o,round:()=>i});let t=Math.floor,n=Math.ceil,r=Math.abs,i=Math.round,a=Math.log10,o=(e,t)=>e<t?e:t,s=(e,t)=>e>t?e:t,l=e=>Math.pow(10,e),u=e=>0!==e?e<0:1/e<0},545467:e=>{"use strict";e.s({BIT1:()=>t,BIT2:()=>n,BIT3:()=>r,BIT4:()=>i,BIT6:()=>a,BIT7:()=>o,BIT8:()=>s,BITS21:()=>h,BITS31:()=>p,BITS32:()=>f,BITS5:()=>l,BITS6:()=>u,BITS7:()=>c,BITS8:()=>d});let t=1,n=2,r=4,i=8,a=32,o=64,s=128,l=31,u=63,c=127,d=255,h=2097151,p=0x7fffffff,f=0xffffffff},18601:e=>{"use strict";e.s({MAX_SAFE_INTEGER:()=>r,isInteger:()=>i});var t=e.i(640738),n=e.i(545467);let r=Number.MAX_SAFE_INTEGER;Number.MIN_SAFE_INTEGER,n.BITS31,n.BITS32;let i=Number.isInteger||(e=>"number"==typeof e&&isFinite(e)&&t.floor(e)===e);Number.parseInt},586384:e=>{"use strict";e.s({decodeUtf8:()=>u,encodeUtf8:()=>s,fromCamelCase:()=>a,fromCharCode:()=>n,repeat:()=>c,utf8TextDecoder:()=>l,utf8TextEncoder:()=>o});var t=e.i(130807);let n=String.fromCharCode;String.fromCodePoint,n(65535);let r=/^\s*/g,i=/([A-Z])/g,a=(e,t)=>e.replace(i,e=>"".concat(t).concat(e.toLowerCase())).replace(r,""),o="undefined"!=typeof TextEncoder?new TextEncoder:null,s=o?e=>o.encode(e):e=>{let t=unescape(encodeURIComponent(e)),n=t.length,r=new Uint8Array(n);for(let e=0;e<n;e++)r[e]=t.codePointAt(e);return r},l="undefined"==typeof TextDecoder?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});l&&1===l.decode(new Uint8Array).length&&(l=null);let u=l?e=>l.decode(e):e=>{let t=e.length,n="",r=0;for(;t>0;){let i=t<1e4?t:1e4,a=e.subarray(r,r+i);r+=i,n+=String.fromCodePoint.apply(null,a),t-=i}return decodeURIComponent(escape(n))},c=(e,n)=>t.unfold(n,()=>e).join("")},202956:e=>{"use strict";e.s({IntDiffOptRleEncoder:()=>T,RleEncoder:()=>_,StringEncoder:()=>M,UintOptRleEncoder:()=>A,createEncoder:()=>s,encode:()=>l,toUint8Array:()=>u,write:()=>c,writeAny:()=>S,writeBinaryEncoder:()=>y,writeUint8:()=>d,writeUint8Array:()=>b,writeVarInt:()=>p,writeVarString:()=>g,writeVarUint:()=>h,writeVarUint8Array:()=>x});var t=e.i(640738),n=e.i(18601),r=e.i(545467),i=e.i(586384),a=e.i(130807);class o{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}let s=()=>new o,l=e=>{let t=s();return e(t),u(t)},u=e=>{let t=new Uint8Array((e=>{let t=e.cpos;for(let n=0;n<e.bufs.length;n++)t+=e.bufs[n].length;return t})(e)),n=0;for(let r=0;r<e.bufs.length;r++){let i=e.bufs[r];t.set(i,n),n+=i.length}return t.set(new Uint8Array(e.cbuf.buffer,0,e.cpos),n),t},c=(e,t)=>{let n=e.cbuf.length;e.cpos===n&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(2*n),e.cpos=0),e.cbuf[e.cpos++]=t},d=c,h=(e,n)=>{for(;n>r.BITS7;)c(e,r.BIT8|r.BITS7&n),n=t.floor(n/128);c(e,r.BITS7&n)},p=(e,n)=>{let i=t.isNegativeZero(n);for(i&&(n=-n),c(e,(n>r.BITS6?r.BIT8:0)|(i?r.BIT7:0)|r.BITS6&n),n=t.floor(n/64);n>0;)c(e,(n>r.BITS7?r.BIT8:0)|r.BITS7&n),n=t.floor(n/128)},f=new Uint8Array(3e4),m=f.length/3,g=i.utf8TextEncoder&&i.utf8TextEncoder.encodeInto?(e,t)=>{if(t.length<m){let n=i.utf8TextEncoder.encodeInto(t,f).written||0;h(e,n);for(let t=0;t<n;t++)c(e,f[t])}else x(e,i.encodeUtf8(t))}:(e,t)=>{let n=unescape(encodeURIComponent(t)),r=n.length;h(e,r);for(let t=0;t<r;t++)c(e,n.codePointAt(t))},y=(e,t)=>b(e,u(t)),b=(e,n)=>{let r=e.cbuf.length,i=e.cpos,a=t.min(r-i,n.length),o=n.length-a;e.cbuf.set(n.subarray(0,a),i),e.cpos+=a,o>0&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(t.max(2*r,o)),e.cbuf.set(n.subarray(a)),e.cpos=o)},x=(e,t)=>{h(e,t.byteLength),b(e,t)},w=(e,n)=>{((e,n)=>{let r=e.cbuf.length;r-e.cpos<n&&(e.bufs.push(new Uint8Array(e.cbuf.buffer,0,e.cpos)),e.cbuf=new Uint8Array(2*t.max(r,n)),e.cpos=0)})(e,n);let r=new DataView(e.cbuf.buffer,e.cpos,n);return e.cpos+=n,r},k=new DataView(new ArrayBuffer(4)),S=(e,i)=>{switch(typeof i){case"string":c(e,119),g(e,i);break;case"number":if(n.isInteger(i)&&t.abs(i)<=r.BITS31)c(e,125),p(e,i);else if((e=>(k.setFloat32(0,e),k.getFloat32(0)===e))(i))c(e,124),w(e,4).setFloat32(0,i,!1);else c(e,123),w(e,8).setFloat64(0,i,!1);break;case"bigint":c(e,122),w(e,8).setBigInt64(0,i,!1);break;case"object":if(null===i)c(e,126);else if(a.isArray(i)){c(e,117),h(e,i.length);for(let t=0;t<i.length;t++)S(e,i[t])}else if(i instanceof Uint8Array)c(e,116),x(e,i);else{c(e,118);let t=Object.keys(i);h(e,t.length);for(let n=0;n<t.length;n++){let r=t[n];g(e,r),S(e,i[r])}}break;case"boolean":c(e,i?120:121);break;default:c(e,127)}};class _ extends o{write(e){this.s===e?this.count++:(this.count>0&&h(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}constructor(e){super(),this.w=e,this.s=null,this.count=0}}let C=e=>{e.count>0&&(p(e.encoder,1===e.count?e.s:-e.s),e.count>1&&h(e.encoder,e.count-2))};class A{write(e){this.s===e?this.count++:(C(this),this.count=1,this.s=e)}toUint8Array(){return C(this),u(this.encoder)}constructor(){this.encoder=new o,this.s=0,this.count=0}}let E=e=>{if(e.count>0){let t=2*e.diff+ +(1!==e.count);p(e.encoder,t),e.count>1&&h(e.encoder,e.count-2)}};class T{write(e){this.diff===e-this.s?(this.s=e,this.count++):(E(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return E(this),u(this.encoder)}constructor(){this.encoder=new o,this.s=0,this.count=0,this.diff=0}}class M{write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){let e=new o;return this.sarr.push(this.s),this.s="",g(e,this.sarr.join("")),b(e,this.lensE.toUint8Array()),u(e)}constructor(){this.sarr=[],this.s="",this.lensE=new A}}},921520:e=>{"use strict";e.s({create:()=>t,methodUnimplemented:()=>n,unexpectedCase:()=>r});let t=e=>Error(e),n=()=>{throw t("Method unimplemented")},r=()=>{throw t("Unexpected case")}},14743:e=>{"use strict";e.s({IntDiffOptRleDecoder:()=>k,RleDecoder:()=>x,StringDecoder:()=>S,UintOptRleDecoder:()=>w,createDecoder:()=>u,hasContent:()=>c,readAny:()=>b,readUint8:()=>h,readVarInt:()=>f,readVarString:()=>m,readVarUint:()=>p,readVarUint8Array:()=>d});var t=e.i(545467),n=e.i(640738),r=e.i(18601),i=e.i(586384),a=e.i(921520);e.i(202956);let o=a.create("Unexpected end of array"),s=a.create("Integer out of Range");class l{constructor(e){this.arr=e,this.pos=0}}let u=e=>new l(e),c=e=>e.pos!==e.arr.length,d=e=>((e,t)=>{let n=new Uint8Array(e.arr.buffer,e.pos+e.arr.byteOffset,t);return e.pos+=t,n})(e,p(e)),h=e=>e.arr[e.pos++],p=e=>{let n=0,i=1,a=e.arr.length;for(;e.pos<a;){let a=e.arr[e.pos++];if(n+=(a&t.BITS7)*i,i*=128,a<t.BIT8)return n;if(n>r.MAX_SAFE_INTEGER)throw s}throw o},f=e=>{let n=e.arr[e.pos++],i=n&t.BITS6,a=64,l=(n&t.BIT7)>0?-1:1;if((n&t.BIT8)==0)return l*i;let u=e.arr.length;for(;e.pos<u;){if(i+=((n=e.arr[e.pos++])&t.BITS7)*a,a*=128,n<t.BIT8)return l*i;if(i>r.MAX_SAFE_INTEGER)throw s}throw o},m=i.utf8TextDecoder?e=>i.utf8TextDecoder.decode(d(e)):e=>{let t=p(e);if(0===t)return"";{let n=String.fromCodePoint(h(e));if(--t<100)for(;t--;)n+=String.fromCodePoint(h(e));else for(;t>0;){let r=t<1e4?t:1e4,i=e.arr.subarray(e.pos,e.pos+r);e.pos+=r,n+=String.fromCodePoint.apply(null,i),t-=r}return decodeURIComponent(escape(n))}},g=(e,t)=>{let n=new DataView(e.arr.buffer,e.arr.byteOffset+e.pos,t);return e.pos+=t,n},y=[e=>void 0,e=>null,f,e=>g(e,4).getFloat32(0,!1),e=>g(e,8).getFloat64(0,!1),e=>g(e,8).getBigInt64(0,!1),e=>!1,e=>!0,m,e=>{let t=p(e),n={};for(let r=0;r<t;r++)n[m(e)]=b(e);return n},e=>{let t=p(e),n=[];for(let r=0;r<t;r++)n.push(b(e));return n},d],b=e=>y[127-h(e)](e);class x extends l{read(){return 0===this.count&&(this.s=this.reader(this),c(this)?this.count=p(this)+1:this.count=-1),this.count--,this.s}constructor(e,t){super(e),this.reader=t,this.s=null,this.count=0}}class w extends l{read(){if(0===this.count){this.s=f(this);let e=n.isNegativeZero(this.s);this.count=1,e&&(this.s=-this.s,this.count=p(this)+2)}return this.count--,this.s}constructor(e){super(e),this.s=0,this.count=0}}class k extends l{read(){if(0===this.count){let e=f(this);this.diff=n.floor(e/2),this.count=1,1&e&&(this.count=p(this)+2)}return this.s+=this.diff,this.count--,this.s}constructor(e){super(e),this.s=0,this.count=0,this.diff=0}}class S{read(){let e=this.spos+this.decoder.read(),t=this.str.slice(this.spos,e);return this.spos=e,t}constructor(e){this.decoder=new w(e),this.str=m(this.decoder),this.spos=0}}},950081:e=>{"use strict";e.s({getRandomValues:()=>t}),crypto.subtle;let t=crypto.getRandomValues.bind(crypto)},339305:e=>{"use strict";e.s({uint32:()=>n,uuidv4:()=>r}),e.i(640738),e.i(545467);var t=e.i(950081);let n=()=>(0,t.getRandomValues)(new Uint32Array(1))[0],r=()=>"10000000-1000-4000-8000-100000000000".replace(/[018]/g,e=>(e^n()&15>>e/4).toString(16))},260256:e=>{"use strict";e.s({prefix:()=>i});var t=e.i(640738);let n=["","k","M","G","T","P","E","Z","Y"],r=["","m","","n","p","f","a","z","y"],i=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=0===e?0:t.log10(e),o=0;for(;a<3*o&&i>-8;)i--,o--;for(;a>=3+3*o&&i<8;)i++,o++;let s=i<0?r[-i]:n[i];return{n:t.round((o>0?e/t.exp10(3*o):e*t.exp10(-3*o))*1e12)/1e12,prefix:s}}},210766:e=>{"use strict";e.s({getUnixTime:()=>t}),e.i(260256),e.i(640738);let t=Date.now},557932:e=>{"use strict";e.s({all:()=>n,create:()=>t}),e.i(210766);let t=e=>new Promise(e),n=Promise.all.bind(Promise)},735070:e=>{"use strict";e.s({undefinedToNull:()=>t});let t=e=>void 0===e?null:e},26051:e=>{"use strict";e.s({varStorage:()=>n});let t=new class{setItem(e,t){this.map.set(e,t)}getItem(e){return this.map.get(e)}constructor(){this.map=new Map}};try{"undefined"!=typeof localStorage&&localStorage&&(t=localStorage)}catch(e){}let n=t},501899:e=>{"use strict";e.s({assign:()=>t,deepFreeze:()=>c,equalFlat:()=>l,forEach:()=>r,hasProperty:()=>s,isEmpty:()=>o,length:()=>i});let t=Object.assign,n=Object.keys;Object.values;let r=(e,t)=>{for(let n in e)t(e[n],n)},i=e=>n(e).length,a=e=>n(e).length,o=e=>{for(let t in e)return!1;return!0},s=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),l=(e,t)=>e===t||a(e)===a(t)&&((e,t)=>{for(let n in e)if(!t(e[n],n))return!1;return!0})(e,(e,n)=>(void 0!==e||s(t,n))&&t[n]===e),u=Object.freeze,c=e=>{for(let t in e){let n=e[t];("object"==typeof n||"function"==typeof n)&&c(e[t])}return u(e)}},218137:e=>{"use strict";e.s({EqualityTraitSymbol:()=>t});let t=Symbol("Equality")},965632:e=>{"use strict";e.s({callAll:()=>n,id:()=>i,isOneOf:()=>a,nop:()=>r});var t=e.i(130807);e.i(501899),e.i(218137);let n=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;try{for(;r<e.length;r++)e[r](...t)}finally{r<e.length&&n(e,t,r+1)}},r=()=>{},i=e=>e,a=(e,t)=>t.includes(e);t.isArray},891333:e=>{"use strict";let t;e.s({getVariable:()=>h,isBrowser:()=>u,supportsColor:()=>f});var n=e.i(227541),r=e.i(806879),i=e.i(586384),a=e.i(735070),o=e.i(26051),s=e.i(965632);let l=void 0!==n.default&&n.default.release&&/node|io\.js/.test(n.default.release.name)&&"[object process]"===Object.prototype.toString.call(void 0!==n.default?n.default:0),u="undefined"!=typeof window&&"undefined"!=typeof document&&!l;"undefined"!=typeof navigator&&/Mac/.test(navigator.platform);let c=[],d=e=>(()=>{if(void 0===t)if(l){t=r.create();let e=n.default.argv,i=null;for(let n=0;n<e.length;n++){let r=e[n];"-"===r[0]?(null!==i&&t.set(i,""),i=r):null!==i?(t.set(i,r),i=null):c.push(r)}null!==i&&t.set(i,"")}else"object"==typeof location?(t=r.create(),(location.search||"?").slice(1).split("&").forEach(e=>{if(0!==e.length){let[n,r]=e.split("=");t.set("--".concat(i.fromCamelCase(n,"-")),r),t.set("-".concat(i.fromCamelCase(n,"-")),r)}})):t=r.create();return t})().has(e),h=e=>l?a.undefinedToNull(n.default.env[e.toUpperCase().replaceAll("-","_")]):a.undefinedToNull(o.varStorage.getItem(e)),p=e=>d("--"+e)||null!==h(e);p("production");let f=l&&s.isOneOf(n.default.env.FORCE_COLOR,["true","1","2"])||!d("--no-colors")&&!p("no-color")&&(!l||n.default.stdout.isTTY)&&(!l||d("--color")||null!==h("COLORTERM")||(h("TERM")||"").includes("color"))},910405:e=>{"use strict";e.s({copyUint8Array:()=>n}),e.i(586384);var t=e.i(891333);e.i(130807),e.i(640738),e.i(202956),e.i(14743);t.isBrowser,t.isBrowser;let n=e=>{let t=new Uint8Array(e.byteLength);return t.set(e),t}},191458:e=>{"use strict";e.s({create:()=>n,forEach:()=>r});class t{constructor(e,t){this.left=e,this.right=t}}let n=(e,n)=>new t(e,n),r=(e,t)=>e.forEach(e=>t(e.left,e.right))},288394:e=>{"use strict";e.s({addEventListener:()=>a,append:()=>i,element:()=>o,mapToStyleString:()=>l,text:()=>s});var t=e.i(191458),n=e.i(806879);let r="undefined"!=typeof document?document:{};"undefined"!=typeof DOMParser&&new DOMParser;let i=(e,t)=>(u(e,(e=>{let t=r.createDocumentFragment();for(let n=0;n<e.length;n++)u(t,e[n]);return t})(t)),e),a=(e,t,n)=>e.addEventListener(t,n),o=function(e){var n;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return i((n=r.createElement(e),t.forEach(a,(e,t)=>{!1===t?n.removeAttribute(e):!0===t?n.setAttribute(e,""):n.setAttribute(e,t)}),n),o)},s=e=>r.createTextNode(e),l=e=>n.map(e,(e,t)=>"".concat(t,":").concat(e,";")).join(""),u=(e,t)=>e.appendChild(t);r.ELEMENT_NODE,r.TEXT_NODE,r.CDATA_SECTION_NODE,r.COMMENT_NODE,r.DOCUMENT_NODE,r.DOCUMENT_TYPE_NODE,r.DOCUMENT_FRAGMENT_NODE},346119:e=>{"use strict";e.s({stringify:()=>t});let t=JSON.stringify;JSON.parse},448926:e=>{"use strict";e.s({enqueue:()=>r}),e.i(210766);let t=[],n=()=>{for(let e=0;e<t.length;e++)t[e]();t=[]},r=e=>{t.push(e),1===t.length&&setTimeout(n,0)},i=e=>class{destroy(){e(this._)}constructor(e){this._=e}};i(clearTimeout),i(clearInterval),i(e=>"undefined"!=typeof requestAnimationFrame&&cancelAnimationFrame(e)),i(e=>"undefined"!=typeof cancelIdleCallback&&cancelIdleCallback(e))},848246:e=>{"use strict";e.s({create:()=>t});let t=Symbol},661376:e=>{"use strict";e.s({BLUE:()=>l,BOLD:()=>o,GREEN:()=>c,GREY:()=>u,ORANGE:()=>p,PURPLE:()=>h,RED:()=>d,UNBOLD:()=>s,UNCOLOR:()=>f,computeNoColorLoggingArgs:()=>m,createModuleLogger:()=>x});var t=e.i(848246),n=e.i(210766),r=e.i(891333),i=e.i(965632),a=e.i(346119);let o=t.create(),s=t.create(),l=t.create(),u=t.create(),c=t.create(),d=t.create(),h=t.create(),p=t.create(),f=t.create(),m=e=>{var t;1===e.length&&(null==(t=e[0])?void 0:t.constructor)===Function&&(e=e[0]());let n=[],r=[],i=0;for(;i<e.length;i++){let t=e[i];if(void 0===t)break;if(t.constructor===String||t.constructor===Number)n.push(t);else if(t.constructor===Object)break}for(i>0&&r.push(n.join(""));i<e.length;i++){let t=e[i];t instanceof Symbol||r.push(t)}return r},g=[c,h,p,l],y=0,b=n.getUnixTime(),x=(e,t)=>{let o=g[y],s=r.getVariable("log"),l=null!==s&&("*"===s||"true"===s||RegExp(s,"gi").test(t));return y=(y+1)%g.length,t+=": ",l?function(){for(var r,i=arguments.length,s=Array(i),l=0;l<i;l++)s[l]=arguments[l];1===s.length&&(null==(r=s[0])?void 0:r.constructor)===Function&&(s=s[0]());let u=n.getUnixTime(),c=u-b;b=u,e(o,t,f,...s.map(e=>{switch(null!=e&&e.constructor===Uint8Array&&(e=Array.from(e)),typeof e){case"string":case"symbol":return e;default:return a.stringify(e)}}),o," +"+c+"ms")}:i.nop}},197665:e=>{"use strict";e.s({print:()=>u,warn:()=>c});var t=e.i(891333),n=e.i(43200),r=e.i(191458),i=e.i(288394);e.i(346119);var a=e.i(806879);e.i(448926),e.i(640738);var o=e.i(661376);let s={[o.BOLD]:r.create("font-weight","bold"),[o.UNBOLD]:r.create("font-weight","normal"),[o.BLUE]:r.create("color","blue"),[o.GREEN]:r.create("color","green"),[o.GREY]:r.create("color","grey"),[o.RED]:r.create("color","red"),[o.PURPLE]:r.create("color","purple"),[o.ORANGE]:r.create("color","orange"),[o.UNCOLOR]:r.create("color","black")},l=t.supportsColor?e=>{var t;1===e.length&&(null==(t=e[0])?void 0:t.constructor)===Function&&(e=e[0]());let n=[],r=[],o=a.create(),l=[],u=0;for(;u<e.length;u++){let t=e[u],a=s[t];if(void 0!==a)o.set(a.left,a.right);else{if(void 0===t)break;if(t.constructor===String||t.constructor===Number){let e=i.mapToStyleString(o);u>0||e.length>0?(n.push("%c"+t),r.push(e)):n.push(t)}else break}}for(u>0&&(l=r).unshift(n.join(""));u<e.length;u++){let t=e[u];t instanceof Symbol||l.push(t)}return l}:o.computeNoColorLoggingArgs,u=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log(...l(t)),d.forEach(e=>e.print(t))},c=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];console.warn(...l(t)),t.unshift(o.ORANGE),d.forEach(e=>e.print(t))},d=n.create()},15036:e=>{"use strict";e.s({iteratorFilter:()=>n,iteratorMap:()=>r});let t=e=>({[Symbol.iterator](){return this},next:e}),n=(e,n)=>t(()=>{let t;do t=e.next();while(!t.done&&!n(t.value))return t}),r=(e,n)=>t(()=>{let{done:t,value:r}=e.next();return{done:t,value:t?void 0:n(r)}})},144304:e=>{"use strict";e.s({ContentFormat:()=>tJ,ContentString:()=>t2,ContentType:()=>nt,Doc:()=>R,Item:()=>ns,PermanentUserData:()=>ec,RelativePosition:()=>ed,Snapshot:()=>eb,Text:()=>tL,UndoManager:()=>eW,XmlElement:()=>tU,XmlFragment:()=>tB,XmlText:()=>tV,applyUpdate:()=>G,applyUpdateV2:()=>q,compareRelativePositions:()=>ey,createAbsolutePositionFromRelativePosition:()=>ev,createDeleteSet:()=>T,createID:()=>es,createRelativePositionFromJSON:()=>eh,createRelativePositionFromTypeIndex:()=>eg,createSnapshot:()=>ex,encodeStateAsUpdate:()=>Y,encodeStateAsUpdateV2:()=>K,encodeStateVector:()=>Q,findIndexSS:()=>eT,findRootTypeKey:()=>el,isDeleted:()=>_,isParentOf:()=>eu,iterateDeletedStructs:()=>S,parseUpdateMeta:()=>eK,snapshot:()=>ew,transact:()=>ez,typeListToArraySnapshot:()=>ta});var t=e.i(741240),n=e.i(130807),r=e.i(640738),i=e.i(806879),a=e.i(202956),o=e.i(14743),s=e.i(339305),l=e.i(557932),u=e.i(910405),c=e.i(921520),d=e.i(545467),h=e.i(965632),p=e.i(43200),f=e.i(197665),m=e.i(661376),g=e.i(210766);e.i(586384);var y=e.i(15036),b=e.i(501899),x=e.i(891333);t.ObservableV2;class w{constructor(e,t){this.clock=e,this.len=t}}class k{constructor(){this.clients=new Map}}let S=(e,t,n)=>t.clients.forEach((t,r)=>{let i=e.doc.store.clients.get(r);if(null!=i){let r=i[i.length-1],a=r.id.clock+r.length;for(let r=0,o=t[r];r<t.length&&o.clock<a;o=t[++r])eP(e,i,o.clock,o.len,n)}}),_=(e,t)=>{let n=e.clients.get(t.client);return void 0!==n&&null!==((e,t)=>{let n=0,i=e.length-1;for(;n<=i;){let a=r.floor((n+i)/2),o=e[a],s=o.clock;if(s<=t){if(t<s+o.len)return a;n=a+1}else i=a-1}return null})(n,t.clock)},C=e=>{e.clients.forEach(e=>{let t,n;for(e.sort((e,t)=>e.clock-t.clock),t=1,n=1;t<e.length;t++){let i=e[n-1],a=e[t];i.clock+i.len>=a.clock?i.len=r.max(i.len,a.clock+a.len-i.clock):(n<t&&(e[n]=a),n++)}e.length=n})},A=e=>{let t=new k;for(let r=0;r<e.length;r++)e[r].clients.forEach((i,a)=>{if(!t.clients.has(a)){let o=i.slice();for(let t=r+1;t<e.length;t++)n.appendTo(o,e[t].clients.get(a)||[]);t.clients.set(a,o)}});return C(t),t},E=(e,t,n,r)=>{i.setIfUndefined(e.clients,t,()=>[]).push(new w(n,r))},T=()=>new k,M=e=>{let t=T();return e.clients.forEach((e,n)=>{let r=[];for(let t=0;t<e.length;t++){let n=e[t];if(n.deleted){let i=n.id.clock,a=n.length;if(t+1<e.length)for(let n=e[t+1];t+1<e.length&&n.deleted;n=e[++t+1])a+=n.length;r.push(new w(i,a))}}r.length>0&&t.clients.set(n,r)}),t},I=(e,t)=>{a.writeVarUint(e.restEncoder,t.clients.size),n.from(t.clients.entries()).sort((e,t)=>t[0]-e[0]).forEach(t=>{let[n,r]=t;e.resetDsCurVal(),a.writeVarUint(e.restEncoder,n);let i=r.length;a.writeVarUint(e.restEncoder,i);for(let t=0;t<i;t++){let n=r[t];e.writeDsClock(n.clock),e.writeDsLen(n.len)}})},N=e=>{let t=new k,n=o.readVarUint(e.restDecoder);for(let r=0;r<n;r++){e.resetDsCurVal();let n=o.readVarUint(e.restDecoder),r=o.readVarUint(e.restDecoder);if(r>0){let a=i.setIfUndefined(t.clients,n,()=>[]);for(let t=0;t<r;t++)a.push(new w(e.readDsClock(),e.readDsLen()))}}return t},D=(e,t,n)=>{let r=new k,i=o.readVarUint(e.restDecoder);for(let a=0;a<i;a++){e.resetDsCurVal();let i=o.readVarUint(e.restDecoder),a=o.readVarUint(e.restDecoder),s=n.clients.get(i)||[],l=eA(n,i);for(let n=0;n<a;n++){let n=e.readDsClock(),a=n+e.readDsLen();if(n<l){l<a&&E(r,i,l,a-l);let e=eT(s,n),o=s[e];for(!o.deleted&&o.id.clock<n&&(s.splice(e+1,0,ni(t,o,n-o.id.clock)),e++);e<s.length;)if((o=s[e++]).id.clock<a)o.deleted||(a<o.id.clock+o.length&&s.splice(e,0,ni(t,o,a-o.id.clock)),o.delete(t));else break}else E(r,i,n,a-n)}}if(r.clients.size>0){let e=new H;return a.writeVarUint(e.restEncoder,0),I(e,r),e.toUint8Array()}return null},P=s.uint32;class R extends t.ObservableV2{load(){let e=this._item;null===e||this.shouldLoad||ez(e.parent.doc,e=>{e.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(n.from(this.subdocs).map(e=>e.guid))}transact(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return ez(this,e,t)}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tn,n=i.setIfUndefined(this.share,e,()=>{let e=new t;return e._integrate(this,null),e}),r=n.constructor;if(t!==tn&&r!==t)if(r===tn){let r=new t;r._map=n._map,n._map.forEach(e=>{for(;null!==e;e=e.left)e.parent=r}),r._start=n._start;for(let e=r._start;null!==e;e=e.right)e.parent=r;return r._length=n._length,this.share.set(e,r),r._integrate(this,null),r}else throw Error("Type with the name ".concat(e," has already been defined with a different constructor"));return n}getArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.get(e,tx)}getText(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.get(e,tL)}getMap(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.get(e,tk)}getXmlElement(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.get(e,tU)}getXmlFragment(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.get(e,tB)}toJSON(){let e={};return this.share.forEach((t,n)=>{e[n]=t.toJSON()}),e}destroy(){this.isDestroyed=!0,n.from(this.subdocs).forEach(e=>e.destroy());let e=this._item;if(null!==e){this._item=null;let t=e.content;t.doc=new R({guid:this.guid,...t.opts,shouldLoad:!1}),t.doc._item=e,ez(e.parent.doc,n=>{let r=t.doc;e.deleted||n.subdocsAdded.add(r),n.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}constructor({guid:e=s.uuidv4(),collectionid:t=null,gc:n=!0,gcFilter:r=()=>!0,meta:i=null,autoLoad:a=!1,shouldLoad:o=!0}={}){super(),this.gc=n,this.gcFilter=r,this.clientID=P(),this.guid=e,this.collectionid=t,this.share=new Map,this.store=new e_,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=o,this.autoLoad=a,this.meta=i,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=l.create(e=>{this.on("load",()=>{this.isLoaded=!0,e(this)})});let u=()=>l.create(e=>{let t=n=>{(void 0===n||!0===n)&&(this.off("sync",t),e())};this.on("sync",t)});this.on("sync",e=>{!1===e&&this.isSynced&&(this.whenSynced=u()),this.isSynced=void 0===e||!0===e,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=u()}}class O{resetDsCurVal(){}readDsClock(){return o.readVarUint(this.restDecoder)}readDsLen(){return o.readVarUint(this.restDecoder)}constructor(e){this.restDecoder=e}}class j extends O{readLeftID(){return es(o.readVarUint(this.restDecoder),o.readVarUint(this.restDecoder))}readRightID(){return es(o.readVarUint(this.restDecoder),o.readVarUint(this.restDecoder))}readClient(){return o.readVarUint(this.restDecoder)}readInfo(){return o.readUint8(this.restDecoder)}readString(){return o.readVarString(this.restDecoder)}readParentInfo(){return 1===o.readVarUint(this.restDecoder)}readTypeRef(){return o.readVarUint(this.restDecoder)}readLen(){return o.readVarUint(this.restDecoder)}readAny(){return o.readAny(this.restDecoder)}readBuf(){return u.copyUint8Array(o.readVarUint8Array(this.restDecoder))}readJSON(){return JSON.parse(o.readVarString(this.restDecoder))}readKey(){return o.readVarString(this.restDecoder)}}class F{resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=o.readVarUint(this.restDecoder),this.dsCurrVal}readDsLen(){let e=o.readVarUint(this.restDecoder)+1;return this.dsCurrVal+=e,e}constructor(e){this.dsCurrVal=0,this.restDecoder=e}}class L extends F{readLeftID(){return new ea(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new ea(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return 1===this.parentInfoDecoder.read()}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return o.readAny(this.restDecoder)}readBuf(){return o.readVarUint8Array(this.restDecoder)}readJSON(){return o.readAny(this.restDecoder)}readKey(){let e=this.keyClockDecoder.read();if(e<this.keys.length)return this.keys[e];{let e=this.stringDecoder.read();return this.keys.push(e),e}}constructor(e){super(e),this.keys=[],o.readVarUint(e),this.keyClockDecoder=new o.IntDiffOptRleDecoder(o.readVarUint8Array(e)),this.clientDecoder=new o.UintOptRleDecoder(o.readVarUint8Array(e)),this.leftClockDecoder=new o.IntDiffOptRleDecoder(o.readVarUint8Array(e)),this.rightClockDecoder=new o.IntDiffOptRleDecoder(o.readVarUint8Array(e)),this.infoDecoder=new o.RleDecoder(o.readVarUint8Array(e),o.readUint8),this.stringDecoder=new o.StringDecoder(o.readVarUint8Array(e)),this.parentInfoDecoder=new o.RleDecoder(o.readVarUint8Array(e),o.readUint8),this.typeRefDecoder=new o.UintOptRleDecoder(o.readVarUint8Array(e)),this.lenDecoder=new o.UintOptRleDecoder(o.readVarUint8Array(e))}}class z{toUint8Array(){return a.toUint8Array(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){a.writeVarUint(this.restEncoder,e)}writeDsLen(e){a.writeVarUint(this.restEncoder,e)}constructor(){this.restEncoder=a.createEncoder()}}class B extends z{writeLeftID(e){a.writeVarUint(this.restEncoder,e.client),a.writeVarUint(this.restEncoder,e.clock)}writeRightID(e){a.writeVarUint(this.restEncoder,e.client),a.writeVarUint(this.restEncoder,e.clock)}writeClient(e){a.writeVarUint(this.restEncoder,e)}writeInfo(e){a.writeUint8(this.restEncoder,e)}writeString(e){a.writeVarString(this.restEncoder,e)}writeParentInfo(e){a.writeVarUint(this.restEncoder,+!!e)}writeTypeRef(e){a.writeVarUint(this.restEncoder,e)}writeLen(e){a.writeVarUint(this.restEncoder,e)}writeAny(e){a.writeAny(this.restEncoder,e)}writeBuf(e){a.writeVarUint8Array(this.restEncoder,e)}writeJSON(e){a.writeVarString(this.restEncoder,JSON.stringify(e))}writeKey(e){a.writeVarString(this.restEncoder,e)}}class U{toUint8Array(){return a.toUint8Array(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){let t=e-this.dsCurrVal;this.dsCurrVal=e,a.writeVarUint(this.restEncoder,t)}writeDsLen(e){0===e&&c.unexpectedCase(),a.writeVarUint(this.restEncoder,e-1),this.dsCurrVal+=e}constructor(){this.restEncoder=a.createEncoder(),this.dsCurrVal=0}}class H extends U{toUint8Array(){let e=a.createEncoder();return a.writeVarUint(e,0),a.writeVarUint8Array(e,this.keyClockEncoder.toUint8Array()),a.writeVarUint8Array(e,this.clientEncoder.toUint8Array()),a.writeVarUint8Array(e,this.leftClockEncoder.toUint8Array()),a.writeVarUint8Array(e,this.rightClockEncoder.toUint8Array()),a.writeVarUint8Array(e,a.toUint8Array(this.infoEncoder)),a.writeVarUint8Array(e,this.stringEncoder.toUint8Array()),a.writeVarUint8Array(e,a.toUint8Array(this.parentInfoEncoder)),a.writeVarUint8Array(e,this.typeRefEncoder.toUint8Array()),a.writeVarUint8Array(e,this.lenEncoder.toUint8Array()),a.writeUint8Array(e,a.toUint8Array(this.restEncoder)),a.toUint8Array(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(+!!e)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){a.writeAny(this.restEncoder,e)}writeBuf(e){a.writeVarUint8Array(this.restEncoder,e)}writeJSON(e){a.writeAny(this.restEncoder,e)}writeKey(e){let t=this.keyMap.get(e);void 0===t?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(t)}constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new a.IntDiffOptRleEncoder,this.clientEncoder=new a.UintOptRleEncoder,this.leftClockEncoder=new a.IntDiffOptRleEncoder,this.rightClockEncoder=new a.IntDiffOptRleEncoder,this.infoEncoder=new a.RleEncoder(a.writeUint8),this.stringEncoder=new a.StringEncoder,this.parentInfoEncoder=new a.RleEncoder(a.writeUint8),this.typeRefEncoder=new a.UintOptRleEncoder,this.lenEncoder=new a.UintOptRleEncoder}}let W=(e,t,i)=>{let o=new Map;i.forEach((e,n)=>{eA(t,n)>e&&o.set(n,e)}),eC(t).forEach((e,t)=>{i.has(t)||o.set(t,0)}),a.writeVarUint(e.restEncoder,o.size),n.from(o.entries()).sort((e,t)=>t[0]-e[0]).forEach(n=>{let[i,o]=n;((e,t,n,i)=>{i=r.max(i,t[0].id.clock);let o=eT(t,i);a.writeVarUint(e.restEncoder,t.length-o),e.writeClient(n),a.writeVarUint(e.restEncoder,i);let s=t[o];s.write(e,i-s.id.clock);for(let n=o+1;n<t.length;n++)t[n].write(e,0)})(e,t.clients.get(i),i,o)})},V=function(e,t,r){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new L(e);return ez(t,e=>{e.local=!1;let t=!1,r=e.doc,l=r.store,u=((e,t,r)=>{let o=[],s=n.from(r.keys()).sort((e,t)=>e-t);if(0===s.length)return null;let l=()=>{if(0===s.length)return null;let e=r.get(s[s.length-1]);for(;e.refs.length===e.i;){if(s.pop(),!(s.length>0))return null;e=r.get(s[s.length-1])}return e},u=l();if(null===u)return null;let c=new e_,d=new Map,h=(e,t)=>{let n=d.get(e);(null==n||n>t)&&d.set(e,t)},p=u.refs[u.i++],f=new Map,m=()=>{for(let e of o){let t=e.id.client,n=r.get(t);n?(n.i--,c.clients.set(t,n.refs.slice(n.i)),r.delete(t),n.i=0,n.refs=[]):c.clients.set(t,[e]),s=s.filter(e=>e!==t)}o.length=0};for(;;){if(p.constructor!==nc){let n=i.setIfUndefined(f,p.id.client,()=>eA(t,p.id.client))-p.id.clock;if(n<0)o.push(p),h(p.id.client,p.id.clock-1),m();else{let i=p.getMissing(e,t);if(null!==i){o.push(p);let e=r.get(i)||{refs:[],i:0};if(e.refs.length===e.i)h(i,eA(t,i)),m();else{p=e.refs[e.i++];continue}}else(0===n||n<p.length)&&(p.integrate(e,n),f.set(p.id.client,p.id.clock+p.length))}}if(o.length>0)p=o.pop();else if(null!==u&&u.i<u.refs.length)p=u.refs[u.i++];else{if(null===(u=l()))break;p=u.refs[u.i++]}}if(c.clients.size>0){let e=new H;return W(e,c,new Map),a.writeVarUint(e.restEncoder,0),{missing:d,update:e.toUint8Array()}}return null})(e,l,((e,t)=>{let n=i.create(),r=o.readVarUint(e.restDecoder);for(let i=0;i<r;i++){let r=o.readVarUint(e.restDecoder),i=Array(r),a=e.readClient(),s=o.readVarUint(e.restDecoder);n.set(a,{i:0,refs:i});for(let n=0;n<r;n++){let r=e.readInfo();switch(d.BITS5&r){case 0:{let t=e.readLen();i[n]=new tG(es(a,s),t),s+=t;break}case 10:{let t=o.readVarUint(e.restDecoder);i[n]=new nc(es(a,s),t),s+=t;break}default:{let o=(r&(d.BIT7|d.BIT8))==0,l=new ns(es(a,s),null,(r&d.BIT8)===d.BIT8?e.readLeftID():null,null,(r&d.BIT7)===d.BIT7?e.readRightID():null,o?e.readParentInfo()?t.get(e.readString()):e.readLeftID():null,o&&(r&d.BIT6)===d.BIT6?e.readString():null,nl(e,r));i[n]=l,s+=l.length}}}}return n})(s,r)),c=l.pendingStructs;if(c){for(let[e,n]of c.missing)if(n<eA(l,e)){t=!0;break}if(u){for(let[e,t]of u.missing){let n=c.missing.get(e);(null==n||n>t)&&c.missing.set(e,t)}c.update=eX([c.update,u.update])}}else l.pendingStructs=u;let h=D(s,e,l);if(l.pendingDs){let t=new L(o.createDecoder(l.pendingDs));o.readVarUint(t.restDecoder);let n=D(t,e,l);h&&n?l.pendingDs=eX([h,n]):l.pendingDs=h||n}else l.pendingDs=h;if(t){let t=l.pendingStructs.update;l.pendingStructs=null,q(e.doc,t)}},r,!1)},q=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:L,i=o.createDecoder(t);V(i,e,n,new r(i))},G=(e,t,n)=>q(e,t,n,j),$=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map;W(e,t.store,n),I(e,M(t.store))},K=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint8Array([0]),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new H;$(n,e,X(t));let r=[n.toUint8Array()];if(e.store.pendingDs&&r.push(e.store.pendingDs),e.store.pendingStructs&&r.push(eZ(e.store.pendingStructs.update,t)),r.length>1){if(n.constructor===B)return eG(r.map((e,t)=>0===t?e:e1(e)));else if(n.constructor===H)return eX(r)}return r[0]},Y=(e,t)=>K(e,t,new B),X=e=>(e=>{let t=new Map,n=o.readVarUint(e.restDecoder);for(let r=0;r<n;r++){let n=o.readVarUint(e.restDecoder),r=o.readVarUint(e.restDecoder);t.set(n,r)}return t})(new O(o.createDecoder(e))),Z=(e,t)=>(a.writeVarUint(e.restEncoder,t.size),n.from(t.entries()).sort((e,t)=>t[0]-e[0]).forEach(t=>{let[n,r]=t;a.writeVarUint(e.restEncoder,n),a.writeVarUint(e.restEncoder,r)}),e),J=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new U;return e instanceof Map?Z(t,e):Z(t,eC(e.store)),t.toUint8Array()},Q=e=>J(e,new z);class ee{constructor(){this.l=[]}}let et=()=>new ee,en=(e,t)=>e.l.push(t),er=(e,t)=>{let n=e.l,r=n.length;e.l=n.filter(e=>t!==e),r===e.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},ei=(e,t,n)=>h.callAll(e.l,[t,n]);class ea{constructor(e,t){this.client=e,this.clock=t}}let eo=(e,t)=>e===t||null!==e&&null!==t&&e.client===t.client&&e.clock===t.clock,es=(e,t)=>new ea(e,t),el=e=>{for(let[t,n]of e.doc.share.entries())if(n===e)return t;throw c.unexpectedCase()},eu=(e,t)=>{for(;null!==t;){if(t.parent===e)return!0;t=t.parent._item}return!1};class ec{setUserMapping(e,t,n){let{filter:r=()=>!0}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=this.yusers,a=i.get(n);a||((a=new tk).set("ids",new tx),a.set("ds",new tx),i.set(n,a)),a.get("ids").push([t]),i.observe(e=>{setTimeout(()=>{let e=i.get(n);if(e!==a){a=e,this.clients.forEach((e,t)=>{n===e&&a.get("ids").push([t])});let t=new z,r=this.dss.get(n);r&&(I(t,r),a.get("ds").push([t.toUint8Array()]))}},0)}),e.on("afterTransaction",e=>{setTimeout(()=>{let t=a.get("ds"),n=e.deleteSet;if(e.local&&n.clients.size>0&&r(e,n)){let e=new z;I(e,n),t.push([e.toUint8Array()])}})})}getUserByClientId(e){return this.clients.get(e)||null}getUserByDeletedId(e){for(let[t,n]of this.dss.entries())if(_(n,e))return t;return null}constructor(e,t=e.getMap("users")){let n=new Map;this.yusers=t,this.doc=e,this.clients=new Map,this.dss=n;let r=(e,t)=>{let n=e.get("ds"),r=e.get("ids"),i=e=>this.clients.set(e,t);n.observe(e=>{e.changes.added.forEach(e=>{e.content.getContent().forEach(e=>{e instanceof Uint8Array&&this.dss.set(t,A([this.dss.get(t)||T(),N(new O(o.createDecoder(e)))]))})})}),this.dss.set(t,A(n.map(e=>N(new O(o.createDecoder(e)))))),r.observe(e=>e.changes.added.forEach(e=>e.content.getContent().forEach(i))),r.forEach(i)};t.observe(e=>{e.keysChanged.forEach(e=>r(t.get(e),e))}),t.forEach(r)}}class ed{constructor(e,t,n,r=0){this.type=e,this.tname=t,this.item=n,this.assoc=r}}let eh=e=>{var t;return new ed(null==e.type?null:es(e.type.client,e.type.clock),null!=(t=e.tname)?t:null,null==e.item?null:es(e.item.client,e.item.clock),null==e.assoc?0:e.assoc)};class ep{constructor(e,t,n=0){this.type=e,this.index=t,this.assoc=n}}let ef=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return new ep(e,t,n)},em=(e,t,n)=>{let r=null,i=null;return null===e._item?i=el(e):r=es(e._item.id.client,e._item.id.clock),new ed(r,i,t,n)},eg=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=e._start;if(n<0){if(0===t)return em(e,null,n);t--}for(;null!==r;){if(!r.deleted&&r.countable){if(r.length>t)return em(e,es(r.id.client,r.id.clock+t),n);t-=r.length}if(null===r.right&&n<0)return em(e,r.lastId,n);r=r.right}return em(e,null,n)},ev=function(e,t){let n=!(arguments.length>2)||void 0===arguments[2]||arguments[2],r=t.store,i=e.item,a=e.type,o=e.tname,s=e.assoc,l=null,u=0;if(null!==i){if(eA(r,i.client)<=i.clock)return null;let e=n?nn(r,i):((e,t)=>{let n=eM(e,t),r=t.clock-n.id.clock;return{item:n,diff:r}})(r,i),t=e.item;if(!(t instanceof ns))return null;if(null===(l=t.parent)._item||!l._item.deleted){u=t.deleted||!t.countable?0:e.diff+(s>=0?0:1);let n=t.left;for(;null!==n;)!n.deleted&&n.countable&&(u+=n.length),n=n.left}}else{if(null!==o)l=t.get(o);else if(null!==a){if(eA(r,a.client)<=a.clock)return null;let{item:e}=n?nn(r,a):{item:eM(r,a)};if(!(e instanceof ns)||!(e.content instanceof nt))return null;l=e.content.type}else throw c.unexpectedCase();u=s>=0?l._length:0}return ef(l,u,e.assoc)},ey=(e,t)=>e===t||null!==e&&null!==t&&e.tname===t.tname&&eo(e.item,t.item)&&eo(e.type,t.type)&&e.assoc===t.assoc;class eb{constructor(e,t){this.ds=e,this.sv=t}}let ex=(e,t)=>new eb(e,t);ex(T(),new Map);let ew=e=>ex(M(e.store),eC(e.store)),ek=(e,t)=>void 0===t?!e.deleted:t.sv.has(e.id.client)&&(t.sv.get(e.id.client)||0)>e.id.clock&&!_(t.ds,e.id),eS=(e,t)=>{let n=i.setIfUndefined(e.meta,eS,p.create),r=e.doc.store;n.has(t)||(t.sv.forEach((t,n)=>{t<eA(r,n)&&eN(e,es(n,t))}),S(e,t.ds,e=>{}),n.add(t))};class e_{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}let eC=e=>{let t=new Map;return e.clients.forEach((e,n)=>{let r=e[e.length-1];t.set(n,r.id.clock+r.length)}),t},eA=(e,t)=>{let n=e.clients.get(t);if(void 0===n)return 0;let r=n[n.length-1];return r.id.clock+r.length},eE=(e,t)=>{let n=e.clients.get(t.id.client);if(void 0===n)n=[],e.clients.set(t.id.client,n);else{let e=n[n.length-1];if(e.id.clock+e.length!==t.id.clock)throw c.unexpectedCase()}n.push(t)},eT=(e,t)=>{let n=0,i=e.length-1,a=e[i],o=a.id.clock;if(o===t)return i;let s=r.floor(t/(o+a.length-1)*i);for(;n<=i;){if((o=(a=e[s]).id.clock)<=t){if(t<o+a.length)return s;n=s+1}else i=s-1;s=r.floor((n+i)/2)}throw c.unexpectedCase()},eM=(e,t)=>{let n=e.clients.get(t.client);return n[eT(n,t.clock)]},eI=(e,t,n)=>{let r=eT(t,n),i=t[r];return i.id.clock<n&&i instanceof ns?(t.splice(r+1,0,ni(e,i,n-i.id.clock)),r+1):r},eN=(e,t)=>{let n=e.doc.store.clients.get(t.client);return n[eI(e,n,t.clock)]},eD=(e,t,n)=>{let r=t.clients.get(n.client),i=eT(r,n.clock),a=r[i];return n.clock!==a.id.clock+a.length-1&&a.constructor!==tG&&r.splice(i+1,0,ni(e,a,n.clock-a.id.clock+1)),a},eP=(e,t,n,r,i)=>{let a;if(0===r)return;let o=n+r,s=eI(e,t,n);do o<(a=t[s++]).id.clock+a.length&&eI(e,t,o),i(a);while(s<t.length&&t[s].id.clock<o)};class eR{constructor(e,t,n){this.doc=e,this.deleteSet=new k,this.beforeState=eC(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=t,this.meta=new Map,this.local=n,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}let eO=(e,t)=>(0!==t.deleteSet.clients.size||!!i.any(t.afterState,(e,n)=>t.beforeState.get(n)!==e))&&(C(t.deleteSet),((e,t)=>W(e,t.doc.store,t.beforeState))(e,t),I(e,t.deleteSet),!0),ej=(e,t,n)=>{let r=t._item;(null===r||r.id.clock<(e.beforeState.get(r.id.client)||0)&&!r.deleted)&&i.setIfUndefined(e.changed,t,p.create).add(n)},eF=(e,t)=>{let n=e[t],r=e[t-1],i=t;for(;i>0;n=r,r=e[--i-1]){if(r.deleted===n.deleted&&r.constructor===n.constructor&&r.mergeWith(n)){n instanceof ns&&null!==n.parentSub&&n.parent._map.get(n.parentSub)===n&&n.parent._map.set(n.parentSub,r);continue}break}let a=t-i;return a&&e.splice(t+1-a,a),a},eL=(e,t)=>{if(t<e.length){let n=e[t],i=n.doc,a=i.store,o=n.deleteSet,s=n._mergeStructs;try{C(o),n.afterState=eC(n.doc.store),i.emit("beforeObserverCalls",[n,i]);let e=[];n.changed.forEach((t,r)=>e.push(()=>{null!==r._item&&r._item.deleted||r._callObserver(n,t)})),e.push(()=>{n.changedParentTypes.forEach((e,t)=>{t._dEH.l.length>0&&(null===t._item||!t._item.deleted)&&((e=e.filter(e=>null===e.target._item||!e.target._item.deleted)).forEach(e=>{e.currentTarget=t,e._path=null}),e.sort((e,t)=>e.path.length-t.path.length),ei(t._dEH,e,n))})}),e.push(()=>i.emit("afterTransaction",[n,i])),(0,h.callAll)(e,[]),n._needFormattingCleanup&&tO(n)}finally{i.gc&&((e,t,n)=>{for(let[r,i]of e.clients.entries()){let e=t.clients.get(r);for(let r=i.length-1;r>=0;r--){let a=i[r],o=a.clock+a.len;for(let r=eT(e,a.clock),i=e[r];r<e.length&&i.id.clock<o;i=e[++r]){let i=e[r];if(a.clock+a.len<=i.id.clock)break;i instanceof ns&&i.deleted&&!i.keep&&n(i)&&i.gc(t,!1)}}}})(o,a,i.gcFilter),o.clients.forEach((e,t)=>{let n=a.clients.get(t);for(let t=e.length-1;t>=0;t--){let i=e[t],a=r.min(n.length-1,1+eT(n,i.clock+i.len-1));for(let e=a,t=n[e];e>0&&t.id.clock>=i.clock;t=n[e])e-=1+eF(n,e)}}),n.afterState.forEach((e,t)=>{let i=n.beforeState.get(t)||0;if(i!==e){let e=a.clients.get(t),n=r.max(eT(e,i),1);for(let t=e.length-1;t>=n;)t-=1+eF(e,t)}});for(let e=s.length-1;e>=0;e--){let{client:t,clock:n}=s[e].id,r=a.clients.get(t),i=eT(r,n);!(i+1<r.length&&eF(r,i+1)>1)&&i>0&&eF(r,i)}if(n.local||n.afterState.get(i.clientID)===n.beforeState.get(i.clientID)||(f.print(m.ORANGE,m.BOLD,"[yjs] ",m.UNBOLD,m.RED,"Changed the client-id because another client seems to be using it."),i.clientID=P()),i.emit("afterTransactionCleanup",[n,i]),i._observers.has("update")){let e=new B;eO(e,n)&&i.emit("update",[e.toUint8Array(),n.origin,i,n])}if(i._observers.has("updateV2")){let e=new H;eO(e,n)&&i.emit("updateV2",[e.toUint8Array(),n.origin,i,n])}let{subdocsAdded:l,subdocsLoaded:u,subdocsRemoved:c}=n;(l.size>0||c.size>0||u.size>0)&&(l.forEach(e=>{e.clientID=i.clientID,null==e.collectionid&&(e.collectionid=i.collectionid),i.subdocs.add(e)}),c.forEach(e=>i.subdocs.delete(e)),i.emit("subdocs",[{loaded:u,added:l,removed:c},i,n]),c.forEach(e=>e.destroy())),e.length<=t+1?(i._transactionCleanups=[],i.emit("afterAllTransactions",[i,e])):eL(e,t+1)}}},ez=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=!(arguments.length>3)||void 0===arguments[3]||arguments[3],i=e._transactionCleanups,a=!1,o=null;null===e._transaction&&(a=!0,e._transaction=new eR(e,n,r),i.push(e._transaction),1===i.length&&e.emit("beforeAllTransactions",[e]),e.emit("beforeTransaction",[e._transaction,e]));try{o=t(e._transaction)}finally{if(a){let t=e._transaction===i[0];e._transaction=null,t&&eL(i,0)}}return o};class eB{constructor(e,t){this.insertions=t,this.deletions=e,this.meta=new Map}}let eU=(e,t,n)=>{S(e,n.deletions,n=>{n instanceof ns&&t.scope.some(t=>t===e.doc||eu(t,n))&&nr(n,!1)})},eH=(e,t,n)=>{let r=null,i=e.doc,a=e.scope;ez(i,n=>{for(;t.length>0&&null===e.currStackItem;){let r=i.store,o=t.pop(),s=new Set,l=[],u=!1;S(n,o.insertions,e=>{if(e instanceof ns){if(null!==e.redone){let{item:t,diff:i}=nn(r,e.id);i>0&&(t=eN(n,es(t.id.client,t.id.clock+i))),e=t}!e.deleted&&a.some(t=>t===n.doc||eu(t,e))&&l.push(e)}}),S(n,o.deletions,e=>{e instanceof ns&&a.some(t=>t===n.doc||eu(t,e))&&!_(o.insertions,e.id)&&s.add(e)}),s.forEach(t=>{u=null!==no(n,t,s,o.insertions,e.ignoreRemoteMapChanges,e)||u});for(let t=l.length-1;t>=0;t--){let r=l[t];e.deleteFilter(r)&&(r.delete(n),u=!0)}e.currStackItem=u?o:null}n.changed.forEach((e,t)=>{e.has(null)&&t._searchMarker&&(t._searchMarker.length=0)}),r=n},e);let o=e.currStackItem;if(null!=o){let t=r.changedParentTypes;e.emit("stack-item-popped",[{stackItem:o,type:n,changedParentTypes:t,origin:e},e]),e.currStackItem=null}return o};class eW extends t.ObservableV2{addToScope(e){let t=new Set(this.scope);(e=n.isArray(e)?e:[e]).forEach(e=>{t.has(e)||(t.add(e),(e instanceof tn?e.doc!==this.doc:e!==this.doc)&&f.warn("[yjs#509] Not same Y.Doc"),this.scope.push(e))})}addTrackedOrigin(e){this.trackedOrigins.add(e)}removeTrackedOrigin(e){this.trackedOrigins.delete(e)}clear(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];(e&&this.canUndo()||t&&this.canRedo())&&this.doc.transact(n=>{e&&(this.undoStack.forEach(e=>eU(n,this,e)),this.undoStack=[]),t&&(this.redoStack.forEach(e=>eU(n,this,e)),this.redoStack=[]),this.emit("stack-cleared",[{undoStackCleared:e,redoStackCleared:t}])})}stopCapturing(){this.lastChange=0}undo(){let e;this.undoing=!0;try{e=eH(this,this.undoStack,"undo")}finally{this.undoing=!1}return e}redo(){let e;this.redoing=!0;try{e=eH(this,this.redoStack,"redo")}finally{this.redoing=!1}return e}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}destroy(){this.trackedOrigins.delete(this),this.doc.off("afterTransaction",this.afterTransactionHandler),super.destroy()}constructor(e,{captureTimeout:t=500,captureTransaction:r=e=>!0,deleteFilter:i=()=>!0,trackedOrigins:a=new Set([null]),ignoreRemoteMapChanges:o=!1,doc:s=n.isArray(e)?e[0].doc:e instanceof R?e:e.doc}={}){super(),this.scope=[],this.doc=s,this.addToScope(e),this.deleteFilter=i,a.add(this),this.trackedOrigins=a,this.captureTransaction=r,this.undoStack=[],this.redoStack=[],this.undoing=!1,this.redoing=!1,this.currStackItem=null,this.lastChange=0,this.ignoreRemoteMapChanges=o,this.captureTimeout=t,this.afterTransactionHandler=e=>{if(!this.captureTransaction(e)||!this.scope.some(t=>e.changedParentTypes.has(t)||t===this.doc)||!this.trackedOrigins.has(e.origin)&&(!e.origin||!this.trackedOrigins.has(e.origin.constructor)))return;let t=this.undoing,n=this.redoing,r=t?this.redoStack:this.undoStack;t?this.stopCapturing():n||this.clear(!1,!0);let i=new k;e.afterState.forEach((t,n)=>{let r=e.beforeState.get(n)||0,a=t-r;a>0&&E(i,n,r,a)});let a=g.getUnixTime(),o=!1;if(this.lastChange>0&&a-this.lastChange<this.captureTimeout&&r.length>0&&!t&&!n){let t=r[r.length-1];t.deletions=A([t.deletions,e.deleteSet]),t.insertions=A([t.insertions,i])}else r.push(new eB(e.deleteSet,i)),o=!0;t||n||(this.lastChange=a),S(e,e.deleteSet,t=>{t instanceof ns&&this.scope.some(n=>n===e.doc||eu(n,t))&&nr(t,!0)});let s=[{stackItem:r[r.length-1],origin:e.origin,type:t?"redo":"undo",changedParentTypes:e.changedParentTypes},this];o?this.emit("stack-item-added",s):this.emit("stack-item-updated",s)},this.doc.on("afterTransaction",this.afterTransactionHandler),this.doc.on("destroy",()=>{this.destroy()})}}class eV{next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&null!==this.curr&&this.curr.constructor===nc)return this.curr}constructor(e,t){this.gen=function*(e){let t=o.readVarUint(e.restDecoder);for(let n=0;n<t;n++){let t=o.readVarUint(e.restDecoder),n=e.readClient(),r=o.readVarUint(e.restDecoder);for(let i=0;i<t;i++){let t=e.readInfo();if(10===t){let t=o.readVarUint(e.restDecoder);yield new nc(es(n,r),t),r+=t}else if((d.BITS5&t)!=0){let i=(t&(d.BIT7|d.BIT8))==0,a=new ns(es(n,r),null,(t&d.BIT8)===d.BIT8?e.readLeftID():null,null,(t&d.BIT7)===d.BIT7?e.readRightID():null,i?e.readParentInfo()?e.readString():e.readLeftID():null,i&&(t&d.BIT6)===d.BIT6?e.readString():null,nl(e,t));yield a,r+=a.length}else{let t=e.readLen();yield new tG(es(n,r),t),r+=t}}}}(e),this.curr=null,this.done=!1,this.filterSkips=t,this.next()}}class eq{constructor(e){this.currClient=0,this.startClock=0,this.written=0,this.encoder=e,this.clientStructs=[]}}let eG=e=>eX(e,j,B),e$=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L,n=new Map,r=new Map,i=new eV(new t(o.createDecoder(e)),!1),a=i.curr;if(null!==a){let e=a.id.client,t=a.id.clock;for(n.set(e,t);null!==a;a=i.next())e!==a.id.client&&(r.set(e,t),n.set(a.id.client,a.id.clock),e=a.id.client),t=a.id.clock+a.length;r.set(e,t)}return{from:n,to:r}},eK=e=>e$(e,j),eY=(e,t)=>{if(e.constructor===tG){let{client:n,clock:r}=e.id;return new tG(es(n,r+t),e.length-t)}if(e.constructor===nc){let{client:n,clock:r}=e.id;return new nc(es(n,r+t),e.length-t)}{let{client:n,clock:r}=e.id;return new ns(es(n,r+t),null,es(n,r+t-1),null,e.rightOrigin,e.parent,e.parentSub,e.content.splice(t))}},eX=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:H;if(1===e.length)return e[0];let r=e.map(e=>new t(o.createDecoder(e))),i=r.map(e=>new eV(e,!0)),a=null,s=new n,l=new eq(s);for(;(i=i.filter(e=>null!==e.curr)).sort((e,t)=>{if(e.curr.id.client!==t.curr.id.client)return t.curr.id.client-e.curr.id.client;{let n=e.curr.id.clock-t.curr.id.clock;return 0===n?e.curr.constructor===t.curr.constructor?0:e.curr.constructor===nc?1:-1:n}}),0!==i.length;){let e=i[0],t=e.curr.id.client;if(null!==a){let n=e.curr,r=!1;for(;null!==n&&n.id.clock+n.length<=a.struct.id.clock+a.struct.length&&n.id.client>=a.struct.id.client;)n=e.next(),r=!0;if(null===n||n.id.client!==t||r&&n.id.clock>a.struct.id.clock+a.struct.length)continue;if(t!==a.struct.id.client)eQ(l,a.struct,a.offset),a={struct:n,offset:0},e.next();else if(a.struct.id.clock+a.struct.length<n.id.clock)if(a.struct.constructor===nc)a.struct.length=n.id.clock+n.length-a.struct.id.clock;else{eQ(l,a.struct,a.offset);let e=n.id.clock-a.struct.id.clock-a.struct.length;a={struct:new nc(es(t,a.struct.id.clock+a.struct.length),e),offset:0}}else{let t=a.struct.id.clock+a.struct.length-n.id.clock;t>0&&(a.struct.constructor===nc?a.struct.length-=t:n=eY(n,t)),a.struct.mergeWith(n)||(eQ(l,a.struct,a.offset),a={struct:n,offset:0},e.next())}}else a={struct:e.curr,offset:0},e.next();for(let n=e.curr;null!==n&&n.id.client===t&&n.id.clock===a.struct.id.clock+a.struct.length&&n.constructor!==nc;n=e.next())eQ(l,a.struct,a.offset),a={struct:n,offset:0}}return null!==a&&(eQ(l,a.struct,a.offset),a=null),e0(l),I(s,A(r.map(e=>N(e)))),s.toUint8Array()},eZ=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:L,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:H,a=X(t),s=new i,l=new eq(s),u=new n(o.createDecoder(e)),c=new eV(u,!1);for(;c.curr;){let e=c.curr,t=e.id.client,n=a.get(t)||0;if(c.curr.constructor===nc){c.next();continue}if(e.id.clock+e.length>n)for(eQ(l,e,r.max(n-e.id.clock,0)),c.next();c.curr&&c.curr.id.client===t;)eQ(l,c.curr,0),c.next();else for(;c.curr&&c.curr.id.client===t&&c.curr.id.clock+c.curr.length<=n;)c.next()}return e0(l),I(s,N(u)),s.toUint8Array()},eJ=e=>{e.written>0&&(e.clientStructs.push({written:e.written,restEncoder:a.toUint8Array(e.encoder.restEncoder)}),e.encoder.restEncoder=a.createEncoder(),e.written=0)},eQ=(e,t,n)=>{e.written>0&&e.currClient!==t.id.client&&eJ(e),0===e.written&&(e.currClient=t.id.client,e.encoder.writeClient(t.id.client),a.writeVarUint(e.encoder.restEncoder,t.id.clock+n)),t.write(e.encoder,n),e.written++},e0=e=>{eJ(e);let t=e.encoder.restEncoder;a.writeVarUint(t,e.clientStructs.length);for(let n=0;n<e.clientStructs.length;n++){let r=e.clientStructs[n];a.writeVarUint(t,r.written),a.writeUint8Array(t,r.restEncoder)}},e1=e=>((e,t,n,r)=>{let i=new n(o.createDecoder(e)),a=new eV(i,!1),s=new r,l=new eq(s);for(let e=a.curr;null!==e;e=a.next())eQ(l,t(e),0);return e0(l),I(s,N(i)),s.toUint8Array()})(e,h.id,L,B),e2="You must not compute changes after the event-handler fired.";class e3{get path(){return this._path||(this._path=e5(this.currentTarget,this.target))}deletes(e){return _(this.transaction.deleteSet,e.id)}get keys(){if(null===this._keys){if(0===this.transaction.doc._transactionCleanups.length)throw c.create(e2);let e=new Map,t=this.target;this.transaction.changed.get(t).forEach(r=>{if(null!==r){let i,a,o=t._map.get(r);if(this.adds(o)){let e=o.left;for(;null!==e&&this.adds(e);)e=e.left;if(this.deletes(o))if(!(null!==e&&this.deletes(e)))return;else i="delete",a=n.last(e.content.getContent());else null!==e&&this.deletes(e)?(i="update",a=n.last(e.content.getContent())):(i="add",a=void 0)}else{if(!this.deletes(o))return;i="delete",a=n.last(o.content.getContent())}e.set(r,{action:i,oldValue:a})}}),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(null===e){if(0===this.transaction.doc._transactionCleanups.length)throw c.create(e2);let t=this.target,n=p.create(),r=p.create(),i=[];if(e={added:n,deleted:r,delta:i,keys:this.keys},this.transaction.changed.get(t).has(null)){let e=null,a=()=>{e&&i.push(e)};for(let i=t._start;null!==i;i=i.right)i.deleted?this.deletes(i)&&!this.adds(i)&&((null===e||void 0===e.delete)&&(a(),e={delete:0}),e.delete+=i.length,r.add(i)):this.adds(i)?((null===e||void 0===e.insert)&&(a(),e={insert:[]}),e.insert=e.insert.concat(i.content.getContent()),n.add(i)):((null===e||void 0===e.retain)&&(a(),e={retain:0}),e.retain+=i.length);null!==e&&void 0===e.retain&&a()}this._changes=e}return e}constructor(e,t){this.target=e,this.currentTarget=e,this.transaction=t,this._changes=null,this._keys=null,this._delta=null,this._path=null}}let e5=(e,t)=>{let n=[];for(;null!==t._item&&t!==e;){if(null!==t._item.parentSub)n.unshift(t._item.parentSub);else{let e=0,r=t._item.parent._start;for(;r!==t._item&&null!==r;)!r.deleted&&r.countable&&(e+=r.length),r=r.right;n.unshift(e)}t=t._item.parent}return n},e4=()=>{f.warn("Invalid access: Add Yjs type to a document before reading data.")},e9=0;class e8{constructor(e,t){e.marker=!0,this.p=e,this.index=t,this.timestamp=e9++}}let e6=(e,t,n)=>{e.p.marker=!1,e.p=t,t.marker=!0,e.index=n,e.timestamp=e9++},e7=(e,t)=>{if(null===e._start||0===t||null===e._searchMarker)return null;let n=0===e._searchMarker.length?null:e._searchMarker.reduce((e,n)=>r.abs(t-e.index)<r.abs(t-n.index)?e:n),i=e._start,a=0;for(null!==n&&(i=n.p,a=n.index,n.timestamp=e9++);null!==i.right&&a<t;){if(!i.deleted&&i.countable){if(t<a+i.length)break;a+=i.length}i=i.right}for(;null!==i.left&&a>t;)!(i=i.left).deleted&&i.countable&&(a-=i.length);for(;null!==i.left&&i.left.id.client===i.id.client&&i.left.id.clock+i.left.length===i.id.clock;)!(i=i.left).deleted&&i.countable&&(a-=i.length);return null!==n&&r.abs(n.index-a)<i.parent.length/80?(e6(n,i,a),n):((e,t,n)=>{if(e.length>=80){let r=e.reduce((e,t)=>e.timestamp<t.timestamp?e:t);return e6(r,t,n),r}{let r=new e8(t,n);return e.push(r),r}})(e._searchMarker,i,a)},te=(e,t,n)=>{for(let i=e.length-1;i>=0;i--){let a=e[i];if(n>0){let t=a.p;for(t.marker=!1;t&&(t.deleted||!t.countable);)(t=t.left)&&!t.deleted&&t.countable&&(a.index-=t.length);if(null===t||!0===t.marker){e.splice(i,1);continue}a.p=t,t.marker=!0}(t<a.index||n>0&&t===a.index)&&(a.index=r.max(t,a.index+n))}},tt=(e,t,n)=>{let r=e,a=t.changedParentTypes;for(;i.setIfUndefined(a,e,()=>[]).push(n),null!==e._item;)e=e._item.parent;ei(r._eH,n,t)};class tn{get parent(){return this._item?this._item.parent:null}_integrate(e,t){this.doc=e,this._item=t}_copy(){throw c.methodUnimplemented()}clone(){throw c.methodUnimplemented()}_write(e){}get _first(){let e=this._start;for(;null!==e&&e.deleted;)e=e.right;return e}_callObserver(e,t){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){en(this._eH,e)}observeDeep(e){en(this._dEH,e)}unobserve(e){er(this._eH,e)}unobserveDeep(e){er(this._dEH,e)}toJSON(){}constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=et(),this._dEH=et(),this._searchMarker=null}}let tr=(e,t,n)=>{null!=e.doc||e4(),t<0&&(t=e._length+t),n<0&&(n=e._length+n);let r=n-t,i=[],a=e._start;for(;null!==a&&r>0;){if(a.countable&&!a.deleted){let e=a.content.getContent();if(e.length<=t)t-=e.length;else{for(let n=t;n<e.length&&r>0;n++)i.push(e[n]),r--;t=0}}a=a.right}return i},ti=e=>{null!=e.doc||e4();let t=[],n=e._start;for(;null!==n;){if(n.countable&&!n.deleted){let e=n.content.getContent();for(let n=0;n<e.length;n++)t.push(e[n])}n=n.right}return t},ta=(e,t)=>{let n=[],r=e._start;for(;null!==r;){if(r.countable&&ek(r,t)){let e=r.content.getContent();for(let t=0;t<e.length;t++)n.push(e[t])}r=r.right}return n},to=(e,t)=>{let n=0,r=e._start;for(null!=e.doc||e4();null!==r;){if(r.countable&&!r.deleted){let i=r.content.getContent();for(let r=0;r<i.length;r++)t(i[r],n++,e)}r=r.right}},ts=(e,t)=>{let n=[];return to(e,(r,i)=>{n.push(t(r,i,e))}),n},tl=(e,t)=>{null!=e.doc||e4();let n=e7(e,t),r=e._start;for(null!==n&&(r=n.p,t-=n.index);null!==r;r=r.right)if(!r.deleted&&r.countable){if(t<r.length)return r.content.getContent()[t];t-=r.length}},tu=(e,t,n,r)=>{let i=n,a=e.doc,o=a.clientID,s=a.store,l=null===n?t._start:n.right,u=[],c=()=>{u.length>0&&((i=new ns(es(o,eA(s,o)),i,i&&i.lastId,l,l&&l.id,t,null,new t1(u))).integrate(e,0),u=[])};r.forEach(n=>{if(null===n)u.push(n);else switch(n.constructor){case Number:case Object:case Boolean:case Array:case String:u.push(n);break;default:switch(c(),n.constructor){case Uint8Array:case ArrayBuffer:(i=new ns(es(o,eA(s,o)),i,i&&i.lastId,l,l&&l.id,t,null,new t$(new Uint8Array(n)))).integrate(e,0);break;case R:(i=new ns(es(o,eA(s,o)),i,i&&i.lastId,l,l&&l.id,t,null,new tX(n))).integrate(e,0);break;default:if(n instanceof tn)(i=new ns(es(o,eA(s,o)),i,i&&i.lastId,l,l&&l.id,t,null,new nt(n))).integrate(e,0);else throw Error("Unexpected content type in insert operation")}}}),c()},tc=()=>c.create("Length exceeded!"),td=(e,t,n,r)=>{if(n>t._length)throw tc();if(0===n)return t._searchMarker&&te(t._searchMarker,n,r.length),tu(e,t,null,r);let i=n,a=e7(t,n),o=t._start;for(null!==a&&(o=a.p,0==(n-=a.index)&&(n+=(o=o.prev)&&o.countable&&!o.deleted?o.length:0));null!==o;o=o.right)if(!o.deleted&&o.countable){if(n<=o.length){n<o.length&&eN(e,es(o.id.client,o.id.clock+n));break}n-=o.length}return t._searchMarker&&te(t._searchMarker,i,r.length),tu(e,t,o,r)},th=(e,t,n,r)=>{if(0===r)return;let i=n,a=r,o=e7(t,n),s=t._start;for(null!==o&&(s=o.p,n-=o.index);null!==s&&n>0;s=s.right)!s.deleted&&s.countable&&(n<s.length&&eN(e,es(s.id.client,s.id.clock+n)),n-=s.length);for(;r>0&&null!==s;)s.deleted||(r<s.length&&eN(e,es(s.id.client,s.id.clock+r)),s.delete(e),r-=s.length),s=s.right;if(r>0)throw tc();t._searchMarker&&te(t._searchMarker,i,-a+r)},tp=(e,t,n)=>{let r=t._map.get(n);void 0!==r&&r.delete(e)},tf=(e,t,n,r)=>{let i,a=t._map.get(n)||null,o=e.doc,s=o.clientID;if(null==r)i=new t1([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:case Date:case BigInt:i=new t1([r]);break;case Uint8Array:i=new t$(r);break;case R:i=new tX(r);break;default:if(r instanceof tn)i=new nt(r);else throw Error("Unexpected content type")}new ns(es(s,eA(o.store,s)),a,a&&a.lastId,null,null,t,n,i).integrate(e,0)},tm=(e,t)=>{null!=e.doc||e4();let n=e._map.get(t);return void 0===n||n.deleted?void 0:n.content.getContent()[n.length-1]},tg=e=>{let t={};return null!=e.doc||e4(),e._map.forEach((e,n)=>{e.deleted||(t[n]=e.content.getContent()[e.length-1])}),t},tv=(e,t)=>{null!=e.doc||e4();let n=e._map.get(t);return void 0!==n&&!n.deleted},ty=e=>(null!=e.doc||e4(),y.iteratorFilter(e._map.entries(),e=>!e[1].deleted));class tb extends e3{}class tx extends tn{static from(e){let t=new tx;return t.push(e),t}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new tx}clone(){let e=new tx;return e.insert(0,this.toArray().map(e=>e instanceof tn?e.clone():e)),e}get length(){return null!=this.doc||e4(),this._length}_callObserver(e,t){super._callObserver(e,t),tt(this,e,new tb(this,e))}insert(e,t){null!==this.doc?ez(this.doc,n=>{td(n,this,e,t)}):this._prelimContent.splice(e,0,...t)}push(e){null!==this.doc?ez(this.doc,t=>{((e,t,n)=>{let r=(t._searchMarker||[]).reduce((e,t)=>t.index>e.index?t:e,{index:0,p:t._start}).p;if(r)for(;r.right;)r=r.right;return tu(e,t,r,n)})(t,this,e)}):this._prelimContent.push(...e)}unshift(e){this.insert(0,e)}delete(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;null!==this.doc?ez(this.doc,n=>{th(n,this,e,t)}):this._prelimContent.splice(e,t)}get(e){return tl(this,e)}toArray(){return ti(this)}slice(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;return tr(this,e,t)}toJSON(){return this.map(e=>e instanceof tn?e.toJSON():e)}map(e){return ts(this,e)}forEach(e){to(this,e)}[Symbol.iterator](){let e,t,n;return e=this._start,t=null,n=0,{[Symbol.iterator](){return this},next:()=>{if(null===t){for(;null!==e&&e.deleted;)e=e.right;if(null===e)return{done:!0,value:void 0};t=e.content.getContent(),n=0,e=e.right}let r=t[n++];return t.length<=n&&(t=null),{done:!1,value:r}}}}_write(e){e.writeTypeRef(t5)}constructor(){super(),this._prelimContent=[],this._searchMarker=[]}}class tw extends e3{constructor(e,t,n){super(e,t),this.keysChanged=n}}class tk extends tn{_integrate(e,t){super._integrate(e,t),this._prelimContent.forEach((e,t)=>{this.set(t,e)}),this._prelimContent=null}_copy(){return new tk}clone(){let e=new tk;return this.forEach((t,n)=>{e.set(n,t instanceof tn?t.clone():t)}),e}_callObserver(e,t){tt(this,e,new tw(this,e,t))}toJSON(){null!=this.doc||e4();let e={};return this._map.forEach((t,n)=>{if(!t.deleted){let r=t.content.getContent()[t.length-1];e[n]=r instanceof tn?r.toJSON():r}}),e}get size(){return[...ty(this)].length}keys(){return y.iteratorMap(ty(this),e=>e[0])}values(){return y.iteratorMap(ty(this),e=>e[1].content.getContent()[e[1].length-1])}entries(){return y.iteratorMap(ty(this),e=>[e[0],e[1].content.getContent()[e[1].length-1]])}forEach(e){null!=this.doc||e4(),this._map.forEach((t,n)=>{t.deleted||e(t.content.getContent()[t.length-1],n,this)})}[Symbol.iterator](){return this.entries()}delete(e){null!==this.doc?ez(this.doc,t=>{tp(t,this,e)}):this._prelimContent.delete(e)}set(e,t){return null!==this.doc?ez(this.doc,n=>{tf(n,this,e,t)}):this._prelimContent.set(e,t),t}get(e){return tm(this,e)}has(e){return tv(this,e)}clear(){null!==this.doc?ez(this.doc,e=>{this.forEach(function(t,n,r){tp(e,r,n)})}):this._prelimContent.clear()}_write(e){e.writeTypeRef(t4)}constructor(e){super(),this._prelimContent=null,void 0===e?this._prelimContent=new Map:this._prelimContent=new Map(e)}}let tS=(e,t)=>e===t||"object"==typeof e&&"object"==typeof t&&e&&t&&b.equalFlat(e,t);class t_{forward(){null===this.right&&c.unexpectedCase(),this.right.content.constructor===tJ?this.right.deleted||tT(this.currentAttributes,this.right.content):this.right.deleted||(this.index+=this.right.length),this.left=this.right,this.right=this.right.right}constructor(e,t,n,r){this.left=e,this.right=t,this.index=n,this.currentAttributes=r}}let tC=(e,t,n)=>{for(;null!==t.right&&n>0;)t.right.content.constructor===tJ?t.right.deleted||tT(t.currentAttributes,t.right.content):t.right.deleted||(n<t.right.length&&eN(e,es(t.right.id.client,t.right.id.clock+n)),t.index+=t.right.length,n-=t.right.length),t.left=t.right,t.right=t.right.right;return t},tA=(e,t,n,r)=>{let i=new Map,a=r?e7(t,n):null;return a?tC(e,new t_(a.p.left,a.p,a.index,i),n-a.index):tC(e,new t_(null,t._start,0,i),n)},tE=(e,t,n,r)=>{for(;null!==n.right&&(!0===n.right.deleted||n.right.content.constructor===tJ&&tS(r.get(n.right.content.key),n.right.content.value));)n.right.deleted||r.delete(n.right.content.key),n.forward();let i=e.doc,a=i.clientID;r.forEach((r,o)=>{let s=n.left,l=n.right,u=new ns(es(a,eA(i.store,a)),s,s&&s.lastId,l,l&&l.id,t,null,new tJ(o,r));u.integrate(e,0),n.right=u,n.forward()})},tT=(e,t)=>{let{key:n,value:r}=t;null===r?e.delete(n):e.set(n,r)},tM=(e,t)=>{for(;;){var n;if(null===e.right)break;if(e.right.deleted||e.right.content.constructor===tJ&&tS(null!=(n=t[e.right.content.key])?n:null,e.right.content.value));else break;e.forward()}},tI=(e,t,n,r)=>{let i=e.doc,a=i.clientID,o=new Map;for(let l in r){var s;let u=r[l],c=null!=(s=n.currentAttributes.get(l))?s:null;if(!tS(c,u)){o.set(l,c);let{left:r,right:s}=n;n.right=new ns(es(a,eA(i.store,a)),r,r&&r.lastId,s,s&&s.id,t,null,new tJ(l,u)),n.right.integrate(e,0),n.forward()}}return o},tN=(e,t,n,r,i)=>{n.currentAttributes.forEach((e,t)=>{void 0===i[t]&&(i[t]=null)});let a=e.doc,o=a.clientID;tM(n,i);let s=tI(e,t,n,i),l=r.constructor===String?new t2(r):r instanceof tn?new nt(r):new tZ(r),{left:u,right:c,index:d}=n;t._searchMarker&&te(t._searchMarker,n.index,l.getLength()),(c=new ns(es(o,eA(a.store,o)),u,u&&u.lastId,c,c&&c.id,t,null,l)).integrate(e,0),n.right=c,n.index=d,n.forward(),tE(e,t,n,s)},tD=(e,t,n,r,i)=>{let a=e.doc,o=a.clientID;tM(n,i);let s=tI(e,t,n,i);for(;null!==n.right&&(r>0||s.size>0&&(n.right.deleted||n.right.content.constructor===tJ));){if(!n.right.deleted)if(n.right.content.constructor===tJ){let{key:t,value:a}=n.right.content,o=i[t];if(void 0!==o){if(tS(o,a))s.delete(t);else{if(0===r)break;s.set(t,a)}n.right.delete(e)}else n.currentAttributes.set(t,a)}else r<n.right.length&&eN(e,es(n.right.id.client,n.right.id.clock+r)),r-=n.right.length;n.forward()}if(r>0){let i="";for(;r>0;r--)i+="\n";n.right=new ns(es(o,eA(a.store,o)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,t,null,new t2(i)),n.right.integrate(e,0),n.forward()}tE(e,t,n,s)},tP=(e,t,n,r,a)=>{let o=t,s=i.create();for(;o&&(!o.countable||o.deleted);){if(!o.deleted&&o.content.constructor===tJ){let e=o.content;s.set(e.key,e)}o=o.right}let l=0,u=!1;for(;t!==o;){if(n===t&&(u=!0),!t.deleted){let n=t.content;if(n.constructor===tJ){var c,d;let{key:i,value:o}=n,h=null!=(c=r.get(i))?c:null;(s.get(i)!==n||h===o)&&(t.delete(e),l++,u||(null!=(d=a.get(i))?d:null)!==o||h===o||(null===h?a.delete(i):a.set(i,h))),u||t.deleted||tT(a,n)}}t=t.right}return l},tR=e=>{let t=0;return ez(e.doc,n=>{let r=e._start,a=e._start,o=i.create(),s=i.copy(o);for(;a;)!1===a.deleted&&(a.content.constructor===tJ?tT(s,a.content):(t+=tP(n,r,a,o,s),o=i.copy(s),r=a)),a=a.right}),t},tO=e=>{let t=new Set,n=e.doc;for(let[r,i]of e.afterState.entries()){let a=e.beforeState.get(r)||0;i!==a&&eP(e,n.store.clients.get(r),a,i,e=>{e.deleted||e.content.constructor!==tJ||e.constructor===tG||t.add(e.parent)})}ez(n,n=>{for(let r of(S(e,e.deleteSet,e=>{if(e instanceof tG||!e.parent._hasFormatting||t.has(e.parent))return;let r=e.parent;e.content.constructor===tJ?t.add(r):((e,t)=>{for(;t&&t.right&&(t.right.deleted||!t.right.countable);)t=t.right;let n=new Set;for(;t&&(t.deleted||!t.countable);){if(!t.deleted&&t.content.constructor===tJ){let r=t.content.key;n.has(r)?t.delete(e):n.add(r)}t=t.left}})(n,e)}),t))tR(r)})},tj=(e,t,n)=>{let r=n,a=i.copy(t.currentAttributes),o=t.right;for(;n>0&&null!==t.right;){if(!1===t.right.deleted)switch(t.right.content.constructor){case nt:case tZ:case t2:n<t.right.length&&eN(e,es(t.right.id.client,t.right.id.clock+n)),n-=t.right.length,t.right.delete(e)}t.forward()}o&&tP(e,o,t.right,a,t.currentAttributes);let s=(t.left||t.right).parent;return s._searchMarker&&te(s._searchMarker,t.index,-r+n),t};class tF extends e3{get changes(){if(null===this._changes){let e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(null===this._delta){let e=this.target.doc,t=[];ez(e,e=>{let n=new Map,r=new Map,i=this.target._start,a=null,o={},s="",l=0,u=0,c=()=>{if(null!==a){let e=null;switch(a){case"delete":u>0&&(e={delete:u}),u=0;break;case"insert":("object"==typeof s||s.length>0)&&(e={insert:s},n.size>0&&(e.attributes={},n.forEach((t,n)=>{null!==t&&(e.attributes[n]=t)}))),s="";break;case"retain":l>0&&(e={retain:l},b.isEmpty(o)||(e.attributes=b.assign({},o))),l=0}e&&t.push(e),a=null}};for(;null!==i;){switch(i.content.constructor){case nt:case tZ:this.adds(i)?this.deletes(i)||(c(),a="insert",s=i.content.getContent()[0],c()):this.deletes(i)?("delete"!==a&&(c(),a="delete"),u+=1):i.deleted||("retain"!==a&&(c(),a="retain"),l+=1);break;case t2:this.adds(i)?this.deletes(i)||("insert"!==a&&(c(),a="insert"),s+=i.content.str):this.deletes(i)?("delete"!==a&&(c(),a="delete"),u+=i.length):i.deleted||("retain"!==a&&(c(),a="retain"),l+=i.length);break;case tJ:{var d,h,p;let{key:t,value:s}=i.content;if(this.adds(i))this.deletes(i)||(tS(null!=(d=n.get(t))?d:null,s)?null!==s&&i.delete(e):("retain"===a&&c(),tS(s,null!=(h=r.get(t))?h:null)?delete o[t]:o[t]=s));else if(this.deletes(i)){r.set(t,s);let e=null!=(p=n.get(t))?p:null;tS(e,s)||("retain"===a&&c(),o[t]=e)}else if(!i.deleted){r.set(t,s);let n=o[t];void 0!==n&&(tS(n,s)?null!==n&&i.delete(e):("retain"===a&&c(),null===s?delete o[t]:o[t]=s))}i.deleted||("insert"===a&&c(),tT(n,i.content))}}i=i.right}for(c();t.length>0;){let e=t[t.length-1];if(void 0!==e.retain&&void 0===e.attributes)t.pop();else break}}),this._delta=t}return this._delta}constructor(e,t,n){super(e,t),this.childListChanged=!1,this.keysChanged=new Set,n.forEach(e=>{null===e?this.childListChanged=!0:this.keysChanged.add(e)})}}class tL extends tn{get length(){return null!=this.doc||e4(),this._length}_integrate(e,t){super._integrate(e,t);try{this._pending.forEach(e=>e())}catch(e){console.error(e)}this._pending=null}_copy(){return new tL}clone(){let e=new tL;return e.applyDelta(this.toDelta()),e}_callObserver(e,t){super._callObserver(e,t);let n=new tF(this,e,t);tt(this,e,n),!e.local&&this._hasFormatting&&(e._needFormattingCleanup=!0)}toString(){null!=this.doc||e4();let e="",t=this._start;for(;null!==t;)!t.deleted&&t.countable&&t.content.constructor===t2&&(e+=t.content.str),t=t.right;return e}toJSON(){return this.toString()}applyDelta(e){let{sanitize:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};null!==this.doc?ez(this.doc,n=>{let r=new t_(null,this._start,0,new Map);for(let i=0;i<e.length;i++){let a=e[i];if(void 0!==a.insert){let o=t||"string"!=typeof a.insert||i!==e.length-1||null!==r.right||"\n"!==a.insert.slice(-1)?a.insert:a.insert.slice(0,-1);("string"!=typeof o||o.length>0)&&tN(n,this,r,o,a.attributes||{})}else void 0!==a.retain?tD(n,this,r,a.retain,a.attributes||{}):void 0!==a.delete&&tj(n,r,a.delete)}}):this._pending.push(()=>this.applyDelta(e))}toDelta(e,t,n){null!=this.doc||e4();let r=[],i=new Map,a=this.doc,o="",s=this._start;function l(){if(o.length>0){let e={},t=!1;i.forEach((n,r)=>{t=!0,e[r]=n});let n={insert:o};t&&(n.attributes=e),r.push(n),o=""}}let u=()=>{for(;null!==s;){if(ek(s,e)||void 0!==t&&ek(s,t))switch(s.content.constructor){case t2:{let r=i.get("ychange");void 0===e||ek(s,e)?void 0===t||ek(s,t)?void 0!==r&&(l(),i.delete("ychange")):(void 0===r||r.user!==s.id.client||"added"!==r.type)&&(l(),i.set("ychange",n?n("added",s.id):{type:"added"})):(void 0===r||r.user!==s.id.client||"removed"!==r.type)&&(l(),i.set("ychange",n?n("removed",s.id):{type:"removed"})),o+=s.content.str;break}case nt:case tZ:{l();let e={insert:s.content.getContent()[0]};if(i.size>0){let t={};e.attributes=t,i.forEach((e,n)=>{t[n]=e})}r.push(e);break}case tJ:ek(s,e)&&(l(),tT(i,s.content))}s=s.right}l()};return e||t?ez(a,n=>{e&&eS(n,e),t&&eS(n,t),u()},"cleanup"):u(),r}insert(e,t,n){if(t.length<=0)return;let r=this.doc;null!==r?ez(r,r=>{let i=tA(r,this,e,!n);n||(n={},i.currentAttributes.forEach((e,t)=>{n[t]=e})),tN(r,this,i,t,n)}):this._pending.push(()=>this.insert(e,t,n))}insertEmbed(e,t,n){let r=this.doc;null!==r?ez(r,r=>{let i=tA(r,this,e,!n);tN(r,this,i,t,n||{})}):this._pending.push(()=>this.insertEmbed(e,t,n||{}))}delete(e,t){if(0===t)return;let n=this.doc;null!==n?ez(n,n=>{tj(n,tA(n,this,e,!0),t)}):this._pending.push(()=>this.delete(e,t))}format(e,t,n){if(0===t)return;let r=this.doc;null!==r?ez(r,r=>{let i=tA(r,this,e,!1);null!==i.right&&tD(r,this,i,t,n)}):this._pending.push(()=>this.format(e,t,n))}removeAttribute(e){null!==this.doc?ez(this.doc,t=>{tp(t,this,e)}):this._pending.push(()=>this.removeAttribute(e))}setAttribute(e,t){null!==this.doc?ez(this.doc,n=>{tf(n,this,e,t)}):this._pending.push(()=>this.setAttribute(e,t))}getAttribute(e){return tm(this,e)}getAttributes(){return tg(this)}_write(e){e.writeTypeRef(t9)}constructor(e){super(),this._pending=void 0!==e?[()=>this.insert(0,e)]:[],this._searchMarker=[],this._hasFormatting=!1}}class tz{[Symbol.iterator](){return this}next(){let e=this._currentNode,t=e&&e.content&&e.content.type;if(null!==e&&(!this._firstCall||e.deleted||!this._filter(t)))do if(t=e.content.type,e.deleted||t.constructor!==tU&&t.constructor!==tB||null===t._start)for(;null!==e;){let t=e.next;if(null!==t){e=t;break}e=e.parent===this._root?null:e.parent._item}else e=t._start;while(null!==e&&(e.deleted||!this._filter(e.content.type)))return(this._firstCall=!1,null===e)?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}constructor(e,t=()=>!0){this._filter=t,this._root=e,this._currentNode=e._start,this._firstCall=!0,null!=e.doc||e4()}}class tB extends tn{get firstChild(){let e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new tB}clone(){let e=new tB;return e.insert(0,this.toArray().map(e=>e instanceof tn?e.clone():e)),e}get length(){return null!=this.doc||e4(),null===this._prelimContent?this._length:this._prelimContent.length}createTreeWalker(e){return new tz(this,e)}querySelector(e){e=e.toUpperCase();let t=new tz(this,t=>t.nodeName&&t.nodeName.toUpperCase()===e).next();return t.done?null:t.value}querySelectorAll(e){return e=e.toUpperCase(),n.from(new tz(this,t=>t.nodeName&&t.nodeName.toUpperCase()===e))}_callObserver(e,t){tt(this,e,new tH(this,t,e))}toString(){return ts(this,e=>e.toString()).join("")}toJSON(){return this.toString()}toDOM(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=e.createDocumentFragment();return void 0!==n&&n._createAssociation(r,this),to(this,i=>{r.insertBefore(i.toDOM(e,t,n),null)}),r}insert(e,t){null!==this.doc?ez(this.doc,n=>{td(n,this,e,t)}):this._prelimContent.splice(e,0,...t)}insertAfter(e,t){if(null!==this.doc)ez(this.doc,n=>{tu(n,this,e&&e instanceof tn?e._item:e,t)});else{let n=this._prelimContent,r=null===e?0:n.findIndex(t=>t===e)+1;if(0===r&&null!==e)throw c.create("Reference item not found");n.splice(r,0,...t)}}delete(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;null!==this.doc?ez(this.doc,n=>{th(n,this,e,t)}):this._prelimContent.splice(e,t)}toArray(){return ti(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return tl(this,e)}slice(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;return tr(this,e,t)}forEach(e){to(this,e)}_write(e){e.writeTypeRef(t6)}constructor(){super(),this._prelimContent=[]}}class tU extends tB{get nextSibling(){let e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){let e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,t){super._integrate(e,t),this._prelimAttrs.forEach((e,t)=>{this.setAttribute(t,e)}),this._prelimAttrs=null}_copy(){return new tU(this.nodeName)}clone(){let e=new tU(this.nodeName),t=this.getAttributes();return b.forEach(t,(t,n)=>{"string"==typeof t&&e.setAttribute(n,t)}),e.insert(0,this.toArray().map(e=>e instanceof tn?e.clone():e)),e}toString(){let e=this.getAttributes(),t=[],n=[];for(let t in e)n.push(t);n.sort();let r=n.length;for(let i=0;i<r;i++){let r=n[i];t.push(r+'="'+e[r]+'"')}let i=this.nodeName.toLocaleLowerCase(),a=t.length>0?" "+t.join(" "):"";return"<".concat(i).concat(a,">").concat(super.toString(),"</").concat(i,">")}removeAttribute(e){null!==this.doc?ez(this.doc,t=>{tp(t,this,e)}):this._prelimAttrs.delete(e)}setAttribute(e,t){null!==this.doc?ez(this.doc,n=>{tf(n,this,e,t)}):this._prelimAttrs.set(e,t)}getAttribute(e){return tm(this,e)}hasAttribute(e){return tv(this,e)}getAttributes(e){return e?((e,t)=>{let n={};return e._map.forEach((e,r)=>{let i=e;for(;null!==i&&(!t.sv.has(i.id.client)||i.id.clock>=(t.sv.get(i.id.client)||0));)i=i.left;null!==i&&ek(i,t)&&(n[r]=i.content.getContent()[i.length-1])}),n})(this,e):tg(this)}toDOM(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=e.createElement(this.nodeName),i=this.getAttributes();for(let e in i){let t=i[e];"string"==typeof t&&r.setAttribute(e,t)}return to(this,i=>{r.appendChild(i.toDOM(e,t,n))}),void 0!==n&&n._createAssociation(r,this),r}_write(e){e.writeTypeRef(t8),e.writeKey(this.nodeName)}constructor(e="UNDEFINED"){super(),this.nodeName=e,this._prelimAttrs=new Map}}class tH extends e3{constructor(e,t,n){super(e,n),this.childListChanged=!1,this.attributesChanged=new Set,t.forEach(e=>{null===e?this.childListChanged=!0:this.attributesChanged.add(e)})}}class tW extends tk{_copy(){return new tW(this.hookName)}clone(){let e=new tW(this.hookName);return this.forEach((t,n)=>{e.set(n,t)}),e}toDOM(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];let e,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=t[this.hookName];return(e=void 0!==r?r.createDom(this):document.createElement(this.hookName)).setAttribute("data-yjs-hook",this.hookName),void 0!==n&&n._createAssociation(e,this),e}_write(e){e.writeTypeRef(t7),e.writeKey(this.hookName)}constructor(e){super(),this.hookName=e}}class tV extends tL{get nextSibling(){let e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){let e=this._item?this._item.prev:null;return e?e.content.type:null}_copy(){return new tV}clone(){let e=new tV;return e.applyDelta(this.toDelta()),e}toDOM(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=(arguments.length>1&&arguments[1],arguments.length>2?arguments[2]:void 0),n=e.createTextNode(this.toString());return void 0!==t&&t._createAssociation(n,this),n}toString(){return this.toDelta().map(e=>{let t=[];for(let n in e.attributes){let r=[];for(let t in e.attributes[n])r.push({key:t,value:e.attributes[n][t]});r.sort((e,t)=>e.key<t.key?-1:1),t.push({nodeName:n,attrs:r})}t.sort((e,t)=>e.nodeName<t.nodeName?-1:1);let n="";for(let e=0;e<t.length;e++){let r=t[e];n+="<".concat(r.nodeName);for(let e=0;e<r.attrs.length;e++){let t=r.attrs[e];n+=" ".concat(t.key,'="').concat(t.value,'"')}n+=">"}n+=e.insert;for(let e=t.length-1;e>=0;e--)n+="</".concat(t[e].nodeName,">");return n}).join("")}toJSON(){return this.toString()}_write(e){e.writeTypeRef(ne)}}class tq{get deleted(){throw c.methodUnimplemented()}mergeWith(e){return!1}write(e,t,n){throw c.methodUnimplemented()}integrate(e,t){throw c.methodUnimplemented()}constructor(e,t){this.id=e,this.length=t}}class tG extends tq{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor===e.constructor&&(this.length+=e.length,!0)}integrate(e,t){t>0&&(this.id.clock+=t,this.length-=t),eE(e.doc.store,this)}write(e,t){e.writeInfo(0),e.writeLen(this.length-t)}getMissing(e,t){return null}}class t${getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new t$(this.content)}splice(e){throw c.methodUnimplemented()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeBuf(this.content)}getRef(){return 3}constructor(e){this.content=e}}class tK{getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new tK(this.len)}splice(e){let t=new tK(this.len-e);return this.len=e,t}mergeWith(e){return this.len+=e.len,!0}integrate(e,t){E(e.deleteSet,t.id.client,t.id.clock,this.len),t.markDeleted()}delete(e){}gc(e){}write(e,t){e.writeLen(this.len-t)}getRef(){return 1}constructor(e){this.len=e}}let tY=(e,t)=>new R({guid:e,...t,shouldLoad:t.shouldLoad||t.autoLoad||!1});class tX{getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new tX(tY(this.doc.guid,this.opts))}splice(e){throw c.methodUnimplemented()}mergeWith(e){return!1}integrate(e,t){this.doc._item=t,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,t){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;let t={};this.opts=t,e.gc||(t.gc=!1),e.autoLoad&&(t.autoLoad=!0),null!==e.meta&&(t.meta=e.meta)}}class tZ{getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new tZ(this.embed)}splice(e){throw c.methodUnimplemented()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeJSON(this.embed)}getRef(){return 5}constructor(e){this.embed=e}}class tJ{getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new tJ(this.key,this.value)}splice(e){throw c.methodUnimplemented()}mergeWith(e){return!1}integrate(e,t){let n=t.parent;n._searchMarker=null,n._hasFormatting=!0}delete(e){}gc(e){}write(e,t){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}constructor(e,t){this.key=e,this.value=t}}class tQ{getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new tQ(this.arr)}splice(e){let t=new tQ(this.arr.slice(e));return this.arr=this.arr.slice(0,e),t}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){let n=this.arr.length;e.writeLen(n-t);for(let r=t;r<n;r++){let t=this.arr[r];e.writeString(void 0===t?"undefined":JSON.stringify(t))}}getRef(){return 2}constructor(e){this.arr=e}}let t0="development"===x.getVariable("node_env");class t1{getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new t1(this.arr)}splice(e){let t=new t1(this.arr.slice(e));return this.arr=this.arr.slice(0,e),t}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){let n=this.arr.length;e.writeLen(n-t);for(let r=t;r<n;r++){let t=this.arr[r];e.writeAny(t)}}getRef(){return 8}constructor(e){this.arr=e,t0&&b.deepFreeze(e)}}class t2{getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new t2(this.str)}splice(e){let t=new t2(this.str.slice(e));this.str=this.str.slice(0,e);let n=this.str.charCodeAt(e-1);return n>=55296&&n<=56319&&(this.str=this.str.slice(0,e-1)+"",t.str=""+t.str.slice(1)),t}mergeWith(e){return this.str+=e.str,!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeString(0===t?this.str:this.str.slice(t))}getRef(){return 4}constructor(e){this.str=e}}let t3=[e=>new tx,e=>new tk,e=>new tL,e=>new tU(e.readKey()),e=>new tB,e=>new tW(e.readKey()),e=>new tV],t5=0,t4=1,t9=2,t8=3,t6=4,t7=5,ne=6;class nt{getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new nt(this.type._copy())}splice(e){throw c.methodUnimplemented()}mergeWith(e){return!1}integrate(e,t){this.type._integrate(e.doc,t)}delete(e){let t=this.type._start;for(;null!==t;)t.deleted?t.id.clock<(e.beforeState.get(t.id.client)||0)&&e._mergeStructs.push(t):t.delete(e),t=t.right;this.type._map.forEach(t=>{t.deleted?t.id.clock<(e.beforeState.get(t.id.client)||0)&&e._mergeStructs.push(t):t.delete(e)}),e.changed.delete(this.type)}gc(e){let t=this.type._start;for(;null!==t;)t.gc(e,!0),t=t.right;this.type._start=null,this.type._map.forEach(t=>{for(;null!==t;)t.gc(e,!0),t=t.left}),this.type._map=new Map}write(e,t){this.type._write(e)}getRef(){return 7}constructor(e){this.type=e}}let nn=(e,t)=>{let n,r=t,i=0;do i>0&&(r=es(r.client,r.clock+i)),n=eM(e,r),i=r.clock-n.id.clock,r=n.redone;while(null!==r&&n instanceof ns)return{item:n,diff:i}},nr=(e,t)=>{for(;null!==e&&e.keep!==t;)e.keep=t,e=e.parent._item},ni=(e,t,n)=>{let{client:r,clock:i}=t.id,a=new ns(es(r,i+n),t,es(r,i+n-1),t.right,t.rightOrigin,t.parent,t.parentSub,t.content.splice(n));return t.deleted&&a.markDeleted(),t.keep&&(a.keep=!0),null!==t.redone&&(a.redone=es(t.redone.client,t.redone.clock+n)),t.right=a,null!==a.right&&(a.right.left=a),e._mergeStructs.push(a),null!==a.parentSub&&null===a.right&&a.parent._map.set(a.parentSub,a),t.length=n,a},na=(e,t)=>n.some(e,e=>_(e.deletions,t)),no=(e,t,n,r,i,a)=>{let o,s=e.doc,l=s.store,u=s.clientID,c=t.redone;if(null!==c)return eN(e,c);let d=t.parent._item,h=null;if(null!==d&&!0===d.deleted){if(null===d.redone&&(!n.has(d)||null===no(e,d,n,r,i,a)))return null;for(;null!==d.redone;)d=eN(e,d.redone)}let p=null===d?t.parent:d.content.type;if(null===t.parentSub){for(h=t.left,o=t;null!==h;){let t=h;for(;null!==t&&t.parent._item!==d;)t=null===t.redone?null:eN(e,t.redone);if(null!==t&&t.parent._item===d){h=t;break}h=h.left}for(;null!==o;){let t=o;for(;null!==t&&t.parent._item!==d;)t=null===t.redone?null:eN(e,t.redone);if(null!==t&&t.parent._item===d){o=t;break}o=o.right}}else if(o=null,t.right&&!i){for(h=t;null!==h&&null!==h.right&&(h.right.redone||_(r,h.right.id)||na(a.undoStack,h.right.id)||na(a.redoStack,h.right.id));)for(h=h.right;h.redone;)h=eN(e,h.redone);if(h&&null!==h.right)return null}else h=p._map.get(t.parentSub)||null;let f=eA(l,u),m=es(u,f),g=new ns(m,h,h&&h.lastId,o,o&&o.id,p,t.parentSub,t.content.copy());return t.redone=m,nr(g,!0),g.integrate(e,0),g};class ns extends tq{set marker(e){(this.info&d.BIT4)>0!==e&&(this.info^=d.BIT4)}get marker(){return(this.info&d.BIT4)>0}get keep(){return(this.info&d.BIT1)>0}set keep(e){this.keep!==e&&(this.info^=d.BIT1)}get countable(){return(this.info&d.BIT2)>0}get deleted(){return(this.info&d.BIT3)>0}set deleted(e){this.deleted!==e&&(this.info^=d.BIT3)}markDeleted(){this.info|=d.BIT3}getMissing(e,t){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=eA(t,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=eA(t,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===ea&&this.id.client!==this.parent.client&&this.parent.clock>=eA(t,this.parent.client))return this.parent.client;if(this.origin&&(this.left=eD(e,t,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=eN(e,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===tG||this.right&&this.right.constructor===tG)this.parent=null;else if(this.parent){if(this.parent.constructor===ea){let e=eM(t,this.parent);e.constructor===tG?this.parent=null:this.parent=e.content.type}}else this.left&&this.left.constructor===ns?(this.parent=this.left.parent,this.parentSub=this.left.parentSub):this.right&&this.right.constructor===ns&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);return null}integrate(e,t){if(t>0&&(this.id.clock+=t,this.left=eD(e,e.doc.store,es(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(t),this.length-=t),this.parent){if(!this.left&&(!this.right||null!==this.right.left)||this.left&&this.left.right!==this.right){let t,n=this.left;if(null!==n)t=n.right;else if(null!==this.parentSub)for(t=this.parent._map.get(this.parentSub)||null;null!==t&&null!==t.left;)t=t.left;else t=this.parent._start;let r=new Set,i=new Set;for(;null!==t&&t!==this.right;){if(i.add(t),r.add(t),eo(this.origin,t.origin)){if(t.id.client<this.id.client)n=t,r.clear();else if(eo(this.rightOrigin,t.rightOrigin))break}else if(null!==t.origin&&i.has(eM(e.doc.store,t.origin)))r.has(eM(e.doc.store,t.origin))||(n=t,r.clear());else break;t=t.right}this.left=n}if(null!==this.left){let e=this.left.right;this.right=e,this.left.right=this}else{let e;if(null!==this.parentSub)for(e=this.parent._map.get(this.parentSub)||null;null!==e&&null!==e.left;)e=e.left;else e=this.parent._start,this.parent._start=this;this.right=e}null!==this.right?this.right.left=this:null!==this.parentSub&&(this.parent._map.set(this.parentSub,this),null!==this.left&&this.left.delete(e)),null===this.parentSub&&this.countable&&!this.deleted&&(this.parent._length+=this.length),eE(e.doc.store,this),this.content.integrate(e,this),ej(e,this.parent,this.parentSub),(null!==this.parent._item&&this.parent._item.deleted||null!==this.parentSub&&null!==this.right)&&this.delete(e)}else new tG(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;null!==e&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;null!==e&&e.deleted;)e=e.left;return e}get lastId(){return 1===this.length?this.id:es(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&eo(e.origin,this.lastId)&&this.right===e&&eo(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&null===this.redone&&null===e.redone&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){let t=this.parent._searchMarker;return t&&t.forEach(t=>{t.p===e&&(t.p=this,!this.deleted&&this.countable&&(t.index-=this.length))}),e.keep&&(this.keep=!0),this.right=e.right,null!==this.right&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){let t=this.parent;this.countable&&null===this.parentSub&&(t._length-=this.length),this.markDeleted(),E(e.deleteSet,this.id.client,this.id.clock,this.length),ej(e,t,this.parentSub),this.content.delete(e)}}gc(e,t){if(!this.deleted)throw c.unexpectedCase();this.content.gc(e),t?((e,t,n)=>{let r=e.clients.get(t.id.client);r[eT(r,t.id.clock)]=n})(e,this,new tG(this.id,this.length)):this.content=new tK(this.length)}write(e,t){let n=t>0?es(this.id.client,this.id.clock+t-1):this.origin,r=this.rightOrigin,i=this.parentSub,a=this.content.getRef()&d.BITS5|(null===n?0:d.BIT8)|(null===r?0:d.BIT7)|(null===i?0:d.BIT6);if(e.writeInfo(a),null!==n&&e.writeLeftID(n),null!==r&&e.writeRightID(r),null===n&&null===r){let t=this.parent;if(void 0!==t._item){let n=t._item;if(null===n){let n=el(t);e.writeParentInfo(!0),e.writeString(n)}else e.writeParentInfo(!1),e.writeLeftID(n.id)}else t.constructor===String?(e.writeParentInfo(!0),e.writeString(t)):t.constructor===ea?(e.writeParentInfo(!1),e.writeLeftID(t)):c.unexpectedCase();null!==i&&e.writeString(i)}this.content.write(e,t)}constructor(e,t,n,r,i,a,o,s){super(e,s.getLength()),this.origin=n,this.left=t,this.right=r,this.rightOrigin=i,this.parent=a,this.parentSub=o,this.redone=null,this.content=s,this.info=this.content.isCountable()?d.BIT2:0}}let nl=(e,t)=>nu[t&d.BITS5](e),nu=[()=>{c.unexpectedCase()},e=>new tK(e.readLen()),e=>{let t=e.readLen(),n=[];for(let r=0;r<t;r++){let t=e.readString();"undefined"===t?n.push(void 0):n.push(JSON.parse(t))}return new tQ(n)},e=>new t$(e.readBuf()),e=>new t2(e.readString()),e=>new tZ(e.readJSON()),e=>new tJ(e.readKey(),e.readJSON()),e=>new nt(t3[e.readTypeRef()](e)),e=>{let t=e.readLen(),n=[];for(let r=0;r<t;r++)n.push(e.readAny());return new t1(n)},e=>new tX(tY(e.readString(),e.readAny())),()=>{c.unexpectedCase()}];class nc extends tq{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor===e.constructor&&(this.length+=e.length,!0)}integrate(e,t){c.unexpectedCase()}write(e,t){e.writeInfo(10),a.writeVarUint(e.restEncoder,this.length-t)}getMissing(e,t){return null}}let nd="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:globalThis,nh="__ $YJS$ __";!0===nd[nh]&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438"),nd[nh]=!0},999506:e=>{"use strict";e.s({abs:()=>r,ceil:()=>n,exp10:()=>l,floor:()=>t,isNegativeZero:()=>u,log10:()=>a,max:()=>s,min:()=>o,round:()=>i});let t=Math.floor,n=Math.ceil,r=Math.abs,i=Math.round,a=Math.log10,o=(e,t)=>e<t?e:t,s=(e,t)=>e>t?e:t,l=e=>Math.pow(10,e),u=e=>0!==e?e<0:1/e<0},618722:e=>{"use strict";e.s({BIT30:()=>r,BIT7:()=>t,BIT8:()=>n,BITS21:()=>s,BITS31:()=>l,BITS32:()=>u,BITS6:()=>i,BITS7:()=>a,BITS8:()=>o});let t=64,n=128,r=0x20000000,i=63,a=127,o=255,s=2097151,l=0x7fffffff,u=0xffffffff},867955:e=>{"use strict";e.s({MAX_SAFE_INTEGER:()=>r,isInteger:()=>i});var t=e.i(999506),n=e.i(618722);let r=Number.MAX_SAFE_INTEGER;Number.MIN_SAFE_INTEGER,n.BITS31,n.BITS32;let i=Number.isInteger||(e=>"number"==typeof e&&isFinite(e)&&t.floor(e)===e);Number.parseInt},685065:e=>{"use strict";e.s({create:()=>t,from:()=>n});let t=()=>new Set,n=e=>new Set(e)},69692:e=>{"use strict";e.s({equalFlat:()=>n,from:()=>t,isArray:()=>i,map:()=>a,unfold:()=>r}),e.i(685065);let t=Array.from,n=(e,t)=>e.length===t.length&&((e,t)=>{for(let n=0;n<e.length;n++)if(!t(e[n],n,e))return!1;return!0})(e,(e,n)=>e===t[n]),r=(e,t)=>{let n=Array(e);for(let r=0;r<e;r++)n[r]=t(r,n);return n},i=Array.isArray,a=(e,t)=>{let n=Array(e.length);for(let r=0;r<e.length;r++)n[r]=t(e[r],r,e);return n}},293468:e=>{"use strict";e.s({decodeUtf8:()=>l,encodeUtf8:()=>o,fromCamelCase:()=>i,fromCharCode:()=>t,utf8TextDecoder:()=>s,utf8TextEncoder:()=>a}),e.i(69692);let t=String.fromCharCode;String.fromCodePoint,t(65535);let n=/^\s*/g,r=/([A-Z])/g,i=(e,t)=>e.replace(r,e=>"".concat(t).concat(e.toLowerCase())).replace(n,""),a="undefined"!=typeof TextEncoder?new TextEncoder:null,o=a?e=>a.encode(e):e=>{let t=unescape(encodeURIComponent(e)),n=t.length,r=new Uint8Array(n);for(let e=0;e<n;e++)r[e]=t.codePointAt(e);return r},s="undefined"==typeof TextDecoder?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});s&&1===s.decode(new Uint8Array).length&&(s=null);let l=s?e=>s.decode(e):e=>{let t=e.length,n="",r=0;for(;t>0;){let i=t<1e4?t:1e4,a=e.subarray(r,r+i);r+=i,n+=String.fromCodePoint.apply(null,a),t-=i}return decodeURIComponent(escape(n))}},367206:e=>{"use strict";e.s({createEncoder:()=>s,encode:()=>l,toUint8Array:()=>u,write:()=>c,writeAny:()=>b,writeVarString:()=>f,writeVarUint:()=>d});var t=e.i(999506),n=e.i(867955),r=e.i(618722),i=e.i(293468),a=e.i(69692);class o{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}let s=()=>new o,l=e=>{let t=s();return e(t),u(t)},u=e=>{let t=new Uint8Array((e=>{let t=e.cpos;for(let n=0;n<e.bufs.length;n++)t+=e.bufs[n].length;return t})(e)),n=0;for(let r=0;r<e.bufs.length;r++){let i=e.bufs[r];t.set(i,n),n+=i.length}return t.set(new Uint8Array(e.cbuf.buffer,0,e.cpos),n),t},c=(e,t)=>{let n=e.cbuf.length;e.cpos===n&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(2*n),e.cpos=0),e.cbuf[e.cpos++]=t},d=(e,n)=>{for(;n>r.BITS7;)c(e,r.BIT8|r.BITS7&n),n=t.floor(n/128);c(e,r.BITS7&n)},h=new Uint8Array(3e4),p=h.length/3,f=i.utf8TextEncoder&&i.utf8TextEncoder.encodeInto?(e,t)=>{if(t.length<p){let n=i.utf8TextEncoder.encodeInto(t,h).written||0;d(e,n);for(let t=0;t<n;t++)c(e,h[t])}else m(e,i.encodeUtf8(t))}:(e,t)=>{let n=unescape(encodeURIComponent(t)),r=n.length;d(e,r);for(let t=0;t<r;t++)c(e,n.codePointAt(t))},m=(e,n)=>{d(e,n.byteLength),((e,n)=>{let r=e.cbuf.length,i=e.cpos,a=t.min(r-i,n.length),o=n.length-a;e.cbuf.set(n.subarray(0,a),i),e.cpos+=a,o>0&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(t.max(2*r,o)),e.cbuf.set(n.subarray(a)),e.cpos=o)})(e,n)},g=(e,n)=>{((e,n)=>{let r=e.cbuf.length;r-e.cpos<n&&(e.bufs.push(new Uint8Array(e.cbuf.buffer,0,e.cpos)),e.cbuf=new Uint8Array(2*t.max(r,n)),e.cpos=0)})(e,n);let r=new DataView(e.cbuf.buffer,e.cpos,n);return e.cpos+=n,r},y=new DataView(new ArrayBuffer(4)),b=(e,i)=>{switch(typeof i){case"string":c(e,119),f(e,i);break;case"number":if(n.isInteger(i)&&t.abs(i)<=r.BITS31)c(e,125),((e,n)=>{let i=t.isNegativeZero(n);for(i&&(n=-n),c(e,(n>r.BITS6?r.BIT8:0)|(i?r.BIT7:0)|r.BITS6&n),n=t.floor(n/64);n>0;)c(e,(n>r.BITS7?r.BIT8:0)|r.BITS7&n),n=t.floor(n/128)})(e,i);else if((e=>(y.setFloat32(0,e),y.getFloat32(0)===e))(i))c(e,124),g(e,4).setFloat32(0,i,!1);else c(e,123),g(e,8).setFloat64(0,i,!1);break;case"bigint":c(e,122),g(e,8).setBigInt64(0,i,!1);break;case"object":if(null===i)c(e,126);else if(a.isArray(i)){c(e,117),d(e,i.length);for(let t=0;t<i.length;t++)b(e,i[t])}else if(i instanceof Uint8Array)c(e,116),m(e,i);else{c(e,118);let t=Object.keys(i);d(e,t.length);for(let n=0;n<t.length;n++){let r=t[n];f(e,r),b(e,i[r])}}break;case"boolean":c(e,i?120:121);break;default:c(e,127)}}},173999:e=>{"use strict";e.s({create:()=>t,methodUnimplemented:()=>n,unexpectedCase:()=>r});let t=e=>Error(e),n=()=>{throw t("Method unimplemented")},r=()=>{throw t("Unexpected case")}},837093:e=>{"use strict";e.s({createDecoder:()=>l,readAny:()=>m,readVarString:()=>h,readVarUint:()=>d});var t=e.i(618722);e.i(999506);var n=e.i(867955),r=e.i(293468),i=e.i(173999);e.i(367206);let a=i.create("Unexpected end of array"),o=i.create("Integer out of Range");class s{constructor(e){this.arr=e,this.pos=0}}let l=e=>new s(e),u=e=>((e,t)=>{let n=new Uint8Array(e.arr.buffer,e.pos+e.arr.byteOffset,t);return e.pos+=t,n})(e,d(e)),c=e=>e.arr[e.pos++],d=e=>{let r=0,i=1,s=e.arr.length;for(;e.pos<s;){let a=e.arr[e.pos++];if(r+=(a&t.BITS7)*i,i*=128,a<t.BIT8)return r;if(r>n.MAX_SAFE_INTEGER)throw o}throw a},h=r.utf8TextDecoder?e=>r.utf8TextDecoder.decode(u(e)):e=>{let t=d(e);if(0===t)return"";{let n=String.fromCodePoint(c(e));if(--t<100)for(;t--;)n+=String.fromCodePoint(c(e));else for(;t>0;){let r=t<1e4?t:1e4,i=e.arr.subarray(e.pos,e.pos+r);e.pos+=r,n+=String.fromCodePoint.apply(null,i),t-=r}return decodeURIComponent(escape(n))}},p=(e,t)=>{let n=new DataView(e.arr.buffer,e.arr.byteOffset+e.pos,t);return e.pos+=t,n},f=[e=>void 0,e=>null,e=>{let r=e.arr[e.pos++],i=r&t.BITS6,s=64,l=(r&t.BIT7)>0?-1:1;if((r&t.BIT8)==0)return l*i;let u=e.arr.length;for(;e.pos<u;){if(i+=((r=e.arr[e.pos++])&t.BITS7)*s,s*=128,r<t.BIT8)return l*i;if(i>n.MAX_SAFE_INTEGER)throw o}throw a},e=>p(e,4).getFloat32(0,!1),e=>p(e,8).getFloat64(0,!1),e=>p(e,8).getBigInt64(0,!1),e=>!1,e=>!0,h,e=>{let t=d(e),n={};for(let r=0;r<t;r++)n[h(e)]=m(e);return n},e=>{let t=d(e),n=[];for(let r=0;r<t;r++)n.push(m(e));return n},u],m=e=>f[127-c(e)](e)},412361:e=>{"use strict";e.s({prefix:()=>i});var t=e.i(999506);let n=["","k","M","G","T","P","E","Z","Y"],r=["","m","","n","p","f","a","z","y"],i=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=0===e?0:t.log10(e),o=0;for(;a<3*o&&i>-8;)i--,o--;for(;a>=3+3*o&&i<8;)i++,o++;let s=i<0?r[-i]:n[i];return{n:t.round((o>0?e/t.exp10(3*o):e*t.exp10(-3*o))*1e12)/1e12,prefix:s}}},927665:e=>{"use strict";e.s({getUnixTime:()=>t}),e.i(412361),e.i(999506);let t=Date.now},18153:e=>{"use strict";e.s({create:()=>t,map:()=>r,setIfUndefined:()=>n});let t=()=>new Map,n=(e,t,n)=>{let r=e.get(t);return void 0===r&&e.set(t,r=n()),r},r=(e,t)=>{let n=[];for(let[r,i]of e)n.push(t(i,r));return n}},372577:e=>{"use strict";e.s({Observable:()=>i});var t=e.i(18153),n=e.i(685065),r=e.i(69692);class i{on(e,r){t.setIfUndefined(this._observers,e,n.create).add(r)}once(e,t){var n=this;let r=function(){for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];n.off(e,r),t(...a)};this.on(e,r)}off(e,t){let n=this._observers.get(e);void 0!==n&&(n.delete(t),0===n.size&&this._observers.delete(e))}emit(e,n){return r.from((this._observers.get(e)||t.create()).values()).forEach(e=>e(...n))}destroy(){this._observers=t.create()}constructor(){this._observers=t.create()}}},167275:e=>{"use strict";e.s({equalFlat:()=>o,every:()=>i,hasProperty:()=>a,keys:()=>t,length:()=>n}),Object.assign;let t=Object.keys;Object.values;let n=e=>t(e).length,r=e=>t(e).length,i=(e,t)=>{for(let n in e)if(!t(e[n],n))return!1;return!0},a=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o=(e,t)=>e===t||r(e)===r(t)&&i(e,(e,n)=>(void 0!==e||a(t,n))&&t[n]===e);Object.freeze},34878:e=>{"use strict";e.s({EqualityTraitSymbol:()=>t});let t=Symbol("Equality")},15955:e=>{"use strict";e.s({equalityDeep:()=>a,equalityStrict:()=>i,isOneOf:()=>o});var t=e.i(69692),n=e.i(167275),r=e.i(34878);let i=(e,t)=>e===t,a=(e,t)=>{if(e===t)return!0;if(null==e||null==t||e.constructor!==t.constructor)return!1;if(null!=e[r.EqualityTraitSymbol])return e[r.EqualityTraitSymbol](t);switch(e.constructor){case ArrayBuffer:e=new Uint8Array(e),t=new Uint8Array(t);case Uint8Array:if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;break;case Set:if(e.size!==t.size)return!1;for(let n of e)if(!t.has(n))return!1;break;case Map:if(e.size!==t.size)return!1;for(let n of e.keys())if(!t.has(n)||!a(e.get(n),t.get(n)))return!1;break;case Object:if(n.length(e)!==n.length(t))return!1;for(let r in e)if(!n.hasProperty(e,r)||!a(e[r],t[r]))return!1;break;case Array:if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!a(e[n],t[n]))return!1;break;default:return!1}return!0},o=(e,t)=>t.includes(e);t.isArray},128611:e=>{"use strict";e.s({}),e.i(367206),e.i(837093);var t=e.i(927665),n=(e.i(999506),e.i(372577));e.i(15955),n.Observable},64418:e=>{"use strict";e.s({createMutex:()=>t});let t=()=>{let e=!0;return(t,n)=>{if(e){e=!1;try{t()}finally{e=!0}}else void 0!==n&&n()}}},60884:e=>{"use strict";e.s({simpleDiff:()=>r}),e.i(15955);let t=/[\uD800-\uDBFF]/,n=/[\uDC00-\uDFFF]/,r=(e,r)=>{let i=0,a=0;for(;i<e.length&&i<r.length&&e[i]===r[i];)i++;for(i>0&&t.test(e[i-1])&&i--;a+i<e.length&&a+i<r.length&&e[e.length-a-1]===r[r.length-a-1];)a++;return a>0&&n.test(e[e.length-a])&&a--,{index:i,remove:e.length-i-a,insert:r.slice(i,r.length-a)}}},488003:e=>{"use strict";e.s({getRandomValues:()=>t}),crypto.subtle;let t=crypto.getRandomValues.bind(crypto)},3931:e=>{"use strict";e.s({oneOf:()=>r});var t=e.i(999506);e.i(618722),e.i(488003);let n=Math.random,r=e=>e[t.floor(n()*e.length)]},696233:e=>{"use strict";e.s({undefinedToNull:()=>t});let t=e=>void 0===e?null:e},800394:e=>{"use strict";e.s({varStorage:()=>n});let t=new class{setItem(e,t){this.map.set(e,t)}getItem(e){return this.map.get(e)}constructor(){this.map=new Map}};try{"undefined"!=typeof localStorage&&localStorage&&(t=localStorage)}catch(e){}let n=t},969373:e=>{"use strict";let t;e.s({isBrowser:()=>u});var n=e.i(227541),r=e.i(18153),i=e.i(293468),a=e.i(696233),o=e.i(800394),s=e.i(15955);let l=void 0!==n.default&&n.default.release&&/node|io\.js/.test(n.default.release.name)&&"[object process]"===Object.prototype.toString.call(void 0!==n.default?n.default:0),u="undefined"!=typeof window&&"undefined"!=typeof document&&!l;"undefined"!=typeof navigator&&/Mac/.test(navigator.platform);let c=[],d=e=>(()=>{if(void 0===t)if(l){t=r.create();let e=n.default.argv,i=null;for(let n=0;n<e.length;n++){let r=e[n];"-"===r[0]?(null!==i&&t.set(i,""),i=r):null!==i?(t.set(i,r),i=null):c.push(r)}null!==i&&t.set(i,"")}else"object"==typeof location?(t=r.create(),(location.search||"?").slice(1).split("&").forEach(e=>{if(0!==e.length){let[n,r]=e.split("=");t.set("--".concat(i.fromCamelCase(n,"-")),r),t.set("-".concat(i.fromCamelCase(n,"-")),r)}})):t=r.create();return t})().has(e),h=e=>l?a.undefinedToNull(n.default.env[e.toUpperCase().replaceAll("-","_")]):a.undefinedToNull(o.varStorage.getItem(e)),p=e=>d("--"+e)||null!==h(e);p("production"),l&&s.isOneOf(n.default.env.FORCE_COLOR,["true","1","2"])||!d("--no-colors")&&!p("no-color")&&(!l||n.default.stdout.isTTY)&&(!l||d("--color")||null!==h("COLORTERM")||(h("TERM")||"").includes("color"))},303531:e=>{"use strict";e.s({forEach:()=>t});let t=(e,t)=>e.forEach(e=>t(e.left,e.right))},65714:e=>{"use strict";e.s({doc:()=>t}),e.i(303531),e.i(18153);let t="undefined"!=typeof document?document:{};"undefined"!=typeof DOMParser&&new DOMParser,t.ELEMENT_NODE,t.TEXT_NODE,t.CDATA_SECTION_NODE,t.COMMENT_NODE,t.DOCUMENT_NODE,t.DOCUMENT_TYPE_NODE,t.DOCUMENT_FRAGMENT_NODE},249439:e=>{"use strict";e.s({timeout:()=>r}),e.i(927665);let t=e=>class{destroy(){e(this._)}constructor(e){this._=e}},n=t(clearTimeout),r=(e,t)=>new n(setTimeout(t,e));t(clearInterval),t(e=>"undefined"!=typeof requestAnimationFrame&&cancelAnimationFrame(e)),t(e=>"undefined"!=typeof cancelIdleCallback&&cancelIdleCallback(e))},804749:e=>{"use strict";e.s({digest:()=>c});var t=e.i(618722);let n=(e,t)=>e>>>t|e<<32-t,r=e=>n(e,2)^n(e,13)^n(e,22),i=e=>n(e,6)^n(e,11)^n(e,25),a=e=>n(e,7)^n(e,18)^e>>>3,o=e=>n(e,17)^n(e,19)^e>>>10,s=new Uint32Array([0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2]),l=new Uint32Array([0x6a09e667,0xbb67ae85,0x3c6ef372,0xa54ff53a,0x510e527f,0x9b05688c,0x1f83d9ab,0x5be0cd19]);class u{_updateHash(){let e=this._H,t=this._W;for(let e=16;e<64;e++)t[e]=o(t[e-2])+t[e-7]+a(t[e-15])+t[e-16];let n=e[0],l=e[1],u=e[2],c=e[3],d=e[4],h=e[5],p=e[6],f=e[7];for(let e=0,a,o;e<64;e++)a=f+i(d)+(d&h^~d&p)+s[e]+t[e]>>>0,o=r(n)+(n&l^n&u^l&u)>>>0,f=p,p=h,h=d,d=c+a>>>0,c=u,u=l,l=n,n=a+o>>>0;e[0]+=n,e[1]+=l,e[2]+=u,e[3]+=c,e[4]+=d,e[5]+=h,e[6]+=p,e[7]+=f}digest(e){let n=0;for(;n+56<=e.length;){let r=0;for(;r<16&&n+3<e.length;r++)this._W[r]=e[n++]<<24|e[n++]<<16|e[n++]<<8|e[n++];if(n%64!=0){for(this._W.fill(0,r,16);n<e.length;)this._W[r]|=e[n]<<(3-n%4)*8,n++;this._W[r]|=t.BIT8<<(3-n%4)*8}this._updateHash()}let r=n%64!=0;this._W.fill(0,0,16);let i=0;for(;n<e.length;i++)for(let t=3;t>=0&&n<e.length;t--)this._W[i]|=e[n++]<<8*t;r||(this._W[i-(n%4!=0)]|=t.BIT8<<(3-n%4)*8),this._W[14]=e.byteLength/t.BIT30,this._W[15]=8*e.byteLength,this._updateHash();let a=new Uint8Array(32);for(let e=0;e<this._H.length;e++)for(let t=0;t<4;t++)a[4*e+t]=this._H[e]>>>(3-t)*8;return a}constructor(){let e=new ArrayBuffer(320);this._H=new Uint32Array(e,0,8),this._H.set(l),this._W=new Uint32Array(e,64,64)}}let c=e=>new u().digest(e)},432200:e=>{"use strict";e.s({encodeAny:()=>o,toBase64:()=>a});var t=e.i(781635),n=e.i(293468),r=e.i(969373);e.i(69692),e.i(999506);var i=e.i(367206);e.i(837093);let a=r.isBrowser?e=>{let t="";for(let r=0;r<e.byteLength;r++)t+=n.fromCharCode(e[r]);return btoa(t)}:e=>t.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("base64");r.isBrowser;let o=e=>i.encode(t=>i.writeAny(t,e))},989450:e=>{"use strict";e.s({redo:()=>K,undo:()=>$,ySyncPlugin:()=>k,ySyncPluginKey:()=>y,yUndoPlugin:()=>X,yUndoPluginKey:()=>b,yXmlFragmentToProsemirrorJSON:()=>G});var t=e.i(144304);e.i(954647);var n=e.i(968617);e.i(128611);var r=e.i(64418),i=e.i(490077),a=e.i(999506),o=e.i(167275),s=e.i(685065),l=e.i(60884),u=e.i(173999),c=e.i(3931),d=e.i(969373),h=e.i(65714),p=e.i(249439),f=e.i(18153),m=e.i(804749),g=e.i(432200);let y=new n.PluginKey("y-sync"),b=new n.PluginKey("y-undo");new n.PluginKey("yjs-cursor");let x=(e,n)=>void 0===n?!e.deleted:n.sv.has(e.id.client)&&n.sv.get(e.id.client)>e.id.clock&&!t.isDeleted(n.ds,e.id),w=[{light:"#ecd44433",dark:"#ecd444"}],k=function(e){let{colors:t=w,colorMapping:r=new Map,permanentUserData:i=null,onFirstRender:a=()=>{},mapping:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=!1,l=new _(e,o),u=new n.Plugin({props:{editable:e=>{let t=y.getState(e);return null==t.snapshot&&null==t.prevSnapshot}},key:y,state:{init:(n,a)=>({type:e,doc:e.doc,binding:l,snapshot:null,prevSnapshot:null,isChangeOrigin:!1,isUndoRedoOperation:!1,addToHistory:!0,colors:t,colorMapping:r,permanentUserData:i}),apply:(e,t)=>{let n=e.getMeta(y);if(void 0!==n)for(let e in t=Object.assign({},t),n)t[e]=n[e];return t.addToHistory=!1!==e.getMeta("addToHistory"),t.isChangeOrigin=void 0!==n&&!!n.isChangeOrigin,t.isUndoRedoOperation=void 0!==n&&!!n.isChangeOrigin&&!!n.isUndoRedoOperation,null!==l.prosemirrorView&&void 0!==n&&(null!=n.snapshot||null!=n.prevSnapshot)&&p.timeout(0,()=>{null!=l.prosemirrorView&&(null==n.restore?l._renderSnapshot(n.snapshot,n.prevSnapshot,t):(l._renderSnapshot(n.snapshot,n.snapshot,t),delete t.restore,delete t.snapshot,delete t.prevSnapshot,l.mux(()=>{l._prosemirrorChanged(l.prosemirrorView.state.doc)})))}),t}},view:e=>(l.initView(e),null==o&&l._forceRerender(),a(),{update:()=>{let t=u.getState(e.state);if(null==t.snapshot&&null==t.prevSnapshot&&(s||null!==e.state.doc.content.findDiffStart(e.state.doc.type.createAndFill().content))){if(s=!0,!1===t.addToHistory&&!t.isChangeOrigin){let t=b.getState(e.state),n=t&&t.undoManager;n&&n.stopCapturing()}l.mux(()=>{t.doc.transact(n=>{n.meta.set("addToHistory",t.addToHistory),l._prosemirrorChanged(e.state.doc)},y)})}},destroy:()=>{l.destroy()}})});return u},S=(e,t)=>({type:t.selection.jsonID,anchor:W(t.selection.anchor,e.type,e.mapping),head:W(t.selection.head,e.type,e.mapping)});class _{get _tr(){return this.prosemirrorView.state.tr.setMeta("addToHistory",!1)}_isLocalCursorInView(){return!!this.prosemirrorView.hasFocus()&&(d.isBrowser&&null===this._domSelectionInView&&(p.timeout(0,()=>{this._domSelectionInView=null}),this._domSelectionInView=this._isDomSelectionInView()),this._domSelectionInView)}_isDomSelectionInView(){let e=this.prosemirrorView._root.getSelection();if(null==e||null==e.anchorNode)return!1;let t=this.prosemirrorView._root.createRange();t.setStart(e.anchorNode,e.anchorOffset),t.setEnd(e.focusNode,e.focusOffset),0===t.getClientRects().length&&t.startContainer&&t.collapsed&&t.selectNodeContents(t.startContainer);let n=t.getBoundingClientRect(),r=h.doc.documentElement;return n.bottom>=0&&n.right>=0&&n.left<=(window.innerWidth||r.clientWidth||0)&&n.top<=(window.innerHeight||r.clientHeight||0)}renderSnapshot(e,n){n||(n=t.createSnapshot(t.createDeleteSet(),new Map)),this.prosemirrorView.dispatch(this._tr.setMeta(y,{snapshot:e,prevSnapshot:n}))}unrenderSnapshot(){this.mapping.clear(),this.mux(()=>{let e=this.type.toArray().map(e=>A(e,this.prosemirrorView.state.schema,this)).filter(e=>null!==e),t=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new i.Slice(i.Fragment.from(e),0,0));t.setMeta(y,{snapshot:null,prevSnapshot:null}),this.prosemirrorView.dispatch(t)})}_forceRerender(){this.mapping.clear(),this.mux(()=>{let e=null!==this.beforeTransactionSelection?null:this.prosemirrorView.state.selection,t=this.type.toArray().map(e=>A(e,this.prosemirrorView.state.schema,this)).filter(e=>null!==e),r=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new i.Slice(i.Fragment.from(t),0,0));if(e){let t=a.min(a.max(e.anchor,0),r.doc.content.size),i=a.min(a.max(e.head,0),r.doc.content.size);r.setSelection(n.TextSelection.create(r.doc,t,i))}this.prosemirrorView.dispatch(r.setMeta(y,{isChangeOrigin:!0,binding:this}))})}_renderSnapshot(e,n,r){let a=this.doc,o=this.type;if(e||(e=t.snapshot(this.doc)),e instanceof Uint8Array||n instanceof Uint8Array)if(e instanceof Uint8Array&&n instanceof Uint8Array||u.unexpectedCase(),a=new t.Doc({gc:!1}),t.applyUpdateV2(a,n),n=t.snapshot(a),t.applyUpdateV2(a,e),e=t.snapshot(a),null===o._item){let e=Array.from(this.doc.share.keys()).find(e=>this.doc.share.get(e)===this.type);o=a.getXmlFragment(e)}else{var l;let e=null!=(l=a.store.clients.get(o._item.id.client))?l:[],n=t.findIndexSS(e,o._item.id.clock);o=e[n].content.type}this.mapping.clear(),this.mux(()=>{a.transact(a=>{let l=r.permanentUserData;l&&l.dss.forEach(e=>{t.iterateDeletedStructs(a,e,e=>{})});let u=(e,t)=>{let n="added"===e?l.getUserByClientId(t.client):l.getUserByDeletedId(t);return{user:n,type:e,color:((e,t,n)=>{if(!e.has(n)){if(e.size<t.length){let n=s.create();e.forEach(e=>n.add(e)),t=t.filter(e=>!n.has(e))}e.set(n,c.oneOf(t))}return e.get(n)})(r.colorMapping,r.colors,n)}},d=t.typeListToArraySnapshot(o,new t.Snapshot(n.ds,e.sv)).map(t=>!t._item.deleted||x(t._item,e)||x(t._item,n)?A(t,this.prosemirrorView.state.schema,{mapping:new Map,isOMark:new Map},e,n,u):null).filter(e=>null!==e),h=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new i.Slice(i.Fragment.from(d),0,0));this.prosemirrorView.dispatch(h.setMeta(y,{isChangeOrigin:!0}))},y)})}_typeChanged(e,r){if(null==this.prosemirrorView)return;let a=y.getState(this.prosemirrorView.state);if(0===e.length||null!=a.snapshot||null!=a.prevSnapshot)return void this.renderSnapshot(a.snapshot,a.prevSnapshot);this.mux(()=>{let e=(e,t)=>this.mapping.delete(t);t.iterateDeletedStructs(r,r.deleteSet,e=>{if(e.constructor===t.Item){let t=e.content.type;t&&this.mapping.delete(t)}}),r.changed.forEach(e),r.changedParentTypes.forEach(e);let a=this.type.toArray().map(e=>C(e,this.prosemirrorView.state.schema,this)).filter(e=>null!==e),o=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new i.Slice(i.Fragment.from(a),0,0));((e,t,r)=>{if(null!==t&&null!==t.anchor&&null!==t.head)if("all"===t.type)e.setSelection(new n.AllSelection(e.doc));else if("node"===t.type){let i=q(r.doc,r.type,t.anchor,r.mapping);e.setSelection(n.NodeSelection.create(e.doc,i))}else{let i=q(r.doc,r.type,t.anchor,r.mapping),a=q(r.doc,r.type,t.head,r.mapping);null!==i&&null!==a&&e.setSelection(n.TextSelection.between(e.doc.resolve(i),e.doc.resolve(a)))}})(o,this.beforeTransactionSelection,this),o=o.setMeta(y,{isChangeOrigin:!0,isUndoRedoOperation:r.origin instanceof t.UndoManager}),null!==this.beforeTransactionSelection&&this._isLocalCursorInView()&&o.scrollIntoView(),this.prosemirrorView.dispatch(o)})}_prosemirrorChanged(e){this.doc.transact(()=>{U(this.doc,this.type,e,this),this.beforeTransactionSelection=S(this,this.prosemirrorView.state)},y)}initView(e){null!=this.prosemirrorView&&this.destroy(),this.prosemirrorView=e,this.doc.on("beforeAllTransactions",this.beforeAllTransactions),this.doc.on("afterAllTransactions",this.afterAllTransactions),this.type.observeDeep(this._observeFunction)}destroy(){null!=this.prosemirrorView&&(this.prosemirrorView=null,this.type.unobserveDeep(this._observeFunction),this.doc.off("beforeAllTransactions",this.beforeAllTransactions),this.doc.off("afterAllTransactions",this.afterAllTransactions))}constructor(e,t=new Map){this.type=e,this.prosemirrorView=null,this.mux=(0,r.createMutex)(),this.mapping=t,this.isOMark=new Map,this._observeFunction=this._typeChanged.bind(this),this.doc=e.doc,this.beforeTransactionSelection=null,this.beforeAllTransactions=()=>{null===this.beforeTransactionSelection&&null!=this.prosemirrorView&&(this.beforeTransactionSelection=S(this,this.prosemirrorView.state))},this.afterAllTransactions=()=>{this.beforeTransactionSelection=null},this._domSelectionInView=null}}let C=(e,n,r,i,a,o)=>{let s=r.mapping.get(e);if(void 0===s)if(e instanceof t.XmlElement)return A(e,n,r,i,a,o);else throw u.methodUnimplemented();return s},A=(e,n,r,i,a,o)=>{let s=[],l=e=>{if(e instanceof t.XmlElement){let t=C(e,n,r,i,a,o);null!==t&&s.push(t)}else{var l,u;let c=null==(l=null==(u=e._item.right)?void 0:u.content)?void 0:l.type;c instanceof t.Text&&!c._item.deleted&&c._item.id.client===c.doc.clientID&&(e.applyDelta([{retain:e.length},...c.toDelta()]),c.doc.transact(e=>{c._item.delete(e)}));let d=E(e,n,r,i,a,o);null!==d&&d.forEach(e=>{null!==e&&s.push(e)})}};void 0===i||void 0===a?e.toArray().forEach(l):t.typeListToArraySnapshot(e,new t.Snapshot(a.ds,i.sv)).forEach(l);try{let t=e.getAttributes(i);void 0!==i&&(x(e._item,i)?x(e._item,a)||(t.ychange=o?o("added",e._item.id):{type:"added"}):t.ychange=o?o("removed",e._item.id):{type:"removed"});let l=n.node(e.nodeName,t,s);return r.mapping.set(e,l),l}catch(t){return e.doc.transact(t=>{e._item.delete(t)},y),r.mapping.delete(e),null}},E=(e,t,n,r,i,a)=>{let o=[],s=e.toDelta(r,i,a);try{for(let e=0;e<s.length;e++){let n=s[e];o.push(t.text(n.insert,z(n.attributes,t)))}}catch(t){return e.doc.transact(t=>{e._item.delete(t)},y),null}return o},T=(e,n)=>e instanceof Array?((e,n)=>{let r=new t.XmlText,i=e.map(e=>({insert:e.text,attributes:B(e.marks,n)}));return r.applyDelta(i),n.mapping.set(r,e),r})(e,n):((e,n)=>{let r=new t.XmlElement(e.type.name);for(let t in e.attrs){let n=e.attrs[t];null!==n&&"ychange"!==t&&r.setAttribute(t,n)}return r.insert(0,N(e).map(e=>T(e,n))),n.mapping.set(r,e),r})(e,n),M=e=>"object"==typeof e&&null!==e,I=(e,t)=>{let n=Object.keys(e).filter(t=>null!==e[t]),r=n.length===Object.keys(t).filter(e=>null!==t[e]).length;for(let i=0;i<n.length&&r;i++){let a=n[i],o=e[a],s=t[a];r="ychange"===a||o===s||M(o)&&M(s)&&I(o,s)}return r},N=e=>{let t=e.content.content,n=[];for(let e=0;e<t.length;e++){let r=t[e];if(r.isText){let r=[];for(let n=t[e];e<t.length&&n.isText;n=t[++e])r.push(n);e--,n.push(r)}else n.push(r)}return n},D=(e,t)=>{let n=e.toDelta();return n.length===t.length&&n.every((e,n)=>e.insert===t[n].text&&o.keys(e.attributes||{}).length===t[n].marks.length&&o.every(e.attributes,(e,r)=>{var i;let a=L(r);return I(e,null==(i=t[n].marks.find(e=>e.type.name===a))?void 0:i.attrs)}))},P=(e,n)=>{if(e instanceof t.XmlElement&&!(n instanceof Array)&&H(e,n)){let t=N(n);return e._length===t.length&&I(e.getAttributes(),n.attrs)&&e.toArray().every((e,n)=>P(e,t[n]))}return e instanceof t.XmlText&&n instanceof Array&&D(e,n)},R=(e,t)=>e===t||e instanceof Array&&t instanceof Array&&e.length===t.length&&e.every((e,n)=>t[n]===e),O=(e,t,n)=>{let r=e.toArray(),i=N(t),o=i.length,s=r.length,l=a.min(s,o),u=0,c=0,d=!1;for(;u<l;u++){let e=r[u],t=i[u];if(R(n.mapping.get(e),t))d=!0;else if(!P(e,t))break}for(;u+c<l;c++){let e=r[s-c-1],t=i[o-c-1];if(R(n.mapping.get(e),t))d=!0;else if(!P(e,t))break}return{equalityFactor:u+c,foundMappedChild:d}},j=(e,n,r)=>{r.mapping.set(e,n);let{nAttrs:i,str:a}=(e=>{let n="",r=e._start,i={};for(;null!==r;)!r.deleted&&(r.countable&&r.content instanceof t.ContentString?n+=r.content.str:r.content instanceof t.ContentFormat&&(i[r.content.key]=null)),r=r.right;return{str:n,nAttrs:i}})(e),o=n.map(e=>({insert:e.text,attributes:Object.assign({},i,B(e.marks,r))})),{insert:s,remove:u,index:c}=(0,l.simpleDiff)(a,o.map(e=>e.insert).join(""));e.delete(c,u),e.insert(c,s),e.applyDelta(o.map(e=>({retain:e.insert.length,attributes:e.attributes})))},F=/(.*)(--[a-zA-Z0-9+/=]{8})$/,L=e=>{var t,n;return null!=(n=null==(t=F.exec(e))?void 0:t[1])?n:e},z=(e,t)=>{let n=[];for(let r in e)n.push(t.mark(L(r),e[r]));return n},B=(e,t)=>{let n={};return e.forEach(e=>{if("ychange"!==e.type.name){let r;n[f.setIfUndefined(t.isOMark,e.type,()=>!e.type.excludes(e.type))?"".concat(e.type.name,"--").concat((r=e.toJSON(),g.toBase64((e=>{for(let t=6;t<e.length;t++)e[t%6]=e[t%6]^e[t];return e.slice(0,6)})(m.digest(g.encodeAny(r)))))):e.type.name]=e.attrs}}),n},U=(e,n,r,i)=>{if(n instanceof t.XmlElement&&n.nodeName!==r.type.name)throw Error("node name mismatch!");if(i.mapping.set(n,r),n instanceof t.XmlElement){let e=n.getAttributes(),t=r.attrs;for(let r in t)null!==t[r]?e[r]!==t[r]&&"ychange"!==r&&n.setAttribute(r,t[r]):n.removeAttribute(r);for(let r in e)void 0===t[r]&&n.removeAttribute(r)}let o=N(r),s=o.length,l=n.toArray(),u=l.length,c=a.min(s,u),d=0,h=0;for(;d<c;d++){let e=l[d],t=o[d];if(!R(i.mapping.get(e),t))if(P(e,t))i.mapping.set(e,t);else break}for(;h+d+1<c;h++){let e=l[u-h-1],t=o[s-h-1];if(!R(i.mapping.get(e),t))if(P(e,t))i.mapping.set(e,t);else break}e.transact(()=>{for(;u-d-h>0&&s-d-h>0;){let r=l[d],a=o[d],c=l[u-h-1],p=o[s-h-1];if(r instanceof t.XmlText&&a instanceof Array)D(r,a)||j(r,a,i),d+=1;else{let o=r instanceof t.XmlElement&&H(r,a),s=c instanceof t.XmlElement&&H(c,p);if(o&&s){let e=O(r,a,i),t=O(c,p,i);e.foundMappedChild&&!t.foundMappedChild?s=!1:!e.foundMappedChild&&t.foundMappedChild||e.equalityFactor<t.equalityFactor?o=!1:s=!1}o?(U(e,r,a,i),d+=1):s?(U(e,c,p,i),h+=1):(i.mapping.delete(n.get(d)),n.delete(d,1),n.insert(d,[T(a,i)]),d+=1)}}let r=u-d-h;if(1===u&&0===s&&l[0]instanceof t.XmlText?(i.mapping.delete(l[0]),l[0].delete(0,l[0].length)):r>0&&(n.slice(d,d+r).forEach(e=>i.mapping.delete(e)),n.delete(d,r)),d+h<s){let e=[];for(let t=d;t<s-h;t++)e.push(T(o[t],i));n.insert(d,e)}},y)},H=(e,t)=>!(t instanceof Array)&&e.nodeName===t.type.name,W=(e,n,r)=>{if(0===e)return t.createRelativePositionFromTypeIndex(n,0,-1);let i=null===n._first?null:n._first.content.type;for(;null!==i&&n!==i;){if(i instanceof t.XmlText){if(i._length>=e)return t.createRelativePositionFromTypeIndex(i,e,-1);if(e-=i._length,null!==i._item&&null!==i._item.next)i=i._item.next.content.type;else{do i=null===i._item?null:i._item.parent,e--;while(i!==n&&null!==i&&null!==i._item&&null===i._item.next)null!==i&&i!==n&&(i=null===i._item?null:i._item.next.content.type)}}else{let a=(r.get(i)||{nodeSize:0}).nodeSize;if(null!==i._first&&e<a)i=i._first.content.type,e--;else{if(1===e&&0===i._length&&a>1)return new t.RelativePosition(null===i._item?null:i._item.id,null===i._item?t.findRootTypeKey(i):null,null);if(e-=a,null!==i._item&&null!==i._item.next)i=i._item.next.content.type;else{if(0===e)return i=null===i._item?i:i._item.parent,new t.RelativePosition(null===i._item?null:i._item.id,null===i._item?t.findRootTypeKey(i):null,null);do i=i._item.parent,e--;while(i!==n&&null===i._item.next)i!==n&&(i=i._item.next.content.type)}}}if(null===i)throw u.unexpectedCase();if(0===e&&i.constructor!==t.XmlText&&i!==n)return V(i._item.parent,i._item)}return t.createRelativePositionFromTypeIndex(n,n._length,-1)},V=(e,n)=>{let r=null,i=null;return null===e._item?i=t.findRootTypeKey(e):r=t.createID(e._item.id.client,e._item.id.clock),new t.RelativePosition(r,i,n.id)},q=(e,n,r,i)=>{let a=t.createAbsolutePositionFromRelativePosition(r,e);if(null===a||a.type!==n&&!t.isParentOf(n,a.type._item))return null;let o=a.type,s=0;if(o.constructor===t.XmlText)s=a.index;else if(null===o._item||!o._item.deleted){let e=o._first,n=0;for(;n<o._length&&n<a.index&&null!==e;){if(!e.deleted){let r=e.content.type;n++,r instanceof t.XmlText?s+=r._length:s+=i.get(r).nodeSize}e=e.right}s+=1}for(;o!==n&&null!==o._item;){let e=o._item.parent;if(null===e._item||!e._item.deleted){s+=1;let n=e._first;for(;null!==n;){let e=n.content.type;if(e===o)break;n.deleted||(e instanceof t.XmlText?s+=e._length:s+=i.get(e).nodeSize),n=n.right}}o=e}return s-1};function G(e){let n=e.toArray(),r=e=>{let n;if(e instanceof t.XmlText)n=e.toDelta().map(e=>{let t={type:"text",text:e.insert};return e.attributes&&(t.marks=Object.keys(e.attributes).map(t=>{let n=e.attributes[t],r={type:L(t)};return Object.keys(n)&&(r.attrs=n),r})),t});else if(e instanceof t.XmlElement){n={type:e.nodeName};let t=e.getAttributes();Object.keys(t).length&&(n.attrs=t);let i=e.toArray();i.length&&(n.content=i.map(r).flat())}else u.unexpectedCase();return n};return{type:"doc",content:n.map(r)}}let $=e=>{let t=b.getState(e).undoManager;if(null!=t)return t.undo(),!0},K=e=>{let t=b.getState(e).undoManager;if(null!=t)return t.redo(),!0},Y=new Set(["paragraph"]),X=function(){let{protectedNodes:e=Y,trackedOrigins:r=[],undoManager:i=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new n.Plugin({key:b,state:{init:(n,a)=>{let o=y.getState(a),s=i||new t.UndoManager(o.type,{trackedOrigins:new Set([y].concat(r)),deleteFilter:n=>!(n instanceof t.Item)||!(n.content instanceof t.ContentType)||!(n.content.type instanceof t.Text||n.content.type instanceof t.XmlElement&&e.has(n.content.type.nodeName))||0===n.content.type._length,captureTransaction:e=>!1!==e.meta.get("addToHistory")});return{undoManager:s,prevSel:null,hasUndoOps:s.undoStack.length>0,hasRedoOps:s.redoStack.length>0}},apply:(e,t,n,r)=>{let i=y.getState(r).binding,a=t.undoManager,o=a.undoStack.length>0,s=a.redoStack.length>0;return i?{undoManager:a,prevSel:S(i,n),hasUndoOps:o,hasRedoOps:s}:o!==t.hasUndoOps||s!==t.hasRedoOps?Object.assign({},t,{hasUndoOps:a.undoStack.length>0,hasRedoOps:a.redoStack.length>0}):t}},view:e=>{let t=y.getState(e.state),n=b.getState(e.state).undoManager;return n.on("stack-item-added",n=>{let{stackItem:r}=n,i=t.binding;i&&r.meta.set(i,b.getState(e.state).prevSel)}),n.on("stack-item-popped",e=>{let{stackItem:n}=e,r=t.binding;r&&(r.beforeTransactionSelection=n.meta.get(r)||r.beforeTransactionSelection)}),{destroy:()=>{n.destroy()}}}})}},22556:e=>{"use strict";e.s({default:()=>i});var t=e.i(691283);e.i(131841);var n=e.i(968617),r=e.i(989450),i=t.Extension.create({name:"collaboration",priority:1e3,addOptions:()=>({document:null,field:"default",fragment:null,provider:null}),addStorage:()=>({isDisabled:!1}),onCreate(){this.editor.extensionManager.extensions.find(e=>"undoRedo"===e.name)&&console.warn('[tiptap warn]: "@tiptap/extension-collaboration" comes with its own history support and is not compatible with "@tiptap/extension-undo-redo".')},addCommands:()=>({undo:()=>e=>{let{tr:t,state:n,dispatch:i}=e;return t.setMeta("preventDispatch",!0),0!==r.yUndoPluginKey.getState(n).undoManager.undoStack.length&&(!i||(0,r.undo)(n))},redo:()=>e=>{let{tr:t,state:n,dispatch:i}=e;return t.setMeta("preventDispatch",!0),0!==r.yUndoPluginKey.getState(n).undoManager.redoStack.length&&(!i||(0,r.redo)(n))}}),addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Mod-y":()=>this.editor.commands.redo(),"Shift-Mod-z":()=>this.editor.commands.redo()}},addProseMirrorPlugins(){var e;let t=this.options.fragment?this.options.fragment:this.options.document.getXmlFragment(this.options.field),i=(0,r.yUndoPlugin)(this.options.yUndoOptions),a=i.spec.view;i.spec.view=e=>{let{undoManager:t}=r.yUndoPluginKey.getState(e.state);t.restore&&(t.restore(),t.restore=()=>{});let n=a?a(e):void 0;return{destroy:()=>{let e=t.trackedOrigins.has(t),r=t._observers;t.restore=()=>{e&&t.trackedOrigins.add(t),t.doc.on("afterTransaction",t.afterTransactionHandler),t._observers=r},(null==n?void 0:n.destroy)&&n.destroy()}}};let o={...this.options.ySyncOptions,onFirstRender:this.options.onFirstRender},s=(0,r.ySyncPlugin)(t,o);return this.editor.options.enableContentCheck&&(null==(e=t.doc)||e.on("beforeTransaction",()=>{try{let e=(0,r.yXmlFragmentToProsemirrorJSON)(t);if(0===e.content.length)return;this.editor.schema.nodeFromJSON(e).check()}catch(e){return this.editor.emit("contentError",{error:e,editor:this.editor,disableCollaboration:()=>{var e;null==(e=t.doc)||e.destroy(),this.storage.isDisabled=!0}}),!1}})),[s,i,this.editor.options.enableContentCheck&&new n.Plugin({key:new n.PluginKey("filterInvalidContent"),filterTransaction:()=>{var e;return!1!==this.storage.isDisabled&&(null==(e=t.doc)||e.destroy()),!0}})].filter(Boolean)}})},207307:e=>{"use strict";e.s({CellSelection:()=>x,TableMap:()=>l,addColumnAfter:()=>T,addColumnBefore:()=>E,addRowAfter:()=>D,addRowBefore:()=>N,columnResizing:()=>es,deleteColumn:()=>M,deleteRow:()=>P,deleteTable:()=>H,fixTables:()=>_,goToNextCell:()=>U,mergeCells:()=>O,setCellAttr:()=>F,splitCell:()=>j,tableEditing:()=>ep,toggleHeader:()=>z,toggleHeaderCell:()=>B});var t,n,r=e.i(968617),i=e.i(490077),a=e.i(954647),o=e.i(991654),s=e.i(47542);if("undefined"!=typeof WeakMap){let e=new WeakMap;t=t=>e.get(t),n=(t,n)=>(e.set(t,n),n)}else{let e=[],r=0;t=t=>{for(let n=0;n<e.length;n+=2)if(e[n]==t)return e[n+1]},n=(t,n)=>(10==r&&(r=0),e[r++]=t,e[r++]=n)}var l=class{findCell(e){for(let t=0;t<this.map.length;t++){let n=this.map[t];if(n!=e)continue;let r=t%this.width,i=t/this.width|0,a=r+1,o=i+1;for(let e=1;a<this.width&&this.map[t+e]==n;e++)a++;for(let e=1;o<this.height&&this.map[t+this.width*e]==n;e++)o++;return{left:r,top:i,right:a,bottom:o}}throw RangeError("No cell with offset ".concat(e," found"))}colCount(e){for(let t=0;t<this.map.length;t++)if(this.map[t]==e)return t%this.width;throw RangeError("No cell with offset ".concat(e," found"))}nextCell(e,t,n){let{left:r,right:i,top:a,bottom:o}=this.findCell(e);return"horiz"==t?(n<0?0==r:i==this.width)?null:this.map[a*this.width+(n<0?r-1:i)]:(n<0?0==a:o==this.height)?null:this.map[r+this.width*(n<0?a-1:o)]}rectBetween(e,t){let{left:n,right:r,top:i,bottom:a}=this.findCell(e),{left:o,right:s,top:l,bottom:u}=this.findCell(t);return{left:Math.min(n,o),top:Math.min(i,l),right:Math.max(r,s),bottom:Math.max(a,u)}}cellsInRect(e){let t=[],n={};for(let r=e.top;r<e.bottom;r++)for(let i=e.left;i<e.right;i++){let a=r*this.width+i,o=this.map[a];!n[o]&&(n[o]=!0,i==e.left&&i&&this.map[a-1]==o||r==e.top&&r&&this.map[a-this.width]==o||t.push(o))}return t}positionAt(e,t,n){for(let r=0,i=0;;r++){let a=i+n.child(r).nodeSize;if(r==e){let n=t+e*this.width,r=(e+1)*this.width;for(;n<r&&this.map[n]<i;)n++;return n==r?a-1:this.map[n]}i=a}}static get(e){return t(e)||n(e,function(e){if("table"!=e.type.spec.tableRole)throw RangeError("Not a table node: "+e.type.name);let t=function(e){let t=-1,n=!1;for(let r=0;r<e.childCount;r++){let i=e.child(r),a=0;if(n)for(let t=0;t<r;t++){let n=e.child(t);for(let e=0;e<n.childCount;e++){let i=n.child(e);t+i.attrs.rowspan>r&&(a+=i.attrs.colspan)}}for(let e=0;e<i.childCount;e++){let t=i.child(e);a+=t.attrs.colspan,t.attrs.rowspan>1&&(n=!0)}-1==t?t=a:t!=a&&(t=Math.max(t,a))}return t}(e),n=e.childCount,r=[],i=0,a=null,o=[];for(let e=0,i=t*n;e<i;e++)r[e]=0;for(let s=0,l=0;s<n;s++){let u=e.child(s);l++;for(let e=0;;e++){for(;i<r.length&&0!=r[i];)i++;if(e==u.childCount)break;let c=u.child(e),{colspan:d,rowspan:h,colwidth:p}=c.attrs;for(let e=0;e<h;e++){if(e+s>=n){(a||(a=[])).push({type:"overlong_rowspan",pos:l,n:h-e});break}let u=i+e*t;for(let e=0;e<d;e++){0==r[u+e]?r[u+e]=l:(a||(a=[])).push({type:"collision",row:s,pos:l,n:d-e});let n=p&&p[e];if(n){let r=(u+e)%t*2,i=o[r];null==i||i!=n&&1==o[r+1]?(o[r]=n,o[r+1]=1):i==n&&o[r+1]++}}}i+=d,l+=c.nodeSize}let c=(s+1)*t,d=0;for(;i<c;)0==r[i++]&&d++;d&&(a||(a=[])).push({type:"missing",row:s,n:d}),l++}(0===t||0===n)&&(a||(a=[])).push({type:"zero_sized"});let s=new l(t,n,r,a),u=!1;for(let e=0;!u&&e<o.length;e+=2)null!=o[e]&&o[e+1]<n&&(u=!0);return u&&function(e,t,n){e.problems||(e.problems=[]);let r={};for(let i=0;i<e.map.length;i++){let a=e.map[i];if(r[a])continue;r[a]=!0;let o=n.nodeAt(a);if(!o)throw RangeError("No cell with offset ".concat(a," found"));let s=null,l=o.attrs;for(let n=0;n<l.colspan;n++){let r=t[2*((i+n)%e.width)];null==r||l.colwidth&&l.colwidth[n]==r||((s||(s=function(e){if(e.colwidth)return e.colwidth.slice();let t=[];for(let n=0;n<e.colspan;n++)t.push(0);return t}(l)))[n]=r)}s&&e.problems.unshift({type:"colwidth mismatch",pos:a,colwidth:s})}}(s,o,e),s}(e))}constructor(e,t,n,r){this.width=e,this.height=t,this.map=n,this.problems=r}};function u(e){let t=e.cached.tableNodeTypes;if(!t)for(let n in t=e.cached.tableNodeTypes={},e.nodes){let r=e.nodes[n],i=r.spec.tableRole;i&&(t[i]=r)}return t}var c=new r.PluginKey("selectingCells");function d(e){for(let t=e.depth-1;t>0;t--)if("row"==e.node(t).type.spec.tableRole)return e.node(0).resolve(e.before(t+1));return null}function h(e){let t=e.selection.$head;for(let e=t.depth;e>0;e--)if("row"==t.node(e).type.spec.tableRole)return!0;return!1}function p(e){let t=e.selection;if("$anchorCell"in t&&t.$anchorCell)return t.$anchorCell.pos>t.$headCell.pos?t.$anchorCell:t.$headCell;if("node"in t&&t.node&&"cell"==t.node.type.spec.tableRole)return t.$anchor;let n=d(t.$head)||function(e){for(let t=e.nodeAfter,n=e.pos;t;t=t.firstChild,n++){let r=t.type.spec.tableRole;if("cell"==r||"header_cell"==r)return e.doc.resolve(n)}for(let t=e.nodeBefore,n=e.pos;t;t=t.lastChild,n--){let r=t.type.spec.tableRole;if("cell"==r||"header_cell"==r)return e.doc.resolve(n-t.nodeSize)}}(t.$head);if(n)return n;throw RangeError("No cell found around position ".concat(t.head))}function f(e){return"row"==e.parent.type.spec.tableRole&&!!e.nodeAfter}function m(e,t){return e.depth==t.depth&&e.pos>=t.start(-1)&&e.pos<=t.end(-1)}function g(e,t,n){let r=e.node(-1),i=l.get(r),a=e.start(-1),o=i.nextCell(e.pos-a,t,n);return null==o?null:e.node(0).resolve(a+o)}function y(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r={...e,colspan:e.colspan-n};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(t,n),r.colwidth.some(e=>e>0)||(r.colwidth=null)),r}function b(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r={...e,colspan:e.colspan+n};if(r.colwidth){r.colwidth=r.colwidth.slice();for(let e=0;e<n;e++)r.colwidth.splice(t,0,0)}return r}var x=class e extends r.Selection{map(t,n){let i=t.resolve(n.map(this.$anchorCell.pos)),a=t.resolve(n.map(this.$headCell.pos));if(f(i)&&f(a)&&m(i,a)){let t=this.$anchorCell.node(-1)!=i.node(-1);return t&&this.isRowSelection()?e.rowSelection(i,a):t&&this.isColSelection()?e.colSelection(i,a):new e(i,a)}return r.TextSelection.between(i,a)}content(){let e=this.$anchorCell.node(-1),t=l.get(e),n=this.$anchorCell.start(-1),r=t.rectBetween(this.$anchorCell.pos-n,this.$headCell.pos-n),a={},o=[];for(let n=r.top;n<r.bottom;n++){let s=[];for(let i=n*t.width+r.left,o=r.left;o<r.right;o++,i++){let n=t.map[i];if(a[n])continue;a[n]=!0;let o=t.findCell(n),l=e.nodeAt(n);if(!l)throw RangeError("No cell with offset ".concat(n," found"));let u=r.left-o.left,c=o.right-r.right;if(u>0||c>0){let e=l.attrs;if(u>0&&(e=y(e,0,u)),c>0&&(e=y(e,e.colspan-c,c)),o.left<r.left){if(!(l=l.type.createAndFill(e)))throw RangeError("Could not create cell with attrs ".concat(JSON.stringify(e)))}else l=l.type.create(e,l.content)}if(o.top<r.top||o.bottom>r.bottom){let e={...l.attrs,rowspan:Math.min(o.bottom,r.bottom)-Math.max(o.top,r.top)};l=o.top<r.top?l.type.createAndFill(e):l.type.create(e,l.content)}s.push(l)}o.push(e.child(n).copy(i.Fragment.from(s)))}let s=this.isColSelection()&&this.isRowSelection()?e:o;return new i.Slice(i.Fragment.from(s),1,1)}replace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.Slice.empty,n=e.steps.length,a=this.ranges;for(let r=0;r<a.length;r++){let{$from:o,$to:s}=a[r],l=e.mapping.slice(n);e.replace(l.map(o.pos),l.map(s.pos),r?i.Slice.empty:t)}let o=r.Selection.findFrom(e.doc.resolve(e.mapping.slice(n).map(this.to)),-1);o&&e.setSelection(o)}replaceWith(e,t){this.replace(e,new i.Slice(i.Fragment.from(t),0,0))}forEachCell(e){let t=this.$anchorCell.node(-1),n=l.get(t),r=this.$anchorCell.start(-1),i=n.cellsInRect(n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r));for(let n=0;n<i.length;n++)e(t.nodeAt(i[n]),r+i[n])}isColSelection(){let e=this.$anchorCell.index(-1),t=this.$headCell.index(-1);return!(Math.min(e,t)>0)&&Math.max(e+this.$anchorCell.nodeAfter.attrs.rowspan,t+this.$headCell.nodeAfter.attrs.rowspan)==this.$headCell.node(-1).childCount}static colSelection(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,r=t.node(-1),i=l.get(r),a=t.start(-1),o=i.findCell(t.pos-a),s=i.findCell(n.pos-a),u=t.node(0);return o.top<=s.top?(o.top>0&&(t=u.resolve(a+i.map[o.left])),s.bottom<i.height&&(n=u.resolve(a+i.map[i.width*(i.height-1)+s.right-1]))):(s.top>0&&(n=u.resolve(a+i.map[s.left])),o.bottom<i.height&&(t=u.resolve(a+i.map[i.width*(i.height-1)+o.right-1]))),new e(t,n)}isRowSelection(){let e=this.$anchorCell.node(-1),t=l.get(e),n=this.$anchorCell.start(-1),r=t.colCount(this.$anchorCell.pos-n),i=t.colCount(this.$headCell.pos-n);return!(Math.min(r,i)>0)&&Math.max(r+this.$anchorCell.nodeAfter.attrs.colspan,i+this.$headCell.nodeAfter.attrs.colspan)==t.width}eq(t){return t instanceof e&&t.$anchorCell.pos==this.$anchorCell.pos&&t.$headCell.pos==this.$headCell.pos}static rowSelection(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,r=t.node(-1),i=l.get(r),a=t.start(-1),o=i.findCell(t.pos-a),s=i.findCell(n.pos-a),u=t.node(0);return o.left<=s.left?(o.left>0&&(t=u.resolve(a+i.map[o.top*i.width])),s.right<i.width&&(n=u.resolve(a+i.map[i.width*(s.top+1)-1]))):(s.left>0&&(n=u.resolve(a+i.map[s.top*i.width])),o.right<i.width&&(t=u.resolve(a+i.map[i.width*(o.top+1)-1]))),new e(t,n)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(t,n){return new e(t.resolve(n.anchor),t.resolve(n.head))}static create(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n;return new e(t.resolve(n),t.resolve(r))}getBookmark(){return new w(this.$anchorCell.pos,this.$headCell.pos)}constructor(e,t=e){let n=e.node(-1),i=l.get(n),a=e.start(-1),o=i.rectBetween(e.pos-a,t.pos-a),s=e.node(0),u=i.cellsInRect(o).filter(e=>e!=t.pos-a);u.unshift(t.pos-a);let c=u.map(e=>{let t=n.nodeAt(e);if(!t)throw RangeError("No cell with offset ".concat(e," found"));let i=a+e+1;return new r.SelectionRange(s.resolve(i),s.resolve(i+t.content.size))});super(c[0].$from,c[0].$to,c),this.$anchorCell=e,this.$headCell=t}};x.prototype.visible=!1,r.Selection.jsonID("cell",x);var w=class e{map(t){return new e(t.map(this.anchor),t.map(this.head))}resolve(e){let t=e.resolve(this.anchor),n=e.resolve(this.head);return"row"==t.parent.type.spec.tableRole&&"row"==n.parent.type.spec.tableRole&&t.index()<t.parent.childCount&&n.index()<n.parent.childCount&&m(t,n)?new x(t,n):r.Selection.near(n,1)}constructor(e,t){this.anchor=e,this.head=t}};function k(e){if(!(e.selection instanceof x))return null;let t=[];return e.selection.forEachCell((e,n)=>{t.push(a.Decoration.node(n,n+e.nodeSize,{class:"selectedCell"}))}),a.DecorationSet.create(e.doc,t)}var S=new r.PluginKey("fix-tables");function _(e,t){let n,r=(t,r)=>{"table"==t.type.spec.tableRole&&(n=function(e,t,n,r){let i,a,o=l.get(t);if(!o.problems)return r;r||(r=e.tr);let s=[];for(let e=0;e<o.height;e++)s.push(0);for(let e=0;e<o.problems.length;e++){let i=o.problems[e];if("collision"==i.type){let e=t.nodeAt(i.pos);if(!e)continue;let a=e.attrs;for(let e=0;e<a.rowspan;e++)s[i.row+e]+=i.n;r.setNodeMarkup(r.mapping.map(n+1+i.pos),null,y(a,a.colspan-i.n,i.n))}else if("missing"==i.type)s[i.row]+=i.n;else if("overlong_rowspan"==i.type){let e=t.nodeAt(i.pos);if(!e)continue;r.setNodeMarkup(r.mapping.map(n+1+i.pos),null,{...e.attrs,rowspan:e.attrs.rowspan-i.n})}else if("colwidth mismatch"==i.type){let e=t.nodeAt(i.pos);if(!e)continue;r.setNodeMarkup(r.mapping.map(n+1+i.pos),null,{...e.attrs,colwidth:i.colwidth})}else if("zero_sized"==i.type){let e=r.mapping.map(n);r.delete(e,e+t.nodeSize)}}for(let e=0;e<s.length;e++)s[e]&&(null==i&&(i=e),a=e);for(let l=0,c=n+1;l<o.height;l++){let n=t.child(l),o=c+n.nodeSize,d=s[l];if(d>0){let t="cell";n.firstChild&&(t=n.firstChild.type.spec.tableRole);let s=[];for(let n=0;n<d;n++){let n=u(e.schema)[t].createAndFill();n&&s.push(n)}let h=(0==l||i==l-1)&&a==l?c+1:o-1;r.insert(r.mapping.map(h),s)}c=o}return r.setMeta(S,{fixTables:!0})}(e,t,r,n))};return t?t.doc!=e.doc&&function e(t,n,r,i){let a=t.childCount,o=n.childCount;n:for(let s=0,l=0;s<o;s++){let o=n.child(s);for(let e=l,n=Math.min(a,s+3);e<n;e++)if(t.child(e)==o){l=e+1,r+=o.nodeSize;continue n}i(o,r),l<a&&t.child(l).sameMarkup(o)?e(t.child(l),o,r+1,i):o.nodesBetween(0,o.content.size,i,r+1),r+=o.nodeSize}}(t.doc,e.doc,0,r):e.doc.descendants(r),n}function C(e){let t=e.selection,n=p(e),r=n.node(-1),i=n.start(-1),a=l.get(r);return{...t instanceof x?a.rectBetween(t.$anchorCell.pos-i,t.$headCell.pos-i):a.findCell(n.pos-i),tableStart:i,map:a,table:r}}function A(e,t,n){let{map:r,tableStart:i,table:a}=t,o=n>0?-1:0;(function(e,t,n){let r=u(t.type.schema).header_cell;for(let i=0;i<e.height;i++)if(t.nodeAt(e.map[n+i*e.width]).type!=r)return!1;return!0})(r,a,n+o)&&(o=0==n||n==r.width?null:0);for(let t=0;t<r.height;t++){let s=t*r.width+n;if(n>0&&n<r.width&&r.map[s-1]==r.map[s]){let o=r.map[s],l=a.nodeAt(o);e.setNodeMarkup(e.mapping.map(i+o),null,b(l.attrs,n-r.colCount(o))),t+=l.attrs.rowspan-1}else{let l=null==o?u(a.type.schema).cell:a.nodeAt(r.map[s+o]).type,c=r.positionAt(t,n,a);e.insert(e.mapping.map(i+c),l.createAndFill())}}return e}function E(e,t){if(!h(e))return!1;if(t){let n=C(e);t(A(e.tr,n,n.left))}return!0}function T(e,t){if(!h(e))return!1;if(t){let n=C(e);t(A(e.tr,n,n.right))}return!0}function M(e,t){if(!h(e))return!1;if(t){let n=C(e),r=e.tr;if(0==n.left&&n.right==n.map.width)return!1;for(let e=n.right-1;!function(e,t,n){let{map:r,table:i,tableStart:a}=t,o=e.mapping.maps.length;for(let t=0;t<r.height;){let s=t*r.width+n,l=r.map[s],u=i.nodeAt(l),c=u.attrs;if(n>0&&r.map[s-1]==l||n<r.width-1&&r.map[s+1]==l)e.setNodeMarkup(e.mapping.slice(o).map(a+l),null,y(c,n-r.colCount(l)));else{let t=e.mapping.slice(o).map(a+l);e.delete(t,t+u.nodeSize)}t+=c.rowspan}}(r,n,e),e!=n.left;e--){let e=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!e)throw RangeError("No table found");n.table=e,n.map=l.get(e)}t(r)}return!0}function I(e,t,n){var r;let{map:i,tableStart:a,table:o}=t,s=a;for(let e=0;e<n;e++)s+=o.child(e).nodeSize;let l=[],c=n>0?-1:0;(function(e,t,n){var r;let i=u(t.type.schema).header_cell;for(let a=0;a<e.width;a++)if((null==(r=t.nodeAt(e.map[a+n*e.width]))?void 0:r.type)!=i)return!1;return!0})(i,o,n+c)&&(c=0==n||n==i.height?null:0);for(let t=0,s=i.width*n;t<i.width;t++,s++)if(n>0&&n<i.height&&i.map[s]==i.map[s-i.width]){let n=i.map[s],r=o.nodeAt(n).attrs;e.setNodeMarkup(a+n,null,{...r,rowspan:r.rowspan+1}),t+=r.colspan-1}else{let e=null==c?u(o.type.schema).cell:null==(r=o.nodeAt(i.map[s+c*i.width]))?void 0:r.type,t=null==e?void 0:e.createAndFill();t&&l.push(t)}return e.insert(s,u(o.type.schema).row.create(null,l)),e}function N(e,t){if(!h(e))return!1;if(t){let n=C(e);t(I(e.tr,n,n.top))}return!0}function D(e,t){if(!h(e))return!1;if(t){let n=C(e);t(I(e.tr,n,n.bottom))}return!0}function P(e,t){if(!h(e))return!1;if(t){let n=C(e),r=e.tr;if(0==n.top&&n.bottom==n.map.height)return!1;for(let e=n.bottom-1;!function(e,t,n){let{map:r,table:i,tableStart:a}=t,o=0;for(let e=0;e<n;e++)o+=i.child(e).nodeSize;let s=o+i.child(n).nodeSize,l=e.mapping.maps.length;e.delete(o+a,s+a);let u=new Set;for(let t=0,o=n*r.width;t<r.width;t++,o++){let s=r.map[o];if(!u.has(s)){if(u.add(s),n>0&&s==r.map[o-r.width]){let n=i.nodeAt(s).attrs;e.setNodeMarkup(e.mapping.slice(l).map(s+a),null,{...n,rowspan:n.rowspan-1}),t+=n.colspan-1}else if(n<r.height&&s==r.map[o+r.width]){let o=i.nodeAt(s),u=o.attrs,c=o.type.create({...u,rowspan:o.attrs.rowspan-1},o.content),d=r.positionAt(n+1,t,i);e.insert(e.mapping.slice(l).map(a+d),c),t+=u.colspan-1}}}}(r,n,e),e!=n.top;e--){let e=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!e)throw RangeError("No table found");n.table=e,n.map=l.get(n.table)}t(r)}return!0}function R(e){let t=e.content;return 1==t.childCount&&t.child(0).isTextblock&&0==t.child(0).childCount}function O(e,t){let n=e.selection;if(!(n instanceof x)||n.$anchorCell.pos==n.$headCell.pos)return!1;let r=C(e),{map:a}=r;if(function(e,t){let{width:n,height:r,map:i}=e,a=t.top*n+t.left,o=a,s=(t.bottom-1)*n+t.left,l=a+(t.right-t.left-1);for(let e=t.top;e<t.bottom;e++){if(t.left>0&&i[o]==i[o-1]||t.right<n&&i[l]==i[l+1])return!0;o+=n,l+=n}for(let e=t.left;e<t.right;e++){if(t.top>0&&i[a]==i[a-n]||t.bottom<r&&i[s]==i[s+n])return!0;a++,s++}return!1}(a,r))return!1;if(t){let n,o,s=e.tr,l={},u=i.Fragment.empty;for(let e=r.top;e<r.bottom;e++)for(let t=r.left;t<r.right;t++){let i=a.map[e*a.width+t],c=r.table.nodeAt(i);if(!l[i]&&c)if(l[i]=!0,null==n)n=i,o=c;else{R(c)||(u=u.append(c.content));let e=s.mapping.map(i+r.tableStart);s.delete(e,e+c.nodeSize)}}if(null==n||null==o)return!0;if(s.setNodeMarkup(n+r.tableStart,null,{...b(o.attrs,o.attrs.colspan,r.right-r.left-o.attrs.colspan),rowspan:r.bottom-r.top}),u.size){let e=n+1+o.content.size,t=R(o)?n+1:e;s.replaceWith(t+r.tableStart,e+r.tableStart,u)}s.setSelection(new x(s.doc.resolve(n+r.tableStart))),t(s)}return!0}function j(e,t){var n;let r=u(e.schema);return(n=e=>{let{node:t}=e;return r[t.type.spec.tableRole]},(e,t)=>{var r;let i,a,o=e.selection;if(o instanceof x){if(o.$anchorCell.pos!=o.$headCell.pos)return!1;i=o.$anchorCell.nodeAfter,a=o.$anchorCell.pos}else{if(!(i=function(e){for(let t=e.depth;t>0;t--){let n=e.node(t).type.spec.tableRole;if("cell"===n||"header_cell"===n)return e.node(t)}return null}(o.$from)))return!1;a=null==(r=d(o.$from))?void 0:r.pos}if(null==i||null==a||1==i.attrs.colspan&&1==i.attrs.rowspan)return!1;if(t){let r,s=i.attrs,l=[],u=s.colwidth;s.rowspan>1&&(s={...s,rowspan:1}),s.colspan>1&&(s={...s,colspan:1});let c=C(e),d=e.tr;for(let e=0;e<c.right-c.left;e++)l.push(u?{...s,colwidth:u&&u[e]?[u[e]]:null}:s);for(let e=c.top;e<c.bottom;e++){let t=c.map.positionAt(e,c.left,c.table);e==c.top&&(t+=i.nodeSize);for(let a=c.left,o=0;a<c.right;a++,o++)(a!=c.left||e!=c.top)&&d.insert(r=d.mapping.map(t+c.tableStart,1),n({node:i,row:e,col:a}).createAndFill(l[o]))}d.setNodeMarkup(a,n({node:i,row:c.top,col:c.left}),l[0]),o instanceof x&&d.setSelection(new x(d.doc.resolve(o.$anchorCell.pos),r?d.doc.resolve(r):void 0)),t(d)}return!0})(e,t)}function F(e,t){return function(n,r){if(!h(n))return!1;let i=p(n);if(i.nodeAfter.attrs[e]===t)return!1;if(r){let a=n.tr;n.selection instanceof x?n.selection.forEachCell((n,r)=>{n.attrs[e]!==t&&a.setNodeMarkup(r,null,{...n.attrs,[e]:t})}):a.setNodeMarkup(i.pos,null,{...i.nodeAfter.attrs,[e]:t}),r(a)}return!0}}function L(e,t,n){let r=t.map.cellsInRect({left:0,top:0,right:"row"==e?t.map.width:1,bottom:"column"==e?t.map.height:1});for(let e=0;e<r.length;e++){let i=t.table.nodeAt(r[e]);if(i&&i.type!==n.header_cell)return!1}return!0}function z(e,t){if((t=t||{useDeprecatedLogic:!1}).useDeprecatedLogic)return function(t,n){if(!h(t))return!1;if(n){let r=u(t.schema),i=C(t),a=t.tr,o=i.map.cellsInRect("column"==e?{left:i.left,top:0,right:i.right,bottom:i.map.height}:"row"==e?{left:0,top:i.top,right:i.map.width,bottom:i.bottom}:i),s=o.map(e=>i.table.nodeAt(e));for(let e=0;e<o.length;e++)s[e].type==r.header_cell&&a.setNodeMarkup(i.tableStart+o[e],r.cell,s[e].attrs);if(0==a.steps.length)for(let e=0;e<o.length;e++)a.setNodeMarkup(i.tableStart+o[e],r.header_cell,s[e].attrs);n(a)}return!0};return function(t,n){if(!h(t))return!1;if(n){let r=u(t.schema),i=C(t),a=t.tr,o=L("row",i,r),s=L("column",i,r),l=+!!("column"===e?o:"row"===e&&s),c="column"==e?{left:0,top:l,right:1,bottom:i.map.height}:"row"==e?{left:l,top:0,right:i.map.width,bottom:1}:i,d="column"==e?s?r.cell:r.header_cell:"row"==e?o?r.cell:r.header_cell:r.cell;i.map.cellsInRect(c).forEach(e=>{let t=e+i.tableStart,n=a.doc.nodeAt(t);n&&a.setNodeMarkup(t,d,n.attrs)}),n(a)}return!0}}z("row",{useDeprecatedLogic:!0}),z("column",{useDeprecatedLogic:!0});var B=z("cell",{useDeprecatedLogic:!0});function U(e){return function(t,n){if(!h(t))return!1;let i=function(e,t){if(t<0){let t=e.nodeBefore;if(t)return e.pos-t.nodeSize;for(let t=e.index(-1)-1,n=e.before();t>=0;t--){let r=e.node(-1).child(t),i=r.lastChild;if(i)return n-1-i.nodeSize;n-=r.nodeSize}}else{if(e.index()<e.parent.childCount-1)return e.pos+e.nodeAfter.nodeSize;let t=e.node(-1);for(let n=e.indexAfter(-1),r=e.after();n<t.childCount;n++){let e=t.child(n);if(e.childCount)return r+1;r+=e.nodeSize}}return null}(p(t),e);if(null==i)return!1;if(n){let e=t.doc.resolve(i);n(t.tr.setSelection(r.TextSelection.between(e,e.node(0).resolve(e.pos+e.nodeAfter.nodeSize))).scrollIntoView())}return!0}}function H(e,t){let n=e.selection.$anchor;for(let r=n.depth;r>0;r--)if("table"==n.node(r).type.spec.tableRole)return t&&t(e.tr.delete(n.before(r),n.after(r)).scrollIntoView()),!0;return!1}function W(e,t){let n=e.selection;if(!(n instanceof x))return!1;if(t){let r=e.tr,a=u(e.schema).cell.createAndFill().content;n.forEachCell((e,t)=>{e.content.eq(a)||r.replace(r.mapping.map(t+1),r.mapping.map(t+e.nodeSize-1),new i.Slice(a,0,0))}),r.docChanged&&t(r)}return!0}function V(e,t){let n=e.createAndFill();return new s.Transform(n).replace(0,n.content.size,t).doc}function q(e,t,n,r,i,a,o,s){if(0==o||o==t.height)return!1;let l=!1;for(let u=i;u<a;u++){let i=o*t.width+u,a=t.map[i];if(t.map[i-t.width]==a){l=!0;let i=n.nodeAt(a),{top:c,left:d}=t.findCell(a);e.setNodeMarkup(e.mapping.slice(s).map(a+r),null,{...i.attrs,rowspan:o-c}),e.insert(e.mapping.slice(s).map(t.positionAt(o,d,n)),i.type.createAndFill({...i.attrs,rowspan:c+i.attrs.rowspan-o})),u+=i.attrs.colspan-1}}return l}function G(e,t,n,r,i,a,o,s){if(0==o||o==t.width)return!1;let l=!1;for(let u=i;u<a;u++){let i=u*t.width+o,a=t.map[i];if(t.map[i-1]==a){l=!0;let i=n.nodeAt(a),c=t.colCount(a),d=e.mapping.slice(s).map(a+r);e.setNodeMarkup(d,null,y(i.attrs,o-c,i.attrs.colspan-(o-c))),e.insert(d+i.nodeSize,i.type.createAndFill(y(i.attrs,0,o-c))),u+=i.attrs.rowspan-1}}return l}function $(e,t,n,r,a){let o=n?e.doc.nodeAt(n-1):e.doc;if(!o)throw Error("No table found");let s=l.get(o),{top:c,left:d}=r,h=d+a.width,p=c+a.height,f=e.tr,m=0;function g(){if(!(o=n?f.doc.nodeAt(n-1):f.doc))throw Error("No table found");s=l.get(o),m=f.mapping.maps.length}(function(e,t,n,r,a,o,s){let l,c,d=u(e.doc.type.schema);if(a>t.width)for(let i=0,o=0;i<t.height;i++){let s,u=n.child(i);o+=u.nodeSize;let h=[];s=null==u.lastChild||u.lastChild.type==d.cell?l||(l=d.cell.createAndFill()):c||(c=d.header_cell.createAndFill());for(let e=t.width;e<a;e++)h.push(s);e.insert(e.mapping.slice(0).map(o-1+r),h)}if(o>t.height){let u=[];for(let e=0,r=(t.height-1)*t.width;e<Math.max(t.width,a);e++){let i=!(e>=t.width)&&n.nodeAt(t.map[r+e]).type==d.header_cell;u.push(i?c||(c=d.header_cell.createAndFill()):l||(l=d.cell.createAndFill()))}let h=d.row.create(null,i.Fragment.from(u)),p=[];for(let e=t.height;e<o;e++)p.push(h);e.insert(e.mapping.slice(s).map(r+n.nodeSize-2),p)}return!!(l||c)})(f,s,o,n,h,p,0)&&g(),q(f,s,o,n,d,h,c,m)&&g(),q(f,s,o,n,d,h,p,m)&&g(),G(f,s,o,n,c,p,d,m)&&g(),G(f,s,o,n,c,p,h,m)&&g();for(let e=c;e<p;e++){let t=s.positionAt(e,d,o),r=s.positionAt(e,h,o);f.replace(f.mapping.slice(m).map(t+n),f.mapping.slice(m).map(r+n),new i.Slice(a.rows[e-c],0,0))}g(),f.setSelection(new x(f.doc.resolve(n+s.positionAt(c,d,o)),f.doc.resolve(n+s.positionAt(p-1,h-1,o)))),t(f)}var K=(0,o.keydownHandler)({ArrowLeft:X("horiz",-1),ArrowRight:X("horiz",1),ArrowUp:X("vert",-1),ArrowDown:X("vert",1),"Shift-ArrowLeft":Z("horiz",-1),"Shift-ArrowRight":Z("horiz",1),"Shift-ArrowUp":Z("vert",-1),"Shift-ArrowDown":Z("vert",1),Backspace:W,"Mod-Backspace":W,Delete:W,"Mod-Delete":W});function Y(e,t,n){return!n.eq(e.selection)&&(t&&t(e.tr.setSelection(n).scrollIntoView()),!0)}function X(e,t){return(n,i,a)=>{if(!a)return!1;let o=n.selection;if(o instanceof x)return Y(n,i,r.Selection.near(o.$headCell,t));if("horiz"!=e&&!o.empty)return!1;let s=et(a,e,t);if(null==s)return!1;if("horiz"==e)return Y(n,i,r.Selection.near(n.doc.resolve(o.head+t),t));{let a,o=n.doc.resolve(s),l=g(o,e,t);return a=l?r.Selection.near(l,1):t<0?r.Selection.near(n.doc.resolve(o.before(-1)),-1):r.Selection.near(n.doc.resolve(o.after(-1)),1),Y(n,i,a)}}}function Z(e,t){return(n,r,i)=>{let a;if(!i)return!1;let o=n.selection;if(o instanceof x)a=o;else{let r=et(i,e,t);if(null==r)return!1;a=new x(n.doc.resolve(r))}let s=g(a.$headCell,e,t);return!!s&&Y(n,r,new x(a.$anchorCell,s))}}function J(e,t){let n=d(e.state.doc.resolve(t));return!!n&&(e.dispatch(e.state.tr.setSelection(new x(n))),!0)}function Q(e,t,n){if(!h(e.state))return!1;let r=function(e){if(!e.size)return null;let{content:t,openStart:n,openEnd:r}=e;for(;1==t.childCount&&(n>0&&r>0||"table"==t.child(0).type.spec.tableRole);)n--,r--,t=t.child(0).content;let a=t.child(0),o=a.type.spec.tableRole,s=a.type.schema,l=[];if("row"==o)for(let e=0;e<t.childCount;e++){let a=t.child(e).content,o=e?0:Math.max(0,n-1),c=e<t.childCount-1?0:Math.max(0,r-1);(o||c)&&(a=V(u(s).row,new i.Slice(a,o,c)).content),l.push(a)}else{if("cell"!=o&&"header_cell"!=o)return null;l.push(n||r?V(u(s).row,new i.Slice(t,n,r)).content:t)}return function(e,t){let n=[];for(let e=0;e<t.length;e++){let r=t[e];for(let t=r.childCount-1;t>=0;t--){let{rowspan:i,colspan:a}=r.child(t).attrs;for(let t=e;t<e+i;t++)n[t]=(n[t]||0)+a}}let r=0;for(let e=0;e<n.length;e++)r=Math.max(r,n[e]);for(let a=0;a<n.length;a++)if(a>=t.length&&t.push(i.Fragment.empty),n[a]<r){let o=u(e).cell.createAndFill(),s=[];for(let e=n[a];e<r;e++)s.push(o);t[a]=t[a].append(i.Fragment.from(s))}return{height:t.length,width:r,rows:t}}(s,l)}(n),a=e.state.selection;if(a instanceof x){r||(r={width:1,height:1,rows:[i.Fragment.from(V(u(e.state.schema).cell,n))]});let t=a.$anchorCell.node(-1),o=a.$anchorCell.start(-1),s=l.get(t).rectBetween(a.$anchorCell.pos-o,a.$headCell.pos-o);return r=function(e,t,n){let{width:r,height:a,rows:o}=e;if(r!=t){let e=[],n=[];for(let r=0;r<o.length;r++){let a=o[r],s=[];for(let n=e[r]||0,i=0;n<t;i++){let o=a.child(i%a.childCount);n+o.attrs.colspan>t&&(o=o.type.createChecked(y(o.attrs,o.attrs.colspan,n+o.attrs.colspan-t),o.content)),s.push(o),n+=o.attrs.colspan;for(let t=1;t<o.attrs.rowspan;t++)e[r+t]=(e[r+t]||0)+o.attrs.colspan}n.push(i.Fragment.from(s))}o=n,r=t}if(a!=n){let e=[];for(let t=0,r=0;t<n;t++,r++){let s=[],l=o[r%a];for(let e=0;e<l.childCount;e++){let r=l.child(e);t+r.attrs.rowspan>n&&(r=r.type.create({...r.attrs,rowspan:Math.max(1,n-r.attrs.rowspan)},r.content)),s.push(r)}e.push(i.Fragment.from(s))}o=e,a=n}return{width:r,height:a,rows:o}}(r,s.right-s.left,s.bottom-s.top),$(e.state,e.dispatch,o,s,r),!0}if(!r)return!1;{let t=p(e.state),n=t.start(-1);return $(e.state,e.dispatch,n,l.get(t.node(-1)).findCell(t.pos-n),r),!0}}function ee(e,t){var n;let r;if(t.ctrlKey||t.metaKey)return;let i=en(e,t.target);if(t.shiftKey&&e.state.selection instanceof x)a(e.state.selection.$anchorCell,t),t.preventDefault();else if(t.shiftKey&&i&&null!=(r=d(e.state.selection.$anchor))&&(null==(n=er(e,t))?void 0:n.pos)!=r.pos)a(r,t),t.preventDefault();else if(!i)return;function a(t,n){let r=er(e,n),i=null==c.getState(e.state);if(!r||!m(t,r))if(!i)return;else r=t;let a=new x(t,r);if(i||!e.state.selection.eq(a)){let n=e.state.tr.setSelection(a);i&&n.setMeta(c,t.pos),e.dispatch(n)}}function o(){e.root.removeEventListener("mouseup",o),e.root.removeEventListener("dragstart",o),e.root.removeEventListener("mousemove",s),null!=c.getState(e.state)&&e.dispatch(e.state.tr.setMeta(c,-1))}function s(n){let r,s=c.getState(e.state);if(null!=s)r=e.state.doc.resolve(s);else if(en(e,n.target)!=i&&!(r=er(e,t)))return o();r&&a(r,n)}e.root.addEventListener("mouseup",o),e.root.addEventListener("dragstart",o),e.root.addEventListener("mousemove",s)}function et(e,t,n){if(!(e.state.selection instanceof r.TextSelection))return null;let{$head:i}=e.state.selection;for(let r=i.depth-1;r>=0;r--){let a=i.node(r);if((n<0?i.index(r):i.indexAfter(r))!=(n<0?0:a.childCount))break;if("cell"==a.type.spec.tableRole||"header_cell"==a.type.spec.tableRole){let a=i.before(r),o="vert"==t?n>0?"down":"up":n>0?"right":"left";return e.endOfTextblock(o)?a:null}}return null}function en(e,t){for(;t&&t!=e.dom;t=t.parentNode)if("TD"==t.nodeName||"TH"==t.nodeName)return t;return null}function er(e,t){let n=e.posAtCoords({left:t.clientX,top:t.clientY});return n&&n?d(e.state.doc.resolve(n.pos)):null}var ei=class{update(e){return e.type==this.node.type&&(this.node=e,ea(e,this.colgroup,this.table,this.defaultCellMinWidth),!0)}ignoreMutation(e){return"attributes"==e.type&&(e.target==this.table||this.colgroup.contains(e.target))}constructor(e,t){this.node=e,this.defaultCellMinWidth=t,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width","".concat(t,"px")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),ea(e,this.colgroup,this.table,t),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}};function ea(e,t,n,r,i,a){var o;let s=0,l=!0,u=t.firstChild,c=e.firstChild;if(c){for(let e=0,n=0;e<c.childCount;e++){let{colspan:o,colwidth:d}=c.child(e).attrs;for(let e=0;e<o;e++,n++){let o=i==n?a:d&&d[e],c=o?o+"px":"";if(s+=o||r,o||(l=!1),u)u.style.width!=c&&(u.style.width=c),u=u.nextSibling;else{let e=document.createElement("col");e.style.width=c,t.appendChild(e)}}}for(;u;){let e=u.nextSibling;null==(o=u.parentNode)||o.removeChild(u),u=e}l?(n.style.width=s+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=s+"px")}}var eo=new r.PluginKey("tableColumnResizing");function es(){let{handleWidth:e=5,cellMinWidth:t=25,defaultCellMinWidth:n=100,View:i=ei,lastColumnResizable:o=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=new r.Plugin({key:eo,state:{init(e,t){var r,a;let o=null==(a=null==(r=s.spec)?void 0:r.props)?void 0:a.nodeViews,l=u(t.schema).table.name;return i&&o&&(o[l]=(e,t)=>new i(e,n,t)),new el(-1,!1)},apply:(e,t)=>t.apply(e)},props:{attributes:e=>{let t=eo.getState(e);return t&&t.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(t,n)=>{!function(e,t,n,r){if(!e.editable)return;let i=eo.getState(e.state);if(i&&!i.dragging){let a=function(e){for(;e&&"TD"!=e.nodeName&&"TH"!=e.nodeName;)e=e.classList&&e.classList.contains("ProseMirror")?null:e.parentNode;return e}(t.target),o=-1;if(a){let{left:r,right:i}=a.getBoundingClientRect();t.clientX-r<=n?o=eu(e,t,"left",n):i-t.clientX<=n&&(o=eu(e,t,"right",n))}if(o!=i.activeHandle){if(!r&&-1!==o){let t=e.state.doc.resolve(o),n=t.node(-1),r=l.get(n),i=t.start(-1);if(r.colCount(t.pos-i)+t.nodeAfter.attrs.colspan-1==r.width-1)return}ed(e,o)}}}(t,n,e,o)},mouseleave:e=>{!function(e){if(!e.editable)return;let t=eo.getState(e.state);t&&t.activeHandle>-1&&!t.dragging&&ed(e,-1)}(e)},mousedown:(e,r)=>{!function(e,t,n,r){var i;if(!e.editable)return;let a=null!=(i=e.dom.ownerDocument.defaultView)?i:window,o=eo.getState(e.state);if(!o||-1==o.activeHandle||o.dragging)return;let s=e.state.doc.nodeAt(o.activeHandle),u=function(e,t,n){let{colspan:r,colwidth:i}=n,a=i&&i[i.length-1];if(a)return a;let o=e.domAtPos(t),s=o.node.childNodes[o.offset].offsetWidth,l=r;if(i)for(let e=0;e<r;e++)i[e]&&(s-=i[e],l--);return s/l}(e,o.activeHandle,s.attrs);function c(t){a.removeEventListener("mouseup",c),a.removeEventListener("mousemove",d);let r=eo.getState(e.state);(null==r?void 0:r.dragging)&&(function(e,t,n){let r=e.state.doc.resolve(t),i=r.node(-1),a=l.get(i),o=r.start(-1),s=a.colCount(r.pos-o)+r.nodeAfter.attrs.colspan-1,u=e.state.tr;for(let e=0;e<a.height;e++){let t=e*a.width+s;if(e&&a.map[t]==a.map[t-a.width])continue;let r=a.map[t],l=i.nodeAt(r).attrs,c=1==l.colspan?0:s-a.colCount(r);if(l.colwidth&&l.colwidth[c]==n)continue;let d=l.colwidth?l.colwidth.slice():Array(l.colspan).fill(0);d[c]=n,u.setNodeMarkup(o+r,null,{...l,colwidth:d})}u.docChanged&&e.dispatch(u)}(e,r.activeHandle,ec(r.dragging,t,n)),e.dispatch(e.state.tr.setMeta(eo,{setDragging:null})))}function d(t){if(!t.which)return c(t);let i=eo.getState(e.state);if(i&&i.dragging){let a=ec(i.dragging,t,n);eh(e,i.activeHandle,a,r)}}e.dispatch(e.state.tr.setMeta(eo,{setDragging:{startX:t.clientX,startWidth:u}})),eh(e,o.activeHandle,u,r),a.addEventListener("mouseup",c),a.addEventListener("mousemove",d),t.preventDefault()}(e,r,t,n)}},decorations:e=>{let t=eo.getState(e);if(t&&t.activeHandle>-1)return function(e,t){var n;let r=[],i=e.doc.resolve(t),o=i.node(-1);if(!o)return a.DecorationSet.empty;let s=l.get(o),u=i.start(-1),c=s.colCount(i.pos-u)+i.nodeAfter.attrs.colspan-1;for(let t=0;t<s.height;t++){let i=c+t*s.width;if((c==s.width-1||s.map[i]!=s.map[i+1])&&(0==t||s.map[i]!=s.map[i-s.width])){let t=s.map[i],l=u+t+o.nodeAt(t).nodeSize-1,c=document.createElement("div");c.className="column-resize-handle",(null==(n=eo.getState(e))?void 0:n.dragging)&&r.push(a.Decoration.node(u+t,u+t+o.nodeAt(t).nodeSize,{class:"column-resize-dragging"})),r.push(a.Decoration.widget(l,c))}}return a.DecorationSet.create(e.doc,r)}(e,t.activeHandle)},nodeViews:{}}});return s}var el=class e{apply(t){let n=t.getMeta(eo);if(n&&null!=n.setHandle)return new e(n.setHandle,!1);if(n&&void 0!==n.setDragging)return new e(this.activeHandle,n.setDragging);if(this.activeHandle>-1&&t.docChanged){let n=t.mapping.map(this.activeHandle,-1);return f(t.doc.resolve(n))||(n=-1),new e(n,this.dragging)}return this}constructor(e,t){this.activeHandle=e,this.dragging=t}};function eu(e,t,n,r){let i=e.posAtCoords({left:t.clientX+("right"==n?-r:r),top:t.clientY});if(!i)return -1;let{pos:a}=i,o=d(e.state.doc.resolve(a));if(!o)return -1;if("right"==n)return o.pos;let s=l.get(o.node(-1)),u=o.start(-1),c=s.map.indexOf(o.pos-u);return c%s.width==0?-1:u+s.map[c-1]}function ec(e,t,n){let r=t.clientX-e.startX;return Math.max(n,e.startWidth+r)}function ed(e,t){e.dispatch(e.state.tr.setMeta(eo,{setHandle:t}))}function eh(e,t,n,r){let i=e.state.doc.resolve(t),a=i.node(-1),o=i.start(-1),s=l.get(a).colCount(i.pos-o)+i.nodeAfter.attrs.colspan-1,u=e.domAtPos(i.start(-1)).node;for(;u&&"TABLE"!=u.nodeName;)u=u.parentNode;u&&ea(a,u.firstChild,u,r,s,n)}function ep(){let{allowTableNodeSelection:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new r.Plugin({key:c,state:{init:()=>null,apply(e,t){let n=e.getMeta(c);if(null!=n)return -1==n?null:n;if(null==t||!e.docChanged)return t;let{deleted:r,pos:i}=e.mapping.mapResult(t);return r?null:i}},props:{decorations:k,handleDOMEvents:{mousedown:ee},createSelectionBetween:e=>null!=c.getState(e.state)?e.state.selection:null,handleTripleClick:J,handleKeyDown:K,handlePaste:Q},appendTransaction:(t,n,i)=>(function(e,t,n){let i,a,o=(t||e).selection,s=(t||e).doc;if(o instanceof r.NodeSelection&&(a=o.node.type.spec.tableRole)){if("cell"==a||"header_cell"==a)i=x.create(s,o.from);else if("row"==a){let e=s.resolve(o.from+1);i=x.rowSelection(e,e)}else if(!n){let e=l.get(o.node),t=o.from+1,n=t+e.map[e.width*e.height-1];i=x.create(s,t+1,n)}}else o instanceof r.TextSelection&&function(e){let{$from:t,$to:n}=e;if(t.pos==n.pos||t.pos<n.pos-6)return!1;let r=t.pos,i=n.pos,a=t.depth;for(;a>=0&&!(t.after(a+1)<t.end(a));a--,r++);for(let e=n.depth;e>=0&&!(n.before(e+1)>n.start(e));e--,i--);return r==i&&/row|table/.test(t.node(a).type.spec.tableRole)}(o)?i=r.TextSelection.create(s,o.from):o instanceof r.TextSelection&&function(e){let t,n,{$from:r,$to:i}=e;for(let e=r.depth;e>0;e--){let n=r.node(e);if("cell"===n.type.spec.tableRole||"header_cell"===n.type.spec.tableRole){t=n;break}}for(let e=i.depth;e>0;e--){let t=i.node(e);if("cell"===t.type.spec.tableRole||"header_cell"===t.type.spec.tableRole){n=t;break}}return t!==n&&0===i.parentOffset}(o)&&(i=r.TextSelection.create(s,o.$from.start(),o.$from.end()));return i&&(t||(t=e.tr)).setSelection(i),t})(i,_(i,n),e)})}},754074:e=>{"use strict";e.s({}),e.i(207307)},963544:e=>{"use strict";e.s({}),e.i(207307),e.i(754074)},315571:e=>{"use strict";var{m:t,e:n}=e,r=e.r(373150),i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=r.useState,o=r.useEffect,s=r.useLayoutEffect,l=r.useDebugValue;function u(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(e){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=a({inst:{value:n,getSnapshot:t}}),i=r[0].inst,c=r[1];return s(function(){i.value=n,i.getSnapshot=t,u(i)&&c({inst:i})},[e,n,t]),o(function(){return u(i)&&c({inst:i}),e(function(){u(i)&&c({inst:i})})},[e]),l(n),n};n.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:c},709035:e=>{"use strict";var{m:t,e:n}=e;t.exports=e.r(315571)},555685:e=>{"use strict";var{m:t,e:n}=e;t.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(i=r;0!=i--;)if(!e(t[i],n[i]))return!1;return!0}if(t instanceof Map&&n instanceof Map){if(t.size!==n.size)return!1;for(i of t.entries())if(!n.has(i[0]))return!1;for(i of t.entries())if(!e(i[1],n.get(i[0])))return!1;return!0}if(t instanceof Set&&n instanceof Set){if(t.size!==n.size)return!1;for(i of t.entries())if(!n.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(n)){if((r=t.length)!=n.length)return!1;for(i=r;0!=i--;)if(t[i]!==n[i])return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(a=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=r;0!=i--;)if(!Object.prototype.hasOwnProperty.call(n,a[i]))return!1;for(i=r;0!=i--;){var r,i,a,o=a[i];if(("_owner"!==o||!t.$$typeof)&&!e(t[o],n[o]))return!1}return!0}return t!=t&&n!=n}},597245:e=>{"use strict";var{m:t,e:n}=e,r=e.r(373150),i=e.r(709035),a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},o=i.useSyncExternalStore,s=r.useRef,l=r.useEffect,u=r.useMemo,c=r.useDebugValue;n.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var d=s(null);if(null===d.current){var h={hasValue:!1,value:null};d.current=h}else h=d.current;var p=o(e,(d=u(function(){function e(e){if(!l){if(l=!0,o=e,e=r(e),void 0!==i&&h.hasValue){var t=h.value;if(i(t,e))return s=t}return s=e}if(t=s,a(o,e))return t;var n=r(e);return void 0!==i&&i(t,n)?(o=e,t):(o=e,s=n)}var o,s,l=!1,u=void 0===n?null:n;return[function(){return e(t())},null===u?void 0:function(){return e(u())}]},[t,n,r,i]))[0],d[1]);return l(function(){h.hasValue=!0,h.value=p},[p]),c(p),p}},204786:e=>{"use strict";var{m:t,e:n}=e;t.exports=e.r(597245)},184782:e=>{"use strict";e.s({EditorContent:()=>h,NodeViewContent:()=>_,NodeViewWrapper:()=>C,ReactNodeViewRenderer:()=>I,ReactRenderer:()=>T,useCurrentEditor:()=>w,useEditor:()=>b});var t=e.i(373150),n=e.i(784445),r=e.i(709035),i=e.i(290479),a=e.i(691283),o=e.i(555685),s=e.i(204786),l=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach(t=>{"function"==typeof t?t(e):t&&(t.current=e)})}},u=e=>{let{contentComponent:t}=e,n=(0,r.useSyncExternalStore)(t.subscribe,t.getSnapshot,t.getServerSnapshot);return(0,i.jsx)(i.Fragment,{children:Object.values(n)})},c=class extends t.default.Component{componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){let e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;let t=this.editorContentRef.current;t.append(...e.options.element.childNodes),e.setOptions({element:t}),e.contentComponent=function(){let e=new Set,t={};return{subscribe:t=>(e.add(t),()=>{e.delete(t)}),getSnapshot:()=>t,getServerSnapshot:()=>t,setRenderer(r,i){t={...t,[r]:n.default.createPortal(i.reactElement,i.element,r)},e.forEach(e=>e())},removeRenderer(n){let r={...t};delete r[n],t=r,e.forEach(e=>e())}}}(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(e=>e.hasContentComponentInitialized?e:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var e;let t=this.props.editor;if(!t||(this.initialized=!1,t.isDestroyed||t.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),t.contentComponent=null,!(null==(e=t.options.element)?void 0:e.firstChild)))return;let n=document.createElement("div");n.append(...t.options.element.childNodes),t.setOptions({element:n})}render(){let{editor:e,innerRef:t,...n}=this.props;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{ref:l(t,this.editorContentRef),...n}),(null==e?void 0:e.contentComponent)&&(0,i.jsx)(u,{contentComponent:e.contentComponent})]})}constructor(e){var n;super(e),this.editorContentRef=t.default.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(null==(n=e.editor)?void 0:n.contentComponent)}}},d=(0,t.forwardRef)((e,n)=>{let r=t.default.useMemo(()=>Math.floor(0xffffffff*Math.random()).toString(),[e.editor]);return t.default.createElement(c,{key:r,innerRef:n,...e})}),h=t.default.memo(d),p="undefined"!=typeof window?t.useLayoutEffect:t.useEffect,f=class{getSnapshot(){return this.transactionNumber===this.lastTransactionNumber||(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber}),this.lastSnapshot}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){let e=()=>{this.transactionNumber+=1,this.subscribers.forEach(e=>e())},t=this.editor;return t.on("transaction",e),()=>{t.off("transaction",e)}}}constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}},m="undefined"==typeof window,g=m||!!("undefined"!=typeof window&&window.next),y=class e{setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(e=>e())}getInitialEditor(){return void 0===this.options.current.immediatelyRender?m||g?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender)?this.createEditor():null}createEditor(){var e=this;let t={...this.options.current,onBeforeCreate:function(){for(var t,n,r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return null==(n=(t=e.options.current).onBeforeCreate)?void 0:n.call(t,...i)},onBlur:function(){for(var t,n,r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return null==(n=(t=e.options.current).onBlur)?void 0:n.call(t,...i)},onCreate:function(){for(var t,n,r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return null==(n=(t=e.options.current).onCreate)?void 0:n.call(t,...i)},onDestroy:function(){for(var t,n,r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return null==(n=(t=e.options.current).onDestroy)?void 0:n.call(t,...i)},onFocus:function(){for(var t,n,r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return null==(n=(t=e.options.current).onFocus)?void 0:n.call(t,...i)},onSelectionUpdate:function(){for(var t,n,r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return null==(n=(t=e.options.current).onSelectionUpdate)?void 0:n.call(t,...i)},onTransaction:function(){for(var t,n,r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return null==(n=(t=e.options.current).onTransaction)?void 0:n.call(t,...i)},onUpdate:function(){for(var t,n,r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return null==(n=(t=e.options.current).onUpdate)?void 0:n.call(t,...i)},onContentError:function(){for(var t,n,r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return null==(n=(t=e.options.current).onContentError)?void 0:n.call(t,...i)},onDrop:function(){for(var t,n,r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return null==(n=(t=e.options.current).onDrop)?void 0:n.call(t,...i)},onPaste:function(){for(var t,n,r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return null==(n=(t=e.options.current).onPaste)?void 0:n.call(t,...i)},onDelete:function(){for(var t,n,r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return null==(n=(t=e.options.current).onDelete)?void 0:n.call(t,...i)}};return new a.Editor(t)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,t){return Object.keys(e).every(n=>!!["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(n)||("extensions"===n&&e.extensions&&t.extensions?e.extensions.length===t.extensions.length&&e.extensions.every((e,n)=>{var r;return e===(null==(r=t.extensions)?void 0:r[n])}):e[n]===t[n]))}onRender(t){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&0===t.length?e.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(t),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(null===this.previousDeps){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((t,n)=>t===e[n]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){let e=this.instanceId,t=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){t&&t.setOptions(this.options.current);return}t&&!t.isDestroyed&&(t.destroy(),this.instanceId===e&&this.setEditor(null))},1)}constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}};function b(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=(0,t.useRef)(e);i.current=e;let[a]=(0,t.useState)(()=>new y(i)),l=(0,r.useSyncExternalStore)(a.subscribe,a.getEditor,a.getServerSnapshot);return(0,t.useDebugValue)(l),(0,t.useEffect)(a.onRender(n)),!function(e){var n;let[r]=(0,t.useState)(()=>new f(e.editor)),i=(0,s.useSyncExternalStoreWithSelector)(r.subscribe,r.getSnapshot,r.getServerSnapshot,e.selector,null!=(n=e.equalityFn)?n:o.default);p(()=>r.watch(e.editor),[e.editor,r]),(0,t.useDebugValue)(i)}({editor:l,selector:t=>{let{transactionNumber:n}=t;return!1===e.shouldRerenderOnTransaction||void 0===e.shouldRerenderOnTransaction?null:e.immediatelyRender&&0===n?0:n+1}}),l}var x=(0,t.createContext)({editor:null});x.Consumer;var w=()=>(0,t.useContext)(x),k=(0,t.createContext)({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),S=()=>(0,t.useContext)(k);function _(e){let{as:t="div",...n}=e,{nodeViewContentRef:r,nodeViewContentChildren:a}=S();return(0,i.jsx)(t,{...n,ref:r,"data-node-view-content":"",style:{whiteSpace:"pre-wrap",...n.style},children:a})}var C=t.default.forwardRef((e,t)=>{let{onDragStart:n}=S(),r=e.as||"div";return(0,i.jsx)(r,{...e,ref:t,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...e.style}})});function A(e){return!!("function"==typeof e&&e.prototype&&e.prototype.isReactComponent)}function E(e){return!!("object"==typeof e&&e.$$typeof&&("Symbol(react.forward_ref)"===e.$$typeof.toString()||"react.forward_ref"===e.$$typeof.description))}var T=class{render(){var e;let n=this.component,r=this.props,a=this.editor,o=function(){try{if(t.version)return parseInt(t.version.split(".")[0],10)>=19}catch(e){}return!1}(),s=function(e){if(A(e)||E(e))return!0;if("object"==typeof e&&e.$$typeof&&("Symbol(react.memo)"===e.$$typeof.toString()||"react.memo"===e.$$typeof.description)){let t=e.type;if(t)return A(t)||E(t)}return!1}(n),l={...r};l.ref&&!(o||s)&&delete l.ref,!l.ref&&(o||s)&&(l.ref=e=>{this.ref=e}),this.reactElement=(0,i.jsx)(n,{...l}),null==(e=null==a?void 0:a.contentComponent)||e.setRenderer(this.id,this)}updateProps(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.props={...this.props,...e},this.render()}destroy(){var e;let t=this.editor;null==(e=null==t?void 0:t.contentComponent)||e.removeRenderer(this.id);try{this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}catch(e){}}updateAttributes(e){Object.keys(e).forEach(t=>{this.element.setAttribute(t,e[t])})}constructor(e,{editor:t,props:r={},as:i="div",className:a=""}){this.ref=null,this.id=Math.floor(0xffffffff*Math.random()).toString(),this.component=e,this.editor=t,this.props=r,this.element=document.createElement(i),this.element.classList.add("react-renderer"),a&&this.element.classList.add(...a.split(" ")),this.editor.isInitialized?(0,n.flushSync)(()=>{this.render()}):queueMicrotask(()=>{this.render()})}};t.default.createContext({markViewContentRef:()=>{}}),a.MarkView;var M=class extends a.NodeView{mount(){var e=this;let n={editor:this.editor,node:this.node,decorations:this.decorations,innerDecorations:this.innerDecorations,view:this.view,selected:!1,extension:this.extension,HTMLAttributes:this.HTMLAttributes,getPos:()=>this.getPos(),updateAttributes:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.updateAttributes(t)},deleteNode:()=>this.deleteNode(),ref:(0,t.createRef)()};if(!this.component.displayName){let e;this.component.displayName=(e=this.extension.name).charAt(0).toUpperCase()+e.substring(1)}let r={onDragStart:this.onDragStart.bind(this),nodeViewContentRef:e=>{e&&this.contentDOMElement&&e.firstChild!==this.contentDOMElement&&(e.hasAttribute("data-node-view-wrapper")&&e.removeAttribute("data-node-view-wrapper"),e.appendChild(this.contentDOMElement))}},a=this.component,o=(0,t.memo)(e=>(0,i.jsx)(k.Provider,{value:r,children:(0,t.createElement)(a,e)}));o.displayName="ReactNodeView";let s=this.node.isInline?"span":"div";this.options.as&&(s=this.options.as);let{className:l=""}=this.options;this.handleSelectionUpdate=this.handleSelectionUpdate.bind(this),this.renderer=new T(o,{editor:this.editor,props:n,as:s,className:"node-".concat(this.node.type.name," ").concat(l).trim()}),this.editor.on("selectionUpdate",this.handleSelectionUpdate),this.updateElementAttributes()}get dom(){var e;if(this.renderer.element.firstElementChild&&!(null==(e=this.renderer.element.firstElementChild)?void 0:e.hasAttribute("data-node-view-wrapper")))throw Error("Please use the NodeViewWrapper component for your node view.");return this.renderer.element}get contentDOM(){return this.node.isLeaf?null:this.contentDOMElement}handleSelectionUpdate(){let{from:e,to:t}=this.editor.state.selection,n=this.getPos();if("number"==typeof n)if(e<=n&&t>=n+this.node.nodeSize){if(this.renderer.props.selected)return;this.selectNode()}else{if(!this.renderer.props.selected)return;this.deselectNode()}}update(e,t,n){let r=e=>{this.renderer.updateProps(e),"function"==typeof this.options.attrs&&this.updateElementAttributes()};if(e.type!==this.node.type)return!1;if("function"==typeof this.options.update){let i=this.node,a=this.decorations,o=this.innerDecorations;return this.node=e,this.decorations=t,this.innerDecorations=n,this.options.update({oldNode:i,oldDecorations:a,newNode:e,newDecorations:t,oldInnerDecorations:o,innerDecorations:n,updateProps:()=>r({node:e,decorations:t,innerDecorations:n})})}return e===this.node&&this.decorations===t&&this.innerDecorations===n||(this.node=e,this.decorations=t,this.innerDecorations=n,r({node:e,decorations:t,innerDecorations:n}),!0)}selectNode(){this.renderer.updateProps({selected:!0}),this.renderer.element.classList.add("ProseMirror-selectednode")}deselectNode(){this.renderer.updateProps({selected:!1}),this.renderer.element.classList.remove("ProseMirror-selectednode")}destroy(){this.renderer.destroy(),this.editor.off("selectionUpdate",this.handleSelectionUpdate),this.contentDOMElement=null}updateElementAttributes(){if(this.options.attrs){let e={};if("function"==typeof this.options.attrs){let t=this.editor.extensionManager.attributes,n=(0,a.getRenderedAttributes)(this.node,t);e=this.options.attrs({node:this.node,HTMLAttributes:n})}else e=this.options.attrs;this.renderer.updateAttributes(e)}}constructor(e,t,n){if(super(e,t,n),!this.node.isLeaf){this.options.contentDOMElementTag?this.contentDOMElement=document.createElement(this.options.contentDOMElementTag):this.contentDOMElement=document.createElement(this.node.isInline?"span":"div"),this.contentDOMElement.dataset.nodeViewContentReact="",this.contentDOMElement.dataset.nodeViewWrapper="",this.contentDOMElement.style.whiteSpace="inherit";let e=this.dom.querySelector("[data-node-view-content]");if(!e)return;e.appendChild(this.contentDOMElement)}}};function I(e,t){return n=>n.editor.contentComponent?new M(e,n,t):{}}},947450:e=>{"use strict";e.s({BubbleMenuPlugin:()=>o,default:()=>s});var t=e.i(691283),n=e.i(557667);e.i(131841);var r=e.i(968617);e.i(963544);var i=e.i(207307),a=class{get middlewares(){let e=[];return this.floatingUIOptions.flip&&e.push((0,n.flip)("boolean"!=typeof this.floatingUIOptions.flip?this.floatingUIOptions.flip:void 0)),this.floatingUIOptions.shift&&e.push((0,n.shift)("boolean"!=typeof this.floatingUIOptions.shift?this.floatingUIOptions.shift:void 0)),this.floatingUIOptions.offset&&e.push((0,n.offset)("boolean"!=typeof this.floatingUIOptions.offset?this.floatingUIOptions.offset:void 0)),this.floatingUIOptions.arrow&&e.push((0,n.arrow)(this.floatingUIOptions.arrow)),this.floatingUIOptions.size&&e.push((0,n.size)("boolean"!=typeof this.floatingUIOptions.size?this.floatingUIOptions.size:void 0)),this.floatingUIOptions.autoPlacement&&e.push((0,n.autoPlacement)("boolean"!=typeof this.floatingUIOptions.autoPlacement?this.floatingUIOptions.autoPlacement:void 0)),this.floatingUIOptions.hide&&e.push((0,n.hide)("boolean"!=typeof this.floatingUIOptions.hide?this.floatingUIOptions.hide:void 0)),this.floatingUIOptions.inline&&e.push((0,n.inline)("boolean"!=typeof this.floatingUIOptions.inline?this.floatingUIOptions.inline:void 0)),e}updatePosition(){let{selection:e}=this.editor.state,a=(0,t.posToDOMRect)(this.view,e.from,e.to),o={getBoundingClientRect:()=>a,getClientRects:()=>[a]};if(e instanceof r.NodeSelection){let t=this.view.nodeDOM(e.from),n=t.dataset.nodeViewWrapper?t:t.querySelector("[data-node-view-wrapper]");n&&(t=n),t&&(o={getBoundingClientRect:()=>t.getBoundingClientRect(),getClientRects:()=>[t.getBoundingClientRect()]})}if(e instanceof i.CellSelection){let{$anchorCell:t,$headCell:n}=e,r=t?t.pos:n.pos,i=n?n.pos:t.pos,a=this.view.nodeDOM(r),s=this.view.nodeDOM(i);if(!a||!s)return;let l=a===s?a.getBoundingClientRect():function(e,t){let n=Math.min(e.top,t.top),r=Math.max(e.bottom,t.bottom),i=Math.min(e.left,t.left);return new DOMRect(i,n,Math.max(e.right,t.right)-i,r-n)}(a.getBoundingClientRect(),s.getBoundingClientRect());o={getBoundingClientRect:()=>l,getClientRects:()=>[l]}}(0,n.computePosition)(o,this.element,{placement:this.floatingUIOptions.placement,strategy:this.floatingUIOptions.strategy,middleware:this.middlewares}).then(e=>{let{x:t,y:n,strategy:r}=e;this.element.style.width="max-content",this.element.style.position=r,this.element.style.left="".concat(t,"px"),this.element.style.top="".concat(n,"px"),this.isVisible&&this.floatingUIOptions.onUpdate&&this.floatingUIOptions.onUpdate()})}update(e,t){let{state:n}=e,r=n.selection.from!==n.selection.to;if(this.updateDelay>0&&r)return void this.handleDebouncedUpdate(e,t);let i=!(null==t?void 0:t.selection.eq(e.state.selection)),a=!(null==t?void 0:t.doc.eq(e.state.doc));this.updateHandler(e,i,a,t)}getShouldShow(e){var t;let{state:n}=this.view,{selection:r}=n,{ranges:i}=r,a=Math.min(...i.map(e=>e.$from.pos)),o=Math.max(...i.map(e=>e.$to.pos));return null==(t=this.shouldShow)?void 0:t.call(this,{editor:this.editor,element:this.element,view:this.view,state:n,oldState:e,from:a,to:o})}show(){var e,t;this.isVisible||(this.element.style.visibility="visible",this.element.style.opacity="1",null==(t=null!=(e=this.appendTo)?e:this.view.dom.parentElement)||t.appendChild(this.element),this.floatingUIOptions.onShow&&this.floatingUIOptions.onShow(),this.isVisible=!0)}hide(){this.isVisible&&(this.element.style.visibility="hidden",this.element.style.opacity="0",this.element.remove(),this.floatingUIOptions.onHide&&this.floatingUIOptions.onHide(),this.isVisible=!1)}destroy(){this.hide(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),window.removeEventListener("resize",this.resizeHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler),this.floatingUIOptions.onDestroy&&this.floatingUIOptions.onDestroy()}constructor({editor:e,element:n,view:r,updateDelay:i=250,resizeDelay:a=60,shouldShow:o,appendTo:s,options:l}){this.preventHide=!1,this.isVisible=!1,this.floatingUIOptions={strategy:"absolute",placement:"top",offset:8,flip:{},shift:{},arrow:!1,size:!1,autoPlacement:!1,hide:!1,inline:!1,onShow:void 0,onHide:void 0,onUpdate:void 0,onDestroy:void 0},this.shouldShow=e=>{let{view:n,state:r,from:i,to:a}=e,{doc:o,selection:s}=r,{empty:l}=s,u=!o.textBetween(i,a).length&&(0,t.isTextSelection)(r.selection),c=this.element.contains(document.activeElement);return!!(n.hasFocus()||c)&&!l&&!u&&!!this.editor.isEditable},this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.resizeHandler=()=>{this.resizeDebounceTimer&&clearTimeout(this.resizeDebounceTimer),this.resizeDebounceTimer=window.setTimeout(()=>{this.updatePosition()},this.resizeDelay)},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=e=>{var t;let{event:n}=e;if(this.preventHide){this.preventHide=!1;return}(null==n?void 0:n.relatedTarget)&&(null==(t=this.element.parentNode)?void 0:t.contains(n.relatedTarget))||(null==n?void 0:n.relatedTarget)!==this.editor.view.dom&&this.hide()},this.handleDebouncedUpdate=(e,t)=>{let n=!(null==t?void 0:t.selection.eq(e.state.selection)),r=!(null==t?void 0:t.doc.eq(e.state.doc));(n||r)&&(this.updateDebounceTimer&&clearTimeout(this.updateDebounceTimer),this.updateDebounceTimer=window.setTimeout(()=>{this.updateHandler(e,n,r,t)},this.updateDelay))},this.updateHandler=(e,t,n,r)=>{let{composing:i}=e;if(!i&&(t||n)){if(!this.getShouldShow(r))return void this.hide();this.updatePosition(),this.show()}},this.editor=e,this.element=n,this.view=r,this.updateDelay=i,this.resizeDelay=a,this.appendTo=s,this.floatingUIOptions={...this.floatingUIOptions,...l},this.element.tabIndex=0,o&&(this.shouldShow=o),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),window.addEventListener("resize",this.resizeHandler),this.update(r,r.state),this.getShouldShow()&&this.show()}},o=e=>new r.Plugin({key:"string"==typeof e.pluginKey?new r.PluginKey(e.pluginKey):e.pluginKey,view:t=>new a({view:t,...e})}),s=t.Extension.create({name:"bubbleMenu",addOptions:()=>({element:null,pluginKey:"bubbleMenu",updateDelay:void 0,appendTo:void 0,shouldShow:null}),addProseMirrorPlugins(){return this.options.element?[o({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,updateDelay:this.options.updateDelay,options:this.options.options,appendTo:this.options.appendTo,shouldShow:this.options.shouldShow})]:[]}})},366354:e=>{"use strict";e.s({FloatingMenuPlugin:()=>a});var t=e.i(691283),n=e.i(557667);e.i(131841);var r=e.i(968617),i=class{getTextContent(e){return(0,t.getText)(e,{textSerializers:(0,t.getTextSerializersFromSchema)(this.editor.schema)})}get middlewares(){let e=[];return this.floatingUIOptions.flip&&e.push((0,n.flip)("boolean"!=typeof this.floatingUIOptions.flip?this.floatingUIOptions.flip:void 0)),this.floatingUIOptions.shift&&e.push((0,n.shift)("boolean"!=typeof this.floatingUIOptions.shift?this.floatingUIOptions.shift:void 0)),this.floatingUIOptions.offset&&e.push((0,n.offset)("boolean"!=typeof this.floatingUIOptions.offset?this.floatingUIOptions.offset:void 0)),this.floatingUIOptions.arrow&&e.push((0,n.arrow)(this.floatingUIOptions.arrow)),this.floatingUIOptions.size&&e.push((0,n.size)("boolean"!=typeof this.floatingUIOptions.size?this.floatingUIOptions.size:void 0)),this.floatingUIOptions.autoPlacement&&e.push((0,n.autoPlacement)("boolean"!=typeof this.floatingUIOptions.autoPlacement?this.floatingUIOptions.autoPlacement:void 0)),this.floatingUIOptions.hide&&e.push((0,n.hide)("boolean"!=typeof this.floatingUIOptions.hide?this.floatingUIOptions.hide:void 0)),this.floatingUIOptions.inline&&e.push((0,n.inline)("boolean"!=typeof this.floatingUIOptions.inline?this.floatingUIOptions.inline:void 0)),e}getShouldShow(e){var t;let{state:n}=this.view,{selection:r}=n,{ranges:i}=r,a=Math.min(...i.map(e=>e.$from.pos)),o=Math.max(...i.map(e=>e.$to.pos));return null==(t=this.shouldShow)?void 0:t.call(this,{editor:this.editor,view:this.view,state:n,oldState:e,from:a,to:o})}updatePosition(){let{selection:e}=this.editor.state,r=(0,t.posToDOMRect)(this.view,e.from,e.to);(0,n.computePosition)({getBoundingClientRect:()=>r,getClientRects:()=>[r]},this.element,{placement:this.floatingUIOptions.placement,strategy:this.floatingUIOptions.strategy,middleware:this.middlewares}).then(e=>{let{x:t,y:n,strategy:r}=e;this.element.style.width="max-content",this.element.style.position=r,this.element.style.left="".concat(t,"px"),this.element.style.top="".concat(n,"px"),this.isVisible&&this.floatingUIOptions.onUpdate&&this.floatingUIOptions.onUpdate()})}update(e,t){let n=!(null==t?void 0:t.selection.eq(e.state.selection)),r=!(null==t?void 0:t.doc.eq(e.state.doc));this.updateHandler(e,n,r,t)}show(){var e;this.isVisible||(this.element.style.visibility="visible",this.element.style.opacity="1",null==(e=this.view.dom.parentElement)||e.appendChild(this.element),this.floatingUIOptions.onShow&&this.floatingUIOptions.onShow(),this.isVisible=!0)}hide(){this.isVisible&&(this.element.style.visibility="hidden",this.element.style.opacity="0",this.element.remove(),this.floatingUIOptions.onHide&&this.floatingUIOptions.onHide(),this.isVisible=!1)}destroy(){this.hide(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler),this.floatingUIOptions.onDestroy&&this.floatingUIOptions.onDestroy()}constructor({editor:e,element:t,view:n,options:r,shouldShow:i}){this.preventHide=!1,this.isVisible=!1,this.shouldShow=e=>{let{view:t,state:n}=e,{selection:r}=n,{$anchor:i,empty:a}=r,o=1===i.depth,s=i.parent.isTextblock&&!i.parent.type.spec.code&&!i.parent.textContent&&0===i.parent.childCount&&!this.getTextContent(i.parent);return!!t.hasFocus()&&!!a&&!!o&&!!s&&!!this.editor.isEditable},this.floatingUIOptions={strategy:"absolute",placement:"right",offset:8,flip:{},shift:{},arrow:!1,size:!1,autoPlacement:!1,hide:!1,inline:!1},this.updateHandler=(e,t,n,r)=>{let{composing:i}=e;if(!i&&(t||n)){if(!this.getShouldShow(r))return void this.hide();this.updatePosition(),this.show()}},this.mousedownHandler=()=>{this.preventHide=!0},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=e=>{var t;let{event:n}=e;if(this.preventHide){this.preventHide=!1;return}(null==n?void 0:n.relatedTarget)&&(null==(t=this.element.parentNode)?void 0:t.contains(n.relatedTarget))||(null==n?void 0:n.relatedTarget)!==this.editor.view.dom&&this.hide()},this.editor=e,this.element=t,this.view=n,this.floatingUIOptions={...this.floatingUIOptions,...r},this.element.tabIndex=0,i&&(this.shouldShow=i),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.update(n,n.state),this.getShouldShow()&&this.show()}},a=e=>new r.Plugin({key:"string"==typeof e.pluginKey?new r.PluginKey(e.pluginKey):e.pluginKey,view:t=>new i({view:t,...e})});t.Extension.create({name:"floatingMenu",addOptions:()=>({element:null,options:{},pluginKey:"floatingMenu",shouldShow:null}),addProseMirrorPlugins(){return this.options.element?[a({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,options:this.options.options,shouldShow:this.options.shouldShow})]:[]}})},332581:e=>{"use strict";e.s({BubbleMenu:()=>s});var t=e.i(947450),n=e.i(184782),r=e.i(373150),i=e.i(784445),a=e.i(290479),o=e.i(366354),s=r.default.forwardRef((e,o)=>{let{pluginKey:s="bubbleMenu",editor:l,updateDelay:u,resizeDelay:c,shouldShow:d=null,options:h,children:p,...f}=e,m=(0,r.useRef)(document.createElement("div"));"function"==typeof o?o(m.current):o&&(o.current=m.current);let{editor:g}=(0,n.useCurrentEditor)();return(0,r.useEffect)(()=>{let e=m.current;if(e.style.visibility="hidden",e.style.position="absolute",(null==l?void 0:l.isDestroyed)||(null==g?void 0:g.isDestroyed))return;let n=l||g;if(!n)return void console.warn("BubbleMenu component is not rendered inside of an editor component or does not have editor prop.");let r=(0,t.BubbleMenuPlugin)({updateDelay:u,resizeDelay:c,editor:n,element:e,pluginKey:s,shouldShow:d,options:h});return n.registerPlugin(r),()=>{n.unregisterPlugin(s),window.requestAnimationFrame(()=>{e.parentNode&&e.parentNode.removeChild(e)})}},[l,g]),(0,i.createPortal)((0,a.jsx)("div",{...f,children:p}),m.current)});r.default.forwardRef((e,t)=>{let{pluginKey:s="floatingMenu",editor:l,shouldShow:u=null,options:c,children:d,...h}=e,p=(0,r.useRef)(document.createElement("div"));"function"==typeof t?t(p.current):t&&(t.current=p.current);let{editor:f}=(0,n.useCurrentEditor)();return(0,r.useEffect)(()=>{let e=p.current;if(e.style.visibility="hidden",e.style.position="absolute",(null==l?void 0:l.isDestroyed)||(null==f?void 0:f.isDestroyed))return;let t=l||f;if(!t)return void console.warn("FloatingMenu component is not rendered inside of an editor component or does not have editor prop.");let n=(0,o.FloatingMenuPlugin)({editor:t,element:e,pluginKey:s,shouldShow:u,options:c});return t.registerPlugin(n),()=>{t.unregisterPlugin(s),window.requestAnimationFrame(()=>{e.parentNode&&e.parentNode.removeChild(e)})}},[l,f]),(0,i.createPortal)((0,a.jsx)("div",{...h,children:d}),p.current)})},232648:e=>{"use strict";e.s({uploadBucketGoogle:()=>t});let t=async e=>{let{fields:t,file:n,url:r,bucket:i,fileName:a}=e,o=new FormData;for(let[e,r]of Object.entries({...t,file:n}))o.append(e,r);return await fetch(r,{method:"POST",body:o}),"https://storage.googleapis.com/".concat(i,"/").concat(a)}},114159:e=>{"use strict";e.s({default:()=>d});var t=e.i(691283);e.i(131841);var n=e.i(968617);function r(e){e=e.toUpperCase();let t=0,n={I:1,V:5,X:10,L:50,C:100,D:500,M:1e3},r=e.length,i=0;for(;r--;)n[e.charAt(r)]>=i?t+=n[e.charAt(r)]:t-=n[e.charAt(r)],i=n[e.charAt(r)];return t}function i(e){let t=e=>e.toLowerCase().charCodeAt(0)-97+1,n=0,r=e.length;for(;r--;){let i=Math.pow(26,e.length-r-1);n+=t(e.charAt(r))*i}return n}function a(e){let t=e.parentNode;for(;e.firstChild;)null==t||t.insertBefore(e.firstChild,e);null==t||t.removeChild(e)}function o(e){var t;return Object.fromEntries(((null==(t=null==e?void 0:e.attributes.style)?void 0:t.value)||"").split(";").map(e=>e.split(":").map(e=>e.trim())))}var s=/<!--\[if \!supportLists\]-->((.|\n)*)<!--\[endif\]-->/m,l={number:/[0-9]+\./,romanLower:/(?=[mdclxvi])m*(c[md]|d?c*)(x[cl]|l?x*)(i[xv]|v?i*)\./,romanUpper:/(?=[MDCLXVI])M*(C[MD]|D?C*)(X[CL]|L?X*)(I[XV]|V?I*)\./,letterLower:/[a-z]+\./,letterUpper:/[A-Z]+\./},u=t.Extension.create({priority:99999,name:"office-paste",addProseMirrorPlugins:()=>[c]}),c=new n.Plugin({key:new n.PluginKey("office-paste"),props:{transformPastedHTML:e=>(-1!==e.indexOf("microsoft-com")&&-1!==e.indexOf("office")&&(e=function(e){let t=new DOMParser().parseFromString(e,"text/html");return t.querySelectorAll('[class*="MsoLineNumber"]').forEach(e=>{a(e)}),t.documentElement.outerHTML}(e=function(e){let t=new DOMParser().parseFromString(e,"text/html");return t.querySelectorAll('p[class*="MsoNormal"]').forEach(e=>{e.classList.remove("MsoNormal")}),t.documentElement.outerHTML}(e=function(e){e=e.replace(/<o:p>(.*?)<\/o:p>/g,"");let t=new DOMParser().parseFromString(e,"text/html");return t.querySelectorAll('[style*="mso-"]').forEach(e=>{let t=o(e),n=[];for(let e of Object.keys(t))e&&!e.startsWith("mso-")&&n.push("".concat(e,": ").concat(t[e]));e.setAttribute("style",n.join(";"))}),t.querySelectorAll('[style*="color: black"]').forEach(e=>{e.style.removeProperty("color")}),t.documentElement.outerHTML}(e=function(e){let t=new DOMParser().parseFromString(e,"text/html");return t.querySelectorAll('[style*="mso-bookmark:"]').forEach(e=>{let n=o(e)["mso-bookmark"],r=t.querySelector('a[name="'.concat(n,'"]'));r&&a(r),a(e)}),t.documentElement.outerHTML}(e=function(e){let t;if(-1===e.indexOf("mso-list:"))return e;let n=new DOMParser().parseFromString(e,"text/html"),a=[];return n.querySelectorAll('p[style*="mso-list:"]').forEach(e=>{var n;let[u,c]=function(e){var t;let n=e.split(" ");return[n.find(e=>/l[0-9]+/.test(e))||"",+((null==(t=n.find(e=>e.startsWith("level")))?void 0:t.substring(5))||1)]}(o(e)["mso-list"]);for(t===u||(n=e).previousElementSibling&&("OL"===n.previousElementSibling.nodeName||"UL"===n.previousElementSibling.nodeName)&&1!==c||(t=u,a=[]);c>a.length;){let t=function(e){let t=function(e){let t,n="ul",a=null,o=1;return(t=e.match(l.number))?(n="ol",o=+t[0].replace(".","")):(t=e.match(l.romanLower))?(n="ol",a="i",o=+r(t[0].replace(".",""))):(t=e.match(l.romanUpper))?(n="ol",a="I",o=+r(t[0].replace(".",""))):(t=e.match(l.letterLower))?(n="ol",a="a",o=+i(t[0].replace(".",""))):(t=e.match(l.letterUpper))&&(n="ol",a="A",o=+i(t[0].replace(".",""))),{type:n,start:o,countType:a}}(function(e){var t;let n=e.innerHTML.match(s);return(null==n?void 0:n.length)&&(null==(t=new DOMParser().parseFromString(n[0],"text/html").body.querySelector("span"))?void 0:t.textContent)||""}(e)),n=document.createElement(t.type);return t.countType&&n.setAttribute("type",t.countType),t.start>1&&n.setAttribute("start",t.start.toString()),n}(e);a.length>0?a[a.length-1].appendChild(t):e.before(t),a.push(t)}for(;c<a.length;)a.pop();a[a.length-1].appendChild(function(e){let t=document.createElement("li");return t.innerHTML=e.innerHTML.replace(s,""),t}(e)),e.remove()}),n.documentElement.outerHTML}(e)))))),e)}}),d=u},672614:e=>{"use strict";e.s({Document:()=>t,default:()=>n});var t=e.i(691283).Node.create({name:"doc",topNode:!0,content:"block+"}),n=t},379530:e=>{"use strict";e.s({})},997724:e=>{"use strict";e.s({}),e.i(379530)},794993:e=>{"use strict";e.s({dropCursor:()=>r});var t=e.i(968617),n=e.i(47542);function r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new t.Plugin({view:t=>new i(t,e)})}class i{destroy(){this.handlers.forEach(e=>{let{name:t,handler:n}=e;return this.editorView.dom.removeEventListener(t,n)})}update(e,t){null!=this.cursorPos&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,null==e?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e,t,n=this.editorView.state.doc.resolve(this.cursorPos),r=!n.parent.inlineContent,i,a=this.editorView.dom,o=a.getBoundingClientRect(),s=o.width/a.offsetWidth,l=o.height/a.offsetHeight;if(r){let e=n.nodeBefore,t=n.nodeAfter;if(e||t){let n=this.editorView.nodeDOM(this.cursorPos-(e?e.nodeSize:0));if(n){let r=n.getBoundingClientRect(),a=e?r.bottom:r.top;e&&t&&(a=(a+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let o=this.width/2*l;i={left:r.left,right:r.right,top:a-o,bottom:a+o}}}}if(!i){let e=this.editorView.coordsAtPos(this.cursorPos),t=this.width/2*s;i={left:e.left-t,right:e.left+t,top:e.top,bottom:e.bottom}}let u=this.editorView.dom.offsetParent;if(!this.element&&(this.element=u.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",r),this.element.classList.toggle("prosemirror-dropcursor-inline",!r),u&&(u!=document.body||"static"!=getComputedStyle(u).position)){let n=u.getBoundingClientRect(),r=n.width/u.offsetWidth,i=n.height/u.offsetHeight;e=n.left-u.scrollLeft*r,t=n.top-u.scrollTop*i}else e=-pageXOffset,t=-pageYOffset;this.element.style.left=(i.left-e)/s+"px",this.element.style.top=(i.top-t)/l+"px",this.element.style.width=(i.right-i.left)/s+"px",this.element.style.height=(i.bottom-i.top)/l+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),i=r&&r.type.spec.disableDropCursor,a="function"==typeof i?i(this.editorView,t,e):i;if(t&&!a){let e=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let t=(0,n.dropPoint)(this.editorView.state.doc,e,this.editorView.dragging.slice);null!=t&&(e=t)}this.setCursor(e),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}constructor(e,t){var n;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=null!=(n=t.width)?n:1,this.color=!1===t.color?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(t=>{let n=e=>{this[t](e)};return e.dom.addEventListener(t,n),{name:t,handler:n}})}}},643284:e=>{"use strict";e.s({})},868066:e=>{"use strict";e.s({}),e.i(643284)},730087:e=>{"use strict";e.s({gapCursor:()=>s});var t=e.i(991654),n=e.i(968617),r=e.i(490077),i=e.i(954647);class a extends n.Selection{map(e,t){let r=e.resolve(t.map(this.head));return a.valid(r)?new a(r):n.Selection.near(r)}content(){return r.Slice.empty}eq(e){return e instanceof a&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if("number"!=typeof t.pos)throw RangeError("Invalid input for GapCursor.fromJSON");return new a(e.resolve(t.pos))}getBookmark(){return new o(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!function(e){for(let t=e.depth;t>=0;t--){let n=e.index(t),r=e.node(t);if(0==n){if(r.type.spec.isolating)return!0;continue}for(let e=r.child(n-1);;e=e.lastChild){if(0==e.childCount&&!e.inlineContent||e.isAtom||e.type.spec.isolating)return!0;if(e.inlineContent)return!1}}return!0}(e)||!function(e){for(let t=e.depth;t>=0;t--){let n=e.indexAfter(t),r=e.node(t);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let e=r.child(n);;e=e.firstChild){if(0==e.childCount&&!e.inlineContent||e.isAtom||e.type.spec.isolating)return!0;if(e.inlineContent)return!1}}return!0}(e))return!1;let n=t.type.spec.allowGapCursor;if(null!=n)return n;let r=t.contentMatchAt(e.index()).defaultType;return r&&r.isTextblock}static findGapCursorFrom(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];r:for(;;){if(!r&&a.valid(e))return e;let i=e.pos,o=null;for(let n=e.depth;;n--){let r=e.node(n);if(t>0?e.indexAfter(n)<r.childCount:e.index(n)>0){o=r.child(t>0?e.indexAfter(n):e.index(n)-1);break}if(0==n)return null;i+=t;let s=e.doc.resolve(i);if(a.valid(s))return s}for(;;){let s=t>0?o.firstChild:o.lastChild;if(!s){if(o.isAtom&&!o.isText&&!n.NodeSelection.isSelectable(o)){e=e.doc.resolve(i+o.nodeSize*t),r=!1;continue r}break}o=s,i+=t;let l=e.doc.resolve(i);if(a.valid(l))return l}return null}}constructor(e){super(e,e)}}a.prototype.visible=!1,a.findFrom=a.findGapCursorFrom,n.Selection.jsonID("gapcursor",a);class o{map(e){return new o(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return a.valid(t)?new a(t):n.Selection.near(t)}constructor(e){this.pos=e}}function s(){return new n.Plugin({props:{decorations:h,createSelectionBetween:(e,t,n)=>t.pos==n.pos&&a.valid(n)?new a(n):null,handleClick:c,handleKeyDown:l,handleDOMEvents:{beforeinput:d}}})}let l=(0,t.keydownHandler)({ArrowLeft:u("horiz",-1),ArrowRight:u("horiz",1),ArrowUp:u("vert",-1),ArrowDown:u("vert",1)});function u(e,t){let r="vert"==e?t>0?"down":"up":t>0?"right":"left";return function(e,i,o){let s=e.selection,l=t>0?s.$to:s.$from,u=s.empty;if(s instanceof n.TextSelection){if(!o.endOfTextblock(r)||0==l.depth)return!1;u=!1,l=e.doc.resolve(t>0?l.after():l.before())}let c=a.findGapCursorFrom(l,t,u);return!!c&&(i&&i(e.tr.setSelection(new a(c))),!0)}}function c(e,t,r){if(!e||!e.editable)return!1;let i=e.state.doc.resolve(t);if(!a.valid(i))return!1;let o=e.posAtCoords({left:r.clientX,top:r.clientY});return!(o&&o.inside>-1&&n.NodeSelection.isSelectable(e.state.doc.nodeAt(o.inside)))&&(e.dispatch(e.state.tr.setSelection(new a(i))),!0)}function d(e,t){if("insertCompositionText"!=t.inputType||!(e.state.selection instanceof a))return!1;let{$from:i}=e.state.selection,o=i.parent.contentMatchAt(i.index()).findWrapping(e.state.schema.nodes.text);if(!o)return!1;let s=r.Fragment.empty;for(let e=o.length-1;e>=0;e--)s=r.Fragment.from(o[e].createAndFill(null,s));let l=e.state.tr.replace(i.pos,i.pos,new r.Slice(s,0,0));return l.setSelection(n.TextSelection.near(l.doc.resolve(i.pos+1))),e.dispatch(l),!1}function h(e){if(!(e.selection instanceof a))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",i.DecorationSet.create(e.doc,[i.Decoration.widget(e.selection.head,t,{key:"gapcursor"})])}},723429:e=>{"use strict";e.s({})},959884:e=>{"use strict";e.s({}),e.i(723429)},365312:e=>{"use strict";e.s({default:()=>i});var t=function(){};t.prototype.append=function(e){return e.length?(e=t.from(e),!this.length&&e||e.length<200&&this.leafAppend(e)||this.length<200&&e.leafPrepend(this)||this.appendInner(e)):this},t.prototype.prepend=function(e){return e.length?t.from(e).append(this):this},t.prototype.appendInner=function(e){return new r(this,e)},t.prototype.slice=function(e,n){return(void 0===e&&(e=0),void 0===n&&(n=this.length),e>=n)?t.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))},t.prototype.get=function(e){if(!(e<0)&&!(e>=this.length))return this.getInner(e)},t.prototype.forEach=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length),t<=n?this.forEachInner(e,t,n,0):this.forEachInvertedInner(e,t,n,0)},t.prototype.map=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length);var r=[];return this.forEach(function(t,n){return r.push(e(t,n))},t,n),r},t.from=function(e){return e instanceof t?e:e&&e.length?new n(e):t.empty};var n=function(e){function t(t){e.call(this),this.values=t}t.__proto__=e,t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(e,n){return 0==e&&n==this.length?this:new t(this.values.slice(e,n))},t.prototype.getInner=function(e){return this.values[e]},t.prototype.forEachInner=function(e,t,n,r){for(var i=t;i<n;i++)if(!1===e(this.values[i],r+i))return!1},t.prototype.forEachInvertedInner=function(e,t,n,r){for(var i=t-1;i>=n;i--)if(!1===e(this.values[i],r+i))return!1},t.prototype.leafAppend=function(e){if(this.length+e.length<=200)return new t(this.values.concat(e.flatten()))},t.prototype.leafPrepend=function(e){if(this.length+e.length<=200)return new t(e.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(t);t.empty=new n([]);var r=function(e){function t(t,n){e.call(this),this.left=t,this.right=n,this.length=t.length+n.length,this.depth=Math.max(t.depth,n.depth)+1}return t.__proto__=e,t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(e){return e<this.left.length?this.left.get(e):this.right.get(e-this.left.length)},t.prototype.forEachInner=function(e,t,n,r){var i=this.left.length;if(t<i&&!1===this.left.forEachInner(e,t,Math.min(n,i),r)||n>i&&!1===this.right.forEachInner(e,Math.max(t-i,0),Math.min(this.length,n)-i,r+i))return!1},t.prototype.forEachInvertedInner=function(e,t,n,r){var i=this.left.length;if(t>i&&!1===this.right.forEachInvertedInner(e,t-i,Math.max(n,i)-i,r+i)||n<i&&!1===this.left.forEachInvertedInner(e,Math.min(t,i),n,r))return!1},t.prototype.sliceInner=function(e,t){if(0==e&&t==this.length)return this;var n=this.left.length;return t<=n?this.left.slice(e,t):e>=n?this.right.slice(e-n,t-n):this.left.slice(e,n).append(this.right.slice(0,t-n))},t.prototype.leafAppend=function(e){var n=this.right.leafAppend(e);if(n)return new t(this.left,n)},t.prototype.leafPrepend=function(e){var n=this.left.leafPrepend(e);if(n)return new t(n,this.right)},t.prototype.appendInner=function(e){return this.left.depth>=Math.max(this.right.depth,e.depth)+1?new t(this.left,new t(this.right,e)):new t(this,e)},t}(t);let i=t},950454:e=>{"use strict";e.s({history:()=>m,redo:()=>b,undo:()=>y});var t=e.i(365312),n=e.i(47542),r=e.i(968617);class i{popEvent(e,t){let n,r,o,s;if(0==this.eventCount)return null;let l=this.items.length;for(;;l--)if(this.items.get(l-1).selection){--l;break}t&&(r=(n=this.remapping(l,this.items.length)).maps.length);let u=e.tr,c=[],d=[];return this.items.forEach((e,t)=>{if(!e.step){n||(r=(n=this.remapping(l,t+1)).maps.length),r--,d.push(e);return}if(n){d.push(new a(e.map));let t=e.step.map(n.slice(r)),i;t&&u.maybeStep(t).doc&&(i=u.mapping.maps[u.mapping.maps.length-1],c.push(new a(i,void 0,void 0,c.length+d.length))),r--,i&&n.appendMap(i,r)}else u.maybeStep(e.step);if(e.selection)return o=n?e.selection.map(n.slice(r)):e.selection,s=new i(this.items.slice(0,l).append(d.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:s,transform:u,selection:o}}addTransform(e,t,n,r){var o,l;let u,c=[],d=this.eventCount,h=this.items,p=!r&&h.length?h.get(h.length-1):null;for(let n=0;n<e.steps.length;n++){let i=e.steps[n].invert(e.docs[n]),o=new a(e.mapping.maps[n],i,t),s;(s=p&&p.merge(o))&&(o=s,n?c.pop():h=h.slice(0,h.length-1)),c.push(o),t&&(d++,t=void 0),r||(p=o)}let f=d-n.depth;return f>s&&(o=h,l=f,o.forEach((e,t)=>{if(e.selection&&0==l--)return u=t,!1}),h=o.slice(u),d-=f),new i(h.append(c),d)}remapping(e,t){let r=new n.Mapping;return this.items.forEach((t,n)=>{let i=null!=t.mirrorOffset&&n-t.mirrorOffset>=e?r.maps.length-t.mirrorOffset:void 0;r.appendMap(t.map,i)},e,t),r}addMaps(e){return 0==this.eventCount?this:new i(this.items.append(e.map(e=>new a(e))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let n=[],r=Math.max(0,this.items.length-t),o=e.mapping,s=e.steps.length,l=this.eventCount;this.items.forEach(e=>{e.selection&&l--},r);let u=t;this.items.forEach(t=>{let r=o.getMirror(--u);if(null==r)return;s=Math.min(s,r);let i=o.maps[r];if(t.step){let s=e.steps[r].invert(e.docs[r]),c=t.selection&&t.selection.map(o.slice(u+1,r));c&&l++,n.push(new a(i,s,c))}else n.push(new a(i))},r);let c=[];for(let e=t;e<s;e++)c.push(new a(o.maps[e]));let d=new i(this.items.slice(0,r).append(c).append(n),l);return d.emptyItemCount()>500&&(d=d.compress(this.items.length-n.length)),d}emptyItemCount(){let e=0;return this.items.forEach(t=>{!t.step&&e++}),e}compress(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.items.length,n=this.remapping(0,e),r=n.maps.length,o=[],s=0;return this.items.forEach((t,i)=>{if(i>=e)o.push(t),t.selection&&s++;else if(t.step){let e=t.step.map(n.slice(r)),i=e&&e.getMap();if(r--,i&&n.appendMap(i,r),e){let l=t.selection&&t.selection.map(n.slice(r));l&&s++;let u=new a(i.invert(),e,l),c,d=o.length-1;(c=o.length&&o[d].merge(u))?o[d]=c:o.push(u)}}else t.map&&r--},this.items.length,0),new i(t.default.from(o.reverse()),s)}constructor(e,t){this.items=e,this.eventCount=t}}i.empty=new i(t.default.empty,0);class a{merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new a(t.getMap().invert(),t,this.selection)}}constructor(e,t,n,r){this.map=e,this.step=t,this.selection=n,this.mirrorOffset=r}}class o{constructor(e,t,n,r,i){this.done=e,this.undone=t,this.prevRanges=n,this.prevTime=r,this.prevComposition=i}}let s=20;function l(e){let t=[];for(let n=e.length-1;n>=0&&0==t.length;n--)e[n].forEach((e,n,r,i)=>t.push(r,i));return t}function u(e,t){if(!e)return null;let n=[];for(let r=0;r<e.length;r+=2){let i=t.map(e[r],1),a=t.map(e[r+1],-1);i<=a&&n.push(i,a)}return n}let c=!1,d=null;function h(e){let t=e.plugins;if(d!=t){c=!1,d=t;for(let e=0;e<t.length;e++)if(t[e].spec.historyPreserveItems){c=!0;break}}return c}let p=new r.PluginKey("history"),f=new r.PluginKey("closeHistory");function m(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new r.Plugin({key:p,state:{init:()=>new o(i.empty,i.empty,null,0,-1),apply:(t,n,r)=>(function(e,t,n,r){let a=n.getMeta(p),s;if(a)return a.historyState;n.getMeta(f)&&(e=new o(e.done,e.undone,null,0,-1));let c=n.getMeta("appendedTransaction");if(0==n.steps.length)return e;if(c&&c.getMeta(p))if(c.getMeta(p).redo)return new o(e.done.addTransform(n,void 0,r,h(t)),e.undone,l(n.mapping.maps),e.prevTime,e.prevComposition);else return new o(e.done,e.undone.addTransform(n,void 0,r,h(t)),null,e.prevTime,e.prevComposition);if(!1===n.getMeta("addToHistory")||c&&!1===c.getMeta("addToHistory"))if(s=n.getMeta("rebased"))return new o(e.done.rebased(n,s),e.undone.rebased(n,s),u(e.prevRanges,n.mapping),e.prevTime,e.prevComposition);else return new o(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),u(e.prevRanges,n.mapping),e.prevTime,e.prevComposition);{let a=n.getMeta("composition"),s=0==e.prevTime||!c&&e.prevComposition!=a&&(e.prevTime<(n.time||0)-r.newGroupDelay||!function(e,t){if(!t)return!1;if(!e.docChanged)return!0;let n=!1;return e.mapping.maps[0].forEach((e,r)=>{for(let i=0;i<t.length;i+=2)e<=t[i+1]&&r>=t[i]&&(n=!0)}),n}(n,e.prevRanges)),d=c?u(e.prevRanges,n.mapping):l(n.mapping.maps);return new o(e.done.addTransform(n,s?t.selection.getBookmark():void 0,r,h(t)),i.empty,d,n.time,null==a?e.prevComposition:a)}})(n,r,t,e)},config:e,props:{handleDOMEvents:{beforeinput(e,t){let n=t.inputType,r="historyUndo"==n?y:"historyRedo"==n?b:null;return!!r&&(t.preventDefault(),r(e.state,e.dispatch))}}}})}function g(e,t){return(n,r)=>{let i=p.getState(n);if(!i||0==(e?i.undone:i.done).eventCount)return!1;if(r){let a=function(e,t,n){let r=h(t),i=p.get(t).spec.config,a=(n?e.undone:e.done).popEvent(t,r);if(!a)return null;let s=a.selection.resolve(a.transform.doc),l=(n?e.done:e.undone).addTransform(a.transform,t.selection.getBookmark(),i,r),u=new o(n?l:a.remaining,n?a.remaining:l,null,0,-1);return a.transform.setSelection(s).setMeta(p,{redo:n,historyState:u})}(i,n,e);a&&r(t?a.scrollIntoView():a)}return!0}}let y=g(!1,!0),b=g(!0,!0);g(!1,!1),g(!0,!1)},604663:e=>{"use strict";e.s({Dropcursor:()=>s,Gapcursor:()=>l,Placeholder:()=>u,TrailingNode:()=>d,UndoRedo:()=>h});var t=e.i(691283);e.i(131841);var n=e.i(968617);e.i(997724);var r=e.i(794993);e.i(125492);var i=e.i(954647);e.i(868066);var a=e.i(730087);e.i(959884);var o=e.i(950454);t.Extension.create({name:"characterCount",addOptions:()=>({limit:null,mode:"textSize",textCounter:e=>e.length,wordCounter:e=>e.split(" ").filter(e=>""!==e).length}),addStorage:()=>({characters:()=>0,words:()=>0}),onBeforeCreate(){this.storage.characters=e=>{let t=(null==e?void 0:e.node)||this.editor.state.doc;if("textSize"===((null==e?void 0:e.mode)||this.options.mode)){let e=t.textBetween(0,t.content.size,void 0," ");return this.options.textCounter(e)}return t.nodeSize},this.storage.words=e=>{let t=(null==e?void 0:e.node)||this.editor.state.doc,n=t.textBetween(0,t.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let e=!1;return[new n.Plugin({key:new n.PluginKey("characterCount"),appendTransaction:(t,n,r)=>{if(e)return;let i=this.options.limit;if(null==i||0===i){e=!0;return}let a=this.storage.characters({node:r.doc});if(a>i){console.warn("[CharacterCount] Initial content exceeded limit of ".concat(i," characters. Content was automatically trimmed."));let t=r.tr.deleteRange(0,a-i);return e=!0,t}e=!0},filterTransaction:(e,t)=>{let n=this.options.limit;if(!e.docChanged||0===n||null==n)return!0;let r=this.storage.characters({node:t.doc}),i=this.storage.characters({node:e.doc});if(i<=n||r>n&&i>n&&i<=r)return!0;if(r>n&&i>n&&i>r||!e.getMeta("paste"))return!1;let a=e.selection.$head.pos;return e.deleteRange(a-(i-n),a),!(this.storage.characters({node:e.doc})>n)}})]}});var s=t.Extension.create({name:"dropCursor",addOptions:()=>({color:"currentColor",width:1,class:void 0}),addProseMirrorPlugins(){return[(0,r.dropCursor)(this.options)]}});t.Extension.create({name:"focus",addOptions:()=>({className:"has-focus",mode:"all"}),addProseMirrorPlugins(){return[new n.Plugin({key:new n.PluginKey("focus"),props:{decorations:e=>{let{doc:t,selection:n}=e,{isEditable:r,isFocused:a}=this.editor,{anchor:o}=n,s=[];if(!r||!a)return i.DecorationSet.create(t,[]);let l=0;"deepest"===this.options.mode&&t.descendants((e,t)=>{if(!e.isText){if(!(o>=t&&o<=t+e.nodeSize-1))return!1;l+=1}});let u=0;return t.descendants((e,t)=>!e.isText&&!!(o>=t&&o<=t+e.nodeSize-1)&&((u+=1,"deepest"===this.options.mode&&l-u>0||"shallowest"===this.options.mode&&u>1)?"deepest"===this.options.mode:void s.push(i.Decoration.node(t,t+e.nodeSize,{class:this.options.className})))),i.DecorationSet.create(t,s)}}})]}});var l=t.Extension.create({name:"gapCursor",addProseMirrorPlugins:()=>[(0,a.gapCursor)()],extendNodeSchema(e){var n;let r={name:e.name,options:e.options,storage:e.storage};return{allowGapCursor:null!=(n=(0,t.callOrReturn)((0,t.getExtensionField)(e,"allowGapCursor",r)))?n:null}}}),u=t.Extension.create({name:"placeholder",addOptions:()=>({emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}),addProseMirrorPlugins(){return[new n.Plugin({key:new n.PluginKey("placeholder"),props:{decorations:e=>{let{doc:n,selection:r}=e,a=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:o}=r,s=[];if(!a)return null;let l=this.editor.isEmpty;return n.descendants((e,n)=>{let r=o>=n&&o<=n+e.nodeSize,a=!e.isLeaf&&(0,t.isNodeEmpty)(e);if((r||!this.options.showOnlyCurrent)&&a){let t=[this.options.emptyNodeClass];l&&t.push(this.options.emptyEditorClass);let a=i.Decoration.node(n,n+e.nodeSize,{class:t.join(" "),"data-placeholder":"function"==typeof this.options.placeholder?this.options.placeholder({editor:this.editor,node:e,pos:n,hasAnchor:r}):this.options.placeholder});s.push(a)}return this.options.includeChildren}),i.DecorationSet.create(n,s)}}})]}});function c(e){let{types:t,node:n}=e;return n&&Array.isArray(t)&&t.includes(n.type)||(null==n?void 0:n.type)===t}t.Extension.create({name:"selection",addOptions:()=>({className:"selection"}),addProseMirrorPlugins(){let{editor:e,options:r}=this;return[new n.Plugin({key:new n.PluginKey("selection"),props:{decorations:n=>n.selection.empty||e.isFocused||!e.isEditable||(0,t.isNodeSelection)(n.selection)||e.view.dragging?null:i.DecorationSet.create(n.doc,[i.Decoration.inline(n.selection.from,n.selection.to,{class:r.className})])}})]}});var d=t.Extension.create({name:"trailingNode",addOptions:()=>({node:"paragraph",notAfter:[]}),addProseMirrorPlugins(){let e=new n.PluginKey(this.name),t=Object.entries(this.editor.schema.nodes).map(e=>{let[,t]=e;return t}).filter(e=>(this.options.notAfter||[]).concat(this.options.node).includes(e.name));return[new n.Plugin({key:e,appendTransaction:(t,n,r)=>{let{doc:i,tr:a,schema:o}=r,s=e.getState(r),l=i.content.size,u=o.nodes[this.options.node];if(s)return a.insert(l,u.create())},state:{init:(e,n)=>!c({node:n.tr.doc.lastChild,types:t}),apply:(e,n)=>e.docChanged?!c({node:e.doc.lastChild,types:t}):n}})]}}),h=t.Extension.create({name:"undoRedo",addOptions:()=>({depth:100,newGroupDelay:500}),addCommands:()=>({undo:()=>e=>{let{state:t,dispatch:n}=e;return(0,o.undo)(t,n)},redo:()=>e=>{let{state:t,dispatch:n}=e;return(0,o.redo)(t,n)}}),addProseMirrorPlugins(){return[(0,o.history)(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}})},310872:e=>{"use strict";e.s({default:()=>t});var t=e.i(604663).Dropcursor},73657:e=>{"use strict";e.s({}),e.i(604663),e.i(310872)},246358:e=>{"use strict";e.s({default:()=>i});var t=e.i(691283),n=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))$/,r=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))/g,i=t.Mark.create({name:"highlight",addOptions:()=>({multicolor:!1,HTMLAttributes:{}}),addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:e=>e.getAttribute("data-color")||e.style.backgroundColor,renderHTML:e=>e.color?{"data-color":e.color,style:"background-color: ".concat(e.color,"; color: inherit")}:{}}}:{}},parseHTML:()=>[{tag:"mark"}],renderHTML(e){let{HTMLAttributes:n}=e;return["mark",(0,t.mergeAttributes)(this.options.HTMLAttributes,n),0]},addCommands(){return{setHighlight:e=>t=>{let{commands:n}=t;return n.setMark(this.name,e)},toggleHighlight:e=>t=>{let{commands:n}=t;return n.toggleMark(this.name,e)},unsetHighlight:()=>e=>{let{commands:t}=e;return t.unsetMark(this.name)}}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[(0,t.markInputRule)({find:n,type:this.type})]},addPasteRules(){return[(0,t.markPasteRule)({find:r,type:this.type})]}})},655879:e=>{"use strict";e.s({default:()=>r});var t=e.i(691283),n=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,r=t.Node.create({name:"image",addOptions:()=>({inline:!1,allowBase64:!1,HTMLAttributes:{}}),inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes:()=>({src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}}),parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML(e){let{HTMLAttributes:n}=e;return["img",(0,t.mergeAttributes)(this.options.HTMLAttributes,n)]},addCommands(){return{setImage:e=>t=>{let{commands:n}=t;return n.insertContent({type:this.name,attrs:e})}}},addInputRules(){return[(0,t.nodeInputRule)({find:n,type:this.type,getAttributes:e=>{let[,,t,n,r]=e;return{src:n,alt:t,title:r}}})]}})},56077:e=>{"use strict";e.s({default:()=>t});var t=e.i(604663).Placeholder},987617:e=>{"use strict";e.s({}),e.i(604663),e.i(56077)},429771:e=>{"use strict";e.s({BulletList:()=>a,ListItem:()=>o,ListKeymap:()=>y,OrderedList:()=>w,TaskItem:()=>S,TaskList:()=>_});var t=e.i(691283),n=Object.defineProperty,r="textStyle",i=/^\s*([-+*])\s$/,a=t.Node.create({name:"bulletList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}),group:"block list",content(){return"".concat(this.options.itemTypeName,"+")},parseHTML:()=>[{tag:"ul"}],renderHTML(e){let{HTMLAttributes:n}=e;return["ul",(0,t.mergeAttributes)(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleBulletList:()=>e=>{let{commands:t,chain:n}=e;return this.options.keepAttributes?n().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes("listItem",this.editor.getAttributes(r)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let e=(0,t.wrappingInputRule)({find:i,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(e=(0,t.wrappingInputRule)({find:i,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(r),editor:this.editor})),[e]}}),o=t.Node.create({name:"listItem",addOptions:()=>({HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}),content:"paragraph block*",defining:!0,parseHTML:()=>[{tag:"li"}],renderHTML(e){let{HTMLAttributes:n}=e;return["li",(0,t.mergeAttributes)(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}});((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})({},{findListItemPos:()=>s,getNextListDepth:()=>l,handleBackspace:()=>h,handleDelete:()=>m,hasListBefore:()=>u,hasListItemAfter:()=>g,hasListItemBefore:()=>c,listItemHasSubList:()=>d,nextListIsDeeper:()=>p,nextListIsHigher:()=>f});var s=(e,n)=>{let{$from:r}=n.selection,i=(0,t.getNodeType)(e,n.schema),a=r.depth,o=r.pos,s=null;for(;a>0&&null===s;)r.node(a).type===i?s=a:(a-=1,o-=1);return null===s?null:{$pos:n.doc.resolve(o),depth:s}},l=(e,n)=>{let r=s(e,n);if(!r)return!1;let[,i]=(0,t.getNodeAtPosition)(n,e,r.$pos.pos+4);return i},u=(e,t,n)=>{let{$anchor:r}=e.selection,i=Math.max(0,r.pos-2),a=e.doc.resolve(i).node();return!!a&&!!n.includes(a.type.name)},c=(e,t)=>{var n;let{$anchor:r}=t.selection,i=t.doc.resolve(r.pos-2);return 0!==i.index()&&(null==(n=i.nodeBefore)?void 0:n.type.name)===e},d=(e,n,r)=>{if(!r)return!1;let i=(0,t.getNodeType)(e,n.schema),a=!1;return r.descendants(e=>{e.type===i&&(a=!0)}),a},h=(e,n,r)=>{if(e.commands.undoInputRule())return!0;if(e.state.selection.from!==e.state.selection.to)return!1;if(!(0,t.isNodeActive)(e.state,n)&&u(e.state,n,r)){let{$anchor:t}=e.state.selection,r=e.state.doc.resolve(t.before()-1),i=[];r.node().descendants((e,t)=>{e.type.name===n&&i.push({node:e,pos:t})});let a=i.at(-1);if(!a)return!1;let o=e.state.doc.resolve(r.start()+a.pos+1);return e.chain().cut({from:t.start()-1,to:t.end()+1},o.end()).joinForward().run()}if(!(0,t.isNodeActive)(e.state,n)||!(0,t.isAtStartOfNode)(e.state))return!1;let i=s(n,e.state);if(!i)return!1;let a=e.state.doc.resolve(i.$pos.pos-2).node(i.depth),o=d(n,e.state,a);return c(n,e.state)&&!o?e.commands.joinItemBackward():e.chain().liftListItem(n).run()},p=(e,t)=>{let n=l(e,t),r=s(e,t);return!!r&&!!n&&n>r.depth},f=(e,t)=>{let n=l(e,t),r=s(e,t);return!!r&&!!n&&n<r.depth},m=(e,n)=>{if(!(0,t.isNodeActive)(e.state,n)||!(0,t.isAtEndOfNode)(e.state,n))return!1;let{selection:r}=e.state,{$from:i,$to:a}=r;return!(!r.empty&&i.sameParent(a))&&(p(n,e.state)?e.chain().focus(e.state.selection.from+4).lift(n).joinBackward().run():f(n,e.state)?e.chain().joinForward().joinBackward().run():e.commands.joinItemForward())},g=(e,t)=>{var n;let{$anchor:r}=t.selection,i=t.doc.resolve(r.pos-r.parentOffset-2);return i.index()!==i.parent.childCount-1&&(null==(n=i.nodeAfter)?void 0:n.type.name)===e},y=t.Extension.create({name:"listKeymap",addOptions:()=>({listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}),addKeyboardShortcuts(){return{Delete:e=>{let{editor:t}=e,n=!1;return this.options.listTypes.forEach(e=>{let{itemName:r}=e;void 0!==t.state.schema.nodes[r]&&m(t,r)&&(n=!0)}),n},"Mod-Delete":e=>{let{editor:t}=e,n=!1;return this.options.listTypes.forEach(e=>{let{itemName:r}=e;void 0!==t.state.schema.nodes[r]&&m(t,r)&&(n=!0)}),n},Backspace:e=>{let{editor:t}=e,n=!1;return this.options.listTypes.forEach(e=>{let{itemName:r,wrapperNames:i}=e;void 0!==t.state.schema.nodes[r]&&h(t,r,i)&&(n=!0)}),n},"Mod-Backspace":e=>{let{editor:t}=e,n=!1;return this.options.listTypes.forEach(e=>{let{itemName:r,wrapperNames:i}=e;void 0!==t.state.schema.nodes[r]&&h(t,r,i)&&(n=!0)}),n}}}}),b="textStyle",x=/^(\d+)\.\s$/,w=t.Node.create({name:"orderedList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}),group:"block list",content(){return"".concat(this.options.itemTypeName,"+")},addAttributes:()=>({start:{default:1,parseHTML:e=>e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1},type:{default:null,parseHTML:e=>e.getAttribute("type")}}),parseHTML:()=>[{tag:"ol"}],renderHTML(e){let{HTMLAttributes:n}=e,{start:r,...i}=n;return 1===r?["ol",(0,t.mergeAttributes)(this.options.HTMLAttributes,i),0]:["ol",(0,t.mergeAttributes)(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleOrderedList:()=>e=>{let{commands:t,chain:n}=e;return this.options.keepAttributes?n().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes("listItem",this.editor.getAttributes(b)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let e=(0,t.wrappingInputRule)({find:x,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(e=(0,t.wrappingInputRule)({find:x,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(b)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[e]}}),k=/^\s*(\[([( |x])?\])\s$/,S=t.Node.create({name:"taskItem",addOptions:()=>({nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}),content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes:()=>({checked:{default:!1,keepOnSplit:!1,parseHTML:e=>{let t=e.getAttribute("data-checked");return""===t||"true"===t},renderHTML:e=>({"data-checked":e.checked})}}),parseHTML(){return[{tag:'li[data-type="'.concat(this.name,'"]'),priority:51}]},renderHTML(e){let{node:n,HTMLAttributes:r}=e;return["li",(0,t.mergeAttributes)(this.options.HTMLAttributes,r,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:n.attrs.checked?"checked":null}],["span"]],["div",0]]},addKeyboardShortcuts(){let e={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...e,Tab:()=>this.editor.commands.sinkListItem(this.name)}:e},addNodeView(){return e=>{let{node:t,HTMLAttributes:n,getPos:r,editor:i}=e,a=document.createElement("li"),o=document.createElement("label"),s=document.createElement("span"),l=document.createElement("input"),u=document.createElement("div"),c=e=>{var t,n;l.ariaLabel=(null==(n=null==(t=this.options.a11y)?void 0:t.checkboxLabel)?void 0:n.call(t,e,l.checked))||"Task item checkbox for ".concat(e.textContent||"empty task item")};return c(t),o.contentEditable="false",l.type="checkbox",l.addEventListener("mousedown",e=>e.preventDefault()),l.addEventListener("change",e=>{if(!i.isEditable&&!this.options.onReadOnlyChecked){l.checked=!l.checked;return}let{checked:n}=e.target;i.isEditable&&"function"==typeof r&&i.chain().focus(void 0,{scrollIntoView:!1}).command(e=>{let{tr:t}=e,i=r();if("number"!=typeof i)return!1;let a=t.doc.nodeAt(i);return t.setNodeMarkup(i,void 0,{...null==a?void 0:a.attrs,checked:n}),!0}).run(),i.isEditable||!this.options.onReadOnlyChecked||this.options.onReadOnlyChecked(t,n)||(l.checked=!l.checked)}),Object.entries(this.options.HTMLAttributes).forEach(e=>{let[t,n]=e;a.setAttribute(t,n)}),a.dataset.checked=t.attrs.checked,l.checked=t.attrs.checked,o.append(l,s),a.append(o,u),Object.entries(n).forEach(e=>{let[t,n]=e;a.setAttribute(t,n)}),{dom:a,contentDOM:u,update:e=>e.type===this.type&&(a.dataset.checked=e.attrs.checked,l.checked=e.attrs.checked,c(e),!0)}}},addInputRules(){return[(0,t.wrappingInputRule)({find:k,type:this.type,getAttributes:e=>({checked:"x"===e[e.length-1]})})]}}),_=t.Node.create({name:"taskList",addOptions:()=>({itemTypeName:"taskItem",HTMLAttributes:{}}),group:"block list",content(){return"".concat(this.options.itemTypeName,"+")},parseHTML(){return[{tag:'ul[data-type="'.concat(this.name,'"]'),priority:51}]},renderHTML(e){let{HTMLAttributes:n}=e;return["ul",(0,t.mergeAttributes)(this.options.HTMLAttributes,n,{"data-type":this.name}),0]},addCommands(){return{toggleTaskList:()=>e=>{let{commands:t}=e;return t.toggleList(this.name,this.options.itemTypeName)}}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});t.Extension.create({name:"listKit",addExtensions(){let e=[];return!1!==this.options.bulletList&&e.push(a.configure(this.options.bulletList)),!1!==this.options.listItem&&e.push(o.configure(this.options.listItem)),!1!==this.options.listKeymap&&e.push(y.configure(this.options.listKeymap)),!1!==this.options.orderedList&&e.push(w.configure(this.options.orderedList)),!1!==this.options.taskItem&&e.push(S.configure(this.options.taskItem)),!1!==this.options.taskList&&e.push(_.configure(this.options.taskList)),e}})},947592:e=>{"use strict";e.s({default:()=>t});var t=e.i(429771).TaskItem},559609:e=>{"use strict";e.s({}),e.i(429771),e.i(947592)},194572:e=>{"use strict";e.s({default:()=>t});var t=e.i(429771).TaskList},221876:e=>{"use strict";e.s({}),e.i(429771),e.i(194572)},51896:e=>{"use strict";e.s({TextStyle:()=>n});var t=e.i(691283),n=t.Mark.create({name:"textStyle",priority:101,addOptions:()=>({HTMLAttributes:{},mergeNestedSpanStyles:!0}),parseHTML(){return[{tag:"span",consuming:!1,getAttrs:e=>!!e.hasAttribute("style")&&(this.options.mergeNestedSpanStyles&&(e=>{if(!e.children.length)return;let t=e.querySelectorAll("span");t&&t.forEach(e=>{var t,n;let r=e.getAttribute("style"),i=null==(n=null==(t=e.parentElement)?void 0:t.closest("span"))?void 0:n.getAttribute("style");e.setAttribute("style","".concat(i,";").concat(r))})})(e),{})}]},renderHTML(e){let{HTMLAttributes:n}=e;return["span",(0,t.mergeAttributes)(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleTextStyle:e=>t=>{let{commands:n}=t;return n.toggleMark(this.name,e)},removeEmptyTextStyle:()=>e=>{let{tr:t}=e,{selection:n}=t;return t.doc.nodesBetween(n.from,n.to,(e,n)=>{if(e.isTextblock)return!0;e.marks.filter(e=>e.type===this.type).some(e=>Object.values(e.attrs).some(e=>!!e))||t.removeMark(n,n+e.nodeSize,this.type)}),!0}}}}),r=t.Extension.create({name:"backgroundColor",addOptions:()=>({types:["textStyle"]}),addGlobalAttributes(){return[{types:this.options.types,attributes:{backgroundColor:{default:null,parseHTML:e=>{var t;let n=e.getAttribute("style");if(n){let e=n.split(";").map(e=>e.trim()).filter(Boolean);for(let t=e.length-1;t>=0;t-=1){let n=e[t].split(":");if(n.length>=2){let e=n[0].trim().toLowerCase(),t=n.slice(1).join(":").trim();if("background-color"===e)return t.replace(/['"]+/g,"")}}}return null==(t=e.style.backgroundColor)?void 0:t.replace(/['"]+/g,"")},renderHTML:e=>e.backgroundColor?{style:"background-color: ".concat(e.backgroundColor)}:{}}}}]},addCommands:()=>({setBackgroundColor:e=>t=>{let{chain:n}=t;return n().setMark("textStyle",{backgroundColor:e}).run()},unsetBackgroundColor:()=>e=>{let{chain:t}=e;return t().setMark("textStyle",{backgroundColor:null}).removeEmptyTextStyle().run()}})}),i=t.Extension.create({name:"color",addOptions:()=>({types:["textStyle"]}),addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:e=>{var t;let n=e.getAttribute("style");if(n){let e=n.split(";").map(e=>e.trim()).filter(Boolean);for(let t=e.length-1;t>=0;t-=1){let n=e[t].split(":");if(n.length>=2){let e=n[0].trim().toLowerCase(),t=n.slice(1).join(":").trim();if("color"===e)return t.replace(/['"]+/g,"")}}}return null==(t=e.style.color)?void 0:t.replace(/['"]+/g,"")},renderHTML:e=>e.color?{style:"color: ".concat(e.color)}:{}}}}]},addCommands:()=>({setColor:e=>t=>{let{chain:n}=t;return n().setMark("textStyle",{color:e}).run()},unsetColor:()=>e=>{let{chain:t}=e;return t().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}})}),a=t.Extension.create({name:"fontFamily",addOptions:()=>({types:["textStyle"]}),addGlobalAttributes(){return[{types:this.options.types,attributes:{fontFamily:{default:null,parseHTML:e=>e.style.fontFamily,renderHTML:e=>e.fontFamily?{style:"font-family: ".concat(e.fontFamily)}:{}}}}]},addCommands:()=>({setFontFamily:e=>t=>{let{chain:n}=t;return n().setMark("textStyle",{fontFamily:e}).run()},unsetFontFamily:()=>e=>{let{chain:t}=e;return t().setMark("textStyle",{fontFamily:null}).removeEmptyTextStyle().run()}})}),o=t.Extension.create({name:"fontSize",addOptions:()=>({types:["textStyle"]}),addGlobalAttributes(){return[{types:this.options.types,attributes:{fontSize:{default:null,parseHTML:e=>e.style.fontSize,renderHTML:e=>e.fontSize?{style:"font-size: ".concat(e.fontSize)}:{}}}}]},addCommands:()=>({setFontSize:e=>t=>{let{chain:n}=t;return n().setMark("textStyle",{fontSize:e}).run()},unsetFontSize:()=>e=>{let{chain:t}=e;return t().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()}})}),s=t.Extension.create({name:"lineHeight",addOptions:()=>({types:["textStyle"]}),addGlobalAttributes(){return[{types:this.options.types,attributes:{lineHeight:{default:null,parseHTML:e=>e.style.lineHeight,renderHTML:e=>e.lineHeight?{style:"line-height: ".concat(e.lineHeight)}:{}}}}]},addCommands:()=>({setLineHeight:e=>t=>{let{chain:n}=t;return n().setMark("textStyle",{lineHeight:e}).run()},unsetLineHeight:()=>e=>{let{chain:t}=e;return t().setMark("textStyle",{lineHeight:null}).removeEmptyTextStyle().run()}})});t.Extension.create({name:"textStyleKit",addExtensions(){let e=[];return!1!==this.options.backgroundColor&&e.push(r.configure(this.options.backgroundColor)),!1!==this.options.color&&e.push(i.configure(this.options.color)),!1!==this.options.fontFamily&&e.push(a.configure(this.options.fontFamily)),!1!==this.options.fontSize&&e.push(o.configure(this.options.fontSize)),!1!==this.options.lineHeight&&e.push(s.configure(this.options.lineHeight)),!1!==this.options.textStyle&&e.push(n.configure(this.options.textStyle)),e}})},98964:e=>{"use strict";e.s({jsx:()=>t});var t=(e,t)=>{if("slot"===e)return 0;if(e instanceof Function)return e(t);let{children:n,...r}=null!=t?t:{};if("svg"===e)throw Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[e,r,n]}},283638:e=>{"use strict";e.s({Blockquote:()=>i});var t=e.i(691283),n=e.i(98964),r=/^\s*>\s$/,i=t.Node.create({name:"blockquote",addOptions:()=>({HTMLAttributes:{}}),content:"block+",group:"block",defining:!0,parseHTML:()=>[{tag:"blockquote"}],renderHTML(e){let{HTMLAttributes:r}=e;return(0,n.jsx)("blockquote",{...(0,t.mergeAttributes)(this.options.HTMLAttributes,r),children:(0,n.jsx)("slot",{})})},addCommands(){return{setBlockquote:()=>e=>{let{commands:t}=e;return t.wrapIn(this.name)},toggleBlockquote:()=>e=>{let{commands:t}=e;return t.toggleWrap(this.name)},unsetBlockquote:()=>e=>{let{commands:t}=e;return t.lift(this.name)}}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[(0,t.wrappingInputRule)({find:r,type:this.type})]}})},459356:e=>{"use strict";e.s({Bold:()=>s});var t=e.i(691283),n=e.i(98964),r=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,i=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,a=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,o=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,s=t.Mark.create({name:"bold",addOptions:()=>({HTMLAttributes:{}}),parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:e=>"normal"!==e.style.fontWeight&&null},{style:"font-weight=400",clearMark:e=>e.type.name===this.name},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}]},renderHTML(e){let{HTMLAttributes:r}=e;return(0,n.jsx)("strong",{...(0,t.mergeAttributes)(this.options.HTMLAttributes,r),children:(0,n.jsx)("slot",{})})},addCommands(){return{setBold:()=>e=>{let{commands:t}=e;return t.setMark(this.name)},toggleBold:()=>e=>{let{commands:t}=e;return t.toggleMark(this.name)},unsetBold:()=>e=>{let{commands:t}=e;return t.unsetMark(this.name)}}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[(0,t.markInputRule)({find:r,type:this.type}),(0,t.markInputRule)({find:a,type:this.type})]},addPasteRules(){return[(0,t.markPasteRule)({find:i,type:this.type}),(0,t.markPasteRule)({find:o,type:this.type})]}})},900008:e=>{"use strict";e.s({Code:()=>i});var t=e.i(691283),n=/(^|[^`])`([^`]+)`(?!`)$/,r=/(^|[^`])`([^`]+)`(?!`)/g,i=t.Mark.create({name:"code",addOptions:()=>({HTMLAttributes:{}}),excludes:"_",code:!0,exitable:!0,parseHTML:()=>[{tag:"code"}],renderHTML(e){let{HTMLAttributes:n}=e;return["code",(0,t.mergeAttributes)(this.options.HTMLAttributes,n),0]},addCommands(){return{setCode:()=>e=>{let{commands:t}=e;return t.setMark(this.name)},toggleCode:()=>e=>{let{commands:t}=e;return t.toggleMark(this.name)},unsetCode:()=>e=>{let{commands:t}=e;return t.unsetMark(this.name)}}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[(0,t.markInputRule)({find:n,type:this.type})]},addPasteRules(){return[(0,t.markPasteRule)({find:r,type:this.type})]}})},294563:e=>{"use strict";e.s({CodeBlock:()=>a});var t=e.i(691283);e.i(131841);var n=e.i(968617),r=/^```([a-z]+)?[\s\n]$/,i=/^~~~([a-z]+)?[\s\n]$/,a=t.Node.create({name:"codeBlock",addOptions:()=>({languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:4,HTMLAttributes:{}}),content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:e=>{var t;let{languageClassPrefix:n}=this.options,r=[...(null==(t=e.firstElementChild)?void 0:t.classList)||[]].filter(e=>e.startsWith(n)).map(e=>e.replace(n,""))[0];return r||null},rendered:!1}}},parseHTML:()=>[{tag:"pre",preserveWhitespace:"full"}],renderHTML(e){let{node:n,HTMLAttributes:r}=e;return["pre",(0,t.mergeAttributes)(this.options.HTMLAttributes,r),["code",{class:n.attrs.language?this.options.languageClassPrefix+n.attrs.language:null},0]]},addCommands(){return{setCodeBlock:e=>t=>{let{commands:n}=t;return n.setNode(this.name,e)},toggleCodeBlock:e=>t=>{let{commands:n}=t;return n.toggleNode(this.name,"paragraph",e)}}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{let{empty:e,$anchor:t}=this.editor.state.selection,n=1===t.pos;return!!e&&t.parent.type.name===this.name&&(!!n||!t.parent.textContent.length)&&this.editor.commands.clearNodes()},Tab:e=>{let{editor:t}=e;if(!this.options.enableTabIndentation)return!1;let{state:n}=t,{selection:r}=n,{$from:i,empty:a}=r;if(i.parent.type!==this.type)return!1;let o=" ".repeat(this.options.tabSize);return a?t.commands.insertContent(o):t.commands.command(e=>{let{tr:t}=e,{from:i,to:a}=r,s=n.doc.textBetween(i,a,"\n","\n").split("\n").map(e=>o+e).join("\n");return t.replaceWith(i,a,n.schema.text(s)),!0})},"Shift-Tab":e=>{let{editor:t}=e;if(!this.options.enableTabIndentation)return!1;let{state:r}=t,{selection:i}=r,{$from:a,empty:o}=i;return a.parent.type===this.type&&(o?t.commands.command(e=>{var t;let{tr:i}=e,{pos:o}=a,s=a.start(),l=a.end(),u=r.doc.textBetween(s,l,"\n","\n").split("\n"),c=0,d=0,h=o-s;for(let e=0;e<u.length;e+=1){if(d+u[e].length>=h){c=e;break}d+=u[e].length+1}let p=Math.min(((null==(t=u[c].match(/^ */))?void 0:t[0])||"").length,this.options.tabSize);if(0===p)return!0;let f=s;for(let e=0;e<c;e+=1)f+=u[e].length+1;return i.delete(f,f+p),o-f<=p&&i.setSelection(n.TextSelection.create(i.doc,f)),!0}):t.commands.command(e=>{let{tr:t}=e,{from:n,to:a}=i,o=r.doc.textBetween(n,a,"\n","\n").split("\n").map(e=>{var t;let n=Math.min(((null==(t=e.match(/^ */))?void 0:t[0])||"").length,this.options.tabSize);return e.slice(n)}).join("\n");return t.replaceWith(n,a,r.schema.text(o)),!0}))},Enter:e=>{let{editor:t}=e;if(!this.options.exitOnTripleEnter)return!1;let{state:n}=t,{selection:r}=n,{$from:i,empty:a}=r;if(!a||i.parent.type!==this.type)return!1;let o=i.parentOffset===i.parent.nodeSize-2,s=i.parent.textContent.endsWith("\n\n");return!!o&&!!s&&t.chain().command(e=>{let{tr:t}=e;return t.delete(i.pos-2,i.pos),!0}).exitCode().run()},ArrowDown:e=>{let{editor:t}=e;if(!this.options.exitOnArrowDown)return!1;let{state:r}=t,{selection:i,doc:a}=r,{$from:o,empty:s}=i;if(!s||o.parent.type!==this.type||o.parentOffset!==o.parent.nodeSize-2)return!1;let l=o.after();return void 0!==l&&(a.nodeAt(l)?t.commands.command(e=>{let{tr:t}=e;return t.setSelection(n.Selection.near(a.resolve(l))),!0}):t.commands.exitCode())}}},addInputRules(){return[(0,t.textblockTypeInputRule)({find:r,type:this.type,getAttributes:e=>({language:e[1]})}),(0,t.textblockTypeInputRule)({find:i,type:this.type,getAttributes:e=>({language:e[1]})})]},addProseMirrorPlugins(){return[new n.Plugin({key:new n.PluginKey("codeBlockVSCodeHandler"),props:{handlePaste:(e,t)=>{if(!t.clipboardData||this.editor.isActive(this.type.name))return!1;let r=t.clipboardData.getData("text/plain"),i=t.clipboardData.getData("vscode-editor-data"),a=i?JSON.parse(i):void 0,o=null==a?void 0:a.mode;if(!r||!o)return!1;let{tr:s,schema:l}=e.state,u=l.text(r.replace(/\r\n?/g,"\n"));return s.replaceSelectionWith(this.type.create({language:o},u)),s.selection.$from.parent.type!==this.type&&s.setSelection(n.TextSelection.near(s.doc.resolve(Math.max(0,s.selection.from-2)))),s.setMeta("paste",!0),e.dispatch(s),!0}}})]}})},309643:e=>{"use strict";e.s({HardBreak:()=>n,default:()=>r});var t=e.i(691283),n=t.Node.create({name:"hardBreak",addOptions:()=>({keepMarks:!0,HTMLAttributes:{}}),inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML:()=>[{tag:"br"}],renderHTML(e){let{HTMLAttributes:n}=e;return["br",(0,t.mergeAttributes)(this.options.HTMLAttributes,n)]},renderText:()=>"\n",addCommands(){return{setHardBreak:()=>e=>{let{commands:t,chain:n,state:r,editor:i}=e;return t.first([()=>t.exitCode(),()=>t.command(()=>{let{selection:e,storedMarks:t}=r;if(e.$from.parent.type.spec.isolating)return!1;let{keepMarks:a}=this.options,{splittableMarks:o}=i.extensionManager,s=t||e.$to.parentOffset&&e.$from.marks();return n().insertContent({type:this.name}).command(e=>{let{tr:t,dispatch:n}=e;if(n&&s&&a){let e=s.filter(e=>o.includes(e.type.name));t.ensureMarks(e)}return!0}).run()})])}}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),r=n},508613:e=>{"use strict";e.s({Heading:()=>n});var t=e.i(691283),n=t.Node.create({name:"heading",addOptions:()=>({levels:[1,2,3,4,5,6],HTMLAttributes:{}}),content:"inline*",group:"block",defining:!0,addAttributes:()=>({level:{default:1,rendered:!1}}),parseHTML(){return this.options.levels.map(e=>({tag:"h".concat(e),attrs:{level:e}}))},renderHTML(e){let{node:n,HTMLAttributes:r}=e,i=this.options.levels.includes(n.attrs.level)?n.attrs.level:this.options.levels[0];return["h".concat(i),(0,t.mergeAttributes)(this.options.HTMLAttributes,r),0]},addCommands(){return{setHeading:e=>t=>{let{commands:n}=t;return!!this.options.levels.includes(e.level)&&n.setNode(this.name,e)},toggleHeading:e=>t=>{let{commands:n}=t;return!!this.options.levels.includes(e.level)&&n.toggleNode(this.name,"paragraph",e)}}},addKeyboardShortcuts(){return this.options.levels.reduce((e,t)=>({...e,...{["Mod-Alt-".concat(t)]:()=>this.editor.commands.toggleHeading({level:t})}}),{})},addInputRules(){return this.options.levels.map(e=>(0,t.textblockTypeInputRule)({find:new RegExp("^(#{".concat(Math.min(...this.options.levels),",").concat(e,"})\\s$")),type:this.type,getAttributes:{level:e}}))}})},31354:e=>{"use strict";e.s({HorizontalRule:()=>r});var t=e.i(691283);e.i(131841);var n=e.i(968617),r=t.Node.create({name:"horizontalRule",addOptions:()=>({HTMLAttributes:{}}),group:"block",parseHTML:()=>[{tag:"hr"}],renderHTML(e){let{HTMLAttributes:n}=e;return["hr",(0,t.mergeAttributes)(this.options.HTMLAttributes,n)]},addCommands(){return{setHorizontalRule:()=>e=>{let{chain:r,state:i}=e;if(!(0,t.canInsertNode)(i,i.schema.nodes[this.name]))return!1;let{selection:a}=i,{$to:o}=a,s=r();return(0,t.isNodeSelection)(a)?s.insertContentAt(o.pos,{type:this.name}):s.insertContent({type:this.name}),s.command(e=>{var t;let{tr:r,dispatch:i}=e;if(i){let{$to:e}=r.selection,i=e.end();if(e.nodeAfter)e.nodeAfter.isTextblock?r.setSelection(n.TextSelection.create(r.doc,e.pos+1)):e.nodeAfter.isBlock?r.setSelection(n.NodeSelection.create(r.doc,e.pos)):r.setSelection(n.TextSelection.create(r.doc,e.pos));else{let a=null==(t=e.parent.type.contentMatch.defaultType)?void 0:t.create();a&&(r.insert(i,a),r.setSelection(n.TextSelection.create(r.doc,i+1)))}r.scrollIntoView()}return!0}).run()}}},addInputRules(){return[(0,t.nodeInputRule)({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}})},593658:e=>{"use strict";e.s({Italic:()=>o});var t=e.i(691283),n=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,r=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,i=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,a=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,o=t.Mark.create({name:"italic",addOptions:()=>({HTMLAttributes:{}}),parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:e=>"normal"!==e.style.fontStyle&&null},{style:"font-style=normal",clearMark:e=>e.type.name===this.name},{style:"font-style=italic"}]},renderHTML(e){let{HTMLAttributes:n}=e;return["em",(0,t.mergeAttributes)(this.options.HTMLAttributes,n),0]},addCommands(){return{setItalic:()=>e=>{let{commands:t}=e;return t.setMark(this.name)},toggleItalic:()=>e=>{let{commands:t}=e;return t.toggleMark(this.name)},unsetItalic:()=>e=>{let{commands:t}=e;return t.unsetMark(this.name)}}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[(0,t.markInputRule)({find:n,type:this.type}),(0,t.markInputRule)({find:i,type:this.type})]},addPasteRules(){return[(0,t.markPasteRule)({find:r,type:this.type}),(0,t.markPasteRule)({find:a,type:this.type})]}})},139695:e=>{"use strict";e.s({find:()=>eF,registerCustomProtocol:()=>eO,reset:()=>eR,tokenize:()=>ej});let t="numeric",n="ascii",r="alpha",i="asciinumeric",a="alphanumeric",o="domain",s="emoji",l="whitespace";function u(e,l,u){for(let c in l[t]&&(l[i]=!0,l[a]=!0),l[n]&&(l[i]=!0,l[r]=!0),l[i]&&(l[a]=!0),l[r]&&(l[a]=!0),l[a]&&(l[o]=!0),l[s]&&(l[o]=!0),l){let t=(c in u||(u[c]=[]),u[c]);0>t.indexOf(e)&&t.push(e)}}function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.j={},this.jr=[],this.jd=null,this.t=e}c.groups={},c.prototype={accepts(){return!!this.t},go(e){let t=this.j[e];if(t)return t;for(let t=0;t<this.jr.length;t++){let n=this.jr[t][0],r=this.jr[t][1];if(r&&n.test(e))return r}return this.jd},has(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?e in this.j:!!this.go(e)},ta(e,t,n,r){for(let i=0;i<e.length;i++)this.tt(e[i],t,n,r)},tr(e,t,n,r){let i;return r=r||c.groups,t&&t.j?i=t:(i=new c(t),n&&r&&u(t,n,r)),this.jr.push([e,i]),i},ts(e,t,n,r){let i=this,a=e.length;if(!a)return i;for(let t=0;t<a-1;t++)i=i.tt(e[t]);return i.tt(e[a-1],t,n,r)},tt(e,t,n,r){if(r=r||c.groups,t&&t.j)return this.j[e]=t,t;let i,a=this.go(e);return a?(Object.assign((i=new c).j,a.j),i.jr.push.apply(i.jr,a.jr),i.jd=a.jd,i.t=a.t):i=new c,t&&(r&&(i.t&&"string"==typeof i.t?u(t,Object.assign(function(e,t){let n={};for(let r in t)t[r].indexOf(e)>=0&&(n[r]=!0);return n}(i.t,r),n),r):n&&u(t,n,r)),i.t=t),this.j[e]=i,i}};let d=(e,t,n,r,i)=>e.ta(t,n,r,i),h=(e,t,n,r,i)=>e.tr(t,n,r,i),p=(e,t,n,r,i)=>e.ts(t,n,r,i),f=(e,t,n,r,i)=>e.tt(t,n,r,i),m="WORD",g="UWORD",y="ASCIINUMERICAL",b="ALPHANUMERICAL",x="LOCALHOST",w="UTLD",k="SCHEME",S="SLASH_SCHEME",_="OPENBRACE",C="CLOSEBRACE",A="OPENBRACKET",E="CLOSEBRACKET",T="OPENPAREN",M="CLOSEPAREN",I="OPENANGLEBRACKET",N="CLOSEANGLEBRACKET",D="FULLWIDTHLEFTPAREN",P="FULLWIDTHRIGHTPAREN",R="LEFTCORNERBRACKET",O="RIGHTCORNERBRACKET",j="LEFTWHITECORNERBRACKET",F="RIGHTWHITECORNERBRACKET",L="FULLWIDTHLESSTHAN",z="FULLWIDTHGREATERTHAN",B="AMPERSAND",U="APOSTROPHE",H="ASTERISK",W="BACKSLASH",V="BACKTICK",q="CARET",G="COLON",$="COMMA",K="DOLLAR",Y="EQUALS",X="EXCLAMATION",Z="HYPHEN",J="PERCENT",Q="PIPE",ee="PLUS",et="POUND",en="QUERY",er="QUOTE",ei="FULLWIDTHMIDDLEDOT",ea="SEMI",eo="SLASH",es="TILDE",el="UNDERSCORE",eu="EMOJI";var ec=Object.freeze({__proto__:null,ALPHANUMERICAL:b,AMPERSAND:B,APOSTROPHE:U,ASCIINUMERICAL:y,ASTERISK:H,AT:"AT",BACKSLASH:W,BACKTICK:V,CARET:q,CLOSEANGLEBRACKET:N,CLOSEBRACE:C,CLOSEBRACKET:E,CLOSEPAREN:M,COLON:G,COMMA:$,DOLLAR:K,DOT:"DOT",EMOJI:eu,EQUALS:Y,EXCLAMATION:X,FULLWIDTHGREATERTHAN:z,FULLWIDTHLEFTPAREN:D,FULLWIDTHLESSTHAN:L,FULLWIDTHMIDDLEDOT:ei,FULLWIDTHRIGHTPAREN:P,HYPHEN:Z,LEFTCORNERBRACKET:R,LEFTWHITECORNERBRACKET:j,LOCALHOST:x,NL:"NL",NUM:"NUM",OPENANGLEBRACKET:I,OPENBRACE:_,OPENBRACKET:A,OPENPAREN:T,PERCENT:J,PIPE:Q,PLUS:ee,POUND:et,QUERY:en,QUOTE:er,RIGHTCORNERBRACKET:O,RIGHTWHITECORNERBRACKET:F,SCHEME:k,SEMI:ea,SLASH:eo,SLASH_SCHEME:S,SYM:"SYM",TILDE:es,TLD:"TLD",UNDERSCORE:el,UTLD:w,UWORD:g,WORD:m,WS:"WS"});let ed=/[a-z]/,eh=RegExp("\\p{L}","u"),ep=RegExp("\\p{Emoji}","u"),ef=/\d/,em=/\s/,eg=null,ev=null;function ey(e,t){let n=function(e){let t=[],n=e.length,r=0;for(;r<n;){let i,a=e.charCodeAt(r),o=a<55296||a>56319||r+1===n||(i=e.charCodeAt(r+1))<56320||i>57343?e[r]:e.slice(r,r+2);t.push(o),r+=o.length}return t}(t.replace(/[A-Z]/g,e=>e.toLowerCase())),r=n.length,i=[],a=0,o=0;for(;o<r;){let s=e,l=null,u=0,c=null,d=-1,h=-1;for(;o<r&&(l=s.go(n[o]));)(s=l).accepts()?(d=0,h=0,c=s):d>=0&&(d+=n[o].length,h++),u+=n[o].length,a+=n[o].length,o++;a-=d,o-=h,u-=d,i.push({t:c.t,v:t.slice(a-u,a),s:a-u,e:a})}return i}function eb(e,t,n,r,i){let a,o=t.length;for(let n=0;n<o-1;n++){let o=t[n];e.j[o]?a=e.j[o]:((a=new c(r)).jr=i.slice(),e.j[o]=a),e=a}return(a=new c(n)).jr=i.slice(),e.j[t[o-1]]=a,a}function ex(e){let t=[],n=[],r=0;for(;r<e.length;){let i=0;for(;"0123456789".indexOf(e[r+i])>=0;)i++;if(i>0){t.push(n.join(""));for(let t=parseInt(e.substring(r,r+i),10);t>0;t--)n.pop();r+=i}else n.push(e[r]),r++}return t}let ew={defaultProtocol:"http",events:null,format:eS,formatHref:eS,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function ek(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Object.assign({},ew);e&&(n=Object.assign(n,e instanceof ek?e.o:e));let r=n.ignoreTags,i=[];for(let e=0;e<r.length;e++)i.push(r[e].toUpperCase());this.o=n,t&&(this.defaultRender=t),this.ignoreTags=i}function eS(e){return e}function e_(e,t){this.t="token",this.v=e,this.tk=t}function eC(e,t){class n extends e_{constructor(t,n){super(t,n),this.t=e}}for(let e in t)n.prototype[e]=t[e];return n.t=e,n}ek.prototype={o:ew,ignoreTags:[],defaultRender:e=>e,check(e){return this.get("validate",e.toString(),e)},get(e,t,n){let r=null!=t,i=this.o[e];return i&&("object"==typeof i?"function"==typeof(i=n.t in i?i[n.t]:ew[e])&&r&&(i=i(t,n)):"function"==typeof i&&r&&(i=i(t,n.t,n))),i},getObj(e,t,n){let r=this.o[e];return"function"==typeof r&&null!=t&&(r=r(t,n.t,n)),r},render(e){let t=e.render(this);return(this.get("render",null,e)||this.defaultRender)(t,e.t,e)}},e_.prototype={isLink:!1,toString(){return this.v},toHref(e){return this.toString()},toFormattedString(e){let t=this.toString(),n=e.get("truncate",t,this),r=e.get("format",t,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(e){return e.get("formatHref",this.toHref(e.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ew.defaultProtocol;return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(e){return{type:this.t,value:this.toFormattedString(e),isLink:this.isLink,href:this.toFormattedHref(e),start:this.startIndex(),end:this.endIndex()}},validate(e){return e.get("validate",this.toString(),this)},render(e){let t=this.toHref(e.get("defaultProtocol")),n=e.get("formatHref",t,this),r=e.get("tagName",t,this),i=this.toFormattedString(e),a={},o=e.get("className",t,this),s=e.get("target",t,this),l=e.get("rel",t,this),u=e.getObj("attributes",t,this),c=e.getObj("events",t,this);return a.href=n,o&&(a.class=o),s&&(a.target=s),l&&(a.rel=l),u&&Object.assign(a,u),{tagName:r,attributes:a,content:i,eventListeners:c}}};let eA=eC("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),eE=eC("text"),eT=eC("nl"),eM=eC("url",{isLink:!0,toHref(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ew.defaultProtocol;return this.hasProtocol()?this.v:"".concat(e,"://").concat(this.v)},hasProtocol(){let e=this.tk;return e.length>=2&&e[0].t!==x&&e[1].t===G}}),eI=e=>new c(e);function eN(e,t,n){let r=n[0].s,i=n[n.length-1].e;return new e(t.slice(r,i),n)}let eD="undefined"!=typeof console&&console&&console.warn||(()=>{}),eP={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function eR(){return c.groups={},eP.scanner=null,eP.parser=null,eP.tokenQueue=[],eP.pluginQueue=[],eP.customSchemes=[],eP.initialized=!1,eP}function eO(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(eP.initialized&&eD('linkifyjs: already initialized - will not register custom scheme "'.concat(e,'" ').concat("until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.")),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(e))throw Error('linkifyjs: incorrect scheme format.\n1. Must only contain digits, lowercase ASCII letters or "-"\n2. Cannot start or end with "-"\n3. "-" cannot repeat');eP.customSchemes.push([e,t])}function ej(e){return eP.initialized||function(){eP.scanner=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],d={};c.groups=d;let ey=new c;null==eg&&(eg=ex("aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2")),null==ev&&(ev=ex("121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222")),f(ey,"'",U),f(ey,"{",_),f(ey,"}",C),f(ey,"[",A),f(ey,"]",E),f(ey,"(",T),f(ey,")",M),f(ey,"<",I),f(ey,">",N),f(ey,"",D),f(ey,"",P),f(ey,"",R),f(ey,"",O),f(ey,"",j),f(ey,"",F),f(ey,"",L),f(ey,"",z),f(ey,"&",B),f(ey,"*",H),f(ey,"@","AT"),f(ey,"`",V),f(ey,"^",q),f(ey,":",G),f(ey,",",$),f(ey,"$",K),f(ey,".","DOT"),f(ey,"=",Y),f(ey,"!",X),f(ey,"-",Z),f(ey,"%",J),f(ey,"|",Q),f(ey,"+",ee),f(ey,"#",et),f(ey,"?",en),f(ey,'"',er),f(ey,"/",eo),f(ey,";",ea),f(ey,"~",es),f(ey,"_",el),f(ey,"\\",W),f(ey,"",ei);let ew=h(ey,ef,"NUM",{[t]:!0});h(ew,ef,ew);let ek=h(ew,ed,y,{[i]:!0}),eS=h(ew,eh,b,{[a]:!0}),e_=h(ey,ed,m,{[n]:!0});h(e_,ef,ek),h(e_,ed,e_),h(ek,ef,ek),h(ek,ed,ek);let eC=h(ey,eh,g,{[r]:!0});h(eC,ed),h(eC,ef,eS),h(eC,eh,eC),h(eS,ef,eS),h(eS,ed),h(eS,eh,eS);let eA=f(ey,"\n","NL",{[l]:!0}),eE=f(ey,"\r","WS",{[l]:!0}),eT=h(ey,em,"WS",{[l]:!0});f(ey,"",eT),f(eE,"\n",eA),f(eE,"",eT),h(eE,em,eT),f(eT,"\r"),f(eT,"\n"),h(eT,em,eT),f(eT,"",eT);let eM=h(ey,ep,eu,{[s]:!0});f(eM,"#"),h(eM,ep,eM),f(eM,"",eM);let eI=f(eM,"");f(eI,"#"),h(eI,ep,eM);let eN=[[ed,e_],[ef,ek]],eD=[[ed,null],[eh,eC],[ef,eS]];for(let e=0;e<eg.length;e++)eb(ey,eg[e],"TLD",m,eN);for(let e=0;e<ev.length;e++)eb(ey,ev[e],w,g,eD);u("TLD",{tld:!0,ascii:!0},d),u(w,{utld:!0,alpha:!0},d),eb(ey,"file",k,m,eN),eb(ey,"mailto",k,m,eN),eb(ey,"http",S,m,eN),eb(ey,"https",S,m,eN),eb(ey,"ftp",S,m,eN),eb(ey,"ftps",S,m,eN),u(k,{scheme:!0,ascii:!0},d),u(S,{slashscheme:!0,ascii:!0},d),e=e.sort((e,t)=>e[0]>t[0]?1:-1);for(let r=0;r<e.length;r++){let a=e[r][0],s=e[r][1]?{scheme:!0}:{slashscheme:!0};a.indexOf("-")>=0?s[o]=!0:ed.test(a)?ef.test(a)?s[i]=!0:s[n]=!0:s[t]=!0,p(ey,a,a,s)}return p(ey,"localhost",x,{ascii:!0}),ey.jd=new c("SYM"),{start:ey,tokens:Object.assign({groups:d},ec)}}(eP.customSchemes);for(let e=0;e<eP.tokenQueue.length;e++)eP.tokenQueue[e][1]({scanner:eP.scanner});eP.parser=function(e){let{groups:t}=e,n=t.domain.concat([B,H,"AT",W,V,q,K,Y,Z,"NUM",J,Q,ee,et,eo,"SYM",es,el]),r=[U,G,$,"DOT",X,J,en,er,ea,I,N,_,C,E,A,T,M,D,P,R,O,j,F,L,z],i=[B,U,H,W,V,q,K,Y,Z,_,C,J,Q,ee,et,en,eo,"SYM",es,el],a=eI(),o=f(a,es);d(o,i,o),d(o,t.domain,o);let s=eI(),l=eI(),u=eI();d(a,t.domain,s),d(a,t.scheme,l),d(a,t.slashscheme,u),d(s,i,o),d(s,t.domain,s);let c=f(s,"AT");f(o,"AT",c),f(l,"AT",c),f(u,"AT",c);let h=f(o,"DOT");d(h,i,o),d(h,t.domain,o);let p=eI();d(c,t.domain,p),d(p,t.domain,p);let m=f(p,"DOT");d(m,t.domain,p);let g=eI(eA);d(m,t.tld,g),d(m,t.utld,g),f(c,x,g);let y=f(p,Z);f(y,Z,y),d(y,t.domain,p),d(g,t.domain,p),f(g,"DOT",m),f(g,Z,y),d(f(g,G),t.numeric,eA);let b=f(s,Z),w=f(s,"DOT");f(b,Z,b),d(b,t.domain,s),d(w,i,o),d(w,t.domain,s);let k=eI(eM);d(w,t.tld,k),d(w,t.utld,k),d(k,t.domain,s),d(k,i,o),f(k,"DOT",w),f(k,Z,b),f(k,"AT",c);let S=f(k,G),ei=eI(eM);d(S,t.numeric,ei);let eu=eI(eM),ed=eI();d(eu,n,eu),d(eu,r,ed),d(ed,n,eu),d(ed,r,ed),f(k,eo,eu),f(ei,eo,eu);let eh=f(l,G),ep=f(u,G),ef=f(ep,eo),em=f(ef,eo);d(l,t.domain,s),f(l,"DOT",w),f(l,Z,b),d(u,t.domain,s),f(u,"DOT",w),f(u,Z,b),d(eh,t.domain,eu),f(eh,eo,eu),f(eh,en,eu),d(em,t.domain,eu),d(em,n,eu),f(em,eo,eu);let eg=[[_,C],[A,E],[T,M],[I,N],[D,P],[R,O],[j,F],[L,z]];for(let e=0;e<eg.length;e++){let[t,i]=eg[e],a=f(eu,t);f(ed,t,a),f(a,i,eu);let o=eI(eM);d(a,n,o);let s=eI();d(a,r),d(o,n,o),d(o,r,s),d(s,n,o),d(s,r,s),f(o,i,eu),f(s,i,eu)}return f(a,x,k),f(a,"NL",eT),{start:a,tokens:ec}}(eP.scanner.tokens);for(let e=0;e<eP.pluginQueue.length;e++)eP.pluginQueue[e][1]({scanner:eP.scanner,parser:eP.parser});eP.initialized=!0}(),function(e,t,n){let r=n.length,i=0,a=[],o=[];for(;i<r;){let s=e,l=null,u=null,c=0,d=null,h=-1;for(;i<r&&!(l=s.go(n[i].t));)o.push(n[i++]);for(;i<r&&(u=l||s.go(n[i].t));)l=null,(s=u).accepts()?(h=0,d=s):h>=0&&h++,i++,c++;if(h<0)(i-=c)<r&&(o.push(n[i]),i++);else{o.length>0&&(a.push(eN(eE,t,o)),o=[]),i-=h,c-=h;let e=d.t,r=n.slice(i-c,i);a.push(eN(e,t,r))}}return o.length>0&&a.push(eN(eE,t,o)),a}(eP.parser.start,e,ey(eP.scanner.start,e))}function eF(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(t&&"object"==typeof t){if(n)throw Error("linkifyjs: Invalid link type ".concat(t,"; must be a string"));n=t,t=null}let r=new ek(n),i=ej(e),a=[];for(let e=0;e<i.length;e++){let n=i[e];n.isLink&&(!t||n.t===t)&&r.check(n)&&a.push(n.toFormattedObject(r))}return a}ej.scan=ey},913022:e=>{"use strict";e.s({Link:()=>u,default:()=>c});var t=e.i(691283),n=e.i(139695);e.i(131841);var r=e.i(968617),i="[\0- -\u2029]",a=new RegExp(i),o=new RegExp("".concat(i,"$")),s=RegExp(i,"g");function l(e,t){let n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return t&&t.forEach(e=>{let t="string"==typeof e?e:e.scheme;t&&n.push(t)}),!e||e.replace(s,"").match(RegExp("^(?:(?:".concat(n.join("|"),"):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))"),"i"))}var u=t.Mark.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(e=>{if("string"==typeof e)return void(0,n.registerCustomProtocol)(e);(0,n.registerCustomProtocol)(e.scheme,e.optionalSlashes)})},onDestroy(){(0,n.reset)()},inclusive(){return this.options.autolink},addOptions:()=>({openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(e,t)=>!!l(e,t.protocols),validate:e=>!!e,shouldAutoLink:e=>!!e}),addAttributes(){return{href:{default:null,parseHTML:e=>e.getAttribute("href")},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:e=>{let t=e.getAttribute("href");return!!t&&!!this.options.isAllowedUri(t,{defaultValidate:e=>!!l(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})&&null}}]},renderHTML(e){let{HTMLAttributes:n}=e;return this.options.isAllowedUri(n.href,{defaultValidate:e=>!!l(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",(0,t.mergeAttributes)(this.options.HTMLAttributes,n),0]:["a",(0,t.mergeAttributes)(this.options.HTMLAttributes,{...n,href:""}),0]},addCommands(){return{setLink:e=>t=>{let{chain:n}=t,{href:r}=e;return!!this.options.isAllowedUri(r,{defaultValidate:e=>!!l(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})&&n().setMark(this.name,e).setMeta("preventAutolink",!0).run()},toggleLink:e=>t=>{let{chain:n}=t,{href:r}=e||{};return(!r||!!this.options.isAllowedUri(r,{defaultValidate:e=>!!l(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol}))&&n().toggleMark(this.name,e,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>e=>{let{chain:t}=e;return t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}}},addPasteRules(){return[(0,t.markPasteRule)({find:e=>{let t=[];if(e){let{protocols:r,defaultProtocol:i}=this.options,a=(0,n.find)(e).filter(e=>e.isLink&&this.options.isAllowedUri(e.value,{defaultValidate:e=>!!l(e,r),protocols:r,defaultProtocol:i}));a.length&&a.forEach(e=>t.push({text:e.value,data:{href:e.href},index:e.start}))}return t},type:this.type,getAttributes:e=>{var t;return{href:null==(t=e.data)?void 0:t.href}}})]},addProseMirrorPlugins(){var e,i,s;let u=[],{protocols:c,defaultProtocol:d}=this.options;return this.options.autolink&&u.push((e={type:this.type,defaultProtocol:this.options.defaultProtocol,validate:e=>this.options.isAllowedUri(e,{defaultValidate:e=>!!l(e,c),protocols:c,defaultProtocol:d}),shouldAutoLink:this.options.shouldAutoLink},new r.Plugin({key:new r.PluginKey("autolink"),appendTransaction:(r,i,s)=>{let l=r.some(e=>e.docChanged)&&!i.doc.eq(s.doc),u=r.some(e=>e.getMeta("preventAutolink"));if(!l||u)return;let{tr:c}=s,d=(0,t.combineTransactionSteps)(i.doc,[...r]);if((0,t.getChangedRanges)(d).forEach(r=>{let i,l,{newRange:u}=r,d=(0,t.findChildrenInRange)(s.doc,u,e=>e.isTextblock);if(d.length>1)i=d[0],l=s.doc.textBetween(i.pos,i.pos+i.node.nodeSize,void 0," ");else if(d.length){let e=s.doc.textBetween(u.from,u.to," "," ");if(!o.test(e))return;i=d[0],l=s.doc.textBetween(i.pos,u.to,void 0," ")}if(i&&l){let r=l.split(a).filter(Boolean);if(r.length<=0)return!1;let o=r[r.length-1],u=i.pos+l.lastIndexOf(o);if(!o)return!1;let d=(0,n.tokenize)(o).map(t=>t.toObject(e.defaultProtocol));if(!(1===d.length?d[0].isLink:3===d.length&&!!d[1].isLink&&["()","[]"].includes(d[0].value+d[2].value)))return!1;d.filter(e=>e.isLink).map(e=>({...e,from:u+e.start+1,to:u+e.end+1})).filter(e=>!s.schema.marks.code||!s.doc.rangeHasMark(e.from,e.to,s.schema.marks.code)).filter(t=>e.validate(t.value)).filter(t=>e.shouldAutoLink(t.value)).forEach(n=>{(0,t.getMarksBetween)(n.from,n.to,s.doc).some(t=>t.mark.type===e.type)||c.addMark(n.from,n.to,e.type.create({href:n.href}))})}}),c.steps.length)return c}}))),!0===this.options.openOnClick&&u.push((i={type:this.type,editor:this.editor,enableClickSelection:this.options.enableClickSelection},new r.Plugin({key:new r.PluginKey("handleClickLink"),props:{handleClick:(e,n,r)=>{var a,o;if(0!==r.button||!e.editable)return!1;let s=null;if(r.target instanceof HTMLAnchorElement)s=r.target;else{let e=r.target,t=[];for(;"DIV"!==e.nodeName;)t.push(e),e=e.parentNode;s=t.find(e=>"A"===e.nodeName)}if(!s)return!1;let l=(0,t.getAttributes)(e.state,i.type.name),u=null!=(a=null==s?void 0:s.href)?a:l.href,c=null!=(o=null==s?void 0:s.target)?o:l.target;return i.enableClickSelection&&i.editor.commands.extendMarkRange(i.type.name),!!s&&!!u&&(window.open(u,c),!0)}}}))),this.options.linkOnPaste&&u.push((s={editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type},new r.Plugin({key:new r.PluginKey("handlePasteLink"),props:{handlePaste:(e,t,r)=>{let{state:i}=e,{selection:a}=i,{empty:o}=a;if(o)return!1;let l="";r.content.forEach(e=>{l+=e.textContent});let u=(0,n.find)(l,{defaultProtocol:s.defaultProtocol}).find(e=>e.isLink&&e.value===l);return!!l&&!!u&&s.editor.commands.setMark(s.type,{href:u.href})}}}))),u}}),c=u},606982:e=>{"use strict";e.s({Paragraph:()=>n,default:()=>r});var t=e.i(691283),n=t.Node.create({name:"paragraph",priority:1e3,addOptions:()=>({HTMLAttributes:{}}),group:"block",content:"inline*",parseHTML:()=>[{tag:"p"}],renderHTML(e){let{HTMLAttributes:n}=e;return["p",(0,t.mergeAttributes)(this.options.HTMLAttributes,n),0]},addCommands(){return{setParagraph:()=>e=>{let{commands:t}=e;return t.setNode(this.name)}}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),r=n},830384:e=>{"use strict";e.s({Strike:()=>i});var t=e.i(691283),n=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,r=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,i=t.Mark.create({name:"strike",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>!!e.includes("line-through")&&{}}],renderHTML(e){let{HTMLAttributes:n}=e;return["s",(0,t.mergeAttributes)(this.options.HTMLAttributes,n),0]},addCommands(){return{setStrike:()=>e=>{let{commands:t}=e;return t.setMark(this.name)},toggleStrike:()=>e=>{let{commands:t}=e;return t.toggleMark(this.name)},unsetStrike:()=>e=>{let{commands:t}=e;return t.unsetMark(this.name)}}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[(0,t.markInputRule)({find:n,type:this.type})]},addPasteRules(){return[(0,t.markPasteRule)({find:r,type:this.type})]}})},737137:e=>{"use strict";e.s({Text:()=>t,default:()=>n});var t=e.i(691283).Node.create({name:"text",group:"inline"}),n=t},889575:e=>{"use strict";e.s({Underline:()=>n});var t=e.i(691283),n=t.Mark.create({name:"underline",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:e=>!!e.includes("underline")&&{}}],renderHTML(e){let{HTMLAttributes:n}=e;return["u",(0,t.mergeAttributes)(this.options.HTMLAttributes,n),0]},addCommands(){return{setUnderline:()=>e=>{let{commands:t}=e;return t.setMark(this.name)},toggleUnderline:()=>e=>{let{commands:t}=e;return t.toggleMark(this.name)},unsetUnderline:()=>e=>{let{commands:t}=e;return t.unsetMark(this.name)}}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}})},28275:e=>{"use strict";e.s({default:()=>b});var t=e.i(691283),n=e.i(283638),r=e.i(459356),i=e.i(900008),a=e.i(294563),o=e.i(672614),s=e.i(309643),l=e.i(508613),u=e.i(31354),c=e.i(593658),d=e.i(913022),h=e.i(429771),p=e.i(606982),f=e.i(830384),m=e.i(737137),g=e.i(889575),y=e.i(604663),b=t.Extension.create({name:"starterKit",addExtensions(){var e,t,b,x;let w=[];return!1!==this.options.bold&&w.push(r.Bold.configure(this.options.bold)),!1!==this.options.blockquote&&w.push(n.Blockquote.configure(this.options.blockquote)),!1!==this.options.bulletList&&w.push(h.BulletList.configure(this.options.bulletList)),!1!==this.options.code&&w.push(i.Code.configure(this.options.code)),!1!==this.options.codeBlock&&w.push(a.CodeBlock.configure(this.options.codeBlock)),!1!==this.options.document&&w.push(o.Document.configure(this.options.document)),!1!==this.options.dropcursor&&w.push(y.Dropcursor.configure(this.options.dropcursor)),!1!==this.options.gapcursor&&w.push(y.Gapcursor.configure(this.options.gapcursor)),!1!==this.options.hardBreak&&w.push(s.HardBreak.configure(this.options.hardBreak)),!1!==this.options.heading&&w.push(l.Heading.configure(this.options.heading)),!1!==this.options.undoRedo&&w.push(y.UndoRedo.configure(this.options.undoRedo)),!1!==this.options.horizontalRule&&w.push(u.HorizontalRule.configure(this.options.horizontalRule)),!1!==this.options.italic&&w.push(c.Italic.configure(this.options.italic)),!1!==this.options.listItem&&w.push(h.ListItem.configure(this.options.listItem)),!1!==this.options.listKeymap&&w.push(h.ListKeymap.configure(null==(e=this.options)?void 0:e.listKeymap)),!1!==this.options.link&&w.push(d.Link.configure(null==(t=this.options)?void 0:t.link)),!1!==this.options.orderedList&&w.push(h.OrderedList.configure(this.options.orderedList)),!1!==this.options.paragraph&&w.push(p.Paragraph.configure(this.options.paragraph)),!1!==this.options.strike&&w.push(f.Strike.configure(this.options.strike)),!1!==this.options.text&&w.push(m.Text.configure(this.options.text)),!1!==this.options.underline&&w.push(g.Underline.configure(null==(b=this.options)?void 0:b.underline)),!1!==this.options.trailingNode&&w.push(y.TrailingNode.configure(null==(x=this.options)?void 0:x.trailingNode)),w}})},156387:e=>{"use strict";e.s({bundledThemes:()=>t});let t=Object.fromEntries([{id:"andromeeda",displayName:"Andromeeda",type:"dark",import:()=>e.r(845021)(e.i)},{id:"aurora-x",displayName:"Aurora X",type:"dark",import:()=>e.r(777350)(e.i)},{id:"ayu-dark",displayName:"Ayu Dark",type:"dark",import:()=>e.r(268434)(e.i)},{id:"catppuccin-frappe",displayName:"Catppuccin Frapp",type:"dark",import:()=>e.r(678394)(e.i)},{id:"catppuccin-latte",displayName:"Catppuccin Latte",type:"light",import:()=>e.r(215490)(e.i)},{id:"catppuccin-macchiato",displayName:"Catppuccin Macchiato",type:"dark",import:()=>e.r(82294)(e.i)},{id:"catppuccin-mocha",displayName:"Catppuccin Mocha",type:"dark",import:()=>e.r(269536)(e.i)},{id:"dark-plus",displayName:"Dark Plus",type:"dark",import:()=>e.r(187185)(e.i)},{id:"dracula",displayName:"Dracula Theme",type:"dark",import:()=>e.r(227751)(e.i)},{id:"dracula-soft",displayName:"Dracula Theme Soft",type:"dark",import:()=>e.r(471285)(e.i)},{id:"everforest-dark",displayName:"Everforest Dark",type:"dark",import:()=>e.r(586029)(e.i)},{id:"everforest-light",displayName:"Everforest Light",type:"light",import:()=>e.r(303130)(e.i)},{id:"github-dark",displayName:"GitHub Dark",type:"dark",import:()=>e.r(489738)(e.i)},{id:"github-dark-default",displayName:"GitHub Dark Default",type:"dark",import:()=>e.r(803611)(e.i)},{id:"github-dark-dimmed",displayName:"GitHub Dark Dimmed",type:"dark",import:()=>e.r(872369)(e.i)},{id:"github-dark-high-contrast",displayName:"GitHub Dark High Contrast",type:"dark",import:()=>e.r(834080)(e.i)},{id:"github-light",displayName:"GitHub Light",type:"light",import:()=>e.r(124285)(e.i)},{id:"github-light-default",displayName:"GitHub Light Default",type:"light",import:()=>e.r(53588)(e.i)},{id:"github-light-high-contrast",displayName:"GitHub Light High Contrast",type:"light",import:()=>e.r(341374)(e.i)},{id:"gruvbox-dark-hard",displayName:"Gruvbox Dark Hard",type:"dark",import:()=>e.r(245137)(e.i)},{id:"gruvbox-dark-medium",displayName:"Gruvbox Dark Medium",type:"dark",import:()=>e.r(885710)(e.i)},{id:"gruvbox-dark-soft",displayName:"Gruvbox Dark Soft",type:"dark",import:()=>e.r(804658)(e.i)},{id:"gruvbox-light-hard",displayName:"Gruvbox Light Hard",type:"light",import:()=>e.r(615766)(e.i)},{id:"gruvbox-light-medium",displayName:"Gruvbox Light Medium",type:"light",import:()=>e.r(47575)(e.i)},{id:"gruvbox-light-soft",displayName:"Gruvbox Light Soft",type:"light",import:()=>e.r(995123)(e.i)},{id:"houston",displayName:"Houston",type:"dark",import:()=>e.r(868246)(e.i)},{id:"kanagawa-dragon",displayName:"Kanagawa Dragon",type:"dark",import:()=>e.r(115328)(e.i)},{id:"kanagawa-lotus",displayName:"Kanagawa Lotus",type:"light",import:()=>e.r(493074)(e.i)},{id:"kanagawa-wave",displayName:"Kanagawa Wave",type:"dark",import:()=>e.r(221209)(e.i)},{id:"laserwave",displayName:"LaserWave",type:"dark",import:()=>e.r(615253)(e.i)},{id:"light-plus",displayName:"Light Plus",type:"light",import:()=>e.r(383341)(e.i)},{id:"material-theme",displayName:"Material Theme",type:"dark",import:()=>e.r(550670)(e.i)},{id:"material-theme-darker",displayName:"Material Theme Darker",type:"dark",import:()=>e.r(967686)(e.i)},{id:"material-theme-lighter",displayName:"Material Theme Lighter",type:"light",import:()=>e.r(722640)(e.i)},{id:"material-theme-ocean",displayName:"Material Theme Ocean",type:"dark",import:()=>e.r(802950)(e.i)},{id:"material-theme-palenight",displayName:"Material Theme Palenight",type:"dark",import:()=>e.r(33857)(e.i)},{id:"min-dark",displayName:"Min Dark",type:"dark",import:()=>e.r(688324)(e.i)},{id:"min-light",displayName:"Min Light",type:"light",import:()=>e.r(536794)(e.i)},{id:"monokai",displayName:"Monokai",type:"dark",import:()=>e.r(42538)(e.i)},{id:"night-owl",displayName:"Night Owl",type:"dark",import:()=>e.r(531754)(e.i)},{id:"nord",displayName:"Nord",type:"dark",import:()=>e.r(728454)(e.i)},{id:"one-dark-pro",displayName:"One Dark Pro",type:"dark",import:()=>e.r(701434)(e.i)},{id:"one-light",displayName:"One Light",type:"light",import:()=>e.r(771476)(e.i)},{id:"plastic",displayName:"Plastic",type:"dark",import:()=>e.r(364442)(e.i)},{id:"poimandres",displayName:"Poimandres",type:"dark",import:()=>e.r(52601)(e.i)},{id:"red",displayName:"Red",type:"dark",import:()=>e.r(842869)(e.i)},{id:"rose-pine",displayName:"Ros Pine",type:"dark",import:()=>e.r(603653)(e.i)},{id:"rose-pine-dawn",displayName:"Ros Pine Dawn",type:"light",import:()=>e.r(816687)(e.i)},{id:"rose-pine-moon",displayName:"Ros Pine Moon",type:"dark",import:()=>e.r(336111)(e.i)},{id:"slack-dark",displayName:"Slack Dark",type:"dark",import:()=>e.r(610488)(e.i)},{id:"slack-ochin",displayName:"Slack Ochin",type:"light",import:()=>e.r(235657)(e.i)},{id:"snazzy-light",displayName:"Snazzy Light",type:"light",import:()=>e.r(389158)(e.i)},{id:"solarized-dark",displayName:"Solarized Dark",type:"dark",import:()=>e.r(791012)(e.i)},{id:"solarized-light",displayName:"Solarized Light",type:"light",import:()=>e.r(185143)(e.i)},{id:"synthwave-84",displayName:"Synthwave '84",type:"dark",import:()=>e.r(672704)(e.i)},{id:"tokyo-night",displayName:"Tokyo Night",type:"dark",import:()=>e.r(625569)(e.i)},{id:"vesper",displayName:"Vesper",type:"dark",import:()=>e.r(975348)(e.i)},{id:"vitesse-black",displayName:"Vitesse Black",type:"dark",import:()=>e.r(327734)(e.i)},{id:"vitesse-dark",displayName:"Vitesse Dark",type:"dark",import:()=>e.r(76540)(e.i)},{id:"vitesse-light",displayName:"Vitesse Light",type:"light",import:()=>e.r(887363)(e.i)}].map(e=>[e.id,e.import]))},168054:e=>{"use strict";e.s({bundledLanguages:()=>i});let t=[{id:"abap",name:"ABAP",import:()=>e.r(803240)(e.i)},{id:"actionscript-3",name:"ActionScript",import:()=>e.r(332755)(e.i)},{id:"ada",name:"Ada",import:()=>e.r(475876)(e.i)},{id:"angular-html",name:"Angular HTML",import:()=>e.r(971555)(e.i)},{id:"angular-ts",name:"Angular TypeScript",import:()=>e.r(874203)(e.i)},{id:"apache",name:"Apache Conf",import:()=>e.r(660772)(e.i)},{id:"apex",name:"Apex",import:()=>e.r(893781)(e.i)},{id:"apl",name:"APL",import:()=>e.r(638859)(e.i)},{id:"applescript",name:"AppleScript",import:()=>e.r(226435)(e.i)},{id:"ara",name:"Ara",import:()=>e.r(907680)(e.i)},{id:"asciidoc",name:"AsciiDoc",aliases:["adoc"],import:()=>e.r(660870)(e.i)},{id:"asm",name:"Assembly",import:()=>e.r(892033)(e.i)},{id:"astro",name:"Astro",import:()=>e.r(23950)(e.i)},{id:"awk",name:"AWK",import:()=>e.r(568157)(e.i)},{id:"ballerina",name:"Ballerina",import:()=>e.r(760964)(e.i)},{id:"bat",name:"Batch File",aliases:["batch"],import:()=>e.r(413679)(e.i)},{id:"beancount",name:"Beancount",import:()=>e.r(983398)(e.i)},{id:"berry",name:"Berry",aliases:["be"],import:()=>e.r(807062)(e.i)},{id:"bibtex",name:"BibTeX",import:()=>e.r(653956)(e.i)},{id:"bicep",name:"Bicep",import:()=>e.r(948242)(e.i)},{id:"blade",name:"Blade",import:()=>e.r(969300)(e.i)},{id:"bsl",name:"1C (Enterprise)",aliases:["1c"],import:()=>e.r(610916)(e.i)},{id:"c",name:"C",import:()=>e.r(997357)(e.i)},{id:"cadence",name:"Cadence",aliases:["cdc"],import:()=>e.r(863764)(e.i)},{id:"cairo",name:"Cairo",import:()=>e.r(63458)(e.i)},{id:"clarity",name:"Clarity",import:()=>e.r(533010)(e.i)},{id:"clojure",name:"Clojure",aliases:["clj"],import:()=>e.r(221020)(e.i)},{id:"cmake",name:"CMake",import:()=>e.r(303138)(e.i)},{id:"cobol",name:"COBOL",import:()=>e.r(929096)(e.i)},{id:"codeowners",name:"CODEOWNERS",import:()=>e.r(242037)(e.i)},{id:"codeql",name:"CodeQL",aliases:["ql"],import:()=>e.r(616768)(e.i)},{id:"coffee",name:"CoffeeScript",aliases:["coffeescript"],import:()=>e.r(682497)(e.i)},{id:"common-lisp",name:"Common Lisp",aliases:["lisp"],import:()=>e.r(147489)(e.i)},{id:"coq",name:"Coq",import:()=>e.r(542117)(e.i)},{id:"cpp",name:"C++",aliases:["c++"],import:()=>e.r(538479)(e.i)},{id:"crystal",name:"Crystal",import:()=>e.r(987492)(e.i)},{id:"csharp",name:"C#",aliases:["c#","cs"],import:()=>e.r(651191)(e.i)},{id:"css",name:"CSS",import:()=>e.r(315877)(e.i)},{id:"csv",name:"CSV",import:()=>e.r(646854)(e.i)},{id:"cue",name:"CUE",import:()=>e.r(455700)(e.i)},{id:"cypher",name:"Cypher",aliases:["cql"],import:()=>e.r(115470)(e.i)},{id:"d",name:"D",import:()=>e.r(779170)(e.i)},{id:"dart",name:"Dart",import:()=>e.r(465259)(e.i)},{id:"dax",name:"DAX",import:()=>e.r(921726)(e.i)},{id:"desktop",name:"Desktop",import:()=>e.r(12766)(e.i)},{id:"diff",name:"Diff",import:()=>e.r(742477)(e.i)},{id:"docker",name:"Dockerfile",aliases:["dockerfile"],import:()=>e.r(305446)(e.i)},{id:"dotenv",name:"dotEnv",import:()=>e.r(136116)(e.i)},{id:"dream-maker",name:"Dream Maker",import:()=>e.r(705306)(e.i)},{id:"edge",name:"Edge",import:()=>e.r(633038)(e.i)},{id:"elixir",name:"Elixir",import:()=>e.r(332325)(e.i)},{id:"elm",name:"Elm",import:()=>e.r(444005)(e.i)},{id:"emacs-lisp",name:"Emacs Lisp",aliases:["elisp"],import:()=>e.r(393805)(e.i)},{id:"erb",name:"ERB",import:()=>e.r(455182)(e.i)},{id:"erlang",name:"Erlang",aliases:["erl"],import:()=>e.r(114311)(e.i)},{id:"fennel",name:"Fennel",import:()=>e.r(648956)(e.i)},{id:"fish",name:"Fish",import:()=>e.r(197954)(e.i)},{id:"fluent",name:"Fluent",aliases:["ftl"],import:()=>e.r(161563)(e.i)},{id:"fortran-fixed-form",name:"Fortran (Fixed Form)",aliases:["f","for","f77"],import:()=>e.r(841162)(e.i)},{id:"fortran-free-form",name:"Fortran (Free Form)",aliases:["f90","f95","f03","f08","f18"],import:()=>e.r(578443)(e.i)},{id:"fsharp",name:"F#",aliases:["f#","fs"],import:()=>e.r(208353)(e.i)},{id:"gdresource",name:"GDResource",import:()=>e.r(493580)(e.i)},{id:"gdscript",name:"GDScript",import:()=>e.r(577639)(e.i)},{id:"gdshader",name:"GDShader",import:()=>e.r(958646)(e.i)},{id:"genie",name:"Genie",import:()=>e.r(326616)(e.i)},{id:"gherkin",name:"Gherkin",import:()=>e.r(12554)(e.i)},{id:"git-commit",name:"Git Commit Message",import:()=>e.r(226566)(e.i)},{id:"git-rebase",name:"Git Rebase Message",import:()=>e.r(656346)(e.i)},{id:"gleam",name:"Gleam",import:()=>e.r(566710)(e.i)},{id:"glimmer-js",name:"Glimmer JS",aliases:["gjs"],import:()=>e.r(953700)(e.i)},{id:"glimmer-ts",name:"Glimmer TS",aliases:["gts"],import:()=>e.r(834595)(e.i)},{id:"glsl",name:"GLSL",import:()=>e.r(986375)(e.i)},{id:"gnuplot",name:"Gnuplot",import:()=>e.r(705698)(e.i)},{id:"go",name:"Go",import:()=>e.r(554849)(e.i)},{id:"graphql",name:"GraphQL",aliases:["gql"],import:()=>e.r(178003)(e.i)},{id:"groovy",name:"Groovy",import:()=>e.r(144872)(e.i)},{id:"hack",name:"Hack",import:()=>e.r(871116)(e.i)},{id:"haml",name:"Ruby Haml",import:()=>e.r(653987)(e.i)},{id:"handlebars",name:"Handlebars",aliases:["hbs"],import:()=>e.r(244940)(e.i)},{id:"haskell",name:"Haskell",aliases:["hs"],import:()=>e.r(351875)(e.i)},{id:"haxe",name:"Haxe",import:()=>e.r(467608)(e.i)},{id:"hcl",name:"HashiCorp HCL",import:()=>e.r(876007)(e.i)},{id:"hjson",name:"Hjson",import:()=>e.r(214192)(e.i)},{id:"hlsl",name:"HLSL",import:()=>e.r(151461)(e.i)},{id:"html",name:"HTML",import:()=>e.r(659114)(e.i)},{id:"html-derivative",name:"HTML (Derivative)",import:()=>e.r(770625)(e.i)},{id:"http",name:"HTTP",import:()=>e.r(547676)(e.i)},{id:"hxml",name:"HXML",import:()=>e.r(768983)(e.i)},{id:"hy",name:"Hy",import:()=>e.r(163790)(e.i)},{id:"imba",name:"Imba",import:()=>e.r(827566)(e.i)},{id:"ini",name:"INI",aliases:["properties"],import:()=>e.r(310135)(e.i)},{id:"java",name:"Java",import:()=>e.r(938983)(e.i)},{id:"javascript",name:"JavaScript",aliases:["js"],import:()=>e.r(992060)(e.i)},{id:"jinja",name:"Jinja",import:()=>e.r(77126)(e.i)},{id:"jison",name:"Jison",import:()=>e.r(594215)(e.i)},{id:"json",name:"JSON",import:()=>e.r(376215)(e.i)},{id:"json5",name:"JSON5",import:()=>e.r(704183)(e.i)},{id:"jsonc",name:"JSON with Comments",import:()=>e.r(809992)(e.i)},{id:"jsonl",name:"JSON Lines",import:()=>e.r(619652)(e.i)},{id:"jsonnet",name:"Jsonnet",import:()=>e.r(248305)(e.i)},{id:"jssm",name:"JSSM",aliases:["fsl"],import:()=>e.r(1545)(e.i)},{id:"jsx",name:"JSX",import:()=>e.r(849414)(e.i)},{id:"julia",name:"Julia",aliases:["jl"],import:()=>e.r(937202)(e.i)},{id:"kotlin",name:"Kotlin",aliases:["kt","kts"],import:()=>e.r(546954)(e.i)},{id:"kusto",name:"Kusto",aliases:["kql"],import:()=>e.r(99756)(e.i)},{id:"latex",name:"LaTeX",import:()=>e.r(368630)(e.i)},{id:"lean",name:"Lean 4",aliases:["lean4"],import:()=>e.r(801321)(e.i)},{id:"less",name:"Less",import:()=>e.r(418416)(e.i)},{id:"liquid",name:"Liquid",import:()=>e.r(345334)(e.i)},{id:"llvm",name:"LLVM IR",import:()=>e.r(229911)(e.i)},{id:"log",name:"Log file",import:()=>e.r(76190)(e.i)},{id:"logo",name:"Logo",import:()=>e.r(369544)(e.i)},{id:"lua",name:"Lua",import:()=>e.r(284193)(e.i)},{id:"luau",name:"Luau",import:()=>e.r(695606)(e.i)},{id:"make",name:"Makefile",aliases:["makefile"],import:()=>e.r(301549)(e.i)},{id:"markdown",name:"Markdown",aliases:["md"],import:()=>e.r(374959)(e.i)},{id:"marko",name:"Marko",import:()=>e.r(368543)(e.i)},{id:"matlab",name:"MATLAB",import:()=>e.r(717670)(e.i)},{id:"mdc",name:"MDC",import:()=>e.r(201428)(e.i)},{id:"mdx",name:"MDX",import:()=>e.r(76259)(e.i)},{id:"mermaid",name:"Mermaid",aliases:["mmd"],import:()=>e.r(906720)(e.i)},{id:"mipsasm",name:"MIPS Assembly",aliases:["mips"],import:()=>e.r(831284)(e.i)},{id:"mojo",name:"Mojo",import:()=>e.r(511275)(e.i)},{id:"move",name:"Move",import:()=>e.r(148093)(e.i)},{id:"narrat",name:"Narrat Language",aliases:["nar"],import:()=>e.r(520173)(e.i)},{id:"nextflow",name:"Nextflow",aliases:["nf"],import:()=>e.r(281411)(e.i)},{id:"nginx",name:"Nginx",import:()=>e.r(106806)(e.i)},{id:"nim",name:"Nim",import:()=>e.r(890077)(e.i)},{id:"nix",name:"Nix",import:()=>e.r(217832)(e.i)},{id:"nushell",name:"nushell",aliases:["nu"],import:()=>e.r(40384)(e.i)},{id:"objective-c",name:"Objective-C",aliases:["objc"],import:()=>e.r(613415)(e.i)},{id:"objective-cpp",name:"Objective-C++",import:()=>e.r(760716)(e.i)},{id:"ocaml",name:"OCaml",import:()=>e.r(956162)(e.i)},{id:"pascal",name:"Pascal",import:()=>e.r(349559)(e.i)},{id:"perl",name:"Perl",import:()=>e.r(913073)(e.i)},{id:"php",name:"PHP",import:()=>e.r(838096)(e.i)},{id:"plsql",name:"PL/SQL",import:()=>e.r(316224)(e.i)},{id:"po",name:"Gettext PO",aliases:["pot","potx"],import:()=>e.r(123691)(e.i)},{id:"polar",name:"Polar",import:()=>e.r(269766)(e.i)},{id:"postcss",name:"PostCSS",import:()=>e.r(597365)(e.i)},{id:"powerquery",name:"PowerQuery",import:()=>e.r(424884)(e.i)},{id:"powershell",name:"PowerShell",aliases:["ps","ps1"],import:()=>e.r(440141)(e.i)},{id:"prisma",name:"Prisma",import:()=>e.r(910530)(e.i)},{id:"prolog",name:"Prolog",import:()=>e.r(999119)(e.i)},{id:"proto",name:"Protocol Buffer 3",aliases:["protobuf"],import:()=>e.r(277760)(e.i)},{id:"pug",name:"Pug",aliases:["jade"],import:()=>e.r(783014)(e.i)},{id:"puppet",name:"Puppet",import:()=>e.r(869069)(e.i)},{id:"purescript",name:"PureScript",import:()=>e.r(435824)(e.i)},{id:"python",name:"Python",aliases:["py"],import:()=>e.r(361373)(e.i)},{id:"qml",name:"QML",import:()=>e.r(273202)(e.i)},{id:"qmldir",name:"QML Directory",import:()=>e.r(955002)(e.i)},{id:"qss",name:"Qt Style Sheets",import:()=>e.r(891030)(e.i)},{id:"r",name:"R",import:()=>e.r(920065)(e.i)},{id:"racket",name:"Racket",import:()=>e.r(835895)(e.i)},{id:"raku",name:"Raku",aliases:["perl6"],import:()=>e.r(487210)(e.i)},{id:"razor",name:"ASP.NET Razor",import:()=>e.r(503572)(e.i)},{id:"reg",name:"Windows Registry Script",import:()=>e.r(845371)(e.i)},{id:"regexp",name:"RegExp",aliases:["regex"],import:()=>e.r(887411)(e.i)},{id:"rel",name:"Rel",import:()=>e.r(121886)(e.i)},{id:"riscv",name:"RISC-V",import:()=>e.r(192876)(e.i)},{id:"rst",name:"reStructuredText",import:()=>e.r(489067)(e.i)},{id:"ruby",name:"Ruby",aliases:["rb"],import:()=>e.r(35e3)(e.i)},{id:"rust",name:"Rust",aliases:["rs"],import:()=>e.r(330444)(e.i)},{id:"sas",name:"SAS",import:()=>e.r(883903)(e.i)},{id:"sass",name:"Sass",import:()=>e.r(368394)(e.i)},{id:"scala",name:"Scala",import:()=>e.r(259812)(e.i)},{id:"scheme",name:"Scheme",import:()=>e.r(639111)(e.i)},{id:"scss",name:"SCSS",import:()=>e.r(497046)(e.i)},{id:"sdbl",name:"1C (Query)",aliases:["1c-query"],import:()=>e.r(121701)(e.i)},{id:"shaderlab",name:"ShaderLab",aliases:["shader"],import:()=>e.r(344610)(e.i)},{id:"shellscript",name:"Shell",aliases:["bash","sh","shell","zsh"],import:()=>e.r(508734)(e.i)},{id:"shellsession",name:"Shell Session",aliases:["console"],import:()=>e.r(12561)(e.i)},{id:"smalltalk",name:"Smalltalk",import:()=>e.r(426530)(e.i)},{id:"solidity",name:"Solidity",import:()=>e.r(762979)(e.i)},{id:"soy",name:"Closure Templates",aliases:["closure-templates"],import:()=>e.r(443227)(e.i)},{id:"sparql",name:"SPARQL",import:()=>e.r(674435)(e.i)},{id:"splunk",name:"Splunk Query Language",aliases:["spl"],import:()=>e.r(661418)(e.i)},{id:"sql",name:"SQL",import:()=>e.r(975269)(e.i)},{id:"ssh-config",name:"SSH Config",import:()=>e.r(936503)(e.i)},{id:"stata",name:"Stata",import:()=>e.r(708200)(e.i)},{id:"stylus",name:"Stylus",aliases:["styl"],import:()=>e.r(343508)(e.i)},{id:"svelte",name:"Svelte",import:()=>e.r(975874)(e.i)},{id:"swift",name:"Swift",import:()=>e.r(560899)(e.i)},{id:"system-verilog",name:"SystemVerilog",import:()=>e.r(29785)(e.i)},{id:"systemd",name:"Systemd Units",import:()=>e.r(682051)(e.i)},{id:"talonscript",name:"TalonScript",aliases:["talon"],import:()=>e.r(743725)(e.i)},{id:"tasl",name:"Tasl",import:()=>e.r(435801)(e.i)},{id:"tcl",name:"Tcl",import:()=>e.r(456332)(e.i)},{id:"templ",name:"Templ",import:()=>e.r(499507)(e.i)},{id:"terraform",name:"Terraform",aliases:["tf","tfvars"],import:()=>e.r(772910)(e.i)},{id:"tex",name:"TeX",import:()=>e.r(587808)(e.i)},{id:"toml",name:"TOML",import:()=>e.r(370861)(e.i)},{id:"ts-tags",name:"TypeScript with Tags",aliases:["lit"],import:()=>e.r(598578)(e.i)},{id:"tsv",name:"TSV",import:()=>e.r(481809)(e.i)},{id:"tsx",name:"TSX",import:()=>e.r(101708)(e.i)},{id:"turtle",name:"Turtle",import:()=>e.r(980152)(e.i)},{id:"twig",name:"Twig",import:()=>e.r(850664)(e.i)},{id:"typescript",name:"TypeScript",aliases:["ts"],import:()=>e.r(765625)(e.i)},{id:"typespec",name:"TypeSpec",aliases:["tsp"],import:()=>e.r(30424)(e.i)},{id:"typst",name:"Typst",aliases:["typ"],import:()=>e.r(902693)(e.i)},{id:"v",name:"V",import:()=>e.r(626012)(e.i)},{id:"vala",name:"Vala",import:()=>e.r(327423)(e.i)},{id:"vb",name:"Visual Basic",aliases:["cmd"],import:()=>e.r(103421)(e.i)},{id:"verilog",name:"Verilog",import:()=>e.r(618845)(e.i)},{id:"vhdl",name:"VHDL",import:()=>e.r(239096)(e.i)},{id:"viml",name:"Vim Script",aliases:["vim","vimscript"],import:()=>e.r(397193)(e.i)},{id:"vue",name:"Vue",import:()=>e.r(527963)(e.i)},{id:"vue-html",name:"Vue HTML",import:()=>e.r(511919)(e.i)},{id:"vue-vine",name:"Vue Vine",import:()=>e.r(819066)(e.i)},{id:"vyper",name:"Vyper",aliases:["vy"],import:()=>e.r(403869)(e.i)},{id:"wasm",name:"WebAssembly",import:()=>e.r(105949)(e.i)},{id:"wenyan",name:"Wenyan",aliases:[""],import:()=>e.r(495737)(e.i)},{id:"wgsl",name:"WGSL",import:()=>e.r(540387)(e.i)},{id:"wikitext",name:"Wikitext",aliases:["mediawiki","wiki"],import:()=>e.r(764305)(e.i)},{id:"wit",name:"WebAssembly Interface Types",import:()=>e.r(151696)(e.i)},{id:"wolfram",name:"Wolfram",aliases:["wl"],import:()=>e.r(101767)(e.i)},{id:"xml",name:"XML",import:()=>e.r(285708)(e.i)},{id:"xsl",name:"XSL",import:()=>e.r(526067)(e.i)},{id:"yaml",name:"YAML",aliases:["yml"],import:()=>e.r(808290)(e.i)},{id:"zenscript",name:"ZenScript",import:()=>e.r(856993)(e.i)},{id:"zig",name:"Zig",import:()=>e.r(620190)(e.i)}],n=Object.fromEntries(t.map(e=>[e.id,e.import])),r=Object.fromEntries(t.flatMap(e=>{var t;return(null==(t=e.aliases)?void 0:t.map(t=>[t,e.import]))||[]})),i={...n,...r}},399333:e=>{"use strict";e.s({ShikiError:()=>t});class t extends Error{constructor(e){super(e),this.name="ShikiError"}}},591145:e=>{"use strict";e.s({EncodedTokenMetadata:()=>k,FontStyle:()=>g,INITIAL:()=>eg,Registry:()=>em,Theme:()=>h});var t,n,r=e.i(227541),i=e.i(11968);function a(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.forEach(t=>{for(let n in t)e[n]=t[n]}),e}var o=/\$(\d+)|\${(\d+):\/(downcase|upcase)}/g,s=class{static hasCaptures(e){return null!==e&&(o.lastIndex=0,o.test(e))}static replaceCaptures(e,t,n){return e.replace(o,(e,r,i,a)=>{let o=n[parseInt(r||i,10)];if(!o)return e;{let e=t.substring(o.start,o.end);for(;"."===e[0];)e=e.substring(1);switch(a){case"downcase":return e.toLowerCase();case"upcase":return e.toUpperCase();default:return e}}})}};function l(e,t){if(null===e&&null===t)return 0;if(!e)return -1;if(!t)return 1;let n=e.length,r=t.length;if(n===r){for(let r=0;r<n;r++){var i,a;let n=(i=e[r],i<(a=t[r])?-1:+(i>a));if(0!==n)return n}return 0}return n-r}function u(e){return!!(/^#[0-9a-f]{6}$/i.test(e)||/^#[0-9a-f]{8}$/i.test(e)||/^#[0-9a-f]{3}$/i.test(e)||/^#[0-9a-f]{4}$/i.test(e))}function c(e){return e.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")}var d=class{get(e){if(this.cache.has(e))return this.cache.get(e);let t=this.fn(e);return this.cache.set(e,t),t}constructor(e){(0,i._)(this,"cache",new Map),this.fn=e}},h=class{static createFromRawTheme(e,t){return this.createFromParsedTheme(function(e){if(!e||!e.settings||!Array.isArray(e.settings))return[];let t=e.settings,n=[],r=0;for(let e=0,i=t.length;e<i;e++){let i,a=t[e];if(!a.settings)continue;if("string"==typeof a.scope){let e=a.scope;i=(e=(e=e.replace(/^[,]+/,"")).replace(/[,]+$/,"")).split(",")}else i=Array.isArray(a.scope)?a.scope:[""];let o=-1;if("string"==typeof a.settings.fontStyle){o=0;let e=a.settings.fontStyle.split(" ");for(let t=0,n=e.length;t<n;t++)switch(e[t]){case"italic":o|=1;break;case"bold":o|=2;break;case"underline":o|=4;break;case"strikethrough":o|=8}}let s=null;"string"==typeof a.settings.foreground&&u(a.settings.foreground)&&(s=a.settings.foreground);let l=null;"string"==typeof a.settings.background&&u(a.settings.background)&&(l=a.settings.background);for(let t=0,a=i.length;t<a;t++){let a=i[t].trim().split(" "),u=a[a.length-1],c=null;a.length>1&&(c=a.slice(0,a.length-1)).reverse(),n[r++]=new m(u,c,e,o,s,l)}}return n}(e),t)}static createFromParsedTheme(e,t){return function(e,t){e.sort((e,t)=>{var n,r;let i=(n=e.scope,n<(r=t.scope)?-1:+(n>r));return 0!==i||0!==(i=l(e.parentScopes,t.parentScopes))?i:e.index-t.index});let n=0,r="#000000",i="#ffffff";for(;e.length>=1&&""===e[0].scope;){let t=e.shift();-1!==t.fontStyle&&(n=t.fontStyle),null!==t.foreground&&(r=t.foreground),null!==t.background&&(i=t.background)}let a=new y(t),o=new f(n,a.getId(r),a.getId(i)),s=new w(new x(0,null,-1,0,0),[]);for(let t=0,n=e.length;t<n;t++){let n=e[t];s.insert(0,n.scope,n.parentScopes,n.fontStyle,a.getId(n.foreground),a.getId(n.background))}return new h(a,o,s)}(e,t)}getColorMap(){return this._colorMap.getColorMap()}getDefaults(){return this._defaults}match(e){if(null===e)return this._defaults;let t=e.scopeName,n=this._cachedMatchRoot.get(t).find(t=>(function(e,t){if(0===t.length)return!0;for(let i=0;i<t.length;i++){var n,r;let a=t[i],o=!1;if(">"===a){if(i===t.length-1)return!1;a=t[++i],o=!0}for(;e&&(n=e.scopeName,!((r=a)===n||n.startsWith(r)&&"."===n[r.length]));){if(o)return!1;e=e.parent}if(!e)return!1;e=e.parent}return!0})(e.parent,t.parentScopes));return n?new f(n.fontStyle,n.foreground,n.background):null}constructor(e,t,n){(0,i._)(this,"_cachedMatchRoot",new d(e=>this._root.match(e))),this._colorMap=e,this._defaults=t,this._root=n}},p=class e{static push(t,n){for(let r of n)t=new e(t,r);return t}static from(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];let i=null;for(let t=0;t<n.length;t++)i=new e(i,n[t]);return i}push(t){return new e(this,t)}getSegments(){let e=this,t=[];for(;e;)t.push(e.scopeName),e=e.parent;return t.reverse(),t}toString(){return this.getSegments().join(" ")}extends(e){return this===e||null!==this.parent&&this.parent.extends(e)}getExtensionIfDefined(e){let t=[],n=this;for(;n&&n!==e;)t.push(n.scopeName),n=n.parent;return n===e?t.reverse():void 0}constructor(e,t){this.parent=e,this.scopeName=t}},f=class{constructor(e,t,n){this.fontStyle=e,this.foregroundId=t,this.backgroundId=n}},m=class{constructor(e,t,n,r,i,a){this.scope=e,this.parentScopes=t,this.index=n,this.fontStyle=r,this.foreground=i,this.background=a}},g=(e=>(e[e.NotSet=-1]="NotSet",e[e.None=0]="None",e[e.Italic=1]="Italic",e[e.Bold=2]="Bold",e[e.Underline=4]="Underline",e[e.Strikethrough=8]="Strikethrough",e))(g||{}),y=class{getId(e){if(null===e)return 0;e=e.toUpperCase();let t=this._color2id[e];if(t)return t;if(this._isFrozen)throw Error("Missing color in color map - ".concat(e));return t=++this._lastColorId,this._color2id[e]=t,this._id2color[t]=e,t}getColorMap(){return this._id2color.slice(0)}constructor(e){if((0,i._)(this,"_isFrozen",void 0),(0,i._)(this,"_lastColorId",void 0),(0,i._)(this,"_id2color",void 0),(0,i._)(this,"_color2id",void 0),this._lastColorId=0,this._id2color=[],this._color2id=Object.create(null),Array.isArray(e)){this._isFrozen=!0;for(let t=0,n=e.length;t<n;t++)this._color2id[e[t]]=t,this._id2color[t]=e[t]}else this._isFrozen=!1}},b=Object.freeze([]),x=class e{clone(){return new e(this.scopeDepth,this.parentScopes,this.fontStyle,this.foreground,this.background)}static cloneArr(e){let t=[];for(let n=0,r=e.length;n<r;n++)t[n]=e[n].clone();return t}acceptOverwrite(e,t,n,r){this.scopeDepth>e?console.log("how did this happen?"):this.scopeDepth=e,-1!==t&&(this.fontStyle=t),0!==n&&(this.foreground=n),0!==r&&(this.background=r)}constructor(e,t,n,r,a){(0,i._)(this,"scopeDepth",void 0),(0,i._)(this,"parentScopes",void 0),(0,i._)(this,"fontStyle",void 0),(0,i._)(this,"foreground",void 0),(0,i._)(this,"background",void 0),this.scopeDepth=e,this.parentScopes=t||b,this.fontStyle=n,this.foreground=r,this.background=a}},w=class e{static _cmpBySpecificity(e,t){if(e.scopeDepth!==t.scopeDepth)return t.scopeDepth-e.scopeDepth;let n=0,r=0;for(;">"===e.parentScopes[n]&&n++,">"===t.parentScopes[r]&&r++,!(n>=e.parentScopes.length)&&!(r>=t.parentScopes.length);){let i=t.parentScopes[r].length-e.parentScopes[n].length;if(0!==i)return i;n++,r++}return t.parentScopes.length-e.parentScopes.length}match(t){if(""!==t){let e,n,r=t.indexOf(".");if(-1===r?(e=t,n=""):(e=t.substring(0,r),n=t.substring(r+1)),this._children.hasOwnProperty(e))return this._children[e].match(n)}let n=this._rulesWithParentScopes.concat(this._mainRule);return n.sort(e._cmpBySpecificity),n}insert(t,n,r,i,a,o){let s,l,u;if(""===n)return void this._doInsertHere(t,r,i,a,o);let c=n.indexOf(".");-1===c?(s=n,l=""):(s=n.substring(0,c),l=n.substring(c+1)),this._children.hasOwnProperty(s)?u=this._children[s]:(u=new e(this._mainRule.clone(),x.cloneArr(this._rulesWithParentScopes)),this._children[s]=u),u.insert(t+1,l,r,i,a,o)}_doInsertHere(e,t,n,r,i){if(null===t)return void this._mainRule.acceptOverwrite(e,n,r,i);for(let a=0,o=this._rulesWithParentScopes.length;a<o;a++){let o=this._rulesWithParentScopes[a];if(0===l(o.parentScopes,t))return void o.acceptOverwrite(e,n,r,i)}-1===n&&(n=this._mainRule.fontStyle),0===r&&(r=this._mainRule.foreground),0===i&&(i=this._mainRule.background),this._rulesWithParentScopes.push(new x(e,t,n,r,i))}constructor(e,t=[],n={}){(0,i._)(this,"_rulesWithParentScopes",void 0),this._mainRule=e,this._children=n,this._rulesWithParentScopes=t}},k=class e{static toBinaryStr(e){return e.toString(2).padStart(32,"0")}static print(t){let n=e.getLanguageId(t),r=e.getTokenType(t),i=e.getFontStyle(t);console.log({languageId:n,tokenType:r,fontStyle:i,foreground:e.getForeground(t),background:e.getBackground(t)})}static getLanguageId(e){return(255&e)>>>0}static getTokenType(e){return(768&e)>>>8}static containsBalancedBrackets(e){return(1024&e)!=0}static getFontStyle(e){return(30720&e)>>>11}static getForeground(e){return(0xff8000&e)>>>15}static getBackground(e){return(0xff000000&e)>>>24}static set(t,n,r,i,a,o,s){let l=e.getLanguageId(t),u=e.getTokenType(t),c=+!!e.containsBalancedBrackets(t),d=e.getFontStyle(t),h=e.getForeground(t),p=e.getBackground(t);return 0!==n&&(l=n),8!==r&&(u=r),null!==i&&(c=+!!i),-1!==a&&(d=a),0!==o&&(h=o),0!==s&&(p=s),(0|l|u<<8|c<<10|d<<11|h<<15|p<<24)>>>0}};function S(e,t){var n;let r,i,a=[],o=(n=e,i=(r=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g).exec(n),{next:()=>{if(!i)return null;let e=i[0];return i=r.exec(n),e}}),s=o.next();for(;null!==s;){let e=0;if(2===s.length&&":"===s.charAt(1)){switch(s.charAt(0)){case"R":e=1;break;case"L":e=-1;break;default:console.log("Unknown priority ".concat(s," in scope selector"))}s=o.next()}let t=u();if(a.push({matcher:t,priority:e}),","!==s)break;s=o.next()}return a;function l(){if("-"===s){s=o.next();let e=l();return t=>!!e&&!e(t)}if("("===s){s=o.next();let e=function(){let e=[],t=u();for(;t&&(e.push(t),"|"===s||","===s);){do s=o.next();while("|"===s||","===s)t=u()}return t=>e.some(e=>e(t))}();return")"===s&&(s=o.next()),e}if(_(s)){let e=[];do e.push(s),s=o.next();while(_(s))return n=>t(e,n)}return null}function u(){let e=[],t=l();for(;t;)e.push(t),t=l();return t=>e.every(e=>e(t))}}function _(e){return!!e&&!!e.match(/[\w\.:]+/)}var C=(e=>(e[e.None=0]="None",e[e.NotBeginString=1]="NotBeginString",e[e.NotEndString=2]="NotEndString",e[e.NotBeginPosition=4]="NotBeginPosition",e[e.DebugCall=8]="DebugCall",e))(C||{});function A(e){"function"==typeof e.dispose&&e.dispose()}var E=class{toKey(){return this.scopeName}constructor(e){this.scopeName=e}},T=class{toKey(){return"".concat(this.scopeName,"#").concat(this.ruleName)}constructor(e,t){this.scopeName=e,this.ruleName=t}},M=class{get references(){return this._references}add(e){let t=e.toKey();this._seenReferenceKeys.has(t)||(this._seenReferenceKeys.add(t),this._references.push(e))}constructor(){(0,i._)(this,"_references",[]),(0,i._)(this,"_seenReferenceKeys",new Set),(0,i._)(this,"visitedRule",new Set)}},I=class{processQueue(){let e=this.Q;this.Q=[];let t=new M;for(let n of e)!function(e,t,n,r){let i=n.lookup(e.scopeName);if(!i){if(e.scopeName===t)throw Error("No grammar provided for <".concat(t,">"));return}let a=n.lookup(t);e instanceof E?D({baseGrammar:a,selfGrammar:i},r):N(e.ruleName,{baseGrammar:a,selfGrammar:i,repository:i.repository},r);let o=n.injections(e.scopeName);if(o)for(let e of o)r.add(new E(e))}(n,this.initialScopeName,this.repo,t);for(let e of t.references)if(e instanceof E){if(this.seenFullScopeRequests.has(e.scopeName))continue;this.seenFullScopeRequests.add(e.scopeName),this.Q.push(e)}else{if(this.seenFullScopeRequests.has(e.scopeName)||this.seenPartialScopeRequests.has(e.toKey()))continue;this.seenPartialScopeRequests.add(e.toKey()),this.Q.push(e)}}constructor(e,t){(0,i._)(this,"seenFullScopeRequests",new Set),(0,i._)(this,"seenPartialScopeRequests",new Set),(0,i._)(this,"Q",void 0),this.repo=e,this.initialScopeName=t,this.seenFullScopeRequests.add(this.initialScopeName),this.Q=[new E(this.initialScopeName)]}};function N(e,t,n){t.repository&&t.repository[e]&&P([t.repository[e]],t,n)}function D(e,t){e.selfGrammar.patterns&&Array.isArray(e.selfGrammar.patterns)&&P(e.selfGrammar.patterns,{...e,repository:e.selfGrammar.repository},t),e.selfGrammar.injections&&P(Object.values(e.selfGrammar.injections),{...e,repository:e.selfGrammar.repository},t)}function P(e,t,n){for(let r of e){if(n.visitedRule.has(r))continue;n.visitedRule.add(r);let e=r.repository?a({},t.repository,r.repository):t.repository;Array.isArray(r.patterns)&&P(r.patterns,{...t,repository:e},n);let i=r.include;if(!i)continue;let o=z(i);switch(o.kind){case 0:D({...t,selfGrammar:t.baseGrammar},n);break;case 1:D(t,n);break;case 2:N(o.ruleName,{...t,repository:e},n);break;case 3:case 4:let s=o.scopeName===t.selfGrammar.scopeName?t.selfGrammar:o.scopeName===t.baseGrammar.scopeName?t.baseGrammar:void 0;if(s){let r={baseGrammar:t.baseGrammar,selfGrammar:s,repository:e};4===o.kind?N(o.ruleName,r,n):D(r,n)}else 4===o.kind?n.add(new T(o.scopeName,o.ruleName)):n.add(new E(o.scopeName))}}}var R=class{constructor(){(0,i._)(this,"kind",0)}},O=class{constructor(){(0,i._)(this,"kind",1)}},j=class{constructor(e){(0,i._)(this,"kind",2),this.ruleName=e}},F=class{constructor(e){(0,i._)(this,"kind",3),this.scopeName=e}},L=class{constructor(e,t){(0,i._)(this,"kind",4),this.scopeName=e,this.ruleName=t}};function z(e){if("$base"===e)return new R;if("$self"===e)return new O;let t=e.indexOf("#");return -1===t?new F(e):0===t?new j(e.substring(1)):new L(e.substring(0,t),e.substring(t+1))}var B=/\\(\d+)/,U=/\\(\d+)/g;Symbol("RuleId");var H=class{get debugName(){let e=this.$location?"".concat(function e(t){let n=~t.lastIndexOf("/")||~t.lastIndexOf("\\");return 0===n?t:~n==t.length-1?e(t.substring(0,t.length-1)):t.substr(~n+1)}(this.$location.filename),":").concat(this.$location.line):"unknown";return"".concat(this.constructor.name,"#").concat(this.id," @ ").concat(e)}getName(e,t){return this._nameIsCapturing&&null!==this._name&&null!==e&&null!==t?s.replaceCaptures(this._name,e,t):this._name}getContentName(e,t){return this._contentNameIsCapturing&&null!==this._contentName?s.replaceCaptures(this._contentName,e,t):this._contentName}constructor(e,t,n,r){(0,i._)(this,"$location",void 0),(0,i._)(this,"id",void 0),(0,i._)(this,"_nameIsCapturing",void 0),(0,i._)(this,"_name",void 0),(0,i._)(this,"_contentNameIsCapturing",void 0),(0,i._)(this,"_contentName",void 0),this.$location=e,this.id=t,this._name=n||null,this._nameIsCapturing=s.hasCaptures(this._name),this._contentName=r||null,this._contentNameIsCapturing=s.hasCaptures(this._contentName)}},W=class extends H{dispose(){}collectPatterns(e,t){throw Error("Not supported!")}compile(e,t){throw Error("Not supported!")}compileAG(e,t,n,r){throw Error("Not supported!")}constructor(e,t,n,r,a){super(e,t,n,r),(0,i._)(this,"retokenizeCapturedWithRuleId",void 0),this.retokenizeCapturedWithRuleId=a}},V=class extends H{dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugMatchRegExp(){return"".concat(this._match.source)}collectPatterns(e,t){t.push(this._match)}compile(e,t){return this._getCachedCompiledPatterns(e).compile(e)}compileAG(e,t,n,r){return this._getCachedCompiledPatterns(e).compileAG(e,n,r)}_getCachedCompiledPatterns(e){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new X,this.collectPatterns(e,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}constructor(e,t,n,r,a){super(e,t,n,null),(0,i._)(this,"_match",void 0),(0,i._)(this,"captures",void 0),(0,i._)(this,"_cachedCompiledPatterns",void 0),this._match=new Y(r,this.id),this.captures=a,this._cachedCompiledPatterns=null}},q=class extends H{dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}collectPatterns(e,t){for(let n of this.patterns)e.getRule(n).collectPatterns(e,t)}compile(e,t){return this._getCachedCompiledPatterns(e).compile(e)}compileAG(e,t,n,r){return this._getCachedCompiledPatterns(e).compileAG(e,n,r)}_getCachedCompiledPatterns(e){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new X,this.collectPatterns(e,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}constructor(e,t,n,r,a){super(e,t,n,r),(0,i._)(this,"hasMissingPatterns",void 0),(0,i._)(this,"patterns",void 0),(0,i._)(this,"_cachedCompiledPatterns",void 0),this.patterns=a.patterns,this.hasMissingPatterns=a.hasMissingPatterns,this._cachedCompiledPatterns=null}},G=class extends H{dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugBeginRegExp(){return"".concat(this._begin.source)}get debugEndRegExp(){return"".concat(this._end.source)}getEndWithResolvedBackReferences(e,t){return this._end.resolveBackReferences(e,t)}collectPatterns(e,t){t.push(this._begin)}compile(e,t){return this._getCachedCompiledPatterns(e,t).compile(e)}compileAG(e,t,n,r){return this._getCachedCompiledPatterns(e,t).compileAG(e,n,r)}_getCachedCompiledPatterns(e,t){if(!this._cachedCompiledPatterns){for(let t of(this._cachedCompiledPatterns=new X,this.patterns))e.getRule(t).collectPatterns(e,this._cachedCompiledPatterns);this.applyEndPatternLast?this._cachedCompiledPatterns.push(this._end.hasBackReferences?this._end.clone():this._end):this._cachedCompiledPatterns.unshift(this._end.hasBackReferences?this._end.clone():this._end)}return this._end.hasBackReferences&&(this.applyEndPatternLast?this._cachedCompiledPatterns.setSource(this._cachedCompiledPatterns.length()-1,t):this._cachedCompiledPatterns.setSource(0,t)),this._cachedCompiledPatterns}constructor(e,t,n,r,a,o,s,l,u,c){super(e,t,n,r),(0,i._)(this,"_begin",void 0),(0,i._)(this,"beginCaptures",void 0),(0,i._)(this,"_end",void 0),(0,i._)(this,"endHasBackReferences",void 0),(0,i._)(this,"endCaptures",void 0),(0,i._)(this,"applyEndPatternLast",void 0),(0,i._)(this,"hasMissingPatterns",void 0),(0,i._)(this,"patterns",void 0),(0,i._)(this,"_cachedCompiledPatterns",void 0),this._begin=new Y(a,this.id),this.beginCaptures=o,this._end=new Y(s||"",-1),this.endHasBackReferences=this._end.hasBackReferences,this.endCaptures=l,this.applyEndPatternLast=u||!1,this.patterns=c.patterns,this.hasMissingPatterns=c.hasMissingPatterns,this._cachedCompiledPatterns=null}},$=class extends H{dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null),this._cachedCompiledWhilePatterns&&(this._cachedCompiledWhilePatterns.dispose(),this._cachedCompiledWhilePatterns=null)}get debugBeginRegExp(){return"".concat(this._begin.source)}get debugWhileRegExp(){return"".concat(this._while.source)}getWhileWithResolvedBackReferences(e,t){return this._while.resolveBackReferences(e,t)}collectPatterns(e,t){t.push(this._begin)}compile(e,t){return this._getCachedCompiledPatterns(e).compile(e)}compileAG(e,t,n,r){return this._getCachedCompiledPatterns(e).compileAG(e,n,r)}_getCachedCompiledPatterns(e){if(!this._cachedCompiledPatterns)for(let t of(this._cachedCompiledPatterns=new X,this.patterns))e.getRule(t).collectPatterns(e,this._cachedCompiledPatterns);return this._cachedCompiledPatterns}compileWhile(e,t){return this._getCachedCompiledWhilePatterns(e,t).compile(e)}compileWhileAG(e,t,n,r){return this._getCachedCompiledWhilePatterns(e,t).compileAG(e,n,r)}_getCachedCompiledWhilePatterns(e,t){return this._cachedCompiledWhilePatterns||(this._cachedCompiledWhilePatterns=new X,this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences?this._while.clone():this._while)),this._while.hasBackReferences&&this._cachedCompiledWhilePatterns.setSource(0,t||""),this._cachedCompiledWhilePatterns}constructor(e,t,n,r,a,o,s,l,u){super(e,t,n,r),(0,i._)(this,"_begin",void 0),(0,i._)(this,"beginCaptures",void 0),(0,i._)(this,"whileCaptures",void 0),(0,i._)(this,"_while",void 0),(0,i._)(this,"whileHasBackReferences",void 0),(0,i._)(this,"hasMissingPatterns",void 0),(0,i._)(this,"patterns",void 0),(0,i._)(this,"_cachedCompiledPatterns",void 0),(0,i._)(this,"_cachedCompiledWhilePatterns",void 0),this._begin=new Y(a,this.id),this.beginCaptures=o,this.whileCaptures=l,this._while=new Y(s,-2),this.whileHasBackReferences=this._while.hasBackReferences,this.patterns=u.patterns,this.hasMissingPatterns=u.hasMissingPatterns,this._cachedCompiledPatterns=null,this._cachedCompiledWhilePatterns=null}},K=class e{static createCaptureRule(e,t,n,r,i){return e.registerRule(e=>new W(t,e,n,r,i))}static getCompiledRuleId(t,n,r){return t.id||n.registerRule(i=>{if(t.id=i,t.match)return new V(t.$vscodeTextmateLocation,t.id,t.name,t.match,e._compileCaptures(t.captures,n,r));if(void 0===t.begin){t.repository&&(r=a({},r,t.repository));let i=t.patterns;return void 0===i&&t.include&&(i=[{include:t.include}]),new q(t.$vscodeTextmateLocation,t.id,t.name,t.contentName,e._compilePatterns(i,n,r))}return t.while?new $(t.$vscodeTextmateLocation,t.id,t.name,t.contentName,t.begin,e._compileCaptures(t.beginCaptures||t.captures,n,r),t.while,e._compileCaptures(t.whileCaptures||t.captures,n,r),e._compilePatterns(t.patterns,n,r)):new G(t.$vscodeTextmateLocation,t.id,t.name,t.contentName,t.begin,e._compileCaptures(t.beginCaptures||t.captures,n,r),t.end,e._compileCaptures(t.endCaptures||t.captures,n,r),t.applyEndPatternLast,e._compilePatterns(t.patterns,n,r))}),t.id}static _compileCaptures(t,n,r){let i=[];if(t){let a=0;for(let e in t){if("$vscodeTextmateLocation"===e)continue;let t=parseInt(e,10);t>a&&(a=t)}for(let e=0;e<=a;e++)i[e]=null;for(let a in t){if("$vscodeTextmateLocation"===a)continue;let o=parseInt(a,10),s=0;t[a].patterns&&(s=e.getCompiledRuleId(t[a],n,r)),i[o]=e.createCaptureRule(n,t[a].$vscodeTextmateLocation,t[a].name,t[a].contentName,s)}}return i}static _compilePatterns(t,n,r){let i=[];if(t)for(let a=0,o=t.length;a<o;a++){let o=t[a],s=-1;if(o.include){let t=z(o.include);switch(t.kind){case 0:case 1:s=e.getCompiledRuleId(r[o.include],n,r);break;case 2:let i=r[t.ruleName];i&&(s=e.getCompiledRuleId(i,n,r));break;case 3:case 4:let a=t.scopeName,l=4===t.kind?t.ruleName:null,u=n.getExternalGrammar(a,r);if(u)if(l){let t=u.repository[l];t&&(s=e.getCompiledRuleId(t,n,u.repository))}else s=e.getCompiledRuleId(u.repository.$self,n,u.repository)}}else s=e.getCompiledRuleId(o,n,r);if(-1!==s){let e=n.getRule(s),t=!1;if((e instanceof q||e instanceof G||e instanceof $)&&e.hasMissingPatterns&&0===e.patterns.length&&(t=!0),t)continue;i.push(s)}}return{patterns:i,hasMissingPatterns:(t?t.length:0)!==i.length}}},Y=class e{clone(){return new e(this.source,this.ruleId)}setSource(e){this.source!==e&&(this.source=e,this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()))}resolveBackReferences(e,t){if("string"!=typeof this.source)throw Error("This method should only be called if the source is a string");let n=t.map(t=>e.substring(t.start,t.end));return U.lastIndex=0,this.source.replace(U,(e,t)=>c(n[parseInt(t,10)]||""))}_buildAnchorCache(){let e,t,n,r;if("string"!=typeof this.source)throw Error("This method should only be called if the source is a string");let i=[],a=[],o=[],s=[];for(e=0,t=this.source.length;e<t;e++)n=this.source.charAt(e),i[e]=n,a[e]=n,o[e]=n,s[e]=n,"\\"===n&&e+1<t&&("A"===(r=this.source.charAt(e+1))?(i[e+1]="",a[e+1]="",o[e+1]="A",s[e+1]="A"):"G"===r?(i[e+1]="",a[e+1]="G",o[e+1]="",s[e+1]="G"):(i[e+1]=r,a[e+1]=r,o[e+1]=r,s[e+1]=r),e++);return{A0_G0:i.join(""),A0_G1:a.join(""),A1_G0:o.join(""),A1_G1:s.join("")}}resolveAnchors(e,t){if(!this.hasAnchor||!this._anchorCache||"string"!=typeof this.source)return this.source;if(e)if(t)return this._anchorCache.A1_G1;else return this._anchorCache.A1_G0;return t?this._anchorCache.A0_G1:this._anchorCache.A0_G0}constructor(e,t){if((0,i._)(this,"source",void 0),(0,i._)(this,"ruleId",void 0),(0,i._)(this,"hasAnchor",void 0),(0,i._)(this,"hasBackReferences",void 0),(0,i._)(this,"_anchorCache",void 0),e&&"string"==typeof e){let t=e.length,n=0,r=[],i=!1;for(let a=0;a<t;a++)if("\\"===e.charAt(a)&&a+1<t){let t=e.charAt(a+1);"z"===t?(r.push(e.substring(n,a)),r.push("$(?!\\n)(?<!\\n)"),n=a+2):("A"===t||"G"===t)&&(i=!0),a++}this.hasAnchor=i,0===n?this.source=e:(r.push(e.substring(n,t)),this.source=r.join(""))}else this.hasAnchor=!1,this.source=e;this.hasAnchor?this._anchorCache=this._buildAnchorCache():this._anchorCache=null,this.ruleId=t,"string"==typeof this.source?this.hasBackReferences=B.test(this.source):this.hasBackReferences=!1}},X=class{dispose(){this._disposeCaches()}_disposeCaches(){this._cached&&(this._cached.dispose(),this._cached=null),this._anchorCache.A0_G0&&(this._anchorCache.A0_G0.dispose(),this._anchorCache.A0_G0=null),this._anchorCache.A0_G1&&(this._anchorCache.A0_G1.dispose(),this._anchorCache.A0_G1=null),this._anchorCache.A1_G0&&(this._anchorCache.A1_G0.dispose(),this._anchorCache.A1_G0=null),this._anchorCache.A1_G1&&(this._anchorCache.A1_G1.dispose(),this._anchorCache.A1_G1=null)}push(e){this._items.push(e),this._hasAnchors=this._hasAnchors||e.hasAnchor}unshift(e){this._items.unshift(e),this._hasAnchors=this._hasAnchors||e.hasAnchor}length(){return this._items.length}setSource(e,t){this._items[e].source!==t&&(this._disposeCaches(),this._items[e].setSource(t))}compile(e){if(!this._cached){let t=this._items.map(e=>e.source);this._cached=new Z(e,t,this._items.map(e=>e.ruleId))}return this._cached}compileAG(e,t,n){if(!this._hasAnchors)return this.compile(e);if(t)if(n)return this._anchorCache.A1_G1||(this._anchorCache.A1_G1=this._resolveAnchors(e,t,n)),this._anchorCache.A1_G1;else return this._anchorCache.A1_G0||(this._anchorCache.A1_G0=this._resolveAnchors(e,t,n)),this._anchorCache.A1_G0;return n?(this._anchorCache.A0_G1||(this._anchorCache.A0_G1=this._resolveAnchors(e,t,n)),this._anchorCache.A0_G1):(this._anchorCache.A0_G0||(this._anchorCache.A0_G0=this._resolveAnchors(e,t,n)),this._anchorCache.A0_G0)}_resolveAnchors(e,t,n){return new Z(e,this._items.map(e=>e.resolveAnchors(t,n)),this._items.map(e=>e.ruleId))}constructor(){(0,i._)(this,"_items",void 0),(0,i._)(this,"_hasAnchors",void 0),(0,i._)(this,"_cached",void 0),(0,i._)(this,"_anchorCache",void 0),this._items=[],this._hasAnchors=!1,this._cached=null,this._anchorCache={A0_G0:null,A0_G1:null,A1_G0:null,A1_G1:null}}},Z=class{dispose(){"function"==typeof this.scanner.dispose&&this.scanner.dispose()}toString(){let e=[];for(let t=0,n=this.rules.length;t<n;t++)e.push("   - "+this.rules[t]+": "+this.regExps[t]);return e.join("\n")}findNextMatchSync(e,t,n){let r=this.scanner.findNextMatchSync(e,t,n);return r?{ruleId:this.rules[r.index],captureIndices:r.captureIndices}:null}constructor(e,t,n){(0,i._)(this,"scanner",void 0),this.regExps=t,this.rules=n,this.scanner=e.createOnigScanner(t)}},J=class{constructor(e,t){this.languageId=e,this.tokenType=t}},Q=(t=class e{getDefaultAttributes(){return this._defaultAttributes}getBasicScopeAttributes(t){return null===t?e._NULL_SCOPE_METADATA:this._getBasicScopeAttributes.get(t)}_scopeToLanguage(e){return this._embeddedLanguagesMatcher.match(e)||0}_toStandardTokenType(t){let n=t.match(e.STANDARD_TOKEN_TYPE_REGEXP);if(!n)return 8;switch(n[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"meta.embedded":return 0}throw Error("Unexpected match for standard token type!")}constructor(e,t){(0,i._)(this,"_defaultAttributes",void 0),(0,i._)(this,"_embeddedLanguagesMatcher",void 0),(0,i._)(this,"_getBasicScopeAttributes",new d(e=>new J(this._scopeToLanguage(e),this._toStandardTokenType(e)))),this._defaultAttributes=new J(e,8),this._embeddedLanguagesMatcher=new ee(Object.entries(t||{}))}},(0,i._)(t,"_NULL_SCOPE_METADATA",new J(0,0)),(0,i._)(t,"STANDARD_TOKEN_TYPE_REGEXP",/\b(comment|string|regex|meta\.embedded)\b/),t),ee=class{match(e){if(!this.scopesRegExp)return;let t=e.match(this.scopesRegExp);if(t)return this.values.get(t[1])}constructor(e){if((0,i._)(this,"values",void 0),(0,i._)(this,"scopesRegExp",void 0),0===e.length)this.values=null,this.scopesRegExp=null;else{this.values=new Map(e);let t=e.map(e=>{let[t,n]=e;return c(t)});t.sort(),t.reverse(),this.scopesRegExp=RegExp("^((".concat(t.join(")|("),"))($|\\.)"),"")}}};void 0!==r.default&&r.default.env.VSCODE_TEXTMATE_DEBUG;var et=class{constructor(e,t){this.stack=e,this.stoppedEarly=t}};function en(e,t,n,r,i,a,o,s){let l=t.content.length,u=!1,c=-1;if(o){let o=function(e,t,n,r,i,a){let o=i.beginRuleCapturedEOL?0:-1,s=[];for(let t=i;t;t=t.pop()){let n=t.getRule(e);n instanceof $&&s.push({rule:n,stack:t})}for(let p=s.pop();p;p=s.pop()){var l,u,c,d,h;let{ruleScanner:s,findOptions:f}=(l=p.rule,u=e,c=p.stack.endRule,d=n,h=r===o,{ruleScanner:l.compileWhileAG(u,c,d,h),findOptions:0}),m=s.findNextMatchSync(t,r,f);if(m){if(-2!==m.ruleId){i=p.stack.pop();break}m.captureIndices&&m.captureIndices.length&&(a.produce(p.stack,m.captureIndices[0].start),ei(e,t,n,p.stack,a,p.rule.whileCaptures,m.captureIndices),a.produce(p.stack,m.captureIndices[0].end),o=m.captureIndices[0].end,m.captureIndices[0].end>r&&(r=m.captureIndices[0].end,n=!1))}else{i=p.stack.pop();break}}return{stack:i,linePos:r,anchorPosition:o,isFirstLine:n}}(e,t,n,r,i,a);i=o.stack,r=o.linePos,n=o.isFirstLine,c=o.anchorPosition}let d=Date.now();for(;!u;){if(0!==s&&Date.now()-d>s)return new et(i,!0);!function(){let o=function(e,t,n,r,i,a){let o=function(e,t,n,r,i,a){let{ruleScanner:o,findOptions:s}=er(i.getRule(e),e,i.endRule,n,r===a),l=o.findNextMatchSync(t,r,s);return l?{captureIndices:l.captureIndices,matchedRuleId:l.ruleId}:null}(e,t,n,r,i,a),s=e.getInjections();if(0===s.length)return o;let l=function(e,t,n,r,i,a,o){let s,l=Number.MAX_VALUE,u=null,c=0,d=a.contentNameScopesList.getScopeNames();for(let a=0,h=e.length;a<h;a++){let h=e[a];if(!h.matcher(d))continue;let{ruleScanner:p,findOptions:f}=er(t.getRule(h.ruleId),t,null,r,i===o),m=p.findNextMatchSync(n,i,f);if(!m)continue;let g=m.captureIndices[0].start;if(!(g>=l)&&(l=g,u=m.captureIndices,s=m.ruleId,c=h.priority,l===i))break}return u?{priorityMatch:-1===c,captureIndices:u,matchedRuleId:s}:null}(s,e,t,n,r,i,a);if(!l)return o;if(!o)return l;let u=o.captureIndices[0].start,c=l.captureIndices[0].start;return c<u||l.priorityMatch&&c===u?l:o}(e,t,n,r,i,c);if(!o){a.produce(i,l),u=!0;return}let s=o.captureIndices,d=o.matchedRuleId,h=!!s&&s.length>0&&s[0].end>r;if(-1===d){let o=i.getRule(e);a.produce(i,s[0].start),i=i.withContentNameScopesList(i.nameScopesList),ei(e,t,n,i,a,o.endCaptures,s),a.produce(i,s[0].end);let d=i;if(i=i.parent,c=d.getAnchorPos(),!h&&d.getEnterPos()===r){i=d,a.produce(i,l),u=!0;return}}else{let o=e.getRule(d);a.produce(i,s[0].start);let p=i,f=o.getName(t.content,s),m=i.contentNameScopesList.pushAttributed(f,e);if(i=i.push(d,r,c,s[0].end===l,null,m,m),o instanceof G){ei(e,t,n,i,a,o.beginCaptures,s),a.produce(i,s[0].end),c=s[0].end;let r=o.getContentName(t.content,s),d=m.pushAttributed(r,e);if(i=i.withContentNameScopesList(d),o.endHasBackReferences&&(i=i.withEndRule(o.getEndWithResolvedBackReferences(t.content,s))),!h&&p.hasSameRuleAs(i)){i=i.pop(),a.produce(i,l),u=!0;return}}else if(o instanceof $){ei(e,t,n,i,a,o.beginCaptures,s),a.produce(i,s[0].end),c=s[0].end;let r=o.getContentName(t.content,s),d=m.pushAttributed(r,e);if(i=i.withContentNameScopesList(d),o.whileHasBackReferences&&(i=i.withEndRule(o.getWhileWithResolvedBackReferences(t.content,s))),!h&&p.hasSameRuleAs(i)){i=i.pop(),a.produce(i,l),u=!0;return}}else if(ei(e,t,n,i,a,o.captures,s),a.produce(i,s[0].end),i=i.pop(),!h){i=i.safePop(),a.produce(i,l),u=!0;return}}s[0].end>r&&(r=s[0].end,n=!1)}()}return new et(i,!1)}function er(e,t,n,r,i){return{ruleScanner:e.compileAG(t,n,r,i),findOptions:0}}function ei(e,t,n,r,i,a,o){if(0===a.length)return;let s=t.content,l=Math.min(a.length,o.length),u=[],c=o[0].end;for(let t=0;t<l;t++){let l=a[t];if(null===l)continue;let d=o[t];if(0===d.length)continue;if(d.start>c)break;for(;u.length>0&&u[u.length-1].endPos<=d.start;)i.produceFromScopes(u[u.length-1].scopes,u[u.length-1].endPos),u.pop();if(u.length>0?i.produceFromScopes(u[u.length-1].scopes,d.start):i.produce(r,d.start),l.retokenizeCapturedWithRuleId){let t=l.getName(s,o),a=r.contentNameScopesList.pushAttributed(t,e),u=l.getContentName(s,o),c=a.pushAttributed(u,e),h=r.push(l.retokenizeCapturedWithRuleId,d.start,-1,!1,null,a,c),p=e.createOnigString(s.substring(0,d.end));en(e,p,n&&0===d.start,d.start,h,i,!1,0),A(p);continue}let h=l.getName(s,o);if(null!==h){let t=(u.length>0?u[u.length-1].scopes:r.contentNameScopesList).pushAttributed(h,e);u.push(new ea(t,d.end))}}for(;u.length>0;)i.produceFromScopes(u[u.length-1].scopes,u[u.length-1].endPos),u.pop()}var ea=class{constructor(e,t){(0,i._)(this,"scopes",void 0),(0,i._)(this,"endPos",void 0),this.scopes=e,this.endPos=t}};function eo(e,t,n,r,i){let a=S(t,es),o=K.getCompiledRuleId(n,r,i.repository);for(let n of a)e.push({debugSelector:t,matcher:n.matcher,ruleId:o,grammar:i,priority:n.priority})}function es(e,t){if(t.length<e.length)return!1;let n=0;return e.every(e=>{for(let r=n;r<t.length;r++)if(function(e,t){if(!e)return!1;if(e===t)return!0;let n=t.length;return e.length>n&&e.substr(0,n)===t&&"."===e[n]}(t[r],e))return n=r+1,!0;return!1})}var el=class{get themeProvider(){return this._grammarRepository}dispose(){for(let e of this._ruleId2desc)e&&e.dispose()}createOnigScanner(e){return this._onigLib.createOnigScanner(e)}createOnigString(e){return this._onigLib.createOnigString(e)}getMetadataForScope(e){return this._basicScopeAttributesProvider.getBasicScopeAttributes(e)}_collectInjections(){let e=[],t=this._rootScopeName,n=({lookup:e=>e===this._rootScopeName?this._grammar:this.getExternalGrammar(e),injections:e=>this._grammarRepository.injections(e)}).lookup(t);if(n){let r=n.injections;if(r)for(let t in r)eo(e,t,r[t],this,n);let i=this._grammarRepository.injections(t);i&&i.forEach(t=>{let n=this.getExternalGrammar(t);if(n){let t=n.injectionSelector;t&&eo(e,t,n,this,n)}})}return e.sort((e,t)=>e.priority-t.priority),e}getInjections(){return null===this._injections&&(this._injections=this._collectInjections()),this._injections}registerRule(e){let t=++this._lastRuleId,n=e(t);return this._ruleId2desc[t]=n,n}getRule(e){return this._ruleId2desc[e]}getExternalGrammar(e,t){if(this._includedGrammars[e])return this._includedGrammars[e];if(this._grammarRepository){let n=this._grammarRepository.lookup(e);if(n)return this._includedGrammars[e]=eu(n,t&&t.$base),this._includedGrammars[e]}}tokenizeLine(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this._tokenize(e,t,!1,n);return{tokens:r.lineTokens.getResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}tokenizeLine2(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this._tokenize(e,t,!0,n);return{tokens:r.lineTokens.getBinaryResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}_tokenize(e,t,n,r){let i;if(-1===this._rootId&&(this._rootId=K.getCompiledRuleId(this._grammar.repository.$self,this,this._grammar.repository),this.getInjections()),t&&t!==ed.NULL)i=!1,t.reset();else{let e;i=!0;let n=this._basicScopeAttributesProvider.getDefaultAttributes(),r=this.themeProvider.getDefaults(),a=k.set(0,n.languageId,n.tokenType,null,r.fontStyle,r.foregroundId,r.backgroundId),o=this.getRule(this._rootId).getName(null,null);e=o?ec.createRootAndLookUpScopeName(o,a,this):ec.createRoot("unknown",a),t=new ed(null,this._rootId,-1,-1,!1,null,e,e)}e+="\n";let a=this.createOnigString(e),o=a.content.length,s=new ep(n,e,this._tokenTypeMatchers,this.balancedBracketSelectors),l=en(this,a,i,0,t,s,!0,r);return A(a),{lineLength:o,lineTokens:s,ruleStack:l.stack,stoppedEarly:l.stoppedEarly}}constructor(e,t,n,r,a,o,s,l){if((0,i._)(this,"_rootId",void 0),(0,i._)(this,"_lastRuleId",void 0),(0,i._)(this,"_ruleId2desc",void 0),(0,i._)(this,"_includedGrammars",void 0),(0,i._)(this,"_grammarRepository",void 0),(0,i._)(this,"_grammar",void 0),(0,i._)(this,"_injections",void 0),(0,i._)(this,"_basicScopeAttributesProvider",void 0),(0,i._)(this,"_tokenTypeMatchers",void 0),this._rootScopeName=e,this.balancedBracketSelectors=o,this._onigLib=l,this._basicScopeAttributesProvider=new Q(n,r),this._rootId=-1,this._lastRuleId=0,this._ruleId2desc=[null],this._includedGrammars={},this._grammarRepository=s,this._grammar=eu(t,null),this._injections=null,this._tokenTypeMatchers=[],a)for(let e of Object.keys(a))for(let t of S(e,es))this._tokenTypeMatchers.push({matcher:t.matcher,type:a[e]})}};function eu(e,t){return(e=function e(t){return Array.isArray(t)?function(t){let n=[];for(let r=0,i=t.length;r<i;r++)n[r]=e(t[r]);return n}(t):t instanceof RegExp?t:"object"==typeof t?function(t){let n={};for(let r in t)n[r]=e(t[r]);return n}(t):t}(e)).repository=e.repository||{},e.repository.$self={$vscodeTextmateLocation:e.$vscodeTextmateLocation,patterns:e.patterns,name:e.scopeName},e.repository.$base=t||e.repository.$self,e}var ec=class e{static fromExtension(t,n){var r;let i=t,a=null!=(r=null==t?void 0:t.scopePath)?r:null;for(let t of n)i=new e(i,a=p.push(a,t.scopeNames),t.encodedTokenAttributes);return i}static createRoot(t,n){return new e(null,new p(null,t),n)}static createRootAndLookUpScopeName(t,n,r){let i=r.getMetadataForScope(t),a=new p(null,t),o=r.themeProvider.themeMatch(a),s=e.mergeAttributes(n,i,o);return new e(null,a,s)}get scopeName(){return this.scopePath.scopeName}toString(){return this.getScopeNames().join(" ")}equals(t){return e.equals(this,t)}static equals(e,t){for(;;){if(e===t||!e&&!t)return!0;if(!e||!t||e.scopeName!==t.scopeName||e.tokenAttributes!==t.tokenAttributes)return!1;e=e.parent,t=t.parent}}static mergeAttributes(e,t,n){let r=-1,i=0,a=0;return null!==n&&(r=n.fontStyle,i=n.foregroundId,a=n.backgroundId),k.set(e,t.languageId,t.tokenType,null,r,i,a)}pushAttributed(t,n){if(null===t)return this;if(-1===t.indexOf(" "))return e._pushAttributed(this,t,n);let r=t.split(/ /g),i=this;for(let t of r)i=e._pushAttributed(i,t,n);return i}static _pushAttributed(t,n,r){let i=r.getMetadataForScope(n),a=t.scopePath.push(n),o=r.themeProvider.themeMatch(a),s=e.mergeAttributes(t.tokenAttributes,i,o);return new e(t,a,s)}getScopeNames(){return this.scopePath.getSegments()}getExtensionIfDefined(e){let t=[],n=this;for(;n&&n!==e;){var r,i;t.push({encodedTokenAttributes:n.tokenAttributes,scopeNames:n.scopePath.getExtensionIfDefined(null!=(i=null==(r=n.parent)?void 0:r.scopePath)?i:null)}),n=n.parent}return n===e?t.reverse():void 0}constructor(e,t,n){this.parent=e,this.scopePath=t,this.tokenAttributes=n}},ed=(n=class e{equals(t){return null!==t&&e._equals(this,t)}static _equals(e,t){return e===t||!!this._structuralEquals(e,t)&&ec.equals(e.contentNameScopesList,t.contentNameScopesList)}static _structuralEquals(e,t){for(;;){if(e===t||!e&&!t)return!0;if(!e||!t||e.depth!==t.depth||e.ruleId!==t.ruleId||e.endRule!==t.endRule)return!1;e=e.parent,t=t.parent}}clone(){return this}static _reset(e){for(;e;)e._enterPos=-1,e._anchorPos=-1,e=e.parent}reset(){e._reset(this)}pop(){return this.parent}safePop(){return this.parent?this.parent:this}push(t,n,r,i,a,o,s){return new e(this,t,n,r,i,a,o,s)}getEnterPos(){return this._enterPos}getAnchorPos(){return this._anchorPos}getRule(e){return e.getRule(this.ruleId)}toString(){let e=[];return this._writeString(e,0),"["+e.join(",")+"]"}_writeString(e,t){var n,r;return this.parent&&(t=this.parent._writeString(e,t)),e[t++]="(".concat(this.ruleId,", ").concat(null==(n=this.nameScopesList)?void 0:n.toString(),", ").concat(null==(r=this.contentNameScopesList)?void 0:r.toString(),")"),t}withContentNameScopesList(e){return this.contentNameScopesList===e?this:this.parent.push(this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,this.endRule,this.nameScopesList,e)}withEndRule(t){return this.endRule===t?this:new e(this.parent,this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,t,this.nameScopesList,this.contentNameScopesList)}hasSameRuleAs(e){let t=this;for(;t&&t._enterPos===e._enterPos;){if(t.ruleId===e.ruleId)return!0;t=t.parent}return!1}toStateStackFrame(){var e,t,n,r,i,a;return{ruleId:this.ruleId,beginRuleCapturedEOL:this.beginRuleCapturedEOL,endRule:this.endRule,nameScopesList:null!=(i=null==(t=this.nameScopesList)?void 0:t.getExtensionIfDefined(null!=(r=null==(e=this.parent)?void 0:e.nameScopesList)?r:null))?i:[],contentNameScopesList:null!=(a=null==(n=this.contentNameScopesList)?void 0:n.getExtensionIfDefined(this.nameScopesList))?a:[]}}static pushFrame(t,n){var r,i,a;let o=ec.fromExtension(null!=(r=null==t?void 0:t.nameScopesList)?r:null,n.nameScopesList);return new e(t,n.ruleId,null!=(i=n.enterPos)?i:-1,null!=(a=n.anchorPos)?a:-1,n.beginRuleCapturedEOL,n.endRule,o,ec.fromExtension(o,n.contentNameScopesList))}constructor(e,t,n,r,a,o,s,l){(0,i._)(this,"_stackElementBrand",void 0),(0,i._)(this,"_enterPos",void 0),(0,i._)(this,"_anchorPos",void 0),(0,i._)(this,"depth",void 0),this.parent=e,this.ruleId=t,this.beginRuleCapturedEOL=a,this.endRule=o,this.nameScopesList=s,this.contentNameScopesList=l,this.depth=this.parent?this.parent.depth+1:1,this._enterPos=n,this._anchorPos=r}},(0,i._)(n,"NULL",new n(null,0,0,0,!1,null,null,null)),n),eh=class{get matchesAlways(){return this.allowAny&&0===this.unbalancedBracketScopes.length}get matchesNever(){return 0===this.balancedBracketScopes.length&&!this.allowAny}match(e){for(let t of this.unbalancedBracketScopes)if(t(e))return!1;for(let t of this.balancedBracketScopes)if(t(e))return!0;return this.allowAny}constructor(e,t){(0,i._)(this,"balancedBracketScopes",void 0),(0,i._)(this,"unbalancedBracketScopes",void 0),(0,i._)(this,"allowAny",!1),this.balancedBracketScopes=e.flatMap(e=>"*"===e?(this.allowAny=!0,[]):S(e,es).map(e=>e.matcher)),this.unbalancedBracketScopes=t.flatMap(e=>S(e,es).map(e=>e.matcher))}},ep=class{produce(e,t){this.produceFromScopes(e.contentNameScopesList,t)}produceFromScopes(e,t){var n,r,i,a;if(this._lastTokenEndIndex>=t)return;if(this._emitBinaryTokens){let a=null!=(r=null==e?void 0:e.tokenAttributes)?r:0,o=!1;if((null==(n=this.balancedBracketSelectors)?void 0:n.matchesAlways)&&(o=!0),this._tokenTypeOverrides.length>0||this.balancedBracketSelectors&&!this.balancedBracketSelectors.matchesAlways&&!this.balancedBracketSelectors.matchesNever){let t=null!=(i=null==e?void 0:e.getScopeNames())?i:[];for(let e of this._tokenTypeOverrides)e.matcher(t)&&(a=k.set(a,0,e.type,null,-1,0,0));this.balancedBracketSelectors&&(o=this.balancedBracketSelectors.match(t))}if(o&&(a=k.set(a,0,8,o,-1,0,0)),this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-1]===a){this._lastTokenEndIndex=t;return}this._binaryTokens.push(this._lastTokenEndIndex),this._binaryTokens.push(a),this._lastTokenEndIndex=t;return}let o=null!=(a=null==e?void 0:e.getScopeNames())?a:[];this._tokens.push({startIndex:this._lastTokenEndIndex,endIndex:t,scopes:o}),this._lastTokenEndIndex=t}getResult(e,t){return this._tokens.length>0&&this._tokens[this._tokens.length-1].startIndex===t-1&&this._tokens.pop(),0===this._tokens.length&&(this._lastTokenEndIndex=-1,this.produce(e,t),this._tokens[this._tokens.length-1].startIndex=0),this._tokens}getBinaryResult(e,t){this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-2]===t-1&&(this._binaryTokens.pop(),this._binaryTokens.pop()),0===this._binaryTokens.length&&(this._lastTokenEndIndex=-1,this.produce(e,t),this._binaryTokens[this._binaryTokens.length-2]=0);let n=new Uint32Array(this._binaryTokens.length);for(let e=0,t=this._binaryTokens.length;e<t;e++)n[e]=this._binaryTokens[e];return n}constructor(e,t,n,r){(0,i._)(this,"_emitBinaryTokens",void 0),(0,i._)(this,"_lineText",void 0),(0,i._)(this,"_tokens",void 0),(0,i._)(this,"_binaryTokens",void 0),(0,i._)(this,"_lastTokenEndIndex",void 0),(0,i._)(this,"_tokenTypeOverrides",void 0),this.balancedBracketSelectors=r,this._emitBinaryTokens=e,this._tokenTypeOverrides=n,this._lineText=null,this._tokens=[],this._binaryTokens=[],this._lastTokenEndIndex=0}},ef=class{dispose(){for(let e of this._grammars.values())e.dispose()}setTheme(e){this._theme=e}getColorMap(){return this._theme.getColorMap()}addGrammar(e,t){this._rawGrammars.set(e.scopeName,e),t&&this._injectionGrammars.set(e.scopeName,t)}lookup(e){return this._rawGrammars.get(e)}injections(e){return this._injectionGrammars.get(e)}getDefaults(){return this._theme.getDefaults()}themeMatch(e){return this._theme.match(e)}grammarForScopeName(e,t,n,r,i){if(!this._grammars.has(e)){let a=this._rawGrammars.get(e);if(!a)return null;this._grammars.set(e,new el(e,a,t,n,r,i,this,this._onigLib))}return this._grammars.get(e)}constructor(e,t){(0,i._)(this,"_grammars",new Map),(0,i._)(this,"_rawGrammars",new Map),(0,i._)(this,"_injectionGrammars",new Map),(0,i._)(this,"_theme",void 0),this._onigLib=t,this._theme=e}},em=class{dispose(){this._syncRegistry.dispose()}setTheme(e,t){this._syncRegistry.setTheme(h.createFromRawTheme(e,t))}getColorMap(){return this._syncRegistry.getColorMap()}loadGrammarWithEmbeddedLanguages(e,t,n){return this.loadGrammarWithConfiguration(e,t,{embeddedLanguages:n})}loadGrammarWithConfiguration(e,t,n){return this._loadGrammar(e,t,n.embeddedLanguages,n.tokenTypes,new eh(n.balancedBracketSelectors||[],n.unbalancedBracketSelectors||[]))}loadGrammar(e){return this._loadGrammar(e,0,null,null,null)}_loadGrammar(e,t,n,r,i){let a=new I(this._syncRegistry,e);for(;a.Q.length>0;)a.Q.map(e=>this._loadSingleGrammar(e.scopeName)),a.processQueue();return this._grammarForScopeName(e,t,n,r,i)}_loadSingleGrammar(e){this._ensureGrammarCache.has(e)||(this._doLoadSingleGrammar(e),this._ensureGrammarCache.set(e,!0))}_doLoadSingleGrammar(e){let t=this._options.loadGrammar(e);if(t){let n="function"==typeof this._options.getInjections?this._options.getInjections(e):void 0;this._syncRegistry.addGrammar(t,n)}}addGrammar(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return this._syncRegistry.addGrammar(e,t),this._grammarForScopeName(e.scopeName,n,r)}_grammarForScopeName(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return this._syncRegistry.grammarForScopeName(e,t,n,r,i)}constructor(e){(0,i._)(this,"_options",void 0),(0,i._)(this,"_syncRegistry",void 0),(0,i._)(this,"_ensureGrammarCache",void 0),this._options=e,this._syncRegistry=new ef(h.createFromRawTheme(e.theme,e.colorMap),e.onigLib),this._ensureGrammarCache=new Map}},eg=ed.NULL},204545:e=>{"use strict";e.s({htmlVoidElements:()=>t});let t=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"]},611084:e=>{"use strict";e.s({Schema:()=>t});class t{constructor(e,t,n){this.normal=t,this.property=e,n&&(this.space=n)}}t.prototype.normal={},t.prototype.property={},t.prototype.space=void 0},162652:e=>{"use strict";e.s({merge:()=>n});var t=e.i(611084);function n(e,n){let r={},i={};for(let t of e)Object.assign(r,t.property),Object.assign(i,t.normal);return new t.Schema(r,i,n)}},934504:e=>{"use strict";function t(e){return e.toLowerCase()}e.s({normalize:()=>t})},121770:e=>{"use strict";e.s({Info:()=>t});class t{constructor(e,t){this.attribute=t,this.property=e}}t.prototype.attribute="",t.prototype.booleanish=!1,t.prototype.boolean=!1,t.prototype.commaOrSpaceSeparated=!1,t.prototype.commaSeparated=!1,t.prototype.defined=!1,t.prototype.mustUseProperty=!1,t.prototype.number=!1,t.prototype.overloadedBoolean=!1,t.prototype.property="",t.prototype.spaceSeparated=!1,t.prototype.space=void 0},700966:e=>{"use strict";e.s({boolean:()=>n,booleanish:()=>r,commaOrSpaceSeparated:()=>l,commaSeparated:()=>s,number:()=>a,overloadedBoolean:()=>i,spaceSeparated:()=>o});let t=0,n=u(),r=u(),i=u(),a=u(),o=u(),s=u(),l=u();function u(){return 2**++t}},988861:e=>{"use strict";e.s({DefinedInfo:()=>i});var t=e.i(121770),n=e.i(700966);let r=Object.keys(n);class i extends t.Info{constructor(e,t,i,a){let o=-1;if(super(e,t),function(e,t,n){n&&(e[t]=n)}(this,"space",a),"number"==typeof i)for(;++o<r.length;){let e=r[o];!function(e,t,n){n&&(e[t]=n)}(this,r[o],(i&n[e])===n[e])}}}i.prototype.defined=!0},383202:e=>{"use strict";e.s({create:()=>i});var t=e.i(934504),n=e.i(988861),r=e.i(611084);function i(e){let i={},a={};for(let[r,o]of Object.entries(e.properties)){let s=new n.DefinedInfo(r,e.transform(e.attributes||{},r),o,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),i[r]=s,a[(0,t.normalize)(r)]=r,a[(0,t.normalize)(s.attribute)]=r}return new r.Schema(i,a,e.space)}},677263:e=>{"use strict";e.s({aria:()=>r});var t=e.i(383202),n=e.i(700966);let r=(0,t.create)({properties:{ariaActiveDescendant:null,ariaAtomic:n.booleanish,ariaAutoComplete:null,ariaBusy:n.booleanish,ariaChecked:n.booleanish,ariaColCount:n.number,ariaColIndex:n.number,ariaColSpan:n.number,ariaControls:n.spaceSeparated,ariaCurrent:null,ariaDescribedBy:n.spaceSeparated,ariaDetails:null,ariaDisabled:n.booleanish,ariaDropEffect:n.spaceSeparated,ariaErrorMessage:null,ariaExpanded:n.booleanish,ariaFlowTo:n.spaceSeparated,ariaGrabbed:n.booleanish,ariaHasPopup:null,ariaHidden:n.booleanish,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:n.spaceSeparated,ariaLevel:n.number,ariaLive:null,ariaModal:n.booleanish,ariaMultiLine:n.booleanish,ariaMultiSelectable:n.booleanish,ariaOrientation:null,ariaOwns:n.spaceSeparated,ariaPlaceholder:null,ariaPosInSet:n.number,ariaPressed:n.booleanish,ariaReadOnly:n.booleanish,ariaRelevant:null,ariaRequired:n.booleanish,ariaRoleDescription:n.spaceSeparated,ariaRowCount:n.number,ariaRowIndex:n.number,ariaRowSpan:n.number,ariaSelected:n.booleanish,ariaSetSize:n.number,ariaSort:null,ariaValueMax:n.number,ariaValueMin:n.number,ariaValueNow:n.number,ariaValueText:null,role:null},transform:(e,t)=>"role"===t?t:"aria-"+t.slice(4).toLowerCase()})},397058:e=>{"use strict";function t(e,t){return t in e?e[t]:t}e.s({caseSensitiveTransform:()=>t})},810364:e=>{"use strict";e.s({caseInsensitiveTransform:()=>n});var t=e.i(397058);function n(e,n){return(0,t.caseSensitiveTransform)(e,n.toLowerCase())}},559345:e=>{"use strict";e.s({html:()=>i});var t=e.i(810364),n=e.i(383202),r=e.i(700966);let i=(0,n.create)({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:r.commaSeparated,acceptCharset:r.spaceSeparated,accessKey:r.spaceSeparated,action:null,allow:null,allowFullScreen:r.boolean,allowPaymentRequest:r.boolean,allowUserMedia:r.boolean,alt:null,as:null,async:r.boolean,autoCapitalize:null,autoComplete:r.spaceSeparated,autoFocus:r.boolean,autoPlay:r.boolean,blocking:r.spaceSeparated,capture:null,charSet:null,checked:r.boolean,cite:null,className:r.spaceSeparated,cols:r.number,colSpan:null,content:null,contentEditable:r.booleanish,controls:r.boolean,controlsList:r.spaceSeparated,coords:r.number|r.commaSeparated,crossOrigin:null,data:null,dateTime:null,decoding:null,default:r.boolean,defer:r.boolean,dir:null,dirName:null,disabled:r.boolean,download:r.overloadedBoolean,draggable:r.booleanish,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:r.boolean,formTarget:null,headers:r.spaceSeparated,height:r.number,hidden:r.overloadedBoolean,high:r.number,href:null,hrefLang:null,htmlFor:r.spaceSeparated,httpEquiv:r.spaceSeparated,id:null,imageSizes:null,imageSrcSet:null,inert:r.boolean,inputMode:null,integrity:null,is:null,isMap:r.boolean,itemId:null,itemProp:r.spaceSeparated,itemRef:r.spaceSeparated,itemScope:r.boolean,itemType:r.spaceSeparated,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:r.boolean,low:r.number,manifest:null,max:null,maxLength:r.number,media:null,method:null,min:null,minLength:r.number,multiple:r.boolean,muted:r.boolean,name:null,nonce:null,noModule:r.boolean,noValidate:r.boolean,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:r.boolean,optimum:r.number,pattern:null,ping:r.spaceSeparated,placeholder:null,playsInline:r.boolean,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:r.boolean,referrerPolicy:null,rel:r.spaceSeparated,required:r.boolean,reversed:r.boolean,rows:r.number,rowSpan:r.number,sandbox:r.spaceSeparated,scope:null,scoped:r.boolean,seamless:r.boolean,selected:r.boolean,shadowRootClonable:r.boolean,shadowRootDelegatesFocus:r.boolean,shadowRootMode:null,shape:null,size:r.number,sizes:null,slot:null,span:r.number,spellCheck:r.booleanish,src:null,srcDoc:null,srcLang:null,srcSet:null,start:r.number,step:null,style:null,tabIndex:r.number,target:null,title:null,translate:null,type:null,typeMustMatch:r.boolean,useMap:null,value:r.booleanish,width:r.number,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:r.spaceSeparated,axis:null,background:null,bgColor:null,border:r.number,borderColor:null,bottomMargin:r.number,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:r.boolean,declare:r.boolean,event:null,face:null,frame:null,frameBorder:null,hSpace:r.number,leftMargin:r.number,link:null,longDesc:null,lowSrc:null,marginHeight:r.number,marginWidth:r.number,noResize:r.boolean,noHref:r.boolean,noShade:r.boolean,noWrap:r.boolean,object:null,profile:null,prompt:null,rev:null,rightMargin:r.number,rules:null,scheme:null,scrolling:r.booleanish,standby:null,summary:null,text:null,topMargin:r.number,valueType:null,version:null,vAlign:null,vLink:null,vSpace:r.number,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:r.boolean,disableRemotePlayback:r.boolean,prefix:null,property:null,results:r.number,security:null,unselectable:null},space:"html",transform:t.caseInsensitiveTransform})},239715:e=>{"use strict";e.s({svg:()=>i});var t=e.i(397058),n=e.i(383202),r=e.i(700966);let i=(0,n.create)({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:r.commaOrSpaceSeparated,accentHeight:r.number,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:r.number,amplitude:r.number,arabicForm:null,ascent:r.number,attributeName:null,attributeType:null,azimuth:r.number,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:r.number,by:null,calcMode:null,capHeight:r.number,className:r.spaceSeparated,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:r.number,diffuseConstant:r.number,direction:null,display:null,dur:null,divisor:r.number,dominantBaseline:null,download:r.boolean,dx:null,dy:null,edgeMode:null,editable:null,elevation:r.number,enableBackground:null,end:null,event:null,exponent:r.number,externalResourcesRequired:null,fill:null,fillOpacity:r.number,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:r.commaSeparated,g2:r.commaSeparated,glyphName:r.commaSeparated,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:r.number,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:r.number,horizOriginX:r.number,horizOriginY:r.number,id:null,ideographic:r.number,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:r.number,k:r.number,k1:r.number,k2:r.number,k3:r.number,k4:r.number,kernelMatrix:r.commaOrSpaceSeparated,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:r.number,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:r.number,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:r.number,overlineThickness:r.number,paintOrder:null,panose1:null,path:null,pathLength:r.number,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:r.spaceSeparated,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:r.number,pointsAtY:r.number,pointsAtZ:r.number,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:r.commaOrSpaceSeparated,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:r.commaOrSpaceSeparated,rev:r.commaOrSpaceSeparated,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:r.commaOrSpaceSeparated,requiredFeatures:r.commaOrSpaceSeparated,requiredFonts:r.commaOrSpaceSeparated,requiredFormats:r.commaOrSpaceSeparated,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:r.number,specularExponent:r.number,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:r.number,strikethroughThickness:r.number,string:null,stroke:null,strokeDashArray:r.commaOrSpaceSeparated,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:r.number,strokeOpacity:r.number,strokeWidth:null,style:null,surfaceScale:r.number,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:r.commaOrSpaceSeparated,tabIndex:r.number,tableValues:null,target:null,targetX:r.number,targetY:r.number,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:r.commaOrSpaceSeparated,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:r.number,underlineThickness:r.number,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:r.number,values:null,vAlphabetic:r.number,vMathematical:r.number,vectorEffect:null,vHanging:r.number,vIdeographic:r.number,version:null,vertAdvY:r.number,vertOriginX:r.number,vertOriginY:r.number,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:r.number,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:t.caseSensitiveTransform})},779411:e=>{"use strict";e.s({xlink:()=>t});let t=(0,e.i(383202).create)({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform:(e,t)=>"xlink:"+t.slice(5).toLowerCase()})},972265:e=>{"use strict";e.s({xmlns:()=>r});var t=e.i(383202),n=e.i(810364);let r=(0,t.create)({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:n.caseInsensitiveTransform})},853197:e=>{"use strict";e.s({xml:()=>t});let t=(0,e.i(383202).create)({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform:(e,t)=>"xml:"+t.slice(3).toLowerCase()})},254158:e=>{"use strict";e.s({html:()=>l,svg:()=>u});var t=e.i(162652),n=e.i(677263),r=e.i(559345),i=e.i(239715),a=e.i(779411),o=e.i(972265),s=e.i(853197);let l=(0,t.merge)([n.aria,r.html,a.xlink,o.xmlns,s.xml],"html"),u=(0,t.merge)([n.aria,i.svg,a.xlink,o.xmlns,s.xml],"svg")},521390:e=>{"use strict";e.s({zwitch:()=>n});let t={}.hasOwnProperty;function n(e,n){let r=n||{};function i(n){for(var r=arguments.length,a=Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];let s=i.invalid,l=i.handlers;if(n&&t.call(n,e)){let r=String(n[e]);s=t.call(l,r)?l[r]:i.unknown}if(s)return s.call(this,n,...a)}return i.handlers=r.handlers||{},i.invalid=r.invalid,i.unknown=r.unknown,i}},320514:e=>{"use strict";e.s({core:()=>o});let t=/["&'<>`]/g,n=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,r=/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,i=/[|\\{}()[\]^$+*?.]/g,a=new WeakMap;function o(e,o){var s;let l;if(e=e.replace(o.subset?(s=o.subset,(l=a.get(s))||(l=function(e){let t=[],n=-1;for(;++n<e.length;)t.push(e[n].replace(i,"\\$&"));return RegExp("(?:"+t.join("|")+")","g")}(s),a.set(s,l)),l):t,u),o.subset||o.escapeOnly)return e;return e.replace(n,function(e,t,n){return o.format((e.charCodeAt(0)-55296)*1024+e.charCodeAt(1)-56320+65536,n.charCodeAt(t+2),o)}).replace(r,u);function u(e,t,n){return o.format(e.charCodeAt(0),n.charCodeAt(t+1),o)}}},875781:e=>{"use strict";e.s({toHexadecimal:()=>n});let t=/[\dA-Fa-f]/;function n(e,n,r){let i="&#x"+e.toString(16).toUpperCase();return r&&n&&!t.test(String.fromCharCode(n))?i:i+";"}},84860:e=>{"use strict";e.s({toDecimal:()=>n});let t=/\d/;function n(e,n,r){let i="&#"+String(e);return r&&n&&!t.test(String.fromCharCode(n))?i:i+";"}},39989:e=>{"use strict";e.s({characterEntitiesLegacy:()=>t});let t=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"]},81877:e=>{"use strict";e.s({characterEntitiesHtml4:()=>t});let t={nbsp:"",iexcl:"",cent:"",pound:"",curren:"",yen:"",brvbar:"",sect:"",uml:"",copy:"",ordf:"",laquo:"",not:"",shy:"",reg:"",macr:"",deg:"",plusmn:"",sup2:"",sup3:"",acute:"",micro:"",para:"",middot:"",cedil:"",sup1:"",ordm:"",raquo:"",frac14:"",frac12:"",frac34:"",iquest:"",Agrave:"",Aacute:"",Acirc:"",Atilde:"",Auml:"",Aring:"",AElig:"",Ccedil:"",Egrave:"",Eacute:"",Ecirc:"",Euml:"",Igrave:"",Iacute:"",Icirc:"",Iuml:"",ETH:"",Ntilde:"",Ograve:"",Oacute:"",Ocirc:"",Otilde:"",Ouml:"",times:"",Oslash:"",Ugrave:"",Uacute:"",Ucirc:"",Uuml:"",Yacute:"",THORN:"",szlig:"",agrave:"",aacute:"",acirc:"",atilde:"",auml:"",aring:"",aelig:"",ccedil:"",egrave:"",eacute:"",ecirc:"",euml:"",igrave:"",iacute:"",icirc:"",iuml:"",eth:"",ntilde:"",ograve:"",oacute:"",ocirc:"",otilde:"",ouml:"",divide:"",oslash:"",ugrave:"",uacute:"",ucirc:"",uuml:"",yacute:"",thorn:"",yuml:"",fnof:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",bull:"",hellip:"",prime:"",Prime:"",oline:"",frasl:"",weierp:"",image:"",real:"",trade:"",alefsym:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lArr:"",uArr:"",rArr:"",dArr:"",hArr:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",lceil:"",rceil:"",lfloor:"",rfloor:"",lang:"",rang:"",loz:"",spades:"",clubs:"",hearts:"",diams:"",quot:'"',amp:"&",lt:"<",gt:">",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",circ:"",tilde:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",permil:"",lsaquo:"",rsaquo:"",euro:""}},269804:e=>{"use strict";e.s({dangerous:()=>t});let t=["cent","copy","divide","gt","lt","not","para","times"]},544626:e=>{"use strict";let t;e.s({toNamed:()=>l});var n=e.i(39989),r=e.i(81877),i=e.i(269804);let a={}.hasOwnProperty,o={};for(t in r.characterEntitiesHtml4)a.call(r.characterEntitiesHtml4,t)&&(o[r.characterEntitiesHtml4[t]]=t);let s=/[^\dA-Za-z]/;function l(e,t,r,l){let u=String.fromCharCode(e);if(a.call(o,u)){let e=o[u],a="&"+e;return r&&n.characterEntitiesLegacy.includes(e)&&!i.dangerous.includes(e)&&(!l||t&&61!==t&&s.test(String.fromCharCode(t)))?a:a+";"}return""}},418063:e=>{"use strict";e.s({formatSmart:()=>i});var t=e.i(875781),n=e.i(84860),r=e.i(544626);function i(e,i,a){let o,s=(0,t.toHexadecimal)(e,i,a.omitOptionalSemicolons);if((a.useNamedReferences||a.useShortestReferences)&&(o=(0,r.toNamed)(e,i,a.omitOptionalSemicolons,a.attribute)),(a.useShortestReferences||!o)&&a.useShortestReferences){let t=(0,n.toDecimal)(e,i,a.omitOptionalSemicolons);t.length<s.length&&(s=t)}return o&&(!a.useShortestReferences||o.length<s.length)?o:s}},178174:e=>{"use strict";function t(e){return"&#x"+e.toString(16).toUpperCase()+";"}e.s({formatBasic:()=>t})},114202:e=>{"use strict";e.s({stringifyEntities:()=>r});var t=e.i(320514),n=e.i(418063);function r(e,r){return(0,t.core)(e,Object.assign({format:n.formatSmart},r))}e.i(178174)},765065:e=>{"use strict";e.s({comment:()=>a});var t=e.i(114202);let n=/^>|^->|<!--|-->|--!>|<!-$/g,r=[">"],i=["<",">"];function a(e,a,o,s){return s.settings.bogusComments?"<?"+(0,t.stringifyEntities)(e.value,Object.assign({},s.settings.characterReferences,{subset:r}))+">":"<!--"+e.value.replace(n,function(e){return(0,t.stringifyEntities)(e,Object.assign({},s.settings.characterReferences,{subset:i}))})+"-->"}},202737:e=>{"use strict";function t(e,t,n,r){return"<!"+(r.settings.upperDoctype?"DOCTYPE":"doctype")+(r.settings.tightDoctype?"":" ")+"html>"}e.s({doctype:()=>t})},522956:e=>{"use strict";function t(e,t){let n=String(e);if("string"!=typeof t)throw TypeError("Expected character");let r=0,i=n.indexOf(t);for(;-1!==i;)r++,i=n.indexOf(t,i+t.length);return r}e.s({ccount:()=>t})},152980:e=>{"use strict";function t(e){let t=[],n=String(e||""),r=n.indexOf(","),i=0,a=!1;for(;!a;){-1===r&&(r=n.length,a=!0);let e=n.slice(i,r).trim();(e||!a)&&t.push(e),i=r+1,r=n.indexOf(",",i)}return t}function n(e,t){let n=t||{};return(""===e[e.length-1]?[...e,""]:e).join((n.padRight?" ":"")+","+(!1===n.padLeft?"":" ")).trim()}e.s({parse:()=>t,stringify:()=>n})},753448:e=>{"use strict";e.s({find:()=>s});var t=e.i(988861),n=e.i(121770),r=e.i(934504);let i=/[A-Z]/g,a=/-[a-z]/g,o=/^data[-\w.:]+$/i;function s(e,s){let c=(0,r.normalize)(s),d=s,h=n.Info;if(c in e.normal)return e.property[e.normal[c]];if(c.length>4&&"data"===c.slice(0,4)&&o.test(s)){if("-"===s.charAt(4)){let e=s.slice(5).replace(a,u);d="data"+e.charAt(0).toUpperCase()+e.slice(1)}else{let e=s.slice(4);if(!a.test(e)){let t=e.replace(i,l);"-"!==t.charAt(0)&&(t="-"+t),s="data"+t}}h=t.DefinedInfo}return new h(d,s)}function l(e){return"-"+e.toLowerCase()}function u(e){return e.charAt(1).toUpperCase()}},384779:e=>{"use strict";function t(e){let t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function n(e){return e.join(" ").trim()}e.s({parse:()=>t,stringify:()=>n})},844751:e=>{"use strict";e.s({whitespace:()=>n});let t=/[ \t\n\f\r]/g;function n(e){return"object"==typeof e?"text"===e.type&&r(e.value):r(e)}function r(e){return""===e.replace(t,"")}},883597:e=>{"use strict";e.s({siblingAfter:()=>n,siblingBefore:()=>r});var t=e.i(844751);let n=a(1),r=a(-1),i=[];function a(e){return function(n,r,a){let o=n?n.children:i,s=(r||0)+e,l=o[s];if(!a)for(;l&&(0,t.whitespace)(l);)s+=e,l=o[s];return l}}},530461:e=>{"use strict";e.s({omission:()=>n});let t={}.hasOwnProperty;function n(e){return function(n,r,i){return t.call(e,n.tagName)&&e[n.tagName](n,r,i)}}},292290:e=>{"use strict";e.s({closing:()=>r});var t=e.i(844751),n=e.i(883597);let r=(0,e.i(530461).omission)({body:function(e,t,r){let i=(0,n.siblingAfter)(r,t);return!i||"comment"!==i.type},caption:i,colgroup:i,dd:function(e,t,r){let i=(0,n.siblingAfter)(r,t);return!i||"element"===i.type&&("dt"===i.tagName||"dd"===i.tagName)},dt:function(e,t,r){let i=(0,n.siblingAfter)(r,t);return!!(i&&"element"===i.type&&("dt"===i.tagName||"dd"===i.tagName))},head:i,html:function(e,t,r){let i=(0,n.siblingAfter)(r,t);return!i||"comment"!==i.type},li:function(e,t,r){let i=(0,n.siblingAfter)(r,t);return!i||"element"===i.type&&"li"===i.tagName},optgroup:function(e,t,r){let i=(0,n.siblingAfter)(r,t);return!i||"element"===i.type&&"optgroup"===i.tagName},option:function(e,t,r){let i=(0,n.siblingAfter)(r,t);return!i||"element"===i.type&&("option"===i.tagName||"optgroup"===i.tagName)},p:function(e,t,r){let i=(0,n.siblingAfter)(r,t);return i?"element"===i.type&&("address"===i.tagName||"article"===i.tagName||"aside"===i.tagName||"blockquote"===i.tagName||"details"===i.tagName||"div"===i.tagName||"dl"===i.tagName||"fieldset"===i.tagName||"figcaption"===i.tagName||"figure"===i.tagName||"footer"===i.tagName||"form"===i.tagName||"h1"===i.tagName||"h2"===i.tagName||"h3"===i.tagName||"h4"===i.tagName||"h5"===i.tagName||"h6"===i.tagName||"header"===i.tagName||"hgroup"===i.tagName||"hr"===i.tagName||"main"===i.tagName||"menu"===i.tagName||"nav"===i.tagName||"ol"===i.tagName||"p"===i.tagName||"pre"===i.tagName||"section"===i.tagName||"table"===i.tagName||"ul"===i.tagName):!r||"element"!==r.type||"a"!==r.tagName&&"audio"!==r.tagName&&"del"!==r.tagName&&"ins"!==r.tagName&&"map"!==r.tagName&&"noscript"!==r.tagName&&"video"!==r.tagName},rp:a,rt:a,tbody:function(e,t,r){let i=(0,n.siblingAfter)(r,t);return!i||"element"===i.type&&("tbody"===i.tagName||"tfoot"===i.tagName)},td:o,tfoot:function(e,t,r){return!(0,n.siblingAfter)(r,t)},th:o,thead:function(e,t,r){let i=(0,n.siblingAfter)(r,t);return!!(i&&"element"===i.type&&("tbody"===i.tagName||"tfoot"===i.tagName))},tr:function(e,t,r){let i=(0,n.siblingAfter)(r,t);return!i||"element"===i.type&&"tr"===i.tagName}});function i(e,r,i){let a=(0,n.siblingAfter)(i,r,!0);return!a||"comment"!==a.type&&!("text"===a.type&&(0,t.whitespace)(a.value.charAt(0)))}function a(e,t,r){let i=(0,n.siblingAfter)(r,t);return!i||"element"===i.type&&("rp"===i.tagName||"rt"===i.tagName)}function o(e,t,r){let i=(0,n.siblingAfter)(r,t);return!i||"element"===i.type&&("td"===i.tagName||"th"===i.tagName)}},820992:e=>{"use strict";e.s({opening:()=>i});var t=e.i(844751),n=e.i(883597),r=e.i(292290);let i=(0,e.i(530461).omission)({body:function(e){let r=(0,n.siblingAfter)(e,-1,!0);return!r||"comment"!==r.type&&!("text"===r.type&&(0,t.whitespace)(r.value.charAt(0)))&&("element"!==r.type||"meta"!==r.tagName&&"link"!==r.tagName&&"script"!==r.tagName&&"style"!==r.tagName&&"template"!==r.tagName)},colgroup:function(e,t,i){let a=(0,n.siblingBefore)(i,t),o=(0,n.siblingAfter)(e,-1,!0);return!(i&&a&&"element"===a.type&&"colgroup"===a.tagName&&(0,r.closing)(a,i.children.indexOf(a),i))&&!!(o&&"element"===o.type&&"col"===o.tagName)},head:function(e){let t=new Set;for(let n of e.children)if("element"===n.type&&("base"===n.tagName||"title"===n.tagName)){if(t.has(n.tagName))return!1;t.add(n.tagName)}let n=e.children[0];return!n||"element"===n.type},html:function(e){let t=(0,n.siblingAfter)(e,-1);return!t||"comment"!==t.type},tbody:function(e,t,i){let a=(0,n.siblingBefore)(i,t),o=(0,n.siblingAfter)(e,-1);return!(i&&a&&"element"===a.type&&("thead"===a.tagName||"tbody"===a.tagName)&&(0,r.closing)(a,i.children.indexOf(a),i))&&!!(o&&"element"===o.type&&"tr"===o.tagName)}})},596855:e=>{"use strict";e.s({element:()=>c});var t=e.i(522956),n=e.i(152980),r=e.i(753448),i=e.i(254158),a=e.i(384779),o=e.i(114202),s=e.i(292290),l=e.i(820992);let u={name:[["	\n\f\r &/=>".split(""),"	\n\f\r \"&'/=>`".split("")],["\0	\n\f\r \"&'/<=>".split(""),"\0	\n\f\r \"&'/<=>`".split("")]],unquoted:[["	\n\f\r &>".split(""),"\0	\n\f\r \"&'<=>`".split("")],["\0	\n\f\r \"&'<=>`".split(""),"\0	\n\f\r \"&'<=>`".split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]};function c(e,c,d,h){let p,f=h.schema,m="svg"!==f.space&&h.settings.omitOptionalTags,g="svg"===f.space?h.settings.closeEmptyElements:h.settings.voids.includes(e.tagName.toLowerCase()),y=[];"html"===f.space&&"svg"===e.tagName&&(h.schema=i.svg);let b=function(e,i){let s,l=[],c=-1;if(i){for(s in i)if(null!==i[s]&&void 0!==i[s]){let c=function(e,i,s){let l,c=(0,r.find)(e.schema,i),d=e.settings.allowParseErrors&&"html"===e.schema.space?0:1,h=+!e.settings.allowDangerousCharacters,p=e.quote;if(c.overloadedBoolean&&(s===c.attribute||""===s)?s=!0:(c.boolean||c.overloadedBoolean)&&("string"!=typeof s||s===c.attribute||""===s)&&(s=!!s),null==s||!1===s||"number"==typeof s&&Number.isNaN(s))return"";let f=(0,o.stringifyEntities)(c.attribute,Object.assign({},e.settings.characterReferences,{subset:u.name[d][h]}));return!0===s||(s=Array.isArray(s)?(c.commaSeparated?n.stringify:a.stringify)(s,{padLeft:!e.settings.tightCommaSeparatedLists}):String(s),e.settings.collapseEmptyAttributes&&!s)?f:(e.settings.preferUnquoted&&(l=(0,o.stringifyEntities)(s,Object.assign({},e.settings.characterReferences,{attribute:!0,subset:u.unquoted[d][h]}))),l!==s&&(e.settings.quoteSmart&&(0,t.ccount)(s,p)>(0,t.ccount)(s,e.alternative)&&(p=e.alternative),l=p+(0,o.stringifyEntities)(s,Object.assign({},e.settings.characterReferences,{subset:("'"===p?u.single:u.double)[d][h],attribute:!0}))+p),f+(l?"="+l:l))}(e,s,i[s]);c&&l.push(c)}}for(;++c<l.length;){let t=e.settings.tightAttributes?l[c].charAt(l[c].length-1):void 0;c!==l.length-1&&'"'!==t&&"'"!==t&&(l[c]+=" ")}return l.join("")}(h,e.properties),x=h.all("html"===f.space&&"template"===e.tagName?e.content:e);return h.schema=f,x&&(g=!1),!b&&m&&(0,l.opening)(e,c,d)||(y.push("<",e.tagName,b?" "+b:""),g&&("svg"===f.space||h.settings.closeSelfClosing)&&(p=b.charAt(b.length-1),(!h.settings.tightSelfClosing||"/"===p||p&&'"'!==p&&"'"!==p)&&y.push(" "),y.push("/")),y.push(">")),y.push(x),g||m&&(0,s.closing)(e,c,d)||y.push("</"+e.tagName+">"),y.join("")}},751185:e=>{"use strict";e.s({text:()=>r});var t=e.i(114202);let n=["<","&"];function r(e,r,i,a){return i&&"element"===i.type&&("script"===i.tagName||"style"===i.tagName)?e.value:(0,t.stringifyEntities)(e.value,Object.assign({},a.settings.characterReferences,{subset:n}))}},476427:e=>{"use strict";e.s({raw:()=>n});var t=e.i(751185);function n(e,n,r,i){return i.settings.allowDangerousHtml?e.value:(0,t.text)(e,n,r,i)}},868765:e=>{"use strict";function t(e,t,n,r){return r.all(e)}e.s({root:()=>t})},993196:e=>{"use strict";e.s({handle:()=>l});var t=e.i(521390),n=e.i(765065),r=e.i(202737),i=e.i(596855),a=e.i(476427),o=e.i(868765),s=e.i(751185);let l=(0,t.zwitch)("type",{invalid:function(e){throw Error("Expected node, not `"+e+"`")},unknown:function(e){throw Error("Cannot compile unknown node `"+e.type+"`")},handlers:{comment:n.comment,doctype:r.doctype,element:i.element,raw:a.raw,root:o.root,text:s.text}})},758428:e=>{"use strict";e.s({toHtml:()=>s});var t=e.i(204545),n=e.i(254158),r=e.i(993196);let i={},a={},o=[];function s(e,r){let o=r||i,s=o.quote||'"';if('"'!==s&&"'"!==s)throw Error("Invalid quote `"+s+"`, expected `'` or `\"`");return({one:l,all:u,settings:{omitOptionalTags:o.omitOptionalTags||!1,allowParseErrors:o.allowParseErrors||!1,allowDangerousCharacters:o.allowDangerousCharacters||!1,quoteSmart:o.quoteSmart||!1,preferUnquoted:o.preferUnquoted||!1,tightAttributes:o.tightAttributes||!1,upperDoctype:o.upperDoctype||!1,tightDoctype:o.tightDoctype||!1,bogusComments:o.bogusComments||!1,tightCommaSeparatedLists:o.tightCommaSeparatedLists||!1,tightSelfClosing:o.tightSelfClosing||!1,collapseEmptyAttributes:o.collapseEmptyAttributes||!1,allowDangerousHtml:o.allowDangerousHtml||!1,voids:o.voids||t.htmlVoidElements,characterReferences:o.characterReferences||a,closeSelfClosing:o.closeSelfClosing||!1,closeEmptyElements:o.closeEmptyElements||!1},schema:"svg"===o.space?n.svg:n.html,quote:s,alternative:'"'===s?"'":'"'}).one(Array.isArray(e)?{type:"root",children:e}:e,void 0,void 0)}function l(e,t,n){return(0,r.handle)(e,t,n,this)}function u(e){let t=[],n=e&&e.children||o,r=-1;for(;++r<n.length;)t[r]=this.one(n[r],r,e);return t.join("")}},62260:e=>{"use strict";e.s({createSingletonShorthands:()=>X,createdBundledHighlighter:()=>Y,guessEmbeddedLanguages:()=>p});var t=e.i(11968),n=e.i(399333),r=e.i(591145),i=e.i(758428);function a(e,t){let n="string"==typeof e?{}:{...e.colorReplacements},r="string"==typeof e?e:e.name;for(let[e,i]of Object.entries((null==t?void 0:t.colorReplacements)||{}))"string"==typeof i?n[e]=i:e===r&&Object.assign(n,i);return n}function o(e,t){return e&&(null==t?void 0:t[null==e?void 0:e.toLowerCase()])||e}async function s(e){return Promise.resolve("function"==typeof e?e():e).then(e=>e.default||e)}function l(e){return!e||["plaintext","txt","text","plain"].includes(e)}function u(e){return"ansi"===e||l(e)}function c(e){return"none"===e}function d(e,t){var n;if(!t)return e;for(let r of(e.properties||(e.properties={}),(n=e.properties).class||(n.class=[]),"string"==typeof e.properties.class&&(e.properties.class=e.properties.class.split(/\s+/g)),Array.isArray(e.properties.class)||(e.properties.class=[]),Array.isArray(t)?t:t.split(/\s+/g)))r&&!e.properties.class.includes(r)&&e.properties.class.push(r);return e}function h(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.split(/(\r?\n)/g),r=0,i=[];for(let e=0;e<n.length;e+=2){var a;let o=t?n[e]+(n[e+1]||""):n[e];i.push([o,r]),r+=n[e].length,r+=(null==(a=n[e+1])?void 0:a.length)||0}return i}function p(e,t,n){let r=new Set;for(let t of e.matchAll(/lang=["']([\w-]+)["']/g))r.add(t[1]);for(let t of e.matchAll(/(?:```|~~~)([\w-]+)/g))r.add(t[1]);for(let t of e.matchAll(/\\begin\{([\w-]+)\}/g))r.add(t[1]);if(!n)return Array.from(r);let i=n.getBundledLanguages();return Array.from(r).filter(e=>e&&i[e])}let f="light-dark()",m=["color","background-color"];function g(e){let t={};if(e.color&&(t.color=e.color),e.bgColor&&(t["background-color"]=e.bgColor),e.fontStyle){e.fontStyle&r.FontStyle.Italic&&(t["font-style"]="italic"),e.fontStyle&r.FontStyle.Bold&&(t["font-weight"]="bold");let n=[];e.fontStyle&r.FontStyle.Underline&&n.push("underline"),e.fontStyle&r.FontStyle.Strikethrough&&n.push("line-through"),n.length&&(t["text-decoration"]=n.join(" "))}return t}function y(e){return"string"==typeof e?e:Object.entries(e).map(e=>{let[t,n]=e;return"".concat(t,":").concat(n)}).join(";")}let b=new WeakMap;function x(e,t){b.set(e,t)}function w(e){return b.get(e)}class k{get themes(){return Object.keys(this._stacks)}get theme(){return this.themes[0]}get _stack(){return this._stacks[this.theme]}static initial(e,t){return new k(Object.fromEntries((Array.isArray(t)?t:[t]).map(e=>[e,r.INITIAL])),e)}getInternalStack(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.theme;return this._stacks[e]}getScopes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.theme;var t=this._stacks[e];let n=[],r=new Set;return!function e(t){var i;if(r.has(t))return;r.add(t);let a=null==t||null==(i=t.nameScopesList)?void 0:i.scopeName;a&&n.push(a),t.parent&&e(t.parent)}(t),n}toJSON(){return{lang:this.lang,theme:this.theme,themes:this.themes,scopes:this.getScopes()}}constructor(...e){if((0,t._)(this,"_stacks",{}),(0,t._)(this,"lang",void 0),2===e.length){let[t,n]=e;this.lang=n,this._stacks=t}else{let[t,n,r]=e;this.lang=n,this._stacks={[r]:t}}}}let S=[function(){let e=new WeakMap;function t(t){if(!e.has(t.meta)){let r=function(e){if("number"==typeof e){if(e<0||e>t.source.length)throw new n.ShikiError("Invalid decoration offset: ".concat(e,". Code length: ").concat(t.source.length));return{...i.indexToPos(e),offset:e}}{let t=i.lines[e.line];if(void 0===t)throw new n.ShikiError("Invalid decoration position ".concat(JSON.stringify(e),". Lines length: ").concat(i.lines.length));let r=e.character;if(r<0&&(r=t.length+r),r<0||r>t.length)throw new n.ShikiError("Invalid decoration position ".concat(JSON.stringify(e),". Line ").concat(e.line," length: ").concat(t.length));return{...e,character:r,offset:i.posToIndex(e.line,r)}}},i=function(e){let t=h(e,!0).map(e=>{let[t]=e;return t});return{lines:t,indexToPos:function(n){if(n===e.length)return{line:t.length-1,character:t[t.length-1].length};let r=n,i=0;for(let e of t){if(r<e.length)break;r-=e.length,i++}return{line:i,character:r}},posToIndex:function(e,n){let r=0;for(let n=0;n<e;n++)r+=t[n].length;return r+n}}}(t.source),a=(t.options.decorations||[]).map(e=>({...e,start:r(e.start),end:r(e.end)}));(function(e){for(let t=0;t<e.length;t++){let r=e[t];if(r.start.offset>r.end.offset)throw new n.ShikiError("Invalid decoration range: ".concat(JSON.stringify(r.start)," - ").concat(JSON.stringify(r.end)));for(let i=t+1;i<e.length;i++){let t=e[i],a=r.start.offset<=t.start.offset&&t.start.offset<r.end.offset,o=r.start.offset<t.end.offset&&t.end.offset<=r.end.offset,s=t.start.offset<=r.start.offset&&r.start.offset<t.end.offset,l=t.start.offset<r.end.offset&&r.end.offset<=t.end.offset;if(a||o||s||l){if(a&&o||s&&l||s&&r.start.offset===r.end.offset||o&&t.start.offset===t.end.offset)continue;throw new n.ShikiError("Decorations ".concat(JSON.stringify(r.start)," and ").concat(JSON.stringify(t.start)," intersect."))}}}})(a),e.set(t.meta,{decorations:a,converter:i,source:t.source})}return e.get(t.meta)}return{name:"shiki:decorations",tokens(e){var n;if(null==(n=this.options.decorations)?void 0:n.length){var r=e,i=t(this).decorations.flatMap(e=>[e.start.offset,e.end.offset]);let n=Array.from(i instanceof Set?i:new Set(i)).sort((e,t)=>e-t);return n.length?r.map(e=>e.flatMap(e=>{let t=n.filter(t=>e.offset<t&&t<e.offset+e.content.length).map(t=>t-e.offset).sort((e,t)=>e-t);if(!t.length)return e;let r=0,i=[];for(let n of t)n>r&&i.push({...e,content:e.content.slice(r,n),offset:e.offset+r}),r=n;return r<e.content.length&&i.push({...e,content:e.content.slice(r),offset:e.offset+r}),i})):r}},code(e){var r;if(!(null==(r=this.options.decorations)?void 0:r.length))return;let i=t(this),a=Array.from(e.children).filter(e=>"element"===e.type&&"span"===e.tagName);if(a.length!==i.converter.lines.length)throw new n.ShikiError("Number of lines in code element (".concat(a.length,") does not match the number of lines in the source (").concat(i.converter.lines.length,"). Failed to apply decorations."));function o(e,t,r,i){let o=a[e],l="",u=-1,c=-1;if(0===t&&(u=0),0===r&&(c=0),r===1/0&&(c=o.children.length),-1===u||-1===c)for(let e=0;e<o.children.length;e++)l+=function e(t){return"text"===t.type?t.value:"element"===t.type?t.children.map(e).join(""):""}(o.children[e]),-1===u&&l.length===t&&(u=e+1),-1===c&&l.length===r&&(c=e+1);if(-1===u)throw new n.ShikiError("Failed to find start index for decoration ".concat(JSON.stringify(i.start)));if(-1===c)throw new n.ShikiError("Failed to find end index for decoration ".concat(JSON.stringify(i.end)));let d=o.children.slice(u,c);if(i.alwaysWrap||d.length!==o.children.length)if(i.alwaysWrap||1!==d.length||"element"!==d[0].type){let e={type:"element",tagName:"span",properties:{},children:d};s(e,i,"wrapper"),o.children.splice(u,d.length,e)}else s(d[0],i,"token");else s(o,i,"line")}function s(e,t,n){var r;let i=t.properties||{},a=t.transform||(e=>e);return e.tagName=t.tagName||"span",e.properties={...e.properties,...i,class:e.properties.class},(null==(r=t.properties)?void 0:r.class)&&d(e,t.properties.class),e=a(e,n)||e}let l=[];for(let e of i.decorations.sort((e,t)=>t.start.offset-e.start.offset||e.end.offset-t.end.offset)){let{start:t,end:n}=e;if(t.line===n.line)o(t.line,t.character,n.character,e);else if(t.line<n.line){o(t.line,t.character,1/0,e);for(let r=t.line+1;r<n.line;r++)l.unshift(()=>{var t;a[t=r]=s(a[t],e,"line")});o(n.line,0,n.character,e)}}l.forEach(e=>e())}}}()];function _(e){let t=function(e){let t=[],n=[],r=[];for(let i of e)switch(i.enforce){case"pre":t.push(i);break;case"post":n.push(i);break;default:r.push(i)}return{pre:t,post:n,normal:r}}(e.transformers||[]);return[...t.pre,...t.normal,...t.post,...S]}var C=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"],A={1:"bold",2:"dim",3:"italic",4:"underline",7:"reverse",8:"hidden",9:"strikethrough"};function E(e){let t=e.shift();if("2"===t){let t=e.splice(0,3).map(e=>Number.parseInt(e));if(3!==t.length||t.some(e=>Number.isNaN(e)))return;return{type:"rgb",rgb:t}}if("5"===t){let t=e.shift();if(t)return{type:"table",index:Number(t)}}}var T={black:"#000000",red:"#bb0000",green:"#00bb00",yellow:"#bbbb00",blue:"#0000bb",magenta:"#ff00ff",cyan:"#00bbbb",white:"#eeeeee",brightBlack:"#555555",brightRed:"#ff5555",brightGreen:"#00ff00",brightYellow:"#ffff55",brightBlue:"#5555ff",brightMagenta:"#ff55ff",brightCyan:"#55ffff",brightWhite:"#ffffff"};function M(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{lang:s="text",theme:u=e.getLoadedThemes()[0]}=i;if(l(s)||c(u))return h(t).map(e=>[{content:e[0],offset:e[1]}]);let{theme:d,colorMap:p}=e.setTheme(u);if("ansi"===s)return function(e,t,n){let i,s,l,u=a(e,n),c=h(t),d=function(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T;function n(e){return"#".concat(e.map(e=>Math.max(0,Math.min(e,255)).toString(16).padStart(2,"0")).join(""))}return{value:function(r){switch(r.type){case"named":return t[r.name];case"rgb":return n(r.rgb);case"table":var i;return i=r.index,function(){if(e)return e;e=[];for(let n=0;n<C.length;n++)e.push(t[C[n]]);let r=[0,95,135,175,215,255];for(let t=0;t<6;t++)for(let i=0;i<6;i++)for(let a=0;a<6;a++)e.push(n([r[t],r[i],r[a]]));let i=8;for(let t=0;t<24;t++,i+=10)e.push(n([i,i,i]));return e}()[i]}}}}(Object.fromEntries(C.map(t=>{var n;return[t,null==(n=e.colors)?void 0:n["terminal.ansi".concat(t[0].toUpperCase()).concat(t.substring(1))]]}))),p=(i=null,s=null,l=new Set,{parse(e){let t=[],n=0;do{let r=function(e,t){let n=e.indexOf("\x1b",t);if(-1!==n&&"["===e[n+1]){let t=e.indexOf("m",n);if(-1!==t)return{sequence:e.substring(n+2,t).split(";"),startPosition:n,position:t+1}}return{position:e.length}}(e,n),a=r.sequence?e.substring(n,r.startPosition):e.substring(n);if(a.length>0&&t.push({value:a,foreground:i,background:s,decorations:new Set(l)}),r.sequence){let e=function(e){let t=[];for(;e.length>0;){let n=e.shift();if(!n)continue;let r=Number.parseInt(n);if(!Number.isNaN(r))if(0===r)t.push({type:"resetAll"});else if(r<=9)A[r]&&t.push({type:"setDecoration",value:A[r]});else if(r<=29){let e=A[r-20];e&&(t.push({type:"resetDecoration",value:e}),"dim"===e&&t.push({type:"resetDecoration",value:"bold"}))}else if(r<=37)t.push({type:"setForegroundColor",value:{type:"named",name:C[r-30]}});else if(38===r){let n=E(e);n&&t.push({type:"setForegroundColor",value:n})}else if(39===r)t.push({type:"resetForegroundColor"});else if(r<=47)t.push({type:"setBackgroundColor",value:{type:"named",name:C[r-40]}});else if(48===r){let n=E(e);n&&t.push({type:"setBackgroundColor",value:n})}else 49===r?t.push({type:"resetBackgroundColor"}):53===r?t.push({type:"setDecoration",value:"overline"}):55===r?t.push({type:"resetDecoration",value:"overline"}):r>=90&&r<=97?t.push({type:"setForegroundColor",value:{type:"named",name:C[r-90+8]}}):r>=100&&r<=107&&t.push({type:"setBackgroundColor",value:{type:"named",name:C[r-100+8]}})}return t}(r.sequence);for(let t of e)"resetAll"===t.type?(i=null,s=null,l.clear()):"resetForegroundColor"===t.type?i=null:"resetBackgroundColor"===t.type?s=null:"resetDecoration"===t.type&&l.delete(t.value);for(let t of e)"setForegroundColor"===t.type?i=t.value:"setBackgroundColor"===t.type?s=t.value:"setDecoration"===t.type&&l.add(t.value)}n=r.position}while(n<e.length)return t}});return c.map(t=>p.parse(t[0]).map(n=>{let i,a;n.decorations.has("reverse")?(i=n.background?d.value(n.background):e.bg,a=n.foreground?d.value(n.foreground):e.fg):(i=n.foreground?d.value(n.foreground):e.fg,a=n.background?d.value(n.background):void 0),i=o(i,u),a=o(a,u),n.decorations.has("dim")&&(i=function(e){let t=e.match(/#([0-9a-f]{3})([0-9a-f]{3})?([0-9a-f]{2})?/);if(t)if(t[3]){let e=Math.round(Number.parseInt(t[3],16)/2).toString(16).padStart(2,"0");return"#".concat(t[1]).concat(t[2]).concat(e)}else if(t[2])return"#".concat(t[1]).concat(t[2],"80");else return"#".concat(Array.from(t[1]).map(e=>"".concat(e).concat(e)).join(""),"80");let n=e.match(/var\((--[\w-]+-ansi-[\w-]+)\)/);return n?"var(".concat(n[1],"-dim)"):e}(i));let s=r.FontStyle.None;return n.decorations.has("bold")&&(s|=r.FontStyle.Bold),n.decorations.has("italic")&&(s|=r.FontStyle.Italic),n.decorations.has("underline")&&(s|=r.FontStyle.Underline),n.decorations.has("strikethrough")&&(s|=r.FontStyle.Strikethrough),{content:n.value,offset:t[1],color:i,bgColor:a,fontStyle:s}}))}(d,t,i);let f=e.getLanguage(s);if(i.grammarState){if(i.grammarState.lang!==f.name)throw new n.ShikiError('Grammar state language "'.concat(i.grammarState.lang,'" does not match highlight language "').concat(f.name,'"'));if(!i.grammarState.themes.includes(d.name))throw new n.ShikiError('Grammar state themes "'.concat(i.grammarState.themes,'" do not contain highlight theme "').concat(d.name,'"'))}var m=t,g=f,y=d,b=p,w=i;let S=I(m,g,y,b,w),_=new k(I(m,g,y,b,w).stateStack,g.name,y.name);return x(S.tokens,_),S.tokens}function I(e,t,i,s,l){var u;let c=a(i,l),{tokenizeMaxLineLength:d=0,tokenizeTimeLimit:p=500}=l,f=h(e),m=l.grammarState?null!=(u=function(e,t){if(!(e instanceof k))throw new n.ShikiError("Invalid grammar state");return e.getInternalStack(t)}(l.grammarState,i.name))?u:r.INITIAL:null!=l.grammarContextCode?I(l.grammarContextCode,t,i,s,{...l,grammarState:void 0,grammarContextCode:void 0}).stateStack:r.INITIAL,g=[],y=[];for(let e=0,n=f.length;e<n;e++){let n,a,[u,h]=f[e];if(""===u){g=[],y.push([]);continue}if(d>0&&u.length>=d){g=[],y.push([{content:u,offset:h,color:"",fontStyle:0}]);continue}l.includeExplanation&&(n=t.tokenizeLine(u,m,p).tokens,a=0);let b=t.tokenizeLine2(u,m,p),x=b.tokens.length/2;for(let e=0;e<x;e++){let t=b.tokens[2*e],d=e+1<x?b.tokens[2*e+2]:u.length;if(t===d)continue;let p=b.tokens[2*e+1],f=o(s[r.EncodedTokenMetadata.getForeground(p)],c),m=r.EncodedTokenMetadata.getFontStyle(p),y={content:u.substring(t,d),offset:h+t,color:f,fontStyle:m};if(l.includeExplanation){let e=[];if("scopeName"!==l.includeExplanation)for(let t of i.settings){let n;switch(typeof t.scope){case"string":n=t.scope.split(/,/).map(e=>e.trim());break;case"object":n=t.scope;break;default:continue}e.push({settings:t,selectors:n.map(e=>e.split(/ /))})}y.explanation=[];let r=0;for(;t+r<d;){let t=n[a],i=u.substring(t.startIndex,t.endIndex);r+=i.length,y.explanation.push({content:i,scopes:"scopeName"===l.includeExplanation?t.scopes.map(e=>({scopeName:e})):function(e,t){let n=[];for(let r=0,i=t.length;r<i;r++){let i=t[r];n[r]={scopeName:i,themeMatches:function(e,t,n){let r=[];for(let{selectors:i,settings:a}of e)for(let e of i)if(function(e,t,n){if(!N(e[e.length-1],t))return!1;let r=e.length-2,i=n.length-1;for(;r>=0&&i>=0;)N(e[r],n[i])&&(r-=1),i-=1;return -1===r}(e,t,n)){r.push(a);break}return r}(e,i,t.slice(0,r))}}return n}(e,t.scopes)}),a+=1}}g.push(y)}y.push(g),g=[],m=b.ruleStack}return{tokens:y,stateStack:m}}function N(e,t){return e===t||t.substring(0,e.length)===e&&"."===t[e.length]}function D(e,t,n){let r=Object.entries(n.themes).filter(e=>e[1]).map(e=>({color:e[0],theme:e[1]})),i=r.map(r=>{let i=M(e,t,{...n,theme:r.theme}),a=w(i);return{tokens:i,state:a,theme:"string"==typeof r.theme?r.theme:r.theme.name}}),a=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let r=t.map(()=>[]),i=t.length;for(let e=0;e<t[0].length;e++){let n=t.map(t=>t[e]),a=r.map(()=>[]);r.forEach((e,t)=>e.push(a[t]));let o=n.map(()=>0),s=n.map(e=>e[0]);for(;s.every(e=>e);){let e=Math.min(...s.map(e=>e.content.length));for(let t=0;t<i;t++){let r=s[t];r.content.length===e?(a[t].push(r),o[t]+=1,s[t]=n[t][o[t]]):(a[t].push({...r,content:r.content.slice(0,e)}),s[t]={...r,content:r.content.slice(e),offset:r.offset+e})}}}return r}(...i.map(e=>e.tokens)),o=a[0].map((e,t)=>e.map((e,i)=>{let o={content:e.content,variants:{},offset:e.offset};return"includeExplanation"in n&&n.includeExplanation&&(o.explanation=e.explanation),a.forEach((e,n)=>{let{content:a,explanation:s,offset:l,...u}=e[t][i];o.variants[r[n].color]=u}),o})),s=i[0].state?new k(Object.fromEntries(i.map(e=>{var t;return[e.theme,null==(t=e.state)?void 0:t.getInternalStack(e.theme)]})),i[0].state.lang):void 0;return s&&x(o,s),o}function P(e,t,r){let i,s,l,u,c,d;if("themes"in r){let{defaultColor:o="light",cssVariablePrefix:h="--shiki-",colorsRendering:p="css-vars"}=r,y=Object.entries(r.themes).filter(e=>e[1]).map(e=>({color:e[0],theme:e[1]})).sort((e,t)=>e.color===o?-1:+(t.color===o));if(0===y.length)throw new n.ShikiError("`themes` option must not be empty");let b=D(e,t,r);if(d=w(b),o&&f!==o&&!y.find(e=>e.color===o))throw new n.ShikiError("`themes` option must contain the defaultColor key `".concat(o,"`"));let k=y.map(t=>e.getTheme(t.theme)),S=y.map(e=>e.color);l=b.map(e=>e.map(e=>(function(e,t,r,i){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"css-vars",o={content:e.content,explanation:e.explanation,offset:e.offset},s=t.map(t=>g(e.variants[t])),l=new Set(s.flatMap(e=>Object.keys(e))),u={},c=(e,n)=>r+t[e]+("color"===n||"color"===n?"":"background-color"===n?"-bg":"-".concat(n));return s.forEach((e,r)=>{for(let o of l){let l=e[o]||"inherit";if(0===r&&i&&m.includes(o))if(i===f&&s.length>1){let e=t.findIndex(e=>"light"===e),i=t.findIndex(e=>"dark"===e);if(-1===e||-1===i)throw new n.ShikiError('When using `defaultColor: "light-dark()"`, you must provide both `light` and `dark` themes');let d=s[e][o]||"inherit",h=s[i][o]||"inherit";u[o]="light-dark(".concat(d,", ").concat(h,")"),"css-vars"===a&&(u[c(r,o)]=l)}else u[o]=l;else"css-vars"===a&&(u[c(r,o)]=l)}}),o.htmlStyle=u,o})(e,S,h,o,p))),d&&x(l,d);let _=y.map(e=>a(e.theme,r));s=R(y,k,_,h,o,"fg",p),i=R(y,k,_,h,o,"bg",p),u="shiki-themes ".concat(k.map(e=>e.name).join(" ")),c=o?void 0:[s,i].join(";")}else if("theme"in r){let n=a(r.theme,r);l=M(e,t,r);let c=e.getTheme(r.theme);i=o(c.bg,n),s=o(c.fg,n),u=c.name,d=w(l)}else throw new n.ShikiError("Invalid options, either `theme` or `themes` must be provided");return{tokens:l,fg:s,bg:i,themeName:u,rootStyle:c,grammarState:d}}function R(e,t,r,i,a,s,l){return e.map((u,c)=>{let d=o(t[c][s],r[c])||"inherit",h="".concat(i+u.color).concat("bg"===s?"-bg":"",":").concat(d);if(0===c&&a){if(a===f&&e.length>1){let i=e.findIndex(e=>"light"===e.color),a=e.findIndex(e=>"dark"===e.color);if(-1===i||-1===a)throw new n.ShikiError('When using `defaultColor: "light-dark()"`, you must provide both `light` and `dark` themes');let l=o(t[i][s],r[i])||"inherit",u=o(t[a][s],r[a])||"inherit";return"light-dark(".concat(l,", ").concat(u,");").concat(h)}return d}return"css-vars"===l?h:null}).filter(e=>!!e).join(";")}function O(e,t,n){var i,a;let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{meta:{},options:n,codeToHast:(t,n)=>O(e,t,n),codeToTokens:(t,n)=>P(e,t,n)},s=t;for(let e of _(n))s=(null==(i=e.preprocess)?void 0:i.call(o,s,n))||s;let{tokens:l,fg:u,bg:c,themeName:h,rootStyle:p,grammarState:f}=P(e,s,n),{mergeWhitespaces:m=!0,mergeSameStyleTokens:b=!1}=n;!0===m?l=l.map(e=>{let t=[],n="",i=0;return e.forEach((a,o)=>{let s=!(a.fontStyle&&(a.fontStyle&r.FontStyle.Underline||a.fontStyle&r.FontStyle.Strikethrough));s&&a.content.match(/^\s+$/)&&e[o+1]?(i||(i=a.offset),n+=a.content):n?(s?t.push({...a,offset:i,content:n+a.content}):t.push({content:n,offset:i},a),i=0,n=""):t.push(a)}),t}):"never"===m&&(l=l.map(e=>e.flatMap(e=>{if(e.content.match(/^\s+$/))return e;let t=e.content.match(/^(\s*)(.*?)(\s*)$/);if(!t)return e;let[,n,r,i]=t;if(!n&&!i)return e;let a=[{...e,offset:e.offset+n.length,content:r}];return n&&a.unshift({content:n,offset:e.offset}),i&&a.push({content:i,offset:e.offset+n.length+r.length}),a}))),b&&(l=l.map(e=>{let t=[];for(let n of e){if(0===t.length){t.push({...n});continue}let e=t[t.length-1],i=y(e.htmlStyle||g(e)),a=y(n.htmlStyle||g(n)),o=e.fontStyle&&(e.fontStyle&r.FontStyle.Underline||e.fontStyle&r.FontStyle.Strikethrough),s=n.fontStyle&&(n.fontStyle&r.FontStyle.Underline||n.fontStyle&r.FontStyle.Strikethrough);o||s||i!==a?t.push({...n}):e.content+=n.content}return t}));let k={...o,get source(){return s}};for(let e of _(n))l=(null==(a=e.tokens)?void 0:a.call(k,l))||l;return function(e,t,n){var r,i,a;let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w(e),s=_(t),l=[],u={type:"root",children:[]},{structure:c="classic",tabindex:h="0"}=t,p={type:"element",tagName:"pre",properties:{class:"shiki ".concat(t.themeName||""),style:t.rootStyle||"background-color:".concat(t.bg,";color:").concat(t.fg),...!1!==h&&null!=h?{tabindex:h.toString()}:{},...Object.fromEntries(Array.from(Object.entries(t.meta||{})).filter(e=>{let[t]=e;return!t.startsWith("_")}))},children:[]},f={type:"element",tagName:"code",properties:{},children:l},m=[],b={...n,structure:c,addClassToHast:d,get source(){return n.source},get tokens(){return e},get options(){return t},get root(){return u},get pre(){return p},get code(){return f},get lines(){return m}};if(e.forEach((e,t)=>{var n,r;t&&("inline"===c?u.children.push({type:"element",tagName:"br",properties:{},children:[]}):"classic"===c&&l.push({type:"text",value:"\n"}));let i={type:"element",tagName:"span",properties:{class:"line"},children:[]},a=0;for(let r of e){let e={type:"element",tagName:"span",properties:{...r.htmlAttrs},children:[{type:"text",value:r.content}]},o=y(r.htmlStyle||g(r));for(let l of(o&&(e.properties.style=o),s))e=(null==l||null==(n=l.span)?void 0:n.call(b,e,t+1,a,i,r))||e;"inline"===c?u.children.push(e):"classic"===c&&i.children.push(e),a+=r.content.length}if("classic"===c){for(let e of s)i=(null==e||null==(r=e.line)?void 0:r.call(b,i,t+1))||i;m.push(i),l.push(i)}}),"classic"===c){for(let e of s)f=(null==e||null==(i=e.code)?void 0:i.call(b,f))||f;for(let e of(p.children.push(f),s))p=(null==e||null==(a=e.pre)?void 0:a.call(b,p))||p;u.children.push(p)}let k=u;for(let e of s)k=(null==e||null==(r=e.root)?void 0:r.call(b,k))||k;return o&&x(k,o),k}(l,{...n,fg:u,bg:c,themeName:h,rootStyle:p},k,f)}let j=i.toHtml,F={light:"#333333",dark:"#bbbbbb"},L={light:"#fffffe",dark:"#1e1e1e"},z="__shiki_resolved";function B(e){var t,n,r,i,a;if(null==e?void 0:e[z])return e;let o={...e};o.tokenColors&&!o.settings&&(o.settings=o.tokenColors,delete o.tokenColors),o.type||(o.type="dark"),o.colorReplacements={...o.colorReplacements},o.settings||(o.settings=[]);let{bg:s,fg:l}=o;if(!s||!l){let e=o.settings?o.settings.find(e=>!e.name&&!e.scope):void 0;(null==e||null==(t=e.settings)?void 0:t.foreground)&&(l=e.settings.foreground),(null==e||null==(n=e.settings)?void 0:n.background)&&(s=e.settings.background),!l&&(null==o||null==(r=o.colors)?void 0:r["editor.foreground"])&&(l=o.colors["editor.foreground"]),!s&&(null==o||null==(i=o.colors)?void 0:i["editor.background"])&&(s=o.colors["editor.background"]),l||(l="light"===o.type?F.light:F.dark),s||(s="light"===o.type?L.light:L.dark),o.fg=l,o.bg=s}o.settings[0]&&o.settings[0].settings&&!o.settings[0].scope||o.settings.unshift({settings:{foreground:o.fg,background:o.bg}});let u=0,c=new Map;function d(e){var t;if(c.has(e))return c.get(e);u+=1;let n="#".concat(u.toString(16).padStart(8,"0").toLowerCase());return(null==(t=o.colorReplacements)?void 0:t["#".concat(n)])?d(e):(c.set(e,n),n)}for(let e of(o.settings=o.settings.map(e=>{var t,n;let r=(null==(t=e.settings)?void 0:t.foreground)&&!e.settings.foreground.startsWith("#"),i=(null==(n=e.settings)?void 0:n.background)&&!e.settings.background.startsWith("#");if(!r&&!i)return e;let a={...e,settings:{...e.settings}};if(r){let t=d(e.settings.foreground);o.colorReplacements[t]=e.settings.foreground,a.settings.foreground=t}if(i){let t=d(e.settings.background);o.colorReplacements[t]=e.settings.background,a.settings.background=t}return a}),Object.keys(o.colors||{})))if(("editor.foreground"===e||"editor.background"===e||e.startsWith("terminal.ansi"))&&!(null==(a=o.colors[e])?void 0:a.startsWith("#"))){let t=d(o.colors[e]);o.colorReplacements[t]=o.colors[e],o.colors[e]=t}return Object.defineProperty(o,z,{enumerable:!1,writable:!1,value:!0}),o}async function U(e){return Array.from(new Set((await Promise.all(e.filter(e=>!u(e)).map(async e=>await s(e).then(e=>Array.isArray(e)?e:[e])))).flat()))}async function H(e){return(await Promise.all(e.map(async e=>c(e)?null:B(await s(e))))).filter(e=>!!e)}class W extends Error{constructor(e){super(e),this.name="ShikiError"}}class V extends r.Registry{getTheme(e){return"string"==typeof e?this._resolvedThemes.get(e):this.loadTheme(e)}loadTheme(e){let t=B(e);return t.name&&(this._resolvedThemes.set(t.name,t),this._loadedThemesCache=null),t}getLoadedThemes(){return this._loadedThemesCache||(this._loadedThemesCache=[...this._resolvedThemes.keys()]),this._loadedThemesCache}setTheme(e){let t=this._textmateThemeCache.get(e);t||(t=r.Theme.createFromRawTheme(e),this._textmateThemeCache.set(e,t)),this._syncRegistry.setTheme(t)}getGrammar(e){if(this._alias[e]){let t=new Set([e]);for(;this._alias[e];){if(e=this._alias[e],t.has(e))throw new W("Circular alias `".concat(Array.from(t).join(" -> ")," -> ").concat(e,"`"));t.add(e)}}return this._resolvedGrammars.get(e)}loadLanguage(e){if(this.getGrammar(e.name))return;let t=new Set([...this._langMap.values()].filter(t=>{var n;return null==(n=t.embeddedLangsLazy)?void 0:n.includes(e.name)}));this._resolver.addLanguage(e);let n={balancedBracketSelectors:e.balancedBracketSelectors||["*"],unbalancedBracketSelectors:e.unbalancedBracketSelectors||[]};this._syncRegistry._rawGrammars.set(e.scopeName,e);let r=this.loadGrammarWithConfiguration(e.scopeName,1,n);if(r.name=e.name,this._resolvedGrammars.set(e.name,r),e.aliases&&e.aliases.forEach(t=>{this._alias[t]=e.name}),this._loadedLanguagesCache=null,t.size)for(let e of t){var i,a,o,s;this._resolvedGrammars.delete(e.name),this._loadedLanguagesCache=null,null==(a=this._syncRegistry)||null==(i=a._injectionGrammars)||i.delete(e.scopeName),null==(s=this._syncRegistry)||null==(o=s._grammars)||o.delete(e.scopeName),this.loadLanguage(this._langMap.get(e.name))}}dispose(){super.dispose(),this._resolvedThemes.clear(),this._resolvedGrammars.clear(),this._langMap.clear(),this._langGraph.clear(),this._loadedThemesCache=null}loadLanguages(e){for(let t of e)this.resolveEmbeddedLanguages(t);let t=Array.from(this._langGraph.entries()),n=t.filter(e=>{let[t,n]=e;return!n});if(n.length){let e=t.filter(e=>{var t;let[r,i]=e;return i&&(null==(t=i.embeddedLangs)?void 0:t.some(e=>n.map(e=>{let[t]=e;return t}).includes(e)))}).filter(e=>!n.includes(e));throw new W("Missing languages ".concat(n.map(e=>{let[t]=e;return"`".concat(t,"`")}).join(", "),", required by ").concat(e.map(e=>{let[t]=e;return"`".concat(t,"`")}).join(", ")))}for(let[e,n]of t)this._resolver.addLanguage(n);for(let[e,n]of t)this.loadLanguage(n)}getLoadedLanguages(){return this._loadedLanguagesCache||(this._loadedLanguagesCache=[...new Set([...this._resolvedGrammars.keys(),...Object.keys(this._alias)])]),this._loadedLanguagesCache}resolveEmbeddedLanguages(e){if(this._langMap.set(e.name,e),this._langGraph.set(e.name,e),e.embeddedLangs)for(let t of e.embeddedLangs)this._langGraph.set(t,this._langMap.get(t))}constructor(e,n,r,i={}){super(e),(0,t._)(this,"_resolvedThemes",new Map),(0,t._)(this,"_resolvedGrammars",new Map),(0,t._)(this,"_langMap",new Map),(0,t._)(this,"_langGraph",new Map),(0,t._)(this,"_textmateThemeCache",new WeakMap),(0,t._)(this,"_loadedThemesCache",null),(0,t._)(this,"_loadedLanguagesCache",null),this._resolver=e,this._themes=n,this._langs=r,this._alias=i,this._themes.map(e=>this.loadTheme(e)),this.loadLanguages(this._langs)}}class q{get onigLib(){return this._onigLib}getLangRegistration(e){return this._langs.get(e)}loadGrammar(e){return this._scopeToLang.get(e)}addLanguage(e){this._langs.set(e.name,e),e.aliases&&e.aliases.forEach(t=>{this._langs.set(t,e)}),this._scopeToLang.set(e.scopeName,e),e.injectTo&&e.injectTo.forEach(t=>{this._injections.get(t)||this._injections.set(t,[]),this._injections.get(t).push(e.scopeName)})}getInjections(e){let t=e.split("."),n=[];for(let e=1;e<=t.length;e++){let r=t.slice(0,e).join(".");n=[...n,...this._injections.get(r)||[]]}return n}constructor(e,n){(0,t._)(this,"_langs",new Map),(0,t._)(this,"_scopeToLang",new Map),(0,t._)(this,"_injections",new Map),(0,t._)(this,"_onigLib",void 0),this._onigLib={createOnigScanner:t=>e.createScanner(t),createOnigString:t=>e.createString(t)},n.forEach(e=>this.addLanguage(e))}}let G=0;async function $(e){e.engine||function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;if(!(t>3))if(1)console.trace("[SHIKI DEPRECATE]: ".concat(e));else throw Error("[SHIKI DEPRECATE]: ".concat(e))}("`engine` option is required. Use `createOnigurumaEngine` or `createJavaScriptRegexEngine` to create an engine.");let[t,n,r]=await Promise.all([H(e.themes||[]),U(e.langs||[]),e.engine]);return function(e){let t;G+=1,!1!==e.warnings&&G>=10&&G%10==0&&console.warn("[Shiki] ".concat(G," instances have been created. Shiki is supposed to be used as a singleton, consider refactoring your code to cache your highlighter instance; Or call `highlighter.dispose()` to release unused instances."));let n=!1;if(!e.engine)throw new W("`engine` option is required for synchronous mode");let r=(e.langs||[]).flat(1),i=(e.themes||[]).flat(1).map(B),a=new V(new q(e.engine,r),i,r,e.langAlias);function o(e){if("none"===e)return{bg:"",fg:"",name:"none",settings:[],type:"dark"};u();let t=a.getTheme(e);if(!t)throw new W("Theme `".concat(e,"` not found, you may need to load it first"));return t}function s(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];u(),a.loadLanguages(t.flat(1))}function l(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let e of(u(),t.flat(1)))a.loadTheme(e)}function u(){if(n)throw new W("Shiki instance has been disposed")}function c(){n||(n=!0,a.dispose(),G-=1)}return{setTheme:function(e){u();let n=o(e);return t!==e&&(a.setTheme(n),t=e),{theme:n,colorMap:a.getColorMap()}},getTheme:o,getLanguage:function(e){u();let t=a.getGrammar("string"==typeof e?e:e.name);if(!t)throw new W("Language `".concat(e,"` not found, you may need to load it first"));return t},getLoadedThemes:function(){return u(),a.getLoadedThemes()},getLoadedLanguages:function(){return u(),a.getLoadedLanguages()},loadLanguage:async function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return s(await U(t))},loadLanguageSync:s,loadTheme:async function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return u(),l(await H(t))},loadThemeSync:l,dispose:c,[Symbol.dispose]:c}}({...e,themes:t,langs:n,engine:r})}async function K(e){let t=await $(e);return{getLastGrammarState:function(){for(var e=arguments.length,r=Array(e),i=0;i<e;i++)r[i]=arguments[i];return function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(2===t.length)return w(t[1]);let[i,a,o={}]=t,{lang:s="text",theme:u=i.getLoadedThemes()[0]}=o;if(l(s)||c(u))throw new n.ShikiError("Plain language does not have grammar state");if("ansi"===s)throw new n.ShikiError("ANSI language does not have grammar state");let{theme:d,colorMap:h}=i.setTheme(u),p=i.getLanguage(s);return new k(I(a,p,d,h,o).stateStack,p.name,d.name)}(t,...r)},codeToTokensBase:(e,n)=>M(t,e,n),codeToTokensWithThemes:(e,n)=>D(t,e,n),codeToTokens:(e,n)=>P(t,e,n),codeToHast:(e,n)=>O(t,e,n),codeToHtml:(e,n)=>(function(e,t,n){var r;let i={meta:{},options:n,codeToHast:(t,n)=>O(e,t,n),codeToTokens:(t,n)=>P(e,t,n)},a=j(O(e,t,n,i));for(let e of _(n))a=(null==(r=e.postprocess)?void 0:r.call(i,a,n))||a;return a})(t,e,n),getBundledLanguages:()=>({}),getBundledThemes:()=>({}),...t,getInternalContext:()=>t}}function Y(e){let t=e.langs,r=e.themes,i=e.engine;return async function(e){var a,o,s;function l(r){if("string"==typeof r){var i;if(u(r))return[];let a=t[r=(null==(i=e.langAlias)?void 0:i[r])||r];if(!a)throw new n.ShikiError("Language `".concat(r,"` is not included in this bundle. You may want to load it from external source."));return a}return r}function d(e){if(c(e))return"none";if("string"==typeof e){let t=r[e];if(!t)throw new n.ShikiError("Theme `".concat(e,"` is not included in this bundle. You may want to load it from external source."));return t}return e}let h=(null!=(a=e.themes)?a:[]).map(e=>d(e)),p=(null!=(o=e.langs)?o:[]).map(e=>l(e)),f=await K({engine:null!=(s=e.engine)?s:i(),...e,themes:h,langs:p});return{...f,loadLanguage(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return f.loadLanguage(...t.map(l))},loadTheme(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return f.loadTheme(...t.map(d))},getBundledLanguages:()=>t,getBundledThemes:()=>r}}}function X(e,t){let n,r=async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!n)return n=e({...t,themes:t.themes||[],langs:t.langs||[]});{let e=await n;return await Promise.all([e.loadTheme(...t.themes||[]),e.loadLanguage(...t.langs||[])]),e}};async function i(e,n){var i;let a=await r({langs:[n.lang],themes:"theme"in n?[n.theme]:Object.values(n.themes)}),o=await (null==t||null==(i=t.guessEmbeddedLanguages)?void 0:i.call(t,e,n.lang,a));return o&&await a.loadLanguage(...o),a}return{getSingletonHighlighter:e=>r(e),codeToHtml:async(e,t)=>(await i(e,t)).codeToHtml(e,t),codeToHast:async(e,t)=>(await i(e,t)).codeToHast(e,t),codeToTokens:async(e,t)=>(await i(e,t)).codeToTokens(e,t),codeToTokensBase:async(e,t)=>(await i(e,t)).codeToTokensBase(e,t),codeToTokensWithThemes:async(e,t)=>(await i(e,t)).codeToTokensWithThemes(e,t),getLastGrammarState:async(e,t)=>(await r({langs:[t.lang],themes:[t.theme]})).getLastGrammarState(e,t)}}},293774:e=>{"use strict";let t;e.s({createOnigurumaEngine:()=>f});var n=e.i(781635);class r extends Error{constructor(e){super(e),this.name="ShikiError"}}function i(){return"undefined"!=typeof performance?performance.now():Date.now()}let a=(e,t)=>e+(t-e%t)%t;async function o(e){let t,n,r={};function o(e){n=e,r.HEAPU8=new Uint8Array(e),r.HEAPU32=new Uint32Array(e)}let s="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function l(e,t){return e?function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1024,r=t+n,i=t;for(;e[i]&&!(i>=r);)++i;if(i-t>16&&e.buffer&&s)return s.decode(e.subarray(t,i));let a="";for(;t<i;){let n=e[t++];if(!(128&n)){a+=String.fromCharCode(n);continue}let r=63&e[t++];if((224&n)==192){a+=String.fromCharCode((31&n)<<6|r);continue}let i=63&e[t++];if((n=(240&n)==224?(15&n)<<12|r<<6|i:(7&n)<<18|r<<12|i<<6|63&e[t++])<65536)a+=String.fromCharCode(n);else{let e=n-65536;a+=String.fromCharCode(55296|e>>10,56320|1023&e)}}return a}(r.HEAPU8,e,t):""}let u={emscripten_get_now:i,emscripten_memcpy_big:function(e,t,n){r.HEAPU8.copyWithin(e,t,t+n)},emscripten_resize_heap:function(e){let i=r.HEAPU8.length;if((e>>>=0)>0x80000000)return!1;for(let r=1;r<=4;r*=2){let s=i*(1+.2/r);if(s=Math.min(s,e+0x6000000),function(e){try{return t.grow(e-n.byteLength+65535>>>16),o(t.buffer),1}catch(e){}}(Math.min(0x80000000,a(Math.max(e,s),65536))))return!0}return!1},fd_write:()=>0};async function c(){let n=await e({env:u,wasi_snapshot_preview1:u});o((t=n.memory).buffer),Object.assign(r,n),r.UTF8ToString=l}return await c(),r}var s=Object.defineProperty,l=(e,t,n)=>((e,t,n)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);let u=null;class c{static _utf8ByteLength(e){let t=0;for(let n=0,r=e.length;n<r;n++){let i=e.charCodeAt(n),a=i,o=!1;if(i>=55296&&i<=56319&&n+1<r){let t=e.charCodeAt(n+1);t>=56320&&t<=57343&&(a=(i-55296<<10)+65536|t-56320,o=!0)}a<=127?t+=1:a<=2047?t+=2:a<=65535?t+=3:t+=4,o&&n++}return t}createString(e){let t=e.omalloc(this.utf8Length);return e.HEAPU8.set(this.utf8Value,t),t}constructor(e){l(this,"utf16Length"),l(this,"utf8Length"),l(this,"utf16Value"),l(this,"utf8Value"),l(this,"utf16OffsetToUtf8"),l(this,"utf8OffsetToUtf16");let t=e.length,n=c._utf8ByteLength(e),r=n!==t,i=r?new Uint32Array(t+1):null;r&&(i[t]=n);let a=r?new Uint32Array(n+1):null;r&&(a[n]=t);let o=new Uint8Array(n),s=0;for(let n=0;n<t;n++){let l=e.charCodeAt(n),u=l,c=!1;if(l>=55296&&l<=56319&&n+1<t){let t=e.charCodeAt(n+1);t>=56320&&t<=57343&&(u=(l-55296<<10)+65536|t-56320,c=!0)}r&&(i[n]=s,c&&(i[n+1]=s),u<=127?a[s+0]=n:u<=2047?(a[s+0]=n,a[s+1]=n):u<=65535?(a[s+0]=n,a[s+1]=n,a[s+2]=n):(a[s+0]=n,a[s+1]=n,a[s+2]=n,a[s+3]=n)),u<=127?o[s++]=u:(u<=2047?o[s++]=192|(1984&u)>>>6:(u<=65535?o[s++]=224|(61440&u)>>>12:(o[s++]=240|(1835008&u)>>>18,o[s++]=128|(258048&u)>>>12),o[s++]=128|(4032&u)>>>6),o[s++]=128|(63&u)>>>0),c&&n++}this.utf16Length=t,this.utf8Length=n,this.utf16Value=e,this.utf8Value=o,this.utf16OffsetToUtf8=i,this.utf8OffsetToUtf16=a}}let d=class e{convertUtf8OffsetToUtf16(e){return this.utf8OffsetToUtf16?e<0?0:e>this.utf8Length?this.utf16Length:this.utf8OffsetToUtf16[e]:e}convertUtf16OffsetToUtf8(e){return this.utf16OffsetToUtf8?e<0?0:e>this.utf16Length?this.utf8Length:this.utf16OffsetToUtf8[e]:e}dispose(){this.ptr===e._sharedPtr?e._sharedPtrInUse=!1:this._onigBinding.ofree(this.ptr)}constructor(t){if(l(this,"id",++e.LAST_ID),l(this,"_onigBinding"),l(this,"content"),l(this,"utf16Length"),l(this,"utf8Length"),l(this,"utf16OffsetToUtf8"),l(this,"utf8OffsetToUtf16"),l(this,"ptr"),!u)throw new r("Must invoke loadWasm first.");this._onigBinding=u,this.content=t;let n=new c(t);this.utf16Length=n.utf16Length,this.utf8Length=n.utf8Length,this.utf16OffsetToUtf8=n.utf16OffsetToUtf8,this.utf8OffsetToUtf16=n.utf8OffsetToUtf16,this.utf8Length<1e4&&!e._sharedPtrInUse?(e._sharedPtr||(e._sharedPtr=u.omalloc(1e4)),e._sharedPtrInUse=!0,u.HEAPU8.set(n.utf8Value,e._sharedPtr),this.ptr=e._sharedPtr):this.ptr=n.createString(u)}};l(d,"LAST_ID",0),l(d,"_sharedPtr",0),l(d,"_sharedPtrInUse",!1);class h{dispose(){this._onigBinding.freeOnigScanner(this._ptr)}findNextMatchSync(e,t,n){let r=0;if("number"==typeof n&&(r=n),"string"==typeof e){e=new d(e);let n=this._findNextMatchSync(e,t,!1,r);return e.dispose(),n}return this._findNextMatchSync(e,t,!1,r)}_findNextMatchSync(e,t,n,r){let i=this._onigBinding,a=i.findNextOnigScannerMatch(this._ptr,e.id,e.ptr,e.utf8Length,e.convertUtf16OffsetToUtf8(t),r);if(0===a)return null;let o=i.HEAPU32,s=a/4,l=o[s++],u=o[s++],c=[];for(let t=0;t<u;t++){let n=e.convertUtf8OffsetToUtf16(o[s++]),r=e.convertUtf8OffsetToUtf16(o[s++]);c[t]={start:n,end:r,length:r-n}}return{index:l,captureIndices:c}}constructor(e){if(l(this,"_onigBinding"),l(this,"_ptr"),!u)throw new r("Must invoke loadWasm first.");let t=[],n=[];for(let r=0,i=e.length;r<i;r++){let i=new c(e[r]);t[r]=i.createString(u),n[r]=i.utf8Length}let i=u.omalloc(4*e.length);u.HEAPU32.set(t,i/4);let a=u.omalloc(4*e.length);u.HEAPU32.set(n,a/4);let o=u.createOnigScanner(i,a,e.length);for(let n=0,r=e.length;n<r;n++)u.ofree(t[n]);u.ofree(a),u.ofree(i),0===o&&function(e){throw new r(e.UTF8ToString(e.getLastOnigError()))}(u),this._onigBinding=u,this._ptr=o}}function p(e){return t=>WebAssembly.instantiate(e,t)}async function f(e){return e&&await (t||(t=async function(){u=await o(async t=>{let r=e;if("function"==typeof(r=await r)&&(r=await r(t)),"function"==typeof r&&(r=await r(t)),"function"==typeof r.instantiator)r=await r.instantiator(t);else if("function"==typeof r.default)r=await r.default(t);else{var i,a,o,s,l,u;if(void 0!==r.data&&(r=r.data),i=r,"undefined"!=typeof Response&&i instanceof Response){r="function"==typeof WebAssembly.instantiateStreaming?await (l=r,e=>WebAssembly.instantiateStreaming(l,e))(t):await (u=r,async e=>{let t=await u.arrayBuffer();return WebAssembly.instantiate(t,e)})(t)}else(a=r,"undefined"!=typeof ArrayBuffer&&(a instanceof ArrayBuffer||ArrayBuffer.isView(a))||void 0!==n.Buffer&&(null==(o=(s=n.Buffer).isBuffer)?void 0:o.call(s,a))||"undefined"!=typeof SharedArrayBuffer&&a instanceof SharedArrayBuffer||"undefined"!=typeof Uint32Array&&a instanceof Uint32Array||r instanceof WebAssembly.Module)?r=await p(r)(t):"default"in r&&r.default instanceof WebAssembly.Module&&(r=await p(r.default)(t))}return"instance"in r&&(r=r.instance),"exports"in r&&(r=r.exports),r})}())),{createScanner:e=>new h(e.map(e=>"string"==typeof e?e:e.source)),createString:e=>new d(e)}}},364869:e=>{"use strict";e.s({codeToHast:()=>o,createHighlighter:()=>a});var t=e.i(62260),n=e.i(168054),r=e.i(156387),i=e.i(293774);let a=(0,t.createdBundledHighlighter)({langs:n.bundledLanguages,themes:r.bundledThemes,engine:()=>(0,i.createOnigurumaEngine)(e.r(16566)(e.i))}),{codeToHast:o}=(0,t.createSingletonShorthands)(a,{guessEmbeddedLanguages:t.guessEmbeddedLanguages})},730769:e=>{"use strict";let t,n;e.s({default:()=>et}),e.i(131841);var r=e.i(968617);e.i(125492);var i=e.i(954647);e.i(471089),e.i(922181);var a=e.i(490077);e.i(988191);var o=e.i(47542);e.i(772989);var s=e.i(80464);e.i(811407);var l=e.i(732307),u=e.i(156387),c=e.i(168054),d=e.i(364869);function h(e){let{state:t,transaction:n}=e,{selection:r}=n,{doc:i}=n,{storedMarks:a}=n;return{...t,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return a},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,a=n.storedMarks,n}}}class p{get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){let{rawCommands:e,editor:t,state:n}=this,{view:r}=t,{tr:i}=n,a=this.buildProps(i);return Object.fromEntries(Object.entries(e).map(e=>{let[t,n]=e;var o=this;return[t,function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];let l=n(...t)(a);return i.getMeta("preventDispatch")||o.hasCustomState||r.dispatch(i),l}]}))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],{rawCommands:n,editor:r,state:i}=this,{view:a}=r,o=[],s=!!e,l=e||i.tr,u=()=>(s||!t||l.getMeta("preventDispatch")||this.hasCustomState||a.dispatch(l),o.every(e=>!0===e)),c={...Object.fromEntries(Object.entries(n).map(e=>{let[n,r]=e;var i=this;return[n,function(){for(var e=arguments.length,n=Array(e),a=0;a<e;a++)n[a]=arguments[a];let s=i.buildProps(l,t),u=r(...n)(s);return o.push(u),c}]})),run:u};return c}createCan(e){let{rawCommands:t,state:n}=this,r=e||n.tr,i=this.buildProps(r,!1);return{...Object.fromEntries(Object.entries(t).map(e=>{let[t,n]=e;return[t,function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return n(...t)({...i,dispatch:void 0})}]})),chain:()=>this.createChain(r,!1)}}buildProps(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],{rawCommands:n,editor:r,state:i}=this,{view:a}=r,o={tr:e,editor:r,view:a,state:h({state:i,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(n).map(e=>{let[t,n]=e;return[t,function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return n(...t)(o)}]}))}};return o}constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}}function f(e,t,n){return void 0===e.config[t]&&e.parent?f(e.parent,t,n):"function"==typeof e.config[t]?e.config[t].bind({...n,parent:e.parent?f(e.parent,t,n):null}):e.config[t]}function m(e,t){if("string"==typeof e){if(!t.nodes[e])throw Error("There is no node type named '".concat(e,"'. Maybe you forgot to add the extension?"));return t.nodes[e]}return e}function g(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return"function"==typeof e?t?e.bind(t)(...r):e(...r):e}class y{constructor(e){this.find=e.find,this.handler=e.handler}}function b(e){return"Object"===Object.prototype.toString.call(e).slice(8,-1)&&e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function x(e,t){let n={...e};return b(e)&&b(t)&&Object.keys(t).forEach(r=>{b(t[r])&&r in e?n[r]=x(e[r],t[r]):Object.assign(n,{[r]:t[r]})}),n}class w{static create(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new w(e)}configure(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.extend();return t.options=x(this.options,e),t.storage=g(f(t,"addStorage",{name:t.name,options:t.options})),t}extend(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new w({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(t.name,'".')),t.options=g(f(t,"addOptions",{name:t.name})),t.storage=g(f(t,"addStorage",{name:t.name,options:t.options})),t}constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(this.name,'".')),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=g(f(this,"addOptions",{name:this.name}))),this.storage=g(f(this,"addStorage",{name:this.name,options:this.options}))||{}}}function k(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{strict:!0},r=Object.keys(t);return!r.length||r.every(r=>{var i;return n.strict?t[r]===e[r]:(i=t[r],"[object RegExp]"===Object.prototype.toString.call(i))?t[r].test(e[r]):t[r]===e[r]})}function S(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e.find(e=>e.type===t&&k(e.attrs,n))}function _(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e||!t)return;let r=e.parent.childAfter(e.parentOffset);if(e.parentOffset===r.offset&&0!==r.offset&&(r=e.parent.childBefore(e.parentOffset)),!r.node)return;let i=S([...r.node.marks],t,n);if(!i)return;let a=r.index,o=e.start()+r.offset,s=a+1,l=o+r.node.nodeSize;for(S([...r.node.marks],t,n);a>0&&i.isInSet(e.parent.child(a-1).marks);)a-=1,o-=e.parent.child(a).nodeSize;for(;s<e.parent.childCount&&function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return!!S(e,t,n)}([...e.parent.child(s).marks],t,n);)l+=e.parent.child(s).nodeSize,s+=1;return{from:o,to:l}}function C(e,t){if("string"==typeof e){if(!t.marks[e])throw Error("There is no mark type named '".concat(e,"'. Maybe you forgot to add the extension?"));return t.marks[e]}return e}function A(e){return e instanceof r.TextSelection}function E(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Math.min(Math.max(e,t),n)}function T(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}w.create({name:"clipboardTextSerializer",addOptions:()=>({blockSeparator:void 0}),addProseMirrorPlugins(){return[new r.Plugin({key:new r.PluginKey("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{let{editor:e}=this,{state:t,schema:n}=e,{doc:r,selection:i}=t,{ranges:a}=i,o=Math.min(...a.map(e=>e.$from.pos)),s=Math.max(...a.map(e=>e.$to.pos)),l=Object.fromEntries(Object.entries(n.nodes).filter(e=>{let[,t]=e;return t.spec.toText}).map(e=>{let[t,n]=e;return[t,n.spec.toText]}));return function(e,t,n){let{from:r,to:i}=t,{blockSeparator:a="\n\n",textSerializers:o={}}=n||{},s="",l=!0;return e.nodesBetween(r,i,(e,n,u,c)=>{var d;let h=null==o?void 0:o[e.type.name];if(h)return e.isBlock&&!l&&(s+=a,l=!0),u&&(s+=h({node:e,pos:n,parent:u,index:c,range:t})),!1;e.isText?(s+=null==(d=null==e?void 0:e.text)?void 0:d.slice(Math.max(r,n)-n,i-n),l=!1):e.isBlock&&!l&&(s+=a,l=!0)}),s}(r,{from:o,to:s},{...void 0!==this.options.blockSeparator?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}});let M=e=>{let t=e.childNodes;for(let n=t.length-1;n>=0;n-=1){let r=t[n];3===r.nodeType&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?e.removeChild(r):1===r.nodeType&&M(r)}return e};function I(e){return M(new window.DOMParser().parseFromString("<body>".concat(e,"</body>"),"text/html").body)}function N(e,t,n){if(n={slice:!0,parseOptions:{},...n},"object"==typeof e&&null!==e)try{return Array.isArray(e)&&e.length>0?a.Fragment.fromArray(e.map(e=>t.nodeFromJSON(e))):t.nodeFromJSON(e)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",r),N("",t,n)}if("string"==typeof e){let r=a.DOMParser.fromSchema(t);return n.slice?r.parseSlice(I(e),n.parseOptions).content:r.parse(I(e),n.parseOptions)}return N("",t,n)}function D(){return"u">typeof navigator&&/Mac/.test(navigator.platform)}function P(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{from:r,to:i,empty:a}=e.selection,o=t?m(t,e.schema):null,s=[];e.doc.nodesBetween(r,i,(e,t)=>{if(e.isText)return;let n=Math.max(r,t),a=Math.min(i,t+e.nodeSize);s.push({node:e,from:n,to:a})});let l=i-r,u=s.filter(e=>!o||o.name===e.node.type.name).filter(e=>k(e.node.attrs,n,{strict:!1}));return a?!!u.length:u.reduce((e,t)=>e+t.to-t.from,0)>=l}function R(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function O(e,t){let n="string"==typeof t?[t]:t;return Object.keys(e).reduce((t,r)=>(n.includes(r)||(t[r]=e[r]),t),{})}function j(e,t){let n=[];return e.descendants((e,r)=>{t(e)&&n.push({node:e,pos:r})}),n}function F(e){return t=>(function(e,t){for(let n=e.depth;n>0;n-=1){let r=e.node(n);if(t(r))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:r}}})(t.$from,e)}function L(e,t,n){return Object.fromEntries(Object.entries(n).filter(n=>{let[r]=n,i=e.find(e=>e.type===t&&e.name===r);return!!i&&i.attribute.keepOnSplit}))}function z(e,t){let{nodeExtensions:n}=function(e){let t=e.filter(e=>"extension"===e.type);return{baseExtensions:t,nodeExtensions:e.filter(e=>"node"===e.type),markExtensions:e.filter(e=>"mark"===e.type)}}(t),r=n.find(t=>t.name===e);if(!r)return!1;let i={name:r.name,options:r.options,storage:r.storage},a=g(f(r,"group",i));return"string"==typeof a&&a.split(" ").includes("list")}function B(e,t){let n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){let r=n.filter(e=>null==t?void 0:t.includes(e.type.name));e.tr.ensureMarks(r)}}let U=(e,t)=>{let n=F(e=>e.type===t)(e.selection);if(!n)return!0;let r=e.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(void 0===r)return!0;let i=e.doc.nodeAt(r);return n.node.type===(null==i?void 0:i.type)&&(0,o.canJoin)(e.doc,n.pos)&&e.join(n.pos),!0},H=(e,t)=>{let n=F(e=>e.type===t)(e.selection);if(!n)return!0;let r=e.doc.resolve(n.start).after(n.depth);if(void 0===r)return!0;let i=e.doc.nodeAt(r);return n.node.type===(null==i?void 0:i.type)&&(0,o.canJoin)(e.doc,r)&&e.join(r),!0};var W=Object.freeze({__proto__:null,blur:()=>e=>{let{editor:t,view:n}=e;return requestAnimationFrame(()=>{var e;t.isDestroyed||(n.dom.blur(),null==(e=null==window?void 0:window.getSelection())||e.removeAllRanges())}),!0},clearContent:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t=>{let{commands:n}=t;return n.setContent("",e)}},clearNodes:()=>e=>{let{state:t,tr:n,dispatch:r}=e,{selection:i}=n,{ranges:a}=i;return r&&a.forEach(e=>{let{$from:r,$to:i}=e;t.doc.nodesBetween(r.pos,i.pos,(e,t)=>{if(e.type.isText)return;let{doc:r,mapping:i}=n,a=r.resolve(i.map(t)),s=r.resolve(i.map(t+e.nodeSize)),l=a.blockRange(s);if(!l)return;let u=(0,o.liftTarget)(l);if(e.type.isTextblock){let{defaultType:e}=a.parent.contentMatchAt(a.index());n.setNodeMarkup(l.start,e)}(u||0===u)&&n.lift(l,u)})}),!0},command:e=>t=>e(t),createParagraphNear:()=>e=>{let{state:t,dispatch:n}=e;return(0,s.createParagraphNear)(t,n)},cut:(e,t)=>n=>{let{editor:i,tr:a}=n,{state:o}=i,s=o.doc.slice(e.from,e.to);a.deleteRange(e.from,e.to);let l=a.mapping.map(t);return a.insert(l,s.content),a.setSelection(new r.TextSelection(a.doc.resolve(l-1))),!0},deleteCurrentNode:()=>e=>{let{tr:t,dispatch:n}=e,{selection:r}=t,i=r.$anchor.node();if(i.content.size>0)return!1;let a=t.selection.$anchor;for(let e=a.depth;e>0;e-=1)if(a.node(e).type===i.type){if(n){let n=a.before(e),r=a.after(e);t.delete(n,r).scrollIntoView()}return!0}return!1},deleteNode:e=>t=>{let{tr:n,state:r,dispatch:i}=t,a=m(e,r.schema),o=n.selection.$anchor;for(let e=o.depth;e>0;e-=1)if(o.node(e).type===a){if(i){let t=o.before(e),r=o.after(e);n.delete(t,r).scrollIntoView()}return!0}return!1},deleteRange:e=>t=>{let{tr:n,dispatch:r}=t,{from:i,to:a}=e;return r&&n.delete(i,a),!0},deleteSelection:()=>e=>{let{state:t,dispatch:n}=e;return(0,s.deleteSelection)(t,n)},enter:()=>e=>{let{commands:t}=e;return t.keyboardShortcut("Enter")},exitCode:()=>e=>{let{state:t,dispatch:n}=e;return(0,s.exitCode)(t,n)},extendMarkRange:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{tr:i,state:a,dispatch:o}=n,s=C(e,a.schema),{doc:l,selection:u}=i,{$from:c,from:d,to:h}=u;if(o){let e=_(c,s,t);if(e&&e.from<=d&&e.to>=h){let t=r.TextSelection.create(l,e.from,e.to);i.setSelection(t)}}return!0}},first:e=>t=>{let n="function"==typeof e?e(t):e;for(let e=0;e<n.length;e+=1)if(n[e](t))return!0;return!1},focus:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{editor:i,view:a,tr:o,dispatch:s}=n;t={scrollIntoView:!0,...t};let l=()=>{T()&&a.dom.focus(),requestAnimationFrame(()=>{i.isDestroyed||(a.focus(),null!=t&&t.scrollIntoView&&i.commands.scrollIntoView())})};if(a.hasFocus()&&null===e||!1===e)return!0;if(s&&null===e&&!A(i.state.selection))return l(),!0;let u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!t)return null;let n=r.Selection.atStart(e),i=r.Selection.atEnd(e);if("start"===t||!0===t)return n;if("end"===t)return i;let a=n.from,o=i.to;return"all"===t?r.TextSelection.create(e,E(0,a,o),E(e.content.size,a,o)):r.TextSelection.create(e,E(t,a,o),E(t,a,o))}(o.doc,e)||i.state.selection,c=i.state.selection.eq(u);return s&&(c||o.setSelection(u),c&&o.storedMarks&&o.setStoredMarks(o.storedMarks),l()),!0}},forEach:(e,t)=>n=>e.every((e,r)=>t(e,{...n,index:r})),insertContent:(e,t)=>n=>{let{tr:r,commands:i}=n;return i.insertContentAt({from:r.selection.from,to:r.selection.to},e,t)},insertContentAt:(e,t,n)=>i=>{let{tr:a,dispatch:s,editor:l}=i;if(s){let i;n={parseOptions:{},updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let s=N(t,l.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions}});if("<>"===s.toString())return!0;let{from:u,to:c}="number"==typeof e?{from:e,to:e}:{from:e.from,to:e.to},d=!0,h=!0;if((s.toString().startsWith("<")?s:[s]).forEach(e=>{e.check(),d=!!d&&e.isText&&0===e.marks.length,h=!!h&&e.isBlock}),u===c&&h){let{parent:e}=a.doc.resolve(u);!e.isTextblock||e.type.spec.code||e.childCount||(u-=1,c+=1)}d?(i=Array.isArray(t)?t.map(e=>e.text||"").join(""):"object"==typeof t&&t&&t.text?t.text:t,a.insertText(i,u,c)):(i=s,a.replaceWith(u,c,i)),n.updateSelection&&function(e,t,n){let i=e.steps.length-1;if(i<t)return;let a=e.steps[i];if(!(a instanceof o.ReplaceStep||a instanceof o.ReplaceAroundStep))return;let s=e.mapping.maps[i],l=0;s.forEach((e,t,n,r)=>{0===l&&(l=r)}),e.setSelection(r.Selection.near(e.doc.resolve(l),-1))}(a,a.steps.length-1,0),n.applyInputRules&&a.setMeta("applyInputRules",{from:u,text:i}),n.applyPasteRules&&a.setMeta("applyPasteRules",{from:u,text:i})}return!0},joinUp:()=>e=>{let{state:t,dispatch:n}=e;return(0,s.joinUp)(t,n)},joinDown:()=>e=>{let{state:t,dispatch:n}=e;return(0,s.joinDown)(t,n)},joinBackward:()=>e=>{let{state:t,dispatch:n}=e;return(0,s.joinBackward)(t,n)},joinForward:()=>e=>{let{state:t,dispatch:n}=e;return(0,s.joinForward)(t,n)},joinItemBackward:()=>e=>{let{tr:t,state:n,dispatch:r}=e;try{let e=(0,o.joinPoint)(n.doc,n.selection.$from.pos,-1);return null!=e&&(t.join(e,2),r&&r(t),!0)}catch(e){return!1}},joinItemForward:()=>e=>{let{state:t,dispatch:n,tr:r}=e;try{let e=(0,o.joinPoint)(t.doc,t.selection.$from.pos,1);return null!=e&&(r.join(e,2),n&&n(r),!0)}catch(e){return!1}},joinTextblockBackward:()=>e=>{let{state:t,dispatch:n}=e;return(0,s.joinTextblockBackward)(t,n)},joinTextblockForward:()=>e=>{let{state:t,dispatch:n}=e;return(0,s.joinTextblockForward)(t,n)},keyboardShortcut:e=>t=>{let{editor:n,view:r,tr:i,dispatch:a}=t,o=(function(e){let t,n,r,i,a=e.split(/-(?!$)/),o=a[a.length-1];"Space"===o&&(o=" ");for(let e=0;e<a.length-1;e+=1){let o=a[e];if(/^(cmd|meta|m)$/i.test(o))i=!0;else if(/^a(lt)?$/i.test(o))t=!0;else if(/^(c|ctrl|control)$/i.test(o))n=!0;else if(/^s(hift)?$/i.test(o))r=!0;else if(/^mod$/i.test(o))T()||D()?i=!0:n=!0;else throw Error("Unrecognized modifier name: ".concat(o))}return t&&(o="Alt-".concat(o)),n&&(o="Ctrl-".concat(o)),i&&(o="Meta-".concat(o)),r&&(o="Shift-".concat(o)),o})(e).split(/-(?!$)/),s=o.find(e=>!["Alt","Ctrl","Meta","Shift"].includes(e)),l=new KeyboardEvent("keydown",{key:"Space"===s?" ":s,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),u=n.captureTransaction(()=>{r.someProp("handleKeyDown",e=>e(r,l))});return null==u||u.steps.forEach(e=>{let t=e.map(i.mapping);t&&a&&i.maybeStep(t)}),!0},lift:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{state:r,dispatch:i}=n,a=m(e,r.schema);return!!P(r,a,t)&&(0,s.lift)(r,i)}},liftEmptyBlock:()=>e=>{let{state:t,dispatch:n}=e;return(0,s.liftEmptyBlock)(t,n)},liftListItem:e=>t=>{let{state:n,dispatch:r}=t,i=m(e,n.schema);return(0,l.liftListItem)(i)(n,r)},newlineInCode:()=>e=>{let{state:t,dispatch:n}=e;return(0,s.newlineInCode)(t,n)},resetAttributes:(e,t)=>n=>{let{tr:r,state:i,dispatch:a}=n,o=null,s=null,l=R("string"==typeof e?e:e.name,i.schema);return!!l&&("node"===l&&(o=m(e,i.schema)),"mark"===l&&(s=C(e,i.schema)),a&&r.selection.ranges.forEach(e=>{i.doc.nodesBetween(e.$from.pos,e.$to.pos,(e,n)=>{o&&o===e.type&&r.setNodeMarkup(n,void 0,O(e.attrs,t)),s&&e.marks.length&&e.marks.forEach(i=>{s===i.type&&r.addMark(n,n+e.nodeSize,s.create(O(i.attrs,t)))})})}),!0)},scrollIntoView:()=>e=>{let{tr:t,dispatch:n}=e;return n&&t.scrollIntoView(),!0},selectAll:()=>e=>{let{tr:t,commands:n}=e;return n.setTextSelection({from:0,to:t.doc.content.size})},selectNodeBackward:()=>e=>{let{state:t,dispatch:n}=e;return(0,s.selectNodeBackward)(t,n)},selectNodeForward:()=>e=>{let{state:t,dispatch:n}=e;return(0,s.selectNodeForward)(t,n)},selectParentNode:()=>e=>{let{state:t,dispatch:n}=e;return(0,s.selectParentNode)(t,n)},selectTextblockEnd:()=>e=>{let{state:t,dispatch:n}=e;return(0,s.selectTextblockEnd)(t,n)},selectTextblockStart:()=>e=>{let{state:t,dispatch:n}=e;return(0,s.selectTextblockStart)(t,n)},setContent:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=>{let{tr:i,editor:a,dispatch:o}=r,{doc:s}=i,l=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return N(e,t,{slice:!1,parseOptions:n})}(e,a.schema,n);return o&&i.replaceWith(0,s.content.size,l).setMeta("preventUpdate",!t),!0}},setMark:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{tr:r,state:i,dispatch:a}=n,{selection:o}=r,{empty:s,ranges:l}=o,u=C(e,i.schema);if(a)if(s){let e=function(e,t){let n=C(t,e.schema),{from:r,to:i,empty:a}=e.selection,o=[];a?(e.storedMarks&&o.push(...e.storedMarks),o.push(...e.selection.$head.marks())):e.doc.nodesBetween(r,i,e=>{o.push(...e.marks)});let s=o.find(e=>e.type.name===n.name);return s?{...s.attrs}:{}}(i,u);r.addStoredMark(u.create({...e,...t}))}else l.forEach(e=>{let n=e.$from.pos,a=e.$to.pos;i.doc.nodesBetween(n,a,(e,i)=>{let o=Math.max(i,n),s=Math.min(i+e.nodeSize,a);e.marks.find(e=>e.type===u)?e.marks.forEach(e=>{u===e.type&&r.addMark(o,s,u.create({...e.attrs,...t}))}):r.addMark(o,s,u.create(t))})});return function(e,t,n){var r;let{selection:i}=t,a=null;if(A(i)&&(a=i.$cursor),a){let t=null!=(r=e.storedMarks)?r:a.marks();return!!n.isInSet(t)||!t.some(e=>e.type.excludes(n))}let{ranges:o}=i;return o.some(t=>{let{$from:r,$to:i}=t,a=0===r.depth&&e.doc.inlineContent&&e.doc.type.allowsMarkType(n);return e.doc.nodesBetween(r.pos,i.pos,(e,t,r)=>{if(a)return!1;if(e.isInline){let t=!r||r.type.allowsMarkType(n),i=!!n.isInSet(e.marks)||!e.marks.some(e=>e.type.excludes(n));a=t&&i}return!a}),a})}(i,r,u)}},setMeta:(e,t)=>n=>{let{tr:r}=n;return r.setMeta(e,t),!0},setNode:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{state:r,dispatch:i,chain:a}=n,o=m(e,r.schema);return o.isTextblock?a().command(e=>{let{commands:n}=e;return!!(0,s.setBlockType)(o,t)(r)||n.clearNodes()}).command(e=>{let{state:n}=e;return(0,s.setBlockType)(o,t)(n,i)}).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)}},setNodeSelection:e=>t=>{let{tr:n,dispatch:i}=t;if(i){let{doc:t}=n,i=E(e,0,t.content.size),a=r.NodeSelection.create(t,i);n.setSelection(a)}return!0},setTextSelection:e=>t=>{let{tr:n,dispatch:i}=t;if(i){let{doc:t}=n,{from:i,to:a}="number"==typeof e?{from:e,to:e}:e,o=r.TextSelection.atStart(t).from,s=r.TextSelection.atEnd(t).to,l=E(i,o,s),u=E(a,o,s),c=r.TextSelection.create(t,l,u);n.setSelection(c)}return!0},sinkListItem:e=>t=>{let{state:n,dispatch:r}=t,i=m(e,n.schema);return(0,l.sinkListItem)(i)(n,r)},splitBlock:function(){let{keepMarks:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t=>{let{tr:n,state:i,dispatch:a,editor:s}=t,{selection:l,doc:u}=n,{$from:c,$to:d}=l,h=L(s.extensionManager.attributes,c.node().type.name,c.node().attrs);if(l instanceof r.NodeSelection&&l.node.isBlock)return!!c.parentOffset&&!!(0,o.canSplit)(u,c.pos)&&(a&&(e&&B(i,s.extensionManager.splittableMarks),n.split(c.pos).scrollIntoView()),!0);if(!c.parent.isBlock)return!1;if(a){let t=d.parentOffset===d.parent.content.size;l instanceof r.TextSelection&&n.deleteSelection();let a=0===c.depth?void 0:function(e){for(let t=0;t<e.edgeCount;t+=1){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}(c.node(-1).contentMatchAt(c.indexAfter(-1))),u=t&&a?[{type:a,attrs:h}]:void 0,p=(0,o.canSplit)(n.doc,n.mapping.map(c.pos),1,u);if(!u&&!p&&(0,o.canSplit)(n.doc,n.mapping.map(c.pos),1,a?[{type:a}]:void 0)&&(p=!0,u=a?[{type:a,attrs:h}]:void 0),p&&(n.split(n.mapping.map(c.pos),1,u),a&&!t&&!c.parentOffset&&c.parent.type!==a)){let e=n.mapping.map(c.before()),t=n.doc.resolve(e);c.node(-1).canReplaceWith(t.index(),t.index()+1,a)&&n.setNodeMarkup(n.mapping.map(c.before()),a)}e&&B(i,s.extensionManager.splittableMarks),n.scrollIntoView()}return!0}},splitListItem:e=>t=>{var n;let{tr:i,state:s,dispatch:l,editor:u}=t,c=m(e,s.schema),{$from:d,$to:h}=s.selection,p=s.selection.node;if(p&&p.isBlock||d.depth<2||!d.sameParent(h))return!1;let f=d.node(-1);if(f.type!==c)return!1;let g=u.extensionManager.attributes;if(0===d.parent.content.size&&d.node(-1).childCount===d.indexAfter(-1)){if(2===d.depth||d.node(-3).type!==c||d.index(-2)!==d.node(-2).childCount-1)return!1;if(l){let e=a.Fragment.empty,t=d.index(-1)?1:d.index(-2)?2:3;for(let n=d.depth-t;n>=d.depth-3;n-=1)e=a.Fragment.from(d.node(n).copy(e));let o=d.indexAfter(-1)<d.node(-2).childCount?1:d.indexAfter(-2)<d.node(-3).childCount?2:3,s=L(g,d.node().type.name,d.node().attrs),l=(null==(n=c.contentMatch.defaultType)?void 0:n.createAndFill(s))||void 0;e=e.append(a.Fragment.from(c.createAndFill(null,l)||void 0));let u=d.before(d.depth-(t-1));i.replace(u,d.after(-o),new a.Slice(e,4-t,0));let h=-1;i.doc.nodesBetween(u,i.doc.content.size,(e,t)=>{if(h>-1)return!1;e.isTextblock&&0===e.content.size&&(h=t+1)}),h>-1&&i.setSelection(r.TextSelection.near(i.doc.resolve(h))),i.scrollIntoView()}return!0}let y=h.pos===d.end()?f.contentMatchAt(0).defaultType:null,b=L(g,f.type.name,f.attrs),x=L(g,d.node().type.name,d.node().attrs);i.delete(d.pos,h.pos);let w=y?[{type:c,attrs:b},{type:y,attrs:x}]:[{type:c,attrs:b}];if(!(0,o.canSplit)(i.doc,d.pos,2))return!1;if(l){let{selection:e,storedMarks:t}=s,{splittableMarks:n}=u.extensionManager,r=t||e.$to.parentOffset&&e.$from.marks();if(i.split(d.pos,2,w).scrollIntoView(),!r||!l)return!0;let a=r.filter(e=>n.includes(e.type.name));i.ensureMarks(a)}return!0},toggleList:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return i=>{let{editor:a,tr:o,state:s,dispatch:l,chain:u,commands:c,can:d}=i,{extensions:h,splittableMarks:p}=a.extensionManager,f=m(e,s.schema),g=m(t,s.schema),{selection:y,storedMarks:b}=s,{$from:x,$to:w}=y,k=x.blockRange(w),S=b||y.$to.parentOffset&&y.$from.marks();if(!k)return!1;let _=F(e=>z(e.type.name,h))(y);if(k.depth>=1&&_&&k.depth-_.depth<=1){if(_.node.type===f)return c.liftListItem(g);if(z(_.node.type.name,h)&&f.validContent(_.node.content)&&l)return u().command(()=>(o.setNodeMarkup(_.pos,f),!0)).command(()=>U(o,f)).command(()=>H(o,f)).run()}return n&&S&&l?u().command(()=>{let e=d().wrapInList(f,r),t=S.filter(e=>p.includes(e.type.name));return o.ensureMarks(t),!!e||c.clearNodes()}).wrapInList(f,r).command(()=>U(o,f)).command(()=>H(o,f)).run():u().command(()=>!!d().wrapInList(f,r)||c.clearNodes()).wrapInList(f,r).command(()=>U(o,f)).command(()=>H(o,f)).run()}},toggleMark:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=>{let{state:i,commands:a}=r,{extendEmptyMarkRange:o=!1}=n,s=C(e,i.schema);return!function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{empty:r,ranges:i}=e.selection,a=t?C(t,e.schema):null;if(r)return!!(e.storedMarks||e.selection.$from.marks()).filter(e=>!a||a.name===e.type.name).find(e=>k(e.attrs,n,{strict:!1}));let o=0,s=[];if(i.forEach(t=>{let{$from:n,$to:r}=t,i=n.pos,a=r.pos;e.doc.nodesBetween(i,a,(e,t)=>{if(!e.isText&&!e.marks.length)return;let n=Math.max(i,t),r=Math.min(a,t+e.nodeSize);o+=r-n,s.push(...e.marks.map(e=>({mark:e,from:n,to:r})))})}),0===o)return!1;let l=s.filter(e=>!a||a.name===e.mark.type.name).filter(e=>k(e.mark.attrs,n,{strict:!1})).reduce((e,t)=>e+t.to-t.from,0),u=s.filter(e=>!a||e.mark.type!==a&&e.mark.type.excludes(a)).reduce((e,t)=>e+t.to-t.from,0);return(l>0?l+u:l)>=o}(i,s,t)?a.setMark(s,t):a.unsetMark(s,{extendEmptyMarkRange:o})}},toggleNode:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=>{let{state:i,commands:a}=r,o=m(e,i.schema),s=m(t,i.schema);return P(i,o,n)?a.setNode(s):a.setNode(o,n)}},toggleWrap:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{state:r,commands:i}=n,a=m(e,r.schema);return P(r,a,t)?i.lift(a):i.wrapIn(a,t)}},undoInputRule:()=>e=>{let{state:t,dispatch:n}=e,r=t.plugins;for(let e=0;e<r.length;e+=1){let i,a=r[e];if(a.spec.isInputRules&&(i=a.getState(t))){if(n){let e=t.tr,n=i.transform;for(let t=n.steps.length-1;t>=0;t-=1)e.step(n.steps[t].invert(n.docs[t]));if(i.text){let n=e.doc.resolve(i.from).marks();e.replaceWith(i.from,i.to,t.schema.text(i.text,n))}else e.delete(i.from,i.to)}return!0}}return!1},unsetAllMarks:()=>e=>{let{tr:t,dispatch:n}=e,{selection:r}=t,{empty:i,ranges:a}=r;return i||n&&a.forEach(e=>{t.removeMark(e.$from.pos,e.$to.pos)}),!0},unsetMark:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{var r;let{tr:i,state:a,dispatch:o}=n,{extendEmptyMarkRange:s=!1}=t,{selection:l}=i,u=C(e,a.schema),{$from:c,empty:d,ranges:h}=l;if(!o)return!0;if(d&&s){let{from:e,to:t}=l,n=null==(r=c.marks().find(e=>e.type===u))?void 0:r.attrs,a=_(c,u,n);a&&(e=a.from,t=a.to),i.removeMark(e,t,u)}else h.forEach(e=>{i.removeMark(e.$from.pos,e.$to.pos,u)});return i.removeStoredMark(u),!0}},updateAttributes:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{tr:r,state:i,dispatch:a}=n,o=null,s=null,l=R("string"==typeof e?e:e.name,i.schema);return!!l&&("node"===l&&(o=m(e,i.schema)),"mark"===l&&(s=C(e,i.schema)),a&&r.selection.ranges.forEach(e=>{let n=e.$from.pos,a=e.$to.pos;i.doc.nodesBetween(n,a,(e,i)=>{o&&o===e.type&&r.setNodeMarkup(i,void 0,{...e.attrs,...t}),s&&e.marks.length&&e.marks.forEach(o=>{if(s===o.type){let l=Math.max(i,n),u=Math.min(i+e.nodeSize,a);r.addMark(l,u,s.create({...o.attrs,...t}))}})})}),!0)}},wrapIn:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{state:r,dispatch:i}=n,a=m(e,r.schema);return(0,s.wrapIn)(a,t)(r,i)}},wrapInList:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{state:r,dispatch:i}=n,a=m(e,r.schema);return(0,l.wrapInList)(a,t)(r,i)}}});function V(e){return new y({find:e.find,handler:t=>{let{state:n,range:r,match:i}=t,a=n.doc.resolve(r.from),o=g(e.getAttributes,void 0,i)||{};if(!a.node(-1).canReplaceWith(a.index(-1),a.indexAfter(-1),e.type))return null;n.tr.delete(r.from,r.to).setBlockType(r.from,r.from,e.type,o)}})}w.create({name:"commands",addCommands:()=>({...W})}),w.create({name:"editable",addProseMirrorPlugins(){return[new r.Plugin({key:new r.PluginKey("editable"),props:{editable:()=>this.editor.options.editable}})]}}),w.create({name:"focusEvents",addProseMirrorPlugins(){let{editor:e}=this;return[new r.Plugin({key:new r.PluginKey("focusEvents"),props:{handleDOMEvents:{focus:(t,n)=>{e.isFocused=!0;let r=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1},blur:(t,n)=>{e.isFocused=!1;let r=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1}}}})]}}),w.create({name:"keymap",addKeyboardShortcuts(){let e=()=>this.editor.commands.first(e=>{let{commands:t}=e;return[()=>t.undoInputRule(),()=>t.command(e=>{let{tr:n}=e,{selection:i,doc:a}=n,{empty:o,$anchor:s}=i,{pos:l,parent:u}=s,c=s.parent.isTextblock&&l>0?n.doc.resolve(l-1):s,d=c.parent.type.spec.isolating,h=s.pos-s.parentOffset,p=d&&1===c.parent.childCount?h===s.pos:r.Selection.atStart(a).from===l;return!!o&&!!p&&!!u.type.isTextblock&&!u.textContent.length&&t.clearNodes()}),()=>t.deleteSelection(),()=>t.joinBackward(),()=>t.selectNodeBackward()]}),t=()=>this.editor.commands.first(e=>{let{commands:t}=e;return[()=>t.deleteSelection(),()=>t.deleteCurrentNode(),()=>t.joinForward(),()=>t.selectNodeForward()]}),n={Enter:()=>this.editor.commands.first(e=>{let{commands:t}=e;return[()=>t.newlineInCode(),()=>t.createParagraphNear(),()=>t.liftEmptyBlock(),()=>t.splitBlock()]}),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},i={...n},a={...n,"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return T()||D()?a:i},addProseMirrorPlugins(){return[new r.Plugin({key:new r.PluginKey("clearDocument"),appendTransaction:(e,t,n)=>{if(!(e.some(e=>e.docChanged)&&!t.doc.eq(n.doc)))return;let{empty:i,from:a,to:o}=t.selection,s=r.Selection.atStart(t.doc).from,l=r.Selection.atEnd(t.doc).to;if(i||a!==s||o!==l||0!==n.doc.textBetween(0,n.doc.content.size," "," ").length)return;let u=n.tr,c=h({state:n,transaction:u}),{commands:d}=new p({editor:this.editor,state:c});if(d.clearNodes(),u.steps.length)return u}})]}}),w.create({name:"tabindex",addProseMirrorPlugins(){return[new r.Plugin({key:new r.PluginKey("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});class q{static create(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new q(e)}configure(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.extend();return t.options=x(this.options,e),t.storage=g(f(t,"addStorage",{name:t.name,options:t.options})),t}extend(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new q({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(t.name,'".')),t.options=g(f(t,"addOptions",{name:t.name})),t.storage=g(f(t,"addStorage",{name:t.name,options:t.options})),t}constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn('[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "'.concat(this.name,'".')),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=g(f(this,"addOptions",{name:this.name}))),this.storage=g(f(this,"addStorage",{name:this.name,options:this.options}))||{}}}let G=/^```([a-z]+)?[\s\n]$/,$=/^~~~([a-z]+)?[\s\n]$/,K=q.create({name:"codeBlock",addOptions:()=>({languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,HTMLAttributes:{}}),content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:e=>{var t;let{languageClassPrefix:n}=this.options;return[...(null==(t=e.firstElementChild)?void 0:t.classList)||[]].filter(e=>e.startsWith(n)).map(e=>e.replace(n,""))[0]||null},rendered:!1}}},parseHTML:()=>[{tag:"pre",preserveWhitespace:"full"}],renderHTML(e){let{node:t,HTMLAttributes:n}=e;return["pre",function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(e=>!!e).reduce((e,t)=>{let n={...e};return Object.entries(t).forEach(e=>{let[t,r]=e;if(!n[t]){n[t]=r;return}if("class"===t){let e=r?r.split(" "):[],i=n[t]?n[t].split(" "):[],a=e.filter(e=>!i.includes(e));n[t]=[...i,...a].join(" ")}else"style"===t?n[t]=[n[t],r].join("; "):n[t]=r}),n},{})}(this.options.HTMLAttributes,n),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:e=>t=>{let{commands:n}=t;return n.setNode(this.name,e)},toggleCodeBlock:e=>t=>{let{commands:n}=t;return n.toggleNode(this.name,"paragraph",e)}}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{let{empty:e,$anchor:t}=this.editor.state.selection,n=1===t.pos;return!!e&&t.parent.type.name===this.name&&(!!n||!t.parent.textContent.length)&&this.editor.commands.clearNodes()},Enter:e=>{let{editor:t}=e;if(!this.options.exitOnTripleEnter)return!1;let{state:n}=t,{selection:r}=n,{$from:i,empty:a}=r;if(!a||i.parent.type!==this.type)return!1;let o=i.parentOffset===i.parent.nodeSize-2,s=i.parent.textContent.endsWith("\n\n");return!!o&&!!s&&t.chain().command(e=>{let{tr:t}=e;return t.delete(i.pos-2,i.pos),!0}).exitCode().run()},ArrowDown:e=>{let{editor:t}=e;if(!this.options.exitOnArrowDown)return!1;let{state:n}=t,{selection:r,doc:i}=n,{$from:a,empty:o}=r;if(!o||a.parent.type!==this.type||a.parentOffset!==a.parent.nodeSize-2)return!1;let s=a.after();return!(void 0===s||i.nodeAt(s))&&t.commands.exitCode()}}},addInputRules(){return[V({find:G,type:this.type,getAttributes:e=>({language:e[1]})}),V({find:$,type:this.type,getAttributes:e=>({language:e[1]})})]},addProseMirrorPlugins(){return[new r.Plugin({key:new r.PluginKey("codeBlockVSCodeHandler"),props:{handlePaste:(e,t)=>{if(!t.clipboardData||this.editor.isActive(this.type.name))return!1;let n=t.clipboardData.getData("text/plain"),i=t.clipboardData.getData("vscode-editor-data"),a=i?JSON.parse(i):void 0,o=null==a?void 0:a.mode;if(!n||!o)return!1;let{tr:s}=e.state;return s.replaceSelectionWith(this.type.create({language:o})),s.setSelection(r.TextSelection.near(s.doc.resolve(Math.max(0,s.selection.from-2)))),s.insertText(n.replace(/\r\n?/g,"\n")),s.setMeta("paste",!0),e.dispatch(s),!0}}})]}}),Y=new Set,X=new Set;async function Z(e){return!(!t||t.getLoadedThemes().includes(e)||X.has(e))&&e in u.bundledThemes&&(X.add(e),await t.loadTheme(e),X.delete(e),!0)}async function J(e){return!(!t||t.getLoadedLanguages().includes(e)||Y.has(e))&&e in c.bundledLanguages&&(Y.add(e),await t.loadLanguage(e),Y.delete(e),!0)}async function Q(e){let{doc:r,name:i,defaultTheme:a,defaultLanguage:o}=e,s=j(r,e=>e.type.name===i),l=[...s.map(e=>e.node.attrs.theme),a],h=[...s.map(e=>e.node.attrs.language),o];t?await Promise.all([...l.flatMap(e=>Z(e)),...h.flatMap(e=>!!e&&J(e))]):await function(e){if(!t&&!n){let r=e.themes.filter(e=>!!e&&e in u.bundledThemes),i=e.languages.filter(e=>!!e&&e in c.bundledLanguages);return n=(0,d.createHighlighter)({themes:r,langs:i}).then(e=>{t=e})}if(n)return n}({languages:h,themes:l})}function ee(e){let{doc:n,name:r,defaultTheme:a,defaultLanguage:o}=e,s=[];return j(n,e=>e.type.name===r).forEach(e=>{let n=e.pos+1,r=e.node.attrs.language||o,l=e.node.attrs.theme||a,u=t;if(!u)return;u.getLoadedLanguages().includes(r)||(r="plaintext");let c=u.getLoadedThemes().includes(l)?l:u.getLoadedThemes()[0],d=u.getTheme(c);for(let t of(s.push(i.Decoration.node(e.pos,e.pos+e.node.nodeSize,{style:"background-color: ".concat(d.bg)})),u.codeToTokensBase(e.node.textContent,{lang:r,theme:c}))){for(let e of t){let t=n+e.content.length,r=i.Decoration.inline(n,t,{style:"color: ".concat(e.color)});s.push(r),n=t}n+=1}}),i.DecorationSet.create(n,s)}let et=K.extend({addOptions(){var e;return{...null==(e=this.parent)?void 0:e.call(this),defaultLanguage:null,defaultTheme:"github-dark"}},addProseMirrorPlugins(){var e;return[...(null==(e=this.parent)?void 0:e.call(this))||[],function(e){let{name:t,defaultLanguage:n,defaultTheme:i}=e,a=new r.Plugin({key:new r.PluginKey("shiki"),view:e=>new class{update(){this.checkUndecoratedBlocks()}destroy(){}async initDecorations(){let r=e.state.doc;await Q({doc:r,name:t,defaultLanguage:n,defaultTheme:i});let a=e.state.tr.setMeta("shikiPluginForceDecoration",!0);e.dispatch(a)}async checkUndecoratedBlocks(){let n=j(e.state.doc,e=>e.type.name===t);if((await Promise.all(n.flatMap(e=>[Z(e.node.attrs.theme),J(e.node.attrs.language)]))).includes(!0)){let t=e.state.tr.setMeta("shikiPluginForceDecoration",!0);e.dispatch(t)}}constructor(){this.initDecorations()}},state:{init:(e,r)=>{let{doc:a}=r;return ee({doc:a,name:t,defaultLanguage:n,defaultTheme:i})},apply:(e,r,a,o)=>{let s=a.selection.$head.parent.type.name,l=o.selection.$head.parent.type.name,u=j(a.doc,e=>e.type.name===t),c=j(o.doc,e=>e.type.name===t),d=e.docChanged&&([s,l].includes(t)||c.length!==u.length||e.steps.some(e=>void 0!==e.from&&void 0!==e.to&&u.some(t=>t.pos>=e.from&&t.pos+t.node.nodeSize<=e.to)));return e.getMeta("shikiPluginForceDecoration")||d?ee({doc:e.doc,name:t,defaultLanguage:n,defaultTheme:i}):r.map(e.mapping,e.doc)}},props:{decorations:e=>a.getState(e)}});return a}({name:this.name,defaultLanguage:this.options.defaultLanguage,defaultTheme:this.options.defaultTheme})]}})},352195:e=>{"use strict";e.s({default:()=>r});let t={};function n(e,r){"string"!=typeof r&&(r=n.defaultChars);let i=function(e){let n=t[e];if(n)return n;n=t[e]=[];for(let e=0;e<128;e++){let t=String.fromCharCode(e);n.push(t)}for(let t=0;t<e.length;t++){let r=e.charCodeAt(t);n[r]="%"+("0"+r.toString(16).toUpperCase()).slice(-2)}return n}(r);return e.replace(/(%[a-f0-9]{2})+/gi,function(e){let t="";for(let n=0,r=e.length;n<r;n+=3){let a=parseInt(e.slice(n+1,n+3),16);if(a<128){t+=i[a];continue}if((224&a)==192&&n+3<r){let r=parseInt(e.slice(n+4,n+6),16);if((192&r)==128){let e=a<<6&1984|63&r;e<128?t+="":t+=String.fromCharCode(e),n+=3;continue}}if((240&a)==224&&n+6<r){let r=parseInt(e.slice(n+4,n+6),16),i=parseInt(e.slice(n+7,n+9),16);if((192&r)==128&&(192&i)==128){let e=a<<12&61440|r<<6&4032|63&i;e<2048||e>=55296&&e<=57343?t+="":t+=String.fromCharCode(e),n+=6;continue}}if((248&a)==240&&n+9<r){let r=parseInt(e.slice(n+4,n+6),16),i=parseInt(e.slice(n+7,n+9),16),o=parseInt(e.slice(n+10,n+12),16);if((192&r)==128&&(192&i)==128&&(192&o)==128){let e=a<<18&1835008|r<<12&258048|i<<6&4032|63&o;e<65536||e>1114111?t+="":(e-=65536,t+=String.fromCharCode(55296+(e>>10),56320+(1023&e))),n+=9;continue}}t+=""}return t})}n.defaultChars=";/?:@&=+$,#",n.componentChars="";let r=n},113094:e=>{"use strict";e.s({default:()=>r});let t={};function n(e,r,i){"string"!=typeof r&&(i=r,r=n.defaultChars),void 0===i&&(i=!0);let a=function(e){let n=t[e];if(n)return n;n=t[e]=[];for(let e=0;e<128;e++){let t=String.fromCharCode(e);/^[0-9a-z]$/i.test(t)?n.push(t):n.push("%"+("0"+e.toString(16).toUpperCase()).slice(-2))}for(let t=0;t<e.length;t++)n[e.charCodeAt(t)]=e[t];return n}(r),o="";for(let t=0,n=e.length;t<n;t++){let r=e.charCodeAt(t);if(i&&37===r&&t+2<n&&/^[0-9a-f]{2}$/i.test(e.slice(t+1,t+3))){o+=e.slice(t,t+3),t+=2;continue}if(r<128){o+=a[r];continue}if(r>=55296&&r<=57343){if(r>=55296&&r<=56319&&t+1<n){let n=e.charCodeAt(t+1);if(n>=56320&&n<=57343){o+=encodeURIComponent(e[t]+e[t+1]),t++;continue}}o+="%EF%BF%BD";continue}o+=encodeURIComponent(e[t])}return o}n.defaultChars=";/?:@&=+$,-_.!~*'()#",n.componentChars="-_.!~*'()";let r=n},894612:e=>{"use strict";function t(e){let t="";return t+=e.protocol||"",t+=e.slashes?"//":"",t+=e.auth?e.auth+"@":"",e.hostname&&-1!==e.hostname.indexOf(":")?t+="["+e.hostname+"]":t+=e.hostname||"",t+=e.port?":"+e.port:"",t+=e.pathname||"",t+=e.search||"",t+=e.hash||""}e.s({default:()=>t})},158928:e=>{"use strict";function t(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}e.s({default:()=>d});let n=/^([a-z0-9.+-]+:)/i,r=/:[0-9]*$/,i=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,a=["%","/","?",";","#"].concat(["'"].concat(["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","	"]))),o=["/","?","#"],s=/^[+a-z0-9A-Z_-]{0,63}$/,l=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,u={javascript:!0,"javascript:":!0},c={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};t.prototype.parse=function(e,t){let r,d,h,p=e;if(p=p.trim(),!t&&1===e.split("#").length){let e=i.exec(p);if(e)return this.pathname=e[1],e[2]&&(this.search=e[2]),this}let f=n.exec(p);if(f&&(r=(f=f[0]).toLowerCase(),this.protocol=f,p=p.substr(f.length)),(t||f||p.match(/^\/\/[^@\/]+@[^@\/]+/))&&(h="//"===p.substr(0,2))&&!(f&&u[f])&&(p=p.substr(2),this.slashes=!0),!u[f]&&(h||f&&!c[f])){let e,t,n=-1;for(let e=0;e<o.length;e++)-1!==(d=p.indexOf(o[e]))&&(-1===n||d<n)&&(n=d);-1!==(t=-1===n?p.lastIndexOf("@"):p.lastIndexOf("@",n))&&(e=p.slice(0,t),p=p.slice(t+1),this.auth=e),n=-1;for(let e=0;e<a.length;e++)-1!==(d=p.indexOf(a[e]))&&(-1===n||d<n)&&(n=d);-1===n&&(n=p.length),":"===p[n-1]&&n--;let r=p.slice(0,n);p=p.slice(n),this.parseHost(r),this.hostname=this.hostname||"";let i="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!i){let e=this.hostname.split(/\./);for(let t=0,n=e.length;t<n;t++){let n=e[t];if(n&&!n.match(s)){let r="";for(let e=0,t=n.length;e<t;e++)n.charCodeAt(e)>127?r+="x":r+=n[e];if(!r.match(s)){let r=e.slice(0,t),i=e.slice(t+1),a=n.match(l);a&&(r.push(a[1]),i.unshift(a[2])),i.length&&(p=i.join(".")+p),this.hostname=r.join(".");break}}}}this.hostname.length>255&&(this.hostname=""),i&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}let m=p.indexOf("#");-1!==m&&(this.hash=p.substr(m),p=p.slice(0,m));let g=p.indexOf("?");return -1!==g&&(this.search=p.substr(g),p=p.slice(0,g)),p&&(this.pathname=p),c[r]&&this.hostname&&!this.pathname&&(this.pathname=""),this},t.prototype.parseHost=function(e){let t=r.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};let d=function(e,n){if(e&&e instanceof t)return e;let r=new t;return r.parse(e,n),r}},734715:e=>{"use strict";e.s({}),e.i(352195),e.i(113094),e.i(894612),e.i(158928)},432534:e=>{"use strict";e.s({}),e.i(352195),e.i(113094),e.i(894612),e.i(158928),e.i(734715)},538552:e=>{"use strict";e.s({decode:()=>t.default,encode:()=>n.default,format:()=>r.default,parse:()=>i.default});var t=e.i(352195),n=e.i(113094),r=e.i(894612),i=e.i(158928);e.i(734715)},934585:e=>{"use strict";e.s({decode:()=>t.decode,encode:()=>t.encode,format:()=>t.format,parse:()=>t.parse}),e.i(432534);var t=e.i(538552)},441224:e=>{"use strict";e.s({default:()=>t});let t=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/},346170:e=>{"use strict";e.s({default:()=>t});let t=/[\0-\x1F\x7F-\x9F]/},489132:e=>{"use strict";e.s({default:()=>t});let t=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/},891536:e=>{"use strict";e.s({default:()=>t});let t=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/},909233:e=>{"use strict";e.s({default:()=>t});let t=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/},80239:e=>{"use strict";e.s({default:()=>t});let t=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/},495545:e=>{"use strict";e.s({}),e.i(441224),e.i(346170),e.i(489132),e.i(891536),e.i(909233),e.i(80239)},607440:e=>{"use strict";e.s({}),e.i(441224),e.i(346170),e.i(489132),e.i(891536),e.i(909233),e.i(80239),e.i(495545)},517793:e=>{"use strict";e.s({Any:()=>t.default,Cc:()=>n.default,Cf:()=>r.default,P:()=>i.default,S:()=>a.default,Z:()=>o.default});var t=e.i(441224),n=e.i(346170),r=e.i(489132),i=e.i(891536),a=e.i(909233),o=e.i(80239);e.i(495545)},694246:e=>{"use strict";e.s({Any:()=>t.Any,Cc:()=>t.Cc,Cf:()=>t.Cf,P:()=>t.P,S:()=>t.S,Z:()=>t.Z}),e.i(607440);var t=e.i(517793)},857525:e=>{"use strict";e.s({P:()=>t.default});var t=e.i(891536)},545878:e=>{"use strict";e.s({S:()=>t.default});var t=e.i(909233)},243386:e=>{"use strict";e.s({default:()=>t});let t=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;\ud835\udd04ravepha;acr;d;gpon;f;\ud835\udd38plyFunction;ingcsr;\ud835\udc9cign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;\ud835\udd05pf;\ud835\udd39eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;\ud835\udc9ep;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;\ud835\udd07afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;\ud835\udd3b;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;\ud835\udc9frok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;\ud835\udd08raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;\ud835\udd3csilon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;\ud835\udd09lled\0\0mallSquare;erySmallSquare;\0\0\0f;\ud835\udd3dAll;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;\ud835\udd0a;pf;\ud835\udd3eeaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;\ud835\udca2;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;\ud835\udd40a;cr;ilde;\0cy;lcfosuiyrc;;r;\ud835\udd0dpf;\ud835\udd41\0r;\ud835\udca5rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;\ud835\udd0epf;\ud835\udd42cr;\ud835\udca6JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;\ud835\udd0f;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;\ud835\udd43erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;\ud835\udd10nusPlus;pf;\ud835\udd44c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;\ud835\udd11Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;\ud835\udca9ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;\ud835\udd12raveaeicr;ga;cron;pf;\ud835\udd46enCurlyDQoubleQuote;uote;;clr;\ud835\udcaaashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;\ud835\udd13i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;\ud835\udcab;UfosOT"r;\ud835\udd14pf;cr;\ud835\udcacBEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;\ud835\udd16ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\ud835\udd4a\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;\ud835\udcaear;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;\ud835\udd17ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;\ud835\udd4bipleDot;ctr;\ud835\udcafrok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;\ud835\udd18raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;\ud835\udd4cADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;\ud835\udcb0ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;\ud835\udd19pf;\ud835\udd4dcr;\ud835\udcb1dash;cefosirc;dge;r;\ud835\udd1apf;\ud835\udd4ecr;\ud835\udcb2fiosr;\ud835\udd1b;pf;\ud835\udd4fcr;\ud835\udcb3AIUacfosucy;cy;cy;cuteiyrc;;r;\ud835\udd1cpf;\ud835\udd50cr;\ud835\udcb4ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\ud835\udcb5\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;\ud835\udd1eraveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;\ud835\udd52;Eaeiop;cir;;d;s;rox;eingctyr;\ud835\udcb6;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;\ud835\udd1fgcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;\ud835\udd53;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;\ud835\udcb7mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;\ud835\udd20ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;\ud835\udd54o;sr;aorr;ss;cur;\ud835\udcb8bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;\ud835\udd21arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;\ud835\udd55;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;\ud835\udcb9;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;\ud835\udd22;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;\ud835\udd56alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;\ud835\udd23lig;lig;fjaltt;ig;ns;of;\0f;\ud835\udd57ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;\ud835\udcbbEabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;\ud835\udd24;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;\ud835\udd58cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;\ud835\udd25sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;\ud835\udd59bar;cltr;\ud835\udcbdasrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;\ud835\udd26rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;\ud835\udd5aa;uestcir;\ud835\udcben;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;\ud835\udd27ath;pf;\ud835\udd5b\0r;\ud835\udcbfrcy;kcy;acfghjosppa;v;eydil;;r;\ud835\udd28reen;cy;cy;pf;\ud835\udd5ccr;\ud835\udcc0ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;\ud835\udd29;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;\ud835\udd5dus;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;\ud835\udcc1m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;\ud835\udd2ao;cdnro;acdsir;otus;bd;u;p;dpels;f;\ud835\udd5ectr;\ud835\udcc2pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;\ud835\udd2bEest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;\ud835\udd5f;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;\ud835\udcc3ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\ud835\udd2c\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;\ud835\udd60aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;\ud835\udd2dimo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;\ud835\udd61nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;\ud835\udcc5;ncsp;fiopsur;\ud835\udd2epf;\ud835\udd62rime;cr;\ud835\udcc6aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;\ud835\udd2faordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;\ud835\udd63us;imes;apr;gt;olint;arachqquo;r;\ud835\udcc7buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;o\ud835\udd30acoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;\ud835\udd64adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;\ud835\udcc8tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;\ud835\udd31eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;o\ud835\udd65rk;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;\ud835\udcc9;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;\ud835\udd32raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;\ud835\udd66adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;\ud835\udccadirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;\ud835\udd33trsubppf;\ud835\udd67rotrcur;\ud835\udccbbpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;\ud835\udd34pf;\ud835\udd68;eatcr;\ud835\udccc\0\0\0\0\0\0\0trr;\ud835\udd35Aarr;Aarrais;dptfl;\ud835\udd69imAarrcqr;\ud835\udccdptracefiosucuyte;iyrc;;nr;\ud835\udd36cy;pf;\ud835\udd6acr;\ud835\udccecmy;lacdefhioswcute;ayron;;ot;ettra;r;\ud835\udd37cy;grarr;pf;\ud835\udd6bcr;\ud835\udccfjn;j;'.split("").map(e=>e.charCodeAt(0)))},683243:e=>{"use strict";e.s({default:()=>t});let t=new Uint16Array("aglq	\x15\x18\x1b\x0f\0\0\x12p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)))},155446:e=>{"use strict";var t;e.s({fromCodePoint:()=>r,replaceCodePoint:()=>i});let n=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),r=null!=(t=String.fromCodePoint)?t:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|1023&e),t+=String.fromCharCode(e)};function i(e){var t;return e>=55296&&e<=57343||e>1114111?65533:null!=(t=n.get(e))?t:e}},100391:e=>{"use strict";e.s({DecodingMode:()=>i,decodeHTML:()=>p,decodeXML:()=>f});var t,n,r,i,a=e.i(243386),o=e.i(683243),s=e.i(155446);function l(e){return e>=t.ZERO&&e<=t.NINE}!function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"}(t||(t={})),!function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"}(n||(n={})),!function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"}(r||(r={})),function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"}(i||(i={}));class u{startEntity(e){this.decodeMode=e,this.state=r.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,n){switch(this.state){case r.EntityStart:if(e.charCodeAt(n)===t.NUM)return this.state=r.NumericStart,this.consumed+=1,this.stateNumericStart(e,n+1);return this.state=r.NamedEntity,this.stateNamedEntity(e,n);case r.NumericStart:return this.stateNumericStart(e,n);case r.NumericDecimal:return this.stateNumericDecimal(e,n);case r.NumericHex:return this.stateNumericHex(e,n);case r.NamedEntity:return this.stateNamedEntity(e,n)}}stateNumericStart(e,n){return n>=e.length?-1:(32|e.charCodeAt(n))===t.LOWER_X?(this.state=r.NumericHex,this.consumed+=1,this.stateNumericHex(e,n+1)):(this.state=r.NumericDecimal,this.stateNumericDecimal(e,n))}addToNumericResult(e,t,n,r){if(t!==n){let i=n-t;this.result=this.result*Math.pow(r,i)+parseInt(e.substr(t,i),r),this.consumed+=i}}stateNumericHex(e,n){let r=n;for(;n<e.length;){var i;let a=e.charCodeAt(n);if(!l(a)&&(!((i=a)>=t.UPPER_A)||!(i<=t.UPPER_F))&&(!(i>=t.LOWER_A)||!(i<=t.LOWER_F)))return this.addToNumericResult(e,r,n,16),this.emitNumericEntity(a,3);n+=1}return this.addToNumericResult(e,r,n,16),-1}stateNumericDecimal(e,t){let n=t;for(;t<e.length;){let r=e.charCodeAt(t);if(!l(r))return this.addToNumericResult(e,n,t,10),this.emitNumericEntity(r,2);t+=1}return this.addToNumericResult(e,n,t,10),-1}emitNumericEntity(e,n){var r;if(this.consumed<=n)return null==(r=this.errors)||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===t.SEMI)this.consumed+=1;else if(this.decodeMode===i.Strict)return 0;return this.emitCodePoint((0,s.replaceCodePoint)(this.result),this.consumed),this.errors&&(e!==t.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,r){let{decodeTree:a}=this,o=a[this.treeIndex],s=(o&n.VALUE_LENGTH)>>14;for(;r<e.length;r++,this.excess++){let u=e.charCodeAt(r);if(this.treeIndex=function(e,t,r,i){let a=(t&n.BRANCH_LENGTH)>>7,o=t&n.JUMP_TABLE;if(0===a)return 0!==o&&i===o?r:-1;if(o){let t=i-o;return t<0||t>=a?-1:e[r+t]-1}let s=r,l=s+a-1;for(;s<=l;){let t=s+l>>>1,n=e[t];if(n<i)s=t+1;else{if(!(n>i))return e[t+a];l=t-1}}return -1}(a,o,this.treeIndex+Math.max(1,s),u),this.treeIndex<0)return 0===this.result||this.decodeMode===i.Attribute&&(0===s||function(e){var n;return e===t.EQUALS||(n=e)>=t.UPPER_A&&n<=t.UPPER_Z||n>=t.LOWER_A&&n<=t.LOWER_Z||l(n)}(u))?0:this.emitNotTerminatedNamedEntity();if(0!=(s=((o=a[this.treeIndex])&n.VALUE_LENGTH)>>14)){if(u===t.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==i.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return -1}emitNotTerminatedNamedEntity(){var e;let{result:t,decodeTree:r}=this,i=(r[t]&n.VALUE_LENGTH)>>14;return this.emitNamedEntityData(t,i,this.consumed),null==(e=this.errors)||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,t,r){let{decodeTree:i}=this;return this.emitCodePoint(1===t?i[e]&~n.VALUE_LENGTH:i[e+1],r),3===t&&this.emitCodePoint(i[e+2],r),r}end(){var e;switch(this.state){case r.NamedEntity:return 0!==this.result&&(this.decodeMode!==i.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case r.NumericDecimal:return this.emitNumericEntity(0,2);case r.NumericHex:return this.emitNumericEntity(0,3);case r.NumericStart:return null==(e=this.errors)||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case r.EntityStart:return 0}}constructor(e,t,n){this.decodeTree=e,this.emitCodePoint=t,this.errors=n,this.state=r.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=i.Strict}}function c(e){let t="",n=new u(e,e=>t+=(0,s.fromCodePoint)(e));return function(e,r){let i=0,a=0;for(;(a=e.indexOf("&",a))>=0;){t+=e.slice(i,a),n.startEntity(r);let o=n.write(e,a+1);if(o<0){i=a+n.end();break}i=a+o,a=0===o?i+1:i}let o=t+e.slice(i);return t="",o}}let d=c(a.default),h=c(o.default);function p(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.Legacy;return d(e,t)}function f(e){return h(e,i.Strict)}},185719:e=>{"use strict";e.s({}),e.i(243386),e.i(683243),e.i(155446),e.i(100391)},60880:e=>{"use strict";function t(e){for(let t=1;t<e.length;t++)e[t][0]+=e[t-1][0]+1;return e}e.s({default:()=>n});let n=new Map(t([[9,"&Tab;"],[0,"&NewLine;"],[22,"&excl;"],[0,"&quot;"],[0,"&num;"],[0,"&dollar;"],[0,"&percnt;"],[0,"&amp;"],[0,"&apos;"],[0,"&lpar;"],[0,"&rpar;"],[0,"&ast;"],[0,"&plus;"],[0,"&comma;"],[1,"&period;"],[0,"&sol;"],[10,"&colon;"],[0,"&semi;"],[0,{v:"&lt;",n:8402,o:"&nvlt;"}],[0,{v:"&equals;",n:8421,o:"&bne;"}],[0,{v:"&gt;",n:8402,o:"&nvgt;"}],[0,"&quest;"],[0,"&commat;"],[26,"&lbrack;"],[0,"&bsol;"],[0,"&rbrack;"],[0,"&Hat;"],[0,"&lowbar;"],[0,"&DiacriticalGrave;"],[5,{n:106,o:"&fjlig;"}],[20,"&lbrace;"],[0,"&verbar;"],[0,"&rbrace;"],[34,"&nbsp;"],[0,"&iexcl;"],[0,"&cent;"],[0,"&pound;"],[0,"&curren;"],[0,"&yen;"],[0,"&brvbar;"],[0,"&sect;"],[0,"&die;"],[0,"&copy;"],[0,"&ordf;"],[0,"&laquo;"],[0,"&not;"],[0,"&shy;"],[0,"&circledR;"],[0,"&macr;"],[0,"&deg;"],[0,"&PlusMinus;"],[0,"&sup2;"],[0,"&sup3;"],[0,"&acute;"],[0,"&micro;"],[0,"&para;"],[0,"&centerdot;"],[0,"&cedil;"],[0,"&sup1;"],[0,"&ordm;"],[0,"&raquo;"],[0,"&frac14;"],[0,"&frac12;"],[0,"&frac34;"],[0,"&iquest;"],[0,"&Agrave;"],[0,"&Aacute;"],[0,"&Acirc;"],[0,"&Atilde;"],[0,"&Auml;"],[0,"&angst;"],[0,"&AElig;"],[0,"&Ccedil;"],[0,"&Egrave;"],[0,"&Eacute;"],[0,"&Ecirc;"],[0,"&Euml;"],[0,"&Igrave;"],[0,"&Iacute;"],[0,"&Icirc;"],[0,"&Iuml;"],[0,"&ETH;"],[0,"&Ntilde;"],[0,"&Ograve;"],[0,"&Oacute;"],[0,"&Ocirc;"],[0,"&Otilde;"],[0,"&Ouml;"],[0,"&times;"],[0,"&Oslash;"],[0,"&Ugrave;"],[0,"&Uacute;"],[0,"&Ucirc;"],[0,"&Uuml;"],[0,"&Yacute;"],[0,"&THORN;"],[0,"&szlig;"],[0,"&agrave;"],[0,"&aacute;"],[0,"&acirc;"],[0,"&atilde;"],[0,"&auml;"],[0,"&aring;"],[0,"&aelig;"],[0,"&ccedil;"],[0,"&egrave;"],[0,"&eacute;"],[0,"&ecirc;"],[0,"&euml;"],[0,"&igrave;"],[0,"&iacute;"],[0,"&icirc;"],[0,"&iuml;"],[0,"&eth;"],[0,"&ntilde;"],[0,"&ograve;"],[0,"&oacute;"],[0,"&ocirc;"],[0,"&otilde;"],[0,"&ouml;"],[0,"&div;"],[0,"&oslash;"],[0,"&ugrave;"],[0,"&uacute;"],[0,"&ucirc;"],[0,"&uuml;"],[0,"&yacute;"],[0,"&thorn;"],[0,"&yuml;"],[0,"&Amacr;"],[0,"&amacr;"],[0,"&Abreve;"],[0,"&abreve;"],[0,"&Aogon;"],[0,"&aogon;"],[0,"&Cacute;"],[0,"&cacute;"],[0,"&Ccirc;"],[0,"&ccirc;"],[0,"&Cdot;"],[0,"&cdot;"],[0,"&Ccaron;"],[0,"&ccaron;"],[0,"&Dcaron;"],[0,"&dcaron;"],[0,"&Dstrok;"],[0,"&dstrok;"],[0,"&Emacr;"],[0,"&emacr;"],[2,"&Edot;"],[0,"&edot;"],[0,"&Eogon;"],[0,"&eogon;"],[0,"&Ecaron;"],[0,"&ecaron;"],[0,"&Gcirc;"],[0,"&gcirc;"],[0,"&Gbreve;"],[0,"&gbreve;"],[0,"&Gdot;"],[0,"&gdot;"],[0,"&Gcedil;"],[1,"&Hcirc;"],[0,"&hcirc;"],[0,"&Hstrok;"],[0,"&hstrok;"],[0,"&Itilde;"],[0,"&itilde;"],[0,"&Imacr;"],[0,"&imacr;"],[2,"&Iogon;"],[0,"&iogon;"],[0,"&Idot;"],[0,"&imath;"],[0,"&IJlig;"],[0,"&ijlig;"],[0,"&Jcirc;"],[0,"&jcirc;"],[0,"&Kcedil;"],[0,"&kcedil;"],[0,"&kgreen;"],[0,"&Lacute;"],[0,"&lacute;"],[0,"&Lcedil;"],[0,"&lcedil;"],[0,"&Lcaron;"],[0,"&lcaron;"],[0,"&Lmidot;"],[0,"&lmidot;"],[0,"&Lstrok;"],[0,"&lstrok;"],[0,"&Nacute;"],[0,"&nacute;"],[0,"&Ncedil;"],[0,"&ncedil;"],[0,"&Ncaron;"],[0,"&ncaron;"],[0,"&napos;"],[0,"&ENG;"],[0,"&eng;"],[0,"&Omacr;"],[0,"&omacr;"],[2,"&Odblac;"],[0,"&odblac;"],[0,"&OElig;"],[0,"&oelig;"],[0,"&Racute;"],[0,"&racute;"],[0,"&Rcedil;"],[0,"&rcedil;"],[0,"&Rcaron;"],[0,"&rcaron;"],[0,"&Sacute;"],[0,"&sacute;"],[0,"&Scirc;"],[0,"&scirc;"],[0,"&Scedil;"],[0,"&scedil;"],[0,"&Scaron;"],[0,"&scaron;"],[0,"&Tcedil;"],[0,"&tcedil;"],[0,"&Tcaron;"],[0,"&tcaron;"],[0,"&Tstrok;"],[0,"&tstrok;"],[0,"&Utilde;"],[0,"&utilde;"],[0,"&Umacr;"],[0,"&umacr;"],[0,"&Ubreve;"],[0,"&ubreve;"],[0,"&Uring;"],[0,"&uring;"],[0,"&Udblac;"],[0,"&udblac;"],[0,"&Uogon;"],[0,"&uogon;"],[0,"&Wcirc;"],[0,"&wcirc;"],[0,"&Ycirc;"],[0,"&ycirc;"],[0,"&Yuml;"],[0,"&Zacute;"],[0,"&zacute;"],[0,"&Zdot;"],[0,"&zdot;"],[0,"&Zcaron;"],[0,"&zcaron;"],[19,"&fnof;"],[34,"&imped;"],[63,"&gacute;"],[65,"&jmath;"],[142,"&circ;"],[0,"&caron;"],[16,"&breve;"],[0,"&DiacriticalDot;"],[0,"&ring;"],[0,"&ogon;"],[0,"&DiacriticalTilde;"],[0,"&dblac;"],[51,"&DownBreve;"],[127,"&Alpha;"],[0,"&Beta;"],[0,"&Gamma;"],[0,"&Delta;"],[0,"&Epsilon;"],[0,"&Zeta;"],[0,"&Eta;"],[0,"&Theta;"],[0,"&Iota;"],[0,"&Kappa;"],[0,"&Lambda;"],[0,"&Mu;"],[0,"&Nu;"],[0,"&Xi;"],[0,"&Omicron;"],[0,"&Pi;"],[0,"&Rho;"],[1,"&Sigma;"],[0,"&Tau;"],[0,"&Upsilon;"],[0,"&Phi;"],[0,"&Chi;"],[0,"&Psi;"],[0,"&ohm;"],[7,"&alpha;"],[0,"&beta;"],[0,"&gamma;"],[0,"&delta;"],[0,"&epsi;"],[0,"&zeta;"],[0,"&eta;"],[0,"&theta;"],[0,"&iota;"],[0,"&kappa;"],[0,"&lambda;"],[0,"&mu;"],[0,"&nu;"],[0,"&xi;"],[0,"&omicron;"],[0,"&pi;"],[0,"&rho;"],[0,"&sigmaf;"],[0,"&sigma;"],[0,"&tau;"],[0,"&upsi;"],[0,"&phi;"],[0,"&chi;"],[0,"&psi;"],[0,"&omega;"],[7,"&thetasym;"],[0,"&Upsi;"],[2,"&phiv;"],[0,"&piv;"],[5,"&Gammad;"],[0,"&digamma;"],[18,"&kappav;"],[0,"&rhov;"],[3,"&epsiv;"],[0,"&backepsilon;"],[10,"&IOcy;"],[0,"&DJcy;"],[0,"&GJcy;"],[0,"&Jukcy;"],[0,"&DScy;"],[0,"&Iukcy;"],[0,"&YIcy;"],[0,"&Jsercy;"],[0,"&LJcy;"],[0,"&NJcy;"],[0,"&TSHcy;"],[0,"&KJcy;"],[1,"&Ubrcy;"],[0,"&DZcy;"],[0,"&Acy;"],[0,"&Bcy;"],[0,"&Vcy;"],[0,"&Gcy;"],[0,"&Dcy;"],[0,"&IEcy;"],[0,"&ZHcy;"],[0,"&Zcy;"],[0,"&Icy;"],[0,"&Jcy;"],[0,"&Kcy;"],[0,"&Lcy;"],[0,"&Mcy;"],[0,"&Ncy;"],[0,"&Ocy;"],[0,"&Pcy;"],[0,"&Rcy;"],[0,"&Scy;"],[0,"&Tcy;"],[0,"&Ucy;"],[0,"&Fcy;"],[0,"&KHcy;"],[0,"&TScy;"],[0,"&CHcy;"],[0,"&SHcy;"],[0,"&SHCHcy;"],[0,"&HARDcy;"],[0,"&Ycy;"],[0,"&SOFTcy;"],[0,"&Ecy;"],[0,"&YUcy;"],[0,"&YAcy;"],[0,"&acy;"],[0,"&bcy;"],[0,"&vcy;"],[0,"&gcy;"],[0,"&dcy;"],[0,"&iecy;"],[0,"&zhcy;"],[0,"&zcy;"],[0,"&icy;"],[0,"&jcy;"],[0,"&kcy;"],[0,"&lcy;"],[0,"&mcy;"],[0,"&ncy;"],[0,"&ocy;"],[0,"&pcy;"],[0,"&rcy;"],[0,"&scy;"],[0,"&tcy;"],[0,"&ucy;"],[0,"&fcy;"],[0,"&khcy;"],[0,"&tscy;"],[0,"&chcy;"],[0,"&shcy;"],[0,"&shchcy;"],[0,"&hardcy;"],[0,"&ycy;"],[0,"&softcy;"],[0,"&ecy;"],[0,"&yucy;"],[0,"&yacy;"],[1,"&iocy;"],[0,"&djcy;"],[0,"&gjcy;"],[0,"&jukcy;"],[0,"&dscy;"],[0,"&iukcy;"],[0,"&yicy;"],[0,"&jsercy;"],[0,"&ljcy;"],[0,"&njcy;"],[0,"&tshcy;"],[0,"&kjcy;"],[1,"&ubrcy;"],[0,"&dzcy;"],[7074,"&ensp;"],[0,"&emsp;"],[0,"&emsp13;"],[0,"&emsp14;"],[1,"&numsp;"],[0,"&puncsp;"],[0,"&ThinSpace;"],[0,"&hairsp;"],[0,"&NegativeMediumSpace;"],[0,"&zwnj;"],[0,"&zwj;"],[0,"&lrm;"],[0,"&rlm;"],[0,"&dash;"],[2,"&ndash;"],[0,"&mdash;"],[0,"&horbar;"],[0,"&Verbar;"],[1,"&lsquo;"],[0,"&CloseCurlyQuote;"],[0,"&lsquor;"],[1,"&ldquo;"],[0,"&CloseCurlyDoubleQuote;"],[0,"&bdquo;"],[1,"&dagger;"],[0,"&Dagger;"],[0,"&bull;"],[2,"&nldr;"],[0,"&hellip;"],[9,"&permil;"],[0,"&pertenk;"],[0,"&prime;"],[0,"&Prime;"],[0,"&tprime;"],[0,"&backprime;"],[3,"&lsaquo;"],[0,"&rsaquo;"],[3,"&oline;"],[2,"&caret;"],[1,"&hybull;"],[0,"&frasl;"],[10,"&bsemi;"],[7,"&qprime;"],[7,{v:"&MediumSpace;",n:8202,o:"&ThickSpace;"}],[0,"&NoBreak;"],[0,"&af;"],[0,"&InvisibleTimes;"],[0,"&ic;"],[72,"&euro;"],[46,"&tdot;"],[0,"&DotDot;"],[37,"&complexes;"],[2,"&incare;"],[4,"&gscr;"],[0,"&hamilt;"],[0,"&Hfr;"],[0,"&Hopf;"],[0,"&planckh;"],[0,"&hbar;"],[0,"&imagline;"],[0,"&Ifr;"],[0,"&lagran;"],[0,"&ell;"],[1,"&naturals;"],[0,"&numero;"],[0,"&copysr;"],[0,"&weierp;"],[0,"&Popf;"],[0,"&Qopf;"],[0,"&realine;"],[0,"&real;"],[0,"&reals;"],[0,"&rx;"],[3,"&trade;"],[1,"&integers;"],[2,"&mho;"],[0,"&zeetrf;"],[0,"&iiota;"],[2,"&bernou;"],[0,"&Cayleys;"],[1,"&escr;"],[0,"&Escr;"],[0,"&Fouriertrf;"],[1,"&Mellintrf;"],[0,"&order;"],[0,"&alefsym;"],[0,"&beth;"],[0,"&gimel;"],[0,"&daleth;"],[12,"&CapitalDifferentialD;"],[0,"&dd;"],[0,"&ee;"],[0,"&ii;"],[10,"&frac13;"],[0,"&frac23;"],[0,"&frac15;"],[0,"&frac25;"],[0,"&frac35;"],[0,"&frac45;"],[0,"&frac16;"],[0,"&frac56;"],[0,"&frac18;"],[0,"&frac38;"],[0,"&frac58;"],[0,"&frac78;"],[49,"&larr;"],[0,"&ShortUpArrow;"],[0,"&rarr;"],[0,"&darr;"],[0,"&harr;"],[0,"&updownarrow;"],[0,"&nwarr;"],[0,"&nearr;"],[0,"&LowerRightArrow;"],[0,"&LowerLeftArrow;"],[0,"&nlarr;"],[0,"&nrarr;"],[1,{v:"&rarrw;",n:824,o:"&nrarrw;"}],[0,"&Larr;"],[0,"&Uarr;"],[0,"&Rarr;"],[0,"&Darr;"],[0,"&larrtl;"],[0,"&rarrtl;"],[0,"&LeftTeeArrow;"],[0,"&mapstoup;"],[0,"&map;"],[0,"&DownTeeArrow;"],[1,"&hookleftarrow;"],[0,"&hookrightarrow;"],[0,"&larrlp;"],[0,"&looparrowright;"],[0,"&harrw;"],[0,"&nharr;"],[1,"&lsh;"],[0,"&rsh;"],[0,"&ldsh;"],[0,"&rdsh;"],[1,"&crarr;"],[0,"&cularr;"],[0,"&curarr;"],[2,"&circlearrowleft;"],[0,"&circlearrowright;"],[0,"&leftharpoonup;"],[0,"&DownLeftVector;"],[0,"&RightUpVector;"],[0,"&LeftUpVector;"],[0,"&rharu;"],[0,"&DownRightVector;"],[0,"&dharr;"],[0,"&dharl;"],[0,"&RightArrowLeftArrow;"],[0,"&udarr;"],[0,"&LeftArrowRightArrow;"],[0,"&leftleftarrows;"],[0,"&upuparrows;"],[0,"&rightrightarrows;"],[0,"&ddarr;"],[0,"&leftrightharpoons;"],[0,"&Equilibrium;"],[0,"&nlArr;"],[0,"&nhArr;"],[0,"&nrArr;"],[0,"&DoubleLeftArrow;"],[0,"&DoubleUpArrow;"],[0,"&DoubleRightArrow;"],[0,"&dArr;"],[0,"&DoubleLeftRightArrow;"],[0,"&DoubleUpDownArrow;"],[0,"&nwArr;"],[0,"&neArr;"],[0,"&seArr;"],[0,"&swArr;"],[0,"&lAarr;"],[0,"&rAarr;"],[1,"&zigrarr;"],[6,"&larrb;"],[0,"&rarrb;"],[15,"&DownArrowUpArrow;"],[7,"&loarr;"],[0,"&roarr;"],[0,"&hoarr;"],[0,"&forall;"],[0,"&comp;"],[0,{v:"&part;",n:824,o:"&npart;"}],[0,"&exist;"],[0,"&nexist;"],[0,"&empty;"],[1,"&Del;"],[0,"&Element;"],[0,"&NotElement;"],[1,"&ni;"],[0,"&notni;"],[2,"&prod;"],[0,"&coprod;"],[0,"&sum;"],[0,"&minus;"],[0,"&MinusPlus;"],[0,"&dotplus;"],[1,"&Backslash;"],[0,"&lowast;"],[0,"&compfn;"],[1,"&radic;"],[2,"&prop;"],[0,"&infin;"],[0,"&angrt;"],[0,{v:"&ang;",n:8402,o:"&nang;"}],[0,"&angmsd;"],[0,"&angsph;"],[0,"&mid;"],[0,"&nmid;"],[0,"&DoubleVerticalBar;"],[0,"&NotDoubleVerticalBar;"],[0,"&and;"],[0,"&or;"],[0,{v:"&cap;",n:65024,o:"&caps;"}],[0,{v:"&cup;",n:65024,o:"&cups;"}],[0,"&int;"],[0,"&Int;"],[0,"&iiint;"],[0,"&conint;"],[0,"&Conint;"],[0,"&Cconint;"],[0,"&cwint;"],[0,"&ClockwiseContourIntegral;"],[0,"&awconint;"],[0,"&there4;"],[0,"&becaus;"],[0,"&ratio;"],[0,"&Colon;"],[0,"&dotminus;"],[1,"&mDDot;"],[0,"&homtht;"],[0,{v:"&sim;",n:8402,o:"&nvsim;"}],[0,{v:"&backsim;",n:817,o:"&race;"}],[0,{v:"&ac;",n:819,o:"&acE;"}],[0,"&acd;"],[0,"&VerticalTilde;"],[0,"&NotTilde;"],[0,{v:"&eqsim;",n:824,o:"&nesim;"}],[0,"&sime;"],[0,"&NotTildeEqual;"],[0,"&cong;"],[0,"&simne;"],[0,"&ncong;"],[0,"&ap;"],[0,"&nap;"],[0,"&ape;"],[0,{v:"&apid;",n:824,o:"&napid;"}],[0,"&backcong;"],[0,{v:"&asympeq;",n:8402,o:"&nvap;"}],[0,{v:"&bump;",n:824,o:"&nbump;"}],[0,{v:"&bumpe;",n:824,o:"&nbumpe;"}],[0,{v:"&doteq;",n:824,o:"&nedot;"}],[0,"&doteqdot;"],[0,"&efDot;"],[0,"&erDot;"],[0,"&Assign;"],[0,"&ecolon;"],[0,"&ecir;"],[0,"&circeq;"],[1,"&wedgeq;"],[0,"&veeeq;"],[1,"&triangleq;"],[2,"&equest;"],[0,"&ne;"],[0,{v:"&Congruent;",n:8421,o:"&bnequiv;"}],[0,"&nequiv;"],[1,{v:"&le;",n:8402,o:"&nvle;"}],[0,{v:"&ge;",n:8402,o:"&nvge;"}],[0,{v:"&lE;",n:824,o:"&nlE;"}],[0,{v:"&gE;",n:824,o:"&ngE;"}],[0,{v:"&lnE;",n:65024,o:"&lvertneqq;"}],[0,{v:"&gnE;",n:65024,o:"&gvertneqq;"}],[0,{v:"&ll;",n:new Map(t([[824,"&nLtv;"],[7577,"&nLt;"]]))}],[0,{v:"&gg;",n:new Map(t([[824,"&nGtv;"],[7577,"&nGt;"]]))}],[0,"&between;"],[0,"&NotCupCap;"],[0,"&nless;"],[0,"&ngt;"],[0,"&nle;"],[0,"&nge;"],[0,"&lesssim;"],[0,"&GreaterTilde;"],[0,"&nlsim;"],[0,"&ngsim;"],[0,"&LessGreater;"],[0,"&gl;"],[0,"&NotLessGreater;"],[0,"&NotGreaterLess;"],[0,"&pr;"],[0,"&sc;"],[0,"&prcue;"],[0,"&sccue;"],[0,"&PrecedesTilde;"],[0,{v:"&scsim;",n:824,o:"&NotSucceedsTilde;"}],[0,"&NotPrecedes;"],[0,"&NotSucceeds;"],[0,{v:"&sub;",n:8402,o:"&NotSubset;"}],[0,{v:"&sup;",n:8402,o:"&NotSuperset;"}],[0,"&nsub;"],[0,"&nsup;"],[0,"&sube;"],[0,"&supe;"],[0,"&NotSubsetEqual;"],[0,"&NotSupersetEqual;"],[0,{v:"&subne;",n:65024,o:"&varsubsetneq;"}],[0,{v:"&supne;",n:65024,o:"&varsupsetneq;"}],[1,"&cupdot;"],[0,"&UnionPlus;"],[0,{v:"&sqsub;",n:824,o:"&NotSquareSubset;"}],[0,{v:"&sqsup;",n:824,o:"&NotSquareSuperset;"}],[0,"&sqsube;"],[0,"&sqsupe;"],[0,{v:"&sqcap;",n:65024,o:"&sqcaps;"}],[0,{v:"&sqcup;",n:65024,o:"&sqcups;"}],[0,"&CirclePlus;"],[0,"&CircleMinus;"],[0,"&CircleTimes;"],[0,"&osol;"],[0,"&CircleDot;"],[0,"&circledcirc;"],[0,"&circledast;"],[1,"&circleddash;"],[0,"&boxplus;"],[0,"&boxminus;"],[0,"&boxtimes;"],[0,"&dotsquare;"],[0,"&RightTee;"],[0,"&dashv;"],[0,"&DownTee;"],[0,"&bot;"],[1,"&models;"],[0,"&DoubleRightTee;"],[0,"&Vdash;"],[0,"&Vvdash;"],[0,"&VDash;"],[0,"&nvdash;"],[0,"&nvDash;"],[0,"&nVdash;"],[0,"&nVDash;"],[0,"&prurel;"],[1,"&LeftTriangle;"],[0,"&RightTriangle;"],[0,{v:"&LeftTriangleEqual;",n:8402,o:"&nvltrie;"}],[0,{v:"&RightTriangleEqual;",n:8402,o:"&nvrtrie;"}],[0,"&origof;"],[0,"&imof;"],[0,"&multimap;"],[0,"&hercon;"],[0,"&intcal;"],[0,"&veebar;"],[1,"&barvee;"],[0,"&angrtvb;"],[0,"&lrtri;"],[0,"&bigwedge;"],[0,"&bigvee;"],[0,"&bigcap;"],[0,"&bigcup;"],[0,"&diam;"],[0,"&sdot;"],[0,"&sstarf;"],[0,"&divideontimes;"],[0,"&bowtie;"],[0,"&ltimes;"],[0,"&rtimes;"],[0,"&leftthreetimes;"],[0,"&rightthreetimes;"],[0,"&backsimeq;"],[0,"&curlyvee;"],[0,"&curlywedge;"],[0,"&Sub;"],[0,"&Sup;"],[0,"&Cap;"],[0,"&Cup;"],[0,"&fork;"],[0,"&epar;"],[0,"&lessdot;"],[0,"&gtdot;"],[0,{v:"&Ll;",n:824,o:"&nLl;"}],[0,{v:"&Gg;",n:824,o:"&nGg;"}],[0,{v:"&leg;",n:65024,o:"&lesg;"}],[0,{v:"&gel;",n:65024,o:"&gesl;"}],[2,"&cuepr;"],[0,"&cuesc;"],[0,"&NotPrecedesSlantEqual;"],[0,"&NotSucceedsSlantEqual;"],[0,"&NotSquareSubsetEqual;"],[0,"&NotSquareSupersetEqual;"],[2,"&lnsim;"],[0,"&gnsim;"],[0,"&precnsim;"],[0,"&scnsim;"],[0,"&nltri;"],[0,"&NotRightTriangle;"],[0,"&nltrie;"],[0,"&NotRightTriangleEqual;"],[0,"&vellip;"],[0,"&ctdot;"],[0,"&utdot;"],[0,"&dtdot;"],[0,"&disin;"],[0,"&isinsv;"],[0,"&isins;"],[0,{v:"&isindot;",n:824,o:"&notindot;"}],[0,"&notinvc;"],[0,"&notinvb;"],[1,{v:"&isinE;",n:824,o:"&notinE;"}],[0,"&nisd;"],[0,"&xnis;"],[0,"&nis;"],[0,"&notnivc;"],[0,"&notnivb;"],[6,"&barwed;"],[0,"&Barwed;"],[1,"&lceil;"],[0,"&rceil;"],[0,"&LeftFloor;"],[0,"&rfloor;"],[0,"&drcrop;"],[0,"&dlcrop;"],[0,"&urcrop;"],[0,"&ulcrop;"],[0,"&bnot;"],[1,"&profline;"],[0,"&profsurf;"],[1,"&telrec;"],[0,"&target;"],[5,"&ulcorn;"],[0,"&urcorn;"],[0,"&dlcorn;"],[0,"&drcorn;"],[2,"&frown;"],[0,"&smile;"],[9,"&cylcty;"],[0,"&profalar;"],[7,"&topbot;"],[6,"&ovbar;"],[1,"&solbar;"],[60,"&angzarr;"],[51,"&lmoustache;"],[0,"&rmoustache;"],[2,"&OverBracket;"],[0,"&bbrk;"],[0,"&bbrktbrk;"],[37,"&OverParenthesis;"],[0,"&UnderParenthesis;"],[0,"&OverBrace;"],[0,"&UnderBrace;"],[2,"&trpezium;"],[4,"&elinters;"],[59,"&blank;"],[164,"&circledS;"],[55,"&boxh;"],[1,"&boxv;"],[9,"&boxdr;"],[3,"&boxdl;"],[3,"&boxur;"],[3,"&boxul;"],[3,"&boxvr;"],[7,"&boxvl;"],[7,"&boxhd;"],[7,"&boxhu;"],[7,"&boxvh;"],[19,"&boxH;"],[0,"&boxV;"],[0,"&boxdR;"],[0,"&boxDr;"],[0,"&boxDR;"],[0,"&boxdL;"],[0,"&boxDl;"],[0,"&boxDL;"],[0,"&boxuR;"],[0,"&boxUr;"],[0,"&boxUR;"],[0,"&boxuL;"],[0,"&boxUl;"],[0,"&boxUL;"],[0,"&boxvR;"],[0,"&boxVr;"],[0,"&boxVR;"],[0,"&boxvL;"],[0,"&boxVl;"],[0,"&boxVL;"],[0,"&boxHd;"],[0,"&boxhD;"],[0,"&boxHD;"],[0,"&boxHu;"],[0,"&boxhU;"],[0,"&boxHU;"],[0,"&boxvH;"],[0,"&boxVh;"],[0,"&boxVH;"],[19,"&uhblk;"],[3,"&lhblk;"],[3,"&block;"],[8,"&blk14;"],[0,"&blk12;"],[0,"&blk34;"],[13,"&square;"],[8,"&blacksquare;"],[0,"&EmptyVerySmallSquare;"],[1,"&rect;"],[0,"&marker;"],[2,"&fltns;"],[1,"&bigtriangleup;"],[0,"&blacktriangle;"],[0,"&triangle;"],[2,"&blacktriangleright;"],[0,"&rtri;"],[3,"&bigtriangledown;"],[0,"&blacktriangledown;"],[0,"&dtri;"],[2,"&blacktriangleleft;"],[0,"&ltri;"],[6,"&loz;"],[0,"&cir;"],[32,"&tridot;"],[2,"&bigcirc;"],[8,"&ultri;"],[0,"&urtri;"],[0,"&lltri;"],[0,"&EmptySmallSquare;"],[0,"&FilledSmallSquare;"],[8,"&bigstar;"],[0,"&star;"],[7,"&phone;"],[49,"&female;"],[1,"&male;"],[29,"&spades;"],[2,"&clubs;"],[1,"&hearts;"],[0,"&diamondsuit;"],[3,"&sung;"],[2,"&flat;"],[0,"&natural;"],[0,"&sharp;"],[163,"&check;"],[3,"&cross;"],[8,"&malt;"],[21,"&sext;"],[33,"&VerticalSeparator;"],[25,"&lbbrk;"],[0,"&rbbrk;"],[84,"&bsolhsub;"],[0,"&suphsol;"],[28,"&LeftDoubleBracket;"],[0,"&RightDoubleBracket;"],[0,"&lang;"],[0,"&rang;"],[0,"&Lang;"],[0,"&Rang;"],[0,"&loang;"],[0,"&roang;"],[7,"&longleftarrow;"],[0,"&longrightarrow;"],[0,"&longleftrightarrow;"],[0,"&DoubleLongLeftArrow;"],[0,"&DoubleLongRightArrow;"],[0,"&DoubleLongLeftRightArrow;"],[1,"&longmapsto;"],[2,"&dzigrarr;"],[258,"&nvlArr;"],[0,"&nvrArr;"],[0,"&nvHarr;"],[0,"&Map;"],[6,"&lbarr;"],[0,"&bkarow;"],[0,"&lBarr;"],[0,"&dbkarow;"],[0,"&drbkarow;"],[0,"&DDotrahd;"],[0,"&UpArrowBar;"],[0,"&DownArrowBar;"],[2,"&Rarrtl;"],[2,"&latail;"],[0,"&ratail;"],[0,"&lAtail;"],[0,"&rAtail;"],[0,"&larrfs;"],[0,"&rarrfs;"],[0,"&larrbfs;"],[0,"&rarrbfs;"],[2,"&nwarhk;"],[0,"&nearhk;"],[0,"&hksearow;"],[0,"&hkswarow;"],[0,"&nwnear;"],[0,"&nesear;"],[0,"&seswar;"],[0,"&swnwar;"],[8,{v:"&rarrc;",n:824,o:"&nrarrc;"}],[1,"&cudarrr;"],[0,"&ldca;"],[0,"&rdca;"],[0,"&cudarrl;"],[0,"&larrpl;"],[2,"&curarrm;"],[0,"&cularrp;"],[7,"&rarrpl;"],[2,"&harrcir;"],[0,"&Uarrocir;"],[0,"&lurdshar;"],[0,"&ldrushar;"],[2,"&LeftRightVector;"],[0,"&RightUpDownVector;"],[0,"&DownLeftRightVector;"],[0,"&LeftUpDownVector;"],[0,"&LeftVectorBar;"],[0,"&RightVectorBar;"],[0,"&RightUpVectorBar;"],[0,"&RightDownVectorBar;"],[0,"&DownLeftVectorBar;"],[0,"&DownRightVectorBar;"],[0,"&LeftUpVectorBar;"],[0,"&LeftDownVectorBar;"],[0,"&LeftTeeVector;"],[0,"&RightTeeVector;"],[0,"&RightUpTeeVector;"],[0,"&RightDownTeeVector;"],[0,"&DownLeftTeeVector;"],[0,"&DownRightTeeVector;"],[0,"&LeftUpTeeVector;"],[0,"&LeftDownTeeVector;"],[0,"&lHar;"],[0,"&uHar;"],[0,"&rHar;"],[0,"&dHar;"],[0,"&luruhar;"],[0,"&ldrdhar;"],[0,"&ruluhar;"],[0,"&rdldhar;"],[0,"&lharul;"],[0,"&llhard;"],[0,"&rharul;"],[0,"&lrhard;"],[0,"&udhar;"],[0,"&duhar;"],[0,"&RoundImplies;"],[0,"&erarr;"],[0,"&simrarr;"],[0,"&larrsim;"],[0,"&rarrsim;"],[0,"&rarrap;"],[0,"&ltlarr;"],[1,"&gtrarr;"],[0,"&subrarr;"],[1,"&suplarr;"],[0,"&lfisht;"],[0,"&rfisht;"],[0,"&ufisht;"],[0,"&dfisht;"],[5,"&lopar;"],[0,"&ropar;"],[4,"&lbrke;"],[0,"&rbrke;"],[0,"&lbrkslu;"],[0,"&rbrksld;"],[0,"&lbrksld;"],[0,"&rbrkslu;"],[0,"&langd;"],[0,"&rangd;"],[0,"&lparlt;"],[0,"&rpargt;"],[0,"&gtlPar;"],[0,"&ltrPar;"],[3,"&vzigzag;"],[1,"&vangrt;"],[0,"&angrtvbd;"],[6,"&ange;"],[0,"&range;"],[0,"&dwangle;"],[0,"&uwangle;"],[0,"&angmsdaa;"],[0,"&angmsdab;"],[0,"&angmsdac;"],[0,"&angmsdad;"],[0,"&angmsdae;"],[0,"&angmsdaf;"],[0,"&angmsdag;"],[0,"&angmsdah;"],[0,"&bemptyv;"],[0,"&demptyv;"],[0,"&cemptyv;"],[0,"&raemptyv;"],[0,"&laemptyv;"],[0,"&ohbar;"],[0,"&omid;"],[0,"&opar;"],[1,"&operp;"],[1,"&olcross;"],[0,"&odsold;"],[1,"&olcir;"],[0,"&ofcir;"],[0,"&olt;"],[0,"&ogt;"],[0,"&cirscir;"],[0,"&cirE;"],[0,"&solb;"],[0,"&bsolb;"],[3,"&boxbox;"],[3,"&trisb;"],[0,"&rtriltri;"],[0,{v:"&LeftTriangleBar;",n:824,o:"&NotLeftTriangleBar;"}],[0,{v:"&RightTriangleBar;",n:824,o:"&NotRightTriangleBar;"}],[11,"&iinfin;"],[0,"&infintie;"],[0,"&nvinfin;"],[4,"&eparsl;"],[0,"&smeparsl;"],[0,"&eqvparsl;"],[5,"&blacklozenge;"],[8,"&RuleDelayed;"],[1,"&dsol;"],[9,"&bigodot;"],[0,"&bigoplus;"],[0,"&bigotimes;"],[1,"&biguplus;"],[1,"&bigsqcup;"],[5,"&iiiint;"],[0,"&fpartint;"],[2,"&cirfnint;"],[0,"&awint;"],[0,"&rppolint;"],[0,"&scpolint;"],[0,"&npolint;"],[0,"&pointint;"],[0,"&quatint;"],[0,"&intlarhk;"],[10,"&pluscir;"],[0,"&plusacir;"],[0,"&simplus;"],[0,"&plusdu;"],[0,"&plussim;"],[0,"&plustwo;"],[1,"&mcomma;"],[0,"&minusdu;"],[2,"&loplus;"],[0,"&roplus;"],[0,"&Cross;"],[0,"&timesd;"],[0,"&timesbar;"],[1,"&smashp;"],[0,"&lotimes;"],[0,"&rotimes;"],[0,"&otimesas;"],[0,"&Otimes;"],[0,"&odiv;"],[0,"&triplus;"],[0,"&triminus;"],[0,"&tritime;"],[0,"&intprod;"],[2,"&amalg;"],[0,"&capdot;"],[1,"&ncup;"],[0,"&ncap;"],[0,"&capand;"],[0,"&cupor;"],[0,"&cupcap;"],[0,"&capcup;"],[0,"&cupbrcap;"],[0,"&capbrcup;"],[0,"&cupcup;"],[0,"&capcap;"],[0,"&ccups;"],[0,"&ccaps;"],[2,"&ccupssm;"],[2,"&And;"],[0,"&Or;"],[0,"&andand;"],[0,"&oror;"],[0,"&orslope;"],[0,"&andslope;"],[1,"&andv;"],[0,"&orv;"],[0,"&andd;"],[0,"&ord;"],[1,"&wedbar;"],[6,"&sdote;"],[3,"&simdot;"],[2,{v:"&congdot;",n:824,o:"&ncongdot;"}],[0,"&easter;"],[0,"&apacir;"],[0,{v:"&apE;",n:824,o:"&napE;"}],[0,"&eplus;"],[0,"&pluse;"],[0,"&Esim;"],[0,"&Colone;"],[0,"&Equal;"],[1,"&ddotseq;"],[0,"&equivDD;"],[0,"&ltcir;"],[0,"&gtcir;"],[0,"&ltquest;"],[0,"&gtquest;"],[0,{v:"&leqslant;",n:824,o:"&nleqslant;"}],[0,{v:"&geqslant;",n:824,o:"&ngeqslant;"}],[0,"&lesdot;"],[0,"&gesdot;"],[0,"&lesdoto;"],[0,"&gesdoto;"],[0,"&lesdotor;"],[0,"&gesdotol;"],[0,"&lap;"],[0,"&gap;"],[0,"&lne;"],[0,"&gne;"],[0,"&lnap;"],[0,"&gnap;"],[0,"&lEg;"],[0,"&gEl;"],[0,"&lsime;"],[0,"&gsime;"],[0,"&lsimg;"],[0,"&gsiml;"],[0,"&lgE;"],[0,"&glE;"],[0,"&lesges;"],[0,"&gesles;"],[0,"&els;"],[0,"&egs;"],[0,"&elsdot;"],[0,"&egsdot;"],[0,"&el;"],[0,"&eg;"],[2,"&siml;"],[0,"&simg;"],[0,"&simlE;"],[0,"&simgE;"],[0,{v:"&LessLess;",n:824,o:"&NotNestedLessLess;"}],[0,{v:"&GreaterGreater;",n:824,o:"&NotNestedGreaterGreater;"}],[1,"&glj;"],[0,"&gla;"],[0,"&ltcc;"],[0,"&gtcc;"],[0,"&lescc;"],[0,"&gescc;"],[0,"&smt;"],[0,"&lat;"],[0,{v:"&smte;",n:65024,o:"&smtes;"}],[0,{v:"&late;",n:65024,o:"&lates;"}],[0,"&bumpE;"],[0,{v:"&PrecedesEqual;",n:824,o:"&NotPrecedesEqual;"}],[0,{v:"&sce;",n:824,o:"&NotSucceedsEqual;"}],[2,"&prE;"],[0,"&scE;"],[0,"&precneqq;"],[0,"&scnE;"],[0,"&prap;"],[0,"&scap;"],[0,"&precnapprox;"],[0,"&scnap;"],[0,"&Pr;"],[0,"&Sc;"],[0,"&subdot;"],[0,"&supdot;"],[0,"&subplus;"],[0,"&supplus;"],[0,"&submult;"],[0,"&supmult;"],[0,"&subedot;"],[0,"&supedot;"],[0,{v:"&subE;",n:824,o:"&nsubE;"}],[0,{v:"&supE;",n:824,o:"&nsupE;"}],[0,"&subsim;"],[0,"&supsim;"],[2,{v:"&subnE;",n:65024,o:"&varsubsetneqq;"}],[0,{v:"&supnE;",n:65024,o:"&varsupsetneqq;"}],[2,"&csub;"],[0,"&csup;"],[0,"&csube;"],[0,"&csupe;"],[0,"&subsup;"],[0,"&supsub;"],[0,"&subsub;"],[0,"&supsup;"],[0,"&suphsub;"],[0,"&supdsub;"],[0,"&forkv;"],[0,"&topfork;"],[0,"&mlcp;"],[8,"&Dashv;"],[1,"&Vdashl;"],[0,"&Barv;"],[0,"&vBar;"],[0,"&vBarv;"],[1,"&Vbar;"],[0,"&Not;"],[0,"&bNot;"],[0,"&rnmid;"],[0,"&cirmid;"],[0,"&midcir;"],[0,"&topcir;"],[0,"&nhpar;"],[0,"&parsim;"],[9,{v:"&parsl;",n:8421,o:"&nparsl;"}],[44343,{n:new Map(t([[56476,"&Ascr;"],[1,"&Cscr;"],[0,"&Dscr;"],[2,"&Gscr;"],[2,"&Jscr;"],[0,"&Kscr;"],[2,"&Nscr;"],[0,"&Oscr;"],[0,"&Pscr;"],[0,"&Qscr;"],[1,"&Sscr;"],[0,"&Tscr;"],[0,"&Uscr;"],[0,"&Vscr;"],[0,"&Wscr;"],[0,"&Xscr;"],[0,"&Yscr;"],[0,"&Zscr;"],[0,"&ascr;"],[0,"&bscr;"],[0,"&cscr;"],[0,"&dscr;"],[1,"&fscr;"],[1,"&hscr;"],[0,"&iscr;"],[0,"&jscr;"],[0,"&kscr;"],[0,"&lscr;"],[0,"&mscr;"],[0,"&nscr;"],[1,"&pscr;"],[0,"&qscr;"],[0,"&rscr;"],[0,"&sscr;"],[0,"&tscr;"],[0,"&uscr;"],[0,"&vscr;"],[0,"&wscr;"],[0,"&xscr;"],[0,"&yscr;"],[0,"&zscr;"],[52,"&Afr;"],[0,"&Bfr;"],[1,"&Dfr;"],[0,"&Efr;"],[0,"&Ffr;"],[0,"&Gfr;"],[2,"&Jfr;"],[0,"&Kfr;"],[0,"&Lfr;"],[0,"&Mfr;"],[0,"&Nfr;"],[0,"&Ofr;"],[0,"&Pfr;"],[0,"&Qfr;"],[1,"&Sfr;"],[0,"&Tfr;"],[0,"&Ufr;"],[0,"&Vfr;"],[0,"&Wfr;"],[0,"&Xfr;"],[0,"&Yfr;"],[1,"&afr;"],[0,"&bfr;"],[0,"&cfr;"],[0,"&dfr;"],[0,"&efr;"],[0,"&ffr;"],[0,"&gfr;"],[0,"&hfr;"],[0,"&ifr;"],[0,"&jfr;"],[0,"&kfr;"],[0,"&lfr;"],[0,"&mfr;"],[0,"&nfr;"],[0,"&ofr;"],[0,"&pfr;"],[0,"&qfr;"],[0,"&rfr;"],[0,"&sfr;"],[0,"&tfr;"],[0,"&ufr;"],[0,"&vfr;"],[0,"&wfr;"],[0,"&xfr;"],[0,"&yfr;"],[0,"&zfr;"],[0,"&Aopf;"],[0,"&Bopf;"],[1,"&Dopf;"],[0,"&Eopf;"],[0,"&Fopf;"],[0,"&Gopf;"],[1,"&Iopf;"],[0,"&Jopf;"],[0,"&Kopf;"],[0,"&Lopf;"],[0,"&Mopf;"],[1,"&Oopf;"],[3,"&Sopf;"],[0,"&Topf;"],[0,"&Uopf;"],[0,"&Vopf;"],[0,"&Wopf;"],[0,"&Xopf;"],[0,"&Yopf;"],[1,"&aopf;"],[0,"&bopf;"],[0,"&copf;"],[0,"&dopf;"],[0,"&eopf;"],[0,"&fopf;"],[0,"&gopf;"],[0,"&hopf;"],[0,"&iopf;"],[0,"&jopf;"],[0,"&kopf;"],[0,"&lopf;"],[0,"&mopf;"],[0,"&nopf;"],[0,"&oopf;"],[0,"&popf;"],[0,"&qopf;"],[0,"&ropf;"],[0,"&sopf;"],[0,"&topf;"],[0,"&uopf;"],[0,"&vopf;"],[0,"&wopf;"],[0,"&xopf;"],[0,"&yopf;"],[0,"&zopf;"]]))}],[8906,"&fflig;"],[0,"&filig;"],[0,"&fllig;"],[0,"&ffilig;"],[0,"&ffllig;"]]))},990953:e=>{"use strict";e.s({encodeXML:()=>i,escapeAttribute:()=>s,escapeText:()=>l,escapeUTF8:()=>o,getCodePoint:()=>r,xmlReplacer:()=>t});let t=/["&'<>$\x80-\uFFFF]/g,n=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]),r=null!=String.prototype.codePointAt?(e,t)=>e.codePointAt(t):(e,t)=>(64512&e.charCodeAt(t))==55296?(e.charCodeAt(t)-55296)*1024+e.charCodeAt(t+1)-56320+65536:e.charCodeAt(t);function i(e){let i,a="",o=0;for(;null!==(i=t.exec(e));){let s=i.index,l=e.charCodeAt(s),u=n.get(l);void 0!==u?(a+=e.substring(o,s)+u,o=s+1):(a+="".concat(e.substring(o,s),"&#x").concat(r(e,s).toString(16),";"),o=t.lastIndex+=Number((64512&l)==55296))}return a+e.substr(o)}function a(e,t){return function(n){let r,i=0,a="";for(;r=e.exec(n);)i!==r.index&&(a+=n.substring(i,r.index)),a+=t.get(r[0].charCodeAt(0)),i=r.index+1;return a+n.substring(i)}}let o=a(/[&<>'"]/g,n),s=a(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),l=a(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]]))},778682:e=>{"use strict";e.s({encodeHTML:()=>i,encodeNonAsciiHTML:()=>a});var t=e.i(60880),n=e.i(990953);let r=/[\t\n!-,./:-@[-`\f{-}$\x80-\uFFFF]/g;function i(e){return o(r,e)}function a(e){return o(n.xmlReplacer,e)}function o(e,r){let i,a="",o=0;for(;null!==(i=e.exec(r));){let s=i.index;a+=r.substring(o,s);let l=r.charCodeAt(s),u=t.default.get(l);if("object"==typeof u){if(s+1<r.length){let t=r.charCodeAt(s+1),n="number"==typeof u.n?u.n===t?u.o:void 0:u.n.get(t);if(void 0!==n){a+=n,o=e.lastIndex+=1;continue}}u=u.v}if(void 0!==u)a+=u,o=s+1;else{let t=(0,n.getCodePoint)(r,s);a+="&#x".concat(t.toString(16),";"),o=e.lastIndex+=Number(t!==l)}}return a+r.substr(o)}},64497:e=>{"use strict";var t,n;e.s({}),e.i(185719),e.i(100391),e.i(778682),e.i(990953),function(e){e[e.XML=0]="XML",e[e.HTML=1]="HTML"}(t||(t={})),function(e){e[e.UTF8=0]="UTF8",e[e.ASCII=1]="ASCII",e[e.Extensive=2]="Extensive",e[e.Attribute=3]="Attribute",e[e.Text=4]="Text"}(n||(n={}))},758616:e=>{"use strict";e.s({}),e.i(185719),e.i(778682),e.i(990953),e.i(64497)},550049:e=>{"use strict";e.s({arrayReplaceAt:()=>c,assign:()=>u,escapeHtml:()=>S,escapeRE:()=>C,fromCodePoint:()=>h,has:()=>l,isMdAsciiPunct:()=>M,isPunctChar:()=>T,isSpace:()=>A,isString:()=>o,isValidEntityCode:()=>d,isWhiteSpace:()=>E,lib:()=>N,normalizeReference:()=>I,unescapeAll:()=>y,unescapeMd:()=>g}),e.i(432534);var t=e.i(934585);e.i(607440);var n=e.i(694246),r=e.i(857525),i=e.i(545878);e.i(758616);var a=e.i(100391);function o(e){return"[object String]"===Object.prototype.toString.call(e)}let s=Object.prototype.hasOwnProperty;function l(e,t){return s.call(e,t)}function u(e){let t=Array.prototype.slice.call(arguments,1);return t.forEach(function(t){if(t){if("object"!=typeof t)throw TypeError(t+"must be object");Object.keys(t).forEach(function(n){e[n]=t[n]})}}),e}function c(e,t,n){return[].concat(e.slice(0,t),n,e.slice(t+1))}function d(e){return(!(e>=55296)||!(e<=57343))&&(!(e>=64976)||!(e<=65007))&&(65535&e)!=65535&&(65535&e)!=65534&&(!(e>=0)||!(e<=8))&&11!==e&&(!(e>=14)||!(e<=31))&&(!(e>=127)||!(e<=159))&&!(e>1114111)&&!0}function h(e){return e>65535?String.fromCharCode(55296+((e-=65536)>>10),56320+(1023&e)):String.fromCharCode(e)}let p=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,f=RegExp(p.source+"|"+/&([a-z#][a-z0-9]{1,31});/gi.source,"gi"),m=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function g(e){return 0>e.indexOf("\\")?e:e.replace(p,"$1")}function y(e){return 0>e.indexOf("\\")&&0>e.indexOf("&")?e:e.replace(f,function(e,t,n){if(t)return t;if(35===n.charCodeAt(0)&&m.test(n)){let t="x"===n[1].toLowerCase()?parseInt(n.slice(2),16):parseInt(n.slice(1),10);return d(t)?h(t):e}let r=(0,a.decodeHTML)(e);return r!==e?r:e})}let b=/[&<>"]/,x=/[&<>"]/g,w={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function k(e){return w[e]}function S(e){return b.test(e)?e.replace(x,k):e}let _=/[.?*+^$[\]\\(){}|-]/g;function C(e){return e.replace(_,"\\$&")}function A(e){switch(e){case 9:case 32:return!0}return!1}function E(e){if(e>=8192&&e<=8202)return!0;switch(e){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function T(e){return r.P.test(e)||i.S.test(e)}function M(e){switch(e){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function I(e){return(e=e.trim().replace(/\s+/g," ")).toLowerCase().toUpperCase()}let N={mdurl:t,ucmicro:n}},305141:e=>{"use strict";function t(e,t,n){let r,i,a,o,s=e.posMax,l=e.pos;for(e.pos=t+1,r=1;e.pos<s;){if(93===(a=e.src.charCodeAt(e.pos))&&0==--r){i=!0;break}if(o=e.pos,e.md.inline.skipToken(e),91===a){if(o===e.pos-1)r++;else if(n)return e.pos=l,-1}}let u=-1;return i&&(u=e.pos),e.pos=l,u}e.s({default:()=>t})},695952:e=>{"use strict";e.s({default:()=>n});var t=e.i(550049);function n(e,n,r){let i,a=n,o={ok:!1,pos:0,str:""};if(60===e.charCodeAt(a)){for(a++;a<r&&10!==(i=e.charCodeAt(a))&&60!==i;){if(62===i){o.pos=a+1,o.str=(0,t.unescapeAll)(e.slice(n+1,a)),o.ok=!0;break}if(92===i&&a+1<r){a+=2;continue}a++}return o}let s=0;for(;a<r&&32!==(i=e.charCodeAt(a))&&!(i<32)&&127!==i;){if(92===i&&a+1<r){if(32===e.charCodeAt(a+1))break;a+=2;continue}if(40===i&&++s>32)return o;if(41===i){if(0===s)break;s--}a++}return n===a||0!==s||(o.str=(0,t.unescapeAll)(e.slice(n,a)),o.pos=a,o.ok=!0),o}},87085:e=>{"use strict";e.s({default:()=>n});var t=e.i(550049);function n(e,n,r,i){let a,o=n,s={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(i)s.str=i.str,s.marker=i.marker;else{if(o>=r)return s;let t=e.charCodeAt(o);if(34!==t&&39!==t&&40!==t)return s;n++,o++,40===t&&(t=41),s.marker=t}for(;o<r;){if((a=e.charCodeAt(o))===s.marker)return s.pos=o+1,s.str+=(0,t.unescapeAll)(e.slice(n,o)),s.ok=!0,s;if(40===a&&41===s.marker)return s;92===a&&o+1<r&&o++,o++}return s.can_continue=!0,s.str+=(0,t.unescapeAll)(e.slice(n,o)),s}},366495:e=>{"use strict";e.s({}),e.i(305141),e.i(695952),e.i(87085)},429144:e=>{"use strict";e.s({}),e.i(305141),e.i(695952),e.i(87085),e.i(366495)},381625:e=>{"use strict";e.s({parseLinkDestination:()=>n.default,parseLinkLabel:()=>t.default,parseLinkTitle:()=>r.default});var t=e.i(305141),n=e.i(695952),r=e.i(87085);e.i(366495)},747467:e=>{"use strict";e.s({parseLinkDestination:()=>t.parseLinkDestination,parseLinkLabel:()=>t.parseLinkLabel,parseLinkTitle:()=>t.parseLinkTitle}),e.i(429144);var t=e.i(381625)},829833:e=>{"use strict";e.s({default:()=>i});var t=e.i(550049);let n={};function r(){this.rules=(0,t.assign)({},n)}n.code_inline=function(e,n,r,i,a){let o=e[n];return"<code"+a.renderAttrs(o)+">"+(0,t.escapeHtml)(o.content)+"</code>"},n.code_block=function(e,n,r,i,a){let o=e[n];return"<pre"+a.renderAttrs(o)+"><code>"+(0,t.escapeHtml)(e[n].content)+"</code></pre>\n"},n.fence=function(e,n,r,i,a){let o,s=e[n],l=s.info?(0,t.unescapeAll)(s.info).trim():"",u="",c="";if(l){let e=l.split(/(\s+)/g);u=e[0],c=e.slice(2).join("")}if(0===(o=r.highlight&&r.highlight(s.content,u,c)||(0,t.escapeHtml)(s.content)).indexOf("<pre"))return o+"\n";if(l){let e=s.attrIndex("class"),t=s.attrs?s.attrs.slice():[];return e<0?t.push(["class",r.langPrefix+u]):(t[e]=t[e].slice(),t[e][1]+=" "+r.langPrefix+u),"<pre><code".concat(a.renderAttrs({attrs:t}),">").concat(o,"</code></pre>\n")}return"<pre><code".concat(a.renderAttrs(s),">").concat(o,"</code></pre>\n")},n.image=function(e,t,n,r,i){let a=e[t];return a.attrs[a.attrIndex("alt")][1]=i.renderInlineAsText(a.children,n,r),i.renderToken(e,t,n)},n.hardbreak=function(e,t,n){return n.xhtmlOut?"<br />\n":"<br>\n"},n.softbreak=function(e,t,n){return n.breaks?n.xhtmlOut?"<br />\n":"<br>\n":"\n"},n.text=function(e,n){return(0,t.escapeHtml)(e[n].content)},n.html_block=function(e,t){return e[t].content},n.html_inline=function(e,t){return e[t].content},r.prototype.renderAttrs=function(e){let n,r,i;if(!e.attrs)return"";for(n=0,i="",r=e.attrs.length;n<r;n++)i+=" "+(0,t.escapeHtml)(e.attrs[n][0])+'="'+(0,t.escapeHtml)(e.attrs[n][1])+'"';return i},r.prototype.renderToken=function(e,t,n){let r=e[t],i="";if(r.hidden)return"";r.block&&-1!==r.nesting&&t&&e[t-1].hidden&&(i+="\n"),i+=(-1===r.nesting?"</":"<")+r.tag,i+=this.renderAttrs(r),0===r.nesting&&n.xhtmlOut&&(i+=" /");let a=!1;if(r.block&&(a=!0,1===r.nesting&&t+1<e.length)){let n=e[t+1];"inline"===n.type||n.hidden?a=!1:-1===n.nesting&&n.tag===r.tag&&(a=!1)}return i+(a?">\n":">")},r.prototype.renderInline=function(e,t,n){let r="",i=this.rules;for(let a=0,o=e.length;a<o;a++){let o=e[a].type;void 0!==i[o]?r+=i[o](e,a,t,n,this):r+=this.renderToken(e,a,t)}return r},r.prototype.renderInlineAsText=function(e,t,n){let r="";for(let i=0,a=e.length;i<a;i++)switch(e[i].type){case"text":case"html_inline":case"html_block":r+=e[i].content;break;case"image":r+=this.renderInlineAsText(e[i].children,t,n);break;case"softbreak":case"hardbreak":r+="\n"}return r},r.prototype.render=function(e,t,n){let r="",i=this.rules;for(let a=0,o=e.length;a<o;a++){let o=e[a].type;"inline"===o?r+=this.renderInline(e[a].children,t,n):void 0!==i[o]?r+=i[o](e,a,t,n,this):r+=this.renderToken(e,a,t,n)}return r};let i=r},437134:e=>{"use strict";function t(){this.__rules__=[],this.__cache__=null}e.s({default:()=>n}),t.prototype.__find__=function(e){for(let t=0;t<this.__rules__.length;t++)if(this.__rules__[t].name===e)return t;return -1},t.prototype.__compile__=function(){let e=this,t=[""];e.__rules__.forEach(function(e){e.enabled&&e.alt.forEach(function(e){0>t.indexOf(e)&&t.push(e)})}),e.__cache__={},t.forEach(function(t){e.__cache__[t]=[],e.__rules__.forEach(function(n){n.enabled&&(t&&0>n.alt.indexOf(t)||e.__cache__[t].push(n.fn))})})},t.prototype.at=function(e,t,n){let r=this.__find__(e);if(-1===r)throw Error("Parser rule not found: "+e);this.__rules__[r].fn=t,this.__rules__[r].alt=(n||{}).alt||[],this.__cache__=null},t.prototype.before=function(e,t,n,r){let i=this.__find__(e);if(-1===i)throw Error("Parser rule not found: "+e);this.__rules__.splice(i,0,{name:t,enabled:!0,fn:n,alt:(r||{}).alt||[]}),this.__cache__=null},t.prototype.after=function(e,t,n,r){let i=this.__find__(e);if(-1===i)throw Error("Parser rule not found: "+e);this.__rules__.splice(i+1,0,{name:t,enabled:!0,fn:n,alt:(r||{}).alt||[]}),this.__cache__=null},t.prototype.push=function(e,t,n){this.__rules__.push({name:e,enabled:!0,fn:t,alt:(n||{}).alt||[]}),this.__cache__=null},t.prototype.enable=function(e,t){Array.isArray(e)||(e=[e]);let n=[];return e.forEach(function(e){let r=this.__find__(e);if(r<0){if(t)return;throw Error("Rules manager: invalid rule name "+e)}this.__rules__[r].enabled=!0,n.push(e)},this),this.__cache__=null,n},t.prototype.enableOnly=function(e,t){Array.isArray(e)||(e=[e]),this.__rules__.forEach(function(e){e.enabled=!1}),this.enable(e,t)},t.prototype.disable=function(e,t){Array.isArray(e)||(e=[e]);let n=[];return e.forEach(function(e){let r=this.__find__(e);if(r<0){if(t)return;throw Error("Rules manager: invalid rule name "+e)}this.__rules__[r].enabled=!1,n.push(e)},this),this.__cache__=null,n},t.prototype.getRules=function(e){return null===this.__cache__&&this.__compile__(),this.__cache__[e]||[]};let n=t},374948:e=>{"use strict";function t(e,t,n){this.type=e,this.tag=t,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}e.s({default:()=>n}),t.prototype.attrIndex=function(e){if(!this.attrs)return -1;let t=this.attrs;for(let n=0,r=t.length;n<r;n++)if(t[n][0]===e)return n;return -1},t.prototype.attrPush=function(e){this.attrs?this.attrs.push(e):this.attrs=[e]},t.prototype.attrSet=function(e,t){let n=this.attrIndex(e),r=[e,t];n<0?this.attrPush(r):this.attrs[n]=r},t.prototype.attrGet=function(e){let t=this.attrIndex(e),n=null;return t>=0&&(n=this.attrs[t][1]),n},t.prototype.attrJoin=function(e,t){let n=this.attrIndex(e);n<0?this.attrPush([e,t]):this.attrs[n][1]=this.attrs[n][1]+" "+t};let n=t},733592:e=>{"use strict";e.s({default:()=>r});var t=e.i(374948);function n(e,t,n){this.src=e,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=t}n.prototype.Token=t.default;let r=n},617041:e=>{"use strict";e.s({default:()=>r});let t=/\r\n?|\n/g,n=/\0/g;function r(e){let r;r=(r=e.src.replace(t,"\n")).replace(n,""),e.src=r}},173418:e=>{"use strict";function t(e){let t;e.inlineMode?((t=new e.Token("inline","",0)).content=e.src,t.map=[0,1],t.children=[],e.tokens.push(t)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}e.s({default:()=>t})},273250:e=>{"use strict";function t(e){let t=e.tokens;for(let n=0,r=t.length;n<r;n++){let r=t[n];"inline"===r.type&&e.md.inline.parse(r.content,e.md,e.env,r.children)}}e.s({default:()=>t})},929440:e=>{"use strict";e.s({default:()=>n});var t=e.i(550049);function n(e){let n=e.tokens;if(e.md.options.linkify)for(let a=0,o=n.length;a<o;a++){if("inline"!==n[a].type||!e.md.linkify.pretest(n[a].content))continue;let o=n[a].children,s=0;for(let l=o.length-1;l>=0;l--){let u=o[l];if("link_close"===u.type){for(l--;o[l].level!==u.level&&"link_open"!==o[l].type;)l--;continue}if("html_inline"===u.type){var r,i;r=u.content,/^<a[>\s]/i.test(r)&&s>0&&s--,i=u.content,/^<\/a\s*>/i.test(i)&&s++}if(!(s>0)&&"text"===u.type&&e.md.linkify.test(u.content)){let r=u.content,i=e.md.linkify.match(r),s=[],c=u.level,d=0;i.length>0&&0===i[0].index&&l>0&&"text_special"===o[l-1].type&&(i=i.slice(1));for(let t=0;t<i.length;t++){let n=i[t].url,a=e.md.normalizeLink(n);if(!e.md.validateLink(a))continue;let o=i[t].text;o=i[t].schema?"mailto:"!==i[t].schema||/^mailto:/i.test(o)?e.md.normalizeLinkText(o):e.md.normalizeLinkText("mailto:"+o).replace(/^mailto:/,""):e.md.normalizeLinkText("http://"+o).replace(/^http:\/\//,"");let l=i[t].index;if(l>d){let t=new e.Token("text","",0);t.content=r.slice(d,l),t.level=c,s.push(t)}let u=new e.Token("link_open","a",1);u.attrs=[["href",a]],u.level=c++,u.markup="linkify",u.info="auto",s.push(u);let h=new e.Token("text","",0);h.content=o,h.level=c,s.push(h);let p=new e.Token("link_close","a",-1);p.level=--c,p.markup="linkify",p.info="auto",s.push(p),d=i[t].lastIndex}if(d<r.length){let t=new e.Token("text","",0);t.content=r.slice(d),t.level=c,s.push(t)}n[a].children=o=(0,t.arrayReplaceAt)(o,l,s)}}}}},500854:e=>{"use strict";e.s({default:()=>o});let t=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,n=/\((c|tm|r)\)/i,r=/\((c|tm|r)\)/ig,i={c:"",r:"",tm:""};function a(e,t){return i[t.toLowerCase()]}function o(e){let i;if(e.md.options.typographer)for(i=e.tokens.length-1;i>=0;i--)"inline"===e.tokens[i].type&&(n.test(e.tokens[i].content)&&function(e){let t=0;for(let n=e.length-1;n>=0;n--){let i=e[n];"text"!==i.type||t||(i.content=i.content.replace(r,a)),"link_open"===i.type&&"auto"===i.info&&t--,"link_close"===i.type&&"auto"===i.info&&t++}}(e.tokens[i].children),t.test(e.tokens[i].content)&&function(e){let n=0;for(let r=e.length-1;r>=0;r--){let i=e[r];"text"===i.type&&!n&&t.test(i.content)&&(i.content=i.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1").replace(/(^|\s)--(?=\s|$)/mg,"$1").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1")),"link_open"===i.type&&"auto"===i.info&&n--,"link_close"===i.type&&"auto"===i.info&&n++}}(e.tokens[i].children))}},587248:e=>{"use strict";e.s({default:()=>a});var t=e.i(550049);let n=/['"]/,r=/['"]/g;function i(e,t,n){return e.slice(0,t)+n+e.slice(t+1)}function a(e){if(e.md.options.typographer)for(let a=e.tokens.length-1;a>=0;a--)"inline"===e.tokens[a].type&&n.test(e.tokens[a].content)&&function(e,n){let a,o=[];for(let s=0;s<e.length;s++){let l=e[s],u=e[s].level;for(a=o.length-1;a>=0&&!(o[a].level<=u);a--);if(o.length=a+1,"text"!==l.type)continue;let c=l.content,d=0,h=c.length;i:for(;d<h;){r.lastIndex=d;let p=r.exec(c);if(!p)break;let f=!0,m=!0;d=p.index+1;let g="'"===p[0],y=32;if(p.index-1>=0)y=c.charCodeAt(p.index-1);else for(a=s-1;a>=0&&"softbreak"!==e[a].type&&"hardbreak"!==e[a].type;a--)if(e[a].content){y=e[a].content.charCodeAt(e[a].content.length-1);break}let b=32;if(d<h)b=c.charCodeAt(d);else for(a=s+1;a<e.length&&"softbreak"!==e[a].type&&"hardbreak"!==e[a].type;a++)if(e[a].content){b=e[a].content.charCodeAt(0);break}let x=(0,t.isMdAsciiPunct)(y)||(0,t.isPunctChar)(String.fromCharCode(y)),w=(0,t.isMdAsciiPunct)(b)||(0,t.isPunctChar)(String.fromCharCode(b)),k=(0,t.isWhiteSpace)(y),S=(0,t.isWhiteSpace)(b);if(S?f=!1:w&&!(k||x)&&(f=!1),k?m=!1:x&&!(S||w)&&(m=!1),34===b&&'"'===p[0]&&y>=48&&y<=57&&(m=f=!1),f&&m&&(f=x,m=w),!f&&!m){g&&(l.content=i(l.content,p.index,""));continue}if(m)for(a=o.length-1;a>=0;a--){let t=o[a];if(o[a].level<u)break;if(t.single===g&&o[a].level===u){let r,u;t=o[a],g?(r=n.md.options.quotes[2],u=n.md.options.quotes[3]):(r=n.md.options.quotes[0],u=n.md.options.quotes[1]),l.content=i(l.content,p.index,u),e[t.token].content=i(e[t.token].content,t.pos,r),d+=u.length-1,t.token===s&&(d+=r.length-1),h=(c=l.content).length,o.length=a;continue i}}f?o.push({token:s,pos:p.index,single:g,level:u}):m&&g&&(l.content=i(l.content,p.index,""))}}}(e.tokens[a].children,e)}},423716:e=>{"use strict";function t(e){let t,n,r=e.tokens,i=r.length;for(let e=0;e<i;e++){if("inline"!==r[e].type)continue;let i=r[e].children,a=i.length;for(t=0;t<a;t++)"text_special"===i[t].type&&(i[t].type="text");for(t=n=0;t<a;t++)"text"===i[t].type&&t+1<a&&"text"===i[t+1].type?i[t+1].content=i[t].content+i[t+1].content:(t!==n&&(i[n]=i[t]),n++);t!==n&&(i.length=n)}}e.s({default:()=>t})},139008:e=>{"use strict";e.s({default:()=>h});var t=e.i(437134),n=e.i(733592),r=e.i(617041),i=e.i(173418),a=e.i(273250),o=e.i(929440),s=e.i(500854),l=e.i(587248),u=e.i(423716);let c=[["normalize",r.default],["block",i.default],["inline",a.default],["linkify",o.default],["replacements",s.default],["smartquotes",l.default],["text_join",u.default]];function d(){this.ruler=new t.default;for(let e=0;e<c.length;e++)this.ruler.push(c[e][0],c[e][1])}d.prototype.process=function(e){let t=this.ruler.getRules("");for(let n=0,r=t.length;n<r;n++)t[n](e)},d.prototype.State=n.default;let h=d},101200:e=>{"use strict";e.s({default:()=>i});var t=e.i(374948),n=e.i(550049);function r(e,t,r,i){this.src=e,this.md=t,this.env=r,this.tokens=i,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;let a=this.src;for(let e=0,t=0,r=0,i=0,o=a.length,s=!1;t<o;t++){let l=a.charCodeAt(t);if(!s)if((0,n.isSpace)(l)){r++,9===l?i+=4-i%4:i++;continue}else s=!0;(10===l||t===o-1)&&(10!==l&&t++,this.bMarks.push(e),this.eMarks.push(t),this.tShift.push(r),this.sCount.push(i),this.bsCount.push(0),s=!1,r=0,i=0,e=t+1)}this.bMarks.push(a.length),this.eMarks.push(a.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}r.prototype.push=function(e,n,r){let i=new t.default(e,n,r);return i.block=!0,r<0&&this.level--,i.level=this.level,r>0&&this.level++,this.tokens.push(i),i},r.prototype.isEmpty=function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]},r.prototype.skipEmptyLines=function(e){for(let t=this.lineMax;e<t&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e},r.prototype.skipSpaces=function(e){for(let t=this.src.length;e<t;e++){let t=this.src.charCodeAt(e);if(!(0,n.isSpace)(t))break}return e},r.prototype.skipSpacesBack=function(e,t){if(e<=t)return e;for(;e>t;)if(!(0,n.isSpace)(this.src.charCodeAt(--e)))return e+1;return e},r.prototype.skipChars=function(e,t){for(let n=this.src.length;e<n&&this.src.charCodeAt(e)===t;e++);return e},r.prototype.skipCharsBack=function(e,t,n){if(e<=n)return e;for(;e>n;)if(t!==this.src.charCodeAt(--e))return e+1;return e},r.prototype.getLines=function(e,t,r,i){if(e>=t)return"";let a=Array(t-e);for(let o=0,s=e;s<t;s++,o++){let e,l=0,u=this.bMarks[s],c=u;for(e=s+1<t||i?this.eMarks[s]+1:this.eMarks[s];c<e&&l<r;){let e=this.src.charCodeAt(c);if((0,n.isSpace)(e))9===e?l+=4-(l+this.bsCount[s])%4:l++;else if(c-u<this.tShift[s])l++;else break;c++}l>r?a[o]=Array(l-r+1).join(" ")+this.src.slice(c,e):a[o]=this.src.slice(c,e)}return a.join("")},r.prototype.Token=t.default;let i=r},656818:e=>{"use strict";e.s({default:()=>i});var t=e.i(550049);function n(e,t){let n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];return e.src.slice(n,r)}function r(e){let t=[],n=e.length,r=0,i=e.charCodeAt(r),a=!1,o=0,s="";for(;r<n;)124===i&&(a?(s+=e.substring(o,r-1),o=r):(t.push(s+e.substring(o,r)),s="",o=r+1)),a=92===i,r++,i=e.charCodeAt(r);return t.push(s+e.substring(o)),t}function i(e,i,a,o){let s;if(i+2>a)return!1;let l=i+1;if(e.sCount[l]<e.blkIndent||e.sCount[l]-e.blkIndent>=4)return!1;let u=e.bMarks[l]+e.tShift[l];if(u>=e.eMarks[l])return!1;let c=e.src.charCodeAt(u++);if(124!==c&&45!==c&&58!==c||u>=e.eMarks[l])return!1;let d=e.src.charCodeAt(u++);if(124!==d&&45!==d&&58!==d&&!(0,t.isSpace)(d)||45===c&&(0,t.isSpace)(d))return!1;for(;u<e.eMarks[l];){let n=e.src.charCodeAt(u);if(124!==n&&45!==n&&58!==n&&!(0,t.isSpace)(n))return!1;u++}let h=n(e,i+1),p=h.split("|"),f=[];for(let e=0;e<p.length;e++){let t=p[e].trim();if(!t)if(0===e||e===p.length-1)continue;else return!1;if(!/^:?-+:?$/.test(t))return!1;58===t.charCodeAt(t.length-1)?f.push(58===t.charCodeAt(0)?"center":"right"):58===t.charCodeAt(0)?f.push("left"):f.push("")}if(-1===(h=n(e,i).trim()).indexOf("|")||e.sCount[i]-e.blkIndent>=4)return!1;(p=r(h)).length&&""===p[0]&&p.shift(),p.length&&""===p[p.length-1]&&p.pop();let m=p.length;if(0===m||m!==f.length)return!1;if(o)return!0;let g=e.parentType;e.parentType="table";let y=e.md.block.ruler.getRules("blockquote"),b=e.push("table_open","table",1),x=[i,0];b.map=x,e.push("thead_open","thead",1).map=[i,i+1],e.push("tr_open","tr",1).map=[i,i+1];for(let t=0;t<p.length;t++){let n=e.push("th_open","th",1);f[t]&&(n.attrs=[["style","text-align:"+f[t]]]);let r=e.push("inline","",0);r.content=p[t].trim(),r.children=[],e.push("th_close","th",-1)}e.push("tr_close","tr",-1),e.push("thead_close","thead",-1);let w=0;for(l=i+2;l<a&&!(e.sCount[l]<e.blkIndent);l++){let t=!1;for(let n=0,r=y.length;n<r;n++)if(y[n](e,l,a,!0)){t=!0;break}if(t||!(h=n(e,l).trim())||e.sCount[l]-e.blkIndent>=4||((p=r(h)).length&&""===p[0]&&p.shift(),p.length&&""===p[p.length-1]&&p.pop(),(w+=m-p.length)>65536))break;l===i+2&&(e.push("tbody_open","tbody",1).map=s=[i+2,0]),e.push("tr_open","tr",1).map=[l,l+1];for(let t=0;t<m;t++){let n=e.push("td_open","td",1);f[t]&&(n.attrs=[["style","text-align:"+f[t]]]);let r=e.push("inline","",0);r.content=p[t]?p[t].trim():"",r.children=[],e.push("td_close","td",-1)}e.push("tr_close","tr",-1)}return s&&(e.push("tbody_close","tbody",-1),s[1]=l),e.push("table_close","table",-1),x[1]=l,e.parentType=g,e.line=l,!0}},818610:e=>{"use strict";function t(e,t,n){if(e.sCount[t]-e.blkIndent<4)return!1;let r=t+1,i=r;for(;r<n;){if(e.isEmpty(r)){r++;continue}if(e.sCount[r]-e.blkIndent>=4){i=++r;continue}break}e.line=i;let a=e.push("code_block","code",0);return a.content=e.getLines(t,i,4+e.blkIndent,!1)+"\n",a.map=[t,e.line],!0}e.s({default:()=>t})},180175:e=>{"use strict";function t(e,t,n,r){let i=e.bMarks[t]+e.tShift[t],a=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||i+3>a)return!1;let o=e.src.charCodeAt(i);if(126!==o&&96!==o)return!1;let s=i,l=(i=e.skipChars(i,o))-s;if(l<3)return!1;let u=e.src.slice(s,i),c=e.src.slice(i,a);if(96===o&&c.indexOf(String.fromCharCode(o))>=0)return!1;if(r)return!0;let d=t,h=!1;for(;!(++d>=n)&&(!((i=s=e.bMarks[d]+e.tShift[d])<(a=e.eMarks[d]))||!(e.sCount[d]<e.blkIndent));){;if(!(e.src.charCodeAt(i)!==o||e.sCount[d]-e.blkIndent>=4||(i=e.skipChars(i,o))-s<l)&&!((i=e.skipSpaces(i))<a)){h=!0;break}}l=e.sCount[t],e.line=d+ +!!h;let p=e.push("fence","code",0);return p.info=c,p.content=e.getLines(t+1,d,l,!0),p.markup=u,p.map=[t,e.line],!0}e.s({default:()=>t})},912581:e=>{"use strict";e.s({default:()=>n});var t=e.i(550049);function n(e,n,r,i){let a,o=e.bMarks[n]+e.tShift[n],s=e.eMarks[n],l=e.lineMax;if(e.sCount[n]-e.blkIndent>=4||62!==e.src.charCodeAt(o))return!1;if(i)return!0;let u=[],c=[],d=[],h=[],p=e.md.block.ruler.getRules("blockquote"),f=e.parentType;e.parentType="blockquote";let m=!1;for(a=n;a<r;a++){let n=e.sCount[a]<e.blkIndent;if((o=e.bMarks[a]+e.tShift[a])>=(s=e.eMarks[a]))break;if(62===e.src.charCodeAt(o++)&&!n){let n,r,i=e.sCount[a]+1;32===e.src.charCodeAt(o)?(o++,i++,r=!1,n=!0):9===e.src.charCodeAt(o)?(n=!0,(e.bsCount[a]+i)%4==3?(o++,i++,r=!1):r=!0):n=!1;let l=i;for(u.push(e.bMarks[a]),e.bMarks[a]=o;o<s;){let n=e.src.charCodeAt(o);if((0,t.isSpace)(n))9===n?l+=4-(l+e.bsCount[a]+ +!!r)%4:l++;else break;o++}m=o>=s,c.push(e.bsCount[a]),e.bsCount[a]=e.sCount[a]+1+ +!!n,d.push(e.sCount[a]),e.sCount[a]=l-i,h.push(e.tShift[a]),e.tShift[a]=o-e.bMarks[a];continue}if(m)break;let i=!1;for(let t=0,n=p.length;t<n;t++)if(p[t](e,a,r,!0)){i=!0;break}if(i){e.lineMax=a,0!==e.blkIndent&&(u.push(e.bMarks[a]),c.push(e.bsCount[a]),h.push(e.tShift[a]),d.push(e.sCount[a]),e.sCount[a]-=e.blkIndent);break}u.push(e.bMarks[a]),c.push(e.bsCount[a]),h.push(e.tShift[a]),d.push(e.sCount[a]),e.sCount[a]=-1}let g=e.blkIndent;e.blkIndent=0;let y=e.push("blockquote_open","blockquote",1);y.markup=">";let b=[n,0];y.map=b,e.md.block.tokenize(e,n,a),e.push("blockquote_close","blockquote",-1).markup=">",e.lineMax=l,e.parentType=f,b[1]=e.line;for(let t=0;t<h.length;t++)e.bMarks[t+n]=u[t],e.tShift[t+n]=h[t],e.sCount[t+n]=d[t],e.bsCount[t+n]=c[t];return e.blkIndent=g,!0}},824700:e=>{"use strict";e.s({default:()=>n});var t=e.i(550049);function n(e,n,r,i){let a=e.eMarks[n];if(e.sCount[n]-e.blkIndent>=4)return!1;let o=e.bMarks[n]+e.tShift[n],s=e.src.charCodeAt(o++);if(42!==s&&45!==s&&95!==s)return!1;let l=1;for(;o<a;){let n=e.src.charCodeAt(o++);if(n!==s&&!(0,t.isSpace)(n))return!1;n===s&&l++}if(l<3)return!1;if(i)return!0;e.line=n+1;let u=e.push("hr","hr",0);return u.map=[n,e.line],u.markup=Array(l+1).join(String.fromCharCode(s)),!0}},200009:e=>{"use strict";e.s({default:()=>i});var t=e.i(550049);function n(e,n){let r=e.eMarks[n],i=e.bMarks[n]+e.tShift[n],a=e.src.charCodeAt(i++);if(42!==a&&45!==a&&43!==a)return -1;if(i<r){let n=e.src.charCodeAt(i);if(!(0,t.isSpace)(n))return -1}return i}function r(e,t){let n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t],i=n;if(i+1>=r)return -1;let a=e.src.charCodeAt(i++);if(a<48||a>57)return -1;for(;;){if(i>=r)return -1;if((a=e.src.charCodeAt(i++))>=48&&a<=57){if(i-n>=10)return -1;continue}if(41===a||46===a)break;return -1}return i<r&&!isSpace(a=e.src.charCodeAt(i))?-1:i}function i(e,t,i,a){let o,s,l,u,c,d,h,p=t,f=!0;if(e.sCount[p]-e.blkIndent>=4||e.listIndent>=0&&e.sCount[p]-e.listIndent>=4&&e.sCount[p]<e.blkIndent)return!1;let m=!1;if(a&&"paragraph"===e.parentType&&e.sCount[p]>=e.blkIndent&&(m=!0),(h=r(e,p))>=0){if(c=!0,l=e.bMarks[p]+e.tShift[p],d=Number(e.src.slice(l,h-1)),m&&1!==d)return!1}else{if(!((h=n(e,p))>=0))return!1;c=!1}if(m&&e.skipSpaces(h)>=e.eMarks[p])return!1;if(a)return!0;let g=e.src.charCodeAt(h-1),y=e.tokens.length;c?(u=e.push("ordered_list_open","ol",1),1!==d&&(u.attrs=[["start",d]])):u=e.push("bullet_list_open","ul",1);let b=[p,0];u.map=b,u.markup=String.fromCharCode(g);let x=!1,w=e.md.block.ruler.getRules("list"),k=e.parentType;for(e.parentType="list";p<i;){let t;s=h,o=e.eMarks[p];let a=e.sCount[p]+h-(e.bMarks[p]+e.tShift[p]),d=a;for(;s<o;){let t=e.src.charCodeAt(s);if(9===t)d+=4-(d+e.bsCount[p])%4;else if(32===t)d++;else break;s++}let m=s;(t=m>=o?1:d-a)>4&&(t=1);let y=a+t;(u=e.push("list_item_open","li",1)).markup=String.fromCharCode(g);let b=[p,0];u.map=b,c&&(u.info=e.src.slice(l,h-1));let k=e.tight,S=e.tShift[p],_=e.sCount[p],C=e.listIndent;if(e.listIndent=e.blkIndent,e.blkIndent=y,e.tight=!0,e.tShift[p]=m-e.bMarks[p],e.sCount[p]=d,m>=o&&e.isEmpty(p+1)?e.line=Math.min(e.line+2,i):e.md.block.tokenize(e,p,i,!0),(!e.tight||x)&&(f=!1),x=e.line-p>1&&e.isEmpty(e.line-1),e.blkIndent=e.listIndent,e.listIndent=C,e.tShift[p]=S,e.sCount[p]=_,e.tight=k,(u=e.push("list_item_close","li",-1)).markup=String.fromCharCode(g),p=e.line,b[1]=p,p>=i||e.sCount[p]<e.blkIndent||e.sCount[p]-e.blkIndent>=4)break;let A=!1;for(let t=0,n=w.length;t<n;t++)if(w[t](e,p,i,!0)){A=!0;break}if(A)break;if(c){if((h=r(e,p))<0)break;l=e.bMarks[p]+e.tShift[p]}else if((h=n(e,p))<0)break;if(g!==e.src.charCodeAt(h-1))break}return(u=c?e.push("ordered_list_close","ol",-1):e.push("bullet_list_close","ul",-1)).markup=String.fromCharCode(g),b[1]=p,e.line=p,e.parentType=k,f&&function(e,t){let n=e.level+2;for(let r=t+2,i=e.tokens.length-2;r<i;r++)e.tokens[r].level===n&&"paragraph_open"===e.tokens[r].type&&(e.tokens[r+2].hidden=!0,e.tokens[r].hidden=!0,r+=2)}(e,y),!0}},152472:e=>{"use strict";e.s({default:()=>n});var t=e.i(550049);function n(e,n,r,i){let a,o=e.bMarks[n]+e.tShift[n],s=e.eMarks[n],l=n+1;if(e.sCount[n]-e.blkIndent>=4||91!==e.src.charCodeAt(o))return!1;function u(t){let n=e.lineMax;if(t>=n||e.isEmpty(t))return null;let r=!1;if(e.sCount[t]-e.blkIndent>3&&(r=!0),e.sCount[t]<0&&(r=!0),!r){let r=e.md.block.ruler.getRules("reference"),i=e.parentType;e.parentType="reference";let a=!1;for(let i=0,o=r.length;i<o;i++)if(r[i](e,t,n,!0)){a=!0;break}if(e.parentType=i,a)return null}let i=e.bMarks[t]+e.tShift[t],a=e.eMarks[t];return e.src.slice(i,a+1)}let c=e.src.slice(o,s+1);s=c.length;let d=-1;for(o=1;o<s;o++){let e=c.charCodeAt(o);if(91===e)return!1;if(93===e){d=o;break}if(10===e){let e=u(l);null!==e&&(c+=e,s=c.length,l++)}else if(92===e&&++o<s&&10===c.charCodeAt(o)){let e=u(l);null!==e&&(c+=e,s=c.length,l++)}}if(d<0||58!==c.charCodeAt(d+1))return!1;for(o=d+2;o<s;o++){let e=c.charCodeAt(o);if(10===e){let e=u(l);null!==e&&(c+=e,s=c.length,l++)}else if((0,t.isSpace)(e));else break}let h=e.md.helpers.parseLinkDestination(c,o,s);if(!h.ok)return!1;let p=e.md.normalizeLink(h.str);if(!e.md.validateLink(p))return!1;let f=o=h.pos,m=l,g=o;for(;o<s;o++){let e=c.charCodeAt(o);if(10===e){let e=u(l);null!==e&&(c+=e,s=c.length,l++)}else if((0,t.isSpace)(e));else break}let y=e.md.helpers.parseLinkTitle(c,o,s);for(;y.can_continue;){let t=u(l);if(null===t)break;c+=t,o=s,s=c.length,l++,y=e.md.helpers.parseLinkTitle(c,o,s,y)}for(o<s&&g!==o&&y.ok?(a=y.str,o=y.pos):(a="",o=f,l=m);o<s;){let e=c.charCodeAt(o);if(!(0,t.isSpace)(e))break;o++}if(o<s&&10!==c.charCodeAt(o)&&a)for(a="",o=f,l=m;o<s;){let e=c.charCodeAt(o);if(!(0,t.isSpace)(e))break;o++}if(o<s&&10!==c.charCodeAt(o))return!1;let b=(0,t.normalizeReference)(c.slice(1,d));return!!b&&(!!i||(void 0===e.env.references&&(e.env.references={}),void 0===e.env.references[b]&&(e.env.references[b]={title:a,href:p}),e.line=l,!0))}},786973:e=>{"use strict";e.s({default:()=>t});let t=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"]},747995:e=>{"use strict";e.s({HTML_OPEN_CLOSE_TAG_RE:()=>i,HTML_TAG_RE:()=>r});let t="<[A-Za-z][A-Za-z0-9\\-]*(?:\\s+[a-zA-Z_:][a-zA-Z0-9:._-]*(?:\\s*=\\s*(?:[^\"'=<>`\\x00-\\x20]+|'[^']*'|\"[^\"]*\"))?)*\\s*\\/?>",n="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",r=RegExp("^(?:"+t+"|"+n+"|<!---?>|<!--(?:[^-]|-[^-]|--[^>])*-->|<[?][\\s\\S]*?[?]>|<![A-Za-z][^>]*>|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>)"),i=RegExp("^(?:"+t+"|"+n+")")},552104:e=>{"use strict";e.s({default:()=>i});var t=e.i(786973),n=e.i(747995);let r=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[RegExp("^</?("+t.default.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[RegExp(n.HTML_OPEN_CLOSE_TAG_RE.source+"\\s*$"),/^$/,!1]];function i(e,t,n,i){let a=e.bMarks[t]+e.tShift[t],o=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||!e.md.options.html||60!==e.src.charCodeAt(a))return!1;let s=e.src.slice(a,o),l=0;for(;l<r.length&&!r[l][0].test(s);l++);if(l===r.length)return!1;if(i)return r[l][2];let u=t+1;if(!r[l][1].test(s)){for(;u<n&&!(e.sCount[u]<e.blkIndent);u++)if(a=e.bMarks[u]+e.tShift[u],o=e.eMarks[u],s=e.src.slice(a,o),r[l][1].test(s)){0!==s.length&&u++;break}}e.line=u;let c=e.push("html_block","",0);return c.map=[t,u],c.content=e.getLines(t,u,e.blkIndent,!0),!0}},617524:e=>{"use strict";e.s({default:()=>n});var t=e.i(550049);function n(e,n,r,i){let a=e.bMarks[n]+e.tShift[n],o=e.eMarks[n];if(e.sCount[n]-e.blkIndent>=4)return!1;let s=e.src.charCodeAt(a);if(35!==s||a>=o)return!1;let l=1;for(s=e.src.charCodeAt(++a);35===s&&a<o&&l<=6;)l++,s=e.src.charCodeAt(++a);if(l>6||a<o&&!(0,t.isSpace)(s))return!1;if(i)return!0;o=e.skipSpacesBack(o,a);let u=e.skipCharsBack(o,35,a);u>a&&(0,t.isSpace)(e.src.charCodeAt(u-1))&&(o=u),e.line=n+1;let c=e.push("heading_open","h"+String(l),1);c.markup="########".slice(0,l),c.map=[n,e.line];let d=e.push("inline","",0);return d.content=e.src.slice(a,o).trim(),d.map=[n,e.line],d.children=[],e.push("heading_close","h"+String(l),-1).markup="########".slice(0,l),!0}},371745:e=>{"use strict";function t(e,t,n){let r,i=e.md.block.ruler.getRules("paragraph");if(e.sCount[t]-e.blkIndent>=4)return!1;let a=e.parentType;e.parentType="paragraph";let o=0,s=t+1;for(;s<n&&!e.isEmpty(s);s++){if(e.sCount[s]-e.blkIndent>3)continue;if(e.sCount[s]>=e.blkIndent){let t=e.bMarks[s]+e.tShift[s],n=e.eMarks[s];if(t<n&&(45===(r=e.src.charCodeAt(t))||61===r)&&(t=e.skipChars(t,r),(t=e.skipSpaces(t))>=n)){o=61===r?1:2;break}}if(e.sCount[s]<0)continue;let t=!1;for(let r=0,a=i.length;r<a;r++)if(i[r](e,s,n,!0)){t=!0;break}if(t)break}if(!o)return!1;let l=e.getLines(t,s,e.blkIndent,!1).trim();e.line=s+1;let u=e.push("heading_open","h"+String(o),1);u.markup=String.fromCharCode(r),u.map=[t,e.line];let c=e.push("inline","",0);return c.content=l,c.map=[t,e.line-1],c.children=[],e.push("heading_close","h"+String(o),-1).markup=String.fromCharCode(r),e.parentType=a,!0}e.s({default:()=>t})},993847:e=>{"use strict";function t(e,t,n){let r=e.md.block.ruler.getRules("paragraph"),i=e.parentType,a=t+1;for(e.parentType="paragraph";a<n&&!e.isEmpty(a);a++){if(e.sCount[a]-e.blkIndent>3||e.sCount[a]<0)continue;let t=!1;for(let i=0,o=r.length;i<o;i++)if(r[i](e,a,n,!0)){t=!0;break}if(t)break}let o=e.getLines(t,a,e.blkIndent,!1).trim();e.line=a,e.push("paragraph_open","p",1).map=[t,e.line];let s=e.push("inline","",0);return s.content=o,s.map=[t,e.line],s.children=[],e.push("paragraph_close","p",-1),e.parentType=i,!0}e.s({default:()=>t})},262546:e=>{"use strict";e.s({default:()=>g});var t=e.i(437134),n=e.i(101200),r=e.i(656818),i=e.i(818610),a=e.i(180175),o=e.i(912581),s=e.i(824700),l=e.i(200009),u=e.i(152472),c=e.i(552104),d=e.i(617524),h=e.i(371745),p=e.i(993847);let f=[["table",r.default,["paragraph","reference"]],["code",i.default],["fence",a.default,["paragraph","reference","blockquote","list"]],["blockquote",o.default,["paragraph","reference","blockquote","list"]],["hr",s.default,["paragraph","reference","blockquote","list"]],["list",l.default,["paragraph","reference","blockquote"]],["reference",u.default],["html_block",c.default,["paragraph","reference","blockquote"]],["heading",d.default,["paragraph","reference","blockquote"]],["lheading",h.default],["paragraph",p.default]];function m(){this.ruler=new t.default;for(let e=0;e<f.length;e++)this.ruler.push(f[e][0],f[e][1],{alt:(f[e][2]||[]).slice()})}m.prototype.tokenize=function(e,t,n){let r=this.ruler.getRules(""),i=r.length,a=e.md.options.maxNesting,o=t,s=!1;for(;o<n&&(e.line=o=e.skipEmptyLines(o),!(o>=n)&&!(e.sCount[o]<e.blkIndent));){if(e.level>=a){e.line=n;break}let t=e.line,l=!1;for(let a=0;a<i;a++)if(l=r[a](e,o,n,!1)){if(t>=e.line)throw Error("block rule didn't increment state.line");break}if(!l)throw Error("none of the block rules matched");e.tight=!s,e.isEmpty(e.line-1)&&(s=!0),(o=e.line)<n&&e.isEmpty(o)&&(s=!0,e.line=++o)}},m.prototype.parse=function(e,t,n,r){if(!e)return;let i=new this.State(e,t,n,r);this.tokenize(i,i.line,i.lineMax)},m.prototype.State=n.default;let g=m},362025:e=>{"use strict";e.s({default:()=>i});var t=e.i(374948),n=e.i(550049);function r(e,t,n,r){this.src=e,this.env=n,this.md=t,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}r.prototype.pushPending=function(){let e=new t.default("text","",0);return e.content=this.pending,e.level=this.pendingLevel,this.tokens.push(e),this.pending="",e},r.prototype.push=function(e,n,r){this.pending&&this.pushPending();let i=new t.default(e,n,r),a=null;return r<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),i.level=this.level,r>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],a={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(i),this.tokens_meta.push(a),i},r.prototype.scanDelims=function(e,t){let r=this.posMax,i=this.src.charCodeAt(e),a=e>0?this.src.charCodeAt(e-1):32,o=e;for(;o<r&&this.src.charCodeAt(o)===i;)o++;let s=o-e,l=o<r?this.src.charCodeAt(o):32,u=(0,n.isMdAsciiPunct)(a)||(0,n.isPunctChar)(String.fromCharCode(a)),c=(0,n.isMdAsciiPunct)(l)||(0,n.isPunctChar)(String.fromCharCode(l)),d=(0,n.isWhiteSpace)(a),h=(0,n.isWhiteSpace)(l),p=!h&&(!c||d||u),f=!d&&(!u||h||c);return{can_open:p&&(t||!f||u),can_close:f&&(t||!p||c),length:s}},r.prototype.Token=t.default;let i=r},466510:e=>{"use strict";function t(e,t){let n=e.pos;for(;n<e.posMax&&!function(e){switch(e){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}(e.src.charCodeAt(n));)n++;return n!==e.pos&&(t||(e.pending+=e.src.slice(e.pos,n)),e.pos=n,!0)}e.s({default:()=>t})},112887:e=>{"use strict";e.s({default:()=>n});let t=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function n(e,n){if(!e.md.options.linkify||e.linkLevel>0)return!1;let r=e.pos;if(r+3>e.posMax||58!==e.src.charCodeAt(r)||47!==e.src.charCodeAt(r+1)||47!==e.src.charCodeAt(r+2))return!1;let i=e.pending.match(t);if(!i)return!1;let a=i[1],o=e.md.linkify.matchAtStart(e.src.slice(r-a.length));if(!o)return!1;let s=o.url;if(s.length<=a.length)return!1;s=s.replace(/\*+$/,"");let l=e.md.normalizeLink(s);if(!e.md.validateLink(l))return!1;if(!n){e.pending=e.pending.slice(0,-a.length);let t=e.push("link_open","a",1);t.attrs=[["href",l]],t.markup="linkify",t.info="auto",e.push("text","",0).content=e.md.normalizeLinkText(s);let n=e.push("link_close","a",-1);n.markup="linkify",n.info="auto"}return e.pos+=s.length-a.length,!0}},438102:e=>{"use strict";e.s({default:()=>n});var t=e.i(550049);function n(e,n){let r=e.pos;if(10!==e.src.charCodeAt(r))return!1;let i=e.pending.length-1,a=e.posMax;if(!n)if(i>=0&&32===e.pending.charCodeAt(i))if(i>=1&&32===e.pending.charCodeAt(i-1)){let t=i-1;for(;t>=1&&32===e.pending.charCodeAt(t-1);)t--;e.pending=e.pending.slice(0,t),e.push("hardbreak","br",0)}else e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0);else e.push("softbreak","br",0);for(r++;r<a&&(0,t.isSpace)(e.src.charCodeAt(r));)r++;return e.pos=r,!0}},99013:e=>{"use strict";e.s({default:()=>r});var t=e.i(550049);let n=[];for(let e=0;e<256;e++)n.push(0);function r(e,r){let i=e.pos,a=e.posMax;if(92!==e.src.charCodeAt(i)||++i>=a)return!1;let o=e.src.charCodeAt(i);if(10===o){for(r||e.push("hardbreak","br",0),i++;i<a&&(o=e.src.charCodeAt(i),(0,t.isSpace)(o));)i++;return e.pos=i,!0}let s=e.src[i];if(o>=55296&&o<=56319&&i+1<a){let t=e.src.charCodeAt(i+1);t>=56320&&t<=57343&&(s+=e.src[i+1],i++)}let l="\\"+s;if(!r){let t=e.push("text_special","",0);o<256&&0!==n[o]?t.content=s:t.content=l,t.markup=l,t.info="escape"}return e.pos=i+1,!0}"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(e){n[e.charCodeAt(0)]=1})},205167:e=>{"use strict";function t(e,t){let n,r=e.pos;if(96!==e.src.charCodeAt(r))return!1;let i=r;r++;let a=e.posMax;for(;r<a&&96===e.src.charCodeAt(r);)r++;let o=e.src.slice(i,r),s=o.length;if(e.backticksScanned&&(e.backticks[s]||0)<=i)return t||(e.pending+=o),e.pos+=s,!0;let l=r;for(;-1!==(n=e.src.indexOf("`",l));){for(l=n+1;l<a&&96===e.src.charCodeAt(l);)l++;let i=l-n;if(i===s){if(!t){let t=e.push("code_inline","code",0);t.markup=o,t.content=e.src.slice(r,n).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return e.pos=l,!0}e.backticks[i]=n}return e.backticksScanned=!0,t||(e.pending+=o),e.pos+=s,!0}e.s({default:()=>t})},611773:e=>{"use strict";function t(e,t){let n,r=[],i=t.length;for(let a=0;a<i;a++){let i=t[a];if(126!==i.marker||-1===i.end)continue;let o=t[i.end];(n=e.tokens[i.token]).type="s_open",n.tag="s",n.nesting=1,n.markup="~~",n.content="",(n=e.tokens[o.token]).type="s_close",n.tag="s",n.nesting=-1,n.markup="~~",n.content="","text"===e.tokens[o.token-1].type&&"~"===e.tokens[o.token-1].content&&r.push(o.token-1)}for(;r.length;){let t=r.pop(),i=t+1;for(;i<e.tokens.length&&"s_close"===e.tokens[i].type;)i++;t!==--i&&(n=e.tokens[i],e.tokens[i]=e.tokens[t],e.tokens[t]=n)}}e.s({default:()=>n});let n={tokenize:function(e,t){let n=e.pos,r=e.src.charCodeAt(n);if(t||126!==r)return!1;let i=e.scanDelims(e.pos,!0),a=i.length,o=String.fromCharCode(r);if(a<2)return!1;a%2&&(e.push("text","",0).content=o,a--);for(let t=0;t<a;t+=2)e.push("text","",0).content=o+o,e.delimiters.push({marker:r,length:0,token:e.tokens.length-1,end:-1,open:i.can_open,close:i.can_close});return e.pos+=i.length,!0},postProcess:function(e){let n=e.tokens_meta,r=e.tokens_meta.length;t(e,e.delimiters);for(let i=0;i<r;i++)n[i]&&n[i].delimiters&&t(e,n[i].delimiters)}}},426991:e=>{"use strict";function t(e,t){let n=t.length;for(let r=n-1;r>=0;r--){let n=t[r];if(95!==n.marker&&42!==n.marker||-1===n.end)continue;let i=t[n.end],a=r>0&&t[r-1].end===n.end+1&&t[r-1].marker===n.marker&&t[r-1].token===n.token-1&&t[n.end+1].token===i.token+1,o=String.fromCharCode(n.marker),s=e.tokens[n.token];s.type=a?"strong_open":"em_open",s.tag=a?"strong":"em",s.nesting=1,s.markup=a?o+o:o,s.content="";let l=e.tokens[i.token];l.type=a?"strong_close":"em_close",l.tag=a?"strong":"em",l.nesting=-1,l.markup=a?o+o:o,l.content="",a&&(e.tokens[t[r-1].token].content="",e.tokens[t[n.end+1].token].content="",r--)}}e.s({default:()=>n});let n={tokenize:function(e,t){let n=e.pos,r=e.src.charCodeAt(n);if(t||95!==r&&42!==r)return!1;let i=e.scanDelims(e.pos,42===r);for(let t=0;t<i.length;t++)e.push("text","",0).content=String.fromCharCode(r),e.delimiters.push({marker:r,length:i.length,token:e.tokens.length-1,end:-1,open:i.can_open,close:i.can_close});return e.pos+=i.length,!0},postProcess:function(e){let n=e.tokens_meta,r=e.tokens_meta.length;t(e,e.delimiters);for(let i=0;i<r;i++)n[i]&&n[i].delimiters&&t(e,n[i].delimiters)}}},446888:e=>{"use strict";e.s({default:()=>n});var t=e.i(550049);function n(e,n){let r,i,a,o,s="",l="",u=e.pos,c=!0;if(91!==e.src.charCodeAt(e.pos))return!1;let d=e.pos,h=e.posMax,p=e.pos+1,f=e.md.helpers.parseLinkLabel(e,e.pos,!0);if(f<0)return!1;let m=f+1;if(m<h&&40===e.src.charCodeAt(m)){for(c=!1,m++;m<h&&(r=e.src.charCodeAt(m),(0,t.isSpace)(r)||10===r);m++);if(m>=h)return!1;if(u=m,(a=e.md.helpers.parseLinkDestination(e.src,m,e.posMax)).ok){for(s=e.md.normalizeLink(a.str),e.md.validateLink(s)?m=a.pos:s="",u=m;m<h&&(r=e.src.charCodeAt(m),(0,t.isSpace)(r)||10===r);m++);if(a=e.md.helpers.parseLinkTitle(e.src,m,e.posMax),m<h&&u!==m&&a.ok)for(l=a.str,m=a.pos;m<h&&(r=e.src.charCodeAt(m),(0,t.isSpace)(r)||10===r);m++);}(m>=h||41!==e.src.charCodeAt(m))&&(c=!0),m++}if(c){if(void 0===e.env.references)return!1;if(m<h&&91===e.src.charCodeAt(m)?(u=m+1,(m=e.md.helpers.parseLinkLabel(e,m))>=0?i=e.src.slice(u,m++):m=f+1):m=f+1,i||(i=e.src.slice(p,f)),!(o=e.env.references[(0,t.normalizeReference)(i)]))return e.pos=d,!1;s=o.href,l=o.title}if(!n){e.pos=p,e.posMax=f;let t=e.push("link_open","a",1),n=[["href",s]];t.attrs=n,l&&n.push(["title",l]),e.linkLevel++,e.md.inline.tokenize(e),e.linkLevel--,e.push("link_close","a",-1)}return e.pos=m,e.posMax=h,!0}},177042:e=>{"use strict";e.s({default:()=>n});var t=e.i(550049);function n(e,n){let r,i,a,o,s,l,u,c,d="",h=e.pos,p=e.posMax;if(33!==e.src.charCodeAt(e.pos)||91!==e.src.charCodeAt(e.pos+1))return!1;let f=e.pos+2,m=e.md.helpers.parseLinkLabel(e,e.pos+1,!1);if(m<0)return!1;if((o=m+1)<p&&40===e.src.charCodeAt(o)){for(o++;o<p&&(r=e.src.charCodeAt(o),(0,t.isSpace)(r)||10===r);o++);if(o>=p)return!1;for(c=o,(l=e.md.helpers.parseLinkDestination(e.src,o,e.posMax)).ok&&(d=e.md.normalizeLink(l.str),e.md.validateLink(d)?o=l.pos:d=""),c=o;o<p&&(r=e.src.charCodeAt(o),(0,t.isSpace)(r)||10===r);o++);if(l=e.md.helpers.parseLinkTitle(e.src,o,e.posMax),o<p&&c!==o&&l.ok)for(u=l.str,o=l.pos;o<p&&(r=e.src.charCodeAt(o),(0,t.isSpace)(r)||10===r);o++);else u="";if(o>=p||41!==e.src.charCodeAt(o))return e.pos=h,!1;o++}else{if(void 0===e.env.references)return!1;if(o<p&&91===e.src.charCodeAt(o)?(c=o+1,(o=e.md.helpers.parseLinkLabel(e,o))>=0?a=e.src.slice(c,o++):o=m+1):o=m+1,a||(a=e.src.slice(f,m)),!(s=e.env.references[(0,t.normalizeReference)(a)]))return e.pos=h,!1;d=s.href,u=s.title}if(!n){i=e.src.slice(f,m);let t=[];e.md.inline.parse(i,e.md,e.env,t);let n=e.push("image","img",0),r=[["src",d],["alt",""]];n.attrs=r,n.children=t,n.content=i,u&&r.push(["title",u])}return e.pos=o,e.posMax=p,!0}},557771:e=>{"use strict";e.s({default:()=>r});let t=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,n=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function r(e,r){let i=e.pos;if(60!==e.src.charCodeAt(i))return!1;let a=e.pos,o=e.posMax;for(;;){if(++i>=o)return!1;let t=e.src.charCodeAt(i);if(60===t)return!1;if(62===t)break}let s=e.src.slice(a+1,i);if(n.test(s)){let t=e.md.normalizeLink(s);if(!e.md.validateLink(t))return!1;if(!r){let n=e.push("link_open","a",1);n.attrs=[["href",t]],n.markup="autolink",n.info="auto",e.push("text","",0).content=e.md.normalizeLinkText(s);let r=e.push("link_close","a",-1);r.markup="autolink",r.info="auto"}return e.pos+=s.length+2,!0}if(t.test(s)){let t=e.md.normalizeLink("mailto:"+s);if(!e.md.validateLink(t))return!1;if(!r){let n=e.push("link_open","a",1);n.attrs=[["href",t]],n.markup="autolink",n.info="auto",e.push("text","",0).content=e.md.normalizeLinkText(s);let r=e.push("link_close","a",-1);r.markup="autolink",r.info="auto"}return e.pos+=s.length+2,!0}return!1}},883346:e=>{"use strict";e.s({default:()=>n});var t=e.i(747995);function n(e,n){if(!e.md.options.html)return!1;let r=e.posMax,i=e.pos;if(60!==e.src.charCodeAt(i)||i+2>=r)return!1;let a=e.src.charCodeAt(i+1);if(33!==a&&63!==a&&47!==a&&!function(e){let t=32|e;return t>=97&&t<=122}(a))return!1;let o=e.src.slice(i).match(t.HTML_TAG_RE);if(!o)return!1;if(!n){var s,l;let t=e.push("html_inline","",0);t.content=o[0],s=t.content,/^<a[>\s]/i.test(s)&&e.linkLevel++,l=t.content,/^<\/a\s*>/i.test(l)&&e.linkLevel--}return e.pos+=o[0].length,!0}},38342:e=>{"use strict";e.s({default:()=>a}),e.i(758616);var t=e.i(100391),n=e.i(550049);let r=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,i=/^&([a-z][a-z0-9]{1,31});/i;function a(e,a){let o=e.pos,s=e.posMax;if(38!==e.src.charCodeAt(o)||o+1>=s)return!1;if(35===e.src.charCodeAt(o+1)){let t=e.src.slice(o).match(r);if(t){if(!a){let r="x"===t[1][0].toLowerCase()?parseInt(t[1].slice(1),16):parseInt(t[1],10),i=e.push("text_special","",0);i.content=(0,n.isValidEntityCode)(r)?(0,n.fromCodePoint)(r):(0,n.fromCodePoint)(65533),i.markup=t[0],i.info="entity"}return e.pos+=t[0].length,!0}}else{let n=e.src.slice(o).match(i);if(n){let r=(0,t.decodeHTML)(n[0]);if(r!==n[0]){if(!a){let t=e.push("text_special","",0);t.content=r,t.markup=n[0],t.info="entity"}return e.pos+=n[0].length,!0}}}return!1}},662201:e=>{"use strict";function t(e){let t={},n=e.length;if(!n)return;let r=0,i=-2,a=[];for(let o=0;o<n;o++){let n=e[o];if(a.push(0),(e[r].marker!==n.marker||i!==n.token-1)&&(r=o),i=n.token,n.length=n.length||0,!n.close)continue;t.hasOwnProperty(n.marker)||(t[n.marker]=[-1,-1,-1,-1,-1,-1]);let s=t[n.marker][3*!!n.open+n.length%3],l=r-a[r]-1,u=l;for(;l>s;l-=a[l]+1){let t=e[l];if(t.marker===n.marker&&t.open&&t.end<0){let r=!1;if((t.close||n.open)&&(t.length+n.length)%3==0&&(t.length%3!=0||n.length%3!=0)&&(r=!0),!r){let r=l>0&&!e[l-1].open?a[l-1]+1:0;a[o]=o-l+r,a[l]=r,n.open=!1,t.end=o,t.close=!1,u=-1,i=-2;break}}}-1!==u&&(t[n.marker][3*!!n.open+(n.length||0)%3]=u)}}function n(e){let n=e.tokens_meta,r=e.tokens_meta.length;t(e.delimiters);for(let e=0;e<r;e++)n[e]&&n[e].delimiters&&t(n[e].delimiters)}e.s({default:()=>n})},998149:e=>{"use strict";function t(e){let t,n,r=0,i=e.tokens,a=e.tokens.length;for(t=n=0;t<a;t++)i[t].nesting<0&&r--,i[t].level=r,i[t].nesting>0&&r++,"text"===i[t].type&&t+1<a&&"text"===i[t+1].type?i[t+1].content=i[t].content+i[t+1].content:(t!==n&&(i[n]=i[t]),n++);t!==n&&(i.length=n)}e.s({default:()=>t})},616996:e=>{"use strict";e.s({default:()=>w});var t=e.i(437134),n=e.i(362025),r=e.i(466510),i=e.i(112887),a=e.i(438102),o=e.i(99013),s=e.i(205167),l=e.i(611773),u=e.i(426991),c=e.i(446888),d=e.i(177042),h=e.i(557771),p=e.i(883346),f=e.i(38342),m=e.i(662201),g=e.i(998149);let y=[["text",r.default],["linkify",i.default],["newline",a.default],["escape",o.default],["backticks",s.default],["strikethrough",l.default.tokenize],["emphasis",u.default.tokenize],["link",c.default],["image",d.default],["autolink",h.default],["html_inline",p.default],["entity",f.default]],b=[["balance_pairs",m.default],["strikethrough",l.default.postProcess],["emphasis",u.default.postProcess],["fragments_join",g.default]];function x(){this.ruler=new t.default;for(let e=0;e<y.length;e++)this.ruler.push(y[e][0],y[e][1]);this.ruler2=new t.default;for(let e=0;e<b.length;e++)this.ruler2.push(b[e][0],b[e][1])}x.prototype.skipToken=function(e){let t=e.pos,n=this.ruler.getRules(""),r=n.length,i=e.md.options.maxNesting,a=e.cache;if(void 0!==a[t]){e.pos=a[t];return}let o=!1;if(e.level<i){for(let i=0;i<r;i++)if(e.level++,o=n[i](e,!0),e.level--,o){if(t>=e.pos)throw Error("inline rule didn't increment state.pos");break}}else e.pos=e.posMax;!o&&e.pos++,a[t]=e.pos},x.prototype.tokenize=function(e){let t=this.ruler.getRules(""),n=t.length,r=e.posMax,i=e.md.options.maxNesting;for(;e.pos<r;){let a=e.pos,o=!1;if(e.level<i){for(let r=0;r<n;r++)if(o=t[r](e,!1)){if(a>=e.pos)throw Error("inline rule didn't increment state.pos");break}}if(o){if(e.pos>=r)break;continue}e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()},x.prototype.parse=function(e,t,n,r){let i=new this.State(e,t,n,r);this.tokenize(i);let a=this.ruler2.getRules(""),o=a.length;for(let e=0;e<o;e++)a[e](i)},x.prototype.State=n.default;let w=x},899852:e=>{"use strict";e.s({Any:()=>t.default});var t=e.i(441224)},618976:e=>{"use strict";e.s({Cc:()=>t.default});var t=e.i(346170)},827454:e=>{"use strict";e.s({Z:()=>t.default});var t=e.i(80239)},686186:e=>{"use strict";e.s({default:()=>a}),e.i(607440);var t=e.i(899852),n=e.i(618976),r=e.i(827454),i=e.i(857525);function a(e){let a={};e=e||{},a.src_Any=t.Any.source,a.src_Cc=n.Cc.source,a.src_Z=r.Z.source,a.src_P=i.P.source,a.src_ZPCc=[a.src_Z,a.src_P,a.src_Cc].join("|"),a.src_ZCc=[a.src_Z,a.src_Cc].join("|");let o="[><]";return a.src_pseudo_letter="(?:(?!"+o+"|"+a.src_ZPCc+")"+a.src_Any+")",a.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",a.src_auth="(?:(?:(?!"+a.src_ZCc+"|[@/\\[\\]()]).)+@)?",a.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",a.src_host_terminator="(?=$|"+o+"|"+a.src_ZPCc+")(?!"+(e["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+a.src_ZPCc+"))",a.src_path="(?:[/?#](?:(?!"+a.src_ZCc+"|"+o+"|[()[\\]{}.,\"'?!\\-;]).|\\[(?:(?!"+a.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+a.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+a.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+a.src_ZCc+'|["]).)+\\"|\\\'(?:(?!'+a.src_ZCc+"|[']).)+\\'|\\'(?="+a.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+a.src_ZCc+"|[.]|$)|"+(e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+a.src_ZCc+"|$)|;(?!"+a.src_ZCc+"|$)|\\!+(?!"+a.src_ZCc+"|[!]|$)|\\?(?!"+a.src_ZCc+"|[?]|$))+|\\/)?",a.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',a.src_xn="xn--[a-z0-9\\-]{1,59}",a.src_domain_root="(?:"+a.src_xn+"|"+a.src_pseudo_letter+"{1,63})",a.src_domain="(?:"+a.src_xn+"|(?:"+a.src_pseudo_letter+")|(?:"+a.src_pseudo_letter+"(?:-|"+a.src_pseudo_letter+"){0,61}"+a.src_pseudo_letter+"))",a.src_host="(?:(?:(?:(?:"+a.src_domain+")\\.)*"+a.src_domain+"))",a.tpl_host_fuzzy="(?:"+a.src_ip4+"|(?:(?:(?:"+a.src_domain+")\\.)+(?:%TLDS%)))",a.tpl_host_no_ip_fuzzy="(?:(?:(?:"+a.src_domain+")\\.)+(?:%TLDS%))",a.src_host_strict=a.src_host+a.src_host_terminator,a.tpl_host_fuzzy_strict=a.tpl_host_fuzzy+a.src_host_terminator,a.src_host_port_strict=a.src_host+a.src_port+a.src_host_terminator,a.tpl_host_port_fuzzy_strict=a.tpl_host_fuzzy+a.src_port+a.src_host_terminator,a.tpl_host_port_no_ip_fuzzy_strict=a.tpl_host_no_ip_fuzzy+a.src_port+a.src_host_terminator,a.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+a.src_ZPCc+"|>|$))",a.tpl_email_fuzzy="(^|"+o+'|"|\\(|'+a.src_ZCc+")("+a.src_email_name+"@"+a.tpl_host_fuzzy_strict+")",a.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+a.src_ZPCc+"))((?![$+<=>^`|])"+a.tpl_host_port_fuzzy_strict+a.src_path+")",a.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+a.src_ZPCc+"))((?![$+<=>^`|])"+a.tpl_host_port_no_ip_fuzzy_strict+a.src_path+")",a}},2185:e=>{"use strict";e.s({default:()=>f});var t=e.i(686186);function n(e){let t=Array.prototype.slice.call(arguments,1);return t.forEach(function(t){t&&Object.keys(t).forEach(function(n){e[n]=t[n]})}),e}function r(e){return Object.prototype.toString.call(e)}function i(e){return"[object Function]"===r(e)}function a(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}let o={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1},s={"http:":{validate:function(e,t,n){let r=e.slice(t);return(n.re.http||(n.re.http=RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r))?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,n){let r=e.slice(t);return(n.re.no_http||(n.re.no_http=RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r))?t>=3&&":"===e[t-3]||t>=3&&"/"===e[t-3]?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,n){let r=e.slice(t);return(n.re.mailto||(n.re.mailto=RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r))?r.match(n.re.mailto)[0].length:0}}},l="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function u(){return function(e,t){t.normalize(e)}}function c(e){let n=e.re=(0,t.default)(e.__opts__),o=e.__tlds__.slice();function s(e){return e.replace("%TLDS%",n.src_tlds)}e.onCompile(),e.__tlds_replaced__||o.push("a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]"),o.push(n.src_xn),n.src_tlds=o.join("|"),n.email_fuzzy=RegExp(s(n.tpl_email_fuzzy),"i"),n.link_fuzzy=RegExp(s(n.tpl_link_fuzzy),"i"),n.link_no_ip_fuzzy=RegExp(s(n.tpl_link_no_ip_fuzzy),"i"),n.host_fuzzy_test=RegExp(s(n.tpl_host_fuzzy_test),"i");let l=[];function c(e,t){throw Error('(LinkifyIt) Invalid schema "'+e+'": '+t)}e.__compiled__={},Object.keys(e.__schemas__).forEach(function(t){let n=e.__schemas__[t];if(null===n)return;let a={validate:null,link:null};if(e.__compiled__[t]=a,"[object Object]"===r(n)){if("[object RegExp]"===r(n.validate)){var o;o=n.validate,a.validate=function(e,t){let n=e.slice(t);return o.test(n)?n.match(o)[0].length:0}}else i(n.validate)?a.validate=n.validate:c(t,n);i(n.normalize)?a.normalize=n.normalize:n.normalize?c(t,n):a.normalize=u();return}if("[object String]"===r(n))return void l.push(t);c(t,n)}),l.forEach(function(t){e.__compiled__[e.__schemas__[t]]&&(e.__compiled__[t].validate=e.__compiled__[e.__schemas__[t]].validate,e.__compiled__[t].normalize=e.__compiled__[e.__schemas__[t]].normalize)}),e.__compiled__[""]={validate:null,normalize:u()};let d=Object.keys(e.__compiled__).filter(function(t){return t.length>0&&e.__compiled__[t]}).map(a).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+n.src_ZPCc+"))("+d+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+n.src_ZPCc+"))("+d+")","ig"),e.re.schema_at_start=RegExp("^"+e.re.schema_search.source,"i"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),e.__index__=-1,e.__text_cache__=""}function d(e,t){let n=e.__index__,r=e.__last_index__,i=e.__text_cache__.slice(n,r);this.schema=e.__schema__.toLowerCase(),this.index=n+t,this.lastIndex=r+t,this.raw=i,this.text=i,this.url=i}function h(e,t){let n=new d(e,t);return e.__compiled__[n.schema].normalize(n,e),n}function p(e,t){if(!(this instanceof p))return new p(e,t);!t&&Object.keys(e||{}).reduce(function(e,t){return e||o.hasOwnProperty(t)},!1)&&(t=e,e={}),this.__opts__=n({},o,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=n({},s,e),this.__compiled__={},this.__tlds__=l,this.__tlds_replaced__=!1,this.re={},c(this)}p.prototype.add=function(e,t){return this.__schemas__[e]=t,c(this),this},p.prototype.set=function(e){return this.__opts__=n(this.__opts__,e),this},p.prototype.test=function(e){let t,n,r,i,a,o,s,l;if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;if(this.re.schema_test.test(e)){for((s=this.re.schema_search).lastIndex=0;null!==(t=s.exec(e));)if(i=this.testSchemaAt(e,t[2],s.lastIndex)){this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+i;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(l=e.search(this.re.host_fuzzy_test))>=0&&(this.__index__<0||l<this.__index__)&&null!==(n=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))&&(a=n.index+n[1].length,(this.__index__<0||a<this.__index__)&&(this.__schema__="",this.__index__=a,this.__last_index__=n.index+n[0].length)),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&e.indexOf("@")>=0&&null!==(r=e.match(this.re.email_fuzzy))&&(a=r.index+r[1].length,o=r.index+r[0].length,(this.__index__<0||a<this.__index__||a===this.__index__&&o>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=a,this.__last_index__=o)),this.__index__>=0},p.prototype.pretest=function(e){return this.re.pretest.test(e)},p.prototype.testSchemaAt=function(e,t,n){return this.__compiled__[t.toLowerCase()]?this.__compiled__[t.toLowerCase()].validate(e,n,this):0},p.prototype.match=function(e){let t=[],n=0;this.__index__>=0&&this.__text_cache__===e&&(t.push(h(this,n)),n=this.__last_index__);let r=n?e.slice(n):e;for(;this.test(r);)t.push(h(this,n)),r=r.slice(this.__last_index__),n+=this.__last_index__;return t.length?t:null},p.prototype.matchAtStart=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return null;let t=this.re.schema_at_start.exec(e);if(!t)return null;let n=this.testSchemaAt(e,t[2],t[0].length);return n?(this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+n,h(this,0)):null},p.prototype.tlds=function(e,t){return(e=Array.isArray(e)?e:[e],t)?this.__tlds__=this.__tlds__.concat(e).sort().filter(function(e,t,n){return e!==n[t-1]}).reverse():(this.__tlds__=e.slice(),this.__tlds_replaced__=!0),c(this),this},p.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),"mailto:"!==e.schema||/^mailto:/i.test(e.url)||(e.url="mailto:"+e.url)},p.prototype.onCompile=function(){};let f=p},879986:e=>{"use strict";e.s({parse:()=>t.default});var t=e.i(158928)},107729:e=>{"use strict";e.s({encode:()=>t.default});var t=e.i(113094)},747865:e=>{"use strict";e.s({format:()=>t.default});var t=e.i(894612)},235468:e=>{"use strict";e.s({decode:()=>t.default});var t=e.i(352195)},807447:e=>{"use strict";e.s({default:()=>f});let t=/^xn--/,n=/[^\0-\x7F]/,r=/[\x2E\u3002\uFF0E\uFF61]/g,i={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},a=Math.floor,o=String.fromCharCode;function s(e){throw RangeError(i[e])}function l(e,t){let n=e.split("@"),i="";return n.length>1&&(i=n[0]+"@",e=n[1]),i+(function(e,t){let n=[],r=e.length;for(;r--;)n[r]=t(e[r]);return n})((e=e.replace(r,".")).split("."),t).join(".")}function u(e){let t=[],n=0,r=e.length;for(;n<r;){let i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){let r=e.charCodeAt(n++);(64512&r)==56320?t.push(((1023&i)<<10)+(1023&r)+65536):(t.push(i),n--)}else t.push(i)}return t}let c=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},d=function(e,t,n){let r=0;for(e=n?a(e/700):e>>1,e+=a(e/t);e>455;r+=36)e=a(e/35);return a(r+36*e/(e+38))},h=function(e){let t=[],n=e.length,r=0,i=128,o=72,l=e.lastIndexOf("-");l<0&&(l=0);for(let n=0;n<l;++n)e.charCodeAt(n)>=128&&s("not-basic"),t.push(e.charCodeAt(n));for(let c=l>0?l+1:0;c<n;){let l=r;for(let t=1,i=36;;i+=36){var u;c>=n&&s("invalid-input");let l=(u=e.charCodeAt(c++))>=48&&u<58?26+(u-48):u>=65&&u<91?u-65:u>=97&&u<123?u-97:36;l>=36&&s("invalid-input"),l>a((0x7fffffff-r)/t)&&s("overflow"),r+=l*t;let d=i<=o?1:i>=o+26?26:i-o;if(l<d)break;let h=36-d;t>a(0x7fffffff/h)&&s("overflow"),t*=h}let h=t.length+1;o=d(r-l,h,0==l),a(r/h)>0x7fffffff-i&&s("overflow"),i+=a(r/h),r%=h,t.splice(r++,0,i)}return String.fromCodePoint(...t)},p=function(e){let t=[],n=(e=u(e)).length,r=128,i=0,l=72;for(let n of e)n<128&&t.push(o(n));let h=t.length,p=h;for(h&&t.push("-");p<n;){let n=0x7fffffff;for(let t of e)t>=r&&t<n&&(n=t);let u=p+1;for(let f of(n-r>a((0x7fffffff-i)/u)&&s("overflow"),i+=(n-r)*u,r=n,e))if(f<r&&++i>0x7fffffff&&s("overflow"),f===r){let e=i;for(let n=36;;n+=36){let r=n<=l?1:n>=l+26?26:n-l;if(e<r)break;let i=e-r,s=36-r;t.push(o(c(r+i%s,0))),e=a(i/s)}t.push(o(c(e,0))),l=d(i,u,p===h),i=0,++p}++i,++r}return t.join("")},f={version:"2.3.1",ucs2:{decode:u,encode:e=>String.fromCodePoint(...e)},decode:h,encode:p,toASCII:function(e){return l(e,function(e){return n.test(e)?"xn--"+p(e):e})},toUnicode:function(e){return l(e,function(e){return t.test(e)?h(e.slice(4).toLowerCase()):e})}}},153490:e=>{"use strict";e.s({default:()=>t});let t={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}}},755689:e=>{"use strict";e.s({default:()=>t});let t={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}}},469076:e=>{"use strict";e.s({default:()=>t});let t={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}}},169143:e=>{"use strict";e.s({default:()=>C});var t=e.i(550049);e.i(429144);var n=e.i(747467),r=e.i(829833),i=e.i(139008),a=e.i(262546),o=e.i(616996),s=e.i(2185);e.i(432534);var l=e.i(879986),u=e.i(107729),c=e.i(747865),d=e.i(235468),h=e.i(807447),p=e.i(153490),f=e.i(755689),m=e.i(469076);let g={default:p.default,zero:f.default,commonmark:m.default},y=/^(vbscript|javascript|file|data):/,b=/^data:image\/(gif|png|jpeg|webp);/;function x(e){let t=e.trim().toLowerCase();return!y.test(t)||b.test(t)}let w=["http:","https:","mailto:"];function k(e){let t=l.parse(e,!0);if(t.hostname&&(!t.protocol||w.indexOf(t.protocol)>=0))try{t.hostname=h.default.toASCII(t.hostname)}catch(e){}return u.encode(c.format(t))}function S(e){let t=l.parse(e,!0);if(t.hostname&&(!t.protocol||w.indexOf(t.protocol)>=0))try{t.hostname=h.default.toUnicode(t.hostname)}catch(e){}return d.decode(c.format(t),d.decode.defaultChars+"%")}function _(e,l){if(!(this instanceof _))return new _(e,l);l||t.isString(e)||(l=e||{},e="default"),this.inline=new o.default,this.block=new a.default,this.core=new i.default,this.renderer=new r.default,this.linkify=new s.default,this.validateLink=x,this.normalizeLink=k,this.normalizeLinkText=S,this.utils=t,this.helpers=t.assign({},n),this.options={},this.configure(e),l&&this.set(l)}_.prototype.set=function(e){return t.assign(this.options,e),this},_.prototype.configure=function(e){let n=this;if(t.isString(e)){let t=e;if(!(e=g[t]))throw Error('Wrong `markdown-it` preset "'+t+'", check name')}if(!e)throw Error("Wrong `markdown-it` preset, can't be empty");return e.options&&n.set(e.options),e.components&&Object.keys(e.components).forEach(function(t){e.components[t].rules&&n[t].ruler.enableOnly(e.components[t].rules),e.components[t].rules2&&n[t].ruler2.enableOnly(e.components[t].rules2)}),this},_.prototype.enable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(t){n=n.concat(this[t].ruler.enable(e,!0))},this),n=n.concat(this.inline.ruler2.enable(e,!0));let r=e.filter(function(e){return 0>n.indexOf(e)});if(r.length&&!t)throw Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this},_.prototype.disable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(t){n=n.concat(this[t].ruler.disable(e,!0))},this),n=n.concat(this.inline.ruler2.disable(e,!0));let r=e.filter(function(e){return 0>n.indexOf(e)});if(r.length&&!t)throw Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this},_.prototype.use=function(e){let t=[this].concat(Array.prototype.slice.call(arguments,1));return e.apply(e,t),this},_.prototype.parse=function(e,t){if("string"!=typeof e)throw Error("Input data should be a String");let n=new this.core.State(e,this,t);return this.core.process(n),n.tokens},_.prototype.render=function(e,t){return t=t||{},this.renderer.render(this.parse(e,t),this.options,t)},_.prototype.parseInline=function(e,t){let n=new this.core.State(e,this,t);return n.inlineMode=!0,this.core.process(n),n.tokens},_.prototype.renderInline=function(e,t){return t=t||{},this.renderer.render(this.parseInline(e,t),this.options,t)};let C=_},899815:e=>{"use strict";e.s({}),e.i(169143)},208986:e=>{"use strict";e.s({}),e.i(169143),e.i(899815)},187740:e=>{"use strict";e.s({MarkdownSerializerState:()=>p,defaultMarkdownSerializer:()=>d});var t=e.i(490077);e.i(208986);var n=e.i(169143);let r=new t.Schema({nodes:{doc:{content:"block+"},paragraph:{content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM:()=>["p",0]},blockquote:{content:"block+",group:"block",parseDOM:[{tag:"blockquote"}],toDOM:()=>["blockquote",0]},horizontal_rule:{group:"block",parseDOM:[{tag:"hr"}],toDOM:()=>["div",["hr"]]},heading:{attrs:{level:{default:1}},content:"(text | image)*",group:"block",defining:!0,parseDOM:[{tag:"h1",attrs:{level:1}},{tag:"h2",attrs:{level:2}},{tag:"h3",attrs:{level:3}},{tag:"h4",attrs:{level:4}},{tag:"h5",attrs:{level:5}},{tag:"h6",attrs:{level:6}}],toDOM:e=>["h"+e.attrs.level,0]},code_block:{content:"text*",group:"block",code:!0,defining:!0,marks:"",attrs:{params:{default:""}},parseDOM:[{tag:"pre",preserveWhitespace:"full",getAttrs:e=>({params:e.getAttribute("data-params")||""})}],toDOM:e=>["pre",e.attrs.params?{"data-params":e.attrs.params}:{},["code",0]]},ordered_list:{content:"list_item+",group:"block",attrs:{order:{default:1},tight:{default:!1}},parseDOM:[{tag:"ol",getAttrs:e=>({order:e.hasAttribute("start")?+e.getAttribute("start"):1,tight:e.hasAttribute("data-tight")})}],toDOM:e=>["ol",{start:1==e.attrs.order?null:e.attrs.order,"data-tight":e.attrs.tight?"true":null},0]},bullet_list:{content:"list_item+",group:"block",attrs:{tight:{default:!1}},parseDOM:[{tag:"ul",getAttrs:e=>({tight:e.hasAttribute("data-tight")})}],toDOM:e=>["ul",{"data-tight":e.attrs.tight?"true":null},0]},list_item:{content:"block+",defining:!0,parseDOM:[{tag:"li"}],toDOM:()=>["li",0]},text:{group:"inline"},image:{inline:!0,attrs:{src:{},alt:{default:null},title:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs:e=>({src:e.getAttribute("src"),title:e.getAttribute("title"),alt:e.getAttribute("alt")})}],toDOM:e=>["img",e.attrs]},hard_break:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:()=>["br"]}},marks:{em:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"},{style:"font-style=normal",clearMark:e=>"em"==e.type.name}],toDOM:()=>["em"]},strong:{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:e=>"normal"!=e.style.fontWeight&&null},{style:"font-weight=400",clearMark:e=>"strong"==e.type.name},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}],toDOM:()=>["strong"]},link:{attrs:{href:{},title:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:e=>({href:e.getAttribute("href"),title:e.getAttribute("title")})}],toDOM:e=>["a",e.attrs]},code:{code:!0,parseDOM:[{tag:"code"}],toDOM:()=>["code"]}}});class i{top(){return this.stack[this.stack.length-1]}push(e){this.stack.length&&this.top().content.push(e)}addText(e){if(!e)return;let n=this.top(),r=n.content,i=r[r.length-1],a=this.schema.text(e,n.marks),o;i&&(o=function(e,n){if(e.isText&&n.isText&&t.Mark.sameSet(e.marks,n.marks))return e.withText(e.text+n.text)}(i,a))?r[r.length-1]=o:r.push(a)}openMark(e){let t=this.top();t.marks=e.addToSet(t.marks)}closeMark(e){let t=this.top();t.marks=e.removeFromSet(t.marks)}parseTokens(e){for(let t=0;t<e.length;t++){let n=e[t],r=this.tokenHandlers[n.type];if(!r)throw Error("Token type `"+n.type+"` not supported by Markdown parser");r(this,n,e,t)}}addNode(e,t,n){let r=this.top(),i=e.createAndFill(t,n,r?r.marks:[]);return i?(this.push(i),i):null}openNode(e,n){this.stack.push({type:e,attrs:n,content:[],marks:t.Mark.none})}closeNode(){let e=this.stack.pop();return this.addNode(e.type,e.attrs,e.content)}constructor(e,n){this.schema=e,this.tokenHandlers=n,this.stack=[{type:e.topNodeType,attrs:null,content:[],marks:t.Mark.none}]}}function a(e,t,n,r){return e.getAttrs?e.getAttrs(t,n,r):e.attrs instanceof Function?e.attrs(t):e.attrs}function o(e,t){return e.noCloseToken||"code_inline"==t||"code_block"==t||"fence"==t}function s(e){return"\n"==e[e.length-1]?e.slice(0,e.length-1):e}function l(){}function u(e,t){for(;++t<e.length;)if("list_item_open"!=e[t].type)return e[t].hidden;return!1}new class{parse(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new i(this.schema,this.tokenHandlers),r;n.parseTokens(this.tokenizer.parse(e,t));do r=n.closeNode();while(n.stack.length)return r||this.schema.topNodeType.createAndFill()}constructor(e,t,n){this.schema=e,this.tokenizer=t,this.tokens=n,this.tokenHandlers=function(e,t){let n=Object.create(null);for(let r in t){let i=t[r];if(i.block){let t=e.nodeType(i.block);o(i,r)?n[r]=(e,n,r,o)=>{e.openNode(t,a(i,n,r,o)),e.addText(s(n.content)),e.closeNode()}:(n[r+"_open"]=(e,n,r,o)=>e.openNode(t,a(i,n,r,o)),n[r+"_close"]=e=>e.closeNode())}else if(i.node){let t=e.nodeType(i.node);n[r]=(e,n,r,o)=>e.addNode(t,a(i,n,r,o))}else if(i.mark){let t=e.marks[i.mark];o(i,r)?n[r]=(e,n,r,o)=>{e.openMark(t.create(a(i,n,r,o))),e.addText(s(n.content)),e.closeMark(t)}:(n[r+"_open"]=(e,n,r,o)=>e.openMark(t.create(a(i,n,r,o))),n[r+"_close"]=e=>e.closeMark(t))}else if(i.ignore)o(i,r)?n[r]=l:(n[r+"_open"]=l,n[r+"_close"]=l);else throw RangeError("Unrecognized parsing spec "+JSON.stringify(i))}return n.text=(e,t)=>e.addText(t.content),n.inline=(e,t)=>e.parseTokens(t.children),n.softbreak=n.softbreak||(e=>e.addText(" ")),n}(e,n)}}(r,(0,n.default)("commonmark",{html:!1}),{blockquote:{block:"blockquote"},paragraph:{block:"paragraph"},list_item:{block:"list_item"},bullet_list:{block:"bullet_list",getAttrs:(e,t,n)=>({tight:u(t,n)})},ordered_list:{block:"ordered_list",getAttrs:(e,t,n)=>({order:+e.attrGet("start")||1,tight:u(t,n)})},heading:{block:"heading",getAttrs:e=>({level:+e.tag.slice(1)})},code_block:{block:"code_block",noCloseToken:!0},fence:{block:"code_block",getAttrs:e=>({params:e.info||""}),noCloseToken:!0},hr:{node:"horizontal_rule"},image:{node:"image",getAttrs:e=>({src:e.attrGet("src"),title:e.attrGet("title")||null,alt:e.children[0]&&e.children[0].content||null})},hardbreak:{node:"hard_break"},em:{mark:"em"},strong:{mark:"strong"},link:{mark:"link",getAttrs:e=>({href:e.attrGet("href"),title:e.attrGet("title")||null})},code_inline:{mark:"code",noCloseToken:!0}});let c={open:"",close:"",mixable:!0},d=new class{serialize(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=Object.assign({},this.options,t);let n=new p(this.nodes,this.marks,t);return n.renderContent(e),n.out}constructor(e,t,n={}){this.nodes=e,this.marks=t,this.options=n}}({blockquote(e,t){e.wrapBlock("> ",null,t,()=>e.renderContent(t))},code_block(e,t){let n=t.textContent.match(/`{3,}/gm),r=n?n.sort().slice(-1)[0]+"`":"```";e.write(r+(t.attrs.params||"")+"\n"),e.text(t.textContent,!1),e.write("\n"),e.write(r),e.closeBlock(t)},heading(e,t){e.write(e.repeat("#",t.attrs.level)+" "),e.renderInline(t,!1),e.closeBlock(t)},horizontal_rule(e,t){e.write(t.attrs.markup||"---"),e.closeBlock(t)},bullet_list(e,t){e.renderList(t,"  ",()=>(t.attrs.bullet||"*")+" ")},ordered_list(e,t){let n=t.attrs.order||1,r=String(n+t.childCount-1).length,i=e.repeat(" ",r+2);e.renderList(t,i,t=>{let i=String(n+t);return e.repeat(" ",r-i.length)+i+". "})},list_item(e,t){e.renderContent(t)},paragraph(e,t){e.renderInline(t),e.closeBlock(t)},image(e,t){e.write("!["+e.esc(t.attrs.alt||"")+"]("+t.attrs.src.replace(/[\(\)]/g,"\\$&")+(t.attrs.title?' "'+t.attrs.title.replace(/"/g,'\\"')+'"':"")+")")},hard_break(e,t,n,r){for(let i=r+1;i<n.childCount;i++)if(n.child(i).type!=t.type)return void e.write("\\\n")},text(e,t){e.text(t.text,!e.inAutolink)}},{em:{open:"*",close:"*",mixable:!0,expelEnclosingWhitespace:!0},strong:{open:"**",close:"**",mixable:!0,expelEnclosingWhitespace:!0},link:{open:(e,t,n,r)=>(e.inAutolink=function(e,t,n){if(e.attrs.title||!/^\w+:/.test(e.attrs.href))return!1;let r=t.child(n);return!!r.isText&&r.text==e.attrs.href&&r.marks[r.marks.length-1]==e&&(n==t.childCount-1||!e.isInSet(t.child(n+1).marks))}(t,n,r),e.inAutolink?"<":"["),close(e,t,n,r){let{inAutolink:i}=e;return e.inAutolink=void 0,i?">":"]("+t.attrs.href.replace(/[\(\)"]/g,"\\$&")+(t.attrs.title?' "'.concat(t.attrs.title.replace(/"/g,'\\"'),'"'):"")+")"},mixable:!0},code:{open:(e,t,n,r)=>h(n.child(r),-1),close:(e,t,n,r)=>h(n.child(r-1),1),escape:!1}});function h(e,t){let n=/`+/g,r,i=0;if(e.isText)for(;r=n.exec(e.text);)i=Math.max(i,r[0].length);let a=i>0&&t>0?" `":"`";for(let e=0;e<i;e++)a+="`";return i>0&&t<0&&(a+=" "),a}class p{flushClose(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;if(this.closed){if(this.atBlank()||(this.out+="\n"),e>1){let t=this.delim,n=/\s+$/.exec(t);n&&(t=t.slice(0,t.length-n[0].length));for(let n=1;n<e;n++)this.out+=t+"\n"}this.closed=null}}getMark(e){let t=this.marks[e];if(!t){if(!1!==this.options.strict)throw Error("Mark type `".concat(e,"` not supported by Markdown renderer"));t=c}return t}wrapBlock(e,t,n,r){let i=this.delim;this.write(null!=t?t:e),this.delim+=e,r(),this.delim=i,this.closeBlock(n)}atBlank(){return/(^|\n)$/.test(this.out)}ensureNewLine(){this.atBlank()||(this.out+="\n")}write(e){this.flushClose(),this.delim&&this.atBlank()&&(this.out+=this.delim),e&&(this.out+=e)}closeBlock(e){this.closed=e}text(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],n=e.split("\n");for(let e=0;e<n.length;e++)this.write(),!t&&"["==n[e][0]&&/(^|[^\\])\!$/.test(this.out)&&(this.out=this.out.slice(0,this.out.length-1)+"\\!"),this.out+=t?this.esc(n[e],this.atBlockStart):n[e],e!=n.length-1&&(this.out+="\n")}render(e,t,n){if(this.nodes[e.type.name])this.nodes[e.type.name](this,e,t,n);else if(!1!==this.options.strict)throw Error("Token type `"+e.type.name+"` not supported by Markdown renderer");else!e.type.isLeaf&&(e.type.inlineContent?this.renderInline(e):this.renderContent(e),e.isBlock&&this.closeBlock(e))}renderContent(e){e.forEach((t,n,r)=>this.render(t,e,r))}renderInline(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];this.atBlockStart=t;let n=[],r="",i=(t,i,a)=>{let o=t?t.marks:[];t&&t.type.name===this.options.hardBreakNodeName&&(o=o.filter(t=>{if(a+1==e.childCount)return!1;let n=e.child(a+1);return t.isInSet(n.marks)&&(!n.isText||/\S/.test(n.text))}));let s=r;if(r="",t&&t.isText&&o.some(e=>{let t=this.getMark(e.type.name);return t&&t.expelEnclosingWhitespace&&!e.isInSet(n)})){let[e,r,i]=/^(\s*)(.*)$/m.exec(t.text);r&&(s+=r,(t=i?t.withText(i):null)||(o=n))}if(t&&t.isText&&o.some(t=>{let n=this.getMark(t.type.name);return n&&n.expelEnclosingWhitespace&&(a==e.childCount-1||!t.isInSet(e.child(a+1).marks))})){let[e,i,a]=/^(.*?)(\s*)$/m.exec(t.text);a&&(r=a,(t=i?t.withText(i):null)||(o=n))}let l=o.length?o[o.length-1]:null,u=l&&!1===this.getMark(l.type.name).escape,c=o.length-!!u;n:for(let e=0;e<c;e++){let t=o[e];if(!this.getMark(t.type.name).mixable)break;for(let r=0;r<n.length;r++){let i=n[r];if(!this.getMark(i.type.name).mixable)break;if(t.eq(i)){e>r?o=o.slice(0,r).concat(t).concat(o.slice(r,e)).concat(o.slice(e+1,c)):r>e&&(o=o.slice(0,e).concat(o.slice(e+1,r)).concat(t).concat(o.slice(r,c)));continue n}}}let d=0;for(;d<Math.min(n.length,c)&&o[d].eq(n[d]);)++d;for(;d<n.length;)this.text(this.markString(n.pop(),!1,e,a),!1);if(s&&this.text(s),t){for(;n.length<c;){let t=o[n.length];n.push(t),this.text(this.markString(t,!0,e,a),!1),this.atBlockStart=!1}u&&t.isText?this.text(this.markString(l,!0,e,a)+t.text+this.markString(l,!1,e,a+1),!1):this.render(t,e,a),this.atBlockStart=!1}(null==t?void 0:t.isText)&&t.nodeSize>0&&(this.atBlockStart=!1)};e.forEach(i),i(null,0,e.childCount),this.atBlockStart=!1}renderList(e,t,n){this.closed&&this.closed.type==e.type?this.flushClose(3):this.inTightList&&this.flushClose(1);let r=void 0!==e.attrs.tight?e.attrs.tight:this.options.tightLists,i=this.inTightList;this.inTightList=r,e.forEach((i,a,o)=>{o&&r&&this.flushClose(1),this.wrapBlock(t,n(o),e,()=>this.render(i,e,o))}),this.inTightList=i}esc(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e=e.replace(/[`*\\~\[\]_]/g,(t,n)=>"_"==t&&n>0&&n+1<e.length&&e[n-1].match(/\w/)&&e[n+1].match(/\w/)?t:"\\"+t),t&&(e=e.replace(/^(\+[ ]|[\-*>])/,"\\$&").replace(/^(\s*)(#{1,6})(\s|$)/,"$1\\$2$3").replace(/^(\s*\d+)\.\s/,"$1\\. ")),this.options.escapeExtraCharacters&&(e=e.replace(this.options.escapeExtraCharacters,"\\$&")),e}quote(e){let t=-1==e.indexOf('"')?'""':-1==e.indexOf("'")?"''":"()";return t[0]+e+t[1]}repeat(e,t){let n="";for(let r=0;r<t;r++)n+=e;return n}markString(e,t,n,r){let i=this.getMark(e.type.name),a=t?i.open:i.close;return"string"==typeof a?a:a(this,e,n,r)}getEnclosingWhitespace(e){return{leading:(e.match(/^(\s+)/)||[void 0])[0],trailing:(e.match(/(\s+)$/)||[void 0])[0]}}constructor(e,t,n){this.nodes=e,this.marks=t,this.options=n,this.delim="",this.out="",this.closed=null,this.inAutolink=void 0,this.atBlockStart=!1,this.inTightList=!1,void 0===this.options.tightLists&&(this.options.tightLists=!1),void 0===this.options.hardBreakNodeName&&(this.options.hardBreakNodeName="hard_break")}}},609159:e=>{var{m:t,e:n}=e,r=!0,i=!1,a=!1;function o(e,t,n){var r=e.attrIndex(t),i=[t,n];r<0?e.attrPush(i):e.attrs[r]=i}t.exports=function(e,t){t&&(r=!t.enabled,i=!!t.label,a=!!t.labelAfter),e.core.ruler.after("inline","github-task-lists",function(e){for(var t=e.tokens,n=2;n<t.length;n++)(function(e,t){var n;return"inline"===e[t].type&&"paragraph_open"===e[t-1].type&&"list_item_open"===e[t-2].type&&(0===(n=e[t]).content.indexOf("[ ] ")||0===n.content.indexOf("[x] ")||0===n.content.indexOf("[X] "))})(t,n)&&(function(e,t){if(e.children.unshift(function(e,t){var n=new t("html_inline","",0),i=r?' disabled="" ':"";return 0===e.content.indexOf("[ ] ")?n.content='<input class="task-list-item-checkbox"'+i+'type="checkbox">':(0===e.content.indexOf("[x] ")||0===e.content.indexOf("[X] "))&&(n.content='<input class="task-list-item-checkbox" checked=""'+i+'type="checkbox">'),n}(e,t)),e.children[1].content=e.children[1].content.slice(3),e.content=e.content.slice(3),i)if(a){e.children.pop();var n="task-item-"+Math.ceil(1e7*Math.random()-1e3);e.children[0].content=e.children[0].content.slice(0,-1)+' id="'+n+'">',e.children.push(function(e,t,n){var r=new n("html_inline","",0);return r.content='<label class="task-list-item-label" for="'+t+'">'+e+"</label>",r.attrs=[{for:t}],r}(e.content,n,t))}else e.children.unshift(function(e){var t=new e("html_inline","",0);return t.content="<label>",t}(t)),e.children.push(function(e){var t=new e("html_inline","",0);return t.content="</label>",t}(t))}(t[n],e.Token),o(t[n-2],"class","task-list-item"+(r?"":" enabled")),o(t[function(e,t){for(var n=e[t].level-1,r=t-1;r>=0;r--)if(e[r].level===n)return r;return -1}(t,n-2)],"class","contains-task-list"))})}},636655:e=>{"use strict";e.s({Markdown:()=>W});var t=e.i(691283),n=e.i(187740);e.i(208986);var r=e.i(169143);e.i(922181);var i=e.i(490077),a=e.i(609159);e.i(131841);var o=e.i(968617),s=Object.defineProperty,l=(e,t,n)=>(((e,t,n)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n),n);let u=t.Extension.create({name:"markdownTightLists",addOptions:()=>({tight:!0,tightClass:"tight",listTypes:["bulletList","orderedList"]}),addGlobalAttributes(){return[{types:this.options.listTypes,attributes:{tight:{default:this.options.tight,parseHTML:e=>"true"===e.getAttribute("data-tight")||!e.querySelector("p"),renderHTML:e=>({class:e.tight?this.options.tightClass:null,"data-tight":e.tight?"true":null})}}}]},addCommands(){var e=this;return{toggleTight:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return n=>{let{editor:r,commands:i}=n;return e.options.listTypes.some(e=>(function(e){if(!r.isActive(e))return!1;let n=r.getAttributes(e);return i.updateAttributes(e,{tight:null!=t?t:!(null!=n&&n.tight)})})(e))}}}}}),c=(0,r.default)();function d(e,t){return c.inline.State.prototype.scanDelims.call({src:e,posMax:e.length}),new c.inline.State(e,null,null,[]).scanDelims(t,!0)}function h(e,t,n,r){let i=e.substring(0,n)+e.substring(n+t.length);return i.substring(0,n+r)+t+i.substring(n+r)}class p extends n.MarkdownSerializerState{render(e,t,n){super.render(e,t,n);let r=this.inlines[this.inlines.length-1];if(null!=r&&r.start&&null!=r&&r.end){var i;let e,{delimiter:t,start:n,end:a}=this.normalizeInline(r);this.out=(i=this.out,(e=function(e,t,n,r){let i=r,a=e;for(;i>n&&!d(a,i).can_close;)a=h(a,t,i,-1),i--;return{text:a,from:n,to:i}}((e=function(e,t,n,r){let i=n,a=e;for(;i<r&&!d(a,i).can_open;)a=h(a,t,i,1),i++;return{text:a,from:i,to:r}}((e={text:i,from:n,to:a}).text,t,e.from,e.to)).text,t,e.from,e.to)).to-e.from<t.length+1&&(e.text=e.text.substring(0,e.from)+e.text.substring(e.to+t.length)),e.text),this.inlines.pop()}}markString(e,t,n,r){let i=this.marks[e.type.name];if(i.expelEnclosingWhitespace)if(t)this.inlines.push({start:this.out.length,delimiter:i.open});else{let e=this.inlines.pop();this.inlines.push({...e,end:this.out.length})}return super.markString(e,t,n,r)}normalizeInline(e){let{start:t,end:n}=e;for(;this.out.charAt(t).match(/\s/);)t++;return{...e,start:t}}constructor(e,t,n){super(e,t,null!=n?n:{}),l(this,"inTable",!1),this.inlines=[]}}let f=t.Mark.create({name:"markdownHTMLMark",addStorage:()=>({markdown:{serialize:{open(e,t){var n,r;return this.editor.storage.markdown.options.html?null!=(n=null==(r=m(t))?void 0:r[0])?n:"":(console.warn('Tiptap Markdown: "'.concat(t.type.name,'" mark is only available in html mode')),"")},close(e,t){var n,r;return this.editor.storage.markdown.options.html&&null!=(n=null==(r=m(t))?void 0:r[1])?n:""}},parse:{}}})});function m(e){let n=e.type.schema,r=n.text(" ",[e]),a=(0,t.getHTMLFromFragment)(i.Fragment.from(r),n).match(/^(<.*?>) (<\/.*?>)$/);return a?[a[1],a[2]]:null}function g(e){return new window.DOMParser().parseFromString("<body>".concat(e,"</body>"),"text/html").body}let y=t.Node.create({name:"markdownHTMLNode",addStorage:()=>({markdown:{serialize(e,n,r){this.editor.storage.markdown.options.html?e.write(function(e,n){let r=e.type.schema,a=(0,t.getHTMLFromFragment)(i.Fragment.from(e),r);return e.isBlock&&(n instanceof i.Fragment||n.type.name===r.topNodeType.name)?function(e){let t=g(e).firstElementChild;return t.innerHTML=t.innerHTML.trim()?"\n".concat(t.innerHTML,"\n"):"\n",t.outerHTML}(a):a}(n,r)):(console.warn('Tiptap Markdown: "'.concat(n.type.name,'" node is only available in html mode')),e.write("[".concat(n.type.name,"]"))),n.isBlock&&e.closeBlock(n)},parse:{}}})}),b=t.Node.create({name:"blockquote"}).extend({addStorage:()=>({markdown:{serialize:n.defaultMarkdownSerializer.nodes.blockquote,parse:{}}})}),x=t.Node.create({name:"bulletList"}).extend({addStorage:()=>({markdown:{serialize(e,t){return e.renderList(t,"  ",()=>(this.editor.storage.markdown.options.bulletListMarker||"-")+" ")},parse:{}}})}),w=t.Node.create({name:"codeBlock"}).extend({addStorage:()=>({markdown:{serialize(e,t){e.write("```"+(t.attrs.language||"")+"\n"),e.text(t.textContent,!1),e.ensureNewLine(),e.write("```"),e.closeBlock(t)},parse:{setup(e){var t;e.set({langPrefix:null!=(t=this.options.languageClassPrefix)?t:"language-"})},updateDOM(e){e.innerHTML=e.innerHTML.replace(/\n<\/code><\/pre>/g,"</code></pre>")}}}})}),k=t.Node.create({name:"hardBreak"}).extend({addStorage:()=>({markdown:{serialize(e,t,n,r){for(let i=r+1;i<n.childCount;i++)if(n.child(i).type!=t.type)return void e.write(e.inTable?y.storage.markdown.serialize.call(this,e,t,n):"\\\n")},parse:{}}})}),S=t.Node.create({name:"heading"}).extend({addStorage:()=>({markdown:{serialize:n.defaultMarkdownSerializer.nodes.heading,parse:{}}})}),_=t.Node.create({name:"horizontalRule"}).extend({addStorage:()=>({markdown:{serialize:n.defaultMarkdownSerializer.nodes.horizontal_rule,parse:{}}})}),C=t.Node.create({name:"image"}).extend({addStorage:()=>({markdown:{serialize:n.defaultMarkdownSerializer.nodes.image,parse:{}}})}),A=t.Node.create({name:"listItem"}).extend({addStorage:()=>({markdown:{serialize:n.defaultMarkdownSerializer.nodes.list_item,parse:{}}})}),E=t.Node.create({name:"orderedList"}).extend({addStorage:()=>({markdown:{serialize(e,t,n,r){let i=t.attrs.start||1,a=String(i+t.childCount-1).length,o=e.repeat(" ",a+2),s=function(e,t,n){let r=0;for(;n-r>0&&t.child(n-r-1).type.name===e.type.name;r++);return r}(t,n,r)%2?") ":". ";e.renderList(t,o,t=>{let n=String(i+t);return e.repeat(" ",a-n.length)+n+s})},parse:{}}})}),T=t.Node.create({name:"paragraph"}).extend({addStorage:()=>({markdown:{serialize:n.defaultMarkdownSerializer.nodes.paragraph,parse:{}}})});function M(e){var t,n;return null!=(t=null==e||null==(n=e.content)?void 0:n.content)?t:[]}let I=t.Node.create({name:"table"}).extend({addStorage:()=>({markdown:{serialize(e,t,n){if(!function(e){let t=M(e),n=t[0],r=t.slice(1);return!(M(n).some(e=>"tableHeader"!==e.type.name||N(e)||e.childCount>1)||r.some(e=>M(e).some(e=>"tableHeader"===e.type.name||N(e)||e.childCount>1)))}(t))return void y.storage.markdown.serialize.call(this,e,t,n);e.inTable=!0,t.forEach((t,n,r)=>{if(e.write("| "),t.forEach((t,n,r)=>{r&&e.write(" | ");let i=t.firstChild;i.textContent.trim()&&e.renderInline(i)}),e.write(" |"),e.ensureNewLine(),!r){let n=Array.from({length:t.childCount}).map(()=>"---").join(" | ");e.write("| ".concat(n," |")),e.ensureNewLine()}}),e.closeBlock(t),e.inTable=!1},parse:{}}})});function N(e){return e.attrs.colspan>1||e.attrs.rowspan>1}let D=t.Node.create({name:"taskItem"}).extend({addStorage:()=>({markdown:{serialize(e,t){let n=t.attrs.checked?"[x]":"[ ]";e.write("".concat(n," ")),e.renderContent(t)},parse:{updateDOM(e){[...e.querySelectorAll(".task-list-item")].forEach(e=>{let t=e.querySelector("input");e.setAttribute("data-type","taskItem"),t&&(e.setAttribute("data-checked",t.checked),t.remove())})}}}})}),P=t.Node.create({name:"taskList"}).extend({addStorage:()=>({markdown:{serialize:x.storage.markdown.serialize,parse:{setup(e){e.use(a.default)},updateDOM(e){[...e.querySelectorAll(".contains-task-list")].forEach(e=>{e.setAttribute("data-type","taskList")})}}}})}),R=t.Node.create({name:"text"}).extend({addStorage:()=>({markdown:{serialize(e,t){var n;e.text(null==(n=t.text)?void 0:n.replace(/</g,"&lt;").replace(/>/g,"&gt;"))},parse:{}}})}),O=t.Mark.create({name:"bold"}).extend({addStorage:()=>({markdown:{serialize:n.defaultMarkdownSerializer.marks.strong,parse:{}}})}),j=t.Mark.create({name:"code"}).extend({addStorage:()=>({markdown:{serialize:n.defaultMarkdownSerializer.marks.code,parse:{}}})}),F=t.Mark.create({name:"italic"}).extend({addStorage:()=>({markdown:{serialize:n.defaultMarkdownSerializer.marks.em,parse:{}}})}),L=[b,x,w,k,S,_,y,C,A,E,T,I,D,P,R,O,j,f,F,t.Mark.create({name:"link"}).extend({addStorage:()=>({markdown:{serialize:n.defaultMarkdownSerializer.marks.link,parse:{}}})}),t.Mark.create({name:"strike"}).extend({addStorage:()=>({markdown:{serialize:{open:"~~",close:"~~",expelEnclosingWhitespace:!0},parse:{}}})})];function z(e){var t,n;let r=null==(t=e.storage)?void 0:t.markdown,i=null==(n=L.find(t=>t.name===e.name))?void 0:n.storage.markdown;return r||i?{...i,...r}:null}class B{serialize(e){let t=new p(this.nodes,this.marks,{hardBreakNodeName:k.name});return t.renderContent(e),t.out}get nodes(){var e;return{...Object.fromEntries(Object.keys(this.editor.schema.nodes).map(e=>[e,this.serializeNode(y)])),...Object.fromEntries(null!=(e=this.editor.extensionManager.extensions.filter(e=>"node"===e.type&&this.serializeNode(e)).map(e=>[e.name,this.serializeNode(e)]))?e:[])}}get marks(){var e;return{...Object.fromEntries(Object.keys(this.editor.schema.marks).map(e=>[e,this.serializeMark(f)])),...Object.fromEntries(null!=(e=this.editor.extensionManager.extensions.filter(e=>"mark"===e.type&&this.serializeMark(e)).map(e=>[e.name,this.serializeMark(e)]))?e:[])}}serializeNode(e){var t;return null==(t=z(e))||null==(t=t.serialize)?void 0:t.bind({editor:this.editor,options:e.options})}serializeMark(e){var t;let n=null==(t=z(e))?void 0:t.serialize;return n?{...n,open:"function"==typeof n.open?n.open.bind({editor:this.editor,options:e.options}):n.open,close:"function"==typeof n.close?n.close.bind({editor:this.editor,options:e.options}):n.close}:null}constructor(e){l(this,"editor",null),this.editor=e}}class U{parse(e){let{inline:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"==typeof e){this.editor.extensionManager.extensions.forEach(e=>{var t;return null==(t=z(e))||null==(t=t.parse)||null==(t=t.setup)?void 0:t.call({editor:this.editor,options:e.options},this.md)});let n=g(this.md.render(e));return this.editor.extensionManager.extensions.forEach(e=>{var t;return null==(t=z(e))||null==(t=t.parse)||null==(t=t.updateDOM)?void 0:t.call({editor:this.editor,options:e.options},n)}),this.normalizeDOM(n,{inline:t,content:e}),n.innerHTML}return e}normalizeDOM(e,t){let{inline:n,content:r}=t;return this.normalizeBlocks(e),e.querySelectorAll("*").forEach(e=>{var t;(null==(t=e.nextSibling)?void 0:t.nodeType)!==Node.TEXT_NODE||e.closest("pre")||(e.nextSibling.textContent=e.nextSibling.textContent.replace(/^\n/,""))}),n&&this.normalizeInline(e,r),e}normalizeBlocks(e){let t=Object.values(this.editor.schema.nodes).filter(e=>e.isBlock).map(e=>{var t;return null==(t=e.spec.parseDOM)?void 0:t.map(e=>e.tag)}).flat().filter(Boolean).join(",");t&&[...e.querySelectorAll(t)].forEach(e=>{e.parentElement.matches("p")&&function(e){let t=e.parentElement,n=t.cloneNode();for(;t.firstChild&&t.firstChild!==e;)n.appendChild(t.firstChild);n.childNodes.length>0&&t.parentElement.insertBefore(n,t),t.parentElement.insertBefore(e,t),0===t.childNodes.length&&t.remove()}(e)})}normalizeInline(e,t){var n,r,i,a,o;if(null!=(n=e.firstElementChild)&&n.matches("p")){let n=e.firstElementChild,{nextElementSibling:s}=n,l=null!=(r=null==(i=t.match(/^\s+/))?void 0:i[0])?r:"",u=s?"":null!=(a=null==(o=t.match(/\s+$/))?void 0:o[0])?a:"";if(t.match(/^\n\n/)){n.innerHTML="".concat(n.innerHTML).concat(u);return}let c=n.parentNode;for(;n.firstChild;)c.insertBefore(n.firstChild,n);c.removeChild(n),e.innerHTML="".concat(l).concat(e.innerHTML).concat(u)}}withPatchedRenderer(e){let t=e=>function(){let t=e(...arguments);return"\n"===t?t:"\n"===t[t.length-1]?t.slice(0,-1):t};return e.renderer.rules.hardbreak=t(e.renderer.rules.hardbreak),e.renderer.rules.softbreak=t(e.renderer.rules.softbreak),e.renderer.rules.fence=t(e.renderer.rules.fence),e.renderer.rules.code_block=t(e.renderer.rules.code_block),e.renderer.renderToken=t(e.renderer.renderToken.bind(e.renderer)),e}constructor(e,t){l(this,"editor",null),l(this,"md",null);let{html:n,linkify:i,breaks:a}=t;this.editor=e,this.md=this.withPatchedRenderer((0,r.default)({html:n,linkify:i,breaks:a}))}}let H=t.Extension.create({name:"markdownClipboard",addOptions:()=>({transformPastedText:!1,transformCopiedText:!1}),addProseMirrorPlugins(){return[new o.Plugin({key:new o.PluginKey("markdownClipboard"),props:{clipboardTextParser:(e,t,n)=>{if(n||!this.options.transformPastedText)return null;let r=this.editor.storage.markdown.parser.parse(e,{inline:!0});return i.DOMParser.fromSchema(this.editor.schema).parseSlice(g(r),{preserveWhitespace:!0,context:t})},clipboardTextSerializer:e=>this.options.transformCopiedText?this.editor.storage.markdown.serializer.serialize(e.content):null}})]}}),W=t.Extension.create({name:"markdown",priority:50,addOptions:()=>({html:!0,tightLists:!0,tightListClass:"tight",bulletListMarker:"-",linkify:!1,breaks:!1,transformPastedText:!1,transformCopiedText:!1}),addCommands(){let e=t.extensions.Commands.config.addCommands();return{setContent:(t,n,r)=>i=>e.setContent(i.editor.storage.markdown.parser.parse(t),n,r)(i),insertContentAt:(t,n,r)=>i=>e.insertContentAt(t,i.editor.storage.markdown.parser.parse(n,{inline:!0}),r)(i)}},onBeforeCreate(){this.editor.storage.markdown={options:{...this.options},parser:new U(this.editor,this.options),serializer:new B(this.editor),getMarkdown:()=>this.editor.storage.markdown.serializer.serialize(this.editor.state.doc)},this.editor.options.initialContent=this.editor.options.content,this.editor.options.content=this.editor.storage.markdown.parser.parse(this.editor.options.content)},onCreate(){this.editor.options.content=this.editor.options.initialContent,delete this.editor.options.initialContent},addStorage:()=>({}),addExtensions(){return[u.configure({tight:this.options.tightLists,tightClass:this.options.tightListClass}),H.configure({transformPastedText:this.options.transformPastedText,transformCopiedText:this.options.transformCopiedText})]}})},565842:e=>{"use strict";e.s({default:()=>o}),e.i(131841);var t=e.i(968617);e.i(125492);var n=e.i(954647),r=e.i(691283);function i(e){var t;let{char:n,allowSpaces:i,allowToIncludeChar:a,allowedPrefixes:o,startOfLine:s,$position:l}=e,u=i&&!a,c=(0,r.escapeForRegEx)(n),d=new RegExp("\\s".concat(c,"$")),h=s?"^":"",p=a?"":c,f=u?RegExp("".concat(h).concat(c,".*?(?=\\s").concat(p,"|$)"),"gm"):RegExp("".concat(h,"(?:^)?").concat(c,"[^\\s").concat(p,"]*"),"gm"),m=(null==(t=l.nodeBefore)?void 0:t.isText)&&l.nodeBefore.text;if(!m)return null;let g=l.pos-m.length,y=Array.from(m.matchAll(f)).pop();if(!y||void 0===y.input||void 0===y.index)return null;let b=y.input.slice(Math.max(0,y.index-1),y.index),x=new RegExp("^[".concat(null==o?void 0:o.join(""),"\0]?$")).test(b);if(null!==o&&!x)return null;let w=g+y.index,k=w+y[0].length;return(u&&d.test(m.slice(k-1,k+1))&&(y[0]+=" ",k+=1),w<l.pos&&k>=l.pos)?{range:{from:w,to:k},query:y[0].slice(n.length),text:y[0]}:null}var a=new t.PluginKey("suggestion"),o=function(e){let r,{pluginKey:o=a,editor:s,char:l="@",allowSpaces:u=!1,allowToIncludeChar:c=!1,allowedPrefixes:d=[" "],startOfLine:h=!1,decorationTag:p="span",decorationClass:f="suggestion",decorationContent:m="",decorationEmptyClass:g="is-empty",command:y=()=>null,items:b=()=>[],render:x=()=>({}),allow:w=()=>!0,findSuggestionMatch:k=i}=e,S=null==x?void 0:x(),_=()=>{let e=s.state.selection.$anchor.pos,{top:t,right:n,bottom:r,left:i}=s.view.coordsAtPos(e);try{return new DOMRect(i,t,n-i,r-t)}catch(e){return null}},C=(e,t)=>t?()=>{let t=o.getState(s.state),n=null==t?void 0:t.decorationId,r=e.dom.querySelector('[data-decoration-id="'.concat(n,'"]'));return(null==r?void 0:r.getBoundingClientRect())||null}:_,A=new t.Plugin({key:o,view(){return{update:async(e,t)=>{var n,i,a,o,l,u,c;let d=null==(n=this.key)?void 0:n.getState(t),h=null==(i=this.key)?void 0:i.getState(e.state),p=d.active&&h.active&&d.range.from!==h.range.from,f=!d.active&&h.active,m=d.active&&!h.active,g=!f&&!m&&d.query!==h.query,x=f||p&&g,w=g||p,k=m||p&&g;if(!x&&!w&&!k)return;let _=k&&!x?d:h,A=e.dom.querySelector('[data-decoration-id="'.concat(_.decorationId,'"]'));r={editor:s,range:_.range,query:_.query,text:_.text,items:[],command:e=>y({editor:s,range:_.range,props:e}),decorationNode:A,clientRect:C(e,A)},x&&(null==(a=null==S?void 0:S.onBeforeStart)||a.call(S,r)),w&&(null==(o=null==S?void 0:S.onBeforeUpdate)||o.call(S,r)),(w||x)&&(r.items=await b({editor:s,query:_.query})),k&&(null==(l=null==S?void 0:S.onExit)||l.call(S,r)),w&&(null==(u=null==S?void 0:S.onUpdate)||u.call(S,r)),x&&(null==(c=null==S?void 0:S.onStart)||c.call(S,r))},destroy:()=>{var e;r&&(null==(e=null==S?void 0:S.onExit)||e.call(S,r))}}},state:{init:()=>({active:!1,range:{from:0,to:0},query:null,text:null,composing:!1}),apply(e,t,n,r){let{isEditable:i}=s,{composing:a}=s.view,{selection:p}=e,{empty:f,from:m}=p,g={...t},y=e.getMeta(o);if(y&&y.exit)return g.active=!1,g.decorationId=null,g.range={from:0,to:0},g.query=null,g.text=null,g;if(g.composing=a,i&&(f||s.view.composing)){(m<t.range.from||m>t.range.to)&&!a&&!t.composing&&(g.active=!1);let e=k({char:l,allowSpaces:u,allowToIncludeChar:c,allowedPrefixes:d,startOfLine:h,$position:p.$from}),n="id_".concat(Math.floor(0xffffffff*Math.random()));e&&w({editor:s,state:r,range:e.range,isActive:t.active})?(g.active=!0,g.decorationId=t.decorationId?t.decorationId:n,g.range=e.range,g.query=e.query,g.text=e.text):g.active=!1}else g.active=!1;return g.active||(g.decorationId=null,g.range={from:0,to:0},g.query=null,g.text=null),g}},props:{handleKeyDown(e,t){var n,i,a,l;let{active:u,range:c}=A.getState(e.state);if(!u)return!1;if("Escape"===t.key||"Esc"===t.key){let l=A.getState(e.state),u=null!=(n=null==r?void 0:r.decorationNode)?n:null,c=null!=u?u:(null==l?void 0:l.decorationId)?e.dom.querySelector('[data-decoration-id="'.concat(l.decorationId,'"]')):null;if(null==(i=null==S?void 0:S.onKeyDown)?void 0:i.call(S,{view:e,event:t,range:l.range}))return!0;let d={editor:s,range:l.range,query:l.query,text:l.text,items:[],command:e=>y({editor:s,range:l.range,props:e}),decorationNode:c,clientRect:c?()=>c.getBoundingClientRect()||null:null};return null==(a=null==S?void 0:S.onExit)||a.call(S,d),!function(e,t){var n;try{let t=o.getState(e.state),r=(null==t?void 0:t.decorationId)?e.dom.querySelector('[data-decoration-id="'.concat(t.decorationId,'"]')):null,i={editor:s,range:(null==t?void 0:t.range)||{from:0,to:0},query:(null==t?void 0:t.query)||null,text:(null==t?void 0:t.text)||null,items:[],command:e=>y({editor:s,range:(null==t?void 0:t.range)||{from:0,to:0},props:e}),decorationNode:r,clientRect:C(e,r)};null==(n=null==S?void 0:S.onExit)||n.call(S,i)}catch(e){}let r=e.state.tr.setMeta(t,{exit:!0});e.dispatch(r)}(e,o),!0}return(null==(l=null==S?void 0:S.onKeyDown)?void 0:l.call(S,{view:e,event:t,range:c}))||!1},decorations(e){let{active:t,range:r,decorationId:i,query:a}=A.getState(e);if(!t)return null;let o=!(null==a?void 0:a.length),s=[f];return o&&s.push(g),n.DecorationSet.create(e.doc,[n.Decoration.inline(r.from,r.to,{nodeName:p,class:s.join(" "),"data-decoration-id":i,"data-decoration-content":m})])}}});return A}},277037:e=>{"use strict";e.s({default:()=>s});var t=e.i(691283);e.i(922181);var n=e.i(490077),r=e.i(565842);e.i(131841);var i=e.i(968617);function a(e){return(e.options.suggestions.length?e.options.suggestions:[e.options.suggestion]).map(t=>(function(e){let{editor:t,overrideSuggestionOptions:n,extensionName:r,char:a="@"}=e;return{editor:t,char:a,pluginKey:new i.PluginKey,command:e=>{var t,n,i;let{editor:o,range:s,props:l}=e,u=o.view.state.selection.$to.nodeAfter;(null==(t=null==u?void 0:u.text)?void 0:t.startsWith(" "))&&(s.to+=1),o.chain().focus().insertContentAt(s,[{type:r,attrs:{...l,mentionSuggestionChar:a}},{type:"text",text:" "}]).run(),null==(i=null==(n=o.view.dom.ownerDocument.defaultView)?void 0:n.getSelection())||i.collapseToEnd()},allow:e=>{let{state:t,range:n}=e,i=t.doc.resolve(n.from),a=t.schema.nodes[r];return!!i.parent.type.contentMatch.matchType(a)},...n}})({editor:e.editor,overrideSuggestionOptions:t,extensionName:e.name,char:t.char}))}function o(e,t){let n=a(e),r=n.find(e=>e.char===t);return r||(n.length?n[0]:null)}var s=t.Node.create({name:"mention",priority:101,addOptions:()=>({HTMLAttributes:{},renderText(e){var t,n;let{node:r,suggestion:i}=e;return"".concat(null!=(t=null==i?void 0:i.char)?t:"@").concat(null!=(n=r.attrs.label)?n:r.attrs.id)},deleteTriggerWithBackspace:!1,renderHTML(e){var n,r;let{options:i,node:a,suggestion:o}=e;return["span",(0,t.mergeAttributes)(this.HTMLAttributes,i.HTMLAttributes),"".concat(null!=(n=null==o?void 0:o.char)?n:"@").concat(null!=(r=a.attrs.label)?r:a.attrs.id)]},suggestions:[],suggestion:{}}),group:"inline",inline:!0,selectable:!1,atom:!0,addAttributes:()=>({id:{default:null,parseHTML:e=>e.getAttribute("data-id"),renderHTML:e=>e.id?{"data-id":e.id}:{}},label:{default:null,parseHTML:e=>e.getAttribute("data-label"),renderHTML:e=>e.label?{"data-label":e.label}:{}},mentionSuggestionChar:{default:"@",parseHTML:e=>e.getAttribute("data-mention-suggestion-char"),renderHTML:e=>({"data-mention-suggestion-char":e.mentionSuggestionChar})}}),parseHTML(){return[{tag:'span[data-type="'.concat(this.name,'"]')}]},renderHTML(e){let{node:n,HTMLAttributes:r}=e,i=o(this,n.attrs.mentionSuggestionChar);if(void 0!==this.options.renderLabel)return console.warn("renderLabel is deprecated use renderText and renderHTML instead"),["span",(0,t.mergeAttributes)({"data-type":this.name},this.options.HTMLAttributes,r),this.options.renderLabel({options:this.options,node:n,suggestion:i})];let a={...this.options};a.HTMLAttributes=(0,t.mergeAttributes)({"data-type":this.name},this.options.HTMLAttributes,r);let s=this.options.renderHTML({options:a,node:n,suggestion:i});return"string"==typeof s?["span",(0,t.mergeAttributes)({"data-type":this.name},this.options.HTMLAttributes,r),s]:s},renderText(e){let{node:t}=e,n={options:this.options,node:t,suggestion:o(this,t.attrs.mentionSuggestionChar)};return void 0!==this.options.renderLabel?(console.warn("renderLabel is deprecated use renderText and renderHTML instead"),this.options.renderLabel(n)):this.options.renderText(n)},addKeyboardShortcuts(){return{Backspace:()=>this.editor.commands.command(e=>{let{tr:t,state:r}=e,i=!1,{selection:a}=r,{empty:o,anchor:s}=a;if(!o)return!1;let l=new n.Node,u=0;return r.doc.nodesBetween(s-1,s,(e,t)=>{if(e.type.name===this.name)return i=!0,l=e,u=t,!1}),i&&t.insertText(this.options.deleteTriggerWithBackspace?"":l.attrs.mentionSuggestionChar,u,u+l.nodeSize),i})}},addProseMirrorPlugins(){return a(this).map(r.default)}})},7751:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("book-open-text",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M16 12h2",key:"7q9ll5"}],["path",{d:"M16 8h2",key:"msurwy"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}],["path",{d:"M6 12h2",key:"32wvfc"}],["path",{d:"M6 8h2",key:"30oboj"}]])},736016:e=>{"use strict";e.s({BookOpenText:()=>t.default});var t=e.i(7751)},261658:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("clock-fading",[["path",{d:"M12 2a10 10 0 0 1 7.38 16.75",key:"175t95"}],["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["path",{d:"M2.5 8.875a10 10 0 0 0-.5 3",key:"1vce0s"}],["path",{d:"M2.83 16a10 10 0 0 0 2.43 3.4",key:"o3fkw4"}],["path",{d:"M4.636 5.235a10 10 0 0 1 .891-.857",key:"1szpfk"}],["path",{d:"M8.644 21.42a10 10 0 0 0 7.631-.38",key:"9yhvd4"}]])},136250:e=>{"use strict";e.s({ClockFading:()=>t.default});var t=e.i(261658)},770277:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("folder-search",[["path",{d:"M10.7 20H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v4.1",key:"1bw5m7"}],["path",{d:"m21 21-1.9-1.9",key:"1g2n9r"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}]])},59938:e=>{"use strict";e.s({FolderSearch:()=>t.default});var t=e.i(770277)},128260:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},579468:e=>{"use strict";e.s({Image:()=>t.default});var t=e.i(128260)},604198:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("message-square-quote",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}],["path",{d:"M14 13a2 2 0 0 0 2-2V9h-2",key:"zjz9hw"}],["path",{d:"M8 13a2 2 0 0 0 2-2V9H8",key:"14e02x"}]])},516555:e=>{"use strict";e.s({MessageSquareQuote:()=>t.default});var t=e.i(604198)},460478:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("pen-line",[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]])},765357:e=>{"use strict";e.s({PenLine:()=>t.default});var t=e.i(460478)},752039:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]])},359858:e=>{"use strict";e.s({Youtube:()=>t.default});var t=e.i(752039)},702461:e=>{"use strict";e.s({TOOL_MAP:()=>f,TOOL_MAP_BY_KEY:()=>m,getToolDisplayName:()=>y,getToolIcon:()=>g});var t=e.i(736016),n=e.i(136250),r=e.i(59938),i=e.i(502753),a=e.i(579468),o=e.i(471851),s=e.i(516555),l=e.i(765357),u=e.i(353745),c=e.i(359858),d=e.i(861689),h=e.i(720238),p=e.i(833856);let f={"Search Web":{id:"webSearch",label:"Search Web",toolType:"webSearch",description:"Look up information from across the web",icon:i.Globe},"Search Papers":{id:"academicSearch",label:"Search Papers",toolType:"academicSearch",description:"Find academic and scientific papers",icon:t.BookOpenText},"Search Workspace":{id:"librarySearch",label:"Search Workspace",toolType:"librarySearch",description:"Answers from content saved in your library",icon:r.FolderSearch},"Search YouTube":{id:"youtubeSearch",label:"Search YouTube",toolType:"youtubeSearch",description:"Search for videos on YouTube",icon:c.Youtube},"Search Google Drive":{id:"googleDriveSearch",label:"Search Google Drive",toolType:"googleDriveSearch",description:"Search your Google Drive files and documents",icon:d.default},"Search OneDrive":{id:"oneDriveSearch",label:"Search OneDrive",toolType:"oneDriveSearch",description:"Search your Microsoft OneDrive files and documents",icon:h.default},"Search SharePoint":{id:"sharePointSearch",label:"Search Share Point",toolType:"sharePointSearch",description:"Search your Microsoft SharePoint sites and documents",icon:p.default},"Edit Note":{id:"editNote",label:"Edit Note",toolType:"editNote",description:"Improve, rewrite, or format your note",icon:l.PenLine},"Complete Form":{id:"completeForm",label:"Complete Form",toolType:"completeForm",description:"Fill in forms quickly and accurately",icon:n.ClockFading},"Create Citation":{id:"createCitation",label:"Create Citation",toolType:"createCitation",description:"Generate properly formatted citations",icon:s.MessageSquareQuote},"Create Flashcards":{id:"flashcardGenerator",label:"Create Flashcards",toolType:"flashcardGenerator",description:"Turn content into study flashcards",icon:o.Layers2},Research:{id:"research",label:"Research",toolType:"research",description:"Finds answers by searching your library and the web",icon:u.Search},"Read Website":{id:"readWebsite",label:"Read Website",toolType:"readWebsite",description:"Extract content from web pages",icon:i.Globe},"Edit Quiz":{id:"editQuiz",label:"Edit Quiz",toolType:"editQuiz",description:"Create and edit quiz questions",icon:l.PenLine},"Create Image":{id:"imageGeneration",label:"Create Image",toolType:"imageGeneration",description:"Create images based on your request",icon:a.Image}},m={webSearch:f["Search Web"],academicSearch:f["Search Papers"],librarySearch:f["Search Workspace"],youtubeSearch:f["Search YouTube"],googleDriveSearch:f["Search Google Drive"],oneDriveSearch:f["Search OneDrive"],sharePointSearch:f["Search SharePoint"],editNote:f["Edit Note"],completeForm:f["Complete Form"],createCitation:f["Create Citation"],flashcardGenerator:f["Create Flashcards"],research:f.Research,readWebsite:f["Read Website"],editQuiz:f["Edit Quiz"],imageGeneration:f["Create Image"]},g=e=>m[e].icon,y=e=>m[e].label},766215:e=>{"use strict";function t(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}e.s({default:()=>t})},974523:e=>{"use strict";e.s({isElement:()=>n,isHTMLElement:()=>r,isShadowRoot:()=>i});var t=e.i(766215);function n(e){var n=(0,t.default)(e).Element;return e instanceof n||e instanceof Element}function r(e){var n=(0,t.default)(e).HTMLElement;return e instanceof n||e instanceof HTMLElement}function i(e){if("undefined"==typeof ShadowRoot)return!1;var n=(0,t.default)(e).ShadowRoot;return e instanceof n||e instanceof ShadowRoot}},493308:e=>{"use strict";e.s({max:()=>t,min:()=>n,round:()=>r});var t=Math.max,n=Math.min,r=Math.round},916296:e=>{"use strict";function t(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}e.s({default:()=>t})},487272:e=>{"use strict";e.s({default:()=>n});var t=e.i(916296);function n(){return!/^((?!chrome|android).)*safari/i.test((0,t.default)())}},175445:e=>{"use strict";e.s({default:()=>a});var t=e.i(974523),n=e.i(493308),r=e.i(766215),i=e.i(487272);function a(e,a,o){void 0===a&&(a=!1),void 0===o&&(o=!1);var s=e.getBoundingClientRect(),l=1,u=1;a&&(0,t.isHTMLElement)(e)&&(l=e.offsetWidth>0&&(0,n.round)(s.width)/e.offsetWidth||1,u=e.offsetHeight>0&&(0,n.round)(s.height)/e.offsetHeight||1);var c=((0,t.isElement)(e)?(0,r.default)(e):window).visualViewport,d=!(0,i.default)()&&o,h=(s.left+(d&&c?c.offsetLeft:0))/l,p=(s.top+(d&&c?c.offsetTop:0))/u,f=s.width/l,m=s.height/u;return{width:f,height:m,top:p,right:h+f,bottom:p+m,left:h,x:h,y:p}}},659140:e=>{"use strict";e.s({default:()=>n});var t=e.i(766215);function n(e){var n=(0,t.default)(e);return{scrollLeft:n.pageXOffset,scrollTop:n.pageYOffset}}},445170:e=>{"use strict";function t(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}e.s({default:()=>t})},615071:e=>{"use strict";e.s({default:()=>a});var t=e.i(659140),n=e.i(766215),r=e.i(974523),i=e.i(445170);function a(e){return e!==(0,n.default)(e)&&(0,r.isHTMLElement)(e)?(0,i.default)(e):(0,t.default)(e)}},675202:e=>{"use strict";function t(e){return e?(e.nodeName||"").toLowerCase():null}e.s({default:()=>t})},900627:e=>{"use strict";e.s({default:()=>n});var t=e.i(974523);function n(e){return(((0,t.isElement)(e)?e.ownerDocument:e.document)||window.document).documentElement}},311249:e=>{"use strict";e.s({default:()=>i});var t=e.i(175445),n=e.i(900627),r=e.i(659140);function i(e){return(0,t.default)((0,n.default)(e)).left+(0,r.default)(e).scrollLeft}},917608:e=>{"use strict";e.s({default:()=>n});var t=e.i(766215);function n(e){return(0,t.default)(e).getComputedStyle(e)}},524519:e=>{"use strict";e.s({default:()=>n});var t=e.i(917608);function n(e){var n=(0,t.default)(e),r=n.overflow,i=n.overflowX,a=n.overflowY;return/auto|scroll|overlay|hidden/.test(r+a+i)}},48146:e=>{"use strict";e.s({default:()=>u});var t=e.i(175445),n=e.i(615071),r=e.i(675202),i=e.i(974523),a=e.i(311249),o=e.i(900627),s=e.i(524519),l=e.i(493308);function u(e,u,c){void 0===c&&(c=!1);var d,h,p,f=(0,i.isHTMLElement)(u),m=(0,i.isHTMLElement)(u)&&(d=u.getBoundingClientRect(),h=(0,l.round)(d.width)/u.offsetWidth||1,p=(0,l.round)(d.height)/u.offsetHeight||1,1!==h||1!==p),g=(0,o.default)(u),y=(0,t.default)(e,m,c),b={scrollLeft:0,scrollTop:0},x={x:0,y:0};return(f||!f&&!c)&&(("body"!==(0,r.default)(u)||(0,s.default)(g))&&(b=(0,n.default)(u)),(0,i.isHTMLElement)(u)?(x=(0,t.default)(u,!0),x.x+=u.clientLeft,x.y+=u.clientTop):g&&(x.x=(0,a.default)(g))),{x:y.left+b.scrollLeft-x.x,y:y.top+b.scrollTop-x.y,width:y.width,height:y.height}}},205537:e=>{"use strict";e.s({default:()=>n});var t=e.i(175445);function n(e){var n=(0,t.default)(e),r=e.offsetWidth,i=e.offsetHeight;return 1>=Math.abs(n.width-r)&&(r=n.width),1>=Math.abs(n.height-i)&&(i=n.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:i}}},359261:e=>{"use strict";e.s({default:()=>i});var t=e.i(675202),n=e.i(900627),r=e.i(974523);function i(e){return"html"===(0,t.default)(e)?e:e.assignedSlot||e.parentNode||((0,r.isShadowRoot)(e)?e.host:null)||(0,n.default)(e)}},820487:e=>{"use strict";e.s({default:()=>function e(a){return["html","body","#document"].indexOf((0,r.default)(a))>=0?a.ownerDocument.body:(0,i.isHTMLElement)(a)&&(0,n.default)(a)?a:e((0,t.default)(a))}});var t=e.i(359261),n=e.i(524519),r=e.i(675202),i=e.i(974523)},949704:e=>{"use strict";e.s({default:()=>function e(a,o){void 0===o&&(o=[]);var s,l=(0,t.default)(a),u=l===(null==(s=a.ownerDocument)?void 0:s.body),c=(0,r.default)(l),d=u?[c].concat(c.visualViewport||[],(0,i.default)(l)?l:[]):l,h=o.concat(d);return u?h:h.concat(e((0,n.default)(d)))}});var t=e.i(820487),n=e.i(359261),r=e.i(766215),i=e.i(524519)},11573:e=>{"use strict";e.s({default:()=>n});var t=e.i(675202);function n(e){return["table","td","th"].indexOf((0,t.default)(e))>=0}},214539:e=>{"use strict";e.s({default:()=>u});var t=e.i(766215),n=e.i(675202),r=e.i(917608),i=e.i(974523),a=e.i(11573),o=e.i(359261),s=e.i(916296);function l(e){return(0,i.isHTMLElement)(e)&&"fixed"!==(0,r.default)(e).position?e.offsetParent:null}function u(e){for(var u=(0,t.default)(e),c=l(e);c&&(0,a.default)(c)&&"static"===(0,r.default)(c).position;)c=l(c);return c&&("html"===(0,n.default)(c)||"body"===(0,n.default)(c)&&"static"===(0,r.default)(c).position)?u:c||function(e){var t=/firefox/i.test((0,s.default)());if(/Trident/i.test((0,s.default)())&&(0,i.isHTMLElement)(e)&&"fixed"===(0,r.default)(e).position)return null;var a=(0,o.default)(e);for((0,i.isShadowRoot)(a)&&(a=a.host);(0,i.isHTMLElement)(a)&&0>["html","body"].indexOf((0,n.default)(a));){var l=(0,r.default)(a);if("none"!==l.transform||"none"!==l.perspective||"paint"===l.contain||-1!==["transform","perspective"].indexOf(l.willChange)||t&&"filter"===l.willChange||t&&l.filter&&"none"!==l.filter)return a;a=a.parentNode}return null}(e)||u}},407078:e=>{"use strict";e.s({auto:()=>a,basePlacements:()=>o,bottom:()=>n,clippingParents:()=>u,end:()=>l,left:()=>i,modifierPhases:()=>m,placements:()=>f,popper:()=>d,reference:()=>h,right:()=>r,start:()=>s,top:()=>t,variationPlacements:()=>p,viewport:()=>c});var t="top",n="bottom",r="right",i="left",a="auto",o=[t,n,r,i],s="start",l="end",u="clippingParents",c="viewport",d="popper",h="reference",p=o.reduce(function(e,t){return e.concat([t+"-"+s,t+"-"+l])},[]),f=[].concat(o,[a]).reduce(function(e,t){return e.concat([t,t+"-"+s,t+"-"+l])},[]),m=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"]},675527:e=>{"use strict";e.s({default:()=>n});var t=e.i(407078);function n(e){var n,r,i,a=(n=new Map,r=new Set,i=[],e.forEach(function(e){n.set(e.name,e)}),e.forEach(function(e){r.has(e.name)||function e(t){r.add(t.name),[].concat(t.requires||[],t.requiresIfExists||[]).forEach(function(t){if(!r.has(t)){var i=n.get(t);i&&e(i)}}),i.push(t)}(e)}),i);return t.modifierPhases.reduce(function(e,t){return e.concat(a.filter(function(e){return e.phase===t}))},[])}},472034:e=>{"use strict";function t(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}e.s({default:()=>t})},267008:e=>{"use strict";function t(e){var t=e.reduce(function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e},{});return Object.keys(t).map(function(e){return t[e]})}e.s({default:()=>t})},741907:e=>{"use strict";e.s({popperGenerator:()=>d});var t=e.i(48146),n=e.i(205537),r=e.i(949704),i=e.i(214539),a=e.i(675527),o=e.i(472034),s=e.i(267008),l=e.i(974523),u={placement:"bottom",modifiers:[],strategy:"absolute"};function c(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(e){return!(e&&"function"==typeof e.getBoundingClientRect)})}function d(e){void 0===e&&(e={});var d=e,h=d.defaultModifiers,p=void 0===h?[]:h,f=d.defaultOptions,m=void 0===f?u:f;return function(e,d,h){void 0===h&&(h=m);var f={placement:"bottom",orderedModifiers:[],options:Object.assign({},u,m),modifiersData:{},elements:{reference:e,popper:d},attributes:{},styles:{}},g=[],y=!1,b={state:f,setOptions:function(t){var n="function"==typeof t?t(f.options):t;x(),f.options=Object.assign({},m,f.options,n),f.scrollParents={reference:(0,l.isElement)(e)?(0,r.default)(e):e.contextElement?(0,r.default)(e.contextElement):[],popper:(0,r.default)(d)};var i=(0,a.default)((0,s.default)([].concat(p,f.options.modifiers)));return f.orderedModifiers=i.filter(function(e){return e.enabled}),f.orderedModifiers.forEach(function(e){var t=e.name,n=e.options,r=e.effect;if("function"==typeof r){var i=r({state:f,name:t,instance:b,options:void 0===n?{}:n});g.push(i||function(){})}}),b.update()},forceUpdate:function(){if(!y){var e=f.elements,r=e.reference,a=e.popper;if(c(r,a)){f.rects={reference:(0,t.default)(r,(0,i.default)(a),"fixed"===f.options.strategy),popper:(0,n.default)(a)},f.reset=!1,f.placement=f.options.placement,f.orderedModifiers.forEach(function(e){return f.modifiersData[e.name]=Object.assign({},e.data)});for(var o=0;o<f.orderedModifiers.length;o++){if(!0===f.reset){f.reset=!1,o=-1;continue}var s=f.orderedModifiers[o],l=s.fn,u=s.options,d=void 0===u?{}:u,h=s.name;"function"==typeof l&&(f=l({state:f,options:d,name:h,instance:b})||f)}}}},update:(0,o.default)(function(){return new Promise(function(e){b.forceUpdate(),e(f)})}),destroy:function(){x(),y=!0}};if(!c(e,d))return b;function x(){g.forEach(function(e){return e()}),g=[]}return b.setOptions(h).then(function(e){!y&&h.onFirstUpdate&&h.onFirstUpdate(e)}),b}}},126433:e=>{"use strict";e.s({default:()=>r});var t=e.i(766215),n={passive:!0};let r={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var r=e.state,i=e.instance,a=e.options,o=a.scroll,s=void 0===o||o,l=a.resize,u=void 0===l||l,c=(0,t.default)(r.elements.popper),d=[].concat(r.scrollParents.reference,r.scrollParents.popper);return s&&d.forEach(function(e){e.addEventListener("scroll",i.update,n)}),u&&c.addEventListener("resize",i.update,n),function(){s&&d.forEach(function(e){e.removeEventListener("scroll",i.update,n)}),u&&c.removeEventListener("resize",i.update,n)}},data:{}}},988982:e=>{"use strict";function t(e){return e.split("-")[0]}e.s({default:()=>t})},871709:e=>{"use strict";function t(e){return e.split("-")[1]}e.s({default:()=>t})},590831:e=>{"use strict";function t(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}e.s({default:()=>t})},695931:e=>{"use strict";e.s({default:()=>a});var t=e.i(988982),n=e.i(871709),r=e.i(590831),i=e.i(407078);function a(e){var a,o=e.reference,s=e.element,l=e.placement,u=l?(0,t.default)(l):null,c=l?(0,n.default)(l):null,d=o.x+o.width/2-s.width/2,h=o.y+o.height/2-s.height/2;switch(u){case i.top:a={x:d,y:o.y-s.height};break;case i.bottom:a={x:d,y:o.y+o.height};break;case i.right:a={x:o.x+o.width,y:h};break;case i.left:a={x:o.x-s.width,y:h};break;default:a={x:o.x,y:o.y}}var p=u?(0,r.default)(u):null;if(null!=p){var f="y"===p?"height":"width";switch(c){case i.start:a[p]=a[p]-(o[f]/2-s[f]/2);break;case i.end:a[p]=a[p]+(o[f]/2-s[f]/2)}}return a}},286961:e=>{"use strict";e.s({default:()=>n});var t=e.i(695931);let n={name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var n=e.state,r=e.name;n.modifiersData[r]=(0,t.default)({reference:n.rects.reference,element:n.rects.popper,strategy:"absolute",placement:n.placement})},data:{}}},118957:e=>{"use strict";e.s({default:()=>d});var t=e.i(407078),n=e.i(214539),r=e.i(766215),i=e.i(900627),a=e.i(917608),o=e.i(988982),s=e.i(871709),l=e.i(493308),u={top:"auto",right:"auto",bottom:"auto",left:"auto"};function c(e){var o,s,c,d,h,p,f,m=e.popper,g=e.popperRect,y=e.placement,b=e.variation,x=e.offsets,w=e.position,k=e.gpuAcceleration,S=e.adaptive,_=e.roundOffsets,C=e.isFixed,A=x.x,E=void 0===A?0:A,T=x.y,M=void 0===T?0:T,I="function"==typeof _?_({x:E,y:M}):{x:E,y:M};E=I.x,M=I.y;var N=x.hasOwnProperty("x"),D=x.hasOwnProperty("y"),P=t.left,R=t.top,O=window;if(S){var j=(0,n.default)(m),F="clientHeight",L="clientWidth";j===(0,r.default)(m)&&(j=(0,i.default)(m),"static"!==(0,a.default)(j).position&&"absolute"===w&&(F="scrollHeight",L="scrollWidth")),(y===t.top||(y===t.left||y===t.right)&&b===t.end)&&(R=t.bottom,M-=(C&&j===O&&O.visualViewport?O.visualViewport.height:j[F])-g.height,M*=k?1:-1),(y===t.left||(y===t.top||y===t.bottom)&&b===t.end)&&(P=t.right,E-=(C&&j===O&&O.visualViewport?O.visualViewport.width:j[L])-g.width,E*=k?1:-1)}var z=Object.assign({position:w},S&&u),B=!0===_?(o={x:E,y:M},s=(0,r.default)(m),c=o.x,d=o.y,h=s.devicePixelRatio||1,{x:(0,l.round)(c*h)/h||0,y:(0,l.round)(d*h)/h||0}):{x:E,y:M};return(E=B.x,M=B.y,k)?Object.assign({},z,((f={})[R]=D?"0":"",f[P]=N?"0":"",f.transform=1>=(O.devicePixelRatio||1)?"translate("+E+"px, "+M+"px)":"translate3d("+E+"px, "+M+"px, 0)",f)):Object.assign({},z,((p={})[R]=D?M+"px":"",p[P]=N?E+"px":"",p.transform="",p))}let d={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=n.adaptive,a=n.roundOffsets,l=void 0===a||a,u={placement:(0,o.default)(t.placement),variation:(0,s.default)(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:void 0===r||r,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,c(Object.assign({},u,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:void 0===i||i,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,c(Object.assign({},u,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}}},943862:e=>{"use strict";e.s({default:()=>r});var t=e.i(675202),n=e.i(974523);let r={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var r=e.state;Object.keys(r.elements).forEach(function(e){var i=r.styles[e]||{},a=r.attributes[e]||{},o=r.elements[e];(0,n.isHTMLElement)(o)&&(0,t.default)(o)&&(Object.assign(o.style,i),Object.keys(a).forEach(function(e){var t=a[e];!1===t?o.removeAttribute(e):o.setAttribute(e,!0===t?"":t)}))})},effect:function(e){var r=e.state,i={popper:{position:r.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(r.elements.popper.style,i.popper),r.styles=i,r.elements.arrow&&Object.assign(r.elements.arrow.style,i.arrow),function(){Object.keys(r.elements).forEach(function(e){var a=r.elements[e],o=r.attributes[e]||{},s=Object.keys(r.styles.hasOwnProperty(e)?r.styles[e]:i[e]).reduce(function(e,t){return e[t]="",e},{});(0,n.isHTMLElement)(a)&&(0,t.default)(a)&&(Object.assign(a.style,s),Object.keys(o).forEach(function(e){a.removeAttribute(e)}))})}},requires:["computeStyles"]}},597158:e=>{"use strict";e.s({default:()=>r});var t=e.i(988982),n=e.i(407078);let r={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var r=e.state,i=e.options,a=e.name,o=i.offset,s=void 0===o?[0,0]:o,l=n.placements.reduce(function(e,i){var a,o,l,u,c,d;return e[i]=(a=r.rects,o=(0,t.default)(i),l=[n.left,n.top].indexOf(o)>=0?-1:1,c=(u="function"==typeof s?s(Object.assign({},a,{placement:i})):s)[0],d=u[1],c=c||0,d=(d||0)*l,[n.left,n.right].indexOf(o)>=0?{x:d,y:c}:{x:c,y:d}),e},{}),u=l[r.placement],c=u.x,d=u.y;null!=r.modifiersData.popperOffsets&&(r.modifiersData.popperOffsets.x+=c,r.modifiersData.popperOffsets.y+=d),r.modifiersData[a]=l}}},52855:e=>{"use strict";e.s({default:()=>n});var t={left:"right",right:"left",bottom:"top",top:"bottom"};function n(e){return e.replace(/left|right|bottom|top/g,function(e){return t[e]})}},391544:e=>{"use strict";e.s({default:()=>n});var t={start:"end",end:"start"};function n(e){return e.replace(/start|end/g,function(e){return t[e]})}},526287:e=>{"use strict";e.s({default:()=>a});var t=e.i(766215),n=e.i(900627),r=e.i(311249),i=e.i(487272);function a(e,a){var o=(0,t.default)(e),s=(0,n.default)(e),l=o.visualViewport,u=s.clientWidth,c=s.clientHeight,d=0,h=0;if(l){u=l.width,c=l.height;var p=(0,i.default)();(p||!p&&"fixed"===a)&&(d=l.offsetLeft,h=l.offsetTop)}return{width:u,height:c,x:d+(0,r.default)(e),y:h}}},562615:e=>{"use strict";e.s({default:()=>o});var t=e.i(900627),n=e.i(917608),r=e.i(311249),i=e.i(659140),a=e.i(493308);function o(e){var o,s=(0,t.default)(e),l=(0,i.default)(e),u=null==(o=e.ownerDocument)?void 0:o.body,c=(0,a.max)(s.scrollWidth,s.clientWidth,u?u.scrollWidth:0,u?u.clientWidth:0),d=(0,a.max)(s.scrollHeight,s.clientHeight,u?u.scrollHeight:0,u?u.clientHeight:0),h=-l.scrollLeft+(0,r.default)(e),p=-l.scrollTop;return"rtl"===(0,n.default)(u||s).direction&&(h+=(0,a.max)(s.clientWidth,u?u.clientWidth:0)-c),{width:c,height:d,x:h,y:p}}},410187:e=>{"use strict";e.s({default:()=>n});var t=e.i(974523);function n(e,n){var r=n.getRootNode&&n.getRootNode();if(e.contains(n))return!0;if(r&&(0,t.isShadowRoot)(r)){var i=n;do{if(i&&e.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}},436311:e=>{"use strict";function t(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}e.s({default:()=>t})},184312:e=>{"use strict";e.s({default:()=>g});var t=e.i(407078),n=e.i(526287),r=e.i(562615),i=e.i(949704),a=e.i(214539),o=e.i(900627),s=e.i(917608),l=e.i(974523),u=e.i(175445),c=e.i(359261),d=e.i(410187),h=e.i(675202),p=e.i(436311),f=e.i(493308);function m(e,i,a){var s;return i===t.viewport?(0,p.default)((0,n.default)(e,a)):(0,l.isElement)(i)?((s=(0,u.default)(i,!1,"fixed"===a)).top=s.top+i.clientTop,s.left=s.left+i.clientLeft,s.bottom=s.top+i.clientHeight,s.right=s.left+i.clientWidth,s.width=i.clientWidth,s.height=i.clientHeight,s.x=s.left,s.y=s.top,s):(0,p.default)((0,r.default)((0,o.default)(e)))}function g(e,t,n,r){var o,u,p=[].concat("clippingParents"===t?(o=(0,i.default)((0,c.default)(e)),u=["absolute","fixed"].indexOf((0,s.default)(e).position)>=0&&(0,l.isHTMLElement)(e)?(0,a.default)(e):e,(0,l.isElement)(u)?o.filter(function(e){return(0,l.isElement)(e)&&(0,d.default)(e,u)&&"body"!==(0,h.default)(e)}):[]):[].concat(t),[n]),g=p[0],y=p.reduce(function(t,n){var i=m(e,n,r);return t.top=(0,f.max)(i.top,t.top),t.right=(0,f.min)(i.right,t.right),t.bottom=(0,f.min)(i.bottom,t.bottom),t.left=(0,f.max)(i.left,t.left),t},m(e,g,r));return y.width=y.right-y.left,y.height=y.bottom-y.top,y.x=y.left,y.y=y.top,y}},257185:e=>{"use strict";function t(){return{top:0,right:0,bottom:0,left:0}}e.s({default:()=>t})},755625:e=>{"use strict";e.s({default:()=>n});var t=e.i(257185);function n(e){return Object.assign({},(0,t.default)(),e)}},139251:e=>{"use strict";function t(e,t){return t.reduce(function(t,n){return t[n]=e,t},{})}e.s({default:()=>t})},161708:e=>{"use strict";e.s({default:()=>c});var t=e.i(184312),n=e.i(900627),r=e.i(175445),i=e.i(695931),a=e.i(436311),o=e.i(407078),s=e.i(974523),l=e.i(755625),u=e.i(139251);function c(e,c){void 0===c&&(c={});var d=c,h=d.placement,p=void 0===h?e.placement:h,f=d.strategy,m=void 0===f?e.strategy:f,g=d.boundary,y=void 0===g?o.clippingParents:g,b=d.rootBoundary,x=void 0===b?o.viewport:b,w=d.elementContext,k=void 0===w?o.popper:w,S=d.altBoundary,_=d.padding,C=void 0===_?0:_,A=(0,l.default)("number"!=typeof C?C:(0,u.default)(C,o.basePlacements)),E=k===o.popper?o.reference:o.popper,T=e.rects.popper,M=e.elements[void 0!==S&&S?E:k],I=(0,t.default)((0,s.isElement)(M)?M:M.contextElement||(0,n.default)(e.elements.popper),y,x,m),N=(0,r.default)(e.elements.reference),D=(0,i.default)({reference:N,element:T,strategy:"absolute",placement:p}),P=(0,a.default)(Object.assign({},T,D)),R=k===o.popper?P:N,O={top:I.top-R.top+A.top,bottom:R.bottom-I.bottom+A.bottom,left:I.left-R.left+A.left,right:R.right-I.right+A.right},j=e.modifiersData.offset;if(k===o.popper&&j){var F=j[p];Object.keys(O).forEach(function(e){var t=[o.right,o.bottom].indexOf(e)>=0?1:-1,n=[o.top,o.bottom].indexOf(e)>=0?"y":"x";O[e]+=F[n]*t})}return O}},676681:e=>{"use strict";e.s({default:()=>a});var t=e.i(871709),n=e.i(407078),r=e.i(161708),i=e.i(988982);function a(e,a){void 0===a&&(a={});var o=a,s=o.placement,l=o.boundary,u=o.rootBoundary,c=o.padding,d=o.flipVariations,h=o.allowedAutoPlacements,p=void 0===h?n.placements:h,f=(0,t.default)(s),m=f?d?n.variationPlacements:n.variationPlacements.filter(function(e){return(0,t.default)(e)===f}):n.basePlacements,g=m.filter(function(e){return p.indexOf(e)>=0});0===g.length&&(g=m);var y=g.reduce(function(t,n){return t[n]=(0,r.default)(e,{placement:n,boundary:l,rootBoundary:u,padding:c})[(0,i.default)(n)],t},{});return Object.keys(y).sort(function(e,t){return y[e]-y[t]})}},762740:e=>{"use strict";e.s({default:()=>l});var t=e.i(52855),n=e.i(988982),r=e.i(391544),i=e.i(161708),a=e.i(676681),o=e.i(407078),s=e.i(871709);let l={name:"flip",enabled:!0,phase:"main",fn:function(e){var l=e.state,u=e.options,c=e.name;if(!l.modifiersData[c]._skip){for(var d=u.mainAxis,h=void 0===d||d,p=u.altAxis,f=void 0===p||p,m=u.fallbackPlacements,g=u.padding,y=u.boundary,b=u.rootBoundary,x=u.altBoundary,w=u.flipVariations,k=void 0===w||w,S=u.allowedAutoPlacements,_=l.options.placement,C=(0,n.default)(_)===_,A=m||(C||!k?[(0,t.default)(_)]:function(e){if((0,n.default)(e)===o.auto)return[];var i=(0,t.default)(e);return[(0,r.default)(e),i,(0,r.default)(i)]}(_)),E=[_].concat(A).reduce(function(e,t){return e.concat((0,n.default)(t)===o.auto?(0,a.default)(l,{placement:t,boundary:y,rootBoundary:b,padding:g,flipVariations:k,allowedAutoPlacements:S}):t)},[]),T=l.rects.reference,M=l.rects.popper,I=new Map,N=!0,D=E[0],P=0;P<E.length;P++){var R=E[P],O=(0,n.default)(R),j=(0,s.default)(R)===o.start,F=[o.top,o.bottom].indexOf(O)>=0,L=F?"width":"height",z=(0,i.default)(l,{placement:R,boundary:y,rootBoundary:b,altBoundary:x,padding:g}),B=F?j?o.right:o.left:j?o.bottom:o.top;T[L]>M[L]&&(B=(0,t.default)(B));var U=(0,t.default)(B),H=[];if(h&&H.push(z[O]<=0),f&&H.push(z[B]<=0,z[U]<=0),H.every(function(e){return e})){D=R,N=!1;break}I.set(R,H)}if(N)for(var W=k?3:1,V=function(e){var t=E.find(function(t){var n=I.get(t);if(n)return n.slice(0,e).every(function(e){return e})});if(t)return D=t,"break"},q=W;q>0&&"break"!==V(q);q--);l.placement!==D&&(l.modifiersData[c]._skip=!0,l.placement=D,l.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}}},894404:e=>{"use strict";function t(e){return"x"===e?"y":"x"}e.s({default:()=>t})},829080:e=>{"use strict";e.s({within:()=>n,withinMaxClamp:()=>r});var t=e.i(493308);function n(e,n,r){return(0,t.max)(e,(0,t.min)(n,r))}function r(e,t,r){var i=n(e,t,r);return i>r?r:i}},882314:e=>{"use strict";e.s({default:()=>h});var t=e.i(407078),n=e.i(988982),r=e.i(590831),i=e.i(894404),a=e.i(829080),o=e.i(205537),s=e.i(214539),l=e.i(161708),u=e.i(871709),c=e.i(257185),d=e.i(493308);let h={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var h=e.state,p=e.options,f=e.name,m=p.mainAxis,g=p.altAxis,y=p.boundary,b=p.rootBoundary,x=p.altBoundary,w=p.padding,k=p.tether,S=void 0===k||k,_=p.tetherOffset,C=void 0===_?0:_,A=(0,l.default)(h,{boundary:y,rootBoundary:b,padding:w,altBoundary:x}),E=(0,n.default)(h.placement),T=(0,u.default)(h.placement),M=!T,I=(0,r.default)(E),N=(0,i.default)(I),D=h.modifiersData.popperOffsets,P=h.rects.reference,R=h.rects.popper,O="function"==typeof C?C(Object.assign({},h.rects,{placement:h.placement})):C,j="number"==typeof O?{mainAxis:O,altAxis:O}:Object.assign({mainAxis:0,altAxis:0},O),F=h.modifiersData.offset?h.modifiersData.offset[h.placement]:null,L={x:0,y:0};if(D){if(void 0===m||m){var z,B="y"===I?t.top:t.left,U="y"===I?t.bottom:t.right,H="y"===I?"height":"width",W=D[I],V=W+A[B],q=W-A[U],G=S?-R[H]/2:0,$=T===t.start?P[H]:R[H],K=T===t.start?-R[H]:-P[H],Y=h.elements.arrow,X=S&&Y?(0,o.default)(Y):{width:0,height:0},Z=h.modifiersData["arrow#persistent"]?h.modifiersData["arrow#persistent"].padding:(0,c.default)(),J=Z[B],Q=Z[U],ee=(0,a.within)(0,P[H],X[H]),et=M?P[H]/2-G-ee-J-j.mainAxis:$-ee-J-j.mainAxis,en=M?-P[H]/2+G+ee+Q+j.mainAxis:K+ee+Q+j.mainAxis,er=h.elements.arrow&&(0,s.default)(h.elements.arrow),ei=er?"y"===I?er.clientTop||0:er.clientLeft||0:0,ea=null!=(z=null==F?void 0:F[I])?z:0,eo=(0,a.within)(S?(0,d.min)(V,W+et-ea-ei):V,W,S?(0,d.max)(q,W+en-ea):q);D[I]=eo,L[I]=eo-W}if(void 0!==g&&g){var es,el="x"===I?t.top:t.left,eu="x"===I?t.bottom:t.right,ec=D[N],ed="y"===N?"height":"width",eh=ec+A[el],ep=ec-A[eu],ef=-1!==[t.top,t.left].indexOf(E),em=null!=(es=null==F?void 0:F[N])?es:0,eg=ef?eh:ec-P[ed]-R[ed]-em+j.altAxis,ev=ef?ec+P[ed]+R[ed]-em-j.altAxis:ep,ey=S&&ef?(0,a.withinMaxClamp)(eg,ec,ev):(0,a.within)(S?eg:eh,ec,S?ev:ep);D[N]=ey,L[N]=ey-ec}h.modifiersData[f]=L}},requiresIfExists:["offset"]}},212659:e=>{"use strict";e.s({default:()=>c});var t=e.i(988982),n=e.i(205537),r=e.i(410187),i=e.i(214539),a=e.i(590831),o=e.i(829080),s=e.i(755625),l=e.i(139251),u=e.i(407078);let c={name:"arrow",enabled:!0,phase:"main",fn:function(e){var r,c=e.state,d=e.name,h=e.options,p=c.elements.arrow,f=c.modifiersData.popperOffsets,m=(0,t.default)(c.placement),g=(0,a.default)(m),y=[u.left,u.right].indexOf(m)>=0?"height":"width";if(p&&f){var b,x=(b=h.padding,b="function"==typeof b?b(Object.assign({},c.rects,{placement:c.placement})):b,(0,s.default)("number"!=typeof b?b:(0,l.default)(b,u.basePlacements))),w=(0,n.default)(p),k="y"===g?u.top:u.left,S="y"===g?u.bottom:u.right,_=c.rects.reference[y]+c.rects.reference[g]-f[g]-c.rects.popper[y],C=f[g]-c.rects.reference[g],A=(0,i.default)(p),E=A?"y"===g?A.clientHeight||0:A.clientWidth||0:0,T=x[k],M=E-w[y]-x[S],I=E/2-w[y]/2+(_/2-C/2),N=(0,o.within)(T,I,M);c.modifiersData[d]=((r={})[g]=N,r.centerOffset=N-I,r)}},effect:function(e){var t=e.state,n=e.options.element,i=void 0===n?"[data-popper-arrow]":n;if(null!=i)("string"!=typeof i||(i=t.elements.popper.querySelector(i)))&&(0,r.default)(t.elements.popper,i)&&(t.elements.arrow=i)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]}},317688:e=>{"use strict";e.s({default:()=>a});var t=e.i(407078),n=e.i(161708);function r(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function i(e){return[t.top,t.right,t.bottom,t.left].some(function(t){return e[t]>=0})}let a={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,a=e.name,o=t.rects.reference,s=t.rects.popper,l=t.modifiersData.preventOverflow,u=(0,n.default)(t,{elementContext:"reference"}),c=(0,n.default)(t,{altBoundary:!0}),d=r(u,o),h=r(c,s,l),p=i(d),f=i(h);t.modifiersData[a]={referenceClippingOffsets:d,popperEscapeOffsets:h,isReferenceHidden:p,hasPopperEscaped:f},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":p,"data-popper-escaped":f})}}},636171:e=>{"use strict";e.s({createPopper:()=>h});var t=e.i(741907),n=e.i(126433),r=e.i(286961),i=e.i(118957),a=e.i(943862),o=e.i(597158),s=e.i(762740),l=e.i(882314),u=e.i(212659),c=e.i(317688),d=[n.default,r.default,i.default,a.default,o.default,s.default,l.default,u.default,c.default],h=(0,t.popperGenerator)({defaultModifiers:d})},714841:e=>{"use strict";e.s({applyStyles:()=>t.default});var t=e.i(943862)},291495:e=>{"use strict";e.s({default:()=>H});var t=e.i(636171),n=e.i(714841),r="tippy-content",i="tippy-arrow",a="tippy-svg-arrow",o={passive:!0,capture:!0},s=function(){return document.body};function l(e,t,n){if(Array.isArray(e)){var r=e[t];return null==r?Array.isArray(n)?n[t]:n:r}return e}function u(e,t){var n=({}).toString.call(e);return 0===n.indexOf("[object")&&n.indexOf(t+"]")>-1}function c(e,t){return"function"==typeof e?e.apply(void 0,t):e}function d(e,t){var n;return 0===t?e:function(r){clearTimeout(n),n=setTimeout(function(){e(r)},t)}}function h(e){return[].concat(e)}function p(e,t){-1===e.indexOf(t)&&e.push(t)}function f(e){return[].slice.call(e)}function m(e){return Object.keys(e).reduce(function(t,n){return void 0!==e[n]&&(t[n]=e[n]),t},{})}function g(){return document.createElement("div")}function y(e){return["Element","Fragment"].some(function(t){return u(e,t)})}function b(e,t){e.forEach(function(e){e&&(e.style.transitionDuration=t+"ms")})}function x(e,t){e.forEach(function(e){e&&e.setAttribute("data-state",t)})}function w(e,t,n){var r=t+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(t){e[r](t,n)})}function k(e,t){for(var n,r=t;r;){if(e.contains(r))return!0;r=null==r.getRootNode||null==(n=r.getRootNode())?void 0:n.host}return!1}var S={isTouch:!1},_=0;function C(){!S.isTouch&&(S.isTouch=!0,window.performance&&document.addEventListener("mousemove",A))}function A(){var e=performance.now();e-_<20&&(S.isTouch=!1,document.removeEventListener("mousemove",A)),_=e}function E(){var e=document.activeElement;if(e&&e._tippy&&e._tippy.reference===e){var t=e._tippy;e.blur&&!t.state.isVisible&&e.blur()}}var T="undefined"!=typeof window&&"undefined"!=typeof document&&!!window.msCrypto,M=Object.assign({appendTo:s,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},{animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},{allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999}),I=Object.keys(M);function N(e){var t=(e.plugins||[]).reduce(function(t,n){var r,i=n.name,a=n.defaultValue;return i&&(t[i]=void 0!==e[i]?e[i]:null!=(r=M[i])?r:a),t},{});return Object.assign({},e,t)}function D(e,t){var n,r=Object.assign({},t,{content:c(t.content,[e])},t.ignoreAttributes?{}:((n=t.plugins)?Object.keys(N(Object.assign({},M,{plugins:n}))):I).reduce(function(t,n){var r=(e.getAttribute("data-tippy-"+n)||"").trim();if(!r)return t;if("content"===n)t[n]=r;else try{t[n]=JSON.parse(r)}catch(e){t[n]=r}return t},{}));return r.aria=Object.assign({},M.aria,r.aria),r.aria={expanded:"auto"===r.aria.expanded?t.interactive:r.aria.expanded,content:"auto"===r.aria.content?t.interactive?null:"describedby":r.aria.content},r}function P(e,t){e.innerHTML=t}function R(e){var t=g();return!0===e?t.className=i:(t.className=a,y(e)?t.appendChild(e):P(t,e)),t}function O(e,t){y(t.content)?(P(e,""),e.appendChild(t.content)):"function"!=typeof t.content&&(t.allowHTML?P(e,t.content):e.textContent=t.content)}function j(e){var t=e.firstElementChild,n=f(t.children);return{box:t,content:n.find(function(e){return e.classList.contains(r)}),arrow:n.find(function(e){return e.classList.contains(i)||e.classList.contains(a)}),backdrop:n.find(function(e){return e.classList.contains("tippy-backdrop")})}}function F(e){var t=g(),n=g();n.className="tippy-box",n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var i=g();function a(n,r){var i=j(t),a=i.box,o=i.content,s=i.arrow;r.theme?a.setAttribute("data-theme",r.theme):a.removeAttribute("data-theme"),"string"==typeof r.animation?a.setAttribute("data-animation",r.animation):a.removeAttribute("data-animation"),r.inertia?a.setAttribute("data-inertia",""):a.removeAttribute("data-inertia"),a.style.maxWidth="number"==typeof r.maxWidth?r.maxWidth+"px":r.maxWidth,r.role?a.setAttribute("role",r.role):a.removeAttribute("role"),(n.content!==r.content||n.allowHTML!==r.allowHTML)&&O(o,e.props),r.arrow?s?n.arrow!==r.arrow&&(a.removeChild(s),a.appendChild(R(r.arrow))):a.appendChild(R(r.arrow)):s&&a.removeChild(s)}return i.className=r,i.setAttribute("data-state","hidden"),O(i,e.props),t.appendChild(n),n.appendChild(i),a(e.props,e.props),{popper:t,onUpdate:a}}F.$$tippy=!0;var L=1,z=[],B=[];function U(e,n){void 0===n&&(n={});var r,i=M.plugins.concat(n.plugins||[]);document.addEventListener("touchstart",C,o),window.addEventListener("blur",E);var a=Object.assign({},n,{plugins:i}),_=(y(r=e)?[r]:u(r,"NodeList")?f(r):Array.isArray(r)?r:f(document.querySelectorAll(r))).reduce(function(e,n){var r=n&&function(e,n){var r,i,a,y,_,C,A,E,I=D(e,Object.assign({},M,N(m(n)))),P=!1,R=!1,O=!1,F=!1,U=[],H=d(ev,I.interactiveDebounce),W=L++,V=(r=I.plugins).filter(function(e,t){return r.indexOf(e)===t}),q={id:W,reference:e,popper:g(),popperInstance:null,props:I,state:{isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},plugins:V,clearDelayTimeouts:function(){clearTimeout(i),clearTimeout(a),cancelAnimationFrame(y)},setProps:function(t){if(!q.state.isDestroyed){er("onBeforeUpdate",[q,t]),em();var n=q.props,r=D(e,Object.assign({},n,m(t),{ignoreAttributes:!0}));q.props=r,ef(),n.interactiveDebounce!==r.interactiveDebounce&&(eo(),H=d(ev,r.interactiveDebounce)),n.triggerTarget&&!r.triggerTarget?h(n.triggerTarget).forEach(function(e){e.removeAttribute("aria-expanded")}):r.triggerTarget&&e.removeAttribute("aria-expanded"),ea(),en(),K&&K(n,r),q.popperInstance&&(ew(),eS().forEach(function(e){requestAnimationFrame(e._tippy.popperInstance.forceUpdate)})),er("onAfterUpdate",[q,t])}},setContent:function(e){q.setProps({content:e})},show:function(){var t=q.state.isVisible,n=q.state.isDestroyed,r=!q.state.isEnabled,i=S.isTouch&&!q.props.touch,a=l(q.props.duration,0,M.duration);if(!(t||n||r||i||(E||e).hasAttribute("disabled"))&&(er("onShow",[q],!1),!1!==q.props.onShow(q))){if(q.state.isVisible=!0,Q()&&($.style.visibility="visible"),en(),ec(),q.state.isMounted||($.style.transition="none"),Q()){var o,u,d,h=j($);b([h.box,h.content],0)}A=function(){var e;if(q.state.isVisible&&!F){if(F=!0,$.offsetHeight,$.style.transition=q.props.moveTransition,Q()&&q.props.animation){var t=j($),n=t.box,r=t.content;b([n,r],a),x([n,r],"visible")}ei(),ea(),p(B,q),null==(e=q.popperInstance)||e.forceUpdate(),er("onMount",[q]),q.props.animation&&Q()&&eh(a,function(){q.state.isShown=!0,er("onShown",[q])})}},u=q.props.appendTo,d=E||e,(o=q.props.interactive&&u===s||"parent"===u?d.parentNode:c(u,[d])).contains($)||o.appendChild($),q.state.isMounted=!0,ew()}},hide:function(){var e=!q.state.isVisible,t=q.state.isDestroyed,n=!q.state.isEnabled,r=l(q.props.duration,1,M.duration);if(!e&&!t&&!n&&(er("onHide",[q],!1),!1!==q.props.onHide(q))){if(q.state.isVisible=!1,q.state.isShown=!1,F=!1,P=!1,Q()&&($.style.visibility="hidden"),eo(),ed(),en(!0),Q()){var i,a=j($),o=a.box,s=a.content;q.props.animation&&(b([o,s],r),x([o,s],"hidden"))}(ei(),ea(),q.props.animation)?Q()&&(i=q.unmount,eh(r,function(){!q.state.isVisible&&$.parentNode&&$.parentNode.contains($)&&i()})):q.unmount()}},hideWithInteractivity:function(e){ee().addEventListener("mousemove",H),p(z,H),H(e)},enable:function(){q.state.isEnabled=!0},disable:function(){q.hide(),q.state.isEnabled=!1},unmount:function(){q.state.isVisible&&q.hide(),q.state.isMounted&&(ek(),eS().forEach(function(e){e._tippy.unmount()}),$.parentNode&&$.parentNode.removeChild($),B=B.filter(function(e){return e!==q}),q.state.isMounted=!1,er("onHidden",[q]))},destroy:function(){q.state.isDestroyed||(q.clearDelayTimeouts(),q.unmount(),em(),delete e._tippy,q.state.isDestroyed=!0,er("onDestroy",[q]))}};if(!I.render)return q;var G=I.render(q),$=G.popper,K=G.onUpdate;$.setAttribute("data-tippy-root",""),$.id="tippy-"+q.id,q.popper=$,e._tippy=q,$._tippy=q;var Y=V.map(function(e){return e.fn(q)}),X=e.hasAttribute("aria-expanded");return ef(),ea(),en(),er("onCreate",[q]),I.showOnCreate&&e_(),$.addEventListener("mouseenter",function(){q.props.interactive&&q.state.isVisible&&q.clearDelayTimeouts()}),$.addEventListener("mouseleave",function(){q.props.interactive&&q.props.trigger.indexOf("mouseenter")>=0&&ee().addEventListener("mousemove",H)}),q;function Z(){var e=q.props.touch;return Array.isArray(e)?e:[e,0]}function J(){return"hold"===Z()[0]}function Q(){var e;return!!(null!=(e=q.props.render)&&e.$$tippy)}function ee(){var t,n,r=(E||e).parentNode;return r&&null!=(n=h(r)[0])&&null!=(t=n.ownerDocument)&&t.body?n.ownerDocument:document}function et(e){return q.state.isMounted&&!q.state.isVisible||S.isTouch||_&&"focus"===_.type?0:l(q.props.delay,+!e,M.delay)}function en(e){void 0===e&&(e=!1),$.style.pointerEvents=q.props.interactive&&!e?"":"none",$.style.zIndex=""+q.props.zIndex}function er(e,t,n){if(void 0===n&&(n=!0),Y.forEach(function(n){n[e]&&n[e].apply(n,t)}),n){var r;(r=q.props)[e].apply(r,t)}}function ei(){var t=q.props.aria;if(t.content){var n="aria-"+t.content,r=$.id;h(q.props.triggerTarget||e).forEach(function(e){var t=e.getAttribute(n);if(q.state.isVisible)e.setAttribute(n,t?t+" "+r:r);else{var i=t&&t.replace(r,"").trim();i?e.setAttribute(n,i):e.removeAttribute(n)}})}}function ea(){!X&&q.props.aria.expanded&&h(q.props.triggerTarget||e).forEach(function(t){q.props.interactive?t.setAttribute("aria-expanded",q.state.isVisible&&t===(E||e)?"true":"false"):t.removeAttribute("aria-expanded")})}function eo(){ee().removeEventListener("mousemove",H),z=z.filter(function(e){return e!==H})}function es(t){if(!S.isTouch||!O&&"mousedown"!==t.type){var n=t.composedPath&&t.composedPath()[0]||t.target;if(!(q.props.interactive&&k($,n))){if(h(q.props.triggerTarget||e).some(function(e){return k(e,n)})){if(S.isTouch||q.state.isVisible&&q.props.trigger.indexOf("click")>=0)return}else er("onClickOutside",[q,t]);!0===q.props.hideOnClick&&(q.clearDelayTimeouts(),q.hide(),R=!0,setTimeout(function(){R=!1}),q.state.isMounted||ed())}}}function el(){O=!0}function eu(){O=!1}function ec(){var e=ee();e.addEventListener("mousedown",es,!0),e.addEventListener("touchend",es,o),e.addEventListener("touchstart",eu,o),e.addEventListener("touchmove",el,o)}function ed(){var e=ee();e.removeEventListener("mousedown",es,!0),e.removeEventListener("touchend",es,o),e.removeEventListener("touchstart",eu,o),e.removeEventListener("touchmove",el,o)}function eh(e,t){var n=j($).box;function r(e){e.target===n&&(w(n,"remove",r),t())}if(0===e)return t();w(n,"remove",C),w(n,"add",r),C=r}function ep(t,n,r){void 0===r&&(r=!1),h(q.props.triggerTarget||e).forEach(function(e){e.addEventListener(t,n,r),U.push({node:e,eventType:t,handler:n,options:r})})}function ef(){J()&&(ep("touchstart",eg,{passive:!0}),ep("touchend",ey,{passive:!0})),q.props.trigger.split(/\s+/).filter(Boolean).forEach(function(e){if("manual"!==e)switch(ep(e,eg),e){case"mouseenter":ep("mouseleave",ey);break;case"focus":ep(T?"focusout":"blur",eb);break;case"focusin":ep("focusout",eb)}})}function em(){U.forEach(function(e){var t=e.node,n=e.eventType,r=e.handler,i=e.options;t.removeEventListener(n,r,i)}),U=[]}function eg(e){var t,n=!1;if(!(!q.state.isEnabled||ex(e))&&!R){var r=(null==(t=_)?void 0:t.type)==="focus";_=e,E=e.currentTarget,ea(),!q.state.isVisible&&u(e,"MouseEvent")&&z.forEach(function(t){return t(e)}),"click"===e.type&&(0>q.props.trigger.indexOf("mouseenter")||P)&&!1!==q.props.hideOnClick&&q.state.isVisible?n=!0:e_(e),"click"===e.type&&(P=!n),n&&!r&&eC(e)}}function ev(t){var n,r,i,a=t.target,o=(E||e).contains(a)||$.contains(a);("mousemove"!==t.type||!o)&&(n=eS().concat($).map(function(e){var t,n=null==(t=e._tippy.popperInstance)?void 0:t.state;return n?{popperRect:e.getBoundingClientRect(),popperState:n,props:I}:null}).filter(Boolean),r=t.clientX,i=t.clientY,n.every(function(e){var t=e.popperRect,n=e.popperState,a=e.props.interactiveBorder,o=n.placement.split("-")[0],s=n.modifiersData.offset;if(!s)return!0;var l="bottom"===o?s.top.y:0,u="top"===o?s.bottom.y:0,c="right"===o?s.left.x:0,d="left"===o?s.right.x:0,h=t.top-i+l>a,p=i-t.bottom-u>a,f=t.left-r+c>a,m=r-t.right-d>a;return h||p||f||m})&&(eo(),eC(t)))}function ey(e){if(!(ex(e)||q.props.trigger.indexOf("click")>=0&&P)){if(q.props.interactive)return void q.hideWithInteractivity(e);eC(e)}}function eb(t){(!(0>q.props.trigger.indexOf("focusin"))||t.target===(E||e))&&(q.props.interactive&&t.relatedTarget&&$.contains(t.relatedTarget)||eC(t))}function ex(e){return!!S.isTouch&&J()!==e.type.indexOf("touch")>=0}function ew(){ek();var n=q.props,r=n.popperOptions,i=n.placement,a=n.offset,o=n.getReferenceClientRect,s=n.moveTransition,l=Q()?j($).arrow:null,u=o?{getBoundingClientRect:o,contextElement:o.contextElement||E||e}:e,c=[{name:"offset",options:{offset:a}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!s}},{name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(e){var t=e.state;if(Q()){var n=j($).box;["placement","reference-hidden","escaped"].forEach(function(e){"placement"===e?n.setAttribute("data-placement",t.placement):t.attributes.popper["data-popper-"+e]?n.setAttribute("data-"+e,""):n.removeAttribute("data-"+e)}),t.attributes.popper={}}}}];Q()&&l&&c.push({name:"arrow",options:{element:l,padding:3}}),c.push.apply(c,(null==r?void 0:r.modifiers)||[]),q.popperInstance=(0,t.createPopper)(u,$,Object.assign({},r,{placement:i,onFirstUpdate:A,modifiers:c}))}function ek(){q.popperInstance&&(q.popperInstance.destroy(),q.popperInstance=null)}function eS(){return f($.querySelectorAll("[data-tippy-root]"))}function e_(e){q.clearDelayTimeouts(),e&&er("onTrigger",[q,e]),ec();var t=et(!0),n=Z(),r=n[0],a=n[1];S.isTouch&&"hold"===r&&a&&(t=a),t?i=setTimeout(function(){q.show()},t):q.show()}function eC(e){if(q.clearDelayTimeouts(),er("onUntrigger",[q,e]),!q.state.isVisible)return void ed();if(!(q.props.trigger.indexOf("mouseenter")>=0&&q.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(e.type)>=0)||!P){var t=et(!1);t?a=setTimeout(function(){q.state.isVisible&&q.hide()},t):y=requestAnimationFrame(function(){q.hide()})}}}(n,a);return r&&e.push(r),e},[]);return y(e)?_[0]:_}U.defaultProps=M,U.setDefaultProps=function(e){Object.keys(e).forEach(function(t){M[t]=e[t]})},U.currentInput=S,Object.assign({},n.applyStyles,{effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow)}}),U.setDefaultProps({render:F});let H=U},221297:e=>{"use strict";e.s({default:()=>o,useChatV2Store:()=>a});var t=e.i(373150),n=e.i(138626),r=e.i(496438);let i=(0,e.i(144992).createZustandContext)(e=>{let{isTeam:r,mode:i}=e;return(0,n.createStore)((e,n)=>({isTeam:r,setIsTeam:t=>e({isTeam:t}),isLoading:!1,setIsLoading:t=>e({isLoading:t}),contentGenerationComplete:!1,setContentGenerationComplete:t=>e({contentGenerationComplete:t}),isPasteUploading:!1,setIsPasteUploading:t=>e({isPasteUploading:t}),mode:i,setMode:t=>e({mode:t}),abortRef:(0,t.createRef)(),messageIdRef:(0,t.createRef)(),currentStreamIdRef:(0,t.createRef)()}))}),a=e=>(0,r.useStore)(i.useContext(),e),o=i},940455:e=>{"use strict";e.s({VList:()=>B});var t=e.i(290479),n=e.i(373150),r=e.i(784445);let{min:i,max:a,abs:o,floor:s}=Math,l=(e,t,n)=>i(n,a(t,e)),u=e=>[...e].sort((e,t)=>e-t),c="function"==typeof queueMicrotask?queueMicrotask:e=>{Promise.resolve().then(e)},d=e=>{let t,n;return()=>(t||(t=!0,n=e()),n)},h=(e,t,n)=>{let r=n?"unshift":"push";for(let n=0;n<t;n++)e[r](-1);return e},p=(e,t)=>{let n=e.t[t];return -1===n?e.o:n},f=(e,t,n)=>{let r=-1===e.t[t];return e.t[t]=n,e.i=i(t,e.i),r},m=(e,t)=>{if(!e.l)return 0;if(e.i>=t)return e.u[t];e.i<0&&(e.u[0]=0,e.i=0);let n=e.i,r=e.u[n];for(;n<t;)r+=p(e,n),e.u[++n]=r;return e.i=t,r},g=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.l-1;for(;n<=r;){let i=s((n+r)/2),a=m(e,i);if(a<=t){if(a+p(e,i)>t)return i;n=i+1}else r=i-1}return l(n,0,e.l-1)},y=(e,t,n)=>{let r=t-e.l;return e.i=n?-1:i(t-1,e.i),e.l=t,r>0?(h(e.u,r),h(e.t,r,n),e.o*r):(e.u.splice(r),(n?e.t.splice(0,-r):e.t.splice(r)).reduce((t,n)=>t-(-1===n?e.o:n),0))},b="undefined"!=typeof window,x=d(()=>!!b&&"rtl"===getComputedStyle(document.documentElement).direction),w=d(()=>/iP(hone|od|ad)/.test(navigator.userAgent)),k=d(()=>"scrollBehavior"in document.documentElement.style),S=e=>a(e.h(),e.v()),_=e=>!!e.v(),C=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:40,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4?arguments[4]:void 0,l=arguments.length>5&&void 0!==arguments[5]&&arguments[5],c=!!r,d=1,b=0,x=0,k=0,S=0,_=0,C=0,A=0,E=0,T=c?[0,a(r-1,0)]:null,M=[0,0],I=0,N={o:s?s[1]:t,t:s&&s[0]?h(s[0].slice(0,i(e,s[0].length)),a(0,e-s[0].length)):h([],e),l:e,i:-1,u:h([],e)},D=new Set,P=()=>k-x+_+S,R=e=>((e,t,n,r)=>{if(r=i(r,e.l-1),m(e,r)<=t){let i=g(e,t+n,r);return[g(e,t,r,i),i]}{let i=g(e,t,void 0,r);return[i,g(e,t+n,i)]}})(N,e,b,M[0]),O=()=>N.l?m(N,N.l-1)+p(N,N.l-1):0,j=e=>m(N,e)-_,F=e=>p(N,e),L=e=>{e&&(w()&&0!==A?_+=e:S+=e)};return{p:()=>d,m:()=>[N.t.slice(),N.o],_:()=>{let e,t;return C?[e,t]=M:([e,t]=M=R(a(0,P())),T&&(e=i(e,T[0]),t=a(t,T[1]))),1!==A&&(e-=a(0,n)),2!==A&&(t+=a(0,n)),[a(e,0),i(t,N.l-1)]},S:()=>g(N,P()),$:()=>g(N,P()+b),I:e=>-1===N.t[e],k:()=>!!T&&N.t.slice(a(0,T[0]-1),i(N.l-1,T[1]+1)+1).includes(-1),T:j,R:F,M:()=>N.l,C:()=>k,H:()=>0!==A,v:()=>b,W:()=>x,h:O,O:()=>(C=S,S=0,[C,2===E||k-x+b>=O()]),B:(e,t)=>{let n=[e,t];return D.add(n),()=>{D.delete(n)}},J:(e,t)=>{let n,r,i=0;switch(e){case 1:{let e=C;C=0;let n=t-k,a=o(n);e&&a<o(e)+1||0!==E||(A=n<0?2:1),c&&(T=null,c=!1),k=t,i=4;let s=k-x;s>=-b&&s<=O()&&(i+=1,r=a>b);break}case 2:i=8,0!==A&&(n=!0,i+=1),A=0,E=0,T=null;break;case 3:{let e=t.filter(e=>{let[t,n]=e;return N.t[t]!==n});if(!e.length)break;for(let[t,n]of(L(e.reduce((e,t)=>{let[n,r]=t;return(2===E||(T?!c&&n<T[0]:j(n)+(0===A&&0===E?F(n):0)<k-x))&&(e+=r-F(n)),e},0)),e)){let e=F(t),r=f(N,t,n);l&&(I+=r?n:n-e)}l&&b&&I>b&&(L(((e,t)=>{let n=0,r=[];e.t.forEach((e,i)=>{-1!==e&&(r.push(e),i<t&&n++)}),e.i=-1;let i=u(r),o=i.length,s=o/2|0,l=o%2==0?(i[s-1]+i[s])/2:i[s],c=e.o;return((e.o=l)-c)*a(t-n,0)})(N,g(N,P()))),l=!1),i=3,r=!0;break}case 4:b!==t&&(b=t,i=3);break;case 5:t[1]?(L(y(N,t[0],!0)),E=2):y(N,t[0]),i=1;break;case 6:x=t;break;case 7:E=1;break;case 8:T=R(t),i=1}i&&(d=1+(0x7fffffff&d),n&&_&&(S+=_,_=0),D.forEach(e=>{let[t,n]=e;i&t&&n(r)}))}}},A=setTimeout,E=(e,t)=>t&&x()?-e:e,T=(e,t,n,r,i,a)=>{let o=Date.now,s=0,l=!1,u=!1,c=!1,d=!1,h=(()=>{let t,n=()=>{null!=t&&clearTimeout(t)},r=()=>{n(),t=A(()=>{t=null,(()=>{if(l||u)return l=!1,h();c=!1,e.J(2)})()},150)};return r.L=n,r})(),p=()=>{s=o(),c&&(d=!0),a&&e.J(6,a()),e.J(1,r()),h()},f=t=>{if(l||!e.H()||t.ctrlKey)return;let r=o()-s;150>r&&50<r&&(n?t.deltaX:t.deltaY)&&(l=!0)},m=()=>{u=!0,c=d=!1},g=()=>{u=!1,w()&&(c=!0)};return t.addEventListener("scroll",p),t.addEventListener("wheel",f,{passive:!0}),t.addEventListener("touchstart",m,{passive:!0}),t.addEventListener("touchend",g,{passive:!0}),{P:()=>{t.removeEventListener("scroll",p),t.removeEventListener("wheel",f),t.removeEventListener("touchstart",m),t.removeEventListener("touchend",g),h.L()},A:()=>{let[t,a]=e.O();t&&(i(E(t,n),a,d),d=!1,a&&e.v()>e.h()&&e.J(1,r()))}}},M=(e,t)=>{let n,r,i,a=t?"scrollLeft":"scrollTop",o=t?"overflowX":"overflowY",s=async(r,o)=>{if(!n)return void c(()=>s(r,o));i&&i();let l=()=>{let t;return[new Promise((n,r)=>{t=n,i=r,_(e)&&A(r,150)}),e.B(2,()=>{t&&t()})]};if(o&&k()){for(;e.J(8,r()),e.k();){let[e,t]=l();try{await e}catch(e){return}finally{t()}}n.scrollTo({[t?"left":"top"]:E(r(),t),behavior:"smooth"})}else for(;;){let[i,o]=l();try{n[a]=E(r(),t),e.J(7),await i}catch(e){return}finally{o()}}};return{V(s){n=s,r=T(e,s,t,()=>E(s[a],t),(t,n,r)=>{if(r){let e=s.style,t=e[o];e[o]="hidden",A(()=>{e[o]=t})}n?(s[a]=e.C()+t,i&&i()):s[a]+=t})},X(){r&&r.P()},Y(e){s(()=>e)},j(t){t+=e.C(),s(()=>t)},q(t){let{align:n,smooth:r,offset:i=0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t=l(t,0,e.M()-1),"nearest"===n){let r=e.T(t),i=e.C();if(r<i)n="start";else{if(!(r+e.R(t)>i+e.v()))return;n="end"}}s(()=>i+e.W()+e.T(t)+("end"===n?e.R(t)-e.v():"center"===n?(e.R(t)-e.v())/2:0),r)},D:()=>{r&&r.A()}}},I=e=>{let t;return{U(n){(t||(t=new n.ownerDocument.defaultView.ResizeObserver(e))).observe(n)},F(e){t.unobserve(e)},P(){t&&t.disconnect()}}},N=b?n.useLayoutEffect:n.useEffect,D="current",P=(e,t)=>{if(Array.isArray(e))for(let n of e)P(n,t);else null==e||"boolean"==typeof e||t.push(e)},R=(e,t)=>{let n=e.key;return null!=n?n:"_"+t},O=e=>{let t=(0,n.useRef)();return t[D]||(t[D]=e())},j=e=>{let t=(0,n.useRef)(e);return N(()=>{t[D]=e},[e]),t},F=(0,n.memo)(e=>{let{N:r,Z:i,ee:a,te:o,ne:s,oe:l,re:u,ie:c}=e,d=(0,n.useRef)(null);N(()=>i(d[D],a),[a]);let h=(0,n.useMemo)(()=>{let e={position:s&&c?void 0:"absolute",[u?"height":"width"]:"100%",[u?"top":"left"]:0,[u?x()?"right":"left":"top"]:o,visibility:!s||c?"visible":"hidden"};return u&&(e.display="flex"),e},[o,s,c,u]);return(0,t.jsx)(l,"string"==typeof l?{ref:d,style:h,children:r}:{ref:d,style:h,index:a,children:r})}),L=(e,t)=>(0,n.useMemo)(()=>{if("function"==typeof e)return[e,t||0];let n=(e=>{let t=[];return P(e,t),t})(e);return[e=>n[e],n.length]},[e,t]),z=(0,n.forwardRef)((e,i)=>{let{children:a,count:o,overscan:s,itemSize:l,shift:d,horizontal:h,keepMounted:p,cache:f,startMargin:m=0,ssrCount:g,as:y="div",item:b="div",scrollRef:x,onScroll:w,onScrollEnd:k}=e,[_,A]=L(a,o),E=(0,n.useRef)(null),T=(0,n.useRef)(!!g),P=j(w),z=j(k),[B,U,H,W]=O(()=>{let e=!!h,t=C(A,l,s,g,f,!l);return[t,((e,t)=>{let n,r=t?"width":"height",i=new WeakMap,a=I(t=>{let a=[];for(let{target:o,contentRect:s}of t)if(o.offsetParent)if(o===n)e.J(4,s[r]);else{let e=i.get(o);null!=e&&a.push([e,s[r]])}a.length&&e.J(3,a)});return{G(e){a.U(n=e)},K:(e,t)=>(i.set(e,t),a.U(e),()=>{i.delete(e),a.F(e)}),X:a.P}})(t,e),M(t,e),e]});A!==B.M()&&B.J(5,[A,d]),m!==B.W()&&B.J(6,m);let[V,q]=(0,n.useReducer)(B.p,void 0,B.p),[G,$]=B._(),K=B.H(),Y=B.h(),X=[],Z=e=>{let n=_(e);return(0,t.jsx)(F,{Z:U.K,ee:e,te:B.T(e),ne:B.I(e),oe:b,N:n,re:W,ie:T[D]},R(n,e))};N(()=>{T[D]=!1;let e=B.B(1,e=>{e?(0,r.flushSync)(q):q()}),t=B.B(4,()=>{P[D]&&P[D](B.C())}),n=B.B(8,()=>{z[D]&&z[D]()}),i=e=>{U.G(e),H.V(e)};return x?c(()=>i(x[D])):i(E[D].parentElement),()=>{e(),t(),n(),U.X(),H.X()}},[]),N(()=>{H.D()},[V]),(0,n.useImperativeHandle)(i,()=>({get cache(){return B.m()},get scrollOffset(){return B.C()},get scrollSize(){return S(B)},get viewportSize(){return B.v()},findStartIndex:B.S,findEndIndex:B.$,getItemOffset:B.T,getItemSize:B.R,scrollToIndex:H.q,scrollTo:H.Y,scrollBy:H.j}),[]);for(let e=G;e<=$;e++)X.push(Z(e));if(p){let e=[],t=[];u(p).forEach(n=>{n<G&&e.push(Z(n)),n>$&&t.push(Z(n))}),X.unshift(...e),X.push(...t)}return(0,t.jsx)(y,{ref:E,style:{overflowAnchor:"none",flex:"none",position:"relative",visibility:"hidden",width:W?Y:"100%",height:W?"100%":Y,pointerEvents:K?"none":void 0},children:X})}),B=(0,n.forwardRef)((e,r)=>{let{children:i,count:a,overscan:o,itemSize:s,shift:l,horizontal:u,keepMounted:c,reverse:d,cache:h,ssrCount:p,item:f,onScroll:m,onScrollEnd:g,style:y,...b}=e,x=(0,n.useRef)(null),w=d&&!u,k=(0,t.jsx)(z,{ref:r,scrollRef:w?x:void 0,count:a,overscan:o,itemSize:s,shift:l,horizontal:u,keepMounted:c,cache:h,ssrCount:p,item:f,onScroll:m,onScrollEnd:g,children:i});return w&&(k=(0,t.jsx)("div",{style:{visibility:"hidden",display:"flex",flexDirection:"column",justifyContent:"flex-end",minHeight:"100%"},children:k})),(0,t.jsx)("div",{ref:x,...b,style:{display:u?"inline-block":"block",[u?"overflowX":"overflowY"]:"auto",contain:"strict",width:"100%",height:"100%",...y},children:k})}),U=(0,n.memo)(e=>{let{N:r,Z:i,se:a,le:o,ce:s,de:l,fe:u,ue:c,ne:d,ae:h}=e,p=(0,n.useRef)(null);return N(()=>i.K(p[D],a,o),[o,a]),(0,t.jsx)(h,{ref:p,style:(0,n.useMemo)(()=>({display:"grid",position:"absolute",top:s,[x()?"right":"left"]:l,visibility:d?"hidden":"visible",minHeight:u,minWidth:c}),[s,l,c,u,d]),children:r})})},858098:e=>{"use strict";e.s({useMentionTools:()=>l});var t=e.i(373150),n=e.i(368436),r=e.i(702461),i=e.i(885905),a=e.i(440840),o=e.i(375199),s=e.i(221297);let l=()=>{let{googleDriveStatus:e,oneDriveStatus:l,sharePointStatus:u,getIntegrationError:c}=(0,n.useIntegrations)(),d=(0,s.useChatV2Store)(e=>e.mode),{isAdmin:h}=(0,a.useImpersonation)(),{user:p}=(0,i.useAuth)(),f="chatbot"===d.type&&"NOTE"===d.chatbotType;return{items:(0,t.useMemo)(()=>{let t=[{id:"research",name:(0,r.getToolDisplayName)("research"),type:"TOOL",toolType:"research",description:"Finds answers by searching your library and the web"},{id:"librarySearch",name:(0,r.getToolDisplayName)("librarySearch"),type:"TOOL",toolType:"librarySearch",description:"Answers from content saved in your library"},{id:"webSearch",name:(0,r.getToolDisplayName)("webSearch"),type:"TOOL",toolType:"webSearch",description:"Look up information from across the web"},{id:"academicSearch",name:(0,r.getToolDisplayName)("academicSearch"),type:"TOOL",toolType:"academicSearch",description:"Find academic and scientific papers"},{id:"youtubeSearch",name:(0,r.getToolDisplayName)("youtubeSearch"),type:"TOOL",toolType:"youtubeSearch",description:"Search for videos on YouTube"},...f?[{id:"editNote",name:(0,r.getToolDisplayName)("editNote"),type:"TOOL",toolType:"editNote",description:"Improve, rewrite, or format your note"}]:[],{id:"completeForm",name:(0,r.getToolDisplayName)("completeForm"),type:"TOOL",toolType:"completeForm",description:"Fill in forms quickly and accurately"},{id:"createCitation",name:(0,r.getToolDisplayName)("createCitation"),type:"TOOL",toolType:"createCitation",description:"Generate properly formatted citations"},{id:"flashcardGenerator",name:(0,r.getToolDisplayName)("flashcardGenerator"),type:"TOOL",toolType:"flashcardGenerator",description:"Turn content into study flashcards"},{id:"imageGeneration",name:(0,r.getToolDisplayName)("imageGeneration"),type:"TOOL",toolType:"imageGeneration",description:"Create custom images using AI"}];return(h||(0,o.isStaffEmail)(null==p?void 0:p.email))&&(t.push({id:"googleDriveSearch",name:(0,r.getToolDisplayName)("googleDriveSearch"),type:"TOOL",toolType:"googleDriveSearch",description:"Search your Google Drive files and documents",isConnected:"CONNECTED"===e&&!c("google-drive"),connector:"google-drive"}),t.push({id:"oneDriveSearch",name:(0,r.getToolDisplayName)("oneDriveSearch"),type:"TOOL",toolType:"oneDriveSearch",description:"Search your OneDrive files and documents",isConnected:"CONNECTED"===l&&!c("onedrive"),connector:"onedrive"}),t.push({id:"sharePointSearch",name:(0,r.getToolDisplayName)("sharePointSearch"),type:"TOOL",toolType:"sharePointSearch",description:"Search your SharePoint files and documents",isConnected:"CONNECTED"===u&&!c("sharepoint"),connector:"sharepoint"})),t},[e,l,u,c,f,h,null==p?void 0:p.email])}}},139729:e=>{"use strict";e.s({default:()=>f});var t=e.i(290479),n=e.i(373150),r=e.i(940455),i=e.i(998145);e.i(567349);var a=e.i(111367),o=e.i(972899),s=e.i(476440),l=e.i(702461),u=e.i(852951),c=e.i(252390),d=e.i(147740),h=e.i(289702),p=e.i(858098);let f=(0,n.forwardRef)((e,f)=>{let[m,g]=(0,n.useState)(0),{data:y}=(0,u.useWorkspace)(),b=(0,n.useRef)([]),x=(0,n.useRef)(null),{track:w}=(0,c.default)(),[k,S]=(0,n.useState)(!1),_=(0,n.useRef)(!1),C=(0,n.useRef)(null),{openIntegrationDialog:A}=(0,d.useIntegrationDialogStore)();(0,n.useEffect)(()=>{let e=()=>{_.current=!0,C.current&&clearTimeout(C.current),C.current=setTimeout(()=>{_.current=!1},100)};return document.addEventListener("mousemove",e),()=>{document.removeEventListener("mousemove",e),C.current&&clearTimeout(C.current)}},[]);let E=(null==y?void 0:y.entities)?y.entities.filter(e=>"NOTHING"!==e.type&&"CHAT"!==e.type).map(e=>({id:e.id,name:e.name||(["GROUP","WORKSPACE"].includes(e.type)?"Untitled Folder":"Untitled"),type:e.type})):[];(0,n.useEffect)(()=>{w("mention_menu_opened")},[]);let{items:T}=(0,p.useMentionTools)(),M=e.isDocumentEditor?E:[...T,...E],I=e.query?M.filter(t=>{var n;return t.name.toLowerCase().includes((null==(n=e.query)?void 0:n.toLowerCase())||"")}):M,N=I.filter(e=>"TOOL"!==e.type),D=I.filter(e=>"TOOL"===e.type),P=N.filter(e=>!["GROUP","WORKSPACE"].includes(e.type)),R=N.filter(e=>["GROUP","WORKSPACE"].includes(e.type)),O=[...D,...P,...R],j=[];if(D.length>0)for(let e of(j.push({type:"header",header:"Agents",key:"agents-header"}),D))j.push({type:"item",data:e,key:"agents-".concat(e.id)});if(P.length>0)for(let e of(j.push({type:"header",header:P.length>0||D.length>0?"Files":void 0,key:"files-header"}),P))j.push({type:"item",data:e,key:"files-".concat(e.id)});if(R.length>0)for(let e of(j.push({type:"header",header:P.length>0||D.length>0?"Folders":void 0,key:"folders-header"}),R))j.push({type:"item",data:e,key:"folders-".concat(e.id)});(0,n.useEffect)(()=>{if(k&&x.current&&m>=0&&m<O.length){let e=O[m],t=j.findIndex(t=>"item"===t.type&&t.data===e);t>=0&&"function"==typeof x.current.scrollToIndex&&x.current.scrollToIndex(t,{align:"center"}),S(!1)}},[m,k,j,O]);let F=t=>{let n=O[t];if("TOOL"===n.type){if(n.connector&&!1===n.isConnected){var r;null==(r=e.onClose)||r.call(e),requestAnimationFrame(()=>{requestAnimationFrame(()=>{A(n.connector)})});return}w((null==e?void 0:e.isMentionButton)?"mention_button_tool_selected":"mention_tool_selected",{toolType:n.toolType})}else w("menu_select_chatbot",{chatbotId:n.id,chatbotName:n.name});n&&e.command({id:n.id,label:n.name,type:n.type,toolType:n.toolType})};return((0,n.useImperativeHandle)(f,()=>({onKeyDown:e=>{let{event:t}=e;return 0!==O.length&&("ArrowUp"===t.key?(g((m+O.length-1)%O.length),S(!0),!0):"ArrowDown"===t.key?(g((m+1)%O.length),S(!0),!0):"Enter"===t.key&&!!(O.length>0)&&!!(m>=0)&&!!(m<O.length)&&(t.preventDefault(),t.stopPropagation(),F(m),!0))}})),0===O.length)?null:(0,t.jsx)(a.Command,{shouldFilter:!1,className:"rounded-6 border shadow-shadowMedium w-[250px] p-2 pb-0",children:(0,t.jsx)(r.VList,{ref:x,className:"scrollbar-hide",style:{height:"300px"},overscan:5,children:j.map((e,n)=>{if("header"===e.type&&e.header)return(0,t.jsx)("div",{className:"px-4 py-3 h-[28px] peer text-xs font-medium text-text-secondary ".concat(0===n?"":"mt-6"),children:e.header},e.key);if("item"===e.type&&e.data){let n=e.data,r=O.indexOf(n),u=(0,t.jsxs)(a.CommandItem,{ref:e=>{e&&(b.current[r]=e)},className:(0,h.cn)(r===m?"bg-accent text-accent-foreground ":"","!aria-selected:bg-transparent h-[28px] w-[240px]"),onSelect:()=>F(r),onMouseEnter:()=>(e=>{if(!_.current)return;let t=O.findIndex(t=>t.id===e.id&&t.type===e.type);t>=0&&t!==m&&g(t)})(n),value:n.id,children:[(0,t.jsx)(o.Icon,{as:"TOOL"===n.type?(0,l.getToolIcon)(n.toolType||"webSearch"):(0,i.default)({type:n.type}),className:"flex-shrink-0"}),(0,t.jsx)("span",{className:"line-clamp-1",children:n.name}),"TOOL"===n.type&&!1===n.isConnected&&(0,t.jsx)("span",{className:"text-body-sm-bold text-text-tertiary ml-auto",children:"Connect"})]},e.key);return"TOOL"===n.type?(0,t.jsx)(s.ReusableTooltip,{content:n.description||n.name,sideOffset:10,className:"max-w-[200px] font-medium text-xs tracking-[-1%]",position:"right",align:"center",children:u},e.key):u}return null})})})})},231973:e=>{"use strict";e.s({default:()=>i});var t=e.i(290479),n=e.i(221297),r=e.i(139729);let i=e=>(0,t.jsx)(n.default.Provider,{initialValue:{isTeam:!1,mode:{type:"chatbot",chatbotType:"TEXT",chatbotId:"",chatbotName:"",userId:""}},children:(0,t.jsx)(r.default,{...e})})},721749:e=>{"use strict";e.s({suggestion:()=>i});var t=e.i(184782),n=e.i(291495),r=e.i(231973);let i=e=>({items:()=>[],allowSpaces:!0,char:"@",startOfLine:!1,allowedPrefixes:null,render:()=>{let i,a;return{onStart:o=>{var s,l;if(i=void 0,a=void 0,(null==(s=o.editor)?void 0:s.state.selection.$anchor.parent.type.name)==="title")return;if(e&&(null==(l=o.editor)?void 0:l.state)){let{state:e}=o.editor,{selection:t}=e,{$from:n}=t,r=n.parent.textContent,i=n.parentOffset,a=i>0?r[i-1]:"",s=i===r.length;if("@"!==a||!s)return}if(i=new t.ReactRenderer(r.default,{props:{...o,isDocumentEditor:e,onClose:()=>{null==a||a.destroy(),null==i||i.destroy()}},editor:o.editor}),!o.clientRect)return;let u=document.createElement("div");document.body.appendChild(u);let c=(0,n.default)(u,{getReferenceClientRect:o.clientRect,appendTo:()=>document.body,content:i.element,showOnCreate:!0,interactive:!0,trigger:"manual",placement:"bottom-start",popperOptions:{strategy:"absolute",modifiers:[{name:"flip",enabled:!0,options:{fallbackPlacements:["bottom-end","top-start","top-end"],allowedAutoPlacements:["bottom-start","bottom-end","top-start","top-end"]}},{name:"preventOverflow",enabled:!0,options:{altAxis:!0,altBoundary:!0,padding:16,boundary:"viewport",rootBoundary:"viewport"}},{name:"offset",options:{offset:[0,16]}},{name:"computeStyles",options:{adaptive:!1,gpuAcceleration:!1}}]},zIndex:9999,hideOnClick:!1,onShow(e){var t;null==(t=e.popperInstance)||t.update()},onClickOutside(e){e.hide()}});return a=Array.isArray(c)?c[0]:c,u},onUpdate:e=>{i&&(i.updateProps(e),e.clientRect&&(null==a||a.setProps({getReferenceClientRect:e.clientRect})))},onKeyDown:e=>"Escape"===e.event.key?(null==a||a.hide(),!0):!!(null==i?void 0:i.ref)&&!0===i.ref.onKeyDown(e),onExit:()=>{null==a||a.destroy(),null==i||i.destroy()}}}})},751746:e=>{"use strict";e.s({createMentionExtension:()=>f});var t=e.i(290479),n=e.i(277037);e.i(131841);var r=e.i(968617),i=e.i(184782),a=e.i(397711),o=e.i(998145),s=e.i(972899),l=e.i(476440),u=e.i(702461),c=e.i(852951),d=e.i(289702),h=e.i(721749);let p=e=>{var n;let{node:r,isDocumentEditor:h}=e,{label:p,type:f,toolType:m,id:g}=r.attrs,y=(0,a.useRouter)(),{data:b}=(0,c.useWorkspace)(),x=h||!1,w=null==b||null==(n=b.entities)?void 0:n.find(e=>e.id===g),k=f&&!["GROUP","WORKSPACE"].includes(f),S=x&&k&&(null==w?void 0:w.summary)&&!0,_=()=>{let e=x?"mention h-auto min-h-[22px] leading-[22px] px-2 py-1 rounded-[6px] inline-flex items-center gap-2 text-sm font-medium transition-all duration-150 align-top":"mention h-[22px] leading-[22px] px-2 rounded-[6px] inline-flex items-center gap-2 text-sm font-medium transition-all duration-150 align-top",t="TOOL"!==f&&x&&1?"cursor-pointer hover:bg-secondary/80":"";return"TOOL"===f?(0,d.cn)(e,"bg-blue/10 text-blue",t):(0,d.cn)(e,"bg-secondary text-text-secondary",t)},C=e=>{e.preventDefault(),e.stopPropagation(),"TOOL"!==f&&g&&x&&y.push("/b/".concat(g))},A=(null==p?void 0:p.length)>32?"".concat(p.substring(0,32),"..."):p,E=(0,t.jsxs)(i.NodeViewWrapper,{as:"span",className:_(),onClick:C,"data-label":p,style:{cursor:x&&"TOOL"!==f&&1?"pointer":"default",userSelect:"none"},children:["TOOL"===f?(0,t.jsx)(s.Icon,{as:(0,u.getToolIcon)(m),className:"flex-shrink-0 w-[14px] h-[14px] block leading-none m-0 p-0",style:{lineHeight:"1"}}):(0,t.jsx)(s.Icon,{as:(0,o.default)({type:f}),className:"flex-shrink-0 w-[14px] h-[14px] block leading-none m-0 p-0",style:{lineHeight:"1"}}),(0,t.jsx)("span",{children:A})]});if(S){let e=(0,t.jsx)("div",{className:"flex flex-col space-y-4 max-w-xs",children:(0,t.jsx)("p",{className:"text-sm text-text-secondary leading-relaxed line-clamp-6",children:w.summary})});return(0,t.jsx)(i.NodeViewWrapper,{as:"span",className:"inline-block","data-label":p,children:(0,t.jsx)(l.ReusableTooltip,{content:e,position:"top",asChild:!0,children:(0,t.jsxs)("span",{className:_(),onClick:C,style:{cursor:x&&"TOOL"!==f&&1?"pointer":"default",userSelect:"none"},children:["TOOL"===f?(0,t.jsx)(s.Icon,{as:(0,u.getToolIcon)(m),className:"flex-shrink-0 w-[14px] h-[14px]",style:{lineHeight:"1"}}):(0,t.jsx)(s.Icon,{as:(0,o.default)({type:f}),className:"flex-shrink-0 w-[14px] h-[14px]",style:{lineHeight:"1"}}),(0,t.jsx)("span",{children:A})]})})})}return E},f=e=>n.default.extend({addAttributes:()=>({id:{default:null,parseHTML:e=>e.getAttribute("data-id"),renderHTML:e=>({"data-id":e.id})},label:{default:null,parseHTML:e=>e.getAttribute("data-label"),renderHTML:e=>({"data-label":e.label})},type:{default:null,parseHTML:e=>e.getAttribute("data-mention-type")||e.getAttribute("data-type"),renderHTML:e=>({"data-type":e.type})},toolType:{default:null,parseHTML:e=>e.getAttribute("data-tool-type"),renderHTML:e=>({"data-tool-type":e.toolType})}}),renderText(e){let{node:t}=e,{id:n,label:r,type:i}=t.attrs;return"TOOL"===i?"[[tool:".concat(n,":").concat(r,"]]"):"[[mention:".concat(n,":").concat(r,":").concat(i,"]]")},addProseMirrorPlugins(){var e;return[...(null==(e=this.parent)?void 0:e.call(this))||[],new r.Plugin({key:new r.PluginKey("mentionPasteHandler"),props:{handlePaste:(e,t)=>{let n=t.clipboardData;if(!n)return!1;let r=n.getData("text/plain");if(!r)return!1;let i=[...r.matchAll(/\[\[mention:([^:]+):([\s\S]+?):([^\]]+)\]\]/g)],a=[...r.matchAll(/\[\[tool:([^:]+):([^\]]+)\]\]/g)];if(0===i.length&&0===a.length)return!1;let{state:o}=e,{tr:s}=o,{selection:l}=o;s=s.delete(l.from,l.to);let u=l.from,c=0;for(let{match:e,type:t}of[...i.map(e=>({match:e,type:"mention"})),...a.map(e=>({match:e,type:"tool"}))].sort((e,t)=>e.match.index-t.match.index)){if(e.index>c){let t=r.slice(c,e.index);t&&(s=s.insertText(t,u),u+=t.length)}if("mention"===t){let[,t,n,r]=e,i=this.type.create({id:t.trim(),label:n.trim(),type:r.trim()});s=s.insert(u,i),u+=1}else if("tool"===t){let[,t,n]=e,r=this.type.create({id:t.trim(),label:n.trim(),type:"TOOL",toolType:t.trim()});s=s.insert(u,r),u+=1}c=e.index+e[0].length}if(c<r.length){let e=r.slice(c);e&&(s=s.insertText(e,u))}return e.dispatch(s),!0}}})]},addInputRules(){return[{find:/\[\[mention:([^:]+):([\s\S]+?):([^\]]+)\]\]$/,handler:e=>{let{state:t,range:n,match:r}=e,[,i,a,o]=r,{tr:s}=t,l=n.from,u=n.to;s.replaceWith(l,u,this.type.create({id:i.trim(),label:a.trim(),type:o.trim()}))}},{find:/\[\[tool:([^:]+):([^\]]+)\]\]$/,handler:e=>{let{state:t,range:n,match:r}=e,[,i,a]=r,{tr:o}=t,s=n.from,l=n.to;o.replaceWith(s,l,this.type.create({id:i.trim(),label:a.trim(),type:"TOOL",toolType:i.trim()}))}}]}}).extend({addNodeView:()=>(0,i.ReactNodeViewRenderer)(n=>(0,t.jsx)(p,{...n,isDocumentEditor:null==e?void 0:e.isDocumentEditor}))}).configure({HTMLAttributes:{class:"mention"},suggestion:(0,h.suggestion)(null==e?void 0:e.isDocumentEditor)})},167710:e=>{"use strict";e.s({default:()=>i});var t=e.i(691283),n=e.i(968617),r=e.i(954647);let i=t.Extension.create({name:"search",addOptions:()=>({searchTerm:"",results:[],searchResultClass:"search-result",caseSensitive:!1,disableRegex:!1}),addCommands(){return{setSearchTerm:e=>t=>{let{state:n,dispatch:r}=t;return this.options.searchTerm=e,this.options.results=[],r(n.tr),!1}}},addProseMirrorPlugins(){let e=this;return[new n.Plugin({key:new n.PluginKey("search"),state:{init:()=>r.DecorationSet.empty,apply(t){let{doc:n,docChanged:i}=t,{searchTerm:a,searchResultClass:o,disableRegex:s,caseSensitive:l}=e.options;if(i||a){let{decorationsToReturn:t,results:i}=function(e,t,n){let i="",a=[];e.descendants((e,t)=>{if(e.isText){i+=e.text;for(let n=0;n<e.text.length;n++)a.push(t+n)}else e.isBlock&&(i+="\n",a.push(t))});let o=[...i.matchAll(t)],s=[],l=[];for(let e of o){if(""===e[0])break;let t=a[e.index],i=a[e.index+e[0].length-1];l.push({from:t,to:i+1}),s.push(r.Decoration.inline(t,i+1,{class:n}))}return{decorationsToReturn:r.DecorationSet.create(e,s),results:l}}(n,RegExp(s?a.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"):a,l?"gu":"gui"),o);return e.options.results=i,t}return r.DecorationSet.empty}},props:{decorations(e){return this.getState(e)}}})]}})},225611:e=>{"use strict";e.s({DECO_NAME:()=>i,OnBlurHighlight:()=>o});var t=e.i(691283);e.i(131841);var n=e.i(968617);e.i(125492);var r=e.i(954647);let i="onBlurHighlight",a={BLUR:"blur",FOCUS:"focus",REPLACE:"replace"},o=t.Extension.create({name:i,addProseMirrorPlugins:()=>[new n.Plugin({key:new n.PluginKey(i),state:{init:e=>r.DecorationSet.empty,apply:(e,t)=>{let{selection:n,doc:o}=e,s=e.getMeta(i),l=n&&n.from!==n.to;if(!l||(null==s?void 0:s.action)===a.FOCUS)return r.DecorationSet.empty;if((null==s?void 0:s.action)===a.REPLACE){let{from:e,to:t}=s,n=r.Decoration.inline(e,t,{class:"bg-blue/10 py-[0.1em]"});return r.DecorationSet.create(o,[n])}if(l&&(null==s?void 0:s.action)===a.BLUR){let e=r.Decoration.inline(n.from,n.to,{class:"bg-blue/10 py-[0.1em]"});return r.DecorationSet.create(o,[e])}return t}},props:{decorations(e){return this.getState(e)},handleDOMEvents:{blur:e=>{let{tr:t}=e.state,n=t.setMeta(i,{from:t.selection.from,to:t.selection.to,action:a.BLUR});e.dispatch(n)},focus:e=>{let{tr:t}=e.state,n=t.setMeta(i,{from:t.selection.from,to:t.selection.to,action:a.FOCUS});e.dispatch(n)}}}})]})},592391:e=>{"use strict";function t(e,t){let{checkForDefaultPrevented:n=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(r){if(null==e||e(r),!1===n||!r.defaultPrevented)return null==t?void 0:t(r)}}e.s({composeEventHandlers:()=>t}),"undefined"!=typeof window&&window.document&&window.document.createElement},89753:e=>{"use strict";e.s({arrow:()=>g,flip:()=>p,hide:()=>m,limitShift:()=>h,offset:()=>c,shift:()=>d,size:()=>f,useFloating:()=>u});var t=e.i(557667),n=e.i(373150),r=e.i(784445),i="undefined"!=typeof document?n.useLayoutEffect:function(){};function a(e,t){let n,r,i;if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if((n=e.length)!==t.length)return!1;for(r=n;0!=r--;)if(!a(e[r],t[r]))return!1;return!0}if((n=(i=Object.keys(e)).length)!==Object.keys(t).length)return!1;for(r=n;0!=r--;)if(!({}).hasOwnProperty.call(t,i[r]))return!1;for(r=n;0!=r--;){let n=i[r];if(("_owner"!==n||!e.$$typeof)&&!a(e[n],t[n]))return!1}return!0}return e!=e&&t!=t}function o(e){return"undefined"==typeof window?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function s(e,t){let n=o(e);return Math.round(t*n)/n}function l(e){let t=n.useRef(e);return i(()=>{t.current=e}),t}function u(e){void 0===e&&(e={});let{placement:u="bottom",strategy:c="absolute",middleware:d=[],platform:h,elements:{reference:p,floating:f}={},transform:m=!0,whileElementsMounted:g,open:y}=e,[b,x]=n.useState({x:0,y:0,strategy:c,placement:u,middlewareData:{},isPositioned:!1}),[w,k]=n.useState(d);a(w,d)||k(d);let[S,_]=n.useState(null),[C,A]=n.useState(null),E=n.useCallback(e=>{e!==N.current&&(N.current=e,_(e))},[]),T=n.useCallback(e=>{e!==D.current&&(D.current=e,A(e))},[]),M=p||S,I=f||C,N=n.useRef(null),D=n.useRef(null),P=n.useRef(b),R=null!=g,O=l(g),j=l(h),F=l(y),L=n.useCallback(()=>{if(!N.current||!D.current)return;let e={placement:u,strategy:c,middleware:w};j.current&&(e.platform=j.current),(0,t.computePosition)(N.current,D.current,e).then(e=>{let t={...e,isPositioned:!1!==F.current};z.current&&!a(P.current,t)&&(P.current=t,r.flushSync(()=>{x(t)}))})},[w,u,c,j,F]);i(()=>{!1===y&&P.current.isPositioned&&(P.current.isPositioned=!1,x(e=>({...e,isPositioned:!1})))},[y]);let z=n.useRef(!1);i(()=>(z.current=!0,()=>{z.current=!1}),[]),i(()=>{if(M&&(N.current=M),I&&(D.current=I),M&&I){if(O.current)return O.current(M,I,L);L()}},[M,I,L,O,R]);let B=n.useMemo(()=>({reference:N,floating:D,setReference:E,setFloating:T}),[E,T]),U=n.useMemo(()=>({reference:M,floating:I}),[M,I]),H=n.useMemo(()=>{let e={position:c,left:0,top:0};if(!U.floating)return e;let t=s(U.floating,b.x),n=s(U.floating,b.y);return m?{...e,transform:"translate("+t+"px, "+n+"px)",...o(U.floating)>=1.5&&{willChange:"transform"}}:{position:c,left:t,top:n}},[c,m,U.floating,b.x,b.y]);return n.useMemo(()=>({...b,update:L,refs:B,elements:U,floatingStyles:H}),[b,L,B,U,H])}let c=(e,n)=>({...(0,t.offset)(e),options:[e,n]}),d=(e,n)=>({...(0,t.shift)(e),options:[e,n]}),h=(e,n)=>({...(0,t.limitShift)(e),options:[e,n]}),p=(e,n)=>({...(0,t.flip)(e),options:[e,n]}),f=(e,n)=>({...(0,t.size)(e),options:[e,n]}),m=(e,n)=>({...(0,t.hide)(e),options:[e,n]}),g=(e,n)=>({...(e=>({name:"arrow",options:e,fn(n){let{element:r,padding:i}="function"==typeof e?e(n):e;return r&&({}).hasOwnProperty.call(r,"current")?null!=r.current?(0,t.arrow)({element:r.current,padding:i}).fn(n):{}:r?(0,t.arrow)({element:r,padding:i}).fn(n):{}}}))(e),options:[e,n]})},986922:e=>{"use strict";e.s({Anchor:()=>D,Arrow:()=>R,Content:()=>P,Root:()=>N,createPopperScope:()=>f});var t=e.i(373150),n=e.i(89753),r=e.i(557667),i=e.i(208678),a=e.i(28537),o=e.i(215836),s=e.i(421349),l=e.i(281897),u=e.i(291327),c=e.i(730287),d=e.i(290479),h="Popper",[p,f]=(0,o.createContextScope)(h),[m,g]=p(h),y=e=>{let{__scopePopper:n,children:r}=e,[i,a]=t.useState(null);return(0,d.jsx)(m,{scope:n,anchor:i,onAnchorChange:a,children:r})};y.displayName=h;var b="PopperAnchor",x=t.forwardRef((e,n)=>{let{__scopePopper:r,virtualRef:i,...o}=e,l=g(b,r),u=t.useRef(null),c=(0,a.useComposedRefs)(n,u),h=t.useRef(null);return t.useEffect(()=>{let e=h.current;h.current=(null==i?void 0:i.current)||u.current,e!==h.current&&l.onAnchorChange(h.current)}),i?null:(0,d.jsx)(s.Primitive.div,{...o,ref:c})});x.displayName=b;var w="PopperContent",[k,S]=p(w),_=t.forwardRef((e,i)=>{var o,h,p,f,m,y,b,x;let{__scopePopper:S,side:_="bottom",sideOffset:C=0,align:A="center",alignOffset:E=0,arrowPadding:N=0,avoidCollisions:D=!0,collisionBoundary:P=[],collisionPadding:R=0,sticky:O="partial",hideWhenDetached:j=!1,updatePositionStrategy:F="optimized",onPlaced:L,...z}=e,B=g(w,S),[U,H]=t.useState(null),W=(0,a.useComposedRefs)(i,e=>H(e)),[V,q]=t.useState(null),G=(0,c.useSize)(V),$=null!=(b=null==G?void 0:G.width)?b:0,K=null!=(x=null==G?void 0:G.height)?x:0,Y="number"==typeof R?R:{top:0,right:0,bottom:0,left:0,...R},X=Array.isArray(P)?P:[P],Z=X.length>0,J={padding:Y,boundary:X.filter(T),altBoundary:Z},{refs:Q,floatingStyles:ee,placement:et,isPositioned:en,middlewareData:er}=(0,n.useFloating)({strategy:"fixed",placement:_+("center"!==A?"-"+A:""),whileElementsMounted:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,r.autoUpdate)(...t,{animationFrame:"always"===F})},elements:{reference:B.anchor},middleware:[(0,n.offset)({mainAxis:C+K,alignmentAxis:E}),D&&(0,n.shift)({mainAxis:!0,crossAxis:!1,limiter:"partial"===O?(0,n.limitShift)():void 0,...J}),D&&(0,n.flip)({...J}),(0,n.size)({...J,apply:e=>{let{elements:t,rects:n,availableWidth:r,availableHeight:i}=e,{width:a,height:o}=n.reference,s=t.floating.style;s.setProperty("--radix-popper-available-width","".concat(r,"px")),s.setProperty("--radix-popper-available-height","".concat(i,"px")),s.setProperty("--radix-popper-anchor-width","".concat(a,"px")),s.setProperty("--radix-popper-anchor-height","".concat(o,"px"))}}),V&&(0,n.arrow)({element:V,padding:N}),M({arrowWidth:$,arrowHeight:K}),j&&(0,n.hide)({strategy:"referenceHidden",...J})]}),[ei,ea]=I(et),eo=(0,l.useCallbackRef)(L);(0,u.useLayoutEffect)(()=>{en&&(null==eo||eo())},[en,eo]);let es=null==(o=er.arrow)?void 0:o.x,el=null==(h=er.arrow)?void 0:h.y,eu=(null==(p=er.arrow)?void 0:p.centerOffset)!==0,[ec,ed]=t.useState();return(0,u.useLayoutEffect)(()=>{U&&ed(window.getComputedStyle(U).zIndex)},[U]),(0,d.jsx)("div",{ref:Q.setFloating,"data-radix-popper-content-wrapper":"",style:{...ee,transform:en?ee.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ec,"--radix-popper-transform-origin":[null==(f=er.transformOrigin)?void 0:f.x,null==(m=er.transformOrigin)?void 0:m.y].join(" "),...(null==(y=er.hide)?void 0:y.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:(0,d.jsx)(k,{scope:S,placedSide:ei,onArrowChange:q,arrowX:es,arrowY:el,shouldHideArrow:eu,children:(0,d.jsx)(s.Primitive.div,{"data-side":ei,"data-align":ea,...z,ref:W,style:{...z.style,animation:en?void 0:"none"}})})})});_.displayName=w;var C="PopperArrow",A={top:"bottom",right:"left",bottom:"top",left:"right"},E=t.forwardRef(function(e,t){let{__scopePopper:n,...r}=e,a=S(C,n),o=A[a.placedSide];return(0,d.jsx)("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:(0,d.jsx)(i.Root,{...r,ref:t,style:{...r.style,display:"block"}})})});function T(e){return null!==e}E.displayName=C;var M=e=>({name:"transformOrigin",options:e,fn(t){var n,r,i,a,o;let{placement:s,rects:l,middlewareData:u}=t,c=(null==(n=u.arrow)?void 0:n.centerOffset)!==0,d=c?0:e.arrowWidth,h=c?0:e.arrowHeight,[p,f]=I(s),m={start:"0%",center:"50%",end:"100%"}[f],g=(null!=(a=null==(r=u.arrow)?void 0:r.x)?a:0)+d/2,y=(null!=(o=null==(i=u.arrow)?void 0:i.y)?o:0)+h/2,b="",x="";return"bottom"===p?(b=c?m:"".concat(g,"px"),x="".concat(-h,"px")):"top"===p?(b=c?m:"".concat(g,"px"),x="".concat(l.floating.height+h,"px")):"right"===p?(b="".concat(-h,"px"),x=c?m:"".concat(y,"px")):"left"===p&&(b="".concat(l.floating.width+h,"px"),x=c?m:"".concat(y,"px")),{data:{x:b,y:x}}}});function I(e){let[t,n="center"]=e.split("-");return[t,n]}var N=y,D=x,P=_,R=E},765113:e=>{"use strict";e.s({Presence:()=>i});var t=e.i(373150),n=e.i(28537),r=e.i(291327),i=e=>{let{present:i,children:o}=e,s=function(e){var n,i;let[o,s]=t.useState(),l=t.useRef(null),u=t.useRef(e),c=t.useRef("none"),[d,h]=(n=e?"mounted":"unmounted",i={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},t.useReducer((e,t)=>{let n=i[e][t];return null!=n?n:e},n));return t.useEffect(()=>{let e=a(l.current);c.current="mounted"===d?e:"none"},[d]),(0,r.useLayoutEffect)(()=>{let t=l.current,n=u.current;if(n!==e){let r=c.current,i=a(t);e?h("MOUNT"):"none"===i||(null==t?void 0:t.display)==="none"?h("UNMOUNT"):n&&r!==i?h("ANIMATION_OUT"):h("UNMOUNT"),u.current=e}},[e,h]),(0,r.useLayoutEffect)(()=>{if(o){var e;let t,n=null!=(e=o.ownerDocument.defaultView)?e:window,r=e=>{let r=a(l.current).includes(CSS.escape(e.animationName));if(e.target===o&&r&&(h("ANIMATION_END"),!u.current)){let e=o.style.animationFillMode;o.style.animationFillMode="forwards",t=n.setTimeout(()=>{"forwards"===o.style.animationFillMode&&(o.style.animationFillMode=e)})}},i=e=>{e.target===o&&(c.current=a(l.current))};return o.addEventListener("animationstart",i),o.addEventListener("animationcancel",r),o.addEventListener("animationend",r),()=>{n.clearTimeout(t),o.removeEventListener("animationstart",i),o.removeEventListener("animationcancel",r),o.removeEventListener("animationend",r)}}h("ANIMATION_END")},[o,h]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:t.useCallback(e=>{l.current=e?getComputedStyle(e):null,s(e)},[])}}(i),l="function"==typeof o?o({present:s.isPresent}):t.Children.only(o),u=(0,n.useComposedRefs)(s.ref,function(e){var t,n;let r=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,i=r&&"isReactWarning"in r&&r.isReactWarning;return i?e.ref:(i=(r=null==(n=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:n.get)&&"isReactWarning"in r&&r.isReactWarning)?e.props.ref:e.props.ref||e.ref}(l));return"function"==typeof o||s.isPresent?t.cloneElement(l,{ref:u}):null};function a(e){return(null==e?void 0:e.animationName)||"none"}i.displayName="Presence"},749109:e=>{"use strict";e.s({DismissableLayer:()=>d});var t,n=e.i(373150),r=e.i(592391),i=e.i(421349),a=e.i(28537),o=e.i(281897),s=e.i(788091),l=e.i(290479),u="dismissableLayer.update",c=n.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),d=n.forwardRef((e,d)=>{var f,m;let{disableOutsidePointerEvents:g=!1,onEscapeKeyDown:y,onPointerDownOutside:b,onFocusOutside:x,onInteractOutside:w,onDismiss:k,...S}=e,_=n.useContext(c),[C,A]=n.useState(null),E=null!=(m=null==C?void 0:C.ownerDocument)?m:null==(f=globalThis)?void 0:f.document,[,T]=n.useState({}),M=(0,a.useComposedRefs)(d,e=>A(e)),I=Array.from(_.layers),[N]=[..._.layersWithOutsidePointerEventsDisabled].slice(-1),D=I.indexOf(N),P=C?I.indexOf(C):-1,R=_.layersWithOutsidePointerEventsDisabled.size>0,O=P>=D,j=function(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null==(t=globalThis)?void 0:t.document,i=(0,o.useCallbackRef)(e),a=n.useRef(!1),s=n.useRef(()=>{});return n.useEffect(()=>{let e=e=>{if(e.target&&!a.current){let t=function(){p("dismissableLayer.pointerDownOutside",i,n,{discrete:!0})},n={originalEvent:e};"touch"===e.pointerType?(r.removeEventListener("click",s.current),s.current=t,r.addEventListener("click",s.current,{once:!0})):t()}else r.removeEventListener("click",s.current);a.current=!1},t=window.setTimeout(()=>{r.addEventListener("pointerdown",e)},0);return()=>{window.clearTimeout(t),r.removeEventListener("pointerdown",e),r.removeEventListener("click",s.current)}},[r,i]),{onPointerDownCapture:()=>a.current=!0}}(e=>{let t=e.target,n=[..._.branches].some(e=>e.contains(t));O&&!n&&(null==b||b(e),null==w||w(e),e.defaultPrevented||null==k||k())},E),F=function(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null==(t=globalThis)?void 0:t.document,i=(0,o.useCallbackRef)(e),a=n.useRef(!1);return n.useEffect(()=>{let e=e=>{e.target&&!a.current&&p("dismissableLayer.focusOutside",i,{originalEvent:e},{discrete:!1})};return r.addEventListener("focusin",e),()=>r.removeEventListener("focusin",e)},[r,i]),{onFocusCapture:()=>a.current=!0,onBlurCapture:()=>a.current=!1}}(e=>{let t=e.target;![..._.branches].some(e=>e.contains(t))&&(null==x||x(e),null==w||w(e),e.defaultPrevented||null==k||k())},E);return(0,s.useEscapeKeydown)(e=>{P===_.layers.size-1&&(null==y||y(e),!e.defaultPrevented&&k&&(e.preventDefault(),k()))},E),n.useEffect(()=>{if(C)return g&&(0===_.layersWithOutsidePointerEventsDisabled.size&&(t=E.body.style.pointerEvents,E.body.style.pointerEvents="none"),_.layersWithOutsidePointerEventsDisabled.add(C)),_.layers.add(C),h(),()=>{g&&1===_.layersWithOutsidePointerEventsDisabled.size&&(E.body.style.pointerEvents=t)}},[C,E,g,_]),n.useEffect(()=>()=>{C&&(_.layers.delete(C),_.layersWithOutsidePointerEventsDisabled.delete(C),h())},[C,_]),n.useEffect(()=>{let e=()=>T({});return document.addEventListener(u,e),()=>document.removeEventListener(u,e)},[]),(0,l.jsx)(i.Primitive.div,{...S,ref:M,style:{pointerEvents:R?O?"auto":"none":void 0,...e.style},onFocusCapture:(0,r.composeEventHandlers)(e.onFocusCapture,F.onFocusCapture),onBlurCapture:(0,r.composeEventHandlers)(e.onBlurCapture,F.onBlurCapture),onPointerDownCapture:(0,r.composeEventHandlers)(e.onPointerDownCapture,j.onPointerDownCapture)})});function h(){let e=new CustomEvent(u);document.dispatchEvent(e)}function p(e,t,n,r){let{discrete:a}=r,o=n.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&o.addEventListener(e,t,{once:!0}),a?(0,i.dispatchDiscreteCustomEvent)(o,s):o.dispatchEvent(s)}d.displayName="DismissableLayer",n.forwardRef((e,t)=>{let r=n.useContext(c),o=n.useRef(null),s=(0,a.useComposedRefs)(t,o);return n.useEffect(()=>{let e=o.current;if(e)return r.branches.add(e),()=>{r.branches.delete(e)}},[r.branches]),(0,l.jsx)(i.Primitive.div,{...e,ref:s})}).displayName="DismissableLayerBranch"},435273:e=>{"use strict";e.s({Content:()=>R,Portal:()=>P,Root:()=>N,Trigger:()=>D});var t,n=e.i(373150),r=e.i(592391),i=e.i(215836),a=e.i(698644),o=e.i(28537),s=e.i(986922),l=e.i(163512),u=e.i(765113),c=e.i(421349),d=e.i(749109),h=e.i(290479),p="HoverCard",[f,m]=(0,i.createContextScope)(p,[s.createPopperScope]),g=(0,s.createPopperScope)(),[y,b]=f(p),x=e=>{let{__scopeHoverCard:t,children:r,open:i,defaultOpen:o,onOpenChange:l,openDelay:u=700,closeDelay:c=300}=e,d=g(t),f=n.useRef(0),m=n.useRef(0),b=n.useRef(!1),x=n.useRef(!1),[w,k]=(0,a.useControllableState)({prop:i,defaultProp:null!=o&&o,onChange:l,caller:p}),S=n.useCallback(()=>{clearTimeout(m.current),f.current=window.setTimeout(()=>k(!0),u)},[u,k]),_=n.useCallback(()=>{clearTimeout(f.current),b.current||x.current||(m.current=window.setTimeout(()=>k(!1),c))},[c,k]),C=n.useCallback(()=>k(!1),[k]);return n.useEffect(()=>()=>{clearTimeout(f.current),clearTimeout(m.current)},[]),(0,h.jsx)(y,{scope:t,open:w,onOpenChange:k,onOpen:S,onClose:_,onDismiss:C,hasSelectionRef:b,isPointerDownOnContentRef:x,children:(0,h.jsx)(s.Root,{...d,children:r})})};x.displayName=p;var w="HoverCardTrigger",k=n.forwardRef((e,t)=>{let{__scopeHoverCard:n,...i}=e,a=b(w,n),o=g(n);return(0,h.jsx)(s.Anchor,{asChild:!0,...o,children:(0,h.jsx)(c.Primitive.a,{"data-state":a.open?"open":"closed",...i,ref:t,onPointerEnter:(0,r.composeEventHandlers)(e.onPointerEnter,I(a.onOpen)),onPointerLeave:(0,r.composeEventHandlers)(e.onPointerLeave,I(a.onClose)),onFocus:(0,r.composeEventHandlers)(e.onFocus,a.onOpen),onBlur:(0,r.composeEventHandlers)(e.onBlur,a.onClose),onTouchStart:(0,r.composeEventHandlers)(e.onTouchStart,e=>e.preventDefault())})})});k.displayName=w;var S="HoverCardPortal",[_,C]=f(S,{forceMount:void 0}),A=e=>{let{__scopeHoverCard:t,forceMount:n,children:r,container:i}=e,a=b(S,t);return(0,h.jsx)(_,{scope:t,forceMount:n,children:(0,h.jsx)(u.Presence,{present:n||a.open,children:(0,h.jsx)(l.Portal,{asChild:!0,container:i,children:r})})})};A.displayName=S;var E="HoverCardContent",T=n.forwardRef((e,t)=>{let n=C(E,e.__scopeHoverCard),{forceMount:i=n.forceMount,...a}=e,o=b(E,e.__scopeHoverCard);return(0,h.jsx)(u.Presence,{present:i||o.open,children:(0,h.jsx)(M,{"data-state":o.open?"open":"closed",...a,onPointerEnter:(0,r.composeEventHandlers)(e.onPointerEnter,I(o.onOpen)),onPointerLeave:(0,r.composeEventHandlers)(e.onPointerLeave,I(o.onClose)),ref:t})})});T.displayName=E;var M=n.forwardRef((e,i)=>{let{__scopeHoverCard:a,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:c,onInteractOutside:p,...f}=e,m=b(E,a),y=g(a),x=n.useRef(null),w=(0,o.useComposedRefs)(i,x),[k,S]=n.useState(!1);return n.useEffect(()=>{if(k){let e=document.body;return t=e.style.userSelect||e.style.webkitUserSelect,e.style.userSelect="none",e.style.webkitUserSelect="none",()=>{e.style.userSelect=t,e.style.webkitUserSelect=t}}},[k]),n.useEffect(()=>{if(x.current){let e=()=>{S(!1),m.isPointerDownOnContentRef.current=!1,setTimeout(()=>{var e;(null==(e=document.getSelection())?void 0:e.toString())!==""&&(m.hasSelectionRef.current=!0)})};return document.addEventListener("pointerup",e),()=>{document.removeEventListener("pointerup",e),m.hasSelectionRef.current=!1,m.isPointerDownOnContentRef.current=!1}}},[m.isPointerDownOnContentRef,m.hasSelectionRef]),n.useEffect(()=>{x.current&&(function(e){let t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});for(;n.nextNode();)t.push(n.currentNode);return t})(x.current).forEach(e=>e.setAttribute("tabindex","-1"))}),(0,h.jsx)(d.DismissableLayer,{asChild:!0,disableOutsidePointerEvents:!1,onInteractOutside:p,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:(0,r.composeEventHandlers)(c,e=>{e.preventDefault()}),onDismiss:m.onDismiss,children:(0,h.jsx)(s.Content,{...y,...f,onPointerDown:(0,r.composeEventHandlers)(f.onPointerDown,e=>{e.currentTarget.contains(e.target)&&S(!0),m.hasSelectionRef.current=!1,m.isPointerDownOnContentRef.current=!0}),ref:w,style:{...f.style,userSelect:k?"text":void 0,WebkitUserSelect:k?"text":void 0,"--radix-hover-card-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-hover-card-content-available-width":"var(--radix-popper-available-width)","--radix-hover-card-content-available-height":"var(--radix-popper-available-height)","--radix-hover-card-trigger-width":"var(--radix-popper-anchor-width)","--radix-hover-card-trigger-height":"var(--radix-popper-anchor-height)"}})})});function I(e){return t=>"touch"===t.pointerType?void 0:e()}n.forwardRef((e,t)=>{let{__scopeHoverCard:n,...r}=e,i=g(n);return(0,h.jsx)(s.Arrow,{...i,...r,ref:t})}).displayName="HoverCardArrow";var N=x,D=k,P=A,R=T},993392:e=>{"use strict";e.s({HoverCard:()=>a,HoverCardContent:()=>l,HoverCardPortal:()=>s,HoverCardTrigger:()=>o});var t=e.i(290479),n=e.i(289702),r=e.i(435273),i=e.i(373150);let a=r.Root,o=r.Trigger,s=r.Portal,l=i.forwardRef((e,i)=>{let{className:a,align:o="center",side:s="bottom",sideOffset:l=8,collisionPadding:u=20,...c}=e;return(0,t.jsx)(r.Content,{ref:i,align:o,side:s,sideOffset:l,collisionPadding:u,className:(0,n.cn)("z-50 overflow-hidden rounded-4 bg-popover-elevated text-text-primary shadow-md outline-none animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...c})});l.displayName=r.Content.displayName},935989:e=>{"use strict";e.s({Skeleton:()=>r,SkeletonLoader:()=>i});var t=e.i(290479),n=e.i(289702);function r(e){let{className:r,...i}=e;return(0,t.jsx)("div",{className:(0,n.cn)("rounded-2 bg-primary/10",r),...i})}function i(e){let{className:r,...i}=e;return(0,t.jsx)("div",{className:(0,n.cn)("rounded-2 bg-[length:400%_100%] animate-loading bg-gradient-to-r from-text-tertiary/10 via-text-tertiary/30 to-text-tertiary/10 bg-fixed",r),...i})}},776590:e=>{"use strict";e.s({CitationTooltip:()=>d});var t=e.i(290479),n=e.i(86386),r=e.i(373150),i=e.i(594315),a=e.i(993392),o=e.i(935989),s=e.i(885905),l=e.i(852951),u=e.i(814733),c=e.i(511618);let d=e=>{var d;let{children:h,align:p,id:f,citation:m,content:g}=e,[y,b]=(0,r.useState)(!1),{user:x}=(0,s.useAuth)(),{data:w,isLoading:k}=(0,l.useWorkspace)(),S=null==w?void 0:w.entities.find(e=>e.id===m.id),{data:_,isPending:C}=u.api.citations.format.useQuery({format:null!=(d=null==x?void 0:x.citationFormat)?d:"APA_7",citation:{id:m.id,url:m.url,title:m.title,author:m.author,publishedDate:m.publishedDate}},{enabled:y&&!(null==S?void 0:S.summary)&&!m.summary}),A=(0,r.useMemo)(()=>(null==S?void 0:S.summary)?S.summary:m.summary?m.summary:_&&"string"==typeof _?_:m.title?m.title:void 0,[null==S?void 0:S.summary,m.summary,_,m.title]);return(0,t.jsxs)(a.HoverCard,{openDelay:75,closeDelay:100,onOpenChange:e=>b(e),children:[(0,t.jsx)(a.HoverCardTrigger,{asChild:!0,children:(0,t.jsx)("span",{onClick:e=>{e.preventDefault()},className:"!no-underline !cursor-pointer",children:h})}),(0,t.jsx)(a.HoverCardPortal,{children:(0,t.jsx)(a.HoverCardContent,{side:"top",align:p,className:"bg-popover max-w-[300px] border border-border-primary px-6 py-5 shadow-feint text-xs leading-[19.5px] -tracking-[0.32px] rounded-6",children:k||C?(0,t.jsxs)("div",{className:"flex items-start flex-col gap-5 w-72",children:[(0,t.jsxs)("div",{className:"flex flex-row gap-3",children:[(0,t.jsx)(o.SkeletonLoader,{className:"w-16 h-7"}),(0,t.jsx)(o.SkeletonLoader,{className:"w-12 h-7"}),(0,t.jsx)(o.SkeletonLoader,{className:"w-9 h-7"}),(0,t.jsx)(o.SkeletonLoader,{className:"w-13 h-7"}),(0,t.jsx)(o.SkeletonLoader,{className:"w-16 h-7"}),(0,t.jsx)(o.SkeletonLoader,{className:"w-9 h-7"})]}),(0,t.jsxs)("div",{className:"flex flex-row gap-4",children:[(0,t.jsx)(o.SkeletonLoader,{className:"w-9 h-7"}),(0,t.jsx)(o.SkeletonLoader,{className:"w-10 h-7"}),(0,t.jsx)(o.SkeletonLoader,{className:"w-8 h-7"}),(0,t.jsx)(o.SkeletonLoader,{className:"w-15 h-7"}),(0,t.jsx)(o.SkeletonLoader,{className:"w-16 h-7"}),(0,t.jsx)(o.SkeletonLoader,{className:"w-[60px] h-7"})]}),(0,t.jsxs)("div",{className:"flex flex-row gap-4",children:[(0,t.jsx)(o.SkeletonLoader,{className:"w-10 h-7"}),(0,t.jsx)(o.SkeletonLoader,{className:"w-16 h-7"}),(0,t.jsx)(o.SkeletonLoader,{className:"w-9 h-7"}),(0,t.jsx)(o.SkeletonLoader,{className:"w-16 h-7"}),(0,t.jsx)(o.SkeletonLoader,{className:"w-13 h-7"})]})]}):(0,t.jsxs)("div",{className:"group relative",children:[(0,t.jsx)(n.default,{href:"#".concat(f),target:"_self",children:(0,t.jsx)("div",{className:"line-clamp-[7] text-text-primary dark:text-text-secondary pr-10",children:(0,t.jsx)("p",{children:y&&A?(0,t.jsx)("span",{className:"prose text-sm text-text-primary prose-a:text-text-primary prose-a:whitespace-pre-wrap break-words",dangerouslySetInnerHTML:{__html:(0,c.makeUrlsClickable)(A)}}):g})})}),_&&"string"==typeof _&&(0,t.jsx)(i.CopyCitationButton,{content:_,className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity bg-background-primary/80 backdrop-blur-sm"})]})})})]})}},145912:e=>{"use strict";e.s({default:()=>c,getCitation:()=>d});var t=e.i(290479),n=e.i(691283);e.i(131841);var r=e.i(968617),i=e.i(184782),a=e.i(86386),o=e.i(885905),s=e.i(842951),l=e.i(776590);let u=e=>{let t=["","","","","","","","","",""];return e.toString().split("").map(e=>t[Number.parseInt(e,10)]).join("")},c=n.Node.create({name:"citation",group:"inline",inline:!0,selectable:!0,addAttributes:()=>({citation:{default:{url:"",title:"",author:"",publishedDate:"",order:0},parseHTML:e=>{let t=e.getAttribute("data-citation");return t?JSON.parse(t):null},renderHTML:e=>({"data-citation":JSON.stringify(e.citation)})}}),parseHTML:()=>[{tag:"react-component"}],addCommands:()=>({addCitation:e=>t=>{let{commands:n,state:r}=t,{to:i,from:a}=r.selection,o=r.doc,s=i,l=o.textBetween(a,i).trim();if(/[.!?]$/.test(l)&&a!==i){let e=i-1;for(;e>=a;){let t=o.textBetween(e,e+1);if(/[.!?]/.test(t)){s=e;break}e--}}else if(i<o.content.size){let e=i,t=i,n=o.textBetween(i,i+1);if(RegExp("[\\p{L}\\p{N}'-]","u").test(n))for(;t<o.content.size;){let e=o.textBetween(t,t+1);if(!RegExp("[\\p{L}\\p{N}'-]","u").test(e))break;t++}s=t,e=t;let r=!1;for(;e<o.content.size&&!r&&e-i<=300;){let t=o.textBetween(e,e+1);if(/[.!?]/.test(t)){s=e,r=!0;break}if("\n"===t||"\r"===t)break;e++}}let u=[],c=!0;if(0===s)c=!1;else if(s>0){let e=o.textBetween(s-1,s);(" "===e||"\n"===e)&&(c=!1)}return c&&u.push({type:"text",text:" "}),u.push({type:"citation",attrs:e}),n.insertContentAt(s,u)}}),renderHTML(e){let{HTMLAttributes:t}=e;return["react-component",(0,n.mergeAttributes)(t)]},addNodeView:()=>(0,i.ReactNodeViewRenderer)(h),addProseMirrorPlugins(){return[new r.Plugin({key:new r.PluginKey("citation"),appendTransaction:(e,t,r)=>{let{tr:i,doc:a}=r;return e.some(e=>e.docChanged)&&(0,n.findChildren)(a,e=>e.type.name===this.name).forEach((e,t)=>{let{node:n,pos:r}=e;i.setNodeMarkup(r,void 0,{citation:{...n.attrs.citation,order:t}})}),i}})]}}),d=(e,t)=>"v1"===e.version?((e,t)=>{let{title:n,publishedDate:r,publishedYear:i,order:a,authors:o}=e,s=null!=i?i:r?new Date(r).getFullYear():null,l=n||"Unknown Author";switch((null==o?void 0:o.length)&&(l=o.length>3?"".concat(o[0]," et al."):o.length>1?(null==o?void 0:o.slice(0,-1).join(", "))+", and "+o[(null==o?void 0:o.length)-1]:o[0]),t){case"MLA_9":return"(".concat(l,")");case"HARVARD":return"(".concat(l,", ").concat(s||"no date",")");case"CSE":case"CHICAGO":return"(".concat(l," ").concat(s||"n.d.",")");case"APA_7":{let e="Unknown Author";if(null==o?void 0:o.length){var c,d,h,p;e=o.length>3?"".concat(null==(c=o[0])?void 0:c.split(" ").pop()," et al."):o.length>1?o.slice(0,-1).map(e=>null==e?void 0:e.split(" ").pop()).join(", ")+", and "+(null==(d=o[o.length-1])?void 0:d.split(" ").pop()):null!=(p=null==(h=o[0])?void 0:h.split(" ").pop())?p:""}return"(".concat(e,", ").concat(s||"n.d.",")")}case"ASA":case"ACS":default:return"(".concat(l,", ").concat(s||"n.d.",")");case"IEEE":return"[".concat((null!=a?a:0)+1,"]");case"AMA":case"VANCOUVER":return u((null!=a?a:0)+1)}})(e,t):((e,t)=>{let{author:n,title:r,publishedDate:i,publishedYear:a,order:o}=e,s=null!=a?a:i?new Date(i).getFullYear():null,l=(null!=n?n:r)||"Unknown Author";switch(t){case"MLA_9":return"(".concat(l,")");case"HARVARD":return"(".concat(l,", ").concat(s||"no date",")");case"CSE":case"CHICAGO":return"(".concat(l," ").concat(s||"n.d.",")");case"APA_7":{var c,d,h,p,f,m,g,y,b,x,w,k;let e="Unknown Author";if(null==l?void 0:l.includes(" et al."))e="".concat(null==l||null==(h=l.split)||null==(d=h.call(l," et al.")[0])||null==(c=d.split)?void 0:c.call(d," ").pop()," et al.");else if(null==l?void 0:l.includes(", and ")){let t=null==l||null==(p=l.split)?void 0:p.call(l,", ");e="".concat(null==(m=t[0])||null==(f=m.split)?void 0:f.call(m," ").pop(),", ").concat(null==(y=t[1])||null==(g=y.split)?void 0:g.call(y," ").pop(),", and ").concat(null==(x=t[t.length-1])||null==(b=x.split)?void 0:b.call(x," ").pop())}else l&&"Unknown Author"!==l&&(e=null!=(k=null==l||null==(w=l.split)?void 0:w.call(l," ").pop())?k:"");return"(".concat(e,", ").concat(s||"n.d.",")")}case"ASA":case"ACS":default:return"(".concat(l,", ").concat(s||"n.d.",")");case"IEEE":return"[".concat((null!=o?o:0)+1,"]");case"AMA":case"VANCOUVER":return u((null!=o?o:0)+1)}})(e,t),h=e=>{var n;let{node:r}=e,{citation:u}=r.attrs,c=(0,s.md5)(u.url),{user:h}=(0,o.useAuth)(),p=d(u,null!=(n=null==h?void 0:h.citationFormat)?n:"APA_7");return(0,t.jsx)(i.NodeViewWrapper,{as:"span",className:"not-prose font-sans",children:(0,t.jsx)(l.CitationTooltip,{citation:u,content:p,id:c,children:(0,t.jsx)(a.default,{href:"#".concat(c),target:"_self",children:p})})})}},414314:e=>{"use strict";e.s({activeElement:()=>n,contains:()=>r,getDocument:()=>f,getPlatform:()=>i,getTarget:()=>g,getUserAgent:()=>a,isEventTargetWithin:()=>m,isMac:()=>c,isMouseLikePointerType:()=>d,isReactEvent:()=>h,isRootElement:()=>p,isSafari:()=>l,isTypeableCombobox:()=>x,isTypeableElement:()=>y,isVirtualClick:()=>o,isVirtualPointerEvent:()=>s,stopEvent:()=>b});var t=e.i(184678);function n(e){let t=e.activeElement;for(;(null==(n=t)||null==(n=n.shadowRoot)?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function r(e,n){if(!e||!n)return!1;let r=null==n.getRootNode?void 0:n.getRootNode();if(e.contains(n))return!0;if(r&&(0,t.isShadowRoot)(r)){let t=n;for(;t;){if(e===t)return!0;t=t.parentNode||t.host}}return!1}function i(){let e=navigator.userAgentData;return null!=e&&e.platform?e.platform:navigator.platform}function a(){let e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(e=>{let{brand:t,version:n}=e;return t+"/"+n}).join(" "):navigator.userAgent}function o(e){return 0===e.mozInputSource&&!!e.isTrusted||(u()&&e.pointerType?"click"===e.type&&1===e.buttons:0===e.detail&&!e.pointerType)}function s(e){return!a().includes("jsdom/")&&(!u()&&0===e.width&&0===e.height||u()&&1===e.width&&1===e.height&&0===e.pressure&&0===e.detail&&"mouse"===e.pointerType||e.width<1&&e.height<1&&0===e.pressure&&0===e.detail&&"touch"===e.pointerType)}function l(){return/apple/i.test(navigator.vendor)}function u(){let e=/android/i;return e.test(i())||e.test(a())}function c(){return i().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function d(e,t){let n=["mouse","pen"];return t||n.push("",void 0),n.includes(e)}function h(e){return"nativeEvent"in e}function p(e){return e.matches("html,body")}function f(e){return(null==e?void 0:e.ownerDocument)||document}function m(e,t){return null!=t&&("composedPath"in e?e.composedPath().includes(t):null!=e.target&&t.contains(e.target))}function g(e){return"composedPath"in e?e.composedPath()[0]:e.target}function y(e){return(0,t.isHTMLElement)(e)&&e.matches("input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])")}function b(e){e.preventDefault(),e.stopPropagation()}function x(e){return!!e&&"combobox"===e.getAttribute("role")&&y(e)}},209768:e=>{"use strict";e.s({focusable:()=>E,isTabbable:()=>T,tabbable:()=>A});var t='input:not([inert]),select:not([inert]),textarea:not([inert]),a[href]:not([inert]),button:not([inert]),[tabindex]:not(slot):not([inert]),audio[controls]:not([inert]),video[controls]:not([inert]),[contenteditable]:not([contenteditable="false"]):not([inert]),details>summary:first-of-type:not([inert]),details:not([inert])',n="undefined"==typeof Element,r=n?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,i=!n&&Element.prototype.getRootNode?function(e){var t;return null==e||null==(t=e.getRootNode)?void 0:t.call(e)}:function(e){return null==e?void 0:e.ownerDocument},a=function e(t,n){void 0===n&&(n=!0);var r,i=null==t||null==(r=t.getAttribute)?void 0:r.call(t,"inert");return""===i||"true"===i||n&&t&&e(t.parentNode)},o=function(e){var t,n=null==e||null==(t=e.getAttribute)?void 0:t.call(e,"contenteditable");return""===n||"true"===n},s=function(e,n,i){if(a(e))return[];var o=Array.prototype.slice.apply(e.querySelectorAll(t));return n&&r.call(e,t)&&o.unshift(e),o=o.filter(i)},l=function e(n,i,o){for(var s=[],l=Array.from(n);l.length;){var u=l.shift();if(!a(u,!1))if("SLOT"===u.tagName){var c=u.assignedElements(),d=e(c.length?c:u.children,!0,o);o.flatten?s.push.apply(s,d):s.push({scopeParent:u,candidates:d})}else{r.call(u,t)&&o.filter(u)&&(i||!n.includes(u))&&s.push(u);var h=u.shadowRoot||"function"==typeof o.getShadowRoot&&o.getShadowRoot(u),p=!a(h,!1)&&(!o.shadowRootFilter||o.shadowRootFilter(u));if(h&&p){var f=e(!0===h?u.children:h.children,!0,o);o.flatten?s.push.apply(s,f):s.push({scopeParent:u,candidates:f})}else l.unshift.apply(l,u.children)}}return s},u=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},c=function(e){if(!e)throw Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||o(e))&&!u(e)?0:e.tabIndex},d=function(e,t){var n=c(e);return n<0&&t&&!u(e)?0:n},h=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},p=function(e){return"INPUT"===e.tagName},f=function(e,t){for(var n=0;n<e.length;n++)if(e[n].checked&&e[n].form===t)return e[n]},m=function(e){if(!e.name)return!0;var t,n=e.form||i(e),r=function(e){return n.querySelectorAll('input[type="radio"][name="'+e+'"]')};if("undefined"!=typeof window&&void 0!==window.CSS&&"function"==typeof window.CSS.escape)t=r(window.CSS.escape(e.name));else try{t=r(e.name)}catch(e){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",e.message),!1}var a=f(t,e.form);return!a||a===e},g=function(e){return p(e)&&"radio"===e.type&&!m(e)},y=function(e){var t,n,r,a,o,s,l,u=e&&i(e),c=null==(t=u)?void 0:t.host,d=!1;if(u&&u!==e)for(d=!!(null!=(n=c)&&null!=(r=n.ownerDocument)&&r.contains(c)||null!=e&&null!=(a=e.ownerDocument)&&a.contains(e));!d&&c;)d=!!(null!=(s=c=null==(o=u=i(c))?void 0:o.host)&&null!=(l=s.ownerDocument)&&l.contains(c));return d},b=function(e){var t=e.getBoundingClientRect(),n=t.width,r=t.height;return 0===n&&0===r},x=function(e,t){var n=t.displayCheck,a=t.getShadowRoot;if("hidden"===getComputedStyle(e).visibility)return!0;var o=r.call(e,"details>summary:first-of-type")?e.parentElement:e;if(r.call(o,"details:not([open]) *"))return!0;if(n&&"full"!==n&&"legacy-full"!==n){if("non-zero-area"===n)return b(e)}else{if("function"==typeof a){for(var s=e;e;){var l=e.parentElement,u=i(e);if(l&&!l.shadowRoot&&!0===a(l))return b(e);e=e.assignedSlot?e.assignedSlot:l||u===e.ownerDocument?l:u.host}e=s}if(y(e))return!e.getClientRects().length;if("legacy-full"!==n)return!0}return!1},w=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if("FIELDSET"===t.tagName&&t.disabled){for(var n=0;n<t.children.length;n++){var i=t.children.item(n);if("LEGEND"===i.tagName)return!!r.call(t,"fieldset[disabled] *")||!i.contains(e)}return!0}t=t.parentElement}return!1},k=function(e,t){return!(t.disabled||a(t)||p(t)&&"hidden"===t.type||x(t,e)||"DETAILS"===t.tagName&&Array.prototype.slice.apply(t.children).some(function(e){return"SUMMARY"===e.tagName})||w(t))},S=function(e,t){return!(g(t)||0>c(t))&&!!k(e,t)},_=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!isNaN(t)||!!(t>=0)},C=function e(t){var n=[],r=[];return t.forEach(function(t,i){var a=!!t.scopeParent,o=a?t.scopeParent:t,s=d(o,a),l=a?e(t.candidates):o;0===s?a?n.push.apply(n,l):n.push(o):r.push({documentOrder:i,tabIndex:s,item:t,isScope:a,content:l})}),r.sort(h).reduce(function(e,t){return t.isScope?e.push.apply(e,t.content):e.push(t.content),e},[]).concat(n)},A=function(e,t){return C((t=t||{}).getShadowRoot?l([e],t.includeContainer,{filter:S.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:_}):s(e,t.includeContainer,S.bind(null,t)))},E=function(e,t){return(t=t||{}).getShadowRoot?l([e],t.includeContainer,{filter:k.bind(null,t),flatten:!0,getShadowRoot:t.getShadowRoot}):s(e,t.includeContainer,k.bind(null,t))},T=function(e,n){if(n=n||{},!e)throw Error("No node provided");return!1!==r.call(e,t)&&S(n,e)}},979692:e=>{"use strict";e.s({flip:()=>h,inline:()=>p,offset:()=>c,shift:()=>d,useFloating:()=>u});var t=e.i(557667),n=e.i(373150),r=e.i(784445),i="undefined"!=typeof document?n.useLayoutEffect:function(){};function a(e,t){let n,r,i;if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if((n=e.length)!==t.length)return!1;for(r=n;0!=r--;)if(!a(e[r],t[r]))return!1;return!0}if((n=(i=Object.keys(e)).length)!==Object.keys(t).length)return!1;for(r=n;0!=r--;)if(!({}).hasOwnProperty.call(t,i[r]))return!1;for(r=n;0!=r--;){let n=i[r];if(("_owner"!==n||!e.$$typeof)&&!a(e[n],t[n]))return!1}return!0}return e!=e&&t!=t}function o(e){return"undefined"==typeof window?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function s(e,t){let n=o(e);return Math.round(t*n)/n}function l(e){let t=n.useRef(e);return i(()=>{t.current=e}),t}function u(e){void 0===e&&(e={});let{placement:u="bottom",strategy:c="absolute",middleware:d=[],platform:h,elements:{reference:p,floating:f}={},transform:m=!0,whileElementsMounted:g,open:y}=e,[b,x]=n.useState({x:0,y:0,strategy:c,placement:u,middlewareData:{},isPositioned:!1}),[w,k]=n.useState(d);a(w,d)||k(d);let[S,_]=n.useState(null),[C,A]=n.useState(null),E=n.useCallback(e=>{e!==N.current&&(N.current=e,_(e))},[]),T=n.useCallback(e=>{e!==D.current&&(D.current=e,A(e))},[]),M=p||S,I=f||C,N=n.useRef(null),D=n.useRef(null),P=n.useRef(b),R=null!=g,O=l(g),j=l(h),F=l(y),L=n.useCallback(()=>{if(!N.current||!D.current)return;let e={placement:u,strategy:c,middleware:w};j.current&&(e.platform=j.current),(0,t.computePosition)(N.current,D.current,e).then(e=>{let t={...e,isPositioned:!1!==F.current};z.current&&!a(P.current,t)&&(P.current=t,r.flushSync(()=>{x(t)}))})},[w,u,c,j,F]);i(()=>{!1===y&&P.current.isPositioned&&(P.current.isPositioned=!1,x(e=>({...e,isPositioned:!1})))},[y]);let z=n.useRef(!1);i(()=>(z.current=!0,()=>{z.current=!1}),[]),i(()=>{if(M&&(N.current=M),I&&(D.current=I),M&&I){if(O.current)return O.current(M,I,L);L()}},[M,I,L,O,R]);let B=n.useMemo(()=>({reference:N,floating:D,setReference:E,setFloating:T}),[E,T]),U=n.useMemo(()=>({reference:M,floating:I}),[M,I]),H=n.useMemo(()=>{let e={position:c,left:0,top:0};if(!U.floating)return e;let t=s(U.floating,b.x),n=s(U.floating,b.y);return m?{...e,transform:"translate("+t+"px, "+n+"px)",...o(U.floating)>=1.5&&{willChange:"transform"}}:{position:c,left:t,top:n}},[c,m,U.floating,b.x,b.y]);return n.useMemo(()=>({...b,update:L,refs:B,elements:U,floatingStyles:H}),[b,L,B,U,H])}let c=(e,n)=>({...(0,t.offset)(e),options:[e,n]}),d=(e,n)=>({...(0,t.shift)(e),options:[e,n]}),h=(e,n)=>({...(0,t.flip)(e),options:[e,n]}),p=(e,n)=>({...(0,t.inline)(e),options:[e,n]})},919818:e=>{"use strict";e.s({useDismiss:()=>w,useFloating:()=>k,useInteractions:()=>A});var t=e.i(373150),n=e.i(414314),r=(e.i(516371),e.i(184678));e.i(209768),e.i(784445);var i=e.i(979692);e.i(557667);let a={...t},o=a.useInsertionEffect||(e=>e());function s(e){let n=t.useRef(()=>{});return o(()=>{n.current=e}),t.useCallback(function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return null==n.current?void 0:n.current(...t)},[])}var l="undefined"!=typeof document?t.useLayoutEffect:t.useEffect;let u=!1,c=0,d=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+c++,h=a.useId||function(){let[e,n]=t.useState(()=>u?d():void 0);return l(()=>{null==e&&n(d())},[]),t.useEffect(()=>{u=!0},[]),e},p=t.createContext(null),f=t.createContext(null),m=()=>t.useContext(f);function g(e,t){let n=e.filter(e=>{var n;return e.parentId===t&&(null==(n=e.context)?void 0:n.open)}),r=n;for(;r.length;)r=e.filter(e=>{var t;return null==(t=r)?void 0:t.some(t=>{var n;return e.parentId===t.id&&(null==(n=e.context)?void 0:n.open)})}),n=n.concat(r);return n}let y={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},b={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},x=e=>{var t,n;return{escapeKey:"boolean"==typeof e?e:null!=(t=null==e?void 0:e.escapeKey)&&t,outsidePress:"boolean"==typeof e?e:null==(n=null==e?void 0:e.outsidePress)||n}};function w(e,i){void 0===i&&(i={});let{open:a,onOpenChange:o,elements:l,dataRef:u}=e,{enabled:c=!0,escapeKey:d=!0,outsidePress:h=!0,outsidePressEvent:p="pointerdown",referencePress:f=!1,referencePressEvent:w="pointerdown",ancestorScroll:k=!1,bubbles:S,capture:_}=i,C=m(),A=s("function"==typeof h?h:()=>!1),E="function"==typeof h?A:h,T=t.useRef(!1),M=t.useRef(!1),{escapeKey:I,outsidePress:N}=x(S),{escapeKey:D,outsidePress:P}=x(_),R=t.useRef(!1),O=s(e=>{var t;if(!a||!c||!d||"Escape"!==e.key||R.current)return;let r=null==(t=u.current.floatingContext)?void 0:t.nodeId,i=C?g(C.nodesRef.current,r):[];if(!I&&(e.stopPropagation(),i.length>0)){let e=!0;if(i.forEach(t=>{var n;if(null!=(n=t.context)&&n.open&&!t.context.dataRef.current.__escapeKeyBubbles){e=!1;return}}),!e)return}o(!1,(0,n.isReactEvent)(e)?e.nativeEvent:e,"escape-key")}),j=s(e=>{var t;let r=()=>{var t;O(e),null==(t=(0,n.getTarget)(e))||t.removeEventListener("keydown",r)};null==(t=(0,n.getTarget)(e))||t.addEventListener("keydown",r)}),F=s(e=>{var t;let i=T.current;T.current=!1;let a=M.current;if(M.current=!1,"click"===p&&a||i||"function"==typeof E&&!E(e))return;let s=(0,n.getTarget)(e),c=(0,n.getDocument)(l.floating).querySelectorAll("[data-floating-ui-inert]"),d=(0,r.isElement)(s)?s:null;for(;d&&!(0,r.isLastTraversableNode)(d);){let e=(0,r.getParentNode)(d);if((0,r.isLastTraversableNode)(e)||!(0,r.isElement)(e))break;d=e}if(c.length&&(0,r.isElement)(s)&&!(0,n.isRootElement)(s)&&!(0,n.contains)(s,l.floating)&&Array.from(c).every(e=>!(0,n.contains)(d,e)))return;if((0,r.isHTMLElement)(s)&&B){let t=s.clientWidth>0&&s.scrollWidth>s.clientWidth,n=s.clientHeight>0&&s.scrollHeight>s.clientHeight,i=n&&e.offsetX>s.clientWidth;if(n&&"rtl"===(0,r.getComputedStyle)(s).direction&&(i=e.offsetX<=s.offsetWidth-s.clientWidth),i||t&&e.offsetY>s.clientHeight)return}let h=null==(t=u.current.floatingContext)?void 0:t.nodeId,f=C&&g(C.nodesRef.current,h).some(t=>{var r;return(0,n.isEventTargetWithin)(e,null==(r=t.context)?void 0:r.elements.floating)});if((0,n.isEventTargetWithin)(e,l.floating)||(0,n.isEventTargetWithin)(e,l.domReference)||f)return;let m=C?g(C.nodesRef.current,h):[];if(m.length>0){let e=!0;if(m.forEach(t=>{var n;if(null!=(n=t.context)&&n.open&&!t.context.dataRef.current.__outsidePressBubbles){e=!1;return}}),!e)return}o(!1,e,"outside-press")}),L=s(e=>{var t;let r=()=>{var t;F(e),null==(t=(0,n.getTarget)(e))||t.removeEventListener(p,r)};null==(t=(0,n.getTarget)(e))||t.addEventListener(p,r)});t.useEffect(()=>{if(!a||!c)return;u.current.__escapeKeyBubbles=I,u.current.__outsidePressBubbles=N;let e=-1;function t(e){o(!1,e,"ancestor-scroll")}function i(){window.clearTimeout(e),R.current=!0}function s(){e=window.setTimeout(()=>{R.current=!1},5*!!(0,r.isWebKit)())}let h=(0,n.getDocument)(l.floating);d&&(h.addEventListener("keydown",D?j:O,D),h.addEventListener("compositionstart",i),h.addEventListener("compositionend",s)),E&&h.addEventListener(p,P?L:F,P);let f=[];return k&&((0,r.isElement)(l.domReference)&&(f=(0,r.getOverflowAncestors)(l.domReference)),(0,r.isElement)(l.floating)&&(f=f.concat((0,r.getOverflowAncestors)(l.floating))),!(0,r.isElement)(l.reference)&&l.reference&&l.reference.contextElement&&(f=f.concat((0,r.getOverflowAncestors)(l.reference.contextElement)))),(f=f.filter(e=>{var t;return e!==(null==(t=h.defaultView)?void 0:t.visualViewport)})).forEach(e=>{e.addEventListener("scroll",t,{passive:!0})}),()=>{d&&(h.removeEventListener("keydown",D?j:O,D),h.removeEventListener("compositionstart",i),h.removeEventListener("compositionend",s)),E&&h.removeEventListener(p,P?L:F,P),f.forEach(e=>{e.removeEventListener("scroll",t)}),window.clearTimeout(e)}},[u,l,d,E,p,a,o,k,c,I,N,O,D,j,F,P,L]),t.useEffect(()=>{T.current=!1},[E,p]);let z=t.useMemo(()=>({onKeyDown:O,[y[w]]:e=>{f&&o(!1,e.nativeEvent,"reference-press")}}),[O,o,f,w]),B=t.useMemo(()=>({onKeyDown:O,onMouseDown(){M.current=!0},onMouseUp(){M.current=!0},[b[p]]:()=>{T.current=!0}}),[O,p]);return t.useMemo(()=>c?{reference:z,floating:B}:{},[c,z,B])}function k(e){void 0===e&&(e={});let{nodeId:n}=e,a=function(e){var n;let{open:r=!1,onOpenChange:i,elements:a}=e,o=h(),l=t.useRef({}),[u]=t.useState(()=>(function(){let e=new Map;return{emit(t,n){var r;null==(r=e.get(t))||r.forEach(e=>e(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,(null==(r=e.get(t))?void 0:r.filter(e=>e!==n))||[])}}})()),c=null!=((null==(n=t.useContext(p))?void 0:n.id)||null),[d,f]=t.useState(a.reference),m=s((e,t,n)=>{l.current.openEvent=e?t:void 0,u.emit("openchange",{open:e,event:t,reason:n,nested:c}),null==i||i(e,t,n)}),g=t.useMemo(()=>({setPositionReference:f}),[]),y=t.useMemo(()=>({reference:d||a.reference||null,floating:a.floating||null,domReference:a.reference}),[d,a.reference,a.floating]);return t.useMemo(()=>({dataRef:l,open:r,onOpenChange:m,elements:y,events:u,floatingId:o,refs:g}),[r,m,y,u,o,g])}({...e,elements:{reference:null,floating:null,...e.elements}}),o=e.rootContext||a,u=o.elements,[c,d]=t.useState(null),[f,g]=t.useState(null),y=(null==u?void 0:u.domReference)||c,b=t.useRef(null),x=m();l(()=>{y&&(b.current=y)},[y]);let w=(0,i.useFloating)({...e,elements:{...u,...f&&{reference:f}}}),k=t.useCallback(e=>{let t=(0,r.isElement)(e)?{getBoundingClientRect:()=>e.getBoundingClientRect(),contextElement:e}:e;g(t),w.refs.setReference(t)},[w.refs]),S=t.useCallback(e=>{((0,r.isElement)(e)||null===e)&&(b.current=e,d(e)),((0,r.isElement)(w.refs.reference.current)||null===w.refs.reference.current||null!==e&&!(0,r.isElement)(e))&&w.refs.setReference(e)},[w.refs]),_=t.useMemo(()=>({...w.refs,setReference:S,setPositionReference:k,domReference:b}),[w.refs,S,k]),C=t.useMemo(()=>({...w.elements,domReference:y}),[w.elements,y]),A=t.useMemo(()=>({...w,...o,refs:_,elements:C,nodeId:n}),[w,_,C,n,o]);return l(()=>{o.dataRef.current.floatingContext=A;let e=null==x?void 0:x.nodesRef.current.find(e=>e.id===n);e&&(e.context=A)}),t.useMemo(()=>({...w,context:A,refs:_,elements:C}),[w,_,C,A])}let S="active",_="selected";function C(e,t,n){let r=new Map,i="item"===n,a=e;if(i&&e){let{[S]:t,[_]:n,...r}=e;a=r}return{..."floating"===n&&{tabIndex:-1,"data-floating-ui-focusable":""},...a,...t.map(t=>{let r=t?t[n]:null;return"function"==typeof r?e?r(e):null:r}).concat(e).reduce((e,t)=>(t&&Object.entries(t).forEach(t=>{let[n,a]=t;if(!(i&&[S,_].includes(n)))if(0===n.indexOf("on")){if(r.has(n)||r.set(n,[]),"function"==typeof a){var o;null==(o=r.get(n))||o.push(a),e[n]=function(){for(var e,t=arguments.length,i=Array(t),a=0;a<t;a++)i[a]=arguments[a];return null==(e=r.get(n))?void 0:e.map(e=>e(...i)).find(e=>void 0!==e)}}}else e[n]=a}),e),{})}}function A(e){void 0===e&&(e=[]);let n=e.map(e=>null==e?void 0:e.reference),r=e.map(e=>null==e?void 0:e.floating),i=e.map(e=>null==e?void 0:e.item),a=t.useCallback(t=>C(t,e,"reference"),n),o=t.useCallback(t=>C(t,e,"floating"),r),s=t.useCallback(t=>C(t,e,"item"),i);return t.useMemo(()=>({getReferenceProps:a,getFloatingProps:o,getItemProps:s}),[a,o,s])}},443948:e=>{"use strict";function t(e,t,n){var r;let i,a=null!=(r=n.initialDeps)?r:[];function o(){var r,o,s,l;let u,c;n.key&&(null==(r=n.debug)?void 0:r.call(n))&&(u=Date.now());let d=e();if(!(d.length!==a.length||d.some((e,t)=>a[t]!==e)))return i;if(a=d,n.key&&(null==(o=n.debug)?void 0:o.call(n))&&(c=Date.now()),i=t(...d),n.key&&(null==(s=n.debug)?void 0:s.call(n))){let e=Math.round((Date.now()-u)*100)/100,t=Math.round((Date.now()-c)*100)/100,r=t/16,i=(e,t)=>{for(e=String(e);e.length<t;)e=" "+e;return e};console.info("%c ".concat(i(t,5)," /").concat(i(e,5)," ms"),"\n            font-size: .6rem;\n            font-weight: bold;\n            color: hsl(".concat(Math.max(0,Math.min(120-120*r,120)),"deg 100% 31%);"),null==n?void 0:n.key)}return null==(l=null==n?void 0:n.onChange)||l.call(n,i),i}return o.updateDeps=e=>{a=e},o}function n(e,t){if(void 0!==e)return e;throw Error("Unexpected undefined".concat(t?": ".concat(t):""))}e.s({approxEqual:()=>r,debounce:()=>i,memo:()=>t,notUndefined:()=>n});let r=(e,t)=>1.01>Math.abs(e-t),i=(e,t,n)=>{let r;return function(){for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];e.clearTimeout(r),r=e.setTimeout(()=>t.apply(this,a),n)}}},567903:e=>{"use strict";e.s({Virtualizer:()=>f,elementScroll:()=>p,observeElementOffset:()=>u,observeElementRect:()=>a,observeWindowOffset:()=>c,observeWindowRect:()=>s,windowScroll:()=>h});var t=e.i(443948);let n=e=>{let{offsetWidth:t,offsetHeight:n}=e;return{width:t,height:n}},r=e=>e,i=e=>{let t=Math.max(e.startIndex-e.overscan,0),n=Math.min(e.endIndex+e.overscan,e.count-1),r=[];for(let e=t;e<=n;e++)r.push(e);return r},a=(e,t)=>{let r=e.scrollElement;if(!r)return;let i=e.targetWindow;if(!i)return;let a=e=>{let{width:n,height:r}=e;t({width:Math.round(n),height:Math.round(r)})};if(a(n(r)),!i.ResizeObserver)return()=>{};let o=new i.ResizeObserver(t=>{let i=()=>{let e=t[0];if(null==e?void 0:e.borderBoxSize){let t=e.borderBoxSize[0];if(t)return void a({width:t.inlineSize,height:t.blockSize})}a(n(r))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(i):i()});return o.observe(r,{box:"border-box"}),()=>{o.unobserve(r)}},o={passive:!0},s=(e,t)=>{let n=e.scrollElement;if(!n)return;let r=()=>{t({width:n.innerWidth,height:n.innerHeight})};return r(),n.addEventListener("resize",r,o),()=>{n.removeEventListener("resize",r)}},l="undefined"==typeof window||"onscrollend"in window,u=(e,n)=>{let r=e.scrollElement;if(!r)return;let i=e.targetWindow;if(!i)return;let a=0,s=e.options.useScrollendEvent&&l?()=>void 0:(0,t.debounce)(i,()=>{n(a,!1)},e.options.isScrollingResetDelay),u=t=>()=>{let{horizontal:i,isRtl:o}=e.options;a=i?r.scrollLeft*(o&&-1||1):r.scrollTop,s(),n(a,t)},c=u(!0),d=u(!1);d(),r.addEventListener("scroll",c,o);let h=e.options.useScrollendEvent&&l;return h&&r.addEventListener("scrollend",d,o),()=>{r.removeEventListener("scroll",c),h&&r.removeEventListener("scrollend",d)}},c=(e,n)=>{let r=e.scrollElement;if(!r)return;let i=e.targetWindow;if(!i)return;let a=0,s=e.options.useScrollendEvent&&l?()=>void 0:(0,t.debounce)(i,()=>{n(a,!1)},e.options.isScrollingResetDelay),u=t=>()=>{a=r[e.options.horizontal?"scrollX":"scrollY"],s(),n(a,t)},c=u(!0),d=u(!1);d(),r.addEventListener("scroll",c,o);let h=e.options.useScrollendEvent&&l;return h&&r.addEventListener("scrollend",d,o),()=>{r.removeEventListener("scroll",c),h&&r.removeEventListener("scrollend",d)}},d=(e,t,n)=>{if(null==t?void 0:t.borderBoxSize){let e=t.borderBoxSize[0];if(e)return Math.round(e[n.options.horizontal?"inlineSize":"blockSize"])}return e[n.options.horizontal?"offsetWidth":"offsetHeight"]},h=(e,t,n)=>{var r,i;let{adjustments:a=0,behavior:o}=t;null==(i=null==(r=n.scrollElement)?void 0:r.scrollTo)||i.call(r,{[n.options.horizontal?"left":"top"]:e+a,behavior:o})},p=(e,t,n)=>{var r,i;let{adjustments:a=0,behavior:o}=t;null==(i=null==(r=n.scrollElement)?void 0:r.scrollTo)||i.call(r,{[n.options.horizontal?"left":"top"]:e+a,behavior:o})};class f{constructor(e){var n=this;this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let e=null,t=()=>e||(this.targetWindow&&this.targetWindow.ResizeObserver?e=new this.targetWindow.ResizeObserver(e=>{e.forEach(e=>{let t=()=>{this._measureElement(e.target,e)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(t):t()})}):null);return{disconnect:()=>{var n;null==(n=t())||n.disconnect(),e=null},observe:e=>{var n;return null==(n=t())?void 0:n.observe(e,{box:"border-box"})},unobserve:e=>{var n;return null==(n=t())?void 0:n.unobserve(e)}}})(),this.range=null,this.setOptions=e=>{Object.entries(e).forEach(t=>{let[n,r]=t;void 0===r&&delete e[n]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:r,rangeExtractor:i,onChange:()=>{},measureElement:d,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...e}},this.notify=e=>{var t,n;null==(n=(t=this.options).onChange)||n.call(t,this,e)},this.maybeNotify=(0,t.memo)(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),e=>{this.notify(e)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(e=>e()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var e,t;let n=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==n){if(this.cleanup(),!n)return void this.maybeNotify();this.scrollElement=n,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=null!=(t=null==(e=this.scrollElement)?void 0:e.window)?t:null,this.elementsCache.forEach(e=>{this.observer.observe(e)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,e=>{this.scrollRect=e,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(e,t)=>{this.scrollAdjustments=0,this.scrollDirection=t?this.getScrollOffset()<e?"forward":"backward":null,this.scrollOffset=e,this.isScrolling=t,this.maybeNotify()}))}},this.getSize=()=>{var e;return this.options.enabled?(this.scrollRect=null!=(e=this.scrollRect)?e:this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0)},this.getScrollOffset=()=>{var e;return this.options.enabled?(this.scrollOffset=null!=(e=this.scrollOffset)?e:"function"==typeof this.options.initialOffset?this.options.initialOffset():this.options.initialOffset,this.scrollOffset):(this.scrollOffset=null,0)},this.getFurthestMeasurement=(e,t)=>{let n=new Map,r=new Map;for(let i=t-1;i>=0;i--){let t=e[i];if(n.has(t.lane))continue;let a=r.get(t.lane);if(null==a||t.end>a.end?r.set(t.lane,t):t.end<a.end&&n.set(t.lane,!0),n.size===this.options.lanes)break}return r.size===this.options.lanes?Array.from(r.values()).sort((e,t)=>e.end===t.end?e.index-t.index:e.end-t.end)[0]:void 0},this.getMeasurementOptions=(0,t.memo)(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(e,t,n,r,i)=>(this.pendingMeasuredCacheIndexes=[],{count:e,paddingStart:t,scrollMargin:n,getItemKey:r,enabled:i}),{key:!1}),this.getMeasurements=(0,t.memo)(()=>[this.getMeasurementOptions(),this.itemSizeCache],(e,t)=>{let{count:n,paddingStart:r,scrollMargin:i,getItemKey:a,enabled:o}=e;if(!o)return this.measurementsCache=[],this.itemSizeCache.clear(),[];0===this.measurementsCache.length&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(e=>{this.itemSizeCache.set(e.key,e.size)}));let s=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];let l=this.measurementsCache.slice(0,s);for(let e=s;e<n;e++){let n=a(e),o=1===this.options.lanes?l[e-1]:this.getFurthestMeasurement(l,e),s=o?o.end+this.options.gap:r+i,u=t.get(n),c="number"==typeof u?u:this.options.estimateSize(e),d=s+c,h=o?o.lane:e%this.options.lanes;l[e]={index:e,start:s,size:c,end:d,key:n,lane:h}}return this.measurementsCache=l,l},{key:!1,debug:()=>this.options.debug}),this.calculateRange=(0,t.memo)(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(e,t,n,r)=>this.range=e.length>0&&t>0?function(e){let{measurements:t,outerSize:n,scrollOffset:r,lanes:i}=e,a=t.length-1;if(t.length<=i)return{startIndex:0,endIndex:a};let o=m(0,a,e=>t[e].start,r),s=o;if(1===i)for(;s<a&&t[s].end<r+n;)s++;else if(i>1){let e=Array(i).fill(0);for(;s<a&&e.some(e=>e<r+n);){let n=t[s];e[n.lane]=n.end,s++}let l=Array(i).fill(r+n);for(;o>=0&&l.some(e=>e>=r);){let e=t[o];l[e.lane]=e.start,o--}o=Math.max(0,o-o%i),s=Math.min(a,s+(i-1-s%i))}return{startIndex:o,endIndex:s}}({measurements:e,outerSize:t,scrollOffset:n,lanes:r}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=(0,t.memo)(()=>{let e=null,t=null,n=this.calculateRange();return n&&(e=n.startIndex,t=n.endIndex),this.maybeNotify.updateDeps([this.isScrolling,e,t]),[this.options.rangeExtractor,this.options.overscan,this.options.count,e,t]},(e,t,n,r,i)=>null===r||null===i?[]:e({startIndex:r,endIndex:i,overscan:t,count:n}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=e=>{let t=this.options.indexAttribute,n=e.getAttribute(t);return n?parseInt(n,10):(console.warn("Missing attribute name '".concat(t,"={index}' on measured element.")),-1)},this._measureElement=(e,t)=>{let n=this.indexFromElement(e),r=this.measurementsCache[n];if(!r)return;let i=r.key,a=this.elementsCache.get(i);a!==e&&(a&&this.observer.unobserve(a),this.observer.observe(e),this.elementsCache.set(i,e)),e.isConnected&&this.resizeItem(n,this.options.measureElement(e,t,this))},this.resizeItem=(e,t)=>{var n;let r=this.measurementsCache[e];if(!r)return;let i=t-(null!=(n=this.itemSizeCache.get(r.key))?n:r.size);0!==i&&((void 0!==this.shouldAdjustScrollPositionOnItemSizeChange?this.shouldAdjustScrollPositionOnItemSizeChange(r,i,this):r.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=i,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(r.index),this.itemSizeCache=new Map(this.itemSizeCache.set(r.key,t)),this.notify(!1))},this.measureElement=e=>{if(!e)return void this.elementsCache.forEach((e,t)=>{e.isConnected||(this.observer.unobserve(e),this.elementsCache.delete(t))});this._measureElement(e,void 0)},this.getVirtualItems=(0,t.memo)(()=>[this.getVirtualIndexes(),this.getMeasurements()],(e,t)=>{let n=[];for(let r=0,i=e.length;r<i;r++){let i=t[e[r]];n.push(i)}return n},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=e=>{let n=this.getMeasurements();if(0!==n.length)return(0,t.notUndefined)(n[m(0,n.length-1,e=>(0,t.notUndefined)(n[e]).start,e)])},this.getOffsetForAlignment=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=n.getSize(),a=n.getScrollOffset();return"auto"===t&&(t=e>=a+i?"end":"start"),"center"===t?e+=(r-i)/2:"end"===t&&(e-=i),Math.max(Math.min(n.getTotalSize()+n.options.scrollMargin-i,e),0)},this.getOffsetForIndex=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"auto";e=Math.max(0,Math.min(e,n.options.count-1));let r=n.measurementsCache[e];if(!r)return;let i=n.getSize(),a=n.getScrollOffset();if("auto"===t)if(r.end>=a+i-n.options.scrollPaddingEnd)t="end";else{if(!(r.start<=a+n.options.scrollPaddingStart))return[a,t];t="start"}let o="end"===t?r.end+n.options.scrollPaddingEnd:r.start-n.options.scrollPaddingStart;return[n.getOffsetForAlignment(o,t,r.size),t]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=function(e){let{align:t="start",behavior:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"smooth"===r&&n.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),n._scrollToOffset(n.getOffsetForAlignment(e,t),{adjustments:void 0,behavior:r})},this.scrollToIndex=function(e){let{align:r="auto",behavior:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"smooth"===i&&n.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),e=Math.max(0,Math.min(e,n.options.count-1));let a=0,o=r=>{if(!n.targetWindow)return;let a=n.getOffsetForIndex(e,r);if(!a)return void console.warn("Failed to get offset for index:",e);let[o,l]=a;n._scrollToOffset(o,{adjustments:void 0,behavior:i}),n.targetWindow.requestAnimationFrame(()=>{let r=n.getScrollOffset(),i=n.getOffsetForIndex(e,l);if(!i)return void console.warn("Failed to get offset for index:",e);(0,t.approxEqual)(i[0],r)||s(l)})},s=t=>{n.targetWindow&&(++a<10?n.targetWindow.requestAnimationFrame(()=>o(t)):console.warn("Failed to scroll to index ".concat(e," after ").concat(10," attempts.")))};o(r)},this.scrollBy=function(e){let{behavior:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"smooth"===t&&n.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),n._scrollToOffset(n.getScrollOffset()+e,{adjustments:void 0,behavior:t})},this.getTotalSize=()=>{var e,t;let n,r=this.getMeasurements();if(0===r.length)n=this.options.paddingStart;else if(1===this.options.lanes)n=null!=(t=null==(e=r[r.length-1])?void 0:e.end)?t:0;else{let e=Array(this.options.lanes).fill(null),t=r.length-1;for(;t>=0&&e.some(e=>null===e);){let n=r[t];null===e[n.lane]&&(e[n.lane]=n.end),t--}n=Math.max(...e.filter(e=>null!==e))}return Math.max(n-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(e,t)=>{let{adjustments:n,behavior:r}=t;this.options.scrollToFn(e,{behavior:r,adjustments:n},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(e)}}let m=(e,t,n,r)=>{for(;e<=t;){let i=(e+t)/2|0,a=n(i);if(a<r)e=i+1;else{if(!(a>r))return i;t=i-1}}return e>0?e-1:0}},637404:e=>{"use strict";e.s({useVirtualizer:()=>a});var t=e.i(373150),n=e.i(784445),r=e.i(567903);let i="undefined"!=typeof document?t.useLayoutEffect:t.useEffect;function a(e){return function(e){let a=t.useReducer(()=>({}),{})[1],o={...e,onChange:(t,r)=>{var i;r?(0,n.flushSync)(a):a(),null==(i=e.onChange)||i.call(e,t,r)}},[s]=t.useState(()=>new r.Virtualizer(o));return s.setOptions(o),i(()=>s._didMount(),[]),i(()=>s._willUpdate()),s}({observeElementRect:r.observeElementRect,observeElementOffset:r.observeElementOffset,scrollToFn:r.elementScroll,...e})}},76345:e=>{"use strict";function t(e,t){if(void 0===e)throw TypeError("attempted to "+t+" private static field before its declaration")}e.s({_:()=>t})},812024:e=>{"use strict";e.s({_:()=>i});var t=e.i(643048),n=e.i(59535),r=e.i(76345);function i(e,i,a){return(0,n._)(e,i),(0,r._)(a,"get"),(0,t._)(e,a)}},905890:e=>{"use strict";e.s({_:()=>i});var t=e.i(796743),n=e.i(59535),r=e.i(76345);function i(e,i,a,o){return(0,n._)(e,i),(0,r._)(a,"set"),(0,t._)(e,a,o),o}},553312:e=>{"use strict";e.s({_:()=>i});var t=e.i(879263),n=e.i(59535),r=e.i(76345);function i(e,i,a){return(0,n._)(e,i),(0,r._)(a,"update"),(0,t._)(e,a)}},542252:e=>{"use strict";function t(e,t){if(t.set)return"__destrObj"in t||(t.__destrObj={set value(v){t.set.call(e,v)}}),t.__destrObj;if(!t.writable)throw TypeError("attempted to set read only private field");return t}e.s({_:()=>t})},279487:e=>{"use strict";e.s({_:()=>r});var t=e.i(542252),n=e.i(539139);function r(e,r){var i=(0,n._)(e,r,"set");return(0,t._)(e,i)}},598944:e=>{"use strict";e.s({AnnotationLayer:()=>pF,GlobalWorkerOptions:()=>pL,TextLayer:()=>pz,getDocument:()=>pB});var t=e.i(227541),n=e.i(781635),r=e.i(632859),i=e.i(526050),a=e.i(607618),o=e.i(70827),s=e.i(238193),l=e.i(526350),u=e.i(812024),c=e.i(905890),d=e.i(553312),h=e.i(11968),p=e.i(279487),f=e.i(605073);let m={get url(){return`file://${e.P("node_modules/.pnpm/pdfjs-dist@4.10.38/node_modules/pdfjs-dist/build/pdf.mjs")}`}};var g={};g.d=(e,t)=>{for(var n in t)g.o(t,n)&&!g.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},g.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var y=globalThis.pdfjsLib={};g.d(y,{AbortException:()=>K,AnnotationEditorLayer:()=>py,AnnotationEditorParamsType:()=>C,AnnotationEditorType:()=>_,AnnotationEditorUIManager:()=>nu,AnnotationLayer:()=>un,AnnotationMode:()=>S,ColorPicker:()=>cH,DOMSVGFactory:()=>sR,DrawLayer:()=>pD,FeatureTest:()=>J,GlobalWorkerOptions:()=>aR,ImageKind:()=>T,InvalidPDFException:()=>V,MissingPDFException:()=>q,OPS:()=>D,OutputScale:()=>eE,PDFDataRangeTransport:()=>o1,PDFDateString:()=>ex,PDFWorker:()=>si,PasswordResponses:()=>P,PermissionFlag:()=>A,PixelsPerInch:()=>el,RenderingCancelledException:()=>ed,TextLayer:()=>oP,TouchManager:()=>n7,UnexpectedResponseException:()=>G,Util:()=>ee,VerbosityLevel:()=>N,XfaLayer:()=>sO,build:()=>sM,createValidAbsoluteUrl:()=>z,fetchData:()=>eu,getDocument:()=>oZ,getFilenameFromUrl:()=>ef,getPdfFilenameFromUrl:()=>em,getXfaPageViewport:()=>ek,isDataScheme:()=>eh,isPdfFile:()=>ep,noContextMenu:()=>ey,normalizeUnicode:()=>ea,setLayerDimensions:()=>eA,shadow:()=>B,stopEvent:()=>eb,version:()=>sT});let b="object"==typeof t.default&&t.default+""=="[object process]"&&!t.default.versions.nw&&!(t.default.versions.electron&&t.default.type&&"browser"!==t.default.type),x=[1,0,0,1,0,0],w=[.001,0,0,.001,0,0],k={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},S={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},_={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},C={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},A={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},E={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},T={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},M={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},I={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},N={ERRORS:0,WARNINGS:1,INFOS:5},D={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},P={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},R=N.WARNINGS;function O(e){R>=N.INFOS&&console.log("Info: ".concat(e))}function j(e){R>=N.WARNINGS&&console.log("Warning: ".concat(e))}function F(e){throw Error(e)}function L(e,t){e||F(t)}function z(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e)return null;try{if(n&&"string"==typeof e){if(n.addDefaultProtocol&&e.startsWith("www.")){let t=e.match(/\./g);(null==t?void 0:t.length)>=2&&(e="http://".concat(e))}if(n.tryConvertEncoding)try{var r;r=e,e=decodeURIComponent(escape(r))}catch(e){}}let i=t?new URL(e,t):new URL(e);if(function(e){switch(null==e?void 0:e.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(i))return i}catch(e){}return null}function B(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Object.defineProperty(e,t,{value:n,enumerable:!r,configurable:!0,writable:!1}),n}let U=function(){function e(e,t){this.message=e,this.name=t}return e.prototype=Error(),e.constructor=e,e}();class H extends U{constructor(e,t){super(e,"PasswordException"),this.code=t}}class W extends U{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class V extends U{constructor(e){super(e,"InvalidPDFException")}}class q extends U{constructor(e){super(e,"MissingPDFException")}}class G extends U{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class $ extends U{constructor(e){super(e,"FormatError")}}class K extends U{constructor(e){super(e,"AbortException")}}function Y(e){("object"!=typeof e||(null==e?void 0:e.length)===void 0)&&F("Invalid argument for bytesToString");let t=e.length;if(t<8192)return String.fromCharCode.apply(null,e);let n=[];for(let r=0;r<t;r+=8192){let i=Math.min(r+8192,t),a=e.subarray(r,i);n.push(String.fromCharCode.apply(null,a))}return n.join("")}function X(e){"string"!=typeof e&&F("Invalid argument for stringToBytes");let t=e.length,n=new Uint8Array(t);for(let r=0;r<t;++r)n[r]=255&e.charCodeAt(r);return n}function Z(e){let t=Object.create(null);for(let[n,r]of e)t[n]=r;return t}class J{static get isLittleEndian(){return B(this,"isLittleEndian",function(){let e=new Uint8Array(4);return e[0]=1,1===new Uint32Array(e.buffer,0,1)[0]}())}static get isEvalSupported(){return B(this,"isEvalSupported",function(){try{return Function(""),!0}catch(e){return!1}}())}static get isOffscreenCanvasSupported(){return B(this,"isOffscreenCanvasSupported","undefined"!=typeof OffscreenCanvas)}static get isImageDecoderSupported(){return B(this,"isImageDecoderSupported","undefined"!=typeof ImageDecoder)}static get platform(){var e,t;return"undefined"!=typeof navigator&&"string"==typeof(null==(e=navigator)?void 0:e.platform)?B(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:"string"==typeof(null==(t=navigator)?void 0:t.userAgent)&&navigator.userAgent.includes("Firefox")}):B(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var e,t;return B(this,"isCSSRoundSupported",null==(t=globalThis.CSS)||null==(e=t.supports)?void 0:e.call(t,"width: round(1.5px, 1px)"))}}let Q=Array.from(Array(256).keys(),e=>e.toString(16).padStart(2,"0"));class ee{static makeHexColor(e,t,n){return"#".concat(Q[e]).concat(Q[t]).concat(Q[n])}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){return[e[0]*t[0]+e[1]*t[2]+t[4],e[0]*t[1]+e[1]*t[3]+t[5]]}static applyInverseTransform(e,t){let n=t[0]*t[3]-t[1]*t[2];return[(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/n,(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/n]}static getAxialAlignedBoundingBox(e,t){let n=this.applyTransform(e,t),r=this.applyTransform(e.slice(2,4),t),i=this.applyTransform([e[0],e[3]],t),a=this.applyTransform([e[2],e[1]],t);return[Math.min(n[0],r[0],i[0],a[0]),Math.min(n[1],r[1],i[1],a[1]),Math.max(n[0],r[0],i[0],a[0]),Math.max(n[1],r[1],i[1],a[1])]}static inverseTransform(e){let t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){let t=[e[0],e[2],e[1],e[3]],n=e[0]*t[0]+e[1]*t[2],r=e[0]*t[1]+e[1]*t[3],i=e[2]*t[0]+e[3]*t[2],a=e[2]*t[1]+e[3]*t[3],o=(n+a)/2,s=Math.sqrt((n+a)**2-4*(n*a-i*r))/2;return[Math.sqrt(o+s||1),Math.sqrt(o-s||1)]}static normalizeRect(e){let t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){let n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>r)return null;let i=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),a=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return i>a?null:[n,i,r,a]}static bezierBoundingBox(e,t,n,r,i,a,o,s,l){return l?(l[0]=Math.min(l[0],e,o),l[1]=Math.min(l[1],t,s),l[2]=Math.max(l[2],e,o),l[3]=Math.max(l[3],t,s)):l=[Math.min(e,o),Math.min(t,s),Math.max(e,o),Math.max(t,s)],(0,f._)(this,ee,en).call(ee,e,n,i,o,t,r,a,s,3*(-e+3*(n-i)+o),6*(e-2*n+i),3*(n-e),l),(0,f._)(this,ee,en).call(ee,e,n,i,o,t,r,a,s,3*(-t+3*(r-a)+s),6*(t-2*r+a),3*(r-t),l),l}}function et(e,t,n,r,i,a,o,s,l,u){if(l<=0||l>=1)return;let c=1-l,d=l*l,h=d*l,p=c*(c*(c*e+3*l*t)+3*d*n)+h*r,f=c*(c*(c*i+3*l*a)+3*d*o)+h*s;u[0]=Math.min(u[0],p),u[1]=Math.min(u[1],f),u[2]=Math.max(u[2],p),u[3]=Math.max(u[3],f)}function en(e,t,n,r,i,a,o,s,l,u,c,d){if(1e-12>Math.abs(l)){Math.abs(u)>=1e-12&&(0,f._)(this,ee,et).call(ee,e,t,n,r,i,a,o,s,-c/u,d);return}let h=u**2-4*c*l;if(h<0)return;let p=Math.sqrt(h),m=2*l;(0,f._)(this,ee,et).call(ee,e,t,n,r,i,a,o,s,(-u+p)/m,d),(0,f._)(this,ee,et).call(ee,e,t,n,r,i,a,o,s,(-u-p)/m,d)}let er=null,ei=null;function ea(e){return er||(er=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,ei=new Map([["","t"]])),e.replaceAll(er,(e,t,n)=>t?t.normalize("NFKC"):ei.get(n))}let eo="pdfjs_internal_id_";"function"!=typeof Promise.try&&(Promise.try=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return new Promise(t=>{t(e(...n))})});let es="http://www.w3.org/2000/svg";class el{}async function eu(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text";if(ev(e,document.baseURI)){let n=await fetch(e);if(!n.ok)throw Error(n.statusText);switch(t){case"arraybuffer":return n.arrayBuffer();case"blob":return n.blob();case"json":return n.json()}return n.text()}return new Promise((n,r)=>{let i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType=t,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(200===i.status||0===i.status){switch(t){case"arraybuffer":case"blob":case"json":n(i.response);return}n(i.responseText);return}r(Error(i.statusText))}},i.send(null)})}(0,h._)(el,"CSS",96),(0,h._)(el,"PDF",72),(0,h._)(el,"PDF_TO_CSS_UNITS",el.CSS/el.PDF);class ec{get rawDims(){let{userUnit:e,viewBox:t}=this,n=t.map(t=>t*e);return B(this,"rawDims",{pageWidth:n[2]-n[0],pageHeight:n[3]-n[1],pageX:n[0],pageY:n[1]})}clone(){let{scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:r=this.offsetY,dontFlip:i=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new ec({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:r,dontFlip:i})}convertToViewportPoint(e,t){return ee.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){let t=ee.applyTransform([e[0],e[1]],this.transform),n=ee.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){return ee.applyInverseTransform([e,t],this.transform)}constructor({viewBox:e,userUnit:t,scale:n,rotation:r,offsetX:i=0,offsetY:a=0,dontFlip:o=!1}){let s,l,u,c,d,h,p,f;this.viewBox=e,this.userUnit=t,this.scale=n,this.rotation=r,this.offsetX=i,this.offsetY=a,n*=t;let m=(e[2]+e[0])/2,g=(e[3]+e[1])/2;switch((r%=360)<0&&(r+=360),r){case 180:s=-1,l=0,u=0,c=1;break;case 90:s=0,l=1,u=1,c=0;break;case 270:s=0,l=-1,u=-1,c=0;break;case 0:s=1,l=0,u=0,c=-1;break;default:throw Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(u=-u,c=-c),0===s?(d=Math.abs(g-e[1])*n+i,h=Math.abs(m-e[0])*n+a,p=(e[3]-e[1])*n,f=(e[2]-e[0])*n):(d=Math.abs(m-e[0])*n+i,h=Math.abs(g-e[1])*n+a,p=(e[2]-e[0])*n,f=(e[3]-e[1])*n),this.transform=[s*n,l*n,u*n,c*n,d-s*n*m-u*n*g,h-l*n*m-c*n*g],this.width=p,this.height=f}}class ed extends U{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function eh(e){let t=e.length,n=0;for(;n<t&&""===e[n].trim();)n++;return"data:"===e.substring(n,n+5).toLowerCase()}function ep(e){return"string"==typeof e&&/\.pdf$/i.test(e)}function ef(e){return[e]=e.split(/[#?]/,1),e.substring(e.lastIndexOf("/")+1)}function em(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"document.pdf";if("string"!=typeof e)return t;if(eh(e))return j('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;let n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,r=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(e),i=n.exec(r[1])||n.exec(r[2])||n.exec(r[3]);if(i&&(i=i[0]).includes("%"))try{i=n.exec(decodeURIComponent(i))[0]}catch(e){}return i||t}class eg{time(e){e in this.started&&j("Timer is already running for ".concat(e)),this.started[e]=Date.now()}timeEnd(e){e in this.started||j("Timer has not been started for ".concat(e)),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){let e=[],t=0;for(let{name:e}of this.times)t=Math.max(e.length,t);for(let{name:n,start:r,end:i}of this.times)e.push("".concat(n.padEnd(t)," ").concat(i-r,"ms\n"));return e.join("")}constructor(){(0,h._)(this,"started",Object.create(null)),(0,h._)(this,"times",[])}}function ev(e,t){try{let{protocol:n}=t?new URL(e,t):new URL(e);return"http:"===n||"https:"===n}catch(e){return!1}}function ey(e){e.preventDefault()}function eb(e){e.preventDefault(),e.stopPropagation()}class ex{static toDateObject(e){if(!e||"string"!=typeof e)return null;(0,c._)(this,ex,ew,(0,u._)(this,ex,ew)||RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));let t=(0,u._)(this,ex,ew).exec(e);if(!t)return null;let n=parseInt(t[1],10),r=parseInt(t[2],10);r=r>=1&&r<=12?r-1:0;let i=parseInt(t[3],10);i=i>=1&&i<=31?i:1;let a=parseInt(t[4],10);a=a>=0&&a<=23?a:0;let o=parseInt(t[5],10);o=o>=0&&o<=59?o:0;let s=parseInt(t[6],10);s=s>=0&&s<=59?s:0;let l=t[7]||"Z",d=parseInt(t[8],10);d=d>=0&&d<=23?d:0;let h=parseInt(t[9],10)||0;return h=h>=0&&h<=59?h:0,"-"===l?(a+=d,o+=h):"+"===l&&(a-=d,o-=h),new Date(Date.UTC(n,r,i,a,o,s))}}var ew={writable:!0,value:void 0};function ek(e,t){let{scale:n=1,rotation:r=0}=t,{width:i,height:a}=e.attributes.style;return new ec({viewBox:[0,0,parseInt(i),parseInt(a)],userUnit:1,scale:n,rotation:r})}function eS(e){if(e.startsWith("#")){let t=parseInt(e.slice(1),16);return[(0xff0000&t)>>16,(65280&t)>>8,255&t]}return e.startsWith("rgb(")?e.slice(4,-1).split(",").map(e=>parseInt(e)):e.startsWith("rgba(")?e.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(j('Not a valid color format: "'.concat(e,'"')),[0,0,0])}function e_(e){let{a:t,b:n,c:r,d:i,e:a,f:o}=e.getTransform();return[t,n,r,i,a,o]}function eC(e){let{a:t,b:n,c:r,d:i,e:a,f:o}=e.getTransform().invertSelf();return[t,n,r,i,a,o]}function eA(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=!(arguments.length>3)||void 0===arguments[3]||arguments[3];if(t instanceof ec){let{pageWidth:r,pageHeight:i}=t.rawDims,{style:a}=e,o=J.isCSSRoundSupported,s="var(--scale-factor) * ".concat(r,"px"),l="var(--scale-factor) * ".concat(i,"px"),u=o?"round(down, ".concat(s,", var(--scale-round-x, 1px))"):"calc(".concat(s,")"),c=o?"round(down, ".concat(l,", var(--scale-round-y, 1px))"):"calc(".concat(l,")");n&&t.rotation%180!=0?(a.width=c,a.height=u):(a.width=u,a.height=c)}r&&e.setAttribute("data-main-rotation",t.rotation)}class eE{get scaled(){return 1!==this.sx||1!==this.sy}get symmetric(){return this.sx===this.sy}constructor(){let e=window.devicePixelRatio||1;this.sx=e,this.sy=e}}var eT=new WeakMap,eM=new WeakMap,eI=new WeakMap,eN=new WeakMap,eD=new WeakMap,eP=new WeakSet,eR=new WeakSet,eO=new WeakSet,ej=new WeakSet,eF=new WeakMap;class eL{render(){let e=(0,a._)(this,eT,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");let t=(0,r._)(this,eI)._uiManager._signal;e.addEventListener("contextmenu",ey,{signal:t}),e.addEventListener("pointerdown",(0,f._)(eL,eL,eB),{signal:t});let n=(0,a._)(this,eN,document.createElement("div"));n.className="buttons",e.append(n);let i=(0,r._)(this,eI).toolbarPosition;if(i){let{style:t}=e,n="ltr"===(0,r._)(this,eI)._uiManager.direction?1-i[0]:i[0];t.insetInlineEnd="".concat(100*n,"%"),t.top="calc(".concat(100*i[1],"% + var(--editor-toolbar-vert-offset))")}return(0,s._)(this,ej,eV).call(this),e}get div(){return(0,r._)(this,eT)}hide(){var e;(0,r._)(this,eT).classList.add("hidden"),null==(e=(0,r._)(this,eM))||e.hideDropdown()}show(){var e;(0,r._)(this,eT).classList.remove("hidden"),null==(e=(0,r._)(this,eD))||e.shown()}async addAltText(e){let t=await e.render();(0,s._)(this,eO,eW).call(this,t),(0,r._)(this,eN).prepend(t,(0,r._)(this,eF)),(0,a._)(this,eD,e)}addColorPicker(e){(0,a._)(this,eM,e);let t=e.renderButton();(0,s._)(this,eO,eW).call(this,t),(0,r._)(this,eN).prepend(t,(0,r._)(this,eF))}remove(){var e;(0,r._)(this,eT).remove(),null==(e=(0,r._)(this,eM))||e.destroy(),(0,a._)(this,eM,null)}constructor(e){(0,l._)(this,eP),(0,l._)(this,eR),(0,l._)(this,eO),(0,l._)(this,ej),(0,i._)(this,eF,{get:eq,set:void 0}),(0,i._)(this,eT,{writable:!0,value:null}),(0,i._)(this,eM,{writable:!0,value:null}),(0,i._)(this,eI,{writable:!0,value:void 0}),(0,i._)(this,eN,{writable:!0,value:null}),(0,i._)(this,eD,{writable:!0,value:null}),(0,a._)(this,eI,e),(0,c._)(eL,eL,ez,(0,u._)(eL,eL,ez)||Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}}var ez={writable:!0,value:null};function eB(e){e.stopPropagation()}function eU(e){(0,r._)(this,eI)._focusEventsAllowed=!1,eb(e)}function eH(e){(0,r._)(this,eI)._focusEventsAllowed=!0,eb(e)}function eW(e){let t=(0,r._)(this,eI)._uiManager._signal;e.addEventListener("focusin",(0,s._)(this,eP,eU).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",(0,s._)(this,eR,eH).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",ey,{signal:t})}function eV(){let{editorType:e,_uiManager:t}=(0,r._)(this,eI),n=document.createElement("button");n.className="delete",n.tabIndex=0,n.setAttribute("data-l10n-id",(0,u._)(eL,eL,ez)[e]),(0,s._)(this,eO,eW).call(this,n),n.addEventListener("click",e=>{t.delete()},{signal:t._signal}),(0,r._)(this,eN).append(n)}function eq(){let e=document.createElement("div");return e.className="divider",e}var eG=new WeakMap,e$=new WeakMap,eK=new WeakMap,eY=new WeakSet,eX=new WeakSet,eZ=new WeakSet;class eJ{show(e,t,n){let[i,o]=(0,s._)(this,eX,e0).call(this,t,n),{style:l}=(0,a._)(this,e$,(0,r._)(this,e$)||(0,s._)(this,eY,eQ).call(this));e.append((0,r._)(this,e$)),l.insetInlineEnd="".concat(100*i,"%"),l.top="calc(".concat(100*o,"% + var(--editor-toolbar-vert-offset))")}hide(){(0,r._)(this,e$).remove()}constructor(e){(0,l._)(this,eY),(0,l._)(this,eX),(0,l._)(this,eZ),(0,i._)(this,eG,{writable:!0,value:null}),(0,i._)(this,e$,{writable:!0,value:null}),(0,i._)(this,eK,{writable:!0,value:void 0}),(0,a._)(this,eK,e)}}function eQ(){let e=(0,a._)(this,e$,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",ey,{signal:(0,r._)(this,eK)._signal});let t=(0,a._)(this,eG,document.createElement("div"));return t.className="buttons",e.append(t),(0,s._)(this,eZ,e1).call(this),e}function e0(e,t){let n=0,r=0;for(let i of e){let e=i.y+i.height;if(e<n)continue;let a=i.x+(t?i.width:0);if(e>n){r=a,n=e;continue}t?a>r&&(r=a):a<r&&(r=a)}return[t?1-r:r,n]}function e1(){let e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");let t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");let n=(0,r._)(this,eK)._signal;e.addEventListener("contextmenu",ey,{signal:n}),e.addEventListener("click",()=>{(0,r._)(this,eK).highlightSelection("floating_button")},{signal:n}),(0,r._)(this,eG).append(e)}function e2(e,t,n){for(let r of n)t.addEventListener(r,e[r].bind(e))}var e3=new WeakMap;class e5{get id(){return"".concat("pdfjs_internal_editor_").concat((0,o._)(this,e3).value++)}constructor(){(0,i._)(this,e3,{writable:!0,value:0})}}var e4=new WeakMap,e9=new WeakMap,e8=new WeakMap,e6=new WeakSet;class e7{static get _isSVGFittingCanvas(){let e=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),t=new Image;return t.src='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',B(this,"_isSVGFittingCanvas",t.decode().then(()=>(e.drawImage(t,0,0,1,1,0,0,1,3),0===new Uint32Array(e.getImageData(0,0,1,1).data.buffer)[0])))}async getFromFile(e){let{lastModified:t,name:n,size:r,type:i}=e;return(0,s._)(this,e6,te).call(this,"".concat(t,"_").concat(n,"_").concat(r,"_").concat(i),e)}async getFromUrl(e){return(0,s._)(this,e6,te).call(this,e,e)}async getFromBlob(e,t){let n=await t;return(0,s._)(this,e6,te).call(this,e,n)}async getFromId(e){(0,a._)(this,e8,(0,r._)(this,e8)||new Map);let t=(0,r._)(this,e8).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){let{blobPromise:e}=t;return delete t.blobPromise,this.getFromBlob(t.id,e)}return this.getFromUrl(t.url)}getFromCanvas(e,t){(0,a._)(this,e8,(0,r._)(this,e8)||new Map);let n=(0,r._)(this,e8).get(e);if(null==n?void 0:n.bitmap)return n.refCounter+=1,n;let i=new OffscreenCanvas(t.width,t.height);return i.getContext("2d").drawImage(t,0,0),n={bitmap:i.transferToImageBitmap(),id:"image_".concat((0,r._)(this,e4),"_").concat((0,o._)(this,e9).value++),refCounter:1,isSvg:!1},(0,r._)(this,e8).set(e,n),(0,r._)(this,e8).set(n.id,n),n}getSvgUrl(e){let t=(0,r._)(this,e8).get(e);return(null==t?void 0:t.isSvg)?t.svgUrl:null}deleteId(e){var t;(0,a._)(this,e8,(0,r._)(this,e8)||new Map);let n=(0,r._)(this,e8).get(e);if(!n||(n.refCounter-=1,0!==n.refCounter))return;let{bitmap:i}=n;if(!n.url&&!n.file){let e=new OffscreenCanvas(i.width,i.height);e.getContext("bitmaprenderer").transferFromImageBitmap(i),n.blobPromise=e.convertToBlob()}null==(t=i.close)||t.call(i),n.bitmap=null}isValidId(e){return e.startsWith("image_".concat((0,r._)(this,e4),"_"))}constructor(){(0,l._)(this,e6),(0,i._)(this,e4,{writable:!0,value:function(){if("function"==typeof crypto.randomUUID)return crypto.randomUUID();let e=new Uint8Array(32);return crypto.getRandomValues(e),Y(e)}()}),(0,i._)(this,e9,{writable:!0,value:0}),(0,i._)(this,e8,{writable:!0,value:null})}}async function te(e,t){(0,a._)(this,e8,(0,r._)(this,e8)||new Map);let n=(0,r._)(this,e8).get(e);if(null===n)return null;if(null==n?void 0:n.bitmap)return n.refCounter+=1,n;try{let e;if(n||(n={bitmap:null,id:"image_".concat((0,r._)(this,e4),"_").concat((0,o._)(this,e9).value++),refCounter:0,isSvg:!1}),"string"==typeof t?(n.url=t,e=await eu(t,"blob")):t instanceof File?e=n.file=t:t instanceof Blob&&(e=t),"image/svg+xml"===e.type){let t=e7._isSVGFittingCanvas,r=new FileReader,i=new Image,a=new Promise((e,a)=>{i.onload=()=>{n.bitmap=i,n.isSvg=!0,e()},r.onload=async()=>{let e=n.svgUrl=r.result;i.src=await t?"".concat(e,"#svgView(preserveAspectRatio(none))"):e},i.onerror=r.onerror=a});r.readAsDataURL(e),await a}else n.bitmap=await createImageBitmap(e);n.refCounter=1}catch(e){j(e),n=null}return(0,r._)(this,e8).set(e,n),n&&(0,r._)(this,e8).set(n.id,n),n}var tt=new WeakMap,tn=new WeakMap,tr=new WeakMap,ti=new WeakMap;class ta{add(e){let{cmd:t,undo:n,post:i,mustExec:o,type:s=NaN,overwriteIfSameType:l=!1,keepUndo:u=!1}=e;if(o&&t(),(0,r._)(this,tn))return;let c={cmd:t,undo:n,post:i,type:s};if(-1===(0,r._)(this,ti)){(0,r._)(this,tt).length>0&&((0,r._)(this,tt).length=0),(0,a._)(this,ti,0),(0,r._)(this,tt).push(c);return}if(l&&(0,r._)(this,tt)[(0,r._)(this,ti)].type===s){u&&(c.undo=(0,r._)(this,tt)[(0,r._)(this,ti)].undo),(0,r._)(this,tt)[(0,r._)(this,ti)]=c;return}let d=(0,r._)(this,ti)+1;d===(0,r._)(this,tr)?(0,r._)(this,tt).splice(0,1):((0,a._)(this,ti,d),d<(0,r._)(this,tt).length&&(0,r._)(this,tt).splice(d)),(0,r._)(this,tt).push(c)}undo(){if(-1===(0,r._)(this,ti))return;(0,a._)(this,tn,!0);let{undo:e,post:t}=(0,r._)(this,tt)[(0,r._)(this,ti)];e(),null==t||t(),(0,a._)(this,tn,!1),(0,a._)(this,ti,(0,r._)(this,ti)-1)}redo(){if((0,r._)(this,ti)<(0,r._)(this,tt).length-1){(0,a._)(this,ti,(0,r._)(this,ti)+1),(0,a._)(this,tn,!0);let{cmd:e,post:t}=(0,r._)(this,tt)[(0,r._)(this,ti)];e(),null==t||t(),(0,a._)(this,tn,!1)}}hasSomethingToUndo(){return -1!==(0,r._)(this,ti)}hasSomethingToRedo(){return(0,r._)(this,ti)<(0,r._)(this,tt).length-1}cleanType(e){if(-1!==(0,r._)(this,ti)){for(let t=(0,r._)(this,ti);t>=0;t--)if((0,r._)(this,tt)[t].type!==e){(0,r._)(this,tt).splice(t+1,(0,r._)(this,ti)-t),(0,a._)(this,ti,t);return}(0,r._)(this,tt).length=0,(0,a._)(this,ti,-1)}}destroy(){(0,a._)(this,tt,null)}constructor(e=128){(0,i._)(this,tt,{writable:!0,value:[]}),(0,i._)(this,tn,{writable:!0,value:!1}),(0,i._)(this,tr,{writable:!0,value:void 0}),(0,i._)(this,ti,{writable:!0,value:-1}),(0,a._)(this,tr,e)}}var to=new WeakSet;class ts{exec(e,t){if(!this.allKeys.has(t.key))return;let n=this.callbacks.get((0,s._)(this,to,tl).call(this,t));if(!n)return;let{callback:r,options:{bubbles:i=!1,args:a=[],checker:o=null}}=n;(!o||o(e,t))&&(r.bind(e,...a,t)(),i||eb(t))}constructor(e){(0,l._)(this,to),this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;let{isMac:t}=J.platform;for(let[n,r,i={}]of e)for(let e of n){let n=e.startsWith("mac+");t&&n?(this.callbacks.set(e.slice(4),{callback:r,options:i}),this.allKeys.add(e.split("+").at(-1))):t||n||(this.callbacks.set(e,{callback:r,options:i}),this.allKeys.add(e.split("+").at(-1)))}}}function tl(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);let t=this.buffer.join("+");return this.buffer.length=0,t}class tu{get _colors(){let e=new Map([["CanvasText",null],["Canvas",null]]),t=document.createElement("span");for(let n of(t.style.visibility="hidden",document.body.append(t),e.keys())){t.style.color=n;let r=window.getComputedStyle(t).color;e.set(n,eS(r))}return t.remove(),B(this,"_colors",e)}convert(e){let t=eS(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(let[e,n]of this._colors)if(n.every((e,n)=>e===t[n]))return tu._colorsMapping.get(e);return t}getHexCode(e){let t=this._colors.get(e);return t?ee.makeHexColor(...t):e}}(0,h._)(tu,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));var tc=new WeakMap,td=new WeakMap,th=new WeakMap,tp=new WeakMap,tf=new WeakMap,tm=new WeakMap,tg=new WeakMap,tv=new WeakMap,ty=new WeakMap,tb=new WeakMap,tx=new WeakMap,tw=new WeakMap,tk=new WeakMap,tS=new WeakMap,t_=new WeakMap,tC=new WeakMap,tA=new WeakMap,tE=new WeakMap,tT=new WeakMap,tM=new WeakMap,tI=new WeakMap,tN=new WeakMap,tD=new WeakMap,tP=new WeakMap,tR=new WeakMap,tO=new WeakMap,tj=new WeakMap,tF=new WeakMap,tL=new WeakMap,tz=new WeakMap,tB=new WeakMap,tU=new WeakMap,tH=new WeakMap,tW=new WeakMap,tV=new WeakMap,tq=new WeakMap,tG=new WeakMap,t$=new WeakMap,tK=new WeakMap,tY=new WeakMap,tX=new WeakMap,tZ=new WeakMap,tJ=new WeakSet,tQ=new WeakSet,t0=new WeakSet,t1=new WeakSet,t2=new WeakSet,t3=new WeakSet,t5=new WeakSet,t4=new WeakSet,t9=new WeakSet,t8=new WeakSet,t6=new WeakSet,t7=new WeakSet,ne=new WeakSet,nt=new WeakSet,nn=new WeakSet,nr=new WeakSet,ni=new WeakSet,na=new WeakSet,no=new WeakMap,ns=new WeakSet,nl=new WeakSet;class nu{static get _keyboardManager(){let e=nu.prototype,t=e=>(0,r._)(e,tY).contains(document.activeElement)&&"BUTTON"!==document.activeElement.tagName&&e.hasSomethingToControl(),n=(e,t)=>{let{target:n}=t;if(n instanceof HTMLInputElement){let{type:e}=n;return"text"!==e&&"number"!==e}return!0},i=this.TRANSLATE_SMALL,a=this.TRANSLATE_BIG;return B(this,"_keyboardManager",new ts([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(e,t)=>{let{target:n}=t;return!(n instanceof HTMLButtonElement)&&(0,r._)(e,tY).contains(n)&&!e.isEnterHandled}}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(e,t)=>{let{target:n}=t;return!(n instanceof HTMLButtonElement)&&(0,r._)(e,tY).contains(document.activeElement)}}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-a,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[a,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-a],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,a],checker:t}]]))}destroy(){var e,t,n,i,o;for(let n of(null==(e=(0,r._)(this,tZ))||e.resolve(),(0,a._)(this,tZ,null),null==(t=(0,r._)(this,tc))||t.abort(),(0,a._)(this,tc,null),this._signal=null,(0,r._)(this,tp).values()))n.destroy();(0,r._)(this,tp).clear(),(0,r._)(this,th).clear(),(0,r._)(this,t_).clear(),(0,a._)(this,td,null),(0,r._)(this,tH).clear(),(0,r._)(this,tv).destroy(),null==(n=(0,r._)(this,tf))||n.destroy(),null==(i=(0,r._)(this,tP))||i.hide(),(0,a._)(this,tP,null),(0,r._)(this,tM)&&(clearTimeout((0,r._)(this,tM)),(0,a._)(this,tM,null)),(0,r._)(this,tK)&&(clearTimeout((0,r._)(this,tK)),(0,a._)(this,tK,null)),null==(o=this._editorUndoBar)||o.destroy()}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return(0,r._)(this,tB)}get useNewAltTextFlow(){return(0,r._)(this,tA)}get useNewAltTextWhenAddingImage(){return(0,r._)(this,tE)}get hcmFilter(){return B(this,"hcmFilter",(0,r._)(this,tV)?(0,r._)(this,tT).addHCMFilter((0,r._)(this,tV).foreground,(0,r._)(this,tV).background):"none")}get direction(){return B(this,"direction",getComputedStyle((0,r._)(this,tY)).direction)}get highlightColors(){return B(this,"highlightColors",(0,r._)(this,tN)?new Map((0,r._)(this,tN).split(",").map(e=>e.split("=").map(e=>e.trim()))):null)}get highlightColorNames(){return B(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),(0,a._)(this,tb,e)}setMainHighlightColorPicker(e){(0,a._)(this,tz,e)}editAltText(e){var t;let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];null==(t=(0,r._)(this,tf))||t.editAltText(this,e,n)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference(e){let{name:t,value:n}=e;"enableNewAltTextWhenAddingImage"===t&&(0,a._)(this,tE,n)}onPageChanging(e){let{pageNumber:t}=e;(0,a._)(this,tx,t-1)}focusMainContainer(){(0,r._)(this,tY).focus()}findParent(e,t){for(let n of(0,r._)(this,tp).values()){let{x:r,y:i,width:a,height:o}=n.div.getBoundingClientRect();if(e>=r&&e<=r+a&&t>=i&&t<=i+o)return n}return null}disableUserSelect(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(0,r._)(this,tX).classList.toggle("noUserSelect",e)}addShouldRescale(e){(0,r._)(this,t_).add(e)}removeShouldRescale(e){(0,r._)(this,t_).delete(e)}onScaleChanging(e){var t;let{scale:n}=e;for(let e of(this.commitOrRemove(),this.viewParameters.realScale=n*el.PDF_TO_CSS_UNITS,(0,r._)(this,t_)))e.onScaleChanging();null==(t=(0,r._)(this,tb))||t.onScaleChanging()}onRotationChanging(e){let{pagesRotation:t}=e;this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=document.getSelection();if(!t||t.isCollapsed)return;let{anchorNode:n,anchorOffset:i,focusNode:a,focusOffset:o}=t,l=t.toString(),u=(0,s._)(this,tJ,nc).call(this,t).closest(".textLayer"),c=this.getSelectionBoxes(u);if(!c)return;t.empty();let d=(0,s._)(this,tQ,nd).call(this,u),h=(0,r._)(this,tU)===_.NONE,p=()=>{null==d||d.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:c,anchorNode:n,anchorOffset:i,focusNode:a,focusOffset:o,text:l}),h&&this.showAllEditors("highlight",!0,!0)};if(h)return void this.switchToMode(_.HIGHLIGHT,p);p()}addToAnnotationStorage(e){!e.isEmpty()&&(0,r._)(this,tm)&&!(0,r._)(this,tm).has(e.id)&&(0,r._)(this,tm).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,(0,r._)(this,tD)&&((0,a._)(this,tD,!1),(0,s._)(this,t2,nf).call(this,"main_toolbar")),!this.hasSelection)return;let{activeElement:e}=document;for(let t of(0,r._)(this,tH))if(t.div.contains(e)){(0,a._)(this,tL,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!(0,r._)(this,tL))return;let[e,t]=(0,r._)(this,tL);(0,a._)(this,tL,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){(0,s._)(this,t9,ny).call(this),(0,s._)(this,t6,nx).call(this)}removeEditListeners(){(0,s._)(this,t8,nb).call(this),(0,s._)(this,t7,nw).call(this)}dragOver(e){for(let{type:t}of e.dataTransfer.items)for(let n of(0,r._)(this,tS))if(n.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(let t of e.dataTransfer.items)for(let n of(0,r._)(this,tS))if(n.isHandlingMimeForPasting(t.type)){n.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var t;if(e.preventDefault(),null==(t=(0,r._)(this,td))||t.commitOrRemove(),!this.hasSelection)return;let n=[];for(let e of(0,r._)(this,tH)){let t=e.serialize(!0);t&&n.push(t)}0!==n.length&&e.clipboardData.setData("application/pdfjs",JSON.stringify(n))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();let{clipboardData:t}=e;for(let e of t.items)for(let t of(0,r._)(this,tS))if(t.isHandlingMimeForPasting(e.type))return void t.paste(e,this.currentLayer);let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(e){j('paste: "'.concat(e.message,'".'));return}if(!Array.isArray(n))return;this.unselectAll();let i=this.currentLayer;try{let e=[];for(let t of n){let n=await i.deserialize(t);if(!n)return;e.push(n)}let t=()=>{for(let t of e)(0,s._)(this,na,nE).call(this,t);(0,s._)(this,nl,nI).call(this,e)};this.addCommands({cmd:t,undo:()=>{for(let t of e)t.remove()},mustExec:!0})}catch(e){j('paste: "'.concat(e.message,'".'))}}keydown(e){this.isShiftKeyDown||"Shift"!==e.key||(this.isShiftKeyDown=!0),(0,r._)(this,tU)===_.NONE||this.isEditorHandlingKeyboard||nu._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&"Shift"===e.key&&(this.isShiftKeyDown=!1,(0,r._)(this,tD)&&((0,a._)(this,tD,!1),(0,s._)(this,t2,nf).call(this,"main_toolbar")))}onEditingAction(e){let{name:t}=e;switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu")}}setEditingState(e){e?((0,s._)(this,t5,ng).call(this),(0,s._)(this,t6,nx).call(this),(0,s._)(this,nt,nS).call(this,{isEditing:(0,r._)(this,tU)!==_.NONE,isEmpty:(0,s._)(this,ns,nM).call(this),hasSomethingToUndo:(0,r._)(this,tv).hasSomethingToUndo(),hasSomethingToRedo:(0,r._)(this,tv).hasSomethingToRedo(),hasSelectedEditor:!1})):((0,s._)(this,t4,nv).call(this),(0,s._)(this,t7,nw).call(this),(0,s._)(this,nt,nS).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!(0,r._)(this,tS))for(let t of((0,a._)(this,tS,e),(0,r._)(this,tS)))(0,s._)(this,nn,n_).call(this,t.defaultPropertiesToUpdate)}getId(){return(0,r._)(this,tR).id}get currentLayer(){return(0,r._)(this,tp).get((0,r._)(this,tx))}getLayer(e){return(0,r._)(this,tp).get(e)}get currentPageIndex(){return(0,r._)(this,tx)}addLayer(e){(0,r._)(this,tp).set(e.pageIndex,e),(0,r._)(this,tO)?e.enable():e.disable()}removeLayer(e){(0,r._)(this,tp).delete(e.pageIndex)}async updateMode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((0,r._)(this,tU)!==e){if((0,r._)(this,tZ)&&(await (0,r._)(this,tZ).promise,!(0,r._)(this,tZ)))return;if((0,a._)(this,tZ,Promise.withResolvers()),(0,a._)(this,tU,e),e===_.NONE){var i;this.setEditingState(!1),(0,s._)(this,ni,nA).call(this),null==(i=this._editorUndoBar)||i.hide(),(0,r._)(this,tZ).resolve();return}for(let t of(this.setEditingState(!0),await (0,s._)(this,nr,nC).call(this),this.unselectAll(),(0,r._)(this,tp).values()))t.updateMode(e);if(!t){n&&this.addNewEditorFromKeyboard(),(0,r._)(this,tZ).resolve();return}for(let e of(0,r._)(this,th).values())e.annotationElementId===t?(this.setSelected(e),e.enterInEditMode()):e.unselect();(0,r._)(this,tZ).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==(0,r._)(this,tU)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){if((0,r._)(this,tS)){switch(e){case C.CREATE:this.currentLayer.addNewEditor();return;case C.HIGHLIGHT_DEFAULT_COLOR:var n;null==(n=(0,r._)(this,tz))||n.updateColor(t);break;case C.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(0,a._)(this,tq,(0,r._)(this,tq)||new Map).set(e,t),this.showAllEditors("highlight",t)}for(let n of(0,r._)(this,tH))n.updateParams(e,t);for(let n of(0,r._)(this,tS))n.updateDefaultParams(e,t)}}showAllEditors(e,t){var n,i;for(let n of(arguments.length>2&&void 0!==arguments[2]&&arguments[2],(0,r._)(this,th).values()))n.editorType===e&&n.show(t);(null==(i=null==(n=(0,r._)(this,tq))?void 0:n.get(C.HIGHLIGHT_SHOW_ALL))||i)!==t&&(0,s._)(this,nn,n_).call(this,[[C.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if((0,r._)(this,tj)!==e)for(let t of((0,a._)(this,tj,e),(0,r._)(this,tp).values()))e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}getEditors(e){let t=[];for(let n of(0,r._)(this,th).values())n.pageIndex===e&&t.push(n);return t}getEditor(e){return(0,r._)(this,th).get(e)}addEditor(e){(0,r._)(this,th).set(e.id,e)}removeEditor(e){if(e.div.contains(document.activeElement)&&((0,r._)(this,tM)&&clearTimeout((0,r._)(this,tM)),(0,a._)(this,tM,setTimeout(()=>{this.focusMainContainer(),(0,a._)(this,tM,null)},0))),(0,r._)(this,th).delete(e.id),this.unselect(e),!e.annotationElementId||!(0,r._)(this,tw).has(e.annotationElementId)){var t;null==(t=(0,r._)(this,tm))||t.remove(e.id)}}addDeletedAnnotationElement(e){(0,r._)(this,tw).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return(0,r._)(this,tw).has(e)}removeDeletedAnnotationElement(e){(0,r._)(this,tw).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){(0,r._)(this,td)!==e&&((0,a._)(this,td,e),e&&(0,s._)(this,nn,n_).call(this,e.propertiesToUpdate))}updateUI(e){(0,r._)(this,no)===e&&(0,s._)(this,nn,n_).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){(0,s._)(this,nn,n_).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if((0,r._)(this,tH).has(e)){(0,r._)(this,tH).delete(e),e.unselect(),(0,s._)(this,nt,nS).call(this,{hasSelectedEditor:this.hasSelection});return}(0,r._)(this,tH).add(e),e.select(),(0,s._)(this,nn,n_).call(this,e.propertiesToUpdate),(0,s._)(this,nt,nS).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;for(let n of(null==(t=(0,r._)(this,tb))||t.commitOrRemove(),(0,r._)(this,tH)))n!==e&&n.unselect();(0,r._)(this,tH).clear(),(0,r._)(this,tH).add(e),e.select(),(0,s._)(this,nn,n_).call(this,e.propertiesToUpdate),(0,s._)(this,nt,nS).call(this,{hasSelectedEditor:!0})}isSelected(e){return(0,r._)(this,tH).has(e)}get firstSelectedEditor(){return(0,r._)(this,tH).values().next().value}unselect(e){e.unselect(),(0,r._)(this,tH).delete(e),(0,s._)(this,nt,nS).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==(0,r._)(this,tH).size}get isEnterHandled(){return 1===(0,r._)(this,tH).size&&this.firstSelectedEditor.isEnterHandled}undo(){var e;(0,r._)(this,tv).undo(),(0,s._)(this,nt,nS).call(this,{hasSomethingToUndo:(0,r._)(this,tv).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:(0,s._)(this,ns,nM).call(this)}),null==(e=this._editorUndoBar)||e.hide()}redo(){(0,r._)(this,tv).redo(),(0,s._)(this,nt,nS).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:(0,r._)(this,tv).hasSomethingToRedo(),isEmpty:(0,s._)(this,ns,nM).call(this)})}addCommands(e){(0,r._)(this,tv).add(e),(0,s._)(this,nt,nS).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:(0,s._)(this,ns,nM).call(this)})}cleanUndoStack(e){(0,r._)(this,tv).cleanType(e)}delete(){var e;this.commitOrRemove();let t=null==(e=this.currentLayer)?void 0:e.endDrawingSession(!0);if(!this.hasSelection&&!t)return;let n=t?[t]:[...(0,r._)(this,tH)],i=()=>{var e;for(let t of(null==(e=this._editorUndoBar)||e.show(a,1===n.length?n[0].editorType:n.length),n))t.remove()},a=()=>{for(let e of n)(0,s._)(this,na,nE).call(this,e)};this.addCommands({cmd:i,undo:a,mustExec:!0})}commitOrRemove(){var e;null==(e=(0,r._)(this,td))||e.commitOrRemove()}hasSomethingToControl(){return(0,r._)(this,td)||this.hasSelection}selectAll(){for(let e of(0,r._)(this,tH))e.commit();(0,s._)(this,nl,nI).call(this,(0,r._)(this,th).values())}unselectAll(){var e;if(!(0,r._)(this,td)||((0,r._)(this,td).commitOrRemove(),(0,r._)(this,tU)===_.NONE)){if((null==(e=(0,r._)(this,tb))||!e.commitOrRemove())&&this.hasSelection){for(let e of(0,r._)(this,tH))e.unselect();(0,r._)(this,tH).clear(),(0,s._)(this,nt,nS).call(this,{hasSelectedEditor:!1})}}}translateSelectedEditors(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(n||this.commitOrRemove(),!this.hasSelection)return;(0,r._)(this,t$)[0]+=e,(0,r._)(this,t$)[1]+=t;let[i,o]=(0,r._)(this,t$),s=[...(0,r._)(this,tH)];for(let n of((0,r._)(this,tK)&&clearTimeout((0,r._)(this,tK)),(0,a._)(this,tK,setTimeout(()=>{(0,a._)(this,tK,null),(0,r._)(this,t$)[0]=(0,r._)(this,t$)[1]=0,this.addCommands({cmd:()=>{for(let e of s)(0,r._)(this,th).has(e.id)&&e.translateInPage(i,o)},undo:()=>{for(let e of s)(0,r._)(this,th).has(e.id)&&e.translateInPage(-i,-o)},mustExec:!1})},1e3)),s))n.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection)for(let e of(this.disableUserSelect(!0),(0,a._)(this,tk,new Map),(0,r._)(this,tH)))(0,r._)(this,tk).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}endDragSession(){if(!(0,r._)(this,tk))return!1;this.disableUserSelect(!1);let e=(0,r._)(this,tk);(0,a._)(this,tk,null);let t=!1;for(let[{x:n,y:r,pageIndex:i},a]of e)a.newX=n,a.newY=r,a.newPageIndex=i,t||(t=n!==a.savedX||r!==a.savedY||i!==a.savedPageIndex);if(!t)return!1;let n=(e,t,n,i)=>{if((0,r._)(this,th).has(e.id)){let a=(0,r._)(this,tp).get(i);a?e._setParentAndPosition(a,t,n):(e.pageIndex=i,e.x=t,e.y=n)}};return this.addCommands({cmd:()=>{for(let[t,{newX:r,newY:i,newPageIndex:a}]of e)n(t,r,i,a)},undo:()=>{for(let[t,{savedX:r,savedY:i,savedPageIndex:a}]of e)n(t,r,i,a)},mustExec:!0}),!0}dragSelectedEditors(e,t){if((0,r._)(this,tk))for(let n of(0,r._)(this,tk).keys())n.drag(e,t)}rebuild(e){if(null===e.parent){let t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return(null==(e=this.getActive())?void 0:e.shouldGetKeyboardEvents())||1===(0,r._)(this,tH).size&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return(0,r._)(this,td)===e}getActive(){return(0,r._)(this,td)}getMode(){return(0,r._)(this,tU)}get imageManager(){return B(this,"imageManager",new e7)}getSelectionBoxes(e){let t;if(!e)return null;let n=document.getSelection();for(let t=0,r=n.rangeCount;t<r;t++)if(!e.contains(n.getRangeAt(t).commonAncestorContainer))return null;let{x:r,y:i,width:a,height:o}=e.getBoundingClientRect();switch(e.getAttribute("data-main-rotation")){case"90":t=(e,t,n,s)=>({x:(t-i)/o,y:1-(e+n-r)/a,width:s/o,height:n/a});break;case"180":t=(e,t,n,s)=>({x:1-(e+n-r)/a,y:1-(t+s-i)/o,width:n/a,height:s/o});break;case"270":t=(e,t,n,s)=>({x:1-(t+s-i)/o,y:(e-r)/a,width:s/o,height:n/a});break;default:t=(e,t,n,s)=>({x:(e-r)/a,y:(t-i)/o,width:n/a,height:s/o})}let s=[];for(let e=0,r=n.rangeCount;e<r;e++){let r=n.getRangeAt(e);if(!r.collapsed)for(let{x:e,y:n,width:i,height:a}of r.getClientRects())0!==i&&0!==a&&s.push(t(e,n,i,a))}return 0===s.length?null:s}addChangedExistingAnnotation(e){let{annotationElementId:t,id:n}=e;(0,a._)(this,tg,(0,r._)(this,tg)||new Map).set(t,n)}removeChangedExistingAnnotation(e){var t;let{annotationElementId:n}=e;null==(t=(0,r._)(this,tg))||t.delete(n)}renderAnnotationElement(e){var t;let n=null==(t=(0,r._)(this,tg))?void 0:t.get(e.data.id);if(!n)return;let i=(0,r._)(this,tm).getRawValue(n);i&&((0,r._)(this,tU)!==_.NONE||i.hasBeenModified)&&i.renderAnnotationElement(e)}constructor(e,t,n,o,u,c,d,p,f,m,g,y,b){(0,l._)(this,tJ),(0,l._)(this,tQ),(0,l._)(this,t0),(0,l._)(this,t1),(0,l._)(this,t2),(0,l._)(this,t3),(0,l._)(this,t5),(0,l._)(this,t4),(0,l._)(this,t9),(0,l._)(this,t8),(0,l._)(this,t6),(0,l._)(this,t7),(0,l._)(this,ne),(0,l._)(this,nt),(0,l._)(this,nn),(0,l._)(this,nr),(0,l._)(this,ni),(0,l._)(this,na),(0,i._)(this,no,{get:nT,set:void 0}),(0,l._)(this,ns),(0,l._)(this,nl),(0,i._)(this,tc,{writable:!0,value:new AbortController}),(0,i._)(this,td,{writable:!0,value:null}),(0,i._)(this,th,{writable:!0,value:new Map}),(0,i._)(this,tp,{writable:!0,value:new Map}),(0,i._)(this,tf,{writable:!0,value:null}),(0,i._)(this,tm,{writable:!0,value:null}),(0,i._)(this,tg,{writable:!0,value:null}),(0,i._)(this,tv,{writable:!0,value:new ta}),(0,i._)(this,ty,{writable:!0,value:null}),(0,i._)(this,tb,{writable:!0,value:null}),(0,i._)(this,tx,{writable:!0,value:0}),(0,i._)(this,tw,{writable:!0,value:new Set}),(0,i._)(this,tk,{writable:!0,value:null}),(0,i._)(this,tS,{writable:!0,value:null}),(0,i._)(this,t_,{writable:!0,value:new Set}),(0,h._)(this,"_editorUndoBar",null),(0,i._)(this,tC,{writable:!0,value:!1}),(0,i._)(this,tA,{writable:!0,value:!1}),(0,i._)(this,tE,{writable:!0,value:!1}),(0,i._)(this,tT,{writable:!0,value:null}),(0,i._)(this,tM,{writable:!0,value:null}),(0,i._)(this,tI,{writable:!0,value:null}),(0,i._)(this,tN,{writable:!0,value:null}),(0,i._)(this,tD,{writable:!0,value:!1}),(0,i._)(this,tP,{writable:!0,value:null}),(0,i._)(this,tR,{writable:!0,value:new e5}),(0,i._)(this,tO,{writable:!0,value:!1}),(0,i._)(this,tj,{writable:!0,value:!1}),(0,i._)(this,tF,{writable:!0,value:null}),(0,i._)(this,tL,{writable:!0,value:null}),(0,i._)(this,tz,{writable:!0,value:null}),(0,i._)(this,tB,{writable:!0,value:null}),(0,i._)(this,tU,{writable:!0,value:_.NONE}),(0,i._)(this,tH,{writable:!0,value:new Set}),(0,i._)(this,tW,{writable:!0,value:null}),(0,i._)(this,tV,{writable:!0,value:null}),(0,i._)(this,tq,{writable:!0,value:null}),(0,i._)(this,tG,{writable:!0,value:{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1}}),(0,i._)(this,t$,{writable:!0,value:[0,0]}),(0,i._)(this,tK,{writable:!0,value:null}),(0,i._)(this,tY,{writable:!0,value:null}),(0,i._)(this,tX,{writable:!0,value:null}),(0,i._)(this,tZ,{writable:!0,value:null});let x=this._signal=(0,r._)(this,tc).signal;(0,a._)(this,tY,e),(0,a._)(this,tX,t),(0,a._)(this,tf,n),this._eventBus=o,o._on("editingaction",this.onEditingAction.bind(this),{signal:x}),o._on("pagechanging",this.onPageChanging.bind(this),{signal:x}),o._on("scalechanging",this.onScaleChanging.bind(this),{signal:x}),o._on("rotationchanging",this.onRotationChanging.bind(this),{signal:x}),o._on("setpreference",this.onSetPreference.bind(this),{signal:x}),o._on("switchannotationeditorparams",e=>this.updateParams(e.type,e.value),{signal:x}),(0,s._)(this,t3,nm).call(this),(0,s._)(this,ne,nk).call(this),(0,s._)(this,t9,ny).call(this),(0,a._)(this,tm,u.annotationStorage),(0,a._)(this,tT,u.filterFactory),(0,a._)(this,tV,c),(0,a._)(this,tN,d||null),(0,a._)(this,tC,p),(0,a._)(this,tA,f),(0,a._)(this,tE,m),(0,a._)(this,tB,g||null),this.viewParameters={realScale:el.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=y||null,this._supportsPinchToZoom=!1!==b}}function nc(e){let{anchorNode:t}=e;return t.nodeType===Node.TEXT_NODE?t.parentElement:t}function nd(e){let{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(let t of(0,r._)(this,tp).values())if(t.hasTextLayer(e))return t;return null}function nh(){let e=document.getSelection();if(!e||e.isCollapsed)return;let t=(0,s._)(this,tJ,nc).call(this,e).closest(".textLayer"),n=this.getSelectionBoxes(t);n&&((0,a._)(this,tP,(0,r._)(this,tP)||new eJ(this)),(0,r._)(this,tP).show(t,n,"ltr"===this.direction))}function np(){var e,t,n;let i=document.getSelection();if(!i||i.isCollapsed){(0,r._)(this,tW)&&(null==(t=(0,r._)(this,tP))||t.hide(),(0,a._)(this,tW,null),(0,s._)(this,nt,nS).call(this,{hasSelectedText:!1}));return}let{anchorNode:o}=i;if(o===(0,r._)(this,tW))return;let l=(0,s._)(this,tJ,nc).call(this,i).closest(".textLayer");if(!l){(0,r._)(this,tW)&&(null==(n=(0,r._)(this,tP))||n.hide(),(0,a._)(this,tW,null),(0,s._)(this,nt,nS).call(this,{hasSelectedText:!1}));return}if(null==(e=(0,r._)(this,tP))||e.hide(),(0,a._)(this,tW,o),(0,s._)(this,nt,nS).call(this,{hasSelectedText:!0}),((0,r._)(this,tU)===_.HIGHLIGHT||(0,r._)(this,tU)===_.NONE)&&((0,r._)(this,tU)===_.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),(0,a._)(this,tD,this.isShiftKeyDown),!this.isShiftKeyDown)){let e=(0,r._)(this,tU)===_.HIGHLIGHT?(0,s._)(this,tQ,nd).call(this,l):null;null==e||e.toggleDrawing();let t=new AbortController,n=this.combinedSignal(t),i=n=>{("pointerup"!==n.type||0===n.button)&&(t.abort(),null==e||e.toggleDrawing(!0),"pointerup"===n.type&&(0,s._)(this,t2,nf).call(this,"main_toolbar"))};window.addEventListener("pointerup",i,{signal:n}),window.addEventListener("blur",i,{signal:n})}}function nf(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";(0,r._)(this,tU)===_.HIGHLIGHT?this.highlightSelection(e):(0,r._)(this,tC)&&(0,s._)(this,t0,nh).call(this)}function nm(){document.addEventListener("selectionchange",(0,s._)(this,t1,np).bind(this),{signal:this._signal})}function ng(){if((0,r._)(this,tI))return;(0,a._)(this,tI,new AbortController);let e=this.combinedSignal((0,r._)(this,tI));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})}function nv(){var e;null==(e=(0,r._)(this,tI))||e.abort(),(0,a._)(this,tI,null)}function ny(){if((0,r._)(this,tF))return;(0,a._)(this,tF,new AbortController);let e=this.combinedSignal((0,r._)(this,tF));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})}function nb(){var e;null==(e=(0,r._)(this,tF))||e.abort(),(0,a._)(this,tF,null)}function nx(){if((0,r._)(this,ty))return;(0,a._)(this,ty,new AbortController);let e=this.combinedSignal((0,r._)(this,ty));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})}function nw(){var e;null==(e=(0,r._)(this,ty))||e.abort(),(0,a._)(this,ty,null)}function nk(){let e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})}function nS(e){Object.entries(e).some(e=>{let[t,n]=e;return(0,r._)(this,tG)[t]!==n})&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign((0,r._)(this,tG),e)}),(0,r._)(this,tU)===_.HIGHLIGHT&&!1===e.hasSelectedEditor&&(0,s._)(this,nn,n_).call(this,[[C.HIGHLIGHT_FREE,!0]]))}function n_(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}async function nC(){if(!(0,r._)(this,tO)){(0,a._)(this,tO,!0);let e=[];for(let t of(0,r._)(this,tp).values())e.push(t.enable());for(let t of(await Promise.all(e),(0,r._)(this,th).values()))t.enable()}}function nA(){if(this.unselectAll(),(0,r._)(this,tO)){for(let e of((0,a._)(this,tO,!1),(0,r._)(this,tp).values()))e.disable();for(let e of(0,r._)(this,th).values())e.disable()}}function nE(e){let t=(0,r._)(this,tp).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}function nT(){let e=null;for(e of(0,r._)(this,tH));return e}function nM(){if(0===(0,r._)(this,th).size)return!0;if(1===(0,r._)(this,th).size)for(let e of(0,r._)(this,th).values())return e.isEmpty();return!1}function nI(e){for(let e of(0,r._)(this,tH))e.unselect();for(let t of((0,r._)(this,tH).clear(),e))t.isEmpty()||((0,r._)(this,tH).add(t),t.select());(0,s._)(this,nt,nS).call(this,{hasSelectedEditor:this.hasSelection})}(0,h._)(nu,"TRANSLATE_SMALL",1),(0,h._)(nu,"TRANSLATE_BIG",10);var nN=new WeakMap,nD=new WeakMap,nP=new WeakMap,nR=new WeakMap,nO=new WeakMap,nj=new WeakMap,nF=new WeakMap,nL=new WeakMap,nz=new WeakMap,nB=new WeakMap,nU=new WeakMap,nH=new WeakMap,nW=new WeakMap,nV=new WeakSet;class nq{static initialize(e){null!=nq._l10n||(nq._l10n=e)}async render(){let e=(0,a._)(this,nP,document.createElement("button"));e.className="altText",e.tabIndex="0";let t=(0,a._)(this,nR,document.createElement("span"));e.append(t),(0,r._)(this,nH)?(e.classList.add("new"),e.setAttribute("data-l10n-id",(0,u._)(nq,nq,nG).missing),t.setAttribute("data-l10n-id",(0,u._)(nq,nq,nG)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));let n=(0,r._)(this,nz)._uiManager._signal;e.addEventListener("contextmenu",ey,{signal:n}),e.addEventListener("pointerdown",e=>e.stopPropagation(),{signal:n});let i=e=>{e.preventDefault(),(0,r._)(this,nz)._uiManager.editAltText((0,r._)(this,nz)),(0,r._)(this,nH)&&(0,r._)(this,nz)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:(0,r._)(this,nW)}})};return e.addEventListener("click",i,{capture:!0,signal:n}),e.addEventListener("keydown",t=>{t.target===e&&"Enter"===t.key&&((0,a._)(this,nF,!0),i(t))},{signal:n}),await (0,s._)(this,nV,nK).call(this),e}finish(){(0,r._)(this,nP)&&((0,r._)(this,nP).focus({focusVisible:(0,r._)(this,nF)}),(0,a._)(this,nF,!1))}isEmpty(){return(0,r._)(this,nH)?null===(0,r._)(this,nN):!(0,r._)(this,nN)&&!(0,r._)(this,nD)}hasData(){return(0,r._)(this,nH)?null!==(0,r._)(this,nN)||!!(0,r._)(this,nB):this.isEmpty()}get guessedText(){return(0,r._)(this,nB)}async setGuessedText(e){null===(0,r._)(this,nN)&&((0,a._)(this,nB,e),(0,a._)(this,nU,await nq._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),(0,s._)(this,nV,nK).call(this))}toggleAltTextBadge(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!(0,r._)(this,nH)||(0,r._)(this,nN)){var t;null==(t=(0,r._)(this,nL))||t.remove(),(0,a._)(this,nL,null);return}if(!(0,r._)(this,nL)){let e=(0,a._)(this,nL,document.createElement("div"));e.className="noAltTextBadge",(0,r._)(this,nz).div.append(e)}(0,r._)(this,nL).classList.toggle("hidden",!e)}serialize(e){let t=(0,r._)(this,nN);return e||(0,r._)(this,nB)!==t||(t=(0,r._)(this,nU)),{altText:t,decorative:(0,r._)(this,nD),guessedText:(0,r._)(this,nB),textWithDisclaimer:(0,r._)(this,nU)}}get data(){return{altText:(0,r._)(this,nN),decorative:(0,r._)(this,nD)}}set data(e){let{altText:t,decorative:n,guessedText:i,textWithDisclaimer:o,cancel:l=!1}=e;i&&((0,a._)(this,nB,i),(0,a._)(this,nU,o)),((0,r._)(this,nN)!==t||(0,r._)(this,nD)!==n)&&(l||((0,a._)(this,nN,t),(0,a._)(this,nD,n)),(0,s._)(this,nV,nK).call(this))}toggle(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(0,r._)(this,nP)&&(!e&&(0,r._)(this,nj)&&(clearTimeout((0,r._)(this,nj)),(0,a._)(this,nj,null)),(0,r._)(this,nP).disabled=!e)}shown(){(0,r._)(this,nz)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:(0,r._)(this,nW)}})}destroy(){var e,t;null==(e=(0,r._)(this,nP))||e.remove(),(0,a._)(this,nP,null),(0,a._)(this,nR,null),(0,a._)(this,nO,null),null==(t=(0,r._)(this,nL))||t.remove(),(0,a._)(this,nL,null)}constructor(e){(0,i._)(this,nW,{get:n$,set:void 0}),(0,l._)(this,nV),(0,i._)(this,nN,{writable:!0,value:null}),(0,i._)(this,nD,{writable:!0,value:!1}),(0,i._)(this,nP,{writable:!0,value:null}),(0,i._)(this,nR,{writable:!0,value:null}),(0,i._)(this,nO,{writable:!0,value:null}),(0,i._)(this,nj,{writable:!0,value:null}),(0,i._)(this,nF,{writable:!0,value:!1}),(0,i._)(this,nL,{writable:!0,value:null}),(0,i._)(this,nz,{writable:!0,value:null}),(0,i._)(this,nB,{writable:!0,value:null}),(0,i._)(this,nU,{writable:!0,value:null}),(0,i._)(this,nH,{writable:!0,value:!1}),(0,a._)(this,nz,e),(0,a._)(this,nH,e._uiManager.useNewAltTextFlow),(0,c._)(nq,nq,nG,(0,u._)(nq,nq,nG)||Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}}var nG={writable:!0,value:null};function n$(){return(0,r._)(this,nN)&&"added"||null===(0,r._)(this,nN)&&this.guessedText&&"review"||"missing"}async function nK(){var e,t,n;let i=(0,r._)(this,nP);if(!i)return;if((0,r._)(this,nH)){if(i.classList.toggle("done",!!(0,r._)(this,nN)),i.setAttribute("data-l10n-id",(0,u._)(nq,nq,nG)[(0,r._)(this,nW)]),null==(e=(0,r._)(this,nR))||e.setAttribute("data-l10n-id",(0,u._)(nq,nq,nG)["".concat((0,r._)(this,nW),"-label")]),!(0,r._)(this,nN)){null==(t=(0,r._)(this,nO))||t.remove();return}}else{if(!(0,r._)(this,nN)&&!(0,r._)(this,nD)){i.classList.remove("done"),null==(n=(0,r._)(this,nO))||n.remove();return}i.classList.add("done"),i.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let o=(0,r._)(this,nO);if(!o){(0,a._)(this,nO,o=document.createElement("span")),o.className="tooltip",o.setAttribute("role","tooltip"),o.id="alt-text-tooltip-".concat((0,r._)(this,nz).id);let e=(0,r._)(this,nz)._uiManager._signal;e.addEventListener("abort",()=>{clearTimeout((0,r._)(this,nj)),(0,a._)(this,nj,null)},{once:!0}),i.addEventListener("mouseenter",()=>{(0,a._)(this,nj,setTimeout(()=>{(0,a._)(this,nj,null),(0,r._)(this,nO).classList.add("show"),(0,r._)(this,nz)._reportTelemetry({action:"alt_text_tooltip"})},100))},{signal:e}),i.addEventListener("mouseleave",()=>{var e;(0,r._)(this,nj)&&(clearTimeout((0,r._)(this,nj)),(0,a._)(this,nj,null)),null==(e=(0,r._)(this,nO))||e.classList.remove("show")},{signal:e})}(0,r._)(this,nD)?o.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(o.removeAttribute("data-l10n-id"),o.textContent=(0,r._)(this,nN)),o.parentNode||i.append(o);let s=(0,r._)(this,nz).getImageForAltText();null==s||s.setAttribute("aria-describedby",o.id)}(0,h._)(nq,"_l10n",null);var nY=new WeakMap,nX=new WeakMap,nZ=new WeakMap,nJ=new WeakMap,nQ=new WeakMap,n0=new WeakMap,n1=new WeakMap,n2=new WeakMap,n3=new WeakMap,n5=new WeakMap,n4=new WeakMap,n9=new WeakSet,n8=new WeakSet,n6=new WeakSet;class n7{get MIN_TOUCH_DISTANCE_TO_PINCH(){return B(this,"MIN_TOUCH_DISTANCE_TO_PINCH",35/(window.devicePixelRatio||1))}destroy(){var e;null==(e=(0,r._)(this,n5))||e.abort(),(0,a._)(this,n5,null)}constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:n=null,onPinchStart:o=null,onPinching:u=null,onPinchEnd:c=null,signal:d}){(0,l._)(this,n9),(0,l._)(this,n8),(0,l._)(this,n6),(0,i._)(this,nY,{writable:!0,value:void 0}),(0,i._)(this,nX,{writable:!0,value:!1}),(0,i._)(this,nZ,{writable:!0,value:null}),(0,i._)(this,nJ,{writable:!0,value:void 0}),(0,i._)(this,nQ,{writable:!0,value:void 0}),(0,i._)(this,n0,{writable:!0,value:void 0}),(0,i._)(this,n1,{writable:!0,value:void 0}),(0,i._)(this,n2,{writable:!0,value:void 0}),(0,i._)(this,n3,{writable:!0,value:null}),(0,i._)(this,n5,{writable:!0,value:void 0}),(0,i._)(this,n4,{writable:!0,value:null}),(0,a._)(this,nY,e),(0,a._)(this,nZ,n),(0,a._)(this,nJ,t),(0,a._)(this,nQ,o),(0,a._)(this,n0,u),(0,a._)(this,n1,c),(0,a._)(this,n5,new AbortController),(0,a._)(this,n2,AbortSignal.any([d,(0,r._)(this,n5).signal])),e.addEventListener("touchstart",(0,s._)(this,n9,re).bind(this),{passive:!1,signal:(0,r._)(this,n2)})}}function re(e){var t,n,i;if((null==(t=(0,r._)(this,nJ))?void 0:t.call(this))||e.touches.length<2)return;if(!(0,r._)(this,n4)){(0,a._)(this,n4,new AbortController);let e=AbortSignal.any([(0,r._)(this,n2),(0,r._)(this,n4).signal]),t=(0,r._)(this,nY),i={signal:e,passive:!1};t.addEventListener("touchmove",(0,s._)(this,n8,rt).bind(this),i),t.addEventListener("touchend",(0,s._)(this,n6,rn).bind(this),i),t.addEventListener("touchcancel",(0,s._)(this,n6,rn).bind(this),i),null==(n=(0,r._)(this,nQ))||n.call(this)}if(eb(e),2!==e.touches.length||(null==(i=(0,r._)(this,nZ))?void 0:i.call(this)))return void(0,a._)(this,n3,null);let[o,l]=e.touches;o.identifier>l.identifier&&([o,l]=[l,o]),(0,a._)(this,n3,{touch0X:o.screenX,touch0Y:o.screenY,touch1X:l.screenX,touch1Y:l.screenY})}function rt(e){var t;if(!(0,r._)(this,n3)||2!==e.touches.length)return;let[n,i]=e.touches;n.identifier>i.identifier&&([n,i]=[i,n]);let{screenX:o,screenY:s}=n,{screenX:l,screenY:u}=i,c=(0,r._)(this,n3),{touch0X:d,touch0Y:h,touch1X:p,touch1Y:f}=c,m=Math.hypot(l-o,u-s)||1,g=Math.hypot(p-d,f-h)||1;if(!(0,r._)(this,nX)&&Math.abs(g-m)<=n7.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(c.touch0X=o,c.touch0Y=s,c.touch1X=l,c.touch1Y=u,e.preventDefault(),!(0,r._)(this,nX))return void(0,a._)(this,nX,!0);let y=[(o+l)/2,(s+u)/2];null==(t=(0,r._)(this,n0))||t.call(this,y,g,m)}function rn(e){var t;(0,r._)(this,n4).abort(),(0,a._)(this,n4,null),null==(t=(0,r._)(this,n1))||t.call(this),(0,r._)(this,n3)&&(e.preventDefault(),(0,a._)(this,n3,null),(0,a._)(this,nX,!1))}var rr=new WeakMap,ri=new WeakMap,ra=new WeakMap,ro=new WeakMap,rs=new WeakMap,rl=new WeakMap,ru=new WeakMap,rc=new WeakMap,rd=new WeakMap,rh=new WeakMap,rp=new WeakMap,rf=new WeakMap,rm=new WeakMap,rg=new WeakMap,rv=new WeakMap,ry=new WeakMap,rb=new WeakMap,rx=new WeakMap,rw=new WeakMap,rk=new WeakMap,rS=new WeakMap,r_=new WeakMap,rC=new WeakMap,rA=new WeakMap,rE=new WeakSet,rT=new WeakSet,rM=new WeakSet,rI=new WeakSet,rN=new WeakSet,rD=new WeakSet,rP=new WeakSet,rR=new WeakSet,rO=new WeakSet,rj=new WeakSet,rF=new WeakSet,rL=new WeakSet,rz=new WeakSet,rB=new WeakSet,rU=new WeakSet,rH=new WeakSet,rW=new WeakSet,rV=new WeakSet;class rq{static get _resizerKeyboardManager(){let e=rq.prototype._resizeWithKeyboard,t=nu.TRANSLATE_SMALL,n=nu.TRANSLATE_BIG;return B(this,"_resizerKeyboardManager",new ts([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],rq.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return B(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){let t=new it({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(null!=rq._l10n||(rq._l10n=e),rq._l10nResizer||(rq._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),-1!==rq._borderLineWidth)return;let n=getComputedStyle(document.documentElement);rq._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){F("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return(0,r._)(this,rC)}set _isDraggable(e){var t;(0,a._)(this,rC,e),null==(t=this.div)||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){let[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(2*e),this.y+=this.width*e/(2*t);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(2*e),this.y-=this.width*e/(2*t);break;default:this.x-=this.width/2,this.y-=this.height/2}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=(0,r._)(this,rA)}setParent(e){null!==e?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(0,s._)(this,rV,ie).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&((0,r._)(this,rm)?(0,a._)(this,rm,!1):this.parent.setSelected(this))}focusout(e){var t;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;let n=e.relatedTarget;(null==n||!n.closest("#".concat(this.id)))&&(e.preventDefault(),(null==(t=this.parent)?void 0:t.isMultipleSelection)||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,r){let[i,a]=this.parentDimensions;[n,r]=this.screenToPageTranslation(n,r),this.x=(e+n)/i,this.y=(t+r)/a,this.fixAndSetPosition()}translate(e,t){(0,s._)(this,rE,rG).call(this,this.parentDimensions,e,t)}translateInPage(e,t){(0,a._)(this,rg,(0,r._)(this,rg)||[this.x,this.y,this.width,this.height]),(0,s._)(this,rE,rG).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){(0,a._)(this,rg,(0,r._)(this,rg)||[this.x,this.y,this.width,this.height]);let{div:n,parentDimensions:[i,o]}=this;if(this.x+=e/i,this.y+=t/o,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){let{x:e,y:t}=this.div.getBoundingClientRect();this.parent.findNewParent(this,e,t)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:s,y:l}=this,[u,c]=this.getBaseTranslation();s+=u,l+=c;let{style:d}=n;d.left="".concat((100*s).toFixed(2),"%"),d.top="".concat((100*l).toFixed(2),"%"),this._onTranslating(s,l),n.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!(0,r._)(this,rg)&&((0,r._)(this,rg)[0]!==this.x||(0,r._)(this,rg)[1]!==this.y)}get _hasBeenResized(){return!!(0,r._)(this,rg)&&((0,r._)(this,rg)[2]!==this.width||(0,r._)(this,rg)[3]!==this.height)}getBaseTranslation(){let[e,t]=this.parentDimensions,{_borderLineWidth:n}=rq,r=n/e,i=n/t;switch(this.rotation){case 90:return[-r,i];case 180:return[r,i];case 270:return[r,-i];default:return[-r,-i]}}get _mustFixPosition(){return!0}fixAndSetPosition(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.rotation,{div:{style:t},pageDimensions:[n,r]}=this,{x:i,y:a,width:o,height:s}=this;if(o*=n,s*=r,i*=n,a*=r,this._mustFixPosition)switch(e){case 0:i=Math.max(0,Math.min(n-o,i)),a=Math.max(0,Math.min(r-s,a));break;case 90:i=Math.max(0,Math.min(n-s,i)),a=Math.min(r,Math.max(o,a));break;case 180:i=Math.min(n,Math.max(o,i)),a=Math.min(r,Math.max(s,a));break;case 270:i=Math.min(n,Math.max(s,i)),a=Math.max(0,Math.min(r-o,a))}this.x=i/=n,this.y=a/=r;let[l,u]=this.getBaseTranslation();i+=l,a+=u,t.left="".concat((100*i).toFixed(2),"%"),t.top="".concat((100*a).toFixed(2),"%"),this.moveInDOM()}screenToPageTranslation(e,t){return(0,f._)(rq,rq,r$).call(rq,e,t,this.parentRotation)}pageTranslationToScreen(e,t){return(0,f._)(rq,rq,r$).call(rq,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){let{parentScale:e,pageDimensions:[t,n]}=this;return[t*e,n*e]}setDims(e,t){let[n,i]=this.parentDimensions,{style:a}=this.div;a.width="".concat((100*e/n).toFixed(2),"%"),(0,r._)(this,ru)||(a.height="".concat((100*t/i).toFixed(2),"%"))}fixDims(){let{style:e}=this.div,{height:t,width:n}=e,i=n.endsWith("%"),a=!(0,r._)(this,ru)&&t.endsWith("%");if(i&&a)return;let[o,s]=this.parentDimensions;i||(e.width="".concat((100*parseFloat(n)/o).toFixed(2),"%")),(0,r._)(this,ru)||a||(e.height="".concat((100*parseFloat(t)/s).toFixed(2),"%"))}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(1e4*e)/1e4}_onResizing(){}altTextFinish(){var e;null==(e=(0,r._)(this,ra))||e.finish()}async addEditToolbar(){return this._editToolbar||(0,r._)(this,ry)||(this._editToolbar=new eL(this),this.div.append(this._editToolbar.render()),(0,r._)(this,ra)&&await this._editToolbar.addAltText((0,r._)(this,ra))),this._editToolbar}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,null==(e=(0,r._)(this,ra))||e.destroy())}addContainer(e){var t;let n=null==(t=this._editToolbar)?void 0:t.div;n?n.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){(0,r._)(this,ra)||(nq.initialize(rq._l10n),(0,a._)(this,ra,new nq(this)),(0,r._)(this,rr)&&((0,r._)(this,ra).data=(0,r._)(this,rr),(0,a._)(this,rr,null)),await this.addEditToolbar())}get altTextData(){var e;return null==(e=(0,r._)(this,ra))?void 0:e.data}set altTextData(e){(0,r._)(this,ra)&&((0,r._)(this,ra).data=e)}get guessedAltText(){var e;return null==(e=(0,r._)(this,ra))?void 0:e.guessedText}async setGuessedAltText(e){var t;await (null==(t=(0,r._)(this,ra))?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return null==(t=(0,r._)(this,ra))?void 0:t.serialize(e)}hasAltText(){return!!(0,r._)(this,ra)&&!(0,r._)(this,ra).isEmpty()}hasAltTextData(){var e,t;return null!=(t=null==(e=(0,r._)(this,ra))?void 0:e.hasData())&&t}render(){var e;this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=(0,r._)(this,ro)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),(0,s._)(this,rz,r4).call(this);let[t,n]=this.parentDimensions;this.parentRotation%180!=0&&(this.div.style.maxWidth="".concat((100*n/t).toFixed(2),"%"),this.div.style.maxHeight="".concat((100*t/n).toFixed(2),"%"));let[i,o]=this.getInitialTranslation();return this.translate(i,o),e2(this,this.div,["pointerdown"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(0,a._)(this,r_,(0,r._)(this,r_)||new n7({container:this.div,isPinchingDisabled:()=>!this.isSelected,onPinchStart:(0,s._)(this,rR,r0).bind(this),onPinching:(0,s._)(this,rO,r1).bind(this),onPinchEnd:(0,s._)(this,rj,r2).bind(this),signal:this._uiManager._signal})),null==(e=this._uiManager._editorUndoBar)||e.hide(),this.div}pointerdown(e){let{isMac:t}=J.platform;return 0!==e.button||e.ctrlKey&&t?void e.preventDefault():((0,a._)(this,rm,!0),this._isDraggable)?void(0,s._)(this,rL,r5).call(this,e):void(0,s._)(this,rF,r3).call(this,e)}get isSelected(){return this._uiManager.isSelected(this)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){(0,r._)(this,rx)&&clearTimeout((0,r._)(this,rx)),(0,a._)(this,rx,setTimeout(()=>{var e;(0,a._)(this,rx,null),null==(e=this.parent)||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.rotation,r=this.parentScale,[i,a]=this.pageDimensions,[o,s]=this.pageTranslation,l=e/r,u=t/r,c=this.x*i,d=this.y*a,h=this.width*i,p=this.height*a;switch(n){case 0:return[c+l+o,a-d-u-p+s,c+l+h+o,a-d-u+s];case 90:return[c+u+o,a-d+l+s,c+u+p+o,a-d+l+h+s];case 180:return[c-l-h+o,a-d+u+s,c-l+o,a-d+u+p+s];case 270:return[c-u-p+o,a-d-l-h+s,c-u+o,a-d-l+s];default:throw Error("Invalid rotation")}}getRectInCurrentCoords(e,t){let[n,r,i,a]=e,o=i-n,s=a-r;switch(this.rotation){case 0:return[n,t-a,o,s];case 90:return[n,t-r,s,o];case 180:return[i,t-r,o,s];case 270:return[i,t-a,s,o];default:throw Error("Invalid rotation")}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){(0,a._)(this,ry,!0)}disableEditMode(){(0,a._)(this,ry,!1)}isInEditMode(){return(0,r._)(this,ry)}shouldGetKeyboardEvents(){return(0,r._)(this,rb)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){let{top:e,left:t,bottom:n,right:r}=this.getClientDimensions(),{innerHeight:i,innerWidth:a}=window;return t<a&&r>0&&e<i&&n>0}rebuild(){(0,s._)(this,rz,r4).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:(null==(e=this._initialData)?void 0:e.popupRef)||""}}serialize(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1],F("An editor must be serializable")}static async deserialize(e,t,n){let r=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n});r.rotation=e.rotation,(0,a._)(r,rr,e.accessibilityData);let[i,o]=r.pageDimensions,[s,l,u,c]=r.getRectInCurrentCoords(e.rect,o);return r.x=s/i,r.y=l/o,r.width=u/i,r.height=c/o,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||null!==this.serialize())}remove(){var e,t;if(null==(e=(0,r._)(this,rp))||e.abort(),(0,a._)(this,rp,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(0,r._)(this,rx)&&(clearTimeout((0,r._)(this,rx)),(0,a._)(this,rx,null)),(0,s._)(this,rV,ie).call(this),this.removeEditToolbar(),(0,r._)(this,rS)){for(let e of(0,r._)(this,rS).values())clearTimeout(e);(0,a._)(this,rS,null)}this.parent=null,null==(t=(0,r._)(this,r_))||t.destroy(),(0,a._)(this,r_,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&((0,s._)(this,rM,rY).call(this),(0,r._)(this,rc).classList.remove("hidden"),e2(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||"Enter"!==e.key)return;this._uiManager.setSelected(this),(0,a._)(this,rh,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});let t=(0,r._)(this,rc).children;if(!(0,r._)(this,ri)){(0,a._)(this,ri,Array.from(t));let e=(0,s._)(this,rB,r9).bind(this),n=(0,s._)(this,rU,r8).bind(this),i=this._uiManager._signal;for(let t of(0,r._)(this,ri)){let r=t.getAttribute("data-resizer-name");t.setAttribute("role","spinbutton"),t.addEventListener("keydown",e,{signal:i}),t.addEventListener("blur",n,{signal:i}),t.addEventListener("focus",(0,s._)(this,rH,r6).bind(this,r),{signal:i}),t.setAttribute("data-l10n-id",rq._l10nResizer[r])}}let n=(0,r._)(this,ri)[0],i=0;for(let e of t){if(e===n)break;i++}let o=(360-this.rotation+this.parentRotation)%360/90*((0,r._)(this,ri).length/4);if(o!==i){if(o<i)for(let e=0;e<i-o;e++)(0,r._)(this,rc).append((0,r._)(this,rc).firstChild);else if(o>i)for(let e=0;e<o-i;e++)(0,r._)(this,rc).firstChild.before((0,r._)(this,rc).lastChild);let e=0;for(let n of t){let t=(0,r._)(this,ri)[e++].getAttribute("data-resizer-name");n.setAttribute("data-l10n-id",rq._l10nResizer[t])}}(0,s._)(this,rW,r7).call(this,0),(0,a._)(this,rb,!0),(0,r._)(this,rc).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){(0,r._)(this,rb)&&(0,s._)(this,rP,rQ).call(this,(0,r._)(this,rf),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){(0,s._)(this,rV,ie).call(this),this.div.focus()}select(){var e,t,n;if(this.makeResizable(),null==(e=this.div)||e.classList.add("selectedEditor"),!this._editToolbar)return void this.addEditToolbar().then(()=>{var e,t;(null==(e=this.div)?void 0:e.classList.contains("selectedEditor"))&&(null==(t=this._editToolbar)||t.show())});null==(t=this._editToolbar)||t.show(),null==(n=(0,r._)(this,ra))||n.toggleAltTextBadge(!1)}unselect(){var e,t,n,i,a;null==(e=(0,r._)(this,rc))||e.classList.add("hidden"),null==(t=this.div)||t.classList.remove("selectedEditor"),(null==(n=this.div)?void 0:n.contains(document.activeElement))&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),null==(i=this._editToolbar)||i.hide(),null==(a=(0,r._)(this,ra))||a.toggleAltTextBadge(!0)}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return(0,r._)(this,rv)}set isEditing(e){(0,a._)(this,rv,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){(0,a._)(this,ru,!0);let{style:n}=this.div;n.aspectRatio=e/t,n.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t){(0,a._)(this,rS,(0,r._)(this,rS)||new Map);let{action:t}=e,n=(0,r._)(this,rS).get(t);n&&clearTimeout(n),n=setTimeout(()=>{this._reportTelemetry(e),(0,r._)(this,rS).delete(t),0===(0,r._)(this,rS).size&&(0,a._)(this,rS,null)},rq._telemetryTimeout),(0,r._)(this,rS).set(t,n);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._isVisible;this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),(0,a._)(this,ro,!1)}disable(){this.div&&(this.div.tabIndex=-1),(0,a._)(this,ro,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(t){if("CANVAS"===t.nodeName){let e=t;(t=document.createElement("div")).classList.add("annotationContent",this.editorType),e.before(t)}}else(t=document.createElement("div")).classList.add("annotationContent",this.editorType),e.container.prepend(t);return t}resetAnnotationElement(e){let{firstChild:t}=e.container;(null==t?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}constructor(e){(0,l._)(this,rE),(0,l._)(this,rT),(0,l._)(this,rM),(0,l._)(this,rI),(0,l._)(this,rN),(0,l._)(this,rD),(0,l._)(this,rP),(0,l._)(this,rR),(0,l._)(this,rO),(0,l._)(this,rj),(0,l._)(this,rF),(0,l._)(this,rL),(0,l._)(this,rz),(0,l._)(this,rB),(0,l._)(this,rU),(0,l._)(this,rH),(0,l._)(this,rW),(0,l._)(this,rV),(0,i._)(this,rr,{writable:!0,value:null}),(0,i._)(this,ri,{writable:!0,value:null}),(0,i._)(this,ra,{writable:!0,value:null}),(0,i._)(this,ro,{writable:!0,value:!1}),(0,i._)(this,rs,{writable:!0,value:null}),(0,i._)(this,rl,{writable:!0,value:""}),(0,i._)(this,ru,{writable:!0,value:!1}),(0,i._)(this,rc,{writable:!0,value:null}),(0,i._)(this,rd,{writable:!0,value:null}),(0,i._)(this,rh,{writable:!0,value:null}),(0,i._)(this,rp,{writable:!0,value:null}),(0,i._)(this,rf,{writable:!0,value:""}),(0,i._)(this,rm,{writable:!0,value:!1}),(0,i._)(this,rg,{writable:!0,value:null}),(0,i._)(this,rv,{writable:!0,value:!1}),(0,i._)(this,ry,{writable:!0,value:!1}),(0,i._)(this,rb,{writable:!0,value:!1}),(0,i._)(this,rx,{writable:!0,value:null}),(0,i._)(this,rw,{writable:!0,value:0}),(0,i._)(this,rk,{writable:!0,value:0}),(0,i._)(this,rS,{writable:!0,value:null}),(0,i._)(this,r_,{writable:!0,value:null}),(0,h._)(this,"_editToolbar",null),(0,h._)(this,"_initialOptions",Object.create(null)),(0,h._)(this,"_initialData",null),(0,h._)(this,"_isVisible",!0),(0,h._)(this,"_uiManager",null),(0,h._)(this,"_focusEventsAllowed",!0),(0,i._)(this,rC,{writable:!0,value:!1}),(0,i._)(this,rA,{writable:!0,value:rq._zIndex++}),this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;let{rotation:t,rawDims:{pageWidth:n,pageHeight:r,pageX:a,pageY:o}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,r],this.pageTranslation=[a,o];let[s,u]=this.parentDimensions;this.x=e.x/s,this.y=e.y/u,this.isAttachedToDOM=!1,this.deleted=!1}}function rG(e,t,n){let[r,i]=e;[t,n]=this.screenToPageTranslation(t,n),this.x+=t/r,this.y+=n/i,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}function r$(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}function rK(e){switch(e){case 90:{let[e,t]=this.pageDimensions;return[0,-e/t,t/e,0]}case 180:return[-1,0,0,-1];case 270:{let[e,t]=this.pageDimensions;return[0,e/t,-t/e,0]}default:return[1,0,0,1]}}function rY(){if((0,r._)(this,rc))return;(0,a._)(this,rc,document.createElement("div")),(0,r._)(this,rc).classList.add("resizers");let e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(let n of e){let e=document.createElement("div");(0,r._)(this,rc).append(e),e.classList.add("resizer",n),e.setAttribute("data-resizer-name",n),e.addEventListener("pointerdown",(0,s._)(this,rI,rX).bind(this,n),{signal:t}),e.addEventListener("contextmenu",ey,{signal:t}),e.tabIndex=-1}this.div.prepend((0,r._)(this,rc))}function rX(e,t){var n;t.preventDefault();let{isMac:i}=J.platform;if(0!==t.button||t.ctrlKey&&i)return;null==(n=(0,r._)(this,ra))||n.toggle(!1);let o=this._isDraggable;this._isDraggable=!1,(0,a._)(this,rd,[t.screenX,t.screenY]);let l=new AbortController,u=this._uiManager.combinedSignal(l);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",(0,s._)(this,rP,rQ).bind(this,e),{passive:!0,capture:!0,signal:u}),window.addEventListener("touchmove",eb,{passive:!1,signal:u}),window.addEventListener("contextmenu",ey,{signal:u}),(0,a._)(this,rh,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});let c=this.parent.div.style.cursor,d=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;let h=()=>{var e;l.abort(),this.parent.togglePointerEvents(!0),null==(e=(0,r._)(this,ra))||e.toggle(!0),this._isDraggable=o,this.parent.div.style.cursor=c,this.div.style.cursor=d,(0,s._)(this,rD,rJ).call(this)};window.addEventListener("pointerup",h,{signal:u}),window.addEventListener("blur",h,{signal:u})}function rZ(e,t,n,r){this.width=n,this.height=r,this.x=e,this.y=t;let[i,a]=this.parentDimensions;this.setDims(i*n,a*r),this.fixAndSetPosition(),this._onResized()}function rJ(){if(!(0,r._)(this,rh))return;let{savedX:e,savedY:t,savedWidth:n,savedHeight:i}=(0,r._)(this,rh);(0,a._)(this,rh,null);let o=this.x,l=this.y,u=this.width,c=this.height;(o!==e||l!==t||u!==n||c!==i)&&this.addCommands({cmd:(0,s._)(this,rN,rZ).bind(this,o,l,u,c),undo:(0,s._)(this,rN,rZ).bind(this,e,t,n,i),mustExec:!0})}function rQ(e,t){let n,i,o,l,u,c,[d,h]=this.parentDimensions,p=this.x,f=this.y,m=this.width,g=this.height,y=rq.MIN_SIZE/d,b=rq.MIN_SIZE/h,x=(0,s._)(this,rT,rK).call(this,this.rotation),w=(e,t)=>[x[0]*e+x[2]*t,x[1]*e+x[3]*t],k=(0,s._)(this,rT,rK).call(this,360-this.rotation),S=!1,_=!1;switch(e){case"topLeft":S=!0,n=(e,t)=>[0,0],i=(e,t)=>[e,t];break;case"topMiddle":n=(e,t)=>[e/2,0],i=(e,t)=>[e/2,t];break;case"topRight":S=!0,n=(e,t)=>[e,0],i=(e,t)=>[0,t];break;case"middleRight":_=!0,n=(e,t)=>[e,t/2],i=(e,t)=>[0,t/2];break;case"bottomRight":S=!0,n=(e,t)=>[e,t],i=(e,t)=>[0,0];break;case"bottomMiddle":n=(e,t)=>[e/2,t],i=(e,t)=>[e/2,0];break;case"bottomLeft":S=!0,n=(e,t)=>[0,t],i=(e,t)=>[e,0];break;case"middleLeft":_=!0,n=(e,t)=>[0,t/2],i=(e,t)=>[e,t/2]}let C=n(m,g),A=i(m,g),E=w(...A),T=rq._round(p+E[0]),M=rq._round(f+E[1]),I=1,N=1;if(t.fromKeyboard)({deltaX:o,deltaY:l}=t);else{let{screenX:e,screenY:n}=t,[i,a]=(0,r._)(this,rd);[o,l]=this.screenToPageTranslation(e-i,n-a),(0,r._)(this,rd)[0]=e,(0,r._)(this,rd)[1]=n}if([o,l]=(u=o/d,c=l/h,[k[0]*u+k[2]*c,k[1]*u+k[3]*c]),S){let e=Math.hypot(m,g);I=N=Math.max(Math.min(Math.hypot(A[0]-C[0]-o,A[1]-C[1]-l)/e,1/m,1/g),y/m,b/g)}else _?I=Math.max(y,Math.min(1,Math.abs(A[0]-C[0]-o)))/m:N=Math.max(b,Math.min(1,Math.abs(A[1]-C[1]-l)))/g;let D=rq._round(m*I),P=rq._round(g*N),R=T-(E=w(...i(D,P)))[0],O=M-E[1];(0,a._)(this,rg,(0,r._)(this,rg)||[this.x,this.y,this.width,this.height]),this.width=D,this.height=P,this.x=R,this.y=O,this.setDims(d*D,h*P),this.fixAndSetPosition(),this._onResizing()}function r0(){var e;(0,a._)(this,rh,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),null==(e=(0,r._)(this,ra))||e.toggle(!1),this.parent.togglePointerEvents(!1)}function r1(e,t,n){let i=n/t*.7+1-.7;if(1===i)return;let o=(0,s._)(this,rT,rK).call(this,this.rotation),l=(e,t)=>[o[0]*e+o[2]*t,o[1]*e+o[3]*t],[u,c]=this.parentDimensions,d=this.x,h=this.y,p=this.width,f=this.height;i=Math.max(Math.min(i,1/p,1/f),rq.MIN_SIZE/u/p,rq.MIN_SIZE/c/f);let m=rq._round(p*i),g=rq._round(f*i);if(m===p&&g===f)return;(0,a._)(this,rg,(0,r._)(this,rg)||[d,h,p,f]);let y=l(p/2,f/2),b=rq._round(d+y[0]),x=rq._round(h+y[1]),w=l(m/2,g/2);this.x=b-w[0],this.y=x-w[1],this.width=m,this.height=g,this.setDims(u*m,c*g),this.fixAndSetPosition(),this._onResizing()}function r2(){var e;null==(e=(0,r._)(this,ra))||e.toggle(!0),this.parent.togglePointerEvents(!0),(0,s._)(this,rD,rJ).call(this)}function r3(e){let{isMac:t}=J.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}function r5(e){let{isSelected:t}=this;this._uiManager.setUpDragSession();let n=!1,i=new AbortController,o=this._uiManager.combinedSignal(i),l={capture:!0,passive:!1,signal:o},u=e=>{i.abort(),(0,a._)(this,rs,null),(0,a._)(this,rm,!1),this._uiManager.endDragSession()||(0,s._)(this,rF,r3).call(this,e),n&&this._onStopDragging()};t&&((0,a._)(this,rw,e.clientX),(0,a._)(this,rk,e.clientY),(0,a._)(this,rs,e.pointerId),(0,a._)(this,rl,e.pointerType),window.addEventListener("pointermove",e=>{n||(n=!0,this._onStartDragging());let{clientX:t,clientY:i,pointerId:o}=e;if(o!==(0,r._)(this,rs))return void eb(e);let[s,l]=this.screenToPageTranslation(t-(0,r._)(this,rw),i-(0,r._)(this,rk));(0,a._)(this,rw,t),(0,a._)(this,rk,i),this._uiManager.dragSelectedEditors(s,l)},l),window.addEventListener("touchmove",eb,l),window.addEventListener("pointerdown",e=>{e.pointerType===(0,r._)(this,rl)&&((0,r._)(this,r_)||e.isPrimary)&&u(e),eb(e)},l));let c=e=>{if(!(0,r._)(this,rs)||(0,r._)(this,rs)===e.pointerId)return void u(e);eb(e)};window.addEventListener("pointerup",c,{signal:o}),window.addEventListener("blur",c,{signal:o})}function r4(){if((0,r._)(this,rp)||!this.div)return;(0,a._)(this,rp,new AbortController);let e=this._uiManager.combinedSignal((0,r._)(this,rp));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}function r9(e){rq._resizerKeyboardManager.exec(this,e)}function r8(e){var t;(0,r._)(this,rb)&&(null==(t=e.relatedTarget)?void 0:t.parentNode)!==(0,r._)(this,rc)&&(0,s._)(this,rV,ie).call(this)}function r6(e){(0,a._)(this,rf,(0,r._)(this,rb)?e:"")}function r7(e){if((0,r._)(this,ri))for(let t of(0,r._)(this,ri))t.tabIndex=e}function ie(){(0,a._)(this,rb,!1),(0,s._)(this,rW,r7).call(this,-1),(0,s._)(this,rD,rJ).call(this)}(0,h._)(rq,"_l10n",null),(0,h._)(rq,"_l10nResizer",null),(0,h._)(rq,"_borderLineWidth",-1),(0,h._)(rq,"_colorManager",new tu),(0,h._)(rq,"_zIndex",1),(0,h._)(rq,"_telemetryTimeout",1e3);class it extends rq{serialize(){return this.serializeDeleted()}constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}}class ir{update(e){let t,n;if("string"==typeof e){t=new Uint8Array(2*e.length),n=0;for(let r=0,i=e.length;r<i;r++){let i=e.charCodeAt(r);i<=255?t[n++]=i:(t[n++]=i>>>8,t[n++]=255&i)}}else if(ArrayBuffer.isView(e))n=(t=e.slice()).byteLength;else throw Error("Invalid data format, must be a string or TypedArray.");let r=n>>2,i=n-4*r,a=new Uint32Array(t.buffer,0,r),o=0,s=0,l=this.h1,u=this.h2;for(let e=0;e<r;e++)1&e?(l^=o=0x1b873593*(o=(o=0xcc9e2d51*(o=a[e])&0xffff0000|11601*o&65535)<<15|o>>>17)&0xffff0000|13715*o&65535,l=5*(l=l<<13|l>>>19)+0xe6546b64):(u^=s=0x1b873593*(s=(s=0xcc9e2d51*(s=a[e])&0xffff0000|11601*s&65535)<<15|s>>>17)&0xffff0000|13715*s&65535,u=5*(u=u<<13|u>>>19)+0xe6546b64);switch(o=0,i){case 3:o^=t[4*r+2]<<16;case 2:o^=t[4*r+1]<<8;case 1:o^=t[4*r],o=0x1b873593*(o=(o=0xcc9e2d51*o&0xffff0000|11601*o&65535)<<15|o>>>17)&0xffff0000|13715*o&65535,1&r?l^=o:u^=o}this.h1=l,this.h2=u}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,t=0xff51afd7*t&0xffff0000|((t<<16|(e=0xed558ccd*e&0xffff0000|36045*e&65535)>>>16)*0xafd7ed55&0xffff0000)>>>16,e^=t>>>1,t=0xc4ceb9fe*t&0xffff0000|((t<<16|(e=0x1a85ec53*e&0xffff0000|60499*e&65535)>>>16)*0xb9fe1a85&0xffff0000)>>>16,((e^=t>>>1)>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}constructor(e){this.h1=e?0|e:0xc3d2e1f0,this.h2=e?0|e:0xc3d2e1f0}}let ii=Object.freeze({map:null,hash:"",transfer:void 0});var ia=new WeakMap,io=new WeakMap,is=new WeakMap,il=new WeakSet;class iu{getValue(e,t){let n=(0,r._)(this,is).get(e);return void 0===n?t:Object.assign(t,n)}getRawValue(e){return(0,r._)(this,is).get(e)}remove(e){if((0,r._)(this,is).delete(e),0===(0,r._)(this,is).size&&this.resetModified(),"function"==typeof this.onAnnotationEditor){for(let e of(0,r._)(this,is).values())if(e instanceof rq)return;this.onAnnotationEditor(null)}}setValue(e,t){let n=(0,r._)(this,is).get(e),i=!1;if(void 0!==n)for(let[e,r]of Object.entries(t))n[e]!==r&&(i=!0,n[e]=r);else i=!0,(0,r._)(this,is).set(e,t);i&&(0,s._)(this,il,ic).call(this),t instanceof rq&&"function"==typeof this.onAnnotationEditor&&this.onAnnotationEditor(t.constructor._type)}has(e){return(0,r._)(this,is).has(e)}getAll(){return(0,r._)(this,is).size>0?Z((0,r._)(this,is)):null}setAll(e){for(let[t,n]of Object.entries(e))this.setValue(t,n)}get size(){return(0,r._)(this,is).size}resetModified(){(0,r._)(this,ia)&&((0,a._)(this,ia,!1),"function"==typeof this.onResetModified&&this.onResetModified())}get print(){return new ih(this)}get serializable(){if(0===(0,r._)(this,is).size)return ii;let e=new Map,t=new ir,n=[],i=Object.create(null),a=!1;for(let[n,o]of(0,r._)(this,is)){let r=o instanceof rq?o.serialize(!1,i):o;r&&(e.set(n,r),t.update("".concat(n,":").concat(JSON.stringify(r))),a||(a=!!r.bitmap))}if(a)for(let t of e.values())t.bitmap&&n.push(t.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:ii}get editorStats(){let e=null,t=new Map;for(let a of(0,r._)(this,is).values()){var n,i;if(!(a instanceof rq))continue;let r=a.telemetryFinalData;if(!r)continue;let{type:o}=r;t.has(o)||t.set(o,Object.getPrototypeOf(a).constructor),e||(e=Object.create(null));let s=(n=e)[o]||(n[o]=new Map);for(let[e,t]of Object.entries(r)){if("type"===e)continue;let n=s.get(e);n||(n=new Map,s.set(e,n));let r=null!=(i=n.get(t))?i:0;n.set(t,r+1)}}for(let[n,r]of t)e[n]=r.computeTelemetryFinalData(e[n]);return e}resetModifiedIds(){(0,a._)(this,io,null)}get modifiedIds(){if((0,r._)(this,io))return(0,r._)(this,io);let e=[];for(let t of(0,r._)(this,is).values())t instanceof rq&&t.annotationElementId&&t.serialize()&&e.push(t.annotationElementId);return(0,a._)(this,io,{ids:new Set(e),hash:e.join(",")})}constructor(){(0,l._)(this,il),(0,i._)(this,ia,{writable:!0,value:!1}),(0,i._)(this,io,{writable:!0,value:null}),(0,i._)(this,is,{writable:!0,value:new Map}),this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}}function ic(){(0,r._)(this,ia)||((0,a._)(this,ia,!0),"function"==typeof this.onSetModified&&this.onSetModified())}var id=new WeakMap;class ih extends iu{get print(){F("Should not call PrintAnnotationStorage.print")}get serializable(){return(0,r._)(this,id)}get modifiedIds(){return B(this,"modifiedIds",{ids:new Set,hash:""})}constructor(e){super(),(0,i._)(this,id,{writable:!0,value:void 0});let{map:t,hash:n,transfer:r}=e.serializable,o=structuredClone(t,r?{transfer:r}:null);(0,a._)(this,id,{map:o,hash:n,transfer:r})}}var ip=new WeakMap;class im{addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));let t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(let e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),(0,r._)(this,ip).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(e){let{systemFontInfo:t,_inspectFont:n}=e;if(!(!t||(0,r._)(this,ip).has(t.loadedName))){if(L(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){let{loadedName:e,src:i,style:a}=t,o=new FontFace(e,i,a);this.addNativeFontFace(o);try{await o.load(),(0,r._)(this,ip).add(e),null==n||n(t)}catch(e){j("Cannot load system font: ".concat(t.baseFontName,", installing it could help to improve PDF rendering.")),this.removeNativeFontFace(o)}return}F("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo)return void await this.loadSystemFont(e);if(this.isFontLoadingAPISupported){let t=e.createNativeFontFace();if(t){this.addNativeFontFace(t);try{await t.loaded}catch(n){throw j("Failed to load font '".concat(t.family,"': '").concat(n,"'.")),e.disableFontFace=!0,n}}return}let t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(t=>{let n=this._queueLoadingCallback(t);this._prepareFontLoadEvent(e,n)})}}get isFontLoadingAPISupported(){var e;return B(this,"isFontLoadingAPISupported",!!(null==(e=this._document)?void 0:e.fonts))}get isSyncFontLoadingSupported(){var e;let t=!1;return b?t=!0:"undefined"!=typeof navigator&&"string"==typeof(null==(e=navigator)?void 0:e.userAgent)&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent)&&(t=!0),B(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(e){let{loadingRequests:t}=this,n={done:!1,complete:function(){for(L(!n.done,"completeRequest() cannot be called twice."),n.done=!0;t.length>0&&t[0].done;)setTimeout(t.shift().callback,0)},callback:e};return t.push(n),n}get _loadTestFont(){return B(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(e,t){var n;let r,i;function a(e,t){return e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|255&e.charCodeAt(t+3)}function o(e,t,n,r){return e.substring(0,t)+r+e.substring(t+n)}let s=this._document.createElement("canvas");s.width=1,s.height=1;let l=s.getContext("2d"),u=0,c="lt".concat(Date.now()).concat(this.loadTestFontId++),d=this._loadTestFont,h=a(d=o(d,976,c.length,c),16);for(r=0,i=c.length-3;r<i;r+=4)h=h-0x58585858+a(c,r)|0;r<c.length&&(h=h-0x58585858+a(c+"XXX",r)|0),d=o(d,16,4,String.fromCharCode((n=h)>>24&255,n>>16&255,n>>8&255,255&n));let p="url(data:font/opentype;base64,".concat(btoa(d),");"),f='@font-face {font-family:"'.concat(c,'";src:').concat(p,"}");this.insertRule(f);let m=this._document.createElement("div");for(let t of(m.style.visibility="hidden",m.style.width=m.style.height="10px",m.style.position="absolute",m.style.top=m.style.left="0px",[e.loadedName,c])){let e=this._document.createElement("span");e.textContent="Hi",e.style.fontFamily=t,m.append(e)}this._document.body.append(m),function e(t,n){if(++u>30){j("Load test font never loaded."),n();return}if(l.font="30px "+t,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0)return void n();setTimeout(e.bind(null,t,n))}(c,()=>{m.remove(),t.complete()})}constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){(0,i._)(this,ip,{writable:!0,value:new Set}),this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}}class ig{createNativeFontFace(){var e;let t;if(!this.data||this.disableFontFace)return null;if(this.cssFontInfo){let e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style="oblique ".concat(this.cssFontInfo.italicAngle,"deg")),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}else t=new FontFace(this.loadedName,this.data,{});return null==(e=this._inspectFont)||e.call(this,this),t}createFontFaceRule(){var e,t;let n;if(!this.data||this.disableFontFace)return null;let r="url(data:".concat(this.mimetype,";base64,").concat((t=this.data,Uint8Array.prototype.toBase64?t.toBase64():btoa(Y(t))),");");if(this.cssFontInfo){let e="font-weight: ".concat(this.cssFontInfo.fontWeight,";");this.cssFontInfo.italicAngle&&(e+="font-style: oblique ".concat(this.cssFontInfo.italicAngle,"deg;")),n='@font-face {font-family:"'.concat(this.cssFontInfo.fontFamily,'";').concat(e,"src:").concat(r,"}")}else n='@font-face {font-family:"'.concat(this.loadedName,'";src:').concat(r,"}");return null==(e=this._inspectFont)||e.call(this,this,r),n}getPathGenerator(e,t){let n;if(void 0!==this.compiledGlyphs[t])return this.compiledGlyphs[t];let r=this.loadedName+"_path_"+t;try{n=e.get(r)}catch(e){j('getPathGenerator - ignoring character: "'.concat(e,'".'))}let i=new Path2D(n||"");return this.fontExtraProperties||e.delete(r),this.compiledGlyphs[t]=i}constructor(e,{disableFontFace:t=!1,fontExtraProperties:n=!1,inspectFont:r=null}){for(let t in this.compiledGlyphs=Object.create(null),e)this[t]=e[t];this.disableFontFace=!0===t,this.fontExtraProperties=!0===n,this._inspectFont=r}}let iv={DATA:1,ERROR:2},iy={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function ib(){}function ix(e){if(e instanceof K||e instanceof V||e instanceof q||e instanceof H||e instanceof G||e instanceof W)return e;switch(!(e instanceof Error||"object"==typeof e&&null!==e)&&F('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),e.name){case"AbortException":return new K(e.message);case"InvalidPDFException":return new V(e.message);case"MissingPDFException":return new q(e.message);case"PasswordException":return new H(e.message,e.code);case"UnexpectedResponseException":return new G(e.message,e.status);case"UnknownErrorException":return new W(e.message,e.details)}return new W(e.message,e.toString())}var iw=new WeakMap,ik=new WeakSet,iS=new WeakSet,i_=new WeakSet,iC=new WeakSet;class iA{on(e,t){let n=this.actionHandler;if(n[e])throw Error('There is already an actionName called "'.concat(e,'"'));n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){let r=this.callbackId++,i=Promise.withResolvers();this.callbackCapabilities[r]=i;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:t},n)}catch(e){i.reject(e)}return i.promise}sendWithStream(e,t,n,r){let i=this.streamId++,a=this.sourceName,o=this.targetName,s=this.comObj;return new ReadableStream({start:n=>{let l=Promise.withResolvers();return this.streamControllers[i]={controller:n,startCall:l,pullCall:null,cancelCall:null,isClosed:!1},s.postMessage({sourceName:a,targetName:o,action:e,streamId:i,data:t,desiredSize:n.desiredSize},r),l.promise},pull:e=>{let t=Promise.withResolvers();return this.streamControllers[i].pullCall=t,s.postMessage({sourceName:a,targetName:o,stream:iy.PULL,streamId:i,desiredSize:e.desiredSize}),t.promise},cancel:e=>{L(e instanceof Error,"cancel must have a valid reason");let t=Promise.withResolvers();return this.streamControllers[i].cancelCall=t,this.streamControllers[i].isClosed=!0,s.postMessage({sourceName:a,targetName:o,stream:iy.CANCEL,streamId:i,reason:ix(e)}),t.promise}},n)}destroy(){var e;null==(e=(0,r._)(this,iw))||e.abort(),(0,a._)(this,iw,null)}constructor(e,t,n){(0,l._)(this,ik),(0,l._)(this,iS),(0,l._)(this,i_),(0,l._)(this,iC),(0,i._)(this,iw,{writable:!0,value:new AbortController}),this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",(0,s._)(this,ik,iE).bind(this),{signal:(0,r._)(this,iw).signal})}}function iE(e){let{data:t}=e;if(t.targetName!==this.sourceName)return;if(t.stream)return void(0,s._)(this,i_,iM).call(this,t);if(t.callback){let e=t.callbackId,n=this.callbackCapabilities[e];if(!n)throw Error("Cannot resolve callback ".concat(e));if(delete this.callbackCapabilities[e],t.callback===iv.DATA)n.resolve(t.data);else if(t.callback===iv.ERROR)n.reject(ix(t.reason));else throw Error("Unexpected callback case");return}let n=this.actionHandler[t.action];if(!n)throw Error("Unknown action from worker: ".concat(t.action));if(t.callbackId){let e=this.sourceName,r=t.sourceName,i=this.comObj;Promise.try(n,t.data).then(function(n){i.postMessage({sourceName:e,targetName:r,callback:iv.DATA,callbackId:t.callbackId,data:n})},function(n){i.postMessage({sourceName:e,targetName:r,callback:iv.ERROR,callbackId:t.callbackId,reason:ix(n)})});return}if(t.streamId)return void(0,s._)(this,iS,iT).call(this,t);n(t.data)}function iT(e){let t=e.streamId,n=this.sourceName,r=e.sourceName,i=this.comObj,a=this,o=this.actionHandler[e.action],s={enqueue(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2?arguments[2]:void 0;if(this.isCancelled)return;let s=this.desiredSize;this.desiredSize-=a,s>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),i.postMessage({sourceName:n,targetName:r,stream:iy.ENQUEUE,streamId:t,chunk:e},o)},close(){this.isCancelled||(this.isCancelled=!0,i.postMessage({sourceName:n,targetName:r,stream:iy.CLOSE,streamId:t}),delete a.streamSinks[t])},error(e){L(e instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,i.postMessage({sourceName:n,targetName:r,stream:iy.ERROR,streamId:t,reason:ix(e)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};s.sinkCapability.resolve(),s.ready=s.sinkCapability.promise,this.streamSinks[t]=s,Promise.try(o,e.data,s).then(function(){i.postMessage({sourceName:n,targetName:r,stream:iy.START_COMPLETE,streamId:t,success:!0})},function(e){i.postMessage({sourceName:n,targetName:r,stream:iy.START_COMPLETE,streamId:t,reason:ix(e)})})}function iM(e){let t=e.streamId,n=this.sourceName,r=e.sourceName,i=this.comObj,a=this.streamControllers[t],o=this.streamSinks[t];switch(e.stream){case iy.START_COMPLETE:e.success?a.startCall.resolve():a.startCall.reject(ix(e.reason));break;case iy.PULL_COMPLETE:e.success?a.pullCall.resolve():a.pullCall.reject(ix(e.reason));break;case iy.PULL:if(!o){i.postMessage({sourceName:n,targetName:r,stream:iy.PULL_COMPLETE,streamId:t,success:!0});break}o.desiredSize<=0&&e.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=e.desiredSize,Promise.try(o.onPull||ib).then(function(){i.postMessage({sourceName:n,targetName:r,stream:iy.PULL_COMPLETE,streamId:t,success:!0})},function(e){i.postMessage({sourceName:n,targetName:r,stream:iy.PULL_COMPLETE,streamId:t,reason:ix(e)})});break;case iy.ENQUEUE:if(L(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(e.chunk);break;case iy.CLOSE:if(L(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),(0,s._)(this,iC,iI).call(this,a,t);break;case iy.ERROR:L(a,"error should have stream controller"),a.controller.error(ix(e.reason)),(0,s._)(this,iC,iI).call(this,a,t);break;case iy.CANCEL_COMPLETE:e.success?a.cancelCall.resolve():a.cancelCall.reject(ix(e.reason)),(0,s._)(this,iC,iI).call(this,a,t);break;case iy.CANCEL:if(!o)break;let l=ix(e.reason);Promise.try(o.onCancel||ib,l).then(function(){i.postMessage({sourceName:n,targetName:r,stream:iy.CANCEL_COMPLETE,streamId:t,success:!0})},function(e){i.postMessage({sourceName:n,targetName:r,stream:iy.CANCEL_COMPLETE,streamId:t,reason:ix(e)})}),o.sinkCapability.reject(l),o.isCancelled=!0,delete this.streamSinks[t];break;default:throw Error("Unexpected stream case")}}async function iI(e,t){var n,r,i;await Promise.allSettled([null==(n=e.startCall)?void 0:n.promise,null==(r=e.pullCall)?void 0:r.promise,null==(i=e.cancelCall)?void 0:i.promise]),delete this.streamControllers[t]}var iN=new WeakMap;class iD{create(e,t){if(e<=0||t<=0)throw Error("Invalid canvas size");let n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!(0,r._)(this,iN)})}}reset(e,t,n){if(!e.canvas)throw Error("Canvas is not specified");if(t<=0||n<=0)throw Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){F("Abstract method `_createCanvas` called.")}constructor({enableHWA:e=!1}){(0,i._)(this,iN,{writable:!0,value:!1}),(0,a._)(this,iN,e)}}class iP{async fetch(e){let{name:t}=e;if(!this.baseUrl)throw Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw Error("CMap name must be specified.");let n=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(n).then(e=>({cMapData:e,isCompressed:this.isCompressed})).catch(e=>{throw Error("Unable to load ".concat(this.isCompressed?"binary ":"","CMap at: ").concat(n))})}async _fetch(e){F("Abstract method `_fetch` called.")}constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}}class iR extends iP{async _fetch(e){let t=await eu(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):X(t)}}class iO{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,r,i){return"none"}destroy(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]}}var ij=new WeakMap,iF=new WeakMap,iL=new WeakMap,iz=new WeakMap,iB=new WeakMap,iU=new WeakMap,iH=new WeakMap,iW=new WeakMap,iV=new WeakMap,iq=new WeakMap,iG=new WeakSet,i$=new WeakSet,iK=new WeakSet,iY=new WeakSet,iX=new WeakSet,iZ=new WeakSet,iJ=new WeakSet,iQ=new WeakSet,i0=new WeakSet;function i1(){return(0,a._)(this,iF,(0,r._)(this,iF)||new Map)}function i2(){return(0,a._)(this,iU,(0,r._)(this,iU)||new Map)}function i3(){if(!(0,r._)(this,iL)){let e=(0,r._)(this,iB).createElement("div"),{style:t}=e;t.visibility="hidden",t.contain="strict",t.width=t.height=0,t.position="absolute",t.top=t.left=0,t.zIndex=-1;let n=(0,r._)(this,iB).createElementNS(es,"svg");n.setAttribute("width",0),n.setAttribute("height",0),(0,a._)(this,iL,(0,r._)(this,iB).createElementNS(es,"defs")),e.append(n),n.append((0,r._)(this,iL)),(0,r._)(this,iB).body.append(e)}return(0,r._)(this,iL)}function i5(e){if(1===e.length){let t=e[0],n=Array(256);for(let e=0;e<256;e++)n[e]=t[e]/255;let r=n.join(",");return[r,r,r]}let[t,n,r]=e,i=Array(256),a=Array(256),o=Array(256);for(let e=0;e<256;e++)i[e]=t[e]/255,a[e]=n[e]/255,o[e]=r[e]/255;return[i.join(","),a.join(","),o.join(",")]}function i4(e){if(void 0===(0,r._)(this,ij)){(0,a._)(this,ij,"");let e=(0,r._)(this,iB).URL;e!==(0,r._)(this,iB).baseURI&&(eh(e)?j('#createUrl: ignore "data:"-URL for performance reasons.'):(0,a._)(this,ij,e.split("#",1)[0]))}return"url(".concat((0,r._)(this,ij),"#").concat(e,")")}function i9(e){let t=(0,r._)(this,iB).createElementNS(es,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(t)}function i8(e){let t=(0,r._)(this,iB).createElementNS(es,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)}function i6(e){let t=(0,r._)(this,iB).createElementNS(es,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),(0,r._)(this,iq).append(t),t}function i7(e,t,n){let i=(0,r._)(this,iB).createElementNS(es,t);i.setAttribute("type","discrete"),i.setAttribute("tableValues",n),e.append(i)}function ae(e,t,n,i){let a=(0,r._)(this,iB).createElementNS(es,"feComponentTransfer");i.append(a),(0,s._)(this,iZ,i7).call(this,a,"feFuncR",e),(0,s._)(this,iZ,i7).call(this,a,"feFuncG",t),(0,s._)(this,iZ,i7).call(this,a,"feFuncB",n)}function at(e,t){let n=(0,r._)(this,iB).createElementNS(es,"feComponentTransfer");t.append(n),(0,s._)(this,iZ,i7).call(this,n,"feFuncA",e)}function an(e){return(0,r._)(this,iq).style.color=e,eS(getComputedStyle((0,r._)(this,iq)).getPropertyValue("color"))}class ar{async fetch(e){let{filename:t}=e;if(!this.baseUrl)throw Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw Error("Font filename must be specified.");let n="".concat(this.baseUrl).concat(t);return this._fetch(n).catch(e=>{throw Error("Unable to load font data at: ".concat(n))})}async _fetch(e){F("Abstract method `_fetch` called.")}constructor({baseUrl:e=null}){this.baseUrl=e}}class ai extends ar{async _fetch(e){return new Uint8Array(await eu(e,"arraybuffer"))}}async function aa(e){let n=t.default.getBuiltinModule("fs");return new Uint8Array(await n.promises.readFile(e))}b&&j("Please use the `legacy` build in Node.js environments.");let ao={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function as(e,t){if(!t)return;let n=t[2]-t[0],r=t[3]-t[1],i=new Path2D;i.rect(t[0],t[1],n,r),e.clip(i)}class al{getPattern(){F("Abstract method `getPattern` called.")}}class au extends al{_createGradient(e){let t;for(let n of("axial"===this._type?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1)),this._colorStops))t.addColorStop(n[0],n[1]);return t}getPattern(e,t,n,r){let i;if(r===ao.STROKE||r===ao.FILL){let a=t.current.getClippedPathBoundingBox(r,e_(e))||[0,0,0,0],o=Math.ceil(a[2]-a[0])||1,s=Math.ceil(a[3]-a[1])||1,l=t.cachedCanvases.getCanvas("pattern",o,s),u=l.context;u.clearRect(0,0,u.canvas.width,u.canvas.height),u.beginPath(),u.rect(0,0,u.canvas.width,u.canvas.height),u.translate(-a[0],-a[1]),n=ee.transform(n,[1,0,0,1,a[0],a[1]]),u.transform(...t.baseTransform),this.matrix&&u.transform(...this.matrix),as(u,this._bbox),u.fillStyle=this._createGradient(u),u.fill(),i=e.createPattern(l.canvas,"no-repeat");let c=new DOMMatrix(n);i.setTransform(c)}else as(e,this._bbox),i=this._createGradient(e);return i}constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}}function ac(e,t,n,r,i,a,o,s){let l,u,c,d,h,p,f,m,g,y=t.coords,b=t.colors,x=e.data,w=4*e.width;y[n+1]>y[r+1]&&(l=n,n=r,r=l,l=a,a=o,o=l),y[r+1]>y[i+1]&&(l=r,r=i,i=l,l=o,o=s,s=l),y[n+1]>y[r+1]&&(l=n,n=r,r=l,l=a,a=o,o=l);let k=(y[n]+t.offsetX)*t.scaleX,S=(y[n+1]+t.offsetY)*t.scaleY,_=(y[r]+t.offsetX)*t.scaleX,C=(y[r+1]+t.offsetY)*t.scaleY,A=(y[i]+t.offsetX)*t.scaleX,E=(y[i+1]+t.offsetY)*t.scaleY;if(S>=E)return;let T=b[a],M=b[a+1],I=b[a+2],N=b[o],D=b[o+1],P=b[o+2],R=b[s],O=b[s+1],j=b[s+2],F=Math.round(S),L=Math.round(E);for(let e=F;e<=L;e++){let t;if(e<C){let t=e<S?0:(S-e)/(S-C);u=k-(k-_)*t,c=T-(T-N)*t,d=M-(M-D)*t,h=I-(I-P)*t}else{let t;u=_-(_-A)*(t=e>E?1:C===E?0:(C-e)/(C-E)),c=N-(N-R)*t,d=D-(D-O)*t,h=P-(P-j)*t}p=k-(k-A)*(t=e<S?0:e>E?1:(S-e)/(S-E)),f=T-(T-R)*t,m=M-(M-O)*t,g=I-(I-j)*t;let n=Math.round(Math.min(u,p)),r=Math.round(Math.max(u,p)),i=w*e+4*n;for(let e=n;e<=r;e++)(t=(u-e)/(u-p))<0?t=0:t>1&&(t=1),x[i++]=c-(c-f)*t|0,x[i++]=d-(d-m)*t|0,x[i++]=h-(h-g)*t|0,x[i++]=255}}class ad extends al{_createMeshCanvas(e,t,n){let r=Math.floor(this._bounds[0]),i=Math.floor(this._bounds[1]),a=Math.ceil(this._bounds[2])-r,o=Math.ceil(this._bounds[3])-i,s=Math.min(Math.ceil(Math.abs(a*e[0]*1.1)),3e3),l=Math.min(Math.ceil(Math.abs(o*e[1]*1.1)),3e3),u=a/s,c=o/l,d={coords:this._coords,colors:this._colors,offsetX:-r,offsetY:-i,scaleX:1/u,scaleY:1/c},h=s+4,p=l+4,f=n.getCanvas("mesh",h,p),m=f.context,g=m.createImageData(s,l);if(t){let e=g.data;for(let n=0,r=e.length;n<r;n+=4)e[n]=t[0],e[n+1]=t[1],e[n+2]=t[2],e[n+3]=255}for(let e of this._figures)!function(e,t,n){let r,i,a=t.coords,o=t.colors;switch(t.type){case"lattice":let s=t.verticesPerRow,l=Math.floor(a.length/s)-1,u=s-1;for(r=0;r<l;r++){let t=r*s;for(let r=0;r<u;r++,t++)ac(e,n,a[t],a[t+1],a[t+s],o[t],o[t+1],o[t+s]),ac(e,n,a[t+s+1],a[t+1],a[t+s],o[t+s+1],o[t+1],o[t+s])}break;case"triangles":for(r=0,i=a.length;r<i;r+=3)ac(e,n,a[r],a[r+1],a[r+2],o[r],o[r+1],o[r+2]);break;default:throw Error("illegal figure")}}(g,e,d);return m.putImageData(g,2,2),{canvas:f.canvas,offsetX:r-2*u,offsetY:i-2*c,scaleX:u,scaleY:c}}getPattern(e,t,n,r){let i;if(as(e,this._bbox),r===ao.SHADING)i=ee.singularValueDecompose2dScale(e_(e));else if(i=ee.singularValueDecompose2dScale(t.baseTransform),this.matrix){let e=ee.singularValueDecompose2dScale(this.matrix);i=[i[0]*e[0],i[1]*e[1]]}let a=this._createMeshCanvas(i,r===ao.SHADING?null:this._background,t.cachedCanvases);return r!==ao.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(a.offsetX,a.offsetY),e.scale(a.scaleX,a.scaleY),e.createPattern(a.canvas,"no-repeat")}constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}}class ah extends al{getPattern(){return"hotpink"}}let ap={COLORED:1,UNCOLORED:2};class af{createPatternCanvas(e){let{bbox:t,operatorList:n,paintType:r,tilingType:i,color:a,canvasGraphicsFactory:o}=this,{xstep:s,ystep:l}=this;s=Math.abs(s),l=Math.abs(l),O("TilingType: "+i);let u=t[0],c=t[1],d=t[2],h=t[3],p=d-u,f=h-c,m=ee.singularValueDecompose2dScale(this.matrix),g=ee.singularValueDecompose2dScale(this.baseTransform),y=m[0]*g[0],b=m[1]*g[1],x=p,w=f,k=!1,S=!1,_=Math.ceil(l*b),C=Math.ceil(f*b);Math.ceil(s*y)>=Math.ceil(p*y)?x=s:k=!0,_>=C?w=l:S=!0;let A=this.getSizeAndScale(x,this.ctx.canvas.width,y),E=this.getSizeAndScale(w,this.ctx.canvas.height,b),T=e.cachedCanvases.getCanvas("pattern",A.size,E.size),M=T.context,I=o.createCanvasGraphics(M);if(I.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(I,r,a),M.translate(-A.scale*u,-E.scale*c),I.transform(A.scale,0,0,E.scale,0,0),M.save(),this.clipBbox(I,u,c,d,h),I.baseTransform=e_(I.ctx),I.executeOperatorList(n),I.endDrawing(),M.restore(),k||S){let t=T.canvas;k&&(x=s),S&&(w=l);let n=this.getSizeAndScale(x,this.ctx.canvas.width,y),r=this.getSizeAndScale(w,this.ctx.canvas.height,b),i=n.size,a=r.size,o=e.cachedCanvases.getCanvas("pattern-workaround",i,a),d=o.context,h=k?Math.floor(p/s):0,m=S?Math.floor(f/l):0;for(let e=0;e<=h;e++)for(let n=0;n<=m;n++)d.drawImage(t,i*e,a*n,i,a,0,0,i,a);return{canvas:o.canvas,scaleX:n.scale,scaleY:r.scale,offsetX:u,offsetY:c}}return{canvas:T.canvas,scaleX:A.scale,scaleY:E.scale,offsetX:u,offsetY:c}}getSizeAndScale(e,t,n){let r=Math.max(af.MAX_PATTERN_SIZE,t),i=Math.ceil(e*n);return i>=r?i=r:n=i/e,{scale:n,size:i}}clipBbox(e,t,n,r,i){let a=r-t,o=i-n;e.ctx.rect(t,n,a,o),e.current.updateRectMinMax(e_(e.ctx),[t,n,r,i]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){let r=e.ctx,i=e.current;switch(t){case ap.COLORED:let a=this.ctx;r.fillStyle=a.fillStyle,r.strokeStyle=a.strokeStyle,i.fillColor=a.fillStyle,i.strokeColor=a.strokeStyle;break;case ap.UNCOLORED:let o=ee.makeHexColor(n[0],n[1],n[2]);r.fillStyle=o,r.strokeStyle=o,i.fillColor=o,i.strokeColor=o;break;default:throw new $("Unsupported paint type: ".concat(t))}}getPattern(e,t,n,r){let i=n;r!==ao.SHADING&&(i=ee.transform(i,t.baseTransform),this.matrix&&(i=ee.transform(i,this.matrix)));let a=this.createPatternCanvas(t),o=new DOMMatrix(i);o=(o=o.translate(a.offsetX,a.offsetY)).scale(1/a.scaleX,1/a.scaleY);let s=e.createPattern(a.canvas,"repeat");return s.setTransform(o),s}constructor(e,t,n,r,i){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=n,this.canvasGraphicsFactory=r,this.baseTransform=i}}(0,h._)(af,"MAX_PATTERN_SIZE",3e3);class am{getCanvas(e,t,n){let r;return void 0!==this.cache[e]?(r=this.cache[e],this.canvasFactory.reset(r,t,n)):(r=this.canvasFactory.create(t,n),this.cache[e]=r),r}delete(e){delete this.cache[e]}clear(){for(let e in this.cache){let t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}}function ag(e,t,n,r,i,a,o,s,l,u){let[c,d,h,p,f,m]=e_(e);if(0===d&&0===h){let g=Math.round(o*c+f),y=Math.round(s*p+m),b=Math.abs(Math.round((o+l)*c+f)-g)||1,x=Math.abs(Math.round((s+u)*p+m)-y)||1;return e.setTransform(Math.sign(c),0,0,Math.sign(p),g,y),e.drawImage(t,n,r,i,a,0,0,b,x),e.setTransform(c,d,h,p,f,m),[b,x]}if(0===c&&0===p){let g=Math.round(s*h+f),y=Math.round(o*d+m),b=Math.abs(Math.round((s+u)*h+f)-g)||1,x=Math.abs(Math.round((o+l)*d+m)-y)||1;return e.setTransform(0,Math.sign(d),Math.sign(h),0,g,y),e.drawImage(t,n,r,i,a,0,0,x,b),e.setTransform(c,d,h,p,f,m),[x,b]}return e.drawImage(t,n,r,i,a,o,s,l,u),[Math.hypot(c,d)*l,Math.hypot(h,p)*u]}class av{clone(){let e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,n){[t,n]=ee.applyTransform([t,n],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,n)}updateRectMinMax(e,t){let n=ee.applyTransform(t,e),r=ee.applyTransform(t.slice(2),e),i=ee.applyTransform([t[0],t[3]],e),a=ee.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,n[0],r[0],i[0],a[0]),this.minY=Math.min(this.minY,n[1],r[1],i[1],a[1]),this.maxX=Math.max(this.maxX,n[0],r[0],i[0],a[0]),this.maxY=Math.max(this.maxY,n[1],r[1],i[1],a[1])}updateScalingPathMinMax(e,t){ee.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,n,r,i,a,o,s,l,u){let c=ee.bezierBoundingBox(t,n,r,i,a,o,s,l,u);u||this.updateRectMinMax(e,c)}getPathBoundingBox(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ao.FILL,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=[this.minX,this.minY,this.maxX,this.maxY];if(e===ao.STROKE){t||F("Stroke bounding box must include transform.");let e=ee.singularValueDecompose2dScale(t),r=e[0]*this.lineWidth/2,i=e[1]*this.lineWidth/2;n[0]-=r,n[1]-=i,n[2]+=r,n[3]+=i}return n}updateClipFromPath(){let e=ee.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ao.FILL,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return ee.intersect(this.clipBox,this.getPathBoundingBox(e,t))}constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=x,this.textMatrixScale=1,this.fontMatrix=w,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=E.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.patternStroke=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}}function ay(e,t){let n,r,i,a;if(t instanceof ImageData)return void e.putImageData(t,0,0);let o=t.height,s=t.width,l=o%16,u=(o-l)/16,c=0===l?u:u+1,d=e.createImageData(s,16),h=0,p,f=t.data,m=d.data;if(t.kind===T.GRAYSCALE_1BPP){let t=f.byteLength,a=new Uint32Array(m.buffer,0,m.byteLength>>2),o=a.length,g=s+7>>3,y=J.isLittleEndian?0xff000000:255;for(n=0;n<c;n++){for(r=0,i=n<u?16:l,p=0;r<i;r++){let e=t-h,n=0,r=e>g?s:8*e-7,i=-8&r,o=0,l=0;for(;n<i;n+=8)l=f[h++],a[p++]=128&l?0xffffffff:y,a[p++]=64&l?0xffffffff:y,a[p++]=32&l?0xffffffff:y,a[p++]=16&l?0xffffffff:y,a[p++]=8&l?0xffffffff:y,a[p++]=4&l?0xffffffff:y,a[p++]=2&l?0xffffffff:y,a[p++]=1&l?0xffffffff:y;for(;n<r;n++)0===o&&(l=f[h++],o=128),a[p++]=l&o?0xffffffff:y,o>>=1}for(;p<o;)a[p++]=0;e.putImageData(d,0,16*n)}}else if(t.kind===T.RGBA_32BPP){for(n=0,r=0,a=16*s*4;n<u;n++)m.set(f.subarray(h,h+a)),h+=a,e.putImageData(d,0,r),r+=16;n<c&&(a=s*l*4,m.set(f.subarray(h,h+a)),e.putImageData(d,0,r))}else if(t.kind===T.RGB_24BPP)for(n=0,a=s*(i=16);n<c;n++){for(n>=u&&(a=s*(i=l)),p=0,r=a;r--;)m[p++]=f[h++],m[p++]=f[h++],m[p++]=f[h++],m[p++]=255;e.putImageData(d,0,16*n)}else throw Error("bad image kind: ".concat(t.kind))}function ab(e,t){if(t.bitmap)return void e.drawImage(t.bitmap,0,0);let n=t.height,r=t.width,i=n%16,a=(n-i)/16,o=0===i?a:a+1,s=e.createImageData(r,16),l=0,u=t.data,c=s.data;for(let t=0;t<o;t++){let n=t<a?16:i;({srcPos:l}=function(e){let{src:t,srcPos:n=0,dest:r,width:i,height:a,nonBlackColor:o=0xffffffff,inverseDecode:s=!1}=e,l=J.isLittleEndian?0xff000000:255,[u,c]=s?[o,l]:[l,o],d=i>>3,h=7&i,p=t.length;r=new Uint32Array(r.buffer);let f=0;for(let e=0;e<a;e++){for(let e=n+d;n<e;n++){let e=n<p?t[n]:255;r[f++]=128&e?c:u,r[f++]=64&e?c:u,r[f++]=32&e?c:u,r[f++]=16&e?c:u,r[f++]=8&e?c:u,r[f++]=4&e?c:u,r[f++]=2&e?c:u,r[f++]=1&e?c:u}if(0===h)continue;let e=n<p?t[n++]:255;for(let t=0;t<h;t++)r[f++]=e&1<<7-t?c:u}return{srcPos:n,destPos:f}}({src:u,srcPos:l,dest:c,width:r,height:n,nonBlackColor:0})),e.putImageData(s,0,16*t)}}function ax(e,t){for(let n of["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"])void 0!==e[n]&&(t[n]=e[n]);void 0!==e.setLineDash&&(t.setLineDash(e.getLineDash()),t.lineDashOffset=e.lineDashOffset)}function aw(e){if(e.strokeStyle=e.fillStyle="#000000",e.fillRule="nonzero",e.globalAlpha=1,e.lineWidth=1,e.lineCap="butt",e.lineJoin="miter",e.miterLimit=10,e.globalCompositeOperation="source-over",e.font="10px sans-serif",void 0!==e.setLineDash&&(e.setLineDash([]),e.lineDashOffset=0),!b){let{filter:t}=e;"none"!==t&&""!==t&&(e.filter="none")}}function ak(e,t){if(t)return!0;let n=ee.singularValueDecompose2dScale(e);n[0]=Math.fround(n[0]),n[1]=Math.fround(n[1]);let r=Math.fround((globalThis.devicePixelRatio||1)*el.PDF_TO_CSS_UNITS);return n[0]<=r&&n[1]<=r}let aS=["butt","round","square"],a_=["miter","round","bevel"],aC={},aA={};var aE=new WeakSet,aT=new WeakSet,aM=new WeakSet;class aI{getObject(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return"string"==typeof e?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing(e){let{transform:t,viewport:n,transparency:r=!1,background:i=null}=e,a=this.ctx.canvas.width,o=this.ctx.canvas.height,s=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,a,o),this.ctx.fillStyle=s,r){let e=this.cachedCanvases.getCanvas("transparent",a,o);this.compositeCtx=this.ctx,this.transparentCanvas=e.canvas,this.ctx=e.context,this.ctx.save(),this.ctx.transform(...e_(this.compositeCtx))}this.ctx.save(),aw(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...n.transform),this.viewportScale=n.scale,this.baseTransform=e_(this.ctx)}executeOperatorList(e,t,n,r){let i,a=e.argsArray,o=e.fnArray,s=t||0,l=a.length;if(l===s)return s;let u=l-s>10&&"function"==typeof n,c=u?Date.now()+15:0,d=0,h=this.commonObjs,p=this.objs;for(;;){if(void 0!==r&&s===r.nextBreakPoint)return r.breakIt(s,n),s;if((i=o[s])!==D.dependency)this[i].apply(this,a[s]);else for(let e of a[s]){let t=e.startsWith("g_")?h:p;if(!t.has(e))return t.get(e,n),s}if(++s===l)return s;if(u&&++d>10){if(Date.now()>c)return n(),s;d=0}}}endDrawing(){for(let e of((0,s._)(this,aE,aN).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear(),this._cachedBitmapsMap.values())){for(let t of e.values())"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),(0,s._)(this,aT,aD).call(this)}_scaleImage(e,t){var n,r;let i,a,o=null!=(n=e.width)?n:e.displayWidth,s=null!=(r=e.height)?r:e.displayHeight,l=Math.max(Math.hypot(t[0],t[1]),1),u=Math.max(Math.hypot(t[2],t[3]),1),c=o,d=s,h="prescale1";for(;l>2&&c>1||u>2&&d>1;){let t=c,n=d;l>2&&c>1&&(t=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c/2),l/=c/t),u>2&&d>1&&(n=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,u/=d/n),(a=(i=this.cachedCanvases.getCanvas(h,t,n)).context).clearRect(0,0,t,n),a.drawImage(e,0,0,c,d,0,0,t,n),e=i.canvas,c=t,d=n,h="prescale1"===h?"prescale2":"prescale1"}return{img:e,paintWidth:c,paintHeight:d}}_createMaskCanvas(e){let t,n,r,i,a=this.ctx,{width:o,height:s}=e,l=this.current.fillColor,u=this.current.patternFill,c=e_(a);if((e.bitmap||e.data)&&e.count>1){let i=e.bitmap||e.data.buffer;n=JSON.stringify(u?c:[c.slice(0,4),l]),(t=this._cachedBitmapsMap.get(i))||(t=new Map,this._cachedBitmapsMap.set(i,t));let a=t.get(n);if(a&&!u)return{canvas:a,offsetX:Math.round(Math.min(c[0],c[2])+c[4]),offsetY:Math.round(Math.min(c[1],c[3])+c[5])};r=a}r||ab((i=this.cachedCanvases.getCanvas("maskCanvas",o,s)).context,e);let d=ee.transform(c,[1/o,0,0,-1/s,0,0]);d=ee.transform(d,[1,0,0,1,0,-s]);let[h,p,f,m]=ee.getAxialAlignedBoundingBox([0,0,o,s],d),g=Math.round(f-h)||1,y=Math.round(m-p)||1,b=this.cachedCanvases.getCanvas("fillCanvas",g,y),x=b.context;x.translate(-h,-p),x.transform(...d),!r&&(r=(r=this._scaleImage(i.canvas,eC(x))).img,t&&u&&t.set(n,r)),x.imageSmoothingEnabled=ak(e_(x),e.interpolate),ag(x,r,0,0,r.width,r.height,0,0,o,s),x.globalCompositeOperation="source-in";let w=ee.transform(eC(x),[1,0,0,1,-h,-p]);return x.fillStyle=u?l.getPattern(a,this,w,ao.FILL):l,x.fillRect(0,0,o,s),t&&!u&&(this.cachedCanvases.delete("fillCanvas"),t.set(n,b.canvas)),{canvas:b.canvas,offsetX:Math.round(h),offsetY:Math.round(p)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=aS[e]}setLineJoin(e){this.ctx.lineJoin=a_[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){let n=this.ctx;void 0!==n.setLineDash&&(n.setLineDash(e),n.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(let[t,n]of e)switch(t){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.current.fillAlpha=n,this.ctx.globalAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n)}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){let e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw Error("beginSMaskMode called while already in smask mode");let e=this.ctx.canvas.width,t=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(n,e,t);this.suspendedCtx=this.ctx,this.ctx=r.context;let i=this.ctx;i.setTransform(...e_(this.suspendedCtx)),ax(this.suspendedCtx,i);var a=this.suspendedCtx;if(i._removeMirroring)throw Error("Context is already forwarding operations.");i.__originalSave=i.save,i.__originalRestore=i.restore,i.__originalRotate=i.rotate,i.__originalScale=i.scale,i.__originalTranslate=i.translate,i.__originalTransform=i.transform,i.__originalSetTransform=i.setTransform,i.__originalResetTransform=i.resetTransform,i.__originalClip=i.clip,i.__originalMoveTo=i.moveTo,i.__originalLineTo=i.lineTo,i.__originalBezierCurveTo=i.bezierCurveTo,i.__originalRect=i.rect,i.__originalClosePath=i.closePath,i.__originalBeginPath=i.beginPath,i._removeMirroring=()=>{i.save=i.__originalSave,i.restore=i.__originalRestore,i.rotate=i.__originalRotate,i.scale=i.__originalScale,i.translate=i.__originalTranslate,i.transform=i.__originalTransform,i.setTransform=i.__originalSetTransform,i.resetTransform=i.__originalResetTransform,i.clip=i.__originalClip,i.moveTo=i.__originalMoveTo,i.lineTo=i.__originalLineTo,i.bezierCurveTo=i.__originalBezierCurveTo,i.rect=i.__originalRect,i.closePath=i.__originalClosePath,i.beginPath=i.__originalBeginPath,delete i._removeMirroring},i.save=function(){a.save(),this.__originalSave()},i.restore=function(){a.restore(),this.__originalRestore()},i.translate=function(e,t){a.translate(e,t),this.__originalTranslate(e,t)},i.scale=function(e,t){a.scale(e,t),this.__originalScale(e,t)},i.transform=function(e,t,n,r,i,o){a.transform(e,t,n,r,i,o),this.__originalTransform(e,t,n,r,i,o)},i.setTransform=function(e,t,n,r,i,o){a.setTransform(e,t,n,r,i,o),this.__originalSetTransform(e,t,n,r,i,o)},i.resetTransform=function(){a.resetTransform(),this.__originalResetTransform()},i.rotate=function(e){a.rotate(e),this.__originalRotate(e)},i.clip=function(e){a.clip(e),this.__originalClip(e)},i.moveTo=function(e,t){a.moveTo(e,t),this.__originalMoveTo(e,t)},i.lineTo=function(e,t){a.lineTo(e,t),this.__originalLineTo(e,t)},i.bezierCurveTo=function(e,t,n,r,i,o){a.bezierCurveTo(e,t,n,r,i,o),this.__originalBezierCurveTo(e,t,n,r,i,o)},i.rect=function(e,t,n,r){a.rect(e,t,n,r),this.__originalRect(e,t,n,r)},i.closePath=function(){a.closePath(),this.__originalClosePath()},i.beginPath=function(){a.beginPath(),this.__originalBeginPath()},this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),ax(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];let t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,r){let i=r[0],a=r[1],o=r[2]-i,s=r[3]-a;0!==o&&0!==s&&(this.genericComposeSMask(t.context,n,o,s,t.subtype,t.backdrop,t.transferMap,i,a,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,r,i,a,o,s,l,u,c){let d=e.canvas,h=s-u,p=l-c;if(a){let t=ee.makeHexColor(...a);if(h<0||p<0||h+n>d.width||p+r>d.height){let e=this.cachedCanvases.getCanvas("maskExtension",n,r),i=e.context;i.drawImage(d,-h,-p),i.globalCompositeOperation="destination-atop",i.fillStyle=t,i.fillRect(0,0,n,r),i.globalCompositeOperation="source-over",d=e.canvas,h=p=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);let i=new Path2D;i.rect(h,p,n,r),e.clip(i),e.globalCompositeOperation="destination-atop",e.fillStyle=t,e.fillRect(h,p,n,r),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),"Alpha"===i&&o?t.filter=this.filterFactory.addAlphaFilter(o):"Luminosity"===i&&(t.filter=this.filterFactory.addLuminosityFilter(o));let f=new Path2D;f.rect(s,l,n,r),t.clip(f),t.globalCompositeOperation="destination-in",t.drawImage(d,h,p,n,r,s,l,n,r),t.restore()}save(){this.inSMaskMode?(ax(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();let e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),ax(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,n,r,i,a){this.ctx.transform(e,t,n,r,i,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n){let r,i,a=this.ctx,o=this.current,s=o.x,l=o.y,u=e_(a),c=0===u[0]&&0===u[3]||0===u[1]&&0===u[2],d=c?n.slice(0):null;for(let n=0,h=0,p=e.length;n<p;n++)switch(0|e[n]){case D.rectangle:s=t[h++],l=t[h++];let p=t[h++],f=t[h++],m=s+p,g=l+f;a.moveTo(s,l),0===p||0===f?a.lineTo(m,g):(a.lineTo(m,l),a.lineTo(m,g),a.lineTo(s,g)),c||o.updateRectMinMax(u,[s,l,m,g]),a.closePath();break;case D.moveTo:s=t[h++],l=t[h++],a.moveTo(s,l),c||o.updatePathMinMax(u,s,l);break;case D.lineTo:s=t[h++],l=t[h++],a.lineTo(s,l),c||o.updatePathMinMax(u,s,l);break;case D.curveTo:r=s,i=l,s=t[h+4],l=t[h+5],a.bezierCurveTo(t[h],t[h+1],t[h+2],t[h+3],s,l),o.updateCurvePathMinMax(u,r,i,t[h],t[h+1],t[h+2],t[h+3],s,l,d),h+=6;break;case D.curveTo2:r=s,i=l,a.bezierCurveTo(s,l,t[h],t[h+1],t[h+2],t[h+3]),o.updateCurvePathMinMax(u,r,i,s,l,t[h],t[h+1],t[h+2],t[h+3],d),s=t[h+2],l=t[h+3],h+=4;break;case D.curveTo3:r=s,i=l,s=t[h+2],l=t[h+3],a.bezierCurveTo(t[h],t[h+1],s,l,s,l),o.updateCurvePathMinMax(u,r,i,t[h],t[h+1],s,l,s,l,d),h+=4;break;case D.closePath:a.closePath()}c&&o.updateScalingPathMinMax(u,d),o.setCurrentPoint(s,l)}closePath(){this.ctx.closePath()}stroke(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],t=this.ctx,n=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"==typeof n&&(null==n?void 0:n.getPattern)?(t.save(),t.strokeStyle=n.getPattern(t,this,eC(t),ao.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],t=this.ctx,n=this.current.fillColor,r=this.current.patternFill,i=!1;r&&(t.save(),t.fillStyle=n.getPattern(t,this,eC(t),ao.FILL),i=!0);let a=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==a&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),i&&t.restore(),e&&this.consumePath(a)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=aC}eoClip(){this.pendingClip=aA}beginText(){this.current.textMatrix=x,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){let e=this.pendingTextPaths,t=this.ctx;if(void 0===e)return void t.beginPath();let n=new Path2D,r=t.getTransform().invertSelf();for(let{transform:t,x:i,y:a,fontSize:o,path:s}of e)n.addPath(s,new DOMMatrix(t).preMultiplySelf(r).translate(i,a).scale(o,-o));t.clip(n),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var n;let r=this.commonObjs.get(e),i=this.current;if(!r)throw Error("Can't find font for ".concat(e));if(i.fontMatrix=r.fontMatrix||w,(0===i.fontMatrix[0]||0===i.fontMatrix[3])&&j("Invalid font matrix for font "+e),t<0?(t=-t,i.fontDirection=-1):i.fontDirection=1,this.current.font=r,this.current.fontSize=t,r.isType3Font)return;let a=r.loadedName||"sans-serif",o=(null==(n=r.systemFontInfo)?void 0:n.css)||'"'.concat(a,'", ').concat(r.fallbackName),s="normal";r.black?s="900":r.bold&&(s="bold");let l=r.italic?"italic":"normal",u=t;t<16?u=16:t>100&&(u=100),this.current.fontSizeScale=t/u,this.ctx.font="".concat(l," ").concat(s," ").concat(u,"px ").concat(o)}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,n,r,i,a){this.current.textMatrix=[e,t,n,r,i,a],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,n,r,i){let a,o=this.ctx,l=this.current,u=l.font,c=l.textRenderingMode,d=l.fontSize/l.fontSizeScale,h=c&E.FILL_STROKE_MASK,p=!!(c&E.ADD_TO_PATH_FLAG),f=l.patternFill&&!u.missingFile,m=l.patternStroke&&!u.missingFile;if((u.disableFontFace||p||f||m)&&(a=u.getPathGenerator(this.commonObjs,e)),u.disableFontFace||f||m){if(o.save(),o.translate(t,n),o.scale(d,-d),h===E.FILL||h===E.FILL_STROKE)if(r){let e=o.getTransform();o.setTransform(...r),o.fill((0,s._)(this,aM,aP).call(this,a,e,r))}else o.fill(a);if(h===E.STROKE||h===E.FILL_STROKE)if(i){let e=o.getTransform();o.setTransform(...i),o.stroke((0,s._)(this,aM,aP).call(this,a,e,i))}else o.lineWidth/=d,o.stroke(a);o.restore()}else(h===E.FILL||h===E.FILL_STROKE)&&o.fillText(e,t,n),(h===E.STROKE||h===E.FILL_STROKE)&&o.strokeText(e,t,n);p&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:e_(o),x:t,y:n,fontSize:d,path:a})}get isFontSubpixelAAEnabled(){let{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);let t=e.getImageData(0,0,10,10).data,n=!1;for(let e=3;e<t.length;e+=4)if(t[e]>0&&t[e]<255){n=!0;break}return B(this,"isFontSubpixelAAEnabled",n)}showText(e){let t,n,r=this.current,i=r.font;if(i.isType3Font)return this.showType3Text(e);let a=r.fontSize;if(0===a)return;let o=this.ctx,s=r.fontSizeScale,l=r.charSpacing,u=r.wordSpacing,c=r.fontDirection,d=r.textHScale*c,h=e.length,p=i.vertical,f=p?1:-1,m=i.defaultVMetrics,g=a*r.fontMatrix[0],y=r.textRenderingMode===E.FILL&&!i.disableFontFace&&!r.patternFill;if(o.save(),o.transform(...r.textMatrix),o.translate(r.x,r.y+r.textRise),c>0?o.scale(d,-1):o.scale(d,1),r.patternFill){o.save();let e=r.fillColor.getPattern(o,this,eC(o),ao.FILL);t=e_(o),o.restore(),o.fillStyle=e}if(r.patternStroke){o.save();let e=r.strokeColor.getPattern(o,this,eC(o),ao.STROKE);n=e_(o),o.restore(),o.strokeStyle=e}let b=r.lineWidth,x=r.textMatrixScale;if(0===x||0===b){let e=r.textRenderingMode&E.FILL_STROKE_MASK;(e===E.STROKE||e===E.FILL_STROKE)&&(b=this.getSinglePixelWidth())}else b/=x;if(1!==s&&(o.scale(s,s),b/=s),o.lineWidth=b,i.isInvalidPDFjsFont){let t=[],n=0;for(let r of e)t.push(r.unicode),n+=r.width;o.fillText(t.join(""),0,0),r.x+=n*g*d,o.restore(),this.compose();return}let w=0,k;for(k=0;k<h;++k){let r,d,h=e[k];if("number"==typeof h){w+=f*h*a/1e3;continue}let b=!1,x=(h.isSpace?u:0)+l,S=h.fontChar,_=h.accent,C=h.width;if(p){let e=h.vmetric||m,t=-(h.vmetric?e[1]:.5*C)*g,n=e[2]*g;C=e?-e[0]:C,r=t/s,d=(w+n)/s}else r=w/s,d=0;if(i.remeasure&&C>0){let e=1e3*o.measureText(S).width/a*s;if(C<e&&this.isFontSubpixelAAEnabled){let t=C/e;b=!0,o.save(),o.scale(t,1),r/=t}else C!==e&&(r+=(C-e)/2e3*a/s)}if(this.contentVisible&&(h.isInFont||i.missingFile)){if(y&&!_)o.fillText(S,r,d);else if(this.paintChar(S,r,d,t,n),_){let e=r+a*_.offset.x/s,i=d-a*_.offset.y/s;this.paintChar(_.fontChar,e,i,t,n)}}w+=p?C*g-x*c:C*g+x*c,b&&o.restore()}p?r.y-=w:r.x+=w*d,o.restore(),this.compose()}showType3Text(e){let t,n,r,i,a=this.ctx,o=this.current,s=o.font,l=o.fontSize,u=o.fontDirection,c=s.vertical?1:-1,d=o.charSpacing,h=o.wordSpacing,p=o.textHScale*u,f=o.fontMatrix||w,m=e.length;if(o.textRenderingMode!==E.INVISIBLE&&0!==l){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,a.save(),a.transform(...o.textMatrix),a.translate(o.x,o.y),a.scale(p,u),t=0;t<m;++t){if("number"==typeof(n=e[t])){i=c*n*l/1e3,this.ctx.translate(i,0),o.x+=i*p;continue}let u=(n.isSpace?h:0)+d,m=s.charProcOperatorList[n.operatorListId];if(!m){j('Type3 character "'.concat(n.operatorListId,'" is not available.'));continue}this.contentVisible&&(this.processingType3=n,this.save(),a.scale(l,l),a.transform(...f),this.executeOperatorList(m),this.restore()),r=ee.applyTransform([n.width,0],f)[0]*l+u,a.translate(r,0),o.x+=r*p}a.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,n,r,i,a){this.ctx.rect(n,r,i-n,a-r),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if("TilingPattern"===e[0]){let n=e[1],r=this.baseTransform||e_(this.ctx);t=new af(e,n,this.ctx,{createCanvasGraphics:e=>new aI(e,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})},r)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,n){this.ctx.strokeStyle=this.current.strokeColor=ee.makeHexColor(e,t,n),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t,n){this.ctx.fillStyle=this.current.fillColor=ee.makeHexColor(e,t,n),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.cachedPatterns.has(e)?t=this.cachedPatterns.get(e):(t=function(e){switch(e[0]){case"RadialAxial":return new au(e);case"Mesh":return new ad(e);case"Dummy":return new ah}throw Error("Unknown IR type: ".concat(e[0]))}(this.getObject(e)),this.cachedPatterns.set(e,t)),n&&(t.matrix=n),t}shadingFill(e){if(!this.contentVisible)return;let t=this.ctx;this.save(),t.fillStyle=this._getPattern(e).getPattern(t,this,eC(t),ao.SHADING);let n=eC(t);{let{width:e,height:r}=t.canvas,[i,a,o,s]=ee.getAxialAlignedBoundingBox([0,0,e,r],n);this.ctx.fillRect(i,a,o-i,s-a)}this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){F("Should not call beginInlineImage")}beginImageData(){F("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=e_(this.ctx),t)){let e=t[2]-t[0],n=t[3]-t[1];this.ctx.rect(t[0],t[1],e,n),this.current.updateRectMinMax(e_(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);let t=this.ctx;e.isolated||O("TODO: Support non-isolated groups."),e.knockout&&j("Knockout groups not supported.");let n=e_(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw Error("Bounding box is required.");let r=ee.getAxialAlignedBoundingBox(e.bbox,e_(t)),i=[0,0,t.canvas.width,t.canvas.height],a=Math.floor((r=ee.intersect(r,i)||[0,0,0,0])[0]),o=Math.floor(r[1]),s=Math.max(Math.ceil(r[2])-a,1),l=Math.max(Math.ceil(r[3])-o,1);this.current.startNewPathAndClipBox([0,0,s,l]);let u="groupAt"+this.groupLevel;e.smask&&(u+="_smask_"+this.smaskCounter++%2);let c=this.cachedCanvases.getCanvas(u,s,l),d=c.context;d.translate(-a,-o),d.transform(...n),e.smask?this.smaskStack.push({canvas:c.canvas,context:d,offsetX:a,offsetY:o,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(a,o),t.save()),ax(t,d),this.ctx=d,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;let t=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();let e=e_(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...e);let n=ee.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],e);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(n)}}beginAnnotation(e,t,n,r,i){if((0,s._)(this,aE,aN).call(this),aw(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){let r=t[2]-t[0],a=t[3]-t[1];if(i&&this.annotationCanvasMap){n=n.slice(),n[4]-=t[0],n[5]-=t[1],(t=t.slice())[0]=t[1]=0,t[2]=r,t[3]=a;let[i,o]=ee.singularValueDecompose2dScale(e_(this.ctx)),{viewportScale:s}=this,l=Math.ceil(r*this.outputScaleX*s),u=Math.ceil(a*this.outputScaleY*s);this.annotationCanvas=this.canvasFactory.create(l,u);let{canvas:c,context:d}=this.annotationCanvas;this.annotationCanvasMap.set(e,c),this.annotationCanvas.savedCtx=this.ctx,this.ctx=d,this.ctx.save(),this.ctx.setTransform(i,0,0,-o,0,a*o),aw(this.ctx)}else aw(this.ctx),this.endPath(),this.ctx.rect(t[0],t[1],r,a),this.ctx.clip(),this.ctx.beginPath()}this.current=new av(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...r)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),(0,s._)(this,aT,aD).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;let t=e.count;(e=this.getObject(e.data,e)).count=t;let n=this.ctx,r=this.processingType3;if(r&&(void 0===r.compiled&&(r.compiled=function(e){let t,n,r,{width:i,height:a}=e;if(i>1e3||a>1e3)return null;let o=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),s=i+1,l=new Uint8Array(s*(a+1)),u=i+7&-8,c=new Uint8Array(u*a),d=0;for(let t of e.data){let e=128;for(;e>0;)c[d++]=t&e?0:255,e>>=1}let h=0;for(0!==c[d=0]&&(l[0]=1,++h),n=1;n<i;n++)c[d]!==c[d+1]&&(l[n]=c[d]?2:1,++h),d++;for(0!==c[d]&&(l[n]=2,++h),t=1;t<a;t++){d=t*u,r=t*s,c[d-u]!==c[d]&&(l[r]=c[d]?1:8,++h);let e=4*!!c[d]+8*!!c[d-u];for(n=1;n<i;n++)o[e=(e>>2)+4*!!c[d+1]+8*!!c[d-u+1]]&&(l[r+n]=o[e],++h),d++;if(c[d-u]!==c[d]&&(l[r+n]=c[d]?2:4,++h),h>1e3)return null}for(d=u*(a-1),r=t*s,0!==c[d]&&(l[r]=8,++h),n=1;n<i;n++)c[d]!==c[d+1]&&(l[r+n]=c[d]?4:8,++h),d++;if(0!==c[d]&&(l[r+n]=4,++h),h>1e3)return null;let p=new Int32Array([0,s,-1,0,-s,0,0,0,1]),f=new Path2D;for(t=0;h&&t<=a;t++){let e=t*s,n=e+i;for(;e<n&&!l[e];)e++;if(e===n)continue;f.moveTo(e%s,t);let r=e,a=l[e];do{let t=p[a];do e+=t;while(!l[e])let n=l[e];5!==n&&10!==n?(a=n,l[e]=0):(a=n&51*a>>4,l[e]&=a>>2|a<<2),f.lineTo(e%s,e/s|0),!l[e]&&--h}while(r!==e)--t}return c=null,l=null,function(e){e.save(),e.scale(1/i,-1/a),e.translate(0,-a),e.fill(f),e.beginPath(),e.restore()}}(e)),r.compiled))return void r.compiled(n);let i=this._createMaskCanvas(e),a=i.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(a,i.offsetX,i.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0;if(!this.contentVisible)return;e=this.getObject(e.data,e);let o=this.ctx;o.save();let s=e_(o);o.transform(t,n,r,i,0,0);let l=this._createMaskCanvas(e);o.setTransform(1,0,0,1,l.offsetX-s[4],l.offsetY-s[5]);for(let e=0,u=a.length;e<u;e+=2){let u=ee.transform(s,[t,n,r,i,a[e],a[e+1]]),[c,d]=ee.applyTransform([0,0],u);o.drawImage(l.canvas,c,d)}o.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;let t=this.ctx,n=this.current.fillColor,r=this.current.patternFill;for(let i of e){let{data:e,width:a,height:o,transform:s}=i,l=this.cachedCanvases.getCanvas("maskCanvas",a,o),u=l.context;u.save(),ab(u,this.getObject(e,i)),u.globalCompositeOperation="source-in",u.fillStyle=r?n.getPattern(u,this,eC(t),ao.FILL):n,u.fillRect(0,0,a,o),u.restore(),t.save(),t.transform(...s),t.scale(1,-1),ag(t,l.canvas,0,0,a,o,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;let t=this.getObject(e);if(!t)return void j("Dependent image isn't ready yet");this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,n,r){if(!this.contentVisible)return;let i=this.getObject(e);if(!i)return void j("Dependent image isn't ready yet");let a=i.width,o=i.height,s=[];for(let e=0,i=r.length;e<i;e+=2)s.push({transform:[t,0,0,n,r[e],r[e+1]],x:0,y:0,w:a,h:o});this.paintInlineImageXObjectGroup(i,s)}applyTransferMapsToCanvas(e){return"none"!==this.current.transferMaps&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if("none"===this.current.transferMaps)return e.bitmap;let{bitmap:t,width:n,height:r}=e,i=this.cachedCanvases.getCanvas("inlineImage",n,r),a=i.context;return a.filter=this.current.transferMaps,a.drawImage(t,0,0),a.filter="none",i.canvas}paintInlineImageXObject(e){let t;if(!this.contentVisible)return;let n=e.width,r=e.height,i=this.ctx;if(this.save(),!b){let{filter:e}=i;"none"!==e&&""!==e&&(i.filter="none")}if(i.scale(1/n,-1/r),e.bitmap)t=this.applyTransferMapsToBitmap(e);else if("function"==typeof HTMLElement&&e instanceof HTMLElement||!e.data)t=e;else{let i=this.cachedCanvases.getCanvas("inlineImage",n,r).context;ay(i,e),t=this.applyTransferMapsToCanvas(i)}let a=this._scaleImage(t,eC(i));i.imageSmoothingEnabled=ak(e_(i),e.interpolate),ag(i,a.img,0,0,a.paintWidth,a.paintHeight,0,-r,n,r),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){let n;if(!this.contentVisible)return;let r=this.ctx;if(e.bitmap)n=e.bitmap;else{let t=e.width,r=e.height,i=this.cachedCanvases.getCanvas("inlineImage",t,r).context;ay(i,e),n=this.applyTransferMapsToCanvas(i)}for(let e of t)r.save(),r.transform(...e.transform),r.scale(1,-1),ag(r,n,e.x,e.y,e.w,e.h,0,-1,1,1),r.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){"OC"===e?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){let t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);let n=this.ctx;this.pendingClip&&(t||(this.pendingClip===aA?n.clip("evenodd"):n.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){let e=e_(this.ctx);if(0===e[1]&&0===e[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{let t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,r)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(-1===this._cachedScaleForStroking[0]){let e,t,{lineWidth:n}=this.current,{a:r,b:i,c:a,d:o}=this.ctx.getTransform();if(0===i&&0===a){let i=Math.abs(r),a=Math.abs(o);if(i===a)if(0===n)e=t=1/i;else{let r=i*n;e=t=r<1?1/r:1}else if(0===n)e=1/i,t=1/a;else{let r=i*n,o=a*n;e=r<1?1/r:1,t=o<1?1/o:1}}else{let s=Math.abs(r*o-i*a),l=Math.hypot(r,i),u=Math.hypot(a,o);if(0===n)e=u/s,t=l/s;else{let r=n*s;e=u>r?u/r:1,t=l>r?l/r:1}}this._cachedScaleForStroking[0]=e,this._cachedScaleForStroking[1]=t}return this._cachedScaleForStroking}rescaleAndStroke(e){let{ctx:t}=this,{lineWidth:n}=this.current,[r,i]=this.getScaleForStroking();if(t.lineWidth=n||1,1===r&&1===i)return void t.stroke();let a=t.getLineDash();if(e&&t.save(),t.scale(r,i),a.length>0){let e=Math.max(r,i);t.setLineDash(a.map(t=>t/e)),t.lineDashOffset/=e}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}constructor(e,t,n,r,i,{optionalContentConfig:a,markedContentStack:o=null},s,u){(0,l._)(this,aE),(0,l._)(this,aT),(0,l._)(this,aM),this.ctx=e,this.current=new av(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=r,this.filterFactory=i,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=o||[],this.optionalContentConfig=a,this.cachedCanvases=new am(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=s,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}}function aN(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}function aD(){if(this.pageColors){let e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if("none"!==e){let t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}}function aP(e,t,n){let r=new Path2D;return r.addPath(e,new DOMMatrix(n).invertSelf().multiplySelf(t)),r}for(let e in D)void 0!==aI.prototype[e]&&(aI.prototype[D[e]]=aI.prototype[e]);class aR{static get workerPort(){return(0,u._)(this,aR,aO)}static set workerPort(e){if(!("undefined"!=typeof Worker&&e instanceof Worker)&&null!==e)throw Error("Invalid `workerPort` type.");(0,c._)(this,aR,aO,e)}static get workerSrc(){return(0,u._)(this,aR,aj)}static set workerSrc(e){if("string"!=typeof e)throw Error("Invalid `workerSrc` type.");(0,c._)(this,aR,aj,e)}}var aO={writable:!0,value:null},aj={writable:!0,value:""},aF=new WeakMap,aL=new WeakMap;class az{getRaw(){return(0,r._)(this,aL)}get(e){var t;return null!=(t=(0,r._)(this,aF).get(e))?t:null}getAll(){return Z((0,r._)(this,aF))}has(e){return(0,r._)(this,aF).has(e)}constructor({parsedData:e,rawData:t}){(0,i._)(this,aF,{writable:!0,value:void 0}),(0,i._)(this,aL,{writable:!0,value:void 0}),(0,a._)(this,aF,e),(0,a._)(this,aL,t)}}let aB=Symbol("INTERNAL");var aU=new WeakMap,aH=new WeakMap,aW=new WeakMap,aV=new WeakMap;class aq{get visible(){if((0,r._)(this,aW))return(0,r._)(this,aV);if(!(0,r._)(this,aV))return!1;let{print:e,view:t}=this.usage;return(0,r._)(this,aU)?(null==t?void 0:t.viewState)!=="OFF":!(0,r._)(this,aH)||(null==e?void 0:e.printState)!=="OFF"}_setVisible(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e!==aB&&F("Internal method `_setVisible` called."),(0,a._)(this,aW,n),(0,a._)(this,aV,t)}constructor(e,{name:t,intent:n,usage:r,rbGroups:o}){(0,i._)(this,aU,{writable:!0,value:!1}),(0,i._)(this,aH,{writable:!0,value:!1}),(0,i._)(this,aW,{writable:!0,value:!1}),(0,i._)(this,aV,{writable:!0,value:!0}),(0,a._)(this,aU,!!(e&k.DISPLAY)),(0,a._)(this,aH,!!(e&k.PRINT)),this.name=t,this.intent=n,this.usage=r,this.rbGroups=o}}var aG=new WeakMap,a$=new WeakMap,aK=new WeakMap,aY=new WeakMap,aX=new WeakSet;class aZ{isVisible(e){if(0===(0,r._)(this,a$).size)return!0;if(!e)return O("Optional content group not defined."),!0;if("OCG"===e.type)return(0,r._)(this,a$).has(e.id)?(0,r._)(this,a$).get(e.id).visible:(j("Optional content group not found: ".concat(e.id)),!0);if("OCMD"===e.type){if(e.expression)return(0,s._)(this,aX,aJ).call(this,e.expression);if(e.policy&&"AnyOn"!==e.policy){if("AllOn"===e.policy){for(let t of e.ids){if(!(0,r._)(this,a$).has(t)){j("Optional content group not found: ".concat(t));break}if(!(0,r._)(this,a$).get(t).visible)return!1}return!0}else if("AnyOff"===e.policy){for(let t of e.ids){if(!(0,r._)(this,a$).has(t))return j("Optional content group not found: ".concat(t)),!0;if(!(0,r._)(this,a$).get(t).visible)return!0}return!1}else if("AllOff"===e.policy){for(let t of e.ids){if(!(0,r._)(this,a$).has(t)){j("Optional content group not found: ".concat(t));break}if((0,r._)(this,a$).get(t).visible)return!1}return!0}}else{for(let t of e.ids){if(!(0,r._)(this,a$).has(t))return j("Optional content group not found: ".concat(t)),!0;if((0,r._)(this,a$).get(t).visible)return!0}return!1}return j("Unknown optional content policy ".concat(e.policy,".")),!0}return j("Unknown group type ".concat(e.type,".")),!0}setVisibility(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],n=!(arguments.length>2)||void 0===arguments[2]||arguments[2],i=(0,r._)(this,a$).get(e);if(!i)return void j("Optional content group not found: ".concat(e));if(n&&t&&i.rbGroups.length){for(let t of i.rbGroups)for(let n of t)if(n!==e){var o;null==(o=(0,r._)(this,a$).get(n))||o._setVisible(aB,!1,!0)}}i._setVisible(aB,!!t,!0),(0,a._)(this,aG,null)}setOCGState(e){let t,{state:n,preserveRB:i}=e;for(let e of n){switch(e){case"ON":case"OFF":case"Toggle":t=e;continue}let n=(0,r._)(this,a$).get(e);if(n)switch(t){case"ON":this.setVisibility(e,!0,i);break;case"OFF":this.setVisibility(e,!1,i);break;case"Toggle":this.setVisibility(e,!n.visible,i)}}(0,a._)(this,aG,null)}get hasInitialVisibility(){return null===(0,r._)(this,aK)||this.getHash()===(0,r._)(this,aK)}getOrder(){return(0,r._)(this,a$).size?(0,r._)(this,aY)?(0,r._)(this,aY).slice():[...(0,r._)(this,a$).keys()]:null}getGroups(){return(0,r._)(this,a$).size>0?Z((0,r._)(this,a$)):null}getGroup(e){return(0,r._)(this,a$).get(e)||null}getHash(){if(null!==(0,r._)(this,aG))return(0,r._)(this,aG);let e=new ir;for(let[t,n]of(0,r._)(this,a$))e.update("".concat(t,":").concat(n.visible));return(0,a._)(this,aG,e.hexdigest())}constructor(e,t=k.DISPLAY){if((0,l._)(this,aX),(0,i._)(this,aG,{writable:!0,value:null}),(0,i._)(this,a$,{writable:!0,value:new Map}),(0,i._)(this,aK,{writable:!0,value:null}),(0,i._)(this,aY,{writable:!0,value:null}),this.renderingIntent=t,this.name=null,this.creator=null,null===e)return;for(let n of(this.name=e.name,this.creator=e.creator,(0,a._)(this,aY,e.order),e.groups))(0,r._)(this,a$).set(n.id,new aq(t,n));if("OFF"===e.baseState)for(let e of(0,r._)(this,a$).values())e._setVisible(aB,!1);for(let t of e.on)(0,r._)(this,a$).get(t)._setVisible(aB,!0);for(let t of e.off)(0,r._)(this,a$).get(t)._setVisible(aB,!1);(0,a._)(this,aK,this.getHash())}}function aJ(e){let t=e.length;if(t<2)return!0;let n=e[0];for(let i=1;i<t;i++){let t,a=e[i];if(Array.isArray(a))t=(0,s._)(this,aX,aJ).call(this,a);else{if(!(0,r._)(this,a$).has(a))return j("Optional content group not found: ".concat(a)),!0;t=(0,r._)(this,a$).get(a).visible}switch(n){case"And":if(!t)return!1;break;case"Or":if(t)return!0;break;case"Not":return!t;default:return!0}}return"And"===n}class aQ{_onReceiveData(e){let{begin:t,chunk:n}=e,r=n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer;void 0===t?this._fullRequestReader?this._fullRequestReader._enqueue(r):this._queuedChunks.push(r):L(this._rangeReaders.some(function(e){return e._begin===t&&(e._enqueue(r),!0)}),"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}get _progressiveDataLength(){var e,t;return null!=(t=null==(e=this._fullRequestReader)?void 0:e._loaded)?t:0}_onProgress(e){var t,n,r,i;void 0===e.total?null==(n=this._rangeReaders[0])||null==(t=n.onProgress)||t.call(n,{loaded:e.loaded}):null==(i=this._fullRequestReader)||null==(r=i.onProgress)||r.call(i,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;null==(e=this._fullRequestReader)||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){let t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){L(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");let e=this._queuedChunks;return this._queuedChunks=null,new a0(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;let n=new a1(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){var t;for(let n of(null==(t=this._fullRequestReader)||t.cancel(e),this._rangeReaders.slice(0)))n.cancel(e);this._pdfDataRangeTransport.abort()}constructor(e,{disableRange:t=!1,disableStream:n=!1}){L(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');let{length:r,initialData:i,progressiveDone:a,contentDispositionFilename:o}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=o,(null==i?void 0:i.length)>0){let e=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;this._queuedChunks.push(e)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!n,this._isRangeSupported=!t,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((e,t)=>{this._onReceiveData({begin:e,chunk:t})}),e.addProgressListener((e,t)=>{this._onProgress({loaded:e,total:t})}),e.addProgressiveReadListener(e=>{this._onReceiveData({chunk:e})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}}class a0{_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){for(let e of(this._done=!0,this._requests))e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}constructor(e,t,n=!1,r=null){for(let i of(this._stream=e,this._done=n||!1,this._filename=ep(r)?r:null,this._queuedChunks=t||[],this._loaded=0,this._queuedChunks))this._loaded+=i.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}}class a1{_enqueue(e){if(!this._done){if(0===this._requests.length)this._queuedChunk=e;else{for(let t of(this._requests.shift().resolve({value:e,done:!1}),this._requests))t.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){let e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};let e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){for(let e of(this._done=!0,this._requests))e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}}function a2(e,t){let n=new Headers;if(!e||!t||"object"!=typeof t)return n;for(let e in t){let r=t[e];void 0!==r&&n.append(e,r)}return n}function a3(e){try{return new URL(e).origin}catch(e){}return null}function a5(e){let{responseHeaders:t,isHttp:n,rangeChunkSize:r,disableRange:i}=e,a={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(t.get("Content-Length"),10);return Number.isInteger(o)&&(a.suggestedLength=o,o<=2*r||i||!n||"bytes"!==t.get("Accept-Ranges")||"identity"!==(t.get("Content-Encoding")||"identity")||(a.allowRangeRequests=!0)),a}function a4(e){let t=e.get("Content-Disposition");if(t){let e=function(e){let t=!0,n=r("filename\\*","i").exec(e);if(n){let e=o(n=n[1]);return a(e=l(e=s(e=unescape(e))))}if(n=function(e){let t,n=[],i=r("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(t=i.exec(e));){let[,e,r,i]=t;if((e=parseInt(e,10))in n){if(0===e)break;continue}n[e]=[r,i]}let a=[];for(let e=0;e<n.length&&e in n;++e){let[t,r]=n[e];r=o(r),t&&(r=unescape(r),0===e&&(r=s(r))),a.push(r)}return a.join("")}(e))return a(l(n));if(n=r("filename","i").exec(e)){let e=o(n=n[1]);return a(e=l(e))}function r(e,t){return RegExp("(?:^|;)\\s*"+e+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',t)}function i(e,n){if(e){if(!/^[\x00-\xFF]+$/.test(n))return n;try{let r=new TextDecoder(e,{fatal:!0}),i=X(n);n=r.decode(i),t=!1}catch(e){}}return n}function a(e){return t&&/[\x80-\xff]/.test(e)&&(e=i("utf-8",e),t&&(e=i("iso-8859-1",e))),e}function o(e){if(e.startsWith('"')){let t=e.slice(1).split('\\"');for(let e=0;e<t.length;++e){let n=t[e].indexOf('"');-1!==n&&(t[e]=t[e].slice(0,n),t.length=e+1),t[e]=t[e].replaceAll(/\\(.)/g,"$1")}e=t.join('"')}return e}function s(e){let t=e.indexOf("'");return -1===t?e:i(e.slice(0,t),e.slice(t+1).replace(/^[^']*'/,""))}function l(e){return!e.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(e)?e:e.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(e,t,n,r){if("q"===n||"Q"===n)return i(t,r=(r=r.replaceAll("_"," ")).replaceAll(/=([0-9a-fA-F]{2})/g,function(e,t){return String.fromCharCode(parseInt(t,16))}));try{r=atob(r)}catch(e){}return i(t,r)})}return""}(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch(e){}if(ep(e))return e}return null}function a9(e,t){return 404===e||0===e&&t.startsWith("file:")?new q('Missing PDF "'+t+'".'):new G("Unexpected server response (".concat(e,') while retrieving PDF "').concat(t,'".'),e)}function a8(e){return 200===e||206===e}function a6(e,t,n){return{method:"GET",headers:e,signal:n.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function a7(e){return e instanceof Uint8Array?e.buffer:e instanceof ArrayBuffer?e:(j("getArrayBuffer - unexpected data format: ".concat(e)),new Uint8Array(e).buffer)}class oe{get _progressiveDataLength(){var e,t;return null!=(t=null==(e=this._fullRequestReader)?void 0:e._loaded)?t:0}getFullReader(){return L(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new ot(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;let n=new on(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;for(let n of(null==(t=this._fullRequestReader)||t.cancel(e),this._rangeRequestReaders.slice(0)))n.cancel(e)}constructor(e){(0,h._)(this,"_responseOrigin",null),this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=a2(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}}class ot{get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;await this._headersCapability.promise;let{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:(this._loaded+=t.byteLength,null==(e=this.onProgress)||e.call(this,{loaded:this._loaded,total:this._contentLength}),{value:a7(t),done:!1})}cancel(e){var t;null==(t=this._reader)||t.cancel(e),this._abortController.abort()}constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;let t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;let n=new Headers(e.headers),r=t.url;fetch(r,a6(n,this._withCredentials,this._abortController)).then(t=>{if(e._responseOrigin=a3(t.url),!a8(t.status))throw a9(t.status,r);this._reader=t.body.getReader(),this._headersCapability.resolve();let n=t.headers,{allowRangeRequests:i,suggestedLength:a}=a5({responseHeaders:n,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=i,this._contentLength=a||this._contentLength,this._filename=a4(n),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new K("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}}class on{get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;await this._readCapability.promise;let{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:(this._loaded+=t.byteLength,null==(e=this.onProgress)||e.call(this,{loaded:this._loaded}),{value:a7(t),done:!1})}cancel(e){var t;null==(t=this._reader)||t.cancel(e),this._abortController.abort()}constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;let r=e.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;let i=new Headers(e.headers);i.append("Range","bytes=".concat(t,"-").concat(n-1));let a=r.url;fetch(a,a6(i,this._withCredentials,this._abortController)).then(t=>{let n=a3(t.url);if(n!==e._responseOrigin)throw Error('Expected range response-origin "'.concat(n,'" to match "').concat(e._responseOrigin,'".'));if(!a8(t.status))throw a9(t.status,a);this._readCapability.resolve(),this._reader=t.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}}class or{request(e){let t=new XMLHttpRequest,n=this.currXhrId++,r=this.pendingRequests[n]={xhr:t};for(let[e,n]of(t.open("GET",this.url),t.withCredentials=this.withCredentials,this.headers))t.setRequestHeader(e,n);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range","bytes=".concat(e.begin,"-").concat(e.end-1)),r.expectedStatus=206):r.expectedStatus=200,t.responseType="arraybuffer",L(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),r.onHeadersReceived=e.onHeadersReceived,r.onDone=e.onDone,r.onError=e.onError,r.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){var n;let r=this.pendingRequests[e];r&&(null==(n=r.onProgress)||n.call(r,t))}onStateChange(e,t){let n=this.pendingRequests[e];if(!n)return;let r=n.xhr;if(r.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),4!==r.readyState||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],0===r.status&&this.isHttp)return void n.onError(r.status);let i=r.status||200;if((200!==i||206!==n.expectedStatus)&&i!==n.expectedStatus)return void n.onError(r.status);let a=function(e){let t=e.response;return"string"!=typeof t?t:X(t).buffer}(r);if(206===i){let e=r.getResponseHeader("Content-Range"),t=/bytes (\d+)-(\d+)\/(\d+)/.exec(e);t?n.onDone({begin:parseInt(t[1],10),chunk:a}):(j('Missing or invalid "Content-Range" header.'),n.onError(0))}else a?n.onDone({begin:0,chunk:a}):n.onError(r.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){let t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}constructor({url:e,httpHeaders:t,withCredentials:n}){(0,h._)(this,"_responseOrigin",null),this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=a2(this.isHttp,t),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}}class oi{_onRangeRequestReaderClosed(e){let t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return L(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new oa(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){let n=new oo(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;for(let n of(null==(t=this._fullRequestReader)||t.cancel(e),this._rangeRequestReaders.slice(0)))n.cancel(e)}constructor(e){this._source=e,this._manager=new or(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}}class oa{_onHeadersReceived(){let e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=a3(t.responseURL);let n=t.getAllResponseHeaders(),r=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(e=>{let[t,...n]=e.split(": ");return[t,n.join(": ")]}):[]),{allowRangeRequests:i,suggestedLength:a}=a5({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});i&&(this._isRangeSupported=!0),this._contentLength=a||this._contentLength,this._filename=a4(r),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(let e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){for(let t of(this._storedError=a9(e,this._url),this._headersCapability.reject(this._storedError),this._requests))t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;null==(t=this.onProgress)||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){for(let t of(this._done=!0,this._headersCapability.reject(e),this._requests))t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}}class oo{_onHeadersReceived(){var e;let t=a3(null==(e=this._manager.getRequestXhr(this._requestId))?void 0:e.responseURL);t!==this._manager._responseOrigin&&(this._storedError=Error('Expected range response-origin "'.concat(t,'" to match "').concat(this._manager._responseOrigin,'".')),this._onError(0))}_close(){var e;null==(e=this.onClosed)||e.call(this,this)}_onDone(e){let t=e.chunk;for(let e of(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0,this._requests))e.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){for(let t of(null!=this._storedError||(this._storedError=a9(e,this._url)),this._requests))t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){if(!this.isStreamingSupported){var t;null==(t=this.onProgress)||t.call(this,{loaded:e.loaded})}}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(null!==this._queuedChunk){let e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};let e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){for(let e of(this._done=!0,this._requests))e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}constructor(e,t,n){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}}let ol=/^[a-z][a-z0-9\-+.]+:/i;class ou{get _progressiveDataLength(){var e,t;return null!=(t=null==(e=this._fullRequestReader)?void 0:e._loaded)?t:0}getFullReader(){return L(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new oc(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;let n=new od(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;for(let n of(null==(t=this._fullRequestReader)||t.cancel(e),this._rangeRequestReaders.slice(0)))n.cancel(e)}constructor(e){this.source=e,this.url=function(e){return new URL(ol.test(e)?e:t.default.getBuiltinModule("url").pathToFileURL(e))}(e.url),L("file:"===this.url.protocol,"PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}}class oc{get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let t=this._readableStream.read();return null===t?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,null==(e=this.onProgress)||e.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(e){if(!this._readableStream)return void this._error(e);this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new K("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;let n=e.source;this._contentLength=n.length,this._loaded=0,this._filename=null,this._disableRange=n.disableRange||!1,this._rangeChunkSize=n.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!n.disableStream,this._isRangeSupported=!n.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();let r=t.default.getBuiltinModule("fs");r.promises.lstat(this._url).then(e=>{this._contentLength=e.size,this._setReadableStream(r.createReadStream(this._url)),this._headersCapability.resolve()},e=>{"ENOENT"===e.code&&(e=new q('Missing PDF "'.concat(this._url,'".'))),this._storedError=e,this._headersCapability.reject(e)})}}class od{get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let t=this._readableStream.read();return null===t?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,null==(e=this.onProgress)||e.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(e){if(!this._readableStream)return void this._error(e);this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}constructor(e,n,r){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();let i=e.source;this._isStreamingSupported=!i.disableStream;let a=t.default.getBuiltinModule("fs");this._setReadableStream(a.createReadStream(this._url,{start:n,end:r-1}))}}var oh=new WeakMap,op=new WeakMap,of=new WeakMap,om=new WeakMap,og=new WeakMap,ov=new WeakMap,oy=new WeakMap,ob=new WeakMap,ox=new WeakMap,ow=new WeakMap,ok=new WeakMap,oS=new WeakMap,o_=new WeakMap,oC=new WeakMap,oA=new WeakMap,oE=new WeakMap,oT=new WeakMap,oM=new WeakMap,oI=new WeakSet,oN=new WeakSet,oD=new WeakSet;class oP{static get fontFamilyMap(){let{isWindows:e,isFirefox:t}=J.platform;return B(this,"fontFamilyMap",new Map([["sans-serif","".concat(e&&t?"Calibri, ":"","sans-serif")],["monospace","".concat(e&&t?"Lucida Console, ":"","monospace")]]))}render(){let e=()=>{(0,r._)(this,ox).read().then(t=>{var n;let{value:i,done:o}=t;if(o)return void(0,r._)(this,oh).resolve();(0,a._)(this,og,null!=(n=(0,r._)(this,og))?n:i.lang),Object.assign((0,r._)(this,o_),i.styles),(0,s._)(this,oI,oz).call(this,i.items),e()},(0,r._)(this,oh).reject)};return(0,a._)(this,ox,(0,r._)(this,oA).getReader()),(0,u._)(oP,oP,oL).add(this),e(),(0,r._)(this,oh).promise}update(e){let{viewport:t,onBefore:n=null}=e,i=t.scale*(globalThis.devicePixelRatio||1),o=t.rotation;if(o!==(0,r._)(this,ok)&&(null==n||n(),(0,a._)(this,ok,o),eA((0,r._)(this,ow),{rotation:o})),i!==(0,r._)(this,oS)){null==n||n(),(0,a._)(this,oS,i);let e={div:null,properties:null,ctx:(0,f._)(oP,oP,oH).call(oP,(0,r._)(this,og))};for(let t of(0,r._)(this,oE))e.properties=(0,r._)(this,oT).get(t),e.div=t,(0,s._)(this,oD,oU).call(this,e)}}cancel(){var e;let t=new K("TextLayer task cancelled.");null==(e=(0,r._)(this,ox))||e.cancel(t).catch(()=>{}),(0,a._)(this,ox,null),(0,r._)(this,oh).reject(t)}get textDivs(){return(0,r._)(this,oE)}get textContentItemsStr(){return(0,r._)(this,oC)}static cleanup(){if(!((0,u._)(this,oP,oL).size>0)){for(let{canvas:e}of((0,u._)(this,oP,oR).clear(),(0,u._)(this,oP,oO).values()))e.remove();(0,u._)(this,oP,oO).clear()}}constructor({textContentSource:e,container:t,viewport:n}){var o;if((0,l._)(this,oI),(0,l._)(this,oN),(0,l._)(this,oD),(0,i._)(this,oh,{writable:!0,value:Promise.withResolvers()}),(0,i._)(this,op,{writable:!0,value:null}),(0,i._)(this,of,{writable:!0,value:!1}),(0,i._)(this,om,{writable:!0,value:!!(null==(o=globalThis.FontInspector)?void 0:o.enabled)}),(0,i._)(this,og,{writable:!0,value:null}),(0,i._)(this,ov,{writable:!0,value:null}),(0,i._)(this,oy,{writable:!0,value:0}),(0,i._)(this,ob,{writable:!0,value:0}),(0,i._)(this,ox,{writable:!0,value:null}),(0,i._)(this,ow,{writable:!0,value:null}),(0,i._)(this,ok,{writable:!0,value:0}),(0,i._)(this,oS,{writable:!0,value:0}),(0,i._)(this,o_,{writable:!0,value:Object.create(null)}),(0,i._)(this,oC,{writable:!0,value:[]}),(0,i._)(this,oA,{writable:!0,value:null}),(0,i._)(this,oE,{writable:!0,value:[]}),(0,i._)(this,oT,{writable:!0,value:new WeakMap}),(0,i._)(this,oM,{writable:!0,value:null}),e instanceof ReadableStream)(0,a._)(this,oA,e);else if("object"==typeof e)(0,a._)(this,oA,new ReadableStream({start(t){t.enqueue(e),t.close()}}));else throw Error('No "textContentSource" parameter specified.');(0,a._)(this,op,(0,a._)(this,ow,t)),(0,a._)(this,oS,n.scale*(globalThis.devicePixelRatio||1)),(0,a._)(this,ok,n.rotation),(0,a._)(this,ov,{div:null,properties:null,ctx:null});let{pageWidth:s,pageHeight:c,pageX:d,pageY:h}=n.rawDims;(0,a._)(this,oM,[1,0,0,-1,-d,h+c]),(0,a._)(this,ob,s),(0,a._)(this,oy,c),(0,f._)(oP,oP,oV).call(oP),eA(t,n),(0,r._)(this,oh).promise.finally(()=>{(0,u._)(oP,oP,oL).delete(this),(0,a._)(this,ov,null),(0,a._)(this,o_,null)}).catch(()=>{})}}var oR={writable:!0,value:new Map},oO={writable:!0,value:new Map},oj={writable:!0,value:new WeakMap},oF={writable:!0,value:null},oL={writable:!0,value:new Set};function oz(e){var t;if((0,r._)(this,of))return;null!=(t=(0,r._)(this,ov)).ctx||(t.ctx=(0,f._)(oP,oP,oH).call(oP,(0,r._)(this,og)));let n=(0,r._)(this,oE),i=(0,r._)(this,oC);for(let t of e){if(n.length>1e5){j("Ignoring additional textDivs for performance reasons."),(0,a._)(this,of,!0);return}if(void 0===t.str){if("beginMarkedContentProps"===t.type||"beginMarkedContent"===t.type){let e=(0,r._)(this,op);(0,a._)(this,op,document.createElement("span")),(0,r._)(this,op).classList.add("markedContent"),null!==t.id&&(0,r._)(this,op).setAttribute("id","".concat(t.id)),e.append((0,r._)(this,op))}else"endMarkedContent"===t.type&&(0,a._)(this,op,(0,r._)(this,op).parentNode);continue}i.push(t.str),(0,s._)(this,oN,oB).call(this,t)}}function oB(e){let t,n,i=document.createElement("span"),a={angle:0,canvasWidth:0,hasText:""!==e.str,hasEOL:e.hasEOL,fontSize:0};(0,r._)(this,oE).push(i);let o=ee.transform((0,r._)(this,oM),e.transform),l=Math.atan2(o[1],o[0]),c=(0,r._)(this,o_)[e.fontName];c.vertical&&(l+=Math.PI/2);let d=(0,r._)(this,om)&&c.fontSubstitution||c.fontFamily;d=oP.fontFamilyMap.get(d)||d;let h=Math.hypot(o[2],o[3]),p=h*(0,f._)(oP,oP,oq).call(oP,d,(0,r._)(this,og));0===l?(t=o[4],n=o[5]-p):(t=o[4]+p*Math.sin(l),n=o[5]-p*Math.cos(l));let m="calc(var(--scale-factor)*",g=i.style;(0,r._)(this,op)===(0,r._)(this,ow)?(g.left="".concat((100*t/(0,r._)(this,ob)).toFixed(2),"%"),g.top="".concat((100*n/(0,r._)(this,oy)).toFixed(2),"%")):(g.left="".concat(m).concat(t.toFixed(2),"px)"),g.top="".concat(m).concat(n.toFixed(2),"px)")),g.fontSize="".concat(m).concat(((0,u._)(oP,oP,oF)*h).toFixed(2),"px)"),g.fontFamily=d,a.fontSize=h,i.setAttribute("role","presentation"),i.textContent=e.str,i.dir=e.dir,(0,r._)(this,om)&&(i.dataset.fontName=c.fontSubstitutionLoadedName||e.fontName),0!==l&&(a.angle=180/Math.PI*l);let y=!1;if(e.str.length>1)y=!0;else if(" "!==e.str&&e.transform[0]!==e.transform[3]){let t=Math.abs(e.transform[0]),n=Math.abs(e.transform[3]);t!==n&&Math.max(t,n)/Math.min(t,n)>1.5&&(y=!0)}if(y&&(a.canvasWidth=c.vertical?e.height:e.width),(0,r._)(this,oT).set(i,a),(0,r._)(this,ov).div=i,(0,r._)(this,ov).properties=a,(0,s._)(this,oD,oU).call(this,(0,r._)(this,ov)),a.hasText&&(0,r._)(this,op).append(i),a.hasEOL){let e=document.createElement("br");e.setAttribute("role","presentation"),(0,r._)(this,op).append(e)}}function oU(e){let{div:t,properties:n,ctx:i}=e,{style:a}=t,o="";if((0,u._)(oP,oP,oF)>1&&(o="scale(".concat(1/(0,u._)(oP,oP,oF),")")),0!==n.canvasWidth&&n.hasText){let{fontFamily:e}=a,{canvasWidth:s,fontSize:l}=n;(0,f._)(oP,oP,oW).call(oP,i,l*(0,r._)(this,oS),e);let{width:u}=i.measureText(t.textContent);u>0&&(o="scaleX(".concat(s*(0,r._)(this,oS)/u,") ").concat(o))}0!==n.angle&&(o="rotate(".concat(n.angle,"deg) ").concat(o)),o.length>0&&(a.transform=o)}function oH(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=(0,u._)(this,oP,oO).get(e||(e=""));if(!t){let n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),(0,u._)(this,oP,oO).set(e,t),(0,u._)(this,oP,oj).set(t,{size:0,family:""})}return t}function oW(e,t,n){let r=(0,u._)(this,oP,oj).get(e);(t!==r.size||n!==r.family)&&(e.font="".concat(t,"px ").concat(n),r.size=t,r.family=n)}function oV(){if(null!==(0,u._)(this,oP,oF))return;let e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),(0,c._)(this,oP,oF,e.getBoundingClientRect().height),e.remove()}function oq(e,t){let n=(0,u._)(this,oP,oR).get(e);if(n)return n;let r=(0,f._)(this,oP,oH).call(oP,t);r.canvas.width=r.canvas.height=30,(0,f._)(this,oP,oW).call(oP,r,30,e);let i=r.measureText(""),a=i.fontBoundingBoxAscent,o=Math.abs(i.fontBoundingBoxDescent);if(a){let t=a/(a+o);return(0,u._)(this,oP,oR).set(e,t),r.canvas.width=r.canvas.height=0,t}r.strokeStyle="red",r.clearRect(0,0,30,30),r.strokeText("g",0,0);let s=r.getImageData(0,0,30,30).data;o=0;for(let e=s.length-1-3;e>=0;e-=4)if(s[e]>0){o=Math.ceil(e/4/30);break}r.clearRect(0,0,30,30),r.strokeText("A",0,30),s=r.getImageData(0,0,30,30).data,a=0;for(let e=0,t=s.length;e<t;e+=4)if(s[e]>0){a=30-Math.floor(e/4/30);break}r.canvas.width=r.canvas.height=0;let l=a?a/(a+o):.8;return(0,u._)(this,oP,oR).set(e,l),l}class oG{static textContent(e){let t=[],n={items:t,styles:Object.create(null)};return!function e(n){var r;if(!n)return;let i=null,a=n.name;if("#text"===a)i=n.value;else{if(!oG.shouldBuildText(a))return;(null==n||null==(r=n.attributes)?void 0:r.textContent)?i=n.attributes.textContent:n.value&&(i=n.value)}if(null!==i&&t.push({str:i}),n.children)for(let t of n.children)e(t)}(e),n}static shouldBuildText(e){return"textarea"!==e&&"input"!==e&&"option"!==e&&"select"!==e}}let o$=b?class extends iD{_createCanvas(e,n){return t.default.getBuiltinModule("module").createRequire(m.url)("@napi-rs/canvas").createCanvas(e,n)}}:class extends iD{_createCanvas(e,t){let n=this._document.createElement("canvas");return n.width=e,n.height=t,n}constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}},oK=b?class extends iP{async _fetch(e){return aa(e)}}:iR,oY=b?class extends iO{}:class extends iO{addFilter(e){if(!e)return"none";let t=(0,r._)(this,iW).get(e);if(t)return t;let[n,i,a]=(0,s._)(this,iG,i5).call(this,e),l=1===e.length?n:"".concat(n).concat(i).concat(a);if(t=(0,r._)(this,iW).get(l))return(0,r._)(this,iW).set(e,t),t;let u="g_".concat((0,r._)(this,iz),"_transfer_map_").concat((0,o._)(this,iH).value++),c=(0,s._)(this,i$,i4).call(this,u);(0,r._)(this,iW).set(e,c),(0,r._)(this,iW).set(l,c);let d=(0,s._)(this,iX,i6).call(this,u);return(0,s._)(this,iJ,ae).call(this,n,i,a,d),c}addHCMFilter(e,t){let n="".concat(e,"-").concat(t),i="base",a=(0,r._)(this,iV).get(i);if((null==a?void 0:a.key)===n)return a.url;if(a){var o;null==(o=a.filter)||o.remove(),a.key=n,a.url="none",a.filter=null}else a={key:n,url:"none",filter:null},(0,r._)(this,iV).set(i,a);if(!e||!t)return a.url;let l=(0,s._)(this,i0,an).call(this,e);e=ee.makeHexColor(...l);let u=(0,s._)(this,i0,an).call(this,t);if(t=ee.makeHexColor(...u),(0,r._)(this,iq).style.color="","#000000"===e&&"#ffffff"===t||e===t)return a.url;let c=Array(256);for(let e=0;e<=255;e++){let t=e/255;c[e]=t<=.03928?t/12.92:((t+.055)/1.055)**2.4}let d=c.join(","),h="g_".concat((0,r._)(this,iz),"_hcm_filter"),p=a.filter=(0,s._)(this,iX,i6).call(this,h);(0,s._)(this,iJ,ae).call(this,d,d,d,p),(0,s._)(this,iY,i8).call(this,p);let f=(e,t)=>{let n=l[e]/255,r=u[e]/255,i=Array(t+1);for(let e=0;e<=t;e++)i[e]=n+e/t*(r-n);return i.join(",")};return(0,s._)(this,iJ,ae).call(this,f(0,5),f(1,5),f(2,5),p),a.url=(0,s._)(this,i$,i4).call(this,h),a.url}addAlphaFilter(e){let t=(0,r._)(this,iW).get(e);if(t)return t;let[n]=(0,s._)(this,iG,i5).call(this,[e]),i="alpha_".concat(n);if(t=(0,r._)(this,iW).get(i))return(0,r._)(this,iW).set(e,t),t;let a="g_".concat((0,r._)(this,iz),"_alpha_map_").concat((0,o._)(this,iH).value++),l=(0,s._)(this,i$,i4).call(this,a);(0,r._)(this,iW).set(e,l),(0,r._)(this,iW).set(i,l);let u=(0,s._)(this,iX,i6).call(this,a);return(0,s._)(this,iQ,at).call(this,n,u),l}addLuminosityFilter(e){let t,n,i=(0,r._)(this,iW).get(e||"luminosity");if(i)return i;if(e?([t]=(0,s._)(this,iG,i5).call(this,[e]),n="luminosity_".concat(t)):n="luminosity",i=(0,r._)(this,iW).get(n))return(0,r._)(this,iW).set(e,i),i;let a="g_".concat((0,r._)(this,iz),"_luminosity_map_").concat((0,o._)(this,iH).value++),l=(0,s._)(this,i$,i4).call(this,a);(0,r._)(this,iW).set(e,l),(0,r._)(this,iW).set(n,l);let u=(0,s._)(this,iX,i6).call(this,a);return(0,s._)(this,iK,i9).call(this,u),e&&(0,s._)(this,iQ,at).call(this,t,u),l}addHighlightHCMFilter(e,t,n,i,a){let o="".concat(t,"-").concat(n,"-").concat(i,"-").concat(a),l=(0,r._)(this,iV).get(e);if((null==l?void 0:l.key)===o)return l.url;if(l){var u;null==(u=l.filter)||u.remove(),l.key=o,l.url="none",l.filter=null}else l={key:o,url:"none",filter:null},(0,r._)(this,iV).set(e,l);if(!t||!n)return l.url;let[c,d]=[t,n].map((0,s._)(this,i0,an).bind(this)),h=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),p=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),[f,m]=[i,a].map((0,s._)(this,i0,an).bind(this));p<h&&([h,p,f,m]=[p,h,m,f]),(0,r._)(this,iq).style.color="";let g=(e,t,n)=>{let r=Array(256),i=(p-h)/n,a=e/255,o=(t-e)/(255*n),s=0;for(let e=0;e<=n;e++){let t=Math.round(h+e*i),n=a+e*o;for(let e=s;e<=t;e++)r[e]=n;s=t+1}for(let e=s;e<256;e++)r[e]=r[s-1];return r.join(",")},y="g_".concat((0,r._)(this,iz),"_hcm_").concat(e,"_filter"),b=l.filter=(0,s._)(this,iX,i6).call(this,y);return(0,s._)(this,iY,i8).call(this,b),(0,s._)(this,iJ,ae).call(this,g(f[0],m[0],5),g(f[1],m[1],5),g(f[2],m[2],5),b),l.url=(0,s._)(this,i$,i4).call(this,y),l.url}destroy(){var e,t,n,i;let o=arguments.length>0&&void 0!==arguments[0]&&arguments[0];o&&null!=(e=(0,r._)(this,iU))&&e.size||(null==(t=(0,r._)(this,iL))||t.parentNode.parentNode.remove(),(0,a._)(this,iL,null),null==(n=(0,r._)(this,iF))||n.clear(),(0,a._)(this,iF,null),null==(i=(0,r._)(this,iU))||i.clear(),(0,a._)(this,iU,null),(0,a._)(this,iH,0))}constructor({docId:e,ownerDocument:t=globalThis.document}){super(),(0,i._)(this,iW,{get:i1,set:void 0}),(0,i._)(this,iV,{get:i2,set:void 0}),(0,i._)(this,iq,{get:i3,set:void 0}),(0,l._)(this,iG),(0,l._)(this,i$),(0,l._)(this,iK),(0,l._)(this,iY),(0,l._)(this,iX),(0,l._)(this,iZ),(0,l._)(this,iJ),(0,l._)(this,iQ),(0,l._)(this,i0),(0,i._)(this,ij,{writable:!0,value:void 0}),(0,i._)(this,iF,{writable:!0,value:void 0}),(0,i._)(this,iL,{writable:!0,value:void 0}),(0,i._)(this,iz,{writable:!0,value:void 0}),(0,i._)(this,iB,{writable:!0,value:void 0}),(0,i._)(this,iU,{writable:!0,value:void 0}),(0,i._)(this,iH,{writable:!0,value:0}),(0,a._)(this,iz,e),(0,a._)(this,iB,t)}},oX=b?class extends ar{async _fetch(e){return aa(e)}}:ai;function oZ(){var e,t;let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"string"==typeof r||r instanceof URL?r={url:r}:(r instanceof ArrayBuffer||ArrayBuffer.isView(r))&&(r={data:r});let i=new oQ,{docId:a}=i,o=r.url?function(e){if(e instanceof URL)return e.href;try{return new URL(e,window.location).href}catch(t){if(b&&"string"==typeof e)return e}throw Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}(r.url):null,s=r.data?function(e){if(b&&void 0!==n.Buffer&&e instanceof n.Buffer)throw Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength)return e;if("string"==typeof e)return X(e);if(e instanceof ArrayBuffer||ArrayBuffer.isView(e)||"object"==typeof e&&!isNaN(null==e?void 0:e.length))return new Uint8Array(e);throw Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}(r.data):null,l=r.httpHeaders||null,u=!0===r.withCredentials,c=null!=(e=r.password)?e:null,d=r.range instanceof o1?r.range:null,h=Number.isInteger(r.rangeChunkSize)&&r.rangeChunkSize>0?r.rangeChunkSize:65536,p=r.worker instanceof si?r.worker:null,f=r.verbosity,m="string"!=typeof r.docBaseUrl||eh(r.docBaseUrl)?null:r.docBaseUrl,g="string"==typeof r.cMapUrl?r.cMapUrl:null,y=!1!==r.cMapPacked,x=r.CMapReaderFactory||oK,w="string"==typeof r.standardFontDataUrl?r.standardFontDataUrl:null,k=r.StandardFontDataFactory||oX,S=!0!==r.stopAtErrors,_=Number.isInteger(r.maxImageSize)&&r.maxImageSize>-1?r.maxImageSize:-1,C=!1!==r.isEvalSupported,A="boolean"==typeof r.isOffscreenCanvasSupported?r.isOffscreenCanvasSupported:!b,E="boolean"==typeof r.isImageDecoderSupported?r.isImageDecoderSupported:!b&&(J.platform.isFirefox||!globalThis.chrome),T=Number.isInteger(r.canvasMaxAreaInBytes)?r.canvasMaxAreaInBytes:-1,M="boolean"==typeof r.disableFontFace?r.disableFontFace:b,I=!0===r.fontExtraProperties,N=!0===r.enableXfa,D=r.ownerDocument||globalThis.document,P=!0===r.disableRange,O=!0===r.disableStream,j=!0===r.disableAutoFetch,F=!0===r.pdfBug,L=r.CanvasFactory||o$,z=r.FilterFactory||oY,B=!0===r.enableHWA,U=d?d.length:null!=(t=r.length)?t:NaN,H="boolean"==typeof r.useSystemFonts?r.useSystemFonts:!b&&!M,W="boolean"==typeof r.useWorkerFetch?r.useWorkerFetch:x===iR&&k===ai&&g&&w&&ev(g,document.baseURI)&&ev(w,document.baseURI);Number.isInteger(f)&&(R=f);let V={canvasFactory:new L({ownerDocument:D,enableHWA:B}),filterFactory:new z({docId:a,ownerDocument:D}),cMapReaderFactory:W?null:new x({baseUrl:g,isCompressed:y}),standardFontDataFactory:W?null:new k({baseUrl:w})};if(!p){let e={verbosity:f,port:aR.workerPort};i._worker=p=e.port?si.fromPort(e):new si(e)}let q={docId:a,apiVersion:"4.10.38",data:s,password:c,disableAutoFetch:j,rangeChunkSize:h,length:U,docBaseUrl:m,enableXfa:N,evaluatorOptions:{maxImageSize:_,disableFontFace:M,ignoreErrors:S,isEvalSupported:C,isOffscreenCanvasSupported:A,isImageDecoderSupported:E,canvasMaxAreaInBytes:T,fontExtraProperties:I,useSystemFonts:H,cMapUrl:W?g:null,standardFontDataUrl:W?w:null}},G={disableFontFace:M,fontExtraProperties:I,ownerDocument:D,pdfBug:F,styleElement:null,loadingParams:{disableAutoFetch:j,enableXfa:N}};return p.promise.then(function(){let e;if(i.destroyed)throw Error("Loading aborted");if(p.destroyed)throw Error("Worker was destroyed");let t=p.messageHandler.sendWithPromise("GetDocRequest",q,s?[s.buffer]:null);if(d)e=new aQ(d,{disableRange:P,disableStream:O});else if(!s){let t;if(!o)throw Error("getDocument - no `url` parameter provided.");if(b)if(ev(o)){if("undefined"==typeof fetch||"undefined"==typeof Response||!("body"in Response.prototype))throw Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");t=oe}else t=ou;else t=ev(o)?oe:oi;e=new t({url:o,length:U,httpHeaders:l,withCredentials:u,rangeChunkSize:h,disableRange:P,disableStream:O})}return t.then(t=>{if(i.destroyed)throw Error("Loading aborted");if(p.destroyed)throw Error("Worker was destroyed");let n=new iA(a,t,p.port),r=new sg(n,i,e,G,V);i._transport=r,n.send("Ready",null)})}).catch(i._capability.reject),i}function oJ(e){return"object"==typeof e&&Number.isInteger(null==e?void 0:e.num)&&e.num>=0&&Number.isInteger(null==e?void 0:e.gen)&&e.gen>=0}class oQ{get promise(){return this._capability.promise}async destroy(){var e,t,n,r;this.destroyed=!0;try{(null==(t=this._worker)?void 0:t.port)&&(this._worker._pendingDestroy=!0),await (null==(n=this._transport)?void 0:n.destroy())}catch(e){throw(null==(r=this._worker)?void 0:r.port)&&delete this._worker._pendingDestroy,e}this._transport=null,null==(e=this._worker)||e.destroy(),this._worker=null}constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId="d".concat((0,d._)(oQ,oQ,o0).value++),this.destroyed=!1,this.onPassword=null,this.onProgress=null}}var o0={writable:!0,value:0};class o1{addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(let n of this._rangeListeners)n(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(let n of this._progressListeners)n(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(let t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(let e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){F("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}constructor(e,t,n=!1,r=null){this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=r,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}}class o2{get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return B(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){let{intent:e="display"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}constructor(e,t){this._pdfInfo=e,this._transport=t}}var o3=new WeakMap,o5=new WeakMap,o4=new WeakSet,o9=new WeakSet;class o8{get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport(){let{scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:r=0,dontFlip:i=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new ec({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:r,dontFlip:i})}getAnnotations(){let{intent:e="display"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return B(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return(null==(e=this._transport._htmlForXfa)?void 0:e.children[this._pageIndex])||null}render(e){var t,n,r;let{canvasContext:i,viewport:o,intent:l="display",annotationMode:u=S.ENABLE,transform:c=null,background:d=null,optionalContentConfigPromise:h=null,annotationCanvasMap:p=null,pageColors:f=null,printAnnotationStorage:m=null,isEditing:g=!1}=e;null==(t=this._stats)||t.time("Overall");let y=this._transport.getRenderingIntent(l,u,m,g),{renderingIntent:b,cacheKey:x}=y;(0,a._)(this,o5,!1),(0,s._)(this,o9,o7).call(this),h||(h=this._transport.getOptionalContentConfig(b));let w=this._intentStates.get(x);w||(w=Object.create(null),this._intentStates.set(x,w)),w.streamReaderCancelTimeout&&(clearTimeout(w.streamReaderCancelTimeout),w.streamReaderCancelTimeout=null);let _=!!(b&k.PRINT);w.displayReadyCapability||(w.displayReadyCapability=Promise.withResolvers(),w.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null==(r=this._stats)||r.time("Page Request"),this._pumpOperatorList(y));let C=e=>{if(w.renderTasks.delete(A),(this._maybeCleanupAfterRender||_)&&(0,a._)(this,o5,!0),(0,s._)(this,o4,o6).call(this,!_),e?(A.capability.reject(e),this._abortOperatorList({intentState:w,reason:e instanceof Error?e:Error(e)})):A.capability.resolve(),this._stats){var t;this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(null==(t=globalThis.Stats)?void 0:t.enabled)&&globalThis.Stats.add(this.pageNumber,this._stats)}},A=new sA({callback:C,params:{canvasContext:i,viewport:o,transform:c,background:d},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:p,operatorList:w.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!_,pdfBug:this._pdfBug,pageColors:f});((n=w).renderTasks||(n.renderTasks=new Set)).add(A);let E=A.task;return Promise.all([w.displayReadyCapability.promise,h]).then(e=>{var t;let[n,r]=e;if(this.destroyed)return void C();if(null==(t=this._stats)||t.time("Rendering"),!(r.renderingIntent&b))throw Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");A.initializeGraphics({transparency:n,optionalContentConfig:r}),A.operatorListChanged()}).catch(C),E}getOperatorList(){let e,{intent:t="display",annotationMode:n=S.ENABLE,printAnnotationStorage:r=null,isEditing:i=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=this._transport.getRenderingIntent(t,n,r,i,!0),o=this._intentStates.get(a.cacheKey);if(o||(o=Object.create(null),this._intentStates.set(a.cacheKey,o)),!o.opListReadCapability){var s,l;(e=Object.create(null)).operatorListChanged=function(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(e))},o.opListReadCapability=Promise.withResolvers(),((l=o).renderTasks||(l.renderTasks=new Set)).add(e),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null==(s=this._stats)||s.time("Page Request"),this._pumpOperatorList(a)}return o.opListReadCapability.promise}streamTextContent(){let{includeMarkedContent:e=!1,disableNormalization:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:!0===e,disableNormalization:!0===t},{highWaterMark:100,size:e=>e.items.length})}getTextContent(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._transport._htmlForXfa)return this.getXfa().then(e=>oG.textContent(e));let t=this.streamTextContent(e);return new Promise(function(e,n){let r=t.getReader(),i={items:[],styles:Object.create(null),lang:null};!function t(){r.read().then(function(n){let{value:r,done:a}=n;if(a)return void e(i);null!=i.lang||(i.lang=r.lang),Object.assign(i.styles,r.styles),i.items.push(...r.items),t()},n)}()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;let e=[];for(let t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(let n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),(0,a._)(this,o5,!1),(0,s._)(this,o9,o7).call(this),Promise.all(e)}cleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(0,a._)(this,o5,!0);let t=(0,s._)(this,o4,o6).call(this,!1);return e&&t&&this._stats&&(this._stats=new eg),t}_startRenderPage(e,t){var n,r;let i=this._intentStates.get(t);i&&(null==(n=this._stats)||n.timeEnd("Page Request"),null==(r=i.displayReadyCapability)||r.resolve(e))}_renderPageChunk(e,t){for(let n=0,r=e.length;n<r;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);for(let n of(t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots,t.renderTasks))n.operatorListChanged();e.lastChunk&&(0,s._)(this,o4,o6).call(this,!0)}_pumpOperatorList(e){let{renderingIntent:t,cacheKey:n,annotationStorageSerializable:r,modifiedIds:i}=e,{map:a,transfer:o}=r,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:n,annotationStorage:a,modifiedIds:i},o).getReader(),u=this._intentStates.get(n);u.streamReader=l;let c=()=>{l.read().then(e=>{let{value:t,done:n}=e;if(n){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(t,u),c())},e=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){for(let e of(u.operatorList.lastChunk=!0,u.renderTasks))e.operatorListChanged();(0,s._)(this,o4,o6).call(this,!0)}if(u.displayReadyCapability)u.displayReadyCapability.reject(e);else if(u.opListReadCapability)u.opListReadCapability.reject(e);else throw e}})};c()}_abortOperatorList(e){let{intentState:t,reason:n,force:r=!1}=e;if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!r){if(t.renderTasks.size>0)return;if(n instanceof ed){let e=100;n.extraDelay>0&&n.extraDelay<1e3&&(e+=n.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:n,force:!0})},e);return}}if(t.streamReader.cancel(new K(n.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(let[e,n]of this._intentStates)if(n===t){this._intentStates.delete(e);break}this.cleanup()}}}get stats(){return this._stats}constructor(e,t,n,r=!1){(0,l._)(this,o4),(0,l._)(this,o9),(0,i._)(this,o3,{writable:!0,value:null}),(0,i._)(this,o5,{writable:!0,value:!1}),this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=r?new eg:null,this._pdfBug=r,this.commonObjs=n.commonObjs,this.objs=new sw,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}}function o6(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if((0,s._)(this,o9,o7).call(this),!(0,r._)(this,o5)||this.destroyed)return!1;if(e)return(0,a._)(this,o3,setTimeout(()=>{(0,a._)(this,o3,null),(0,s._)(this,o4,o6).call(this,!1)},5e3)),!1;for(let{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),(0,a._)(this,o5,!1),!0}function o7(){(0,r._)(this,o3)&&(clearTimeout((0,r._)(this,o3)),(0,a._)(this,o3,null))}var se=new WeakMap,st=new WeakMap;class sn{postMessage(e,t){let n={data:structuredClone(e,t?{transfer:t}:null)};(0,r._)(this,st).then(()=>{for(let[e]of(0,r._)(this,se))e.call(this,n)})}addEventListener(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=null;if((null==n?void 0:n.signal)instanceof AbortSignal){let{signal:r}=n;if(r.aborted)return void j("LoopbackPort - cannot use an `aborted` signal.");let a=()=>this.removeEventListener(e,t);i=()=>r.removeEventListener("abort",a),r.addEventListener("abort",a)}(0,r._)(this,se).set(t,i)}removeEventListener(e,t){let n=(0,r._)(this,se).get(t);null==n||n(),(0,r._)(this,se).delete(t)}terminate(){for(let[,e]of(0,r._)(this,se))null==e||e();(0,r._)(this,se).clear()}constructor(){(0,i._)(this,se,{writable:!0,value:new Map}),(0,i._)(this,st,{writable:!0,value:Promise.resolve()})}}var sr=new WeakSet;class si{get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new iA("main","worker",e),this._messageHandler.on("ready",function(){}),(0,s._)(this,sr,su).call(this)}_initialize(){if((0,u._)(si,si,ss)||(0,u._)(si,si,sa))return void this._setupFakeWorker();let{workerSrc:e}=si;try{si._isSameOrigin(window.location.href,e)||(e=si._createCDNWrapper(new URL(e,window.location).href));let t=new Worker(e,{type:"module"}),n=new iA("main","worker",t),r=()=>{i.abort(),n.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(Error("Worker was destroyed")):this._setupFakeWorker()},i=new AbortController;t.addEventListener("error",()=>{this._webWorker||r()},{signal:i.signal}),n.on("test",e=>{if(i.abort(),this.destroyed||!e)return void r();this._messageHandler=n,this._port=t,this._webWorker=t,(0,s._)(this,sr,su).call(this)}),n.on("ready",e=>{if(i.abort(),this.destroyed)return void r();try{a()}catch(e){this._setupFakeWorker()}});let a=()=>{let e=new Uint8Array;n.send("test",e,[e.buffer])};a();return}catch(e){O("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){(0,u._)(si,si,ss)||(j("Setting up fake worker."),(0,c._)(si,si,ss,!0)),si._setupFakeWorkerGlobal.then(e=>{if(this.destroyed)return void this._readyCapability.reject(Error("Worker was destroyed"));let t=new sn;this._port=t;let n="fake".concat((0,d._)(si,si,so).value++),r=new iA(n+"_worker",n,t);e.setup(r,t),this._messageHandler=new iA(n,n+"_worker",t),(0,s._)(this,sr,su).call(this)}).catch(e=>{this._readyCapability.reject(Error('Setting up fake worker failed: "'.concat(e.message,'".')))})}destroy(){var e,t,n;this.destroyed=!0,null==(e=this._webWorker)||e.terminate(),this._webWorker=null,null==(t=(0,u._)(si,si,sl))||t.delete(this._port),this._port=null,null==(n=this._messageHandler)||n.destroy(),this._messageHandler=null}static fromPort(e){var t;if(!(null==e?void 0:e.port))throw Error("PDFWorker.fromPort - invalid method signature.");let n=null==(t=(0,u._)(this,si,sl))?void 0:t.get(e.port);if(n){if(n._pendingDestroy)throw Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return n}return new si(e)}static get workerSrc(){if(aR.workerSrc)return aR.workerSrc;throw Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return B(this,"_setupFakeWorkerGlobal",(async()=>(0,u._)(this,si,sa)?(0,u._)(this,si,sa):(await import(this.workerSrc)).WorkerMessageHandler)())}constructor({name:e=null,port:t=null,verbosity:n=R}={}){if((0,l._)(this,sr),this.name=e,this.destroyed=!1,this.verbosity=n,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){var r;if(null==(r=(0,u._)(si,si,sl))?void 0:r.has(t))throw Error("Cannot use more than one PDFWorker per port.");(0,c._)(si,si,sl,(0,u._)(si,si,sl)||new WeakMap).set(t,this),this._initializeFromPort(t);return}this._initialize()}}var sa={get:function(){try{var e;return(null==(e=globalThis.pdfjsWorker)?void 0:e.WorkerMessageHandler)||null}catch(e){return null}},set:void 0},so={writable:!0,value:0},ss={writable:!0,value:!1},sl={writable:!0,value:void 0};function su(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}b&&((0,c._)(si,si,ss,!0),aR.workerSrc||(aR.workerSrc="./pdf.worker.mjs")),si._isSameOrigin=(e,t)=>{let n;try{if(!(n=new URL(e)).origin||"null"===n.origin)return!1}catch(e){return!1}let r=new URL(t,n);return n.origin===r.origin},si._createCDNWrapper=e=>URL.createObjectURL(new Blob(['await import("'.concat(e,'");')],{type:"text/javascript"}));var sc=new WeakMap,sd=new WeakMap,sh=new WeakMap,sp=new WeakMap,sf=new WeakMap,sm=new WeakSet;class sg{get annotationStorage(){return B(this,"annotationStorage",new iu)}getRenderingIntent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:S.ENABLE,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=k.DISPLAY,o=ii;switch(e){case"any":a=k.ANY;break;case"display":break;case"print":a=k.PRINT;break;default:j("getRenderingIntent - invalid intent: ".concat(e))}let s=a&k.PRINT&&n instanceof ih?n:this.annotationStorage;switch(t){case S.DISABLE:a+=k.ANNOTATIONS_DISABLE;break;case S.ENABLE:break;case S.ENABLE_FORMS:a+=k.ANNOTATIONS_FORMS;break;case S.ENABLE_STORAGE:a+=k.ANNOTATIONS_STORAGE,o=s.serializable;break;default:j("getRenderingIntent - invalid annotationMode: ".concat(t))}r&&(a+=k.IS_EDITING),i&&(a+=k.OPLIST);let{ids:l,hash:u}=s.modifiedIds,c=[a,o.hash,u];return{renderingIntent:a,cacheKey:c.join("_"),annotationStorageSerializable:o,modifiedIds:l}}destroy(){var e;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),null==(e=(0,r._)(this,sf))||e.reject(Error("Worker was destroyed during onPassword callback"));let t=[];for(let e of(0,r._)(this,sd).values())t.push(e._destroy());(0,r._)(this,sd).clear(),(0,r._)(this,sh).clear(),(0,r._)(this,sp).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();let n=this.messageHandler.sendWithPromise("Terminate",null);return t.push(n),Promise.all(t).then(()=>{var e,t;this.commonObjs.clear(),this.fontLoader.clear(),(0,r._)(this,sc).clear(),this.filterFactory.destroy(),oP.cleanup(),null==(e=this._networkStream)||e.cancelAllRequests(new K("Worker was terminated.")),null==(t=this.messageHandler)||t.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){let{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(e,t)=>{L(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=e=>{this._lastProgress={loaded:e.loaded,total:e.total}},t.onPull=()=>{this._fullReader.read().then(function(e){let{value:n,done:r}=e;if(r)return void t.close();L(n instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),t.enqueue(new Uint8Array(n),1,[n])}).catch(e=>{t.error(e)})},t.onCancel=e=>{this._fullReader.cancel(e),t.ready.catch(e=>{if(!this.destroyed)throw e})}}),e.on("ReaderHeadersReady",async e=>{await this._fullReader.headersReady;let{isStreamingSupported:n,isRangeSupported:r,contentLength:i}=this._fullReader;if(!n||!r){if(this._lastProgress){var a;null==(a=t.onProgress)||a.call(t,this._lastProgress)}this._fullReader.onProgress=e=>{var n;null==(n=t.onProgress)||n.call(t,{loaded:e.loaded,total:e.total})}}return{isStreamingSupported:n,isRangeSupported:r,contentLength:i}}),e.on("GetRangeReader",(e,t)=>{L(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");let n=this._networkStream.getRangeReader(e.begin,e.end);if(!n)return void t.close();t.onPull=()=>{n.read().then(function(e){let{value:n,done:r}=e;if(r)return void t.close();L(n instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),t.enqueue(new Uint8Array(n),1,[n])}).catch(e=>{t.error(e)})},t.onCancel=e=>{n.cancel(e),t.ready.catch(e=>{if(!this.destroyed)throw e})}}),e.on("GetDoc",e=>{let{pdfInfo:n}=e;this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new o2(n,this))}),e.on("DocException",e=>{t._capability.reject(ix(e))}),e.on("PasswordRequest",e=>{(0,a._)(this,sf,Promise.withResolvers());try{if(!t.onPassword)throw ix(e);let n=e=>{e instanceof Error?(0,r._)(this,sf).reject(e):(0,r._)(this,sf).resolve({password:e})};t.onPassword(n,e.code)}catch(e){(0,r._)(this,sf).reject(e)}return(0,r._)(this,sf).promise}),e.on("DataLoaded",e=>{var n;null==(n=t.onProgress)||n.call(t,{loaded:e.length,total:e.length}),this.downloadInfoCapability.resolve(e)}),e.on("StartRenderPage",e=>{this.destroyed||(0,r._)(this,sd).get(e.pageIndex)._startRenderPage(e.transparency,e.cacheKey)}),e.on("commonobj",t=>{let[n,i,a]=t;if(this.destroyed||this.commonObjs.has(n))return null;switch(i){case"Font":var o;let{disableFontFace:s,fontExtraProperties:l,pdfBug:u}=this._params;if("error"in a){let e=a.error;j("Error during font loading: ".concat(e)),this.commonObjs.resolve(n,e);break}let c=new ig(a,{disableFontFace:s,fontExtraProperties:l,inspectFont:u&&(null==(o=globalThis.FontInspector)?void 0:o.enabled)?(e,t)=>globalThis.FontInspector.fontAdded(e,t):null});this.fontLoader.bind(c).catch(()=>e.sendWithPromise("FontFallback",{id:n})).finally(()=>{!l&&c.data&&(c.data=null),this.commonObjs.resolve(n,c)});break;case"CopyLocalImage":let{imageRef:d}=a;for(let e of(L(d,"The imageRef must be defined."),(0,r._)(this,sd).values()))for(let[,t]of e.objs)if((null==t?void 0:t.ref)===d){if(!t.dataLen)return null;return this.commonObjs.resolve(n,structuredClone(t)),t.dataLen}break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,a);break;default:throw Error("Got unknown common object type ".concat(i))}return null}),e.on("obj",e=>{let[t,n,i,a]=e;if(this.destroyed)return;let o=(0,r._)(this,sd).get(n);if(!o.objs.has(t)){if(0===o._intentStates.size){var s;null==a||null==(s=a.bitmap)||s.close();return}switch(i){case"Image":o.objs.resolve(t,a),(null==a?void 0:a.dataLen)>1e7&&(o._maybeCleanupAfterRender=!0);break;case"Pattern":o.objs.resolve(t,a);break;default:throw Error("Got unknown object type ".concat(i))}}}),e.on("DocProgress",e=>{var n;this.destroyed||null==(n=t.onProgress)||n.call(t,{loaded:e.loaded,total:e.total})}),e.on("FetchBuiltInCMap",async e=>{if(this.destroyed)throw Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(e)}),e.on("FetchStandardFontData",async e=>{if(this.destroyed)throw Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(e)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var e,t;this.annotationStorage.size<=0&&j("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");let{map:n,transfer:r}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:n,filename:null!=(t=null==(e=this._fullReader)?void 0:e.filename)?t:null},r).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(Error("Invalid page request."));let t=e-1,n=(0,r._)(this,sh).get(t);if(n)return n;let i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(n=>{if(this.destroyed)throw Error("Transport destroyed");n.refStr&&(0,r._)(this,sp).set(n.refStr,e);let i=new o8(t,n,this,this._params.pdfBug);return(0,r._)(this,sd).set(t,i),i});return(0,r._)(this,sh).set(t,i),i}getPageIndex(e){return oJ(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return(0,s._)(this,sm,sv).call(this,"GetFieldObjects")}hasJSActions(){return(0,s._)(this,sm,sv).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return"string"!=typeof e?Promise.reject(Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return(0,s._)(this,sm,sv).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return(0,s._)(this,sm,sv).call(this,"GetOptionalContentConfig").then(t=>new aZ(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){let e="GetMetadata",t=(0,r._)(this,sc).get(e);if(t)return t;let n=this.messageHandler.sendWithPromise(e,null).then(e=>{var t,n,r,i;return{info:e[0],metadata:e[1]?new az(e[1]):null,contentDispositionFilename:null!=(r=null==(t=this._fullReader)?void 0:t.filename)?r:null,contentLength:null!=(i=null==(n=this._fullReader)?void 0:n.contentLength)?i:null}});return(0,r._)(this,sc).set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.destroyed){for(let e of(await this.messageHandler.sendWithPromise("Cleanup",null),(0,r._)(this,sd).values()))if(!e.cleanup())throw Error("startCleanup: Page ".concat(e.pageNumber," is currently rendering."));this.commonObjs.clear(),e||this.fontLoader.clear(),(0,r._)(this,sc).clear(),this.filterFactory.destroy(!0),oP.cleanup()}}cachedPageNumber(e){var t;if(!oJ(e))return null;let n=0===e.gen?"".concat(e.num,"R"):"".concat(e.num,"R").concat(e.gen);return null!=(t=(0,r._)(this,sp).get(n))?t:null}constructor(e,t,n,r,a){(0,l._)(this,sm),(0,i._)(this,sc,{writable:!0,value:new Map}),(0,i._)(this,sd,{writable:!0,value:new Map}),(0,i._)(this,sh,{writable:!0,value:new Map}),(0,i._)(this,sp,{writable:!0,value:new Map}),(0,i._)(this,sf,{writable:!0,value:null}),this.messageHandler=e,this.loadingTask=t,this.commonObjs=new sw,this.fontLoader=new im({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=a.canvasFactory,this.filterFactory=a.filterFactory,this.cMapReaderFactory=a.cMapReaderFactory,this.standardFontDataFactory=a.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}}function sv(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=(0,r._)(this,sc).get(e);if(n)return n;let i=this.messageHandler.sendWithPromise(e,t);return(0,r._)(this,sc).set(e,i),i}let sy=Symbol("INITIAL_DATA");var sb=new WeakMap,sx=new WeakSet;class sw{get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t){let n=(0,s._)(this,sx,sk).call(this,e);return n.promise.then(()=>t(n.data)),null}let n=(0,r._)(this,sb)[e];if(!n||n.data===sy)throw Error("Requesting object that isn't resolved yet ".concat(e,"."));return n.data}has(e){let t=(0,r._)(this,sb)[e];return!!t&&t.data!==sy}delete(e){let t=(0,r._)(this,sb)[e];return!!t&&t.data!==sy&&(delete(0,r._)(this,sb)[e],!0)}resolve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=(0,s._)(this,sx,sk).call(this,e);n.data=t,n.resolve()}clear(){for(let t in(0,r._)(this,sb)){var e;let{data:n}=(0,r._)(this,sb)[t];null==n||null==(e=n.bitmap)||e.close()}(0,a._)(this,sb,Object.create(null))}*[Symbol.iterator](){for(let e in(0,r._)(this,sb)){let{data:t}=(0,r._)(this,sb)[e];t!==sy&&(yield[e,t])}}constructor(){(0,l._)(this,sx),(0,i._)(this,sb,{writable:!0,value:Object.create(null)})}}function sk(e){var t;return(t=(0,r._)(this,sb))[e]||(t[e]={...Promise.withResolvers(),data:sy})}var sS=new WeakMap;class s_{get promise(){return(0,r._)(this,sS).capability.promise}cancel(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;(0,r._)(this,sS).cancel(null,e)}get separateAnnots(){let{separateAnnots:e}=(0,r._)(this,sS).operatorList;if(!e)return!1;let{annotationCanvasMap:t}=(0,r._)(this,sS);return e.form||e.canvas&&(null==t?void 0:t.size)>0}constructor(e){(0,i._)(this,sS,{writable:!0,value:null}),(0,a._)(this,sS,e),this.onContinue=null}}var sC=new WeakMap;class sA{get completed(){return this.capability.promise.catch(function(){})}initializeGraphics(e){var t,n;let{transparency:r=!1,optionalContentConfig:i}=e;if(this.cancelled)return;if(this._canvas){if((0,u._)(sA,sA,sE).has(this._canvas))throw Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");(0,u._)(sA,sA,sE).add(this._canvas)}this._pdfBug&&(null==(t=globalThis.StepperManager)?void 0:t.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());let{canvasContext:a,viewport:o,transform:s,background:l}=this.params;this.gfx=new aI(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:i},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:s,viewport:o,transparency:r,background:l}),this.operatorListIdx=0,this.graphicsReady=!0,null==(n=this.graphicsReadyCallback)||n.call(this)}cancel(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.running=!1,this.cancelled=!0,null==(e=this.gfx)||e.endDrawing(),(0,r._)(this,sC)&&(window.cancelAnimationFrame((0,r._)(this,sC)),(0,a._)(this,sC,null)),(0,u._)(sA,sA,sE).delete(this._canvas),this.callback(t||new ed("Rendering cancelled, page ".concat(this._pageIndex+1),n))}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}null==(e=this.stepper)||e.updateOperatorList(this.operatorList),this.running||this._continue()}_continue(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?(0,a._)(this,sC,window.requestAnimationFrame(()=>{(0,a._)(this,sC,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){!this.cancelled&&(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),(0,u._)(sA,sA,sE).delete(this._canvas),this.callback())))}constructor({callback:e,params:t,objs:n,commonObjs:r,annotationCanvasMap:a,operatorList:o,pageIndex:s,canvasFactory:l,filterFactory:u,useRequestAnimationFrame:c=!1,pdfBug:d=!1,pageColors:h=null}){(0,i._)(this,sC,{writable:!0,value:null}),this.callback=e,this.params=t,this.objs=n,this.commonObjs=r,this.annotationCanvasMap=a,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=s,this.canvasFactory=l,this.filterFactory=u,this._pdfBug=d,this.pageColors=h,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===c&&"undefined"!=typeof window,this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new s_(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}}var sE={writable:!0,value:new WeakSet};let sT="4.10.38",sM="f9bea397f";function sI(e){return Math.floor(255*Math.max(0,Math.min(1,e))).toString(16).padStart(2,"0")}function sN(e){return Math.max(0,Math.min(255,255*e))}class sD{static CMYK_G(e){let[t,n,r,i]=e;return["G",1-Math.min(1,.3*t+.59*r+.11*n+i)]}static G_CMYK(e){let[t]=e;return["CMYK",0,0,0,1-t]}static G_RGB(e){let[t]=e;return["RGB",t,t,t]}static G_rgb(e){let[t]=e;return[t=sN(t),t,t]}static G_HTML(e){let[t]=e,n=sI(t);return"#".concat(n).concat(n).concat(n)}static RGB_G(e){let[t,n,r]=e;return["G",.3*t+.59*n+.11*r]}static RGB_rgb(e){return e.map(sN)}static RGB_HTML(e){return"#".concat(e.map(sI).join(""))}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB(e){let[t,n,r,i]=e;return["RGB",1-Math.min(1,t+i),1-Math.min(1,r+i),1-Math.min(1,n+i)]}static CMYK_rgb(e){let[t,n,r,i]=e;return[sN(1-Math.min(1,t+i)),sN(1-Math.min(1,r+i)),sN(1-Math.min(1,n+i))]}static CMYK_HTML(e){let t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK(e){let[t,n,r]=e,i=1-t,a=1-n,o=1-r,s=Math.min(i,a,o);return["CMYK",i,a,o,s]}}class sP{create(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e<=0||t<=0)throw Error("Invalid SVG dimensions");let r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),n||(r.setAttribute("width","".concat(e,"px")),r.setAttribute("height","".concat(t,"px"))),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox","0 0 ".concat(e," ").concat(t)),r}createElement(e){if("string"!=typeof e)throw Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){F("Abstract method `_createSVG` called.")}}class sR extends sP{_createSVG(e){return document.createElementNS(es,e)}}class sO{static setupStorage(e,t,n,r,i){let a=r.getValue(t,{value:null});switch(n.name){case"textarea":if(null!==a.value&&(e.textContent=a.value),"print"===i)break;e.addEventListener("input",e=>{r.setValue(t,{value:e.target.value})});break;case"input":if("radio"===n.attributes.type||"checkbox"===n.attributes.type){if(a.value===n.attributes.xfaOn?e.setAttribute("checked",!0):a.value===n.attributes.xfaOff&&e.removeAttribute("checked"),"print"===i)break;e.addEventListener("change",e=>{r.setValue(t,{value:e.target.checked?e.target.getAttribute("xfaOn"):e.target.getAttribute("xfaOff")})})}else{if(null!==a.value&&e.setAttribute("value",a.value),"print"===i)break;e.addEventListener("input",e=>{r.setValue(t,{value:e.target.value})})}break;case"select":if(null!==a.value)for(let t of(e.setAttribute("value",a.value),n.children))t.attributes.value===a.value?t.attributes.selected=!0:t.attributes.hasOwnProperty("selected")&&delete t.attributes.selected;e.addEventListener("input",e=>{let n=e.target.options,i=-1===n.selectedIndex?"":n[n.selectedIndex].value;r.setValue(t,{value:i})})}}static setAttributes(e){let{html:t,element:n,storage:r=null,intent:i,linkService:a}=e,{attributes:o}=n,s=t instanceof HTMLAnchorElement;for(let[e,n]of("radio"===o.type&&(o.name="".concat(o.name,"-").concat(i)),Object.entries(o)))if(null!=n)switch(e){case"class":n.length&&t.setAttribute(e,n.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",n);break;case"style":Object.assign(t.style,n);break;case"textContent":t.textContent=n;break;default:s&&("href"===e||"newWindow"===e)||t.setAttribute(e,n)}s&&a.addLinkAttributes(t,o.href,o.newWindow),r&&o.dataId&&this.setupStorage(t,o.dataId,n,r)}static render(e){let t=e.annotationStorage,n=e.linkService,r=e.xfaHtml,i=e.intent||"display",a=document.createElement(r.name);r.attributes&&this.setAttributes({html:a,element:r,intent:i,linkService:n});let o="richText"!==i,s=e.div;if(s.append(a),e.viewport){let t="matrix(".concat(e.viewport.transform.join(","),")");s.style.transform=t}o&&s.setAttribute("class","xfaLayer xfaFont");let l=[];if(0===r.children.length){if(r.value){let e=document.createTextNode(r.value);a.append(e),o&&oG.shouldBuildText(r.name)&&l.push(e)}return{textDivs:l}}let u=[[r,-1,a]];for(;u.length>0;){var c,d;let[e,r,a]=u.at(-1);if(r+1===e.children.length){u.pop();continue}let s=e.children[++u.at(-1)[1]];if(null===s)continue;let{name:h}=s;if("#text"===h){let e=document.createTextNode(s.value);l.push(e),a.append(e);continue}let p=(null==s||null==(c=s.attributes)?void 0:c.xmlns)?document.createElementNS(s.attributes.xmlns,h):document.createElement(h);if(a.append(p),s.attributes&&this.setAttributes({html:p,element:s,storage:t,intent:i,linkService:n}),(null==(d=s.children)?void 0:d.length)>0)u.push([s,-1,p]);else if(s.value){let e=document.createTextNode(s.value);o&&oG.shouldBuildText(h)&&l.push(e),p.append(e)}}for(let e of s.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))e.setAttribute("readOnly",!0);return{textDivs:l}}static update(e){let t="matrix(".concat(e.viewport.transform.join(","),")");e.div.style.transform=t,e.div.hidden=!1}}let sj=new WeakSet;function sF(e){return{width:e[2]-e[0],height:e[3]-e[1]}}class sL{static create(e){switch(e.data.annotationType){case M.LINK:return new sK(e);case M.TEXT:return new sJ(e);case M.WIDGET:switch(e.data.fieldType){case"Tx":return new s0(e);case"Btn":if(e.data.radioButton)return new s3(e);if(e.data.checkBox)return new s2(e);return new s5(e);case"Ch":return new s4(e);case"Sig":return new s1(e)}return new sQ(e);case M.POPUP:return new s9(e);case M.FREETEXT:return new lO(e);case M.LINE:return new lF(e);case M.SQUARE:return new lz(e);case M.CIRCLE:return new lU(e);case M.POLYLINE:return new lW(e);case M.CARET:return new lq(e);case M.INK:return new lY(e);case M.POLYGON:return new lV(e);case M.HIGHLIGHT:return new lZ(e);case M.UNDERLINE:return new lJ(e);case M.SQUIGGLY:return new lQ(e);case M.STRIKEOUT:return new l0(e);case M.STAMP:return new l1(e);case M.FILEATTACHMENT:return new l5(e);default:return new sW(e)}}}var sz=new WeakMap,sB=new WeakMap,sU=new WeakMap,sH=new WeakSet;class sW{static _hasPopupData(e){let{titleObj:t,contentsObj:n,richText:r}=e;return!!((null==t?void 0:t.str)||(null==n?void 0:n.str)||(null==r?void 0:r.str))}get _isEditable(){return this.data.isEditable}get hasPopupData(){return sW._hasPopupData(this.data)}updateEdited(e){var t;if(!this.container)return;(0,a._)(this,sz,(0,r._)(this,sz)||{rect:this.data.rect.slice(0)});let{rect:n}=e;n&&(0,s._)(this,sH,sV).call(this,n),null==(t=(0,r._)(this,sU))||t.popup.updateEdited(e)}resetEdited(){var e;(0,r._)(this,sz)&&((0,s._)(this,sH,sV).call(this,(0,r._)(this,sz).rect),null==(e=(0,r._)(this,sU))||e.popup.resetEdited(),(0,a._)(this,sz,null))}_createContainer(e){let{data:t,parent:{page:n,viewport:r}}=this,i=document.createElement("section");i.setAttribute("data-annotation-id",t.id),this instanceof sQ||(i.tabIndex=1e3);let{style:o}=i;if(o.zIndex=this.parent.zIndex++,t.alternativeText&&(i.title=t.alternativeText),t.noRotate&&i.classList.add("norotate"),!t.rect||this instanceof s9){let{rotation:e}=t;return t.hasOwnCanvas||0===e||this.setRotation(e,i),i}let{width:s,height:l}=sF(t.rect);if(!e&&t.borderStyle.width>0){o.borderWidth="".concat(t.borderStyle.width,"px");let e=t.borderStyle.horizontalCornerRadius,n=t.borderStyle.verticalCornerRadius;switch(e>0||n>0?o.borderRadius="calc(".concat(e,"px * var(--scale-factor)) / calc(").concat(n,"px * var(--scale-factor))"):this instanceof s3&&(o.borderRadius="calc(".concat(s,"px * var(--scale-factor)) / calc(").concat(l,"px * var(--scale-factor))")),t.borderStyle.style){case I.SOLID:o.borderStyle="solid";break;case I.DASHED:o.borderStyle="dashed";break;case I.BEVELED:j("Unimplemented border style: beveled");break;case I.INSET:j("Unimplemented border style: inset");break;case I.UNDERLINE:o.borderBottomStyle="solid"}let r=t.borderColor||null;r?((0,a._)(this,sB,!0),o.borderColor=ee.makeHexColor(0|r[0],0|r[1],0|r[2])):o.borderWidth=0}let u=ee.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:c,pageHeight:d,pageX:h,pageY:p}=r.rawDims;o.left="".concat(100*(u[0]-h)/c,"%"),o.top="".concat(100*(u[1]-p)/d,"%");let{rotation:f}=t;return t.hasOwnCanvas||0===f?(o.width="".concat(100*s/c,"%"),o.height="".concat(100*l/d,"%")):this.setRotation(f,i),i}setRotation(e){let t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.container;if(!this.data.rect)return;let{pageWidth:i,pageHeight:a}=this.parent.viewport.rawDims,{width:o,height:s}=sF(this.data.rect);e%180==0?(t=100*o/i,n=100*s/a):(t=100*s/i,n=100*o/a),r.style.width="".concat(t,"%"),r.style.height="".concat(n,"%"),r.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){let e=(e,t,n)=>{let r=n.detail[e],i=r[0],a=r.slice(1);n.target.style[t]=sD["".concat(i,"_HTML")](a),this.annotationStorage.setValue(this.data.id,{[t]:sD["".concat(i,"_rgb")](a)})};return B(this,"_commonActions",{display:e=>{let{display:t}=e.detail,n=t%2==1;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:n,noPrint:1===t||2===t})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{let{hidden:t}=e.detail;this.container.style.visibility=t?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:t,noView:t})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:e=>{let t=e.detail.rotation;this.setRotation(t),this.annotationStorage.setValue(this.data.id,{rotation:t})}})}_dispatchEventFromSandbox(e,t){let n=this._commonActions;for(let r of Object.keys(t.detail)){let i=e[r]||n[r];null==i||i(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;let t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;let n=this._commonActions;for(let[r,i]of Object.entries(t)){let a=n[r];a&&(a({detail:{[r]:i},target:e}),delete t[r])}}_createQuadrilaterals(){let e;if(!this.container)return;let{quadPoints:t}=this.data;if(!t)return;let[n,i,a,o]=this.data.rect.map(e=>Math.fround(e));if(8===t.length){let[e,r,s,l]=t.subarray(2,6);if(a===e&&o===r&&n===s&&i===l)return}let{style:s}=this.container;if((0,r._)(this,sB)){let{borderColor:t,borderWidth:n}=s;s.borderWidth=0,e=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">','<g fill="transparent" stroke="'.concat(t,'" stroke-width="').concat(n,'">')],this.container.classList.add("hasBorder")}let l=a-n,u=o-i,{svgFactory:c}=this,d=c.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0);let h=c.createElement("defs");d.append(h);let p=c.createElement("clipPath"),f="clippath_".concat(this.data.id);p.setAttribute("id",f),p.setAttribute("clipPathUnits","objectBoundingBox"),h.append(p);for(let r=2,i=t.length;r<i;r+=8){let i=t[r],a=t[r+1],s=t[r+2],d=t[r+3],h=c.createElement("rect"),f=(s-n)/l,m=(o-a)/u,g=(i-s)/l,y=(a-d)/u;h.setAttribute("x",f),h.setAttribute("y",m),h.setAttribute("width",g),h.setAttribute("height",y),p.append(h),null==e||e.push('<rect vector-effect="non-scaling-stroke" x="'.concat(f,'" y="').concat(m,'" width="').concat(g,'" height="').concat(y,'"/>'))}(0,r._)(this,sB)&&(e.push("</g></svg>')"),s.backgroundImage=e.join("")),this.container.append(d),this.container.style.clipPath="url(#".concat(f,")")}_createPopup(){let{data:e}=this,t=(0,a._)(this,sU,new s9({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:"popup_".concat(e.id),rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(t.render())}render(){F("Abstract method `AnnotationElement.render` called")}_getElementsByName(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=[];if(this._fieldObjects){let r=this._fieldObjects[e];if(r)for(let{page:e,id:i,exportValues:a}of r){if(-1===e||i===t)continue;let r="string"==typeof a?a:null,o=document.querySelector('[data-element-id="'.concat(i,'"]'));if(o&&!sj.has(o)){j("_getElementsByName - element not allowed: ".concat(i));continue}n.push({id:i,exportValue:r,domElement:o})}return n}for(let r of document.getElementsByName(e)){let{exportValue:e}=r,i=r.getAttribute("data-element-id");i!==t&&sj.has(r)&&n.push({id:i,exportValue:e,domElement:r})}return n}show(){var e;this.container&&(this.container.hidden=!1),null==(e=this.popup)||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),null==(e=this.popup)||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){let e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(let t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;let{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var n;null==(n=this.linkService.eventBus)||n.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}constructor(e,{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:r=!1}={}){(0,l._)(this,sH),(0,i._)(this,sz,{writable:!0,value:null}),(0,i._)(this,sB,{writable:!0,value:!1}),(0,i._)(this,sU,{writable:!0,value:null}),this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(n)),r&&this._createQuadrilaterals()}}function sV(e){let{container:{style:t},data:{rect:n,rotation:r},parent:{viewport:{rawDims:{pageWidth:i,pageHeight:a,pageX:o,pageY:s}}}}=this;null==n||n.splice(0,4,...e);let{width:l,height:u}=sF(e);t.left="".concat(100*(e[0]-o)/i,"%"),t.top="".concat(100*(a-e[3]+s)/a,"%"),0===r?(t.width="".concat(100*l/i,"%"),t.height="".concat(100*u/a,"%")):this.setRotation(r)}var sq=new WeakSet,sG=new WeakSet,s$=new WeakSet;class sK extends sW{render(){let{data:e,linkService:t}=this,n=document.createElement("a");n.setAttribute("data-element-id",e.id);let r=!1;return e.url?(t.addLinkAttributes(n,e.url,e.newWindow),r=!0):e.action?(this._bindNamedAction(n,e.action),r=!0):e.attachment?((0,s._)(this,sG,sX).call(this,n,e.attachment,e.attachmentDest),r=!0):e.setOCGState?((0,s._)(this,s$,sZ).call(this,n,e.setOCGState),r=!0):e.dest?(this._bindLink(n,e.dest),r=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,e),r=!0),e.resetForm?(this._bindResetFormAction(n,e.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(n,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(n),this.container}_bindLink(e,t){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||""===t)&&(0,s._)(this,sq,sY).call(this)}_bindNamedAction(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),(0,s._)(this,sq,sY).call(this)}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");let n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(let r of Object.keys(t.actions)){let i=n.get(r);i&&(e[i]=()=>{var e;return null==(e=this.linkService.eventBus)||e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:r}}),!1})}e.onclick||(e.onclick=()=>!1),(0,s._)(this,sq,sY).call(this)}_bindResetFormAction(e,t){let n=e.onclick;if(n||(e.href=this.linkService.getAnchorUrl("")),(0,s._)(this,sq,sY).call(this),!this._fieldObjects){j('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),n||(e.onclick=()=>!1);return}e.onclick=()=>{null==n||n();let{fields:e,refs:r,include:i}=t,a=[];if(0!==e.length||0!==r.length){let t=new Set(r);for(let n of e)for(let{id:e}of this._fieldObjects[n]||[])t.add(e);for(let e of Object.values(this._fieldObjects))for(let n of e)t.has(n.id)===i&&a.push(n)}else for(let e of Object.values(this._fieldObjects))a.push(...e);let o=this.annotationStorage,s=[];for(let e of a){let{id:t}=e;switch(s.push(t),e.type){case"text":{let n=e.defaultValue||"";o.setValue(t,{value:n});break}case"checkbox":case"radiobutton":{let n=e.defaultValue===e.exportValues;o.setValue(t,{value:n});break}case"combobox":case"listbox":{let n=e.defaultValue||"";o.setValue(t,{value:n});break}default:continue}let n=document.querySelector('[data-element-id="'.concat(t,'"]'));if(n){if(!sj.has(n)){j("_bindResetFormAction - element not allowed: ".concat(t));continue}n.dispatchEvent(new Event("resetform"))}}if(this.enableScripting){var l;null==(l=this.linkService.eventBus)||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:s,name:"ResetForm"}})}return!1}}constructor(e,t=null){super(e,{isRenderable:!0,ignoreBorder:!!(null==t?void 0:t.ignoreBorder),createQuadrilaterals:!0}),(0,l._)(this,sq),(0,l._)(this,sG),(0,l._)(this,s$),this.isTooltipOnly=e.data.isTooltipOnly}}function sY(){this.container.setAttribute("data-internal-link","")}function sX(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.href=this.linkService.getAnchorUrl(""),t.description&&(e.title=t.description),e.onclick=()=>{var e;return null==(e=this.downloadManager)||e.openOrDownloadData(t.content,t.filename,n),!1},(0,s._)(this,sq,sY).call(this)}function sZ(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),(0,s._)(this,sq,sY).call(this)}class sJ extends sW{render(){this.container.classList.add("textAnnotation");let e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}constructor(e){super(e,{isRenderable:!0})}}class sQ extends sW{render(){return this.container}showElementAndHideCanvas(e){if(this.data.hasOwnCanvas){var t;(null==(t=e.previousSibling)?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1}}_getKeyModifier(e){return J.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,r,i){n.includes("mouse")?e.addEventListener(n,e=>{var t;null==(t=this.linkService.eventBus)||t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:i(e),shift:e.shiftKey,modifier:this._getKeyModifier(e)}})}):e.addEventListener(n,e=>{var a;if("blur"===n){if(!t.focused||!e.relatedTarget)return;t.focused=!1}else if("focus"===n){if(t.focused)return;t.focused=!0}i&&(null==(a=this.linkService.eventBus)||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:i(e)}}))})}_setEventListeners(e,t,n,r){for(let[s,l]of n){var i,a,o;("Action"===l||(null==(i=this.data.actions)?void 0:i[l]))&&(("Focus"===l||"Blur"===l)&&(t||(t={focused:!1})),this._setEventListener(e,t,s,l,r),"Focus"!==l||(null==(a=this.data.actions)?void 0:a.Blur)?"Blur"!==l||(null==(o=this.data.actions)?void 0:o.Focus)||this._setEventListener(e,t,"focus","Focus",null):this._setEventListener(e,t,"blur","Blur",null))}}_setBackgroundColor(e){let t=this.data.backgroundColor||null;e.style.backgroundColor=null===t?"transparent":ee.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){let t,{fontColor:n}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||9,i=e.style,a=e=>Math.round(10*e)/10;if(this.data.multiLine){let e=Math.abs(this.data.rect[3]-this.data.rect[1]-2),n=Math.round(e/(1.35*r))||1;t=Math.min(r,a(e/n/1.35))}else t=Math.min(r,a(Math.abs(this.data.rect[3]-this.data.rect[1]-2)/1.35));i.fontSize="calc(".concat(t,"px * var(--scale-factor))"),i.color=ee.makeHexColor(n[0],n[1],n[2]),null!==this.data.textAlignment&&(i.textAlign=["left","center","right"][this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class s0 extends sQ{setPropertyOnSiblings(e,t,n,r){let i=this.annotationStorage;for(let a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[t]=n),i.setValue(a.id,{[r]:n})}render(){let e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){var r,i;let a=e.getValue(t,{value:this.data.fieldValue}),o=a.value||"",s=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;s&&o.length>s&&(o=o.slice(0,s));let l=a.formattedValue||(null==(r=this.data.textContent)?void 0:r.join("\n"))||null;l&&this.data.comb&&(l=l.replaceAll(/\s+/g,""));let u={userValue:o,formattedValue:l,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?((n=document.createElement("textarea")).textContent=null!=l?l:o,this.data.doNotScroll&&(n.style.overflowY="hidden")):((n=document.createElement("input")).type="text",n.setAttribute("value",null!=l?l:o),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),sj.add(n),n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=1e3,this._setRequired(n,this.data.required),s&&(n.maxLength=s),n.addEventListener("input",r=>{e.setValue(t,{value:r.target.value}),this.setPropertyOnSiblings(n,"value",r.target.value,"value"),u.formattedValue=null}),n.addEventListener("resetform",e=>{var t;let r=null!=(t=this.data.defaultFieldValue)?t:"";n.value=u.userValue=r,u.formattedValue=null});let c=e=>{let{formattedValue:t}=u;null!=t&&(e.target.value=t),e.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",e=>{var t;if(u.focused)return;let{target:n}=e;u.userValue&&(n.value=u.userValue),u.lastCommittedValue=n.value,u.commitKey=1,(null==(t=this.data.actions)?void 0:t.Focus)||(u.focused=!0)}),n.addEventListener("updatefromsandbox",n=>{this.showElementAndHideCanvas(n.target),this._dispatchEventFromSandbox({value(n){var r;u.userValue=null!=(r=n.detail.value)?r:"",e.setValue(t,{value:u.userValue.toString()}),n.target.value=u.userValue},formattedValue(n){let{formattedValue:r}=n.detail;u.formattedValue=r,null!=r&&n.target!==document.activeElement&&(n.target.value=r),e.setValue(t,{formattedValue:r})},selRange(e){e.target.setSelectionRange(...e.detail.selRange)},charLimit:n=>{var r;let{charLimit:i}=n.detail,{target:a}=n;if(0===i)return void a.removeAttribute("maxLength");a.setAttribute("maxLength",i);let o=u.userValue;o&&!(o.length<=i)&&(a.value=u.userValue=o=o.slice(0,i),e.setValue(t,{value:o}),null==(r=this.linkService.eventBus)||r.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:o,willCommit:!0,commitKey:1,selStart:a.selectionStart,selEnd:a.selectionEnd}}))}},n)}),n.addEventListener("keydown",e=>{var n;u.commitKey=1;let r=-1;if("Escape"===e.key?r=0:"Enter"!==e.key||this.data.multiLine?"Tab"===e.key&&(u.commitKey=3):r=2,-1===r)return;let{value:i}=e.target;u.lastCommittedValue!==i&&(u.lastCommittedValue=i,u.userValue=i,null==(n=this.linkService.eventBus)||n.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:i,willCommit:!0,commitKey:r,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}}))});let r=c;c=null,n.addEventListener("blur",e=>{var n,i;if(!u.focused||!e.relatedTarget)return;(null==(n=this.data.actions)?void 0:n.Blur)||(u.focused=!1);let{value:a}=e.target;u.userValue=a,u.lastCommittedValue!==a&&(null==(i=this.linkService.eventBus)||i.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:a,willCommit:!0,commitKey:u.commitKey,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}})),r(e)}),(null==(i=this.data.actions)?void 0:i.Keystroke)&&n.addEventListener("beforeinput",e=>{var n;u.lastCommittedValue=null;let{data:r,target:i}=e,{value:a,selectionStart:o,selectionEnd:s}=i,l=o,c=s;switch(e.inputType){case"deleteWordBackward":{let e=a.substring(0,o).match(/\w*[^\w]*$/);e&&(l-=e[0].length);break}case"deleteWordForward":{let e=a.substring(o).match(/^[^\w]*\w*/);e&&(c+=e[0].length);break}case"deleteContentBackward":o===s&&(l-=1);break;case"deleteContentForward":o===s&&(c+=1)}e.preventDefault(),null==(n=this.linkService.eventBus)||n.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:a,change:r||"",willCommit:!1,selStart:l,selEnd:c}})}),this._setEventListeners(n,u,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],e=>e.target.value)}if(c&&n.addEventListener("blur",c),this.data.comb){let e=(this.data.rect[2]-this.data.rect[0])/s;n.classList.add("comb"),n.style.letterSpacing="calc(".concat(e,"px * var(--scale-factor) - 1ch)")}}else(n=document.createElement("div")).textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}constructor(e){super(e,{isRenderable:e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue})}}class s1 extends sQ{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class s2 extends sQ{render(){let e=this.annotationStorage,t=this.data,n=t.id,r=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;"string"==typeof r&&(r="Off"!==r,e.setValue(n,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");let i=document.createElement("input");return sj.add(i),i.setAttribute("data-element-id",n),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="checkbox",i.name=t.fieldName,r&&i.setAttribute("checked",!0),i.setAttribute("exportValue",t.exportValue),i.tabIndex=1e3,i.addEventListener("change",r=>{let{name:i,checked:a}=r.target;for(let r of this._getElementsByName(i,n)){let n=a&&r.exportValue===t.exportValue;r.domElement&&(r.domElement.checked=n),e.setValue(r.id,{value:n})}e.setValue(n,{value:a})}),i.addEventListener("resetform",e=>{let n=t.defaultFieldValue||"Off";e.target.checked=n===t.exportValue}),this.enableScripting&&this.hasJSActions&&(i.addEventListener("updatefromsandbox",t=>{this._dispatchEventFromSandbox({value(t){t.target.checked="Off"!==t.detail.value,e.setValue(n,{value:t.target.checked})}},t)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],e=>e.target.checked)),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}constructor(e){super(e,{isRenderable:e.renderForms})}}class s3 extends sQ{render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");let e=this.annotationStorage,t=this.data,n=t.id,r=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if("string"==typeof r&&(r=r!==t.buttonValue,e.setValue(n,{value:r})),r)for(let r of this._getElementsByName(t.fieldName,n))e.setValue(r.id,{value:!1});let i=document.createElement("input");if(sj.add(i),i.setAttribute("data-element-id",n),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="radio",i.name=t.fieldName,r&&i.setAttribute("checked",!0),i.tabIndex=1e3,i.addEventListener("change",t=>{let{name:r,checked:i}=t.target;for(let t of this._getElementsByName(r,n))e.setValue(t.id,{value:!1});e.setValue(n,{value:i})}),i.addEventListener("resetform",e=>{let n=t.defaultFieldValue;e.target.checked=null!=n&&n===t.buttonValue}),this.enableScripting&&this.hasJSActions){let r=t.buttonValue;i.addEventListener("updatefromsandbox",t=>{this._dispatchEventFromSandbox({value:t=>{let i=r===t.detail.value;for(let r of this._getElementsByName(t.target.name)){let t=i&&r.id===n;r.domElement&&(r.domElement.checked=t),e.setValue(r.id,{value:t})}}},t)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],e=>e.target.checked)}return this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}constructor(e){super(e,{isRenderable:e.renderForms})}}class s5 extends sK{render(){let e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");let t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",e=>{this._dispatchEventFromSandbox({},e)})),e}constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}}class s4 extends sQ{render(){this.container.classList.add("choiceWidgetAnnotation");let e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),r=document.createElement("select");sj.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=1e3;let i=this.data.combo&&this.data.options.length>0;for(let e of(!this.data.combo&&(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",e=>{let t=this.data.defaultFieldValue;for(let e of r.options)e.selected=e.value===t}),this.data.options)){let t=document.createElement("option");t.textContent=e.displayValue,t.value=e.exportValue,n.value.includes(e.exportValue)&&(t.setAttribute("selected",!0),i=!1),r.append(t)}let a=null;if(i){let e=document.createElement("option");e.value=" ",e.setAttribute("hidden",!0),e.setAttribute("selected",!0),r.prepend(e),a=()=>{e.remove(),r.removeEventListener("input",a),a=null},r.addEventListener("input",a)}let o=e=>{let t=e?"value":"textContent",{options:n,multiple:i}=r;return i?Array.prototype.filter.call(n,e=>e.selected).map(e=>e[t]):-1===n.selectedIndex?null:n[n.selectedIndex][t]},s=o(!1),l=e=>{let t=e.target.options;return Array.prototype.map.call(t,e=>({displayValue:e.textContent,exportValue:e.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({value(n){null==a||a();let i=n.detail.value,l=new Set(Array.isArray(i)?i:[i]);for(let e of r.options)e.selected=l.has(e.value);e.setValue(t,{value:o(!0)}),s=o(!1)},multipleSelection(e){r.multiple=!0},remove(n){let i=r.options,a=n.detail.remove;i[a].selected=!1,r.remove(a),i.length>0&&-1===Array.prototype.findIndex.call(i,e=>e.selected)&&(i[0].selected=!0),e.setValue(t,{value:o(!0),items:l(n)}),s=o(!1)},clear(n){for(;0!==r.length;)r.remove(0);e.setValue(t,{value:null,items:[]}),s=o(!1)},insert(n){let{index:i,displayValue:a,exportValue:u}=n.detail.insert,c=r.children[i],d=document.createElement("option");d.textContent=a,d.value=u,c?c.before(d):r.append(d),e.setValue(t,{value:o(!0),items:l(n)}),s=o(!1)},items(n){let{items:i}=n.detail;for(;0!==r.length;)r.remove(0);for(let e of i){let{displayValue:t,exportValue:n}=e,i=document.createElement("option");i.textContent=t,i.value=n,r.append(i)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(t,{value:o(!0),items:l(n)}),s=o(!1)},indices(n){let r=new Set(n.detail.indices);for(let e of n.target.options)e.selected=r.has(e.index);e.setValue(t,{value:o(!0)}),s=o(!1)},editable(e){e.target.disabled=!e.detail.editable}},n)}),r.addEventListener("input",n=>{var r;let i=o(!0),a=o(!1);e.setValue(t,{value:i}),n.preventDefault(),null==(r=this.linkService.eventBus)||r.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:s,change:a,changeEx:i,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],e=>e.target.value)):r.addEventListener("input",function(n){e.setValue(t,{value:o(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}constructor(e){super(e,{isRenderable:e.renderForms})}}class s9 extends sW{render(){this.container.classList.add("popupAnnotation");let e=this.popup=new lC({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(let n of this.elements)n.popup=e,n.container.ariaHasPopup="dialog",t.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(e=>"".concat(eo).concat(e)).join(",")),this.container}constructor(e){let{data:t,elements:n}=e;super(e,{isRenderable:sW._hasPopupData(t)}),this.elements=n,this.popup=null}}var s8=new WeakMap,s6=new WeakMap,s7=new WeakMap,le=new WeakMap,lt=new WeakMap,ln=new WeakMap,lr=new WeakMap,li=new WeakMap,la=new WeakMap,lo=new WeakMap,ls=new WeakMap,ll=new WeakMap,lu=new WeakMap,lc=new WeakMap,ld=new WeakMap,lh=new WeakMap,lp=new WeakMap,lf=new WeakMap,lm=new WeakMap,lg=new WeakMap,lv=new WeakMap,ly=new WeakMap,lb=new WeakSet,lx=new WeakSet,lw=new WeakSet,lk=new WeakSet,lS=new WeakSet,l_=new WeakSet;class lC{render(){if((0,r._)(this,lu))return;let e=(0,a._)(this,lu,document.createElement("div"));if(e.className="popup",(0,r._)(this,lt)){let t=e.style.outlineColor=ee.makeHexColor(...(0,r._)(this,lt));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor="color-mix(in srgb, ".concat(t," 30%, white)"):e.style.backgroundColor=ee.makeHexColor(...(0,r._)(this,lt).map(e=>Math.floor(.7*(255-e)+e)))}let t=document.createElement("span");t.className="header";let n=document.createElement("h1");if(t.append(n),{dir:n.dir,str:n.textContent}=(0,r._)(this,lp),e.append(t),(0,r._)(this,li)){let e=document.createElement("span");e.classList.add("popupDate"),e.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),e.setAttribute("data-l10n-args",JSON.stringify({dateObj:(0,r._)(this,li).valueOf()})),t.append(e)}let i=(0,r._)(this,lg);if(i)sO.render({xfaHtml:i,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{let t=this._formatContents((0,r._)(this,lr));e.append(t)}(0,r._)(this,ln).append(e)}_formatContents(e){let{str:t,dir:n}=e,r=document.createElement("p");r.classList.add("popupContent"),r.dir=n;let i=t.split(/(?:\r\n?|\n)/);for(let e=0,t=i.length;e<t;++e){let n=i[e];r.append(document.createTextNode(n)),e<t-1&&r.append(document.createElement("br"))}return r}updateEdited(e){var t;let{rect:n,popupContent:i}=e;(0,a._)(this,lf,(0,r._)(this,lf)||{contentsObj:(0,r._)(this,lr),richText:(0,r._)(this,lh)}),n&&(0,a._)(this,lc,null),i&&((0,a._)(this,lh,(0,s._)(this,lb,lM).call(this,i)),(0,a._)(this,lr,null)),null==(t=(0,r._)(this,lu))||t.remove(),(0,a._)(this,lu,null)}resetEdited(){var e;(0,r._)(this,lf)&&({contentsObj:(0,p._)(this,lr).value,richText:(0,p._)(this,lh).value}=(0,r._)(this,lf),(0,a._)(this,lf,null),null==(e=(0,r._)(this,lu))||e.remove(),(0,a._)(this,lu,null),(0,a._)(this,lc,null))}forceHide(){(0,a._)(this,lm,this.isVisible),(0,r._)(this,lm)&&((0,r._)(this,ln).hidden=!0)}maybeShow(){(0,r._)(this,lm)&&((0,r._)(this,lu)||(0,s._)(this,lS,lP).call(this),(0,a._)(this,lm,!1),(0,r._)(this,ln).hidden=!1)}get isVisible(){return!1===(0,r._)(this,ln).hidden}constructor({container:e,color:t,elements:n,titleObj:o,modificationDate:u,contentsObj:c,richText:d,parent:h,rect:p,parentRect:f,open:m}){for(let m of((0,i._)(this,lg,{get:lA,set:void 0}),(0,i._)(this,lv,{get:lE,set:void 0}),(0,i._)(this,ly,{get:lT,set:void 0}),(0,l._)(this,lb),(0,l._)(this,lx),(0,l._)(this,lw),(0,l._)(this,lk),(0,l._)(this,lS),(0,l._)(this,l_),(0,i._)(this,s8,{writable:!0,value:(0,s._)(this,lx,lI).bind(this)}),(0,i._)(this,s6,{writable:!0,value:(0,s._)(this,l_,lR).bind(this)}),(0,i._)(this,s7,{writable:!0,value:(0,s._)(this,lS,lP).bind(this)}),(0,i._)(this,le,{writable:!0,value:(0,s._)(this,lk,lD).bind(this)}),(0,i._)(this,lt,{writable:!0,value:null}),(0,i._)(this,ln,{writable:!0,value:null}),(0,i._)(this,lr,{writable:!0,value:null}),(0,i._)(this,li,{writable:!0,value:null}),(0,i._)(this,la,{writable:!0,value:null}),(0,i._)(this,lo,{writable:!0,value:null}),(0,i._)(this,ls,{writable:!0,value:null}),(0,i._)(this,ll,{writable:!0,value:!1}),(0,i._)(this,lu,{writable:!0,value:null}),(0,i._)(this,lc,{writable:!0,value:null}),(0,i._)(this,ld,{writable:!0,value:null}),(0,i._)(this,lh,{writable:!0,value:null}),(0,i._)(this,lp,{writable:!0,value:null}),(0,i._)(this,lf,{writable:!0,value:null}),(0,i._)(this,lm,{writable:!0,value:!1}),(0,a._)(this,ln,e),(0,a._)(this,lp,o),(0,a._)(this,lr,c),(0,a._)(this,lh,d),(0,a._)(this,lo,h),(0,a._)(this,lt,t),(0,a._)(this,ld,p),(0,a._)(this,ls,f),(0,a._)(this,la,n),(0,a._)(this,li,ex.toDateObject(u)),this.trigger=n.flatMap(e=>e.getElementsToTriggerPopup()),this.trigger))m.addEventListener("click",(0,r._)(this,le)),m.addEventListener("mouseenter",(0,r._)(this,s7)),m.addEventListener("mouseleave",(0,r._)(this,s6)),m.classList.add("popupTriggerArea");for(let e of n){var g;null==(g=e.container)||g.addEventListener("keydown",(0,r._)(this,s8))}(0,r._)(this,ln).hidden=!0,m&&(0,s._)(this,lk,lD).call(this)}}function lA(){let e=(0,r._)(this,lh),t=(0,r._)(this,lr);return(null==e?void 0:e.str)&&(!(null==t?void 0:t.str)||t.str===e.str)&&(0,r._)(this,lh).html||null}function lE(){var e,t,n;return(null==(n=(0,r._)(this,lg))||null==(t=n.attributes)||null==(e=t.style)?void 0:e.fontSize)||0}function lT(){var e,t,n;return(null==(n=(0,r._)(this,lg))||null==(t=n.attributes)||null==(e=t.style)?void 0:e.color)||null}function lM(e){let t=[],n={style:{color:(0,r._)(this,ly),fontSize:(0,r._)(this,lv)?"calc(".concat((0,r._)(this,lv),"px * var(--scale-factor))"):""}};for(let r of e.split("\n"))t.push({name:"span",value:r,attributes:n});return{str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}}}function lI(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||("Enter"===e.key||"Escape"===e.key&&(0,r._)(this,ll))&&(0,s._)(this,lk,lD).call(this)}function lN(){if(null!==(0,r._)(this,lc))return;let{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:i,pageY:o}}}=(0,r._)(this,lo),s=!!(0,r._)(this,ls),l=s?(0,r._)(this,ls):(0,r._)(this,ld);for(let e of(0,r._)(this,la))if(!l||null!==ee.intersect(e.data.rect,l)){l=e.data.rect,s=!0;break}let u=ee.normalizeRect([l[0],e[3]-l[1]+e[1],l[2],e[3]-l[3]+e[1]]),c=s?l[2]-l[0]+5:0,d=u[0]+c,h=u[1];(0,a._)(this,lc,[100*(d-i)/t,100*(h-o)/n]);let{style:p}=(0,r._)(this,ln);p.left="".concat((0,r._)(this,lc)[0],"%"),p.top="".concat((0,r._)(this,lc)[1],"%")}function lD(){(0,a._)(this,ll,!(0,r._)(this,ll)),(0,r._)(this,ll)?((0,s._)(this,lS,lP).call(this),(0,r._)(this,ln).addEventListener("click",(0,r._)(this,le)),(0,r._)(this,ln).addEventListener("keydown",(0,r._)(this,s8))):((0,s._)(this,l_,lR).call(this),(0,r._)(this,ln).removeEventListener("click",(0,r._)(this,le)),(0,r._)(this,ln).removeEventListener("keydown",(0,r._)(this,s8)))}function lP(){(0,r._)(this,lu)||this.render(),this.isVisible?(0,r._)(this,ll)&&(0,r._)(this,ln).classList.add("focused"):((0,s._)(this,lw,lN).call(this),(0,r._)(this,ln).hidden=!1,(0,r._)(this,ln).style.zIndex=parseInt((0,r._)(this,ln).style.zIndex)+1e3)}function lR(){(0,r._)(this,ln).classList.remove("focused"),!(0,r._)(this,ll)&&this.isVisible&&((0,r._)(this,ln).hidden=!0,(0,r._)(this,ln).style.zIndex=parseInt((0,r._)(this,ln).style.zIndex)-1e3)}class lO extends sW{render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){let e=document.createElement("div");for(let t of(e.classList.add("annotationTextContent"),e.setAttribute("role","comment"),this.textContent)){let n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=_.FREETEXT}}var lj=new WeakMap;class lF extends sW{render(){this.container.classList.add("lineAnnotation");let e=this.data,{width:t,height:n}=sF(e.rect),r=this.svgFactory.create(t,n,!0),i=(0,a._)(this,lj,this.svgFactory.createElement("svg:line"));return i.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),i.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),i.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),i.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),i.setAttribute("stroke-width",e.borderStyle.width||1),i.setAttribute("stroke","transparent"),i.setAttribute("fill","transparent"),r.append(i),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return(0,r._)(this,lj)}addHighlightArea(){this.container.classList.add("highlightArea")}constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),(0,i._)(this,lj,{writable:!0,value:null})}}var lL=new WeakMap;class lz extends sW{render(){this.container.classList.add("squareAnnotation");let e=this.data,{width:t,height:n}=sF(e.rect),r=this.svgFactory.create(t,n,!0),i=e.borderStyle.width,o=(0,a._)(this,lL,this.svgFactory.createElement("svg:rect"));return o.setAttribute("x",i/2),o.setAttribute("y",i/2),o.setAttribute("width",t-i),o.setAttribute("height",n-i),o.setAttribute("stroke-width",i||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return(0,r._)(this,lL)}addHighlightArea(){this.container.classList.add("highlightArea")}constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),(0,i._)(this,lL,{writable:!0,value:null})}}var lB=new WeakMap;class lU extends sW{render(){this.container.classList.add("circleAnnotation");let e=this.data,{width:t,height:n}=sF(e.rect),r=this.svgFactory.create(t,n,!0),i=e.borderStyle.width,o=(0,a._)(this,lB,this.svgFactory.createElement("svg:ellipse"));return o.setAttribute("cx",t/2),o.setAttribute("cy",n/2),o.setAttribute("rx",t/2-i/2),o.setAttribute("ry",n/2-i/2),o.setAttribute("stroke-width",i||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return(0,r._)(this,lB)}addHighlightArea(){this.container.classList.add("highlightArea")}constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),(0,i._)(this,lB,{writable:!0,value:null})}}var lH=new WeakMap;class lW extends sW{render(){this.container.classList.add(this.containerClassName);let{data:{rect:e,vertices:t,borderStyle:n,popupRef:r}}=this;if(!t)return this.container;let{width:i,height:o}=sF(e),s=this.svgFactory.create(i,o,!0),l=[];for(let n=0,r=t.length;n<r;n+=2){let r=t[n]-e[0],i=e[3]-t[n+1];l.push("".concat(r,",").concat(i))}l=l.join(" ");let u=(0,a._)(this,lH,this.svgFactory.createElement(this.svgElementName));return u.setAttribute("points",l),u.setAttribute("stroke-width",n.width||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),s.append(u),this.container.append(s),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return(0,r._)(this,lH)}addHighlightArea(){this.container.classList.add("highlightArea")}constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),(0,i._)(this,lH,{writable:!0,value:null}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}}class lV extends lW{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class lq extends sW{render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}}var lG=new WeakMap,l$=new WeakMap,lK=new WeakSet;class lY extends sW{render(){this.container.classList.add(this.containerClassName);let{data:{rect:e,rotation:t,inkLists:n,borderStyle:i,popupRef:o}}=this,{transform:l,width:u,height:c}=(0,s._)(this,lK,lX).call(this,t,e),d=this.svgFactory.create(u,c,!0),h=(0,a._)(this,lG,this.svgFactory.createElement("svg:g"));d.append(h),h.setAttribute("stroke-width",i.width||1),h.setAttribute("stroke-linecap","round"),h.setAttribute("stroke-linejoin","round"),h.setAttribute("stroke-miterlimit",10),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),h.setAttribute("transform",l);for(let e=0,t=n.length;e<t;e++){let t=this.svgFactory.createElement(this.svgElementName);(0,r._)(this,l$).push(t),t.setAttribute("points",n[e].join(",")),h.append(t)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(d),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);let{thickness:t,points:n,rect:i}=e,a=(0,r._)(this,lG);if(t>=0&&a.setAttribute("stroke-width",t||1),n)for(let e=0,t=(0,r._)(this,l$).length;e<t;e++)(0,r._)(this,l$)[e].setAttribute("points",n[e].join(","));if(i){let{transform:e,width:t,height:n}=(0,s._)(this,lK,lX).call(this,this.data.rotation,i);a.parentElement.setAttribute("viewBox","0 0 ".concat(t," ").concat(n)),a.setAttribute("transform",e)}}getElementsToTriggerPopup(){return(0,r._)(this,l$)}addHighlightArea(){this.container.classList.add("highlightArea")}constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),(0,l._)(this,lK),(0,i._)(this,lG,{writable:!0,value:null}),(0,i._)(this,l$,{writable:!0,value:[]}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType="InkHighlight"===this.data.it?_.HIGHLIGHT:_.INK}}function lX(e,t){switch(e){case 90:return{transform:"rotate(90) translate(".concat(-t[0],",").concat(t[1],") scale(1,-1)"),width:t[3]-t[1],height:t[2]-t[0]};case 180:return{transform:"rotate(180) translate(".concat(-t[2],",").concat(t[1],") scale(1,-1)"),width:t[2]-t[0],height:t[3]-t[1]};case 270:return{transform:"rotate(270) translate(".concat(-t[2],",").concat(t[3],") scale(1,-1)"),width:t[3]-t[1],height:t[2]-t[0]};default:return{transform:"translate(".concat(-t[0],",").concat(t[3],") scale(1,-1)"),width:t[2]-t[0],height:t[3]-t[1]}}}class lZ extends sW{render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=_.HIGHLIGHT}}class lJ extends sW{render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}}class lQ extends sW{render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}}class l0 extends sW{render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}}class l1 extends sW{render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=_.STAMP}}var l2=new WeakMap,l3=new WeakSet;class l5 extends sW{render(){let e;this.container.classList.add("fileAttachmentAnnotation");let{container:t,data:n}=this;n.hasAppearance||0===n.fillAlpha?e=document.createElement("div"):((e=document.createElement("img")).src="".concat(this.imageResourcesPath,"annotation-").concat(/paperclip/i.test(n.name)?"paperclip":"pushpin",".svg"),n.fillAlpha&&n.fillAlpha<1&&(e.style="filter: opacity(".concat(Math.round(100*n.fillAlpha),"%);"))),e.addEventListener("dblclick",(0,s._)(this,l3,l4).bind(this)),(0,a._)(this,l2,e);let{isMac:r}=J.platform;return t.addEventListener("keydown",e=>{"Enter"===e.key&&(r?e.metaKey:e.ctrlKey)&&(0,s._)(this,l3,l4).call(this)}),!n.popupRef&&this.hasPopupData?this._createPopup():e.classList.add("popupTriggerArea"),t.append(e),t}getElementsToTriggerPopup(){return(0,r._)(this,l2)}addHighlightArea(){this.container.classList.add("highlightArea")}constructor(e){var t;super(e,{isRenderable:!0}),(0,l._)(this,l3),(0,i._)(this,l2,{writable:!0,value:null});let{file:n}=this.data;this.filename=n.filename,this.content=n.content,null==(t=this.linkService.eventBus)||t.dispatch("fileattachmentannotation",{source:this,...n})}}function l4(){var e;null==(e=this.downloadManager)||e.openOrDownloadData(this.content,this.filename)}var l9=new WeakMap,l8=new WeakMap,l6=new WeakMap,l7=new WeakMap,ue=new WeakSet,ut=new WeakSet;class un{hasEditableAnnotations(){return(0,r._)(this,l6).size>0}async render(e){let{annotations:t}=e,n=this.div;eA(n,this.viewport);let i=new Map,a={data:null,layer:n,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:!1!==e.renderForms,svgFactory:new sR,annotationStorage:e.annotationStorage||new iu,enableScripting:!0===e.enableScripting,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(let e of t){if(e.noHTML)continue;let t=e.annotationType===M.POPUP;if(t){let t=i.get(e.id);if(!t)continue;a.elements=t}else{let{width:t,height:n}=sF(e.rect);if(t<=0||n<=0)continue}a.data=e;let n=sL.create(a);if(!n.isRenderable)continue;if(!t&&e.popupRef){let t=i.get(e.popupRef);t?t.push(n):i.set(e.popupRef,[n])}let l=n.render();if(e.hidden&&(l.style.visibility="hidden"),await (0,s._)(this,ue,ur).call(this,l,e.id),n._isEditable){var o;(0,r._)(this,l6).set(n.data.id,n),null==(o=this._annotationEditorUIManager)||o.renderAnnotationElement(n)}}(0,s._)(this,ut,ui).call(this)}update(e){let{viewport:t}=e,n=this.div;this.viewport=t,eA(n,{rotation:t.rotation}),(0,s._)(this,ut,ui).call(this),n.hidden=!1}getEditableAnnotations(){return Array.from((0,r._)(this,l6).values())}getEditableAnnotation(e){return(0,r._)(this,l6).get(e)}constructor({div:e,accessibilityManager:t,annotationCanvasMap:n,annotationEditorUIManager:r,page:o,viewport:s,structTreeLayer:u}){(0,l._)(this,ue),(0,l._)(this,ut),(0,i._)(this,l9,{writable:!0,value:null}),(0,i._)(this,l8,{writable:!0,value:null}),(0,i._)(this,l6,{writable:!0,value:new Map}),(0,i._)(this,l7,{writable:!0,value:null}),this.div=e,(0,a._)(this,l9,t),(0,a._)(this,l8,n),(0,a._)(this,l7,u||null),this.page=o,this.viewport=s,this.zIndex=0,this._annotationEditorUIManager=r}}async function ur(e,t){var n,i;let a=e.firstChild||e,o=a.id="".concat(eo).concat(t),s=await (null==(n=(0,r._)(this,l7))?void 0:n.getAriaAttributes(o));if(s)for(let[e,t]of s)a.setAttribute(e,t);this.div.append(e),null==(i=(0,r._)(this,l9))||i.moveElementInDOM(this.div,e,a,!1)}function ui(){if(!(0,r._)(this,l8))return;let e=this.div;for(let[t,n]of(0,r._)(this,l8)){let r=e.querySelector('[data-annotation-id="'.concat(t,'"]'));if(!r)continue;n.className="annotationContent";let{firstChild:i}=r;i?"CANVAS"===i.nodeName?i.replaceWith(n):i.classList.contains("annotationContent")?i.after(n):i.before(n):r.append(n)}(0,r._)(this,l8).clear()}let ua=/\r\n?|\n/g;var uo=new WeakMap,us=new WeakMap,ul=new WeakMap,uu=new WeakMap,uc=new WeakMap,ud=new WeakSet,uh=new WeakSet,up=new WeakSet,uf=new WeakSet,um=new WeakSet,ug=new WeakSet,uv=new WeakSet;class uy extends rq{static get _keyboardManager(){let e=uy.prototype,t=e=>e.isEmpty(),n=nu.TRANSLATE_SMALL,r=nu.TRANSLATE_BIG;return B(this,"_keyboardManager",new ts([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-n,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[n,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[r,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-n],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,n],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,r],checker:t}]]))}static initialize(e,t){rq.initialize(e,t);let n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case C.FREETEXT_SIZE:uy._defaultFontSize=t;break;case C.FREETEXT_COLOR:uy._defaultColor=t}}updateParams(e,t){switch(e){case C.FREETEXT_SIZE:(0,s._)(this,ud,ub).call(this,t);break;case C.FREETEXT_COLOR:(0,s._)(this,uh,ux).call(this,t)}}static get defaultPropertiesToUpdate(){return[[C.FREETEXT_SIZE,uy._defaultFontSize],[C.FREETEXT_COLOR,uy._defaultColor||rq._defaultLineColor]]}get propertiesToUpdate(){return[[C.FREETEXT_SIZE,(0,r._)(this,uc)],[C.FREETEXT_COLOR,(0,r._)(this,uo)]]}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){let e=this.parentScale;return[-uy._internalPadding*e,-(uy._internalPadding+(0,r._)(this,uc))*e]}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(_.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),(0,a._)(this,uu,new AbortController);let e=this._uiManager.combinedSignal((0,r._)(this,uu));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e})}disableEditMode(){var e;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",(0,r._)(this,ul)),this._isDraggable=!0,null==(e=(0,r._)(this,uu))||e.abort(),(0,a._)(this,uu,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var t;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),(null==(t=this._initialOptions)?void 0:t.isCentered)&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();let e=(0,r._)(this,us),t=(0,a._)(this,us,(0,s._)(this,up,uw).call(this).trimEnd());if(e===t)return;let n=e=>{if((0,a._)(this,us,e),!e)return void this.remove();(0,s._)(this,um,u_).call(this),this._uiManager.rebuild(this),(0,s._)(this,uf,uk).call(this)};this.addCommands({cmd:()=>{n(t)},undo:()=>{n(e)},mustExec:!1}),(0,s._)(this,uf,uk).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&"Enter"===e.key&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){uy._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){let e,t;if(this.div)return this.div;this.width&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",(0,r._)(this,ul)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;let{style:n}=this.editorDiv;if(n.fontSize="calc(".concat((0,r._)(this,uc),"px * var(--scale-factor))"),n.color=(0,r._)(this,uo),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),e2(this,this.div,["dblclick","keydown"]),this.width){let[n,r]=this.parentDimensions;if(this.annotationElementId){let i,a,{position:o}=this._initialData,[s,l]=this.getInitialTranslation();[s,l]=this.pageTranslationToScreen(s,l);let[u,c]=this.pageDimensions,[d,h]=this.pageTranslation;switch(this.rotation){case 0:i=e+(o[0]-d)/u,a=t+this.height-(o[1]-h)/c;break;case 90:i=e+(o[0]-d)/u,a=t-(o[1]-h)/c,[s,l]=[l,-s];break;case 180:i=e-this.width+(o[0]-d)/u,a=t-(o[1]-h)/c,[s,l]=[-s,-l];break;case 270:i=e+(o[0]-d-this.height*c)/u,a=t+(o[1]-h-this.width*u)/c,[s,l]=[-l,s]}this.setAt(i*n,a*r,s,l)}else this.setAt(e*n,t*r,this.width*n,this.height*r);(0,s._)(this,um,u_).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){let t=e.clipboardData||window.clipboardData,{types:n}=t;if(1===n.length&&"text/plain"===n[0])return;e.preventDefault();let r=(0,f._)(uy,uy,uA).call(uy,t.getData("text")||"").replaceAll(ua,"\n");if(!r)return;let i=window.getSelection();if(!i.rangeCount)return;this.editorDiv.normalize(),i.deleteFromDocument();let o=i.getRangeAt(0);if(!r.includes("\n")){o.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),i.collapseToStart();return}let{startContainer:l,startOffset:u}=o,c=[],d=[];if(l.nodeType===Node.TEXT_NODE){let e=l.parentElement;if(d.push(l.nodeValue.slice(u).replaceAll(ua,"")),e!==this.editorDiv){let t=c;for(let n of this.editorDiv.childNodes){if(n===e){t=d;continue}t.push((0,f._)(uy,uy,uS).call(uy,n))}}c.push(l.nodeValue.slice(0,u).replaceAll(ua,""))}else if(l===this.editorDiv){let e=c,t=0;for(let n of this.editorDiv.childNodes)t++===u&&(e=d),e.push((0,f._)(uy,uy,uS).call(uy,n))}(0,a._)(this,us,"".concat(c.join("\n")).concat(r).concat(d.join("\n"))),(0,s._)(this,um,u_).call(this);let h=new Range,p=c.reduce((e,t)=>e+t.length,0);for(let{firstChild:e}of this.editorDiv.childNodes)if(e.nodeType===Node.TEXT_NODE){let t=e.nodeValue.length;if(p<=t){h.setStart(e,p),h.setEnd(e,p);break}p-=t}i.removeAllRanges(),i.addRange(h)}get contentDiv(){return this.editorDiv}static async deserialize(e,t,n){let r=null;if(e instanceof lO){let{data:{defaultAppearanceData:{fontSize:t,fontColor:n},rect:i,rotation:a,id:o,popupRef:s},textContent:l,textPosition:u,parent:{page:{pageNumber:c}}}=e;if(!l||0===l.length)return null;r=e={annotationType:_.FREETEXT,color:Array.from(n),fontSize:t,value:l.join("\n"),position:u,pageIndex:c-1,rect:i.slice(0),rotation:a,id:o,deleted:!1,popupRef:s}}let i=await super.deserialize(e,t,n);return(0,a._)(i,uc,e.fontSize),(0,a._)(i,uo,ee.makeHexColor(...e.color)),(0,a._)(i,us,(0,f._)(uy,uy,uA).call(uy,e.value)),i.annotationElementId=e.id||null,i._initialData=r,i}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();let t=uy._internalPadding*this.parentScale,n=this.getRect(t,t),i=rq._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:(0,r._)(this,uo)),a={annotationType:_.FREETEXT,color:i,fontSize:(0,r._)(this,uc),value:(0,s._)(this,ug,uC).call(this),pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?a:this.annotationElementId&&!(0,s._)(this,uv,uE).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(e){let t=super.renderAnnotationElement(e);if(this.deleted)return t;let{style:n}=t;for(let e of(n.fontSize="calc(".concat((0,r._)(this,uc),"px * var(--scale-factor))"),n.color=(0,r._)(this,uo),t.replaceChildren(),(0,r._)(this,us).split("\n"))){let n=document.createElement("div");n.append(e?document.createTextNode(e):document.createElement("br")),t.append(n)}let i=uy._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(i,i),popupContent:(0,r._)(this,us)}),t}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}constructor(e){super({...e,name:"freeTextEditor"}),(0,l._)(this,ud),(0,l._)(this,uh),(0,l._)(this,up),(0,l._)(this,uf),(0,l._)(this,um),(0,l._)(this,ug),(0,l._)(this,uv),(0,i._)(this,uo,{writable:!0,value:void 0}),(0,i._)(this,us,{writable:!0,value:""}),(0,i._)(this,ul,{writable:!0,value:"".concat(this.id,"-editor")}),(0,i._)(this,uu,{writable:!0,value:null}),(0,i._)(this,uc,{writable:!0,value:void 0}),(0,a._)(this,uo,e.color||uy._defaultColor||rq._defaultLineColor),(0,a._)(this,uc,e.fontSize||uy._defaultFontSize)}}function ub(e){let t=e=>{this.editorDiv.style.fontSize="calc(".concat(e,"px * var(--scale-factor))"),this.translate(0,-(e-(0,r._)(this,uc))*this.parentScale),(0,a._)(this,uc,e),(0,s._)(this,uf,uk).call(this)},n=(0,r._)(this,uc);this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:C.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}function ux(e){let t=e=>{(0,a._)(this,uo,this.editorDiv.style.color=e)},n=(0,r._)(this,uo);this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:C.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function uw(){let e=[];this.editorDiv.normalize();let t=null;for(let n of this.editorDiv.childNodes)((null==t?void 0:t.nodeType)!==Node.TEXT_NODE||"BR"!==n.nodeName)&&(e.push((0,f._)(uy,uy,uS).call(uy,n)),t=n);return e.join("\n")}function uk(){let e,[t,n]=this.parentDimensions;if(this.isAttachedToDOM)e=this.div.getBoundingClientRect();else{let{currentLayer:t,div:n}=this,r=n.style.display,i=n.classList.contains("hidden");n.classList.remove("hidden"),n.style.display="hidden",t.div.append(this.div),e=n.getBoundingClientRect(),n.remove(),n.style.display=r,n.classList.toggle("hidden",i)}this.rotation%180==this.parentRotation%180?(this.width=e.width/t,this.height=e.height/n):(this.width=e.height/t,this.height=e.width/n),this.fixAndSetPosition()}function uS(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(ua,"")}function u_(){if(this.editorDiv.replaceChildren(),(0,r._)(this,us))for(let e of(0,r._)(this,us).split("\n")){let t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}function uC(){return(0,r._)(this,us).replaceAll(""," ")}function uA(e){return e.replaceAll(" ","")}function uE(e){let{value:t,fontSize:n,color:r,pageIndex:i}=this._initialData;return this._hasBeenMoved||e.value!==t||e.fontSize!==n||e.color.some((e,t)=>e!==r[t])||e.pageIndex!==i}(0,h._)(uy,"_freeTextDefaultContent",""),(0,h._)(uy,"_internalPadding",0),(0,h._)(uy,"_defaultColor",null),(0,h._)(uy,"_defaultFontSize",10),(0,h._)(uy,"_type","freetext"),(0,h._)(uy,"_editorType",_.FREETEXT);class uT{toSVGPath(){F("Abstract method `toSVGPath` must be implemented.")}get box(){F("Abstract getter `box` must be implemented.")}serialize(e,t){F("Abstract method `serialize` must be implemented.")}static _rescale(e,t,n,r,i,a){a||(a=new Float32Array(e.length));for(let o=0,s=e.length;o<s;o+=2)a[o]=t+e[o]*r,a[o+1]=n+e[o+1]*i;return a}static _rescaleAndSwap(e,t,n,r,i,a){a||(a=new Float32Array(e.length));for(let o=0,s=e.length;o<s;o+=2)a[o]=t+e[o+1]*r,a[o+1]=n+e[o]*i;return a}static _translate(e,t,n,r){r||(r=new Float32Array(e.length));for(let i=0,a=e.length;i<a;i+=2)r[i]=t+e[i],r[i+1]=n+e[i+1];return r}static svgRound(e){return Math.round(1e4*e)}static _normalizePoint(e,t,n,r,i){switch(i){case 90:return[1-t/n,e/r];case 180:return[1-e/n,1-t/r];case 270:return[t/n,1-e/r];default:return[e/n,t/r]}}static _normalizePagePoint(e,t,n){switch(n){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,n,r,i,a){return[(e+5*n)/6,(t+5*r)/6,(5*n+i)/6,(5*r+a)/6,(n+i)/2,(r+a)/2]}}(0,h._)(uT,"PRECISION",1e-4);var uM=new WeakMap,uI=new WeakMap,uN=new WeakMap,uD=new WeakMap,uP=new WeakMap,uR=new WeakMap,uO=new WeakMap,uj=new WeakMap,uF=new WeakMap,uL=new WeakMap,uz=new WeakMap,uB=new WeakMap,uU=new WeakMap,uH=new WeakSet,uW=new WeakSet,uV=new WeakSet,uq=new WeakSet,uG=new WeakSet,u$=new WeakSet,uK=new WeakSet;class uY{isEmpty(){return isNaN((0,r._)(this,uR)[8])}add(e){var t;let{x:n,y:i}=e;(0,a._)(this,uO,n),(0,a._)(this,uj,i);let[o,s,l,u]=(0,r._)(this,uM),[c,d,h,p]=(0,r._)(this,uR).subarray(8,12),f=n-h,m=i-p,g=Math.hypot(f,m);if(g<(0,r._)(this,uF))return!1;let y=g-(0,r._)(this,uL),b=y/g,x=b*f,w=b*m,k=c,S=d;c=h,d=p,h+=x,p+=w,null==(t=(0,r._)(this,uU))||t.push(n,i);let _=-w/y*(0,r._)(this,uB),C=x/y*(0,r._)(this,uB);return((0,r._)(this,uR).set((0,r._)(this,uR).subarray(2,8),0),(0,r._)(this,uR).set([h+_,p+C],4),(0,r._)(this,uR).set((0,r._)(this,uR).subarray(14,18),12),(0,r._)(this,uR).set([h-_,p-C],16),isNaN((0,r._)(this,uR)[6]))?(0===(0,r._)(this,uP).length&&((0,r._)(this,uR).set([c+_,d+C],2),(0,r._)(this,uP).push(NaN,NaN,NaN,NaN,(c+_-o)/l,(d+C-s)/u),(0,r._)(this,uR).set([c-_,d-C],14),(0,r._)(this,uI).push(NaN,NaN,NaN,NaN,(c-_-o)/l,(d-C-s)/u)),(0,r._)(this,uR).set([k,S,c,d,h,p],6),!this.isEmpty()):(((0,r._)(this,uR).set([k,S,c,d,h,p],6),Math.abs(Math.atan2(S-d,k-c)-Math.atan2(w,x))<Math.PI/2)?([c,d,h,p]=(0,r._)(this,uR).subarray(2,6),(0,r._)(this,uP).push(NaN,NaN,NaN,NaN,((c+h)/2-o)/l,((d+p)/2-s)/u),[c,d,k,S]=(0,r._)(this,uR).subarray(14,18),(0,r._)(this,uI).push(NaN,NaN,NaN,NaN,((k+c)/2-o)/l,((S+d)/2-s)/u)):([k,S,c,d,h,p]=(0,r._)(this,uR).subarray(0,6),(0,r._)(this,uP).push(((k+5*c)/6-o)/l,((S+5*d)/6-s)/u,((5*c+h)/6-o)/l,((5*d+p)/6-s)/u,((c+h)/2-o)/l,((d+p)/2-s)/u),[h,p,c,d,k,S]=(0,r._)(this,uR).subarray(12,18),(0,r._)(this,uI).push(((k+5*c)/6-o)/l,((S+5*d)/6-s)/u,((5*c+h)/6-o)/l,((5*d+p)/6-s)/u,((c+h)/2-o)/l,((d+p)/2-s)/u)),!0)}toSVGPath(){if(this.isEmpty())return"";let e=(0,r._)(this,uP),t=(0,r._)(this,uI);if(isNaN((0,r._)(this,uR)[6])&&!this.isEmpty())return(0,s._)(this,uW,uQ).call(this);let n=[];n.push("M".concat(e[4]," ").concat(e[5]));for(let t=6;t<e.length;t+=6)isNaN(e[t])?n.push("L".concat(e[t+4]," ").concat(e[t+5])):n.push("C".concat(e[t]," ").concat(e[t+1]," ").concat(e[t+2]," ").concat(e[t+3]," ").concat(e[t+4]," ").concat(e[t+5]));(0,s._)(this,uq,u1).call(this,n);for(let e=t.length-6;e>=6;e-=6)isNaN(t[e])?n.push("L".concat(t[e+4]," ").concat(t[e+5])):n.push("C".concat(t[e]," ").concat(t[e+1]," ").concat(t[e+2]," ").concat(t[e+3]," ").concat(t[e+4]," ").concat(t[e+5]));return(0,s._)(this,uV,u0).call(this,n),n.join(" ")}newFreeDrawOutline(e,t,n,r,i,a){return new cr(e,t,n,r,i,a)}getOutlines(){var e,t;let n=(0,r._)(this,uP),i=(0,r._)(this,uI),a=(0,r._)(this,uR),[o,l,u,c]=(0,r._)(this,uM),d=new Float32Array((null!=(t=null==(e=(0,r._)(this,uU))?void 0:e.length)?t:0)+2);for(let e=0,t=d.length-2;e<t;e+=2)d[e]=((0,r._)(this,uU)[e]-o)/u,d[e+1]=((0,r._)(this,uU)[e+1]-l)/c;if(d[d.length-2]=((0,r._)(this,uO)-o)/u,d[d.length-1]=((0,r._)(this,uj)-l)/c,isNaN(a[6])&&!this.isEmpty())return(0,s._)(this,uG,u2).call(this,d);let h=new Float32Array((0,r._)(this,uP).length+24+(0,r._)(this,uI).length),p=n.length;for(let e=0;e<p;e+=2){if(isNaN(n[e])){h[e]=h[e+1]=NaN;continue}h[e]=n[e],h[e+1]=n[e+1]}p=(0,s._)(this,uK,u5).call(this,h,p);for(let e=i.length-6;e>=6;e-=6)for(let t=0;t<6;t+=2){if(isNaN(i[e+t])){h[p]=h[p+1]=NaN,p+=2;continue}h[p]=i[e+t],h[p+1]=i[e+t+1],p+=2}return(0,s._)(this,u$,u3).call(this,h,p),this.newFreeDrawOutline(h,d,(0,r._)(this,uM),(0,r._)(this,uz),(0,r._)(this,uN),(0,r._)(this,uD))}constructor({x:e,y:t},n,o,s,c,d=0){(0,l._)(this,uH),(0,l._)(this,uW),(0,l._)(this,uV),(0,l._)(this,uq),(0,l._)(this,uG),(0,l._)(this,u$),(0,l._)(this,uK),(0,i._)(this,uM,{writable:!0,value:void 0}),(0,i._)(this,uI,{writable:!0,value:[]}),(0,i._)(this,uN,{writable:!0,value:void 0}),(0,i._)(this,uD,{writable:!0,value:void 0}),(0,i._)(this,uP,{writable:!0,value:[]}),(0,i._)(this,uR,{writable:!0,value:new Float32Array(18)}),(0,i._)(this,uO,{writable:!0,value:void 0}),(0,i._)(this,uj,{writable:!0,value:void 0}),(0,i._)(this,uF,{writable:!0,value:void 0}),(0,i._)(this,uL,{writable:!0,value:void 0}),(0,i._)(this,uz,{writable:!0,value:void 0}),(0,i._)(this,uB,{writable:!0,value:void 0}),(0,i._)(this,uU,{writable:!0,value:[]}),(0,a._)(this,uM,n),(0,a._)(this,uB,s*o),(0,a._)(this,uD,c),(0,r._)(this,uR).set([NaN,NaN,NaN,NaN,e,t],6),(0,a._)(this,uN,d),(0,a._)(this,uL,(0,u._)(uY,uY,uX)*o),(0,a._)(this,uF,(0,u._)(uY,uY,uZ)*o),(0,a._)(this,uz,o),(0,r._)(this,uU).push(e,t)}}var uX={writable:!0,value:8},uZ={writable:!0,value:(0,u._)(uY,uY,uX)+(0,u._)(uY,uY,{writable:!0,value:2})};function uJ(){let e=(0,r._)(this,uR).subarray(4,6),t=(0,r._)(this,uR).subarray(16,18),[n,i,a,o]=(0,r._)(this,uM);return[((0,r._)(this,uO)+(e[0]-t[0])/2-n)/a,((0,r._)(this,uj)+(e[1]-t[1])/2-i)/o,((0,r._)(this,uO)+(t[0]-e[0])/2-n)/a,((0,r._)(this,uj)+(t[1]-e[1])/2-i)/o]}function uQ(){let[e,t,n,i]=(0,r._)(this,uM),[a,o,l,u]=(0,s._)(this,uH,uJ).call(this);return"M".concat(((0,r._)(this,uR)[2]-e)/n," ").concat(((0,r._)(this,uR)[3]-t)/i," L").concat(((0,r._)(this,uR)[4]-e)/n," ").concat(((0,r._)(this,uR)[5]-t)/i," L").concat(a," ").concat(o," L").concat(l," ").concat(u," L").concat(((0,r._)(this,uR)[16]-e)/n," ").concat(((0,r._)(this,uR)[17]-t)/i," L").concat(((0,r._)(this,uR)[14]-e)/n," ").concat(((0,r._)(this,uR)[15]-t)/i," Z")}function u0(e){let t=(0,r._)(this,uI);e.push("L".concat(t[4]," ").concat(t[5]," Z"))}function u1(e){let[t,n,i,a]=(0,r._)(this,uM),o=(0,r._)(this,uR).subarray(4,6),l=(0,r._)(this,uR).subarray(16,18),[u,c,d,h]=(0,s._)(this,uH,uJ).call(this);e.push("L".concat((o[0]-t)/i," ").concat((o[1]-n)/a," L").concat(u," ").concat(c," L").concat(d," ").concat(h," L").concat((l[0]-t)/i," ").concat((l[1]-n)/a))}function u2(e){let t=(0,r._)(this,uR),[n,i,a,o]=(0,r._)(this,uM),[l,u,c,d]=(0,s._)(this,uH,uJ).call(this),h=new Float32Array(36);return h.set([NaN,NaN,NaN,NaN,(t[2]-n)/a,(t[3]-i)/o,NaN,NaN,NaN,NaN,(t[4]-n)/a,(t[5]-i)/o,NaN,NaN,NaN,NaN,l,u,NaN,NaN,NaN,NaN,c,d,NaN,NaN,NaN,NaN,(t[16]-n)/a,(t[17]-i)/o,NaN,NaN,NaN,NaN,(t[14]-n)/a,(t[15]-i)/o],0),this.newFreeDrawOutline(h,e,(0,r._)(this,uM),(0,r._)(this,uz),(0,r._)(this,uN),(0,r._)(this,uD))}function u3(e,t){let n=(0,r._)(this,uI);return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],t),t+6}function u5(e,t){let n=(0,r._)(this,uR).subarray(4,6),i=(0,r._)(this,uR).subarray(16,18),[a,o,l,u]=(0,r._)(this,uM),[c,d,h,p]=(0,s._)(this,uH,uJ).call(this);return e.set([NaN,NaN,NaN,NaN,(n[0]-a)/l,(n[1]-o)/u,NaN,NaN,NaN,NaN,c,d,NaN,NaN,NaN,NaN,h,p,NaN,NaN,NaN,NaN,(i[0]-a)/l,(i[1]-o)/u],t),t+24}var u4=new WeakMap,u9=new WeakMap,u8=new WeakMap,u6=new WeakMap,u7=new WeakMap,ce=new WeakMap,ct=new WeakMap,cn=new WeakSet;class cr extends uT{toSVGPath(){let e=["M".concat((0,r._)(this,ct)[4]," ").concat((0,r._)(this,ct)[5])];for(let t=6,n=(0,r._)(this,ct).length;t<n;t+=6){if(isNaN((0,r._)(this,ct)[t])){e.push("L".concat((0,r._)(this,ct)[t+4]," ").concat((0,r._)(this,ct)[t+5]));continue}e.push("C".concat((0,r._)(this,ct)[t]," ").concat((0,r._)(this,ct)[t+1]," ").concat((0,r._)(this,ct)[t+2]," ").concat((0,r._)(this,ct)[t+3]," ").concat((0,r._)(this,ct)[t+4]," ").concat((0,r._)(this,ct)[t+5]))}return e.push("Z"),e.join(" ")}serialize(e,t){let n,i,[a,o,s,l]=e,u=s-a,c=l-o;switch(t){case 0:n=uT._rescale((0,r._)(this,ct),a,l,u,-c),i=uT._rescale((0,r._)(this,u7),a,l,u,-c);break;case 90:n=uT._rescaleAndSwap((0,r._)(this,ct),a,o,u,c),i=uT._rescaleAndSwap((0,r._)(this,u7),a,o,u,c);break;case 180:n=uT._rescale((0,r._)(this,ct),s,o,-u,c),i=uT._rescale((0,r._)(this,u7),s,o,-u,c);break;case 270:n=uT._rescaleAndSwap((0,r._)(this,ct),s,l,-u,-c),i=uT._rescaleAndSwap((0,r._)(this,u7),s,l,-u,-c)}return{outline:Array.from(n),points:[Array.from(i)]}}get box(){return(0,r._)(this,u9)}newOutliner(e,t,n,r,i){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return new uY(e,t,n,r,i,a)}getNewOutline(e,t){let[n,i,a,o]=(0,r._)(this,u9),[s,l,u,c]=(0,r._)(this,u4),d=a*u,h=o*c,p=n*u+s,f=i*c+l,m=this.newOutliner({x:(0,r._)(this,u7)[0]*d+p,y:(0,r._)(this,u7)[1]*h+f},(0,r._)(this,u4),(0,r._)(this,ce),e,(0,r._)(this,u6),null!=t?t:(0,r._)(this,u8));for(let e=2;e<(0,r._)(this,u7).length;e+=2)m.add({x:(0,r._)(this,u7)[e]*d+p,y:(0,r._)(this,u7)[e+1]*h+f});return m.getOutlines()}constructor(e,t,n,o,u,c){super(),(0,l._)(this,cn),(0,i._)(this,u4,{writable:!0,value:void 0}),(0,i._)(this,u9,{writable:!0,value:new Float32Array(4)}),(0,i._)(this,u8,{writable:!0,value:void 0}),(0,i._)(this,u6,{writable:!0,value:void 0}),(0,i._)(this,u7,{writable:!0,value:void 0}),(0,i._)(this,ce,{writable:!0,value:void 0}),(0,i._)(this,ct,{writable:!0,value:void 0}),(0,a._)(this,ct,e),(0,a._)(this,u7,t),(0,a._)(this,u4,n),(0,a._)(this,ce,o),(0,a._)(this,u8,u),(0,a._)(this,u6,c),this.lastPoint=[NaN,NaN],(0,s._)(this,cn,ci).call(this,c);let[d,h,p,f]=(0,r._)(this,u9);for(let t=0,n=e.length;t<n;t+=2)e[t]=(e[t]-d)/p,e[t+1]=(e[t+1]-h)/f;for(let e=0,n=t.length;e<n;e+=2)t[e]=(t[e]-d)/p,t[e+1]=(t[e+1]-h)/f}}function ci(e){let t=(0,r._)(this,ct),n=t[4],i=t[5],a=n,o=i,s=n,l=i,u=n,c=i,d=e?Math.max:Math.min;for(let e=6,r=t.length;e<r;e+=6){if(isNaN(t[e]))a=Math.min(a,t[e+4]),o=Math.min(o,t[e+5]),s=Math.max(s,t[e+4]),l=Math.max(l,t[e+5]),c<t[e+5]?(u=t[e+4],c=t[e+5]):c===t[e+5]&&(u=d(u,t[e+4]));else{let r=ee.bezierBoundingBox(n,i,...t.slice(e,e+6));a=Math.min(a,r[0]),o=Math.min(o,r[1]),s=Math.max(s,r[2]),l=Math.max(l,r[3]),c<r[3]?(u=r[2],c=r[3]):c===r[3]&&(u=d(u,r[2]))}n=t[e+4],i=t[e+5]}let h=(0,r._)(this,u9);h[0]=a-(0,r._)(this,u8),h[1]=o-(0,r._)(this,u8),h[2]=s-a+2*(0,r._)(this,u8),h[3]=l-o+2*(0,r._)(this,u8),this.lastPoint=[u,c]}var ca=new WeakMap,co=new WeakMap,cs=new WeakMap,cl=new WeakMap,cu=new WeakSet,cc=new WeakSet,cd=new WeakSet,ch=new WeakSet,cp=new WeakSet;class cf{getOutlines(){(0,r._)(this,cs).sort((e,t)=>e[0]-t[0]||e[1]-t[1]||e[2]-t[2]);let e=[];for(let t of(0,r._)(this,cs))t[3]?(e.push(...(0,s._)(this,cp,cb).call(this,t)),(0,s._)(this,cd,cv).call(this,t)):((0,s._)(this,ch,cy).call(this,t),e.push(...(0,s._)(this,cp,cb).call(this,t)));return(0,s._)(this,cu,cm).call(this,e)}constructor(e,t=0,n=0,o=!0){(0,l._)(this,cu),(0,l._)(this,cc),(0,l._)(this,cd),(0,l._)(this,ch),(0,l._)(this,cp),(0,i._)(this,ca,{writable:!0,value:void 0}),(0,i._)(this,co,{writable:!0,value:void 0}),(0,i._)(this,cs,{writable:!0,value:[]}),(0,i._)(this,cl,{writable:!0,value:[]});let s=1/0,u=-1/0,c=1/0,d=-1/0;for(let{x:n,y:i,width:a,height:o}of e){let e=1e-4*Math.floor((n-t)/1e-4),l=1e-4*Math.ceil((n+a+t)/1e-4),h=1e-4*Math.floor((i-t)/1e-4),p=1e-4*Math.ceil((i+o+t)/1e-4),f=[e,h,p,!0],m=[l,h,p,!1];(0,r._)(this,cs).push(f,m),s=Math.min(s,e),u=Math.max(u,l),c=Math.min(c,h),d=Math.max(d,p)}let h=u-s+2*n,p=d-c+2*n,f=s-n,m=c-n,g=(0,r._)(this,cs).at(o?-1:-2),y=[g[0],g[2]];for(let e of(0,r._)(this,cs)){let[t,n,r]=e;e[0]=(t-f)/h,e[1]=(n-m)/p,e[2]=(r-m)/p}(0,a._)(this,ca,new Float32Array([f,m,h,p])),(0,a._)(this,co,y)}}function cm(e){let t,n=[],i=new Set;for(let t of e){let[e,r,i]=t;n.push([e,r,t],[e,i,t])}n.sort((e,t)=>e[1]-t[1]||e[0]-t[0]);for(let e=0,t=n.length;e<t;e+=2){let t=n[e][2],r=n[e+1][2];t.push(r),r.push(t),i.add(t),i.add(r)}let a=[];for(;i.size>0;){let e=i.values().next().value,[n,r,o,s,l]=e;i.delete(e);let u=n,c=r;for(t=[n,o],a.push(t);;){let e;if(i.has(s))e=s;else if(i.has(l))e=l;else break;i.delete(e),[n,r,o,s,l]=e,u!==n&&(t.push(u,c,n,c===r?r:o),u=n),c=c===r?o:r}t.push(u,c)}return new ck(a,(0,r._)(this,ca),(0,r._)(this,co))}function cg(e){let t=(0,r._)(this,cl),n=0,i=t.length-1;for(;n<=i;){let r=n+i>>1,a=t[r][0];if(a===e)return r;a<e?n=r+1:i=r-1}return i+1}function cv(e){let[,t,n]=e,i=(0,s._)(this,cc,cg).call(this,t);(0,r._)(this,cl).splice(i,0,[t,n])}function cy(e){let[,t,n]=e,i=(0,s._)(this,cc,cg).call(this,t);for(let e=i;e<(0,r._)(this,cl).length;e++){let[i,a]=(0,r._)(this,cl)[e];if(i!==t)break;if(i===t&&a===n)return void(0,r._)(this,cl).splice(e,1)}for(let e=i-1;e>=0;e--){let[i,a]=(0,r._)(this,cl)[e];if(i!==t)break;if(i===t&&a===n)return void(0,r._)(this,cl).splice(e,1)}}function cb(e){let[t,n,i]=e,a=[[t,n,i]],o=(0,s._)(this,cc,cg).call(this,i);for(let e=0;e<o;e++){let[n,i]=(0,r._)(this,cl)[e];for(let e=0,r=a.length;e<r;e++){let[,o,s]=a[e];if(!(i<=o)&&!(s<=n)){if(o>=n){if(s>i)a[e][1]=i;else{if(1===r)return[];a.splice(e,1),e--,r--}continue}a[e][2]=n,s>i&&a.push([t,i,s])}}}return a}var cx=new WeakMap,cw=new WeakMap;class ck extends uT{toSVGPath(){let e=[];for(let t of(0,r._)(this,cw)){let[n,r]=t;e.push("M".concat(n," ").concat(r));for(let i=2;i<t.length;i+=2){let a=t[i],o=t[i+1];a===n?(e.push("V".concat(o)),r=o):o===r&&(e.push("H".concat(a)),n=a)}e.push("Z")}return e.join(" ")}serialize(e,t){let[n,i,a,o]=e,s=[],l=a-n,u=o-i;for(let e of(0,r._)(this,cw)){let t=Array(e.length);for(let r=0;r<e.length;r+=2)t[r]=n+e[r]*l,t[r+1]=o-e[r+1]*u;s.push(t)}return s}get box(){return(0,r._)(this,cx)}get classNamesForOutlining(){return["highlightOutline"]}constructor(e,t,n){super(),(0,i._)(this,cx,{writable:!0,value:void 0}),(0,i._)(this,cw,{writable:!0,value:void 0}),(0,a._)(this,cw,e),(0,a._)(this,cx,t),this.lastPoint=n}}class cS extends uY{newFreeDrawOutline(e,t,n,r,i,a){return new c_(e,t,n,r,i,a)}}class c_ extends cr{newOutliner(e,t,n,r,i){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return new cS(e,t,n,r,i,a)}}var cC=new WeakMap,cA=new WeakMap,cE=new WeakMap,cT=new WeakMap,cM=new WeakMap,cI=new WeakMap,cN=new WeakMap,cD=new WeakMap,cP=new WeakMap,cR=new WeakMap,cO=new WeakMap,cj=new WeakSet,cF=new WeakSet,cL=new WeakSet,cz=new WeakSet,cB=new WeakSet,cU=new WeakMap;class cH{static get _keyboardManager(){return B(this,"_keyboardManager",new ts([[["Escape","mac+Escape"],cH.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],cH.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],cH.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],cH.prototype._moveToPrevious],[["Home","mac+Home"],cH.prototype._moveToBeginning],[["End","mac+End"],cH.prototype._moveToEnd]]))}renderButton(){let e=(0,a._)(this,cC,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);let t=(0,r._)(this,cR)._signal;e.addEventListener("click",(0,s._)(this,cz,c$).bind(this),{signal:t}),e.addEventListener("keydown",(0,s._)(this,cL,cG).bind(this),{signal:t});let n=(0,a._)(this,cA,document.createElement("span"));return n.className="swatch",n.setAttribute("aria-hidden",!0),n.style.backgroundColor=(0,r._)(this,cE),e.append(n),e}renderMainDropdown(){let e=(0,a._)(this,cT,(0,s._)(this,cj,cV).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===(0,r._)(this,cC))return void(0,s._)(this,cz,c$).call(this,e);let t=e.target.getAttribute("data-color");t&&(0,s._)(this,cF,cq).call(this,t,e)}_moveToNext(e){var t,n;if(!(0,r._)(this,cU))return void(0,s._)(this,cz,c$).call(this,e);if(e.target===(0,r._)(this,cC)){null==(n=(0,r._)(this,cT).firstChild)||n.focus();return}null==(t=e.target.nextSibling)||t.focus()}_moveToPrevious(e){var t,n;if(e.target===(null==(t=(0,r._)(this,cT))?void 0:t.firstChild)||e.target===(0,r._)(this,cC)){(0,r._)(this,cU)&&this._hideDropdownFromKeyboard();return}(0,r._)(this,cU)||(0,s._)(this,cz,c$).call(this,e),null==(n=e.target.previousSibling)||n.focus()}_moveToBeginning(e){var t;if(!(0,r._)(this,cU))return void(0,s._)(this,cz,c$).call(this,e);null==(t=(0,r._)(this,cT).firstChild)||t.focus()}_moveToEnd(e){var t;if(!(0,r._)(this,cU))return void(0,s._)(this,cz,c$).call(this,e);null==(t=(0,r._)(this,cT).lastChild)||t.focus()}hideDropdown(){var e,t;null==(e=(0,r._)(this,cT))||e.classList.add("hidden"),null==(t=(0,r._)(this,cP))||t.abort(),(0,a._)(this,cP,null)}_hideDropdownFromKeyboard(){if(!(0,r._)(this,cI)){if(!(0,r._)(this,cU)){var e;null==(e=(0,r._)(this,cN))||e.unselect();return}this.hideDropdown(),(0,r._)(this,cC).focus({preventScroll:!0,focusVisible:(0,r._)(this,cM)})}}updateColor(e){if((0,r._)(this,cA)&&((0,r._)(this,cA).style.backgroundColor=e),!(0,r._)(this,cT))return;let t=(0,r._)(this,cR).highlightColors.values();for(let n of(0,r._)(this,cT).children)n.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;null==(e=(0,r._)(this,cC))||e.remove(),(0,a._)(this,cC,null),(0,a._)(this,cA,null),null==(t=(0,r._)(this,cT))||t.remove(),(0,a._)(this,cT,null)}constructor({editor:e=null,uiManager:t=null}){var n;(0,l._)(this,cj),(0,l._)(this,cF),(0,l._)(this,cL),(0,l._)(this,cz),(0,l._)(this,cB),(0,i._)(this,cU,{get:cY,set:void 0}),(0,i._)(this,cC,{writable:!0,value:null}),(0,i._)(this,cA,{writable:!0,value:null}),(0,i._)(this,cE,{writable:!0,value:void 0}),(0,i._)(this,cT,{writable:!0,value:null}),(0,i._)(this,cM,{writable:!0,value:!1}),(0,i._)(this,cI,{writable:!0,value:!1}),(0,i._)(this,cN,{writable:!0,value:null}),(0,i._)(this,cD,{writable:!0,value:void 0}),(0,i._)(this,cP,{writable:!0,value:null}),(0,i._)(this,cR,{writable:!0,value:null}),(0,i._)(this,cO,{writable:!0,value:void 0}),e?((0,a._)(this,cI,!1),(0,a._)(this,cO,C.HIGHLIGHT_COLOR),(0,a._)(this,cN,e)):((0,a._)(this,cI,!0),(0,a._)(this,cO,C.HIGHLIGHT_DEFAULT_COLOR)),(0,a._)(this,cR,(null==e?void 0:e._uiManager)||t),(0,a._)(this,cD,(0,r._)(this,cR)._eventBus),(0,a._)(this,cE,(null==e?void 0:e.color)||(null==(n=(0,r._)(this,cR))?void 0:n.highlightColors.values().next().value)||"#FFFF98"),(0,c._)(cH,cH,cW,(0,u._)(cH,cH,cW)||Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}}var cW={writable:!0,value:null};function cV(){let e=document.createElement("div"),t=(0,r._)(this,cR)._signal;for(let[n,i]of(e.addEventListener("contextmenu",ey,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),(0,r._)(this,cR).highlightColors)){let a=document.createElement("button");a.tabIndex="0",a.role="option",a.setAttribute("data-color",i),a.title=n,a.setAttribute("data-l10n-id",(0,u._)(cH,cH,cW)[n]);let o=document.createElement("span");a.append(o),o.className="swatch",o.style.backgroundColor=i,a.setAttribute("aria-selected",i===(0,r._)(this,cE)),a.addEventListener("click",(0,s._)(this,cF,cq).bind(this,i),{signal:t}),e.append(a)}return e.addEventListener("keydown",(0,s._)(this,cL,cG).bind(this),{signal:t}),e}function cq(e,t){t.stopPropagation(),(0,r._)(this,cD).dispatch("switchannotationeditorparams",{source:this,type:(0,r._)(this,cO),value:e})}function cG(e){cH._keyboardManager.exec(this,e)}function c$(e){if((0,r._)(this,cU))return void this.hideDropdown();if((0,a._)(this,cM,0===e.detail),(0,r._)(this,cP)||((0,a._)(this,cP,new AbortController),window.addEventListener("pointerdown",(0,s._)(this,cB,cK).bind(this),{signal:(0,r._)(this,cR).combinedSignal((0,r._)(this,cP))})),(0,r._)(this,cT))return void(0,r._)(this,cT).classList.remove("hidden");let t=(0,a._)(this,cT,(0,s._)(this,cj,cV).call(this));(0,r._)(this,cC).append(t)}function cK(e){var t;null!=(t=(0,r._)(this,cT))&&t.contains(e.target)||this.hideDropdown()}function cY(){return(0,r._)(this,cT)&&!(0,r._)(this,cT).classList.contains("hidden")}var cX=new WeakMap,cZ=new WeakMap,cJ=new WeakMap,cQ=new WeakMap,c0=new WeakMap,c1=new WeakMap,c2=new WeakMap,c3=new WeakMap,c5=new WeakMap,c4=new WeakMap,c9=new WeakMap,c8=new WeakMap,c6=new WeakMap,c7=new WeakMap,de=new WeakMap,dt=new WeakMap,dn=new WeakMap,dr=new WeakMap,di=new WeakSet,da=new WeakSet,ds=new WeakSet,dl=new WeakSet,du=new WeakSet,dc=new WeakSet,dd=new WeakSet,dh=new WeakSet,dp=new WeakSet,df=new WeakSet,dm=new WeakSet,dg=new WeakSet,dv=new WeakSet;class dy extends rq{static get _keyboardManager(){let e=dy.prototype;return B(this,"_keyboardManager",new ts([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:(0,r._)(this,c8)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:(0,r._)(this,dn),methodOfCreation:(0,r._)(this,dr)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,t){var n;rq.initialize(e,t),dy._defaultColor||(dy._defaultColor=(null==(n=t.highlightColors)?void 0:n.values().next().value)||"#fff066")}static updateDefaultParams(e,t){switch(e){case C.HIGHLIGHT_DEFAULT_COLOR:dy._defaultColor=t;break;case C.HIGHLIGHT_THICKNESS:dy._defaultThickness=t}}translateInPage(e,t){}get toolbarPosition(){return(0,r._)(this,c6)}updateParams(e,t){switch(e){case C.HIGHLIGHT_COLOR:(0,s._)(this,ds,dw).call(this,t);break;case C.HIGHLIGHT_THICKNESS:(0,s._)(this,dl,dk).call(this,t)}}static get defaultPropertiesToUpdate(){return[[C.HIGHLIGHT_DEFAULT_COLOR,dy._defaultColor],[C.HIGHLIGHT_THICKNESS,dy._defaultThickness]]}get propertiesToUpdate(){return[[C.HIGHLIGHT_COLOR,this.color||dy._defaultColor],[C.HIGHLIGHT_THICKNESS,(0,r._)(this,dn)||dy._defaultThickness],[C.HIGHLIGHT_FREE,(0,r._)(this,c8)]]}async addEditToolbar(){let e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&((0,a._)(this,c0,new cH({editor:this})),e.addColorPicker((0,r._)(this,c0))),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition((0,s._)(this,df,dM).call(this))}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,(0,s._)(this,df,dM).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){(0,s._)(this,dc,d_).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&((0,s._)(this,dd,dC).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;if(this.parent&&!e)(0,s._)(this,dc,d_).call(this);else if(e){var n;(0,s._)(this,dd,dC).call(this,e),t=!this.parent&&(null==(n=this.div)?void 0:n.classList.contains("selectedEditor"))}super.setParent(e),this.show(this._isVisible),t&&this.select()}rotate(e){let t,{drawLayer:n}=this.parent;(0,r._)(this,c8)?(e=(e-this.rotation+360)%360,t=(0,f._)(dy,dy,dA).call(dy,(0,r._)(this,c4).box,e)):t=(0,f._)(dy,dy,dA).call(dy,[this.x,this.y,this.width,this.height],e),n.updateProperties((0,r._)(this,c9),{bbox:t,root:{"data-main-rotation":e}}),n.updateProperties((0,r._)(this,de),{bbox:(0,f._)(dy,dy,dA).call(dy,(0,r._)(this,c1).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;let e=super.render();(0,r._)(this,dt)&&(e.setAttribute("aria-label",(0,r._)(this,dt)),e.setAttribute("role","mark")),(0,r._)(this,c8)?e.classList.add("free"):this.div.addEventListener("keydown",(0,s._)(this,dh,dE).bind(this),{signal:this._uiManager._signal});let t=(0,a._)(this,c5,document.createElement("div"));e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",t.style.clipPath=(0,r._)(this,cQ);let[n,i]=this.parentDimensions;return this.setDims(this.width*n,this.height*i),e2(this,(0,r._)(this,c5),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){if(!this.isSelected){var e;null==(e=this.parent)||e.drawLayer.updateProperties((0,r._)(this,de),{rootClass:{hovered:!0}})}}pointerleave(){if(!this.isSelected){var e;null==(e=this.parent)||e.drawLayer.updateProperties((0,r._)(this,de),{rootClass:{hovered:!1}})}}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:(0,s._)(this,dp,dT).call(this,!0);break;case 1:case 3:(0,s._)(this,dp,dT).call(this,!1)}}select(){var e;super.select(),(0,r._)(this,de)&&(null==(e=this.parent)||e.drawLayer.updateProperties((0,r._)(this,de),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),(0,r._)(this,de)&&(null==(e=this.parent)||e.drawLayer.updateProperties((0,r._)(this,de),{rootClass:{selected:!1}}),(0,r._)(this,c8)||(0,s._)(this,dp,dT).call(this,!1))}get _mustFixPosition(){return!(0,r._)(this,c8)}show(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._isVisible;super.show(e),this.parent&&(this.parent.drawLayer.updateProperties((0,r._)(this,c9),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties((0,r._)(this,de),{rootClass:{hidden:!e}}))}static startHighlighting(e,t,n){let{target:r,x:i,y:a}=n,{x:o,y:s,width:l,height:u}=r.getBoundingClientRect(),c=new AbortController,d=e.combinedSignal(c),h=t=>{c.abort(),(0,f._)(this,dy,dP).call(dy,e,t)};window.addEventListener("blur",h,{signal:d}),window.addEventListener("pointerup",h,{signal:d}),window.addEventListener("pointerdown",eb,{capture:!0,passive:!1,signal:d}),window.addEventListener("contextmenu",ey,{signal:d}),r.addEventListener("pointermove",(0,f._)(this,dy,dD).bind(this,e),{signal:d}),this._freeHighlight=new cS({x:i,y:a},[o,s,l,u],e.scale,this._defaultThickness/2,t,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(e,t,n){let i=null;if(e instanceof lZ){let{data:{quadPoints:t,rect:n,rotation:r,id:a,color:o,opacity:s,popupRef:l},parent:{page:{pageNumber:u}}}=e;i=e={annotationType:_.HIGHLIGHT,color:Array.from(o),opacity:s,quadPoints:t,boxes:null,pageIndex:u-1,rect:n.slice(0),rotation:r,id:a,deleted:!1,popupRef:l}}else if(e instanceof lY){let{data:{inkLists:t,rect:n,rotation:r,id:a,color:o,borderStyle:{rawWidth:s},popupRef:l},parent:{page:{pageNumber:u}}}=e;i=e={annotationType:_.HIGHLIGHT,color:Array.from(o),thickness:s,inkLists:t,boxes:null,pageIndex:u-1,rect:n.slice(0),rotation:r,id:a,deleted:!1,popupRef:l}}let{color:o,quadPoints:l,inkLists:u,opacity:c}=e,d=await super.deserialize(e,t,n);d.color=ee.makeHexColor(...o),(0,a._)(d,c7,c||1),u&&(0,a._)(d,dn,e.thickness),d.annotationElementId=e.id||null,d._initialData=i;let[h,p]=d.pageDimensions,[f,m]=d.pageTranslation;if(l){let e=(0,a._)(d,cJ,[]);for(let t=0;t<l.length;t+=8)e.push({x:(l[t]-f)/h,y:1-(l[t+1]-m)/p,width:(l[t+2]-l[t])/h,height:(l[t+1]-l[t+5])/p});(0,s._)(d,di,db).call(d),(0,s._)(d,dd,dC).call(d),d.rotate(d.rotation)}else if(u){(0,a._)(d,c8,!0);let e=u[0],n={x:e[0]-f,y:p-(e[1]-m)},i=new cS(n,[0,0,h,p],1,(0,r._)(d,dn)/2,!0,.001);for(let t=0,r=e.length;t<r;t+=2)n.x=e[t]-f,n.y=p-(e[t+1]-m),i.add(n);let{id:o,clipPathId:l}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:d.color,"fill-opacity":d._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:i.toSVGPath()}},!0,!0);(0,s._)(d,da,dx).call(d,{highlightOutlines:i.getOutlines(),highlightId:o,clipPathId:l}),(0,s._)(d,dd,dC).call(d)}return d}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();let t=this.getRect(0,0),n=rq._colorManager.convert(this.color),i={annotationType:_.HIGHLIGHT,color:n,opacity:(0,r._)(this,c7),thickness:(0,r._)(this,dn),quadPoints:(0,s._)(this,dm,dI).call(this),outlines:(0,s._)(this,dg,dN).call(this,t),pageIndex:this.pageIndex,rect:t,rotation:(0,s._)(this,df,dM).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!(0,s._)(this,dv,dR).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}constructor(e){super({...e,name:"highlightEditor"}),(0,l._)(this,di),(0,l._)(this,da),(0,l._)(this,ds),(0,l._)(this,dl),(0,l._)(this,du),(0,l._)(this,dc),(0,l._)(this,dd),(0,l._)(this,dh),(0,l._)(this,dp),(0,l._)(this,df),(0,l._)(this,dm),(0,l._)(this,dg),(0,l._)(this,dv),(0,i._)(this,cX,{writable:!0,value:null}),(0,i._)(this,cZ,{writable:!0,value:0}),(0,i._)(this,cJ,{writable:!0,value:void 0}),(0,i._)(this,cQ,{writable:!0,value:null}),(0,i._)(this,c0,{writable:!0,value:null}),(0,i._)(this,c1,{writable:!0,value:null}),(0,i._)(this,c2,{writable:!0,value:null}),(0,i._)(this,c3,{writable:!0,value:0}),(0,i._)(this,c5,{writable:!0,value:null}),(0,i._)(this,c4,{writable:!0,value:null}),(0,i._)(this,c9,{writable:!0,value:null}),(0,i._)(this,c8,{writable:!0,value:!1}),(0,i._)(this,c6,{writable:!0,value:null}),(0,i._)(this,c7,{writable:!0,value:void 0}),(0,i._)(this,de,{writable:!0,value:null}),(0,i._)(this,dt,{writable:!0,value:""}),(0,i._)(this,dn,{writable:!0,value:void 0}),(0,i._)(this,dr,{writable:!0,value:""}),this.color=e.color||dy._defaultColor,(0,a._)(this,dn,e.thickness||dy._defaultThickness),(0,a._)(this,c7,e.opacity||dy._defaultOpacity),(0,a._)(this,cJ,e.boxes||null),(0,a._)(this,dr,e.methodOfCreation||""),(0,a._)(this,dt,e.text||""),this._isDraggable=!1,e.highlightId>-1?((0,a._)(this,c8,!0),(0,s._)(this,da,dx).call(this,e),(0,s._)(this,dd,dC).call(this)):(0,r._)(this,cJ)&&((0,a._)(this,cX,e.anchorNode),(0,a._)(this,cZ,e.anchorOffset),(0,a._)(this,c2,e.focusNode),(0,a._)(this,c3,e.focusOffset),(0,s._)(this,di,db).call(this),(0,s._)(this,dd,dC).call(this),this.rotate(this.rotation))}}function db(){let e=new cf((0,r._)(this,cJ),.001);(0,a._)(this,c4,e.getOutlines()),[this.x,this.y,this.width,this.height]=(0,r._)(this,c4).box;let t=new cf((0,r._)(this,cJ),.0025,.001,"ltr"===this._uiManager.direction);(0,a._)(this,c1,t.getOutlines());let{lastPoint:n}=(0,r._)(this,c1);(0,a._)(this,c6,[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height])}function dx(e){let{highlightOutlines:t,highlightId:n,clipPathId:i}=e;if((0,a._)(this,c4,t),(0,a._)(this,c1,t.getNewOutline((0,r._)(this,dn)/2+1.5,.0025)),n>=0)(0,a._)(this,c9,n),(0,a._)(this,cQ,i),this.parent.drawLayer.finalizeDraw(n,{bbox:t.box,path:{d:t.toSVGPath()}}),(0,a._)(this,de,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:(0,r._)(this,c1).box,path:{d:(0,r._)(this,c1).toSVGPath()}},!0));else if(this.parent){let e=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties((0,r._)(this,c9),{bbox:(0,f._)(dy,dy,dA).call(dy,(0,r._)(this,c4).box,(e-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties((0,r._)(this,de),{bbox:(0,f._)(dy,dy,dA).call(dy,(0,r._)(this,c1).box,e),path:{d:(0,r._)(this,c1).toSVGPath()}})}let[o,s,l,u]=t.box;switch(this.rotation){case 0:this.x=o,this.y=s,this.width=l,this.height=u;break;case 90:{let[e,t]=this.parentDimensions;this.x=s,this.y=1-o,this.width=l*t/e,this.height=u*e/t;break}case 180:this.x=1-o,this.y=1-s,this.width=l,this.height=u;break;case 270:{let[e,t]=this.parentDimensions;this.x=1-s,this.y=o,this.width=l*t/e,this.height=u*e/t}}let{lastPoint:c}=(0,r._)(this,c1);(0,a._)(this,c6,[(c[0]-o)/l,(c[1]-s)/u])}function dw(e){let t=(e,t)=>{var n,i;this.color=e,(0,a._)(this,c7,t),null==(n=this.parent)||n.drawLayer.updateProperties((0,r._)(this,c9),{root:{fill:e,"fill-opacity":t}}),null==(i=(0,r._)(this,c0))||i.updateColor(e)},n=this.color,i=(0,r._)(this,c7);this.addCommands({cmd:t.bind(this,e,dy._defaultOpacity),undo:t.bind(this,n,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:C.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)}function dk(e){let t=(0,r._)(this,dn),n=e=>{(0,a._)(this,dn,e),(0,s._)(this,du,dS).call(this,e)};this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:C.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}function dS(e){if(!(0,r._)(this,c8))return;(0,s._)(this,da,dx).call(this,{highlightOutlines:(0,r._)(this,c4).getNewOutline(e/2)}),this.fixAndSetPosition();let[t,n]=this.parentDimensions;this.setDims(this.width*t,this.height*n)}function d_(){null!==(0,r._)(this,c9)&&this.parent&&(this.parent.drawLayer.remove((0,r._)(this,c9)),(0,a._)(this,c9,null),this.parent.drawLayer.remove((0,r._)(this,de)),(0,a._)(this,de,null))}function dC(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parent;null===(0,r._)(this,c9)&&({id:(0,p._)(this,c9).value,clipPathId:(0,p._)(this,cQ).value}=e.drawLayer.draw({bbox:(0,r._)(this,c4).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":(0,r._)(this,c7)},rootClass:{highlight:!0,free:(0,r._)(this,c8)},path:{d:(0,r._)(this,c4).toSVGPath()}},!1,!0),(0,a._)(this,de,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:(0,r._)(this,c8)},bbox:(0,r._)(this,c1).box,path:{d:(0,r._)(this,c1).toSVGPath()}},(0,r._)(this,c8))),(0,r._)(this,c5)&&((0,r._)(this,c5).style.clipPath=(0,r._)(this,cQ)))}function dA(e,t){let[n,r,i,a]=e;switch(t){case 90:return[1-r-a,n,a,i];case 180:return[1-n-i,1-r-a,i,a];case 270:return[r,1-n-i,a,i]}return[n,r,i,a]}function dE(e){dy._keyboardManager.exec(this,e)}function dT(e){if(!(0,r._)(this,cX))return;let t=window.getSelection();e?t.setPosition((0,r._)(this,cX),(0,r._)(this,cZ)):t.setPosition((0,r._)(this,c2),(0,r._)(this,c3))}function dM(){return(0,r._)(this,c8)?this.rotation:0}function dI(){if((0,r._)(this,c8))return null;let[e,t]=this.pageDimensions,[n,i]=this.pageTranslation,a=(0,r._)(this,cJ),o=new Float32Array(8*a.length),s=0;for(let{x:r,y:l,width:u,height:c}of a){let a=r*e+n,d=(1-l)*t+i;o[s]=o[s+4]=a,o[s+1]=o[s+3]=d,o[s+2]=o[s+6]=a+u*e,o[s+5]=o[s+7]=d-c*t,s+=8}return o}function dN(e){return(0,r._)(this,c4).serialize(e,(0,s._)(this,df,dM).call(this))}function dD(e,t){this._freeHighlight.add(t)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}function dP(e,t){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}function dR(e){let{color:t}=this._initialData;return e.color.some((e,n)=>e!==t[n])}(0,h._)(dy,"_defaultColor",null),(0,h._)(dy,"_defaultOpacity",1),(0,h._)(dy,"_defaultThickness",12),(0,h._)(dy,"_type","highlight"),(0,h._)(dy,"_editorType",_.HIGHLIGHT),(0,h._)(dy,"_freeHighlightId",-1),(0,h._)(dy,"_freeHighlight",null),(0,h._)(dy,"_freeHighlightClipId","");var dO=new WeakMap;class dj{updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(let[t,n]of Object.entries(e))this.updateProperty(t,n)}updateSVGProperty(e,t){(0,r._)(this,dO)[e]=t}toSVGProperties(){let e=(0,r._)(this,dO);return(0,a._)(this,dO,Object.create(null)),{root:e}}reset(){(0,a._)(this,dO,Object.create(null))}updateAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;this.updateProperties(e)}clone(){F("Not implemented")}constructor(){(0,i._)(this,dO,{writable:!0,value:Object.create(null)})}}var dF=new WeakMap,dL=new WeakMap,dz=new WeakSet,dB=new WeakSet,dU=new WeakSet,dH=new WeakSet,dW=new WeakSet,dV=new WeakSet,dq=new WeakSet,dG=new WeakSet;class d$ extends rq{static _mergeSVGProperties(e,t){let n=new Set(Object.keys(e));for(let[r,i]of Object.entries(t))n.has(r)?Object.assign(e[r],i):e[r]=i;return e}static getDefaultDrawingOptions(e){F("Not implemented")}static get typesMap(){F("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,t){let n=this.typesMap.get(e);n&&this._defaultDrawingOptions.updateProperty(n,t),this._currentParent&&((0,u._)(d$,d$,dK).updateProperty(n,t),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,t){let n=this.constructor.typesMap.get(e);n&&this._updateProperty(e,n,t)}static get defaultPropertiesToUpdate(){let e=[],t=this._defaultDrawingOptions;for(let[n,r]of this.typesMap)e.push([n,t[r]]);return e}get propertiesToUpdate(){let e=[],{_drawingOptions:t}=this;for(let[n,r]of this.constructor.typesMap)e.push([n,t[r]]);return e}_updateProperty(e,t,n){let i=this._drawingOptions,a=i[t],o=e=>{var n;i.updateProperty(t,e);let a=(0,r._)(this,dF).updateProperty(t,e);a&&(0,s._)(this,dq,d8).call(this,a),null==(n=this.parent)||n.drawLayer.updateProperties(this._drawId,i.toSVGProperties())};this.addCommands({cmd:o.bind(this,n),undo:o.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;null==(e=this.parent)||e.drawLayer.updateProperties(this._drawId,d$._mergeSVGProperties((0,r._)(this,dF).getPathResizingSVGProperties((0,s._)(this,dV,d9).call(this)),{bbox:(0,s._)(this,dG,d6).call(this)}))}_onResized(){var e;null==(e=this.parent)||e.drawLayer.updateProperties(this._drawId,d$._mergeSVGProperties((0,r._)(this,dF).getPathResizedSVGProperties((0,s._)(this,dV,d9).call(this)),{bbox:(0,s._)(this,dG,d6).call(this)}))}_onTranslating(e,t){var n;null==(n=this.parent)||n.drawLayer.updateProperties(this._drawId,{bbox:(0,s._)(this,dG,d6).call(this,e,t)})}_onTranslated(){var e;null==(e=this.parent)||e.drawLayer.updateProperties(this._drawId,d$._mergeSVGProperties((0,r._)(this,dF).getPathTranslatedSVGProperties((0,s._)(this,dV,d9).call(this),this.parentDimensions),{bbox:(0,s._)(this,dG,d6).call(this)}))}_onStartDragging(){var e;null==(e=this.parent)||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;null==(e=this.parent)||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,(0,r._)(this,dL)&&((0,a._)(this,dL,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){(0,s._)(this,dU,d3).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&((0,s._)(this,dH,d5).call(this),(0,s._)(this,dq,d8).call(this,(0,r._)(this,dF).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;if(this.parent&&!e)this._uiManager.removeShouldRescale(this),(0,s._)(this,dU,d3).call(this);else if(e){var n;this._uiManager.addShouldRescale(this),(0,s._)(this,dH,d5).call(this,e),t=!this.parent&&(null==(n=this.div)?void 0:n.classList.contains("selectedEditor"))}super.setParent(e),t&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,d$._mergeSVGProperties({bbox:(0,s._)(this,dG,d6).call(this)},(0,r._)(this,dF).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&(0,s._)(this,dq,d8).call(this,(0,r._)(this,dF).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e=super.render();e.classList.add("draw");let t=document.createElement("div");e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal";let[n,r]=this.parentDimensions;return this.setDims(this.width*n,this.height*r),this._uiManager.addShouldRescale(this),this.disableEditing(),e}static createDrawerInstance(e,t,n,r,i){F("Not implemented")}static startDrawing(e,t,n,r){var i,a;let{target:o,offsetX:s,offsetY:l,pointerId:d,pointerType:h}=r;if((0,u._)(d$,d$,dJ)&&(0,u._)(d$,d$,dJ)!==h)return;let{viewport:{rotation:p}}=e,{width:f,height:m}=o.getBoundingClientRect(),g=(0,c._)(d$,d$,dY,new AbortController),y=e.combinedSignal(g);if((0,c._)(d$,d$,dZ,(0,u._)(d$,d$,dZ)||d),(0,c._)(d$,d$,dJ,null!=(a=(0,u._)(d$,d$,dJ))?a:h),window.addEventListener("pointerup",e=>{if((0,u._)(d$,d$,dZ)===e.pointerId)this._endDraw(e);else{var t;null==(t=(0,u._)(d$,d$,dQ))||t.delete(e.pointerId)}},{signal:y}),window.addEventListener("pointercancel",e=>{if((0,u._)(d$,d$,dZ)===e.pointerId)this._currentParent.endDrawingSession();else{var t;null==(t=(0,u._)(d$,d$,dQ))||t.delete(e.pointerId)}},{signal:y}),window.addEventListener("pointerdown",e=>{(0,u._)(d$,d$,dJ)===e.pointerType&&((0,c._)(d$,d$,dQ,(0,u._)(d$,d$,dQ)||new Set).add(e.pointerId),(0,u._)(d$,d$,dK).isCancellable()&&((0,u._)(d$,d$,dK).removeLastElement(),(0,u._)(d$,d$,dK).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:y}),window.addEventListener("contextmenu",ey,{signal:y}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:y}),o.addEventListener("touchmove",e=>{e.timeStamp===(0,u._)(d$,d$,d0)&&eb(e)},{signal:y}),e.toggleDrawing(),null==(i=t._editorUndoBar)||i.hide(),(0,u._)(d$,d$,dK))return void e.drawLayer.updateProperties(this._currentDrawId,(0,u._)(d$,d$,dK).startNew(s,l,f,m,p));t.updateUIForDefaultProperties(this),(0,c._)(d$,d$,dK,this.createDrawerInstance(s,l,f,m,p)),(0,c._)(d$,d$,dX,this.getDefaultDrawingOptions()),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties((0,u._)(d$,d$,dX).toSVGProperties(),(0,u._)(d$,d$,dK).defaultSVGProperties),!0,!1)}static _drawMove(e){var t;if((0,c._)(d$,d$,d0,-1),!(0,u._)(d$,d$,dK))return;let{offsetX:n,offsetY:r,pointerId:i}=e;if((0,u._)(d$,d$,dZ)===i){if((null==(t=(0,u._)(d$,d$,dQ))?void 0:t.size)>=1)return void this._endDraw(e);this._currentParent.drawLayer.updateProperties(this._currentDrawId,(0,u._)(d$,d$,dK).add(n,r)),(0,c._)(d$,d$,d0,e.timeStamp),eb(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,(0,c._)(d$,d$,dK,null),(0,c._)(d$,d$,dX,null),(0,c._)(d$,d$,dJ,null),(0,c._)(d$,d$,d0,NaN)),(0,u._)(d$,d$,dY)&&((0,u._)(d$,d$,dY).abort(),(0,c._)(d$,d$,dY,null),(0,c._)(d$,d$,dZ,NaN),(0,c._)(d$,d$,dQ,null))}static _endDraw(e){let t=this._currentParent;if(t){if(t.toggleDrawing(!0),this._cleanup(!1),e&&t.drawLayer.updateProperties(this._currentDrawId,(0,u._)(d$,d$,dK).end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){let e=(0,u._)(d$,d$,dK),n=this._currentDrawId,r=e.getLastElement();t.addCommands({cmd:()=>{t.drawLayer.updateProperties(n,e.setLastElement(r))},undo:()=>{t.drawLayer.updateProperties(n,e.removeLastElement())},mustExec:!1,type:C.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){let t=this._currentParent;if(!t)return null;if(t.toggleDrawing(!0),t.cleanUndoStack(C.DRAW_STEP),!(0,u._)(d$,d$,dK).isEmpty()){let{pageDimensions:[n,r],scale:i}=t,a=t.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:(0,u._)(d$,d$,dK).getOutlines(n*i,r*i,i,this._INNER_MARGIN),drawingOptions:(0,u._)(d$,d$,dX),mustBeCommitted:!e});return this._cleanup(!0),a}return t.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,t,n,r,i,a){F("Not implemented")}static async deserialize(e,t,n){let{rawDims:{pageWidth:r,pageHeight:i,pageX:a,pageY:o}}=t.viewport,l=this.deserializeDraw(a,o,r,i,this._INNER_MARGIN,e),u=await super.deserialize(e,t,n);return u.createDrawingOptions(e),(0,s._)(u,dz,d1).call(u,{drawOutlines:l}),(0,s._)(u,dH,d5).call(u),u.onScaleChanging(),u.rotate(),u}serializeDraw(e){let[t,n]=this.pageTranslation,[i,a]=this.pageDimensions;return(0,r._)(this,dF).serialize([t,n,i,a],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}constructor(e){super(e),(0,l._)(this,dz),(0,l._)(this,dB),(0,l._)(this,dU),(0,l._)(this,dH),(0,l._)(this,dW),(0,l._)(this,dV),(0,l._)(this,dq),(0,l._)(this,dG),(0,i._)(this,dF,{writable:!0,value:null}),(0,i._)(this,dL,{writable:!0,value:void 0}),(0,h._)(this,"_drawId",null),(0,a._)(this,dL,e.mustBeCommitted||!1),e.drawOutlines&&((0,s._)(this,dz,d1).call(this,e),(0,s._)(this,dH,d5).call(this))}}(0,h._)(d$,"_currentDrawId",-1),(0,h._)(d$,"_currentParent",null);var dK={writable:!0,value:null},dY={writable:!0,value:null},dX={writable:!0,value:null},dZ={writable:!0,value:NaN},dJ={writable:!0,value:null},dQ={writable:!0,value:null},d0={writable:!0,value:NaN};function d1(e){let{drawOutlines:t,drawId:n,drawingOptions:r}=e;(0,a._)(this,dF,t),this._drawingOptions||(this._drawingOptions=r),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,t.defaultProperties)):this._drawId=(0,s._)(this,dB,d2).call(this,t,this.parent),(0,s._)(this,dq,d8).call(this,t.box)}function d2(e,t){let{id:n}=t.drawLayer.draw(d$._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return n}function d3(){null!==this._drawId&&this.parent&&(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}function d5(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parent;if(null===this._drawId||this.parent!==e){if(null!==this._drawId)return void this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);this._drawingOptions.updateAll(),this._drawId=(0,s._)(this,dB,d2).call(this,(0,r._)(this,dF),e)}}function d4(e){let[t,n,r,i]=e,{parentDimensions:[a,o],rotation:s}=this;switch(s){case 90:return[n,1-t,o/a*r,a/o*i];case 180:return[1-t,1-n,r,i];case 270:return[1-n,t,o/a*r,a/o*i];default:return[t,n,r,i]}}function d9(){let{x:e,y:t,width:n,height:r,parentDimensions:[i,a],rotation:o}=this;switch(o){case 90:return[1-t,e,i/a*n,a/i*r];case 180:return[1-e,1-t,n,r];case 270:return[t,1-e,i/a*n,a/i*r];default:return[e,t,n,r]}}function d8(e){if([this.x,this.y,this.width,this.height]=(0,s._)(this,dW,d4).call(this,e),this.div){this.fixAndSetPosition();let[e,t]=this.parentDimensions;this.setDims(this.width*e,this.height*t)}this._onResized()}function d6(){let{x:e,y:t,width:n,height:r,rotation:i,parentRotation:a,parentDimensions:[o,s]}=this;switch((4*i+a)/90){case 1:return[1-t-r,e,r,n];case 2:return[1-e-n,1-t-r,n,r];case 3:return[t,1-e-n,r,n];case 4:return[e,t-o/s*n,s/o*r,o/s*n];case 5:return[1-t,e,o/s*n,s/o*r];case 6:return[1-e-s/o*r,1-t,s/o*r,o/s*n];case 7:return[t-o/s*n,1-e-s/o*r,o/s*n,s/o*r];case 8:return[e-n,t-r,n,r];case 9:return[1-t,e-n,r,n];case 10:return[1-e,1-t,n,r];case 11:return[t-r,1-e,r,n];case 12:return[e-s/o*r,t,s/o*r,o/s*n];case 13:return[1-t-o/s*n,e-s/o*r,o/s*n,s/o*r];case 14:return[1-e,1-t-o/s*n,s/o*r,o/s*n];case 15:return[t,1-e,o/s*n,s/o*r];default:return[e,t,n,r]}}(0,h._)(d$,"_INNER_MARGIN",3);var d7=new WeakMap,he=new WeakMap,ht=new WeakMap,hn=new WeakMap,hr=new WeakMap,hi=new WeakMap,ha=new WeakMap,ho=new WeakMap,hs=new WeakMap,hl=new WeakMap,hu=new WeakMap,hc=new WeakSet;class hd{updateProperty(e,t){"stroke-width"===e&&(0,a._)(this,hr,t)}isEmpty(){return!(0,r._)(this,ht)||0===(0,r._)(this,ht).length}isCancellable(){return(0,r._)(this,hi).length<=10}add(e,t){[e,t]=(0,s._)(this,hc,hh).call(this,e,t);let[n,i,a,o]=(0,r._)(this,d7).subarray(2,6),l=e-a,u=t-o;return 2>=Math.hypot((0,r._)(this,hl)*l,(0,r._)(this,hu)*u)?null:(((0,r._)(this,hi).push(e,t),isNaN(n))?((0,r._)(this,d7).set([a,o,e,t],2),(0,r._)(this,he).push(NaN,NaN,NaN,NaN,e,t)):(isNaN((0,r._)(this,d7)[0])&&(0,r._)(this,he).splice(6,6),(0,r._)(this,d7).set([n,i,a,o,e,t],0),(0,r._)(this,he).push(...uT.createBezierPoints(n,i,a,o,e,t))),{path:{d:this.toSVGPath()}})}end(e,t){let n=this.add(e,t);return n||(2===(0,r._)(this,hi).length?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,n,i,o){(0,a._)(this,hl,n),(0,a._)(this,hu,i),(0,a._)(this,hn,o),[e,t]=(0,s._)(this,hc,hh).call(this,e,t);let l=(0,a._)(this,he,[NaN,NaN,NaN,NaN,e,t]);(0,a._)(this,hi,[e,t]);let u=(0,r._)(this,ht).at(-1);return u&&(u.line=new Float32Array(u.line),u.points=new Float32Array(u.points)),(0,r._)(this,ht).push({line:l,points:(0,r._)(this,hi)}),(0,r._)(this,d7).set(l,0),(0,a._)(this,ho,0),this.toSVGPath(),null}getLastElement(){return(0,r._)(this,ht).at(-1)}setLastElement(e){return(0,r._)(this,ht)?((0,r._)(this,ht).push(e),(0,a._)(this,he,e.line),(0,a._)(this,hi,e.points),(0,a._)(this,ho,0),{path:{d:this.toSVGPath()}}):(0,r._)(this,hs).setLastElement(e)}removeLastElement(){if(!(0,r._)(this,ht))return(0,r._)(this,hs).removeLastElement();(0,r._)(this,ht).pop(),(0,a._)(this,ha,"");for(let e=0,t=(0,r._)(this,ht).length;e<t;e++){let{line:t,points:n}=(0,r._)(this,ht)[e];(0,a._)(this,he,t),(0,a._)(this,hi,n),(0,a._)(this,ho,0),this.toSVGPath()}return{path:{d:(0,r._)(this,ha)}}}toSVGPath(){let e=uT.svgRound((0,r._)(this,he)[4]),t=uT.svgRound((0,r._)(this,he)[5]);if(2===(0,r._)(this,hi).length)return(0,a._)(this,ha,"".concat((0,r._)(this,ha)," M ").concat(e," ").concat(t," Z")),(0,r._)(this,ha);if((0,r._)(this,hi).length<=6){let n=(0,r._)(this,ha).lastIndexOf("M");(0,a._)(this,ha,"".concat((0,r._)(this,ha).slice(0,n)," M ").concat(e," ").concat(t)),(0,a._)(this,ho,6)}if(4===(0,r._)(this,hi).length){let e=uT.svgRound((0,r._)(this,he)[10]),t=uT.svgRound((0,r._)(this,he)[11]);return(0,a._)(this,ha,"".concat((0,r._)(this,ha)," L ").concat(e," ").concat(t)),(0,a._)(this,ho,12),(0,r._)(this,ha)}let n=[];0===(0,r._)(this,ho)&&(n.push("M ".concat(e," ").concat(t)),(0,a._)(this,ho,6));for(let e=(0,r._)(this,ho),t=(0,r._)(this,he).length;e<t;e+=6){let[t,i,a,o,s,l]=(0,r._)(this,he).slice(e,e+6).map(uT.svgRound);n.push("C".concat(t," ").concat(i," ").concat(a," ").concat(o," ").concat(s," ").concat(l))}return(0,a._)(this,ha,(0,r._)(this,ha)+n.join(" ")),(0,a._)(this,ho,(0,r._)(this,he).length),(0,r._)(this,ha)}getOutlines(e,t,n,i){let o=(0,r._)(this,ht).at(-1);return o.line=new Float32Array(o.line),o.points=new Float32Array(o.points),(0,r._)(this,hs).build((0,r._)(this,ht),e,t,n,(0,r._)(this,hn),(0,r._)(this,hr),i),(0,a._)(this,d7,null),(0,a._)(this,he,null),(0,a._)(this,ht,null),(0,a._)(this,ha,null),(0,r._)(this,hs)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}constructor(e,t,n,o,u,c){(0,l._)(this,hc),(0,i._)(this,d7,{writable:!0,value:new Float64Array(6)}),(0,i._)(this,he,{writable:!0,value:void 0}),(0,i._)(this,ht,{writable:!0,value:void 0}),(0,i._)(this,hn,{writable:!0,value:void 0}),(0,i._)(this,hr,{writable:!0,value:void 0}),(0,i._)(this,hi,{writable:!0,value:void 0}),(0,i._)(this,ha,{writable:!0,value:""}),(0,i._)(this,ho,{writable:!0,value:0}),(0,i._)(this,hs,{writable:!0,value:new hA}),(0,i._)(this,hl,{writable:!0,value:void 0}),(0,i._)(this,hu,{writable:!0,value:void 0}),(0,a._)(this,hl,n),(0,a._)(this,hu,o),(0,a._)(this,hn,u),(0,a._)(this,hr,c),[e,t]=(0,s._)(this,hc,hh).call(this,e,t);let d=(0,a._)(this,he,[NaN,NaN,NaN,NaN,e,t]);(0,a._)(this,hi,[e,t]),(0,a._)(this,ht,[{line:d,points:(0,r._)(this,hi)}]),(0,r._)(this,d7).set(d,0)}}function hh(e,t){return uT._normalizePoint(e,t,(0,r._)(this,hl),(0,r._)(this,hu),(0,r._)(this,hn))}var hp=new WeakMap,hf=new WeakMap,hm=new WeakMap,hg=new WeakMap,hv=new WeakMap,hy=new WeakMap,hb=new WeakMap,hx=new WeakMap,hw=new WeakMap,hk=new WeakSet,hS=new WeakSet,h_=new WeakSet,hC=new WeakSet;class hA extends uT{build(e,t,n,r,i,o,l){(0,a._)(this,hv,t),(0,a._)(this,hy,n),(0,a._)(this,hb,r),(0,a._)(this,hx,i),(0,a._)(this,hw,o),(0,a._)(this,hm,null!=l?l:0),(0,a._)(this,hg,e),(0,s._)(this,h_,hM).call(this)}setLastElement(e){return(0,r._)(this,hg).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return(0,r._)(this,hg).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){let e=[];for(let{line:t}of(0,r._)(this,hg)){if(e.push("M".concat(uT.svgRound(t[4])," ").concat(uT.svgRound(t[5]))),6===t.length){e.push("Z");continue}if(12===t.length){e.push("L".concat(uT.svgRound(t[10])," ").concat(uT.svgRound(t[11])));continue}for(let n=6,r=t.length;n<r;n+=6){let[r,i,a,o,s,l]=t.subarray(n,n+6).map(uT.svgRound);e.push("C".concat(r," ").concat(i," ").concat(a," ").concat(o," ").concat(s," ").concat(l))}}return e.join("")}serialize(e,t){let n,i,a,o,l,u,c,d,h,[p,f,m,g]=e,y=[],b=[],[x,w,k,S]=(0,s._)(this,hS,hT).call(this);switch((0,r._)(this,hx)){case 0:h=uT._rescale,n=p,i=f+g,a=m,o=-g,l=p+x*m,u=f+(1-w-S)*g,c=p+(x+k)*m,d=f+(1-w)*g;break;case 90:h=uT._rescaleAndSwap,n=p,i=f,a=m,o=g,l=p+w*m,u=f+x*g,c=p+(w+S)*m,d=f+(x+k)*g;break;case 180:h=uT._rescale,n=p+m,i=f,a=-m,o=g,l=p+(1-x-k)*m,u=f+w*g,c=p+(1-x)*m,d=f+(w+S)*g;break;case 270:h=uT._rescaleAndSwap,n=p+m,i=f+g,a=-m,o=-g,l=p+(1-w-S)*m,u=f+(1-x-k)*g,c=p+(1-w)*m,d=f+(1-x)*g}for(let{line:e,points:s}of(0,r._)(this,hg))y.push(h(e,n,i,a,o,t?Array(e.length):null)),b.push(h(s,n,i,a,o,t?Array(s.length):null));return{lines:y,points:b,rect:[l,u,c,d]}}static deserialize(e,t,n,r,i,a){let o,s,l,u,c,{paths:{lines:d,points:h},rotation:p,thickness:f}=a,m=[];switch(p){case 0:c=uT._rescale,o=-e/n,s=t/r+1,l=1/n,u=-1/r;break;case 90:c=uT._rescaleAndSwap,o=-t/r,s=-e/n,l=1/r,u=1/n;break;case 180:c=uT._rescale,o=e/n+1,s=-t/r,l=-1/n,u=1/r;break;case 270:c=uT._rescaleAndSwap,o=t/r+1,s=e/n+1,l=-1/r,u=-1/n}if(!d)for(let e of(d=[],h)){let t=e.length;if(2===t){d.push(new Float32Array([NaN,NaN,NaN,NaN,e[0],e[1]]));continue}if(4===t){d.push(new Float32Array([NaN,NaN,NaN,NaN,e[0],e[1],NaN,NaN,NaN,NaN,e[2],e[3]]));continue}let n=new Float32Array(3*(t-2));d.push(n);let[r,i,a,o]=e.subarray(0,4);n.set([NaN,NaN,NaN,NaN,r,i],0);for(let s=4;s<t;s+=2){let t=e[s],l=e[s+1];n.set(uT.createBezierPoints(r,i,a,o,t,l),(s-2)*3),[r,i,a,o]=[a,o,t,l]}}for(let e=0,t=d.length;e<t;e++)m.push({line:c(d[e].map(e=>null!=e?e:NaN),o,s,l,u),points:c(h[e].map(e=>null!=e?e:NaN),o,s,l,u)});let g=new hA;return g.build(m,n,r,1,p,f,i),g}get box(){return(0,r._)(this,hp)}updateProperty(e,t){return"stroke-width"===e?(0,s._)(this,hC,hI).call(this,t):null}updateParentDimensions(e,t){let[n,i]=e,[o,l]=(0,s._)(this,hk,hE).call(this);(0,a._)(this,hv,n),(0,a._)(this,hy,i),(0,a._)(this,hb,t);let[u,c]=(0,s._)(this,hk,hE).call(this),d=u-o,h=c-l,p=(0,r._)(this,hp);return p[0]-=d,p[1]-=h,p[2]+=2*d,p[3]+=2*h,p}updateRotation(e){return(0,a._)(this,hf,e),{path:{transform:this.rotationTransform}}}get viewBox(){return(0,r._)(this,hp).map(uT.svgRound).join(" ")}get defaultProperties(){let[e,t]=(0,r._)(this,hp);return{root:{viewBox:this.viewBox},path:{"transform-origin":"".concat(uT.svgRound(e)," ").concat(uT.svgRound(t))}}}get rotationTransform(){let[,,e,t]=(0,r._)(this,hp),n=0,i=0,a=0,o=0,s=0,l=0;switch((0,r._)(this,hf)){case 90:i=t/e,a=-e/t,s=e;break;case 180:n=-1,o=-1,s=e,l=t;break;case 270:i=-t/e,a=e/t,l=t;break;default:return""}return"matrix(".concat(n," ").concat(i," ").concat(a," ").concat(o," ").concat(uT.svgRound(s)," ").concat(uT.svgRound(l),")")}getPathResizingSVGProperties(e){let[t,n,i,a]=e,[o,l]=(0,s._)(this,hk,hE).call(this),[u,c,d,h]=(0,r._)(this,hp);return Math.abs(d-o)<=uT.PRECISION||Math.abs(h-l)<=uT.PRECISION?{path:{"transform-origin":"".concat(uT.svgRound(t)," ").concat(uT.svgRound(n)),transform:"".concat(this.rotationTransform," translate(").concat(t+i/2-(u+d/2)," ").concat(n+a/2-(c+h/2),")")}}:{path:{"transform-origin":"".concat(uT.svgRound(u)," ").concat(uT.svgRound(c)),transform:"".concat(this.rotationTransform," scale(").concat(d/i," ").concat(h/a,") ")+"translate(".concat(uT.svgRound(o)," ").concat(uT.svgRound(l),") scale(").concat((i-2*o)/(d-2*o)," ").concat((a-2*l)/(h-2*l),") ")+"translate(".concat(uT.svgRound(-o)," ").concat(uT.svgRound(-l),")")}}}getPathResizedSVGProperties(e){let[t,n,i,a]=e,[o,l]=(0,s._)(this,hk,hE).call(this),u=(0,r._)(this,hp),[c,d,h,p]=u;if(u[0]=t,u[1]=n,u[2]=i,u[3]=a,Math.abs(h-o)<=uT.PRECISION||Math.abs(p-l)<=uT.PRECISION){let e=t+i/2-(c+h/2),o=n+a/2-(d+p/2);for(let{line:t,points:n}of(0,r._)(this,hg))uT._translate(t,e,o,t),uT._translate(n,e,o,n);return{root:{viewBox:this.viewBox},path:{"transform-origin":"".concat(uT.svgRound(t)," ").concat(uT.svgRound(n)),transform:this.rotationTransform||null,d:this.toSVGPath()}}}let f=(i-2*o)/(h-2*o),m=(a-2*l)/(p-2*l),g=-f*(c+o)+t+o,y=-m*(d+l)+n+l;if(1!==f||1!==m||0!==g||0!==y)for(let{line:e,points:t}of(0,r._)(this,hg))uT._rescale(e,g,y,f,m,e),uT._rescale(t,g,y,f,m,t);return{root:{viewBox:this.viewBox},path:{"transform-origin":"".concat(uT.svgRound(t)," ").concat(uT.svgRound(n)),transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties(e,t){let[n,i]=e,[o,s]=t,l=(0,r._)(this,hp),u=n-l[0],c=i-l[1];if((0,r._)(this,hv)===o&&(0,r._)(this,hy)===s)for(let{line:e,points:t}of(0,r._)(this,hg))uT._translate(e,u,c,e),uT._translate(t,u,c,t);else{let e=(0,r._)(this,hv)/o,t=(0,r._)(this,hy)/s;for(let{line:n,points:i}of((0,a._)(this,hv,o),(0,a._)(this,hy,s),(0,r._)(this,hg)))uT._rescale(n,u,c,e,t,n),uT._rescale(i,u,c,e,t,i);l[2]*=e,l[3]*=t}return l[0]=n,l[1]=i,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":"".concat(uT.svgRound(n)," ").concat(uT.svgRound(i))}}}get defaultSVGProperties(){let e=(0,r._)(this,hp);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":"".concat(uT.svgRound(e[0])," ").concat(uT.svgRound(e[1])),transform:this.rotationTransform||null},bbox:e}}constructor(...e){super(...e),(0,l._)(this,hk),(0,l._)(this,hS),(0,l._)(this,h_),(0,l._)(this,hC),(0,i._)(this,hp,{writable:!0,value:void 0}),(0,i._)(this,hf,{writable:!0,value:0}),(0,i._)(this,hm,{writable:!0,value:void 0}),(0,i._)(this,hg,{writable:!0,value:void 0}),(0,i._)(this,hv,{writable:!0,value:void 0}),(0,i._)(this,hy,{writable:!0,value:void 0}),(0,i._)(this,hb,{writable:!0,value:void 0}),(0,i._)(this,hx,{writable:!0,value:void 0}),(0,i._)(this,hw,{writable:!0,value:void 0})}}function hE(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r._)(this,hw),t=(0,r._)(this,hm)+e/2*(0,r._)(this,hb);return(0,r._)(this,hx)%180==0?[t/(0,r._)(this,hv),t/(0,r._)(this,hy)]:[t/(0,r._)(this,hy),t/(0,r._)(this,hv)]}function hT(){let[e,t,n,i]=(0,r._)(this,hp),[a,o]=(0,s._)(this,hk,hE).call(this,0);return[e+a,t+o,n-2*a,i-2*o]}function hM(){let e=(0,a._)(this,hp,new Float32Array([1/0,1/0,-1/0,-1/0]));for(let{line:t}of(0,r._)(this,hg)){if(t.length<=12){for(let n=4,r=t.length;n<r;n+=6){let[r,i]=t.subarray(n,n+2);e[0]=Math.min(e[0],r),e[1]=Math.min(e[1],i),e[2]=Math.max(e[2],r),e[3]=Math.max(e[3],i)}continue}let n=t[4],r=t[5];for(let i=6,a=t.length;i<a;i+=6){let[a,o,s,l,u,c]=t.subarray(i,i+6);ee.bezierBoundingBox(n,r,a,o,s,l,u,c,e),n=u,r=c}}let[t,n]=(0,s._)(this,hk,hE).call(this);e[0]=Math.min(1,Math.max(0,e[0]-t)),e[1]=Math.min(1,Math.max(0,e[1]-n)),e[2]=Math.min(1,Math.max(0,e[2]+t)),e[3]=Math.min(1,Math.max(0,e[3]+n)),e[2]-=e[0],e[3]-=e[1]}function hI(e){let[t,n]=(0,s._)(this,hk,hE).call(this);(0,a._)(this,hw,e);let[i,o]=(0,s._)(this,hk,hE).call(this),[l,u]=[i-t,o-n],c=(0,r._)(this,hp);return c[0]-=l,c[1]-=u,c[2]+=2*l,c[3]+=2*u,c}var hN=new WeakMap;class hD extends dj{updateSVGProperty(e,t){"stroke-width"===e&&(null!=t||(t=this["stroke-width"]),t*=(0,r._)(this,hN).realScale),super.updateSVGProperty(e,t)}clone(){let e=new hD((0,r._)(this,hN));return e.updateAll(this),e}constructor(e){super(),(0,i._)(this,hN,{writable:!0,value:void 0}),(0,a._)(this,hN,e),super.updateProperties({fill:"none",stroke:rq._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}}var hP=new WeakSet;class hR extends d${static initialize(e,t){rq.initialize(e,t),this._defaultDrawingOptions=new hD(t.viewParameters)}static getDefaultDrawingOptions(e){let t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!0}static get typesMap(){return B(this,"typesMap",new Map([[C.INK_THICKNESS,"stroke-width"],[C.INK_COLOR,"stroke"],[C.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,t,n,r,i){return new hd(e,t,n,r,i,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,t,n,r,i,a){return hA.deserialize(e,t,n,r,i,a)}static async deserialize(e,t,n){let r=null;if(e instanceof lY){let{data:{inkLists:t,rect:n,rotation:i,id:a,color:o,opacity:s,borderStyle:{rawWidth:l},popupRef:u},parent:{page:{pageNumber:c}}}=e;r=e={annotationType:_.INK,color:Array.from(o),thickness:l,opacity:s,paths:{points:t},boxes:null,pageIndex:c-1,rect:n.slice(0),rotation:i,id:a,deleted:!1,popupRef:u}}let i=await super.deserialize(e,t,n);return i.annotationElementId=e.id||null,i._initialData=r,i}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();let{_drawId:e,_drawingOptions:t,parent:n}=this;t.updateSVGProperty("stroke-width"),n.drawLayer.updateProperties(e,t.toSVGProperties())}static onScaleChangingWhenDrawing(){let e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions(e){let{color:t,thickness:n,opacity:r}=e;this._drawingOptions=hR.getDefaultDrawingOptions({stroke:ee.makeHexColor(...t),"stroke-width":n,"stroke-opacity":r})}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();let{lines:t,points:n,rect:r}=this.serializeDraw(e),{_drawingOptions:{stroke:i,"stroke-opacity":a,"stroke-width":o}}=this,l={annotationType:_.INK,color:rq._colorManager.convert(i),opacity:a,thickness:o,paths:{lines:t,points:n},pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?l:this.annotationElementId&&!(0,s._)(this,hP,hO).call(this,l)?null:(l.id=this.annotationElementId,l)}renderAnnotationElement(e){let{points:t,rect:n}=this.serializeDraw(!1);return e.updateEdited({rect:n,thickness:this._drawingOptions["stroke-width"],points:t}),null}constructor(e){super({...e,name:"inkEditor"}),(0,l._)(this,hP),this._willKeepAspectRatio=!0}}function hO(e){let{color:t,thickness:n,opacity:r,pageIndex:i}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||e.color.some((e,n)=>e!==t[n])||e.thickness!==n||e.opacity!==r||e.pageIndex!==i}(0,h._)(hR,"_type","ink"),(0,h._)(hR,"_editorType",_.INK),(0,h._)(hR,"_defaultDrawingOptions",null);var hj=new WeakMap,hF=new WeakMap,hL=new WeakMap,hz=new WeakMap,hB=new WeakMap,hU=new WeakMap,hH=new WeakMap,hW=new WeakMap,hV=new WeakMap,hq=new WeakMap,hG=new WeakSet,h$=new WeakSet,hK=new WeakSet,hY=new WeakSet,hX=new WeakSet,hZ=new WeakSet,hJ=new WeakSet,hQ=new WeakSet;class h0 extends rq{static initialize(e,t){rq.initialize(e,t)}static get supportedTypes(){return B(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(e=>"image/".concat(e)))}static get supportedTypesStr(){return B(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,t){t.pasteEditor(_.STAMP,{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!(null==(e=this.altTextData)?void 0:e.altText)}}static computeTelemetryFinalData(e){var t,n;let r=e.get("hasAltText");return{hasAltText:null!=(t=r.get(!0))?t:0,hasNoAltText:null!=(n=r.get(!1))?n:0}}async mlGuessAltText(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(this.hasAltTextData())return null;let{mlManager:n}=this._uiManager;if(!n)throw Error("No ML.");if(!await n.isEnabledFor("altText"))throw Error("ML isn't enabled for alt text.");let{data:r,width:i,height:a}=e||this.copyCanvas(null,null,!0).imageData,o=await n.guess({name:"altText",request:{data:r,width:i,height:a,channels:r.length/(i*a)}});if(!o)throw Error("No response from the AI service.");if(o.error)throw Error("Error from the AI service.");if(o.cancel)return null;if(!o.output)throw Error("No valid response from the AI service.");let s=o.output;return await this.setGuessedAltText(s),t&&!this.hasAltTextData()&&(this.altTextData={alt:s,decorative:!1}),s}remove(){if((0,r._)(this,hF)){var e;(0,a._)(this,hj,null),this._uiManager.imageManager.deleteId((0,r._)(this,hF)),null==(e=(0,r._)(this,hH))||e.remove(),(0,a._)(this,hH,null),(0,r._)(this,hW)&&(clearTimeout((0,r._)(this,hW)),(0,a._)(this,hW,null))}super.remove()}rebuild(){if(!this.parent){(0,r._)(this,hF)&&(0,s._)(this,hK,h3).call(this);return}super.rebuild(),null!==this.div&&((0,r._)(this,hF)&&null===(0,r._)(this,hH)&&(0,s._)(this,hK,h3).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!((0,r._)(this,hL)||(0,r._)(this,hj)||(0,r._)(this,hz)||(0,r._)(this,hB)||(0,r._)(this,hF))}get isResizable(){return!0}render(){let e,t;if(this.div)return this.div;if(this.width&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),(0,r._)(this,hj)?(0,s._)(this,hY,h5).call(this):(0,s._)(this,hK,h3).call(this),this.width&&!this.annotationElementId){let[n,r]=this.parentDimensions;this.setAt(e*n,t*r,this.width*n,this.height*r)}return this._uiManager.addShouldRescale(this),this.div}_onResized(){this.onScaleChanging()}onScaleChanging(){this.parent&&(null!==(0,r._)(this,hW)&&clearTimeout((0,r._)(this,hW)),(0,a._)(this,hW,setTimeout(()=>{(0,a._)(this,hW,null),(0,s._)(this,hZ,h9).call(this)},200)))}copyCanvas(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e||(e=224);let{width:i,height:a}=(0,r._)(this,hj),o=new eE,l=(0,r._)(this,hj),u=i,c=a,d=null;if(t){var h,p;if(i>t||a>t){let e=Math.min(t/i,t/a);u=Math.floor(i*e),c=Math.floor(a*e)}let e=(d=document.createElement("canvas")).width=Math.ceil(u*o.sx),n=d.height=Math.ceil(c*o.sy);(0,r._)(this,hV)||(l=(0,s._)(this,hX,h4).call(this,e,n));let f=d.getContext("2d");f.filter=this._uiManager.hcmFilter;let m="white",g="#cfcfd8";"none"!==this._uiManager.hcmFilter?g="black":(null==(h=(p=window).matchMedia)?void 0:h.call(p,"(prefers-color-scheme: dark)").matches)&&(m="#8f8f9d",g="#42414d");let y=15*o.sx,b=15*o.sy,x=new OffscreenCanvas(2*y,2*b),w=x.getContext("2d");w.fillStyle=m,w.fillRect(0,0,2*y,2*b),w.fillStyle=g,w.fillRect(0,0,y,b),w.fillRect(y,b,y,b),f.fillStyle=f.createPattern(x,"repeat"),f.fillRect(0,0,e,n),f.drawImage(l,0,0,l.width,l.height,0,0,e,n)}let f=null;if(n){let t,n;if(o.symmetric&&l.width<e&&l.height<e)t=l.width,n=l.height;else if(l=(0,r._)(this,hj),i>e||a>e){let o=Math.min(e/i,e/a);t=Math.floor(i*o),n=Math.floor(a*o),(0,r._)(this,hV)||(l=(0,s._)(this,hX,h4).call(this,t,n))}let u=new OffscreenCanvas(t,n).getContext("2d",{willReadFrequently:!0});u.drawImage(l,0,0,l.width,l.height,0,0,t,n),f={width:t,height:n,data:u.getImageData(0,0,t,n).data}}return{canvas:d,width:u,height:c,imageData:f}}getImageForAltText(){return(0,r._)(this,hH)}static async deserialize(e,t,n){let r=null;if(e instanceof l1){var i;let{data:{rect:a,rotation:o,id:s,structParent:l,popupRef:u},container:c,parent:{page:{pageNumber:d}}}=e,h=c.querySelector("canvas"),p=n.imageManager.getFromCanvas(c.id,h);h.remove();let f=(null==(i=await t._structTree.getAriaAttributes("".concat(eo).concat(s)))?void 0:i.get("aria-label"))||"";r=e={annotationType:_.STAMP,bitmapId:p.id,bitmap:p.bitmap,pageIndex:d-1,rect:a.slice(0),rotation:o,id:s,deleted:!1,accessibilityData:{decorative:!1,altText:f},isSvg:!1,structParent:l,popupRef:u}}let o=await super.deserialize(e,t,n),{rect:s,bitmap:l,bitmapUrl:u,bitmapId:c,isSvg:d,accessibilityData:h}=e;c&&n.imageManager.isValidId(c)?((0,a._)(o,hF,c),l&&(0,a._)(o,hj,l)):(0,a._)(o,hz,u),(0,a._)(o,hV,d);let[p,f]=o.pageDimensions;return o.width=(s[2]-s[0])/p,o.height=(s[3]-s[1])/f,o.annotationElementId=e.id||null,h&&(o.altTextData=h),o._initialData=r,(0,a._)(o,hq,!!r),o}serialize(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();let i={annotationType:_.STAMP,bitmapId:(0,r._)(this,hF),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:(0,r._)(this,hV),structTreeParentId:this._structTreeParentId};if(t)return i.bitmapUrl=(0,s._)(this,hJ,h8).call(this,!0),i.accessibilityData=this.serializeAltText(!0),i;let{decorative:a,altText:o}=this.serializeAltText(!1);if(!a&&o&&(i.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){let t=(0,s._)(this,hQ,h6).call(this,i);if(t.isSame)return null;t.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=null!=(e=this._initialData.structParent)?e:-1}if(i.id=this.annotationElementId,null===n)return i;n.stamps||(n.stamps=new Map);let l=(0,r._)(this,hV)?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(n.stamps.has((0,r._)(this,hF))){if((0,r._)(this,hV)){let e=n.stamps.get((0,r._)(this,hF));l>e.area&&(e.area=l,e.serialized.bitmap.close(),e.serialized.bitmap=(0,s._)(this,hJ,h8).call(this,!1))}}else n.stamps.set((0,r._)(this,hF),{area:l,serialized:i}),i.bitmap=(0,s._)(this,hJ,h8).call(this,!1);return i}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}constructor(e){super({...e,name:"stampEditor"}),(0,l._)(this,hG),(0,l._)(this,h$),(0,l._)(this,hK),(0,l._)(this,hY),(0,l._)(this,hX),(0,l._)(this,hZ),(0,l._)(this,hJ),(0,l._)(this,hQ),(0,i._)(this,hj,{writable:!0,value:null}),(0,i._)(this,hF,{writable:!0,value:null}),(0,i._)(this,hL,{writable:!0,value:null}),(0,i._)(this,hz,{writable:!0,value:null}),(0,i._)(this,hB,{writable:!0,value:null}),(0,i._)(this,hU,{writable:!0,value:""}),(0,i._)(this,hH,{writable:!0,value:null}),(0,i._)(this,hW,{writable:!0,value:null}),(0,i._)(this,hV,{writable:!0,value:!1}),(0,i._)(this,hq,{writable:!0,value:!1}),(0,a._)(this,hz,e.bitmapUrl),(0,a._)(this,hB,e.bitmapFile)}}function h1(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return void this.remove();(0,a._)(this,hj,e.bitmap),t||((0,a._)(this,hF,e.id),(0,a._)(this,hV,e.isSvg)),e.file&&(0,a._)(this,hU,e.file.name),(0,s._)(this,hY,h5).call(this)}function h2(){if((0,a._)(this,hL,null),this._uiManager.enableWaiting(!1),(0,r._)(this,hH)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&(0,r._)(this,hj)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&(0,r._)(this,hj)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch(e){}}this.div.focus()}}function h3(){if((0,r._)(this,hF)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId((0,r._)(this,hF)).then(e=>(0,s._)(this,hG,h1).call(this,e,!0)).finally(()=>(0,s._)(this,h$,h2).call(this));return}if((0,r._)(this,hz)){let e=(0,r._)(this,hz);(0,a._)(this,hz,null),this._uiManager.enableWaiting(!0),(0,a._)(this,hL,this._uiManager.imageManager.getFromUrl(e).then(e=>(0,s._)(this,hG,h1).call(this,e)).finally(()=>(0,s._)(this,h$,h2).call(this)));return}if((0,r._)(this,hB)){let e=(0,r._)(this,hB);(0,a._)(this,hB,null),this._uiManager.enableWaiting(!0),(0,a._)(this,hL,this._uiManager.imageManager.getFromFile(e).then(e=>(0,s._)(this,hG,h1).call(this,e)).finally(()=>(0,s._)(this,h$,h2).call(this)));return}let e=document.createElement("input");e.type="file",e.accept=h0.supportedTypesStr;let t=this._uiManager._signal;(0,a._)(this,hL,new Promise(n=>{e.addEventListener("change",async()=>{if(e.files&&0!==e.files.length){this._uiManager.enableWaiting(!0);let t=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),(0,s._)(this,hG,h1).call(this,t)}else this.remove();n()},{signal:t}),e.addEventListener("cancel",()=>{this.remove(),n()},{signal:t})}).finally(()=>(0,s._)(this,h$,h2).call(this))),e.click()}function h5(){var e;let{div:t}=this,{width:n,height:i}=(0,r._)(this,hj),[o,l]=this.pageDimensions;if(this.width)n=this.width*o,i=this.height*l;else if(n>.75*o||i>.75*l){let e=Math.min(.75*o/n,.75*l/i);n*=e,i*=e}let[u,c]=this.parentDimensions;this.setDims(n*u/o,i*c/l),this._uiManager.enableWaiting(!1);let d=(0,a._)(this,hH,document.createElement("canvas"));d.setAttribute("role","img"),this.addContainer(d),this.width=n/o,this.height=i/l,(null==(e=this._initialOptions)?void 0:e.isCentered)?this.center():this.fixAndSetPosition(),this._initialOptions=null,this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&!this.annotationElementId||(t.hidden=!1),(0,s._)(this,hZ,h9).call(this),(0,r._)(this,hq)||(this.parent.addUndoableEditor(this),(0,a._)(this,hq,!0)),this._reportTelemetry({action:"inserted_image"}),(0,r._)(this,hU)&&d.setAttribute("aria-label",(0,r._)(this,hU))}function h4(e,t){let{width:n,height:i}=(0,r._)(this,hj),a=n,o=i,s=(0,r._)(this,hj);for(;a>2*e||o>2*t;){let n=a,r=o;a>2*e&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));let i=new OffscreenCanvas(a,o);i.getContext("2d").drawImage(s,0,0,n,r,0,0,a,o),s=i.transferToImageBitmap()}return s}function h9(){let[e,t]=this.parentDimensions,{width:n,height:i}=this,a=new eE,o=Math.ceil(n*e*a.sx),l=Math.ceil(i*t*a.sy),u=(0,r._)(this,hH);if(!u||u.width===o&&u.height===l)return;u.width=o,u.height=l;let c=(0,r._)(this,hV)?(0,r._)(this,hj):(0,s._)(this,hX,h4).call(this,o,l),d=u.getContext("2d");d.filter=this._uiManager.hcmFilter,d.drawImage(c,0,0,c.width,c.height,0,0,o,l)}function h8(e){if(e){if((0,r._)(this,hV)){let e=this._uiManager.imageManager.getSvgUrl((0,r._)(this,hF));if(e)return e}let e=document.createElement("canvas");return{width:e.width,height:e.height}=(0,r._)(this,hj),e.getContext("2d").drawImage((0,r._)(this,hj),0,0),e.toDataURL()}if((0,r._)(this,hV)){let[e,t]=this.pageDimensions,n=Math.round(this.width*e*el.PDF_TO_CSS_UNITS),i=Math.round(this.height*t*el.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(n,i);return a.getContext("2d").drawImage((0,r._)(this,hj),0,0,(0,r._)(this,hj).width,(0,r._)(this,hj).height,0,0,n,i),a.transferToImageBitmap()}return structuredClone((0,r._)(this,hj))}function h6(e){var t;let{pageIndex:n,accessibilityData:{altText:r}}=this._initialData,i=e.pageIndex===n,a=((null==(t=e.accessibilityData)?void 0:t.alt)||"")===r;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&i&&a,isSameAltText:a}}(0,h._)(h0,"_type","stamp"),(0,h._)(h0,"_editorType",_.STAMP);var h7=new WeakMap,pe=new WeakMap,pt=new WeakMap,pn=new WeakMap,pr=new WeakMap,pi=new WeakMap,pa=new WeakMap,po=new WeakMap,ps=new WeakMap,pl=new WeakMap,pu=new WeakMap,pc=new WeakMap,pd=new WeakMap,ph=new WeakMap,pp=new WeakSet,pf=new WeakMap,pm=new WeakSet,pg=new WeakSet,pv=new WeakSet;class py{get isEmpty(){return 0===(0,r._)(this,pi).size}get isInvisible(){return this.isEmpty&&(0,r._)(this,ph).getMode()===_.NONE}updateToolbar(e){(0,r._)(this,ph).updateToolbar(e)}updateMode(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r._)(this,ph).getMode();switch((0,s._)(this,pv,p_).call(this),e){case _.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case _.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case _.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);let{classList:t}=this.div;for(let n of(0,u._)(py,py,pb).values())t.toggle("".concat(n._type,"Editing"),e===n._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===(null==(t=(0,r._)(this,pc))?void 0:t.div)}setEditingState(e){(0,r._)(this,ph).setEditingState(e)}addCommands(e){(0,r._)(this,ph).addCommands(e)}cleanUndoStack(e){(0,r._)(this,ph).cleanUndoStack(e)}toggleDrawing(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.div.classList.toggle("drawing",!e)}togglePointerEvents(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];null==(e=(0,r._)(this,pt))||e.div.classList.toggle("disabled",!t)}async enable(){(0,a._)(this,ps,!0),this.div.tabIndex=0,this.togglePointerEvents(!0);let e=new Set;for(let t of(0,r._)(this,pi).values())t.enableEditing(),t.show(!0),t.annotationElementId&&((0,r._)(this,ph).removeChangedExistingAnnotation(t),e.add(t.annotationElementId));if(!(0,r._)(this,pt))return void(0,a._)(this,ps,!1);for(let t of(0,r._)(this,pt).getEditableAnnotations()){if(t.hide(),(0,r._)(this,ph).isDeletedAnnotationElement(t.data.id)||e.has(t.data.id))continue;let n=await this.deserialize(t);n&&(this.addOrRebuild(n),n.enableEditing())}(0,a._)(this,ps,!1)}disable(){(0,a._)(this,po,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);let e=new Map,t=new Map;for(let i of(0,r._)(this,pi).values()){var n;if(i.disableEditing(),i.annotationElementId){if(null!==i.serialize()){e.set(i.annotationElementId,i);continue}t.set(i.annotationElementId,i),null==(n=this.getEditableAnnotation(i.annotationElementId))||n.show(),i.remove()}}if((0,r._)(this,pt))for(let n of(0,r._)(this,pt).getEditableAnnotations()){let{id:i}=n.data;if((0,r._)(this,ph).isDeletedAnnotationElement(i))continue;let a=t.get(i);if(a){a.resetAnnotationElement(n),a.show(!1),n.show();continue}(a=e.get(i))&&((0,r._)(this,ph).addChangedExistingAnnotation(a),a.renderAnnotationElement(n)&&a.show(!1)),n.show()}(0,s._)(this,pv,p_).call(this),this.isEmpty&&(this.div.hidden=!0);let{classList:i}=this.div;for(let e of(0,u._)(py,py,pb).values())i.remove("".concat(e._type,"Editing"));this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),(0,a._)(this,po,!1)}getEditableAnnotation(e){var t;return(null==(t=(0,r._)(this,pt))?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){(0,r._)(this,ph).getActive()!==e&&(0,r._)(this,ph).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(null==(e=(0,r._)(this,pc))?void 0:e.div)&&!(0,r._)(this,pd)){(0,a._)(this,pd,new AbortController);let e=(0,r._)(this,ph).combinedSignal((0,r._)(this,pd));(0,r._)(this,pc).div.addEventListener("pointerdown",(0,s._)(this,pp,px).bind(this),{signal:e}),(0,r._)(this,pc).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(null==(e=(0,r._)(this,pc))?void 0:e.div)&&(0,r._)(this,pd)&&((0,r._)(this,pd).abort(),(0,a._)(this,pd,null),(0,r._)(this,pc).div.classList.remove("highlighting"))}enableClick(){if((0,r._)(this,pn))return;(0,a._)(this,pn,new AbortController);let e=(0,r._)(this,ph).combinedSignal((0,r._)(this,pn));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});let t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;null==(e=(0,r._)(this,pn))||e.abort(),(0,a._)(this,pn,null)}attach(e){(0,r._)(this,pi).set(e.id,e);let{annotationElementId:t}=e;t&&(0,r._)(this,ph).isDeletedAnnotationElement(t)&&(0,r._)(this,ph).removeDeletedAnnotationElement(e)}detach(e){var t;(0,r._)(this,pi).delete(e.id),null==(t=(0,r._)(this,h7))||t.removePointerInTextLayer(e.contentDiv),!(0,r._)(this,po)&&e.annotationElementId&&(0,r._)(this,ph).addDeletedAnnotationElement(e)}remove(e){this.detach(e),(0,r._)(this,ph).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&((0,r._)(this,ph).addDeletedAnnotationElement(e.annotationElementId),rq.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),null==(t=e.parent)||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(e.parent!==this||!e.isAttachedToDOM){if(this.changeParent(e),(0,r._)(this,ph).addEditor(e),this.attach(e),!e.isAttachedToDOM){let t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!(0,r._)(this,ps)),(0,r._)(this,ph).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var t;if(!e.isAttachedToDOM)return;let{activeElement:n}=document;e.div.contains(n)&&!(0,r._)(this,pr)&&(e._focusEventsAllowed=!1,(0,a._)(this,pr,setTimeout(()=>{(0,a._)(this,pr,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:(0,r._)(this,ph)._signal}),n.focus())},0))),e._structTreeParentId=null==(t=(0,r._)(this,h7))?void 0:t.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){this.addCommands({cmd:()=>e._uiManager.rebuild(e),undo:()=>{e.remove()},mustExec:!1})}getNextId(){return(0,r._)(this,ph).getId()}combinedSignal(e){return(0,r._)(this,ph).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return null==(e=(0,r._)(this,pf))?void 0:e.canCreateNewEmptyEditor()}pasteEditor(e,t){(0,r._)(this,ph).updateToolbar(e),(0,r._)(this,ph).updateMode(e);let{offsetX:n,offsetY:i}=(0,s._)(this,pg,pS).call(this),a=this.getNextId(),o=(0,s._)(this,pm,pk).call(this,{parent:this,id:a,x:n,y:i,uiManager:(0,r._)(this,ph),isCentered:!0,...t});o&&this.add(o)}async deserialize(e){var t,n;return await (null==(t=(0,u._)(py,py,pb).get(null!=(n=e.annotationType)?n:e.annotationEditorType))?void 0:t.deserialize(e,this,(0,r._)(this,ph)))||null}createAndAddNewEditor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.getNextId(),a=(0,s._)(this,pm,pk).call(this,{parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:(0,r._)(this,ph),isCentered:t,...n});return a&&this.add(a),a}addNewEditor(){this.createAndAddNewEditor((0,s._)(this,pg,pS).call(this),!0)}setSelected(e){(0,r._)(this,ph).setSelected(e)}toggleSelected(e){(0,r._)(this,ph).toggleSelected(e)}unselect(e){(0,r._)(this,ph).unselect(e)}pointerup(e){var t;let{isMac:n}=J.platform;if(0===e.button&&(!e.ctrlKey||!n)&&e.target===this.div&&(0,r._)(this,pa)&&((0,a._)(this,pa,!1),null==(t=(0,r._)(this,pf))||!t.isDrawer||!(0,r._)(this,pf).supportMultipleDrawings)){if(!(0,r._)(this,pe))return void(0,a._)(this,pe,!0);if((0,r._)(this,ph).getMode()===_.STAMP)return void(0,r._)(this,ph).unselectAll();this.createAndAddNewEditor(e,!1)}}pointerdown(e){var t;if((0,r._)(this,ph).getMode()===_.HIGHLIGHT&&this.enableTextSelection(),(0,r._)(this,pa))return void(0,a._)(this,pa,!1);let{isMac:n}=J.platform;if(0!==e.button||e.ctrlKey&&n||e.target!==this.div)return;if((0,a._)(this,pa,!0),null==(t=(0,r._)(this,pf))?void 0:t.isDrawer)return void this.startDrawingSession(e);let i=(0,r._)(this,ph).getActive();(0,a._)(this,pe,!i||i.isEmpty())}startDrawingSession(e){if(this.div.focus(),(0,r._)(this,pl))return void(0,r._)(this,pf).startDrawing(this,(0,r._)(this,ph),!1,e);(0,r._)(this,ph).setCurrentDrawingSession(this),(0,a._)(this,pl,new AbortController);let t=(0,r._)(this,ph).combinedSignal((0,r._)(this,pl));this.div.addEventListener("blur",e=>{let{relatedTarget:t}=e;t&&!this.div.contains(t)&&((0,a._)(this,pu,null),this.commitOrRemove())},{signal:t}),(0,r._)(this,pf).startDrawing(this,(0,r._)(this,ph),!1,e)}pause(e){if(e){let{activeElement:e}=document;this.div.contains(e)&&(0,a._)(this,pu,e);return}(0,r._)(this,pu)&&setTimeout(()=>{var e;null==(e=(0,r._)(this,pu))||e.focus(),(0,a._)(this,pu,null)},0)}endDrawingSession(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,r._)(this,pl)?((0,r._)(this,ph).setCurrentDrawingSession(null),(0,r._)(this,pl).abort(),(0,a._)(this,pl,null),(0,a._)(this,pu,null),(0,r._)(this,pf).endDrawing(e)):null}findNewParent(e,t,n){let i=(0,r._)(this,ph).findParent(t,n);return null!==i&&i!==this&&(i.changeParent(e),!0)}commitOrRemove(){return!!(0,r._)(this,pl)&&(this.endDrawingSession(),!0)}onScaleChanging(){(0,r._)(this,pl)&&(0,r._)(this,pf).onScaleChangingWhenDrawing(this)}destroy(){var e,t;for(let n of(this.commitOrRemove(),(null==(e=(0,r._)(this,ph).getActive())?void 0:e.parent)===this&&((0,r._)(this,ph).commitOrRemove(),(0,r._)(this,ph).setActiveEditor(null)),(0,r._)(this,pr)&&(clearTimeout((0,r._)(this,pr)),(0,a._)(this,pr,null)),(0,r._)(this,pi).values()))null==(t=(0,r._)(this,h7))||t.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,(0,r._)(this,pi).clear(),(0,r._)(this,ph).removeLayer(this)}render(e){let{viewport:t}=e;for(let e of(this.viewport=t,eA(this.div,t),(0,r._)(this,ph).getEditors(this.pageIndex)))this.add(e),e.rebuild();this.updateMode()}update(e){let{viewport:t}=e;(0,r._)(this,ph).commitOrRemove(),(0,s._)(this,pv,p_).call(this);let n=this.viewport.rotation,i=t.rotation;if(this.viewport=t,eA(this.div,{rotation:i}),n!==i)for(let e of(0,r._)(this,pi).values())e.rotate(i)}get pageDimensions(){let{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return(0,r._)(this,ph).viewParameters.realScale}constructor({uiManager:e,pageIndex:t,div:n,structTreeLayer:o,accessibilityManager:s,annotationLayer:c,drawLayer:d,textLayer:h,viewport:p,l10n:f}){(0,l._)(this,pp),(0,i._)(this,pf,{get:pw,set:void 0}),(0,l._)(this,pm),(0,l._)(this,pg),(0,l._)(this,pv),(0,i._)(this,h7,{writable:!0,value:void 0}),(0,i._)(this,pe,{writable:!0,value:!1}),(0,i._)(this,pt,{writable:!0,value:null}),(0,i._)(this,pn,{writable:!0,value:null}),(0,i._)(this,pr,{writable:!0,value:null}),(0,i._)(this,pi,{writable:!0,value:new Map}),(0,i._)(this,pa,{writable:!0,value:!1}),(0,i._)(this,po,{writable:!0,value:!1}),(0,i._)(this,ps,{writable:!0,value:!1}),(0,i._)(this,pl,{writable:!0,value:null}),(0,i._)(this,pu,{writable:!0,value:null}),(0,i._)(this,pc,{writable:!0,value:null}),(0,i._)(this,pd,{writable:!0,value:null}),(0,i._)(this,ph,{writable:!0,value:void 0});let m=[...(0,u._)(py,py,pb).values()];if(!py._initialized)for(let t of(py._initialized=!0,m))t.initialize(f,e);e.registerEditorTypes(m),(0,a._)(this,ph,e),this.pageIndex=t,this.div=n,(0,a._)(this,h7,s),(0,a._)(this,pt,c),this.viewport=p,(0,a._)(this,pc,h),this.drawLayer=d,this._structTree=o,(0,r._)(this,ph).addLayer(this)}}(0,h._)(py,"_initialized",!1);var pb={writable:!0,value:new Map([uy,hR,h0,dy].map(e=>[e._editorType,e]))};function px(e){(0,r._)(this,ph).unselectAll();let{target:t}=e;if(t===(0,r._)(this,pc).div||("img"===t.getAttribute("role")||t.classList.contains("endOfContent"))&&(0,r._)(this,pc).div.contains(t)){let{isMac:t}=J.platform;if(0!==e.button||e.ctrlKey&&t)return;(0,r._)(this,ph).showAllEditors("highlight",!0,!0),(0,r._)(this,pc).div.classList.add("free"),this.toggleDrawing(),dy.startHighlighting(this,"ltr"===(0,r._)(this,ph).direction,{target:(0,r._)(this,pc).div,x:e.x,y:e.y}),(0,r._)(this,pc).div.addEventListener("pointerup",()=>{(0,r._)(this,pc).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:(0,r._)(this,ph)._signal}),e.preventDefault()}}function pw(){return(0,u._)(py,py,pb).get((0,r._)(this,ph).getMode())}function pk(e){let t=(0,r._)(this,pf);return t?new t.prototype.constructor(e):null}function pS(){let{x:e,y:t,width:n,height:r}=this.div.getBoundingClientRect(),i=Math.max(0,e),a=Math.max(0,t),o=Math.min(window.innerWidth,e+n),s=Math.min(window.innerHeight,t+r),l=(i+o)/2-e,u=(a+s)/2-t,[c,d]=this.viewport.rotation%180==0?[l,u]:[u,l];return{offsetX:c,offsetY:d}}function p_(){for(let e of(0,r._)(this,pi).values())e.isEmpty()&&e.remove()}var pC=new WeakMap,pA=new WeakMap,pE=new WeakMap,pT=new WeakMap,pM=new WeakSet,pI=new WeakSet,pN=new WeakSet;class pD{setParent(e){if(!(0,r._)(this,pC))return void(0,a._)(this,pC,e);if((0,r._)(this,pC)!==e){if((0,r._)(this,pE).size>0)for(let t of(0,r._)(this,pE).values())t.remove(),e.append(t);(0,a._)(this,pC,e)}}static get _svgFactory(){return B(this,"_svgFactory",new sR)}draw(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=(0,o._)(this,pA).value++,a=(0,s._)(this,pM,pR).call(this),l=pD._svgFactory.createElement("defs");a.append(l);let u=pD._svgFactory.createElement("path");l.append(u);let c="path_p".concat(this.pageIndex,"_").concat(i);u.setAttribute("id",c),u.setAttribute("vector-effect","non-scaling-stroke"),t&&(0,r._)(this,pT).set(i,u);let d=n?(0,s._)(this,pI,pO).call(this,l,c):null,h=pD._svgFactory.createElement("use");return a.append(h),h.setAttribute("href","#".concat(c)),this.updateProperties(a,e),(0,r._)(this,pE).set(i,a),{id:i,clipPathId:"url(#".concat(d,")")}}drawOutline(e,t){let n,i=(0,o._)(this,pA).value++,a=(0,s._)(this,pM,pR).call(this),l=pD._svgFactory.createElement("defs");a.append(l);let u=pD._svgFactory.createElement("path");l.append(u);let c="path_p".concat(this.pageIndex,"_").concat(i);if(u.setAttribute("id",c),u.setAttribute("vector-effect","non-scaling-stroke"),t){let e=pD._svgFactory.createElement("mask");l.append(e),n="mask_p".concat(this.pageIndex,"_").concat(i),e.setAttribute("id",n),e.setAttribute("maskUnits","objectBoundingBox");let t=pD._svgFactory.createElement("rect");e.append(t),t.setAttribute("width","1"),t.setAttribute("height","1"),t.setAttribute("fill","white");let r=pD._svgFactory.createElement("use");e.append(r),r.setAttribute("href","#".concat(c)),r.setAttribute("stroke","none"),r.setAttribute("fill","black"),r.setAttribute("fill-rule","nonzero"),r.classList.add("mask")}let d=pD._svgFactory.createElement("use");a.append(d),d.setAttribute("href","#".concat(c)),n&&d.setAttribute("mask","url(#".concat(n,")"));let h=d.cloneNode();return a.append(h),d.classList.add("mainOutline"),h.classList.add("secondaryOutline"),this.updateProperties(a,e),(0,r._)(this,pE).set(i,a),i}finalizeDraw(e,t){(0,r._)(this,pT).delete(e),this.updateProperties(e,t)}updateProperties(e,t){if(!t)return;let{root:n,bbox:i,rootClass:a,path:o}=t,l="number"==typeof e?(0,r._)(this,pE).get(e):e;if(l){if(n&&(0,s._)(this,pN,pj).call(this,l,n),i&&(0,f._)(pD,pD,pP).call(pD,l,i),a){let{classList:e}=l;for(let[t,n]of Object.entries(a))e.toggle(t,n)}if(o){let e=l.firstChild.firstChild;(0,s._)(this,pN,pj).call(this,e,o)}}}updateParent(e,t){if(t===this)return;let n=(0,r._)(this,pE).get(e);n&&((0,r._)(t,pC).append(n),(0,r._)(this,pE).delete(e),(0,r._)(t,pE).set(e,n))}remove(e){(0,r._)(this,pT).delete(e),null!==(0,r._)(this,pC)&&((0,r._)(this,pE).get(e).remove(),(0,r._)(this,pE).delete(e))}destroy(){for(let e of((0,a._)(this,pC,null),(0,r._)(this,pE).values()))e.remove();(0,r._)(this,pE).clear(),(0,r._)(this,pT).clear()}constructor({pageIndex:e}){(0,l._)(this,pM),(0,l._)(this,pI),(0,l._)(this,pN),(0,i._)(this,pC,{writable:!0,value:null}),(0,i._)(this,pA,{writable:!0,value:0}),(0,i._)(this,pE,{writable:!0,value:new Map}),(0,i._)(this,pT,{writable:!0,value:new Map}),this.pageIndex=e}}function pP(e,t){let[n,r,i,a]=t,{style:o}=e;o.top="".concat(100*r,"%"),o.left="".concat(100*n,"%"),o.width="".concat(100*i,"%"),o.height="".concat(100*a,"%")}function pR(){let e=pD._svgFactory.create(1,1,!0);return(0,r._)(this,pC).append(e),e.setAttribute("aria-hidden",!0),e}function pO(e,t){let n=pD._svgFactory.createElement("clipPath");e.append(n);let r="clip_".concat(t);n.setAttribute("id",r),n.setAttribute("clipPathUnits","objectBoundingBox");let i=pD._svgFactory.createElement("use");return n.append(i),i.setAttribute("href","#".concat(t)),i.classList.add("clip"),r}function pj(e,t){for(let[n,r]of Object.entries(t))null===r?e.removeAttribute(n):e.setAttribute(n,r)}globalThis.pdfjsTestingUtils={HighlightOutliner:cf},y.AbortException,y.AnnotationEditorLayer,y.AnnotationEditorParamsType,y.AnnotationEditorType,y.AnnotationEditorUIManager;var pF=y.AnnotationLayer;y.AnnotationMode,y.ColorPicker,y.DOMSVGFactory,y.DrawLayer,y.FeatureTest;var pL=y.GlobalWorkerOptions;y.ImageKind,y.InvalidPDFException,y.MissingPDFException,y.OPS,y.OutputScale,y.PDFDataRangeTransport,y.PDFDateString,y.PDFWorker,y.PasswordResponses,y.PermissionFlag,y.PixelsPerInch,y.RenderingCancelledException;var pz=y.TextLayer;y.TouchManager,y.UnexpectedResponseException,y.Util,y.VerbosityLevel,y.XfaLayer,y.build,y.createValidAbsoluteUrl,y.fetchData;var pB=y.getDocument;y.getFilenameFromUrl,y.getPdfFilenameFromUrl,y.getXfaPageViewport,y.isDataScheme,y.isPdfFile,y.noContextMenu,y.normalizeUnicode,y.setLayerDimensions,y.shadow,y.stopEvent,y.version},263842:e=>{"use strict";e.s({useDebounce:()=>r});var t=e.i(373150);function n(e,t){return e===t}function r(e,r,i){var a=i&&i.equalityFn||n,o=(0,t.useRef)(e),s=(0,t.useState)({})[1],l=function(e,n,r,i){var a=this,o=(0,t.useRef)(null),s=(0,t.useRef)(0),l=(0,t.useRef)(0),u=(0,t.useRef)(null),c=(0,t.useRef)([]),d=(0,t.useRef)(),h=(0,t.useRef)(),p=(0,t.useRef)(e),f=(0,t.useRef)(!0);p.current=e;var m="undefined"!=typeof window,g=!n&&0!==n&&m;if("function"!=typeof e)throw TypeError("Expected a function");n=+n||0;var y=!!(r=r||{}).leading,b=!("trailing"in r)||!!r.trailing,x="maxWait"in r,w="debounceOnServer"in r&&!!r.debounceOnServer,k=x?Math.max(+r.maxWait||0,n):null;return(0,t.useEffect)(function(){return f.current=!0,function(){f.current=!1}},[]),(0,t.useMemo)(function(){var e=function(e){var t=c.current,n=d.current;return c.current=d.current=null,s.current=e,l.current=l.current||e,h.current=p.current.apply(n,t)},t=function(e,t){g&&cancelAnimationFrame(u.current),u.current=g?requestAnimationFrame(e):setTimeout(e,t)},r=function(e){if(!f.current)return!1;var t=e-o.current;return!o.current||t>=n||t<0||x&&e-s.current>=k},S=function(t){return u.current=null,b&&c.current?e(t):(c.current=d.current=null,h.current)},_=function e(){var i=Date.now();if(y&&l.current===s.current&&C(),r(i))return S(i);if(f.current){var a=n-(i-o.current);t(e,x?Math.min(a,k-(i-s.current)):a)}},C=function(){i&&i({})},A=function(){if(m||w){var i=Date.now(),l=r(i);if(c.current=[].slice.call(arguments),d.current=a,o.current=i,l){if(!u.current&&f.current)return s.current=o.current,t(_,n),y?e(o.current):h.current;if(x)return t(_,n),e(o.current)}return u.current||t(_,n),h.current}};return A.cancel=function(){u.current&&(g?cancelAnimationFrame(u.current):clearTimeout(u.current)),s.current=0,c.current=o.current=d.current=u.current=null},A.isPending=function(){return!!u.current},A.flush=function(){return u.current?S(Date.now()):h.current},A},[y,x,n,k,b,g,m,w,i])}((0,t.useCallback)(function(e){o.current=e,s({})},[s]),r,i,s),u=(0,t.useRef)(e);return a(u.current,e)||(l(e),u.current=e),[o.current,l]}},769512:e=>{"use strict";e.s({AnnotationHighlightLayer:()=>A,CanvasLayer:()=>N,HighlightLayer:()=>j,Outline:()=>H,OutlineChildItems:()=>B,OutlineItem:()=>U,Page:()=>W,Pages:()=>eQ,Root:()=>e0,Search:()=>e1,SelectionTooltip:()=>O,TextLayer:()=>L,Thumbnail:()=>e5,Thumbnails:()=>e4,calculateHighlightRects:()=>e8,useAnnotations:()=>S,usePdf:()=>x,usePdfJump:()=>T,useSearch:()=>e9,useSelectionDimensions:()=>R});var t=e.i(11968),n=e.i(373150),r=e.i(784445),i=e.i(919818),a=e.i(557667),o=e.i(979692),s=e.i(637404),l=e.i(567903),u=e.i(443948),c=e.i(496438),d=e.i(138626),h=e.i(290479),p=e.i(598944),f=e.i(263842);e.i(265894);var m=e.i(774009),g=(e,t,n)=>Math.min(Math.max(e,t),n),y=(e,t,n)=>{let{minZoom:r,maxZoom:i}=n;return Math.min(Math.max(e/Math.max(...t.map(e=>e.width)),r),i)},b=(e=>{let t=n.default.createContext(null);return{useContext:()=>n.default.useContext(t),Context:t,Provider:r=>{let[i]=n.default.useState(()=>e(r.initialValue));return(0,h.jsx)(t.Provider,{value:i,children:r.children})}}})(e=>(0,d.createStore)((t,r)=>{var i,a,o,s,l;return{pdfDocumentProxy:e.pdfDocumentProxy,zoom:e.zoom,isZoomFitWidth:null!=(o=e.isZoomFitWidth)&&o,zoomOptions:{minZoom:null!=(s=null==(i=e.zoomOptions)?void 0:i.minZoom)?s:.5,maxZoom:null!=(l=null==(a=e.zoomOptions)?void 0:a.maxZoom)?l:10},viewportRef:(0,n.createRef)(),viewports:e.viewports,updateZoom:function(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],{minZoom:i,maxZoom:a}=r().zoomOptions;t(t=>"function"==typeof e?{zoom:g(e(t.zoom),i,a),isZoomFitWidth:n}:{zoom:g(e,i,a),isZoomFitWidth:n})},zoomFitWidth:()=>{let{viewportRef:e,zoomOptions:n,viewports:i}=r();if(!e.current)return;let a=y(e.current.clientWidth,i,n);return t({zoom:a,isZoomFitWidth:!0}),a},currentPage:1,setCurrentPage:e=>{t({currentPage:e})},isPinching:!1,setIsPinching:e=>{t({isPinching:e})},virtualizer:null,setVirtualizer:e=>{t({virtualizer:e})},pageProxies:e.pageProxies,getPdfPageProxy:e=>{let t=r().pageProxies[e-1];if(!t)throw Error("Page ".concat(e," does not exist"));return t},textContent:[],setTextContent:e=>{t({textContent:e})},highlights:[],setHighlight:e=>{t({highlights:e})},customSelectionRects:[],setCustomSelectionRects:e=>{t({customSelectionRects:e})},coloredHighlights:[],addColoredHighlight:e=>t(t=>({coloredHighlights:[...t.coloredHighlights,e]})),deleteColoredHighlight:e=>t(t=>({coloredHighlights:t.coloredHighlights.filter(t=>t.uuid!==e)}))}})),x=e=>(0,c.useStore)(b.useContext(),e),w=e=>{var t;let{annotation:r,onOpenChange:s,position:l="top",isOpen:u}=e,c=Date.now()-new Date(r.createdAt).getTime()<1e3,[d,h]=(0,n.useState)(!1),[p,f]=(0,n.useState)(!1),m=x(e=>e.viewportRef),g=x(e=>e.zoom),y=null!=(t=p&&d||u)&&t,{refs:b,floatingStyles:w,context:k}=(0,i.useFloating)({placement:l,open:y,onOpenChange:e=>{f(e),null==s||s(e)},whileElementsMounted:a.autoUpdate,middleware:[(0,o.inline)(),(0,o.offset)(10),(0,o.flip)({crossAxis:!1,fallbackAxisSideDirection:"end"}),(0,o.shift)({padding:8})]}),S=(0,i.useDismiss)(k),{getReferenceProps:_,getFloatingProps:C}=(0,i.useInteractions)([S]),A=(0,n.useCallback)(()=>{if(!r.highlights.length)return void h(!1);let e=r.highlights,t=1/0,n=-1/0,i=1/0,a=-1/0,o=m.current;if(!o)return void h(!1);let s=o.querySelector('[data-page-number="'.concat(r.pageNumber,'"]'));if(!s)return void h(!1);b.setReference({getBoundingClientRect(){let r=s.getBoundingClientRect();e.forEach(e=>{let o=e.left*g,s=e.width*g,l=e.top*g,u=e.height*g,c=r.left+o,d=r.top+l;t=Math.min(t,c),n=Math.max(n,c+s),i=Math.min(i,d),a=Math.max(a,d+u)});let o=n-t,l=a-i,u=t+o/2,c=i+l/2;return{width:o,height:l,x:u-o/2,y:c-l/2,top:c-l/2,right:u+o/2,bottom:c+l/2,left:u-o/2}},getClientRects(){return[this.getBoundingClientRect()]},contextElement:m.current||void 0}),h(!0),c&&f(!0)},[r.highlights,r.pageNumber,b,m,g,c]);return(0,n.useEffect)(()=>{let e=m.current;h(!1),requestAnimationFrame(()=>{A()});let t=()=>{requestAnimationFrame(A)},n=()=>{requestAnimationFrame(A)};return e&&e.addEventListener("scroll",t,{passive:!0}),window.addEventListener("resize",n,{passive:!0}),()=>{e&&e.removeEventListener("scroll",t),window.removeEventListener("resize",n)}},[A,m,g,u]),{isOpen:y,setIsOpen:f,refs:b,floatingStyles:w,getFloatingProps:C,getReferenceProps:_}},k=e=>{let{annotation:t,children:i,renderTooltipContent:a,hoverTooltipContent:o,onOpenChange:s,className:l,focusedOpenId:u,focusedHoverOpenId:c,hoverClassName:d,isOpen:p,hoverIsOpen:f}=e,m=x(e=>e.viewportRef),g=(0,n.useRef)(null),y=(0,n.useRef)(!1),[b,k]=(0,n.useState)(),{isOpen:S,setIsOpen:_,refs:C,floatingStyles:A,getFloatingProps:E,getReferenceProps:T}=w({annotation:t,onOpenChange:s,position:b,isOpen:p}),{isOpen:M,setIsOpen:I,refs:N,floatingStyles:D,getFloatingProps:P,getReferenceProps:R}=w({position:"bottom",annotation:t,isOpen:f}),O=null!=p?p:S,j=f||M,F=(0,n.useCallback)(()=>{void 0===p&&_(!O)},[p,O,_]),L=(0,n.useCallback)(()=>{u&&u!==t.id||(!c||c===t.id)&&o&&(g.current&&(clearTimeout(g.current),g.current=null),I(!0))},[o,I]),z=(0,n.useCallback)(()=>{y.current||I(!1)},[I]),B=(0,n.useCallback)(()=>{o&&(g.current=setTimeout(z,100))},[o,z]),U=(0,n.useCallback)(()=>{u&&u!==t.id||(!c||c===t.id)&&(y.current=!0,g.current&&(clearTimeout(g.current),g.current=null))},[]),H=(0,n.useCallback)(()=>{y.current=!1,I(!1)},[I]);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{ref:e=>{C.setReference(e),N.setReference(e)},onClick:F,onMouseEnter:L,onMouseLeave:B,...T(),...R(),children:i}),O&&m.current&&(0,r.createPortal)((0,h.jsx)("div",{ref:C.setFloating,className:l,"data-annotation-tooltip":"click",style:{...A,position:"absolute",pointerEvents:"auto",zIndex:50},...E(),children:a({annotation:t,onClose:()=>_(!1),setPosition:e=>k(e)})}),m.current),!O&&j&&t.comment&&o&&m.current&&(0,r.createPortal)((0,h.jsx)("div",{ref:N.setFloating,className:d,"data-annotation-tooltip":"hover",style:{...D,position:"absolute",pointerEvents:"auto",zIndex:51},onMouseEnter:U,onMouseLeave:H,...P(),children:o}),m.current)]})},S=(0,c.create)(e=>({annotations:[],addAnnotation:t=>e(e=>({annotations:[...e.annotations,t]})),updateAnnotation:(t,n)=>e(e=>({annotations:e.annotations.map(e=>e.id===t?{...e,...n}:e)})),deleteAnnotation:t=>e(e=>({annotations:e.annotations.filter(e=>e.id!==t)})),setAnnotations:t=>e({annotations:t})})),_=(0,n.createContext)(0),C=()=>(0,n.useContext)(_),A=e=>{let{className:t,style:n,renderTooltipContent:r,renderHoverTooltipContent:i,tooltipClassName:a,highlightClassName:o,underlineClassName:s,commentIconPosition:l,commmentIcon:u,commentIconClassName:c,focusedAnnotationId:d,focusedHoverAnnotationId:p,onAnnotationClick:f,onAnnotationTooltipClose:m,hoverTooltipClassName:g}=e,{annotations:y}=S(),b=C(),x=y.filter(e=>e.pageNumber===b);return(0,h.jsx)("div",{className:t,style:n,children:x.map(e=>{var t;return(0,h.jsx)(k,{annotation:e,className:a,hoverClassName:g,focusedOpenId:d,focusedHoverOpenId:p,isOpen:d===e.id,hoverIsOpen:p===e.id,onOpenChange:t=>{t&&f?f(e):!t&&m&&m(e)},renderTooltipContent:r,hoverTooltipContent:i({annotation:e,onClose:()=>{}}),children:(0,h.jsxs)("div",{style:{cursor:"pointer"},onClick:()=>null==f?void 0:f(e),children:[e.highlights.map((t,n)=>(0,h.jsx)("div",{className:o,style:{position:"absolute",top:t.top,left:t.left,width:t.width,height:t.height,backgroundColor:e.color},"data-highlight-id":e.id},"highlight-".concat(n))),e.comment&&(null==(t=e.underlines)?void 0:t.map((t,n)=>(0,h.jsx)("div",{className:s,style:{position:"absolute",top:t.top,left:t.left,width:t.width,height:1.1,backgroundColor:e.borderColor},"data-comment-id":e.id},"underline-".concat(n)))),e.comment&&u&&(0,h.jsx)("div",{className:c,style:{position:"absolute",...(e=>{if(!e.length)return{top:0,right:10};let t=[...e].sort((e,t)=>{let n=e.top-t.top;return 3>Math.abs(n)?e.left-t.left:n}),n=[],r=[];t.forEach(e=>{if(0===r.length)r.push(e);else{let t=r[0];3>=Math.abs(e.top-t.top)?r.push(e):(n.push([...r]),r=[e])}}),r.length>0&&n.push(r);let i=n.some(e=>0!==e.length&&Math.max(...e.map(e=>e.left+e.width))>480),a=e[0],o=n[0]||[],s=Math.min(...o.map(e=>e.left)),u=Math.max(...o.map(e=>e.left+e.width));return{top:a.top+a.height/2-6,...i||s+(u-s)/2>300?"highlight"===l?{left:u+8}:{right:10}:"highlight"===l?{left:s-18}:{left:20}}})(e.highlights),color:"gray",cursor:"pointer",zIndex:10},"data-comment-icon-id":e.id,children:u})]})},e.id)})})},E=function(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=function e(t){var n,r,i="";if("string"==typeof t||"number"==typeof t)i+=t;else if("object"==typeof t)if(Array.isArray(t)){var a=t.length;for(n=0;n<a;n++)t[n]&&(r=e(t[n]))&&(i&&(i+=" "),i+=r)}else for(r in t)t[r]&&(i&&(i+=" "),i+=r);return i}(e))&&(r&&(r+=" "),r+=t);return r},T=()=>{let e=x(e=>e.virtualizer),t=x(e=>e.setHighlight),n=function(t,n){var r,i;let a,o,s,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"start",u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(!e)return;let c=Math.min(...t.map(e=>e.pageNumber)),d=e.getOffsetForIndex(c-1,"start");if(null===d)return;let h=t.find(e=>e.pageNumber===c);if(!h||(null==d?void 0:d[0])==null)return;let p=null!=(r=d[0])?r:0;if("percent"===n){let t=e.options.estimateSize(c-1);a=h.top/100*t,o=h.height/100*t}else a=h.top,o=h.height;let f=Math.max(0,s=("center"===l?p+a+o/2-((null==(i=e.scrollElement)?void 0:i.clientHeight)||0)/2:p+a)+u);e.scrollToOffset(f,{align:"start",behavior:"smooth"})};return{jumpToPage:(t,n)=>{if(!e)return;let r={align:"start",behavior:"smooth",...n};e.scrollToIndex(t-1,r)},jumpToOffset:t=>{e&&e.scrollToOffset(t,{align:"start",behavior:"smooth"})},jumpToHighlightRects:function(r,i){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"start",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;e&&(t(r),n(r,i,a,o))},scrollToHighlightRects:n}},M=new class{get pdfDocumentProxy(){if(!this._pdfDocumentProxy)throw Error("pdfDocumentProxy is not set");return this._pdfDocumentProxy}get pagesCount(){var e;return(null==(e=this._pdfDocumentProxy)?void 0:e.numPages)||0}get page(){return this._currentPageNumber}set page(e){this._currentPageNumber=e,this._pageNavigationCallback&&this._pageNavigationCallback(e)}setDocument(e){this._pdfDocumentProxy=e}setViewer(){}getDestinationHash(e){if(!e)return"";let t=e[0];if(e.length>1&&"object"==typeof e[1]&&null!==e[1]&&"url"in e[1])return e[1].url;if(t&&"object"==typeof t){if("num"in t)return"#page=".concat(t.num+1);if("gen"in t){var n;let e=null!=(n=t.num)?n:0;return"#page=".concat(e+1)}}return"number"==typeof t?"#page=".concat(t+1):"#dest-".concat(String(e))}getAnchorUrl(e){return e.startsWith("http://")||e.startsWith("https://")?e:"#".concat(e)}addLinkAttributes(e,t,n){if(!e)return;let r=t.startsWith("http://")||t.startsWith("https://");r&&this.externalLinkEnabled?(e.href=t,e.target=!1===n?"":"_blank",e.rel="noopener noreferrer"):(r?e.href="#":e.href=t,e.target="")}async goToDestination(e){let t,n;if(!(t="string"==typeof e?await this.pdfDocumentProxy.getDestination(e):Array.isArray(e)?e:await e)||t.length>1&&"object"==typeof t[1]&&null!==t[1]&&"url"in t[1])return;let r=t[0];if(r&&"object"==typeof r)if(!("num"in r))return;else try{n=await this.pdfDocumentProxy.getPageIndex(r)}catch(e){return}else{if("number"!=typeof r)return;n=r}let i=n+1;this._pageNavigationCallback&&this._pageNavigationCallback(i)}executeNamedAction(){}navigateTo(e){this.goToDestination(e)}get rotation(){return 0}set rotation(e){}goToPage(e){e>=1&&e<=this.pagesCount&&this._pageNavigationCallback&&this._pageNavigationCallback(e)}setHash(e){if(e.startsWith("#page=")){let t=parseInt(e.substring(6),10);isNaN(t)||this.goToPage(t)}}executeSetOCGState(){}registerPageNavigationCallback(e){this._pageNavigationCallback=e}unregisterPageNavigationCallback(){this._pageNavigationCallback=void 0}constructor(){(0,t._)(this,"_pdfDocumentProxy",void 0),(0,t._)(this,"externalLinkEnabled",!0),(0,t._)(this,"isInPresentationMode",!1),(0,t._)(this,"_currentPageNumber",0),(0,t._)(this,"_pageNavigationCallback",void 0)}};(0,n.createContext)(M);var I=()=>{let[e,t]=(0,n.useState)(window?Math.min(window.devicePixelRatio,2):1);return(0,n.useEffect)(()=>{if(!window)return;let n=()=>{t(window.devicePixelRatio)},r=window.matchMedia("screen and (min-resolution: ".concat(e,"dppx)"));return r.addEventListener("change",n),()=>{r.removeEventListener("change",n)}},[]),e},N=e=>{let{style:t,background:r,...i}=e,{canvasRef:a}=(e=>{let{background:t}=e,r=(0,n.useRef)(null),i=C(),a=I(),o=x(e=>e.zoom),s=x(e=>e.getPdfPageProxy(i)),[l]=(0,f.useDebounce)(o,100);return(0,n.useLayoutEffect)(()=>{if(!r.current)return;let e=s.getViewport({scale:1}),n=r.current,i=a*l;n.height=e.height*i,n.width=e.width*i,n.style.height="".concat(e.height,"px"),n.style.width="".concat(e.width,"px");let o=n.getContext("2d");o.scale(i,i);let u=s.render({canvasContext:o,viewport:e,background:t});return u.promise.catch(e=>{if("RenderingCancelledException"!==e.name)throw e}),()=>{u.cancel()}},[s,a,l]),{canvasRef:r}})({background:r});return(0,h.jsx)("canvas",{style:{...t,position:"absolute",top:0,left:0,width:"100%",height:"100%"},...i,ref:a})},D=(e,t)=>{let n=e.left<t.left+t.width&&t.left<e.left+e.width,r=e.top<t.top+t.height&&t.top<e.top+e.height,i=((e,t)=>{let n=!(e.top>t.top+t.height||t.top>e.top+e.height),r=2>=Math.abs(e.left+e.width-t.left)||2>=Math.abs(t.left+t.width-e.left)||e.left<t.left+t.width&&t.left<e.left+e.width;return n&&r})(e,t);return n&&r||i},P=e=>{if(1===e.length){let t=e[0];if(!t)throw Error("Invalid rect in group");return t}let t=e[0];if(!t)throw Error("Invalid first rect in group");let n=t.left,r=t.top,i=t.left+t.width,a=t.top+t.height;return e.forEach(e=>{e&&(n=Math.min(n,e.left),r=Math.min(r,e.top),i=Math.max(i,e.left+e.width),a=Math.max(a,e.top+e.height))}),{left:n,top:r,width:i-n,height:a-r,pageNumber:t.pageNumber}},R=()=>{let e=b.useContext(),t=()=>{let t=window.getSelection();if(!t||t.isCollapsed)return;let n=t.getRangeAt(0),r=[],i=new Map;return Array.from(n.getClientRects()).filter(e=>e.width>2&&e.height>2).forEach(t=>{var n;let r=document.elementFromPoint(t.left+1,t.top+t.height/2),a=null==r?void 0:r.closest(".textLayer");if(!a)return;let o=parseInt(a.getAttribute("data-page-number")||"1",10),s=a.getBoundingClientRect(),l=e.getState().zoom,u={width:t.width/l,height:t.height/l,top:(t.top-s.top)/l,left:(t.left-s.left)/l,pageNumber:o};i.has(o)||i.set(o,[]),null==(n=i.get(o))||n.push(u)}),i.forEach(e=>{if(e.length>0){let t=(e=>{if(e.length<=1)return e;let t=[],n=new Set;for(let r=0;r<e.length;r++){if(n.has(r))continue;let i=e[r];if(!i)continue;let a=[i];n.add(r);let o=!0;for(;o;){o=!1;for(let t=0;t<e.length;t++){if(n.has(t))continue;let r=e[t];r&&a.some(e=>D(e,r))&&(a.push(r),n.add(t),o=!0)}}t.push(P(a))}return t})(e);r.push(...t)}}),{highlights:r.sort((e,t)=>e.pageNumber-t.pageNumber),text:n.toString().trim(),isCollapsed:!1}};return{getDimension:t,getSelection:()=>t(),getAnnotationDimension:()=>{let t=window.getSelection();if(!t||t.isCollapsed)return;let n=t.getRangeAt(0),r=[],i=[],a=new Map,o=new Map;return Array.from(n.getClientRects()).filter(e=>e.width>2&&e.height>2).forEach(t=>{var n,r;let i=document.elementFromPoint(t.left+1,t.top+t.height/2);i||(i=document.elementFromPoint(t.left+t.width/2,t.top+t.height/2)),i||(i=document.elementFromPoint(t.right-1,t.top+t.height/2)),i||(i=document.elementFromPoint(t.left+t.width/2,t.top+1)),i||(i=document.elementFromPoint(t.left+t.width/2,t.bottom-1));let s=null==i?void 0:i.closest(".textLayer");if(!s)return;let l=parseInt(s.getAttribute("data-page-number")||"1",10),u=s.getBoundingClientRect(),c=e.getState().zoom,d={width:t.width/c,height:t.height/c,top:(t.top-u.top)/c,left:(t.left-u.left)/c,pageNumber:l};if(a.has(l)||a.set(l,[]),null==(n=a.get(l))||n.push(d),!(e=>{if(!e)return!1;if("sup"===e.tagName.toLowerCase()||"sub"===e.tagName.toLowerCase())return!0;let t=e.className;if("string"==typeof t&&["superscript","subscript","sup","sub"].some(e=>t.includes(e)))return!0;let n=e.getBoundingClientRect();if(n.height<6&&n.width<15){var r,i;let t=(null==(r=e.textContent)?void 0:r.trim())||"";if(t.length<=2&&/^[\d\w]{1,2}$/.test(t)){let t=null==(i=e.parentElement)?void 0:i.getBoundingClientRect();if(t&&t.height>2*n.height&&Math.abs(n.top+n.height/2-(t.top+t.height/2))>.4*t.height)return!0}}return!1})(i)){let e=.85*t.height,n={width:t.width/c,height:2/c,top:(t.top-u.top+e)/c,left:(t.left-u.left)/c,pageNumber:l};o.has(l)||o.set(l,[]),null==(r=o.get(l))||r.push(n)}}),a.forEach(e=>{if(e.length>0)if(1===e.length)r.push(...e);else{let t=(e=>{if(e.length<=1)return e;let t=[],n=[...e].sort((e,t)=>{let n=e.pageNumber-t.pageNumber;if(0!==n)return n;let r=e.top-t.top;return 2>Math.abs(r)?e.left-t.left:r}),r=n[0];if(!r)return e;for(let e=1;e<n.length;e++){let i=n[e];if(i)if(r.pageNumber===i.pageNumber&&Math.abs(r.top-i.top)<.5*Math.max(r.height,i.height)&&(2>=Math.abs(r.left+r.width-i.left)||2>=Math.abs(i.left+i.width-r.left)||r.left<i.left+i.width&&i.left<r.left+r.width||Math.abs(r.left+r.width-i.left)<=.2*r.height)){let e=Math.min(r.left,i.left),t=Math.max(r.left+r.width,i.left+i.width),n=Math.min(r.top,i.top);r={left:e,top:n,width:t-e,height:Math.max(r.top+r.height,i.top+i.height)-n,pageNumber:r.pageNumber}}else t.push(r),r=i}return r&&t.push(r),t})(e);r.push(...t)}}),o.forEach(e=>{e.length>0&&(e=>{let t=[];return e.forEach(e=>{let n=e.top+e.height/2,r=!1;for(let i of t){if(0===i.length)continue;let t=i[0];if(t&&3>=Math.abs(n-(t.top+t.height/2))){i.push(e),r=!0;break}}r||t.push([e])}),t})(e).forEach(e=>{if(0===e.length)return;e.sort((e,t)=>e.left-t.left);let t=0;for(;t<e.length;){let n=e[t];if(!n){t++;continue}let r=t;for(;r+1<e.length;){let t=e[r],n=e[r+1];if(!t||!n)break;if(n.left-(t.left+t.width)<=Math.max(2,.3*t.height))r++;else break}let a=e[r];if(!a){t++;continue}let o={width:a.left+a.width-n.left,height:1.5,top:n.top,left:n.left,pageNumber:n.pageNumber};i.push(o),t=r+1}})}),0===i.length&&r.length>0&&r.forEach(e=>{let t=.85*e.height,n={width:e.width,height:1.5,top:e.top+t,left:e.left,pageNumber:e.pageNumber};i.push(n)}),{highlights:r.sort((e,t)=>e.pageNumber-t.pageNumber),underlines:(e=>{if(e.length<=1)return e;let t=[],n=[...e].sort((e,t)=>{let n=e.pageNumber-t.pageNumber;if(0!==n)return n;let r=e.top-t.top;return 1>Math.abs(r)?e.left-t.left:r}),r=n[0];for(let e=1;e<n.length;e++){let i=n[e];if(r.pageNumber===i.pageNumber&&1>Math.abs(r.top-i.top)&&(2>=Math.abs(r.left+r.width-i.left)||r.left<i.left+i.width&&i.left<r.left+r.width)){let e=Math.max(r.left+r.width,i.left+i.width)-Math.min(r.left,i.left);r={...r,left:Math.min(r.left,i.left),width:e}}else t.push(r),r=i}return t.push(r),t})(i).sort((e,t)=>e.pageNumber-t.pageNumber),text:n.toString().trim(),isCollapsed:!1}}}},O=e=>{let{children:t}=e,[r,s]=(0,n.useState)(!1),l=(0,n.useRef)(null),u=x(e=>e.viewportRef),{refs:c,floatingStyles:d,context:p}=(0,i.useFloating)({placement:"bottom",open:r,onOpenChange:s,whileElementsMounted:a.autoUpdate,middleware:[(0,o.offset)(10),(0,o.shift)({padding:8})]}),f=(0,i.useDismiss)(p),{getFloatingProps:m}=(0,i.useInteractions)([f]),g=(0,n.useCallback)(()=>{let e=document.getSelection();if(!e||e.isCollapsed){s(!1),l.current=null;return}let t=e.getRangeAt(0);if(!t)return;let n=t.getClientRects(),r=n[n.length-1];l.current=t,r?(c.setReference({getBoundingClientRect:()=>({width:r.width,height:r.height,x:r.left,y:r.bottom,top:r.bottom,right:r.right,bottom:r.bottom+r.height,left:r.left}),getClientRects:()=>[r]}),s(!0)):s(!1)},[c]);return(0,n.useEffect)(()=>{let e=()=>{var e;let t=document.getSelection();if(t&&(null==(e=u.current)?void 0:e.contains(t.anchorNode))){let e=t.anchorNode,n=t.focusNode,r=e=>{if(!e)return!1;let t=e.nodeType===Node.ELEMENT_NODE?e:e.parentElement;for(;t;){if(t.getAttribute("data-annotation-tooltip")||t.hasAttribute("data-floating-ui-portal"))return!0;t=t.parentElement}return!1};r(e)||r(n)?s(!1):requestAnimationFrame(g)}else s(!1)},t=()=>{r&&l.current&&requestAnimationFrame(g)};return document.addEventListener("selectionchange",e),u.current&&u.current.addEventListener("scroll",t,{passive:!0}),()=>{document.removeEventListener("selectionchange",e),u.current&&u.current.removeEventListener("scroll",t)}},[c,r,u,g]),(0,n.useEffect)(()=>{let e=e=>{var t;(null==(t=c.floating.current)?void 0:t.contains(e.target))&&e.stopPropagation()};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[c.floating]),(0,h.jsx)(h.Fragment,{children:r&&(0,h.jsx)("div",{ref:c.setFloating,style:{...d},...m(),children:t})})},j=(0,n.forwardRef)((e,t)=>{let{asChild:n,className:r,style:i,...a}=e,o=C(),s=x(e=>e.highlights),l=n?m.Slot:"div",u=s.filter(e=>e.pageNumber===o);return(null==u?void 0:u.length)?(0,h.jsx)(h.Fragment,{children:u.map((e,n)=>{let{pageNumber:o,type:s,style:u,...c}=e,d=c;"percent"===s&&(d=(e=>({top:"".concat(e.top,"%"),left:"".concat(e.left,"%"),height:"".concat(e.height,"%"),width:"".concat(e.width,"%")}))(e));let p=u?u(e):{};return(0,h.jsx)(l,{ref:t,className:r,style:{position:"absolute",...d,pointerEvents:"none",zIndex:30,...i,...p},...a,children:a.children},"highlight-".concat(o,"-").concat(n))})}):null});j.displayName="HighlightLayer";var F=(()=>{let e,t=new Map,n=null,r=!1,i=null;return(a,o)=>{if(a._textSelectionBound)return;a._textSelectionBound=!0,t.set(a,o),(()=>{if(n)return;let{signal:a}=n=new AbortController,o=(e,t)=>{e.parentNode!==t&&t.appendChild(e),e.style.width="",e.style.height="",t.classList.remove("selecting")};document.addEventListener("pointerdown",()=>{r=!0},{signal:a}),document.addEventListener("pointerup",()=>{r=!1,t.forEach(o)},{signal:a}),window.addEventListener("blur",()=>{r=!1,t.forEach(o)},{signal:a}),document.addEventListener("keyup",()=>{r||t.forEach(o)},{signal:a}),document.addEventListener("selectionchange",()=>{let n=document.getSelection();if(!n||0===n.rangeCount)return void t.forEach(o);let r=new Set;for(let e=0;e<n.rangeCount;e++){let i=n.getRangeAt(e);for(let e of t.keys())!r.has(e)&&i.intersectsNode(e)&&r.add(e)}for(let[e,n]of t)r.has(e)?e.classList.add("selecting"):o(n,e);if(void 0===e){let n=t.keys().next().value;n&&(e="none"===getComputedStyle(n).getPropertyValue("-moz-user-select"))}if(!e)try{var a;let e=n.getRangeAt(0),r=i&&(0===e.compareBoundaryPoints(Range.END_TO_END,i)||0===e.compareBoundaryPoints(Range.START_TO_END,i)),o=r?e.startContainer:e.endContainer;o.nodeType===Node.TEXT_NODE&&(o=o.parentNode);let s=null==(a=o.parentElement)?void 0:a.closest(".textLayer"),l=t.get(s);if(l&&s){l.style.width=s.style.width,l.style.height=s.style.height;let e=r?o:o.nextSibling;o.parentElement&&e&&o.parentElement.insertBefore(l,e)}i=e.cloneRange()}catch(e){}},{signal:a})})();let s=()=>{a.classList.add("selecting")};a.addEventListener("mousedown",s),a._cleanupTextSelection=()=>{a.removeEventListener("mousedown",s),t.delete(a),0===t.size&&(null==n||n.abort(),n=null),delete a._textSelectionBound}}})(),L=e=>{let{className:t,style:r,...i}=e,{textContainerRef:a,pageNumber:o}=(()=>{let e=(0,n.useRef)(null),t=(0,n.useRef)(null),r=(0,n.useRef)(!1),i=C(),a=x(e=>e.getPdfPageProxy(i));return(0,n.useEffect)(()=>{let n=e.current;if(!n||r.current)return;r.current=!0,n.innerHTML="",t.current&&(t.current.cancel(),t.current=null);let i=new p.TextLayer({textContentSource:a.streamTextContent(),container:n,viewport:a.getViewport({scale:1})});return t.current=i,i.render().then(()=>{if(t.current===i&&n){let e=document.createElement("div");e.className="endOfContent",n.appendChild(e),F(n,e)}}).catch(e=>{"AbortException"!==e.name&&console.error("TextLayer rendering error:",e)}).finally(()=>{r.current=!1}),()=>{r.current=!1,t.current&&(t.current.cancel(),t.current=null),(null==n?void 0:n._cleanupTextSelection)&&(n._cleanupTextSelection(),delete n._cleanupTextSelection)}},[a.pageNumber]),{textContainerRef:e,pageNumber:a.pageNumber}})();return(0,h.jsx)("div",{className:E("textLayer",t),style:{...r,position:"absolute",top:0,left:0},...i,...{"data-page-number":o},ref:a})},z=["a","button","div","aside","section","main","ul","li","input","canvas"].reduce((e,t)=>(e[t]=(e=>{let t=(0,n.forwardRef)((t,n)=>(0,h.jsx)(e,{...t,ref:n}));return t.displayName="PDFReader.".concat(e),t})(t),e),{}),B=e=>{let{...t}=e;return(0,h.jsx)(z.ul,{...t})},U=e=>{let{level:t=0,item:r,children:i,outlineItem:a,...o}=e;if(!r||!a||!i)throw Error("Outline item is required");let s=x(e=>e.pdfDocumentProxy),{jumpToPage:l}=T(),u=(0,n.useCallback)(async e=>{let t;if(!(t="string"==typeof e?await s.getDestination(e):Array.isArray(e)?e:await e))return;let n=t[0];return await s.getPageIndex(n)},[s]),c=(0,n.useCallback)(()=>{r.dest&&u(r.dest).then(e=>{e&&l(e,{behavior:"smooth"})})},[r.dest,l,u]);return(0,h.jsxs)(z.li,{...o,children:[(0,h.jsx)("a",{role:"button",tabIndex:0,onClick:c,onKeyUp:e=>{"Enter"===e.key&&c()},"data-level":t,children:r.title}),r.items&&r.items.length>0&&(0,n.cloneElement)(i,{children:r.items.map((e,r)=>(0,n.cloneElement)(a,{level:t+1,item:e,outlineItem:a,key:r}))})]})},H=e=>{let{children:t,...r}=e,i=(()=>{let e=x(e=>e.pdfDocumentProxy),[t,r]=(0,n.useState)();return(0,n.useEffect)(()=>{let{promise:t,cancel:n}=(e=>{let t=!1;return{promise:new Promise((n,r)=>{e.then(e=>{t||n(e)},e=>{t||r(e)})}),cancel(){t=!0}}})(e.getOutline());return t.then(e=>{r(e)},()=>{}),()=>{n()}},[e]),t})();return(0,h.jsx)(z.ul,{...r,children:i&&i.map((e,r)=>(0,n.cloneElement)(t,{key:r,item:e,outlineItem:t}))})},W=e=>{var t,n,r,i;let{children:a,pageNumber:o=1,style:s,...l}=e,u=x(e=>e.getPdfPageProxy(o)),c=(null!=(t=u.view[2])?t:0)-(null!=(n=u.view[0])?n:0),d=(null!=(r=u.view[3])?r:0)-(null!=(i=u.view[1])?i:0);return(0,h.jsx)(_.Provider,{value:u.pageNumber,children:(0,h.jsx)(z.div,{style:{display:"block"},children:(0,h.jsx)("div",{style:{...s,"--scale-factor":1,"--total-scale-factor":1,position:"relative",width:c,height:d},...l,children:a})})})},V="undefined"==typeof window||"onscrollend"in window,q={passive:!0},G={toVector:(e,t)=>(void 0===e&&(e=t),Array.isArray(e)?e:[e,e]),add:(e,t)=>[e[0]+t[0],e[1]+t[1]],sub:(e,t)=>[e[0]-t[0],e[1]-t[1]],addTo(e,t){e[0]+=t[0],e[1]+=t[1]},subTo(e,t){e[0]-=t[0],e[1]-=t[1]}};function $(e,t,n){return 0===t||Math.abs(t)===1/0?Math.pow(e,5*n):e*t*n/(t+n*e)}function K(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.15;return 0===r?Math.max(t,Math.min(e,n)):e<t?-$(t-e,n-t,r)+t:e>n?+$(e-n,n-t,r)+n:e}function Y(e,t,n){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach(function(t){Y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var J={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function Q(e){return e?e[0].toUpperCase()+e.slice(1):""}var ee=["enter","leave"],et=["gotpointercapture","lostpointercapture"];function en(e){return"touches"in e}function er(e){return en(e)?"touch":"pointerType"in e?e.pointerType:"mouse"}function ei(e){return en(e)?("touchend"===e.type||"touchcancel"===e.type?e.changedTouches:e.targetTouches)[0]:e}function ea(e,t){try{let n=t.clientX-e.clientX,r=t.clientY-e.clientY,i=(t.clientX+e.clientX)/2,a=(t.clientY+e.clientY)/2,o=Math.hypot(n,r);return{angle:-(180*Math.atan2(n,r))/Math.PI,distance:o,origin:[i,a]}}catch(e){}return null}function eo(e,t){let[n,r]=Array.from(e.touches).filter(e=>t.includes(e.identifier));return ea(n,r)}function es(e){let t=ei(e);return en(e)?t.identifier:t.pointerId}function el(e){let t=ei(e);return[t.clientX,t.clientY]}function eu(e){let{deltaX:t,deltaY:n,deltaMode:r}=e;return 1===r?(t*=40,n*=40):2===r&&(t*=800,n*=800),[t,n]}function ec(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return"function"==typeof e?e(...n):e}function ed(){}function eh(e,t){return Object.assign({},t,e||{})}var ep=class{get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){let{state:e,shared:t,ingKey:n,args:r}=this;t[n]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=r,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){let t=this.state,n=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=n.from?ec(n.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}computeValues(e){let t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){let e=this.state;e._initial=e._values,e.initial=e.values}compute(e){let{state:t,config:n,shared:r}=this;t.args=this.args;let i=0;if(e&&(t.event=e,n.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,r.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,r.locked=!!document.pointerLockElement,Object.assign(r,function(e){let t={};if("buttons"in e&&(t.buttons=e.buttons),"shiftKey"in e){let{shiftKey:n,altKey:r,metaKey:i,ctrlKey:a}=e;Object.assign(t,{shiftKey:n,altKey:r,metaKey:i,ctrlKey:a})}return t}(e)),r.down=r.pressed=r.buttons%2==1||r.touches>0,i=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){let e=t._delta.map(Math.abs);G.addTo(t._distance,e)}this.axisIntent&&this.axisIntent(e);let[a,o]=t._movement,[s,l]=n.threshold,{_step:u,values:c}=t;if(n.hasCustomTransform?(!1===u[0]&&(u[0]=Math.abs(a)>=s&&c[0]),!1===u[1]&&(u[1]=Math.abs(o)>=l&&c[1])):(!1===u[0]&&(u[0]=Math.abs(a)>=s&&Math.sign(a)*s),!1===u[1]&&(u[1]=Math.abs(o)>=l&&Math.sign(o)*l)),t.intentional=!1!==u[0]||!1!==u[1],!t.intentional)return;let d=[0,0];if(n.hasCustomTransform){let[e,t]=c;d[0]=!1!==u[0]?e-u[0]:0,d[1]=!1!==u[1]?t-u[1]:0}else d[0]=!1!==u[0]?a-u[0]:0,d[1]=!1!==u[1]?o-u[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(d);let h=t.offset,p=t._active&&!t._blocked||t.active;p&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=r[this.ingKey]=t._active,e&&(t.first&&("bounds"in n&&(t._bounds=ec(n.bounds,t)),this.setup&&this.setup()),t.movement=d,this.computeOffset()));let[f,m]=t.offset,[[g,y],[b,x]]=t._bounds;t.overflow=[f<g?-1:+(f>y),m<b?-1:+(m>x)],t._movementBound[0]=!!t.overflow[0]&&(!1===t._movementBound[0]?t._movement[0]:t._movementBound[0]),t._movementBound[1]=!!t.overflow[1]&&(!1===t._movementBound[1]?t._movement[1]:t._movementBound[1]);let w=t._active&&n.rubberband||[0,0];if(t.offset=function(e,t,n){let[r,i]=t,[a,o]=n,[[s,l],[u,c]]=e;return[K(r,s,l,a),K(i,u,c,o)]}(t._bounds,t.offset,w),t.delta=G.sub(t.offset,h),this.computeMovement(),p&&(!t.last||i>32)){t.delta=G.sub(t.offset,h);let e=t.delta.map(Math.abs);G.addTo(t.distance,e),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&i>0&&(t.velocity=[e[0]/i,e[1]/i],t.timeDelta=i)}}emit(){let e=this.state,t=this.shared,n=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!n.triggerAllEvents)return;let r=this.handler(Z(Z(Z({},t),e),{},{[this.aliasKey]:e.values}));void 0!==r&&(e.memo=r)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}constructor(e,t,n){this.ctrl=e,this.args=t,this.key=n,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}},ef=class extends ep{reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=G.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=G.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){let t=this.state,n=this.config;if(!t.axis&&e){let r="object"==typeof n.axisThreshold?n.axisThreshold[er(e)]:n.axisThreshold;t.axis=function(e,t){let[n,r]=e,i=Math.abs(n),a=Math.abs(r);return i>a&&i>t?"x":a>i&&a>t?"y":void 0}(t._movement,r)}t._blocked=(n.lockDirection||!!n.axis)&&!t.axis||!!n.axis&&n.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0}}constructor(...e){super(...e),Y(this,"aliasKey","xy")}},em=e=>e,eg={enabled(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];return e},eventOptions:(e,t,n)=>Z(Z({},n.shared.eventOptions),e),preventDefault(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e},triggerAllEvents(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e},rubberband(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch(e){case!0:return[.15,.15];case!1:return[0,0];default:return G.toVector(e)}},from:e=>"function"==typeof e?e:null!=e?G.toVector(e):void 0,transform(e,t,n){let r=e||n.shared.transform;return this.hasCustomTransform=!!r,r||em},threshold:e=>G.toVector(e,0)},ev=Z(Z({},eg),{},{axis(e,t,n){let{axis:r}=n;if(this.lockDirection="lock"===r,!this.lockDirection)return r},axisThreshold(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e},bounds(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("function"==typeof e)return t=>ev.bounds(e(t));if("current"in e)return()=>e.current;if("function"==typeof HTMLElement&&e instanceof HTMLElement)return e;let{left:t=-1/0,right:n=1/0,top:r=-1/0,bottom:i=1/0}=e;return[[t,n],[r,i]]}}),ey={ArrowRight:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return[e*t,0]},ArrowLeft:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return[-1*e*t,0]},ArrowUp:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return[0,-1*e*t]},ArrowDown:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return[0,e*t]}},eb=class extends ef{reset(){super.reset();let e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){let e=this.state;if(e._bounds instanceof HTMLElement){let t=e._bounds.getBoundingClientRect(),n=e.currentTarget.getBoundingClientRect(),r={left:t.left-n.left+e.offset[0],right:t.right-n.right+e.offset[0],top:t.top-n.top+e.offset[1],bottom:t.bottom-n.bottom+e.offset[1]};e._bounds=ev.bounds(r)}}cancel(){let e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){let t=this.config,n=this.state;if(null!=e.buttons&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):-1!==t.pointerButtons&&t.pointerButtons!==e.buttons))return;let r=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),r&&r.size>1&&n._pointerActive||(this.start(e),this.setupPointer(e),n._pointerId=es(e),n._pointerActive=!0,this.computeValues(el(e)),this.computeInitial(),t.preventScrollAxis&&"mouse"!==er(e)?(n._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){let t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){let t=this.state,n=this.config;if(!t._pointerActive)return;let r=es(e);if(void 0!==t._pointerId&&r!==t._pointerId)return;let i=el(e);if(document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=G.sub(i,t._values),this.computeValues(i)),G.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional){this.timeoutStore.remove("dragDelay"),t.active=!1,this.startPointerDrag(e);return}if(n.preventScrollAxis&&!t._preventScroll)if(!t.axis)return;else if(t.axis===n.preventScrollAxis||"xy"===n.preventScrollAxis){t._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch(e){}let t=this.state,n=this.config;if(!t._active||!t._pointerActive)return;let r=es(e);if(void 0!==t._pointerId&&r!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);let[i,a]=t._distance;if(t.tap=i<=n.tapsThreshold&&a<=n.tapsThreshold,t.tap&&n.filterTaps)t._force=!0;else{let[e,r]=t._delta,[i,a]=t._movement,[o,s]=n.swipe.velocity,[l,u]=n.swipe.distance,c=n.swipe.duration;if(t.elapsedTime<c){let n=Math.abs(e/t.timeDelta),c=Math.abs(r/t.timeDelta);n>o&&Math.abs(i)>l&&(t.swipe[0]=Math.sign(e)),c>s&&Math.abs(a)>u&&(t.swipe[1]=Math.sign(r))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){let t=this.config,n=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,n,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){var t;this.state._preventScroll=!1,"persist"in(t=e)&&"function"==typeof t.persist&&t.persist();let n=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",n),this.eventStore.add(this.sharedConfig.window,"touch","cancel",n),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){let t=ey[e.key];if(t){let n=this.state,r=e.shiftKey?10:e.altKey?.1:1;this.start(e),n._delta=t(this.config.keyboardDisplacement,r),n._keyboardActive=!0,G.addTo(n._movement,n._delta),this.compute(e),this.emit()}}keyUp(e){e.key in ey&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){let t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}constructor(...e){super(...e),Y(this,"ingKey","dragging")}},ex="undefined"!=typeof window&&window.document&&window.document.createElement;function ew(){return ex&&"ontouchstart"in window}var ek={isBrowser:ex,gesture:function(){try{return"constructor"in GestureEvent}catch(e){return!1}}(),touch:ew(),touchscreen:ew()||ex&&window.navigator.maxTouchPoints>1,pointer:ex&&"onpointerdown"in window,pointerLock:ex&&"exitPointerLock"in window.document},eS={mouse:0,touch:0,pen:8},e_=Z(Z({},ev),{},{device(e,t,n){let{pointer:{touch:r=!1,lock:i=!1,mouse:a=!1}={}}=n;return(this.pointerLock=i&&ek.pointerLock,ek.touch&&r)?"touch":this.pointerLock?"mouse":ek.pointer&&!a?"pointer":ek.touch?"touch":"mouse"},preventScrollAxis(e,t,n){let{preventScroll:r}=n;if(this.preventScrollDelay="number"==typeof r?r:r||void 0===r&&e?250:void 0,ek.touchscreen&&!1!==r)return e||(void 0!==r?"y":void 0)},pointerCapture(e,t,n){let{pointer:{capture:r=!0,buttons:i=1,keys:a=!0}={}}=n;return this.pointerButtons=i,this.keys=a,!this.pointerLock&&"pointer"===this.device&&r},threshold(e,t,n){let{filterTaps:r=!1,tapsThreshold:i=3,axis:a}=n,o=G.toVector(e,r?i:+!!a);return this.filterTaps=r,this.tapsThreshold=i,o},swipe(){let{velocity:e=.5,distance:t=50,duration:n=250}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{velocity:this.transform(G.toVector(e)),distance:this.transform(G.toVector(t)),duration:n}},delay(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch(e){case!0:return 180;case!1:return 0;default:return e}},axisThreshold:e=>e?Z(Z({},eS),e):eS,keyboardDisplacement(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return e}});function eC(e){let[t,n]=e.overflow,[r,i]=e._delta,[a,o]=e._direction;(t<0&&r>0&&a<0||t>0&&r<0&&a>0)&&(e._movement[0]=e._movementBound[0]),(n<0&&i>0&&o<0||n>0&&i<0&&o>0)&&(e._movement[1]=e._movementBound[1])}var eA=class extends ep{init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();let e=this.state;e._touchIds=[],e.canceled=!1,e.cancel=this.cancel.bind(this),e.turns=0}computeOffset(){let{type:e,movement:t,lastOffset:n}=this.state;"wheel"===e?this.state.offset=G.add(t,n):this.state.offset=[(1+t[0])*n[0],t[1]+n[1]]}computeMovement(){let{offset:e,lastOffset:t}=this.state;this.state.movement=[e[0]/t[0],e[1]-t[1]]}axisIntent(){let e=this.state,[t,n]=e._movement;if(!e.axis){let r=30*Math.abs(t)-Math.abs(n);r<0?e.axis="angle":r>0&&(e.axis="scale")}}restrictToAxis(e){this.config.lockDirection&&("scale"===this.state.axis?e[1]=0:"angle"===this.state.axis&&(e[0]=0))}cancel(){let e=this.state;e.canceled||setTimeout(()=>{e.canceled=!0,e._active=!1,this.compute(),this.emit()},0)}touchStart(e){this.ctrl.setEventIds(e);let t=this.state,n=this.ctrl.touchIds;if(t._active&&t._touchIds.every(e=>n.has(e))||n.size<2)return;this.start(e),t._touchIds=Array.from(n).slice(0,2);let r=eo(e,t._touchIds);r&&this.pinchStart(e,r)}pointerStart(e){if(null!=e.buttons&&e.buttons%2!=1)return;this.ctrl.setEventIds(e),e.target.setPointerCapture(e.pointerId);let t=this.state,n=t._pointerEvents,r=this.ctrl.pointerIds;if(t._active&&Array.from(n.keys()).every(e=>r.has(e))||(n.size<2&&n.set(e.pointerId,e),t._pointerEvents.size<2))return;this.start(e);let i=ea(...Array.from(n.values()));i&&this.pinchStart(e,i)}pinchStart(e,t){this.state.origin=t.origin,this.computeValues([t.distance,t.angle]),this.computeInitial(),this.compute(e),this.emit()}touchMove(e){if(!this.state._active)return;let t=eo(e,this.state._touchIds);t&&this.pinchMove(e,t)}pointerMove(e){let t=this.state._pointerEvents;if(t.has(e.pointerId)&&t.set(e.pointerId,e),!this.state._active)return;let n=ea(...Array.from(t.values()));n&&this.pinchMove(e,n)}pinchMove(e,t){let n=this.state,r=n._values[1],i=t.angle-r,a=0;Math.abs(i)>270&&(a+=Math.sign(i)),this.computeValues([t.distance,t.angle-360*a]),n.origin=t.origin,n.turns=a,n._movement=[n._values[0]/n._initial[0]-1,n._values[1]-n._initial[1]],this.compute(e),this.emit()}touchEnd(e){this.ctrl.setEventIds(e),this.state._active&&this.state._touchIds.some(e=>!this.ctrl.touchIds.has(e))&&(this.state._active=!1,this.compute(e),this.emit())}pointerEnd(e){let t=this.state;this.ctrl.setEventIds(e);try{e.target.releasePointerCapture(e.pointerId)}catch(e){}t._pointerEvents.has(e.pointerId)&&t._pointerEvents.delete(e.pointerId),t._active&&t._pointerEvents.size<2&&(t._active=!1,this.compute(e),this.emit())}gestureStart(e){e.cancelable&&e.preventDefault();let t=this.state;t._active||(this.start(e),this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY],this.compute(e),this.emit())}gestureMove(e){if(e.cancelable&&e.preventDefault(),!this.state._active)return;let t=this.state;this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY];let n=t._movement;t._movement=[e.scale-1,e.rotation],t._delta=G.sub(t._movement,n),this.compute(e),this.emit()}gestureEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}wheel(e){let t=this.config.modifierKey;(!t||(Array.isArray(t)?t.find(t=>e[t]):e[t]))&&(this.state._active?this.wheelChange(e):this.wheelStart(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(e){this.start(e),this.wheelChange(e)}wheelChange(e){"uv"in e||e.cancelable&&e.preventDefault();let t=this.state;t._delta=[-eu(e)[1]/100*t.offset[0],0],G.addTo(t._movement,t._delta),eC(t),this.state.origin=[e.clientX,e.clientY],this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){let t=this.config.device;t&&(e(t,"start",this[t+"Start"].bind(this)),e(t,"change",this[t+"Move"].bind(this)),e(t,"end",this[t+"End"].bind(this)),e(t,"cancel",this[t+"End"].bind(this)),e("lostPointerCapture","",this[t+"End"].bind(this))),this.config.pinchOnWheel&&e("wheel","",this.wheel.bind(this),{passive:!1})}constructor(...e){super(...e),Y(this,"ingKey","pinching"),Y(this,"aliasKey","da")}},eE=Z(Z({},eg),{},{device(e,t,n){let{shared:r,pointer:{touch:i=!1}={}}=n;if(r.target&&!ek.touch&&ek.gesture)return"gesture";if(ek.touch&&i)return"touch";if(ek.touchscreen){if(ek.pointer)return"pointer";if(ek.touch)return"touch"}},bounds(e,t,n){let{scaleBounds:r={},angleBounds:i={}}=n,a=e=>{let t=eh(ec(r,e),{min:-1/0,max:1/0});return[t.min,t.max]},o=e=>{let t=eh(ec(i,e),{min:-1/0,max:1/0});return[t.min,t.max]};return"function"!=typeof r&&"function"!=typeof i?[a(),o()]:e=>[a(e),o(e)]},threshold(e,t,n){return this.lockDirection="lock"===n.axis,G.toVector(e,this.lockDirection?[.1,3]:0)},modifierKey:e=>void 0===e?"ctrlKey":e,pinchOnWheel(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];return e}}),eT=class extends ef{move(e){this.config.mouseOnly&&"mouse"!==e.pointerType||(this.state._active?this.moveChange(e):this.moveStart(e),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(e){this.start(e),this.computeValues(el(e)),this.compute(e),this.computeInitial(),this.emit()}moveChange(e){if(!this.state._active)return;let t=el(e),n=this.state;n._delta=G.sub(t,n._values),G.addTo(n._movement,n._delta),this.computeValues(t),this.compute(e),this.emit()}moveEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}bind(e){e("pointer","change",this.move.bind(this)),e("pointer","leave",this.moveEnd.bind(this))}constructor(...e){super(...e),Y(this,"ingKey","moving")}},eM=Z(Z({},ev),{},{mouseOnly:function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];return e}}),eI=class extends ef{scroll(e){this.state._active||this.start(e),this.scrollChange(e),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(e){e.cancelable&&e.preventDefault();let t=this.state,n=function(e){var t,n;let{scrollX:r,scrollY:i,scrollLeft:a,scrollTop:o}=e.currentTarget;return[null!=(t=null!=r?r:a)?t:0,null!=(n=null!=i?i:o)?n:0]}(e);t._delta=G.sub(n,t._values),G.addTo(t._movement,t._delta),this.computeValues(n),this.compute(e),this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("scroll","",this.scroll.bind(this))}constructor(...e){super(...e),Y(this,"ingKey","scrolling")}},eN=class extends ef{wheel(e){this.state._active||this.start(e),this.wheelChange(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(e){let t=this.state;t._delta=eu(e),G.addTo(t._movement,t._delta),eC(t),this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("wheel","",this.wheel.bind(this))}constructor(...e){super(...e),Y(this,"ingKey","wheeling")}},eD=class extends ef{enter(e){this.config.mouseOnly&&"mouse"!==e.pointerType||(this.start(e),this.computeValues(el(e)),this.compute(e),this.emit())}leave(e){if(this.config.mouseOnly&&"mouse"!==e.pointerType)return;let t=this.state;if(!t._active)return;t._active=!1;let n=el(e);t._movement=t._delta=G.sub(n,t._values),this.computeValues(n),this.compute(e),t.delta=t.movement,this.emit()}bind(e){e("pointer","enter",this.enter.bind(this)),e("pointer","leave",this.leave.bind(this))}constructor(...e){super(...e),Y(this,"ingKey","hovering")}},eP=Z(Z({},ev),{},{mouseOnly:function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];return e}}),eR=new Map,eO=new Map;function ej(e){eR.set(e.key,e.engine),eO.set(e.key,e.resolver)}var eF={key:"drag",engine:eb,resolver:e_},eL={key:"hover",engine:eD,resolver:eP},ez={key:"move",engine:eT,resolver:eM},eB={key:"pinch",engine:eA,resolver:eE},eU={key:"scroll",engine:eI,resolver:ev},eH={key:"wheel",engine:eN,resolver:ev},eW={target(e){if(e)return()=>"current"in e?e.current:e},enabled(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];return e},window(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ek.isBrowser?window:void 0;return e},eventOptions(){let{passive:e=!0,capture:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{passive:e,capture:t}},transform:e=>e},eV=["target","eventOptions","window","enabled","transform"];function eq(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n={};for(let[r,i]of Object.entries(t))switch(typeof i){case"function":n[r]=i.call(n,e[r],r,e);break;case"object":n[r]=eq(e[r],i);break;case"boolean":i&&(n[r]=e[r])}return n}var eG=class{add(e,t,n,r,i){let a=this._listeners,o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=J[e];return e+(n&&n[t]||t)}(t,n),s=Z(Z({},this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{}),i);e.addEventListener(o,r,s);let l=()=>{e.removeEventListener(o,r,s),a.delete(l)};return a.add(l),l}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}constructor(e,t){Y(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}},e$=class{add(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:140;for(var r=arguments.length,i=Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];this.remove(e),this._timeouts.set(e,window.setTimeout(t,n,...i))}remove(e){let t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}constructor(){Y(this,"_timeouts",new Map)}},eK=class{setEventIds(e){if(en(e))return this.touchIds=new Set(Array.from(e.touches).filter(t=>{var n,r;return t.target===e.currentTarget||(null==(n=e.currentTarget)||null==(r=n.contains)?void 0:r.call(n,t.target))}).map(e=>e.identifier)),this.touchIds;if("pointerId"in e)return"pointerup"===e.type||"pointercancel"===e.type?this.pointerIds.delete(e.pointerId):"pointerdown"===e.type&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{target:r,eventOptions:i,window:a,enabled:o,transform:s}=e,l=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,eV);if(n.shared=eq({target:r,eventOptions:i,window:a,enabled:o,transform:s},eW),t){let e=eO.get(t);n[t]=eq(Z({shared:n.shared},l),e)}else for(let e in l){let t=eO.get(e);t&&(n[e]=eq(Z({shared:n.shared},l[e]),t))}return n}(e,t,this.config)}clean(){for(let e of(this._targetEventStore.clean(),this.gestures))this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(){let e;for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];let i=this.config.shared,a={};if(!i.target||(e=i.target())){if(i.enabled){for(let t of this.gestures){let r=this.config[t],i=eX(a,r.eventOptions,!!e);r.enabled&&new(eR.get(t))(this,n,t).bind(i)}let t=eX(a,i.eventOptions,!!e);for(let e in this.nativeHandlers)t(e,"",t=>this.nativeHandlers[e](Z(Z({},this.state.shared),{},{event:t,args:n})),void 0,!0)}for(let e in a)a[e]=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?ed:1===t.length?t[0]:function(){let e;for(let n of t)e=n.apply(this,arguments)||e;return e}}(...a[e]);if(!e)return a;for(let t in a){let{device:n,capture:r,passive:i}=function(e){let t=e.substring(2).toLowerCase(),n=!!~t.indexOf("passive");n&&(t=t.replace("passive",""));let r=et.includes(t)?"capturecapture":"capture",i=!!~t.indexOf(r);return i&&(t=t.replace("capture","")),{device:t,capture:i,passive:n}}(t);this._targetEventStore.add(e,n,"",a[t],{capture:r,passive:i})}}}constructor(e){Y(this,"gestures",new Set),Y(this,"_targetEventStore",new eG(this)),Y(this,"gestureEventStores",{}),Y(this,"gestureTimeoutStores",{}),Y(this,"handlers",{}),Y(this,"config",{}),Y(this,"pointerIds",new Set),Y(this,"touchIds",new Set),Y(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),function(e,t){t.drag&&eY(e,"drag"),t.wheel&&eY(e,"wheel"),t.scroll&&eY(e,"scroll"),t.move&&eY(e,"move"),t.pinch&&eY(e,"pinch"),t.hover&&eY(e,"hover")}(this,e)}};function eY(e,t){e.gestures.add(t),e.gestureEventStores[t]=new eG(e,t),e.gestureTimeoutStores[t]=new e$}var eX=(e,t,n)=>function(r,i,a){var o,s;let l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},u=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=null!=(o=l.capture)?o:t.capture,d=null!=(s=l.passive)?s:t.passive,h=u?r:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=J[e],i=r&&r[t]||t;return"on"+Q(e)+Q(i)+(!function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return e&&!ee.includes(t)}(n,i)?"":"Capture")}(r,i,c);n&&d&&(h+="Passive"),e[h]=e[h]||[],e[h].push(a)},eZ=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function eJ(e,t,n,r,i,a){if(!e.has(n)||!eR.has(r))return;let o=n+"Start",s=n+"End";i[r]=e=>{let r;return e.first&&o in t&&t[o](e),n in t&&(r=t[n](e)),e.last&&s in t&&t[s](e),r},a[r]=a[r]||{}}var eQ=e=>{var t,r;let{children:i,gap:a=10,virtualizerOptions:o={overscan:3},initialOffset:c,onOffsetChange:d,...p}=e,[f,m]=(0,n.useState)([]),w=x(e=>e.viewports),k=x(e=>e.pdfDocumentProxy.numPages),S=x(e=>e.isPinching),_=(0,n.useRef)(null),C=(0,n.useRef)(null),A=(0,n.useRef)(null);(e=>{var t,r;let{containerRef:i,elementWrapperRef:a,elementRef:o}=e,[s,l]=(0,n.useState)([0,0]),{maxZoom:u,minZoom:c}=x(e=>e.zoomOptions),d=x(e=>e.zoom),h=x(e=>e.viewportRef),p=x(e=>e.setIsPinching),f=x(e=>e.updateZoom);(0,n.useEffect)(()=>{h.current=i.current},[i,h]);let m=(0,n.useRef)({translateX:0,translateY:0,zoom:d}),y=(0,n.useCallback)(e=>{if(!o.current||!i.current||!a.current)return;let{zoom:t,translateX:n,translateY:r}=m.current;o.current.style.transform="scale3d(".concat(t,", ").concat(t,", 1)");let s=o.current.getBoundingClientRect(),l=s.width;a.current.style.width="".concat(l,"px"),a.current.style.height="".concat(s.height,"px"),i.current.scrollTop=r,i.current.scrollLeft=n,e&&f(()=>m.current.zoom)},[i,o,a,f]);return(0,n.useEffect)(()=>{if(m.current.zoom===d||!i.current)return;let e=d/m.current.zoom;m.current={translateX:i.current.scrollLeft*e,translateY:i.current.scrollTop*e,zoom:d},y()},[i,d]),(0,n.useLayoutEffect)(()=>{y()},[]),(0,n.useEffect)(()=>{let e=e=>e.preventDefault();return document.addEventListener("gesturestart",e),document.addEventListener("gesturechange",e),()=>{document.removeEventListener("gesturestart",e),document.removeEventListener("gesturechange",e)}}),t={onPinch:e=>{let{origin:t,first:n,movement:[r],memo:a}=e,s=((e,t,n)=>{if(!e&&!t)throw Error("Missing memo initialization. You likely forgot to return the result of `firstMemo` in the event function");return e?n():t})(n,a,()=>{let e=o.current.getBoundingClientRect(),n=i.current.getBoundingClientRect(),r=[t[0]-e.left,t[1]-e.top],a=[t[0]-n.left,t[1]-n.top];return l([r[0]/m.current.zoom,r[1]/m.current.zoom]),{contentPosition:r,containerPosition:a,originZoom:m.current.zoom,originTranslate:m.current.translateY}}),d=g(r*s.originZoom,c,u),h=d/s.originZoom;return m.current={zoom:d,translateX:s.contentPosition[0]*h-s.containerPosition[0],translateY:s.contentPosition[1]*h-s.containerPosition[1]},y(!0),s},onPinchStart:()=>p(!0),onPinchEnd:()=>p(!1)},r={target:i},([eF,eB,eU,eH,ez,eL].forEach(ej),function(e,t){let{handlers:r,nativeHandlers:i,config:a}=function(e,t){let[n,r,i]=function(e){let t={},n={},r=new Set;for(let i in e)eZ.test(i)?(r.add(RegExp.lastMatch),n[i]=e[i]):t[i]=e[i];return[n,t,r]}(e),a={};return eJ(i,n,"onDrag","drag",a,t),eJ(i,n,"onWheel","wheel",a,t),eJ(i,n,"onScroll","scroll",a,t),eJ(i,n,"onPinch","pinch",a,t),eJ(i,n,"onMove","move",a,t),eJ(i,n,"onHover","hover",a,t),{handlers:a,config:t,nativeHandlers:r}}(e,t||{});return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,a=n.default.useMemo(()=>new eK(e),[]);if(a.applyHandlers(e,i),a.applyConfig(t,r),n.default.useEffect(a.effect.bind(a)),n.default.useEffect(()=>a.clean.bind(a),[]),void 0===t.target)return a.bind.bind(a)}(r,a,void 0,i)})(t,r||{})})({elementRef:C,elementWrapperRef:_,containerRef:A});let E=x(e=>e.setVirtualizer),{scrollToFn:T}=(()=>{let e=b.useContext();return{scrollToFn:(0,n.useCallback)((t,n,r)=>{let i=e.getState().zoom;(0,l.elementScroll)(t*i,n,r)},[e])}})(),{observeElementOffset:M}=(()=>{let e=b.useContext();return{observeElementOffset:(t,n)=>{let r=t.scrollElement;if(!r)return;let i=t.targetWindow;if(!i)return;let a=0,o=t.options.useScrollendEvent&&V?()=>void 0:(0,u.debounce)(i,()=>{n(a,!1)},t.options.isScrollingResetDelay),s=i=>()=>{let{horizontal:s,isRtl:l}=t.options;a=s?r.scrollLeft*(l&&-1||1):r.scrollTop;let u=e.getState().zoom;a/=u,o(),n(a,i)},l=s(!0),c=s(!1);return c(),r.addEventListener("scroll",l,q),r.addEventListener("scrollend",c,q),()=>{r.removeEventListener("scroll",l),r.removeEventListener("scrollend",c)}}}})(),I=(0,n.useCallback)(e=>w&&w[e]?w[e].height+0:600,[w]),N=(0,s.useVirtualizer)({count:k||0,getScrollElement:()=>A.current,estimateSize:I,observeElementOffset:M,overscan:null!=(t=null==o?void 0:o.overscan)?t:0,scrollToFn:T,gap:a,initialOffset:c});(0,n.useEffect)(()=>{d&&N.scrollOffset&&d(N.scrollOffset)},[N.scrollOffset,d]),(0,n.useEffect)(()=>{E(N)},[E,N]),(0,n.useEffect)(()=>{let e,t=null==N?void 0:N.getVirtualItems();return S?t&&(null==t?void 0:t.length)>0&&m(t):(null==N||N.measure(),e=setTimeout(()=>{m([])},200)),()=>{clearTimeout(e)}},[S]);let D=null!=(r=null==N?void 0:N.getVirtualItems())?r:[],P=f.length?f:D;(e=>{let{items:t}=e,r=x(e=>e.zoom),i=x(e=>e.isPinching),a=x(e=>e.setCurrentPage),o=x(e=>{var t;return null==(t=e.viewportRef)?void 0:t.current}),s=(0,n.useCallback)(e=>{if(!o||0===e.length)return 0;let t=o.scrollTop/r+o.clientHeight/r/2,n=0,i=1/0;for(let r of e){let e=Math.abs(r.start+r.size/2-t);e<.8*i&&(i=e,n=r.index)}return n},[o,r]);return(0,n.useEffect)(()=>{if(!i&&t.length>0){let e=s(t);null==a||a(e+1)}},[t,i,s,a])})({items:P}),(e=>{let{viewportRef:t}=e,r=x(e=>e.viewports),i=x(e=>e.zoomOptions),a=x(e=>e.updateZoom),o=b.useContext();return(0,n.useLayoutEffect)(()=>{if(null===t.current)return;let e=new ResizeObserver(e=>{for(let n of e){let e=o.getState().isZoomFitWidth;n.target===t.current&&e&&a(y(n.contentRect.width,r,i),!0)}});return e.observe(t.current),()=>{e.disconnect()}},[o,a,t,r,i])})({viewportRef:A});let R=x(e=>Math.max(...e.viewports.map(e=>e.width))),O=x(e=>e.zoom);return(0,n.useEffect)(()=>{N.getOffsetForAlignment=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=N.getSize(),i=N.getScrollOffset();"auto"===t&&(t=e>=i+r?"end":"start"),"center"===t?e+=(n-r)/2:"end"===t&&(e-=r);let a=N.options.horizontal?"scrollWidth":"scrollHeight";return N.scrollElement&&("document"in N.scrollElement?N.scrollElement.document.documentElement[a]:N.scrollElement[a]),Math.max(e,0)}},[O,N]),(0,h.jsx)(z.div,{ref:A,...p,style:{display:"flex",justifyContent:"center",height:"100%",position:"relative",overflow:"auto",...p.style},children:(0,h.jsx)("div",{ref:_,style:{width:"max-content"},children:(0,h.jsx)("div",{ref:C,style:{height:"".concat(N.getTotalSize(),"px"),position:"absolute",display:"flex",alignItems:"center",flexDirection:"column",transformOrigin:"0 0",width:R,margin:"0 auto"},children:P.map(e=>{var t;let r=w&&w[e.index]?null==(t=w[e.index])?void 0:t.width:0;return r?(0,h.jsx)("div",{style:{width:r,height:"0px"},children:(0,h.jsx)("div",{style:{height:"".concat(e.size,"px"),transform:"translateY(".concat(e.start,"px)")},children:(0,n.cloneElement)(i,{key:e.key,pageNumber:e.index+1})})},e.key):null})})})})},e0=(0,n.forwardRef)((e,t)=>{let{children:r,source:i,loader:a,onDocumentLoad:o,isZoomFitWidth:s,zoom:l,zoomOptions:u,...c}=e,{initialState:d}=(e=>{let{onDocumentLoad:t,source:r,initialRotation:i=0,isZoomFitWidth:a,zoom:o=1,zoomOptions:s}=e,[l,u]=(0,n.useState)(0),[c,d]=(0,n.useState)(),[h]=(0,n.useState)(i);return(0,n.useEffect)(()=>{let e=async e=>{let t=[],n=[],r=await Promise.all(Array.from({length:e.numPages},async(r,i)=>{let a=await e.getPage(i+1),o=a.rotate||0,s=a.getViewport({scale:1,rotation:h+o});return t.push(a),n.push(a.rotate),s})),i=t.sort((e,t)=>e.pageNumber-t.pageNumber);d(t=>({...t,isZoomFitWidth:a,viewports:r,pageProxies:i,pdfDocumentProxy:e,zoom:o,zoomOptions:s}))};(()=>{d(null),u(0);let n=(0,p.getDocument)(r);n.onProgress=e=>{e.loaded!==e.total&&u(e.loaded/e.total)};let i=n.promise.then(n=>{null==t||t({proxy:n,source:r}),u(1),e(n)}).catch(e=>{n.destroyed||console.error("Error loading PDF document",e)});return()=>{i.finally(()=>n.destroy())}})()},[r]),{initialState:c}})({source:i,onDocumentLoad:o,isZoomFitWidth:s,zoom:l,zoomOptions:u});return(0,h.jsx)(z.div,{ref:t,...c,children:d?(0,h.jsx)(b.Provider,{initialValue:d,children:r}):a||"Loading..."})});e0.displayName="Root";var e1=e=>{let{children:t,loading:r="Loading..."}=e,[i,a]=(0,n.useState)(!1),o=x(e=>e.pageProxies),s=x(e=>e.setTextContent),l=(0,n.useCallback)(async e=>{a(!0);let t=e.map(async e=>{let t=(await e.getTextContent()).items.map(e=>(null==e?void 0:e.str)||"").join("");return Promise.resolve({pageNumber:e.pageNumber,text:t})}),n=await Promise.all(t);a(!1),s(n)},[s]);return(0,n.useEffect)(()=>{l(o)},[o,l]),i?r:t},e2={maxHeight:800,maxWidth:400},e3=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{maxHeight:r=e2.maxHeight,maxWidth:i=e2.maxWidth,isFirstPage:a=!1}=t,o=(0,n.useRef)(null),s=(0,n.useRef)(null),l=(0,n.useRef)(null),u=x(t=>t.getPdfPageProxy(e)),{visible:c}=(e=>{let{elementRef:t}=e,[r,i]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{if(!t.current)return;let e=new IntersectionObserver(e=>{var t;let[n]=e;i(null!=(t=null==n?void 0:n.isIntersecting)&&t)});return e.observe(t.current),()=>{e.disconnect()}},[t]),{visible:r}})({elementRef:o}),[d]=(0,f.useDebounce)(c,50),h=I(),p=a||d;return(0,n.useEffect)(()=>((async()=>{let e=s.current;if(e&&u)try{l.current&&l.current.cancel();let t=u.getViewport({scale:1}),n=Math.min(i/t.width,r/t.height)*(p?h:.5),a=u.getViewport({scale:n});e.width=a.width,e.height=a.height;let o=e.getContext("2d");if(!o)return;let s=u.render({canvasContext:o,viewport:a});l.current=s,await s.promise}catch(e){e instanceof Error&&"RenderingCancelledException"===e.name?console.log("Rendering cancelled"):console.error("Failed to render PDF page:",e)}})(),()=>{var e;null==(e=l.current)||e.cancel()}),[e,u,p,h,r,i]),{canvasRef:s,containerRef:o,isVisible:p}},e5=e=>{let{pageNumber:t=1,...n}=e,{canvasRef:r,containerRef:i,isVisible:a}=e3(t,{isFirstPage:t<5}),{jumpToPage:o}=T();return(0,h.jsx)("div",{ref:i,style:{minHeight:"150px",minWidth:"10px"},children:a&&(0,h.jsx)(z.canvas,{...n,role:"button",tabIndex:0,onClick:e=>{n.onClick&&n.onClick(e),o(t,{behavior:"auto"})},onKeyDown:e=>{n.onKeyDown&&n.onKeyDown(e),"Enter"===e.key&&o(t,{behavior:"auto"})},ref:r})})},e4=e=>{let{children:t,...r}=e,i=x(e=>e.pdfDocumentProxy.numPages);return(0,h.jsx)(z.div,{...r,children:Array.from({length:i}).map((e,r)=>(0,n.cloneElement)(t,{key:r,pageNumber:r+1}))})},e9=()=>{let e=x(e=>e.textContent),[t]=(0,n.useState)([]),[r,i]=(0,n.useState)({exactMatches:[],fuzzyMatches:[],hasMoreResults:!1}),a=(0,n.useCallback)(function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{threshold:r=.7,limit:a=10,textSize:o=100}=n;if(!t.trim()){let e={exactMatches:[],fuzzyMatches:[],hasMoreResults:!1};return i(e),e}let s=[],l=[],u=new Set;e.forEach(e=>{let{pageNumber:n,text:r}=e,i=((e,t,n,r)=>{let i=[],a=t.toLowerCase(),o=e.toLowerCase(),s=0;for(;;){let l=a.indexOf(o,s);if(-1===l)break;i.push({pageNumber:n,text:t.substr(l,e.length+r),score:1,matchIndex:l,isExactMatch:!0,searchText:e}),s=l+e.length}return i})(t,r,n,o);s=[...s,...i],i.forEach(e=>{for(let n=0;n<t.length;n++)u.add(e.matchIndex+n)})}),e.forEach(e=>{let{pageNumber:n,text:i}=e,a=((e,t,n,r,i,a)=>{let o=[],s=t.toLowerCase(),l=e.toLowerCase(),u=0;for(;u<s.length;){if(i.has(u)){u++;continue}let c=s.substr(u,l.length+10),d=function(e,t){let n=[];for(let e=0;e<=t.length;e++)n[e]=[e];for(let t=0;t<=e.length;t++)n[0][t]=t;for(let r=1;r<=t.length;r++)for(let i=1;i<=e.length;i++)t.charAt(r-1)===e.charAt(i-1)?n[r][i]=n[r-1][i-1]:n[r][i]=Math.min(n[r-1][i-1]+1,n[r][i-1]+1,n[r-1][i]+1);return n[t.length][e.length]}(l,c.substr(0,l.length));if(d<=Math.floor(l.length*(1-r))&&d>0){let r=1-d/l.length;o.push({pageNumber:n,text:t.substr(u,l.length+a),score:r,matchIndex:u,isExactMatch:!1,searchText:e}),u+=l.length}else u++}return o})(t,i,n,r,u,o);l=[...l,...a]}),s.sort((e,t)=>t.score-e.score),l.sort((e,t)=>t.score-e.score);let c=Math.min(s.length,Math.ceil(a/2)),d=Math.min(l.length,a-c),h={exactMatches:s.slice(0,c),fuzzyMatches:l.slice(0,d),hasMoreResults:s.length+l.length>a};return i(h),h},[e]);return{textContent:e,keywords:t,searchResults:r,search:a}};async function e8(e,t){let n=(await e.getTextContent()).items,r=t.searchText?t.searchText.length:t.text.length,i=[],a=0,o=r,s=!1,l=e.getViewport({scale:1});for(let e=0;e<n.length;e++){let r=n[e];if(!r)continue;let u=r.str.length;if(!s&&a<=t.matchIndex&&t.matchIndex<a+u){s=!0;let e=t.matchIndex-a,n=Math.min(u-e,o),c=r.transform,d=l.height-(c[5]+r.height),h={pageNumber:t.pageNumber,left:c[4]+e*(r.width/u),top:d,width:n*(r.width/u),height:r.height};i.push(h),o-=n}else if(s&&o>0){let e=Math.min(u,o),n=r.transform,a=l.height-(n[5]+r.height),s={pageNumber:t.pageNumber,left:n[4],top:a,width:e*(r.width/u),height:r.height};i.push(s),o-=e}if(o<=0&&s)break;a+=u}var u=i;if(u.length<=1)return u;let c=[],d=u[0];if(!d)return u;for(let e=1;e<u.length;e++){let t=u[e];t&&(2>Math.abs(d.top-t.top)&&2>Math.abs(d.height-t.height)?d={...d,width:t.left+t.width-d.left}:(c.push(d),d=t))}return c.push(d),c}},626899:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("arrow-up-right",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]])},184901:e=>{"use strict";e.s({ArrowUpRight:()=>t.default});var t=e.i(626899)},882204:e=>{"use strict";e.s({CheckIcon:()=>t.default});var t=e.i(586718)},950995:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},45576:e=>{"use strict";e.s({ExternalLinkIcon:()=>t.default});var t=e.i(950995)},272819:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("fold-vertical",[["path",{d:"M12 22v-6",key:"6o8u61"}],["path",{d:"M12 8V2",key:"1wkif3"}],["path",{d:"M4 12H2",key:"rhcxmi"}],["path",{d:"M10 12H8",key:"s88cx1"}],["path",{d:"M16 12h-2",key:"10asgb"}],["path",{d:"M22 12h-2",key:"14jgyd"}],["path",{d:"m15 19-3-3-3 3",key:"e37ymu"}],["path",{d:"m15 5-3 3-3-3",key:"19d6lf"}]])},919807:e=>{"use strict";e.s({FoldVertical:()=>t.default});var t=e.i(272819)},779617:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("layout-list",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]])},546074:e=>{"use strict";e.s({LayoutList:()=>t.default});var t=e.i(779617)},589540:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]])},65965:e=>{"use strict";e.s({MaximizeIcon:()=>t.default});var t=e.i(589540)},240824:e=>{"use strict";e.s({SearchIcon:()=>t.default});var t=e.i(964606)},445950:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("unfold-vertical",[["path",{d:"M12 22v-6",key:"6o8u61"}],["path",{d:"M12 8V2",key:"1wkif3"}],["path",{d:"M4 12H2",key:"rhcxmi"}],["path",{d:"M10 12H8",key:"s88cx1"}],["path",{d:"M16 12h-2",key:"10asgb"}],["path",{d:"M22 12h-2",key:"14jgyd"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m15 5-3-3-3 3",key:"itvq4r"}]])},635934:e=>{"use strict";e.s({UnfoldVertical:()=>t.default});var t=e.i(445950)},88070:e=>{"use strict";e.s({XIcon:()=>t.default});var t=e.i(977204)},918170:e=>{"use strict";e.s({});var t=e.i(555168);let n=t.z.object({key:t.z.string(),title:t.z.string(),description:t.z.string().optional(),isCompleted:t.z.boolean().default(!1),completedAt:t.z.string().nullable().optional(),isDismissed:t.z.boolean().default(!1),dismissedAt:t.z.string().nullable().optional(),isVerified:t.z.boolean().default(!1),verifiedAt:t.z.string().nullable().optional()}),r=t.z.object({key:t.z.string(),title:t.z.string(),description:t.z.string().optional(),learnMoreUrl:t.z.string().optional(),steps:t.z.array(n),isCompleted:t.z.boolean().default(!1),completedAt:t.z.string().nullable().optional(),isDismissed:t.z.boolean().default(!1),dismissedAt:t.z.string().nullable().optional(),isVerified:t.z.boolean().default(!1),verifiedAt:t.z.string().nullable().optional()});t.z.object({userId:t.z.string(),workflows:t.z.array(r),lastUpdated:t.z.string(),allVerificationsComplete:t.z.boolean().default(!1),verificationsCompletedAt:t.z.string().nullable().optional(),allFeaturesCompleted:t.z.boolean().default(!1),allFeaturesCompletedAt:t.z.string().nullable().optional()}),t.z.object({userId:t.z.string(),workflowKey:t.z.string(),stepKey:t.z.string(),isCompleted:t.z.boolean()}),t.z.object({userId:t.z.string(),workflowKey:t.z.string(),isDismissed:t.z.boolean()}),t.z.object({userId:t.z.string()}),t.z.object({userId:t.z.string()})},954931:e=>{"use strict";e.s({chunkMetadataSchema:()=>c});var t=e.i(555168);e.i(918170);let n=t.z.object({type:t.z.literal("note")}),r=t.z.object({type:t.z.literal("text")}),i=t.z.object({type:t.z.literal("document"),origElements:t.z.string(),chunkIndex:t.z.number(),fileType:t.z.string(),fileName:t.z.string(),pageNumber:t.z.number().optional()}),a=t.z.object({type:t.z.literal("self-document"),chunkIndex:t.z.number(),fileType:t.z.string(),fileName:t.z.string(),pageNumber:t.z.number().optional(),origElements:t.z.string().optional()}),o=t.z.object({type:t.z.literal("video"),seek:t.z.number().optional(),start:t.z.number(),end:t.z.number()}),s=t.z.object({type:t.z.literal("audio"),start:t.z.number(),end:t.z.number(),speaker:t.z.number().optional()}),l=t.z.object({type:t.z.literal("website"),chunkIndex:t.z.number(),fileType:t.z.string(),fileName:t.z.string(),url:t.z.string()}),u=t.z.object({type:t.z.literal("quiz")}),c=t.z.intersection(t.z.discriminatedUnion("type",[i,n,r,a,o,s,l,u]),t.z.object({id:t.z.string().optional(),userId:t.z.string(),chatbotId:t.z.string(),text:t.z.string(),displayedOrder:t.z.number().optional()})),d=t.z.discriminatedUnion("type",[t.z.object({type:t.z.literal("image_url"),image_url:t.z.object({url:t.z.string()})}),t.z.object({type:t.z.literal("text"),text:t.z.string()}),t.z.object({type:t.z.literal("thinking"),text:t.z.string(),duration:t.z.number()}),t.z.object({type:t.z.literal("mention"),chatbotId:t.z.string(),chatbotName:t.z.string()})]),h=t.z.object({data:d,id:t.z.string(),name:t.z.string().optional(),extension:t.z.string().optional(),highlights:t.z.array(t.z.object({pageNumber:t.z.number(),top:t.z.number(),left:t.z.number(),height:t.z.number(),width:t.z.number()})).optional(),chatbotId:t.z.string(),type:t.z.enum(["image","text","thinking","mention"])}),p=t.z.enum(["all","library","generalKnowledge"]);t.z.object({id:t.z.string().optional(),chatbotId:t.z.string(),modelName:t.z.string(),maxLength:t.z.number(),groupMemberIds:t.z.array(t.z.string()),language:t.z.string().default("English"),messages:t.z.array(t.z.any()),isTeam:t.z.boolean(),attachments:t.z.array(h).optional(),conversationId:t.z.string(),inputQuestion:t.z.string(),sourceMode:p.optional(),version:t.z.enum(["v2","v3"])}),t.z.object({id:t.z.string(),chatbotId:t.z.string(),inputQuestion:t.z.string(),messages:t.z.array(t.z.any()),groupMemberIds:t.z.array(t.z.string())}),t.z.object({chatbotId:t.z.string(),text:t.z.string(),pageNumber:t.z.number().optional(),chunkIndex:t.z.number().optional(),coordinates:t.z.any()}),t.z.enum(["APP_LANDING_FIRST_VISIT","AGENT_LANDING_FIRST_VISIT","AGENT_FIRST_VISIT","LIBRARY_FIRST_VISIT","CHAT_FIRST_VISIT","TOOLBAR_MENU_MOVED"])},273702:e=>{"use strict";e.s({}),e.i(918170),e.i(954931)},750066:e=>{"use strict";let t,n,r,i,a;function o(e){let t=e.length;for(;--t>=0;)e[t]=0}e.s({default:()=>tD});let s=573,l=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),u=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),c=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),d=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),h=Array(576);o(h);let p=Array(60);o(p);let f=Array(512);o(f);let m=Array(256);o(m);let g=Array(29);o(g);let y=Array(30);function b(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function x(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}o(y);let w=e=>e<256?f[e]:f[256+(e>>>7)],k=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},S=(e,t,n)=>{e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,k(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},_=(e,t,n)=>{S(e,n[2*t],n[2*t+1])},C=(e,t)=>{let n=0;do n|=1&e,e>>>=1,n<<=1;while(--t>0)return n>>>1},A=(e,t,n)=>{let r,i,a=Array(16),o=0;for(r=1;r<=15;r++)o=o+n[r-1]<<1,a[r]=o;for(i=0;i<=t;i++){let t=e[2*i+1];0!==t&&(e[2*i]=C(a[t]++,t))}},E=e=>{let t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},T=e=>{e.bi_valid>8?k(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},M=(e,t,n,r)=>{let i=2*t,a=2*n;return e[i]<e[a]||e[i]===e[a]&&r[t]<=r[n]},I=(e,t,n)=>{let r=e.heap[n],i=n<<1;for(;i<=e.heap_len&&(i<e.heap_len&&M(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!M(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r},N=(e,t,n)=>{let r,i,a,o,s=0;if(0!==e.sym_next)do r=(255&e.pending_buf[e.sym_buf+s++])+((255&e.pending_buf[e.sym_buf+s++])<<8),i=e.pending_buf[e.sym_buf+s++],0===r?_(e,i,t):(_(e,(a=m[i])+256+1,t),0!==(o=l[a])&&S(e,i-=g[a],o),_(e,a=w(--r),n),0!==(o=u[a])&&S(e,r-=y[a],o));while(s<e.sym_next)_(e,256,t)},D=(e,t)=>{let n,r,i,a=t.dyn_tree,o=t.stat_desc.static_tree,l=t.stat_desc.has_stree,u=t.stat_desc.elems,c=-1;for(n=0,e.heap_len=0,e.heap_max=s;n<u;n++)0!==a[2*n]?(e.heap[++e.heap_len]=c=n,e.depth[n]=0):a[2*n+1]=0;for(;e.heap_len<2;)a[2*(i=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[i]=0,e.opt_len--,l&&(e.static_len-=o[2*i+1]);for(t.max_code=c,n=e.heap_len>>1;n>=1;n--)I(e,a,n);i=u;do n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],I(e,a,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,a[2*i]=a[2*n]+a[2*r],e.depth[i]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,a[2*n+1]=a[2*r+1]=i,e.heap[1]=i++,I(e,a,1);while(e.heap_len>=2)e.heap[--e.heap_max]=e.heap[1],((e,t)=>{let n,r,i,a,o,l,u=t.dyn_tree,c=t.max_code,d=t.stat_desc.static_tree,h=t.stat_desc.has_stree,p=t.stat_desc.extra_bits,f=t.stat_desc.extra_base,m=t.stat_desc.max_length,g=0;for(a=0;a<=15;a++)e.bl_count[a]=0;for(u[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<s;n++)(a=u[2*u[2*(r=e.heap[n])+1]+1]+1)>m&&(a=m,g++),u[2*r+1]=a,!(r>c)&&(e.bl_count[a]++,o=0,r>=f&&(o=p[r-f]),l=u[2*r],e.opt_len+=l*(a+o),h&&(e.static_len+=l*(d[2*r+1]+o)));if(0!==g){do{for(a=m-1;0===e.bl_count[a];)a--;e.bl_count[a]--,e.bl_count[a+1]+=2,e.bl_count[m]--,g-=2}while(g>0)for(a=m;0!==a;a--)for(r=e.bl_count[a];0!==r;)!((i=e.heap[--n])>c)&&(u[2*i+1]!==a&&(e.opt_len+=(a-u[2*i+1])*u[2*i],u[2*i+1]=a),r--)}})(e,t),A(a,c,e.bl_count)},P=(e,t,n)=>{let r,i,a=-1,o=t[1],s=0,l=7,u=4;for(0===o&&(l=138,u=3),t[(n+1)*2+1]=65535,r=0;r<=n;r++)i=o,o=t[(r+1)*2+1],++s<l&&i===o||(s<u?e.bl_tree[2*i]+=s:0!==i?(i!==a&&e.bl_tree[2*i]++,e.bl_tree[32]++):s<=10?e.bl_tree[34]++:e.bl_tree[36]++,s=0,a=i,0===o?(l=138,u=3):i===o?(l=6,u=3):(l=7,u=4))},R=(e,t,n)=>{let r,i,a=-1,o=t[1],s=0,l=7,u=4;for(0===o&&(l=138,u=3),r=0;r<=n;r++)if(i=o,o=t[(r+1)*2+1],!(++s<l)||i!==o){if(s<u)do _(e,i,e.bl_tree);while(0!=--s)else 0!==i?(i!==a&&(_(e,i,e.bl_tree),s--),_(e,16,e.bl_tree),S(e,s-3,2)):s<=10?(_(e,17,e.bl_tree),S(e,s-3,3)):(_(e,18,e.bl_tree),S(e,s-11,7));s=0,a=i,0===o?(l=138,u=3):i===o?(l=6,u=3):(l=7,u=4)}},O=!1,j=(e,t,n,r)=>{S(e,0+ +!!r,3),T(e),k(e,n),k(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n};var F={_tr_init:e=>{O||((()=>{let e,i,a,o,s,d=Array(16);for(o=0,a=0;o<28;o++)for(e=0,g[o]=a;e<1<<l[o];e++)m[a++]=o;for(m[a-1]=o,s=0,o=0;o<16;o++)for(e=0,y[o]=s;e<1<<u[o];e++)f[s++]=o;for(s>>=7;o<30;o++)for(e=0,y[o]=s<<7;e<1<<u[o]-7;e++)f[256+s++]=o;for(i=0;i<=15;i++)d[i]=0;for(e=0;e<=143;)h[2*e+1]=8,e++,d[8]++;for(;e<=255;)h[2*e+1]=9,e++,d[9]++;for(;e<=279;)h[2*e+1]=7,e++,d[7]++;for(;e<=287;)h[2*e+1]=8,e++,d[8]++;for(A(h,287,d),e=0;e<30;e++)p[2*e+1]=5,p[2*e]=C(e,5);t=new b(h,l,257,286,15),n=new b(p,u,0,30,15),r=new b([],c,0,19,7)})(),O=!0),e.l_desc=new x(e.dyn_ltree,t),e.d_desc=new x(e.dyn_dtree,n),e.bl_desc=new x(e.bl_tree,r),e.bi_buf=0,e.bi_valid=0,E(e)},_tr_stored_block:j,_tr_flush_block:(e,t,n,r)=>{let i,a,o=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,n=0xf3ffc07f;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),D(e,e.l_desc),D(e,e.d_desc),o=(e=>{let t;for(P(e,e.dyn_ltree,e.l_desc.max_code),P(e,e.dyn_dtree,e.d_desc.max_code),D(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*d[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),i=e.opt_len+3+7>>>3,(a=e.static_len+3+7>>>3)<=i&&(i=a)):i=a=n+5,n+4<=i&&-1!==t?j(e,t,n,r):4===e.strategy||a===i?(S(e,2+ +!!r,3),N(e,h,p)):(S(e,4+ +!!r,3),((e,t,n,r)=>{let i;for(S(e,t-257,5),S(e,n-1,5),S(e,r-4,4),i=0;i<r;i++)S(e,e.bl_tree[2*d[i]+1],3);R(e,e.dyn_ltree,t-1),R(e,e.dyn_dtree,n-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),N(e,e.dyn_ltree,e.dyn_dtree)),E(e),r&&T(e)},_tr_tally:(e,t,n)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[(m[n]+256+1)*2]++,e.dyn_dtree[2*w(t)]++),e.sym_next===e.sym_end),_tr_align:e=>{S(e,2,3),_(e,256,h),(e=>{16===e.bi_valid?(k(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)}},L=(e,t,n,r)=>{let i=65535&e,a=e>>>16&65535,o=0;for(;0!==n;){o=n>2e3?2e3:n,n-=o;do a=a+(i=i+t[r++]|0)|0;while(--o)i%=65521,a%=65521}return i|a<<16};let z=new Uint32Array((()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?0xedb88320^e>>>1:e>>>1;t[n]=e}return t})());var B=(e,t,n,r)=>{let i=r+n;e^=-1;for(let n=r;n<i;n++)e=e>>>8^z[(e^t[n])&255];return -1^e},U={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},H={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};let{_tr_init:W,_tr_stored_block:V,_tr_flush_block:q,_tr_tally:G,_tr_align:$}=F,{Z_NO_FLUSH:K,Z_PARTIAL_FLUSH:Y,Z_FULL_FLUSH:X,Z_FINISH:Z,Z_BLOCK:J,Z_OK:Q,Z_STREAM_END:ee,Z_STREAM_ERROR:et,Z_DATA_ERROR:en,Z_BUF_ERROR:er,Z_DEFAULT_COMPRESSION:ei,Z_FILTERED:ea,Z_HUFFMAN_ONLY:eo,Z_RLE:es,Z_FIXED:el,Z_DEFAULT_STRATEGY:eu,Z_UNKNOWN:ec,Z_DEFLATED:ed}=H,eh=573,ep=(e,t)=>(e.msg=U[t],t),ef=e=>2*e-9*(e>4),em=e=>{let t=e.length;for(;--t>=0;)e[t]=0},eg=e=>{let t,n,r,i=e.w_size;r=t=e.hash_size;do n=e.head[--r],e.head[r]=n>=i?n-i:0;while(--t)r=t=i;do n=e.prev[--r],e.prev[r]=n>=i?n-i:0;while(--t)},ev=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask,ey=e=>{let t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},eb=(e,t)=>{q(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,ey(e.strm)},ex=(e,t)=>{e.pending_buf[e.pending++]=t},ew=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},ek=(e,t,n,r)=>{let i=e.avail_in;return(i>r&&(i=r),0===i)?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),n),1===e.state.wrap?e.adler=L(e.adler,t,i,n):2===e.state.wrap&&(e.adler=B(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)},eS=(e,t)=>{let n,r,i=e.max_chain_length,a=e.strstart,o=e.prev_length,s=e.nice_match,l=e.strstart>e.w_size-262?e.strstart-(e.w_size-262):0,u=e.window,c=e.w_mask,d=e.prev,h=e.strstart+258,p=u[a+o-1],f=u[a+o];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do{if(u[(n=t)+o]!==f||u[n+o-1]!==p||u[n]!==u[a]||u[++n]!==u[a+1])continue;a+=2,n++;do;while(u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&a<h)if(r=258-(h-a),a=h-258,r>o){if(e.match_start=t,o=r,r>=s)break;p=u[a+o-1],f=u[a+o]}}while((t=d[t&c])>l&&0!=--i)return o<=e.lookahead?o:e.lookahead},e_=e=>{let t,n,r,i=e.w_size;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=i+(i-262)&&(e.window.set(e.window.subarray(i,i+i-n),0),e.match_start-=i,e.strstart-=i,e.block_start-=i,e.insert>e.strstart&&(e.insert=e.strstart),eg(e),n+=i),0===e.strm.avail_in)break;if(t=ek(e.strm,e.window,e.strstart+e.lookahead,n),e.lookahead+=t,e.lookahead+e.insert>=3)for(r=e.strstart-e.insert,e.ins_h=e.window[r],e.ins_h=ev(e,e.ins_h,e.window[r+1]);e.insert&&(e.ins_h=ev(e,e.ins_h,e.window[r+3-1]),e.prev[r&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=r,r++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<262&&0!==e.strm.avail_in)},eC=(e,t)=>{let n=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,r,i,a,o=0,s=e.strm.avail_in;do{if(r=65535,a=e.bi_valid+42>>3,e.strm.avail_out<a||(a=e.strm.avail_out-a,r>(i=e.strstart-e.block_start)+e.strm.avail_in&&(r=i+e.strm.avail_in),r>a&&(r=a),r<n&&(0===r&&t!==Z||t===K||r!==i+e.strm.avail_in)))break;o=+(t===Z&&r===i+e.strm.avail_in),V(e,0,0,o),e.pending_buf[e.pending-4]=r,e.pending_buf[e.pending-3]=r>>8,e.pending_buf[e.pending-2]=~r,e.pending_buf[e.pending-1]=~r>>8,ey(e.strm),i&&(i>r&&(i=r),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+i),e.strm.next_out),e.strm.next_out+=i,e.strm.avail_out-=i,e.strm.total_out+=i,e.block_start+=i,r-=i),r&&(ek(e.strm,e.strm.output,e.strm.next_out,r),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r)}while(0===o)return((s-=e.strm.avail_in)&&(s>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=s&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-s,e.strm.next_in),e.strstart),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),o)?4:t!==K&&t!==Z&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(a=e.window_size-e.strstart,e.strm.avail_in>a&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,a+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),a>e.strm.avail_in&&(a=e.strm.avail_in),a&&(ek(e.strm,e.window,e.strstart,a),e.strstart+=a,e.insert+=a>e.w_size-e.insert?e.w_size-e.insert:a),e.high_water<e.strstart&&(e.high_water=e.strstart),a=e.bi_valid+42>>3,n=(a=e.pending_buf_size-a>65535?65535:e.pending_buf_size-a)>e.w_size?e.w_size:a,((i=e.strstart-e.block_start)>=n||(i||t===Z)&&t!==K&&0===e.strm.avail_in&&i<=a)&&(r=i>a?a:i,o=+(t===Z&&0===e.strm.avail_in&&r===i),V(e,e.block_start,r,o),e.block_start+=r,ey(e.strm)),o?3:1)},eA=(e,t)=>{let n,r;for(;;){if(e.lookahead<262){if(e_(e),e.lookahead<262&&t===K)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=ev(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-262&&(e.match_length=eS(e,n)),e.match_length>=3)if(r=G(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do e.strstart++,e.ins_h=ev(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(0!=--e.match_length)e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=ev(e,e.ins_h,e.window[e.strstart+1]);else r=G(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(eb(e,!1),0===e.strm.avail_out))return 1}return(e.insert=e.strstart<2?e.strstart:2,t===Z)?(eb(e,!0),0===e.strm.avail_out)?3:4:e.sym_next&&(eb(e,!1),0===e.strm.avail_out)?1:2},eE=(e,t)=>{let n,r,i;for(;;){if(e.lookahead<262){if(e_(e),e.lookahead<262&&t===K)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=ev(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-262&&(e.match_length=eS(e,n),e.match_length<=5&&(e.strategy===ea||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-3,r=G(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=i&&(e.ins_h=ev(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(0!=--e.prev_length)if(e.match_available=0,e.match_length=2,e.strstart++,r&&(eb(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((r=G(e,0,e.window[e.strstart-1]))&&eb(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return(e.match_available&&(r=G(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===Z)?(eb(e,!0),0===e.strm.avail_out)?3:4:e.sym_next&&(eb(e,!1),0===e.strm.avail_out)?1:2};function eT(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}let eM=[new eT(0,0,0,0,eC),new eT(4,4,8,4,eA),new eT(4,5,16,8,eA),new eT(4,6,32,32,eA),new eT(4,4,16,16,eE),new eT(8,16,32,32,eE),new eT(8,16,128,128,eE),new eT(8,32,128,256,eE),new eT(32,128,258,1024,eE),new eT(32,258,258,4096,eE)];function eI(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ed,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(2*eh),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),em(this.dyn_ltree),em(this.dyn_dtree),em(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),em(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),em(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}let eN=e=>{if(!e)return 1;let t=e.state;return t&&t.strm===e&&(42===t.status||57===t.status||69===t.status||73===t.status||91===t.status||103===t.status||113===t.status||666===t.status)?0:1};var eD={deflateInit2:(e,t,n,r,i,a)=>{if(!e)return et;let o=1;if(t===ei&&(t=6),r<0?(o=0,r=-r):r>15&&(o=2,r-=16),i<1||i>9||n!==ed||r<8||r>15||t<0||t>9||a<0||a>el||8===r&&1!==o)return ep(e,et);8===r&&(r=9);let s=new eI;return e.state=s,s.strm=e,s.status=42,s.wrap=o,s.gzhead=null,s.w_bits=r,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=i+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+3-1)/3),s.window=new Uint8Array(2*s.w_size),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<i+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=(s.lit_bufsize-1)*3,s.level=t,s.strategy=a,s.method=n,(e=>{let t=(e=>{if(eN(e))return ep(e,et);e.total_in=e.total_out=0,e.data_type=ec;let t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?42:113,e.adler=+(2!==t.wrap),t.last_flush=-2,W(t),Q})(e);return t===Q&&(e=>{e.window_size=2*e.w_size,em(e.head),e.max_lazy_match=eM[e.level].max_lazy,e.good_match=eM[e.level].good_length,e.nice_match=eM[e.level].nice_length,e.max_chain_length=eM[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0})(e.state),t})(e)},deflateSetHeader:(e,t)=>eN(e)||2!==e.state.wrap?et:(e.state.gzhead=t,Q),deflate:(e,t)=>{if(eN(e)||t>J||t<0)return e?ep(e,et):et;let n=e.state;if(!e.output||0!==e.avail_in&&!e.input||666===n.status&&t!==Z)return ep(e,0===e.avail_out?er:et);let r=n.last_flush;if(n.last_flush=t,0!==n.pending){if(ey(e),0===e.avail_out)return n.last_flush=-1,Q}else if(0===e.avail_in&&ef(t)<=ef(r)&&t!==Z)return ep(e,er);if(666===n.status&&0!==e.avail_in)return ep(e,er);if(42===n.status&&0===n.wrap&&(n.status=113),42===n.status){let t=ed+(n.w_bits-8<<4)<<8;if(t|=(n.strategy>=eo||n.level<2?0:n.level<6?1:6===n.level?2:3)<<6,0!==n.strstart&&(t|=32),ew(n,t+=31-t%31),0!==n.strstart&&(ew(n,e.adler>>>16),ew(n,65535&e.adler)),e.adler=1,n.status=113,ey(e),0!==n.pending)return n.last_flush=-1,Q}if(57===n.status){if(e.adler=0,ex(n,31),ex(n,139),ex(n,8),n.gzhead)ex(n,+!!n.gzhead.text+2*!!n.gzhead.hcrc+4*!!n.gzhead.extra+8*!!n.gzhead.name+16*!!n.gzhead.comment),ex(n,255&n.gzhead.time),ex(n,n.gzhead.time>>8&255),ex(n,n.gzhead.time>>16&255),ex(n,n.gzhead.time>>24&255),ex(n,9===n.level?2:4*(n.strategy>=eo||n.level<2)),ex(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(ex(n,255&n.gzhead.extra.length),ex(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=B(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(ex(n,0),ex(n,0),ex(n,0),ex(n,0),ex(n,0),ex(n,9===n.level?2:4*(n.strategy>=eo||n.level<2)),ex(n,3),n.status=113,ey(e),0!==n.pending)return n.last_flush=-1,Q}if(69===n.status){if(n.gzhead.extra){let t=n.pending,r=(65535&n.gzhead.extra.length)-n.gzindex;for(;n.pending+r>n.pending_buf_size;){let i=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+i),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>t&&(e.adler=B(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex+=i,ey(e),0!==n.pending)return n.last_flush=-1,Q;t=0,r-=i}let i=new Uint8Array(n.gzhead.extra);n.pending_buf.set(i.subarray(n.gzindex,n.gzindex+r),n.pending),n.pending+=r,n.gzhead.hcrc&&n.pending>t&&(e.adler=B(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){let t,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=B(e.adler,n.pending_buf,n.pending-r,r)),ey(e),0!==n.pending)return n.last_flush=-1,Q;r=0}t=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,ex(n,t)}while(0!==t)n.gzhead.hcrc&&n.pending>r&&(e.adler=B(e.adler,n.pending_buf,n.pending-r,r)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){let t,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=B(e.adler,n.pending_buf,n.pending-r,r)),ey(e),0!==n.pending)return n.last_flush=-1,Q;r=0}t=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,ex(n,t)}while(0!==t)n.gzhead.hcrc&&n.pending>r&&(e.adler=B(e.adler,n.pending_buf,n.pending-r,r))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(ey(e),0!==n.pending))return n.last_flush=-1,Q;ex(n,255&e.adler),ex(n,e.adler>>8&255),e.adler=0}if(n.status=113,ey(e),0!==n.pending)return n.last_flush=-1,Q}if(0!==e.avail_in||0!==n.lookahead||t!==K&&666!==n.status){let r=0===n.level?eC(n,t):n.strategy===eo?((e,t)=>{let n;for(;;){if(0===e.lookahead&&(e_(e),0===e.lookahead)){if(t===K)return 1;break}if(e.match_length=0,n=G(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(eb(e,!1),0===e.strm.avail_out))return 1}return(e.insert=0,t===Z)?(eb(e,!0),0===e.strm.avail_out)?3:4:e.sym_next&&(eb(e,!1),0===e.strm.avail_out)?1:2})(n,t):n.strategy===es?((e,t)=>{let n,r,i,a,o=e.window;for(;;){if(e.lookahead<=258){if(e_(e),e.lookahead<=258&&t===K)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(r=o[i=e.strstart-1])===o[++i]&&r===o[++i]&&r===o[++i]){a=e.strstart+258;do;while(r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&i<a)e.match_length=258-(a-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=G(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=G(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(eb(e,!1),0===e.strm.avail_out))return 1}return(e.insert=0,t===Z)?(eb(e,!0),0===e.strm.avail_out)?3:4:e.sym_next&&(eb(e,!1),0===e.strm.avail_out)?1:2})(n,t):eM[n.level].func(n,t);if((3===r||4===r)&&(n.status=666),1===r||3===r)return 0===e.avail_out&&(n.last_flush=-1),Q;if(2===r&&(t===Y?$(n):t!==J&&(V(n,0,0,!1),t===X&&(em(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),ey(e),0===e.avail_out))return n.last_flush=-1,Q}return t!==Z?Q:n.wrap<=0?ee:(2===n.wrap?(ex(n,255&e.adler),ex(n,e.adler>>8&255),ex(n,e.adler>>16&255),ex(n,e.adler>>24&255),ex(n,255&e.total_in),ex(n,e.total_in>>8&255),ex(n,e.total_in>>16&255),ex(n,e.total_in>>24&255)):(ew(n,e.adler>>>16),ew(n,65535&e.adler)),ey(e),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?Q:ee)},deflateEnd:e=>{if(eN(e))return et;let t=e.state.status;return e.state=null,113===t?ep(e,en):Q},deflateSetDictionary:(e,t)=>{let n=t.length;if(eN(e))return et;let r=e.state,i=r.wrap;if(2===i||1===i&&42!==r.status||r.lookahead)return et;if(1===i&&(e.adler=L(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){0===i&&(em(r.head),r.strstart=0,r.block_start=0,r.insert=0);let e=new Uint8Array(r.w_size);e.set(t.subarray(n-r.w_size,n),0),t=e,n=r.w_size}let a=e.avail_in,o=e.next_in,s=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,e_(r);r.lookahead>=3;){let e=r.strstart,t=r.lookahead-2;do r.ins_h=ev(r,r.ins_h,r.window[e+3-1]),r.prev[e&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=e,e++;while(--t)r.strstart=e,r.lookahead=2,e_(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=o,e.input=s,e.avail_in=a,r.wrap=i,Q}};let eP=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var eR={assign:function(e){let t=Array.prototype.slice.call(arguments,1);for(;t.length;){let n=t.shift();if(n){if("object"!=typeof n)throw TypeError(n+"must be non-object");for(let t in n)eP(n,t)&&(e[t]=n[t])}}return e},flattenChunks:e=>{let t=0;for(let n=0,r=e.length;n<r;n++)t+=e[n].length;let n=new Uint8Array(t);for(let t=0,r=0,i=e.length;t<i;t++){let i=e[t];n.set(i,r),r+=i.length}return n}};let eO=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){eO=!1}let ej=new Uint8Array(256);for(let e=0;e<256;e++)ej[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;ej[254]=ej[254]=1;var eF={string2buf:e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,n,r,i,a,o=e.length,s=0;for(i=0;i<o;i++)(64512&(n=e.charCodeAt(i)))==55296&&i+1<o&&(64512&(r=e.charCodeAt(i+1)))==56320&&(n=65536+(n-55296<<10)+(r-56320),i++),s+=n<128?1:n<2048?2:n<65536?3:4;for(a=0,t=new Uint8Array(s),i=0;a<s;i++)(64512&(n=e.charCodeAt(i)))==55296&&i+1<o&&(64512&(r=e.charCodeAt(i+1)))==56320&&(n=65536+(n-55296<<10)+(r-56320),i++),n<128?t[a++]=n:(n<2048?t[a++]=192|n>>>6:(n<65536?t[a++]=224|n>>>12:(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63),t[a++]=128|n>>>6&63),t[a++]=128|63&n);return t},buf2string:(e,t)=>{let n,r,i=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let a=Array(2*i);for(r=0,n=0;n<i;){let t=e[n++];if(t<128){a[r++]=t;continue}let o=ej[t];if(o>4){a[r++]=65533,n+=o-1;continue}for(t&=2===o?31:3===o?15:7;o>1&&n<i;)t=t<<6|63&e[n++],o--;if(o>1){a[r++]=65533;continue}t<65536?a[r++]=t:(t-=65536,a[r++]=55296|t>>10&1023,a[r++]=56320|1023&t)}return((e,t)=>{if(t<65534&&e.subarray&&eO)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n})(a,r)},utf8border:(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let n=t-1;for(;n>=0&&(192&e[n])==128;)n--;return n<0||0===n?t:n+ej[e[n]]>t?n:t}},eL=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};let ez=Object.prototype.toString,{Z_NO_FLUSH:eB,Z_SYNC_FLUSH:eU,Z_FULL_FLUSH:eH,Z_FINISH:eW,Z_OK:eV,Z_STREAM_END:eq,Z_DEFAULT_COMPRESSION:eG,Z_DEFAULT_STRATEGY:e$,Z_DEFLATED:eK}=H;function eY(e){this.options=eR.assign({level:eG,method:eK,chunkSize:16384,windowBits:15,memLevel:8,strategy:e$},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new eL,this.strm.avail_out=0;let n=eD.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==eV)throw Error(U[n]);if(t.header&&eD.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?eF.string2buf(t.dictionary):"[object ArrayBuffer]"===ez.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(n=eD.deflateSetDictionary(this.strm,e))!==eV)throw Error(U[n]);this._dict_set=!0}}function eX(e,t){let n=new eY(t);if(n.push(e,!0),n.err)throw n.msg||U[n.err];return n.result}eY.prototype.push=function(e,t){let n,r,i=this.strm,a=this.options.chunkSize;if(this.ended)return!1;for(r=t===~~t?t:!0===t?eW:eB,"string"==typeof e?i.input=eF.string2buf(e):"[object ArrayBuffer]"===ez.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;;){if(0===i.avail_out&&(i.output=new Uint8Array(a),i.next_out=0,i.avail_out=a),(r===eU||r===eH)&&i.avail_out<=6){this.onData(i.output.subarray(0,i.next_out)),i.avail_out=0;continue}if((n=eD.deflate(i,r))===eq)return i.next_out>0&&this.onData(i.output.subarray(0,i.next_out)),n=eD.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===eV;if(0===i.avail_out){this.onData(i.output);continue}if(r>0&&i.next_out>0){this.onData(i.output.subarray(0,i.next_out)),i.avail_out=0;continue}if(0===i.avail_in)break}return!0},eY.prototype.onData=function(e){this.chunks.push(e)},eY.prototype.onEnd=function(e){e===eV&&(this.result=eR.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var eZ=function(e,t){let n,r,i,a,o,s,l,u,c,d,h,p,f,m,g,y,b,x,w,k,S,_,C,A,E=e.state;n=e.next_in,C=e.input,r=n+(e.avail_in-5),i=e.next_out,A=e.output,a=i-(t-e.avail_out),o=i+(e.avail_out-257),s=E.dmax,l=E.wsize,u=E.whave,c=E.wnext,d=E.window,h=E.hold,p=E.bits,f=E.lencode,m=E.distcode,g=(1<<E.lenbits)-1,y=(1<<E.distbits)-1;a:do for(p<15&&(h+=C[n++]<<p,p+=8,h+=C[n++]<<p,p+=8),b=f[h&g];;){if(h>>>=x=b>>>24,p-=x,0==(x=b>>>16&255))A[i++]=65535&b;else if(16&x)for(w=65535&b,(x&=15)&&(p<x&&(h+=C[n++]<<p,p+=8),w+=h&(1<<x)-1,h>>>=x,p-=x),p<15&&(h+=C[n++]<<p,p+=8,h+=C[n++]<<p,p+=8),b=m[h&y];;){if(h>>>=x=b>>>24,p-=x,16&(x=b>>>16&255)){if(k=65535&b,p<(x&=15)&&(h+=C[n++]<<p,(p+=8)<x&&(h+=C[n++]<<p,p+=8)),(k+=h&(1<<x)-1)>s){e.msg="invalid distance too far back",E.mode=16209;break a}if(h>>>=x,p-=x,k>(x=i-a)){if((x=k-x)>u&&E.sane){e.msg="invalid distance too far back",E.mode=16209;break a}if(S=0,_=d,0===c){if(S+=l-x,x<w){w-=x;do A[i++]=d[S++];while(--x)S=i-k,_=A}}else if(c<x){if(S+=l+c-x,(x-=c)<w){w-=x;do A[i++]=d[S++];while(--x)if(S=0,c<w){w-=x=c;do A[i++]=d[S++];while(--x)S=i-k,_=A}}}else if(S+=c-x,x<w){w-=x;do A[i++]=d[S++];while(--x)S=i-k,_=A}for(;w>2;)A[i++]=_[S++],A[i++]=_[S++],A[i++]=_[S++],w-=3;w&&(A[i++]=_[S++],w>1&&(A[i++]=_[S++]))}else{S=i-k;do A[i++]=A[S++],A[i++]=A[S++],A[i++]=A[S++],w-=3;while(w>2)w&&(A[i++]=A[S++],w>1&&(A[i++]=A[S++]))}}else if((64&x)==0){b=m[(65535&b)+(h&(1<<x)-1)];continue}else{e.msg="invalid distance code",E.mode=16209;break a}break}else if((64&x)==0){b=f[(65535&b)+(h&(1<<x)-1)];continue}else if(32&x){E.mode=16191;break a}else{e.msg="invalid literal/length code",E.mode=16209;break a}break}while(n<r&&i<o)n-=w=p>>3,p-=w<<3,h&=(1<<p)-1,e.next_in=n,e.next_out=i,e.avail_in=n<r?5+(r-n):5-(n-r),e.avail_out=i<o?257+(o-i):257-(i-o),E.hold=h,E.bits=p};let eJ=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),eQ=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),e0=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),e1=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var e2=(e,t,n,r,i,a,o,s)=>{let l,u,c,d,h,p,f,m,g,y=s.bits,b=0,x=0,w=0,k=0,S=0,_=0,C=0,A=0,E=0,T=0,M=null,I=new Uint16Array(16),N=new Uint16Array(16),D=null;for(b=0;b<=15;b++)I[b]=0;for(x=0;x<r;x++)I[t[n+x]]++;for(k=15,S=y;k>=1&&0===I[k];k--);if(S>k&&(S=k),0===k)return i[a++]=0x1400000,i[a++]=0x1400000,s.bits=1,0;for(w=1;w<k&&0===I[w];w++);for(S<w&&(S=w),A=1,b=1;b<=15;b++)if(A<<=1,(A-=I[b])<0)return -1;if(A>0&&(0===e||1!==k))return -1;for(b=1,N[1]=0;b<15;b++)N[b+1]=N[b]+I[b];for(x=0;x<r;x++)0!==t[n+x]&&(o[N[t[n+x]]++]=x);if(0===e?(M=D=o,p=20):1===e?(M=eJ,D=eQ,p=257):(M=e0,D=e1,p=0),T=0,x=0,b=w,h=a,_=S,C=0,c=-1,d=(E=1<<S)-1,1===e&&E>852||2===e&&E>592)return 1;for(;;){f=b-C,o[x]+1<p?(m=0,g=o[x]):o[x]>=p?(m=D[o[x]-p],g=M[o[x]-p]):(m=96,g=0),l=1<<b-C,w=u=1<<_;do i[h+(T>>C)+(u-=l)]=f<<24|m<<16|g;while(0!==u)for(l=1<<b-1;T&l;)l>>=1;if(0!==l?(T&=l-1,T+=l):T=0,x++,0==--I[b]){if(b===k)break;b=t[n+o[x]]}if(b>S&&(T&d)!==c){for(0===C&&(C=S),h+=w,A=1<<(_=b-C);_+C<k&&!((A-=I[_+C])<=0);)_++,A<<=1;if(E+=1<<_,1===e&&E>852||2===e&&E>592)return 1;i[c=T&d]=S<<24|_<<16|h-a}}return 0!==T&&(i[h+T]=b-C<<24|4194304),s.bits=S,0};let{Z_FINISH:e3,Z_BLOCK:e5,Z_TREES:e4,Z_OK:e9,Z_STREAM_END:e8,Z_NEED_DICT:e6,Z_STREAM_ERROR:e7,Z_DATA_ERROR:te,Z_MEM_ERROR:tt,Z_BUF_ERROR:tn,Z_DEFLATED:tr}=H,ti=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function ta(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}let to=e=>{if(!e)return 1;let t=e.state;return+(!t||t.strm!==e||t.mode<16180||t.mode>16211)},ts=e=>{if(to(e))return e7;let t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,(e=>{if(to(e))return e7;let t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=16180,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,e9})(e)},tl=!0,tu=e=>{if(tl){i=new Int32Array(512),a=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(e2(1,e.lens,0,288,i,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;e2(2,e.lens,0,32,a,0,e.work,{bits:5}),tl=!1}e.lencode=i,e.lenbits=9,e.distcode=a,e.distbits=5},tc=(e,t,n,r)=>{let i,a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),r>=a.wsize?(a.window.set(t.subarray(n-a.wsize,n),0),a.wnext=0,a.whave=a.wsize):((i=a.wsize-a.wnext)>r&&(i=r),a.window.set(t.subarray(n-r,n-r+i),a.wnext),(r-=i)?(a.window.set(t.subarray(n-r,n),0),a.wnext=r,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0};var td={inflateReset:ts,inflateInit2:(e,t)=>{if(!e)return e7;let n=new ta;e.state=n,n.strm=e,n.window=null,n.mode=16180;let r=((e,t)=>{let n;if(to(e))return e7;let r=e.state;return(t<0?(n=0,t=-t):(n=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15))?e7:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,ts(e))})(e,t);return r!==e9&&(e.state=null),r},inflate:(e,t)=>{let n,r,i,a,o,s,l,u,c,d,h,p,f,m,g,y,b,x,w,k,S,_,C,A,E=0,T=new Uint8Array(4),M=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(to(e)||!e.output||!e.input&&0!==e.avail_in)return e7;16191===(n=e.state).mode&&(n.mode=16192),o=e.next_out,i=e.output,l=e.avail_out,a=e.next_in,r=e.input,s=e.avail_in,u=n.hold,c=n.bits,d=s,h=l,_=e9;o:for(;;)switch(n.mode){case 16180:if(0===n.wrap){n.mode=16192;break}for(;c<16;){if(0===s)break o;s--,u+=r[a++]<<c,c+=8}if(2&n.wrap&&35615===u){0===n.wbits&&(n.wbits=15),n.check=0,T[0]=255&u,T[1]=u>>>8&255,n.check=B(n.check,T,2,0),u=0,c=0,n.mode=16181;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&u)<<8)+(u>>8))%31){e.msg="incorrect header check",n.mode=16209;break}if((15&u)!==tr){e.msg="unknown compression method",n.mode=16209;break}if(u>>>=4,c-=4,S=(15&u)+8,0===n.wbits&&(n.wbits=S),S>15||S>n.wbits){e.msg="invalid window size",n.mode=16209;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=512&u?16189:16191,u=0,c=0;break;case 16181:for(;c<16;){if(0===s)break o;s--,u+=r[a++]<<c,c+=8}if(n.flags=u,(255&n.flags)!==tr){e.msg="unknown compression method",n.mode=16209;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=16209;break}n.head&&(n.head.text=u>>8&1),512&n.flags&&4&n.wrap&&(T[0]=255&u,T[1]=u>>>8&255,n.check=B(n.check,T,2,0)),u=0,c=0,n.mode=16182;case 16182:for(;c<32;){if(0===s)break o;s--,u+=r[a++]<<c,c+=8}n.head&&(n.head.time=u),512&n.flags&&4&n.wrap&&(T[0]=255&u,T[1]=u>>>8&255,T[2]=u>>>16&255,T[3]=u>>>24&255,n.check=B(n.check,T,4,0)),u=0,c=0,n.mode=16183;case 16183:for(;c<16;){if(0===s)break o;s--,u+=r[a++]<<c,c+=8}n.head&&(n.head.xflags=255&u,n.head.os=u>>8),512&n.flags&&4&n.wrap&&(T[0]=255&u,T[1]=u>>>8&255,n.check=B(n.check,T,2,0)),u=0,c=0,n.mode=16184;case 16184:if(1024&n.flags){for(;c<16;){if(0===s)break o;s--,u+=r[a++]<<c,c+=8}n.length=u,n.head&&(n.head.extra_len=u),512&n.flags&&4&n.wrap&&(T[0]=255&u,T[1]=u>>>8&255,n.check=B(n.check,T,2,0)),u=0,c=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&n.flags&&((p=n.length)>s&&(p=s),p&&(n.head&&(S=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(a,a+p),S)),512&n.flags&&4&n.wrap&&(n.check=B(n.check,r,p,a)),s-=p,a+=p,n.length-=p),n.length))break o;n.length=0,n.mode=16186;case 16186:if(2048&n.flags){if(0===s)break o;p=0;do S=r[a+p++],n.head&&S&&n.length<65536&&(n.head.name+=String.fromCharCode(S));while(S&&p<s)if(512&n.flags&&4&n.wrap&&(n.check=B(n.check,r,p,a)),s-=p,a+=p,S)break o}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&n.flags){if(0===s)break o;p=0;do S=r[a+p++],n.head&&S&&n.length<65536&&(n.head.comment+=String.fromCharCode(S));while(S&&p<s)if(512&n.flags&&4&n.wrap&&(n.check=B(n.check,r,p,a)),s-=p,a+=p,S)break o}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&n.flags){for(;c<16;){if(0===s)break o;s--,u+=r[a++]<<c,c+=8}if(4&n.wrap&&u!==(65535&n.check)){e.msg="header crc mismatch",n.mode=16209;break}u=0,c=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=16191;break;case 16189:for(;c<32;){if(0===s)break o;s--,u+=r[a++]<<c,c+=8}e.adler=n.check=ti(u),u=0,c=0,n.mode=16190;case 16190:if(0===n.havedict)return e.next_out=o,e.avail_out=l,e.next_in=a,e.avail_in=s,n.hold=u,n.bits=c,e6;e.adler=n.check=1,n.mode=16191;case 16191:if(t===e5||t===e4)break o;case 16192:if(n.last){u>>>=7&c,c-=7&c,n.mode=16206;break}for(;c<3;){if(0===s)break o;s--,u+=r[a++]<<c,c+=8}switch(n.last=1&u,c-=1,3&(u>>>=1)){case 0:n.mode=16193;break;case 1:if(tu(n),n.mode=16199,t===e4){u>>>=2,c-=2;break o}break;case 2:n.mode=16196;break;case 3:e.msg="invalid block type",n.mode=16209}u>>>=2,c-=2;break;case 16193:for(u>>>=7&c,c-=7&c;c<32;){if(0===s)break o;s--,u+=r[a++]<<c,c+=8}if((65535&u)!=(u>>>16^65535)){e.msg="invalid stored block lengths",n.mode=16209;break}if(n.length=65535&u,u=0,c=0,n.mode=16194,t===e4)break o;case 16194:n.mode=16195;case 16195:if(p=n.length){if(p>s&&(p=s),p>l&&(p=l),0===p)break o;i.set(r.subarray(a,a+p),o),s-=p,a+=p,l-=p,o+=p,n.length-=p;break}n.mode=16191;break;case 16196:for(;c<14;){if(0===s)break o;s--,u+=r[a++]<<c,c+=8}if(n.nlen=(31&u)+257,c-=5,n.ndist=(31&(u>>>=5))+1,c-=5,n.ncode=(15&(u>>>=5))+4,u>>>=4,c-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=16209;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;c<3;){if(0===s)break o;s--,u+=r[a++]<<c,c+=8}n.lens[M[n.have++]]=7&u,u>>>=3,c-=3}for(;n.have<19;)n.lens[M[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,C={bits:n.lenbits},_=e2(0,n.lens,0,19,n.lencode,0,n.work,C),n.lenbits=C.bits,_){e.msg="invalid code lengths set",n.mode=16209;break}n.have=0,n.mode=16198;case 16198:for(;n.have<n.nlen+n.ndist;){for(;g=(E=n.lencode[u&(1<<n.lenbits)-1])>>>24,y=E>>>16&255,b=65535&E,!(g<=c);){if(0===s)break o;s--,u+=r[a++]<<c,c+=8}if(b<16)u>>>=g,c-=g,n.lens[n.have++]=b;else{if(16===b){for(A=g+2;c<A;){if(0===s)break o;s--,u+=r[a++]<<c,c+=8}if(u>>>=g,c-=g,0===n.have){e.msg="invalid bit length repeat",n.mode=16209;break}S=n.lens[n.have-1],p=3+(3&u),u>>>=2,c-=2}else if(17===b){for(A=g+3;c<A;){if(0===s)break o;s--,u+=r[a++]<<c,c+=8}u>>>=g,c-=g,S=0,p=3+(7&u),u>>>=3,c-=3}else{for(A=g+7;c<A;){if(0===s)break o;s--,u+=r[a++]<<c,c+=8}u>>>=g,c-=g,S=0,p=11+(127&u),u>>>=7,c-=7}if(n.have+p>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=16209;break}for(;p--;)n.lens[n.have++]=S}}if(16209===n.mode)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=16209;break}if(n.lenbits=9,C={bits:n.lenbits},_=e2(1,n.lens,0,n.nlen,n.lencode,0,n.work,C),n.lenbits=C.bits,_){e.msg="invalid literal/lengths set",n.mode=16209;break}if(n.distbits=6,n.distcode=n.distdyn,C={bits:n.distbits},_=e2(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,C),n.distbits=C.bits,_){e.msg="invalid distances set",n.mode=16209;break}if(n.mode=16199,t===e4)break o;case 16199:n.mode=16200;case 16200:if(s>=6&&l>=258){e.next_out=o,e.avail_out=l,e.next_in=a,e.avail_in=s,n.hold=u,n.bits=c,eZ(e,h),o=e.next_out,i=e.output,l=e.avail_out,a=e.next_in,r=e.input,s=e.avail_in,u=n.hold,c=n.bits,16191===n.mode&&(n.back=-1);break}for(n.back=0;g=(E=n.lencode[u&(1<<n.lenbits)-1])>>>24,y=E>>>16&255,b=65535&E,!(g<=c);){if(0===s)break o;s--,u+=r[a++]<<c,c+=8}if(y&&(240&y)==0){for(x=g,w=y,k=b;g=(E=n.lencode[k+((u&(1<<x+w)-1)>>x)])>>>24,y=E>>>16&255,b=65535&E,!(x+g<=c);){if(0===s)break o;s--,u+=r[a++]<<c,c+=8}u>>>=x,c-=x,n.back+=x}if(u>>>=g,c-=g,n.back+=g,n.length=b,0===y){n.mode=16205;break}if(32&y){n.back=-1,n.mode=16191;break}if(64&y){e.msg="invalid literal/length code",n.mode=16209;break}n.extra=15&y,n.mode=16201;case 16201:if(n.extra){for(A=n.extra;c<A;){if(0===s)break o;s--,u+=r[a++]<<c,c+=8}n.length+=u&(1<<n.extra)-1,u>>>=n.extra,c-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202;case 16202:for(;g=(E=n.distcode[u&(1<<n.distbits)-1])>>>24,y=E>>>16&255,b=65535&E,!(g<=c);){if(0===s)break o;s--,u+=r[a++]<<c,c+=8}if((240&y)==0){for(x=g,w=y,k=b;g=(E=n.distcode[k+((u&(1<<x+w)-1)>>x)])>>>24,y=E>>>16&255,b=65535&E,!(x+g<=c);){if(0===s)break o;s--,u+=r[a++]<<c,c+=8}u>>>=x,c-=x,n.back+=x}if(u>>>=g,c-=g,n.back+=g,64&y){e.msg="invalid distance code",n.mode=16209;break}n.offset=b,n.extra=15&y,n.mode=16203;case 16203:if(n.extra){for(A=n.extra;c<A;){if(0===s)break o;s--,u+=r[a++]<<c,c+=8}n.offset+=u&(1<<n.extra)-1,u>>>=n.extra,c-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=16209;break}n.mode=16204;case 16204:if(0===l)break o;if(p=h-l,n.offset>p){if((p=n.offset-p)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=16209;break}p>n.wnext?(p-=n.wnext,f=n.wsize-p):f=n.wnext-p,p>n.length&&(p=n.length),m=n.window}else m=i,f=o-n.offset,p=n.length;p>l&&(p=l),l-=p,n.length-=p;do i[o++]=m[f++];while(--p)0===n.length&&(n.mode=16200);break;case 16205:if(0===l)break o;i[o++]=n.length,l--,n.mode=16200;break;case 16206:if(n.wrap){for(;c<32;){if(0===s)break o;s--,u|=r[a++]<<c,c+=8}if(h-=l,e.total_out+=h,n.total+=h,4&n.wrap&&h&&(e.adler=n.check=n.flags?B(n.check,i,h,o-h):L(n.check,i,h,o-h)),h=l,4&n.wrap&&(n.flags?u:ti(u))!==n.check){e.msg="incorrect data check",n.mode=16209;break}u=0,c=0}n.mode=16207;case 16207:if(n.wrap&&n.flags){for(;c<32;){if(0===s)break o;s--,u+=r[a++]<<c,c+=8}if(4&n.wrap&&u!==(0|n.total)){e.msg="incorrect length check",n.mode=16209;break}u=0,c=0}n.mode=16208;case 16208:_=e8;break o;case 16209:_=te;break o;case 16210:return tt;default:return e7}return e.next_out=o,e.avail_out=l,e.next_in=a,e.avail_in=s,n.hold=u,n.bits=c,(n.wsize||h!==e.avail_out&&n.mode<16209&&(n.mode<16206||t!==e3))&&tc(e,e.output,e.next_out,h-e.avail_out),d-=e.avail_in,h-=e.avail_out,e.total_in+=d,e.total_out+=h,n.total+=h,4&n.wrap&&h&&(e.adler=n.check=n.flags?B(n.check,i,h,e.next_out-h):L(n.check,i,h,e.next_out-h)),e.data_type=n.bits+64*!!n.last+128*(16191===n.mode)+256*(16199===n.mode||16194===n.mode),(0===d&&0===h||t===e3)&&_===e9&&(_=tn),_},inflateEnd:e=>{if(to(e))return e7;let t=e.state;return t.window&&(t.window=null),e.state=null,e9},inflateGetHeader:(e,t)=>{if(to(e))return e7;let n=e.state;return(2&n.wrap)==0?e7:(n.head=t,t.done=!1,e9)},inflateSetDictionary:(e,t)=>{let n,r=t.length;return to(e)||0!==(n=e.state).wrap&&16190!==n.mode?e7:16190===n.mode&&L(1,t,r,0)!==n.check?te:tc(e,t,r,r)?(n.mode=16210,tt):(n.havedict=1,e9)}},th=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};let tp=Object.prototype.toString,{Z_NO_FLUSH:tf,Z_FINISH:tm,Z_OK:tg,Z_STREAM_END:tv,Z_NEED_DICT:ty,Z_STREAM_ERROR:tb,Z_DATA_ERROR:tx,Z_MEM_ERROR:tw}=H;function tk(e){this.options=eR.assign({chunkSize:65536,windowBits:15,to:""},e||{});let t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(15&t.windowBits)==0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new eL,this.strm.avail_out=0;let n=td.inflateInit2(this.strm,t.windowBits);if(n!==tg||(this.header=new th,td.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=eF.string2buf(t.dictionary):"[object ArrayBuffer]"===tp.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw)&&(n=td.inflateSetDictionary(this.strm,t.dictionary))!==tg))throw Error(U[n])}function tS(e,t){let n=new tk(t);if(n.push(e),n.err)throw n.msg||U[n.err];return n.result}tk.prototype.push=function(e,t){let n,r,i,a=this.strm,o=this.options.chunkSize,s=this.options.dictionary;if(this.ended)return!1;for(r=t===~~t?t:!0===t?tm:tf,"[object ArrayBuffer]"===tp.call(e)?a.input=new Uint8Array(e):a.input=e,a.next_in=0,a.avail_in=a.input.length;;){for(0===a.avail_out&&(a.output=new Uint8Array(o),a.next_out=0,a.avail_out=o),(n=td.inflate(a,r))===ty&&s&&((n=td.inflateSetDictionary(a,s))===tg?n=td.inflate(a,r):n===tx&&(n=ty));a.avail_in>0&&n===tv&&a.state.wrap>0&&0!==e[a.next_in];)td.inflateReset(a),n=td.inflate(a,r);switch(n){case tb:case tx:case ty:case tw:return this.onEnd(n),this.ended=!0,!1}if(i=a.avail_out,a.next_out&&(0===a.avail_out||n===tv))if("string"===this.options.to){let e=eF.utf8border(a.output,a.next_out),t=a.next_out-e,n=eF.buf2string(a.output,e);a.next_out=t,a.avail_out=o-t,t&&a.output.set(a.output.subarray(e,e+t),0),this.onData(n)}else this.onData(a.output.length===a.next_out?a.output:a.output.subarray(0,a.next_out));if(n!==tg||0!==i){if(n===tv)return n=td.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,!0;if(0===a.avail_in)break}}return!0},tk.prototype.onData=function(e){this.chunks.push(e)},tk.prototype.onEnd=function(e){e===tg&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=eR.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};let{Deflate:t_,deflate:tC,deflateRaw:tA,gzip:tE}={Deflate:eY,deflate:eX,deflateRaw:function(e,t){return(t=t||{}).raw=!0,eX(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,eX(e,t)},constants:H},{Inflate:tT,inflate:tM,inflateRaw:tI,ungzip:tN}={Inflate:tk,inflate:tS,inflateRaw:function(e,t){return(t=t||{}).raw=!0,tS(e,t)},ungzip:tS,constants:H};var tD={Deflate:t_,deflate:tC,deflateRaw:tA,gzip:tE,Inflate:tT,inflate:tM,inflateRaw:tI,ungzip:tN,constants:H}},705208:e=>{"use strict";e.s({deserializeEncoding:()=>n}),e.i(273702),e.i(954931);var t=e.i(750066);function n(e){let n=atob(e),r=new Uint8Array(n.length);for(let e=0;e<n.length;e++)r[e]=n.charCodeAt(e);return JSON.parse(t.default.inflate(r,{to:"string"}))}},238960:e=>{"use strict";e.s({getDocumentCoordinates:()=>n});var t=e.i(705208);let n=e=>{let n=[];if(e.originalElements){let r;try{r=JSON.parse(e.originalElements)}catch(n){r=(0,t.deserializeEncoding)(e.originalElements)}for(let e of("string"==typeof r&&(r=(0,t.deserializeEncoding)(r)),r))"metadata"in e&&n.push({area:e.metadata.coordinates,pageNumber:e.metadata.page_number,text:e.metadata.text||void 0}),"coordinates"in e&&"page_number"in e&&n.push({area:e.coordinates,pageNumber:e.page_number,text:e.text||void 0}),"area"in e&&"pageNumber"in e&&n.push({area:e.area,pageNumber:e.pageNumber,text:e.text||void 0})}return n}},159110:e=>{"use strict";e.s({Root:()=>l,Toggle:()=>s});var t=e.i(373150),n=e.i(777787),r=e.i(698644),i=e.i(421349),a=e.i(290479),o="Toggle",s=t.forwardRef((e,t)=>{let{pressed:s,defaultPressed:l,onPressedChange:u,...c}=e,[d,h]=(0,r.useControllableState)({prop:s,onChange:u,defaultProp:null!=l&&l,caller:o});return(0,a.jsx)(i.Primitive.button,{type:"button","aria-pressed":d,"data-state":d?"on":"off","data-disabled":e.disabled?"":void 0,...c,ref:t,onClick:(0,n.composeEventHandlers)(e.onClick,()=>{e.disabled||h(!d)})})});s.displayName=o;var l=s},499765:e=>{"use strict";e.s({Item:()=>A,Root:()=>C});var t=e.i(373150),n=e.i(215836),r=e.i(421349),i=e.i(703930),a=e.i(159110),o=e.i(698644),s=e.i(553955),l=e.i(290479),u="ToggleGroup",[c,d]=(0,n.createContextScope)(u,[i.createRovingFocusGroupScope]),h=(0,i.createRovingFocusGroupScope)(),p=t.default.forwardRef((e,t)=>{let{type:n,...r}=e;if("single"===n)return(0,l.jsx)(g,{...r,ref:t});if("multiple"===n)return(0,l.jsx)(y,{...r,ref:t});throw Error("Missing prop `type` expected on `".concat(u,"`"))});p.displayName=u;var[f,m]=c(u),g=t.default.forwardRef((e,n)=>{let{value:r,defaultValue:i,onValueChange:a=()=>{},...s}=e,[c,d]=(0,o.useControllableState)({prop:r,defaultProp:null!=i?i:"",onChange:a,caller:u});return(0,l.jsx)(f,{scope:e.__scopeToggleGroup,type:"single",value:t.default.useMemo(()=>c?[c]:[],[c]),onItemActivate:d,onItemDeactivate:t.default.useCallback(()=>d(""),[d]),children:(0,l.jsx)(w,{...s,ref:n})})}),y=t.default.forwardRef((e,n)=>{let{value:r,defaultValue:i,onValueChange:a=()=>{},...s}=e,[c,d]=(0,o.useControllableState)({prop:r,defaultProp:null!=i?i:[],onChange:a,caller:u}),h=t.default.useCallback(e=>d(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[...t,e]}),[d]),p=t.default.useCallback(e=>d(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.filter(t=>t!==e)}),[d]);return(0,l.jsx)(f,{scope:e.__scopeToggleGroup,type:"multiple",value:c,onItemActivate:h,onItemDeactivate:p,children:(0,l.jsx)(w,{...s,ref:n})})});p.displayName=u;var[b,x]=c(u),w=t.default.forwardRef((e,t)=>{let{__scopeToggleGroup:n,disabled:a=!1,rovingFocus:o=!0,orientation:u,dir:c,loop:d=!0,...p}=e,f=h(n),m=(0,s.useDirection)(c),g={role:"group",dir:m,...p};return(0,l.jsx)(b,{scope:n,rovingFocus:o,disabled:a,children:o?(0,l.jsx)(i.Root,{asChild:!0,...f,orientation:u,dir:m,loop:d,children:(0,l.jsx)(r.Primitive.div,{...g,ref:t})}):(0,l.jsx)(r.Primitive.div,{...g,ref:t})})}),k="ToggleGroupItem",S=t.default.forwardRef((e,n)=>{let r=m(k,e.__scopeToggleGroup),a=x(k,e.__scopeToggleGroup),o=h(e.__scopeToggleGroup),s=r.value.includes(e.value),u=a.disabled||e.disabled,c={...e,pressed:s,disabled:u},d=t.default.useRef(null);return a.rovingFocus?(0,l.jsx)(i.Item,{asChild:!0,...o,focusable:!u,active:s,ref:d,children:(0,l.jsx)(_,{...c,ref:n})}):(0,l.jsx)(_,{...c,ref:n})});S.displayName=k;var _=t.default.forwardRef((e,t)=>{let{__scopeToggleGroup:n,value:r,...i}=e,o=m(k,n),s={role:"radio","aria-checked":e.pressed,"aria-pressed":void 0},u="single"===o.type?s:void 0;return(0,l.jsx)(a.Toggle,{...u,...i,ref:t,onPressedChange:e=>{e?o.onItemActivate(r):o.onItemDeactivate(r)}})}),C=p,A=S},474584:e=>{"use strict";e.s({toggleVariants:()=>o});var t=e.i(290479),n=e.i(289702),r=e.i(159110),i=e.i(448805),a=e.i(373150);let o=(0,i.cva)("inline-flex items-center justify-center rounded-4 text-sm text-text-primary font-medium ring-offset-background transition-colors hover:bg-control-primary hover:text-accent-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-control-primary data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-4",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent hover:bg-control-primary hover:text-accent-foreground"},size:{default:"h-13 px-6 min-w-13",sm:"h-11 px-3 min-w-11 gap-3",lg:"h-14 px-8 min-w-14"}},defaultVariants:{variant:"default",size:"default"}});a.forwardRef((e,i)=>{let{className:a,variant:s,size:l,...u}=e;return(0,t.jsx)(r.Root,{ref:i,className:(0,n.cn)(o({variant:s,size:l,className:a})),...u})}).displayName=r.Root.displayName},91410:e=>{"use strict";e.s({ToggleGroup:()=>s,ToggleGroupItem:()=>l});var t=e.i(290479),n=e.i(499765),r=e.i(373150),i=e.i(289702),a=e.i(474584);let o=r.createContext({size:"default",variant:"default"}),s=r.forwardRef((e,r)=>{let{className:a,variant:s,size:l,children:u,...c}=e;return(0,t.jsx)(n.Root,{ref:r,className:(0,i.cn)("flex items-center justify-center gap-2",a),...c,children:(0,t.jsx)(o.Provider,{value:{variant:s,size:l},children:u})})});s.displayName=n.Root.displayName;let l=r.forwardRef((e,s)=>{let{className:l,children:u,variant:c,size:d,...h}=e,p=r.useContext(o);return(0,t.jsx)(n.Item,{ref:s,className:(0,i.cn)((0,a.toggleVariants)({variant:p.variant||c,size:p.size||d}),l),...h,children:u})});l.displayName=n.Item.displayName},21455:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("minimize-2",[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]])},441729:e=>{"use strict";e.s({Minimize2:()=>t.default});var t=e.i(21455)},23061:e=>{"use strict";function t(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||-1!==navigator.userAgent.indexOf("Firefox")}e.s({isSafariOrFirefox:()=>t})},967923:e=>{"use strict";e.s({PDFViewerSidebar:()=>r});var t=e.i(290479),n=e.i(34818);let r=e=>{let{children:r}=e;return(0,t.jsx)(n.motion.div,{initial:{x:"-100%"},animate:{x:0},exit:{x:"-100%"},transition:{duration:.2,ease:"easeInOut"},className:"absolute inset-y-0 left-0 z-20 w-64 border-r border-border-primary bg-background-primary h-full overflow-hidden",children:r})}},966882:e=>{"use strict";e.s({useDebounce:()=>a,useDebouncedCallback:()=>n,useThrottledCallback:()=>o});var t=e.i(373150);function n(e,n,r){var i=this,a=(0,t.useRef)(null),o=(0,t.useRef)(0),s=(0,t.useRef)(null),l=(0,t.useRef)([]),u=(0,t.useRef)(),c=(0,t.useRef)(),d=(0,t.useRef)(e),h=(0,t.useRef)(!0);(0,t.useEffect)(function(){d.current=e},[e]);var p=!n&&0!==n&&"undefined"!=typeof window;if("function"!=typeof e)throw TypeError("Expected a function");n=+n||0;var f=!!(r=r||{}).leading,m=!("trailing"in r)||!!r.trailing,g="maxWait"in r,y=g?Math.max(+r.maxWait||0,n):null;return(0,t.useEffect)(function(){return h.current=!0,function(){h.current=!1}},[]),(0,t.useMemo)(function(){var e=function(e){var t=l.current,n=u.current;return l.current=u.current=null,o.current=e,c.current=d.current.apply(n,t)},t=function(e,t){p&&cancelAnimationFrame(s.current),s.current=p?requestAnimationFrame(e):setTimeout(e,t)},r=function(e){if(!h.current)return!1;var t=e-a.current;return!a.current||t>=n||t<0||g&&e-o.current>=y},b=function(t){return s.current=null,m&&l.current?e(t):(l.current=u.current=null,c.current)},x=function e(){var i=Date.now();if(r(i))return b(i);if(h.current){var s=n-(i-a.current);t(e,g?Math.min(s,y-(i-o.current)):s)}},w=function(){var d=Date.now(),p=r(d);if(l.current=[].slice.call(arguments),u.current=i,a.current=d,p){if(!s.current&&h.current)return o.current=a.current,t(x,n),f?e(a.current):c.current;if(g)return t(x,n),e(a.current)}return s.current||t(x,n),c.current};return w.cancel=function(){s.current&&(p?cancelAnimationFrame(s.current):clearTimeout(s.current)),o.current=0,l.current=a.current=u.current=s.current=null},w.isPending=function(){return!!s.current},w.flush=function(){return s.current?b(Date.now()):c.current},w},[f,g,n,y,m,p])}function r(e,t){return e===t}function i(e){return"function"==typeof e?function(){return e}:e}function a(e,a,o){var s,l,u=o&&o.equalityFn||r,c=(l=(s=(0,t.useState)(i(e)))[1],[s[0],(0,t.useCallback)(function(e){return l(i(e))},[])]),d=c[0],h=c[1],p=n((0,t.useCallback)(function(e){return h(e)},[h]),a,o),f=(0,t.useRef)(e);return u(f.current,e)||(p(e),f.current=e),[d,p]}function o(e,t,r){var i=void 0===r?{}:r,a=i.leading,o=i.trailing;return n(e,t,{maxWait:t,leading:void 0===a||a,trailing:void 0===o||o})}},132722:e=>{"use strict";e.s({SearchMenu:()=>s});var t=e.i(290479),n=e.i(769512),r=e.i(373150),i=e.i(966882);e.i(567349);var a=e.i(111367);let o=e=>{let{result:r}=e,{jumpToHighlightRects:i}=(0,n.usePdfJump)(),o=(0,n.usePdf)(e=>e.getPdfPageProxy),s=async()=>{let e=o(r.pageNumber);i(await (0,n.calculateHighlightRects)(e,{pageNumber:r.pageNumber,text:r.text,matchIndex:r.matchIndex}),"pixels","start",-100)};return(0,t.jsxs)(a.CommandItem,{className:"flex flex-col gap-2",value:r.text,onSelect:s,children:[(0,t.jsx)("span",{children:r.text}),(0,t.jsx)("div",{className:"flex justify-between items-center w-full",children:(0,t.jsxs)("span",{className:"text-xs text-gray-500",children:["Page ",r.pageNumber]})})]})};function s(){let[e,s]=(0,r.useState)(""),[l]=(0,i.useDebounce)(e,500),{searchResults:u,search:c}=(0,n.useSearch)();(0,r.useEffect)(()=>{c(l,{limit:20})},[l]);let d=(0,r.useMemo)(()=>[...u.exactMatches,...u.fuzzyMatches],[u]);return(0,t.jsxs)(a.Command,{className:"bg-background-primary",children:[(0,t.jsx)(a.CommandInput,{autoFocus:!0,value:e,onValueChange:s,placeholder:"Search in the document..."}),(0,t.jsx)(a.CommandList,{className:"max-h-[unset]",children:d.map((e,n)=>(0,t.jsx)(o,{result:e},n))})]})}},321970:e=>{"use strict";e.s({ChevronUpIcon:()=>t.default});var t=e.i(740713)},334248:e=>{"use strict";e.s({PlusIcon:()=>t.default});var t=e.i(589915)},376816:e=>{"use strict";e.s({default:()=>c});var t=e.i(290479),n=e.i(769512),r=e.i(321970),i=e.i(245484),a=e.i(334248),o=e.i(373150),s=e.i(704255),l=e.i(972899),u=e.i(303652);let c=()=>{let[e,c]=(0,o.useState)(!1),d=(0,n.usePdf)(e=>e.zoom),h=(0,n.usePdf)(e=>e.updateZoom),p=(0,n.usePdf)(e=>e.zoomFitWidth);return(0,t.jsxs)(u.Popover,{open:e,onOpenChange:c,children:[(0,t.jsx)(u.PopoverTrigger,{asChild:!0,children:(0,t.jsxs)(s.Button,{size:"medium",className:"h-11 text-text-primary font-medium",variant:"ghost",trailingIcon:(0,t.jsx)(r.ChevronUpIcon,{size:11,color:"#8D8D8D",className:"transition-transform duration-200 ".concat(e?"rotate-180":"")}),children:[Math.round(100*d),"%"]})}),(0,t.jsxs)(u.PopoverContent,{align:"start",className:"w-40",children:[(0,t.jsxs)("div",{className:"flex flex-row gap-1 pb-1 mb-1 border-b border-border-primary justify-between",children:[(0,t.jsx)("div",{className:"px-3 flex justify-center items-center gap-2 h-11 rounded-4 p-3 ease-in transition-all duration-150 cursor-pointer text-sm font-medium",id:"zoomLevelButton",children:(0,t.jsx)("span",{children:"".concat(Math.round(100*d),"%")})}),(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)(s.Button,{variant:"ghost",onClick:()=>h(e=>.9*e),size:"icon",children:(0,t.jsx)(l.Icon,{as:i.MinusIcon})}),(0,t.jsx)(s.Button,{variant:"ghost",onClick:()=>h(e=>1.1*e),size:"icon",children:(0,t.jsx)(l.Icon,{as:a.PlusIcon})})]})]}),(0,t.jsxs)("ul",{children:[(0,t.jsx)(s.Button,{variant:"ghost",className:"w-full justify-start",size:"medium",onClick:()=>p(),children:"Page fit"}),(0,t.jsx)(s.Button,{variant:"ghost",size:"medium",className:"w-full justify-start",onClick:()=>h(.5),children:"50%"}),(0,t.jsx)(s.Button,{variant:"ghost",size:"medium",className:"w-full justify-start",onClick:()=>h(.75),children:"75%"}),(0,t.jsx)(s.Button,{variant:"ghost",size:"medium",className:"w-full justify-start",onClick:()=>h(1),children:"100%"}),(0,t.jsx)(s.Button,{variant:"ghost",size:"medium",className:"w-full justify-start",onClick:()=>h(1.25),children:"125%"}),(0,t.jsx)(s.Button,{variant:"ghost",size:"medium",className:"w-full justify-start",onClick:()=>h(1.5),children:"150%"}),(0,t.jsx)(s.Button,{variant:"ghost",size:"medium",className:"w-full justify-start",onClick:()=>h(2),children:"200%"}),(0,t.jsx)(s.Button,{variant:"ghost",size:"medium",className:"w-full justify-start",onClick:()=>h(3),children:"300%"}),(0,t.jsx)(s.Button,{variant:"ghost",size:"medium",className:"w-full justify-start",onClick:()=>h(4),children:"400%"})]})]})]})}},825553:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("cloud-download",[["path",{d:"M12 13v8l-4-4",key:"1f5nwf"}],["path",{d:"m12 21 4-4",key:"1lfcce"}],["path",{d:"M4.393 15.269A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.436 8.284",key:"ui1hmy"}]])},98791:e=>{"use strict";e.s({DownloadCloud:()=>t.default});var t=e.i(825553)},89872:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},15749:e=>{"use strict";e.s({Ellipsis:()=>t.default});var t=e.i(89872)},838710:e=>{"use strict";e.s({default:()=>c});var t=e.i(290479),n=e.i(769512),r=e.i(98791),i=e.i(15749),a=e.i(736067),o=e.i(373150),s=e.i(704255),l=e.i(448068),u=e.i(972899);let c=e=>{let{documentUrl:c}=e,[d,h]=(0,o.useState)(!1),p=(0,n.usePdf)(e=>e.pdfDocumentProxy),f=async()=>{if(p&&!d)try{h(!0);let e=await p.getData(),t=new Blob([new Uint8Array(e)],{type:"application/pdf"}),n=window.URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download=c.split("/").pop()||"document.pdf",document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(n)}catch(e){console.error("Error downloading PDF:",e)}finally{h(!1)}};return(0,t.jsxs)(l.DropdownMenu,{children:[(0,t.jsx)(l.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(s.Button,{className:"text-text-primary",variant:"ghost",id:"noteMenuButton",size:"icon",children:(0,t.jsx)(u.Icon,{as:i.Ellipsis})})}),(0,t.jsxs)(l.DropdownMenuContent,{align:"end",className:"w-40 p-2",children:[(0,t.jsx)(l.DropdownMenuItem,{onClick:f,disabled:d||!p,onSelect:f,asChild:!0,children:(0,t.jsx)(s.Button,{variant:"ghost",size:"medium",className:"w-full justify-start",leadingIcon:(0,t.jsx)(u.Icon,{as:r.DownloadCloud}),label:d?"Downloading...":"Download"})}),(0,t.jsx)(l.DropdownMenuItem,{onClick:()=>{window.open(c,"_blank")},asChild:!0,children:(0,t.jsx)(s.Button,{variant:"ghost",size:"medium",className:"w-full justify-start",leadingIcon:(0,t.jsx)(u.Icon,{as:a.Link}),label:"Open"})})]})]})}},666645:e=>{"use strict";e.s({PageNavigation:()=>l});var t=e.i(290479),n=e.i(769512),r=e.i(94371),i=e.i(996481),a=e.i(373150),o=e.i(704255),s=e.i(972899);let l=()=>{let e=(0,n.usePdf)(e=>e.pdfDocumentProxy.numPages),l=(0,n.usePdf)(e=>e.currentPage),[u,c]=(0,a.useState)(l),{jumpToPage:d}=(0,n.usePdfJump)();return(0,a.useEffect)(()=>{c(l)},[l]),(0,t.jsxs)("div",{className:"absolute flex flex-row items-center justify-center top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 gap-2",children:[(0,t.jsx)(o.Button,{variant:"ghost",size:"icon",onClick:()=>{l>1&&d(l-1,{behavior:"auto"})},disabled:l<=1,"aria-label":"Previous page",children:(0,t.jsx)(s.Icon,{as:r.ChevronLeft,className:"h-7 w-7"})}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"number",value:u,onChange:e=>c(e.target.value),onBlur:e=>{l!==Number(e.target.value)&&d(Number(e.target.value),{behavior:"auto"})},onKeyDown:e=>{"Enter"===e.key&&e.currentTarget.blur()},className:"[appearance:textfield] w-13 [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none text-center bg-accent border-none text-sm font-medium focus:outline-none focus:ring-2 focus:ring-primary/20 rounded-4"}),(0,t.jsxs)("span",{className:"text-sm text-text-secondary font-medium",children:["of ",e]})]}),(0,t.jsx)(o.Button,{variant:"ghost",size:"icon",onClick:()=>{l<e&&d(l+1,{behavior:"auto"})},disabled:l>=e,"aria-label":"Next page",children:(0,t.jsx)(s.Icon,{as:i.ChevronRight,className:"h-7 w-7"})})]})}},857477:e=>{"use strict";e.s({useAtomCallback:()=>i});var t=e.i(373150),n=e.i(608294);e.i(227348);var r=e.i(647968);function i(e,i){let a=(0,t.useMemo)(()=>(0,r.atom)(null,function(t,n){for(var r=arguments.length,i=Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];return e(t,n,...i)}),[e]);return(0,n.useSetAtom)(a,i)}},910173:e=>{"use strict";e.s({getAllHighlightColors:()=>r,getBubbleColorMenuItems:()=>a,getHighlightColorByName:()=>n,getHighlightColorOptions:()=>i});let t={yellow:{name:"yellow",displayName:"Yellow",bgClass:"bg-yellow/10",textClass:"text-yellow-600",borderClass:"border-yellow-600",backgroundColor:"rgba(255, 204, 0, 0.25)",borderColor:"rgb(255, 204, 0)",textColor:"rgb(255, 204, 0)"},orange:{name:"orange",displayName:"Orange",bgClass:"bg-orange/10",textClass:"text-orange",borderClass:"border-orange",backgroundColor:"rgba(249, 115, 22, 0.25)",borderColor:"rgb(249, 115, 22)",textColor:"rgb(249, 115, 22)"},green:{name:"green",displayName:"Green",bgClass:"bg-green/10",textClass:"text-green",borderClass:"border-green",backgroundColor:"rgba(34, 197, 94, 0.25)",borderColor:"rgb(34, 197, 94)",textColor:"rgb(34, 197, 94)"},blue:{name:"blue",displayName:"Blue",bgClass:"bg-blue/10",textClass:"text-blue",borderClass:"border-blue",backgroundColor:"rgba(0, 122, 255, 0.25)",borderColor:"rgb(59, 130, 246)",textColor:"rgb(59, 130, 246)"},purple:{name:"purple",displayName:"Purple",bgClass:"bg-purple/10",textClass:"text-purple",borderClass:"border-purple",backgroundColor:"rgba(168, 85, 247, 0.25)",borderColor:"rgb(168, 85, 247)",textColor:"rgb(168, 85, 247)"},red:{name:"red",displayName:"Red",bgClass:"bg-red/10",textClass:"text-red",borderClass:"border-red",backgroundColor:"rgba(239, 68, 68, 0.25)",borderColor:"rgb(239, 68, 68)",textColor:"rgb(239, 68, 68)"}},n=e=>t[e]||t.blue,r=()=>Object.values(t),i=()=>r().map(e=>({name:e.displayName,value:e.name,bgClass:e.bgClass,textClass:e.textClass,borderClass:e.borderClass,backgroundColor:e.backgroundColor,borderColor:e.borderColor,textColor:e.textColor})),a=()=>r().map(e=>({name:e.displayName,color:"".concat(e.bgClass," ").concat(e.textClass),backgroundColor:e.backgroundColor,borderColor:e.borderColor,textColor:e.textColor,colorName:e.name}))},679118:e=>{"use strict";e.s({PDFViewerFun:()=>i});var t=e.i(290479),n=e.i(625483),r=e.i(699052);let i=()=>{let{funMode:e}=(0,r.useFunMode)(),{theme:i,systemTheme:a}=(0,n.useTheme)();return e.enabled&&("dark"===i||"system"===i&&"dark"===a)?(0,t.jsx)("div",{className:"absolute inset-0 z-10 pointer-events-none overflow-hidden ",children:(0,t.jsx)("img",{src:"/images/pdfbg/".concat(e.background,".png"),alt:"pdf-viewer-bg",className:"w-full h-full object-cover opacity-70",style:{maskImage:"linear-gradient(225deg, rgba(0,0,0,0.9) 40%, rgba(0,0,0,0) 80%), linear-gradient(315deg, rgba(0,0,0,0.6) 30%, rgba(0,0,0,0))",WebkitMaskImage:"linear-gradient(225deg, rgba(0,0,0,0.9) 40%, rgba(0,0,0,0) 80%), linear-gradient(315deg, rgba(0,0,0,0.6) 30%, rgba(0,0,0,0))",maskComposite:"intersect",WebkitMaskComposite:"source-in"}})}):null}},991896:e=>{"use strict";e.s({formatDistance:()=>n});let t={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},n=(e,n,r)=>{let i,a=t[e];if(i="string"==typeof a?a:1===n?a.one:a.other.replace("{{count}}",n.toString()),null==r?void 0:r.addSuffix)if(r.comparison&&r.comparison>0)return"in "+i;else return i+" ago";return i}},249016:e=>{"use strict";function t(e){return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}e.s({buildFormatLongFn:()=>t})},457483:e=>{"use strict";e.s({formatLong:()=>n});var t=e.i(249016);let n={date:(0,t.buildFormatLongFn)({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:(0,t.buildFormatLongFn)({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:(0,t.buildFormatLongFn)({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})}},150589:e=>{"use strict";e.s({formatRelative:()=>n});let t={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},n=(e,n,r,i)=>t[e]},649205:e=>{"use strict";function t(e){return(t,n)=>{let r;if("formatting"===((null==n?void 0:n.context)?String(n.context):"standalone")&&e.formattingValues){let t=e.defaultFormattingWidth||e.defaultWidth,i=(null==n?void 0:n.width)?String(n.width):t;r=e.formattingValues[i]||e.formattingValues[t]}else{let t=e.defaultWidth,i=(null==n?void 0:n.width)?String(n.width):e.defaultWidth;r=e.values[i]||e.values[t]}return r[e.argumentCallback?e.argumentCallback(t):t]}}e.s({buildLocalizeFn:()=>t})},263352:e=>{"use strict";e.s({localize:()=>n});var t=e.i(649205);let n={ordinalNumber:(e,t)=>{let n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:(0,t.buildLocalizeFn)({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:(0,t.buildLocalizeFn)({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:(0,t.buildLocalizeFn)({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:(0,t.buildLocalizeFn)({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:(0,t.buildLocalizeFn)({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})}},70778:e=>{"use strict";function t(e){return function(t){let n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.width,a=i&&e.matchPatterns[i]||e.matchPatterns[e.defaultMatchWidth],o=t.match(a);if(!o)return null;let s=o[0],l=i&&e.parsePatterns[i]||e.parsePatterns[e.defaultParseWidth],u=Array.isArray(l)?function(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}(l,e=>e.test(s)):function(e,t){for(let n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}(l,e=>e.test(s));return n=e.valueCallback?e.valueCallback(u):u,{value:n=r.valueCallback?r.valueCallback(n):n,rest:t.slice(s.length)}}}e.s({buildMatchFn:()=>t})},925522:e=>{"use strict";function t(e){return function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.match(e.matchPattern);if(!r)return null;let i=r[0],a=t.match(e.parsePattern);if(!a)return null;let o=e.valueCallback?e.valueCallback(a[0]):a[0];return{value:o=n.valueCallback?n.valueCallback(o):o,rest:t.slice(i.length)}}}e.s({buildMatchPatternFn:()=>t})},88198:e=>{"use strict";e.s({match:()=>n});var t=e.i(70778);let n={ordinalNumber:(0,e.i(925522).buildMatchPatternFn)({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)}),era:(0,t.buildMatchFn)({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:(0,t.buildMatchFn)({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:(0,t.buildMatchFn)({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:(0,t.buildMatchFn)({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:(0,t.buildMatchFn)({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})}},655141:e=>{"use strict";e.s({enUS:()=>o});var t=e.i(991896),n=e.i(457483),r=e.i(150589),i=e.i(263352),a=e.i(88198);let o={code:"en-US",formatDistance:t.formatDistance,formatLong:n.formatLong,formatRelative:r.formatRelative,localize:i.localize,match:a.match,options:{weekStartsOn:0,firstWeekContainsDate:1}}},445897:e=>{"use strict";e.s({defaultLocale:()=>t.enUS});var t=e.i(655141)},314870:e=>{"use strict";e.s({getDefaultOptions:()=>n});let t={};function n(){return t}},734664:e=>{"use strict";e.s({millisecondsInDay:()=>n,millisecondsInMinute:()=>r,millisecondsInWeek:()=>t,minutesInDay:()=>o,minutesInMonth:()=>a,minutesInYear:()=>i});let t=6048e5,n=864e5,r=6e4,i=525600,a=43200,o=1440},98935:e=>{"use strict";e.s({startOfDay:()=>n});var t=e.i(163015);function n(e){let n=(0,t.toDate)(e);return n.setHours(0,0,0,0),n}},203802:e=>{"use strict";e.s({getTimezoneOffsetInMilliseconds:()=>n});var t=e.i(163015);function n(e){let n=(0,t.toDate)(e),r=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return r.setUTCFullYear(n.getFullYear()),e-r}},641988:e=>{"use strict";e.s({differenceInCalendarDays:()=>i});var t=e.i(734664),n=e.i(98935),r=e.i(203802);function i(e,i){let a=(0,n.startOfDay)(e),o=(0,n.startOfDay)(i);return Math.round((a-(0,r.getTimezoneOffsetInMilliseconds)(a)-(o-(0,r.getTimezoneOffsetInMilliseconds)(o)))/t.millisecondsInDay)}},21070:e=>{"use strict";function t(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}e.s({constructFrom:()=>t})},10366:e=>{"use strict";e.s({startOfYear:()=>r});var t=e.i(163015),n=e.i(21070);function r(e){let r=(0,t.toDate)(e),i=(0,n.constructFrom)(e,0);return i.setFullYear(r.getFullYear(),0,1),i.setHours(0,0,0,0),i}},823633:e=>{"use strict";e.s({getDayOfYear:()=>i});var t=e.i(641988),n=e.i(10366),r=e.i(163015);function i(e){let i=(0,r.toDate)(e);return(0,t.differenceInCalendarDays)(i,(0,n.startOfYear)(i))+1}},191084:e=>{"use strict";e.s({startOfWeek:()=>r});var t=e.i(163015),n=e.i(314870);function r(e,r){var i,a,o,s,l,u,c,d;let h=(0,n.getDefaultOptions)(),p=null!=(d=null!=(c=null!=(u=null!=(l=null==r?void 0:r.weekStartsOn)?l:null==r||null==(a=r.locale)||null==(i=a.options)?void 0:i.weekStartsOn)?u:h.weekStartsOn)?c:null==(s=h.locale)||null==(o=s.options)?void 0:o.weekStartsOn)?d:0,f=(0,t.toDate)(e),m=f.getDay();return f.setDate(f.getDate()-(7*(m<p)+m-p)),f.setHours(0,0,0,0),f}},340893:e=>{"use strict";e.s({startOfISOWeek:()=>n});var t=e.i(191084);function n(e){return(0,t.startOfWeek)(e,{weekStartsOn:1})}},33454:e=>{"use strict";e.s({getISOWeekYear:()=>i});var t=e.i(21070),n=e.i(340893),r=e.i(163015);function i(e){let i=(0,r.toDate)(e),a=i.getFullYear(),o=(0,t.constructFrom)(e,0);o.setFullYear(a+1,0,4),o.setHours(0,0,0,0);let s=(0,n.startOfISOWeek)(o),l=(0,t.constructFrom)(e,0);l.setFullYear(a,0,4),l.setHours(0,0,0,0);let u=(0,n.startOfISOWeek)(l);return i.getTime()>=s.getTime()?a+1:i.getTime()>=u.getTime()?a:a-1}},104823:e=>{"use strict";e.s({startOfISOWeekYear:()=>i});var t=e.i(33454),n=e.i(340893),r=e.i(21070);function i(e){let i=(0,t.getISOWeekYear)(e),a=(0,r.constructFrom)(e,0);return a.setFullYear(i,0,4),a.setHours(0,0,0,0),(0,n.startOfISOWeek)(a)}},251171:e=>{"use strict";e.s({getISOWeek:()=>a});var t=e.i(734664),n=e.i(340893),r=e.i(104823),i=e.i(163015);function a(e){let a=(0,i.toDate)(e);return Math.round(((0,n.startOfISOWeek)(a)-(0,r.startOfISOWeekYear)(a))/t.millisecondsInWeek)+1}},299326:e=>{"use strict";e.s({getWeekYear:()=>a});var t=e.i(21070),n=e.i(191084),r=e.i(163015),i=e.i(314870);function a(e,a){var o,s,l,u,c,d,h,p;let f=(0,r.toDate)(e),m=f.getFullYear(),g=(0,i.getDefaultOptions)(),y=null!=(p=null!=(h=null!=(d=null!=(c=null==a?void 0:a.firstWeekContainsDate)?c:null==a||null==(s=a.locale)||null==(o=s.options)?void 0:o.firstWeekContainsDate)?d:g.firstWeekContainsDate)?h:null==(u=g.locale)||null==(l=u.options)?void 0:l.firstWeekContainsDate)?p:1,b=(0,t.constructFrom)(e,0);b.setFullYear(m+1,0,y),b.setHours(0,0,0,0);let x=(0,n.startOfWeek)(b,a),w=(0,t.constructFrom)(e,0);w.setFullYear(m,0,y),w.setHours(0,0,0,0);let k=(0,n.startOfWeek)(w,a);return f.getTime()>=x.getTime()?m+1:f.getTime()>=k.getTime()?m:m-1}},177635:e=>{"use strict";e.s({startOfWeekYear:()=>a});var t=e.i(21070),n=e.i(299326),r=e.i(191084),i=e.i(314870);function a(e,a){var o,s,l,u,c,d,h,p;let f=(0,i.getDefaultOptions)(),m=null!=(p=null!=(h=null!=(d=null!=(c=null==a?void 0:a.firstWeekContainsDate)?c:null==a||null==(s=a.locale)||null==(o=s.options)?void 0:o.firstWeekContainsDate)?d:f.firstWeekContainsDate)?h:null==(u=f.locale)||null==(l=u.options)?void 0:l.firstWeekContainsDate)?p:1,g=(0,n.getWeekYear)(e,a),y=(0,t.constructFrom)(e,0);return y.setFullYear(g,0,m),y.setHours(0,0,0,0),(0,r.startOfWeek)(y,a)}},842491:e=>{"use strict";e.s({getWeek:()=>a});var t=e.i(734664),n=e.i(191084),r=e.i(177635),i=e.i(163015);function a(e,a){let o=(0,i.toDate)(e);return Math.round(((0,n.startOfWeek)(o,a)-(0,r.startOfWeekYear)(o,a))/t.millisecondsInWeek)+1}},371898:e=>{"use strict";function t(e,t){let n=Math.abs(e).toString().padStart(t,"0");return(e<0?"-":"")+n}e.s({addLeadingZeros:()=>t})},67186:e=>{"use strict";e.s({lightFormatters:()=>n});var t=e.i(371898);let n={y(e,n){let r=e.getFullYear(),i=r>0?r:1-r;return(0,t.addLeadingZeros)("yy"===n?i%100:i,n.length)},M(e,n){let r=e.getMonth();return"M"===n?String(r+1):(0,t.addLeadingZeros)(r+1,2)},d:(e,n)=>(0,t.addLeadingZeros)(e.getDate(),n.length),a(e,t){let n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:(e,n)=>(0,t.addLeadingZeros)(e.getHours()%12||12,n.length),H:(e,n)=>(0,t.addLeadingZeros)(e.getHours(),n.length),m:(e,n)=>(0,t.addLeadingZeros)(e.getMinutes(),n.length),s:(e,n)=>(0,t.addLeadingZeros)(e.getSeconds(),n.length),S(e,n){let r=n.length,i=Math.trunc(e.getMilliseconds()*Math.pow(10,r-3));return(0,t.addLeadingZeros)(i,n.length)}}},193649:e=>{"use strict";e.s({formatters:()=>u});var t=e.i(823633),n=e.i(251171),r=e.i(33454),i=e.i(842491),a=e.i(299326),o=e.i(371898),s=e.i(67186);let l={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},u={G:function(e,t,n){let r=+(e.getFullYear()>0);switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){let t=e.getFullYear();return n.ordinalNumber(t>0?t:1-t,{unit:"year"})}return s.lightFormatters.y(e,t)},Y:function(e,t,n,r){let i=(0,a.getWeekYear)(e,r),s=i>0?i:1-i;if("YY"===t){let e=s%100;return(0,o.addLeadingZeros)(e,2)}return"Yo"===t?n.ordinalNumber(s,{unit:"year"}):(0,o.addLeadingZeros)(s,t.length)},R:function(e,t){let n=(0,r.getISOWeekYear)(e);return(0,o.addLeadingZeros)(n,t.length)},u:function(e,t){let n=e.getFullYear();return(0,o.addLeadingZeros)(n,t.length)},Q:function(e,t,n){let r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return(0,o.addLeadingZeros)(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){let r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return(0,o.addLeadingZeros)(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){let r=e.getMonth();switch(t){case"M":case"MM":return s.lightFormatters.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){let r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return(0,o.addLeadingZeros)(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){let a=(0,i.getWeek)(e,r);return"wo"===t?n.ordinalNumber(a,{unit:"week"}):(0,o.addLeadingZeros)(a,t.length)},I:function(e,t,r){let i=(0,n.getISOWeek)(e);return"Io"===t?r.ordinalNumber(i,{unit:"week"}):(0,o.addLeadingZeros)(i,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getDate(),{unit:"date"}):s.lightFormatters.d(e,t)},D:function(e,n,r){let i=(0,t.getDayOfYear)(e);return"Do"===n?r.ordinalNumber(i,{unit:"dayOfYear"}):(0,o.addLeadingZeros)(i,n.length)},E:function(e,t,n){let r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){let i=e.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return(0,o.addLeadingZeros)(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){let i=e.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return(0,o.addLeadingZeros)(a,t.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){let r=e.getDay(),i=0===r?7:r;switch(t){case"i":return String(i);case"ii":return(0,o.addLeadingZeros)(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){let r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){let r,i=e.getHours();switch(r=12===i?l.noon:0===i?l.midnight:i/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,n){let r,i=e.getHours();switch(r=i>=17?l.evening:i>=12?l.afternoon:i>=4?l.morning:l.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),n.ordinalNumber(t,{unit:"hour"})}return s.lightFormatters.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getHours(),{unit:"hour"}):s.lightFormatters.H(e,t)},K:function(e,t,n){let r=e.getHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):(0,o.addLeadingZeros)(r,t.length)},k:function(e,t,n){let r=e.getHours();return(0===r&&(r=24),"ko"===t)?n.ordinalNumber(r,{unit:"hour"}):(0,o.addLeadingZeros)(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):s.lightFormatters.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getSeconds(),{unit:"second"}):s.lightFormatters.s(e,t)},S:function(e,t){return s.lightFormatters.S(e,t)},X:function(e,t,n){let r=e.getTimezoneOffset();if(0===r)return"Z";switch(t){case"X":return d(r);case"XXXX":case"XX":return h(r);default:return h(r,":")}},x:function(e,t,n){let r=e.getTimezoneOffset();switch(t){case"x":return d(r);case"xxxx":case"xx":return h(r);default:return h(r,":")}},O:function(e,t,n){let r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+c(r,":");default:return"GMT"+h(r,":")}},z:function(e,t,n){let r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+c(r,":");default:return"GMT"+h(r,":")}},t:function(e,t,n){let r=Math.trunc(e.getTime()/1e3);return(0,o.addLeadingZeros)(r,t.length)},T:function(e,t,n){let r=e.getTime();return(0,o.addLeadingZeros)(r,t.length)}};function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=e>0?"-":"+",r=Math.abs(e),i=Math.trunc(r/60),a=r%60;return 0===a?n+String(i):n+String(i)+t+(0,o.addLeadingZeros)(a,2)}function d(e,t){return e%60==0?(e>0?"-":"+")+(0,o.addLeadingZeros)(Math.abs(e)/60,2):h(e,t)}function h(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=Math.abs(e);return(e>0?"-":"+")+(0,o.addLeadingZeros)(Math.trunc(n/60),2)+t+(0,o.addLeadingZeros)(n%60,2)}},243281:e=>{"use strict";e.s({longFormatters:()=>r});let t=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},n=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},r={p:n,P:(e,r)=>{let i,a=e.match(/(P+)(p+)?/)||[],o=a[1],s=a[2];if(!s)return t(e,r);switch(o){case"P":i=r.dateTime({width:"short"});break;case"PP":i=r.dateTime({width:"medium"});break;case"PPP":i=r.dateTime({width:"long"});break;default:i=r.dateTime({width:"full"})}return i.replace("{{date}}",t(o,r)).replace("{{time}}",n(s,r))}}},166082:e=>{"use strict";e.s({isProtectedDayOfYearToken:()=>i,isProtectedWeekYearToken:()=>a,warnOrThrowProtectedError:()=>o});let t=/^D+$/,n=/^Y+$/,r=["D","DD","YY","YYYY"];function i(e){return t.test(e)}function a(e){return n.test(e)}function o(e,t,n){let i=function(e,t,n){let r="Y"===e[0]?"years":"days of the month";return"Use `".concat(e.toLowerCase(),"` instead of `").concat(e,"` (in `").concat(t,"`) for formatting ").concat(r," to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md")}(e,t,n);if(console.warn(i),r.includes(e))throw RangeError(i)}},744433:e=>{"use strict";function t(e){return e instanceof Date||"object"==typeof e&&"[object Date]"===Object.prototype.toString.call(e)}e.s({isDate:()=>t})},735467:e=>{"use strict";e.s({isValid:()=>r});var t=e.i(744433),n=e.i(163015);function r(e){return(!!(0,t.isDate)(e)||"number"==typeof e)&&!isNaN(Number((0,n.toDate)(e)))}},281127:e=>{"use strict";e.s({format:()=>p});var t=e.i(445897),n=e.i(314870),r=e.i(193649),i=e.i(243281),a=e.i(166082),o=e.i(735467),s=e.i(163015);let l=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,u=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,c=/^'([^]*?)'?$/,d=/''/g,h=/[a-zA-Z]/;function p(e,p,f){var m,g,y,b,x,w,k,S,_,C,A,E,T,M,I,N,D,P;let R=(0,n.getDefaultOptions)(),O=null!=(C=null!=(_=null==f?void 0:f.locale)?_:R.locale)?C:t.defaultLocale,j=null!=(M=null!=(T=null!=(E=null!=(A=null==f?void 0:f.firstWeekContainsDate)?A:null==f||null==(g=f.locale)||null==(m=g.options)?void 0:m.firstWeekContainsDate)?E:R.firstWeekContainsDate)?T:null==(b=R.locale)||null==(y=b.options)?void 0:y.firstWeekContainsDate)?M:1,F=null!=(P=null!=(D=null!=(N=null!=(I=null==f?void 0:f.weekStartsOn)?I:null==f||null==(w=f.locale)||null==(x=w.options)?void 0:x.weekStartsOn)?N:R.weekStartsOn)?D:null==(S=R.locale)||null==(k=S.options)?void 0:k.weekStartsOn)?P:0,L=(0,s.toDate)(e);if(!(0,o.isValid)(L))throw RangeError("Invalid time value");let z=p.match(u).map(e=>{let t=e[0];return"p"===t||"P"===t?(0,i.longFormatters[t])(e,O.formatLong):e}).join("").match(l).map(e=>{if("''"===e)return{isToken:!1,value:"'"};let t=e[0];if("'"===t)return{isToken:!1,value:function(e){let t=e.match(c);return t?t[1].replace(d,"'"):e}(e)};if(r.formatters[t])return{isToken:!0,value:e};if(t.match(h))throw RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}});O.localize.preprocessor&&(z=O.localize.preprocessor(L,z));let B={firstWeekContainsDate:j,weekStartsOn:F,locale:O};return z.map(t=>{if(!t.isToken)return t.value;let n=t.value;return(!(null==f?void 0:f.useAdditionalWeekYearTokens)&&(0,a.isProtectedWeekYearToken)(n)||!(null==f?void 0:f.useAdditionalDayOfYearTokens)&&(0,a.isProtectedDayOfYearToken)(n))&&(0,a.warnOrThrowProtectedError)(n,p,String(e)),(0,r.formatters[n[0]])(L,n,O.localize,B)}).join("")}},585689:e=>{"use strict";e.s({compareAsc:()=>n});var t=e.i(163015);function n(e,n){let r=(0,t.toDate)(e),i=(0,t.toDate)(n),a=r.getTime()-i.getTime();return a<0?-1:a>0?1:a}},930789:e=>{"use strict";e.s({formatDistanceStrict:()=>l});var t=e.i(445897),n=e.i(314870),r=e.i(97801),i=e.i(203802),a=e.i(585689),o=e.i(734664),s=e.i(163015);function l(e,l,u){var c,d,h;let p,f,m,g=(0,n.getDefaultOptions)(),y=null!=(d=null!=(c=null==u?void 0:u.locale)?c:g.locale)?d:t.defaultLocale,b=(0,a.compareAsc)(e,l);if(isNaN(b))throw RangeError("Invalid time value");let x=Object.assign({},u,{addSuffix:null==u?void 0:u.addSuffix,comparison:b});b>0?(p=(0,s.toDate)(l),f=(0,s.toDate)(e)):(p=(0,s.toDate)(e),f=(0,s.toDate)(l));let w=(0,r.getRoundingMethod)(null!=(h=null==u?void 0:u.roundingMethod)?h:"round"),k=f.getTime()-p.getTime(),S=k/o.millisecondsInMinute,_=(k-((0,i.getTimezoneOffsetInMilliseconds)(f)-(0,i.getTimezoneOffsetInMilliseconds)(p)))/o.millisecondsInMinute,C=null==u?void 0:u.unit;if("second"===(m=C||(S<1?"second":S<60?"minute":S<o.minutesInDay?"hour":_<o.minutesInMonth?"day":_<o.minutesInYear?"month":"year"))){let e=w(k/1e3);return y.formatDistance("xSeconds",e,x)}if("minute"===m){let e=w(S);return y.formatDistance("xMinutes",e,x)}if("hour"===m){let e=w(S/60);return y.formatDistance("xHours",e,x)}if("day"===m){let e=w(_/o.minutesInDay);return y.formatDistance("xDays",e,x)}if("month"===m){let e=w(_/o.minutesInMonth);return 12===e&&"month"!==C?y.formatDistance("xYears",1,x):y.formatDistance("xMonths",e,x)}else{let e=w(_/o.minutesInYear);return y.formatDistance("xYears",e,x)}}},350684:e=>{"use strict";e.s({constructNow:()=>n});var t=e.i(21070);function n(e){return(0,t.constructFrom)(e,Date.now())}},987041:e=>{"use strict";e.s({formatDistanceToNowStrict:()=>r});var t=e.i(930789),n=e.i(350684);function r(e,r){return(0,t.formatDistanceStrict)(e,(0,n.constructNow)(e),r)}},328379:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]])},672330:e=>{"use strict";e.s({MessageSquare:()=>t.default});var t=e.i(328379)},655507:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("trash",[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},749248:e=>{"use strict";e.s({Trash:()=>t.default});var t=e.i(655507)},166765:e=>{"use strict";e.s({env:()=>i});var t=e.i(227541),n=e.i(774349),r=e.i(555168);let i=(0,n.createEnv)({server:{},client:{NEXT_PUBLIC_LOG:r.z.string().optional(),NEXT_PUBLIC_VERCEL_ENV:r.z.string().optional(),NEXT_PUBLIC_VIDEO_BUCKET_NAME:r.z.string(),NEXT_PUBLIC_UPLOADED_AUDIO_BUCKET_NAME:r.z.string(),NEXT_PUBLIC_AUDIO_BUCKET_NAME:r.z.string(),NEXT_PUBLIC_ATTACHMENT_BUCKET_NAME:r.z.string()},experimental__runtimeEnv:{NEXT_PUBLIC_LOG:t.default.env.NEXT_PUBLIC_LOG,NEXT_PUBLIC_VERCEL_ENV:"production",NEXT_PUBLIC_VIDEO_BUCKET_NAME:"unriddle-production-videobucket-chuccxem",NEXT_PUBLIC_UPLOADED_AUDIO_BUCKET_NAME:"unriddle-production-uploadedaudiobucket-cbuhrffb",NEXT_PUBLIC_AUDIO_BUCKET_NAME:"unriddle-production-audiobucket-bnwxmxhz",NEXT_PUBLIC_ATTACHMENT_BUCKET_NAME:"unriddle-production-attachmentbucket-chahbfvr"}})},490076:e=>{"use strict";e.s({getAttachmentCdnUrl:()=>a,getAudioCdnUrl:()=>r,getAudioRecordingCdnUrl:()=>i,getTZDate:()=>s,getVideoCdnUrl:()=>n,isIgnoredDomain:()=>o});var t=e.i(166765);t.env.NEXT_PUBLIC_VERCEL_ENV,t.env.NEXT_PUBLIC_VERCEL_ENV;let n=e=>{let n=e.split("/").pop(),r=e.includes(t.env.NEXT_PUBLIC_VIDEO_BUCKET_NAME);return"".concat(r?"https://cdn.infra.unriddle.ai":"https://dev-cdn.infra.unriddle.ai","/video/").concat(n)},r=e=>{let n=e.split("/").pop(),r=e.includes(t.env.NEXT_PUBLIC_UPLOADED_AUDIO_BUCKET_NAME);return"".concat(r?"https://cdn.infra.unriddle.ai":"https://dev-cdn.infra.unriddle.ai","/uploaded-audio/").concat(n)},i=(e,n)=>{let r=e.split("/").pop(),i=e.includes(t.env.NEXT_PUBLIC_AUDIO_BUCKET_NAME);return"".concat(i?"https://cdn.infra.unriddle.ai":"https://dev-cdn.infra.unriddle.ai","/recording/").concat(n,"/").concat(r)},a=(e,n)=>{let r=e.split("/").pop(),i=e.includes(t.env.NEXT_PUBLIC_ATTACHMENT_BUCKET_NAME);return"".concat(i?"https://cdn.infra.unriddle.ai":"https://dev-cdn.infra.unriddle.ai","/attachment/").concat(n,"/").concat(r)},o=e=>["ivypanda.com","studycorgi.com"].some(t=>e.includes(t)),s=()=>new Date(new Date().toUTCString()).toISOString().slice(0,19).replace("T"," ")},51785:e=>{"use strict";e.s({default:()=>i});var t=e.i(885905),n=e.i(814733),r=e.i(375768);let i=e=>{let{id:i,enabled:a=!0}=e,{isLoggedIn:o}=(0,t.useAuth)(),{data:s,isLoading:l}=n.api.chatbot.byId.useQuery(null!=i?i:r.skipToken,{enabled:!!i&&o&&a});return{chatbot:s,isLoading:l}}},39888:e=>{"use strict";e.s({ensureLatestAttachmentsExists:()=>i,extractEditorContent:()=>r,parseEditorContent:()=>n});var t=e.i(982152);let n=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[],r=[],i="",a=e=>{let i="";for(let l of e){var a,o,s;if("mention"===l.type&&(null==(a=l.attrs)?void 0:a.id))"TOOL"===l.attrs.type?(r.push(l.attrs.id),t?i+="[".concat(l.attrs.label,"]"):i+="[[tool:".concat(l.attrs.id,":").concat(l.attrs.label,"]]")):(n.push({id:l.attrs.id,label:l.attrs.label,type:l.attrs.type}),t?i+="[".concat(l.attrs.label,"]"):i+="[[mention:".concat(l.attrs.id,":").concat(l.attrs.label,":").concat(l.attrs.type,"]]"));else if("text"===l.type&&l.text){let e=null==(o=l.marks)?void 0:o.find(e=>"link"===e.type);(null==e||null==(s=e.attrs)?void 0:s.href)?i+="[".concat(l.text,"](").concat(e.attrs.href,")"):i+=l.text}else"hardBreak"===l.type&&(i+="\n")}return i};if(e.content){for(let t of e.content)if("paragraph"===t.type&&t.content){let e=a(t.content);i&&e?i+="\n".concat(e):i+=e}else if("title"===t.type&&t.content)i+=a(t.content);else if(t.content){let e=a(t.content);i&&e?i+="\n".concat(e):i+=e}}return{text:i,mentions:n,tools:r}};function r(e){let{text:r,mentions:i,tools:a}=n(e.getJSON());return{text:r,mentionAttachments:i.filter(e=>"TOOL"!==e.type).map(e=>(0,t.mapMentionToAttachment)(e.id,e.label,e.type)),tools:a}}let i=(e,t)=>{let n=new Set(t.map(e=>e.id)),r=e.filter(e=>"input-attachment"!==e.type||"mention"!==e.data.type||n.has(e.id)),i=new Set(r.map(e=>e.id));return{latestAttachments:[...r,...t.filter(e=>!i.has(e.id))]}}},719772:e=>{"use strict";e.s({useChatEditorTiptap:()=>l,useEditorContent:()=>s});var t=e.i(647968),n=e.i(608294),r=e.i(373150),i=e.i(39888);let a=(0,t.atom)(null),o=(0,t.atom)({editor:null,entityId:null}),s=()=>{let[e]=(0,n.useAtom)(o),{editor:t}=e,[s,l]=(0,n.useAtom)(a),u=(0,r.useMemo)(()=>{if(!s||!s.content)return"";let{text:e}=(0,i.parseEditorContent)(s);return e},[null==s?void 0:s.content]);return{editorContent:s,setEditorContent:l,text:u,setTextValue:e=>{let n={type:"doc",content:e.split("\n").map(e=>({type:"paragraph",content:""!==e.trim()?[{type:"text",text:e}]:[]}))};null==t||t.commands.setContent(n),l(n),setTimeout(()=>{(null==t?void 0:t.view)&&!t.isDestroyed&&t.commands.focus()},0)}}},l=()=>{let[e,t]=(0,n.useAtom)(o),{editor:r,entityId:i}=e;return{editor:r,entityId:i,setEditor:e=>{t(t=>({...t,editor:e}))},setEntityId:e=>{t(t=>({...t,entityId:e}))},cleanupEditor:()=>{null==r||r.commands.setContent(null)},setContent:e=>{null==r||r.commands.setContent(e)},removeMention:e=>(null==r||r.state.doc.descendants((t,n)=>"mention"!==t.type.name||t.attrs.id!==e||(null==r||r.commands.deleteRange({from:n,to:n+t.nodeSize}),!1)),null==r?void 0:r.getJSON())}}},706042:e=>{"use strict";e.s({convertAttachments:()=>n});var t=e.i(430266);let n=e=>null==e?void 0:e.map(e=>"input-attachment"===e.type?e:(0,t.match)(e).with({type:"image",data:{type:"image_url"}},e=>({type:"input-attachment",id:e.id,data:{type:"image",url:e.data.image_url.url,extension:e.extension||"",name:e.name||""}})).with({type:"text",data:{type:"text"}},e=>({type:"input-attachment",id:e.id,data:{type:"text",text:e.data.text,highlights:e.highlights,chatbotId:e.chatbotId||"",chatbotType:"DOCUMENT"}})).with({type:"mention",data:{type:"mention"}},e=>({type:"input-attachment",id:e.id,data:{type:"mention",chatbotId:e.chatbotId,chatbotName:e.data.chatbotName}})).otherwise(()=>null)).filter(e=>null!==e)},341664:e=>{"use strict";e.s({useChatId:()=>n,useOptimisticLibraryChatId:()=>r});var t=e.i(118246);let n=()=>{let[e,n]=(0,t.useQueryState)("chatId",t.parseAsString);return{chatId:e,setChatId:n}},r=()=>{let[e,n]=(0,t.useQueryState)("optimisticLibraryChatId",t.parseAsString);return{optimisticLibraryChatId:e,setOptimisticLibraryChatId:n}}},681299:e=>{"use strict";e.s({useChatUniqueId:()=>r});var t=e.i(341664),n=e.i(221297);let r=()=>{let{chatId:e}=(0,t.useChatId)(),{optimisticLibraryChatId:r}=(0,t.useOptimisticLibraryChatId)(),i=(0,n.useChatV2Store)(e=>e.mode);return{uniqueSaveId:"chatbot"===i.type?i.chatbotId:e||r,isOptimisticLibraryChat:!!r}}},982152:e=>{"use strict";e.s({mapMentionToAttachment:()=>c,mapTextToAttachment:()=>u,useAddAttachment:()=>h,useChatbotInput:()=>p,useSavedChatbotInput:()=>d});var t=e.i(375768),n=e.i(257140),r=e.i(373150),i=e.i(966882),a=e.i(719772),o=e.i(706042),s=e.i(681299),l=e.i(814733);let u=(e,t,r,i)=>({id:(0,n.nanoid)(),type:"input-attachment",data:{type:"text",text:t,chatbotId:e,chatbotType:r,highlights:i}}),c=(e,t,r)=>({id:(0,n.nanoid)(),type:"input-attachment",data:{type:"mention",chatbotId:e,chatbotName:t,chatbotType:r}}),d=()=>{var e;let{uniqueSaveId:n}=(0,s.useChatUniqueId)(),{data:r,isLoading:i}=l.api.chatbotInput.getNewChatInput.useQuery(n?{chatbotId:n}:t.skipToken,{enabled:!!n,retry:1,staleTime:1/0}),a=(null==r||null==(e=r.attachments)?void 0:e.length)?(0,o.convertAttachments)(r.attachments):[];return{data:r,isLoading:i,input:null==r?void 0:r.input,attachments:a}},h=()=>{let{editor:e}=(0,a.useChatEditorTiptap)(),t=l.api.useUtils(),{mutate:n}=l.api.chatbotInput.saveInputChatV2.useMutation({onMutate:async e=>{await t.chatbotInput.getNewChatInput.cancel();let n=t.chatbotInput.getNewChatInput.getData();return t.chatbotInput.getNewChatInput.setData({chatbotId:e.chatbotId},{attachments:e.attachments,input:e.input}),{previousData:n}},onError:(e,n,r)=>{(null==r?void 0:r.previousData)&&t.chatbotInput.getNewChatInput.setData({chatbotId:n.chatbotId},r.previousData)}});return{addAttachments:(r,i)=>{var a,s;if(!i)return;let l=null==e?void 0:e.getJSON(),u=[...(0,o.convertAttachments)(null!=(s=null==(a=t.chatbotInput.getNewChatInput.getData({chatbotId:i}))?void 0:a.attachments)?s:[]),...r];n({chatbotId:i,attachments:u,input:null!=l?l:""})}}},p=()=>{let e=l.api.useUtils(),{removeMention:t,editor:n}=(0,a.useChatEditorTiptap)(),{cleanupEditor:u}=(0,a.useChatEditorTiptap)(),{uniqueSaveId:c}=(0,s.useChatUniqueId)(),{mutate:d}=l.api.chatbotInput.saveInputChatV2.useMutation({onMutate:async t=>{await e.chatbotInput.getNewChatInput.cancel();let n=e.chatbotInput.getNewChatInput.getData();return e.chatbotInput.getNewChatInput.setData({chatbotId:t.chatbotId},{attachments:t.attachments,input:t.input}),{previousData:n}},onError:(t,n,r)=>{(null==r?void 0:r.previousData)&&e.chatbotInput.getNewChatInput.setData({chatbotId:n.chatbotId},r.previousData)}}),h=(0,r.useCallback)((t,n,r)=>{var i,a;let s=[...(0,o.convertAttachments)(null!=(a=null==(i=e.chatbotInput.getNewChatInput.getData({chatbotId:r}))?void 0:i.attachments)?a:[]).filter(e=>"mention"!==e.data.type),...n];return d({chatbotId:r,attachments:s,input:t}),s},[]),p=(0,i.useDebouncedCallback)(h,500);return{removeAttachment:(r,i)=>{var a,o;if(!i)return;let s=null!=(o=null==(a=e.chatbotInput.getNewChatInput.getData({chatbotId:i}))?void 0:a.attachments)?o:[],l=s.filter(e=>e.id!==r),u=s.find(e=>e.id===r),c=null==n?void 0:n.getJSON();u&&(c=t(r)),d({chatbotId:i,attachments:l,input:c})},saveChat:p,nonDebouncedSaveChat:h,resetAttachments:()=>{c&&(d({chatbotId:c,attachments:[],input:""}),u(),setTimeout(()=>{d({chatbotId:c,attachments:[],input:""}),u()},550),p.cancel())}}}},800328:e=>{"use strict";e.s({convertToClientAnnotation:()=>y,useDocumentAnnotations:()=>b});var t=e.i(769512),n=e.i(490076),r=e.i(224879),i=e.i(608294),a=e.i(373150),o=e.i(885905),s=e.i(51785),l=e.i(982152),u=e.i(252390),c=e.i(227261),d=e.i(910173),h=e.i(814733),p=e.i(428625);let f=e=>({"rgba(255, 204, 0, 0.25)":"yellow","rgba(249, 115, 22, 0.25)":"orange","rgba(34, 197, 94, 0.25)":"green","rgba(59, 130, 246, 0.25)":"blue","rgba(168, 85, 247, 0.25)":"purple","rgba(239, 68, 68, 0.25)":"red","rgba(255, 204, 0, 0.1)":"yellow","rgba(249, 115, 22, 0.1)":"orange","rgba(34, 197, 94, 0.1)":"green","rgba(59, 130, 246, 0.1)":"blue","rgba(168, 85, 247, 0.1)":"purple","rgba(239, 68, 68, 0.1)":"red","var(--highlight-yellow)":"yellow","var(--highlight-orange)":"orange","var(--highlight-green)":"green","var(--highlight-blue)":"blue","var(--highlight-purple)":"purple","var(--highlight-red)":"red"})[e]||e||"blue",m=e=>{let t=f(e);return(0,d.getHighlightColorByName)(t).backgroundColor},g=e=>["yellow","orange","green","blue","purple","red"].includes(e)?e:f(e),y=e=>({id:e.id,pageNumber:e.pageNumber,highlights:e.highlights,underlines:e.underlines,color:m(e.color||""),borderColor:e.borderColor||"",comment:e.comment||"",createdAt:new Date(e.createdAt),updatedAt:new Date(e.updatedAt),metadata:{chatbotId:e.chatbotId,text:e.text,userId:e.userId,userDisplayName:e.userDisplayName}}),b=e=>{var d;let[f,b]=(0,i.useAtom)(p.focusedAnnotationIdAtom),[x,w]=(0,i.useAtom)(p.focusedHoverAnnotationIdAtom),{addAttachments:k}=(0,l.useAddAttachment)(),S=h.api.useUtils(),{user:_}=(0,o.useAuth)(),{chatbot:C}=(0,s.default)({id:e}),{addAnnotation:A,updateAnnotation:E,deleteAnnotation:T}=(0,t.useAnnotations)(),{track:M}=(0,u.default)(),[I,N]=(0,i.useAtom)(p.lastHighlightColorAtom),D=(0,c.useChatbotStore)(e=>e.toggle),{data:P,isLoading:R}=h.api.documentAnnotation.all.useQuery(e,{enabled:!!e&&(null==C?void 0:C.isIndexed)}),O=h.api.documentAnnotation.create.useMutation({onSettled:()=>{S.documentAnnotation.all.invalidate(e)}}),j=h.api.documentAnnotation.update.useMutation({onSuccess:t=>{S.documentAnnotation.all.setData(e,e=>e?{annotations:e.annotations.map(e=>e.id===t.id?t:e)}:{annotations:[t]})},onError:(e,t)=>{let n=null==P?void 0:P.annotations.find(e=>e.id===t.id);if(n){let e=y({...n,highlights:n.highlights,underlines:n.underlines});E(t.id,e)}}}),F=h.api.documentAnnotation.delete.useMutation({onMutate:async t=>{await S.documentAnnotation.all.cancel(e);let n=S.documentAnnotation.all.getData(e);return T(t),S.documentAnnotation.all.setData(e,e=>e?{annotations:e.annotations.filter(e=>e.id!==t)}:{annotations:[]}),{previousData:n}},onError:(t,n,r)=>{var i;let a=null==r||null==(i=r.previousData)?void 0:i.annotations.find(e=>e.id===n);a&&A(y({...a,highlights:a.highlights,underlines:a.underlines})),S.documentAnnotation.all.setData(e,null==r?void 0:r.previousData)}}),L=(0,a.useCallback)(t=>{var i,a,o;let s=(0,r.default)(),l=((e,t,n)=>{var r,i,a;return{id:n,chatbotId:t,pageNumber:e.pageNumber,highlights:e.highlights,underlines:e.underlines||[],color:g(e.color||"blue"),borderColor:e.borderColor||"",comment:e.comment||"",text:(null==(r=e.metadata)?void 0:r.text)||"text",userId:null==(i=e.metadata)?void 0:i.userId,userDisplayName:null==(a=e.metadata)?void 0:a.userDisplayName}})(t,e,s),u=null==(i=t.metadata)?void 0:i.userId,c=null==(a=t.metadata)?void 0:a.userDisplayName,d={id:s,pageNumber:t.pageNumber,highlights:t.highlights,underlines:t.underlines,color:t.color||"",borderColor:t.borderColor||"",comment:t.comment||"",createdAt:new Date((0,n.getTZDate)()),updatedAt:new Date((0,n.getTZDate)()),metadata:{chatbotId:e,text:(null==(o=t.metadata)?void 0:o.text)||"text",userId:u,userDisplayName:c}};A(d),d.comment&&setTimeout(()=>{w(d.id)},50),M("annotation_created"),S.documentAnnotation.all.cancel(e),S.documentAnnotation.all.setData(e,e=>{let r={...l,underlines:t.underlines,userId:u,userDisplayName:c,createdAt:(0,n.getTZDate)(),updatedAt:(0,n.getTZDate)(),comment:l.comment||null};return e?{annotations:[...e.annotations,r]}:{annotations:[r]}}),O.mutate(l,{onError:()=>{T(s),S.documentAnnotation.all.setData(e,e=>e?{annotations:e.annotations.filter(e=>e.id!==s)}:{annotations:[]})}})},[e,O,A,T,S]),z=(0,a.useCallback)((t,n)=>{var r;S.documentAnnotation.all.cancel(e);let i=null==P?void 0:P.annotations.find(e=>e.id===t);if(!i)return;let a="string"==typeof(null==(r=n.metadata)?void 0:r.text)?n.metadata.text:i.text,o=new Date(new Date().toUTCString());E(t,{...n,updatedAt:new Date(o.toISOString().slice(0,19).replace("T"," "))}),S.documentAnnotation.all.setData(e,e=>e?{annotations:e.annotations.map(e=>e.id!==t?e:{id:i.id,userId:i.userId,userDisplayName:i.userDisplayName,chatbotId:i.chatbotId,createdAt:i.createdAt,updatedAt:o.toISOString().slice(0,19).replace("T"," "),pageNumber:n.pageNumber,highlights:n.highlights,underlines:n.underlines,color:n.color||i.color,comment:n.comment||null,text:i.text,borderColor:n.borderColor||i.borderColor})}:{annotations:[]}),j.mutate({id:t,chatbotId:e,pageNumber:n.pageNumber,highlights:n.highlights,color:g(n.color||"blue"),borderColor:n.borderColor,comment:n.comment,text:a})},[e,j,E,S,P]),B=(0,a.useCallback)(e=>{F.mutate(e)},[F]),U=(0,a.useCallback)(async e=>{let{text:t,comment:n,chatbotId:r}=e,i=S.citations.formatFromMetadata.getData({chatbotId:r}),a=i?i.replace(/<[^>]+>/g,""):"";await navigator.clipboard.writeText('"'.concat(t,'"').concat(n?" ".concat(n):"").concat(a?" ".concat(a):""))},[]),H=(0,a.useCallback)(e=>{b(null==e?void 0:e.id)},[]),W=(0,a.useCallback)(e=>{e?w(e.id):w(void 0)},[]),V=(0,a.useCallback)((e,t,n)=>{D("chat",!0),k([(0,l.mapTextToAttachment)(n,e,"DOCUMENT",t)],n)},[]),q=(0,a.useCallback)(t=>{var n;let i=(0,r.default)(),a=(null==_?void 0:_.id)||"temp-user",o=(null==_?void 0:_.displayName)||"User",s={id:i,pageNumber:null==(n=t.highlights[0])?void 0:n.pageNumber,highlights:t.highlights,underlines:t.underlines||[],color:m(I.colorName||"yellow"),borderColor:I.borderColor,comment:"",createdAt:new Date,updatedAt:new Date,isCommentPending:!0,metadata:{chatbotId:e,text:t.text||"text",userId:a,userDisplayName:o}};A(s),H(s)},[e,_,A,H,I]),G=(0,a.useCallback)(e=>{T(e),b(void 0)},[T,b]),$=(0,a.useCallback)((e,t)=>{T(e.id),L({pageNumber:e.pageNumber,highlights:e.highlights,underlines:e.underlines||[],color:e.color,borderColor:e.borderColor,comment:t,metadata:e.metadata})},[T,L]);return{savedAnnotations:null!=(d=null==P?void 0:P.annotations)?d:[],isLoading:R,focusedAnnotationId:f,focusedHoverAnnotationId:x,handleCopyToChat:V,handleCreateAnnotation:L,handleUpdateAnnotation:z,handleDeleteAnnotation:B,handleAnnotationClick:H,handleCopyContents:U,handleAnnotationHover:W,handleCreateTemporaryAnnotation:q,handleRemoveTemporaryAnnotation:G,handleConvertTemporaryToReal:$}}},850028:e=>{"use strict";e.s({AnnotationComment:()=>x,formatTimeAgo:()=>b});var t=e.i(290479),n=e.i(281127),r=e.i(987041),i=e.i(874133),a=e.i(486137),o=e.i(15749),s=e.i(672330),l=e.i(765357),u=e.i(749248),c=e.i(373150),d=e.i(555168),h=e.i(704255),p=e.i(448068),f=e.i(959757),m=e.i(972899),g=e.i(252390),y=e.i(800328);let b=e=>{let t=new Date(e.getTime()-6e4*e.getTimezoneOffset()),i=(0,r.formatDistanceToNowStrict)(t,{addSuffix:!1});return i.includes("second")?"just now":i.includes("minute")||i.includes("hour")?"".concat(i," ago"):(0,n.format)(t,"MMM d, yyyy")},x=e=>{var n,r;let{annotation:x}=e,{handleCopyContents:w,handleUpdateAnnotation:k,handleCopyToChat:S}=(0,y.useDocumentAnnotations)(null==(n=x.metadata)?void 0:n.chatbotId),[_,C]=(0,c.useState)(!1),[A,E]=(0,c.useState)(!1),[T,M]=(0,c.useState)(!1),[I,N]=(0,c.useState)(!1),{track:D}=(0,g.default)(),P=(0,c.useCallback)(e=>{k(x.id,{...x,comment:e.comment}),C(!1),D("annotation_comment_updated",{location:"pdf_viewer"})},[x.id,k]),R=(0,f.useForm)({defaultValues:{comment:x.comment||""},schema:d.z.object({comment:d.z.string()})}),O=(0,c.useCallback)(e=>{e.stopPropagation(),N(!0)},[]),j=null==(r=x.metadata)?void 0:r.userDisplayName,F=(0,c.useRef)(null),L=(0,c.useCallback)(()=>{let e=F.current;if(!e)return;e.style.height="1.5em";let t=Math.min(Math.ceil(e.scrollHeight/Number.parseFloat(getComputedStyle(e).lineHeight)),15);e.style.height="".concat(1.5*t,"em")},[_]);(0,c.useEffect)(()=>{F.current&&L()},[L,_,x.comment]),(0,c.useEffect)(()=>{_&&setTimeout(()=>{R.setFocus("comment")},200)},[_,R]);let{ref:z,...B}=R.register("comment");return(0,c.useEffect)(()=>{R.reset({comment:x.comment||""})},[x.comment,R]),(0,t.jsxs)("div",{className:"flex flex-col gap-4 bg-popover border rounded-4 p-6 shadow-shadowMedium w-[296px]",onClick:O,onMouseLeave:e=>{I&&(e.stopPropagation(),e.preventDefault())},children:[(0,t.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,t.jsxs)("div",{className:"flex flex-row gap-4 items-center",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-full bg-popover-hover items-center justify-center text-center",children:(0,t.jsx)("p",{className:"text-xs text-text-secondary uppercase px-2 py-[5px] leading-[11px]",children:(null==j?void 0:j.length)?j.charAt(0):"U"})}),(0,t.jsxs)("p",{className:"text-sm font-medium",children:[" ",j||"User"]}),(0,t.jsx)("p",{className:"text-xs leading-5 pt-1 font-medium text-text-secondary",children:b(x.updatedAt)})]}),(0,t.jsxs)(p.DropdownMenu,{open:T,onOpenChange:e=>{M(e),e||E(!1)},children:[(0,t.jsx)(p.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(h.Button,{className:"h-11 w-11 font-medium hover:bg-popover-hover",variant:"ghost",id:"noteMenuButton",size:"xs",leadingIcon:(0,t.jsx)(m.Icon,{as:o.Ellipsis})})}),(0,t.jsxs)(p.DropdownMenuContent,{align:"end",className:"w-[186px] z-[55] p-2",sideOffset:6,children:[(0,t.jsx)(p.DropdownMenuItem,{asChild:!0,onSelect:()=>{C(!0),M(!1)},children:(0,t.jsx)(h.Button,{variant:"ghost",size:"medium",className:"w-full justify-start",onClick:e=>{e.preventDefault(),e.stopPropagation(),C(!0),M(!1)},leadingIcon:(0,t.jsx)(m.Icon,{as:l.PenLine}),label:"Edit comment"})}),(0,t.jsx)(p.DropdownMenuItem,{asChild:!0,onSelect:()=>{var e,t;w({text:null==(e=x.metadata)?void 0:e.text,comment:x.comment,chatbotId:null==(t=x.metadata)?void 0:t.chatbotId}),D("annotation_comment_copied",{location:"pdf_viewer"}),M(!1)},children:(0,t.jsx)(h.Button,{variant:"ghost",size:"medium",className:"w-full justify-start",onClick:e=>{var t,n;e.preventDefault(),e.stopPropagation(),w({text:null==(t=x.metadata)?void 0:t.text,comment:x.comment,chatbotId:null==(n=x.metadata)?void 0:n.chatbotId}),D("annotation_comment_copied",{location:"pdf_viewer"}),M(!1)},leadingIcon:(0,t.jsx)(m.Icon,{as:a.Copy}),label:"Copy contents"})}),(0,t.jsx)(p.DropdownMenuItem,{asChild:!0,onSelect:()=>{var e,t;S(null==(e=x.metadata)?void 0:e.text,x.highlights,null==(t=x.metadata)?void 0:t.chatbotId),D("annotation_comment_added_to_chat",{location:"pdf_viewer"}),M(!1)},children:(0,t.jsx)(h.Button,{variant:"ghost",size:"medium",className:"w-full justify-start",onClick:e=>{var t,n;e.preventDefault(),e.stopPropagation(),S(null==(t=x.metadata)?void 0:t.text,x.highlights,null==(n=x.metadata)?void 0:n.chatbotId),D("annotation_comment_added_to_chat",{location:"pdf_viewer"}),M(!1)},leadingIcon:(0,t.jsx)(m.Icon,{as:s.MessageSquare}),label:"Add to chat"})}),(0,t.jsx)(p.DropdownMenuItem,{asChild:!0,onSelect:e=>{A?(P({comment:""}),D("annotation_comment_deleted",{location:"pdf_viewer"}),M(!1)):(e.preventDefault(),e.stopPropagation(),E(!0))},children:(0,t.jsx)(h.Button,{variant:A?"destructive":"ghost",size:"medium",className:"w-full justify-start",onClick:e=>{e.preventDefault(),e.stopPropagation(),A?(P({comment:""}),D("annotation_comment_deleted",{location:"pdf_viewer"}),M(!1)):E(!0)},leadingIcon:(0,t.jsx)(m.Icon,{as:A?i.Check:u.Trash}),label:A?"Confirm":"Delete comment"})})]})]})]}),(0,t.jsx)(f.Form,{...R,children:(0,t.jsx)("form",{onSubmit:R.handleSubmit(P),className:"w-full",children:(0,t.jsxs)("div",{className:"w-full flex flex-col items-center gap-6 pl-2",children:[(0,t.jsx)("textarea",{...B,ref:e=>{F.current=e,z(e)},disabled:!_,className:"w-full text-sm focus:outline-none placeholder:text-text-secondary bg-popover resize-none p-0 leading-[1.5] min-h-8 max-h-[160px] overflow-y-auto scrollbar-hide ".concat(_&&"min-h-8 line-clamp-10 break-words whitespace-pre-wrap"),placeholder:"Add a comment...",style:{height:"20px",boxSizing:"content-box",display:_?"block":"-webkit-box",WebkitLineClamp:_?"none":"4",WebkitBoxOrient:"vertical"},onInput:L,onKeyDown:e=>{"Enter"===e.key&&!e.shiftKey&&(e.preventDefault(),R.formState.isValid&&R.handleSubmit(P)())}}),_&&(0,t.jsxs)("div",{className:"w-full flex flex-row gap-4 justify-end",children:[(0,t.jsx)(h.Button,{size:"xs",variant:"secondary",className:"px-5",onClick:()=>{C(!1),R.reset({comment:x.comment||""})},children:"Cancel"}),(0,t.jsx)(h.Button,{type:"submit",size:"xs",className:"px-5",disabled:!R.formState.isValid&&R.formState.isDirty,children:"Save"})]})]})})})]})}},263893:e=>{"use strict";e.s({HoverTooltipContent:()=>r});var t=e.i(290479),n=e.i(850028);let r=e=>{let{annotation:r}=e;return r.comment?(0,t.jsx)(n.AnnotationComment,{annotation:r}):null}},462538:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("message-square-text",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}],["path",{d:"M7 11h10",key:"1twpyw"}],["path",{d:"M7 15h6",key:"d9of3u"}],["path",{d:"M7 7h8",key:"af5zfr"}]])},782974:e=>{"use strict";e.s({MessageSquareText:()=>t.default});var t=e.i(462538)},315566:e=>{"use strict";e.s({BASE_HIGHLIGHT_COLORS:()=>u,ColorSelector:()=>p,PdfColorSelector:()=>h});var t=e.i(290479),n=e.i(874133),r=e.i(381612),i=e.i(373150),a=e.i(704255),o=e.i(303652),s=e.i(476440),l=e.i(252390);let u=(0,e.i(910173).getBubbleColorMenuItems)(),c={name:"Default",color:"",backgroundColor:"transparent",borderColor:"rgb(107 114 128)",textColor:"rgb(0 0 0)",colorName:"default"},d=[...u,c],h=e=>{let{currentColor:s,onColorChange:l}=e,[c,d]=(0,i.useState)(!1),h=u.find(e=>{let{colorName:t}=e;return t===s});return(0,t.jsxs)(o.Popover,{modal:!0,open:c,onOpenChange:d,children:[(0,t.jsx)(o.PopoverTrigger,{asChild:!0,className:"hover:bg-popover-hover h-[30px]",children:(0,t.jsx)(a.Button,{size:"medium",className:"gap-2",variant:"ghost",leadingIcon:(0,t.jsx)("span",{className:"h-7 w-7 flex-shrink-0 rounded-full border",style:{backgroundColor:null==h?void 0:h.backgroundColor,borderColor:null==h?void 0:h.borderColor}}),trailingIcon:(0,t.jsx)(r.ChevronDown,{className:"h-7 w-7"})})}),(0,t.jsx)(o.PopoverContent,{className:"flex w-48 flex-col rounded-4 border p-2 shadow-shadowHigh ",align:"start",children:u.map(e=>(0,t.jsx)(a.Button,{variant:"ghost",size:"medium",onClick:t=>{l(t,e),d(!1)},className:"flex cursor-pointer items-center justify-between px-3 py-2 rounded-4 text-sm hover:bg-accent w-full",trailingIcon:e.color===s&&(0,t.jsx)(n.Check,{className:"h-7 w-7",style:{color:"rgb(59 130 246)"}}),children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("span",{className:"h-7 w-7 flex-shrink-0 rounded-full border",style:{backgroundColor:e.backgroundColor,borderColor:e.borderColor}}),(0,t.jsx)("span",{children:e.name})]})},e.name))})]})},p=e=>{var u,h;let{editor:p}=e,[m,g]=(0,i.useState)(!1),[,y]=(0,i.useState)(0),{track:b}=(0,l.default)();if((0,i.useEffect)(()=>{if(!p)return;let e=()=>{y(e=>e+1)};return p.on("transaction",e),()=>{p.off("transaction",e)}},[p]),!p)return null;let x=d.find(e=>{let{color:t}=e;return p.isActive("highlight",{color:t})});return(0,t.jsxs)(o.Popover,{modal:!0,open:m,onOpenChange:g,children:[(0,t.jsx)(s.ReusableTooltip,{content:"Change background text color",asChild:!0,children:(0,t.jsx)(o.PopoverTrigger,{asChild:!0,className:"hover:bg-popover-hover",children:(0,t.jsx)(a.Button,{size:"xs",className:"gap-2 !h-11 p-3",variant:"ghost",leadingIcon:(0,t.jsx)("span",{className:"h-[18px] w-[18px] flex-shrink-0 rounded-[5px] border flex items-center justify-center text-sm",style:{backgroundColor:null!=(u=null==x?void 0:x.backgroundColor)?u:c.backgroundColor,borderColor:null!=(h=null==x?void 0:x.borderColor)?h:c.borderColor},children:(0,t.jsx)(f,{})}),trailingIcon:(0,t.jsx)(r.ChevronDown,{className:"h-[14px] w-[14px]"})})})}),(0,t.jsx)(o.PopoverContent,{className:"flex w-48 flex-col rounded-4 border p-2 shadow-shadowHigh ",align:"start",sideOffset:8,onCloseAutoFocus:e=>e.preventDefault(),children:d.map(e=>{let{name:r,color:i,backgroundColor:o,borderColor:s}=e;return(0,t.jsxs)(a.Button,{variant:"ghost",size:"medium",onClick:()=>{let e=p.isActive("highlight",{color:i});b("editor_color_highlight_changed",{color:r,removed:"Default"===r||e}),"Default"===r||e?p.chain().focus().unsetHighlight().run():p.chain().focus().setHighlight({color:i}).run(),g(!1)},className:"flex cursor-pointer items-center justify-between px-3 py-2 rounded-4 text-sm hover:bg-accent",trailingIcon:p.isActive("highlight",{color:i})&&(0,t.jsx)(n.Check,{className:"h-7 w-7"}),children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("span",{className:"h-7 w-7 flex-shrink-0 rounded-full border",style:{backgroundColor:o,borderColor:s}}),(0,t.jsx)("span",{children:r})]}),p.isActive("highlight",{color:i})&&(0,t.jsx)(n.Check,{className:"h-7 w-7"})]},r)})})]})},f=()=>(0,t.jsxs)("svg",{width:"15",height:"14",viewBox:"0 0 15 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("path",{d:"M4 10.5L7.5 3.5L11 10.5",stroke:"currentColor",strokeWidth:"1.16667",strokeLinecap:"round",strokeLinejoin:"round"}),(0,t.jsx)("path",{d:"M5.16675 8.16666H9.83342",stroke:"currentColor",strokeWidth:"1.16667",strokeLinecap:"round",strokeLinejoin:"round"})]})},601265:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("arrow-up",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]])},592103:e=>{"use strict";e.s({ArrowUp:()=>t.default});var t=e.i(601265)},791808:e=>{"use strict";e.s({AnnotationNewComment:()=>h});var t=e.i(290479),n=e.i(592103),r=e.i(373150),i=e.i(555168),a=e.i(704255),o=e.i(959757),s=e.i(972899),l=e.i(252390),u=e.i(46621),c=e.i(289702),d=e.i(800328);let h=e=>{var h;let{annotation:p,onClose:f,isTemporary:m=!1}=e,{handleAnnotationClick:g,handleUpdateAnnotation:y,handleConvertTemporaryToReal:b}=(0,d.useDocumentAnnotations)(null==(h=p.metadata)?void 0:h.chatbotId),{track:x}=(0,l.default)(),{mutate:w}=(0,u.useMarkStepCompletedWithTracking)(),k=(0,o.useForm)({defaultValues:{comment:p.comment||""},schema:i.z.object({comment:i.z.string()})}),[S,_]=(0,r.useState)(!1);(0,r.useEffect)(()=>{setTimeout(()=>{k.setFocus("comment")},200)},[k]);let C=e=>{m?(b(p,e.comment),x("annotation_comment_added",{location:"pdf_viewer"}),w({workflowKey:"annotate-document",stepKey:"add-annotation"})):(y(p.id,{...p,comment:e.comment}),x(p.comment?"annotation_comment_updated":"annotation_comment_added",{location:"pdf_viewer"}),p.comment||w({workflowKey:"annotate-document",stepKey:"add-annotation"})),g(null),null==f||f()},A=(0,r.useCallback)(e=>{e.stopPropagation()},[]);return(0,t.jsx)("div",{className:"flex flex-col gap-1 bg-popover border rounded-4 p-4 shadow-shadowMedium w-[296px]",onClick:A,children:(0,t.jsx)(o.Form,{...k,children:(0,t.jsx)("form",{onSubmit:k.handleSubmit(C),className:"w-full",children:(0,t.jsxs)("div",{className:(0,c.cn)("w-full flex flex-row items-center gap-4 pl-2",S&&"flex-col items-end"),children:[(0,t.jsx)("textarea",{...k.register("comment"),className:"w-full min-h-8 max-h-[200px] overflow-y-auto text-sm focus:outline-none placeholder:text-text-secondary bg-popover resize-none",placeholder:"Add a comment...",rows:1,onInput:e=>{var t;let n=e.target;n.style.height="auto",n.style.height="".concat(n.scrollHeight,"px"),_(n.value.length>24||(null==(t=n.value)?void 0:t.includes("\n")))},onKeyDown:e=>{"Enter"===e.key&&!e.shiftKey&&(e.preventDefault(),k.formState.isValid&&k.handleSubmit(C)())}}),(0,t.jsx)(a.Button,{type:"submit",size:"icon",className:"shrink-0 h-9 w-9",disabled:!k.formState.isValid,children:(0,t.jsx)(s.Icon,{as:n.ArrowUp})})]})})})})}},398421:e=>{"use strict";e.s({TooltipContent:()=>k});var t=e.i(290479),n=e.i(608294),r=e.i(874133),i=e.i(486137),a=e.i(15749),o=e.i(672330),s=e.i(782974),l=e.i(749248),u=e.i(373150),c=e.i(704255),d=e.i(448068),h=e.i(972899),p=e.i(252390),f=e.i(910173),m=e.i(315566),g=e.i(289702),y=e.i(791808),b=e.i(428625),x=e.i(800328);let w=()=>(0,t.jsx)("div",{className:"bg-border w-px h-[18px]"}),k=e=>{var k;let{annotation:S,onClose:_,setPosition:C}=e,{handleUpdateAnnotation:A,handleDeleteAnnotation:E,handleCopyToChat:T,handleCopyContents:M,handleRemoveTemporaryAnnotation:I}=(0,x.useDocumentAnnotations)(null==(k=S.metadata)?void 0:k.chatbotId),[N,D]=(0,u.useState)(S.isCommentPending||!1),[P,R]=(0,u.useState)(!1),O=(0,n.useSetAtom)(b.lastHighlightColorAtom),{track:j}=(0,p.default)();(0,u.useEffect)(()=>{N?null==C||C("bottom"):null==C||C("top")},[N]);let F=(0,u.useCallback)(e=>{e.stopPropagation(),D(!0)},[]),L=(0,u.useCallback)(e=>{e.stopPropagation(),P?(E(S.id),null==_||_(),j("annotation_deleted",{location:"pdf_viewer"})):R(!0)},[S.id,E,_,P]),z=(0,u.useCallback)(e=>{e.stopPropagation(),R(!1)},[]),B=(0,u.useCallback)(()=>{S.isCommentPending&&I(S.id),D(!1),null==_||_()},[S.isCommentPending,S.id,I,_]);return N?(0,t.jsx)(y.AnnotationNewComment,{annotation:S,onClose:B,isTemporary:S.isCommentPending}):(0,t.jsxs)("div",{className:"flex flex-row gap-2 items-center bg-popover border rounded-4 p-2 shadow-shadowMedium",onClick:z,children:[(0,t.jsx)(m.PdfColorSelector,{currentColor:(e=>{let t=(0,f.getAllHighlightColors)().find(t=>t.backgroundColor===e);return(null==t?void 0:t.name)||e})(S.color||"orange"),onColorChange:(e,t)=>{e.stopPropagation(),A(S.id,{...S,color:t.backgroundColor,borderColor:t.borderColor}),j("annotation_color_updated",{location:"pdf_viewer"}),O({...t,color:t.colorName})}}),(0,t.jsx)(w,{}),(0,t.jsx)(c.Button,{variant:"ghost",size:"medium",className:"h-[30px] font-medium hover:bg-popover-hover",onClick:F,leadingIcon:(0,t.jsx)(h.Icon,{as:s.MessageSquareText}),label:"Comment"}),(0,t.jsx)(w,{}),(0,t.jsx)(c.Button,{variant:"ghost",size:"medium",className:(0,g.cn)("h-[30px] font-medium hover:bg-popover-hover",P&&"text-destructive-solid bg-control-destructive hover:!bg-control-destructive hover:!text-destructive-solid"),onClick:L,leadingIcon:(0,t.jsx)(h.Icon,{as:P?r.Check:l.Trash}),label:P?"Confirm":"Delete"}),(0,t.jsx)(w,{}),(0,t.jsxs)(d.DropdownMenu,{children:[(0,t.jsx)(d.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(c.Button,{className:"text-text-primary h-[30px] font-medium hover:bg-popover-hover",variant:"ghost",size:"medium",children:(0,t.jsx)(h.Icon,{as:a.Ellipsis})})}),(0,t.jsxs)(d.DropdownMenuContent,{align:"end",className:"w-[186px] p-2 gap-2",sideOffset:6,children:[(0,t.jsx)(d.DropdownMenuItem,{onClick:()=>{var e,t;M({text:null==(e=S.metadata)?void 0:e.text,comment:S.comment,chatbotId:null==(t=S.metadata)?void 0:t.chatbotId}),j("annotation_comment_copied",{location:"pdf_viewer"})},asChild:!0,onSelect:()=>{var e,t;M({text:null==(e=S.metadata)?void 0:e.text,comment:S.comment,chatbotId:null==(t=S.metadata)?void 0:t.chatbotId})},children:(0,t.jsx)(c.Button,{variant:"ghost",size:"medium",className:"w-full justify-start",leadingIcon:(0,t.jsx)(h.Icon,{as:i.Copy}),label:"Copy contents"})}),(0,t.jsx)(d.DropdownMenuItem,{onClick:()=>{var e,t;T(null==(e=S.metadata)?void 0:e.text,S.highlights,null==(t=S.metadata)?void 0:t.chatbotId),j("annotation_added_to_chat",{location:"pdf_viewer"})},asChild:!0,onSelect:()=>{var e,t;T(null==(e=S.metadata)?void 0:e.text,S.highlights,null==(t=S.metadata)?void 0:t.chatbotId)},children:(0,t.jsx)(c.Button,{variant:"ghost",size:"medium",className:"w-full justify-start",leadingIcon:(0,t.jsx)(h.Icon,{as:o.MessageSquare}),label:"Add to chat"})})]})]})]})}},986046:e=>{"use strict";e.s({MessagesSquare:()=>t.default});var t=e.i(29124)},532723:e=>{"use strict";e.s({SelectionActions:()=>p});var t=e.i(290479),n=e.i(769512),r=e.i(898467),i=e.i(782974),a=e.i(986046),o=e.i(373150),s=e.i(972899),l=e.i(982152),u=e.i(252390),c=e.i(227261),d=e.i(704255),h=e.i(800328);let p=e=>{let{chatbotId:p,onHighlight:f}=e,{getDimension:m,getAnnotationDimension:g}=(0,n.useSelectionDimensions)(),{addAttachments:y}=(0,l.useAddAttachment)(),b=(0,c.useChatbotStore)(e=>e.toggle),{track:x}=(0,u.default)(),w=(0,c.useChatbotStore)(e=>e.mode),k=((null==w?void 0:w.type)==="chatbot"?w.chatbotId:void 0)||p,{handleCreateTemporaryAnnotation:S}=(0,h.useDocumentAnnotations)(p),_=(0,o.useCallback)(e=>{var t;e.preventDefault(),e.stopPropagation();let n=m();if(!n)return;let r=n.text,i=n.highlights;null==(t=window.getSelection())||t.removeAllRanges(),b("chat",!0),x("attachment_added",{type:"selection"}),y([(0,l.mapTextToAttachment)(k,r,"DOCUMENT",i)],k)},[y,k,m,b,x]),C=(0,o.useCallback)(e=>{var t;e.preventDefault(),e.stopPropagation(),g()&&(f(),null==(t=window.getSelection())||t.removeAllRanges())},[g,f]),A=(0,o.useCallback)(e=>{var t;e.preventDefault(),e.stopPropagation();let n=g();n&&(S(n),null==(t=window.getSelection())||t.removeAllRanges())},[g,S]);return(0,t.jsxs)("div",{className:"bg-popover rounded-4 shadow-feint border flex flex-row p-2 items-center gap-2",onTouchStart:e=>{e.preventDefault(),e.stopPropagation()},onTouchEnd:e=>{e.preventDefault(),e.stopPropagation()},onClick:e=>{e.preventDefault(),e.stopPropagation()},children:[(0,t.jsx)(d.Button,{size:"medium",className:"py-[5px] font-medium hover:bg-popover-hover",variant:"ghost",onClick:()=>{let e=m();e&&(b("chat",!0),x("attachment_added",{type:"selection"}),y([(0,l.mapTextToAttachment)(k,e.text,"NOTE",null==e?void 0:e.highlights)],k))},onTouchEnd:_,leadingIcon:(0,t.jsx)(s.Icon,{as:a.MessagesSquare}),label:"Chat"}),(0,t.jsx)("div",{className:"bg-border w-px h-[18px]"}),(0,t.jsx)(d.Button,{size:"medium",className:"py-[5px] font-medium hover:bg-popover-hover",variant:"ghost",onClick:C,onTouchEnd:C,leadingIcon:(0,t.jsx)(s.Icon,{as:r.Highlighter}),label:"Highlight"}),(0,t.jsx)("div",{className:"bg-border w-px h-[18px]"}),(0,t.jsx)(d.Button,{size:"medium",className:"py-[5px] font-medium hover:bg-popover-hover",variant:"ghost",onClick:A,onTouchEnd:A,leadingIcon:(0,t.jsx)(s.Icon,{as:i.MessageSquareText}),label:"Comment"})]})}},428625:e=>{"use strict";e.s({PdfContent:()=>_,annotationNavigationAtom:()=>b,focusedAnnotationIdAtom:()=>x,focusedHoverAnnotationIdAtom:()=>w,lastHighlightColorAtom:()=>S});var t=e.i(290479),n=e.i(769512),r=e.i(647968),i=e.i(608294),a=e.i(227348),o=e.i(857477),s=e.i(625483),l=e.i(373150),u=e.i(885905),c=e.i(910173),d=e.i(289702),h=e.i(83874),p=e.i(679118),f=e.i(263893),m=e.i(398421),g=e.i(532723),y=e.i(800328);let b=(0,r.atom)(null),x=(0,r.atom)(void 0),w=(0,r.atom)(void 0),k=(0,a.atomFamily)(e=>(0,a.atomWithStorage)(e,0)),S=(0,a.atomWithStorage)("lastHighlightColor",{name:"Yellow",color:"bg-yellow/10 text-yellow-600",backgroundColor:"rgba(202, 138, 4, 0.3)",borderColor:"rgb(202 138 4)",textColor:"rgb(202 138 4)",colorName:"yellow"}),_=e=>{var r;let{chatbotId:a,defaultAnnotations:_,isQuickHighlightMode:C}=e,{handleCreateAnnotation:A,handleAnnotationClick:E,handleAnnotationHover:T,handleRemoveTemporaryAnnotation:M}=(0,y.useDocumentAnnotations)(a),[I]=(0,i.useAtom)(x),[N]=(0,i.useAtom)(w),{setAnnotations:D}=(0,n.useAnnotations)(),{annotations:P}=(0,n.useAnnotations)(),{getAnnotationDimension:R}=(0,n.useSelectionDimensions)(),{scrollToHighlightRects:O}=(0,n.usePdfJump)(),{user:j}=(0,u.useAuth)(),F=(0,i.useSetAtom)(b),[L,z]=(0,i.useAtom)(S),[B]=(0,i.useAtom)(h.currentHighlightColorAtom),U=(0,l.useMemo)(()=>({backgroundColor:(e=>{let t=(0,c.getHighlightColorByName)(e);return{backgroundColor:t.backgroundColor,borderColor:t.borderColor}})(B).backgroundColor,borderRadius:"4px",boxSizing:"border-box"}),[B]);(0,l.useEffect)(()=>{let e=e=>{e.comment?(T(e),E(null)):(E(e),T(null)),e.highlights&&O(e.highlights,"pixels","center",-50)};return F(()=>e),()=>F(null)},[E,T,O]);let H=()=>{var e,t,n,r;let i=R();(null==i||null==(e=i.highlights)?void 0:e.length)&&(null==(t=i.underlines)?void 0:t.length)&&(A({pageNumber:i.highlights[0].pageNumber,highlights:i.highlights,color:(r=L.colorName||"yellow",(0,c.getHighlightColorByName)(r).backgroundColor),underlines:i.underlines,borderColor:L.borderColor,updatedAt:new Date,createdAt:new Date,comment:"",metadata:{chatbotId:a,text:i.text,userId:null==j?void 0:j.id,userDisplayName:null==j?void 0:j.displayName}}),null==(n=window.getSelection())||n.removeAllRanges())};(0,l.useEffect)(()=>{let e=null==_?void 0:_.map(e=>({...(0,y.convertToClientAnnotation)({...e,highlights:e.highlights,underlines:e.underlines||[]})}));D(null!=e?e:[])},[]),(0,l.useEffect)(()=>{var e;if(!I)return;let t=P.find(e=>e.id===I);t&&(null==t||null==(e=t.highlights)?void 0:e.length)&&O(t.highlights,"pixels","center",100)},[I,P,O]);let W=(0,l.useCallback)(e=>{let t=e.target;if(t.closest('[role="tooltip"]')||t.closest("[data-highlight-id]"))return;let n=P.find(e=>e.id===I);(null==n?void 0:n.isCommentPending)?M(n.id):I&&E(null),N&&T(null)},[I,N,P,M]),V=(0,l.useMemo)(()=>({overscan:2}),[]),q=(0,l.useCallback)(e=>(0,t.jsx)(m.TooltipContent,{...e,onClose:()=>E(null)}),[]),G=(0,l.useCallback)(e=>{let{annotation:n}=e;return(0,t.jsx)(f.HoverTooltipContent,{annotation:n,onClose:()=>E(null)})},[]),{resolvedTheme:$}=(0,s.useTheme)(),K=(0,l.useMemo)(()=>k(a),[a]),Y=(0,l.useRef)(null),X=(0,l.useRef)(null),Z=(0,o.useAtomCallback)((0,l.useCallback)((e,t)=>{let n=e(K);return Y.current=n,X.current=e=>t(K,e),n},[K]));(0,l.useLayoutEffect)(()=>{Z()},[Z]);let J=(0,l.useCallback)(()=>{C&&H()},[C,H]);return(0,l.useEffect)(()=>{if(C)return document.addEventListener("mouseup",J),()=>{document.removeEventListener("mouseup",J)}},[C,J]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.Pages,{initialOffset:null!=(r=Y.current)?r:0,onOffsetChange:e=>{X.current&&X.current(e)},className:"w-full",onClick:W,style:{scrollbarWidth:"thin"},virtualizerOptions:V,children:(0,t.jsxs)(n.Page,{children:[(0,t.jsx)(p.PDFViewerFun,{}),(0,t.jsxs)("div",{className:(0,d.cn)("dark"===$&&"invert-[91%] hue-rotate-180 brightness-[80%] contrast-[228%] bg-background-primary"),children:[(0,t.jsx)(n.CanvasLayer,{}),(0,t.jsx)(n.TextLayer,{className:"mix-blend-multiply"})]}),(0,t.jsx)(n.AnnotationHighlightLayer,{focusedAnnotationId:I,focusedHoverAnnotationId:N,hoverTooltipClassName:"z-50",underlineClassName:"!h-1",highlightClassName:(0,d.cn)("transition-all duration-200 cursor-pointer","dark"===$?"mix-blend-screen opacity-100":"mix-blend-multiply"),onAnnotationClick:E,renderHoverTooltipContent:G,renderTooltipContent:q}),(0,t.jsx)(n.HighlightLayer,{className:(0,d.cn)("z-10","dark"===$?"mix-blend-screen":"mix-blend-multiply"),style:U})]})}),!C&&(0,t.jsx)(n.SelectionTooltip,{children:(0,t.jsx)(g.SelectionActions,{chatbotId:a,onHighlight:H})})]})}},183270:e=>{e.v("/_next/static/media/pdf.worker.min.a401144f.mjs")},234526:e=>{"use strict";e.s({default:()=>N,highlightAtom:()=>M,useHighlightArea:()=>I});var t=e.i(290479),n=e.i(769512),r=e.i(647968),i=e.i(608294),a=e.i(898467),o=e.i(546074),s=e.i(441729),l=e.i(240824),u=e.i(625483),c=e.i(598944),d=e.i(330462),h=e.i(373150),p=e.i(430266),f=e.i(23061),m=e.i(289702),g=e.i(704255),y=e.i(972899),b=e.i(91410),x=e.i(83874),w=e.i(967923),k=e.i(132722),S=e.i(376816),_=e.i(814733),C=e.i(838710),A=e.i(666645),E=e.i(428625);void 0===Promise.withResolvers&&(window.Promise.withResolvers=()=>{let e,t;return{promise:new Promise((n,r)=>{e=n,t=r}),resolve:e,reject:t}}),c.GlobalWorkerOptions.workerSrc=new e.U(e.r(183270)).toString();let T=()=>(0,t.jsx)("div",{className:"flex justify-center items-center h-full w-full ",children:(0,t.jsx)("div",{className:"loader-gray"})}),M=(0,r.atom)(null),I=()=>{let[e,t]=(0,i.useAtom)(M);return{jumpToPage:e=>{t({type:"page",pageNumber:e})},jumpToHighlightArea:(e,n,r)=>{t({type:"chunk",rects:e,rectType:n||"percent",color:r})},jumpToDualHighlightAreas:(e,n,r,i)=>{t({type:"dual",fillRects:e,outlineRects:n,rectType:r||"percent",color:i})}}},N=e=>{let{chatbotId:r,documentUrl:i,onMinimize:c}=e,[M,I]=(0,h.useState)(!1),[N,D]=(0,h.useState)(null),{resolvedTheme:P}=(0,u.useTheme)(),{data:R,isLoading:O}=_.api.documentAnnotation.all.useQuery(r),[j,F]=(0,h.useState)(!1),[L,z]=(0,h.useState)(!1),[B,U]=(0,h.useState)("thumbnails"),H=(0,h.useCallback)(async e=>{let{proxy:t,source:n}=e,r=await t.getOutline();D(n),(null==r?void 0:r.length)>0&&I(!0)},[]),W=(0,h.useMemo)(()=>({maxZoom:5,minZoom:.2}),[]);return(0,t.jsxs)(n.Root,{isZoomFitWidth:!0,onDocumentLoad:H,zoomOptions:W,source:i,className:(0,m.cn)("bg-background-primary overflow-hidden relative h-full",(0,f.isSafariOrFirefox)()&&"tracking-[initial]"),loader:(0,t.jsx)(T,{}),children:[(0,t.jsx)(x.HighlightManager,{documentUrl:i,currentLoadedUrl:N}),(0,t.jsxs)("div",{className:"flex flex-col h-full",children:[(0,t.jsxs)("div",{className:"px-4 py-3 bg-background-primary border-b border-border-primary flex flex-row items-center relative justify-between",children:[(0,t.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,t.jsx)(g.Button,{size:"icon",variant:"ghost",className:"text-text-primary",onClick:()=>z(!L),children:(0,t.jsx)(y.Icon,{as:o.LayoutList})}),(0,t.jsx)(g.Button,{size:"icon",variant:"ghost",className:"text-text-primary",onClick:()=>{z(!0),U("search")},children:(0,t.jsx)(y.Icon,{as:l.SearchIcon})}),(0,t.jsx)(g.Button,{size:"icon",variant:"ghost",className:(0,m.cn)("text-text-primary",j&&"text-text-primary bg-control-primary border border-background shadow-[0px_0px_0px_1.5px_#007AFF]"),onClick:()=>{F(!j)},children:(0,t.jsx)(y.Icon,{as:a.Highlighter,height:16,width:16,className:(0,m.cn)("text-text-primary",j&&"text-text-primary")})}),(0,t.jsx)(S.default,{})]}),(0,t.jsx)(A.PageNavigation,{}),(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[c&&(0,t.jsx)(g.Button,{className:"text-text-primary",variant:"ghost",id:"noteMenuButton",onClick:c,size:"icon",children:(0,t.jsx)(y.Icon,{as:s.Minimize2})}),(0,t.jsx)(C.default,{documentUrl:i})]})]}),(0,t.jsxs)("div",{className:"flex flex-grow overflow-hidden relative",children:[(0,t.jsx)(d.AnimatePresence,{children:L&&(0,t.jsxs)(w.PDFViewerSidebar,{children:[(0,t.jsx)("div",{className:"py-6",children:(0,t.jsxs)(b.ToggleGroup,{defaultValue:"thumbnails",type:"single",value:B,className:"px-6 justify-start",onValueChange:e=>{e&&e!==B&&U(e)},children:[(0,t.jsx)(b.ToggleGroupItem,{size:"sm",value:"thumbnails",children:"Thumbnails"}),(0,t.jsx)(b.ToggleGroupItem,{disabled:!M,size:"sm",value:"outline",children:"Outline"}),(0,t.jsx)(b.ToggleGroupItem,{size:"sm",value:"search",children:"Search"})]})}),(0,t.jsx)("div",{className:"h-full overflow-auto pb-16",children:(0,t.jsx)("div",{className:"overflow-y-auto h-full overflow-x-hidden",children:(0,t.jsx)("div",{className:"w-full h-full overflow-x-hidden px-6",children:(0,t.jsx)(n.Search,{loading:null,children:(0,p.match)(B).with("thumbnails",()=>(0,t.jsx)(n.Thumbnails,{className:"flex flex-col items-center",children:(0,t.jsx)(n.Thumbnail,{className:(0,m.cn)("border-border-primary border-4 outline-blue outline-4 rounded-5 m-2 transition-all duration-200 hover:!border-border-primary cursor-pointer shadow-none relative w-48","dark"===P&&"invert-[91%] hue-rotate-180 brightness-[80%] contrast-[228%]")})})).with("outline",()=>(0,t.jsx)(n.Outline,{className:"pl-4",children:(0,t.jsx)(n.OutlineItem,{className:"text-sm [&>a]:py-1 [&>a]:block [&>a:hover]:underline",children:(0,t.jsx)(n.OutlineChildItems,{className:"pl-7"})})})).with("search",()=>(0,t.jsx)(k.SearchMenu,{})).otherwise(()=>null)})})})})]})}),!O&&(null==R?void 0:R.annotations)&&(0,t.jsx)(E.PdfContent,{chatbotId:r,isQuickHighlightMode:j,defaultAnnotations:null==R?void 0:R.annotations})]})]})]})}},83874:e=>{"use strict";e.s({HighlightManager:()=>c,currentHighlightColorAtom:()=>s});var t=e.i(769512),n=e.i(647968),r=e.i(608294),i=e.i(373150),a=e.i(430266),o=e.i(234526);let s=(0,n.atom)("blue"),l=(0,n.atom)([]),u=(0,n.atom)("percent"),c=e=>{let{currentLoadedUrl:n,documentUrl:c,highlightAtom:d}=e,[h,p]=(0,r.useAtom)(o.highlightAtom),[f,m]=(0,r.useAtom)(d||o.highlightAtom),[g,y]=(0,r.useAtom)(s),[b,x]=(0,r.useAtom)(l),[w,k]=(0,r.useAtom)(u),S=d?f:h,_=d?m:p,C=(0,t.usePdf)(e=>e.viewportRef),A=(0,t.usePdf)(e=>e.zoom),E=(0,t.usePdf)(e=>e.pdfDocumentProxy),T=(0,t.usePdf)(e=>e.currentPage),{jumpToPage:M,jumpToHighlightRects:I}=(0,t.usePdfJump)(),N=(0,i.useRef)(!1),D=(0,i.useRef)(null),P=(0,i.useRef)(!1);return(0,i.useEffect)(()=>{if(!S)return;let e=JSON.stringify(S),t=JSON.stringify(D.current),r=n!==c;if((e!==t||r)&&(N.current=!1,P.current=!1,D.current=S),N.current||P.current||!(n===c&&E&&T>0&&E.numPages>0&&(null==C?void 0:C.current)))return;P.current=!0;let i=setTimeout(()=>{(0,a.match)(S).with({type:"page"},e=>{let{pageNumber:t}=e;M(t)}).with({type:"chunk"},e=>{var t,n;let{rects:r,rectType:i,color:a}=e;a&&y(a);let o=null!=(n=null==C||null==(t=C.current)?void 0:t.clientHeight)?n:300;I(r,i,"start",-(o/2/A-o/5))}).with({type:"dual"},e=>{var t,n;let{fillRects:r,outlineRects:i,rectType:a,color:o}=e;o&&y(o);let s=[...r,...i],l=null!=(n=null==C||null==(t=C.current)?void 0:t.clientHeight)?n:300;I(s,a,"start",-(l/2/A-l/5))}).otherwise(()=>{}),N.current=!0,P.current=!1,_(null)},200);return()=>{clearTimeout(i),P.current=!1}},[S,n,c,M,I,y,x,k,_,C,A,E,T]),null}},737908:e=>{"use strict";let t;e.s({Drawer:()=>j});var n=e.i(975267),r=e.i(373150);let i=r.default.createContext({drawerRef:{current:null},overlayRef:{current:null},onPress:()=>{},onRelease:()=>{},onDrag:()=>{},onNestedDrag:()=>{},onNestedOpenChange:()=>{},onNestedRelease:()=>{},openProp:void 0,dismissible:!1,isOpen:!1,isDragging:!1,keyboardIsOpen:{current:!1},snapPointsOffset:null,snapPoints:null,handleOnly:!1,modal:!1,shouldFade:!1,activeSnapPoint:null,onOpenChange:()=>{},setActiveSnapPoint:()=>{},closeDrawer:()=>{},direction:"bottom",shouldAnimate:{current:!0},shouldScaleBackground:!1,setBackgroundColorOnScale:!0,noBodyStyles:!1,container:null,autoFocus:!1}),a=()=>{let e=r.default.useContext(i);if(!e)throw Error("useDrawerContext must be used within a Drawer.Root");return e};function o(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function s(){return l(/^iPhone/)||l(/^iPad/)||l(/^Mac/)&&navigator.maxTouchPoints>1}function l(e){return"undefined"!=typeof window&&null!=window.navigator?e.test(window.navigator.platform):void 0}!function(e){if(!e||"undefined"==typeof document)return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}("[data-vaul-drawer]{touch-action:none;will-change:transform;transition:transform .5s cubic-bezier(.32, .72, 0, 1);animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=open]{animation-name:slideFromBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=closed]{animation-name:slideToBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=open]{animation-name:slideFromTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=closed]{animation-name:slideToTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=open]{animation-name:slideFromLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=closed]{animation-name:slideToLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=open]{animation-name:slideFromRight}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=closed]{animation-name:slideToRight}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--initial-transform,100%),0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--initial-transform,100%),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-overlay][data-vaul-snap-points=false]{animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-overlay][data-vaul-snap-points=false][data-state=open]{animation-name:fadeIn}[data-vaul-overlay][data-state=closed]{animation-name:fadeOut}[data-vaul-animate=false]{animation:none!important}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:0;transition:opacity .5s cubic-bezier(.32, .72, 0, 1)}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:1}[data-vaul-drawer]:not([data-vaul-custom-container=true])::after{content:'';position:absolute;background:inherit;background-color:inherit}[data-vaul-drawer][data-vaul-drawer-direction=top]::after{top:initial;bottom:100%;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=bottom]::after{top:100%;bottom:initial;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=left]::after{left:initial;right:100%;top:0;bottom:0;width:200%}[data-vaul-drawer][data-vaul-drawer-direction=right]::after{left:100%;right:initial;top:0;bottom:0;width:200%}[data-vaul-overlay][data-vaul-snap-points=true]:not([data-vaul-snap-points-overlay=true]):not(\n[data-state=closed]\n){opacity:0}[data-vaul-overlay][data-vaul-snap-points-overlay=true]{opacity:1}[data-vaul-handle]{display:block;position:relative;opacity:.7;background:#e2e2e4;margin-left:auto;margin-right:auto;height:5px;width:32px;border-radius:1rem;touch-action:pan-y}[data-vaul-handle]:active,[data-vaul-handle]:hover{opacity:1}[data-vaul-handle-hitarea]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:max(100%,2.75rem);height:max(100%,2.75rem);touch-action:inherit}@media (hover:hover) and (pointer:fine){[data-vaul-drawer]{user-select:none}}@media (pointer:fine){[data-vaul-handle-hitarea]:{width:100%;height:100%}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeOut{to{opacity:0}}@keyframes slideFromBottom{from{transform:translate3d(0,var(--initial-transform,100%),0)}to{transform:translate3d(0,0,0)}}@keyframes slideToBottom{to{transform:translate3d(0,var(--initial-transform,100%),0)}}@keyframes slideFromTop{from{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}to{transform:translate3d(0,0,0)}}@keyframes slideToTop{to{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}}@keyframes slideFromLeft{from{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToLeft{to{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}}@keyframes slideFromRight{from{transform:translate3d(var(--initial-transform,100%),0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToRight{to{transform:translate3d(var(--initial-transform,100%),0,0)}}");let u="undefined"!=typeof window?r.useLayoutEffect:r.useEffect;function c(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];for(let e of t)"function"==typeof e&&e(...n)}}let d="undefined"!=typeof document&&window.visualViewport;function h(e){let t=window.getComputedStyle(e);return/(auto|scroll)/.test(t.overflow+t.overflowX+t.overflowY)}function p(e){for(h(e)&&(e=e.parentElement);e&&!h(e);)e=e.parentElement;return e||document.scrollingElement||document.documentElement}let f=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]),m=0;function g(e,t,n,r){return e.addEventListener(t,n,r),()=>{e.removeEventListener(t,n,r)}}function y(e){let t=document.scrollingElement||document.documentElement;for(;e&&e!==t;){let t=p(e);if(t!==document.documentElement&&t!==document.body&&t!==e){let n=t.getBoundingClientRect().top,r=e.getBoundingClientRect().top;e.getBoundingClientRect().bottom>t.getBoundingClientRect().bottom+24&&(t.scrollTop+=r-n)}e=t.parentElement}}function b(e){return e instanceof HTMLInputElement&&!f.has(e.type)||e instanceof HTMLTextAreaElement||e instanceof HTMLElement&&e.isContentEditable}function x(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.useCallback(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>t.forEach(t=>{"function"==typeof t?t(e):null!=t&&(t.current=e)})}(...t),t)}let w=new WeakMap;function k(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e||!(e instanceof HTMLElement))return;let r={};Object.entries(t).forEach(t=>{let[n,i]=t;if(n.startsWith("--"))return void e.style.setProperty(n,i);r[n]=e.style[n],e.style[n]=i}),n||w.set(e,r)}let S=e=>{switch(e){case"top":case"bottom":return!0;case"left":case"right":return!1;default:return e}};function _(e,t){if(!e)return null;let n=window.getComputedStyle(e),r=n.transform||n.webkitTransform||n.mozTransform,i=r.match(/^matrix3d\((.+)\)$/);return i?parseFloat(i[1].split(", ")[S(t)?13:12]):(i=r.match(/^matrix\((.+)\)$/))?parseFloat(i[1].split(", ")[S(t)?5:4]):null}function C(e,t){if(!e)return()=>{};let n=e.style.cssText;return Object.assign(e.style,t),()=>{e.style.cssText=n}}let A={DURATION:.5,EASE:[.32,.72,0,1]},E="vaul-dragging";function T(e){let t=r.default.useRef(e);return r.default.useEffect(()=>{t.current=e}),r.default.useMemo(()=>function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return null==t.current?void 0:t.current.call(t,...n)},[])}function M(e){let{prop:t,defaultProp:n,onChange:i=()=>{}}=e,[a,o]=function(e){let{defaultProp:t,onChange:n}=e,i=r.default.useState(t),[a]=i,o=r.default.useRef(a),s=T(n);return r.default.useEffect(()=>{o.current!==a&&(s(a),o.current=a)},[a,o,s]),i}({defaultProp:n,onChange:i}),s=void 0!==t,l=s?t:a,u=T(i);return[l,r.default.useCallback(e=>{if(s){let n="function"==typeof e?e(t):e;n!==t&&u(n)}else o(e)},[s,t,o,u])]}let I=()=>()=>{},N=null;function D(e){var a,l;let{open:h,onOpenChange:f,children:x,onDrag:C,onRelease:T,snapPoints:I,shouldScaleBackground:D=!1,setBackgroundColorOnScale:P=!0,closeThreshold:R=.25,scrollLockTimeout:O=100,dismissible:j=!0,handleOnly:F=!1,fadeFromIndex:L=I&&I.length-1,activeSnapPoint:z,setActiveSnapPoint:B,fixed:U,modal:H=!0,onClose:W,nested:V,noBodyStyles:q=!1,direction:G="bottom",defaultOpen:$=!1,disablePreventScroll:K=!0,snapToSequentialPoint:Y=!1,preventScrollRestoration:X=!1,repositionInputs:Z=!0,onAnimationEnd:J,container:Q,autoFocus:ee=!1}=e,[et=!1,en]=M({defaultProp:$,prop:h,onChange:e=>{null==f||f(e),e||V||eP(),setTimeout(()=>{null==J||J(e)},1e3*A.DURATION),e&&!H&&"undefined"!=typeof window&&window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"}),e||(document.body.style.pointerEvents="auto")}}),[er,ei]=r.default.useState(!1),[ea,eo]=r.default.useState(!1),[es,el]=r.default.useState(!1),eu=r.default.useRef(null),ec=r.default.useRef(null),ed=r.default.useRef(null),eh=r.default.useRef(null),ep=r.default.useRef(null),ef=r.default.useRef(!1),em=r.default.useRef(null),eg=r.default.useRef(0),ev=r.default.useRef(!1),ey=r.default.useRef(!$),eb=r.default.useRef(0),ex=r.default.useRef(null),ew=r.default.useRef((null==(a=ex.current)?void 0:a.getBoundingClientRect().height)||0),ek=r.default.useRef((null==(l=ex.current)?void 0:l.getBoundingClientRect().width)||0),eS=r.default.useRef(0),e_=r.default.useCallback(e=>{I&&e===eM.length-1&&(ec.current=new Date)},[]),{activeSnapPoint:eC,activeSnapPointIndex:eA,setActiveSnapPoint:eE,onRelease:eT,snapPointsOffset:eM,onDrag:eI,shouldFade:eN,getPercentageDragged:eD}=function(e){let{activeSnapPointProp:t,setActiveSnapPointProp:n,snapPoints:i,drawerRef:a,overlayRef:o,fadeFromIndex:s,onSnapPointChange:l,direction:u="bottom",container:c,snapToSequentialPoint:d}=e,[h,p]=M({prop:t,defaultProp:null==i?void 0:i[0],onChange:n}),[f,m]=r.default.useState("undefined"!=typeof window?{innerWidth:window.innerWidth,innerHeight:window.innerHeight}:void 0);r.default.useEffect(()=>{function e(){m({innerWidth:window.innerWidth,innerHeight:window.innerHeight})}return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let g=r.default.useMemo(()=>h===(null==i?void 0:i[i.length-1])||null,[i,h]),y=r.default.useMemo(()=>{var e;return null!=(e=null==i?void 0:i.findIndex(e=>e===h))?e:null},[i,h]),b=i&&i.length>0&&(s||0===s)&&!Number.isNaN(s)&&i[s]===h||!i,x=r.default.useMemo(()=>{var e;let t=c?{width:c.getBoundingClientRect().width,height:c.getBoundingClientRect().height}:"undefined"!=typeof window?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0};return null!=(e=null==i?void 0:i.map(e=>{let n="string"==typeof e,r=0;if(n&&(r=parseInt(e,10)),S(u)){let i=n?r:f?e*t.height:0;return f?"bottom"===u?t.height-i:-t.height+i:i}let i=n?r:f?e*t.width:0;return f?"right"===u?t.width-i:-t.width+i:i}))?e:[]},[i,f,c]),w=r.default.useMemo(()=>null!==y?null==x?void 0:x[y]:null,[x,y]),_=r.default.useCallback(e=>{var t;let n=null!=(t=null==x?void 0:x.findIndex(t=>t===e))?t:null;l(n),k(a.current,{transition:"transform ".concat(A.DURATION,"s cubic-bezier(").concat(A.EASE.join(","),")"),transform:S(u)?"translate3d(0, ".concat(e,"px, 0)"):"translate3d(".concat(e,"px, 0, 0)")}),x&&n!==x.length-1&&void 0!==s&&n!==s&&n<s?k(o.current,{transition:"opacity ".concat(A.DURATION,"s cubic-bezier(").concat(A.EASE.join(","),")"),opacity:"0"}):k(o.current,{transition:"opacity ".concat(A.DURATION,"s cubic-bezier(").concat(A.EASE.join(","),")"),opacity:"1"}),p(null==i?void 0:i[Math.max(n,0)])},[a.current,i,x,s,o,p]);return r.default.useEffect(()=>{if(h||t){var e;let n=null!=(e=null==i?void 0:i.findIndex(e=>e===t||e===h))?e:-1;x&&-1!==n&&"number"==typeof x[n]&&_(x[n])}},[h,t,i,x,_]),{isLastSnapPoint:g,activeSnapPoint:h,shouldFade:b,getPercentageDragged:function(e,t){if(!i||"number"!=typeof y||!x||void 0===s)return null;let n=y===s-1;if(y>=s&&t)return 0;if(n&&!t)return 1;if(!b&&!n)return null;let r=n?y+1:y-1,a=e/Math.abs(n?x[r]-x[r-1]:x[r+1]-x[r]);return n?1-a:a},setActiveSnapPoint:p,activeSnapPointIndex:y,onRelease:function(e){let{draggedDistance:t,closeDrawer:n,velocity:r,dismissible:a}=e;if(void 0===s)return;let l="bottom"===u||"right"===u?(null!=w?w:0)-t:(null!=w?w:0)+t,c=y===s-1,h=0===y,p=t>0;if(c&&k(o.current,{transition:"opacity ".concat(A.DURATION,"s cubic-bezier(").concat(A.EASE.join(","),")")}),!d&&r>2&&!p)return void(a?n():_(x[0]));if(!d&&r>2&&p&&x&&i)return void _(x[i.length-1]);let f=null==x?void 0:x.reduce((e,t)=>"number"!=typeof e||"number"!=typeof t?e:Math.abs(t-l)<Math.abs(e-l)?t:e),m=S(u)?window.innerHeight:window.innerWidth;if(r>.4&&Math.abs(t)<.4*m){let e=p?1:-1;return e>0&&g&&i?void _(x[i.length-1]):void(h&&e<0&&a&&n(),null===y||_(x[y+e]))}_(f)},onDrag:function(e){let{draggedDistance:t}=e;if(null===w)return;let n="bottom"===u||"right"===u?w-t:w+t;("bottom"!==u&&"right"!==u||!(n<x[x.length-1]))&&(("top"===u||"left"===u)&&n>x[x.length-1]||k(a.current,{transform:S(u)?"translate3d(0, ".concat(n,"px, 0)"):"translate3d(".concat(n,"px, 0, 0)")}))},snapPointsOffset:x}}({snapPoints:I,activeSnapPointProp:z,setActiveSnapPointProp:B,drawerRef:ex,fadeFromIndex:L,overlayRef:eu,onSnapPointChange:e_,direction:G,container:Q,snapToSequentialPoint:Y});!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{isDisabled:n}=e;u(()=>{if(!n){var e,r,i;let n,a,o,l,u,h,f;return 1==++m&&s()&&(o=0,l=window.pageXOffset,u=window.pageYOffset,h=c((e=document.documentElement,r="paddingRight",i="".concat(window.innerWidth-document.documentElement.clientWidth,"px"),n=e.style[r],e.style[r]=i,()=>{e.style[r]=n})),window.scrollTo(0,0),f=c(g(document,"touchstart",e=>{((a=p(e.target))!==document.documentElement||a!==document.body)&&(o=e.changedTouches[0].pageY)},{passive:!1,capture:!0}),g(document,"touchmove",e=>{if(!a||a===document.documentElement||a===document.body)return void e.preventDefault();let t=e.changedTouches[0].pageY,n=a.scrollTop,r=a.scrollHeight-a.clientHeight;0!==r&&((n<=0&&t>o||n>=r&&t<o)&&e.preventDefault(),o=t)},{passive:!1,capture:!0}),g(document,"touchend",e=>{let t=e.target;b(t)&&t!==document.activeElement&&(e.preventDefault(),t.style.transform="translateY(-2000px)",t.focus(),requestAnimationFrame(()=>{t.style.transform=""}))},{passive:!1,capture:!0}),g(document,"focus",e=>{let t=e.target;b(t)&&(t.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{t.style.transform="",d&&(d.height<window.innerHeight?requestAnimationFrame(()=>{y(t)}):d.addEventListener("resize",()=>y(t),{once:!0}))}))},!0),g(window,"scroll",()=>{window.scrollTo(0,0)})),t=()=>{h(),f(),window.scrollTo(l,u)}),()=>{0==--m&&(null==t||t())}}},[n])}({isDisabled:!et||ea||!H||es||!er||!Z||!K});let{restorePositionSetting:eP}=function(e){let{isOpen:t,modal:n,nested:i,hasBeenOpened:a,preventScrollRestoration:s,noBodyStyles:l}=e,[u,c]=r.default.useState(()=>"undefined"!=typeof window?window.location.href:""),d=r.default.useRef(0),h=r.default.useCallback(()=>{if(o()&&null===N&&t&&!l){N={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left,height:document.body.style.height,right:"unset"};let{scrollX:e,innerHeight:t}=window;document.body.style.setProperty("position","fixed","important"),Object.assign(document.body.style,{top:"".concat(-d.current,"px"),left:"".concat(-e,"px"),right:"0px",height:"auto"}),window.setTimeout(()=>window.requestAnimationFrame(()=>{let e=t-window.innerHeight;e&&d.current>=t&&(document.body.style.top="".concat(-(d.current+e),"px"))}),300)}},[t]),p=r.default.useCallback(()=>{if(o()&&null!==N&&!l){let e=-parseInt(document.body.style.top,10),t=-parseInt(document.body.style.left,10);Object.assign(document.body.style,N),window.requestAnimationFrame(()=>{if(s&&u!==window.location.href)return void c(window.location.href);window.scrollTo(t,e)}),N=null}},[u]);return r.default.useEffect(()=>{function e(){d.current=window.scrollY}return e(),window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}},[]),r.default.useEffect(()=>{if(n)return()=>{"undefined"!=typeof document&&(document.querySelector("[data-vaul-drawer]")||p())}},[n,p]),r.default.useEffect(()=>{!i&&a&&(t?(window.matchMedia("(display-mode: standalone)").matches||h(),n||window.setTimeout(()=>{p()},500)):p())},[t,a,u,n,i,h,p]),{restorePositionSetting:p}}({isOpen:et,modal:H,nested:null!=V&&V,hasBeenOpened:er,preventScrollRestoration:X,noBodyStyles:q});function eR(){return(window.innerWidth-26)/window.innerWidth}function eO(e,t){var n;let r=e,i=null==(n=window.getSelection())?void 0:n.toString(),a=ex.current?_(ex.current,G):null,o=new Date;if("SELECT"===r.tagName||r.hasAttribute("data-vaul-no-drag")||r.closest("[data-vaul-no-drag]"))return!1;if("right"===G||"left"===G)return!0;if(ec.current&&o.getTime()-ec.current.getTime()<500)return!1;if(null!==a&&("bottom"===G?a>0:a<0))return!0;if(i&&i.length>0)return!1;if(ep.current&&o.getTime()-ep.current.getTime()<O&&0===a||t)return ep.current=o,!1;for(;r;){if(r.scrollHeight>r.clientHeight){if(0!==r.scrollTop)return ep.current=new Date,!1;if("dialog"===r.getAttribute("role"))break}r=r.parentNode}return!0}function ej(e){ea&&ex.current&&(ex.current.classList.remove(E),ef.current=!1,eo(!1),eh.current=new Date),null==W||W(),e||en(!1),setTimeout(()=>{I&&eE(I[0])},1e3*A.DURATION)}function eF(){if(!ex.current)return;let e=document.querySelector("[data-vaul-drawer-wrapper]"),t=_(ex.current,G);k(ex.current,{transform:"translate3d(0, 0, 0)",transition:"transform ".concat(A.DURATION,"s cubic-bezier(").concat(A.EASE.join(","),")")}),k(eu.current,{transition:"opacity ".concat(A.DURATION,"s cubic-bezier(").concat(A.EASE.join(","),")"),opacity:"1"}),D&&t&&t>0&&et&&k(e,{borderRadius:"".concat(8,"px"),overflow:"hidden",...S(G)?{transform:"scale(".concat(eR(),") translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)"),transformOrigin:"top"}:{transform:"scale(".concat(eR(),") translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)"),transformOrigin:"left"},transitionProperty:"transform, border-radius",transitionDuration:"".concat(A.DURATION,"s"),transitionTimingFunction:"cubic-bezier(".concat(A.EASE.join(","),")")},!0)}return r.default.useEffect(()=>{window.requestAnimationFrame(()=>{ey.current=!0})},[]),r.default.useEffect(()=>{var e;function t(){if(ex.current&&Z&&(b(document.activeElement)||ev.current)){var e;let t=(null==(e=window.visualViewport)?void 0:e.height)||0,n=window.innerHeight,r=n-t,i=ex.current.getBoundingClientRect().height||0;eS.current||(eS.current=i);let a=ex.current.getBoundingClientRect().top;if(Math.abs(eb.current-r)>60&&(ev.current=!ev.current),I&&I.length>0&&eM&&eA&&(r+=eM[eA]||0),eb.current=r,i>t||ev.current){let e=ex.current.getBoundingClientRect().height,o=e;e>t&&(o=t-(i>.8*n?a:26)),U?ex.current.style.height="".concat(e-Math.max(r,0),"px"):ex.current.style.height="".concat(Math.max(o,t-a),"px")}else!function(){let e=navigator.userAgent;return"undefined"!=typeof window&&(/Firefox/.test(e)&&/Mobile/.test(e)||/FxiOS/.test(e))}()&&(ex.current.style.height="".concat(eS.current,"px"));I&&I.length>0&&!ev.current?ex.current.style.bottom="0px":ex.current.style.bottom="".concat(Math.max(r,0),"px")}}return null==(e=window.visualViewport)||e.addEventListener("resize",t),()=>{var e;return null==(e=window.visualViewport)?void 0:e.removeEventListener("resize",t)}},[eA,I,eM]),r.default.useEffect(()=>(et&&(k(document.documentElement,{scrollBehavior:"auto"}),ec.current=new Date),()=>{!function(e,t){if(!e||!(e instanceof HTMLElement))return;let n=w.get(e);n&&(e.style[t]=n[t])}(document.documentElement,"scrollBehavior")}),[et]),r.default.useEffect(()=>{H||window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"})},[H]),r.default.createElement(n.Root,{defaultOpen:$,onOpenChange:e=>{(j||e)&&(e?ei(!0):ej(!0),en(e))},open:et},r.default.createElement(i.Provider,{value:{activeSnapPoint:eC,snapPoints:I,setActiveSnapPoint:eE,drawerRef:ex,overlayRef:eu,onOpenChange:f,onPress:function(e){var t,n;(j||I)&&(!ex.current||ex.current.contains(e.target))&&(ew.current=(null==(t=ex.current)?void 0:t.getBoundingClientRect().height)||0,ek.current=(null==(n=ex.current)?void 0:n.getBoundingClientRect().width)||0,eo(!0),ed.current=new Date,s()&&window.addEventListener("touchend",()=>ef.current=!1,{once:!0}),e.target.setPointerCapture(e.pointerId),eg.current=S(G)?e.pageY:e.pageX)},onRelease:function(e){var t,n;if(!ea||!ex.current)return;ex.current.classList.remove(E),ef.current=!1,eo(!1),eh.current=new Date;let r=_(ex.current,G);if(!e||!eO(e.target,!1)||!r||Number.isNaN(r)||null===ed.current)return;let i=eh.current.getTime()-ed.current.getTime(),a=eg.current-(S(G)?e.pageY:e.pageX),o=Math.abs(a)/i;if(o>.05&&(el(!0),setTimeout(()=>{el(!1)},200)),I){eT({draggedDistance:a*("bottom"===G||"right"===G?1:-1),closeDrawer:ej,velocity:o,dismissible:j}),null==T||T(e,!0);return}if("bottom"===G||"right"===G?a>0:a<0){eF(),null==T||T(e,!0);return}if(o>.4){ej(),null==T||T(e,!1);return}let s=Math.min(null!=(t=ex.current.getBoundingClientRect().height)?t:0,window.innerHeight),l=Math.min(null!=(n=ex.current.getBoundingClientRect().width)?n:0,window.innerWidth);if(Math.abs(r)>=("left"===G||"right"===G?l:s)*R){ej(),null==T||T(e,!1);return}null==T||T(e,!0),eF()},onDrag:function(e){if(ex.current&&ea){let t="bottom"===G||"right"===G?1:-1,n=(eg.current-(S(G)?e.pageY:e.pageX))*t,r=n>0,i=I&&!j&&!r;if(i&&0===eA)return;let a=Math.abs(n),o=document.querySelector("[data-vaul-drawer-wrapper]"),s=a/("bottom"===G||"top"===G?ew.current:ek.current),l=eD(a,r);if(null!==l&&(s=l),i&&s>=1||!ef.current&&!eO(e.target,r))return;if(ex.current.classList.add(E),ef.current=!0,k(ex.current,{transition:"none"}),k(eu.current,{transition:"none"}),I&&eI({draggedDistance:n}),r&&!I){let e=Math.min(-(8*(Math.log(n+1)-2)*1),0)*t;k(ex.current,{transform:S(G)?"translate3d(0, ".concat(e,"px, 0)"):"translate3d(".concat(e,"px, 0, 0)")});return}let u=1-s;if((eN||L&&eA===L-1)&&(null==C||C(e,s),k(eu.current,{opacity:"".concat(u),transition:"none"},!0)),o&&eu.current&&D){let e=Math.min(eR()+s*(1-eR()),1),t=8-8*s,n=Math.max(0,14-14*s);k(o,{borderRadius:"".concat(t,"px"),transform:S(G)?"scale(".concat(e,") translate3d(0, ").concat(n,"px, 0)"):"scale(".concat(e,") translate3d(").concat(n,"px, 0, 0)"),transition:"none"},!0)}if(!I){let e=a*t;k(ex.current,{transform:S(G)?"translate3d(0, ".concat(e,"px, 0)"):"translate3d(".concat(e,"px, 0, 0)")})}}},dismissible:j,shouldAnimate:ey,handleOnly:F,isOpen:et,isDragging:ea,shouldFade:eN,closeDrawer:ej,onNestedDrag:function(e,t){if(t<0)return;let n=(window.innerWidth-16)/window.innerWidth,r=n+t*(1-n),i=-16+16*t;k(ex.current,{transform:S(G)?"scale(".concat(r,") translate3d(0, ").concat(i,"px, 0)"):"scale(".concat(r,") translate3d(").concat(i,"px, 0, 0)"),transition:"none"})},onNestedOpenChange:function(e){let t=e?(window.innerWidth-16)/window.innerWidth:1,n=e?-16:0;em.current&&window.clearTimeout(em.current),k(ex.current,{transition:"transform ".concat(A.DURATION,"s cubic-bezier(").concat(A.EASE.join(","),")"),transform:S(G)?"scale(".concat(t,") translate3d(0, ").concat(n,"px, 0)"):"scale(".concat(t,") translate3d(").concat(n,"px, 0, 0)")}),!e&&ex.current&&(em.current=setTimeout(()=>{let e=_(ex.current,G);k(ex.current,{transition:"none",transform:S(G)?"translate3d(0, ".concat(e,"px, 0)"):"translate3d(".concat(e,"px, 0, 0)")})},500))},onNestedRelease:function(e,t){let n=S(G)?window.innerHeight:window.innerWidth,r=t?(n-16)/n:1,i=t?-16:0;t&&k(ex.current,{transition:"transform ".concat(A.DURATION,"s cubic-bezier(").concat(A.EASE.join(","),")"),transform:S(G)?"scale(".concat(r,") translate3d(0, ").concat(i,"px, 0)"):"scale(".concat(r,") translate3d(").concat(i,"px, 0, 0)")})},keyboardIsOpen:ev,modal:H,snapPointsOffset:eM,activeSnapPointIndex:eA,direction:G,shouldScaleBackground:D,setBackgroundColorOnScale:P,noBodyStyles:q,container:Q,autoFocus:ee}},x))}let P=r.default.forwardRef(function(e,t){let{...i}=e,{overlayRef:o,snapPoints:s,onRelease:l,shouldFade:u,isOpen:c,modal:d,shouldAnimate:h}=a(),p=x(t,o),f=s&&s.length>0;if(!d)return null;let m=r.default.useCallback(e=>l(e),[l]);return r.default.createElement(n.Overlay,{onMouseUp:m,ref:p,"data-vaul-overlay":"","data-vaul-snap-points":c&&f?"true":"false","data-vaul-snap-points-overlay":c&&u?"true":"false","data-vaul-animate":(null==h?void 0:h.current)?"true":"false",...i})});P.displayName="Drawer.Overlay";let R=r.default.forwardRef(function(e,t){let{onPointerDownOutside:i,style:o,onOpenAutoFocus:s,...l}=e,{drawerRef:u,onPress:c,onRelease:d,onDrag:h,keyboardIsOpen:p,snapPointsOffset:f,activeSnapPointIndex:m,modal:g,isOpen:y,direction:b,snapPoints:w,container:k,handleOnly:_,shouldAnimate:E,autoFocus:T}=a(),[M,N]=r.default.useState(!1),D=x(t,u),P=r.default.useRef(null),R=r.default.useRef(null),O=r.default.useRef(!1),j=w&&w.length>0,{direction:F,isOpen:L,shouldScaleBackground:z,setBackgroundColorOnScale:B,noBodyStyles:U}=a(),H=r.default.useRef(null),W=(0,r.useMemo)(()=>document.body.style.backgroundColor,[]);function V(){return(window.innerWidth-26)/window.innerWidth}r.default.useEffect(()=>{if(L&&z){H.current&&clearTimeout(H.current);let e=document.querySelector("[data-vaul-drawer-wrapper]")||document.querySelector("[vaul-drawer-wrapper]");if(!e)return;!function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n]}(B&&!U?C(document.body,{background:"black"}):I,C(e,{transformOrigin:S(F)?"top":"left",transitionProperty:"transform, border-radius",transitionDuration:"".concat(A.DURATION,"s"),transitionTimingFunction:"cubic-bezier(".concat(A.EASE.join(","),")")}));let t=C(e,{borderRadius:"".concat(8,"px"),overflow:"hidden",...S(F)?{transform:"scale(".concat(V(),") translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)")}:{transform:"scale(".concat(V(),") translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)")}});return()=>{t(),H.current=window.setTimeout(()=>{W?document.body.style.background=W:document.body.style.removeProperty("background")},1e3*A.DURATION)}}},[L,z,W]);let q=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(O.current)return!0;let r=Math.abs(e.y),i=Math.abs(e.x),a=i>r,o=["bottom","right"].includes(t)?1:-1;if("left"===t||"right"===t){if(!(e.x*o<0)&&i>=0&&i<=n)return a}else if(!(e.y*o<0)&&r>=0&&r<=n)return!a;return O.current=!0,!0};function G(e){P.current=null,O.current=!1,d(e)}return r.default.useEffect(()=>{j&&window.requestAnimationFrame(()=>{N(!0)})},[]),r.default.createElement(n.Content,{"data-vaul-drawer-direction":b,"data-vaul-drawer":"","data-vaul-delayed-snap-points":M?"true":"false","data-vaul-snap-points":y&&j?"true":"false","data-vaul-custom-container":k?"true":"false","data-vaul-animate":(null==E?void 0:E.current)?"true":"false",...l,ref:D,style:f&&f.length>0?{"--snap-point-height":"".concat(f[null!=m?m:0],"px"),...o}:o,onPointerDown:e=>{_||(null==l.onPointerDown||l.onPointerDown.call(l,e),P.current={x:e.pageX,y:e.pageY},c(e))},onOpenAutoFocus:e=>{null==s||s(e),T||e.preventDefault()},onPointerDownOutside:e=>{if(null==i||i(e),!g||e.defaultPrevented)return void e.preventDefault();p.current&&(p.current=!1)},onFocusOutside:e=>{if(!g)return void e.preventDefault()},onPointerMove:e=>{if(R.current=e,_||(null==l.onPointerMove||l.onPointerMove.call(l,e),!P.current))return;let t=e.pageY-P.current.y,n=e.pageX-P.current.x,r="touch"===e.pointerType?10:2;q({x:n,y:t},b,r)?h(e):(Math.abs(n)>r||Math.abs(t)>r)&&(P.current=null)},onPointerUp:e=>{null==l.onPointerUp||l.onPointerUp.call(l,e),P.current=null,O.current=!1,d(e)},onPointerOut:e=>{null==l.onPointerOut||l.onPointerOut.call(l,e),G(R.current)},onContextMenu:e=>{null==l.onContextMenu||l.onContextMenu.call(l,e),R.current&&G(R.current)}})});R.displayName="Drawer.Content";let O=r.default.forwardRef(function(e,t){let{preventCycle:n=!1,children:i,...o}=e,{closeDrawer:s,isDragging:l,snapPoints:u,activeSnapPoint:c,setActiveSnapPoint:d,dismissible:h,handleOnly:p,isOpen:f,onPress:m,onDrag:g}=a(),y=r.default.useRef(null),b=r.default.useRef(!1);function x(){y.current&&window.clearTimeout(y.current),b.current=!1}return r.default.createElement("div",{onClick:function(){if(b.current)return void x();window.setTimeout(()=>{!function(){if(l||n||b.current)return x();if(x(),!u||0===u.length){h||s();return}if(c===u[u.length-1]&&h)return s();let e=u.findIndex(e=>e===c);-1!==e&&d(u[e+1])}()},120)},onPointerCancel:x,onPointerDown:e=>{p&&m(e),y.current=window.setTimeout(()=>{b.current=!0},250)},onPointerMove:e=>{p&&g(e)},ref:t,"data-vaul-drawer-visible":f?"true":"false","data-vaul-handle":"","aria-hidden":"true",...o},r.default.createElement("span",{"data-vaul-handle-hitarea":"","aria-hidden":"true"},i))});O.displayName="Drawer.Handle";let j={Root:D,NestedRoot:function(e){let{onDrag:t,onOpenChange:n,open:i,...o}=e,{onNestedDrag:s,onNestedOpenChange:l,onNestedRelease:u}=a();if(!s)throw Error("Drawer.NestedRoot must be placed in another drawer");return r.default.createElement(D,{nested:!0,open:i,onClose:()=>{l(!1)},onDrag:(e,n)=>{s(e,n),null==t||t(e,n)},onOpenChange:e=>{e&&l(e),null==n||n(e)},onRelease:u,...o})},Content:R,Overlay:P,Trigger:n.Trigger,Portal:function(e){let t=a(),{container:i=t.container,...o}=e;return r.default.createElement(n.Portal,{container:i,...o})},Handle:O,Close:n.Close,Title:n.Title,Description:n.Description}},542024:e=>{"use strict";e.s({Drawer:()=>a,DrawerContent:()=>u,DrawerHeader:()=>c,DrawerTitle:()=>d,DrawerTrigger:()=>o});var t=e.i(290479),n=e.i(289702),r=e.i(373150),i=e.i(737908);let a=e=>{let{shouldScaleBackground:n=!0,...r}=e;return(0,t.jsx)(i.Drawer.Root,{shouldScaleBackground:n,...r})};a.displayName="Drawer";let o=i.Drawer.Trigger,s=i.Drawer.Portal;i.Drawer.Close;let l=r.forwardRef((e,r)=>{let{className:a,...o}=e;return(0,t.jsx)(i.Drawer.Overlay,{ref:r,className:(0,n.cn)("fixed inset-0 z-50 bg-black/80",a),...o})});l.displayName=i.Drawer.Overlay.displayName;let u=r.forwardRef((e,r)=>{let{className:a,children:o,...u}=e;return(0,t.jsxs)(s,{children:[(0,t.jsx)(l,{}),(0,t.jsxs)(i.Drawer.Content,{ref:r,className:(0,n.cn)("fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background-primary",a),...u,children:[(0,t.jsx)("div",{className:"mx-auto mt-7 h-4 w-[100px] rounded-full bg-control-primary"}),o]})]})});u.displayName="DrawerContent";let c=e=>{let{className:r,...i}=e;return(0,t.jsx)("div",{className:(0,n.cn)("grid gap-3 p-7 text-center sm:text-left",r),...i})};c.displayName="DrawerHeader";let d=r.forwardRef((e,r)=>{let{className:a,...o}=e;return(0,t.jsx)(i.Drawer.Title,{ref:r,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight",a),...o})});d.displayName=i.Drawer.Title.displayName,r.forwardRef((e,r)=>{let{className:a,...o}=e;return(0,t.jsx)(i.Drawer.Description,{ref:r,className:(0,n.cn)("text-sm text-text-secondary",a),...o})}).displayName=i.Drawer.Description.displayName},506781:e=>{"use strict";e.s({ReusableDrawer:()=>r});var t=e.i(290479),n=e.i(542024);let r=e=>{let{children:r,title:i,className:a,trigger:o}=e;return(0,t.jsxs)(n.Drawer,{children:[(0,t.jsx)(n.DrawerTrigger,{asChild:!0,children:o}),(0,t.jsxs)(n.DrawerContent,{className:a,children:[(0,t.jsx)(n.DrawerHeader,{children:(0,t.jsx)(n.DrawerTitle,{children:i})}),r]})]})}},845787:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("audio-lines",[["path",{d:"M2 10v3",key:"1fnikh"}],["path",{d:"M6 6v11",key:"11sgs0"}],["path",{d:"M10 3v18",key:"yhl04a"}],["path",{d:"M14 8v7",key:"3a1oy3"}],["path",{d:"M18 5v13",key:"123xd1"}],["path",{d:"M22 10v3",key:"154ddg"}]])},911168:e=>{"use strict";e.s({AudioLines:()=>t.default});var t=e.i(845787)},812224:e=>{"use strict";e.s({AudioPlaceholder:()=>s});var t=e.i(290479),n=e.i(289702),r=e.i(911168),i=e.i(972899),a=e.i(935989);let o=e=>{let{count:r}=e;return(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("div",{className:"w-16 flex-shrink-0 ",children:(0,t.jsx)(a.Skeleton,{className:"h-6 w-10"})}),(0,t.jsx)("div",{className:"flex flex-wrap gap-4",children:Array.from({length:r}).map((e,r)=>(0,t.jsx)(a.Skeleton,{className:(0,n.cn)("h-6 w-10",r%2==1&&"w-15",r%4==0&&"w-16")},"skeleton-".concat(r)))})]})},s=e=>{let{hideCopy:n}=e;return(0,t.jsxs)("div",{className:"relative flex flex-col items-center min-h-48 justify-center gap-6",children:[(0,t.jsxs)("div",{className:"absolute overflow-hidden w-full h-full flex flex-col gap-7 top-0 ",children:[(0,t.jsx)("div",{className:"absolute bottom-0 w-full h-full bg-gradient-to-t from-background from-20% to-transparent"}),(0,t.jsx)(o,{count:14}),(0,t.jsx)(o,{count:16}),(0,t.jsx)(o,{count:20})]}),(0,t.jsxs)("div",{className:"flex flex-col items-center gap-4 z-20",children:[(0,t.jsx)(i.Icon,{as:r.AudioLines,size:"xl"}),!n&&(0,t.jsxs)("div",{className:"flex flex-col items-center ",children:[(0,t.jsx)("p",{className:"text-lg font-medium",children:"Start recording"}),(0,t.jsx)("p",{className:"text-text-secondary max-w-xs text-balance text-center",children:"Your transcript will show here as you record."})]})]})]})}},460187:e=>{"use strict";e.s({useStickToBottom:()=>l});var t,n,r,i=e.i(373150);let a={damping:.7,stiffness:.05,mass:1.25},o=1e3/60,s=!1;null==(t=globalThis.document)||t.addEventListener("mousedown",()=>{s=!0}),null==(n=globalThis.document)||n.addEventListener("mouseup",()=>{s=!1}),null==(r=globalThis.document)||r.addEventListener("click",()=>{s=!1});let l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[t,n]=(0,i.useState)(!1),[r,a]=(0,i.useState)(!1!==e.initial),[l,c]=(0,i.useState)(!1),h=(0,i.useRef)(null);h.current=e;let p=(0,i.useCallback)(()=>{var e;if(!s)return!1;let t=window.getSelection();if(!t||!t.rangeCount)return!1;let n=t.getRangeAt(0);return n.commonAncestorContainer.contains(k.current)||(null==(e=k.current)?void 0:e.contains(n.commonAncestorContainer))},[]),f=(0,i.useCallback)(e=>{g.isAtBottom=e,a(e)},[]),m=(0,i.useCallback)(e=>{g.escapedFromLock=e,n(e)},[]),g=(0,i.useMemo)(()=>{let n;return{escapedFromLock:t,isAtBottom:r,resizeDifference:0,accumulated:0,velocity:0,listeners:new Set,get scrollTop(){var i,a;return null!=(a=null==(i=k.current)?void 0:i.scrollTop)?a:0},set scrollTop(scrollTop){k.current&&(k.current.scrollTop=scrollTop,g.ignoreScrollToTop=k.current.scrollTop)},get targetScrollTop(){if(!k.current||!S.current)return 0;return k.current.scrollHeight-1-k.current.clientHeight},get calculatedTargetScrollTop(){if(!k.current||!S.current)return 0;let{targetScrollTop:t}=this;if(!e.targetScrollTop)return t;if((null==n?void 0:n.targetScrollTop)===t)return n.calculatedScrollTop;let r=Math.max(Math.min(e.targetScrollTop(t,{scrollElement:k.current,contentElement:S.current}),t),0);return n={targetScrollTop:t,calculatedScrollTop:r},requestAnimationFrame(()=>{n=void 0}),r},get scrollDifference(){return this.calculatedTargetScrollTop-this.scrollTop},get isNearBottom(){return this.scrollDifference<=70}}},[]),y=(0,i.useCallback)(function(){var e,t;let n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"string"==typeof r&&(r={animation:r}),r.preserveScrollPosition||f(!0);let i=Date.now()+(Number(r.wait)||0),a=d(h.current,r.animation),{ignoreEscapes:s=!1}=r,l=g.calculatedTargetScrollTop;r.duration instanceof Promise?r.duration.finally(()=>{n=Date.now()}):n=i+(null!=(t=r.duration)?t:0);let u=async()=>{let e=new Promise(requestAnimationFrame).then(()=>{var t,r;if(!g.isAtBottom)return g.animation=void 0,!1;let{scrollTop:c}=g,f=performance.now(),m=(f-(null!=(t=g.lastTick)?t:f))/o;if(g.animation||(g.animation={behavior:a,promise:e,ignoreEscapes:s}),g.animation.behavior===a&&(g.lastTick=f),p()||i>Date.now())return u();if(c<Math.min(l,g.calculatedTargetScrollTop)){if((null==(r=g.animation)?void 0:r.behavior)===a){if("instant"===a)return g.scrollTop=g.calculatedTargetScrollTop,u();g.velocity=(a.damping*g.velocity+a.stiffness*g.scrollDifference)/a.mass,g.accumulated+=g.velocity*m,g.scrollTop+=g.accumulated,g.scrollTop!==c&&(g.accumulated=0)}return u()}return n>Date.now()?(l=g.calculatedTargetScrollTop,u()):(g.animation=void 0,g.scrollTop<g.calculatedTargetScrollTop)?y({animation:d(h.current,h.current.resize),ignoreEscapes:s,duration:Math.max(0,n-Date.now())||void 0}):g.isAtBottom});return e.then(e=>(requestAnimationFrame(()=>{g.animation||(g.lastTick=void 0,g.velocity=0)}),e))};return(!0!==r.wait&&(g.animation=void 0),(null==(e=g.animation)?void 0:e.behavior)===a)?g.animation.promise:u()},[f,p,g]),b=(0,i.useCallback)(()=>{m(!0),f(!1)},[m,f]),x=(0,i.useCallback)(e=>{let{target:t}=e;if(t!==k.current)return;let{scrollTop:n,ignoreScrollToTop:r}=g,{lastScrollTop:i=n}=g;g.lastScrollTop=n,g.ignoreScrollToTop=void 0,r&&r>n&&(i=r),c(g.isNearBottom),setTimeout(()=>{var e;if(g.resizeDifference||n===r)return;if(p()){m(!0),f(!1);return}let t=n>i,a=n<i;if(null==(e=g.animation)?void 0:e.ignoreEscapes){g.scrollTop=i;return}a&&(m(!0),f(!1)),t&&m(!1),!g.escapedFromLock&&g.isNearBottom&&f(!0)},1)},[m,f,p,g]),w=(0,i.useCallback)(e=>{var t;let{target:n,deltaY:r}=e,i=n;for(;!["scroll","auto"].includes(getComputedStyle(i).overflow);){if(!i.parentElement)return;i=i.parentElement}i===k.current&&r<0&&k.current.scrollHeight>k.current.clientHeight&&!(null==(t=g.animation)?void 0:t.ignoreEscapes)&&(m(!0),f(!1))},[m,f,g]),k=u(e=>{var t,n;null==(t=k.current)||t.removeEventListener("scroll",x),null==(n=k.current)||n.removeEventListener("wheel",w),null==e||e.addEventListener("scroll",x,{passive:!0}),null==e||e.addEventListener("wheel",w,{passive:!0})},[]),S=u(e=>{var t,n;let r;null==(t=g.resizeObserver)||t.disconnect(),e&&(g.resizeObserver=new ResizeObserver(e=>{let[t]=e,{height:n}=t.contentRect,i=n-(null!=r?r:n);if(g.resizeDifference=i,g.scrollTop>g.targetScrollTop&&(g.scrollTop=g.targetScrollTop),c(g.isNearBottom),i>=0){let e=d(h.current,r?h.current.resize:h.current.initial);y({animation:e,wait:!0,preserveScrollPosition:!0,duration:"instant"===e?void 0:350})}else g.isNearBottom&&(m(!1),f(!0));r=n,requestAnimationFrame(()=>{setTimeout(()=>{g.resizeDifference===i&&(g.resizeDifference=0)},1)})}),null==(n=g.resizeObserver)||n.observe(e))},[]);return{contentRef:S,scrollRef:k,scrollToBottom:y,stopScroll:b,isAtBottom:r||l,isNearBottom:l,escapedFromLock:t,state:g}};function u(e,t){let n=(0,i.useCallback)(t=>(n.current=t,e(t)),t);return n}let c=new Map;function d(){for(var e,t,n,r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];let s={...a},l=!1;for(let r of i){if("instant"===r){l=!0;continue}"object"==typeof r&&(l=!1,s.damping=null!=(e=r.damping)?e:s.damping,s.stiffness=null!=(t=r.stiffness)?t:s.stiffness,s.mass=null!=(n=r.mass)?n:s.mass)}let u=JSON.stringify(s);return c.has(u)||c.set(u,Object.freeze(s)),l?"instant":c.get(u)}},107035:e=>{"use strict";e.s({Transcript:()=>a});var t=e.i(290479),n=e.i(373150),r=e.i(460187),i=e.i(289702);let a=e=>{let{segments:a,onSegmentClick:o,className:s,currentTime:l,disableInitialScroll:u}=e,c=(0,n.useRef)(l),[d,h]=(0,n.useState)(null),{scrollRef:p,contentRef:f}=(0,r.useStickToBottom)({resize:"smooth",...u?{initial:!1}:{}}),m=(0,n.useRef)(!1);(0,n.useEffect)(()=>{void 0!==l&&void 0!==c.current&&Math.abs(l-c.current)>10&&(m.current=!1),c.current=l},[l]);let g=null==a?void 0:a.findLast(e=>e.start<=(null!=l?l:0));return(0,n.useEffect)(()=>{if(!m.current&&g&&f.current){let e=null==a?void 0:a.indexOf(g),t=f.current.children[e];t&&(h(e),t.scrollIntoView({behavior:"smooth",block:"center"}))}},[null==g?void 0:g.start]),(0,t.jsx)("div",{ref:p,onWheel:()=>{let e=p.current;e&&e.scrollHeight-e.scrollTop<=e.clientHeight+10?m.current=!1:m.current=!0},className:(0,i.cn)("bg-background-primary overflow-auto p-6 pb-8 h-full min-h-0",s),children:(0,t.jsx)("div",{ref:f,className:"flex h-full flex-col gap-6",children:null==a?void 0:a.map((e,n)=>(0,t.jsxs)("div",{onClick:()=>null==o?void 0:o(e.start),className:(0,i.cn)("flex gap-9 hover:bg-border p-3 rounded-4 cursor-pointer",d===n&&"bg-border"),children:[(0,t.jsx)("div",{className:"text-text-secondary text-xs font-semibold py-2 min-w-13",children:(e=>{let t=Math.floor(e/3600),n=Math.floor(e%3600/60),r=Math.floor(e%60),i=e=>e.toString().padStart(2,"0");return t>0?"".concat(i(t),":").concat(i(n),":").concat(i(r)):"".concat(i(n),":").concat(i(r))})(e.start)}),(0,t.jsxs)("span",{className:"font-medium text-sm",children:[e.text," "]})]},n))})})}},977647:e=>{"use strict";e.s({formatSegments:()=>t}),e.i(555168);let t=e=>{let t=e.reduce((e,t,n)=>0===t.start?n:e,-1);return(t>=0?e.slice(t):e).reduce((e,t)=>{if(0===e.length)return[t];let n=e[e.length-1],r=t.start-n.end,i=t.end-n.start;return r<=3&&i<=15?e[e.length-1]={...n,text:"".concat(n.text," ").concat(t.text),end:t.end}:e.push(t),e},[])}},791020:e=>{"use strict";e.s({useAudioPlayer:()=>s});var t=e.i(647968),n=e.i(608294);let r=(0,t.atom)(1),i=(0,t.atom)(0),a=(0,t.atom)(0),o=(0,t.atom)(null),s=()=>{let[e,t]=(0,n.useAtom)(r),[s,l]=(0,n.useAtom)(i),[u,c]=(0,n.useAtom)(a),[d,h]=(0,n.useAtom)(o);return{playbackSpeed:e,currentTime:s,duration:u,controls:d,setControls:h,setPlaybackSpeed:t,setCurrentTime:l,setDuration:c}}},483929:e=>{"use strict";e.s({AudioTranscript:()=>d});var t=e.i(290479),n=e.i(107035),r=e.i(814733),i=e.i(977647),a=e.i(373150),o=e.i(966882),s=e.i(791020),l=e.i(812224);e.i(411082);var u=e.i(402495),c=e.i(284112);let d=e=>{let{chatbotId:d}=e,h=(0,a.useRef)(!1),{segments:p}=(0,u.useDeepgram)(),f=(0,a.useMemo)(()=>(0,i.formatSegments)(p),[p]),m=(0,a.useMemo)(()=>0===p.length?0:Math.max(...p.map(e=>e.end)),[p]),{microphoneState:g}=(0,c.useMicrophone)(),y=g===c.MicrophoneState.Open,b=r.api.useUtils(),{mutate:x}=r.api.audio.saveTranscript.useMutation({onSuccess:()=>{b.chatbot.transcript.setData(d,{segments:p})}}),{controls:w,currentTime:k}=(0,s.useAudioPlayer)(),S=(0,o.useThrottledCallback)(()=>{x({chatbotId:d,segments:p})},5e3);return((0,a.useEffect)(()=>{if(0!==p.length){if(!h.current){h.current=!0;return}S()}},[p.length]),y||0!==p.length)?(0,t.jsx)(n.Transcript,{disableInitialScroll:!0,currentTime:y?m:k,segments:f,onSegmentClick:e=>{null==w||w.seek(e)},className:"h-full border-t"}):(0,t.jsx)("div",{className:"border-t p-6",children:(0,t.jsx)(l.AudioPlaceholder,{})})}},115155:e=>{"use strict";e.s({default:()=>o});var t=e.i(373150);e.i(411082);var n=e.i(383074),r=e.i(678275),i=e.i(402495),a=e.i(284112);let o=()=>{let[e,o]=(0,t.useState)("Powered by Deepgram"),{connection:s,connectionState:l,addSegments:u,addAudioBlob:c}=(0,i.useDeepgram)(),{microphone:d,microphoneState:h,startMicrophone:p}=(0,a.useMicrophone)(),f=(0,t.useRef)(void 0),m=(0,t.useRef)(void 0);return(0,t.useEffect)(()=>{if(!d||!s)return;let e=e=>{e.data.size>0&&(null==s||s.send(e.data),c(e.data))},t=e=>{var t,n,r;let{is_final:i,speech_final:a,start:s,duration:l}=e,c=e.channel.alternatives[0].transcript,d=null==(r=e.channel)||null==(n=r.alternatives[0])||null==(t=n.words[0])?void 0:t.speaker;""!==c&&(o(c),u([{text:c,start:s,end:s+l,seek:0,speaker:d}])),i&&a&&(clearTimeout(f.current),f.current=setTimeout(()=>{o(void 0),clearTimeout(f.current)},3e3))};return l===r.SOCKET_STATES.open&&(s.addListener(n.LiveTranscriptionEvents.Transcript,t),d.addEventListener(a.MicrophoneEvents.DataAvailable,e),p()),()=>{s.removeListener(n.LiveTranscriptionEvents.Transcript,t),d.removeEventListener(a.MicrophoneEvents.DataAvailable,e),clearTimeout(f.current)}},[l]),(0,t.useEffect)(()=>{if(s)return h!==a.MicrophoneState.Open&&l===r.SOCKET_STATES.open?(s.keepAlive(),m.current=setInterval(()=>{s.keepAlive()},1e4)):clearInterval(m.current),()=>{clearInterval(m.current)}},[h,l]),null}},522566:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("pause",[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]])},657568:e=>{"use strict";e.s({Pause:()=>t.default});var t=e.i(522566)},414641:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]])},151776:e=>{"use strict";e.s({Play:()=>t.default});var t=e.i(414641)},574016:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]])},619279:e=>{"use strict";e.s({RotateCcw:()=>t.default});var t=e.i(574016)},365619:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("rotate-cw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]])},221996:e=>{"use strict";e.s({RotateCw:()=>t.default});var t=e.i(365619)},492274:e=>{"use strict";e.s({EllipsisIcon:()=>t.default});var t=e.i(89872)},331104:e=>{"use strict";e.s({default:()=>c});var t=e.i(290479),n=e.i(977647),r=e.i(343741),i=e.i(492274),a=e.i(373150),o=e.i(525094),s=e.i(704255),l=e.i(448068),u=e.i(972899);let c=e=>{let{segments:c}=e,[d,h]=(0,a.useState)(!1),p=(0,n.formatSegments)(c);return p&&0!==p.length?(0,t.jsxs)(l.DropdownMenu,{open:d,onOpenChange:e=>{h(e)},children:[(0,t.jsx)(l.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(s.Button,{size:"icon",variant:"ghost",children:(0,t.jsx)(u.Icon,{as:i.EllipsisIcon})})}),(0,t.jsx)(l.DropdownMenuContent,{align:"end",className:"w-[180px]",children:(0,t.jsxs)(l.DropdownMenuItem,{onSelect:()=>{let e=p.map(e=>"".concat((e=>{let t=Math.floor(e/3600),n=Math.floor(e%3600/60),r=Math.floor(e%60),i=e=>e.toString().padStart(2,"0");return t>0?"".concat(i(t),":").concat(i(n),":").concat(i(r)):"".concat(i(n),":").concat(i(r))})(e.start),"\n\n").concat(e.text,"\n")).join("\n");navigator.clipboard.writeText(e),(0,o.toast)("Copied transcript to clipboard")},children:[(0,t.jsx)(r.ClipboardIcon,{className:"text-text-secondary",height:15,width:15,strokeWidth:2.5}),"Copy transcript"]})})]}):null}},847349:e=>{"use strict";e.s({AudioPlaybackSpeed:()=>i});var t=e.i(290479),n=e.i(365918),r=e.i(791020);let i=e=>{let{disabled:i}=e,{setPlaybackSpeed:a,playbackSpeed:o}=(0,r.useAudioPlayer)();return(0,t.jsxs)(n.Select,{value:o.toString(),onValueChange:e=>a(Number(e)),disabled:i,children:[(0,t.jsx)(n.SelectTrigger,{className:"w-15",children:(0,t.jsx)(n.SelectValue,{placeholder:"Speed"})}),(0,t.jsxs)(n.SelectContent,{children:[(0,t.jsx)(n.SelectItem,{value:"0.5",children:"0.5x"}),(0,t.jsx)(n.SelectItem,{value:"1",children:"1x"}),(0,t.jsx)(n.SelectItem,{value:"1.5",children:"1.5x"}),(0,t.jsx)(n.SelectItem,{value:"2",children:"2x"})]})]})}},855791:e=>{"use strict";e.s({Range:()=>W,Root:()=>U,Thumb:()=>V,Track:()=>H});var t=e.i(373150),n=e.i(244299),r=e.i(777787),i=e.i(28537),a=e.i(215836),o=e.i(698644),s=e.i(553955),l=e.i(344916),u=e.i(730287),c=e.i(421349),d=e.i(922029),h=e.i(290479),p=["PageUp","PageDown"],f=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],m={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},g="Slider",[y,b,x]=(0,d.createCollection)(g),[w,k]=(0,a.createContextScope)(g,[x]),[S,_]=w(g),C=t.forwardRef((e,i)=>{let{name:a,min:s=0,max:l=100,step:u=1,orientation:c="horizontal",disabled:d=!1,minStepsBetweenThumbs:m=0,defaultValue:g=[s],value:b,onValueChange:x=()=>{},onValueCommit:w=()=>{},inverted:k=!1,form:_,...C}=e,A=t.useRef(new Set),E=t.useRef(0),I="horizontal"===c,[N=[],D]=(0,o.useControllableState)({prop:b,defaultProp:g,onChange:e=>{var t;null==(t=[...A.current][E.current])||t.focus(),x(e)}}),P=t.useRef(N);function R(e,t){let{commit:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{commit:!1},i=(String(u).split(".")[1]||"").length,a=function(e,t){let n=Math.pow(10,t);return Math.round(e*n)/n}(Math.round((e-s)/u)*u+s,i),o=(0,n.clamp)(a,[s,l]);D(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=[...e];return r[n]=t,r.sort((e,t)=>e-t)}(e,o,t);if(!function(e,t){if(t>0)return Math.min(...e.slice(0,-1).map((t,n)=>e[n+1]-t))>=t;return!0}(n,m*u))return e;{E.current=n.indexOf(o);let t=String(n)!==String(e);return t&&r&&w(n),t?n:e}})}return(0,h.jsx)(S,{scope:e.__scopeSlider,name:a,disabled:d,min:s,max:l,valueIndexToChangeRef:E,thumbs:A.current,values:N,orientation:c,form:_,children:(0,h.jsx)(y.Provider,{scope:e.__scopeSlider,children:(0,h.jsx)(y.Slot,{scope:e.__scopeSlider,children:(0,h.jsx)(I?T:M,{"aria-disabled":d,"data-disabled":d?"":void 0,...C,ref:i,onPointerDown:(0,r.composeEventHandlers)(C.onPointerDown,()=>{d||(P.current=N)}),min:s,max:l,inverted:k,onSlideStart:d?void 0:function(e){let t=function(e,t){if(1===e.length)return 0;let n=e.map(e=>Math.abs(e-t)),r=Math.min(...n);return n.indexOf(r)}(N,e);R(e,t)},onSlideMove:d?void 0:function(e){R(e,E.current)},onSlideEnd:d?void 0:function(){let e=P.current[E.current];N[E.current]!==e&&w(N)},onHomeKeyDown:()=>!d&&R(s,0,{commit:!0}),onEndKeyDown:()=>!d&&R(l,N.length-1,{commit:!0}),onStepKeyDown:e=>{let{event:t,direction:n}=e;if(!d){let e=p.includes(t.key)||t.shiftKey&&f.includes(t.key),r=E.current;R(N[r]+u*(e?10:1)*n,r,{commit:!0})}}})})})})});C.displayName=g;var[A,E]=w(g,{startEdge:"left",endEdge:"right",size:"width",direction:1}),T=t.forwardRef((e,n)=>{let{min:r,max:a,dir:o,inverted:l,onSlideStart:u,onSlideMove:c,onSlideEnd:d,onStepKeyDown:p,...f}=e,[g,y]=t.useState(null),b=(0,i.useComposedRefs)(n,e=>y(e)),x=t.useRef(void 0),w=(0,s.useDirection)(o),k="ltr"===w,S=k&&!l||!k&&l;function _(e){let t=x.current||g.getBoundingClientRect(),n=B([0,t.width],S?[r,a]:[a,r]);return x.current=t,n(e-t.left)}return(0,h.jsx)(A,{scope:e.__scopeSlider,startEdge:S?"left":"right",endEdge:S?"right":"left",direction:S?1:-1,size:"width",children:(0,h.jsx)(I,{dir:w,"data-orientation":"horizontal",...f,ref:b,style:{...f.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:e=>{let t=_(e.clientX);null==u||u(t)},onSlideMove:e=>{let t=_(e.clientX);null==c||c(t)},onSlideEnd:()=>{x.current=void 0,null==d||d()},onStepKeyDown:e=>{let t=m[S?"from-left":"from-right"].includes(e.key);null==p||p({event:e,direction:t?-1:1})}})})}),M=t.forwardRef((e,n)=>{let{min:r,max:a,inverted:o,onSlideStart:s,onSlideMove:l,onSlideEnd:u,onStepKeyDown:c,...d}=e,p=t.useRef(null),f=(0,i.useComposedRefs)(n,p),g=t.useRef(void 0),y=!o;function b(e){let t=g.current||p.current.getBoundingClientRect(),n=B([0,t.height],y?[a,r]:[r,a]);return g.current=t,n(e-t.top)}return(0,h.jsx)(A,{scope:e.__scopeSlider,startEdge:y?"bottom":"top",endEdge:y?"top":"bottom",size:"height",direction:y?1:-1,children:(0,h.jsx)(I,{"data-orientation":"vertical",...d,ref:f,style:{...d.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:e=>{let t=b(e.clientY);null==s||s(t)},onSlideMove:e=>{let t=b(e.clientY);null==l||l(t)},onSlideEnd:()=>{g.current=void 0,null==u||u()},onStepKeyDown:e=>{let t=m[y?"from-bottom":"from-top"].includes(e.key);null==c||c({event:e,direction:t?-1:1})}})})}),I=t.forwardRef((e,t)=>{let{__scopeSlider:n,onSlideStart:i,onSlideMove:a,onSlideEnd:o,onHomeKeyDown:s,onEndKeyDown:l,onStepKeyDown:u,...d}=e,m=_(g,n);return(0,h.jsx)(c.Primitive.span,{...d,ref:t,onKeyDown:(0,r.composeEventHandlers)(e.onKeyDown,e=>{"Home"===e.key?(s(e),e.preventDefault()):"End"===e.key?(l(e),e.preventDefault()):p.concat(f).includes(e.key)&&(u(e),e.preventDefault())}),onPointerDown:(0,r.composeEventHandlers)(e.onPointerDown,e=>{let t=e.target;t.setPointerCapture(e.pointerId),e.preventDefault(),m.thumbs.has(t)?t.focus():i(e)}),onPointerMove:(0,r.composeEventHandlers)(e.onPointerMove,e=>{e.target.hasPointerCapture(e.pointerId)&&a(e)}),onPointerUp:(0,r.composeEventHandlers)(e.onPointerUp,e=>{let t=e.target;t.hasPointerCapture(e.pointerId)&&(t.releasePointerCapture(e.pointerId),o(e))})})}),N="SliderTrack",D=t.forwardRef((e,t)=>{let{__scopeSlider:n,...r}=e,i=_(N,n);return(0,h.jsx)(c.Primitive.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...r,ref:t})});D.displayName=N;var P="SliderRange",R=t.forwardRef((e,n)=>{let{__scopeSlider:r,...a}=e,o=_(P,r),s=E(P,r),l=t.useRef(null),u=(0,i.useComposedRefs)(n,l),d=o.values.length,p=o.values.map(e=>z(e,o.min,o.max)),f=d>1?Math.min(...p):0,m=100-Math.max(...p);return(0,h.jsx)(c.Primitive.span,{"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,...a,ref:u,style:{...e.style,[s.startEdge]:f+"%",[s.endEdge]:m+"%"}})});R.displayName=P;var O="SliderThumb",j=t.forwardRef((e,n)=>{let r=b(e.__scopeSlider),[a,o]=t.useState(null),s=(0,i.useComposedRefs)(n,e=>o(e)),l=t.useMemo(()=>a?r().findIndex(e=>e.ref.current===a):-1,[r,a]);return(0,h.jsx)(F,{...e,ref:s,index:l})}),F=t.forwardRef((e,n)=>{let{__scopeSlider:a,index:o,name:s,...l}=e,d=_(O,a),p=E(O,a),[f,m]=t.useState(null),g=(0,i.useComposedRefs)(n,e=>m(e)),b=!f||d.form||!!f.closest("form"),x=(0,u.useSize)(f),w=d.values[o],k=void 0===w?0:z(w,d.min,d.max),S=function(e,t){return t>2?"Value ".concat(e+1," of ").concat(t):2===t?["Minimum","Maximum"][e]:void 0}(o,d.values.length),C=null==x?void 0:x[p.size],A=C?function(e,t,n){let r=e/2,i=B([0,50],[0,r]);return(r-i(t)*n)*n}(C,k,p.direction):0;return t.useEffect(()=>{if(f)return d.thumbs.add(f),()=>{d.thumbs.delete(f)}},[f,d.thumbs]),(0,h.jsxs)("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[p.startEdge]:"calc(".concat(k,"% + ").concat(A,"px)")},children:[(0,h.jsx)(y.ItemSlot,{scope:e.__scopeSlider,children:(0,h.jsx)(c.Primitive.span,{role:"slider","aria-label":e["aria-label"]||S,"aria-valuemin":d.min,"aria-valuenow":w,"aria-valuemax":d.max,"aria-orientation":d.orientation,"data-orientation":d.orientation,"data-disabled":d.disabled?"":void 0,tabIndex:d.disabled?void 0:0,...l,ref:g,style:void 0===w?{display:"none"}:e.style,onFocus:(0,r.composeEventHandlers)(e.onFocus,()=>{d.valueIndexToChangeRef.current=o})})}),b&&(0,h.jsx)(L,{name:null!=s?s:d.name?d.name+(d.values.length>1?"[]":""):void 0,form:d.form,value:w},o)]})});j.displayName=O;var L=t.forwardRef((e,n)=>{let{__scopeSlider:r,value:a,...o}=e,s=t.useRef(null),u=(0,i.useComposedRefs)(s,n),d=(0,l.usePrevious)(a);return t.useEffect(()=>{let e=s.current;if(!e)return;let t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set;if(d!==a&&t){let n=new Event("input",{bubbles:!0});t.call(e,a),e.dispatchEvent(n)}},[d,a]),(0,h.jsx)(c.Primitive.input,{style:{display:"none"},...o,ref:u,defaultValue:a})});function z(e,t,r){return(0,n.clamp)(100/(r-t)*(e-t),[0,100])}function B(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];let r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}L.displayName="RadioBubbleInput";var U=C,H=D,W=R,V=j},240427:e=>{"use strict";e.s({AudioSlider:()=>i});var t=e.i(290479),n=e.i(289702),r=e.i(855791);let i=e.i(373150).forwardRef((e,i)=>{let{className:a,...o}=e;return(0,t.jsxs)(r.Root,{ref:i,className:(0,n.cn)("relative flex w-full touch-none select-none items-center",a),...o,children:[(0,t.jsx)(r.Track,{className:"relative h-3 w-full grow overflow-hidden rounded-full bg-control-primary",children:(0,t.jsx)(r.Range,{className:"absolute h-full bg-[#B5B5B5]"})}),(0,t.jsx)(r.Thumb,{className:"block h-7 w-2 cursor-ew-resize rounded-full  bg-text-tertiary shadow transition-colors focus-visible:outline-none  disabled:pointer-events-none disabled:opacity-50"})]})});i.displayName=r.Root.displayName},379623:e=>{"use strict";e.s({useAudioPlayback:()=>r});var t=e.i(373150),n=e.i(791020);let r=e=>{var r;let[i,a]=(0,t.useState)(0),o=(0,t.useRef)(void 0),s=(0,t.useRef)(void 0),{playbackSpeed:l,duration:u,controls:c,setControls:d,setCurrentTime:h,setPlaybackSpeed:p,setDuration:f}=(0,n.useAudioPlayer)();return(0,t.useEffect)(()=>{e&&(async()=>{try{let t;if("single"===e.type?t=e.audio:"multiple"===e.type&&e.chunks.length>0&&(t=new Blob(e.chunks,{type:"audio/webm"})),!t)return void console.error("No valid audio data available");if(s.current=t,o.current){let e=o.current.src;e.startsWith("blob:")&&URL.revokeObjectURL(e);let n=URL.createObjectURL(t);o.current.src=n}}catch(e){console.error("Error in createUnifiedAudio:",e)}})().catch(e=>{console.error("Error creating unified audio:",e)})},[e]),(0,t.useEffect)(()=>{if(!o.current){if(o.current=new Audio,s.current){let e=URL.createObjectURL(s.current);o.current.src=e}o.current.playbackRate=l,o.current.addEventListener("loadedmetadata",()=>{o.current&&f(o.current.duration)}),o.current.addEventListener("ended",()=>{d(e=>e&&{...e,isPlaying:!1}),a(0),h(0)}),o.current.addEventListener("timeupdate",()=>{o.current&&(a(o.current.currentTime),h(o.current.currentTime))})}return d(()=>({play:async()=>{if(o.current)try{o.current.readyState<2&&await new Promise((e,t)=>{var n,r;let i=()=>{var t;null==(t=o.current)||t.removeEventListener("canplay",i),e(!0)},a=e=>{var n;null==(n=o.current)||n.removeEventListener("error",a),t(e)};null==(n=o.current)||n.addEventListener("canplay",i),null==(r=o.current)||r.addEventListener("error",a)}),await o.current.play()}catch(e){console.error("Play failed:",e)}},pause:()=>{var e;null==(e=o.current)||e.pause()},stop:()=>{o.current&&(o.current.pause(),o.current.currentTime=0,a(0))},seek:e=>{o.current&&e<=o.current.duration&&(a(e),o.current.currentTime=e,(null==c?void 0:c.isPlaying)&&o.current.play())},isPlaying:!1})),()=>{o.current&&(o.current.pause(),o.current=void 0),d(null)}},[]),(0,t.useEffect)(()=>{o.current&&(o.current.addEventListener("play",()=>{d(e=>e?{...e,isPlaying:!0}:null)}),o.current.addEventListener("pause",()=>{d(e=>e?{...e,isPlaying:!1}:null)}))},[]),(0,t.useEffect)(()=>{o.current&&(o.current.playbackRate=l,p(l))},[l]),{currentTime:i,isPlaying:null!=(r=null==c?void 0:c.isPlaying)&&r,duration:u}}},977196:e=>{"use strict";e.s({default:()=>g});var t=e.i(290479),n=e.i(704255),r=e.i(289702),i=e.i(657568),a=e.i(151776),o=e.i(619279),s=e.i(221996),l=e.i(331104),u=e.i(436531),c=e.i(972899),d=e.i(476440),h=e.i(847349),p=e.i(240427),f=e.i(379623),m=e.i(791020);let g=e=>{let{audio:g,disabled:y,isRecording:b,overwriteDuration:x,transcriptSegments:w}=e,{currentTime:k,isPlaying:S,duration:_}=(0,f.useAudioPlayback)(g),{controls:C}=(0,m.useAudioPlayer)(),A=null!=x?x:_,E=e=>{let t=Math.floor(e/60),n=Math.floor(e%60);return"".concat(t,":").concat(n.toString().padStart(2,"0"))};return(0,t.jsxs)("div",{className:"flex flex-col-reverse md:flex-row items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center max-sm:w-[150px] max-sm:justify-between",children:[(0,t.jsx)("div",{className:(0,r.cn)(y&&"opacity-50 cursor-not-allowed"),children:(0,t.jsx)(d.ReusableTooltip,{position:"bottom",content:"Rewind 15s",asChild:!0,children:(0,t.jsx)(n.Button,{size:"xs",variant:"ghost",onClick:()=>{null==C||C.seek(k-15)},disabled:y,children:(0,t.jsx)(c.Icon,{as:o.RotateCcw})})})}),(0,t.jsx)("div",{className:(0,r.cn)(y&&"opacity-50 cursor-not-allowed"),children:(0,t.jsx)(d.ReusableTooltip,{position:"bottom",content:"Disabled during recording",disabled:!y,asChild:!0,children:(0,t.jsx)(n.Button,{size:"xs",variant:"ghost",onClick:()=>{S?null==C||C.pause():null==C||C.play()},disabled:y,children:(0,t.jsx)(c.Icon,{as:S?i.Pause:a.Play})})})}),(0,t.jsx)("div",{className:(0,r.cn)(y&&"opacity-50 cursor-not-allowed"),children:(0,t.jsx)(d.ReusableTooltip,{position:"bottom",content:"Forward 15s",asChild:!0,children:(0,t.jsx)(n.Button,{size:"xs",variant:"ghost",onClick:()=>{null==C||C.seek(k+15)},disabled:y,children:(0,t.jsx)(c.Icon,{as:s.RotateCw})})})})]}),(0,t.jsxs)("div",{className:"flex items-center w-full gap-4",children:[b?(0,t.jsxs)(u.Badge,{className:"text-destructive-solid bg-control-destructive gap-2 flex px-4 hover:bg-control-destructive",children:[(0,t.jsx)("div",{className:"w-4 h-4 rounded-full bg-control-destructive-solid"}),"Rec"]}):(0,t.jsx)("p",{className:(0,r.cn)("text-xs text-text-secondary w-15",y&&"opacity-50"),children:E(k)}),(0,t.jsx)(p.AudioSlider,{value:b?[A]:[k],min:0,max:A,step:.1,onValueChange:e=>null==C?void 0:C.seek(e[0]),disabled:y}),(0,t.jsx)("p",{className:(0,r.cn)("text-xs text-text-secondary",y&&"opacity-50"),children:E(A)}),(0,t.jsx)(h.AudioPlaybackSpeed,{}),w&&!b&&(0,t.jsx)(l.default,{segments:w})]})]})}},743461:e=>{"use strict";e.s({RecordingPlayer:()=>o});var t=e.i(290479),n=e.i(373150),r=e.i(977196);e.i(411082);var i=e.i(402495),a=e.i(284112);let o=()=>{let{microphoneState:e,recordingDuration:o,finalRecordingDuration:s}=(0,a.useMicrophone)(),{audioBlobs:l,segments:u}=(0,i.useDeepgram)(),c=e===a.MicrophoneState.Open,d=(0,n.useMemo)(()=>c?o:null!==s?s:0===u.length?0:Math.max(...u.map(e=>e.end)),[u,c,o,s]),h=(0,n.useMemo)(()=>c?null:{type:"multiple",chunks:l},[c,l]);return(0,t.jsx)(r.default,{audio:h,isRecording:c,overwriteDuration:d,transcriptSegments:u})}},155004:e=>{"use strict";e.s({default:()=>b});var t=e.i(290479),n=e.i(846580),r=e.i(814733),i=e.i(289702),a=e.i(490076),o=e.i(219821),s=e.i(373150),l=e.i(704255),u=e.i(663018),c=e.i(506781),d=e.i(812224),h=e.i(483929);e.i(411082);var p=e.i(402495),f=e.i(115155),m=e.i(284112),g=e.i(743461);let y=(0,o.default)(()=>e.r(535444)(e.i),{loadableGenerated:{modules:[266733]},ssr:!1}),b=e=>{var o;let{chatbotId:b,isIndexed:x}=e,w=(0,n.useIsMobile)(),[k,S]=(0,s.useState)([]),[_,C]=(0,s.useState)(!1),{data:A,isLoading:E}=r.api.chatbot.transcript.useQuery(b),{mutate:T}=r.api.audio.stopRecording.useMutation(),{data:M,isLoading:I}=r.api.audio.getAudioChunks.useQuery(b,{refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1,enabled:x});return((0,s.useEffect)(()=>{if(x||C(!0),I||!(null==M?void 0:M.chunks))return;let{chunks:e}=M;if(C(!1),0===e.length)return void C(!0);Promise.all(e.map(async e=>{let t=await fetch((0,a.getAudioRecordingCdnUrl)(e.url,b));return await t.blob()})).then(e=>{S(t=>[...t,...e]),C(!0)}).catch(e=>{console.error("Error fetching audio chunks:",e),C(!0)})},[b,M,I]),(0,s.useEffect)(()=>{!x&&(null==A?void 0:A.segments.length)&&T({chatbotId:b,segments:null==A?void 0:A.segments})},[x]),E||!_)?(0,t.jsx)("div",{className:"h-full w-full flex justify-center items-center bg-background-primary",children:(0,t.jsx)(u.LoadingSpinner,{color:"gray",variant:void 0})}):(0,t.jsx)("div",{className:"flex flex-col h-full",children:(0,t.jsx)("div",{className:"flex flex-col bg-background-primary h-full",children:(0,t.jsx)(m.MicrophoneContextProvider,{children:(0,t.jsxs)(p.DeepgramContextProvider,{initialSegments:null!=(o=null==A?void 0:A.segments)?o:[],chatbotId:b,intialAudioBlobs:k,children:[(0,t.jsxs)("div",{className:"flex flex-col p-6 gap-6",children:[(0,t.jsxs)("div",{className:(0,i.cn)("flex items-center justify-between",0!==k.length&&"md:hidden"),children:[0===k.length&&!x&&(0,t.jsx)(y,{chatbotId:b}),w&&(0,t.jsx)(c.ReusableDrawer,{title:"Transcript",className:"max-h-[calc(100dvh-100px)]",trigger:(0,t.jsx)(l.Button,{size:"xs",variant:"secondary",className:"w-fit ",children:"Show transcript"}),children:(0,t.jsx)(h.AudioTranscript,{chatbotId:b})})]}),(0,t.jsx)(g.RecordingPlayer,{}),w&&(0,t.jsx)(d.AudioPlaceholder,{})]}),!w&&(0,t.jsx)(h.AudioTranscript,{chatbotId:b}),(0,t.jsx)(f.default,{})]})})})},b)}},38640:e=>{"use strict";e.s({AudioTranscript:()=>s});var t=e.i(290479),n=e.i(107035),r=e.i(814733),i=e.i(812224),a=e.i(663018),o=e.i(791020);let s=e=>{var s;let{chatbotId:l,isIndexed:u}=e,{data:c,isLoading:d}=r.api.chatbot.transcript.useQuery(l,{enabled:u}),{controls:h,currentTime:p}=(0,o.useAudioPlayer)();return(null==c?void 0:c.segments.length)===0||!1===u?(0,t.jsx)("div",{className:"border-t p-6",children:(0,t.jsx)(i.AudioPlaceholder,{hideCopy:!0})}):d?(0,t.jsx)("div",{className:"h-full min-h-[200px] w-full flex justify-center items-center bg-background-primary",children:(0,t.jsx)(a.LoadingSpinner,{color:"gray",variant:void 0})}):(0,t.jsx)(n.Transcript,{disableInitialScroll:!0,currentTime:p,segments:null!=(s=null==c?void 0:c.segments)?s:[],onSegmentClick:e=>{null==h||h.seek(e)},className:"h-full border-t "})}},557250:e=>{"use strict";e.s({default:()=>d});var t=e.i(290479),n=e.i(846580),r=e.i(814733),i=e.i(490076),a=e.i(373150),o=e.i(704255),s=e.i(663018),l=e.i(977196),u=e.i(506781),c=e.i(38640);let d=e=>{var d;let{chatbotId:h,url:p,isIndexed:f}=e,[m,g]=(0,a.useState)(null),[y,b]=(0,a.useState)(!0),x=(0,n.useIsMobile)(),{data:w}=r.api.chatbot.transcript.useQuery(h,{enabled:f});(0,a.useEffect)(()=>{(async()=>{try{let e=(0,i.getAudioCdnUrl)(p),t=await fetch(e);if(!t.ok)throw Error("Failed to fetch audio");let n=await t.blob();g(n)}catch(e){console.error("Error fetching audio chunk:",e)}finally{b(!1)}})()},[h,p]);let k=(0,a.useMemo)(()=>({type:"single",audio:m}),[m]);return y||!k.audio?(0,t.jsx)("div",{className:"h-full w-full flex justify-center items-center bg-background-primary",children:(0,t.jsx)(s.LoadingSpinner,{color:"gray",variant:void 0})}):(0,t.jsxs)("div",{className:"flex flex-col  bg-background-primary  h-full pb-10",children:[(0,t.jsxs)("div",{className:"flex flex-col p-6 gap-6",children:[x&&(0,t.jsx)(u.ReusableDrawer,{title:"Transcript",className:"max-h-[calc(100dvh-100px)]",trigger:(0,t.jsx)(o.Button,{size:"xs",variant:"secondary",className:"w-fit ml-auto",children:"Show transcript"}),children:(0,t.jsx)(c.AudioTranscript,{chatbotId:h,isIndexed:f})}),(0,t.jsx)(l.default,{audio:k,transcriptSegments:null!=(d=null==w?void 0:w.segments)?d:[]})]}),!x&&(0,t.jsx)(c.AudioTranscript,{chatbotId:h,isIndexed:f})]})}},376346:e=>{var{m:t,e:n}=e},510026:e=>{var{m:t,e:n}=e,r=e.i(227541);e.r(376346);var i=e.r(373150),a=function(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}(i),o=void 0!==r.default&&r.default.env&&!0,s=function(e){return"[object String]"===Object.prototype.toString.call(e)},l=function(){function e(e){var t=void 0===e?{}:e,n=t.name,r=void 0===n?"stylesheet":n,i=t.optimizeForSpeed,a=void 0===i?o:i;u(s(r),"`name` must be a string"),this._name=r,this._deletedRulePlaceholder="#"+r+"-deleted-rule____{}",u("boolean"==typeof a,"`optimizeForSpeed` must be a boolean"),this._optimizeForSpeed=a,this._serverSheet=void 0,this._tags=[],this._injected=!1,this._rulesCount=0;var l="undefined"!=typeof window&&document.querySelector('meta[property="csp-nonce"]');this._nonce=l?l.getAttribute("content"):null}var t,n=e.prototype;return n.setOptimizeForSpeed=function(e){u("boolean"==typeof e,"`setOptimizeForSpeed` accepts a boolean"),u(0===this._rulesCount,"optimizeForSpeed cannot be when rules have already been inserted"),this.flush(),this._optimizeForSpeed=e,this.inject()},n.isOptimizeForSpeed=function(){return this._optimizeForSpeed},n.inject=function(){var e=this;if(u(!this._injected,"sheet already injected"),this._injected=!0,"undefined"!=typeof window&&this._optimizeForSpeed){this._tags[0]=this.makeStyleTag(this._name),this._optimizeForSpeed="insertRule"in this.getSheet(),this._optimizeForSpeed||(o||console.warn("StyleSheet: optimizeForSpeed mode not supported falling back to standard mode."),this.flush(),this._injected=!0);return}this._serverSheet={cssRules:[],insertRule:function(t,n){return"number"==typeof n?e._serverSheet.cssRules[n]={cssText:t}:e._serverSheet.cssRules.push({cssText:t}),n},deleteRule:function(t){e._serverSheet.cssRules[t]=null}}},n.getSheetForTag=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]},n.getSheet=function(){return this.getSheetForTag(this._tags[this._tags.length-1])},n.insertRule=function(e,t){if(u(s(e),"`insertRule` accepts only strings"),"undefined"==typeof window)return"number"!=typeof t&&(t=this._serverSheet.cssRules.length),this._serverSheet.insertRule(e,t),this._rulesCount++;if(this._optimizeForSpeed){var n=this.getSheet();"number"!=typeof t&&(t=n.cssRules.length);try{n.insertRule(e,t)}catch(t){return o||console.warn("StyleSheet: illegal rule: \n\n"+e+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),-1}}else{var r=this._tags[t];this._tags.push(this.makeStyleTag(this._name,e,r))}return this._rulesCount++},n.replaceRule=function(e,t){if(this._optimizeForSpeed||"undefined"==typeof window){var n="undefined"!=typeof window?this.getSheet():this._serverSheet;if(t.trim()||(t=this._deletedRulePlaceholder),!n.cssRules[e])return e;n.deleteRule(e);try{n.insertRule(t,e)}catch(r){o||console.warn("StyleSheet: illegal rule: \n\n"+t+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),n.insertRule(this._deletedRulePlaceholder,e)}}else{var r=this._tags[e];u(r,"old rule at index `"+e+"` not found"),r.textContent=t}return e},n.deleteRule=function(e){if("undefined"==typeof window)return void this._serverSheet.deleteRule(e);if(this._optimizeForSpeed)this.replaceRule(e,"");else{var t=this._tags[e];u(t,"rule at index `"+e+"` not found"),t.parentNode.removeChild(t),this._tags[e]=null}},n.flush=function(){this._injected=!1,this._rulesCount=0,"undefined"!=typeof window?(this._tags.forEach(function(e){return e&&e.parentNode.removeChild(e)}),this._tags=[]):this._serverSheet.cssRules=[]},n.cssRules=function(){var e=this;return"undefined"==typeof window?this._serverSheet.cssRules:this._tags.reduce(function(t,n){return n?t=t.concat(Array.prototype.map.call(e.getSheetForTag(n).cssRules,function(t){return t.cssText===e._deletedRulePlaceholder?null:t})):t.push(null),t},[])},n.makeStyleTag=function(e,t,n){t&&u(s(t),"makeStyleTag accepts only strings as second parameter");var r=document.createElement("style");this._nonce&&r.setAttribute("nonce",this._nonce),r.type="text/css",r.setAttribute("data-"+e,""),t&&r.appendChild(document.createTextNode(t));var i=document.head||document.getElementsByTagName("head")[0];return n?i.insertBefore(r,n):i.appendChild(r),r},t=[{key:"length",get:function(){return this._rulesCount}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}();function u(e,t){if(!e)throw Error("StyleSheet: "+t+".")}var c=function(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return t>>>0},d={};function h(e,t){if(!t)return"jsx-"+e;var n=String(t),r=e+n;return d[r]||(d[r]="jsx-"+c(e+"-"+n)),d[r]}function p(e,t){"undefined"==typeof window&&(t=t.replace(/\/style/gi,"\\/style"));var n=e+t;return d[n]||(d[n]=t.replace(/__jsx-style-dynamic-selector/g,e)),d[n]}var f=function(){function e(e){var t=void 0===e?{}:e,n=t.styleSheet,r=void 0===n?null:n,i=t.optimizeForSpeed,a=void 0!==i&&i;this._sheet=r||new l({name:"styled-jsx",optimizeForSpeed:a}),this._sheet.inject(),r&&"boolean"==typeof a&&(this._sheet.setOptimizeForSpeed(a),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._fromServer=void 0,this._indices={},this._instancesCounts={}}var t=e.prototype;return t.add=function(e){var t=this;void 0===this._optimizeForSpeed&&(this._optimizeForSpeed=Array.isArray(e.children),this._sheet.setOptimizeForSpeed(this._optimizeForSpeed),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),"undefined"==typeof window||this._fromServer||(this._fromServer=this.selectFromServer(),this._instancesCounts=Object.keys(this._fromServer).reduce(function(e,t){return e[t]=0,e},{}));var n=this.getIdAndRules(e),r=n.styleId,i=n.rules;if(r in this._instancesCounts){this._instancesCounts[r]+=1;return}var a=i.map(function(e){return t._sheet.insertRule(e)}).filter(function(e){return -1!==e});this._indices[r]=a,this._instancesCounts[r]=1},t.remove=function(e){var t=this,n=this.getIdAndRules(e).styleId;if(function(e,t){if(!e)throw Error("StyleSheetRegistry: "+t+".")}(n in this._instancesCounts,"styleId: `"+n+"` not found"),this._instancesCounts[n]-=1,this._instancesCounts[n]<1){var r=this._fromServer&&this._fromServer[n];r?(r.parentNode.removeChild(r),delete this._fromServer[n]):(this._indices[n].forEach(function(e){return t._sheet.deleteRule(e)}),delete this._indices[n]),delete this._instancesCounts[n]}},t.update=function(e,t){this.add(t),this.remove(e)},t.flush=function(){this._sheet.flush(),this._sheet.inject(),this._fromServer=void 0,this._indices={},this._instancesCounts={}},t.cssRules=function(){var e=this,t=this._fromServer?Object.keys(this._fromServer).map(function(t){return[t,e._fromServer[t]]}):[],n=this._sheet.cssRules();return t.concat(Object.keys(this._indices).map(function(t){return[t,e._indices[t].map(function(e){return n[e].cssText}).join(e._optimizeForSpeed?"":"\n")]}).filter(function(e){return!!e[1]}))},t.styles=function(e){var t,n;return t=this.cssRules(),void 0===(n=e)&&(n={}),t.map(function(e){var t=e[0],r=e[1];return a.default.createElement("style",{id:"__"+t,key:"__"+t,nonce:n.nonce?n.nonce:void 0,dangerouslySetInnerHTML:{__html:r}})})},t.getIdAndRules=function(e){var t=e.children,n=e.dynamic,r=e.id;if(n){var i=h(r,n);return{styleId:i,rules:Array.isArray(t)?t.map(function(e){return p(i,e)}):[p(i,t)]}}return{styleId:h(r),rules:Array.isArray(t)?t:[t]}},t.selectFromServer=function(){return Array.prototype.slice.call(document.querySelectorAll('[id^="__jsx-"]')).reduce(function(e,t){return e[t.id.slice(2)]=t,e},{})},e}(),m=i.createContext(null);function g(){return new f}function y(){return i.useContext(m)}m.displayName="StyleSheetContext";var b=a.default.useInsertionEffect||a.default.useLayoutEffect,x="undefined"!=typeof window?g():void 0;function w(e){var t=x||y();return t&&("undefined"==typeof window?t.add(e):b(function(){return t.add(e),function(){t.remove(e)}},[e.id,String(e.dynamic)])),null}w.dynamic=function(e){return e.map(function(e){return h(e[0],e[1])}).join(" ")},n.StyleRegistry=function(e){var t=e.registry,n=e.children,r=i.useContext(m),o=i.useState(function(){return r||t||g()})[0];return a.default.createElement(m.Provider,{value:o},n)},n.createStyleRegistry=g,n.style=w,n.useStyleRegistry=y},650429:e=>{var{m:t,e:n}=e;t.exports=e.r(510026).style},891285:e=>{"use strict";e.s({V:()=>S,a:()=>a,d:()=>k,o:()=>f,p:()=>_,q:()=>y,w:()=>b,x:()=>x});var t=e.i(373150),n=e.i(47451),r=e.i(829329),i=e.i(784445);function a(){return(0,n.M)(r.Y)}let o=(0,n.B)(r.bd,{domEventsRegex:/^onMedia/});t.forwardRef((e,i)=>{let{children:a,...s}=e;return t.createElement(o,{...s},e=>t.createElement(r.P.button,{...e,ref:(0,n.x)(e.ref,i)},a))}).displayName="AirPlayButton";let s=(0,n.B)(r.bc,{domEventsRegex:/^onMedia/});t.forwardRef((e,i)=>{let{children:a,...o}=e;return t.createElement(s,{...o},e=>t.createElement(r.P.button,{...e,ref:(0,n.x)(e.ref,i)},a))}).displayName="PlayButton";let l=(0,n.B)(r.b7,{domEventsRegex:/^onMedia/});t.forwardRef((e,i)=>{let{children:a,...o}=e;return t.createElement(l,{...o},e=>t.createElement(r.P.button,{...e,ref:(0,n.x)(e.ref,i)},a))}).displayName="CaptionButton";let u=(0,n.B)(r.b8,{domEventsRegex:/^onMedia/});t.forwardRef((e,i)=>{let{children:a,...o}=e;return t.createElement(u,{...o},e=>t.createElement(r.P.button,{...e,ref:(0,n.x)(e.ref,i)},a))}).displayName="FullscreenButton";let c=(0,n.B)(r.ba,{domEventsRegex:/^onMedia/});t.forwardRef((e,i)=>{let{children:a,...o}=e;return t.createElement(c,{...o},e=>t.createElement(r.P.button,{...e,ref:(0,n.x)(e.ref,i)},a))}).displayName="MuteButton";let d=(0,n.B)(r.bb,{domEventsRegex:/^onMedia/});t.forwardRef((e,i)=>{let{children:a,...o}=e;return t.createElement(d,{...o},e=>t.createElement(r.P.button,{...e,ref:(0,n.x)(e.ref,i)},a))}).displayName="PIPButton";let h=(0,n.B)(r.bf,{domEventsRegex:/^onMedia/});t.forwardRef((e,i)=>{let{children:a,...o}=e;return t.createElement(h,{...o},e=>t.createElement(r.P.button,{...e,ref:(0,n.x)(e.ref,i)},a))}).displayName="SeekButton";let p=(0,n.B)(r.b9,{domEventsRegex:/^onMedia/});t.forwardRef((e,i)=>{let{children:a,...o}=e;return t.createElement(p,{...o},e=>t.createElement(r.P.button,{...e,ref:(0,n.x)(e.ref,i)},a))}).displayName="LiveButton";let f=["onDragStart","onDragEnd","onDragValueChange","onValueChange","onPointerValueChange"],m=(0,n.B)(r.bq),g=(0,n.B)(r.bj,{events:f});t.forwardRef((e,n)=>{let{children:i,...a}=e;return t.createElement(g,{...a,ref:n},e=>t.createElement(r.P.div,{...e},i))}).displayName="Slider";let y=t.forwardRef((e,n)=>t.createElement(r.P.div,{...e,ref:n}));y.displayName="SliderThumb";let b=t.forwardRef((e,n)=>t.createElement(r.P.div,{...e,ref:n}));b.displayName="SliderTrack";let x=t.forwardRef((e,n)=>t.createElement(r.P.div,{...e,ref:n}));x.displayName="SliderTrackFill";let w=(0,n.B)(r.bs),k=t.forwardRef((e,i)=>{let{children:a,...o}=e;return t.createElement(w,{...o},e=>t.createElement(r.P.div,{...e,ref:(0,n.x)(e.ref,i)},a))});k.displayName="SliderPreview";let S=t.forwardRef((e,i)=>{let{children:a,...o}=e;return t.createElement(m,{...o},(e,o)=>{let s=(0,n.u)(()=>o.getValueText(),o);return t.createElement(r.P.div,{...e,ref:i},s,a)})});S.displayName="SliderValue";let _=t.forwardRef((e,n)=>{let{children:i,...a}=e,o=(0,r.q)("min"),s=(0,r.q)("max"),l=(0,r.q)("step");return t.createElement(r.P.div,{...a,ref:n},Array.from({length:Math.floor((s-o)/l)+1}).map((e,t)=>i(t)))});_.displayName="SliderSteps";let C=(0,n.B)(r.bl,{events:f,domEventsRegex:/^onMedia/});t.forwardRef((e,n)=>{let{children:i,...a}=e;return t.createElement(C,{...a,ref:n},e=>t.createElement(r.P.div,{...e},i))}).displayName="VolumeSlider";let A=(0,n.B)(r.bD);t.forwardRef((e,i)=>{let{children:a,...o}=e;return t.createElement(A,{...o},e=>t.createElement(r.P.div,{...e,ref:(0,n.x)(e.ref,i)},a))}).displayName="Thumbnail",t.forwardRef((e,i)=>{let{children:a,...o}=e,{src:s,img:l,crossOrigin:u}=(0,n.C)(r.bD.state),c=(0,n.u)(s),d=(0,n.u)(u);return t.createElement(r.P.img,{crossOrigin:d,...o,src:c,ref:(0,n.x)(l.set,i)},a)}).displayName="ThumbnailImg";let E=t.createContext({$chapters:(0,n.s)(null)});E.displayName="TimeSliderContext";let T=(0,n.B)(r.bk,{events:f,domEventsRegex:/^onMedia/});t.forwardRef((e,i)=>{let{children:a,...o}=e,s=t.useMemo(()=>(0,n.s)(null),[]);return t.createElement(E.Provider,{value:{$chapters:s}},t.createElement(T,{...o,ref:i},e=>t.createElement(r.P.div,{...e},a)))}).displayName="TimeSlider";let M=(0,n.B)(r.bt);function I(e){let{instance:i,children:a}=e,o=(0,n.u)(()=>i.cues,i),s=t.useRef([]),l=t.useRef(),{$chapters:u}=t.useContext(E);return l.current||(l.current=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return r.I?{startTime:e,endTime:t,text:i,addEventListener:n.A,removeEventListener:n.A,dispatchEvent:n.A}:new window.VTTCue(e,t,i)}()),t.useEffect(()=>(u.set(i),()=>void u.set(null)),[i]),t.useEffect(()=>{i.setRefs(s.current)},[o]),a(o.length?o:[l.current],e=>{if(!e){s.current.length=0;return}s.current.push(e)})}t.forwardRef((e,i)=>{let{children:a,...o}=e;return t.createElement(M,{...o},(e,o)=>t.createElement(r.P.div,{...e,ref:(0,n.x)(e.ref,i)},t.createElement(I,{instance:o},a)))}).displayName="SliderChapters",I.displayName="SliderChapterTracks",t.forwardRef((e,i)=>{let{children:a,...o}=e,{$chapters:s}=t.useContext(E),[l,u]=t.useState();return t.useEffect(()=>(0,n.e)(()=>{let e=s(),t=(null==e?void 0:e.activePointerCue)||(null==e?void 0:e.activeCue);u((null==t?void 0:t.text)||"")}),[]),t.createElement(r.P.div,{...o,ref:i},l,a)}).displayName="SliderChapterTitle",t.forwardRef((e,n)=>t.createElement(r.P.div,{...e,ref:n})).displayName="SliderProgress";let N=(0,n.B)(r.bp);t.forwardRef((e,i)=>{let{children:a,...o}=e;return t.createElement(N,{...o},e=>t.createElement(r.P.div,{...e,ref:(0,n.x)(e.ref,i)},a))}).displayName="SliderThumbnail";let D=(0,n.B)(r.br,{events:["onCanPlay","onError"]});t.forwardRef((e,r)=>{let{children:i,...a}=e;return t.createElement(D,{...a},(e,a)=>t.createElement(P,{...e,instance:a,ref:(0,n.x)(e.ref,r)},i))}).displayName="SliderVideo";let P=t.forwardRef((e,i)=>{let{instance:a,children:o,...s}=e,{canLoad:l}=(0,n.C)(r.v),{src:u,video:c,crossOrigin:d}=a.$state,h=(0,n.u)(u),p=(0,n.u)(l),f=(0,n.u)(d);return t.createElement(r.P.video,{style:{maxWidth:"unset"},...s,src:h||void 0,muted:!0,playsInline:!0,preload:p?"auto":"none",crossOrigin:f||void 0,ref:(0,n.x)(c.set,i)},o)});P.displayName="SliderVideoProvider";let R=(0,n.B)(r.bz,{events:["onChange"]});t.forwardRef((e,n)=>{let{children:i,...a}=e;return t.createElement(R,{...a,ref:n},e=>t.createElement(r.P.div,{...e},i))}).displayName="RadioGroup";let O=(0,n.B)(r.bA,{events:["onChange","onSelect"]});t.forwardRef((e,i)=>{let{children:a,...o}=e;return t.createElement(O,{...o},e=>t.createElement(r.P.div,{...e,ref:(0,n.x)(e.ref,i)},a))}).displayName="RadioItem";let j="undefined"==typeof document,F=(0,n.B)(r.bu,{events:["onOpen","onClose"],domEventsRegex:/^onMedia/});t.forwardRef((e,n)=>{let{children:i,...a}=e;return t.createElement(F,{...a,ref:n},(e,n)=>t.createElement(r.P.div,{...e,style:{display:n.isSubmenu?void 0:"contents",...e.style}},i))}).displayName="Menu";let L=(0,n.B)(r.bv,{events:["onSelect"]});t.forwardRef((e,i)=>{let{children:a,...o}=e;return t.createElement(L,{...o},e=>t.createElement(r.P.button,{...e,ref:(0,n.x)(e.ref,i)},a))}).displayName="MenuButton",t.forwardRef((e,n)=>{let{disabled:a=!1,children:o,...s}=e,l=(0,r.u)("fullscreen");return j||!("fullscreen"===a?!l:!a)?o:(0,i.createPortal)(t.createElement(r.P.div,{...s,style:{display:"contents",...s.style},ref:n},o),document.body)}).displayName="MenuPortal";let z=(0,n.B)(r.bw);t.forwardRef((e,i)=>{let{children:a,...o}=e;return t.createElement(z,{...o},e=>t.createElement(r.P.div,{...e,ref:(0,n.x)(e.ref,i)},a))}).displayName="MenuItems";let B=(0,n.B)(r.bx);t.forwardRef((e,i)=>{let{children:a,...o}=e;return t.createElement(B,{...o},e=>t.createElement(r.P.div,{...e,ref:(0,n.x)(e.ref,i)},a))}).displayName="MenuItem";let U=(0,n.B)(r.bC,{events:["onWillTrigger","onTrigger"]});t.forwardRef((e,n)=>{let{children:i,...a}=e;return t.createElement(U,{...a,ref:n},e=>t.createElement(r.P.div,{...e},i))}).displayName="Gesture";let H=(0,n.B)(r.bE);t.forwardRef((e,r)=>{let{children:i,...a}=e;return t.createElement(H,{...a},(e,a)=>t.createElement(W,{...e,instance:a,ref:(0,n.x)(e.ref,r)},i))}).displayName="Time";let W=t.forwardRef((e,i)=>{let{instance:a,children:o,...s}=e,{timeText:l}=a.$state,u=(0,n.u)(l);return t.createElement(r.P.div,{...s,ref:i},u,o)});W.displayName="TimeText"},551290:e=>{"use strict";e.s({c:()=>m,u:()=>g});var t=e.i(373150),n=e.i(47451),r=e.i(829329),i=e.i(891285);let a=(0,n.B)(r.b4,{events:["onChange"]});t.forwardRef((e,i)=>{let{style:o,children:s,...l}=e;return t.createElement(a,{...l},e=>t.createElement(r.P.div,{...e,style:{display:"contents",...o},ref:(0,n.x)(e.ref,i)},s))}).displayName="MediaAnnouncer";let o=(0,n.B)(r.b5);t.forwardRef((e,i)=>{let{children:a,...s}=e;return t.createElement(o,{...s},e=>t.createElement(r.P.div,{...e,ref:(0,n.x)(e.ref,i)},a))}).displayName="Controls";let s=(0,n.B)(r.b6);t.forwardRef((e,i)=>{let{children:a,...o}=e;return t.createElement(s,{...o},e=>t.createElement(r.P.div,{...e,ref:(0,n.x)(e.ref,i)},a))}).displayName="ControlsGroup",(0,n.B)(r.bg);let l=(0,n.B)(r.bh);t.forwardRef((e,i)=>{let{children:a,...o}=e;return t.createElement(l,{...o},e=>t.createElement(r.P.button,{...e,ref:(0,n.x)(e.ref,i)},a))}).displayName="TooltipTrigger";let u=(0,n.B)(r.bi);t.forwardRef((e,i)=>{let{children:a,...o}=e;return t.createElement(u,{...o},e=>t.createElement(r.P.div,{...e,ref:(0,n.x)(e.ref,i)},a))}).displayName="TooltipContent";let c=(0,n.B)(r.be,{domEventsRegex:/^onMedia/});t.forwardRef((e,i)=>{let{children:a,...o}=e;return t.createElement(c,{...o},e=>t.createElement(r.P.button,{...e,ref:(0,n.x)(e.ref,i)},a))}).displayName="GoogleCastButton";let d=(0,n.B)(r.bo,{events:i.o,domEventsRegex:/^onMedia/});t.forwardRef((e,n)=>{let{children:i,...a}=e;return t.createElement(d,{...a,ref:n},e=>t.createElement(r.P.div,{...e},i))}).displayName="QualitySlider",i.d,i.p,i.q,i.w,i.x,i.V;let h=(0,n.B)(r.bm,{events:i.o,domEventsRegex:/^onMedia/});t.forwardRef((e,n)=>{let{children:i,...a}=e;return t.createElement(h,{...a,ref:n},e=>t.createElement(r.P.div,{...e},i))}).displayName="AudioGainSlider",i.d,i.p,i.q,i.w,i.x,i.V;let p=(0,n.B)(r.bn,{events:i.o,domEventsRegex:/^onMedia/});t.forwardRef((e,n)=>{let{children:i,...a}=e;return t.createElement(p,{...a,ref:n},e=>t.createElement(r.P.div,{...e},i))}).displayName="SpeedSlider",i.d,i.p,i.q,i.w,i.x,i.V,t.forwardRef((e,n)=>{let{children:i,...a}=e,o=(0,r.u)("title");return t.createElement(r.P.span,{...a,ref:n},o,i)}).displayName="Title",t.forwardRef((e,a)=>{let{defaultText:o="",children:s,...l}=e,u=function(){var e;return(null==(e=function(e){let[r,i]=t.useState([]);return t.useEffect(()=>{if(!e)return void i([]);function t(){i(e.activeCues)}return t(),(0,n.l)(e,"cue-change",t)},[e]),r}(function(e){let n=(0,i.a)(),[a,o]=t.useState(null);return t.useEffect(()=>(0,r.ac)(n.textTracks,e,o),[e]),a}("chapters"))[0])?void 0:e.text)||""}();return t.createElement(r.P.span,{...l,ref:a},u||o,s)}).displayName="ChapterTitle";let f=(0,n.B)(r.bB);function m(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=(0,n.F)();return t.useMemo(()=>(0,n.a)(()=>(0,n.s)(e),i),[i,...r])}function g(e){let r=(0,n.F)();return t.useMemo(()=>(0,n.a)(e,r),[r])}t.forwardRef((e,n)=>{let{children:i,...a}=e;return t.createElement(f,{...a,ref:n},e=>t.createElement(r.P.div,{...e},i))}).displayName="Captions",t.forwardRef((e,n)=>{let{size:r=96,children:i,...a}=e;return t.createElement("svg",{width:r,height:r,fill:"none",viewBox:"0 0 120 120","aria-hidden":"true","data-part":"root",...a,ref:n},i)}),t.forwardRef((e,n)=>{let{width:r=8,children:i,...a}=e;return t.createElement("circle",{cx:"60",cy:"60",r:"54",stroke:"currentColor",strokeWidth:r,"data-part":"track",...a,ref:n},i)}),t.forwardRef((e,n)=>{let{width:r=8,fillPercent:i=50,children:a,...o}=e;return t.createElement("circle",{cx:"60",cy:"60",r:"54",stroke:"currentColor",pathLength:"100",strokeWidth:r,strokeDasharray:100,strokeDashoffset:100-i,"data-part":"track-fill",...o,ref:n},a)})},591424:e=>{"use strict";e.s({I:()=>n});var t=e.i(373150);let n=t.forwardRef((e,n)=>{let{width:r,height:i,size:a=null,paths:o,...s}=e;return t.createElement("svg",{viewBox:"0 0 32 32",...s,width:null!=r?r:a,height:null!=i?i:a,fill:"none","aria-hidden":"true",focusable:"false",xmlns:"http://www.w3.org/2000/svg",ref:n,dangerouslySetInnerHTML:{__html:o}})});n.displayName="VidstackIcon"},393505:e=>{"use strict";e.s({MediaPlayer:()=>s,MediaProvider:()=>u});var t=e.i(47451),n=e.i(829329),r=e.i(373150);e.i(551290);var i=e.i(891285),a=e.i(591424);e.i(784445);let o=(0,t.B)(n.h,{events:["onAbort","onAudioTrackChange","onAudioTracksChange","onAutoPlay","onAutoPlayChange","onAutoPlayFail","onCanLoad","onCanPlay","onCanPlayThrough","onControlsChange","onDestroy","onDurationChange","onEmptied","onEnd","onEnded","onError","onFindMediaPlayer","onFullscreenChange","onFullscreenError","onLiveChange","onLiveEdgeChange","onLoadedData","onLoadedMetadata","onLoadStart","onLoopChange","onOrientationChange","onPause","onPictureInPictureChange","onPictureInPictureError","onPlay","onPlayFail","onPlaying","onPlaysInlineChange","onPosterChange","onProgress","onProviderChange","onProviderLoaderChange","onProviderSetup","onQualitiesChange","onQualityChange","onRateChange","onReplay","onSeeked","onSeeking","onSourceChange","onSourceChange","onStalled","onStarted","onStreamTypeChange","onSuspend","onTextTrackChange","onTextTracksChange","onTimeUpdate","onTitleChange","onVdsLog","onVideoPresentationChange","onVolumeChange","onWaiting"],eventsRegex:/^onHls/,domEventsRegex:/^onMedia/}),s=r.forwardRef((e,t)=>{let{aspectRatio:i,children:a,...s}=e;return r.createElement(o,{...s,src:s.src,ref:t,style:{aspectRatio:i,...s.style}},e=>r.createElement(n.P.div,{...e},a))});s.displayName="MediaPlayer";let l=(0,t.B)(n.t),u=r.forwardRef((e,t)=>{let{loaders:n=[],children:i,mediaProps:a,...o}=e,s=r.useMemo(()=>n.map(e=>new e),n);return r.createElement(l,{...o,loaders:s,ref:t},(e,t)=>r.createElement("div",{...e},r.createElement(c,{...a,provider:t}),i))});function c(o){let{provider:s,...l}=o,{crossOrigin:u,poster:c,remotePlaybackInfo:d,nativeControls:h}=(0,t.C)(n.v),{loader:p}=s.$state,{$provider:f,$providerSetup:m}=(0,i.a)(),g=(0,t.u)(h),y=(0,t.u)(u),b=(0,t.u)(c),x=(0,t.u)(p),w=(0,t.u)(f),k=(0,t.u)(m),S=(0,t.u)(d),_=null==x?void 0:x.mediaType(),C=(null==x?void 0:x.name)==="youtube",A=(null==x?void 0:x.name)==="vimeo",E=(null==x?void 0:x.name)==="remotion",T=(null==x?void 0:x.name)==="google-cast",[M,I]=r.useState("");return(r.useEffect(()=>{T&&!M&&e.r(400042)(e.i).then(e=>{I(e.default)})},[T]),T)?r.createElement("div",{className:"vds-google-cast",ref:e=>{s.load(e)}},r.createElement(a.I,{paths:M}),(null==S?void 0:S.deviceName)?r.createElement("span",{className:"vds-google-cast-info"},"Google Cast on"," ",r.createElement("span",{className:"vds-google-cast-device-name"},S.deviceName)):null):E?r.createElement("div",{"data-remotion-canvas":!0},r.createElement("div",{"data-remotion-container":!0,ref:e=>{s.load(e)}},(0,n.r)(w)&&k?r.createElement(w.render):null)):C||A?r.createElement(r.Fragment,null,r.createElement("iframe",{className:C?"vds-youtube":"vds-vimeo",suppressHydrationWarning:!0,tabIndex:g?void 0:-1,"aria-hidden":"true","data-no-controls":g?void 0:"",ref(e){s.load(e)}}),g?null:r.createElement("div",{className:"vds-blocker"})):_?r.createElement("audio"===_?"audio":"video",{...l,controls:!!g||null,crossOrigin:"boolean"==typeof y?"":y,poster:"video"===_&&g&&b?b:null,preload:"none","aria-hidden":"true",suppressHydrationWarning:!0,ref(e){s.load(e)}}):null}u.displayName="MediaProvider",c.displayName="MediaOutlet";let d=(0,t.B)(n.w);r.forwardRef((e,i)=>{let{children:a,...o}=e;return r.createElement(d,{...o},e=>r.createElement(n.P.button,{...e,ref:(0,t.x)(e.ref,i)},a))}).displayName="ToggleButton";let h=(0,t.B)(n.x);r.forwardRef((e,n)=>{let{children:i,...a}=e;return r.createElement(h,{...a},(e,a)=>r.createElement(p,{...e,instance:a,ref:(0,t.x)(e.ref,n)},i))}).displayName="Poster";let p=r.forwardRef((e,i)=>{let{instance:a,children:o,...s}=e,{src:l,img:u,alt:c,crossOrigin:d,loading:h,hidden:p}=a.$state,f=(0,t.u)(l),m=(0,t.u)(c),g=(0,t.u)(d),y=(0,t.u)(h),b=(0,t.u)(p);return r.createElement(n.P.img,{...s,src:f||"",alt:m||void 0,crossOrigin:g||void 0,ref:(0,t.x)(u.set,i),style:{display:y||b?"none":void 0}},o)});p.displayName="PosterImg",r.forwardRef((e,t)=>{let{children:i,...a}=e;return r.createElement(n.P.div,{translate:"yes","aria-live":"off","aria-atomic":"true",...a,ref:t},i)}).displayName="Caption",r.forwardRef((e,t)=>{let i=(0,n.u)("textTrack"),[a,o]=r.useState();return r.useEffect(()=>{if(i)return i.addEventListener("cue-change",e),()=>{i.removeEventListener("cue-change",e),o(void 0)};function e(){o(null==i?void 0:i.activeCues[0])}},[i]),r.createElement(n.P.span,{...e,"data-part":"cue",dangerouslySetInnerHTML:{__html:(null==a?void 0:a.text)||""},ref:t})}).displayName="CaptionText"},982353:e=>{"use strict";e.s({u:()=>i});var t=e.i(373150),n=e.i(829329),r=e.i(891285);function i(e){let i=(0,r.a)(),a=t.useRef();return a.current||(a.current=new n.M),t.useEffect(()=>{let t=e&&"current"in e?e.current:e,r=t instanceof n.h?t:null==i?void 0:i.player;a.current.setPlayer(null!=r?r:null),a.current.setTarget(null!=t?t:null)},[i,e&&"current"in e?e.current:e]),a.current}e.i(47451)},127905:e=>{"use strict";e.s({useMediaRemote:()=>t.u});var t=e.i(982353)},483437:e=>{"use strict";e.s({default:()=>d,useVideoInstance:()=>c});var t=e.i(290479),n=e.i(650429),r=e.i(490076),i=e.i(393505),a=e.i(127905),o=e.i(647968),s=e.i(608294),l=e.i(373150);let u=(0,o.atom)(null),c=()=>(0,s.useAtomValue)(u),d=e=>{let{url:o}=e,[d,h]=(0,l.useState)(!1),p=(0,s.useSetAtom)(u),f=c(),m=(0,a.useMediaRemote)(f),g=o.includes(".s3.amazonaws.com")?(0,r.getVideoCdnUrl)(o):o;return((0,l.useEffect)(()=>{let e=setTimeout(()=>{h(!0)},100);return()=>clearTimeout(e)},[d]),(0,l.useEffect)(()=>{if(!f)return;let e=e=>{var t,n,r,i,a;if((null==(t=document.activeElement)?void 0:t.role)!=="textbox"&&(null==(n=document.activeElement)?void 0:n.tagName)!=="INPUT"&&(null==(r=document.activeElement)?void 0:r.tagName)!=="TEXTAREA"&&(null==(i=document.activeElement)?void 0:i.classList.contains("tiptap"))!==!0&&(null==(a=document.activeElement)?void 0:a.getAttribute("contenteditable"))!=="true")switch(e.key){case"ArrowLeft":e.preventDefault(),m.seek(f.currentTime-5);break;case"ArrowRight":e.preventDefault(),m.seek(f.currentTime+5);break;case" ":e.preventDefault(),f.paused?m.play():m.pause()}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[f,m]),d)?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.MediaPlayer,{controls:!0,src:o.includes(".s3.amazonaws.com")?{src:g,type:"video/mp4"}:o,ref:e=>p(e),children:(0,t.jsx)(i.MediaProvider,{})}),(0,t.jsx)(n.default,{id:"4fa9bf49234b59a7",children:".jsx-4fa9bf49234b59a7:where(video:not([width]):not([height]),iframe:not([width]):not([height])){width:100%;aspect-ratio:inherit}"})]}):null}},13228:e=>{"use strict";e.s({useMediaState:()=>t.u});var t=e.i(829329)},348170:e=>{"use strict";e.s({default:()=>l});var t=e.i(290479),n=e.i(663018),r=e.i(483437),i=e.i(107035),a=e.i(814733),o=e.i(127905),s=e.i(13228);let l=e=>{let{id:l,isIngested:u}=e,c=(0,r.useVideoInstance)(),d=(0,o.useMediaRemote)(c),{data:h}=a.api.chatbot.transcript.useQuery(l,{enabled:u}),p=null==h?void 0:h.segments,f=(0,s.useMediaState)("currentTime",{current:c});return p?(0,t.jsx)(i.Transcript,{currentTime:f,segments:p,onSegmentClick:e=>{d.seek(e)}}):(0,t.jsx)("div",{className:"bg-background-primary p-7 flex flex-col items-center justify-center flex-1 min-h-0 gap-4",children:(0,t.jsx)(n.LoadingSpinner,{variant:"small",color:"gray"})})}},118494:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("cloud-off",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]])},459801:e=>{"use strict";e.s({CloudOff:()=>t.default});var t=e.i(118494)},101362:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]])},282979:e=>{"use strict";e.s({Upload:()=>t.default});var t=e.i(101362)},711934:e=>{var{m:t,e:n}=e;t.exports=e.r(442732)},544625:e=>{"use strict";e.s({CONVERT_EXTENSIONS:()=>n,IMAGES_EXTENSIONS:()=>r,getFileExtension:()=>i});var t=e.i(711934);let n=["epub","ppt","pptx","doc","docx","png","jpg","jpeg","tiff","bmp","heic","txt","md"],r=["png","jpg","jpeg","tiff","bmp","heic"],i=e=>{var n,r;return null==(r=t.default[null!=e?e:""])||null==(n=r.extensions)?void 0:n[0]}},382680:e=>{"use strict";e.s({useImportLimitCheck:()=>o});var t=e.i(450807),n=e.i(885905),r=e.i(950347),i=e.i(252390),a=e.i(814733);let o=()=>{let{user:e}=(0,n.useAuth)(),{showUpgrade:o}=(0,t.useUpgrade)(),{track:s}=(0,i.default)(),{limits:l}=(0,r.default)(),u=a.api.useUtils();return{checkImportLimit:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{shouldThrow:n=!0,includeUserId:r=!1}=t,i=u.user.limits.getData();if((null==i?void 0:i.legacyImportCount)&&(null==l?void 0:l.legacyImportLimit)&&(null==i?void 0:i.legacyImportCount)>=(null==l?void 0:l.legacyImportLimit)){if(o("importLimit"),r&&(null==e?void 0:e.id)?s("importLimitHit",{userId:e.id}):s("importLimitHit"),s("Paywall Shown",{reason:"Import Limit Hit"}),n)throw Error("Import limit exceeded");return!1}return!0}}}},91086:e=>{"use strict";e.s({useCreateChatbot:()=>o});var t=e.i(373150),n=e.i(885905),r=e.i(852951),i=e.i(814733),a=e.i(684175);let o=e=>{let{addChatbot:o}=(0,r.useWorkspaceActions)(),{user:s}=(0,n.useAuth)(),{currentPath:l}=(0,a.useActiveSidebarLibrary)(),{mutateAsync:u,isPending:c,error:d}=i.api.chatbot.createIngestedChatbot.useMutation({...e,onSuccess:(t,n,r)=>{var i,a;t&&(o({...t,isIndexed:!1,ingestionStatus:null,publicationDate:null,authors:t.authors,updatedAt:new Date,userId:null!=(a=null==s?void 0:s.id)?a:"",summary:null,parentChatbotId:t.id,lastViewedAt:null,publication:null,volume:null,issue:null,pages:null,doi:null,issn:null,isbn:null,docMetadataurl:null,abstract:null,citationCount:0}),null==e||null==(i=e.onSuccess)||i.call(e,t,n,r))}});return{createChatbot:(0,t.useCallback)(e=>{let t,n=e.groupId;return(null==l?void 0:l.type)!=="GROUP"||n||(n=l.id),(null==l?void 0:l.teamId)&&!t&&(t=l.teamId),u({...e,groupId:n,teamId:t})},[l]),isPending:c,error:d}}},724648:e=>{"use strict";e.s({default:()=>p});var t=e.i(544625),n=e.i(950347),r=e.i(382680),i=e.i(294254),a=e.i(252390),o=e.i(814733),s=e.i(238635),l=e.i(647968),u=e.i(608294),c=e.i(397711),d=e.i(91086);let h=(0,l.atom)({}),p=()=>{let{track:e}=(0,a.default)(),{optimisticIncreaseImportLimit:l,optimisticDecreaseImportLimit:p}=(0,n.default)(),{checkImportLimit:f}=(0,r.useImportLimitCheck)(),m=(0,c.useRouter)(),[,g]=(0,u.useAtom)(h),{uploadFile:y}=(0,i.useMultipartUpload)(),{createChatbot:b}=(0,d.useCreateChatbot)(),{mutateAsync:x}=o.api.file.updateChatbotUrl.useMutation({onError:e=>{p(),s.captureException(e)}});return{ingestCustomAudio:async function(n){let r=!(arguments.length>1)||void 0===arguments[1]||arguments[1],i=n[0];if(!f({shouldThrow:!1}))return;let a=await b({name:i.name,type:"AUDIO"});if(!a)return;l(),await y(i,{chatbotId:a.id,type:"audio",onError:e=>{p(),s.captureException(e)},onProgress:e=>{g(t=>({...t,[a.id]:e}))}}),await x({chatbotId:a.id,type:"AUDIO"});let o=(0,t.getFileExtension)(i.type);return(e("chatbotCreated",{chatbotId:a.id,fileExtension:o,type:"AUDIO"}),r)?(m.push("/b/".concat(a.id)),null):a.id}}}},592316:e=>{"use strict";e.s({default:()=>p});var t=e.i(544625),n=e.i(950347),r=e.i(382680),i=e.i(294254),a=e.i(252390),o=e.i(814733),s=e.i(238635),l=e.i(647968),u=e.i(608294),c=e.i(397711),d=e.i(91086);let h=(0,l.atom)({}),p=()=>{let{track:e}=(0,a.default)(),{optimisticIncreaseImportLimit:l,optimisticDecreaseImportLimit:p}=(0,n.default)(),{checkImportLimit:f}=(0,r.useImportLimitCheck)(),m=(0,c.useRouter)(),[,g]=(0,u.useAtom)(h),{uploadFile:y}=(0,i.useMultipartUpload)(),{createChatbot:b}=(0,d.useCreateChatbot)(),{mutateAsync:x}=o.api.file.updateChatbotUrl.useMutation({onError:e=>{p(),s.captureException(e)}});return{ingestCustomVideo:async function(n){let r=!(arguments.length>1)||void 0===arguments[1]||arguments[1],i=n[0];if(!f({shouldThrow:!1}))return;let a=await b({name:i.name,type:"VIDEO"});if(!a)return;l(),await y(i,{chatbotId:a.id,type:"video",onError:e=>{p(),s.captureException(e)},onProgress:e=>{g(t=>({...t,[a.id]:e}))}}),await x({chatbotId:a.id,type:"VIDEO"});let o=(0,t.getFileExtension)(i.type);return(e("chatbotCreated",{chatbotId:a.id,fileExtension:o,type:"VIDEO"}),r)?(m.push("/b/".concat(a.id)),null):a.id}}}},436255:e=>{"use strict";e.s({__assign:()=>r,__awaiter:()=>a,__extends:()=>n,__generator:()=>o,__rest:()=>i,__spreadArrays:()=>s});var t=function(e,n){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,n)};function n(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var r=function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function i(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function a(e,t,n,r){return new(n||(n=Promise))(function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(o,s)}l((r=r.apply(e,t||[])).next())})}function o(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){var l=[a,s];if(n)throw TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&l[0]?r.return:l[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,l[1])).done)return i;switch(r=0,i&&(l=[2&l[0],i.value]),l[0]){case 0:case 1:i=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,r=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!i||l[1]>i[0]&&l[1]<i[3])){o.label=l[1];break}if(6===l[0]&&o.label<i[1]){o.label=i[1],i=l;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(l);break}i[2]&&o.ops.pop(),o.trys.pop();continue}l=t.call(e,o)}catch(e){l=[6,e],r=0}finally{n=i=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}}function s(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var a=arguments[t],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r}},568948:e=>{"use strict";e.s({decodeFromBase64DataUri:()=>s,encodeToBase64:()=>i});for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=new Uint8Array(256),r=0;r<t.length;r++)n[t.charCodeAt(r)]=r;var i=function(e){for(var n="",r=e.length,i=0;i<r;i+=3)n+=t[e[i]>>2],n+=t[(3&e[i])<<4|e[i+1]>>4],n+=t[(15&e[i+1])<<2|e[i+2]>>6],n+=t[63&e[i+2]];return r%3==2?n=n.substring(0,n.length-1)+"=":r%3==1&&(n=n.substring(0,n.length-2)+"=="),n},a=function(e){var t,r,i,a,o,s=.75*e.length,l=e.length,u=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);var c=new Uint8Array(s);for(t=0;t<l;t+=4)r=n[e.charCodeAt(t)],i=n[e.charCodeAt(t+1)],a=n[e.charCodeAt(t+2)],o=n[e.charCodeAt(t+3)],c[u++]=r<<2|i>>4,c[u++]=(15&i)<<4|a>>2,c[u++]=(3&a)<<6|63&o;return c},o=/^(data)?:?([\w\/\+]+)?;?(charset=[\w-]+|base64)?.*,/i,s=function(e){var t=e.trim(),n=t.substring(0,100).match(o);if(!n)return a(t);var r=n[0];return a(t.substring(r.length))}},261205:e=>{"use strict";e.s({breakTextIntoLines:()=>y,charAtIndex:()=>f,charFromCode:()=>a,charFromHexCode:()=>o,charSplit:()=>m,cleanText:()=>u,copyStringIntoBuffer:()=>l,findLastMatch:()=>w,lineSplit:()=>h,mergeLines:()=>p,padStart:()=>s,parseDate:()=>x,toCharCode:()=>t,toCodePoint:()=>n,toHexString:()=>i,toHexStringOfMinLength:()=>r});var t=function(e){return e.charCodeAt(0)},n=function(e){return e.codePointAt(0)},r=function(e,t){return s(e.toString(16),t,"0").toUpperCase()},i=function(e){return r(e,2)},a=function(e){return String.fromCharCode(e)},o=function(e){return a(parseInt(e,16))},s=function(e,t,n){for(var r="",i=0,a=t-e.length;i<a;i++)r+=n;return r+e},l=function(e,t,n){for(var r=e.length,i=0;i<r;i++)t[n++]=e.charCodeAt(i);return r},u=function(e){return e.replace(/\t|\u0085|\u2028|\u2029/g,"    ").replace(/[\b\v]/g,"")},c=["\\n","\\f","\\r","\\u000B"],d=function(e){return/^[\n\f\r\u000B]$/.test(e)},h=function(e){return e.split(/[\n\f\r\u000B]/)},p=function(e){return e.replace(/[\n\f\r\u000B]/g," ")},f=function(e,t){var n,r=e.charCodeAt(t),i=t+1,a=1;return r>=55296&&r<=56319&&e.length>i&&(n=e.charCodeAt(i))>=56320&&n<=57343&&(a=2),[e.slice(t,t+a),a]},m=function(e){for(var t=[],n=0,r=e.length;n<r;){var i=f(e,n),a=i[0],o=i[1];t.push(a),n+=o}return t},g=function(e){for(var t=c.join("|"),n=["$"],r=0,i=e.length;r<i;r++){var a=e[r];if(d(a))throw TypeError("`wordBreak` must not include "+t);n.push(""===a?".":a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"))}return RegExp("("+t+")|((.*?)("+n.join("|")+"))","gm")},y=function(e,t,n,r){for(var i=g(t),a=u(e).match(i),o="",s=0,l=[],c=function(){""!==o&&l.push(o),o="",s=0},h=0,p=a.length;h<p;h++){var f=a[h];if(d(f))c();else{var m=r(f);s+m>n&&c(),o+=f,s+=m}}return c(),l},b=/^D:(\d\d\d\d)(\d\d)?(\d\d)?(\d\d)?(\d\d)?(\d\d)?([+\-Z])?(\d\d)?'?(\d\d)?'?$/,x=function(e){var t=e.match(b);if(t){var n=t[1],r=t[2],i=t[3],a=t[4],o=t[5],s=t[6],l=t[7],u=void 0===l?"Z":l,c=t[8],d=t[9];return new Date(n+"-"+(void 0===r?"01":r)+"-"+(void 0===i?"01":i)+"T"+(void 0===a?"00":a)+":"+(void 0===o?"00":o)+":"+(void 0===s?"00":s)+("Z"===u?"Z":""+u+(void 0===c?"00":c)+":"+(void 0===d?"00":d)))}},w=function(e,t){for(var n,r,i=0;i<e.length;){var a=e.substring(i).match(t);if(!a)break;r=a,i+=(null!=(n=a.index)?n:0)+a[0].length}return{match:r,pos:i}}},411691:e=>{"use strict";e.s({arrayAsString:()=>s,byAscendingId:()=>l,canBeConvertedToUint8Array:()=>f,last:()=>r,mergeIntoTypedArray:()=>a,mergeUint8Arrays:()=>o,pluckIndices:()=>p,range:()=>h,reverseArray:()=>c,sortedUniq:()=>u,sum:()=>d,toUint8Array:()=>m,typedArrayFor:()=>i});var t=e.i(568948),n=e.i(261205),r=function(e){return e[e.length-1]},i=function(e){if(e instanceof Uint8Array)return e;for(var t=e.length,n=new Uint8Array(t),r=0;r<t;r++)n[r]=e.charCodeAt(r);return n},a=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=e.length,r=[],a=0;a<n;a++){var o=e[a];r[a]=o instanceof Uint8Array?o:i(o)}for(var s=0,a=0;a<n;a++)s+=e[a].length;for(var l=new Uint8Array(s),u=0,c=0;c<n;c++)for(var d=r[c],h=0,p=d.length;h<p;h++)l[u++]=d[h];return l},o=function(e){for(var t=0,n=0,r=e.length;n<r;n++)t+=e[n].length;for(var i=new Uint8Array(t),a=0,n=0,r=e.length;n<r;n++){var o=e[n];i.set(o,a),a+=o.length}return i},s=function(e){for(var t="",r=0,i=e.length;r<i;r++)t+=(0,n.charFromCode)(e[r]);return t},l=function(e,t){return e.id-t.id},u=function(e,t){for(var n=[],r=0,i=e.length;r<i;r++){var a=e[r],o=e[r-1];(0===r||t(a)!==t(o))&&n.push(a)}return n},c=function(e){for(var t=e.length,n=0,r=Math.floor(t/2);n<r;n++){var i=n,a=t-n-1,o=e[n];e[i]=e[a],e[a]=o}return e},d=function(e){for(var t=0,n=0,r=e.length;n<r;n++)t+=e[n];return t},h=function(e,t){for(var n=Array(t-e),r=0,i=n.length;r<i;r++)n[r]=e+r;return n},p=function(e,t){for(var n=Array(t.length),r=0,i=t.length;r<i;r++)n[r]=e[t[r]];return n},f=function(e){return e instanceof Uint8Array||e instanceof ArrayBuffer||"string"==typeof e},m=function(e){if("string"==typeof e)return(0,t.decodeFromBase64DataUri)(e);if(e instanceof ArrayBuffer)return new Uint8Array(e);if(e instanceof Uint8Array)return e;throw TypeError("`input` must be one of `string | ArrayBuffer | Uint8Array`")}},92830:e=>{"use strict";e.s({waitForTick:()=>t});var t=function(){return new Promise(function(e){setTimeout(function(){return e()},0)})}},485346:e=>{"use strict";e.s({hasSurrogates:()=>a,hasUtf16BOM:()=>m,highSurrogate:()=>o,isWithinBMP:()=>i,lowSurrogate:()=>s,utf16Decode:()=>l,utf16Encode:()=>r});var t,n=e.i(261205),r=function(e,t){void 0===t&&(t=!0);var r=[];t&&r.push(65279);for(var i=0,a=e.length;i<a;){var l=e.codePointAt(i);if(l<65536)r.push(l),i+=1;else if(l<1114112)r.push(o(l),s(l)),i+=2;else throw Error("Invalid code point: 0x"+(0,n.toHexString)(l))}return new Uint16Array(r)},i=function(e){return e>=0&&e<=65535},a=function(e){return e>=65536&&e<=1114111},o=function(e){return Math.floor((e-65536)/1024)+55296},s=function(e){return(e-65536)%1024+56320};!function(e){e.BigEndian="BigEndian",e.LittleEndian="LittleEndian"}(t||(t={}));var l=function(e,n){if(void 0===n&&(n=!0),e.length<=1)return String.fromCodePoint(65533);for(var r=n?h(e):t.BigEndian,i=2*!!n,a=[];e.length-i>=2;){var o=d(e[i++],e[i++],r);if(u(o))if(e.length-i<2)a.push(65533);else{var s=d(e[i++],e[i++],r);c(s)?a.push(o,s):a.push(65533)}else c(o)?(i+=2,a.push(65533)):a.push(o)}return i<e.length&&a.push(65533),String.fromCodePoint.apply(String,a)},u=function(e){return e>=55296&&e<=56319},c=function(e){return e>=56320&&e<=57343},d=function(e,n,r){if(r===t.LittleEndian)return n<<8|e;if(r===t.BigEndian)return e<<8|n;throw Error("Invalid byteOrder: "+r)},h=function(e){return p(e)?t.BigEndian:f(e)?t.LittleEndian:t.BigEndian},p=function(e){return 254===e[0]&&255===e[1]},f=function(e){return 255===e[0]&&254===e[1]},m=function(e){return p(e)||f(e)}},906677:e=>{"use strict";e.s({bytesFor:()=>r,numberToString:()=>t,sizeInBytes:()=>n});var t=function(e){var t=String(e);if(1>Math.abs(e)){var n=parseInt(e.toString().split("e-")[1]);if(n){var r=e<0;r&&(e*=-1),e*=Math.pow(10,n-1),t="0."+Array(n).join("0")+e.toString().substring(2),r&&(t="-"+t)}}else{var n=parseInt(e.toString().split("+")[1]);n>20&&(n-=20,e/=Math.pow(10,n),t=e.toString()+Array(n+1).join("0"))}return t},n=function(e){return Math.ceil(e.toString(2).length/8)},r=function(e){for(var t=new Uint8Array(n(e)),r=1;r<=t.length;r++)t[r-1]=e>>(t.length-r)*8;return t}},683654:e=>{"use strict";e.s({error:()=>t});var t=function(e){throw Error(e)}},518864:e=>{"use strict";e.s({decompressJson:()=>s,padStart:()=>l});for(var t=e.i(567671),n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=new Uint8Array(256),i=0;i<n.length;i++)r[n.charCodeAt(i)]=i;var a=function(e){var t,n,i,a,o,s=.75*e.length,l=e.length,u=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);var c=new Uint8Array(s);for(t=0;t<l;t+=4)n=r[e.charCodeAt(t)],i=r[e.charCodeAt(t+1)],a=r[e.charCodeAt(t+2)],o=r[e.charCodeAt(t+3)],c[u++]=n<<2|i>>4,c[u++]=(15&i)<<4|a>>2,c[u++]=(3&a)<<6|63&o;return c},o=function(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},s=function(e){return o(t.default.inflate(a(e)))},l=function(e,t,n){for(var r="",i=0,a=t-e.length;i<a;i++)r+=n;return r+e}},873469:e=>{"use strict";e.s({Font:()=>x,FontNames:()=>t});var t,n=e.i(518864),r=e.i(914111),i=e.i(451398),a=e.i(290766),o=e.i(640985),s=e.i(891316),l=e.i(81312),u=e.i(630935),c=e.i(97625),d=e.i(155722),h=e.i(676158),p=e.i(739227),f=e.i(201308),m=e.i(454330),g=e.i(322585),y={Courier:o.default,"Courier-Bold":r.default,"Courier-Oblique":a.default,"Courier-BoldOblique":i.default,Helvetica:c.default,"Helvetica-Bold":s.default,"Helvetica-Oblique":u.default,"Helvetica-BoldOblique":l.default,"Times-Roman":f.default,"Times-Bold":d.default,"Times-Italic":p.default,"Times-BoldItalic":h.default,Symbol:m.default,ZapfDingbats:g.default};!function(e){e.Courier="Courier",e.CourierBold="Courier-Bold",e.CourierOblique="Courier-Oblique",e.CourierBoldOblique="Courier-BoldOblique",e.Helvetica="Helvetica",e.HelveticaBold="Helvetica-Bold",e.HelveticaOblique="Helvetica-Oblique",e.HelveticaBoldOblique="Helvetica-BoldOblique",e.TimesRoman="Times-Roman",e.TimesRomanBold="Times-Bold",e.TimesRomanItalic="Times-Italic",e.TimesRomanBoldItalic="Times-BoldItalic",e.Symbol="Symbol",e.ZapfDingbats="ZapfDingbats"}(t||(t={}));var b={},x=function(){function e(){var e=this;this.getWidthOfGlyph=function(t){return e.CharWidths[t]},this.getXAxisKerningForPair=function(t,n){return(e.KernPairXAmounts[t]||{})[n]}}return e.load=function(t){var r=b[t];if(r)return r;var i=(0,n.decompressJson)(y[t]),a=Object.assign(new e,JSON.parse(i));return a.CharWidths=a.CharMetrics.reduce(function(e,t){return e[t.N]=t.WX,e},{}),a.KernPairXAmounts=a.KernPairs.reduce(function(e,t){var n=t[0],r=t[1],i=t[2];return e[n]||(e[n]={}),e[n][r]=i,e},{}),b[t]=a,a},e}()},48771:e=>{"use strict";e.s({Encodings:()=>a});var t=e.i(518864),n=e.i(588617),r=JSON.parse((0,t.decompressJson)(n.default)),i=function(e,n){var r=this;this.canEncodeUnicodeCodePoint=function(e){return e in r.unicodeMappings},this.encodeUnicodeCodePoint=function(e){var n=r.unicodeMappings[e];if(!n){var i=String.fromCharCode(e),a="0x"+(0,t.padStart)(e.toString(16),4,"0");throw Error(r.name+' cannot encode "'+i+'" ('+a+")")}return{code:n[0],name:n[1]}},this.name=e,this.supportedCodePoints=Object.keys(n).map(Number).sort(function(e,t){return e-t}),this.unicodeMappings=n},a={Symbol:new i("Symbol",r.symbol),ZapfDingbats:new i("ZapfDingbats",r.zapfdingbats),WinAnsi:new i("WinAnsi",r.win1252)}},207542:e=>{"use strict";e.s({}),e.i(873469),e.i(48771)},65074:e=>{"use strict";e.s({}),e.i(873469),e.i(48771),e.i(207542)},482485:e=>{"use strict";e.s({isStandardFont:()=>i,rectanglesAreEqual:()=>a,values:()=>n}),e.i(65074);var t=e.i(873469),n=function(e){return Object.keys(e).map(function(t){return e[t]})},r=n(t.FontNames),i=function(e){return r.includes(e)},a=function(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}},540265:e=>{"use strict";e.s({assertEachIs:()=>d,assertInteger:()=>m,assertIs:()=>u,assertIsOneOf:()=>a,assertIsOneOfOrUndefined:()=>o,assertIsSubset:()=>s,assertMultiple:()=>f,assertOrUndefined:()=>c,assertPositive:()=>g,assertRange:()=>h,assertRangeOrUndefined:()=>p});var t=e.i(482485),n=function(e){return"`"+e+"`"},r=function(e){var t=typeof e;return"string"===t?"'"+e+"'":"undefined"===t?n(e):e},i=function(e,t,i){for(var a=Array(i.length),o=0,s=i.length;o<s;o++){var l=i[o];a[o]=r(l)}var u=a.join(" or ");return n(t)+" must be one of "+u+", but was actually "+r(e)},a=function(e,n,r){Array.isArray(r)||(r=(0,t.values)(r));for(var a=0,o=r.length;a<o;a++)if(e===r[a])return;throw TypeError(i(e,n,r))},o=function(e,n,r){Array.isArray(r)||(r=(0,t.values)(r)),a(e,n,r.concat(void 0))},s=function(e,n,r){Array.isArray(r)||(r=(0,t.values)(r));for(var i=0,o=e.length;i<o;i++)a(e[i],n,r)},l=function(e,t,r){for(var i=Array(r.length),a=0,o=r.length;a<o;a++){var s=r[a];"null"===s&&(i[a]=n("null")),"undefined"===s&&(i[a]=n("undefined")),"string"===s?i[a]=n("string"):"number"===s?i[a]=n("number"):"boolean"===s?i[a]=n("boolean"):"symbol"===s?i[a]=n("symbol"):"bigint"===s?i[a]=n("bigint"):s===Array?i[a]=n("Array"):s===Uint8Array?i[a]=n("Uint8Array"):s===ArrayBuffer?i[a]=n("ArrayBuffer"):i[a]=n(s[1])}var l=i.join(" or ");return n(t)+" must be of type "+l+", but was actually of type "+n(null===e?"null":void 0===e?"undefined":"string"==typeof e?"string":isNaN(e)?"NaN":"number"==typeof e?"number":"boolean"==typeof e?"boolean":"symbol"==typeof e?"symbol":"bigint"==typeof e?"bigint":e.constructor&&e.constructor.name?e.constructor.name:e.name?e.name:e.constructor?String(e.constructor):String(e))},u=function(e,t,n){for(var r,i=0,a=n.length;i<a;i++)if("null"===(r=n[i])?null===e:"undefined"===r?void 0===e:"string"===r?"string"==typeof e:"number"===r?"number"==typeof e&&!isNaN(e):"boolean"===r?"boolean"==typeof e:"symbol"===r?"symbol"==typeof e:"bigint"===r?"bigint"==typeof e:r===Date?e instanceof Date:r===Array?e instanceof Array:r===Uint8Array?e instanceof Uint8Array:r===ArrayBuffer?e instanceof ArrayBuffer:r===Function?e instanceof Function:e instanceof r[0])return;throw TypeError(l(e,t,n))},c=function(e,t,n){u(e,t,n.concat("undefined"))},d=function(e,t,n){for(var r=0,i=e.length;r<i;r++)u(e[r],t,n)},h=function(e,t,r,i){if(u(e,t,["number"]),u(r,"min",["number"]),u(i,"max",["number"]),i=Math.max(r,i),e<r||e>i)throw Error(n(t)+" must be at least "+r+" and at most "+i+", but was actually "+e)},p=function(e,t,n,r){u(e,t,["number","undefined"]),"number"==typeof e&&h(e,t,n,r)},f=function(e,t,r){if(u(e,t,["number"]),e%r!=0)throw Error(n(t)+" must be a multiple of "+r+", but was actually "+e)},m=function(e,t){if(!Number.isInteger(e))throw Error(n(t)+" must be an integer, but was actually "+e)},g=function(e,t){if(![1,0].includes(Math.sign(e)))throw Error(n(t)+" must be a positive number or 0, but was actually "+e)}},486424:e=>{"use strict";e.s({pdfDocEncodingDecode:()=>i});for(var t=e.i(261205),n=new Uint16Array(256),r=0;r<256;r++)n[r]=r;n[22]=(0,t.toCharCode)("\x17"),n[24]=(0,t.toCharCode)(""),n[25]=(0,t.toCharCode)(""),n[26]=(0,t.toCharCode)(""),n[27]=(0,t.toCharCode)(""),n[28]=(0,t.toCharCode)(""),n[29]=(0,t.toCharCode)(""),n[30]=(0,t.toCharCode)(""),n[31]=(0,t.toCharCode)(""),n[127]=(0,t.toCharCode)(""),n[128]=(0,t.toCharCode)(""),n[129]=(0,t.toCharCode)(""),n[130]=(0,t.toCharCode)(""),n[131]=(0,t.toCharCode)(""),n[132]=(0,t.toCharCode)(""),n[133]=(0,t.toCharCode)(""),n[134]=(0,t.toCharCode)(""),n[135]=(0,t.toCharCode)(""),n[136]=(0,t.toCharCode)(""),n[137]=(0,t.toCharCode)(""),n[138]=(0,t.toCharCode)(""),n[139]=(0,t.toCharCode)(""),n[140]=(0,t.toCharCode)(""),n[141]=(0,t.toCharCode)(""),n[142]=(0,t.toCharCode)(""),n[143]=(0,t.toCharCode)(""),n[144]=(0,t.toCharCode)(""),n[145]=(0,t.toCharCode)(""),n[146]=(0,t.toCharCode)(""),n[147]=(0,t.toCharCode)(""),n[148]=(0,t.toCharCode)(""),n[149]=(0,t.toCharCode)(""),n[150]=(0,t.toCharCode)(""),n[151]=(0,t.toCharCode)(""),n[152]=(0,t.toCharCode)(""),n[153]=(0,t.toCharCode)(""),n[154]=(0,t.toCharCode)(""),n[155]=(0,t.toCharCode)(""),n[156]=(0,t.toCharCode)(""),n[157]=(0,t.toCharCode)(""),n[158]=(0,t.toCharCode)(""),n[159]=(0,t.toCharCode)(""),n[160]=(0,t.toCharCode)(""),n[173]=(0,t.toCharCode)("");var i=function(e){for(var t=Array(e.length),r=0,i=e.length;r<i;r++)t[r]=n[e[r]];return String.fromCodePoint.apply(String,t)}},973556:e=>{"use strict";e.s({default:()=>t});let t=function(){function e(e){this.populate=e,this.value=void 0}return e.prototype.getValue=function(){return this.value},e.prototype.access=function(){return this.value||(this.value=this.populate()),this.value},e.prototype.invalidate=function(){this.value=void 0},e.populatedBy=function(t){return new e(t)},e}()},224815:e=>{"use strict";e.s({}),e.i(411691),e.i(92830),e.i(261205),e.i(485346),e.i(906677),e.i(683654),e.i(568948),e.i(482485),e.i(540265),e.i(486424),e.i(973556)},465248:e=>{"use strict";e.s({}),e.i(411691),e.i(92830),e.i(261205),e.i(485346),e.i(906677),e.i(683654),e.i(568948),e.i(482485),e.i(540265),e.i(486424),e.i(973556),e.i(224815)},143682:e=>{"use strict";e.s({CorruptPageTreeError:()=>f,IndexOutOfBoundsError:()=>m,InvalidAcroFieldValueError:()=>g,InvalidPDFDateStringError:()=>h,InvalidTargetIndexError:()=>p,MethodNotImplementedError:()=>r,MissingDAEntryError:()=>b,MissingKeywordError:()=>I,MissingPDFHeaderError:()=>M,MissingPageContentsEmbeddingError:()=>l,MissingTfOperatorError:()=>x,MultiSelectValueError:()=>y,NextByteAssertionError:()=>S,NumberParsingError:()=>w,PDFArrayIsNotRectangleError:()=>d,PDFInvalidObjectParsingError:()=>C,PDFObjectParsingError:()=>_,PDFStreamParsingError:()=>A,PageEmbeddingMismatchedContextError:()=>c,PrivateConstructorError:()=>i,ReparseError:()=>s,StalledParserError:()=>T,UnbalancedParenthesisError:()=>E,UnexpectedObjectTypeError:()=>a,UnrecognizedStreamTypeError:()=>u,UnsupportedEncodingError:()=>o});var t=e.i(436255);e.i(465248);var n=e.i(411691),r=function(e){function n(t,n){return e.call(this,"Method "+t+"."+n+"() not implemented")||this}return(0,t.__extends)(n,e),n}(Error),i=function(e){function n(t){return e.call(this,"Cannot construct "+t+" - it has a private constructor")||this}return(0,t.__extends)(n,e),n}(Error),a=function(e){function n(t,n){var r=function(e){var t,n;return null!=(t=null==e?void 0:e.name)?t:null==(n=null==e?void 0:e.constructor)?void 0:n.name},i="Expected instance of "+(Array.isArray(t)?t.map(r):[r(t)]).join(" or ")+", but got instance of "+(n?r(n):n);return e.call(this,i)||this}return(0,t.__extends)(n,e),n}(Error),o=function(e){function n(t){return e.call(this,t+" stream encoding not supported")||this}return(0,t.__extends)(n,e),n}(Error),s=function(e){function n(t,n){return e.call(this,"Cannot call "+t+"."+n+"() more than once")||this}return(0,t.__extends)(n,e),n}(Error);!function(e){(0,t.__extends)(function(t){return e.call(this,"Missing catalog (ref="+t+")")||this},e)}(Error);var l=function(e){function n(){return e.call(this,"Can't embed page with missing Contents")||this}return(0,t.__extends)(n,e),n}(Error),u=function(e){function n(t){var n,r,i,a=null!=(i=null!=(r=null==(n=null==t?void 0:t.contructor)?void 0:n.name)?r:null==t?void 0:t.name)?i:t;return e.call(this,"Unrecognized stream type: "+a)||this}return(0,t.__extends)(n,e),n}(Error),c=function(e){function n(){return e.call(this,"Found mismatched contexts while embedding pages. All pages in the array passed to `PDFDocument.embedPages()` must be from the same document.")||this}return(0,t.__extends)(n,e),n}(Error),d=function(e){function n(t){return e.call(this,"Attempted to convert PDFArray with "+t+" elements to rectangle, but must have exactly 4 elements.")||this}return(0,t.__extends)(n,e),n}(Error),h=function(e){function n(t){return e.call(this,'Attempted to convert "'+t+'" to a date, but it does not match the PDF date string format.')||this}return(0,t.__extends)(n,e),n}(Error),p=function(e){function n(t,n){return e.call(this,"Invalid targetIndex specified: targetIndex="+t+" must be less than Count="+n)||this}return(0,t.__extends)(n,e),n}(Error),f=function(e){function n(t,n){return e.call(this,"Failed to "+n+" at targetIndex="+t+" due to corrupt page tree: It is likely that one or more 'Count' entries are invalid")||this}return(0,t.__extends)(n,e),n}(Error),m=function(e){function n(t,n,r){return e.call(this,"index should be at least "+n+" and at most "+r+", but was actually "+t)||this}return(0,t.__extends)(n,e),n}(Error),g=function(e){function n(){return e.call(this,"Attempted to set invalid field value")||this}return(0,t.__extends)(n,e),n}(Error),y=function(e){function n(){return e.call(this,"Attempted to select multiple values for single-select field")||this}return(0,t.__extends)(n,e),n}(Error),b=function(e){function n(t){return e.call(this,"No /DA (default appearance) entry found for field: "+t)||this}return(0,t.__extends)(n,e),n}(Error),x=function(e){function n(t){return e.call(this,"No Tf operator found for DA of field: "+t)||this}return(0,t.__extends)(n,e),n}(Error),w=function(e){function n(t,n){var r="Failed to parse number "+("(line:"+t.line+" col:"+t.column+" offset="+t.offset+'): "')+n+'"';return e.call(this,r)||this}return(0,t.__extends)(n,e),n}(Error),k=function(e){function n(t,n){var r="Failed to parse PDF document "+("(line:"+t.line+" col:"+t.column+" offset="+t.offset)+"): "+n;return e.call(this,r)||this}return(0,t.__extends)(n,e),n}(Error),S=function(e){function n(t,n,r){return e.call(this,t,"Expected next byte to be "+n+" but it was actually "+r)||this}return(0,t.__extends)(n,e),n}(k),_=function(e){function n(t,n){return e.call(this,t,"Failed to parse PDF object starting with the following byte: "+n)||this}return(0,t.__extends)(n,e),n}(k),C=function(e){function n(t){return e.call(this,t,"Failed to parse invalid PDF object")||this}return(0,t.__extends)(n,e),n}(k),A=function(e){function n(t){return e.call(this,t,"Failed to parse PDF stream")||this}return(0,t.__extends)(n,e),n}(k),E=function(e){function n(t){return e.call(this,t,"Failed to parse PDF literal string due to unbalanced parenthesis")||this}return(0,t.__extends)(n,e),n}(k),T=function(e){function n(t){return e.call(this,t,"Parser stalled")||this}return(0,t.__extends)(n,e),n}(k),M=function(e){function n(t){return e.call(this,t,"No PDF header found")||this}return(0,t.__extends)(n,e),n}(k),I=function(e){function r(t,r){var i="Did not find expected keyword '"+(0,n.arrayAsString)(r)+"'";return e.call(this,t,i)||this}return(0,t.__extends)(r,e),r}(k)},110200:e=>{"use strict";var t;e.s({default:()=>n}),function(e){e[e.Null=0]="Null",e[e.Backspace=8]="Backspace",e[e.Tab=9]="Tab",e[e.Newline=10]="Newline",e[e.FormFeed=12]="FormFeed",e[e.CarriageReturn=13]="CarriageReturn",e[e.Space=32]="Space",e[e.ExclamationPoint=33]="ExclamationPoint",e[e.Hash=35]="Hash",e[e.Percent=37]="Percent",e[e.LeftParen=40]="LeftParen",e[e.RightParen=41]="RightParen",e[e.Plus=43]="Plus",e[e.Minus=45]="Minus",e[e.Dash=45]="Dash",e[e.Period=46]="Period",e[e.ForwardSlash=47]="ForwardSlash",e[e.Zero=48]="Zero",e[e.One=49]="One",e[e.Two=50]="Two",e[e.Three=51]="Three",e[e.Four=52]="Four",e[e.Five=53]="Five",e[e.Six=54]="Six",e[e.Seven=55]="Seven",e[e.Eight=56]="Eight",e[e.Nine=57]="Nine",e[e.LessThan=60]="LessThan",e[e.GreaterThan=62]="GreaterThan",e[e.A=65]="A",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.O=79]="O",e[e.P=80]="P",e[e.R=82]="R",e[e.LeftSquareBracket=91]="LeftSquareBracket",e[e.BackSlash=92]="BackSlash",e[e.RightSquareBracket=93]="RightSquareBracket",e[e.a=97]="a",e[e.b=98]="b",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.i=105]="i",e[e.j=106]="j",e[e.l=108]="l",e[e.m=109]="m",e[e.n=110]="n",e[e.o=111]="o",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.x=120]="x",e[e.LeftCurly=123]="LeftCurly",e[e.RightCurly=125]="RightCurly",e[e.Tilde=126]="Tilde"}(t||(t={}));let n=t},5500:e=>{"use strict";e.s({default:()=>r});var t=e.i(110200);e.i(465248);var n=e.i(261205);let r=function(){function e(e,t){this.major=String(e),this.minor=String(t)}return e.prototype.toString=function(){var e=(0,n.charFromCode)(129);return"%PDF-"+this.major+"."+this.minor+"\n%"+e+e+e+e},e.prototype.sizeInBytes=function(){return 12+this.major.length+this.minor.length},e.prototype.copyBytesInto=function(e,r){var i=r;return e[r++]=t.default.Percent,e[r++]=t.default.P,e[r++]=t.default.D,e[r++]=t.default.F,e[r++]=t.default.Dash,r+=(0,n.copyStringIntoBuffer)(this.major,e,r),e[r++]=t.default.Period,r+=(0,n.copyStringIntoBuffer)(this.minor,e,r),e[r++]=t.default.Newline,e[r++]=t.default.Percent,e[r++]=129,e[r++]=129,e[r++]=129,e[r++]=129,r-i},e.forVersion=function(t,n){return new e(t,n)},e}()},539397:e=>{"use strict";e.s({default:()=>n});var t=e.i(143682);let n=function(){function e(){}return e.prototype.clone=function(e){throw new t.MethodNotImplementedError(this.constructor.name,"clone")},e.prototype.toString=function(){throw new t.MethodNotImplementedError(this.constructor.name,"toString")},e.prototype.sizeInBytes=function(){throw new t.MethodNotImplementedError(this.constructor.name,"sizeInBytes")},e.prototype.copyBytesInto=function(e,n){throw new t.MethodNotImplementedError(this.constructor.name,"copyBytesInto")},e}()},865488:e=>{"use strict";e.s({default:()=>i});var t=e.i(436255);e.i(465248);var n=e.i(261205),r=e.i(906677);let i=function(e){function i(t){var n=e.call(this)||this;return n.numberValue=t,n.stringValue=(0,r.numberToString)(t),n}return(0,t.__extends)(i,e),i.prototype.asNumber=function(){return this.numberValue},i.prototype.value=function(){return this.numberValue},i.prototype.clone=function(){return i.of(this.numberValue)},i.prototype.toString=function(){return this.stringValue},i.prototype.sizeInBytes=function(){return this.stringValue.length},i.prototype.copyBytesInto=function(e,t){return t+=(0,n.copyStringIntoBuffer)(this.stringValue,e,t),this.stringValue.length},i.of=function(e){return new i(e)},i}(e.i(539397).default)},922995:e=>{"use strict";e.s({default:()=>o});var t=e.i(436255),n=e.i(865488),r=e.i(539397),i=e.i(110200),a=e.i(143682);let o=function(e){function r(t){var n=e.call(this)||this;return n.array=[],n.context=t,n}return(0,t.__extends)(r,e),r.prototype.size=function(){return this.array.length},r.prototype.push=function(e){this.array.push(e)},r.prototype.insert=function(e,t){this.array.splice(e,0,t)},r.prototype.indexOf=function(e){var t=this.array.indexOf(e);return -1===t?void 0:t},r.prototype.remove=function(e){this.array.splice(e,1)},r.prototype.set=function(e,t){this.array[e]=t},r.prototype.get=function(e){return this.array[e]},r.prototype.lookupMaybe=function(e){for(var n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];return(n=this.context).lookupMaybe.apply(n,(0,t.__spreadArrays)([this.get(e)],r))},r.prototype.lookup=function(e){for(var n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];return(n=this.context).lookup.apply(n,(0,t.__spreadArrays)([this.get(e)],r))},r.prototype.asRectangle=function(){if(4!==this.size())throw new a.PDFArrayIsNotRectangleError(this.size());var e=this.lookup(0,n.default).asNumber(),t=this.lookup(1,n.default).asNumber();return{x:e,y:t,width:this.lookup(2,n.default).asNumber()-e,height:this.lookup(3,n.default).asNumber()-t}},r.prototype.asArray=function(){return this.array.slice()},r.prototype.clone=function(e){for(var t=r.withContext(e||this.context),n=0,i=this.size();n<i;n++)t.push(this.array[n]);return t},r.prototype.toString=function(){for(var e="[ ",t=0,n=this.size();t<n;t++)e+=this.get(t).toString(),e+=" ";return e+"]"},r.prototype.sizeInBytes=function(){for(var e=3,t=0,n=this.size();t<n;t++)e+=this.get(t).sizeInBytes()+1;return e},r.prototype.copyBytesInto=function(e,t){var n=t;e[t++]=i.default.LeftSquareBracket,e[t++]=i.default.Space;for(var r=0,a=this.size();r<a;r++)t+=this.get(r).copyBytesInto(e,t),e[t++]=i.default.Space;return e[t++]=i.default.RightSquareBracket,t-n},r.prototype.scalePDFNumbers=function(e,t){for(var r=0,i=this.size();r<i;r++){var a=this.lookup(r);if(a instanceof n.default){var o=r%2==0?e:t;this.set(r,n.default.of(a.asNumber()*o))}}},r.withContext=function(e){return new r(e)},r}(r.default)},307502:e=>{"use strict";e.s({default:()=>o});var t=e.i(436255),n=e.i(143682),r=e.i(539397),i=e.i(110200),a={};let o=function(e){function r(t,r){var i=this;if(t!==a)throw new n.PrivateConstructorError("PDFBool");return(i=e.call(this)||this).value=r,i}return(0,t.__extends)(r,e),r.prototype.asBoolean=function(){return this.value},r.prototype.clone=function(){return this},r.prototype.toString=function(){return String(this.value)},r.prototype.sizeInBytes=function(){return this.value?4:5},r.prototype.copyBytesInto=function(e,t){return this.value?(e[t++]=i.default.t,e[t++]=i.default.r,e[t++]=i.default.u,e[t++]=i.default.e,4):(e[t++]=i.default.f,e[t++]=i.default.a,e[t++]=i.default.l,e[t++]=i.default.s,e[t++]=i.default.e,5)},r.True=new r(a,!0),r.False=new r(a,!1),r}(r.default)},351223:e=>{"use strict";e.s({IsDelimiter:()=>n});var t=e.i(110200),n=new Uint8Array(256);n[t.default.LeftParen]=1,n[t.default.RightParen]=1,n[t.default.LessThan]=1,n[t.default.GreaterThan]=1,n[t.default.LeftSquareBracket]=1,n[t.default.RightSquareBracket]=1,n[t.default.LeftCurly]=1,n[t.default.RightCurly]=1,n[t.default.ForwardSlash]=1,n[t.default.Percent]=1},68597:e=>{"use strict";e.s({IsWhitespace:()=>n});var t=e.i(110200),n=new Uint8Array(256);n[t.default.Null]=1,n[t.default.Tab]=1,n[t.default.Newline]=1,n[t.default.FormFeed]=1,n[t.default.CarriageReturn]=1,n[t.default.Space]=1},122387:e=>{"use strict";e.s({IsIrregular:()=>i});for(var t=e.i(110200),n=e.i(351223),r=e.i(68597),i=new Uint8Array(256),a=0;a<256;a++)i[a]=r.IsWhitespace[a]||n.IsDelimiter[a]?1:0;i[t.default.Hash]=1},91355:e=>{"use strict";e.s({default:()=>u});var t=e.i(436255),n=e.i(143682),r=e.i(539397),i=e.i(110200),a=e.i(122387);e.i(465248);var o=e.i(261205),s={},l=new Map;let u=function(e){function r(t,r){var l=this;if(t!==s)throw new n.PrivateConstructorError("PDFName");l=e.call(this)||this;for(var u="/",c=0,d=r.length;c<d;c++){var h=r[c],p=(0,o.toCharCode)(h);u+=p>=i.default.ExclamationPoint&&p<=i.default.Tilde&&!a.IsIrregular[p]?h:"#"+(0,o.toHexString)(p)}return l.encodedName=u,l}return(0,t.__extends)(r,e),r.prototype.asBytes=function(){for(var e=[],t="",n=!1,r=function(t){void 0!==t&&e.push(t),n=!1},a=1,s=this.encodedName.length;a<s;a++){var l=this.encodedName[a],u=(0,o.toCharCode)(l),c=this.encodedName[a+1];n?u>=i.default.Zero&&u<=i.default.Nine||u>=i.default.a&&u<=i.default.f||u>=i.default.A&&u<=i.default.F?2!==(t+=l).length&&(c>="0"&&c<="9"||c>="a"&&c<="f"||c>="A"&&c<="F")||(r(parseInt(t,16)),t=""):r(u):u===i.default.Hash?n=!0:r(u)}return new Uint8Array(e)},r.prototype.decodeText=function(){var e=this.asBytes();return String.fromCharCode.apply(String,Array.from(e))},r.prototype.asString=function(){return this.encodedName},r.prototype.value=function(){return this.encodedName},r.prototype.clone=function(){return this},r.prototype.toString=function(){return this.encodedName},r.prototype.sizeInBytes=function(){return this.encodedName.length},r.prototype.copyBytesInto=function(e,t){return t+=(0,o.copyStringIntoBuffer)(this.encodedName,e,t),this.encodedName.length},r.of=function(e){var t=e.replace(/#([\dABCDEF]{2})/g,function(e,t){return(0,o.charFromHexCode)(t)}),n=l.get(t);return n||(n=new r(s,t),l.set(t,n)),n},r.Length=r.of("Length"),r.FlateDecode=r.of("FlateDecode"),r.Resources=r.of("Resources"),r.Font=r.of("Font"),r.XObject=r.of("XObject"),r.ExtGState=r.of("ExtGState"),r.Contents=r.of("Contents"),r.Type=r.of("Type"),r.Parent=r.of("Parent"),r.MediaBox=r.of("MediaBox"),r.Page=r.of("Page"),r.Annots=r.of("Annots"),r.TrimBox=r.of("TrimBox"),r.ArtBox=r.of("ArtBox"),r.BleedBox=r.of("BleedBox"),r.CropBox=r.of("CropBox"),r.Rotate=r.of("Rotate"),r.Title=r.of("Title"),r.Author=r.of("Author"),r.Subject=r.of("Subject"),r.Creator=r.of("Creator"),r.Keywords=r.of("Keywords"),r.Producer=r.of("Producer"),r.CreationDate=r.of("CreationDate"),r.ModDate=r.of("ModDate"),r}(r.default)},114962:e=>{"use strict";e.s({default:()=>i});var t=e.i(436255),n=e.i(539397),r=e.i(110200);let i=new(function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return(0,t.__extends)(n,e),n.prototype.asNull=function(){return null},n.prototype.clone=function(){return this},n.prototype.toString=function(){return"null"},n.prototype.sizeInBytes=function(){return 4},n.prototype.copyBytesInto=function(e,t){return e[t++]=r.default.n,e[t++]=r.default.u,e[t++]=r.default.l,e[t++]=r.default.l,4},n}(n.default))},155303:e=>{"use strict";e.s({default:()=>o});var t=e.i(436255),n=e.i(91355),r=e.i(114962),i=e.i(539397),a=e.i(110200);let o=function(e){function i(t,n){var r=e.call(this)||this;return r.dict=t,r.context=n,r}return(0,t.__extends)(i,e),i.prototype.keys=function(){return Array.from(this.dict.keys())},i.prototype.values=function(){return Array.from(this.dict.values())},i.prototype.entries=function(){return Array.from(this.dict.entries())},i.prototype.set=function(e,t){this.dict.set(e,t)},i.prototype.get=function(e,t){void 0===t&&(t=!1);var n=this.dict.get(e);if(n!==r.default||t)return n},i.prototype.has=function(e){var t=this.dict.get(e);return void 0!==t&&t!==r.default},i.prototype.lookupMaybe=function(e){for(var n,i=[],a=1;a<arguments.length;a++)i[a-1]=arguments[a];var o=i.includes(r.default),s=(n=this.context).lookupMaybe.apply(n,(0,t.__spreadArrays)([this.get(e,o)],i));if(s!==r.default||o)return s},i.prototype.lookup=function(e){for(var n,i=[],a=1;a<arguments.length;a++)i[a-1]=arguments[a];var o=i.includes(r.default),s=(n=this.context).lookup.apply(n,(0,t.__spreadArrays)([this.get(e,o)],i));if(s!==r.default||o)return s},i.prototype.delete=function(e){return this.dict.delete(e)},i.prototype.asMap=function(){return new Map(this.dict)},i.prototype.uniqueKey=function(e){void 0===e&&(e="");for(var t=this.keys(),r=n.default.of(this.context.addRandomSuffix(e,10));t.includes(r);)r=n.default.of(this.context.addRandomSuffix(e,10));return r},i.prototype.clone=function(e){for(var t=i.withContext(e||this.context),n=this.entries(),r=0,a=n.length;r<a;r++){var o=n[r],s=o[0],l=o[1];t.set(s,l)}return t},i.prototype.toString=function(){for(var e="<<\n",t=this.entries(),n=0,r=t.length;n<r;n++){var i=t[n],a=i[0],o=i[1];e+=a.toString()+" "+o.toString()+"\n"}return e+">>"},i.prototype.sizeInBytes=function(){for(var e=5,t=this.entries(),n=0,r=t.length;n<r;n++){var i=t[n],a=i[0],o=i[1];e+=a.sizeInBytes()+o.sizeInBytes()+2}return e},i.prototype.copyBytesInto=function(e,t){var n=t;e[t++]=a.default.LessThan,e[t++]=a.default.LessThan,e[t++]=a.default.Newline;for(var r=this.entries(),i=0,o=r.length;i<o;i++){var s=r[i],l=s[0],u=s[1];t+=l.copyBytesInto(e,t),e[t++]=a.default.Space,t+=u.copyBytesInto(e,t),e[t++]=a.default.Newline}return e[t++]=a.default.GreaterThan,e[t++]=a.default.GreaterThan,t-n},i.withContext=function(e){return new i(new Map,e)},i.fromMapWithContext=function(e,t){return new i(e,t)},i}(i.default)},13139:e=>{"use strict";e.s({default:()=>s});var t=e.i(436255),n=e.i(143682),r=e.i(91355),i=e.i(865488),a=e.i(539397),o=e.i(110200);let s=function(e){function a(t){var n=e.call(this)||this;return n.dict=t,n}return(0,t.__extends)(a,e),a.prototype.clone=function(e){throw new n.MethodNotImplementedError(this.constructor.name,"clone")},a.prototype.getContentsString=function(){throw new n.MethodNotImplementedError(this.constructor.name,"getContentsString")},a.prototype.getContents=function(){throw new n.MethodNotImplementedError(this.constructor.name,"getContents")},a.prototype.getContentsSize=function(){throw new n.MethodNotImplementedError(this.constructor.name,"getContentsSize")},a.prototype.updateDict=function(){var e=this.getContentsSize();this.dict.set(r.default.Length,i.default.of(e))},a.prototype.sizeInBytes=function(){return this.updateDict(),this.dict.sizeInBytes()+this.getContentsSize()+18},a.prototype.toString=function(){this.updateDict();var e=this.dict.toString();return e+="\nstream\n",e+=this.getContentsString(),e+="\nendstream"},a.prototype.copyBytesInto=function(e,t){this.updateDict();var n=t;t+=this.dict.copyBytesInto(e,t),e[t++]=o.default.Newline,e[t++]=o.default.s,e[t++]=o.default.t,e[t++]=o.default.r,e[t++]=o.default.e,e[t++]=o.default.a,e[t++]=o.default.m,e[t++]=o.default.Newline;for(var r=this.getContents(),i=0,a=r.length;i<a;i++)e[t++]=r[i];return e[t++]=o.default.Newline,e[t++]=o.default.e,e[t++]=o.default.n,e[t++]=o.default.d,e[t++]=o.default.s,e[t++]=o.default.t,e[t++]=o.default.r,e[t++]=o.default.e,e[t++]=o.default.a,e[t++]=o.default.m,t-n},a}(a.default)},124729:e=>{"use strict";e.s({default:()=>i});var t=e.i(436255),n=e.i(13139);e.i(465248);var r=e.i(411691);let i=function(e){function n(t,n){var r=e.call(this,t)||this;return r.contents=n,r}return(0,t.__extends)(n,e),n.prototype.asUint8Array=function(){return this.contents.slice()},n.prototype.clone=function(e){return n.of(this.dict.clone(e),this.contents.slice())},n.prototype.getContentsString=function(){return(0,r.arrayAsString)(this.contents)},n.prototype.getContents=function(){return this.contents},n.prototype.getContentsSize=function(){return this.contents.length},n.of=function(e,t){return new n(e,t)},n}(n.default)},927657:e=>{"use strict";e.s({default:()=>s});var t=e.i(436255),n=e.i(143682),r=e.i(539397);e.i(465248);var i=e.i(261205),a={},o=new Map;let s=function(e){function r(t,r,i){var o=this;if(t!==a)throw new n.PrivateConstructorError("PDFRef");return(o=e.call(this)||this).objectNumber=r,o.generationNumber=i,o.tag=r+" "+i+" R",o}return(0,t.__extends)(r,e),r.prototype.clone=function(){return this},r.prototype.toString=function(){return this.tag},r.prototype.sizeInBytes=function(){return this.tag.length},r.prototype.copyBytesInto=function(e,t){return t+=(0,i.copyStringIntoBuffer)(this.tag,e,t),this.tag.length},r.of=function(e,t){void 0===t&&(t=0);var n=e+" "+t+" R",i=o.get(n);return i||(i=new r(a,e,t),o.set(n,i)),i},r}(r.default)},523151:e=>{"use strict";e.s({default:()=>i});var t=e.i(539397),n=e.i(110200);e.i(465248);var r=e.i(261205);let i=function(){function e(e,t){this.name=e,this.args=t||[]}return e.prototype.clone=function(n){for(var r=Array(this.args.length),i=0,a=r.length;i<a;i++){var o=this.args[i];r[i]=o instanceof t.default?o.clone(n):o}return e.of(this.name,r)},e.prototype.toString=function(){for(var e="",t=0,n=this.args.length;t<n;t++)e+=String(this.args[t])+" ";return e+this.name},e.prototype.sizeInBytes=function(){for(var e=0,n=0,r=this.args.length;n<r;n++){var i=this.args[n];e+=(i instanceof t.default?i.sizeInBytes():i.length)+1}return e+this.name.length},e.prototype.copyBytesInto=function(e,i){for(var a=i,o=0,s=this.args.length;o<s;o++){var l=this.args[o];l instanceof t.default?i+=l.copyBytesInto(e,i):i+=(0,r.copyStringIntoBuffer)(l,e,i),e[i++]=n.default.Space}return(i+=(0,r.copyStringIntoBuffer)(this.name,e,i))-a},e.of=function(t,n){return new e(t,n)},e}()},833160:e=>{"use strict";var t;e.s({default:()=>n}),function(e){e.NonStrokingColor="sc",e.NonStrokingColorN="scn",e.NonStrokingColorRgb="rg",e.NonStrokingColorGray="g",e.NonStrokingColorCmyk="k",e.NonStrokingColorspace="cs",e.StrokingColor="SC",e.StrokingColorN="SCN",e.StrokingColorRgb="RG",e.StrokingColorGray="G",e.StrokingColorCmyk="K",e.StrokingColorspace="CS",e.BeginMarkedContentSequence="BDC",e.BeginMarkedContent="BMC",e.EndMarkedContent="EMC",e.MarkedContentPointWithProps="DP",e.MarkedContentPoint="MP",e.DrawObject="Do",e.ConcatTransformationMatrix="cm",e.PopGraphicsState="Q",e.PushGraphicsState="q",e.SetFlatness="i",e.SetGraphicsStateParams="gs",e.SetLineCapStyle="J",e.SetLineDashPattern="d",e.SetLineJoinStyle="j",e.SetLineMiterLimit="M",e.SetLineWidth="w",e.SetTextMatrix="Tm",e.SetRenderingIntent="ri",e.AppendRectangle="re",e.BeginInlineImage="BI",e.BeginInlineImageData="ID",e.EndInlineImage="EI",e.ClipEvenOdd="W*",e.ClipNonZero="W",e.CloseAndStroke="s",e.CloseFillEvenOddAndStroke="b*",e.CloseFillNonZeroAndStroke="b",e.ClosePath="h",e.AppendBezierCurve="c",e.CurveToReplicateFinalPoint="y",e.CurveToReplicateInitialPoint="v",e.EndPath="n",e.FillEvenOddAndStroke="B*",e.FillEvenOdd="f*",e.FillNonZeroAndStroke="B",e.FillNonZero="f",e.LegacyFillNonZero="F",e.LineTo="l",e.MoveTo="m",e.ShadingFill="sh",e.StrokePath="S",e.BeginText="BT",e.EndText="ET",e.MoveText="Td",e.MoveTextSetLeading="TD",e.NextLine="T*",e.SetCharacterSpacing="Tc",e.SetFontAndSize="Tf",e.SetTextHorizontalScaling="Tz",e.SetTextLineHeight="TL",e.SetTextRenderingMode="Tr",e.SetTextRise="Ts",e.SetWordSpacing="Tw",e.ShowText="Tj",e.ShowTextAdjusted="TJ",e.ShowTextLine="'",e.ShowTextLineAndSpace='"',e.Type3D0="d0",e.Type3D1="d1",e.BeginCompatibilitySection="BX",e.EndCompatibilitySection="EX"}(t||(t={}));let n=t},264900:e=>{"use strict";e.s({Cache:()=>t.default});var t=e.i(973556)},74001:e=>{"use strict";e.s({default:()=>s});var t=e.i(436255),n=e.i(567671),r=e.i(143682),i=e.i(91355),a=e.i(13139);e.i(465248);var o=e.i(264900);let s=function(e){function a(t,r){var a=e.call(this,t)||this;return a.computeContents=function(){var e=a.getUnencodedContents();return a.encode?n.default.deflate(e):e},a.encode=r,r&&t.set(i.default.of("Filter"),i.default.of("FlateDecode")),a.contentsCache=o.Cache.populatedBy(a.computeContents),a}return(0,t.__extends)(a,e),a.prototype.getContents=function(){return this.contentsCache.access()},a.prototype.getContentsSize=function(){return this.contentsCache.access().length},a.prototype.getUnencodedContents=function(){throw new r.MethodNotImplementedError(this.constructor.name,"getUnencodedContents")},a}(a.default)},637971:e=>{"use strict";e.s({default:()=>i});var t=e.i(436255),n=e.i(74001),r=e.i(110200);let i=function(e){function n(t,n,r){void 0===r&&(r=!0);var i=e.call(this,t,r)||this;return i.operators=n,i}return(0,t.__extends)(n,e),n.prototype.push=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this.operators).push.apply(e,t)},n.prototype.clone=function(e){for(var t=Array(this.operators.length),r=0,i=this.operators.length;r<i;r++)t[r]=this.operators[r].clone(e);var a=this.dict,o=this.encode;return n.of(a.clone(e),t,o)},n.prototype.getContentsString=function(){for(var e="",t=0,n=this.operators.length;t<n;t++)e+=this.operators[t]+"\n";return e},n.prototype.getUnencodedContents=function(){for(var e=new Uint8Array(this.getUnencodedContentsSize()),t=0,n=0,i=this.operators.length;n<i;n++)t+=this.operators[n].copyBytesInto(e,t),e[t++]=r.default.Newline;return e},n.prototype.getUnencodedContentsSize=function(){for(var e=0,t=0,n=this.operators.length;t<n;t++)e+=this.operators[t].sizeInBytes()+1;return e},n.of=function(e,t,r){return void 0===r&&(r=!0),new n(e,t,r)},n}(n.default)},522570:e=>{"use strict";e.s({SimpleRNG:()=>t});var t=function(){function e(e){this.seed=e}return e.prototype.nextInt=function(){var e=1e4*Math.sin(this.seed++);return e-Math.floor(e)},e.withSeed=function(t){return new e(t)},e}()},529676:e=>{"use strict";e.s({default:()=>w});var t=e.i(436255),n=e.i(567671),r=e.i(5500),i=e.i(143682),a=e.i(922995),o=e.i(307502),s=e.i(155303),l=e.i(91355),u=e.i(114962),c=e.i(865488),d=e.i(539397),h=e.i(124729),p=e.i(927657),f=e.i(523151),m=e.i(833160),g=e.i(637971);e.i(465248);var y=e.i(411691),b=e.i(522570),x=function(e,t){var n=e[0],r=t[0];return n.objectNumber-r.objectNumber};let w=function(){function e(){this.largestObjectNumber=0,this.header=r.default.forVersion(1,7),this.trailerInfo={},this.indirectObjects=new Map,this.rng=b.SimpleRNG.withSeed(1)}return e.prototype.assign=function(e,t){this.indirectObjects.set(e,t),e.objectNumber>this.largestObjectNumber&&(this.largestObjectNumber=e.objectNumber)},e.prototype.nextRef=function(){return this.largestObjectNumber+=1,p.default.of(this.largestObjectNumber)},e.prototype.register=function(e){var t=this.nextRef();return this.assign(t,e),t},e.prototype.delete=function(e){return this.indirectObjects.delete(e)},e.prototype.lookupMaybe=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t.includes(u.default),a=e instanceof p.default?this.indirectObjects.get(e):e;if(a&&(a!==u.default||r)){for(var o=0,s=t.length;o<s;o++){var l=t[o];if(l===u.default){if(a===u.default)return a}else if(a instanceof l)return a}throw new i.UnexpectedObjectTypeError(t,a)}},e.prototype.lookup=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=e instanceof p.default?this.indirectObjects.get(e):e;if(0===t.length)return r;for(var a=0,o=t.length;a<o;a++){var s=t[a];if(s===u.default){if(r===u.default)return r}else if(r instanceof s)return r}throw new i.UnexpectedObjectTypeError(t,r)},e.prototype.getObjectRef=function(e){for(var t=Array.from(this.indirectObjects.entries()),n=0,r=t.length;n<r;n++){var i=t[n],a=i[0];if(i[1]===e)return a}},e.prototype.enumerateIndirectObjects=function(){return Array.from(this.indirectObjects.entries()).sort(x)},e.prototype.obj=function(e){if(e instanceof d.default)return e;if(null==e)return u.default;if("string"==typeof e)return l.default.of(e);if("number"==typeof e)return c.default.of(e);if("boolean"==typeof e)return e?o.default.True:o.default.False;else if(Array.isArray(e)){for(var t=a.default.withContext(this),n=0,r=e.length;n<r;n++)t.push(this.obj(e[n]));return t}else{for(var i=s.default.withContext(this),h=Object.keys(e),n=0,r=h.length;n<r;n++){var p=h[n],f=e[p];void 0!==f&&i.set(l.default.of(p),this.obj(f))}return i}},e.prototype.stream=function(e,t){return void 0===t&&(t={}),h.default.of(this.obj(t),(0,y.typedArrayFor)(e))},e.prototype.flateStream=function(e,r){return void 0===r&&(r={}),this.stream(n.default.deflate((0,y.typedArrayFor)(e)),(0,t.__assign)((0,t.__assign)({},r),{Filter:"FlateDecode"}))},e.prototype.contentStream=function(e,t){return void 0===t&&(t={}),g.default.of(this.obj(t),e)},e.prototype.formXObject=function(e,n){return void 0===n&&(n={}),this.contentStream(e,(0,t.__assign)((0,t.__assign)({BBox:this.obj([0,0,0,0]),Matrix:this.obj([1,0,0,1,0,0])},n),{Type:"XObject",Subtype:"Form"}))},e.prototype.getPushGraphicsStateContentStream=function(){if(this.pushGraphicsStateContentStreamRef)return this.pushGraphicsStateContentStreamRef;var e=this.obj({}),t=f.default.of(m.default.PushGraphicsState),n=g.default.of(e,[t]);return this.pushGraphicsStateContentStreamRef=this.register(n),this.pushGraphicsStateContentStreamRef},e.prototype.getPopGraphicsStateContentStream=function(){if(this.popGraphicsStateContentStreamRef)return this.popGraphicsStateContentStreamRef;var e=this.obj({}),t=f.default.of(m.default.PopGraphicsState),n=g.default.of(e,[t]);return this.popGraphicsStateContentStreamRef=this.register(n),this.popGraphicsStateContentStreamRef},e.prototype.addRandomSuffix=function(e,t){return void 0===t&&(t=4),e+"-"+Math.floor(this.rng.nextInt()*Math.pow(10,t))},e.create=function(){return new e},e}()},669076:e=>{"use strict";e.s({default:()=>s});var t=e.i(436255),n=e.i(922995),r=e.i(155303),i=e.i(91355),a=e.i(865488),o=e.i(13139);let s=function(e){function s(t,n,r){void 0===r&&(r=!0);var i=e.call(this,t,n)||this;return i.normalized=!1,i.autoNormalizeCTM=r,i}return(0,t.__extends)(s,e),s.prototype.clone=function(e){for(var t=s.fromMapWithContext(new Map,e||this.context,this.autoNormalizeCTM),n=this.entries(),r=0,i=n.length;r<i;r++){var a=n[r],o=a[0],l=a[1];t.set(o,l)}return t},s.prototype.Parent=function(){return this.lookupMaybe(i.default.Parent,r.default)},s.prototype.Contents=function(){return this.lookup(i.default.of("Contents"))},s.prototype.Annots=function(){return this.lookupMaybe(i.default.Annots,n.default)},s.prototype.BleedBox=function(){return this.lookupMaybe(i.default.BleedBox,n.default)},s.prototype.TrimBox=function(){return this.lookupMaybe(i.default.TrimBox,n.default)},s.prototype.ArtBox=function(){return this.lookupMaybe(i.default.ArtBox,n.default)},s.prototype.Resources=function(){var e=this.getInheritableAttribute(i.default.Resources);return this.context.lookupMaybe(e,r.default)},s.prototype.MediaBox=function(){var e=this.getInheritableAttribute(i.default.MediaBox);return this.context.lookup(e,n.default)},s.prototype.CropBox=function(){var e=this.getInheritableAttribute(i.default.CropBox);return this.context.lookupMaybe(e,n.default)},s.prototype.Rotate=function(){var e=this.getInheritableAttribute(i.default.Rotate);return this.context.lookupMaybe(e,a.default)},s.prototype.getInheritableAttribute=function(e){var t;return this.ascend(function(n){t||(t=n.get(e))}),t},s.prototype.setParent=function(e){this.set(i.default.Parent,e)},s.prototype.addContentStream=function(e){var t=this.normalizedEntries().Contents||this.context.obj([]);this.set(i.default.Contents,t),t.push(e)},s.prototype.wrapContentStreams=function(e,t){var r=this.Contents();return r instanceof n.default&&(r.insert(0,e),r.push(t),!0)},s.prototype.addAnnot=function(e){this.normalizedEntries().Annots.push(e)},s.prototype.removeAnnot=function(e){var t=this.normalizedEntries().Annots,n=t.indexOf(e);void 0!==n&&t.remove(n)},s.prototype.setFontDictionary=function(e,t){this.normalizedEntries().Font.set(e,t)},s.prototype.newFontDictionaryKey=function(e){return this.normalizedEntries().Font.uniqueKey(e)},s.prototype.newFontDictionary=function(e,t){var n=this.newFontDictionaryKey(e);return this.setFontDictionary(n,t),n},s.prototype.setXObject=function(e,t){this.normalizedEntries().XObject.set(e,t)},s.prototype.newXObjectKey=function(e){return this.normalizedEntries().XObject.uniqueKey(e)},s.prototype.newXObject=function(e,t){var n=this.newXObjectKey(e);return this.setXObject(n,t),n},s.prototype.setExtGState=function(e,t){this.normalizedEntries().ExtGState.set(e,t)},s.prototype.newExtGStateKey=function(e){return this.normalizedEntries().ExtGState.uniqueKey(e)},s.prototype.newExtGState=function(e,t){var n=this.newExtGStateKey(e);return this.setExtGState(n,t),n},s.prototype.ascend=function(e){e(this);var t=this.Parent();t&&t.ascend(e)},s.prototype.normalize=function(){if(!this.normalized){var e=this.context,t=this.get(i.default.Contents);this.context.lookup(t)instanceof o.default&&this.set(i.default.Contents,e.obj([t])),this.autoNormalizeCTM&&this.wrapContentStreams(this.context.getPushGraphicsStateContentStream(),this.context.getPopGraphicsStateContentStream());var n=this.getInheritableAttribute(i.default.Resources),a=e.lookupMaybe(n,r.default)||e.obj({});this.set(i.default.Resources,a);var s=a.lookupMaybe(i.default.Font,r.default)||e.obj({});a.set(i.default.Font,s);var l=a.lookupMaybe(i.default.XObject,r.default)||e.obj({});a.set(i.default.XObject,l);var u=a.lookupMaybe(i.default.ExtGState,r.default)||e.obj({});a.set(i.default.ExtGState,u);var c=this.Annots()||e.obj([]);this.set(i.default.Annots,c),this.normalized=!0}},s.prototype.normalizedEntries=function(){this.normalize();var e=this.Annots(),t=this.Resources();return{Annots:e,Resources:t,Contents:this.Contents(),Font:t.lookup(i.default.Font,r.default),XObject:t.lookup(i.default.XObject,r.default),ExtGState:t.lookup(i.default.ExtGState,r.default)}},s.InheritableEntries=["Resources","MediaBox","CropBox","Rotate"],s.withContextAndParent=function(e,t){var n=new Map;return n.set(i.default.Type,i.default.Page),n.set(i.default.Parent,t),n.set(i.default.Resources,e.obj({})),n.set(i.default.MediaBox,e.obj([0,0,612,792])),new s(n,e,!1)},s.fromMapWithContext=function(e,t,n){return void 0===n&&(n=!0),new s(e,t,n)},s}(r.default)},258446:e=>{"use strict";e.s({default:()=>s});var t=e.i(922995),n=e.i(155303),r=e.i(91355),i=e.i(927657),a=e.i(13139),o=e.i(669076);let s=function(){function e(e,s){var l=this;this.traversedObjects=new Map,this.copy=function(e){return e instanceof o.default?l.copyPDFPage(e):e instanceof n.default?l.copyPDFDict(e):e instanceof t.default?l.copyPDFArray(e):e instanceof a.default?l.copyPDFStream(e):e instanceof i.default?l.copyPDFIndirectObject(e):e.clone()},this.copyPDFPage=function(e){for(var t=e.clone(),n=o.default.InheritableEntries,i=0,a=n.length;i<a;i++){var s=r.default.of(n[i]),u=t.getInheritableAttribute(s);!t.get(s)&&u&&t.set(s,u)}return t.delete(r.default.of("Parent")),l.copyPDFDict(t)},this.copyPDFDict=function(e){if(l.traversedObjects.has(e))return l.traversedObjects.get(e);var t=e.clone(l.dest);l.traversedObjects.set(e,t);for(var n=e.entries(),r=0,i=n.length;r<i;r++){var a=n[r],o=a[0],s=a[1];t.set(o,l.copy(s))}return t},this.copyPDFArray=function(e){if(l.traversedObjects.has(e))return l.traversedObjects.get(e);var t=e.clone(l.dest);l.traversedObjects.set(e,t);for(var n=0,r=e.size();n<r;n++){var i=e.get(n);t.set(n,l.copy(i))}return t},this.copyPDFStream=function(e){if(l.traversedObjects.has(e))return l.traversedObjects.get(e);var t=e.clone(l.dest);l.traversedObjects.set(e,t);for(var n=e.dict.entries(),r=0,i=n.length;r<i;r++){var a=n[r],o=a[0],s=a[1];t.dict.set(o,l.copy(s))}return t},this.copyPDFIndirectObject=function(e){if(!l.traversedObjects.has(e)){var t=l.dest.nextRef();l.traversedObjects.set(e,t);var n=l.src.lookup(e);if(n){var r=l.copy(n);l.dest.assign(t,r)}}return l.traversedObjects.get(e)},this.src=e,this.dest=s}return e.for=function(t,n){return new e(t,n)},e}()},77552:e=>{"use strict";e.s({default:()=>i});var t=e.i(927657),n=e.i(110200);e.i(465248);var r=e.i(261205);let i=function(){function e(e){this.subsections=e?[[e]]:[],this.chunkIdx=0,this.chunkLength=+!!e}return e.prototype.addEntry=function(e,t){this.append({ref:e,offset:t,deleted:!1})},e.prototype.addDeletedEntry=function(e,t){this.append({ref:e,offset:t,deleted:!0})},e.prototype.toString=function(){for(var e="xref\n",t=0,n=this.subsections.length;t<n;t++){var i=this.subsections[t];e+=i[0].ref.objectNumber+" "+i.length+"\n";for(var a=0,o=i.length;a<o;a++){var s=i[a];e+=(0,r.padStart)(String(s.offset),10,"0"),e+=" ",e+=(0,r.padStart)(String(s.ref.generationNumber),5,"0"),e+=" ",e+=s.deleted?"f":"n",e+=" \n"}}return e},e.prototype.sizeInBytes=function(){for(var e=5,t=0,n=this.subsections.length;t<n;t++){var r=this.subsections[t],i=r.length;e+=2,e+=String(r[0].ref.objectNumber).length,e+=String(i).length,e+=20*i}return e},e.prototype.copyBytesInto=function(e,t){var r=t;return e[t++]=n.default.x,e[t++]=n.default.r,e[t++]=n.default.e,e[t++]=n.default.f,e[t++]=n.default.Newline,(t+=this.copySubsectionsIntoBuffer(this.subsections,e,t))-r},e.prototype.copySubsectionsIntoBuffer=function(e,t,i){for(var a=i,o=e.length,s=0;s<o;s++){var l=this.subsections[s],u=String(l[0].ref.objectNumber);i+=(0,r.copyStringIntoBuffer)(u,t,i),t[i++]=n.default.Space;var c=String(l.length);i+=(0,r.copyStringIntoBuffer)(c,t,i),t[i++]=n.default.Newline,i+=this.copyEntriesIntoBuffer(l,t,i)}return i-a},e.prototype.copyEntriesIntoBuffer=function(e,t,i){for(var a=e.length,o=0;o<a;o++){var s=e[o],l=(0,r.padStart)(String(s.offset),10,"0");i+=(0,r.copyStringIntoBuffer)(l,t,i),t[i++]=n.default.Space;var u=(0,r.padStart)(String(s.ref.generationNumber),5,"0");i+=(0,r.copyStringIntoBuffer)(u,t,i),t[i++]=n.default.Space,t[i++]=s.deleted?n.default.f:n.default.n,t[i++]=n.default.Space,t[i++]=n.default.Newline}return 20*a},e.prototype.append=function(e){if(0===this.chunkLength){this.subsections.push([e]),this.chunkIdx=0,this.chunkLength=1;return}var t=this.subsections[this.chunkIdx],n=t[this.chunkLength-1];e.ref.objectNumber-n.ref.objectNumber>1?(this.subsections.push([e]),this.chunkIdx+=1,this.chunkLength=1):(t.push(e),this.chunkLength+=1)},e.create=function(){return new e({ref:t.default.of(0,65535),offset:0,deleted:!0})},e.createEmpty=function(){return new e},e}()},70129:e=>{"use strict";e.s({default:()=>r});var t=e.i(110200);e.i(465248);var n=e.i(261205);let r=function(){function e(e){this.lastXRefOffset=String(e)}return e.prototype.toString=function(){return"startxref\n"+this.lastXRefOffset+"\n%%EOF"},e.prototype.sizeInBytes=function(){return 16+this.lastXRefOffset.length},e.prototype.copyBytesInto=function(e,r){var i=r;return e[r++]=t.default.s,e[r++]=t.default.t,e[r++]=t.default.a,e[r++]=t.default.r,e[r++]=t.default.t,e[r++]=t.default.x,e[r++]=t.default.r,e[r++]=t.default.e,e[r++]=t.default.f,e[r++]=t.default.Newline,r+=(0,n.copyStringIntoBuffer)(this.lastXRefOffset,e,r),e[r++]=t.default.Newline,e[r++]=t.default.Percent,e[r++]=t.default.Percent,e[r++]=t.default.E,e[r++]=t.default.O,e[r++]=t.default.F,r-i},e.forLastCrossRefSectionOffset=function(t){return new e(t)},e}()},356543:e=>{"use strict";e.s({default:()=>n});var t=e.i(110200);let n=function(){function e(e){this.dict=e}return e.prototype.toString=function(){return"trailer\n"+this.dict.toString()},e.prototype.sizeInBytes=function(){return 8+this.dict.sizeInBytes()},e.prototype.copyBytesInto=function(e,n){var r=n;return e[n++]=t.default.t,e[n++]=t.default.r,e[n++]=t.default.a,e[n++]=t.default.i,e[n++]=t.default.l,e[n++]=t.default.e,e[n++]=t.default.r,e[n++]=t.default.Newline,(n+=this.dict.copyBytesInto(e,n))-r},e.of=function(t){return new e(t)},e}()},797631:e=>{"use strict";e.s({default:()=>l});var t=e.i(436255),n=e.i(91355),r=e.i(865488),i=e.i(74001),a=e.i(110200);e.i(465248);var o=e.i(261205),s=e.i(411691);let l=function(e){function i(t,i,a){void 0===a&&(a=!0);var o=e.call(this,t.obj({}),a)||this;return o.objects=i,o.offsets=o.computeObjectOffsets(),o.offsetsString=o.computeOffsetsString(),o.dict.set(n.default.of("Type"),n.default.of("ObjStm")),o.dict.set(n.default.of("N"),r.default.of(o.objects.length)),o.dict.set(n.default.of("First"),r.default.of(o.offsetsString.length)),o}return(0,t.__extends)(i,e),i.prototype.getObjectsCount=function(){return this.objects.length},i.prototype.clone=function(e){return i.withContextAndObjects(e||this.dict.context,this.objects.slice(),this.encode)},i.prototype.getContentsString=function(){for(var e=this.offsetsString,t=0,n=this.objects.length;t<n;t++)e+=this.objects[t][1]+"\n";return e},i.prototype.getUnencodedContents=function(){for(var e=new Uint8Array(this.getUnencodedContentsSize()),t=(0,o.copyStringIntoBuffer)(this.offsetsString,e,0),n=0,r=this.objects.length;n<r;n++){var i=this.objects[n][1];t+=i.copyBytesInto(e,t),e[t++]=a.default.Newline}return e},i.prototype.getUnencodedContentsSize=function(){return this.offsetsString.length+(0,s.last)(this.offsets)[1]+(0,s.last)(this.objects)[1].sizeInBytes()+1},i.prototype.computeOffsetsString=function(){for(var e="",t=0,n=this.offsets.length;t<n;t++){var r=this.offsets[t];e+=r[0]+" "+r[1]+" "}return e},i.prototype.computeObjectOffsets=function(){for(var e=0,t=Array(this.objects.length),n=0,r=this.objects.length;n<r;n++){var i=this.objects[n],a=i[0],o=i[1];t[n]=[a.objectNumber,e],e+=o.sizeInBytes()+1}return t},i.withContextAndObjects=function(e,t,n){return void 0===n&&(n=!0),new i(e,t,n)},i}(i.default)},671329:e=>{"use strict";e.s({default:()=>c});var t=e.i(436255),n=e.i(77552),r=e.i(5500),i=e.i(70129),a=e.i(356543),o=e.i(797631),s=e.i(110200);e.i(465248);var l=e.i(261205),u=e.i(92830);let c=function(){function e(e,t){var n=this;this.parsedObjects=0,this.shouldWaitForTick=function(e){return n.parsedObjects+=e,n.parsedObjects%n.objectsPerTick==0},this.context=e,this.objectsPerTick=t}return e.prototype.serializeToBuffer=function(){return(0,t.__awaiter)(this,void 0,void 0,function(){var e,n,r,i,a,c,d,h,p,f,m,g,y,b,x,w,k;return(0,t.__generator)(this,function(t){switch(t.label){case 0:return[4,this.computeBufferSize()];case 1:n=(e=t.sent()).size,r=e.header,i=e.indirectObjects,a=e.xref,c=e.trailerDict,d=e.trailer,h=0,p=new Uint8Array(n),h+=r.copyBytesInto(p,h),p[h++]=s.default.Newline,p[h++]=s.default.Newline,f=0,m=i.length,t.label=2;case 2:if(!(f<m))return[3,5];if(y=(g=i[f])[0],b=g[1],x=String(y.objectNumber),h+=(0,l.copyStringIntoBuffer)(x,p,h),p[h++]=s.default.Space,w=String(y.generationNumber),h+=(0,l.copyStringIntoBuffer)(w,p,h),p[h++]=s.default.Space,p[h++]=s.default.o,p[h++]=s.default.b,p[h++]=s.default.j,p[h++]=s.default.Newline,h+=b.copyBytesInto(p,h),p[h++]=s.default.Newline,p[h++]=s.default.e,p[h++]=s.default.n,p[h++]=s.default.d,p[h++]=s.default.o,p[h++]=s.default.b,p[h++]=s.default.j,p[h++]=s.default.Newline,p[h++]=s.default.Newline,k=b instanceof o.default?b.getObjectsCount():1,!this.shouldWaitForTick(k))return[3,4];return[4,(0,u.waitForTick)()];case 3:t.sent(),t.label=4;case 4:return f++,[3,2];case 5:return a&&(h+=a.copyBytesInto(p,h),p[h++]=s.default.Newline),c&&(h+=c.copyBytesInto(p,h),p[h++]=s.default.Newline,p[h++]=s.default.Newline),h+=d.copyBytesInto(p,h),[2,p]}})})},e.prototype.computeIndirectObjectSize=function(e){var t=e[0],n=e[1];return t.sizeInBytes()+3+(n.sizeInBytes()+9)},e.prototype.createTrailerDict=function(){return this.context.obj({Size:this.context.largestObjectNumber+1,Root:this.context.trailerInfo.Root,Encrypt:this.context.trailerInfo.Encrypt,Info:this.context.trailerInfo.Info,ID:this.context.trailerInfo.ID})},e.prototype.computeBufferSize=function(){return(0,t.__awaiter)(this,void 0,void 0,function(){var e,o,s,l,c,d,h,p,f,m,g;return(0,t.__generator)(this,function(t){switch(t.label){case 0:o=(e=r.default.forVersion(1,7)).sizeInBytes()+2,s=n.default.create(),l=this.context.enumerateIndirectObjects(),c=0,d=l.length,t.label=1;case 1:if(!(c<d))return[3,4];if(p=(h=l[c])[0],s.addEntry(p,o),o+=this.computeIndirectObjectSize(h),!this.shouldWaitForTick(1))return[3,3];return[4,(0,u.waitForTick)()];case 2:t.sent(),t.label=3;case 3:return c++,[3,1];case 4:return f=o,o+=s.sizeInBytes()+1,m=a.default.of(this.createTrailerDict()),o+=m.sizeInBytes()+2,g=i.default.forLastCrossRefSectionOffset(f),[2,{size:o+=g.sizeInBytes(),header:e,indirectObjects:l,xref:s,trailerDict:m,trailer:g}]}})})},e.forContext=function(t,n){return new e(t,n)},e}()},273815:e=>{"use strict";e.s({default:()=>n});var t=e.i(436255);let n=function(e){function n(t){var n=e.call(this)||this;return n.data=t,n}return(0,t.__extends)(n,e),n.prototype.clone=function(){return n.of(this.data.slice())},n.prototype.toString=function(){return"PDFInvalidObject("+this.data.length+" bytes)"},n.prototype.sizeInBytes=function(){return this.data.length},n.prototype.copyBytesInto=function(e,t){for(var n=this.data.length,r=0;r<n;r++)e[t++]=this.data[r];return n},n.of=function(e){return new n(e)},n}(e.i(539397).default)},665619:e=>{"use strict";e.s({default:()=>u});var t,n=e.i(436255),r=e.i(91355),i=e.i(927657),a=e.i(74001);e.i(465248);var o=e.i(906677),s=e.i(264900),l=e.i(411691);!function(e){e[e.Deleted=0]="Deleted",e[e.Uncompressed=1]="Uncompressed",e[e.Compressed=2]="Compressed"}(t||(t={}));let u=function(e){function a(n,i,a){void 0===a&&(a=!0);var l=e.call(this,n,a)||this;return l.computeIndex=function(){for(var e=[],t=0,n=0,r=l.entries.length;n<r;n++){var i=l.entries[n],a=l.entries[n-1];0===n?e.push(i.ref.objectNumber):i.ref.objectNumber-a.ref.objectNumber>1&&(e.push(t),e.push(i.ref.objectNumber),t=0),t+=1}return e.push(t),e},l.computeEntryTuples=function(){for(var e=Array(l.entries.length),n=0,r=l.entries.length;n<r;n++){var i=l.entries[n];if(i.type===t.Deleted){var a=i.type,o=i.nextFreeObjectNumber,s=i.ref;e[n]=[a,o,s.generationNumber]}if(i.type===t.Uncompressed){var a=i.type,u=i.offset,s=i.ref;e[n]=[a,u,s.generationNumber]}if(i.type===t.Compressed){var a=i.type,c=i.objectStreamRef,d=i.index;e[n]=[a,c.objectNumber,d]}}return e},l.computeMaxEntryByteWidths=function(){for(var e=l.entryTuplesCache.access(),t=[0,0,0],n=0,r=e.length;n<r;n++){var i=e[n],a=i[0],s=i[1],u=i[2],c=(0,o.sizeInBytes)(a),d=(0,o.sizeInBytes)(s),h=(0,o.sizeInBytes)(u);c>t[0]&&(t[0]=c),d>t[1]&&(t[1]=d),h>t[2]&&(t[2]=h)}return t},l.entries=i||[],l.entryTuplesCache=s.Cache.populatedBy(l.computeEntryTuples),l.maxByteWidthsCache=s.Cache.populatedBy(l.computeMaxEntryByteWidths),l.indexCache=s.Cache.populatedBy(l.computeIndex),n.set(r.default.of("Type"),r.default.of("XRef")),l}return(0,n.__extends)(a,e),a.prototype.addDeletedEntry=function(e,n){var r=t.Deleted;this.entries.push({type:r,ref:e,nextFreeObjectNumber:n}),this.entryTuplesCache.invalidate(),this.maxByteWidthsCache.invalidate(),this.indexCache.invalidate(),this.contentsCache.invalidate()},a.prototype.addUncompressedEntry=function(e,n){var r=t.Uncompressed;this.entries.push({type:r,ref:e,offset:n}),this.entryTuplesCache.invalidate(),this.maxByteWidthsCache.invalidate(),this.indexCache.invalidate(),this.contentsCache.invalidate()},a.prototype.addCompressedEntry=function(e,n,r){var i=t.Compressed;this.entries.push({type:i,ref:e,objectStreamRef:n,index:r}),this.entryTuplesCache.invalidate(),this.maxByteWidthsCache.invalidate(),this.indexCache.invalidate(),this.contentsCache.invalidate()},a.prototype.clone=function(e){var t=this.dict,n=this.entries,r=this.encode;return a.of(t.clone(e),n.slice(),r)},a.prototype.getContentsString=function(){for(var e=this.entryTuplesCache.access(),t=this.maxByteWidthsCache.access(),n="",r=0,i=e.length;r<i;r++){for(var a=e[r],s=a[0],u=a[1],c=a[2],d=(0,l.reverseArray)((0,o.bytesFor)(s)),h=(0,l.reverseArray)((0,o.bytesFor)(u)),p=(0,l.reverseArray)((0,o.bytesFor)(c)),f=t[0]-1;f>=0;f--)n+=(d[f]||0).toString(2);for(var f=t[1]-1;f>=0;f--)n+=(h[f]||0).toString(2);for(var f=t[2]-1;f>=0;f--)n+=(p[f]||0).toString(2)}return n},a.prototype.getUnencodedContents=function(){for(var e=this.entryTuplesCache.access(),t=this.maxByteWidthsCache.access(),n=new Uint8Array(this.getUnencodedContentsSize()),r=0,i=0,a=e.length;i<a;i++){for(var s=e[i],u=s[0],c=s[1],d=s[2],h=(0,l.reverseArray)((0,o.bytesFor)(u)),p=(0,l.reverseArray)((0,o.bytesFor)(c)),f=(0,l.reverseArray)((0,o.bytesFor)(d)),m=t[0]-1;m>=0;m--)n[r++]=h[m]||0;for(var m=t[1]-1;m>=0;m--)n[r++]=p[m]||0;for(var m=t[2]-1;m>=0;m--)n[r++]=f[m]||0}return n},a.prototype.getUnencodedContentsSize=function(){var e=this.maxByteWidthsCache.access();return(0,l.sum)(e)*this.entries.length},a.prototype.updateDict=function(){e.prototype.updateDict.call(this);var t=this.maxByteWidthsCache.access(),n=this.indexCache.access(),i=this.dict.context;this.dict.set(r.default.of("W"),i.obj(t)),this.dict.set(r.default.of("Index"),i.obj(n))},a.create=function(e,t){void 0===t&&(t=!0);var n=new a(e,[],t);return n.addDeletedEntry(i.default.of(0,65535),0),n},a.of=function(e,t,n){return void 0===n&&(n=!0),new a(e,t,n)},a}(a.default)},550353:e=>{"use strict";e.s({default:()=>f});var t=e.i(436255),n=e.i(5500),r=e.i(70129),i=e.i(273815),a=e.i(91355),o=e.i(865488),s=e.i(927657),l=e.i(13139),u=e.i(665619),c=e.i(797631),d=e.i(671329);e.i(465248);var h=e.i(411691),p=e.i(92830);let f=function(e){function d(t,n,r,i){var a=e.call(this,t,n)||this;return a.encodeStreams=r,a.objectsPerStream=i,a}return(0,t.__extends)(d,e),d.prototype.computeBufferSize=function(){return(0,t.__awaiter)(this,void 0,void 0,function(){var e,d,f,m,g,y,b,x,w,k,S,_,C,A,E,T,M,I,N;return(0,t.__generator)(this,function(t){switch(t.label){case 0:e=this.context.largestObjectNumber+1,f=(d=n.default.forVersion(1,7)).sizeInBytes()+2,m=u.default.create(this.createTrailerDict(),this.encodeStreams),g=[],y=[],b=[],x=this.context.enumerateIndirectObjects(),w=0,k=x.length,t.label=1;case 1:if(!(w<k))return[3,6];if(_=(S=x[w])[0],C=S[1],!(_===this.context.trailerInfo.Encrypt||C instanceof l.default||C instanceof i.default||0!==_.generationNumber))return[3,4];if(g.push(S),m.addUncompressedEntry(_,f),f+=this.computeIndirectObjectSize(S),!this.shouldWaitForTick(1))return[3,3];return[4,(0,p.waitForTick)()];case 2:t.sent(),t.label=3;case 3:return[3,5];case 4:A=(0,h.last)(y),E=(0,h.last)(b),A&&A.length%this.objectsPerStream!=0||(A=[],y.push(A),E=s.default.of(e++),b.push(E)),m.addCompressedEntry(_,E,A.length),A.push(S),t.label=5;case 5:return w++,[3,1];case 6:w=0,k=y.length,t.label=7;case 7:if(!(w<k))return[3,10];if(A=y[w],_=b[w],T=c.default.withContextAndObjects(this.context,A,this.encodeStreams),m.addUncompressedEntry(_,f),f+=this.computeIndirectObjectSize([_,T]),g.push([_,T]),!this.shouldWaitForTick(A.length))return[3,9];return[4,(0,p.waitForTick)()];case 8:t.sent(),t.label=9;case 9:return w++,[3,7];case 10:return M=s.default.of(e++),m.dict.set(a.default.of("Size"),o.default.of(e)),m.addUncompressedEntry(M,f),I=f,f+=this.computeIndirectObjectSize([M,m]),g.push([M,m]),N=r.default.forLastCrossRefSectionOffset(I),[2,{size:f+=N.sizeInBytes(),header:d,indirectObjects:g,trailer:N}]}})})},d.forContext=function(e,t,n,r){return void 0===n&&(n=!0),void 0===r&&(r=50),new d(e,t,n,r)},d}(d.default)},934271:e=>{"use strict";e.s({default:()=>l});var t=e.i(436255),n=e.i(539397),r=e.i(110200);e.i(465248);var i=e.i(261205),a=e.i(485346),o=e.i(486424),s=e.i(143682);let l=function(e){function n(t){var n=e.call(this)||this;return n.value=t,n}return(0,t.__extends)(n,e),n.prototype.asBytes=function(){for(var e=this.value+(this.value.length%2==1?"0":""),t=e.length,n=new Uint8Array(e.length/2),r=0,i=0;r<t;){var a=parseInt(e.substring(r,r+2),16);n[i]=a,r+=2,i+=1}return n},n.prototype.decodeText=function(){var e=this.asBytes();return(0,a.hasUtf16BOM)(e)?(0,a.utf16Decode)(e):(0,o.pdfDocEncodingDecode)(e)},n.prototype.decodeDate=function(){var e=this.decodeText(),t=(0,i.parseDate)(e);if(!t)throw new s.InvalidPDFDateStringError(e);return t},n.prototype.asString=function(){return this.value},n.prototype.clone=function(){return n.of(this.value)},n.prototype.toString=function(){return"<"+this.value+">"},n.prototype.sizeInBytes=function(){return this.value.length+2},n.prototype.copyBytesInto=function(e,t){return e[t++]=r.default.LessThan,t+=(0,i.copyStringIntoBuffer)(this.value,e,t),e[t++]=r.default.GreaterThan,this.value.length+2},n.of=function(e){return new n(e)},n.fromText=function(e){for(var t=(0,a.utf16Encode)(e),r="",o=0,s=t.length;o<s;o++)r+=(0,i.toHexStringOfMinLength)(t[o],4);return new n(r)},n}(n.default)},16377:e=>{"use strict";e.s({default:()=>a}),e.i(65074);var t=e.i(48771),n=e.i(873469),r=e.i(934271);e.i(465248);var i=e.i(261205);let a=function(){function e(e,r){this.encoding=e===n.FontNames.ZapfDingbats?t.Encodings.ZapfDingbats:e===n.FontNames.Symbol?t.Encodings.Symbol:t.Encodings.WinAnsi,this.font=n.Font.load(e),this.fontName=this.font.FontName,this.customName=r}return e.prototype.encodeText=function(e){for(var t=this.encodeTextAsGlyphs(e),n=Array(t.length),a=0,o=t.length;a<o;a++)n[a]=(0,i.toHexString)(t[a].code);return r.default.of(n.join(""))},e.prototype.widthOfTextAtSize=function(e,t){for(var n=this.encodeTextAsGlyphs(e),r=0,i=0,a=n.length;i<a;i++){var o=n[i].name,s=(n[i+1]||{}).name,l=this.font.getXAxisKerningForPair(o,s)||0;r+=this.widthOfGlyph(o)+l}return t/1e3*r},e.prototype.heightOfFontAtSize=function(e,t){void 0===t&&(t={});var n=t.descender,r=this.font,i=r.Ascender,a=r.Descender,o=r.FontBBox,s=(i||o[3])-(a||o[1]);return void 0===n||n||(s+=a||0),s/1e3*e},e.prototype.sizeOfFontAtHeight=function(e){var t=this.font,n=t.Ascender,r=t.Descender,i=t.FontBBox;return 1e3*e/((n||i[3])-(r||i[1]))},e.prototype.embedIntoContext=function(e,n){var r=e.obj({Type:"Font",Subtype:"Type1",BaseFont:this.customName||this.fontName,Encoding:this.encoding===t.Encodings.WinAnsi?"WinAnsiEncoding":void 0});return n?(e.assign(n,r),n):e.register(r)},e.prototype.widthOfGlyph=function(e){return this.font.getWidthOfGlyph(e)||250},e.prototype.encodeTextAsGlyphs=function(e){for(var t=Array.from(e),n=Array(t.length),r=0,a=t.length;r<a;r++){var o=(0,i.toCodePoint)(t[r]);n[r]=this.encoding.encodeUnicodeCodePoint(o)}return n},e.for=function(t,n){return new e(t,n)},e}()},709772:e=>{"use strict";e.s({createCmap:()=>r}),e.i(465248);var t=e.i(261205),n=e.i(485346),r=function(e,t){for(var n=Array(e.length),r=0,l=e.length;r<l;r++){var u=e[r],c=a(o(t(u))),d=a.apply(void 0,u.codePoints.map(s));n[r]=[c,d]}return i(n)},i=function(e){return"/CIDInit /ProcSet findresource begin\n12 dict begin\nbegincmap\n/CIDSystemInfo <<\n  /Registry (Adobe)\n  /Ordering (UCS)\n  /Supplement 0\n>> def\n/CMapName /Adobe-Identity-UCS def\n/CMapType 2 def\n1 begincodespacerange\n<0000><ffff>\nendcodespacerange\n"+e.length+" beginbfchar\n"+e.map(function(e){return e[0]+" "+e[1]}).join("\n")+"\nendbfchar\nendcmap\nCMapName currentdict /CMap defineresource pop\nend\nend"},a=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"<"+e.join("")+">"},o=function(e){return(0,t.toHexStringOfMinLength)(e,4)},s=function(e){if((0,n.isWithinBMP)(e))return o(e);if((0,n.hasSurrogates)(e)){var r=(0,n.highSurrogate)(e),i=(0,n.lowSurrogate)(e);return""+o(r)+o(i)}throw Error("0x"+(0,t.toHexString)(e)+" is not a valid UTF-8 or UTF-16 codepoint.")}},746692:e=>{"use strict";e.s({deriveFontFlags:()=>n});var t=function(e){var t=0,n=function(e){t|=1<<e-1};return e.fixedPitch&&n(1),e.serif&&n(2),e.symbolic&&n(3),e.script&&n(4),e.nonsymbolic&&n(6),e.italic&&n(7),e.allCap&&n(17),e.smallCap&&n(18),e.forceBold&&n(19),t},n=function(e){var n=e["OS/2"]?e["OS/2"].sFamilyClass:0;return t({fixedPitch:e.post.isFixedPitch,serif:1<=n&&n<=7,symbolic:!0,script:10===n,italic:e.head.macStyle.italic})}},738472:e=>{"use strict";e.s({default:()=>l});var t=e.i(436255),n=e.i(539397),r=e.i(110200);e.i(465248);var i=e.i(261205),a=e.i(485346),o=e.i(486424),s=e.i(143682);let l=function(e){function n(t){var n=e.call(this)||this;return n.value=t,n}return(0,t.__extends)(n,e),n.prototype.asBytes=function(){for(var e=[],t="",n=!1,a=function(t){void 0!==t&&e.push(t),n=!1},o=0,s=this.value.length;o<s;o++){var l=this.value[o],u=(0,i.toCharCode)(l),c=this.value[o+1];n?u===r.default.Newline||u===r.default.CarriageReturn?a():u===r.default.n?a(r.default.Newline):u===r.default.r?a(r.default.CarriageReturn):u===r.default.t?a(r.default.Tab):u===r.default.b?a(r.default.Backspace):u===r.default.f?a(r.default.FormFeed):u===r.default.LeftParen?a(r.default.LeftParen):u===r.default.RightParen?a(r.default.RightParen):u===r.default.Backspace?a(r.default.BackSlash):u>=r.default.Zero&&u<=r.default.Seven?3!==(t+=l).length&&c>="0"&&c<="7"||(a(parseInt(t,8)),t=""):a(u):u===r.default.BackSlash?n=!0:a(u)}return new Uint8Array(e)},n.prototype.decodeText=function(){var e=this.asBytes();return(0,a.hasUtf16BOM)(e)?(0,a.utf16Decode)(e):(0,o.pdfDocEncodingDecode)(e)},n.prototype.decodeDate=function(){var e=this.decodeText(),t=(0,i.parseDate)(e);if(!t)throw new s.InvalidPDFDateStringError(e);return t},n.prototype.asString=function(){return this.value},n.prototype.clone=function(){return n.of(this.value)},n.prototype.toString=function(){return"("+this.value+")"},n.prototype.sizeInBytes=function(){return this.value.length+2},n.prototype.copyBytesInto=function(e,t){return e[t++]=r.default.LeftParen,t+=(0,i.copyStringIntoBuffer)(this.value,e,t),e[t++]=r.default.RightParen,this.value.length+2},n.of=function(e){return new n(e)},n.fromDate=function(e){return new n("D:"+(0,i.padStart)(String(e.getUTCFullYear()),4,"0")+(0,i.padStart)(String(e.getUTCMonth()+1),2,"0")+(0,i.padStart)(String(e.getUTCDate()),2,"0")+(0,i.padStart)(String(e.getUTCHours()),2,"0")+(0,i.padStart)(String(e.getUTCMinutes()),2,"0")+(0,i.padStart)(String(e.getUTCSeconds()),2,"0")+"Z")},n}(n.default)},17313:e=>{"use strict";e.s({default:()=>u});var t=e.i(436255),n=e.i(709772),r=e.i(746692),i=e.i(934271),a=e.i(738472);e.i(465248);var o=e.i(411691),s=e.i(264900),l=e.i(261205);let u=function(){function e(e,t,n,r){var i=this;this.allGlyphsInFontSortedById=function(){for(var e=Array(i.font.characterSet.length),t=0,n=e.length;t<n;t++){var r=i.font.characterSet[t];e[t]=i.font.glyphForCodePoint(r)}return(0,o.sortedUniq)(e.sort(o.byAscendingId),function(e){return e.id})},this.font=e,this.scale=1e3/this.font.unitsPerEm,this.fontData=t,this.fontName=this.font.postscriptName||"Font",this.customName=n,this.fontFeatures=r,this.baseFontName="",this.glyphCache=s.Cache.populatedBy(this.allGlyphsInFontSortedById)}return e.for=function(n,r,i,a){return(0,t.__awaiter)(this,void 0,void 0,function(){return(0,t.__generator)(this,function(t){switch(t.label){case 0:return[4,n.create(r)];case 1:return[2,new e(t.sent(),r,i,a)]}})})},e.prototype.encodeText=function(e){for(var t=this.font.layout(e,this.fontFeatures).glyphs,n=Array(t.length),r=0,a=t.length;r<a;r++)n[r]=(0,l.toHexStringOfMinLength)(t[r].id,4);return i.default.of(n.join(""))},e.prototype.widthOfTextAtSize=function(e,t){for(var n=this.font.layout(e,this.fontFeatures).glyphs,r=0,i=0,a=n.length;i<a;i++)r+=n[i].advanceWidth*this.scale;return t/1e3*r},e.prototype.heightOfFontAtSize=function(e,t){void 0===t&&(t={});var n=t.descender,r=this.font,i=r.ascent,a=r.descent,o=r.bbox,s=(i||o.maxY)*this.scale-(a||o.minY)*this.scale;return void 0===n||n||(s-=Math.abs(a)||0),s/1e3*e},e.prototype.sizeOfFontAtHeight=function(e){var t=this.font,n=t.ascent,r=t.descent,i=t.bbox;return 1e3*e/((n||i.maxY)*this.scale-(r||i.minY)*this.scale)},e.prototype.embedIntoContext=function(e,t){return this.baseFontName=this.customName||e.addRandomSuffix(this.fontName),this.embedFontDict(e,t)},e.prototype.embedFontDict=function(e,n){return(0,t.__awaiter)(this,void 0,void 0,function(){var r,i,a;return(0,t.__generator)(this,function(t){switch(t.label){case 0:return[4,this.embedCIDFontDict(e)];case 1:if(r=t.sent(),i=this.embedUnicodeCmap(e),a=e.obj({Type:"Font",Subtype:"Type0",BaseFont:this.baseFontName,Encoding:"Identity-H",DescendantFonts:[r],ToUnicode:i}),n)return e.assign(n,a),[2,n];return[2,e.register(a)]}})})},e.prototype.isCFF=function(){return this.font.cff},e.prototype.embedCIDFontDict=function(e){return(0,t.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,t.__generator)(this,function(t){switch(t.label){case 0:return[4,this.embedFontDescriptor(e)];case 1:return n=t.sent(),r=e.obj({Type:"Font",Subtype:this.isCFF()?"CIDFontType0":"CIDFontType2",CIDToGIDMap:"Identity",BaseFont:this.baseFontName,CIDSystemInfo:{Registry:a.default.of("Adobe"),Ordering:a.default.of("Identity"),Supplement:0},FontDescriptor:n,W:this.computeWidths()}),[2,e.register(r)]}})})},e.prototype.embedFontDescriptor=function(e){return(0,t.__awaiter)(this,void 0,void 0,function(){var n,i,a,o,s,l,u,c,d,h,p,f,m,g,y;return(0,t.__generator)(this,function(t){switch(t.label){case 0:return[4,this.embedFontStream(e)];case 1:return n=t.sent(),i=this.scale,o=(a=this.font).italicAngle,s=a.ascent,l=a.descent,u=a.capHeight,c=a.xHeight,h=(d=this.font.bbox).minX,p=d.minY,f=d.maxX,m=d.maxY,g=e.obj(((y={Type:"FontDescriptor",FontName:this.baseFontName,Flags:(0,r.deriveFontFlags)(this.font),FontBBox:[h*i,p*i,f*i,m*i],ItalicAngle:o,Ascent:s*i,Descent:l*i,CapHeight:(u||s)*i,XHeight:(c||0)*i,StemV:0})[this.isCFF()?"FontFile3":"FontFile2"]=n,y)),[2,e.register(g)]}})})},e.prototype.serializeFont=function(){return(0,t.__awaiter)(this,void 0,void 0,function(){return(0,t.__generator)(this,function(e){return[2,this.fontData]})})},e.prototype.embedFontStream=function(e){return(0,t.__awaiter)(this,void 0,void 0,function(){var n,r,i;return(0,t.__generator)(this,function(t){switch(t.label){case 0:return i=(r=e).flateStream,[4,this.serializeFont()];case 1:return n=i.apply(r,[t.sent(),{Subtype:this.isCFF()?"CIDFontType0C":void 0}]),[2,e.register(n)]}})})},e.prototype.embedUnicodeCmap=function(e){var t=(0,n.createCmap)(this.glyphCache.access(),this.glyphId.bind(this)),r=e.flateStream(t);return e.register(r)},e.prototype.glyphId=function(e){return e?e.id:-1},e.prototype.computeWidths=function(){for(var e=this.glyphCache.access(),t=[],n=[],r=0,i=e.length;r<i;r++){var a=e[r],o=e[r-1],s=this.glyphId(a),l=this.glyphId(o);0===r?t.push(s):s-l!=1&&(t.push(n),t.push(s),n=[]),n.push(a.advanceWidth*this.scale)}return t.push(n),t},e}()},895970:e=>{"use strict";e.s({default:()=>s});var t=e.i(436255),n=e.i(17313),r=e.i(934271);e.i(465248);var i=e.i(264900),a=e.i(411691),o=e.i(261205);let s=function(e){function n(t,n,r,a){var o=e.call(this,t,n,r,a)||this;return o.subset=o.font.createSubset(),o.glyphs=[],o.glyphCache=i.Cache.populatedBy(function(){return o.glyphs}),o.glyphIdMap=new Map,o}return(0,t.__extends)(n,e),n.for=function(e,r,i,a){return(0,t.__awaiter)(this,void 0,void 0,function(){return(0,t.__generator)(this,function(t){switch(t.label){case 0:return[4,e.create(r)];case 1:return[2,new n(t.sent(),r,i,a)]}})})},n.prototype.encodeText=function(e){for(var t=this.font.layout(e,this.fontFeatures).glyphs,n=Array(t.length),i=0,a=t.length;i<a;i++){var s=t[i],l=this.subset.includeGlyph(s);this.glyphs[l-1]=s,this.glyphIdMap.set(s.id,l),n[i]=(0,o.toHexStringOfMinLength)(l,4)}return this.glyphCache.invalidate(),r.default.of(n.join(""))},n.prototype.isCFF=function(){return this.subset.cff},n.prototype.glyphId=function(e){return e?this.glyphIdMap.get(e.id):-1},n.prototype.serializeFont=function(){var e=this;return new Promise(function(t,n){var r=[];e.subset.encodeStream().on("data",function(e){return r.push(e)}).on("end",function(){return t((0,a.mergeUint8Arrays)(r))}).on("error",function(e){return n(e)})})},n}(n.default)},969951:e=>{"use strict";e.s({AFRelationship:()=>t,default:()=>a});var t,n=e.i(436255),r=e.i(738472),i=e.i(934271);!function(e){e.Source="Source",e.Data="Data",e.Alternative="Alternative",e.Supplement="Supplement",e.EncryptedPayload="EncryptedPayload",e.FormData="EncryptedPayload",e.Schema="Schema",e.Unspecified="Unspecified"}(t||(t={}));let a=function(){function e(e,t,n){void 0===n&&(n={}),this.fileData=e,this.fileName=t,this.options=n}return e.for=function(t,n,r){return void 0===r&&(r={}),new e(t,n,r)},e.prototype.embedIntoContext=function(e,t){return(0,n.__awaiter)(this,void 0,void 0,function(){var a,o,s,l,u,c,d,h,p;return(0,n.__generator)(this,function(n){return(o=(a=this.options).mimeType,s=a.description,l=a.creationDate,u=a.modificationDate,c=a.afRelationship,d=e.flateStream(this.fileData,{Type:"EmbeddedFile",Subtype:null!=o?o:void 0,Params:{Size:this.fileData.length,CreationDate:l?r.default.fromDate(l):void 0,ModDate:u?r.default.fromDate(u):void 0}}),h=e.register(d),p=e.obj({Type:"Filespec",F:r.default.of(this.fileName),UF:i.default.fromText(this.fileName),EF:{F:h},Desc:s?i.default.fromText(s):void 0,AFRelationship:null!=c?c:void 0}),t)?(e.assign(t,p),[2,t]):[2,e.register(p)]})})},e}()},217207:e=>{"use strict";e.s({default:()=>a});var t,n=e.i(436255),r=[65472,65473,65474,65475,65477,65478,65479,65480,65481,65482,65483,65484,65485,65486,65487];!function(e){e.DeviceGray="DeviceGray",e.DeviceRGB="DeviceRGB",e.DeviceCMYK="DeviceCMYK"}(t||(t={}));var i={1:t.DeviceGray,3:t.DeviceRGB,4:t.DeviceCMYK};let a=function(){function e(e,t,n,r,i){this.imageData=e,this.bitsPerComponent=t,this.width=n,this.height=r,this.colorSpace=i}return e.for=function(t){return(0,n.__awaiter)(this,void 0,void 0,function(){var a,o,s,l,u,c,d;return(0,n.__generator)(this,function(n){if(65496!==(a=new DataView(t.buffer)).getUint16(0))throw Error("SOI not found in JPEG");for(o=2;o<a.byteLength&&(s=a.getUint16(o),o+=2,!r.includes(s));)o+=a.getUint16(o);if(!r.includes(s))throw Error("Invalid JPEG");if(o+=2,l=a.getUint8(o++),u=a.getUint16(o),o+=2,c=a.getUint16(o),o+=2,!(d=i[a.getUint8(o++)]))throw Error("Unknown JPEG channel.");return[2,new e(t,l,c,u,d)]})})},e.prototype.embedIntoContext=function(e,r){return(0,n.__awaiter)(this,void 0,void 0,function(){var i;return(0,n.__generator)(this,function(n){return(i=e.stream(this.imageData,{Type:"XObject",Subtype:"Image",BitsPerComponent:this.bitsPerComponent,Width:this.width,Height:this.height,ColorSpace:this.colorSpace,Filter:"DCTDecode",Decode:this.colorSpace===t.DeviceCMYK?[1,0,1,0,1,0,1,0]:void 0}),r)?(e.assign(r,i),[2,r]):[2,e.register(i)]})})},e}()},186266:e=>{"use strict";e.s({default:()=>r});var t=e.i(567671),n={};n.toRGBA8=function(e){var t=e.width,r=e.height;if(null==e.tabs.acTL)return[n.toRGBA8.decodeImage(e.data,t,r,e).buffer];var i=[];null==e.frames[0].data&&(e.frames[0].data=e.data);for(var a=t*r*4,o=new Uint8Array(a),s=new Uint8Array(a),l=new Uint8Array(a),u=0;u<e.frames.length;u++){var c=e.frames[u],d=c.rect.x,h=c.rect.y,p=c.rect.width,f=c.rect.height,m=n.toRGBA8.decodeImage(c.data,p,f,e);if(0!=u)for(var g=0;g<a;g++)l[g]=o[g];if(0==c.blend?n._copyTile(m,p,f,o,t,r,d,h,0):1==c.blend&&n._copyTile(m,p,f,o,t,r,d,h,1),i.push(o.buffer.slice(0)),0==c.dispose);else if(1==c.dispose)n._copyTile(s,p,f,o,t,r,d,h,0);else if(2==c.dispose)for(var g=0;g<a;g++)o[g]=l[g]}return i},n.toRGBA8.decodeImage=function(e,t,r,i){var a=t*r,o=Math.ceil(t*n.decode._getBPP(i)/8),s=new Uint8Array(4*a),l=new Uint32Array(s.buffer),u=i.ctype,c=i.depth,d=n._bin.readUshort;if(Date.now(),6==u){var h=a<<2;if(8==c)for(var p=0;p<h;p+=4)s[p]=e[p],s[p+1]=e[p+1],s[p+2]=e[p+2],s[p+3]=e[p+3];if(16==c)for(var p=0;p<h;p++)s[p]=e[p<<1]}else if(2==u){var f=i.tabs.tRNS;if(null==f){if(8==c)for(var p=0;p<a;p++){var m=3*p;l[p]=-0x1000000|e[m+2]<<16|e[m+1]<<8|e[m]}if(16==c)for(var p=0;p<a;p++){var m=6*p;l[p]=-0x1000000|e[m+4]<<16|e[m+2]<<8|e[m]}}else{var g=f[0],y=f[1],b=f[2];if(8==c)for(var p=0;p<a;p++){var x=p<<2,m=3*p;l[p]=-0x1000000|e[m+2]<<16|e[m+1]<<8|e[m],e[m]==g&&e[m+1]==y&&e[m+2]==b&&(s[x+3]=0)}if(16==c)for(var p=0;p<a;p++){var x=p<<2,m=6*p;l[p]=-0x1000000|e[m+4]<<16|e[m+2]<<8|e[m],d(e,m)==g&&d(e,m+2)==y&&d(e,m+4)==b&&(s[x+3]=0)}}}else if(3==u){var w=i.tabs.PLTE,k=i.tabs.tRNS,S=k?k.length:0;if(1==c)for(var _=0;_<r;_++)for(var C=_*o,A=_*t,p=0;p<t;p++){var x=A+p<<2,E=e[C+(p>>3)]>>7-(7&p)&1,T=3*E;s[x]=w[T],s[x+1]=w[T+1],s[x+2]=w[T+2],s[x+3]=E<S?k[E]:255}if(2==c)for(var _=0;_<r;_++)for(var C=_*o,A=_*t,p=0;p<t;p++){var x=A+p<<2,E=e[C+(p>>2)]>>6-((3&p)<<1)&3,T=3*E;s[x]=w[T],s[x+1]=w[T+1],s[x+2]=w[T+2],s[x+3]=E<S?k[E]:255}if(4==c)for(var _=0;_<r;_++)for(var C=_*o,A=_*t,p=0;p<t;p++){var x=A+p<<2,E=e[C+(p>>1)]>>4-((1&p)<<2)&15,T=3*E;s[x]=w[T],s[x+1]=w[T+1],s[x+2]=w[T+2],s[x+3]=E<S?k[E]:255}if(8==c)for(var p=0;p<a;p++){var x=p<<2,E=e[p],T=3*E;s[x]=w[T],s[x+1]=w[T+1],s[x+2]=w[T+2],s[x+3]=E<S?k[E]:255}}else if(4==u){if(8==c)for(var p=0;p<a;p++){var x=p<<2,M=p<<1,I=e[M];s[x]=I,s[x+1]=I,s[x+2]=I,s[x+3]=e[M+1]}if(16==c)for(var p=0;p<a;p++){var x=p<<2,M=p<<2,I=e[M];s[x]=I,s[x+1]=I,s[x+2]=I,s[x+3]=e[M+2]}}else if(0==u)for(var g=i.tabs.tRNS?i.tabs.tRNS:-1,_=0;_<r;_++){var N=_*o,D=_*t;if(1==c)for(var P=0;P<t;P++){var I=255*(e[N+(P>>>3)]>>>7-(7&P)&1),R=255*(I!=255*g);l[D+P]=R<<24|I<<16|I<<8|I}else if(2==c)for(var P=0;P<t;P++){var I=85*(e[N+(P>>>2)]>>>6-((3&P)<<1)&3),R=255*(I!=85*g);l[D+P]=R<<24|I<<16|I<<8|I}else if(4==c)for(var P=0;P<t;P++){var I=17*(e[N+(P>>>1)]>>>4-((1&P)<<2)&15),R=255*(I!=17*g);l[D+P]=R<<24|I<<16|I<<8|I}else if(8==c)for(var P=0;P<t;P++){var I=e[N+P],R=255*(I!=g);l[D+P]=R<<24|I<<16|I<<8|I}else if(16==c)for(var P=0;P<t;P++){var I=e[N+(P<<1)],R=255*(d(e,N+(P<<p))!=g);l[D+P]=R<<24|I<<16|I<<8|I}}return s},n.decode=function(e){for(var t,r=new Uint8Array(e),i=8,a=n._bin,o=a.readUshort,s=a.readUint,l={tabs:{},frames:[]},u=new Uint8Array(r.length),c=0,d=0,h=[137,80,78,71,13,10,26,10],p=0;p<8;p++)if(r[p]!=h[p])throw"The input is not a PNG file!";for(;i<r.length;){var f=a.readUint(r,i);i+=4;var m=a.readASCII(r,i,4);if(i+=4,"IHDR"==m)n.decode._IHDR(r,i,l);else if("IDAT"==m){for(var p=0;p<f;p++)u[c+p]=r[i+p];c+=f}else if("acTL"==m)l.tabs[m]={num_frames:s(r,i),num_plays:s(r,i+4)},t=new Uint8Array(r.length);else if("fcTL"==m){if(0!=d){var g=l.frames[l.frames.length-1];g.data=n.decode._decompress(l,t.slice(0,d),g.rect.width,g.rect.height),d=0}var y={x:s(r,i+12),y:s(r,i+16),width:s(r,i+4),height:s(r,i+8)},b=o(r,i+22),x={rect:y,delay:Math.round(1e3*(b=o(r,i+20)/(0==b?100:b))),dispose:r[i+24],blend:r[i+25]};l.frames.push(x)}else if("fdAT"==m){for(var p=0;p<f-4;p++)t[d+p]=r[i+p+4];d+=f-4}else if("pHYs"==m)l.tabs[m]=[a.readUint(r,i),a.readUint(r,i+4),r[i+8]];else if("cHRM"==m){l.tabs[m]=[];for(var p=0;p<8;p++)l.tabs[m].push(a.readUint(r,i+4*p))}else if("tEXt"==m){null==l.tabs[m]&&(l.tabs[m]={});var w=a.nextZero(r,i),k=a.readASCII(r,i,w-i),S=a.readASCII(r,w+1,i+f-w-1);l.tabs[m][k]=S}else if("iTXt"==m){null==l.tabs[m]&&(l.tabs[m]={});var w=0,_=i;w=a.nextZero(r,_);var k=a.readASCII(r,_,w-_);r[_=w+1],r[_+1],_+=2,w=a.nextZero(r,_),a.readASCII(r,_,w-_),_=w+1,w=a.nextZero(r,_),a.readUTF8(r,_,w-_),_=w+1;var S=a.readUTF8(r,_,f-(_-i));l.tabs[m][k]=S}else if("PLTE"==m)l.tabs[m]=a.readBytes(r,i,f);else if("hIST"==m){var C=l.tabs.PLTE.length/3;l.tabs[m]=[];for(var p=0;p<C;p++)l.tabs[m].push(o(r,i+2*p))}else if("tRNS"==m)3==l.ctype?l.tabs[m]=a.readBytes(r,i,f):0==l.ctype?l.tabs[m]=o(r,i):2==l.ctype&&(l.tabs[m]=[o(r,i),o(r,i+2),o(r,i+4)]);else if("gAMA"==m)l.tabs[m]=a.readUint(r,i)/1e5;else if("sRGB"==m)l.tabs[m]=r[i];else if("bKGD"==m)0==l.ctype||4==l.ctype?l.tabs[m]=[o(r,i)]:2==l.ctype||6==l.ctype?l.tabs[m]=[o(r,i),o(r,i+2),o(r,i+4)]:3==l.ctype&&(l.tabs[m]=r[i]);else if("IEND"==m)break;i+=f,a.readUint(r,i),i+=4}if(0!=d){var g=l.frames[l.frames.length-1];g.data=n.decode._decompress(l,t.slice(0,d),g.rect.width,g.rect.height),d=0}return l.data=n.decode._decompress(l,u,l.width,l.height),delete l.compress,delete l.interlace,delete l.filter,l},n.decode._decompress=function(e,t,r,i){Date.now();var a=new Uint8Array((Math.ceil(r*n.decode._getBPP(e)/8)+1+e.interlace)*i);return t=n.decode._inflate(t,a),Date.now(),0==e.interlace?t=n.decode._filterZero(t,e,0,r,i):1==e.interlace&&(t=n.decode._readInterlace(t,e)),t},n.decode._inflate=function(e,t){return n.inflateRaw(new Uint8Array(e.buffer,2,e.length-6),t)},n.inflateRaw=function(){var e,t,n={};return n.H={},n.H.N=function(e,t){var r,i,a=Uint8Array,o=0,s=0,l=0,u=0,c=0,d=0,h=0,p=0,f=0;if(3==e[0]&&0==e[1])return t||new a(0);var m=n.H,g=m.b,y=m.e,b=m.R,x=m.n,w=m.A,k=m.Z,S=m.m,_=null==t;for(_&&(t=new a(e.length>>>2<<3));0==o;){if(o=g(e,f,1),s=g(e,f+1,2),f+=3,0==s){(7&f)!=0&&(f+=8-(7&f));var C=(f>>>3)+4,A=e[C-4]|e[C-3]<<8;_&&(t=n.H.W(t,p+A)),t.set(new a(e.buffer,e.byteOffset+C,A),p),f=C+A<<3,p+=A;continue}if(_&&(t=n.H.W(t,p+131072)),1==s&&(r=S.J,i=S.h,d=511,h=31),2==s){l=y(e,f,5)+257,u=y(e,f+5,5)+1,c=y(e,f+10,4)+4,f+=14;for(var E=1,T=0;T<38;T+=2)S.Q[T]=0,S.Q[T+1]=0;for(var T=0;T<c;T++){var M=y(e,f+3*T,3);S.Q[(S.X[T]<<1)+1]=M,M>E&&(E=M)}f+=3*c,x(S.Q,E),w(S.Q,E,S.u),r=S.w,i=S.d,f=b(S.u,(1<<E)-1,l+u,e,f,S.v);var I=m.V(S.v,0,l,S.C);d=(1<<I)-1;var N=m.V(S.v,l,u,S.D);h=(1<<N)-1,x(S.C,I),w(S.C,I,r),x(S.D,N),w(S.D,N,i)}for(;;){var D=r[k(e,f)&d];f+=15&D;var P=D>>>4;if(P>>>8==0)t[p++]=P;else if(256==P)break;else{var R=p+P-254;if(P>264){var O=S.q[P-257];R=p+(O>>>3)+y(e,f,7&O),f+=7&O}var j=i[k(e,f)&h];f+=15&j;var F=j>>>4,L=S.c[F],z=(L>>>4)+g(e,f,15&L);for(f+=15&L;p<R;)t[p]=t[p++-z],t[p]=t[p++-z],t[p]=t[p++-z],t[p]=t[p++-z];p=R}}}return t.length==p?t:t.slice(0,p)},n.H.W=function(e,t){var n=e.length;if(t<=n)return e;var r=new Uint8Array(n<<1);return r.set(e,0),r},n.H.R=function(e,t,r,i,a,o){for(var s=n.H.e,l=n.H.Z,u=0;u<r;){var c=e[l(i,a)&t];a+=15&c;var d=c>>>4;if(d<=15)o[u]=d,u++;else{var h=0,p=0;16==d?(p=3+s(i,a,2),a+=2,h=o[u-1]):17==d?(p=3+s(i,a,3),a+=3):18==d&&(p=11+s(i,a,7),a+=7);for(var f=u+p;u<f;)o[u]=h,u++}}return a},n.H.V=function(e,t,n,r){for(var i=0,a=0,o=r.length>>>1;a<n;){var s=e[a+t];r[a<<1]=0,r[(a<<1)+1]=s,s>i&&(i=s),a++}for(;a<o;)r[a<<1]=0,r[(a<<1)+1]=0,a++;return i},n.H.n=function(e,t){for(var r,i,a,o,s,l=n.H.m,u=e.length,c=l.j,o=0;o<=t;o++)c[o]=0;for(o=1;o<u;o+=2)c[e[o]]++;var d=l.K;for(i=1,r=0,c[0]=0;i<=t;i++)r=r+c[i-1]<<1,d[i]=r;for(a=0;a<u;a+=2)0!=(s=e[a+1])&&(e[a]=d[s],d[s]++)},n.H.A=function(e,t,r){for(var i=e.length,a=n.H.m.r,o=0;o<i;o+=2)if(0!=e[o+1])for(var s=o>>1,l=e[o+1],u=s<<4|l,c=t-l,d=e[o]<<c,h=d+(1<<c);d!=h;)r[a[d]>>>15-t]=u,d++},n.H.l=function(e,t){for(var r=n.H.m.r,i=15-t,a=0;a<e.length;a+=2){var o=e[a]<<t-e[a+1];e[a]=r[o]>>>i}},n.H.M=function(e,t,n){n<<=7&t;var r=t>>>3;e[r]|=n,e[r+1]|=n>>>8},n.H.I=function(e,t,n){n<<=7&t;var r=t>>>3;e[r]|=n,e[r+1]|=n>>>8,e[r+2]|=n>>>16},n.H.e=function(e,t,n){return(e[t>>>3]|e[(t>>>3)+1]<<8)>>>(7&t)&(1<<n)-1},n.H.b=function(e,t,n){return(e[t>>>3]|e[(t>>>3)+1]<<8|e[(t>>>3)+2]<<16)>>>(7&t)&(1<<n)-1},n.H.Z=function(e,t){return(e[t>>>3]|e[(t>>>3)+1]<<8|e[(t>>>3)+2]<<16)>>>(7&t)},n.H.i=function(e,t){return(e[t>>>3]|e[(t>>>3)+1]<<8|e[(t>>>3)+2]<<16|e[(t>>>3)+3]<<24)>>>(7&t)},n.H.m=(e=Uint16Array,t=Uint32Array,{K:new e(16),j:new e(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new e(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new t(32),J:new e(512),_:[],h:new e(32),$:[],w:new e(32768),C:[],v:[],d:new e(32768),D:[],u:new e(512),Q:[],r:new e(32768),s:new t(286),Y:new t(30),a:new t(19),t:new t(15e3),k:new e(65536),g:new e(32768)}),!function(){for(var e=n.H.m,t=0;t<32768;t++){var r=t;r=(0xff00ff00&(r=(0xf0f0f0f0&(r=(0xcccccccc&(r=(0xaaaaaaaa&r)>>>1|(0x55555555&r)<<1))>>>2|(0x33333333&r)<<2))>>>4|(0xf0f0f0f&r)<<4))>>>8|(0xff00ff&r)<<8,e.r[t]=(r>>>16|r<<16)>>>17}function i(e,t,n){for(;0!=t--;)e.push(0,n)}for(var t=0;t<32;t++)e.q[t]=e.S[t]<<3|e.T[t],e.c[t]=e.p[t]<<4|e.z[t];i(e._,144,8),i(e._,112,9),i(e._,24,7),i(e._,8,8),n.H.n(e._,9),n.H.A(e._,9,e.J),n.H.l(e._,9),i(e.$,32,5),n.H.n(e.$,5),n.H.A(e.$,5,e.h),n.H.l(e.$,5),i(e.Q,19,0),i(e.C,286,0),i(e.D,30,0),i(e.v,320,0)}(),n.H.N}(),n.decode._readInterlace=function(e,t){for(var r=t.width,i=t.height,a=n.decode._getBPP(t),o=a>>3,s=Math.ceil(r*a/8),l=new Uint8Array(i*s),u=0,c=[0,0,4,0,2,0,1],d=[0,4,0,2,0,1,0],h=[8,8,8,4,4,2,2],p=[8,8,4,4,2,2,1],f=0;f<7;){for(var m=h[f],g=p[f],y=0,b=0,x=c[f];x<i;)x+=m,b++;for(var w=d[f];w<r;)w+=g,y++;var k=Math.ceil(y*a/8);n.decode._filterZero(e,t,u,y,b);for(var S=0,_=c[f];_<i;){for(var C=d[f],A=u+S*k<<3;C<r;){if(1==a){var E=e[A>>3];E=E>>7-(7&A)&1,l[_*s+(C>>3)]|=E<<7-(7&C)}if(2==a){var E=e[A>>3];E=E>>6-(7&A)&3,l[_*s+(C>>2)]|=E<<6-((3&C)<<1)}if(4==a){var E=e[A>>3];E=E>>4-(7&A)&15,l[_*s+(C>>1)]|=E<<4-((1&C)<<2)}if(a>=8)for(var T=_*s+C*o,M=0;M<o;M++)l[T+M]=e[(A>>3)+M];A+=a,C+=g}S++,_+=m}y*b!=0&&(u+=b*(1+k)),f+=1}return l},n.decode._getBPP=function(e){return[1,null,3,1,2,null,4][e.ctype]*e.depth},n.decode._filterZero=function(e,t,r,i,a){var o=n.decode._getBPP(t),s=Math.ceil(i*o/8),l=n.decode._paeth;o=Math.ceil(o/8);var u=0,c=1,d=e[r],h=0;if(d>1&&(e[r]=[0,0,1][d-2]),3==d)for(h=o;h<s;h++)e[h+1]=e[h+1]+(e[h+1-o]>>>1)&255;for(var p=0;p<a;p++)if(d=e[(c=(u=r+p*s)+p+1)-1],h=0,0==d)for(;h<s;h++)e[u+h]=e[c+h];else if(1==d){for(;h<o;h++)e[u+h]=e[c+h];for(;h<s;h++)e[u+h]=e[c+h]+e[u+h-o]}else if(2==d)for(;h<s;h++)e[u+h]=e[c+h]+e[u+h-s];else if(3==d){for(;h<o;h++)e[u+h]=e[c+h]+(e[u+h-s]>>>1);for(;h<s;h++)e[u+h]=e[c+h]+(e[u+h-s]+e[u+h-o]>>>1)}else{for(;h<o;h++)e[u+h]=e[c+h]+l(0,e[u+h-s],0);for(;h<s;h++)e[u+h]=e[c+h]+l(e[u+h-o],e[u+h-s],e[u+h-o-s])}return e},n.decode._paeth=function(e,t,n){var r=e+t-n,i=r-e,a=r-t,o=r-n;return i*i<=a*a&&i*i<=o*o?e:a*a<=o*o?t:n},n.decode._IHDR=function(e,t,r){var i=n._bin;r.width=i.readUint(e,t),t+=4,r.height=i.readUint(e,t),r.depth=e[t+=4],r.ctype=e[++t],r.compress=e[++t],r.filter=e[++t],r.interlace=e[++t],t++},n._bin={nextZero:function(e,t){for(;0!=e[t];)t++;return t},readUshort:function(e,t){return e[t]<<8|e[t+1]},writeUshort:function(e,t,n){e[t]=n>>8&255,e[t+1]=255&n},readUint:function(e,t){return 0x1000000*e[t]+(e[t+1]<<16|e[t+2]<<8|e[t+3])},writeUint:function(e,t,n){e[t]=n>>24&255,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n},readASCII:function(e,t,n){for(var r="",i=0;i<n;i++)r+=String.fromCharCode(e[t+i]);return r},writeASCII:function(e,t,n){for(var r=0;r<n.length;r++)e[t+r]=n.charCodeAt(r)},readBytes:function(e,t,n){for(var r=[],i=0;i<n;i++)r.push(e[t+i]);return r},pad:function(e){return e.length<2?"0"+e:e},readUTF8:function(e,t,r){for(var i,a="",o=0;o<r;o++)a+="%"+n._bin.pad(e[t+o].toString(16));try{i=decodeURIComponent(a)}catch(i){return n._bin.readASCII(e,t,r)}return i}},n._copyTile=function(e,t,n,r,i,a,o,s,l){for(var u=Math.min(t,i),c=Math.min(n,a),d=0,h=0,p=0;p<c;p++)for(var f=0;f<u;f++)if(o>=0&&s>=0?(d=p*t+f<<2,h=(s+p)*i+o+f<<2):(d=(-s+p)*t-o+f<<2,h=p*i+f<<2),0==l)r[h]=e[d],r[h+1]=e[d+1],r[h+2]=e[d+2],r[h+3]=e[d+3];else if(1==l){var m=e[d+3]*(1/255),g=e[d]*m,y=e[d+1]*m,b=e[d+2]*m,x=r[h+3]*(1/255),w=r[h]*x,k=r[h+1]*x,S=r[h+2]*x,_=1-m,C=m+x*_,A=0==C?0:1/C;r[h+3]=255*C,r[h+0]=(g+w*_)*A,r[h+1]=(y+k*_)*A,r[h+2]=(b+S*_)*A}else if(2==l){var m=e[d+3],g=e[d],y=e[d+1],b=e[d+2],x=r[h+3],w=r[h],k=r[h+1],S=r[h+2];m==x&&g==w&&y==k&&b==S?(r[h]=0,r[h+1]=0,r[h+2]=0,r[h+3]=0):(r[h]=g,r[h+1]=y,r[h+2]=b,r[h+3]=m)}else if(3==l){var m=e[d+3],g=e[d],y=e[d+1],b=e[d+2],x=r[h+3],w=r[h],k=r[h+1],S=r[h+2];if(m==x&&g==w&&y==k&&b==S)continue;if(m<220&&x>20)return!1}return!0},n.encode=function(e,t,r,i,a,o,s){null==i&&(i=0),null==s&&(s=!1);var l=n.encode.compress(e,t,r,i,[!1,!1,!1,0,s]);return n.encode.compressPNG(l,-1),n.encode._main(l,t,r,a,o)},n.encodeLL=function(e,t,r,i,a,o,s,l){var u={ctype:0+2*(1!=i)+4*(0!=a),depth:o,frames:[]};Date.now();for(var c=(i+a)*o,d=c*t,h=0;h<e.length;h++)u.frames.push({rect:{x:0,y:0,width:t,height:r},img:new Uint8Array(e[h]),blend:0,dispose:1,bpp:Math.ceil(c/8),bpl:Math.ceil(d/8)});return n.encode.compressPNG(u,0,!0),n.encode._main(u,t,r,s,l)},n.encode._main=function(e,t,r,i,a){null==a&&(a={});var o=n.crc.crc,s=n._bin.writeUint,l=n._bin.writeUshort,u=n._bin.writeASCII,c=8,d=e.frames.length>1,h=!1,p=33+20*!!d;if(null!=a.sRGB&&(p+=13),null!=a.pHYs&&(p+=21),3==e.ctype){for(var f=e.plte.length,m=0;m<f;m++)e.plte[m]>>>24!=255&&(h=!0);p+=8+3*f+4+(h?8+ +f+4:0)}for(var g=0;g<e.frames.length;g++){var y=e.frames[g];d&&(p+=38),p+=y.cimg.length+12,0!=g&&(p+=4)}for(var b=new Uint8Array(p+=12),x=[137,80,78,71,13,10,26,10],m=0;m<8;m++)b[m]=x[m];if(s(b,c,13),u(b,c+=4,"IHDR"),s(b,c+=4,t),s(b,c+=4,r),b[c+=4]=e.depth,b[++c]=e.ctype,b[++c]=0,b[++c]=0,b[++c]=0,s(b,++c,o(b,c-17,17)),c+=4,null!=a.sRGB&&(s(b,c,1),u(b,c+=4,"sRGB"),b[c+=4]=a.sRGB,s(b,++c,o(b,c-5,5)),c+=4),null!=a.pHYs&&(s(b,c,9),u(b,c+=4,"pHYs"),s(b,c+=4,a.pHYs[0]),s(b,c+=4,a.pHYs[1]),b[c+=4]=a.pHYs[2],s(b,++c,o(b,c-13,13)),c+=4),d&&(s(b,c,8),u(b,c+=4,"acTL"),s(b,c+=4,e.frames.length),s(b,c+=4,null!=a.loop?a.loop:0),s(b,c+=4,o(b,c-12,12)),c+=4),3==e.ctype){var f=e.plte.length;s(b,c,3*f),u(b,c+=4,"PLTE"),c+=4;for(var m=0;m<f;m++){var w=3*m,k=e.plte[m],S=255&k,_=k>>>8&255,C=k>>>16&255;b[c+w+0]=S,b[c+w+1]=_,b[c+w+2]=C}if(s(b,c+=3*f,o(b,c-3*f-4,3*f+4)),c+=4,h){s(b,c,f),u(b,c+=4,"tRNS"),c+=4;for(var m=0;m<f;m++)b[c+m]=e.plte[m]>>>24&255;s(b,c+=f,o(b,c-f-4,f+4)),c+=4}}for(var A=0,g=0;g<e.frames.length;g++){var y=e.frames[g];d&&(s(b,c,26),u(b,c+=4,"fcTL"),s(b,c+=4,A++),s(b,c+=4,y.rect.width),s(b,c+=4,y.rect.height),s(b,c+=4,y.rect.x),s(b,c+=4,y.rect.y),l(b,c+=4,i[g]),l(b,c+=2,1e3),b[c+=2]=y.dispose,b[++c]=y.blend,s(b,++c,o(b,c-30,30)),c+=4);var E=y.cimg,f=E.length;s(b,c,f+4*(0!=g));var T=c+=4;u(b,c,0==g?"IDAT":"fdAT"),c+=4,0!=g&&(s(b,c,A++),c+=4),b.set(E,c),s(b,c+=f,o(b,T,c-T)),c+=4}return s(b,c,0),u(b,c+=4,"IEND"),s(b,c+=4,o(b,c-4,4)),c+=4,b.buffer},n.encode.compressPNG=function(e,t,r){for(var i=0;i<e.frames.length;i++){var a=e.frames[i],o=(a.rect.width,a.rect.height),s=new Uint8Array(o*a.bpl+o);a.cimg=n.encode._filterZero(a.img,o,a.bpp,a.bpl,s,t,r)}},n.encode.compress=function(e,t,r,i,a){for(var o=a[0],s=a[1],l=a[2],u=a[3],c=a[4],d=6,h=8,p=255,f=0;f<e.length;f++)for(var m=new Uint8Array(e[f]),g=m.length,y=0;y<g;y+=4)p&=m[y+3];var b=255!=p,x=n.encode.framize(e,t,r,o,s,l),w={},k=[],S=[];if(0!=i){for(var _=[],y=0;y<x.length;y++)_.push(x[y].img.buffer);for(var C=n.encode.concatRGBA(_),A=n.quantize(C,i),E=0,T=new Uint8Array(A.abuf),y=0;y<x.length;y++){var M=x[y].img,I=M.length;S.push(new Uint8Array(A.inds.buffer,E>>2,I>>2));for(var f=0;f<I;f+=4)M[f]=T[E+f],M[f+1]=T[E+f+1],M[f+2]=T[E+f+2],M[f+3]=T[E+f+3];E+=I}for(var y=0;y<A.plte.length;y++)k.push(A.plte[y].est.rgba)}else for(var f=0;f<x.length;f++){var N=x[f],D=new Uint32Array(N.img.buffer),P=N.rect.width,g=D.length,R=new Uint8Array(g);S.push(R);for(var y=0;y<g;y++){var O=D[y];if(0!=y&&O==D[y-1])R[y]=R[y-1];else if(y>P&&O==D[y-P])R[y]=R[y-P];else{var j=w[O];if(null==j&&(w[O]=j=k.length,k.push(O),k.length>=300))break;R[y]=j}}}var F=k.length;F<=256&&!1==c&&(h=Math.max(h=F<=2?1:F<=4?2:F<=16?4:8,u));for(var f=0;f<x.length;f++){var N=x[f],P=(N.rect.x,N.rect.y,N.rect.width),L=N.rect.height,z=N.img;new Uint32Array(z.buffer);var B=4*P,U=4;if(F<=256&&!1==c){for(var H=new Uint8Array((B=Math.ceil(h*P/8))*L),W=S[f],V=0;V<L;V++){var y=V*B,q=V*P;if(8==h)for(var G=0;G<P;G++)H[y+G]=W[q+G];else if(4==h)for(var G=0;G<P;G++)H[y+(G>>1)]|=W[q+G]<<4-(1&G)*4;else if(2==h)for(var G=0;G<P;G++)H[y+(G>>2)]|=W[q+G]<<6-(3&G)*2;else if(1==h)for(var G=0;G<P;G++)H[y+(G>>3)]|=W[q+G]<<7-(7&G)*1}z=H,d=3,U=1}else if(!1==b&&1==x.length){for(var H=new Uint8Array(P*L*3),$=P*L,y=0;y<$;y++){var M=3*y,K=4*y;H[M]=z[K],H[M+1]=z[K+1],H[M+2]=z[K+2]}z=H,d=2,U=3,B=3*P}N.img=z,N.bpl=B,N.bpp=U}return{ctype:d,depth:h,plte:k,frames:x}},n.encode.framize=function(e,t,r,i,a,o){for(var s=[],l=0;l<e.length;l++){var u,c=new Uint8Array(e[l]),d=new Uint32Array(c.buffer),h=0,p=0,f=t,m=r,g=+!!i;if(0!=l){for(var y=o||i||1==l||0!=s[l-2].dispose?1:2,b=0,x=1e9,w=0;w<y;w++){for(var k=new Uint8Array(e[l-1-w]),S=new Uint32Array(e[l-1-w]),_=t,C=r,A=-1,E=-1,T=0;T<r;T++)for(var M=0;M<t;M++){var I=T*t+M;d[I]!=S[I]&&(M<_&&(_=M),M>A&&(A=M),T<C&&(C=T),T>E&&(E=T))}-1==A&&(_=C=A=E=0),a&&((1&_)==1&&_--,(1&C)==1&&C--);var N=(A-_+1)*(E-C+1);N<x&&(x=N,b=w,h=_,p=C,f=A-_+1,m=E-C+1)}var k=new Uint8Array(e[l-1-b]);1==b&&(s[l-1].dispose=2),u=new Uint8Array(f*m*4),n._copyTile(k,t,r,u,f,m,-h,-p,0),1==(g=+!!n._copyTile(c,t,r,u,f,m,-h,-p,3))?n.encode._prepareDiff(c,t,r,u,{x:h,y:p,width:f,height:m}):n._copyTile(c,t,r,u,f,m,-h,-p,0)}else u=c.slice(0);s.push({rect:{x:h,y:p,width:f,height:m},img:u,blend:g,dispose:0})}if(i)for(var l=0;l<s.length;l++){var D=s[l];if(1!=D.blend){var P=D.rect,R=s[l-1].rect,O=Math.min(P.x,R.x),j=Math.min(P.y,R.y),F={x:O,y:j,width:Math.max(P.x+P.width,R.x+R.width)-O,height:Math.max(P.y+P.height,R.y+R.height)-j};s[l-1].dispose=1,l-1!=0&&n.encode._updateFrame(e,t,r,s,l-1,F,a),n.encode._updateFrame(e,t,r,s,l,F,a)}}if(1!=e.length)for(var I=0;I<s.length;I++){var D=s[I];D.rect.width,D.rect.height}return s},n.encode._updateFrame=function(e,t,r,i,a,o,s){for(var l=Uint8Array,u=Uint32Array,c=new l(e[a-1]),d=new u(e[a-1]),h=a+1<e.length?new l(e[a+1]):null,p=new l(e[a]),f=new u(p.buffer),m=t,g=r,y=-1,b=-1,x=0;x<o.height;x++)for(var w=0;w<o.width;w++){var k=o.x+w,S=o.y+x,_=S*t+k,C=f[_];0==C||0==i[a-1].dispose&&d[_]==C&&(null==h||0!=h[4*_+3])||(k<m&&(m=k),k>y&&(y=k),S<g&&(g=S),S>b&&(b=S))}-1==y&&(m=g=y=b=0),s&&((1&m)==1&&m--,(1&g)==1&&g--),o={x:m,y:g,width:y-m+1,height:b-g+1};var A=i[a];A.rect=o,A.blend=1,A.img=new Uint8Array(o.width*o.height*4),0==i[a-1].dispose?(n._copyTile(c,t,r,A.img,o.width,o.height,-o.x,-o.y,0),n.encode._prepareDiff(p,t,r,A.img,o)):n._copyTile(p,t,r,A.img,o.width,o.height,-o.x,-o.y,0)},n.encode._prepareDiff=function(e,t,r,i,a){n._copyTile(e,t,r,i,a.width,a.height,-a.x,-a.y,2)},n.encode._filterZero=function(e,r,i,a,o,s,l){var u=[],c=[0,1,2,3,4];-1!=s?c=[s]:(r*a>5e5||1==i)&&(c=[0]),l&&(f={level:0});for(var d=l&&null!=UZIP?UZIP:t.default,h=0;h<c.length;h++){for(var p=0;p<r;p++)n.encode._filterLine(o,e,p,a,i,c[h]);u.push(d.deflate(o,f))}for(var f,m,g=1e9,h=0;h<u.length;h++)u[h].length<g&&(m=h,g=u[h].length);return u[m]},n.encode._filterLine=function(e,t,r,i,a,o){var s=r*i,l=s+r,u=n.decode._paeth;if(e[l]=o,l++,0==o)if(i<500)for(var c=0;c<i;c++)e[l+c]=t[s+c];else e.set(new Uint8Array(t.buffer,s,i),l);else if(1==o){for(var c=0;c<a;c++)e[l+c]=t[s+c];for(var c=a;c<i;c++)e[l+c]=t[s+c]-t[s+c-a]+256&255}else if(0==r){for(var c=0;c<a;c++)e[l+c]=t[s+c];if(2==o)for(var c=a;c<i;c++)e[l+c]=t[s+c];if(3==o)for(var c=a;c<i;c++)e[l+c]=t[s+c]-(t[s+c-a]>>1)+256&255;if(4==o)for(var c=a;c<i;c++)e[l+c]=t[s+c]-u(t[s+c-a],0,0)+256&255}else{if(2==o)for(var c=0;c<i;c++)e[l+c]=t[s+c]+256-t[s+c-i]&255;if(3==o){for(var c=0;c<a;c++)e[l+c]=t[s+c]+256-(t[s+c-i]>>1)&255;for(var c=a;c<i;c++)e[l+c]=t[s+c]+256-(t[s+c-i]+t[s+c-a]>>1)&255}if(4==o){for(var c=0;c<a;c++)e[l+c]=t[s+c]+256-u(0,t[s+c-i],0)&255;for(var c=a;c<i;c++)e[l+c]=t[s+c]+256-u(t[s+c-a],t[s+c-i],t[s+c-a-i])&255}}},n.crc={table:function(){for(var e=new Uint32Array(256),t=0;t<256;t++){for(var n=t,r=0;r<8;r++)1&n?n=0xedb88320^n>>>1:n>>>=1;e[t]=n}return e}(),update:function(e,t,r,i){for(var a=0;a<i;a++)e=n.crc.table[(e^t[r+a])&255]^e>>>8;return e},crc:function(e,t,r){return 0xffffffff^n.crc.update(0xffffffff,e,t,r)}},n.quantize=function(e,t){var r=new Uint8Array(e),i=r.slice(0),a=new Uint32Array(i.buffer),o=n.quantize.getKDtree(i,t),s=o[0],l=o[1];n.quantize.planeDst;for(var u=r.length,c=new Uint8Array(r.length>>2),d=0;d<u;d+=4){var h=r[d]*(1/255),p=r[d+1]*(1/255),f=r[d+2]*(1/255),m=r[d+3]*(1/255),g=n.quantize.getNearest(s,h,p,f,m);c[d>>2]=g.ind,a[d>>2]=g.est.rgba}return{abuf:i.buffer,inds:c,plte:l}},n.quantize.getKDtree=function(e,t,r){null==r&&(r=1e-4);var i=new Uint32Array(e.buffer),a={i0:0,i1:e.length,bst:null,est:null,tdst:0,left:null,right:null};a.bst=n.quantize.stats(e,a.i0,a.i1),a.est=n.quantize.estats(a.bst);for(var o=[a];o.length<t;){for(var s=0,l=0,u=0;u<o.length;u++)o[u].est.L>s&&(s=o[u].est.L,l=u);if(s<r)break;var c=o[l],d=n.quantize.splitPixels(e,i,c.i0,c.i1,c.est.e,c.est.eMq255);if(c.i0>=d||c.i1<=d){c.est.L=0;continue}var h={i0:c.i0,i1:d,bst:null,est:null,tdst:0,left:null,right:null};h.bst=n.quantize.stats(e,h.i0,h.i1),h.est=n.quantize.estats(h.bst);var p={i0:d,i1:c.i1,bst:null,est:null,tdst:0,left:null,right:null};p.bst={R:[],m:[],N:c.bst.N-h.bst.N};for(var u=0;u<16;u++)p.bst.R[u]=c.bst.R[u]-h.bst.R[u];for(var u=0;u<4;u++)p.bst.m[u]=c.bst.m[u]-h.bst.m[u];p.est=n.quantize.estats(p.bst),c.left=h,c.right=p,o[l]=h,o.push(p)}o.sort(function(e,t){return t.bst.N-e.bst.N});for(var u=0;u<o.length;u++)o[u].ind=u;return[a,o]},n.quantize.getNearest=function(e,t,r,i,a){if(null==e.left)return e.tdst=n.quantize.dist(e.est.q,t,r,i,a),e;var o=n.quantize.planeDst(e.est,t,r,i,a),s=e.left,l=e.right;o>0&&(s=e.right,l=e.left);var u=n.quantize.getNearest(s,t,r,i,a);if(u.tdst<=o*o)return u;var c=n.quantize.getNearest(l,t,r,i,a);return c.tdst<u.tdst?c:u},n.quantize.planeDst=function(e,t,n,r,i){var a=e.e;return a[0]*t+a[1]*n+a[2]*r+a[3]*i-e.eMq},n.quantize.dist=function(e,t,n,r,i){var a=t-e[0],o=n-e[1],s=r-e[2],l=i-e[3];return a*a+o*o+s*s+l*l},n.quantize.splitPixels=function(e,t,r,i,a,o){var s=n.quantize.vecDot;for(i-=4;r<i;){for(;s(e,r,a)<=o;)r+=4;for(;s(e,i,a)>o;)i-=4;if(r>=i)break;var l=t[r>>2];t[r>>2]=t[i>>2],t[i>>2]=l,r+=4,i-=4}for(;s(e,r,a)>o;)r-=4;return r+4},n.quantize.vecDot=function(e,t,n){return e[t]*n[0]+e[t+1]*n[1]+e[t+2]*n[2]+e[t+3]*n[3]},n.quantize.stats=function(e,t,n){for(var r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i=[0,0,0,0],a=t;a<n;a+=4){var o=e[a]*(1/255),s=e[a+1]*(1/255),l=e[a+2]*(1/255),u=e[a+3]*(1/255);i[0]+=o,i[1]+=s,i[2]+=l,i[3]+=u,r[0]+=o*o,r[1]+=o*s,r[2]+=o*l,r[3]+=o*u,r[5]+=s*s,r[6]+=s*l,r[7]+=s*u,r[10]+=l*l,r[11]+=l*u,r[15]+=u*u}return r[4]=r[1],r[8]=r[2],r[9]=r[6],r[12]=r[3],r[13]=r[7],r[14]=r[11],{R:r,m:i,N:n-t>>2}},n.quantize.estats=function(e){var t=e.R,r=e.m,i=e.N,a=r[0],o=r[1],s=r[2],l=r[3],u=0==i?0:1/i,c=[t[0]-a*a*u,t[1]-a*o*u,t[2]-a*s*u,t[3]-a*l*u,t[4]-o*a*u,t[5]-o*o*u,t[6]-o*s*u,t[7]-o*l*u,t[8]-s*a*u,t[9]-s*o*u,t[10]-s*s*u,t[11]-s*l*u,t[12]-l*a*u,t[13]-l*o*u,t[14]-l*s*u,t[15]-l*l*u],d=n.M4,h=[.5,.5,.5,.5],p=0,f=0;if(0!=i)for(var m=0;m<10&&(h=d.multVec(c,h),f=Math.sqrt(d.dot(h,h)),h=d.sml(1/f,h),!(1e-9>Math.abs(f-p)));m++)p=f;var g=[a*u,o*u,s*u,l*u],y=d.dot(d.sml(255,g),h);return{Cov:c,q:g,e:h,L:p,eMq255:y,eMq:d.dot(h,g),rgba:(Math.round(255*g[3])<<24|Math.round(255*g[2])<<16|Math.round(255*g[1])<<8|(0|Math.round(255*g[0])))>>>0}},n.M4={multVec:function(e,t){return[e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3],e[4]*t[0]+e[5]*t[1]+e[6]*t[2]+e[7]*t[3],e[8]*t[0]+e[9]*t[1]+e[10]*t[2]+e[11]*t[3],e[12]*t[0]+e[13]*t[1]+e[14]*t[2]+e[15]*t[3]]},dot:function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},sml:function(e,t){return[e*t[0],e*t[1],e*t[2],e*t[3]]}},n.encode.concatRGBA=function(e){for(var t=0,n=0;n<e.length;n++)t+=e[n].byteLength;for(var r=new Uint8Array(t),i=0,n=0;n<e.length;n++){for(var a=new Uint8Array(e[n]),o=a.length,s=0;s<o;s+=4){var l=a[s],u=a[s+1],c=a[s+2],d=a[s+3];0==d&&(l=u=c=0),r[i+s]=l,r[i+s+1]=u,r[i+s+2]=c,r[i+s+3]=d}i+=o}return r.buffer};let r=n},371207:e=>{"use strict";e.s({PNG:()=>a});var t,n=e.i(186266),r=function(e){if(0===e)return t.Greyscale;if(2===e)return t.Truecolour;if(3===e)return t.IndexedColour;if(4===e)return t.GreyscaleWithAlpha;if(6===e)return t.TruecolourWithAlpha;throw Error("Unknown color type: "+e)},i=function(e){for(var t=Math.floor(e.length/4),n=new Uint8Array(3*t),r=new Uint8Array(+t),i=0,a=0,o=0;i<e.length;)n[a++]=e[i++],n[a++]=e[i++],n[a++]=e[i++],r[o++]=e[i++];return{rgbChannel:n,alphaChannel:r}};!function(e){e.Greyscale="Greyscale",e.Truecolour="Truecolour",e.IndexedColour="IndexedColour",e.GreyscaleWithAlpha="GreyscaleWithAlpha",e.TruecolourWithAlpha="TruecolourWithAlpha"}(t||(t={}));var a=function(){function e(e){var t=n.default.decode(e),a=n.default.toRGBA8(t);if(a.length>1)throw Error("Animated PNGs are not supported");var o=i(new Uint8Array(a[0])),s=o.rgbChannel,l=o.alphaChannel;this.rgbChannel=s,l.some(function(e){return e<255})&&(this.alphaChannel=l),this.type=r(t.ctype),this.width=t.width,this.height=t.height,this.bitsPerComponent=8}return e.load=function(t){return new e(t)},e}()},233710:e=>{"use strict";e.s({default:()=>r});var t=e.i(436255),n=e.i(371207);let r=function(){function e(e){this.image=e,this.bitsPerComponent=e.bitsPerComponent,this.width=e.width,this.height=e.height,this.colorSpace="DeviceRGB"}return e.for=function(r){return(0,t.__awaiter)(this,void 0,void 0,function(){return(0,t.__generator)(this,function(t){return[2,new e(n.PNG.load(r))]})})},e.prototype.embedIntoContext=function(e,n){return(0,t.__awaiter)(this,void 0,void 0,function(){var r,i;return(0,t.__generator)(this,function(t){return(r=this.embedAlphaChannel(e),i=e.flateStream(this.image.rgbChannel,{Type:"XObject",Subtype:"Image",BitsPerComponent:this.image.bitsPerComponent,Width:this.image.width,Height:this.image.height,ColorSpace:this.colorSpace,SMask:r}),n)?(e.assign(n,i),[2,n]):[2,e.register(i)]})})},e.prototype.embedAlphaChannel=function(e){if(this.image.alphaChannel){var t=e.flateStream(this.image.alphaChannel,{Type:"XObject",Subtype:"Image",Height:this.image.height,Width:this.image.width,BitsPerComponent:this.image.bitsPerComponent,ColorSpace:"DeviceGray",Decode:[0,1]});return e.register(t)}},e}()},653403:e=>{"use strict";e.s({default:()=>t});let t=function(){function e(e,t,n){this.bytes=e,this.start=t||0,this.pos=this.start,this.end=t&&n?t+n:this.bytes.length}return Object.defineProperty(e.prototype,"length",{get:function(){return this.end-this.start},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0===this.length},enumerable:!1,configurable:!0}),e.prototype.getByte=function(){return this.pos>=this.end?-1:this.bytes[this.pos++]},e.prototype.getUint16=function(){var e=this.getByte(),t=this.getByte();return -1===e||-1===t?-1:(e<<8)+t},e.prototype.getInt32=function(){return(this.getByte()<<24)+(this.getByte()<<16)+(this.getByte()<<8)+this.getByte()},e.prototype.getBytes=function(e,t){void 0===t&&(t=!1);var n=this.bytes,r=this.pos,i=this.end;if(e){var a=r+e;a>i&&(a=i),this.pos=a;var o=n.subarray(r,a);return t?new Uint8ClampedArray(o):o}var o=n.subarray(r,i);return t?new Uint8ClampedArray(o):o},e.prototype.peekByte=function(){var e=this.getByte();return this.pos--,e},e.prototype.peekBytes=function(e,t){void 0===t&&(t=!1);var n=this.getBytes(e,t);return this.pos-=n.length,n},e.prototype.skip=function(e){e||(e=1),this.pos+=e},e.prototype.reset=function(){this.pos=this.start},e.prototype.moveStart=function(){this.start=this.pos},e.prototype.makeSubStream=function(t,n){return new e(this.bytes,t,n)},e.prototype.decode=function(){return this.bytes},e}()},87297:e=>{"use strict";e.s({default:()=>i});var t=e.i(143682),n=e.i(653403),r=new Uint8Array(0);let i=function(){function e(e){if(this.pos=0,this.bufferLength=0,this.eof=!1,this.buffer=r,this.minBufferLength=512,e)for(;this.minBufferLength<e;)this.minBufferLength*=2}return Object.defineProperty(e.prototype,"isEmpty",{get:function(){for(;!this.eof&&0===this.bufferLength;)this.readBlock();return 0===this.bufferLength},enumerable:!1,configurable:!0}),e.prototype.getByte=function(){for(var e=this.pos;this.bufferLength<=e;){if(this.eof)return -1;this.readBlock()}return this.buffer[this.pos++]},e.prototype.getUint16=function(){var e=this.getByte(),t=this.getByte();return -1===e||-1===t?-1:(e<<8)+t},e.prototype.getInt32=function(){return(this.getByte()<<24)+(this.getByte()<<16)+(this.getByte()<<8)+this.getByte()},e.prototype.getBytes=function(e,t){void 0===t&&(t=!1);var n,r=this.pos;if(e){for(this.ensureBuffer(r+e),n=r+e;!this.eof&&this.bufferLength<n;)this.readBlock();var i=this.bufferLength;n>i&&(n=i)}else{for(;!this.eof;)this.readBlock();n=this.bufferLength}this.pos=n;var a=this.buffer.subarray(r,n);return!t||a instanceof Uint8ClampedArray?a:new Uint8ClampedArray(a)},e.prototype.peekByte=function(){var e=this.getByte();return this.pos--,e},e.prototype.peekBytes=function(e,t){void 0===t&&(t=!1);var n=this.getBytes(e,t);return this.pos-=n.length,n},e.prototype.skip=function(e){e||(e=1),this.pos+=e},e.prototype.reset=function(){this.pos=0},e.prototype.makeSubStream=function(e,t){for(var r=e+t;this.bufferLength<=r&&!this.eof;)this.readBlock();return new n.default(this.buffer,e,t)},e.prototype.decode=function(){for(;!this.eof;)this.readBlock();return this.buffer.subarray(0,this.bufferLength)},e.prototype.readBlock=function(){throw new t.MethodNotImplementedError(this.constructor.name,"readBlock")},e.prototype.ensureBuffer=function(e){var t=this.buffer;if(e<=t.byteLength)return t;for(var n=this.minBufferLength;n<e;)n*=2;var r=new Uint8Array(n);return r.set(t),this.buffer=r},e}()},673488:e=>{"use strict";e.s({default:()=>i});var t=e.i(436255),n=e.i(87297),r=function(e){return 32===e||9===e||13===e||10===e};let i=function(e){function n(t,n){var r=e.call(this,n)||this;return r.stream=t,r.input=new Uint8Array(5),n&&(n*=.8),r}return(0,t.__extends)(n,e),n.prototype.readBlock=function(){for(var e,t,n=this.stream,i=n.getByte();r(i);)i=n.getByte();if(-1===i||126===i){this.eof=!0;return}var a=this.bufferLength;if(122===i){for(t=0,e=this.ensureBuffer(a+4);t<4;++t)e[a+t]=0;this.bufferLength+=4}else{var o=this.input;for(t=1,o[0]=i;t<5;++t){for(i=n.getByte();r(i);)i=n.getByte();if(o[t]=i,-1===i||126===i)break}if(e=this.ensureBuffer(a+t-1),this.bufferLength+=t-1,t<5){for(;t<5;++t)o[t]=117;this.eof=!0}var s=0;for(t=0;t<5;++t)s=85*s+(o[t]-33);for(t=3;t>=0;--t)e[a+t]=255&s,s>>=8}},n}(n.default)},55988:e=>{"use strict";e.s({default:()=>n});var t=e.i(436255);let n=function(e){function n(t,n){var r=e.call(this,n)||this;return r.stream=t,r.firstDigit=-1,n&&(n*=.5),r}return(0,t.__extends)(n,e),n.prototype.readBlock=function(){var e=this.stream.getBytes(8e3);if(!e.length){this.eof=!0;return}for(var t=e.length+1>>1,n=this.ensureBuffer(this.bufferLength+t),r=this.bufferLength,i=this.firstDigit,a=0,o=e.length;a<o;a++){var s=e[a],l=void 0;if(s>=48&&s<=57)l=15&s;else if(s>=65&&s<=70||s>=97&&s<=102)l=(15&s)+9;else{if(62!==s)continue;this.eof=!0;break}i<0?i=l:(n[r++]=i<<4|l,i=-1)}i>=0&&this.eof&&(n[r++]=i<<4,i=-1),this.firstDigit=i,this.bufferLength=r},n}(e.i(87297).default)},694045:e=>{"use strict";e.s({default:()=>l});var t=e.i(436255),n=e.i(87297),r=new Int32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),i=new Int32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),a=new Int32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),o=[new Int32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],s=[new Int32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];let l=function(e){function n(t,n){var r=e.call(this,n)||this;r.stream=t;var i=t.getByte(),a=t.getByte();if(-1===i||-1===a)throw Error("Invalid header in flate stream: "+i+", "+a);if((15&i)!=8)throw Error("Unknown compression method in flate stream: "+i+", "+a);if(((i<<8)+a)%31!=0)throw Error("Bad FCHECK in flate stream: "+i+", "+a);if(32&a)throw Error("FDICT bit set in flate stream: "+i+", "+a);return r.codeSize=0,r.codeBuf=0,r}return(0,t.__extends)(n,e),n.prototype.readBlock=function(){var e,t,n,l,u=this.stream,c=this.getBits(3);if(1&c&&(this.eof=!0),0==(c>>=1)){var d=void 0;if(-1===(d=u.getByte()))throw Error("Bad block header in flate stream");var h=d;if(-1===(d=u.getByte())||(h|=d<<8,-1===(d=u.getByte())))throw Error("Bad block header in flate stream");var p=d;if(-1===(d=u.getByte()))throw Error("Bad block header in flate stream");if((p|=d<<8)!=(65535&~h)&&(0!==h||0!==p))throw Error("Bad uncompressed block length in flate stream");this.codeBuf=0,this.codeSize=0;var f=this.bufferLength;e=this.ensureBuffer(f+h);var m=f+h;if(this.bufferLength=m,0===h)-1===u.peekByte()&&(this.eof=!0);else for(var g=f;g<m;++g){if(-1===(d=u.getByte())){this.eof=!0;break}e[g]=d}return}if(1===c)n=o,l=s;else if(2===c){var y=this.getBits(5)+257,b=this.getBits(5)+1,x=this.getBits(4)+4,w=new Uint8Array(r.length),k=void 0;for(k=0;k<x;++k)w[r[k]]=this.getBits(3);var S=this.generateHuffmanTable(w);t=0,k=0;for(var _=y+b,C=new Uint8Array(_),A=void 0,E=void 0,T=void 0;k<_;){var M=this.getCode(S);if(16===M)A=2,E=3,T=t;else if(17===M)A=3,E=3,T=t=0;else if(18===M)A=7,E=11,T=t=0;else{C[k++]=t=M;continue}for(var I=this.getBits(A)+E;I-- >0;)C[k++]=T}n=this.generateHuffmanTable(C.subarray(0,y)),l=this.generateHuffmanTable(C.subarray(y,_))}else throw Error("Unknown block type in flate stream");for(var N=(e=this.buffer)?e.length:0,D=this.bufferLength;;){var P=this.getCode(n);if(P<256){D+1>=N&&(N=(e=this.ensureBuffer(D+1)).length),e[D++]=P;continue}if(256===P){this.bufferLength=D;return}P-=257;var R=(P=i[P])>>16;R>0&&(R=this.getBits(R)),t=(65535&P)+R,(R=(P=a[P=this.getCode(l)])>>16)>0&&(R=this.getBits(R));var O=(65535&P)+R;D+t>=N&&(N=(e=this.ensureBuffer(D+t)).length);for(var j=0;j<t;++j,++D)e[D]=e[D-O]}},n.prototype.getBits=function(e){for(var t,n=this.stream,r=this.codeSize,i=this.codeBuf;r<e;){if(-1===(t=n.getByte()))throw Error("Bad encoding in flate stream");i|=t<<r,r+=8}return t=i&(1<<e)-1,this.codeBuf=i>>e,this.codeSize=r-=e,t},n.prototype.getCode=function(e){for(var t,n=this.stream,r=e[0],i=e[1],a=this.codeSize,o=this.codeBuf;a<i&&-1!==(t=n.getByte());)o|=t<<a,a+=8;var s=r[o&(1<<i)-1];"number"==typeof r&&console.log("FLATE:",s);var l=s>>16;if(l<1||a<l)throw Error("Bad encoding in flate stream");return this.codeBuf=o>>l,this.codeSize=a-l,65535&s},n.prototype.generateHuffmanTable=function(e){var t,n=e.length,r=0;for(t=0;t<n;++t)e[t]>r&&(r=e[t]);for(var i=1<<r,a=new Int32Array(i),o=1,s=0,l=2;o<=r;++o,s<<=1,l<<=1)for(var u=0;u<n;++u)if(e[u]===o){var c=0,d=s;for(t=0;t<o;++t)c=c<<1|1&d,d>>=1;for(t=c;t<i;t+=l)a[t]=o<<16|u;++s}return[a,r]},n}(n.default)},789260:e=>{"use strict";e.s({default:()=>n});var t=e.i(436255);let n=function(e){function n(t,n,r){var i=e.call(this,n)||this;i.stream=t,i.cachedData=0,i.bitsCached=0;for(var a={earlyChange:r,codeLength:9,nextCode:258,dictionaryValues:new Uint8Array(4096),dictionaryLengths:new Uint16Array(4096),dictionaryPrevCodes:new Uint16Array(4096),currentSequence:new Uint8Array(4096),currentSequenceLength:0},o=0;o<256;++o)a.dictionaryValues[o]=o,a.dictionaryLengths[o]=1;return i.lzwState=a,i}return(0,t.__extends)(n,e),n.prototype.readBlock=function(){var e,t,n,r=1024,i=this.lzwState;if(i){var a=i.earlyChange,o=i.nextCode,s=i.dictionaryValues,l=i.dictionaryLengths,u=i.dictionaryPrevCodes,c=i.codeLength,d=i.prevCode,h=i.currentSequence,p=i.currentSequenceLength,f=0,m=this.bufferLength,g=this.ensureBuffer(this.bufferLength+r);for(e=0;e<512;e++){var y=this.readBits(c),b=p>0;if(!y||y<256)h[0]=y,p=1;else if(y>=258)if(y<o)for(t=(p=l[y])-1,n=y;t>=0;t--)h[t]=s[n],n=u[n];else h[p++]=h[0];else if(256===y){c=9,o=258,p=0;continue}else{this.eof=!0,delete this.lzwState;break}if(b&&(u[o]=d,l[o]=l[d]+1,s[o]=h[0],c=++o+a&o+a-1?c:0|Math.min(Math.log(o+a)/.6931471805599453+1,12)),d=y,r<(f+=p)){do r+=512;while(r<f)g=this.ensureBuffer(this.bufferLength+r)}for(t=0;t<p;t++)g[m++]=h[t]}i.nextCode=o,i.codeLength=c,i.prevCode=d,i.currentSequenceLength=p,this.bufferLength=m}},n.prototype.readBits=function(e){for(var t=this.bitsCached,n=this.cachedData;t<e;){var r=this.stream.getByte();if(-1===r)return this.eof=!0,null;n=n<<8|r,t+=8}return this.bitsCached=t-=e,this.cachedData=n,n>>>t&(1<<e)-1},n}(e.i(87297).default)},362066:e=>{"use strict";e.s({default:()=>n});var t=e.i(436255);let n=function(e){function n(t,n){var r=e.call(this,n)||this;return r.stream=t,r}return(0,t.__extends)(n,e),n.prototype.readBlock=function(){var e,t=this.stream.getBytes(2);if(!t||t.length<2||128===t[0]){this.eof=!0;return}var n=this.bufferLength,r=t[0];if(r<128){if((e=this.ensureBuffer(n+r+1))[n++]=t[1],r>0){var i=this.stream.getBytes(r);e.set(i,n),n+=r}}else{r=257-r;var a=t[1];e=this.ensureBuffer(n+r+1);for(var o=0;o<r;o++)e[n++]=a}this.bufferLength=n},n}(e.i(87297).default)},41842:e=>{"use strict";e.s({decodePDFRawStream:()=>p});var t=e.i(143682),n=e.i(922995),r=e.i(155303),i=e.i(91355),a=e.i(865488),o=e.i(673488),s=e.i(55988),l=e.i(694045),u=e.i(789260),c=e.i(362066),d=e.i(653403),h=function(e,n,d){if(n===i.default.of("FlateDecode"))return new l.default(e);if(n===i.default.of("LZWDecode")){var h=1;if(d instanceof r.default){var p=d.lookup(i.default.of("EarlyChange"));p instanceof a.default&&(h=p.asNumber())}return new u.default(e,void 0,h)}if(n===i.default.of("ASCII85Decode"))return new o.default(e);if(n===i.default.of("ASCIIHexDecode"))return new s.default(e);if(n===i.default.of("RunLengthDecode"))return new c.default(e);throw new t.UnsupportedEncodingError(n.asString())},p=function(e){var a=e.dict,o=e.contents,s=new d.default(o),l=a.lookup(i.default.of("Filter")),u=a.lookup(i.default.of("DecodeParms"));if(l instanceof i.default)s=h(s,l,u);else if(l instanceof n.default)for(var c=0,p=l.size();c<p;c++)s=h(s,l.lookup(c,i.default),u&&u.lookupMaybe(c,r.default));else if(l)throw new t.UnexpectedObjectTypeError([i.default,n.default],l);return s}},725960:e=>{"use strict";e.s({default:()=>d});var t=e.i(436255),n=e.i(143682),r=e.i(865488),i=e.i(124729),a=e.i(13139),o=e.i(41842),s=e.i(637971),l=e.i(110200);e.i(465248);var u=e.i(411691),c=function(e){var t=e.MediaBox();return{left:0,bottom:0,right:t.lookup(2,r.default).asNumber()-t.lookup(0,r.default).asNumber(),top:t.lookup(3,r.default).asNumber()-t.lookup(1,r.default).asNumber()}};let d=function(){function e(e,t,n){this.page=e;var r=null!=t?t:c(e);this.width=r.right-r.left,this.height=r.top-r.bottom,this.boundingBox=r,this.transformationMatrix=null!=n?n:[1,0,0,1,-r.left,-r.bottom]}return e.for=function(n,r,i){return(0,t.__awaiter)(this,void 0,void 0,function(){return(0,t.__generator)(this,function(t){return[2,new e(n,r,i)]})})},e.prototype.embedIntoContext=function(e,r){return(0,t.__awaiter)(this,void 0,void 0,function(){var i,a,o,s,l,u,c,d,h,p;return(0,t.__generator)(this,function(t){if(a=(i=this.page.normalizedEntries()).Contents,o=i.Resources,!a)throw new n.MissingPageContentsEmbeddingError;return(s=this.decodeContents(a),u=(l=this.boundingBox).left,c=l.bottom,d=l.right,h=l.top,p=e.flateStream(s,{Type:"XObject",Subtype:"Form",FormType:1,BBox:[u,c,d,h],Matrix:this.transformationMatrix,Resources:o}),r)?(e.assign(r,p),[2,r]):[2,e.register(p)]})})},e.prototype.decodeContents=function(e){for(var t=Uint8Array.of(l.default.Newline),r=[],c=0,d=e.size();c<d;c++){var h=e.lookup(c,a.default),p=void 0;if(h instanceof i.default)p=(0,o.decodePDFRawStream)(h).decode();else if(h instanceof s.default)p=h.getUnencodedContents();else throw new n.UnrecognizedStreamTypeError(h);r.push(p,t)}return u.mergeIntoTypedArray.apply(void 0,r)},e}()},799239:e=>{"use strict";e.s({default:()=>d});var t,n,r,i,a=e.i(922995),o=e.i(307502),s=e.i(91355),l=e.i(865488);e.i(465248);var u=e.i(540265),c=function(e,t){if(void 0!==e)return t[e]};!function(e){e.UseNone="UseNone",e.UseOutlines="UseOutlines",e.UseThumbs="UseThumbs",e.UseOC="UseOC"}(t||(t={})),function(e){e.L2R="L2R",e.R2L="R2L"}(n||(n={})),function(e){e.None="None",e.AppDefault="AppDefault"}(r||(r={})),function(e){e.Simplex="Simplex",e.DuplexFlipShortEdge="DuplexFlipShortEdge",e.DuplexFlipLongEdge="DuplexFlipLongEdge"}(i||(i={}));let d=function(){function e(e){this.dict=e}return e.prototype.lookupBool=function(e){var t=this.dict.lookup(s.default.of(e));if(t instanceof o.default)return t},e.prototype.lookupName=function(e){var t=this.dict.lookup(s.default.of(e));if(t instanceof s.default)return t},e.prototype.HideToolbar=function(){return this.lookupBool("HideToolbar")},e.prototype.HideMenubar=function(){return this.lookupBool("HideMenubar")},e.prototype.HideWindowUI=function(){return this.lookupBool("HideWindowUI")},e.prototype.FitWindow=function(){return this.lookupBool("FitWindow")},e.prototype.CenterWindow=function(){return this.lookupBool("CenterWindow")},e.prototype.DisplayDocTitle=function(){return this.lookupBool("DisplayDocTitle")},e.prototype.NonFullScreenPageMode=function(){return this.lookupName("NonFullScreenPageMode")},e.prototype.Direction=function(){return this.lookupName("Direction")},e.prototype.PrintScaling=function(){return this.lookupName("PrintScaling")},e.prototype.Duplex=function(){return this.lookupName("Duplex")},e.prototype.PickTrayByPDFSize=function(){return this.lookupBool("PickTrayByPDFSize")},e.prototype.PrintPageRange=function(){var e=this.dict.lookup(s.default.of("PrintPageRange"));if(e instanceof a.default)return e},e.prototype.NumCopies=function(){var e=this.dict.lookup(s.default.of("NumCopies"));if(e instanceof l.default)return e},e.prototype.getHideToolbar=function(){var e,t;return null!=(t=null==(e=this.HideToolbar())?void 0:e.asBoolean())&&t},e.prototype.getHideMenubar=function(){var e,t;return null!=(t=null==(e=this.HideMenubar())?void 0:e.asBoolean())&&t},e.prototype.getHideWindowUI=function(){var e,t;return null!=(t=null==(e=this.HideWindowUI())?void 0:e.asBoolean())&&t},e.prototype.getFitWindow=function(){var e,t;return null!=(t=null==(e=this.FitWindow())?void 0:e.asBoolean())&&t},e.prototype.getCenterWindow=function(){var e,t;return null!=(t=null==(e=this.CenterWindow())?void 0:e.asBoolean())&&t},e.prototype.getDisplayDocTitle=function(){var e,t;return null!=(t=null==(e=this.DisplayDocTitle())?void 0:e.asBoolean())&&t},e.prototype.getNonFullScreenPageMode=function(){var e,n;return null!=(n=c(null==(e=this.NonFullScreenPageMode())?void 0:e.decodeText(),t))?n:t.UseNone},e.prototype.getReadingDirection=function(){var e,t;return null!=(t=c(null==(e=this.Direction())?void 0:e.decodeText(),n))?t:n.L2R},e.prototype.getPrintScaling=function(){var e,t;return null!=(t=c(null==(e=this.PrintScaling())?void 0:e.decodeText(),r))?t:r.AppDefault},e.prototype.getDuplex=function(){var e;return c(null==(e=this.Duplex())?void 0:e.decodeText(),i)},e.prototype.getPickTrayByPDFSize=function(){var e;return null==(e=this.PickTrayByPDFSize())?void 0:e.asBoolean()},e.prototype.getPrintPageRange=function(){var e=this.PrintPageRange();if(!e)return[];for(var t=[],n=0;n<e.size();n+=2){var r=e.lookup(n,l.default).asNumber(),i=e.lookup(n+1,l.default).asNumber();t.push({start:r,end:i})}return t},e.prototype.getNumCopies=function(){var e,t;return null!=(t=null==(e=this.NumCopies())?void 0:e.asNumber())?t:1},e.prototype.setHideToolbar=function(e){var t=this.dict.context.obj(e);this.dict.set(s.default.of("HideToolbar"),t)},e.prototype.setHideMenubar=function(e){var t=this.dict.context.obj(e);this.dict.set(s.default.of("HideMenubar"),t)},e.prototype.setHideWindowUI=function(e){var t=this.dict.context.obj(e);this.dict.set(s.default.of("HideWindowUI"),t)},e.prototype.setFitWindow=function(e){var t=this.dict.context.obj(e);this.dict.set(s.default.of("FitWindow"),t)},e.prototype.setCenterWindow=function(e){var t=this.dict.context.obj(e);this.dict.set(s.default.of("CenterWindow"),t)},e.prototype.setDisplayDocTitle=function(e){var t=this.dict.context.obj(e);this.dict.set(s.default.of("DisplayDocTitle"),t)},e.prototype.setNonFullScreenPageMode=function(e){(0,u.assertIsOneOf)(e,"nonFullScreenPageMode",t);var n=s.default.of(e);this.dict.set(s.default.of("NonFullScreenPageMode"),n)},e.prototype.setReadingDirection=function(e){(0,u.assertIsOneOf)(e,"readingDirection",n);var t=s.default.of(e);this.dict.set(s.default.of("Direction"),t)},e.prototype.setPrintScaling=function(e){(0,u.assertIsOneOf)(e,"printScaling",r);var t=s.default.of(e);this.dict.set(s.default.of("PrintScaling"),t)},e.prototype.setDuplex=function(e){(0,u.assertIsOneOf)(e,"duplex",i);var t=s.default.of(e);this.dict.set(s.default.of("Duplex"),t)},e.prototype.setPickTrayByPDFSize=function(e){var t=this.dict.context.obj(e);this.dict.set(s.default.of("PickTrayByPDFSize"),t)},e.prototype.setPrintPageRange=function(e){Array.isArray(e)||(e=[e]);for(var t=[],n=0,r=e.length;n<r;n++)t.push(e[n].start),t.push(e[n].end);(0,u.assertEachIs)(t,"printPageRange",["number"]);var i=this.dict.context.obj(t);this.dict.set(s.default.of("PrintPageRange"),i)},e.prototype.setNumCopies=function(e){(0,u.assertRange)(e,"numCopies",1,Number.MAX_VALUE),(0,u.assertInteger)(e,"numCopies");var t=this.dict.context.obj(e);this.dict.set(s.default.of("NumCopies"),t)},e.fromDict=function(t){return new e(t)},e.create=function(t){return new e(t.obj({}))},e}()},729505:e=>{"use strict";e.s({default:()=>d});var t=e.i(155303),n=e.i(738472),r=e.i(934271),i=e.i(91355),a=e.i(865488),o=e.i(922995),s=e.i(927657);e.i(465248);var l=e.i(261205),u=e.i(143682),c=/\/([^\0\t\n\f\r\ ]+)[\0\t\n\f\r\ ]*(\d*\.\d+|\d+)?[\0\t\n\f\r\ ]+Tf/;let d=function(){function e(e,t){this.dict=e,this.ref=t}return e.prototype.T=function(){return this.dict.lookupMaybe(i.default.of("T"),n.default,r.default)},e.prototype.Ff=function(){var e=this.getInheritableAttribute(i.default.of("Ff"));return this.dict.context.lookupMaybe(e,a.default)},e.prototype.V=function(){var e=this.getInheritableAttribute(i.default.of("V"));return this.dict.context.lookup(e)},e.prototype.Kids=function(){return this.dict.lookupMaybe(i.default.of("Kids"),o.default)},e.prototype.DA=function(){var e=this.dict.lookup(i.default.of("DA"));if(e instanceof n.default||e instanceof r.default)return e},e.prototype.setKids=function(e){this.dict.set(i.default.of("Kids"),this.dict.context.obj(e))},e.prototype.getParent=function(){var n=this.dict.get(i.default.of("Parent"));if(n instanceof s.default)return new e(this.dict.lookup(i.default.of("Parent"),t.default),n)},e.prototype.setParent=function(e){e?this.dict.set(i.default.of("Parent"),e):this.dict.delete(i.default.of("Parent"))},e.prototype.getFullyQualifiedName=function(){var e=this.getParent();return e?e.getFullyQualifiedName()+"."+this.getPartialName():this.getPartialName()},e.prototype.getPartialName=function(){var e;return null==(e=this.T())?void 0:e.decodeText()},e.prototype.setPartialName=function(e){e?this.dict.set(i.default.of("T"),r.default.fromText(e)):this.dict.delete(i.default.of("T"))},e.prototype.setDefaultAppearance=function(e){this.dict.set(i.default.of("DA"),n.default.of(e))},e.prototype.getDefaultAppearance=function(){var e=this.DA();return e instanceof r.default?e.decodeText():null==e?void 0:e.asString()},e.prototype.setFontSize=function(e){var t,n=null!=(t=this.getFullyQualifiedName())?t:"",r=this.getDefaultAppearance();if(!r)throw new u.MissingDAEntryError(n);var i=(0,l.findLastMatch)(r,c);if(!i.match)throw new u.MissingTfOperatorError(n);var a=r.slice(0,i.pos-i.match[0].length),o=i.pos<=r.length?r.slice(i.pos):"",s=a+" /"+i.match[1]+" "+e+" Tf "+o;this.setDefaultAppearance(s)},e.prototype.getFlags=function(){var e,t;return null!=(t=null==(e=this.Ff())?void 0:e.asNumber())?t:0},e.prototype.setFlags=function(e){this.dict.set(i.default.of("Ff"),a.default.of(e))},e.prototype.hasFlag=function(e){return(this.getFlags()&e)!=0},e.prototype.setFlag=function(e){var t=this.getFlags();this.setFlags(t|e)},e.prototype.clearFlag=function(e){var t=this.getFlags();this.setFlags(t&~e)},e.prototype.setFlagTo=function(e,t){t?this.setFlag(e):this.clearFlag(e)},e.prototype.getInheritableAttribute=function(e){var t;return this.ascend(function(n){t||(t=n.dict.get(e))}),t},e.prototype.ascend=function(e){e(this);var t=this.getParent();t&&t.ascend(e)},e}()},291082:e=>{"use strict";e.s({default:()=>r});var t=e.i(91355),n=e.i(865488);let r=function(){function e(e){this.dict=e}return e.prototype.W=function(){var e=this.dict.lookup(t.default.of("W"));if(e instanceof n.default)return e},e.prototype.getWidth=function(){var e,t;return null!=(t=null==(e=this.W())?void 0:e.asNumber())?t:1},e.prototype.setWidth=function(e){var n=this.dict.context.obj(e);this.dict.set(t.default.of("W"),n)},e.fromDict=function(t){return new e(t)},e}()},535100:e=>{"use strict";e.s({default:()=>s});var t=e.i(155303),n=e.i(91355),r=e.i(13139),i=e.i(922995),a=e.i(927657),o=e.i(865488);let s=function(){function e(e){this.dict=e}return e.prototype.Rect=function(){return this.dict.lookup(n.default.of("Rect"),i.default)},e.prototype.AP=function(){return this.dict.lookupMaybe(n.default.of("AP"),t.default)},e.prototype.F=function(){var e=this.dict.lookup(n.default.of("F"));return this.dict.context.lookupMaybe(e,o.default)},e.prototype.getRectangle=function(){var e,t=this.Rect();return null!=(e=null==t?void 0:t.asRectangle())?e:{x:0,y:0,width:0,height:0}},e.prototype.setRectangle=function(e){var t=e.x,r=e.y,i=e.width,a=e.height,o=this.dict.context.obj([t,r,t+i,r+a]);this.dict.set(n.default.of("Rect"),o)},e.prototype.getAppearanceState=function(){var e=this.dict.lookup(n.default.of("AS"));if(e instanceof n.default)return e},e.prototype.setAppearanceState=function(e){this.dict.set(n.default.of("AS"),e)},e.prototype.setAppearances=function(e){this.dict.set(n.default.of("AP"),e)},e.prototype.ensureAP=function(){var e=this.AP();return e||(e=this.dict.context.obj({}),this.dict.set(n.default.of("AP"),e)),e},e.prototype.getNormalAppearance=function(){var e=this.ensureAP().get(n.default.of("N"));if(e instanceof a.default||e instanceof t.default)return e;throw Error("Unexpected N type: "+(null==e?void 0:e.constructor.name))},e.prototype.setNormalAppearance=function(e){this.ensureAP().set(n.default.of("N"),e)},e.prototype.setRolloverAppearance=function(e){this.ensureAP().set(n.default.of("R"),e)},e.prototype.setDownAppearance=function(e){this.ensureAP().set(n.default.of("D"),e)},e.prototype.removeRolloverAppearance=function(){var e=this.AP();null==e||e.delete(n.default.of("R"))},e.prototype.removeDownAppearance=function(){var e=this.AP();null==e||e.delete(n.default.of("D"))},e.prototype.getAppearances=function(){var e=this.AP();if(e)return{normal:e.lookup(n.default.of("N"),t.default,r.default),rollover:e.lookupMaybe(n.default.of("R"),t.default,r.default),down:e.lookupMaybe(n.default.of("D"),t.default,r.default)}},e.prototype.getFlags=function(){var e,t;return null!=(t=null==(e=this.F())?void 0:e.asNumber())?t:0},e.prototype.setFlags=function(e){this.dict.set(n.default.of("F"),o.default.of(e))},e.prototype.hasFlag=function(e){return(this.getFlags()&e)!=0},e.prototype.setFlag=function(e){var t=this.getFlags();this.setFlags(t|e)},e.prototype.clearFlag=function(e){var t=this.getFlags();this.setFlags(t&~e)},e.prototype.setFlagTo=function(e,t){t?this.setFlag(e):this.clearFlag(e)},e.fromDict=function(t){return new e(t)},e}()},822857:e=>{"use strict";e.s({default:()=>o});var t=e.i(91355),n=e.i(865488),r=e.i(922995),i=e.i(934271),a=e.i(738472);let o=function(){function e(e){this.dict=e}return e.prototype.R=function(){var e=this.dict.lookup(t.default.of("R"));if(e instanceof n.default)return e},e.prototype.BC=function(){var e=this.dict.lookup(t.default.of("BC"));if(e instanceof r.default)return e},e.prototype.BG=function(){var e=this.dict.lookup(t.default.of("BG"));if(e instanceof r.default)return e},e.prototype.CA=function(){var e=this.dict.lookup(t.default.of("CA"));if(e instanceof i.default||e instanceof a.default)return e},e.prototype.RC=function(){var e=this.dict.lookup(t.default.of("RC"));if(e instanceof i.default||e instanceof a.default)return e},e.prototype.AC=function(){var e=this.dict.lookup(t.default.of("AC"));if(e instanceof i.default||e instanceof a.default)return e},e.prototype.getRotation=function(){var e;return null==(e=this.R())?void 0:e.asNumber()},e.prototype.getBorderColor=function(){var e=this.BC();if(e){for(var t=[],r=0,i=null==e?void 0:e.size();r<i;r++){var a=e.get(r);a instanceof n.default&&t.push(a.asNumber())}return t}},e.prototype.getBackgroundColor=function(){var e=this.BG();if(e){for(var t=[],r=0,i=null==e?void 0:e.size();r<i;r++){var a=e.get(r);a instanceof n.default&&t.push(a.asNumber())}return t}},e.prototype.getCaptions=function(){var e=this.CA(),t=this.RC(),n=this.AC();return{normal:null==e?void 0:e.decodeText(),rollover:null==t?void 0:t.decodeText(),down:null==n?void 0:n.decodeText()}},e.prototype.setRotation=function(e){var n=this.dict.context.obj(e);this.dict.set(t.default.of("R"),n)},e.prototype.setBorderColor=function(e){var n=this.dict.context.obj(e);this.dict.set(t.default.of("BC"),n)},e.prototype.setBackgroundColor=function(e){var n=this.dict.context.obj(e);this.dict.set(t.default.of("BG"),n)},e.prototype.setCaptions=function(e){var n=i.default.fromText(e.normal);if(this.dict.set(t.default.of("CA"),n),e.rollover){var r=i.default.fromText(e.rollover);this.dict.set(t.default.of("RC"),r)}else this.dict.delete(t.default.of("RC"));if(e.down){var a=i.default.fromText(e.down);this.dict.set(t.default.of("AC"),a)}else this.dict.delete(t.default.of("AC"))},e.fromDict=function(t){return new e(t)},e}()},514618:e=>{"use strict";e.s({default:()=>c});var t=e.i(436255),n=e.i(155303),r=e.i(91355),i=e.i(927657),a=e.i(738472),o=e.i(934271),s=e.i(291082),l=e.i(535100),u=e.i(822857);let c=function(e){function l(){return null!==e&&e.apply(this,arguments)||this}return(0,t.__extends)(l,e),l.prototype.MK=function(){var e=this.dict.lookup(r.default.of("MK"));if(e instanceof n.default)return e},l.prototype.BS=function(){var e=this.dict.lookup(r.default.of("BS"));if(e instanceof n.default)return e},l.prototype.DA=function(){var e=this.dict.lookup(r.default.of("DA"));if(e instanceof a.default||e instanceof o.default)return e},l.prototype.P=function(){var e=this.dict.get(r.default.of("P"));if(e instanceof i.default)return e},l.prototype.setP=function(e){this.dict.set(r.default.of("P"),e)},l.prototype.setDefaultAppearance=function(e){this.dict.set(r.default.of("DA"),a.default.of(e))},l.prototype.getDefaultAppearance=function(){var e=this.DA();return e instanceof o.default?e.decodeText():null==e?void 0:e.asString()},l.prototype.getAppearanceCharacteristics=function(){var e=this.MK();if(e)return u.default.fromDict(e)},l.prototype.getOrCreateAppearanceCharacteristics=function(){var e=this.MK();if(e)return u.default.fromDict(e);var t=u.default.fromDict(this.dict.context.obj({}));return this.dict.set(r.default.of("MK"),t.dict),t},l.prototype.getBorderStyle=function(){var e=this.BS();if(e)return s.default.fromDict(e)},l.prototype.getOrCreateBorderStyle=function(){var e=this.BS();if(e)return s.default.fromDict(e);var t=s.default.fromDict(this.dict.context.obj({}));return this.dict.set(r.default.of("BS"),t.dict),t},l.prototype.getOnValue=function(){var e,t=null==(e=this.getAppearances())?void 0:e.normal;if(t instanceof n.default)for(var i=t.keys(),a=0,o=i.length;a<o;a++){var s=i[a];if(s!==r.default.of("Off"))return s}},l.fromDict=function(e){return new l(e)},l.create=function(e,t){return new l(e.obj({Type:"Annot",Subtype:"Widget",Rect:[0,0,0,0],Parent:t}))},l}(l.default)},307760:e=>{"use strict";e.s({default:()=>s});var t=e.i(436255),n=e.i(155303),r=e.i(91355),i=e.i(729505),a=e.i(514618),o=e.i(143682);let s=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return(0,t.__extends)(i,e),i.prototype.FT=function(){var e=this.getInheritableAttribute(r.default.of("FT"));return this.dict.context.lookup(e,r.default)},i.prototype.getWidgets=function(){var e=this.Kids();if(!e)return[a.default.fromDict(this.dict)];for(var t=Array(e.size()),r=0,i=e.size();r<i;r++){var o=e.lookup(r,n.default);t[r]=a.default.fromDict(o)}return t},i.prototype.addWidget=function(e){this.normalizedEntries().Kids.push(e)},i.prototype.removeWidget=function(e){var t=this.Kids();if(t){if(e<0||e>t.size())throw new o.IndexOutOfBoundsError(e,0,t.size());t.remove(e)}else{if(0!==e)throw new o.IndexOutOfBoundsError(e,0,0);this.setKids([])}},i.prototype.normalizedEntries=function(){var e=this.Kids();return e||(e=this.dict.context.obj([this.ref]),this.dict.set(r.default.of("Kids"),e)),{Kids:e}},i.fromDict=function(e,t){return new i(e,t)},i}(i.default)},58544:e=>{"use strict";e.s({default:()=>l});var t=e.i(436255),n=e.i(738472),r=e.i(934271),i=e.i(922995),a=e.i(91355),o=e.i(307760),s=e.i(143682);let l=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return(0,t.__extends)(o,e),o.prototype.Opt=function(){return this.dict.lookupMaybe(a.default.of("Opt"),n.default,r.default,i.default)},o.prototype.setOpt=function(e){this.dict.set(a.default.of("Opt"),this.dict.context.obj(e))},o.prototype.getExportValues=function(){var e=this.Opt();if(e){if(e instanceof n.default||e instanceof r.default)return[e];for(var t=[],i=0,a=e.size();i<a;i++){var o=e.lookup(i);(o instanceof n.default||o instanceof r.default)&&t.push(o)}return t}},o.prototype.removeExportValue=function(e){var t=this.Opt();if(t)if(t instanceof n.default||t instanceof r.default){if(0!==e)throw new s.IndexOutOfBoundsError(e,0,0);this.setOpt([])}else{if(e<0||e>t.size())throw new s.IndexOutOfBoundsError(e,0,t.size());t.remove(e)}},o.prototype.normalizeExportValues=function(){for(var e,t,n,i,a=null!=(e=this.getExportValues())?e:[],o=[],s=this.getWidgets(),l=0,u=s.length;l<u;l++){var c=s[l],d=null!=(t=a[l])?t:r.default.fromText(null!=(i=null==(n=c.getOnValue())?void 0:n.decodeText())?i:"");o.push(d)}this.setOpt(o)},o.prototype.addOpt=function(e,t){this.normalizeExportValues();var n,r,i=e.decodeText();if(t)for(var a=null!=(n=this.getExportValues())?n:[],o=0,s=a.length;o<s;o++)a[o].decodeText()===i&&(r=o);var l=this.Opt();return l.push(e),null!=r?r:l.size()-1},o.prototype.addWidgetWithOpt=function(e,t,n){var r=this.addOpt(t,n),i=a.default.of(String(r));return this.addWidget(e),i},o}(o.default)},147410:e=>{"use strict";e.s({default:()=>a});var t=e.i(436255),n=e.i(91355),r=e.i(58544),i=e.i(143682);let a=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return(0,t.__extends)(r,e),r.prototype.setValue=function(e){if(e!==(null!=(t=this.getOnValue())?t:n.default.of("Yes"))&&e!==n.default.of("Off"))throw new i.InvalidAcroFieldValueError;this.dict.set(n.default.of("V"),e);for(var t,r=this.getWidgets(),a=0,o=r.length;a<o;a++){var s=r[a],l=s.getOnValue()===e?e:n.default.of("Off");s.setAppearanceState(l)}},r.prototype.getValue=function(){var e=this.V();return e instanceof n.default?e:n.default.of("Off")},r.prototype.getOnValue=function(){var e=this.getWidgets()[0];return null==e?void 0:e.getOnValue()},r.fromDict=function(e,t){return new r(e,t)},r.create=function(e){var t=e.obj({FT:"Btn",Kids:[]}),n=e.register(t);return new r(t,n)},r}(r.default)},570889:e=>{"use strict";e.s({AcroButtonFlags:()=>n,AcroChoiceFlags:()=>i,AcroFieldFlags:()=>t,AcroTextFlags:()=>r});var t,n,r,i,a=function(e){return 1<<e};!function(e){e[e.ReadOnly=a(0)]="ReadOnly",e[e.Required=a(1)]="Required",e[e.NoExport=a(2)]="NoExport"}(t||(t={})),function(e){e[e.NoToggleToOff=a(14)]="NoToggleToOff",e[e.Radio=a(15)]="Radio",e[e.PushButton=a(16)]="PushButton",e[e.RadiosInUnison=a(25)]="RadiosInUnison"}(n||(n={})),function(e){e[e.Multiline=a(12)]="Multiline",e[e.Password=a(13)]="Password",e[e.FileSelect=a(20)]="FileSelect",e[e.DoNotSpellCheck=a(22)]="DoNotSpellCheck",e[e.DoNotScroll=a(23)]="DoNotScroll",e[e.Comb=a(24)]="Comb",e[e.RichText=a(25)]="RichText"}(r||(r={})),function(e){e[e.Combo=a(17)]="Combo",e[e.Edit=a(18)]="Edit",e[e.Sort=a(19)]="Sort",e[e.MultiSelect=a(21)]="MultiSelect",e[e.DoNotSpellCheck=a(22)]="DoNotSpellCheck",e[e.CommitOnSelChange=a(26)]="CommitOnSelChange"}(i||(i={}))},225353:e=>{"use strict";e.s({default:()=>u});var t=e.i(436255),n=e.i(307760),r=e.i(934271),i=e.i(738472),a=e.i(922995),o=e.i(91355),s=e.i(570889),l=e.i(143682);let u=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return(0,t.__extends)(n,e),n.prototype.setValues=function(e){if(this.hasFlag(s.AcroChoiceFlags.Combo)&&!this.hasFlag(s.AcroChoiceFlags.Edit)&&!this.valuesAreValid(e))throw new l.InvalidAcroFieldValueError;if(0===e.length&&this.dict.delete(o.default.of("V")),1===e.length&&this.dict.set(o.default.of("V"),e[0]),e.length>1){if(!this.hasFlag(s.AcroChoiceFlags.MultiSelect))throw new l.MultiSelectValueError;this.dict.set(o.default.of("V"),this.dict.context.obj(e))}this.updateSelectedIndices(e)},n.prototype.valuesAreValid=function(e){for(var t=this.getOptions(),n=0,r=e.length;n<r;n++){var i=function(n,r){var i=e[n].decodeText();if(!t.find(function(e){return i===(e.display||e.value).decodeText()}))return{value:!1}}(n,0);if("object"==typeof i)return i.value}return!0},n.prototype.updateSelectedIndices=function(e){if(e.length>1){for(var t=Array(e.length),n=this.getOptions(),r=0,i=e.length;r<i;r++)!function(r,i){var a=e[r].decodeText();t[r]=n.findIndex(function(e){return a===(e.display||e.value).decodeText()})}(r,0);this.dict.set(o.default.of("I"),this.dict.context.obj(t.sort()))}else this.dict.delete(o.default.of("I"))},n.prototype.getValues=function(){var e=this.V();if(e instanceof i.default||e instanceof r.default)return[e];if(e instanceof a.default){for(var t=[],n=0,o=e.size();n<o;n++){var s=e.lookup(n);(s instanceof i.default||s instanceof r.default)&&t.push(s)}return t}return[]},n.prototype.Opt=function(){return this.dict.lookupMaybe(o.default.of("Opt"),i.default,r.default,a.default)},n.prototype.setOptions=function(e){for(var t=Array(e.length),n=0,r=e.length;n<r;n++){var i=e[n],a=i.value,s=i.display;t[n]=this.dict.context.obj([a,s||a])}this.dict.set(o.default.of("Opt"),this.dict.context.obj(t))},n.prototype.getOptions=function(){var e=this.Opt();if(e instanceof i.default||e instanceof r.default)return[{value:e,display:e}];if(e instanceof a.default){for(var t=[],n=0,o=e.size();n<o;n++){var s=e.lookup(n);if((s instanceof i.default||s instanceof r.default)&&t.push({value:s,display:s}),s instanceof a.default&&s.size()>0){var l=s.lookup(0,i.default,r.default),u=s.lookupMaybe(1,i.default,r.default);t.push({value:l,display:u||l})}}return t}return[]},n}(n.default)},820005:e=>{"use strict";e.s({default:()=>i});var t=e.i(436255),n=e.i(225353),r=e.i(570889);let i=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return(0,t.__extends)(n,e),n.fromDict=function(e,t){return new n(e,t)},n.create=function(e){var t=e.obj({FT:"Ch",Ff:r.AcroChoiceFlags.Combo,Kids:[]}),i=e.register(t);return new n(t,i)},n}(n.default)},580549:e=>{"use strict";e.s({default:()=>r});var t=e.i(436255),n=e.i(91355);let r=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return(0,t.__extends)(r,e),r.prototype.addField=function(e){var t=this.normalizedEntries().Kids;null==t||t.push(e)},r.prototype.normalizedEntries=function(){var e=this.Kids();return e||(e=this.dict.context.obj([]),this.dict.set(n.default.of("Kids"),e)),{Kids:e}},r.fromDict=function(e,t){return new r(e,t)},r.create=function(e){var t=e.obj({}),n=e.register(t);return new r(t,n)},r}(e.i(729505).default)},107417:e=>{"use strict";e.s({default:()=>n});var t=e.i(436255);let n=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return(0,t.__extends)(n,e),n.fromDict=function(e,t){return new n(e,t)},n}(e.i(307760).default)},245078:e=>{"use strict";e.s({default:()=>o});var t=e.i(436255),n=e.i(865488),r=e.i(738472),i=e.i(934271),a=e.i(91355);let o=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return(0,t.__extends)(o,e),o.prototype.MaxLen=function(){var e=this.dict.lookup(a.default.of("MaxLen"));if(e instanceof n.default)return e},o.prototype.Q=function(){var e=this.dict.lookup(a.default.of("Q"));if(e instanceof n.default)return e},o.prototype.setMaxLength=function(e){this.dict.set(a.default.of("MaxLen"),n.default.of(e))},o.prototype.removeMaxLength=function(){this.dict.delete(a.default.of("MaxLen"))},o.prototype.getMaxLength=function(){var e;return null==(e=this.MaxLen())?void 0:e.asNumber()},o.prototype.setQuadding=function(e){this.dict.set(a.default.of("Q"),n.default.of(e))},o.prototype.getQuadding=function(){var e;return null==(e=this.Q())?void 0:e.asNumber()},o.prototype.setValue=function(e){this.dict.set(a.default.of("V"),e)},o.prototype.removeValue=function(){this.dict.delete(a.default.of("V"))},o.prototype.getValue=function(){var e=this.V();if(e instanceof r.default||e instanceof i.default)return e},o.fromDict=function(e,t){return new o(e,t)},o.create=function(e){var t=e.obj({FT:"Tx",Kids:[]}),n=e.register(t);return new o(t,n)},o}(e.i(307760).default)},582432:e=>{"use strict";e.s({default:()=>i});var t=e.i(436255),n=e.i(58544),r=e.i(570889);let i=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return(0,t.__extends)(n,e),n.fromDict=function(e,t){return new n(e,t)},n.create=function(e){var t=e.obj({FT:"Btn",Ff:r.AcroButtonFlags.PushButton,Kids:[]}),i=e.register(t);return new n(t,i)},n}(n.default)},716819:e=>{"use strict";e.s({default:()=>o});var t=e.i(436255),n=e.i(91355),r=e.i(58544),i=e.i(570889),a=e.i(143682);let o=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return(0,t.__extends)(r,e),r.prototype.setValue=function(e){if(!this.getOnValues().includes(e)&&e!==n.default.of("Off"))throw new a.InvalidAcroFieldValueError;this.dict.set(n.default.of("V"),e);for(var t=this.getWidgets(),r=0,i=t.length;r<i;r++){var o=t[r],s=o.getOnValue()===e?e:n.default.of("Off");o.setAppearanceState(s)}},r.prototype.getValue=function(){var e=this.V();return e instanceof n.default?e:n.default.of("Off")},r.prototype.getOnValues=function(){for(var e=this.getWidgets(),t=[],n=0,r=e.length;n<r;n++){var i=e[n].getOnValue();i&&t.push(i)}return t},r.fromDict=function(e,t){return new r(e,t)},r.create=function(e){var t=e.obj({FT:"Btn",Ff:i.AcroButtonFlags.Radio,Kids:[]}),n=e.register(t);return new r(t,n)},r}(r.default)},922570:e=>{"use strict";e.s({default:()=>n});var t=e.i(436255);let n=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return(0,t.__extends)(n,e),n.fromDict=function(e,t){return new n(e,t)},n.create=function(e){var t=e.obj({FT:"Ch",Kids:[]}),r=e.register(t);return new n(t,r)},n}(e.i(225353).default)},977849:e=>{"use strict";e.s({createPDFAcroField:()=>y,createPDFAcroFields:()=>g});var t=e.i(865488),n=e.i(155303),r=e.i(91355),i=e.i(922995),a=e.i(927657),o=e.i(307760),s=e.i(580549),l=e.i(107417),u=e.i(245078),c=e.i(582432),d=e.i(716819),h=e.i(147410),p=e.i(820005),f=e.i(922570),m=e.i(570889),g=function(e){if(!e)return[];for(var t=[],r=0,i=e.size();r<i;r++){var o=e.get(r),s=e.lookup(r);o instanceof a.default&&s instanceof n.default&&t.push([y(s,o),o])}return t},y=function(e,t){return b(e)?s.default.fromDict(e,t):x(e,t)},b=function(e){var t=e.lookup(r.default.of("Kids"));if(t instanceof i.default)for(var a=0,o=t.size();a<o;a++){var s=t.lookup(a);if(s instanceof n.default&&s.has(r.default.of("T")))return!0}return!1},x=function(e,t){var n=_(e,r.default.of("FT")),i=e.context.lookup(n,r.default);return i===r.default.of("Btn")?w(e,t):i===r.default.of("Ch")?k(e,t):i===r.default.of("Tx")?u.default.fromDict(e,t):i===r.default.of("Sig")?l.default.fromDict(e,t):o.default.fromDict(e,t)},w=function(e,n){var i,a=_(e,r.default.of("Ff")),o=e.context.lookupMaybe(a,t.default),s=null!=(i=null==o?void 0:o.asNumber())?i:0;return S(s,m.AcroButtonFlags.PushButton)?c.default.fromDict(e,n):S(s,m.AcroButtonFlags.Radio)?d.default.fromDict(e,n):h.default.fromDict(e,n)},k=function(e,n){var i,a=_(e,r.default.of("Ff")),o=e.context.lookupMaybe(a,t.default);return S(null!=(i=null==o?void 0:o.asNumber())?i:0,m.AcroChoiceFlags.Combo)?p.default.fromDict(e,n):f.default.fromDict(e,n)},S=function(e,t){return(e&t)!=0},_=function(e,t){var n;return C(e,function(e){n||(n=e.get(t))}),n},C=function(e,t){t(e);var i=e.lookupMaybe(r.default.of("Parent"),n.default);i&&C(i,t)}},715672:e=>{"use strict";e.s({default:()=>o});var t=e.i(155303),n=e.i(922995),r=e.i(91355),i=e.i(580549),a=e.i(977849);let o=function(){function e(e){this.dict=e}return e.prototype.Fields=function(){var e=this.dict.lookup(r.default.of("Fields"));if(e instanceof n.default)return e},e.prototype.getFields=function(){for(var e=this.normalizedEntries().Fields,n=Array(e.size()),r=0,i=e.size();r<i;r++){var o=e.get(r),s=e.lookup(r,t.default);n[r]=[(0,a.createPDFAcroField)(s,o),o]}return n},e.prototype.getAllFields=function(){var e=[],t=function(n){if(n)for(var r=0,o=n.length;r<o;r++){var s=n[r];e.push(s);var l=s[0];l instanceof i.default&&t((0,a.createPDFAcroFields)(l.Kids()))}};return t(this.getFields()),e},e.prototype.addField=function(e){var t=this.normalizedEntries().Fields;null==t||t.push(e)},e.prototype.removeField=function(e){var t=e.getParent(),n=void 0===t?this.normalizedEntries().Fields:t.Kids(),r=null==n?void 0:n.indexOf(e.ref);if(void 0===n||void 0===r)throw Error("Tried to remove inexistent field "+e.getFullyQualifiedName());n.remove(r),void 0!==t&&0===n.size()&&this.removeField(t)},e.prototype.normalizedEntries=function(){var e=this.Fields();return e||(e=this.dict.context.obj([]),this.dict.set(r.default.of("Fields"),e)),{Fields:e}},e.fromDict=function(t){return new e(t)},e.create=function(t){return new e(t.obj({Fields:[]}))},e}()},497943:e=>{"use strict";e.s({}),e.i(58544),e.i(147410),e.i(225353),e.i(820005),e.i(729505),e.i(715672),e.i(922570),e.i(580549),e.i(582432),e.i(716819),e.i(107417),e.i(307760),e.i(245078),e.i(570889),e.i(977849)},957951:e=>{"use strict";e.s({}),e.i(58544),e.i(147410),e.i(225353),e.i(820005),e.i(729505),e.i(715672),e.i(922570),e.i(580549),e.i(582432),e.i(716819),e.i(107417),e.i(307760),e.i(245078),e.i(570889),e.i(977849),e.i(497943)},633612:e=>{"use strict";e.s({PDFAcroForm:()=>t.default});var t=e.i(715672)},7724:e=>{"use strict";e.s({default:()=>o});var t=e.i(436255),n=e.i(155303),r=e.i(91355);e.i(957951);var i=e.i(633612),a=e.i(799239);let o=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return(0,t.__extends)(o,e),o.prototype.Pages=function(){return this.lookup(r.default.of("Pages"),n.default)},o.prototype.AcroForm=function(){return this.lookupMaybe(r.default.of("AcroForm"),n.default)},o.prototype.getAcroForm=function(){var e=this.AcroForm();if(e)return i.PDFAcroForm.fromDict(e)},o.prototype.getOrCreateAcroForm=function(){var e=this.getAcroForm();if(!e){e=i.PDFAcroForm.create(this.context);var t=this.context.register(e.dict);this.set(r.default.of("AcroForm"),t)}return e},o.prototype.ViewerPreferences=function(){return this.lookupMaybe(r.default.of("ViewerPreferences"),n.default)},o.prototype.getViewerPreferences=function(){var e=this.ViewerPreferences();if(e)return a.default.fromDict(e)},o.prototype.getOrCreateViewerPreferences=function(){var e=this.getViewerPreferences();if(!e){e=a.default.create(this.context);var t=this.context.register(e.dict);this.set(r.default.of("ViewerPreferences"),t)}return e},o.prototype.insertLeafNode=function(e,t){var n=this.get(r.default.of("Pages"));return this.Pages().insertLeafNode(e,t)||n},o.prototype.removeLeafNode=function(e){this.Pages().removeLeafNode(e)},o.withContextAndPages=function(e,t){var n=new Map;return n.set(r.default.of("Type"),r.default.of("Catalog")),n.set(r.default.of("Pages"),t),new o(n,e)},o.fromMapWithContext=function(e,t){return new o(e,t)},o}(n.default)},376764:e=>{"use strict";e.s({default:()=>l});var t=e.i(436255),n=e.i(922995),r=e.i(155303),i=e.i(91355),a=e.i(865488),o=e.i(669076),s=e.i(143682);let l=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return(0,t.__extends)(r,e),r.prototype.Parent=function(){return this.lookup(i.default.of("Parent"))},r.prototype.Kids=function(){return this.lookup(i.default.of("Kids"),n.default)},r.prototype.Count=function(){return this.lookup(i.default.of("Count"),a.default)},r.prototype.pushTreeNode=function(e){this.Kids().push(e)},r.prototype.pushLeafNode=function(e){var t=this.Kids();this.insertLeafKid(t.size(),e)},r.prototype.insertLeafNode=function(e,t){var n=this.Kids(),i=this.Count().asNumber();if(t>i)throw new s.InvalidTargetIndexError(t,i);for(var a=t,l=0,u=n.size();l<u;l++){if(0===a)return void this.insertLeafKid(l,e);var c=n.get(l),d=this.context.lookup(c);if(d instanceof r)if(d.Count().asNumber()>a)return d.insertLeafNode(e,a)||c;else a-=d.Count().asNumber();d instanceof o.default&&(a-=1)}if(0===a)return void this.insertLeafKid(n.size(),e);throw new s.CorruptPageTreeError(t,"insertLeafNode")},r.prototype.removeLeafNode=function(e,t){void 0===t&&(t=!0);var n=this.Kids(),i=this.Count().asNumber();if(e>=i)throw new s.InvalidTargetIndexError(e,i);for(var a=e,l=0,u=n.size();l<u;l++){var c=n.get(l),d=this.context.lookup(c);if(d instanceof r)if(d.Count().asNumber()>a){d.removeLeafNode(a,t),t&&0===d.Kids().size()&&n.remove(l);return}else a-=d.Count().asNumber();if(d instanceof o.default)if(0===a)return void this.removeKid(l);else a-=1}throw new s.CorruptPageTreeError(e,"removeLeafNode")},r.prototype.ascend=function(e){e(this);var t=this.Parent();t&&t.ascend(e)},r.prototype.traverse=function(e){for(var t=this.Kids(),n=0,i=t.size();n<i;n++){var a=t.get(n),o=this.context.lookup(a);o instanceof r&&o.traverse(e),e(o,a)}},r.prototype.insertLeafKid=function(e,t){var n=this.Kids();this.ascend(function(e){var t=e.Count().asNumber()+1;e.set(i.default.of("Count"),a.default.of(t))}),n.insert(e,t)},r.prototype.removeKid=function(e){var t=this.Kids();t.lookup(e)instanceof o.default&&this.ascend(function(e){var t=e.Count().asNumber()-1;e.set(i.default.of("Count"),a.default.of(t))}),t.remove(e)},r.withContext=function(e,t){var n=new Map;return n.set(i.default.of("Type"),i.default.of("Pages")),n.set(i.default.of("Kids"),e.obj([])),n.set(i.default.of("Count"),e.obj(0)),t&&n.set(i.default.of("Parent"),t),new r(n,e)},r.fromMapWithContext=function(e,t){return new r(e,t)},r}(r.default)},668405:e=>{"use strict";e.s({IsDigit:()=>n,IsNumeric:()=>i});var t=e.i(110200),n=new Uint8Array(256);n[t.default.Zero]=1,n[t.default.One]=1,n[t.default.Two]=1,n[t.default.Three]=1,n[t.default.Four]=1,n[t.default.Five]=1,n[t.default.Six]=1,n[t.default.Seven]=1,n[t.default.Eight]=1,n[t.default.Nine]=1;var r=new Uint8Array(256);r[t.default.Period]=1,r[t.default.Plus]=1,r[t.default.Minus]=1;for(var i=new Uint8Array(256),a=0;a<256;a++)i[a]=n[a]||r[a]?1:0},377658:e=>{"use strict";e.s({default:()=>l});var t=e.i(143682),n=e.i(110200),r=e.i(668405),i=e.i(68597);e.i(465248);var a=e.i(261205),o=n.default.Newline,s=n.default.CarriageReturn;let l=function(){function e(e,t){void 0===t&&(t=!1),this.bytes=e,this.capNumbers=t}return e.prototype.parseRawInt=function(){for(var e="";!this.bytes.done();){var n=this.bytes.peek();if(!r.IsDigit[n])break;e+=(0,a.charFromCode)(this.bytes.next())}var i=Number(e);if(!e||!isFinite(i))throw new t.NumberParsingError(this.bytes.position(),e);return i},e.prototype.parseRawNumber=function(){for(var e="";!this.bytes.done();){var i=this.bytes.peek();if(!r.IsNumeric[i]||(e+=(0,a.charFromCode)(this.bytes.next()),i===n.default.Period))break}for(;!this.bytes.done();){var i=this.bytes.peek();if(!r.IsDigit[i])break;e+=(0,a.charFromCode)(this.bytes.next())}var o=Number(e);if(!e||!isFinite(o))throw new t.NumberParsingError(this.bytes.position(),e);if(o>Number.MAX_SAFE_INTEGER)if(this.capNumbers){var s="Parsed number that is too large for some PDF readers: "+e+", using Number.MAX_SAFE_INTEGER instead.";return console.warn(s),Number.MAX_SAFE_INTEGER}else{var s="Parsed number that is too large for some PDF readers: "+e+", not capping.";console.warn(s)}return o},e.prototype.skipWhitespace=function(){for(;!this.bytes.done()&&i.IsWhitespace[this.bytes.peek()];)this.bytes.next()},e.prototype.skipLine=function(){for(;!this.bytes.done();){var e=this.bytes.peek();if(e===o||e===s)return;this.bytes.next()}},e.prototype.skipComment=function(){if(this.bytes.peek()!==n.default.Percent)return!1;for(;!this.bytes.done();){var e=this.bytes.peek();if(e===o||e===s)break;this.bytes.next()}return!0},e.prototype.skipWhitespaceAndComments=function(){for(this.skipWhitespace();this.skipComment();)this.skipWhitespace()},e.prototype.matchKeyword=function(e){for(var t=this.bytes.offset(),n=0,r=e.length;n<r;n++)if(this.bytes.done()||this.bytes.next()!==e[n])return this.bytes.moveTo(t),!1;return!0},e}()},549470:e=>{"use strict";e.s({default:()=>i});var t=e.i(143682),n=e.i(41842),r=e.i(110200);let i=function(){function e(e){this.idx=0,this.line=0,this.column=0,this.bytes=e,this.length=this.bytes.length}return e.prototype.moveTo=function(e){this.idx=e},e.prototype.next=function(){var e=this.bytes[this.idx++];return e===r.default.Newline?(this.line+=1,this.column=0):this.column+=1,e},e.prototype.assertNext=function(e){if(this.peek()!==e)throw new t.NextByteAssertionError(this.position(),e,this.peek());return this.next()},e.prototype.peek=function(){return this.bytes[this.idx]},e.prototype.peekAhead=function(e){return this.bytes[this.idx+e]},e.prototype.peekAt=function(e){return this.bytes[e]},e.prototype.done=function(){return this.idx>=this.length},e.prototype.offset=function(){return this.idx},e.prototype.slice=function(e,t){return this.bytes.slice(e,t)},e.prototype.position=function(){return{line:this.line,column:this.column,offset:this.idx}},e.of=function(t){return new e(t)},e.fromPDFRawStream=function(t){return e.of((0,n.decodePDFRawStream)(t).decode())},e}()},536935:e=>{"use strict";e.s({Keywords:()=>l});var t=e.i(436255),n=e.i(110200),r=n.default.Space,i=n.default.CarriageReturn,a=n.default.Newline,o=[n.default.s,n.default.t,n.default.r,n.default.e,n.default.a,n.default.m],s=[n.default.e,n.default.n,n.default.d,n.default.s,n.default.t,n.default.r,n.default.e,n.default.a,n.default.m],l={header:[n.default.Percent,n.default.P,n.default.D,n.default.F,n.default.Dash],eof:[n.default.Percent,n.default.Percent,n.default.E,n.default.O,n.default.F],obj:[n.default.o,n.default.b,n.default.j],endobj:[n.default.e,n.default.n,n.default.d,n.default.o,n.default.b,n.default.j],xref:[n.default.x,n.default.r,n.default.e,n.default.f],trailer:[n.default.t,n.default.r,n.default.a,n.default.i,n.default.l,n.default.e,n.default.r],startxref:[n.default.s,n.default.t,n.default.a,n.default.r,n.default.t,n.default.x,n.default.r,n.default.e,n.default.f],true:[n.default.t,n.default.r,n.default.u,n.default.e],false:[n.default.f,n.default.a,n.default.l,n.default.s,n.default.e],null:[n.default.n,n.default.u,n.default.l,n.default.l],stream:o,streamEOF1:(0,t.__spreadArrays)(o,[r,i,a]),streamEOF2:(0,t.__spreadArrays)(o,[i,a]),streamEOF3:(0,t.__spreadArrays)(o,[i]),streamEOF4:(0,t.__spreadArrays)(o,[a]),endstream:s,EOF1endstream:(0,t.__spreadArrays)([i,a],s),EOF2endstream:(0,t.__spreadArrays)([i],s),EOF3endstream:(0,t.__spreadArrays)([a],s)}},175943:e=>{"use strict";e.s({default:()=>C});var t=e.i(436255),n=e.i(143682),r=e.i(922995),i=e.i(307502),a=e.i(155303),o=e.i(934271),s=e.i(91355),l=e.i(114962),u=e.i(865488),c=e.i(124729),d=e.i(927657),h=e.i(738472),p=e.i(377658),f=e.i(549470),m=e.i(7724),g=e.i(669076),y=e.i(376764),b=e.i(110200),x=e.i(351223),w=e.i(536935),k=e.i(668405),S=e.i(68597);e.i(465248);var _=e.i(261205);let C=function(e){function p(t,n,r){void 0===r&&(r=!1);var i=e.call(this,t,r)||this;return i.context=n,i}return(0,t.__extends)(p,e),p.prototype.parseObject=function(){if(this.skipWhitespaceAndComments(),this.matchKeyword(w.Keywords.true))return i.default.True;if(this.matchKeyword(w.Keywords.false))return i.default.False;if(this.matchKeyword(w.Keywords.null))return l.default;var e=this.bytes.peek();if(e===b.default.LessThan&&this.bytes.peekAhead(1)===b.default.LessThan)return this.parseDictOrStream();if(e===b.default.LessThan)return this.parseHexString();if(e===b.default.LeftParen)return this.parseString();if(e===b.default.ForwardSlash)return this.parseName();if(e===b.default.LeftSquareBracket)return this.parseArray();if(k.IsNumeric[e])return this.parseNumberOrRef();throw new n.PDFObjectParsingError(this.bytes.position(),e)},p.prototype.parseNumberOrRef=function(){var e=this.parseRawNumber();this.skipWhitespaceAndComments();var t=this.bytes.offset();if(k.IsDigit[this.bytes.peek()]){var n=this.parseRawNumber();if(this.skipWhitespaceAndComments(),this.bytes.peek()===b.default.R)return this.bytes.assertNext(b.default.R),d.default.of(e,n)}return this.bytes.moveTo(t),u.default.of(e)},p.prototype.parseHexString=function(){var e="";for(this.bytes.assertNext(b.default.LessThan);!this.bytes.done()&&this.bytes.peek()!==b.default.GreaterThan;)e+=(0,_.charFromCode)(this.bytes.next());return this.bytes.assertNext(b.default.GreaterThan),o.default.of(e)},p.prototype.parseString=function(){for(var e=0,t=!1,r="";!this.bytes.done();){var i=this.bytes.next();if(r+=(0,_.charFromCode)(i),t||(i===b.default.LeftParen&&(e+=1),i===b.default.RightParen&&(e-=1)),i===b.default.BackSlash?t=!t:t&&(t=!1),0===e)return h.default.of(r.substring(1,r.length-1))}throw new n.UnbalancedParenthesisError(this.bytes.position())},p.prototype.parseName=function(){this.bytes.assertNext(b.default.ForwardSlash);for(var e="";!this.bytes.done();){var t=this.bytes.peek();if(S.IsWhitespace[t]||x.IsDelimiter[t])break;e+=(0,_.charFromCode)(t),this.bytes.next()}return s.default.of(e)},p.prototype.parseArray=function(){this.bytes.assertNext(b.default.LeftSquareBracket),this.skipWhitespaceAndComments();for(var e=r.default.withContext(this.context);this.bytes.peek()!==b.default.RightSquareBracket;){var t=this.parseObject();e.push(t),this.skipWhitespaceAndComments()}return this.bytes.assertNext(b.default.RightSquareBracket),e},p.prototype.parseDict=function(){this.bytes.assertNext(b.default.LessThan),this.bytes.assertNext(b.default.LessThan),this.skipWhitespaceAndComments();for(var e=new Map;!this.bytes.done()&&this.bytes.peek()!==b.default.GreaterThan&&this.bytes.peekAhead(1)!==b.default.GreaterThan;){var t=this.parseName(),n=this.parseObject();e.set(t,n),this.skipWhitespaceAndComments()}this.skipWhitespaceAndComments(),this.bytes.assertNext(b.default.GreaterThan),this.bytes.assertNext(b.default.GreaterThan);var r=e.get(s.default.of("Type"));return r===s.default.of("Catalog")?m.default.fromMapWithContext(e,this.context):r===s.default.of("Pages")?y.default.fromMapWithContext(e,this.context):r===s.default.of("Page")?g.default.fromMapWithContext(e,this.context):a.default.fromMapWithContext(e,this.context)},p.prototype.parseDictOrStream=function(){var e,t=this.bytes.position(),n=this.parseDict();if(this.skipWhitespaceAndComments(),!this.matchKeyword(w.Keywords.streamEOF1)&&!this.matchKeyword(w.Keywords.streamEOF2)&&!this.matchKeyword(w.Keywords.streamEOF3)&&!this.matchKeyword(w.Keywords.streamEOF4)&&!this.matchKeyword(w.Keywords.stream))return n;var r=this.bytes.offset(),i=n.get(s.default.of("Length"));i instanceof u.default?(e=r+i.asNumber(),this.bytes.moveTo(e),this.skipWhitespaceAndComments(),this.matchKeyword(w.Keywords.endstream)||(this.bytes.moveTo(r),e=this.findEndOfStreamFallback(t))):e=this.findEndOfStreamFallback(t);var a=this.bytes.slice(r,e);return c.default.of(n,a)},p.prototype.findEndOfStreamFallback=function(e){for(var t=1,r=this.bytes.offset();!this.bytes.done()&&(r=this.bytes.offset(),this.matchKeyword(w.Keywords.stream)?t+=1:this.matchKeyword(w.Keywords.EOF1endstream)||this.matchKeyword(w.Keywords.EOF2endstream)||this.matchKeyword(w.Keywords.EOF3endstream)||this.matchKeyword(w.Keywords.endstream)?t-=1:this.bytes.next(),0!==t););if(0!==t)throw new n.PDFStreamParsingError(e);return r},p.forBytes=function(e,t,n){return new p(f.default.of(e),t,n)},p.forByteStream=function(e,t,n){return void 0===n&&(n=!1),new p(e,t,n)},p}(p.default)},176124:e=>{"use strict";e.s({default:()=>u});var t=e.i(436255),n=e.i(143682),r=e.i(91355),i=e.i(865488),a=e.i(927657),o=e.i(549470),s=e.i(175943);e.i(465248);var l=e.i(92830);let u=function(e){function s(t,n){var a=e.call(this,o.default.fromPDFRawStream(t),t.dict.context)||this,s=t.dict;return a.alreadyParsed=!1,a.shouldWaitForTick=n||function(){return!1},a.firstOffset=s.lookup(r.default.of("First"),i.default).asNumber(),a.objectCount=s.lookup(r.default.of("N"),i.default).asNumber(),a}return(0,t.__extends)(s,e),s.prototype.parseIntoContext=function(){return(0,t.__awaiter)(this,void 0,void 0,function(){var e,r,i,o,s,u,c,d;return(0,t.__generator)(this,function(t){switch(t.label){case 0:if(this.alreadyParsed)throw new n.ReparseError("PDFObjectStreamParser","parseIntoContext");this.alreadyParsed=!0,e=this.parseOffsetsAndObjectNumbers(),r=0,i=e.length,t.label=1;case 1:if(!(r<i))return[3,4];if(s=(o=e[r]).objectNumber,u=o.offset,this.bytes.moveTo(this.firstOffset+u),c=this.parseObject(),d=a.default.of(s,0),this.context.assign(d,c),!this.shouldWaitForTick())return[3,3];return[4,(0,l.waitForTick)()];case 2:t.sent(),t.label=3;case 3:return r++,[3,1];case 4:return[2]}})})},s.prototype.parseOffsetsAndObjectNumbers=function(){for(var e=[],t=0,n=this.objectCount;t<n;t++){this.skipWhitespaceAndComments();var r=this.parseRawInt();this.skipWhitespaceAndComments();var i=this.parseRawInt();e.push({objectNumber:r,offset:i})}return e},s.forStream=function(e,t){return new s(e,t)},s}(s.default)},320795:e=>{"use strict";e.s({default:()=>s});var t=e.i(143682),n=e.i(922995),r=e.i(91355),i=e.i(865488),a=e.i(927657),o=e.i(549470);let s=function(){function e(e){this.alreadyParsed=!1,this.dict=e.dict,this.bytes=o.default.fromPDFRawStream(e),this.context=this.dict.context;var t=this.dict.lookup(r.default.of("Size"),i.default),a=this.dict.lookup(r.default.of("Index"));if(a instanceof n.default){this.subsections=[];for(var s=0,l=a.size();s<l;s+=2){var u=a.lookup(s+0,i.default).asNumber(),c=a.lookup(s+1,i.default).asNumber();this.subsections.push({firstObjectNumber:u,length:c})}}else this.subsections=[{firstObjectNumber:0,length:t.asNumber()}];var d=this.dict.lookup(r.default.of("W"),n.default);this.byteWidths=[-1,-1,-1];for(var s=0,l=d.size();s<l;s++)this.byteWidths[s]=d.lookup(s,i.default).asNumber()}return e.prototype.parseIntoContext=function(){if(this.alreadyParsed)throw new t.ReparseError("PDFXRefStreamParser","parseIntoContext");return this.alreadyParsed=!0,this.context.trailerInfo={Root:this.dict.get(r.default.of("Root")),Encrypt:this.dict.get(r.default.of("Encrypt")),Info:this.dict.get(r.default.of("Info")),ID:this.dict.get(r.default.of("ID"))},this.parseEntries()},e.prototype.parseEntries=function(){for(var e=[],t=this.byteWidths,n=t[0],r=t[1],i=t[2],o=0,s=this.subsections.length;o<s;o++)for(var l=this.subsections[o],u=l.firstObjectNumber,c=l.length,d=0;d<c;d++){for(var h=0,p=0,f=n;p<f;p++)h=h<<8|this.bytes.next();for(var m=0,p=0,f=r;p<f;p++)m=m<<8|this.bytes.next();for(var g=0,p=0,f=i;p<f;p++)g=g<<8|this.bytes.next();0===n&&(h=1);var y=u+d,b={ref:a.default.of(y,g),offset:m,deleted:0===h,inObjectStream:2===h};e.push(b)}return e},e.forStream=function(t){return new e(t)},e}()},992791:e=>{"use strict";e.s({default:()=>w});var t=e.i(436255),n=e.i(77552),r=e.i(5500),i=e.i(70129),a=e.i(143682),o=e.i(155303),s=e.i(273815),l=e.i(91355),u=e.i(124729),c=e.i(927657),d=e.i(549470),h=e.i(175943),p=e.i(176124),f=e.i(320795),m=e.i(529676),g=e.i(110200),y=e.i(536935),b=e.i(668405);e.i(465248);var x=e.i(92830);let w=function(e){function h(t,n,r,i){void 0===n&&(n=1/0),void 0===r&&(r=!1),void 0===i&&(i=!1);var a=e.call(this,d.default.of(t),m.default.create(),i)||this;return a.alreadyParsed=!1,a.parsedObjects=0,a.shouldWaitForTick=function(){return a.parsedObjects+=1,a.parsedObjects%a.objectsPerTick==0},a.objectsPerTick=n,a.throwOnInvalidObject=r,a}return(0,t.__extends)(h,e),h.prototype.parseDocument=function(){return(0,t.__awaiter)(this,void 0,void 0,function(){var e,n;return(0,t.__generator)(this,function(t){switch(t.label){case 0:if(this.alreadyParsed)throw new a.ReparseError("PDFParser","parseDocument");this.alreadyParsed=!0,this.context.header=this.parseHeader(),t.label=1;case 1:if(this.bytes.done())return[3,3];return[4,this.parseDocumentSection()];case 2:if(t.sent(),(n=this.bytes.offset())===e)throw new a.StalledParserError(this.bytes.position());return e=n,[3,1];case 3:return this.maybeRecoverRoot(),this.context.lookup(c.default.of(0))&&(console.warn("Removing parsed object: 0 0 R"),this.context.delete(c.default.of(0))),[2,this.context]}})})},h.prototype.maybeRecoverRoot=function(){var e=function(e){return e instanceof o.default&&e.lookup(l.default.of("Type"))===l.default.of("Catalog")};if(!e(this.context.lookup(this.context.trailerInfo.Root)))for(var t=this.context.enumerateIndirectObjects(),n=0,r=t.length;n<r;n++){var i=t[n],a=i[0];e(i[1])&&(this.context.trailerInfo.Root=a)}},h.prototype.parseHeader=function(){for(;!this.bytes.done();){if(this.matchKeyword(y.Keywords.header)){var e=this.parseRawInt();this.bytes.assertNext(g.default.Period);var t=this.parseRawInt(),n=r.default.forVersion(e,t);return this.skipBinaryHeaderComment(),n}this.bytes.next()}throw new a.MissingPDFHeaderError(this.bytes.position())},h.prototype.parseIndirectObjectHeader=function(){this.skipWhitespaceAndComments();var e=this.parseRawInt();this.skipWhitespaceAndComments();var t=this.parseRawInt();if(this.skipWhitespaceAndComments(),!this.matchKeyword(y.Keywords.obj))throw new a.MissingKeywordError(this.bytes.position(),y.Keywords.obj);return c.default.of(e,t)},h.prototype.matchIndirectObjectHeader=function(){var e=this.bytes.offset();try{return this.parseIndirectObjectHeader(),!0}catch(t){return this.bytes.moveTo(e),!1}},h.prototype.parseIndirectObject=function(){return(0,t.__awaiter)(this,void 0,void 0,function(){var e,n;return(0,t.__generator)(this,function(t){switch(t.label){case 0:if(e=this.parseIndirectObjectHeader(),this.skipWhitespaceAndComments(),n=this.parseObject(),this.skipWhitespaceAndComments(),this.matchKeyword(y.Keywords.endobj),!(n instanceof u.default&&n.dict.lookup(l.default.of("Type"))===l.default.of("ObjStm")))return[3,2];return[4,p.default.forStream(n,this.shouldWaitForTick).parseIntoContext()];case 1:return t.sent(),[3,3];case 2:n instanceof u.default&&n.dict.lookup(l.default.of("Type"))===l.default.of("XRef")?f.default.forStream(n).parseIntoContext():this.context.assign(e,n),t.label=3;case 3:return[2,e]}})})},h.prototype.tryToParseInvalidIndirectObject=function(){var e=this.bytes.position(),t="Trying to parse invalid object: "+JSON.stringify(e)+")";if(this.throwOnInvalidObject)throw Error(t);console.warn(t);var n=this.parseIndirectObjectHeader();console.warn("Invalid object ref: "+n),this.skipWhitespaceAndComments();for(var r=this.bytes.offset(),i=!0;!this.bytes.done()&&(this.matchKeyword(y.Keywords.endobj)&&(i=!1),i);)this.bytes.next();if(i)throw new a.PDFInvalidObjectParsingError(e);var o=this.bytes.offset()-y.Keywords.endobj.length,l=s.default.of(this.bytes.slice(r,o));return this.context.assign(n,l),n},h.prototype.parseIndirectObjects=function(){return(0,t.__awaiter)(this,void 0,void 0,function(){var e;return(0,t.__generator)(this,function(t){switch(t.label){case 0:this.skipWhitespaceAndComments(),t.label=1;case 1:if(!(!this.bytes.done()&&b.IsDigit[this.bytes.peek()]))return[3,8];e=this.bytes.offset(),t.label=2;case 2:return t.trys.push([2,4,,5]),[4,this.parseIndirectObject()];case 3:return t.sent(),[3,5];case 4:return t.sent(),this.bytes.moveTo(e),this.tryToParseInvalidIndirectObject(),[3,5];case 5:if(this.skipWhitespaceAndComments(),this.skipJibberish(),!this.shouldWaitForTick())return[3,7];return[4,(0,x.waitForTick)()];case 6:t.sent(),t.label=7;case 7:return[3,1];case 8:return[2]}})})},h.prototype.maybeParseCrossRefSection=function(){if(this.skipWhitespaceAndComments(),this.matchKeyword(y.Keywords.xref)){this.skipWhitespaceAndComments();for(var e=-1,t=n.default.createEmpty();!this.bytes.done()&&b.IsDigit[this.bytes.peek()];){var r=this.parseRawInt();this.skipWhitespaceAndComments();var i=this.parseRawInt();this.skipWhitespaceAndComments();var a=this.bytes.peek();if(a===g.default.n||a===g.default.f){var o=c.default.of(e,i);this.bytes.next()===g.default.n?t.addEntry(o,r):t.addDeletedEntry(o,r),e+=1}else e=r;this.skipWhitespaceAndComments()}return t}},h.prototype.maybeParseTrailerDict=function(){if(this.skipWhitespaceAndComments(),this.matchKeyword(y.Keywords.trailer)){this.skipWhitespaceAndComments();var e=this.parseDict(),t=this.context;t.trailerInfo={Root:e.get(l.default.of("Root"))||t.trailerInfo.Root,Encrypt:e.get(l.default.of("Encrypt"))||t.trailerInfo.Encrypt,Info:e.get(l.default.of("Info"))||t.trailerInfo.Info,ID:e.get(l.default.of("ID"))||t.trailerInfo.ID}}},h.prototype.maybeParseTrailer=function(){if(this.skipWhitespaceAndComments(),this.matchKeyword(y.Keywords.startxref)){this.skipWhitespaceAndComments();var e=this.parseRawInt();return this.skipWhitespace(),this.matchKeyword(y.Keywords.eof),this.skipWhitespaceAndComments(),this.matchKeyword(y.Keywords.eof),this.skipWhitespaceAndComments(),i.default.forLastCrossRefSectionOffset(e)}},h.prototype.parseDocumentSection=function(){return(0,t.__awaiter)(this,void 0,void 0,function(){return(0,t.__generator)(this,function(e){switch(e.label){case 0:return[4,this.parseIndirectObjects()];case 1:return e.sent(),this.maybeParseCrossRefSection(),this.maybeParseTrailerDict(),this.maybeParseTrailer(),this.skipJibberish(),[2]}})})},h.prototype.skipJibberish=function(){for(this.skipWhitespaceAndComments();!this.bytes.done();){var e=this.bytes.offset(),t=this.bytes.peek();if(t>=g.default.Space&&t<=g.default.Tilde&&(this.matchKeyword(y.Keywords.xref)||this.matchKeyword(y.Keywords.trailer)||this.matchKeyword(y.Keywords.startxref)||this.matchIndirectObjectHeader())){this.bytes.moveTo(e);break}this.bytes.next()}},h.prototype.skipBinaryHeaderComment=function(){this.skipWhitespaceAndComments();try{var e=this.bytes.offset();this.parseIndirectObjectHeader(),this.bytes.moveTo(e)}catch(e){this.bytes.next(),this.skipWhitespaceAndComments()}},h.forBytesWithOptions=function(e,t,n,r){return new h(e,t,n,r)},h}(h.default)},856049:e=>{"use strict";e.s({AnnotationFlags:()=>t});var t,n=function(e){return 1<<e};!function(e){e[e.Invisible=n(0)]="Invisible",e[e.Hidden=n(1)]="Hidden",e[e.Print=n(2)]="Print",e[e.NoZoom=n(3)]="NoZoom",e[e.NoRotate=n(4)]="NoRotate",e[e.NoView=n(5)]="NoView",e[e.ReadOnly=n(6)]="ReadOnly",e[e.Locked=n(7)]="Locked",e[e.ToggleNoView=n(8)]="ToggleNoView",e[e.LockedContents=n(9)]="LockedContents"}(t||(t={}))},1781:e=>{"use strict";e.s({}),e.i(535100),e.i(514618),e.i(822857),e.i(856049)},350597:e=>{"use strict";e.s({}),e.i(535100),e.i(514618),e.i(822857),e.i(856049),e.i(1781)},148974:e=>{"use strict";e.s({}),e.i(143682),e.i(110200),e.i(529676),e.i(258446),e.i(671329),e.i(550353),e.i(5500),e.i(70129),e.i(356543),e.i(77552),e.i(16377),e.i(17313),e.i(895970),e.i(969951),e.i(217207),e.i(233710),e.i(725960),e.i(799239),e.i(539397),e.i(307502),e.i(865488),e.i(738472),e.i(934271),e.i(91355),e.i(114962),e.i(922995),e.i(155303),e.i(927657),e.i(273815),e.i(13139),e.i(124729),e.i(7724),e.i(637971),e.i(665619),e.i(797631),e.i(376764),e.i(669076),e.i(74001),e.i(523151),e.i(833160),e.i(175943),e.i(176124),e.i(992791),e.i(320795),e.i(41842),e.i(350597),e.i(957951)},35849:e=>{"use strict";e.s({}),e.i(143682),e.i(110200),e.i(529676),e.i(258446),e.i(671329),e.i(550353),e.i(5500),e.i(70129),e.i(356543),e.i(77552),e.i(16377),e.i(17313),e.i(895970),e.i(969951),e.i(217207),e.i(233710),e.i(725960),e.i(799239),e.i(539397),e.i(307502),e.i(865488),e.i(738472),e.i(934271),e.i(91355),e.i(114962),e.i(922995),e.i(155303),e.i(927657),e.i(273815),e.i(13139),e.i(124729),e.i(7724),e.i(637971),e.i(665619),e.i(797631),e.i(376764),e.i(669076),e.i(74001),e.i(523151),e.i(833160),e.i(175943),e.i(176124),e.i(992791),e.i(320795),e.i(41842),e.i(350597),e.i(957951),e.i(148974)},349043:e=>{"use strict";e.s({PDFName:()=>t.default});var t=e.i(91355)},285863:e=>{"use strict";e.s({PDFNumber:()=>t.default});var t=e.i(865488)},156410:e=>{"use strict";e.s({asNumber:()=>a,asPDFName:()=>r,asPDFNumber:()=>i}),e.i(35849);var t=e.i(349043),n=e.i(285863),r=function(e){return e instanceof t.PDFName?e:t.PDFName.of(e)},i=function(e){return e instanceof n.PDFNumber?e:n.PDFNumber.of(e)},a=function(e){return e instanceof n.PDFNumber?e.asNumber():e}},893475:e=>{"use strict";e.s({adjustDimsForRotation:()=>d,degrees:()=>i,degreesToRadians:()=>s,reduceRotation:()=>c,rotateRectangle:()=>h,toDegrees:()=>u,toRadians:()=>l}),e.i(465248);var t,n=e.i(540265),r=e.i(683654);!function(e){e.Degrees="degrees",e.Radians="radians"}(t||(t={}));var i=function(e){return(0,n.assertIs)(e,"degreeAngle",["number"]),{type:t.Degrees,angle:e}},a=t.Radians,o=t.Degrees,s=function(e){return e*Math.PI/180},l=function(e){return e.type===a?e.angle:e.type===o?s(e.angle):(0,r.error)("Invalid rotation: "+JSON.stringify(e))},u=function(e){return e.type===a?180*e.angle/Math.PI:e.type===o?e.angle:(0,r.error)("Invalid rotation: "+JSON.stringify(e))},c=function(e){void 0===e&&(e=0);var t=e/90%4;return 0===t?0:1===t?90:2===t?180:270*(3===t)},d=function(e,t){void 0===t&&(t=0);var n=c(t);return 90===n||270===n?{width:e.height,height:e.width}:{width:e.width,height:e.height}},h=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=0);var r=e.x,i=e.y,a=e.width,o=e.height,s=c(n),l=t/2;return 0===s?{x:r-l,y:i-l,width:a,height:o}:90===s?{x:r-o+l,y:i-l,width:o,height:a}:180===s?{x:r-a+l,y:i-o+l,width:a,height:o}:270===s?{x:r-l,y:i-a+l,width:o,height:a}:{x:r-l,y:i-l,width:a,height:o}}},152126:e=>{"use strict";e.s({PDFOperator:()=>t.default});var t=e.i(523151)},853937:e=>{"use strict";e.s({PDFOperatorNames:()=>t.default});var t=e.i(833160)},283732:e=>{"use strict";e.s({LineCapStyle:()=>t,appendBezierCurve:()=>C,appendQuadraticCurve:()=>A,beginMarkedContent:()=>K,beginText:()=>j,clip:()=>l,closePath:()=>E,drawObject:()=>U,endMarkedContent:()=>Y,endPath:()=>P,endText:()=>F,fill:()=>N,fillAndStroke:()=>D,lineTo:()=>M,moveTo:()=>T,nextLine:()=>R,popGraphicsState:()=>S,pushGraphicsState:()=>k,rotateAndSkewTextRadiansAndTranslate:()=>B,rotateDegrees:()=>g,rotateRadians:()=>m,scale:()=>f,setDashPattern:()=>b,setFillingCmykColor:()=>G,setFillingGrayscaleColor:()=>H,setFillingRgbColor:()=>V,setFontAndSize:()=>L,setGraphicsState:()=>w,setLineCap:()=>x,setLineHeight:()=>z,setLineWidth:()=>_,setStrokingCmykColor:()=>$,setStrokingGrayscaleColor:()=>W,setStrokingRgbColor:()=>q,showText:()=>O,skewRadians:()=>y,stroke:()=>I,translate:()=>p});var t,n,r,i=e.i(156410),a=e.i(893475);e.i(35849);var o=e.i(152126),s=e.i(853937),l=function(){return o.PDFOperator.of(s.PDFOperatorNames.ClipNonZero)},u=Math.cos,c=Math.sin,d=Math.tan,h=function(e,t,n,r,a,l){return o.PDFOperator.of(s.PDFOperatorNames.ConcatTransformationMatrix,[(0,i.asPDFNumber)(e),(0,i.asPDFNumber)(t),(0,i.asPDFNumber)(n),(0,i.asPDFNumber)(r),(0,i.asPDFNumber)(a),(0,i.asPDFNumber)(l)])},p=function(e,t){return h(1,0,0,1,e,t)},f=function(e,t){return h(e,0,0,t,0,0)},m=function(e){return h(u((0,i.asNumber)(e)),c((0,i.asNumber)(e)),-c((0,i.asNumber)(e)),u((0,i.asNumber)(e)),0,0)},g=function(e){return m((0,a.degreesToRadians)((0,i.asNumber)(e)))},y=function(e,t){return h(1,d((0,i.asNumber)(e)),d((0,i.asNumber)(t)),1,0,0)},b=function(e,t){return o.PDFOperator.of(s.PDFOperatorNames.SetLineDashPattern,["["+e.map(i.asPDFNumber).join(" ")+"]",(0,i.asPDFNumber)(t)])};!function(e){e[e.Butt=0]="Butt",e[e.Round=1]="Round",e[e.Projecting=2]="Projecting"}(t||(t={}));var x=function(e){return o.PDFOperator.of(s.PDFOperatorNames.SetLineCapStyle,[(0,i.asPDFNumber)(e)])};!function(e){e[e.Miter=0]="Miter",e[e.Round=1]="Round",e[e.Bevel=2]="Bevel"}(n||(n={}));var w=function(e){return o.PDFOperator.of(s.PDFOperatorNames.SetGraphicsStateParams,[(0,i.asPDFName)(e)])},k=function(){return o.PDFOperator.of(s.PDFOperatorNames.PushGraphicsState)},S=function(){return o.PDFOperator.of(s.PDFOperatorNames.PopGraphicsState)},_=function(e){return o.PDFOperator.of(s.PDFOperatorNames.SetLineWidth,[(0,i.asPDFNumber)(e)])},C=function(e,t,n,r,a,l){return o.PDFOperator.of(s.PDFOperatorNames.AppendBezierCurve,[(0,i.asPDFNumber)(e),(0,i.asPDFNumber)(t),(0,i.asPDFNumber)(n),(0,i.asPDFNumber)(r),(0,i.asPDFNumber)(a),(0,i.asPDFNumber)(l)])},A=function(e,t,n,r){return o.PDFOperator.of(s.PDFOperatorNames.CurveToReplicateInitialPoint,[(0,i.asPDFNumber)(e),(0,i.asPDFNumber)(t),(0,i.asPDFNumber)(n),(0,i.asPDFNumber)(r)])},E=function(){return o.PDFOperator.of(s.PDFOperatorNames.ClosePath)},T=function(e,t){return o.PDFOperator.of(s.PDFOperatorNames.MoveTo,[(0,i.asPDFNumber)(e),(0,i.asPDFNumber)(t)])},M=function(e,t){return o.PDFOperator.of(s.PDFOperatorNames.LineTo,[(0,i.asPDFNumber)(e),(0,i.asPDFNumber)(t)])},I=function(){return o.PDFOperator.of(s.PDFOperatorNames.StrokePath)},N=function(){return o.PDFOperator.of(s.PDFOperatorNames.FillNonZero)},D=function(){return o.PDFOperator.of(s.PDFOperatorNames.FillNonZeroAndStroke)},P=function(){return o.PDFOperator.of(s.PDFOperatorNames.EndPath)},R=function(){return o.PDFOperator.of(s.PDFOperatorNames.NextLine)},O=function(e){return o.PDFOperator.of(s.PDFOperatorNames.ShowText,[e])},j=function(){return o.PDFOperator.of(s.PDFOperatorNames.BeginText)},F=function(){return o.PDFOperator.of(s.PDFOperatorNames.EndText)},L=function(e,t){return o.PDFOperator.of(s.PDFOperatorNames.SetFontAndSize,[(0,i.asPDFName)(e),(0,i.asPDFNumber)(t)])},z=function(e){return o.PDFOperator.of(s.PDFOperatorNames.SetTextLineHeight,[(0,i.asPDFNumber)(e)])};!function(e){e[e.Fill=0]="Fill",e[e.Outline=1]="Outline",e[e.FillAndOutline=2]="FillAndOutline",e[e.Invisible=3]="Invisible",e[e.FillAndClip=4]="FillAndClip",e[e.OutlineAndClip=5]="OutlineAndClip",e[e.FillAndOutlineAndClip=6]="FillAndOutlineAndClip",e[e.Clip=7]="Clip"}(r||(r={}));var B=function(e,t,n,r,a){var l,h,p,f;return l=u((0,i.asNumber)(e)),h=c((0,i.asNumber)(e))+d((0,i.asNumber)(t)),p=-c((0,i.asNumber)(e))+d((0,i.asNumber)(n)),f=u((0,i.asNumber)(e)),o.PDFOperator.of(s.PDFOperatorNames.SetTextMatrix,[(0,i.asPDFNumber)(l),(0,i.asPDFNumber)(h),(0,i.asPDFNumber)(p),(0,i.asPDFNumber)(f),(0,i.asPDFNumber)(r),(0,i.asPDFNumber)(a)])},U=function(e){return o.PDFOperator.of(s.PDFOperatorNames.DrawObject,[(0,i.asPDFName)(e)])},H=function(e){return o.PDFOperator.of(s.PDFOperatorNames.NonStrokingColorGray,[(0,i.asPDFNumber)(e)])},W=function(e){return o.PDFOperator.of(s.PDFOperatorNames.StrokingColorGray,[(0,i.asPDFNumber)(e)])},V=function(e,t,n){return o.PDFOperator.of(s.PDFOperatorNames.NonStrokingColorRgb,[(0,i.asPDFNumber)(e),(0,i.asPDFNumber)(t),(0,i.asPDFNumber)(n)])},q=function(e,t,n){return o.PDFOperator.of(s.PDFOperatorNames.StrokingColorRgb,[(0,i.asPDFNumber)(e),(0,i.asPDFNumber)(t),(0,i.asPDFNumber)(n)])},G=function(e,t,n,r){return o.PDFOperator.of(s.PDFOperatorNames.NonStrokingColorCmyk,[(0,i.asPDFNumber)(e),(0,i.asPDFNumber)(t),(0,i.asPDFNumber)(n),(0,i.asPDFNumber)(r)])},$=function(e,t,n,r){return o.PDFOperator.of(s.PDFOperatorNames.StrokingColorCmyk,[(0,i.asPDFNumber)(e),(0,i.asPDFNumber)(t),(0,i.asPDFNumber)(n),(0,i.asPDFNumber)(r)])},K=function(e){return o.PDFOperator.of(s.PDFOperatorNames.BeginMarkedContent,[(0,i.asPDFName)(e)])},Y=function(){return o.PDFOperator.of(s.PDFOperatorNames.EndMarkedContent)}},828226:e=>{"use strict";e.s({cmyk:()=>s,colorToComponents:()=>f,componentsToColor:()=>p,grayscale:()=>a,rgb:()=>o,setFillingColor:()=>d,setStrokingColor:()=>h});var t,n=e.i(283732);e.i(465248);var r=e.i(540265),i=e.i(683654);!function(e){e.Grayscale="Grayscale",e.RGB="RGB",e.CMYK="CMYK"}(t||(t={}));var a=function(e){return(0,r.assertRange)(e,"gray",0,1),{type:t.Grayscale,gray:e}},o=function(e,n,i){return(0,r.assertRange)(e,"red",0,1),(0,r.assertRange)(n,"green",0,1),(0,r.assertRange)(i,"blue",0,1),{type:t.RGB,red:e,green:n,blue:i}},s=function(e,n,i,a){return(0,r.assertRange)(e,"cyan",0,1),(0,r.assertRange)(n,"magenta",0,1),(0,r.assertRange)(i,"yellow",0,1),(0,r.assertRange)(a,"key",0,1),{type:t.CMYK,cyan:e,magenta:n,yellow:i,key:a}},l=t.Grayscale,u=t.RGB,c=t.CMYK,d=function(e){return e.type===l?(0,n.setFillingGrayscaleColor)(e.gray):e.type===u?(0,n.setFillingRgbColor)(e.red,e.green,e.blue):e.type===c?(0,n.setFillingCmykColor)(e.cyan,e.magenta,e.yellow,e.key):(0,i.error)("Invalid color: "+JSON.stringify(e))},h=function(e){return e.type===l?(0,n.setStrokingGrayscaleColor)(e.gray):e.type===u?(0,n.setStrokingRgbColor)(e.red,e.green,e.blue):e.type===c?(0,n.setStrokingCmykColor)(e.cyan,e.magenta,e.yellow,e.key):(0,i.error)("Invalid color: "+JSON.stringify(e))},p=function(e,t){return void 0===t&&(t=1),(null==e?void 0:e.length)===1?a(e[0]*t):(null==e?void 0:e.length)===3?o(e[0]*t,e[1]*t,e[2]*t):(null==e?void 0:e.length)===4?s(e[0]*t,e[1]*t,e[2]*t,e[3]*t):void 0},f=function(e){return e.type===l?[e.gray]:e.type===u?[e.red,e.green,e.blue]:e.type===c?[e.cyan,e.magenta,e.yellow,e.key]:(0,i.error)("Invalid color: "+JSON.stringify(e))}},67709:e=>{"use strict";e.s({svgPathToOperators:()=>m});var t=e.i(283732),n=0,r=0,i=0,a=0,o=0,s=0,l=new Map([["A",7],["a",7],["C",6],["c",6],["H",1],["h",1],["L",2],["l",2],["M",2],["m",2],["Q",4],["q",4],["S",4],["s",4],["T",2],["t",2],["V",1],["v",1],["Z",0],["z",0]]),u=function(e){for(var t,n=[],r=[],i="",a=!1,o=0,s=0;s<e.length;s++){var u=e[s];if(l.has(u))o=l.get(u),t&&(i.length>0&&(r[r.length]=+i),n[n.length]={cmd:t,args:r},r=[],i="",a=!1),t=u;else if([" ",","].includes(u)||"-"===u&&i.length>0&&"e"!==i[i.length-1]||"."===u&&a){if(0===i.length)continue;r.length===o?(n[n.length]={cmd:t,args:r},r=[+i],"M"===t&&(t="L"),"m"===t&&(t="l")):r[r.length]=+i,a="."===u,i=["-","."].includes(u)?u:""}else i+=u,"."===u&&(a=!0)}return i.length>0&&(r.length===o?(n[n.length]={cmd:t,args:r},r=[+i],"M"===t&&(t="L"),"m"===t&&(t="l")):r[r.length]=+i),n[n.length]={cmd:t,args:r},n},c=function(e){n=r=i=a=o=s=0;for(var t=[],l=0;l<e.length;l++){var u=e[l];if(u.cmd&&"function"==typeof d[u.cmd]){var c=d[u.cmd](u.args);Array.isArray(c)?t=t.concat(c):t.push(c)}}return t},d={M:function(e){return n=e[0],r=e[1],i=a=null,o=n,s=r,(0,t.moveTo)(n,r)},m:function(e){return n+=e[0],r+=e[1],i=a=null,o=n,s=r,(0,t.moveTo)(n,r)},C:function(e){return n=e[4],r=e[5],i=e[2],a=e[3],(0,t.appendBezierCurve)(e[0],e[1],e[2],e[3],e[4],e[5])},c:function(e){var o=(0,t.appendBezierCurve)(e[0]+n,e[1]+r,e[2]+n,e[3]+r,e[4]+n,e[5]+r);return i=n+e[2],a=r+e[3],n+=e[4],r+=e[5],o},S:function(e){(null===i||null===a)&&(i=n,a=r);var o=(0,t.appendBezierCurve)(n-(i-n),r-(a-r),e[0],e[1],e[2],e[3]);return i=e[0],a=e[1],n=e[2],r=e[3],o},s:function(e){(null===i||null===a)&&(i=n,a=r);var o=(0,t.appendBezierCurve)(n-(i-n),r-(a-r),n+e[0],r+e[1],n+e[2],r+e[3]);return i=n+e[0],a=r+e[1],n+=e[2],r+=e[3],o},Q:function(e){return i=e[0],a=e[1],n=e[2],r=e[3],(0,t.appendQuadraticCurve)(e[0],e[1],n,r)},q:function(e){var o=(0,t.appendQuadraticCurve)(e[0]+n,e[1]+r,e[2]+n,e[3]+r);return i=n+e[0],a=r+e[1],n+=e[2],r+=e[3],o},T:function(e){null===i||null===a?(i=n,a=r):(i=n-(i-n),a=r-(a-r));var o=(0,t.appendQuadraticCurve)(i,a,e[0],e[1]);return i=n-(i-n),a=r-(a-r),n=e[0],r=e[1],o},t:function(e){null===i||null===a?(i=n,a=r):(i=n-(i-n),a=r-(a-r));var o=(0,t.appendQuadraticCurve)(i,a,n+e[0],r+e[1]);return n+=e[0],r+=e[1],o},A:function(e){var t=h(n,r,e);return n=e[5],r=e[6],t},a:function(e){e[5]+=n,e[6]+=r;var t=h(n,r,e);return n=e[5],r=e[6],t},L:function(e){return n=e[0],r=e[1],i=a=null,(0,t.lineTo)(n,r)},l:function(e){return n+=e[0],r+=e[1],i=a=null,(0,t.lineTo)(n,r)},H:function(e){return n=e[0],i=a=null,(0,t.lineTo)(n,r)},h:function(e){return n+=e[0],i=a=null,(0,t.lineTo)(n,r)},V:function(e){return r=e[0],i=a=null,(0,t.lineTo)(n,r)},v:function(e){return r+=e[0],i=a=null,(0,t.lineTo)(n,r)},Z:function(){var e=(0,t.closePath)();return n=o,r=s,e},z:function(){var e=(0,t.closePath)();return n=o,r=s,e}},h=function(e,n,r){for(var i=r[0],a=r[1],o=r[2],s=r[3],l=r[4],u=p(r[5],r[6],i,a,s,l,o,e,n),c=[],d=0;d<u.length;d++){var h=f.apply(void 0,u[d]);c.push(t.appendBezierCurve.apply(void 0,h))}return c},p=function(e,t,n,r,o,s,l,u,c){var d=Math.PI/180*l,h=Math.sin(d),p=Math.cos(d);n=Math.abs(n),r=Math.abs(r);var f=(i=p*(u-e)*.5+h*(c-t)*.5)*i/(n*n)+(a=p*(c-t)*.5-h*(u-e)*.5)*a/(r*r);f>1&&(n*=f=Math.sqrt(f),r*=f);var m=p/n,g=h/n,y=-h/r,b=p/r,x=m*u+g*c,w=y*u+b*c,k=m*e+g*t,S=y*e+b*t,_=1/((k-x)*(k-x)+(S-w)*(S-w))-.25;_<0&&(_=0);var C=Math.sqrt(_);s===o&&(C=-C);var A=.5*(x+k)-C*(S-w),E=.5*(w+S)+C*(k-x),T=Math.atan2(w-E,x-A),M=Math.atan2(S-E,k-A)-T;M<0&&1===s?M+=2*Math.PI:M>0&&0===s&&(M-=2*Math.PI);for(var I=Math.ceil(Math.abs(M/(.5*Math.PI+.001))),N=[],D=0;D<I;D++){var P=T+D*M/I,R=T+(D+1)*M/I;N[D]=[A,E,P,R,n,r,h,p]}return N},f=function(e,t,n,r,i,a,o,s){var l=s*i,u=-o*a,c=o*i,d=s*a,h=.5*(r-n),p=8/3*Math.sin(.5*h)*Math.sin(.5*h)/Math.sin(h),f=e+Math.cos(n)-p*Math.sin(n),m=t+Math.sin(n)+p*Math.cos(n),g=e+Math.cos(r),y=t+Math.sin(r),b=g+p*Math.sin(r),x=y-p*Math.cos(r);return[l*f+u*m,c*f+d*m,l*b+u*x,c*b+d*x,l*g+u*y,c*g+d*y]},m=function(e){return c(u(e))}},453631:e=>{"use strict";e.s({drawButton:()=>k,drawCheckBox:()=>x,drawEllipse:()=>m,drawImage:()=>l,drawLine:()=>c,drawLinesOfText:()=>s,drawOptionList:()=>C,drawPage:()=>u,drawRadioButton:()=>w,drawRectangle:()=>d,drawSvgPath:()=>g,drawTextField:()=>_,rotateInPlace:()=>b});var t=e.i(436255),n=e.i(828226),r=e.i(283732),i=e.i(893475),a=e.i(67709),o=e.i(156410),s=function(e,t){for(var a=[(0,r.pushGraphicsState)(),t.graphicsState&&(0,r.setGraphicsState)(t.graphicsState),(0,r.beginText)(),(0,n.setFillingColor)(t.color),(0,r.setFontAndSize)(t.font,t.size),(0,r.setLineHeight)(t.lineHeight),(0,r.rotateAndSkewTextRadiansAndTranslate)((0,i.toRadians)(t.rotate),(0,i.toRadians)(t.xSkew),(0,i.toRadians)(t.ySkew),t.x,t.y)].filter(Boolean),o=0,s=e.length;o<s;o++)a.push((0,r.showText)(e[o]),(0,r.nextLine)());return a.push((0,r.endText)(),(0,r.popGraphicsState)()),a},l=function(e,t){return[(0,r.pushGraphicsState)(),t.graphicsState&&(0,r.setGraphicsState)(t.graphicsState),(0,r.translate)(t.x,t.y),(0,r.rotateRadians)((0,i.toRadians)(t.rotate)),(0,r.scale)(t.width,t.height),(0,r.skewRadians)((0,i.toRadians)(t.xSkew),(0,i.toRadians)(t.ySkew)),(0,r.drawObject)(e),(0,r.popGraphicsState)()].filter(Boolean)},u=function(e,t){return[(0,r.pushGraphicsState)(),t.graphicsState&&(0,r.setGraphicsState)(t.graphicsState),(0,r.translate)(t.x,t.y),(0,r.rotateRadians)((0,i.toRadians)(t.rotate)),(0,r.scale)(t.xScale,t.yScale),(0,r.skewRadians)((0,i.toRadians)(t.xSkew),(0,i.toRadians)(t.ySkew)),(0,r.drawObject)(e),(0,r.popGraphicsState)()].filter(Boolean)},c=function(e){var t,i;return[(0,r.pushGraphicsState)(),e.graphicsState&&(0,r.setGraphicsState)(e.graphicsState),e.color&&(0,n.setStrokingColor)(e.color),(0,r.setLineWidth)(e.thickness),(0,r.setDashPattern)(null!=(t=e.dashArray)?t:[],null!=(i=e.dashPhase)?i:0),(0,r.moveTo)(e.start.x,e.start.y),e.lineCap&&(0,r.setLineCap)(e.lineCap),(0,r.moveTo)(e.start.x,e.start.y),(0,r.lineTo)(e.end.x,e.end.y),(0,r.stroke)(),(0,r.popGraphicsState)()].filter(Boolean)},d=function(e){var t,a;return[(0,r.pushGraphicsState)(),e.graphicsState&&(0,r.setGraphicsState)(e.graphicsState),e.color&&(0,n.setFillingColor)(e.color),e.borderColor&&(0,n.setStrokingColor)(e.borderColor),(0,r.setLineWidth)(e.borderWidth),e.borderLineCap&&(0,r.setLineCap)(e.borderLineCap),(0,r.setDashPattern)(null!=(t=e.borderDashArray)?t:[],null!=(a=e.borderDashPhase)?a:0),(0,r.translate)(e.x,e.y),(0,r.rotateRadians)((0,i.toRadians)(e.rotate)),(0,r.skewRadians)((0,i.toRadians)(e.xSkew),(0,i.toRadians)(e.ySkew)),(0,r.moveTo)(0,0),(0,r.lineTo)(0,e.height),(0,r.lineTo)(e.width,e.height),(0,r.lineTo)(e.width,0),(0,r.closePath)(),e.color&&e.borderWidth?(0,r.fillAndStroke)():e.color?(0,r.fill)():e.borderColor?(0,r.stroke)():(0,r.closePath)(),(0,r.popGraphicsState)()].filter(Boolean)},h=(Math.sqrt(2)-1)/3*4,p=function(e){var t=(0,o.asNumber)(e.x),n=(0,o.asNumber)(e.y),i=(0,o.asNumber)(e.xScale),a=(0,o.asNumber)(e.yScale);t-=i,n-=a;var s=i*h,l=a*h,u=t+2*i,c=n+2*a,d=t+i,p=n+a;return[(0,r.pushGraphicsState)(),(0,r.moveTo)(t,p),(0,r.appendBezierCurve)(t,p-l,d-s,n,d,n),(0,r.appendBezierCurve)(d+s,n,u,p-l,u,p),(0,r.appendBezierCurve)(u,p+l,d+s,c,d,c),(0,r.appendBezierCurve)(d-s,c,t,p+l,t,p),(0,r.popGraphicsState)()]},f=function(e){var t=(0,o.asNumber)(e.x),n=(0,o.asNumber)(e.y),a=(0,o.asNumber)(e.xScale),s=(0,o.asNumber)(e.yScale),l=-a,u=-s,c=a*h,d=s*h,p=l+2*a,f=u+2*s,m=l+a,g=u+s;return[(0,r.translate)(t,n),(0,r.rotateRadians)((0,i.toRadians)(e.rotate)),(0,r.moveTo)(l,g),(0,r.appendBezierCurve)(l,g-d,m-c,u,m,u),(0,r.appendBezierCurve)(m+c,u,p,g-d,p,g),(0,r.appendBezierCurve)(p,g+d,m+c,f,m,f),(0,r.appendBezierCurve)(m-c,f,l,g+d,l,g)]},m=function(e){var a,o,s;return(0,t.__spreadArrays)([(0,r.pushGraphicsState)(),e.graphicsState&&(0,r.setGraphicsState)(e.graphicsState),e.color&&(0,n.setFillingColor)(e.color),e.borderColor&&(0,n.setStrokingColor)(e.borderColor),(0,r.setLineWidth)(e.borderWidth),e.borderLineCap&&(0,r.setLineCap)(e.borderLineCap),(0,r.setDashPattern)(null!=(a=e.borderDashArray)?a:[],null!=(o=e.borderDashPhase)?o:0)],void 0===e.rotate?p({x:e.x,y:e.y,xScale:e.xScale,yScale:e.yScale}):f({x:e.x,y:e.y,xScale:e.xScale,yScale:e.yScale,rotate:null!=(s=e.rotate)?s:(0,i.degrees)(0)}),[e.color&&e.borderWidth?(0,r.fillAndStroke)():e.color?(0,r.fill)():e.borderColor?(0,r.stroke)():(0,r.closePath)(),(0,r.popGraphicsState)()]).filter(Boolean)},g=function(e,o){var s,l,u;return(0,t.__spreadArrays)([(0,r.pushGraphicsState)(),o.graphicsState&&(0,r.setGraphicsState)(o.graphicsState),(0,r.translate)(o.x,o.y),(0,r.rotateRadians)((0,i.toRadians)(null!=(s=o.rotate)?s:(0,i.degrees)(0))),o.scale?(0,r.scale)(o.scale,-o.scale):(0,r.scale)(1,-1),o.color&&(0,n.setFillingColor)(o.color),o.borderColor&&(0,n.setStrokingColor)(o.borderColor),o.borderWidth&&(0,r.setLineWidth)(o.borderWidth),o.borderLineCap&&(0,r.setLineCap)(o.borderLineCap),(0,r.setDashPattern)(null!=(l=o.borderDashArray)?l:[],null!=(u=o.borderDashPhase)?u:0)],(0,a.svgPathToOperators)(e),[o.color&&o.borderWidth?(0,r.fillAndStroke)():o.color?(0,r.fill)():o.borderColor?(0,r.stroke)():(0,r.closePath)(),(0,r.popGraphicsState)()]).filter(Boolean)},y=function(e){var t=(0,o.asNumber)(e.size);return[(0,r.pushGraphicsState)(),e.color&&(0,n.setStrokingColor)(e.color),(0,r.setLineWidth)(e.thickness),(0,r.translate)(e.x,e.y),(0,r.moveTo)(-.675*t,-.07601036269430045*t),(0,r.lineTo)(-.25*t,-.49*t),(0,r.lineTo)(.69*t,.475*t),(0,r.stroke)(),(0,r.popGraphicsState)()].filter(Boolean)},b=function(e){return 0===e.rotation?[(0,r.translate)(0,0),(0,r.rotateDegrees)(0)]:90===e.rotation?[(0,r.translate)(e.width,0),(0,r.rotateDegrees)(90)]:180===e.rotation?[(0,r.translate)(e.width,e.height),(0,r.rotateDegrees)(180)]:270===e.rotation?[(0,r.translate)(0,e.height),(0,r.rotateDegrees)(270)]:[]},x=function(e){var n=d({x:e.x,y:e.y,width:e.width,height:e.height,borderWidth:e.borderWidth,color:e.color,borderColor:e.borderColor,rotate:(0,i.degrees)(0),xSkew:(0,i.degrees)(0),ySkew:(0,i.degrees)(0)});if(!e.filled)return n;var a=(0,o.asNumber)(e.width),s=(0,o.asNumber)(e.height),l=Math.min(a,s)/2,u=y({x:a/2,y:s/2,size:l,thickness:e.thickness,color:e.markColor});return(0,t.__spreadArrays)([(0,r.pushGraphicsState)()],n,u,[(0,r.popGraphicsState)()])},w=function(e){var n=Math.min((0,o.asNumber)(e.width),(0,o.asNumber)(e.height))/2,i=m({x:e.x,y:e.y,xScale:n,yScale:n,color:e.color,borderColor:e.borderColor,borderWidth:e.borderWidth});if(!e.filled)return i;var a=m({x:e.x,y:e.y,xScale:.45*n,yScale:.45*n,color:e.dotColor,borderColor:void 0,borderWidth:0});return(0,t.__spreadArrays)([(0,r.pushGraphicsState)()],i,a,[(0,r.popGraphicsState)()])},k=function(e){var n=d({x:(0,o.asNumber)(e.x),y:(0,o.asNumber)(e.y),width:(0,o.asNumber)(e.width),height:(0,o.asNumber)(e.height),borderWidth:e.borderWidth,color:e.color,borderColor:e.borderColor,rotate:(0,i.degrees)(0),xSkew:(0,i.degrees)(0),ySkew:(0,i.degrees)(0)}),a=S(e.textLines,{color:e.textColor,font:e.font,size:e.fontSize,rotate:(0,i.degrees)(0),xSkew:(0,i.degrees)(0),ySkew:(0,i.degrees)(0)});return(0,t.__spreadArrays)([(0,r.pushGraphicsState)()],n,a,[(0,r.popGraphicsState)()])},S=function(e,t){for(var a=[(0,r.beginText)(),(0,n.setFillingColor)(t.color),(0,r.setFontAndSize)(t.font,t.size)],o=0,s=e.length;o<s;o++){var l=e[o],u=l.encoded,c=l.x,d=l.y;a.push((0,r.rotateAndSkewTextRadiansAndTranslate)((0,i.toRadians)(t.rotate),(0,i.toRadians)(t.xSkew),(0,i.toRadians)(t.ySkew),c,d),(0,r.showText)(u))}return a.push((0,r.endText)()),a},_=function(e){var n=(0,o.asNumber)(e.x),a=(0,o.asNumber)(e.y),s=(0,o.asNumber)(e.width),l=(0,o.asNumber)(e.height),u=(0,o.asNumber)(e.borderWidth),c=(0,o.asNumber)(e.padding),h=n+u/2+c,p=a+u/2+c,f=s-(u/2+c)*2,m=l-(u/2+c)*2,g=[(0,r.moveTo)(h,p),(0,r.lineTo)(h,p+m),(0,r.lineTo)(h+f,p+m),(0,r.lineTo)(h+f,p),(0,r.closePath)(),(0,r.clip)(),(0,r.endPath)()],y=d({x:n,y:a,width:s,height:l,borderWidth:e.borderWidth,color:e.color,borderColor:e.borderColor,rotate:(0,i.degrees)(0),xSkew:(0,i.degrees)(0),ySkew:(0,i.degrees)(0)}),b=S(e.textLines,{color:e.textColor,font:e.font,size:e.fontSize,rotate:(0,i.degrees)(0),xSkew:(0,i.degrees)(0),ySkew:(0,i.degrees)(0)}),x=(0,t.__spreadArrays)([(0,r.beginMarkedContent)("Tx"),(0,r.pushGraphicsState)()],b,[(0,r.popGraphicsState)(),(0,r.endMarkedContent)()]);return(0,t.__spreadArrays)([(0,r.pushGraphicsState)()],y,g,x,[(0,r.popGraphicsState)()])},C=function(e){for(var n=(0,o.asNumber)(e.x),a=(0,o.asNumber)(e.y),s=(0,o.asNumber)(e.width),l=(0,o.asNumber)(e.height),u=(0,o.asNumber)(e.lineHeight),c=(0,o.asNumber)(e.borderWidth),h=(0,o.asNumber)(e.padding),p=n+c/2+h,f=a+c/2+h,m=s-(c/2+h)*2,g=l-(c/2+h)*2,y=[(0,r.moveTo)(p,f),(0,r.lineTo)(p,f+g),(0,r.lineTo)(p+m,f+g),(0,r.lineTo)(p+m,f),(0,r.closePath)(),(0,r.clip)(),(0,r.endPath)()],b=d({x:n,y:a,width:s,height:l,borderWidth:e.borderWidth,color:e.color,borderColor:e.borderColor,rotate:(0,i.degrees)(0),xSkew:(0,i.degrees)(0),ySkew:(0,i.degrees)(0)}),x=[],w=0,k=e.selectedLines.length;w<k;w++){var _=e.textLines[e.selectedLines[w]];x.push.apply(x,d({x:_.x-h,y:_.y-(u-_.height)/2,width:s-c,height:_.height+(u-_.height)/2,borderWidth:0,color:e.selectedColor,borderColor:void 0,rotate:(0,i.degrees)(0),xSkew:(0,i.degrees)(0),ySkew:(0,i.degrees)(0)}))}var C=S(e.textLines,{color:e.textColor,font:e.font,size:e.fontSize,rotate:(0,i.degrees)(0),xSkew:(0,i.degrees)(0),ySkew:(0,i.degrees)(0)}),A=(0,t.__spreadArrays)([(0,r.beginMarkedContent)("Tx"),(0,r.pushGraphicsState)()],C,[(0,r.popGraphicsState)(),(0,r.endMarkedContent)()]);return(0,t.__spreadArrays)([(0,r.pushGraphicsState)()],b,x,y,A,[(0,r.popGraphicsState)()])}},137637:e=>{"use strict";e.s({CombedTextLayoutError:()=>d,EncryptedPDFError:()=>n,ExceededMaxLengthError:()=>h,FieldAlreadyExistsError:()=>l,FontkitNotRegisteredError:()=>r,ForeignPageError:()=>i,InvalidFieldNamePartError:()=>u,InvalidMaxLengthError:()=>p,NoSuchFieldError:()=>o,RemovePageFromEmptyDocumentError:()=>a,RichTextFieldReadError:()=>c,UnexpectedFieldTypeError:()=>s});var t=e.i(436255),n=function(e){function n(){return e.call(this,"Input document to `PDFDocument.load` is encrypted. You can use `PDFDocument.load(..., { ignoreEncryption: true })` if you wish to load the document anyways.")||this}return(0,t.__extends)(n,e),n}(Error),r=function(e){function n(){return e.call(this,"Input to `PDFDocument.embedFont` was a custom font, but no `fontkit` instance was found. You must register a `fontkit` instance with `PDFDocument.registerFontkit(...)` before embedding custom fonts.")||this}return(0,t.__extends)(n,e),n}(Error),i=function(e){function n(){return e.call(this,"A `page` passed to `PDFDocument.addPage` or `PDFDocument.insertPage` was from a different (foreign) PDF document. If you want to copy pages from one PDFDocument to another, you must use `PDFDocument.copyPages(...)` to copy the pages before adding or inserting them.")||this}return(0,t.__extends)(n,e),n}(Error),a=function(e){function n(){return e.call(this,"PDFDocument has no pages so `PDFDocument.removePage` cannot be called")||this}return(0,t.__extends)(n,e),n}(Error),o=function(e){function n(t){return e.call(this,'PDFDocument has no form field with the name "'+t+'"')||this}return(0,t.__extends)(n,e),n}(Error),s=function(e){function n(t,n,r){var i,a,o='Expected field "'+t+'" to be of type '+(null==n?void 0:n.name)+", but it is actually of type "+(null!=(a=null==(i=null==r?void 0:r.constructor)?void 0:i.name)?a:r);return e.call(this,o)||this}return(0,t.__extends)(n,e),n}(Error);!function(e){(0,t.__extends)(function(t){return e.call(this,'Failed to select check box due to missing onValue: "'+t+'"')||this},e)}(Error);var l=function(e){function n(t){return e.call(this,'A field already exists with the specified name: "'+t+'"')||this}return(0,t.__extends)(n,e),n}(Error),u=function(e){function n(t){return e.call(this,'Field name contains invalid component: "'+t+'"')||this}return(0,t.__extends)(n,e),n}(Error);!function(e){(0,t.__extends)(function(t){return e.call(this,'A non-terminal field already exists with the specified name: "'+t+'"')||this},e)}(Error);var c=function(e){function n(t){return e.call(this,"Reading rich text fields is not supported: Attempted to read rich text field: "+t)||this}return(0,t.__extends)(n,e),n}(Error),d=function(e){function n(t,n){return e.call(this,"Failed to layout combed text as lineLength="+t+" is greater than cellCount="+n)||this}return(0,t.__extends)(n,e),n}(Error),h=function(e){function n(t,n,r){return e.call(this,"Attempted to set text with length="+t+" for TextField with maxLength="+n+" and name="+r)||this}return(0,t.__extends)(n,e),n}(Error),p=function(e){function n(t,n,r){var i="Attempted to set maxLength="+n+", which is less than "+t+", the length of this field's current value (name="+r+")";return e.call(this,i)||this}return(0,t.__extends)(n,e),n}(Error)},934303:e=>{"use strict";var t;e.s({TextAlignment:()=>t}),function(e){e[e.Left=0]="Left",e[e.Center=1]="Center",e[e.Right=2]="Right"}(t||(t={}))},103183:e=>{"use strict";e.s({layoutCombedText:()=>u,layoutMultilineText:()=>l,layoutSinglelineText:()=>c});var t=e.i(137637),n=e.i(934303);e.i(465248);var r=e.i(261205),i=function(e,t,n,r){void 0===r&&(r=!1);for(var i=4;i<500;){for(var a=0,o=0,s=e.length;o<s;o++){a+=1;for(var l=e[o].split(" "),u=n.width,c=0,d=l.length;c<d;c++){var h=c===d-1?l[c]:l[c]+" ",p=t.widthOfTextAtSize(h,i);(u-=p)<=0&&(a+=1,u=n.width-p)}}if(!r&&a>e.length)return i-1;var f=t.heightAtSize(i);if((f+.2*f)*a>Math.abs(n.height))return i-1;i+=1}return i},a=function(e,t,n,i){for(var a=n.width/i,o=n.height,s=4,l=(0,r.charSplit)(e);s<500;){for(var u=0,c=l.length;u<c;u++){var d=l[u];if(t.widthOfTextAtSize(d,s)>.75*a)return s-1}if(t.heightAtSize(s,{descender:!1})>o)return s-1;s+=1}return s},o=function(e){for(var t=e.length;t>0;t--)if(/\s/.test(e[t]))return t},s=function(e,t,n,r){for(var i,a=e.length;a>0;){var s=e.substring(0,a),l=n.encodeText(s),u=n.widthOfTextAtSize(s,r);if(u<t)return{line:s,encoded:l,width:u,remainder:e.substring(a)||void 0};a=null!=(i=o(s))?i:0}return{line:e,encoded:n.encodeText(e),width:n.widthOfTextAtSize(e,r),remainder:void 0}},l=function(e,t){var a=t.alignment,o=t.fontSize,l=t.font,u=t.bounds,c=(0,r.lineSplit)((0,r.cleanText)(e));(void 0===o||0===o)&&(o=i(c,l,u,!0));for(var d=l.heightAtSize(o),h=d+.2*d,p=[],f=u.x,m=u.y,g=u.x+u.width,y=u.y+u.height,b=u.y+u.height,x=0,w=c.length;x<w;x++)for(var k=c[x];void 0!==k;){var S=s(k,u.width,l,o),_=S.line,C=S.encoded,A=S.width,E=S.remainder,T=a===n.TextAlignment.Left?u.x:a===n.TextAlignment.Center?u.x+u.width/2-A/2:a===n.TextAlignment.Right?u.x+u.width-A:u.x;b-=h,T<f&&(f=T),b<m&&(m=b),T+A>g&&(g=T+A),b+d>y&&(y=b+d),p.push({text:_,encoded:C,width:A,height:d,x:T,y:b}),k=null==E?void 0:E.trim()}return{fontSize:o,lineHeight:h,lines:p,bounds:{x:f,y:m,width:g-f,height:y-m}}},u=function(e,n){var i=n.fontSize,o=n.font,s=n.bounds,l=n.cellCount,u=(0,r.mergeLines)((0,r.cleanText)(e));if(u.length>l)throw new t.CombedTextLayoutError(u.length,l);(void 0===i||0===i)&&(i=a(u,o,s,l));for(var c=s.width/l,d=o.heightAtSize(i,{descender:!1}),h=s.y+(s.height/2-d/2),p=[],f=s.x,m=s.y,g=s.x+s.width,y=s.y+s.height,b=0,x=0;b<l;){var w=(0,r.charAtIndex)(u,x),k=w[0],S=w[1],_=o.encodeText(k),C=o.widthOfTextAtSize(k,i),A=s.x+(c*b+c/2)-C/2;A<f&&(f=A),h<m&&(m=h),A+C>g&&(g=A+C),h+d>y&&(y=h+d),p.push({text:u,encoded:_,width:C,height:d,x:A,y:h}),b+=1,x+=S}return{fontSize:i,cells:p,bounds:{x:f,y:m,width:g-f,height:y-m}}},c=function(e,t){var a=t.alignment,o=t.fontSize,s=t.font,l=t.bounds,u=(0,r.mergeLines)((0,r.cleanText)(e));(void 0===o||0===o)&&(o=i([u],s,l));var c=s.encodeText(u),d=s.widthOfTextAtSize(u,o),h=s.heightAtSize(o,{descender:!1}),p=a===n.TextAlignment.Left?l.x:a===n.TextAlignment.Center?l.x+l.width/2-d/2:a===n.TextAlignment.Right?l.x+l.width-d:l.x,f=l.y+(l.height/2-h/2);return{fontSize:o,line:{text:u,encoded:c,width:d,height:h,x:p,y:f},bounds:{x:p,y:f,width:d,height:h}}}},643035:e=>{"use strict";e.s({defaultButtonAppearanceProvider:()=>y,defaultCheckBoxAppearanceProvider:()=>m,defaultDropdownAppearanceProvider:()=>x,defaultOptionListAppearanceProvider:()=>w,defaultRadioGroupAppearanceProvider:()=>g,defaultTextFieldAppearanceProvider:()=>b,normalizeAppearance:()=>u});var t=e.i(436255),n=e.i(453631),r=e.i(828226),i=e.i(893475),a=e.i(103183),o=e.i(934303),s=e.i(283732);e.i(465248);var l=e.i(261205),u=function(e){return"normal"in e?e:{normal:e}},c=/\/([^\0\t\n\f\r\ ]+)[\0\t\n\f\r\ ]+(\d*\.\d+|\d+)[\0\t\n\f\r\ ]+Tf/,d=function(e){var t,n,r=null!=(t=e.getDefaultAppearance())?t:"",i=Number((null!=(n=(0,l.findLastMatch)(r,c).match)?n:[])[2]);return isFinite(i)?i:void 0},h=/(\d*\.\d+|\d+)[\0\t\n\f\r\ ]*(\d*\.\d+|\d+)?[\0\t\n\f\r\ ]*(\d*\.\d+|\d+)?[\0\t\n\f\r\ ]*(\d*\.\d+|\d+)?[\0\t\n\f\r\ ]+(g|rg|k)/,p=function(e){var t,n=null!=(t=e.getDefaultAppearance())?t:"",i=(0,l.findLastMatch)(n,h).match,a=null!=i?i:[],o=a[1],s=a[2],u=a[3],c=a[4],d=a[5];return"g"===d&&o?(0,r.grayscale)(Number(o)):"rg"===d&&o&&s&&u?(0,r.rgb)(Number(o),Number(s),Number(u)):"k"===d&&o&&s&&u&&c?(0,r.cmyk)(Number(o),Number(s),Number(u),Number(c)):void 0},f=function(e,t,n,i){void 0===i&&(i=0);var a,o=[(0,r.setFillingColor)(t).toString(),(0,s.setFontAndSize)(null!=(a=null==n?void 0:n.name)?a:"dummy__noop",i).toString()].join("\n");e.setDefaultAppearance(o)},m=function(e,a){var o,s,l,u=p(a),c=p(e.acroField),d=a.getRectangle(),h=a.getAppearanceCharacteristics(),m=a.getBorderStyle(),g=null!=(o=null==m?void 0:m.getWidth())?o:0,y=(0,i.reduceRotation)(null==h?void 0:h.getRotation()),b=(0,i.adjustDimsForRotation)(d,y),x=b.width,w=b.height,k=(0,n.rotateInPlace)((0,t.__assign)((0,t.__assign)({},d),{rotation:y})),S=(0,r.rgb)(0,0,0),_=null!=(s=(0,r.componentsToColor)(null==h?void 0:h.getBorderColor()))?s:S,C=(0,r.componentsToColor)(null==h?void 0:h.getBackgroundColor()),A=(0,r.componentsToColor)(null==h?void 0:h.getBackgroundColor(),.8),E=null!=(l=null!=u?u:c)?l:S;u?f(a,E):f(e.acroField,E);var T={x:0+g/2,y:0+g/2,width:x-g,height:w-g,thickness:1.5,borderWidth:g,borderColor:_,markColor:E};return{normal:{on:(0,t.__spreadArrays)(k,(0,n.drawCheckBox)((0,t.__assign)((0,t.__assign)({},T),{color:C,filled:!0}))),off:(0,t.__spreadArrays)(k,(0,n.drawCheckBox)((0,t.__assign)((0,t.__assign)({},T),{color:C,filled:!1})))},down:{on:(0,t.__spreadArrays)(k,(0,n.drawCheckBox)((0,t.__assign)((0,t.__assign)({},T),{color:A,filled:!0}))),off:(0,t.__spreadArrays)(k,(0,n.drawCheckBox)((0,t.__assign)((0,t.__assign)({},T),{color:A,filled:!1})))}}},g=function(e,a){var o,s,l,u=p(a),c=p(e.acroField),d=a.getRectangle(),h=a.getAppearanceCharacteristics(),m=a.getBorderStyle(),g=null!=(o=null==m?void 0:m.getWidth())?o:0,y=(0,i.reduceRotation)(null==h?void 0:h.getRotation()),b=(0,i.adjustDimsForRotation)(d,y),x=b.width,w=b.height,k=(0,n.rotateInPlace)((0,t.__assign)((0,t.__assign)({},d),{rotation:y})),S=(0,r.rgb)(0,0,0),_=null!=(s=(0,r.componentsToColor)(null==h?void 0:h.getBorderColor()))?s:S,C=(0,r.componentsToColor)(null==h?void 0:h.getBackgroundColor()),A=(0,r.componentsToColor)(null==h?void 0:h.getBackgroundColor(),.8),E=null!=(l=null!=u?u:c)?l:S;u?f(a,E):f(e.acroField,E);var T={x:x/2,y:w/2,width:x-g,height:w-g,borderWidth:g,borderColor:_,dotColor:E};return{normal:{on:(0,t.__spreadArrays)(k,(0,n.drawRadioButton)((0,t.__assign)((0,t.__assign)({},T),{color:C,filled:!0}))),off:(0,t.__spreadArrays)(k,(0,n.drawRadioButton)((0,t.__assign)((0,t.__assign)({},T),{color:C,filled:!1})))},down:{on:(0,t.__spreadArrays)(k,(0,n.drawRadioButton)((0,t.__assign)((0,t.__assign)({},T),{color:A,filled:!0}))),off:(0,t.__spreadArrays)(k,(0,n.drawRadioButton)((0,t.__assign)((0,t.__assign)({},T),{color:A,filled:!1})))}}},y=function(e,s,l){var u,c,h,m,g,y=p(s),b=p(e.acroField),x=d(s),w=d(e.acroField),k=s.getRectangle(),S=s.getAppearanceCharacteristics(),_=s.getBorderStyle(),C=null==S?void 0:S.getCaptions(),A=null!=(u=null==C?void 0:C.normal)?u:"",E=null!=(h=null!=(c=null==C?void 0:C.down)?c:A)?h:"",T=null!=(m=null==_?void 0:_.getWidth())?m:0,M=(0,i.reduceRotation)(null==S?void 0:S.getRotation()),I=(0,i.adjustDimsForRotation)(k,M),N=I.width,D=I.height,P=(0,n.rotateInPlace)((0,t.__assign)((0,t.__assign)({},k),{rotation:M})),R=(0,r.rgb)(0,0,0),O=(0,r.componentsToColor)(null==S?void 0:S.getBorderColor()),j=(0,r.componentsToColor)(null==S?void 0:S.getBackgroundColor()),F=(0,r.componentsToColor)(null==S?void 0:S.getBackgroundColor(),.8),L={x:T,y:T,width:N-2*T,height:D-2*T},z=(0,a.layoutSinglelineText)(A,{alignment:o.TextAlignment.Center,fontSize:null!=x?x:w,font:l,bounds:L}),B=(0,a.layoutSinglelineText)(E,{alignment:o.TextAlignment.Center,fontSize:null!=x?x:w,font:l,bounds:L}),U=Math.min(z.fontSize,B.fontSize),H=null!=(g=null!=y?y:b)?g:R;y||void 0!==x?f(s,H,l,U):f(e.acroField,H,l,U);var W={x:0+T/2,y:0+T/2,width:N-T,height:D-T,borderWidth:T,borderColor:O,textColor:H,font:l.name,fontSize:U};return{normal:(0,t.__spreadArrays)(P,(0,n.drawButton)((0,t.__assign)((0,t.__assign)({},W),{color:j,textLines:[z.line]}))),down:(0,t.__spreadArrays)(P,(0,n.drawButton)((0,t.__assign)((0,t.__assign)({},W),{color:F,textLines:[B.line]})))}},b=function(e,o,s){var l,u,c,h,m,g,y=p(o),b=p(e.acroField),x=d(o),w=d(e.acroField),k=o.getRectangle(),S=o.getAppearanceCharacteristics(),_=o.getBorderStyle(),C=null!=(l=e.getText())?l:"",A=null!=(u=null==_?void 0:_.getWidth())?u:0,E=(0,i.reduceRotation)(null==S?void 0:S.getRotation()),T=(0,i.adjustDimsForRotation)(k,E),M=T.width,I=T.height,N=(0,n.rotateInPlace)((0,t.__assign)((0,t.__assign)({},k),{rotation:E})),D=(0,r.rgb)(0,0,0),P=(0,r.componentsToColor)(null==S?void 0:S.getBorderColor()),R=(0,r.componentsToColor)(null==S?void 0:S.getBackgroundColor()),O=+!e.isCombed(),j={x:A+O,y:A+O,width:M-(A+O)*2,height:I-(A+O)*2};if(e.isMultiline()){var F=(0,a.layoutMultilineText)(C,{alignment:e.getAlignment(),fontSize:null!=x?x:w,font:s,bounds:j});m=F.lines,g=F.fontSize}else if(e.isCombed()){var F=(0,a.layoutCombedText)(C,{fontSize:null!=x?x:w,font:s,bounds:j,cellCount:null!=(c=e.getMaxLength())?c:0});m=F.cells,g=F.fontSize}else{var F=(0,a.layoutSinglelineText)(C,{alignment:e.getAlignment(),fontSize:null!=x?x:w,font:s,bounds:j});m=[F.line],g=F.fontSize}var L=null!=(h=null!=y?y:b)?h:D;y||void 0!==x?f(o,L,s,g):f(e.acroField,L,s,g);var z={x:0+A/2,y:0+A/2,width:M-A,height:I-A,borderWidth:null!=A?A:0,borderColor:P,textColor:L,font:s.name,fontSize:g,color:R,textLines:m,padding:O};return(0,t.__spreadArrays)(N,(0,n.drawTextField)(z))},x=function(e,s,l){var u,c,h,m=p(s),g=p(e.acroField),y=d(s),b=d(e.acroField),x=s.getRectangle(),w=s.getAppearanceCharacteristics(),k=s.getBorderStyle(),S=null!=(u=e.getSelected()[0])?u:"",_=null!=(c=null==k?void 0:k.getWidth())?c:0,C=(0,i.reduceRotation)(null==w?void 0:w.getRotation()),A=(0,i.adjustDimsForRotation)(x,C),E=A.width,T=A.height,M=(0,n.rotateInPlace)((0,t.__assign)((0,t.__assign)({},x),{rotation:C})),I=(0,r.rgb)(0,0,0),N=(0,r.componentsToColor)(null==w?void 0:w.getBorderColor()),D=(0,r.componentsToColor)(null==w?void 0:w.getBackgroundColor()),P=(0,a.layoutSinglelineText)(S,{alignment:o.TextAlignment.Left,fontSize:null!=y?y:b,font:l,bounds:{x:_+1,y:_+1,width:E-(_+1)*2,height:T-(_+1)*2}}),R=P.line,O=P.fontSize,j=null!=(h=null!=m?m:g)?h:I;m||void 0!==y?f(s,j,l,O):f(e.acroField,j,l,O);var F={x:0+_/2,y:0+_/2,width:E-_,height:T-_,borderWidth:null!=_?_:0,borderColor:N,textColor:j,font:l.name,fontSize:O,color:D,textLines:[R],padding:1};return(0,t.__spreadArrays)(M,(0,n.drawTextField)(F))},w=function(e,s,l){var u,c,h=p(s),m=p(e.acroField),g=d(s),y=d(e.acroField),b=s.getRectangle(),x=s.getAppearanceCharacteristics(),w=s.getBorderStyle(),k=null!=(u=null==w?void 0:w.getWidth())?u:0,S=(0,i.reduceRotation)(null==x?void 0:x.getRotation()),_=(0,i.adjustDimsForRotation)(b,S),C=_.width,A=_.height,E=(0,n.rotateInPlace)((0,t.__assign)((0,t.__assign)({},b),{rotation:S})),T=(0,r.rgb)(0,0,0),M=(0,r.componentsToColor)(null==x?void 0:x.getBorderColor()),I=(0,r.componentsToColor)(null==x?void 0:x.getBackgroundColor()),N=e.getOptions(),D=e.getSelected();e.isSorted()&&N.sort();for(var P="",R=0,O=N.length;R<O;R++)P+=N[R],R<O-1&&(P+="\n");for(var j=(0,a.layoutMultilineText)(P,{alignment:o.TextAlignment.Left,fontSize:null!=g?g:y,font:l,bounds:{x:k+1,y:k+1,width:C-(k+1)*2,height:A-(k+1)*2}}),F=j.lines,L=j.fontSize,z=j.lineHeight,B=[],R=0,O=F.length;R<O;R++){var U=F[R];D.includes(U.text)&&B.push(R)}var H=(0,r.rgb)(.6,193/255,218/255),W=null!=(c=null!=h?h:m)?c:T;return h||void 0!==g?f(s,W,l,L):f(e.acroField,W,l,L),(0,t.__spreadArrays)(E,(0,n.drawOptionList)({x:0+k/2,y:0+k/2,width:C-k,height:A-k,borderWidth:null!=k?k:0,borderColor:M,textColor:W,font:l.name,fontSize:L,color:I,textLines:F,lineHeight:z,selectedColor:H,selectedLines:B,padding:1}))}},142942:e=>{"use strict";e.s({PDFPageEmbedder:()=>t.default});var t=e.i(725960)},214466:e=>{"use strict";e.s({PDFRef:()=>t.default});var t=e.i(927657)},920245:e=>{"use strict";e.s({default:()=>o});var t=e.i(436255),n=e.i(905919);e.i(35849);var r=e.i(142942),i=e.i(214466);e.i(465248);var a=e.i(540265);let o=function(){function e(e,t,o){this.alreadyEmbedded=!1,(0,a.assertIs)(e,"ref",[[i.PDFRef,"PDFRef"]]),(0,a.assertIs)(t,"doc",[[n.default,"PDFDocument"]]),(0,a.assertIs)(o,"embedder",[[r.PDFPageEmbedder,"PDFPageEmbedder"]]),this.ref=e,this.doc=t,this.width=o.width,this.height=o.height,this.embedder=o}return e.prototype.scale=function(e){return(0,a.assertIs)(e,"factor",["number"]),{width:this.width*e,height:this.height*e}},e.prototype.size=function(){return this.scale(1)},e.prototype.embed=function(){return(0,t.__awaiter)(this,void 0,void 0,function(){return(0,t.__generator)(this,function(e){switch(e.label){case 0:if(this.alreadyEmbedded)return[3,2];return[4,this.embedder.embedIntoContext(this.doc.context,this.ref)];case 1:e.sent(),this.alreadyEmbedded=!0,e.label=2;case 2:return[2]}})})},e.of=function(t,n,r){return new e(t,n,r)},e}()},621080:e=>{"use strict";e.s({CustomFontEmbedder:()=>t.default});var t=e.i(17313)},887268:e=>{"use strict";e.s({StandardFontEmbedder:()=>t.default});var t=e.i(16377)},761660:e=>{"use strict";e.s({default:()=>s});var t=e.i(436255),n=e.i(905919);e.i(35849);var r=e.i(621080),i=e.i(214466),a=e.i(887268);e.i(465248);var o=e.i(540265);let s=function(){function e(e,t,s){this.modified=!0,(0,o.assertIs)(e,"ref",[[i.PDFRef,"PDFRef"]]),(0,o.assertIs)(t,"doc",[[n.default,"PDFDocument"]]),(0,o.assertIs)(s,"embedder",[[r.CustomFontEmbedder,"CustomFontEmbedder"],[a.StandardFontEmbedder,"StandardFontEmbedder"]]),this.ref=e,this.doc=t,this.name=s.fontName,this.embedder=s}return e.prototype.encodeText=function(e){return(0,o.assertIs)(e,"text",["string"]),this.modified=!0,this.embedder.encodeText(e)},e.prototype.widthOfTextAtSize=function(e,t){return(0,o.assertIs)(e,"text",["string"]),(0,o.assertIs)(t,"size",["number"]),this.embedder.widthOfTextAtSize(e,t)},e.prototype.heightAtSize=function(e,t){var n;return(0,o.assertIs)(e,"size",["number"]),(0,o.assertOrUndefined)(null==t?void 0:t.descender,"options.descender",["boolean"]),this.embedder.heightOfFontAtSize(e,{descender:null==(n=null==t?void 0:t.descender)||n})},e.prototype.sizeAtHeight=function(e){return(0,o.assertIs)(e,"height",["number"]),this.embedder.sizeOfFontAtHeight(e)},e.prototype.getCharacterSet=function(){return this.embedder instanceof a.StandardFontEmbedder?this.embedder.encoding.supportedCodePoints:this.embedder.font.characterSet},e.prototype.embed=function(){return(0,t.__awaiter)(this,void 0,void 0,function(){return(0,t.__generator)(this,function(e){switch(e.label){case 0:if(!this.modified)return[3,2];return[4,this.embedder.embedIntoContext(this.doc.context,this.ref)];case 1:e.sent(),this.modified=!1,e.label=2;case 2:return[2]}})})},e.of=function(t,n,r){return new e(t,n,r)},e}()},120508:e=>{"use strict";e.s({JpegEmbedder:()=>t.default});var t=e.i(217207)},774065:e=>{"use strict";e.s({PngEmbedder:()=>t.default});var t=e.i(233710)},55981:e=>{"use strict";e.s({default:()=>s});var t=e.i(436255),n=e.i(905919);e.i(35849);var r=e.i(120508),i=e.i(214466),a=e.i(774065);e.i(465248);var o=e.i(540265);let s=function(){function e(e,t,s){(0,o.assertIs)(e,"ref",[[i.PDFRef,"PDFRef"]]),(0,o.assertIs)(t,"doc",[[n.default,"PDFDocument"]]),(0,o.assertIs)(s,"embedder",[[r.JpegEmbedder,"JpegEmbedder"],[a.PngEmbedder,"PngEmbedder"]]),this.ref=e,this.doc=t,this.width=s.width,this.height=s.height,this.embedder=s}return e.prototype.scale=function(e){return(0,o.assertIs)(e,"factor",["number"]),{width:this.width*e,height:this.height*e}},e.prototype.scaleToFit=function(e,t){(0,o.assertIs)(e,"width",["number"]),(0,o.assertIs)(t,"height",["number"]);var n=Math.min(e/this.width,t/this.height);return this.scale(n)},e.prototype.size=function(){return this.scale(1)},e.prototype.embed=function(){return(0,t.__awaiter)(this,void 0,void 0,function(){var e,n,r;return(0,t.__generator)(this,function(t){switch(t.label){case 0:if(!this.embedder)return[2];return this.embedTask||(e=this,n=e.doc,r=e.ref,this.embedTask=this.embedder.embedIntoContext(n.context,r)),[4,this.embedTask];case 1:return t.sent(),this.embedder=void 0,[2]}})})},e.of=function(t,n,r){return new e(t,n,r)},e}()},524394:e=>{"use strict";e.s({PDFWidgetAnnotation:()=>t.default});var t=e.i(514618)},19476:e=>{"use strict";e.s({PDFAcroTerminal:()=>t.default});var t=e.i(307760)},240605:e=>{"use strict";var t;e.s({ImageAlignment:()=>t}),function(e){e[e.Left=0]="Left",e[e.Center=1]="Center",e[e.Right=2]="Right"}(t||(t={}))},586475:e=>{"use strict";e.s({}),e.i(240605)},182175:e=>{"use strict";e.s({}),e.i(240605),e.i(586475)},556399:e=>{"use strict";e.s({assertFieldAppearanceOptions:()=>m,default:()=>g});var t=e.i(436255),n=e.i(905919),r=e.i(828226),i=e.i(893475);e.i(35849);var a=e.i(214466),o=e.i(524394),s=e.i(349043),l=e.i(143682),u=e.i(570889),c=e.i(19476),d=e.i(856049);e.i(465248);var h=e.i(540265);e.i(182175);var p=e.i(240605),f=e.i(453631),m=function(e){(0,h.assertOrUndefined)(null==e?void 0:e.x,"options.x",["number"]),(0,h.assertOrUndefined)(null==e?void 0:e.y,"options.y",["number"]),(0,h.assertOrUndefined)(null==e?void 0:e.width,"options.width",["number"]),(0,h.assertOrUndefined)(null==e?void 0:e.height,"options.height",["number"]),(0,h.assertOrUndefined)(null==e?void 0:e.textColor,"options.textColor",[[Object,"Color"]]),(0,h.assertOrUndefined)(null==e?void 0:e.backgroundColor,"options.backgroundColor",[[Object,"Color"]]),(0,h.assertOrUndefined)(null==e?void 0:e.borderColor,"options.borderColor",[[Object,"Color"]]),(0,h.assertOrUndefined)(null==e?void 0:e.borderWidth,"options.borderWidth",["number"]),(0,h.assertOrUndefined)(null==e?void 0:e.rotate,"options.rotate",[[Object,"Rotation"]])};let g=function(){function e(e,t,r){(0,h.assertIs)(e,"acroField",[[c.PDFAcroTerminal,"PDFAcroTerminal"]]),(0,h.assertIs)(t,"ref",[[a.PDFRef,"PDFRef"]]),(0,h.assertIs)(r,"doc",[[n.default,"PDFDocument"]]),this.acroField=e,this.ref=t,this.doc=r}return e.prototype.getName=function(){var e;return null!=(e=this.acroField.getFullyQualifiedName())?e:""},e.prototype.isReadOnly=function(){return this.acroField.hasFlag(u.AcroFieldFlags.ReadOnly)},e.prototype.enableReadOnly=function(){this.acroField.setFlagTo(u.AcroFieldFlags.ReadOnly,!0)},e.prototype.disableReadOnly=function(){this.acroField.setFlagTo(u.AcroFieldFlags.ReadOnly,!1)},e.prototype.isRequired=function(){return this.acroField.hasFlag(u.AcroFieldFlags.Required)},e.prototype.enableRequired=function(){this.acroField.setFlagTo(u.AcroFieldFlags.Required,!0)},e.prototype.disableRequired=function(){this.acroField.setFlagTo(u.AcroFieldFlags.Required,!1)},e.prototype.isExported=function(){return!this.acroField.hasFlag(u.AcroFieldFlags.NoExport)},e.prototype.enableExporting=function(){this.acroField.setFlagTo(u.AcroFieldFlags.NoExport,!1)},e.prototype.disableExporting=function(){this.acroField.setFlagTo(u.AcroFieldFlags.NoExport,!0)},e.prototype.needsAppearancesUpdate=function(){throw new l.MethodNotImplementedError(this.constructor.name,"needsAppearancesUpdate")},e.prototype.defaultUpdateAppearances=function(e){throw new l.MethodNotImplementedError(this.constructor.name,"defaultUpdateAppearances")},e.prototype.markAsDirty=function(){this.doc.getForm().markFieldAsDirty(this.ref)},e.prototype.markAsClean=function(){this.doc.getForm().markFieldAsClean(this.ref)},e.prototype.isDirty=function(){return this.doc.getForm().fieldIsDirty(this.ref)},e.prototype.createWidget=function(e){var t,n=e.textColor,a=e.backgroundColor,s=e.borderColor,l=e.borderWidth,u=(0,i.toDegrees)(e.rotate),c=e.caption,p=e.x,f=e.y,m=e.width+l,g=e.height+l,y=!!e.hidden,b=e.page;(0,h.assertMultiple)(u,"degreesAngle",90);var x=o.PDFWidgetAnnotation.create(this.doc.context,this.ref),w=(0,i.rotateRectangle)({x:p,y:f,width:m,height:g},l,u);x.setRectangle(w),b&&x.setP(b);var k=x.getOrCreateAppearanceCharacteristics();a&&k.setBackgroundColor((0,r.colorToComponents)(a)),k.setRotation(u),c&&k.setCaptions({normal:c}),s&&k.setBorderColor((0,r.colorToComponents)(s));var S=x.getOrCreateBorderStyle();if(void 0!==l&&S.setWidth(l),x.setFlagTo(d.AnnotationFlags.Print,!0),x.setFlagTo(d.AnnotationFlags.Hidden,y),x.setFlagTo(d.AnnotationFlags.Invisible,!1),n){var _=(null!=(t=this.acroField.getDefaultAppearance())?t:"")+"\n"+(0,r.setFillingColor)(n).toString();this.acroField.setDefaultAppearance(_)}return x},e.prototype.updateWidgetAppearanceWithFont=function(e,t,n){var r=n.normal,i=n.rollover,a=n.down;this.updateWidgetAppearances(e,{normal:this.createAppearanceStream(e,r,t),rollover:i&&this.createAppearanceStream(e,i,t),down:a&&this.createAppearanceStream(e,a,t)})},e.prototype.updateOnOffWidgetAppearance=function(e,t,n){var r=n.normal,i=n.rollover,a=n.down;this.updateWidgetAppearances(e,{normal:this.createAppearanceDict(e,r,t),rollover:i&&this.createAppearanceDict(e,i,t),down:a&&this.createAppearanceDict(e,a,t)})},e.prototype.updateWidgetAppearances=function(e,t){var n=t.normal,r=t.rollover,i=t.down;e.setNormalAppearance(n),r?e.setRolloverAppearance(r):e.removeRolloverAppearance(),i?e.setDownAppearance(i):e.removeDownAppearance()},e.prototype.createAppearanceStream=function(e,t,n){var r,i=this.acroField.dict.context,a=e.getRectangle(),o=a.width,s=a.height,l=n&&{Font:((r={})[n.name]=n.ref,r)},u=i.formXObject(t,{Resources:l,BBox:i.obj([0,0,o,s]),Matrix:i.obj([1,0,0,1,0,0])});return i.register(u)},e.prototype.createImageAppearanceStream=function(e,n,r){var a,o,s=this.acroField.dict.context,l=e.getRectangle(),u=e.getAppearanceCharacteristics(),c=e.getBorderStyle(),d=null!=(o=null==c?void 0:c.getWidth())?o:0,h=(0,i.reduceRotation)(null==u?void 0:u.getRotation()),m=(0,f.rotateInPlace)((0,t.__assign)((0,t.__assign)({},l),{rotation:h})),g=(0,i.adjustDimsForRotation)(l,h),y=n.scaleToFit(g.width-2*d,g.height-2*d),b={x:d,y:d,width:y.width,height:y.height,rotate:(0,i.degrees)(0),xSkew:(0,i.degrees)(0),ySkew:(0,i.degrees)(0)};r===p.ImageAlignment.Center?(b.x+=(g.width-2*d)/2-y.width/2,b.y+=(g.height-2*d)/2-y.height/2):r===p.ImageAlignment.Right&&(b.x=g.width-d-y.width,b.y=g.height-d-y.height);var x=this.doc.context.addRandomSuffix("Image",10),w=(0,t.__spreadArrays)(m,(0,f.drawImage)(x,b)),k={XObject:((a={})[x]=n.ref,a)},S=s.formXObject(w,{Resources:k,BBox:s.obj([0,0,l.width,l.height]),Matrix:s.obj([1,0,0,1,0,0])});return s.register(S)},e.prototype.createAppearanceDict=function(e,t,n){var r=this.acroField.dict.context,i=this.createAppearanceStream(e,t.on),a=this.createAppearanceStream(e,t.off),o=r.obj({});return o.set(n,i),o.set(s.PDFName.of("Off"),a),o},e}()},544481:e=>{"use strict";e.s({PDFDict:()=>t.default});var t=e.i(155303)},232777:e=>{"use strict";e.s({PDFAcroCheckBox:()=>t.default});var t=e.i(147410)},315483:e=>{"use strict";e.s({default:()=>d});var t=e.i(436255),n=e.i(653191),r=e.i(643035),i=e.i(828226),a=e.i(893475),o=e.i(556399);e.i(35849);var s=e.i(349043),l=e.i(544481),u=e.i(232777);e.i(465248);var c=e.i(540265);let d=function(e){function d(t,n,r){var i=e.call(this,t,n,r)||this;return(0,c.assertIs)(t,"acroCheckBox",[[u.PDFAcroCheckBox,"PDFAcroCheckBox"]]),i.acroField=t,i}return(0,t.__extends)(d,e),d.prototype.check=function(){var e,t=null!=(e=this.acroField.getOnValue())?e:s.PDFName.of("Yes");this.markAsDirty(),this.acroField.setValue(t)},d.prototype.uncheck=function(){this.markAsDirty(),this.acroField.setValue(s.PDFName.of("Off"))},d.prototype.isChecked=function(){var e=this.acroField.getOnValue();return!!e&&e===this.acroField.getValue()},d.prototype.addToPage=function(e,t){(0,c.assertIs)(e,"page",[[n.default,"PDFPage"]]),(0,o.assertFieldAppearanceOptions)(t),t||(t={}),"textColor"in t||(t.textColor=(0,i.rgb)(0,0,0)),"backgroundColor"in t||(t.backgroundColor=(0,i.rgb)(1,1,1)),"borderColor"in t||(t.borderColor=(0,i.rgb)(0,0,0)),"borderWidth"in t||(t.borderWidth=1);var r,l,u,d,h,p,f=this.createWidget({x:null!=(r=t.x)?r:0,y:null!=(l=t.y)?l:0,width:null!=(u=t.width)?u:50,height:null!=(d=t.height)?d:50,textColor:t.textColor,backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:null!=(h=t.borderWidth)?h:0,rotate:null!=(p=t.rotate)?p:(0,a.degrees)(0),hidden:t.hidden,page:e.ref}),m=this.doc.context.register(f.dict);this.acroField.addWidget(m),f.setAppearanceState(s.PDFName.of("Off")),this.updateWidgetAppearance(f,s.PDFName.of("Yes")),e.node.addAnnot(m)},d.prototype.needsAppearancesUpdate=function(){for(var e,t=this.acroField.getWidgets(),n=0,r=t.length;n<r;n++){var i=t[n],a=i.getAppearanceState(),o=null==(e=i.getAppearances())?void 0:e.normal;if(!(o instanceof l.PDFDict)||a&&!o.has(a))return!0}return!1},d.prototype.defaultUpdateAppearances=function(){this.updateAppearances()},d.prototype.updateAppearances=function(e){(0,c.assertOrUndefined)(e,"provider",[Function]);for(var t,n=this.acroField.getWidgets(),r=0,i=n.length;r<i;r++){var a=n[r],o=null!=(t=a.getOnValue())?t:s.PDFName.of("Yes");o&&this.updateWidgetAppearance(a,o,e)}this.markAsClean()},d.prototype.updateWidgetAppearance=function(e,t,n){var i=null!=n?n:r.defaultCheckBoxAppearanceProvider,a=(0,r.normalizeAppearance)(i(this,e));this.updateOnOffWidgetAppearance(e,t,a)},d.of=function(e,t,n){return new d(e,t,n)},d}(o.default)},187777:e=>{"use strict";e.s({PDFHexString:()=>t.default});var t=e.i(934271)},575898:e=>{"use strict";e.s({PDFStream:()=>t.default});var t=e.i(13139)},927699:e=>{"use strict";e.s({PDFAcroComboBox:()=>t.default});var t=e.i(820005)},19193:e=>{"use strict";e.s({default:()=>p});var t=e.i(436255),n=e.i(653191),r=e.i(761660),i=e.i(556399),a=e.i(643035),o=e.i(828226),s=e.i(893475);e.i(35849);var l=e.i(187777),u=e.i(575898),c=e.i(927699),d=e.i(570889);e.i(465248);var h=e.i(540265);let p=function(e){function p(t,n,r){var i=e.call(this,t,n,r)||this;return(0,h.assertIs)(t,"acroComboBox",[[c.PDFAcroComboBox,"PDFAcroComboBox"]]),i.acroField=t,i}return(0,t.__extends)(p,e),p.prototype.getOptions=function(){for(var e=this.acroField.getOptions(),t=Array(e.length),n=0,r=t.length;n<r;n++){var i=e[n],a=i.display,o=i.value;t[n]=(null!=a?a:o).decodeText()}return t},p.prototype.getSelected=function(){for(var e=this.acroField.getValues(),t=Array(e.length),n=0,r=e.length;n<r;n++)t[n]=e[n].decodeText();return t},p.prototype.setOptions=function(e){(0,h.assertIs)(e,"options",[Array]);for(var t=Array(e.length),n=0,r=e.length;n<r;n++)t[n]={value:l.PDFHexString.fromText(e[n])};this.acroField.setOptions(t)},p.prototype.addOptions=function(e){(0,h.assertIs)(e,"options",["string",Array]);for(var t=Array.isArray(e)?e:[e],n=this.acroField.getOptions(),r=Array(t.length),i=0,a=t.length;i<a;i++)r[i]={value:l.PDFHexString.fromText(t[i])};this.acroField.setOptions(n.concat(r))},p.prototype.select=function(e,t){void 0===t&&(t=!1),(0,h.assertIs)(e,"options",["string",Array]),(0,h.assertIs)(t,"merge",["boolean"]);var n=Array.isArray(e)?e:[e],r=this.getOptions();n.find(function(e){return!r.includes(e)})&&this.enableEditing(),this.markAsDirty(),(n.length>1||1===n.length&&t)&&this.enableMultiselect();for(var i=Array(n.length),a=0,o=n.length;a<o;a++)i[a]=l.PDFHexString.fromText(n[a]);if(t){var s=this.acroField.getValues();this.acroField.setValues(s.concat(i))}else this.acroField.setValues(i)},p.prototype.clear=function(){this.markAsDirty(),this.acroField.setValues([])},p.prototype.setFontSize=function(e){(0,h.assertPositive)(e,"fontSize"),this.acroField.setFontSize(e),this.markAsDirty()},p.prototype.isEditable=function(){return this.acroField.hasFlag(d.AcroChoiceFlags.Edit)},p.prototype.enableEditing=function(){this.acroField.setFlagTo(d.AcroChoiceFlags.Edit,!0)},p.prototype.disableEditing=function(){this.acroField.setFlagTo(d.AcroChoiceFlags.Edit,!1)},p.prototype.isSorted=function(){return this.acroField.hasFlag(d.AcroChoiceFlags.Sort)},p.prototype.enableSorting=function(){this.acroField.setFlagTo(d.AcroChoiceFlags.Sort,!0)},p.prototype.disableSorting=function(){this.acroField.setFlagTo(d.AcroChoiceFlags.Sort,!1)},p.prototype.isMultiselect=function(){return this.acroField.hasFlag(d.AcroChoiceFlags.MultiSelect)},p.prototype.enableMultiselect=function(){this.acroField.setFlagTo(d.AcroChoiceFlags.MultiSelect,!0)},p.prototype.disableMultiselect=function(){this.acroField.setFlagTo(d.AcroChoiceFlags.MultiSelect,!1)},p.prototype.isSpellChecked=function(){return!this.acroField.hasFlag(d.AcroChoiceFlags.DoNotSpellCheck)},p.prototype.enableSpellChecking=function(){this.acroField.setFlagTo(d.AcroChoiceFlags.DoNotSpellCheck,!1)},p.prototype.disableSpellChecking=function(){this.acroField.setFlagTo(d.AcroChoiceFlags.DoNotSpellCheck,!0)},p.prototype.isSelectOnClick=function(){return this.acroField.hasFlag(d.AcroChoiceFlags.CommitOnSelChange)},p.prototype.enableSelectOnClick=function(){this.acroField.setFlagTo(d.AcroChoiceFlags.CommitOnSelChange,!0)},p.prototype.disableSelectOnClick=function(){this.acroField.setFlagTo(d.AcroChoiceFlags.CommitOnSelChange,!1)},p.prototype.addToPage=function(e,t){(0,h.assertIs)(e,"page",[[n.default,"PDFPage"]]),(0,i.assertFieldAppearanceOptions)(t),t||(t={}),"textColor"in t||(t.textColor=(0,o.rgb)(0,0,0)),"backgroundColor"in t||(t.backgroundColor=(0,o.rgb)(1,1,1)),"borderColor"in t||(t.borderColor=(0,o.rgb)(0,0,0)),"borderWidth"in t||(t.borderWidth=1);var r,a,l,u,c,d,p,f=this.createWidget({x:null!=(r=t.x)?r:0,y:null!=(a=t.y)?a:0,width:null!=(l=t.width)?l:200,height:null!=(u=t.height)?u:50,textColor:t.textColor,backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:null!=(c=t.borderWidth)?c:0,rotate:null!=(d=t.rotate)?d:(0,s.degrees)(0),hidden:t.hidden,page:e.ref}),m=this.doc.context.register(f.dict);this.acroField.addWidget(m);var g=null!=(p=t.font)?p:this.doc.getForm().getDefaultFont();this.updateWidgetAppearance(f,g),e.node.addAnnot(m)},p.prototype.needsAppearancesUpdate=function(){if(this.isDirty())return!0;for(var e,t=this.acroField.getWidgets(),n=0,r=t.length;n<r;n++)if(!((null==(e=t[n].getAppearances())?void 0:e.normal)instanceof u.PDFStream))return!0;return!1},p.prototype.defaultUpdateAppearances=function(e){(0,h.assertIs)(e,"font",[[r.default,"PDFFont"]]),this.updateAppearances(e)},p.prototype.updateAppearances=function(e,t){(0,h.assertIs)(e,"font",[[r.default,"PDFFont"]]),(0,h.assertOrUndefined)(t,"provider",[Function]);for(var n=this.acroField.getWidgets(),i=0,a=n.length;i<a;i++){var o=n[i];this.updateWidgetAppearance(o,e,t)}this.markAsClean()},p.prototype.updateWidgetAppearance=function(e,t,n){var r=null!=n?n:a.defaultDropdownAppearanceProvider,i=(0,a.normalizeAppearance)(r(this,e,t));this.updateWidgetAppearanceWithFont(e,t,i)},p.of=function(e,t,n){return new p(e,t,n)},p}(i.default)},551092:e=>{"use strict";e.s({PDFAcroListBox:()=>t.default});var t=e.i(922570)},609845:e=>{"use strict";e.s({default:()=>p});var t=e.i(436255),n=e.i(653191),r=e.i(761660),i=e.i(556399),a=e.i(643035),o=e.i(828226),s=e.i(893475);e.i(35849);var l=e.i(187777),u=e.i(575898),c=e.i(551092),d=e.i(570889);e.i(465248);var h=e.i(540265);let p=function(e){function p(t,n,r){var i=e.call(this,t,n,r)||this;return(0,h.assertIs)(t,"acroListBox",[[c.PDFAcroListBox,"PDFAcroListBox"]]),i.acroField=t,i}return(0,t.__extends)(p,e),p.prototype.getOptions=function(){for(var e=this.acroField.getOptions(),t=Array(e.length),n=0,r=t.length;n<r;n++){var i=e[n],a=i.display,o=i.value;t[n]=(null!=a?a:o).decodeText()}return t},p.prototype.getSelected=function(){for(var e=this.acroField.getValues(),t=Array(e.length),n=0,r=e.length;n<r;n++)t[n]=e[n].decodeText();return t},p.prototype.setOptions=function(e){(0,h.assertIs)(e,"options",[Array]),this.markAsDirty();for(var t=Array(e.length),n=0,r=e.length;n<r;n++)t[n]={value:l.PDFHexString.fromText(e[n])};this.acroField.setOptions(t)},p.prototype.addOptions=function(e){(0,h.assertIs)(e,"options",["string",Array]),this.markAsDirty();for(var t=Array.isArray(e)?e:[e],n=this.acroField.getOptions(),r=Array(t.length),i=0,a=t.length;i<a;i++)r[i]={value:l.PDFHexString.fromText(t[i])};this.acroField.setOptions(n.concat(r))},p.prototype.select=function(e,t){void 0===t&&(t=!1),(0,h.assertIs)(e,"options",["string",Array]),(0,h.assertIs)(t,"merge",["boolean"]);var n=Array.isArray(e)?e:[e],r=this.getOptions();(0,h.assertIsSubset)(n,"option",r),this.markAsDirty(),(n.length>1||1===n.length&&t)&&this.enableMultiselect();for(var i=Array(n.length),a=0,o=n.length;a<o;a++)i[a]=l.PDFHexString.fromText(n[a]);if(t){var s=this.acroField.getValues();this.acroField.setValues(s.concat(i))}else this.acroField.setValues(i)},p.prototype.clear=function(){this.markAsDirty(),this.acroField.setValues([])},p.prototype.setFontSize=function(e){(0,h.assertPositive)(e,"fontSize"),this.acroField.setFontSize(e),this.markAsDirty()},p.prototype.isSorted=function(){return this.acroField.hasFlag(d.AcroChoiceFlags.Sort)},p.prototype.enableSorting=function(){this.acroField.setFlagTo(d.AcroChoiceFlags.Sort,!0)},p.prototype.disableSorting=function(){this.acroField.setFlagTo(d.AcroChoiceFlags.Sort,!1)},p.prototype.isMultiselect=function(){return this.acroField.hasFlag(d.AcroChoiceFlags.MultiSelect)},p.prototype.enableMultiselect=function(){this.acroField.setFlagTo(d.AcroChoiceFlags.MultiSelect,!0)},p.prototype.disableMultiselect=function(){this.acroField.setFlagTo(d.AcroChoiceFlags.MultiSelect,!1)},p.prototype.isSelectOnClick=function(){return this.acroField.hasFlag(d.AcroChoiceFlags.CommitOnSelChange)},p.prototype.enableSelectOnClick=function(){this.acroField.setFlagTo(d.AcroChoiceFlags.CommitOnSelChange,!0)},p.prototype.disableSelectOnClick=function(){this.acroField.setFlagTo(d.AcroChoiceFlags.CommitOnSelChange,!1)},p.prototype.addToPage=function(e,t){(0,h.assertIs)(e,"page",[[n.default,"PDFPage"]]),(0,i.assertFieldAppearanceOptions)(t),t||(t={}),"textColor"in t||(t.textColor=(0,o.rgb)(0,0,0)),"backgroundColor"in t||(t.backgroundColor=(0,o.rgb)(1,1,1)),"borderColor"in t||(t.borderColor=(0,o.rgb)(0,0,0)),"borderWidth"in t||(t.borderWidth=1);var r,a,l,u,c,d,p,f=this.createWidget({x:null!=(r=t.x)?r:0,y:null!=(a=t.y)?a:0,width:null!=(l=t.width)?l:200,height:null!=(u=t.height)?u:100,textColor:t.textColor,backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:null!=(c=t.borderWidth)?c:0,rotate:null!=(d=t.rotate)?d:(0,s.degrees)(0),hidden:t.hidden,page:e.ref}),m=this.doc.context.register(f.dict);this.acroField.addWidget(m);var g=null!=(p=t.font)?p:this.doc.getForm().getDefaultFont();this.updateWidgetAppearance(f,g),e.node.addAnnot(m)},p.prototype.needsAppearancesUpdate=function(){if(this.isDirty())return!0;for(var e,t=this.acroField.getWidgets(),n=0,r=t.length;n<r;n++)if(!((null==(e=t[n].getAppearances())?void 0:e.normal)instanceof u.PDFStream))return!0;return!1},p.prototype.defaultUpdateAppearances=function(e){(0,h.assertIs)(e,"font",[[r.default,"PDFFont"]]),this.updateAppearances(e)},p.prototype.updateAppearances=function(e,t){(0,h.assertIs)(e,"font",[[r.default,"PDFFont"]]),(0,h.assertOrUndefined)(t,"provider",[Function]);for(var n=this.acroField.getWidgets(),i=0,a=n.length;i<a;i++){var o=n[i];this.updateWidgetAppearance(o,e,t)}this.markAsClean()},p.prototype.updateWidgetAppearance=function(e,t,n){var r=null!=n?n:a.defaultOptionListAppearanceProvider,i=(0,a.normalizeAppearance)(r(this,e,t));this.updateWidgetAppearanceWithFont(e,t,i)},p.of=function(e,t,n){return new p(e,t,n)},p}(i.default)},361732:e=>{"use strict";e.s({PDFAcroRadioButton:()=>t.default});var t=e.i(716819)},667930:e=>{"use strict";e.s({default:()=>p});var t=e.i(436255),n=e.i(653191),r=e.i(556399),i=e.i(643035),a=e.i(828226),o=e.i(893475);e.i(35849);var s=e.i(349043),l=e.i(187777),u=e.i(544481),c=e.i(361732),d=e.i(570889);e.i(465248);var h=e.i(540265);let p=function(e){function p(t,n,r){var i=e.call(this,t,n,r)||this;return(0,h.assertIs)(t,"acroRadioButton",[[c.PDFAcroRadioButton,"PDFAcroRadioButton"]]),i.acroField=t,i}return(0,t.__extends)(p,e),p.prototype.getOptions=function(){var e=this.acroField.getExportValues();if(e){for(var t=Array(e.length),n=0,r=e.length;n<r;n++)t[n]=e[n].decodeText();return t}for(var i=this.acroField.getOnValues(),a=Array(i.length),n=0,r=a.length;n<r;n++)a[n]=i[n].decodeText();return a},p.prototype.getSelected=function(){var e=this.acroField.getValue();if(e!==s.PDFName.of("Off")){var t=this.acroField.getExportValues();if(t){for(var n=this.acroField.getOnValues(),r=0,i=n.length;r<i;r++)if(n[r]===e)return t[r].decodeText()}return e.decodeText()}},p.prototype.select=function(e){(0,h.assertIs)(e,"option",["string"]);var t=this.getOptions();(0,h.assertIsOneOf)(e,"option",t),this.markAsDirty();var n=this.acroField.getOnValues(),r=this.acroField.getExportValues();if(r)for(var i=0,a=r.length;i<a;i++)r[i].decodeText()===e&&this.acroField.setValue(n[i]);else for(var i=0,a=n.length;i<a;i++){var o=n[i];o.decodeText()===e&&this.acroField.setValue(o)}},p.prototype.clear=function(){this.markAsDirty(),this.acroField.setValue(s.PDFName.of("Off"))},p.prototype.isOffToggleable=function(){return!this.acroField.hasFlag(d.AcroButtonFlags.NoToggleToOff)},p.prototype.enableOffToggling=function(){this.acroField.setFlagTo(d.AcroButtonFlags.NoToggleToOff,!1)},p.prototype.disableOffToggling=function(){this.acroField.setFlagTo(d.AcroButtonFlags.NoToggleToOff,!0)},p.prototype.isMutuallyExclusive=function(){return!this.acroField.hasFlag(d.AcroButtonFlags.RadiosInUnison)},p.prototype.enableMutualExclusion=function(){this.acroField.setFlagTo(d.AcroButtonFlags.RadiosInUnison,!1)},p.prototype.disableMutualExclusion=function(){this.acroField.setFlagTo(d.AcroButtonFlags.RadiosInUnison,!0)},p.prototype.addOptionToPage=function(e,t,i){(0,h.assertIs)(e,"option",["string"]),(0,h.assertIs)(t,"page",[[n.default,"PDFPage"]]),(0,r.assertFieldAppearanceOptions)(i);var u,c,d,p,f,m,g,y,b,x=this.createWidget({x:null!=(u=null==i?void 0:i.x)?u:0,y:null!=(c=null==i?void 0:i.y)?c:0,width:null!=(d=null==i?void 0:i.width)?d:50,height:null!=(p=null==i?void 0:i.height)?p:50,textColor:null!=(f=null==i?void 0:i.textColor)?f:(0,a.rgb)(0,0,0),backgroundColor:null!=(m=null==i?void 0:i.backgroundColor)?m:(0,a.rgb)(1,1,1),borderColor:null!=(g=null==i?void 0:i.borderColor)?g:(0,a.rgb)(0,0,0),borderWidth:null!=(y=null==i?void 0:i.borderWidth)?y:1,rotate:null!=(b=null==i?void 0:i.rotate)?b:(0,o.degrees)(0),hidden:null==i?void 0:i.hidden,page:t.ref}),w=this.doc.context.register(x.dict),k=this.acroField.addWidgetWithOpt(w,l.PDFHexString.fromText(e),!this.isMutuallyExclusive());x.setAppearanceState(s.PDFName.of("Off")),this.updateWidgetAppearance(x,k),t.node.addAnnot(w)},p.prototype.needsAppearancesUpdate=function(){for(var e,t=this.acroField.getWidgets(),n=0,r=t.length;n<r;n++){var i=t[n],a=i.getAppearanceState(),o=null==(e=i.getAppearances())?void 0:e.normal;if(!(o instanceof u.PDFDict)||a&&!o.has(a))return!0}return!1},p.prototype.defaultUpdateAppearances=function(){this.updateAppearances()},p.prototype.updateAppearances=function(e){(0,h.assertOrUndefined)(e,"provider",[Function]);for(var t=this.acroField.getWidgets(),n=0,r=t.length;n<r;n++){var i=t[n],a=i.getOnValue();a&&this.updateWidgetAppearance(i,a,e)}},p.prototype.updateWidgetAppearance=function(e,t,n){var r=null!=n?n:i.defaultRadioGroupAppearanceProvider,a=(0,i.normalizeAppearance)(r(this,e));this.updateOnOffWidgetAppearance(e,t,a)},p.of=function(e,t,n){return new p(e,t,n)},p}(r.default)},957118:e=>{"use strict";e.s({PDFAcroSignature:()=>t.default});var t=e.i(107417)},235834:e=>{"use strict";e.s({default:()=>a});var t=e.i(436255),n=e.i(556399);e.i(35849);var r=e.i(957118);e.i(465248);var i=e.i(540265);let a=function(e){function n(t,n,a){var o=e.call(this,t,n,a)||this;return(0,i.assertIs)(t,"acroSignature",[[r.PDFAcroSignature,"PDFAcroSignature"]]),o.acroField=t,o}return(0,t.__extends)(n,e),n.prototype.needsAppearancesUpdate=function(){return!1},n.of=function(e,t,r){return new n(e,t,r)},n}(n.default)},741189:e=>{"use strict";e.s({PDFAcroText:()=>t.default});var t=e.i(245078)},603469:e=>{"use strict";e.s({default:()=>g});var t=e.i(436255),n=e.i(653191),r=e.i(761660),i=e.i(556399),a=e.i(643035),o=e.i(828226),s=e.i(893475),l=e.i(137637),u=e.i(240605),c=e.i(934303);e.i(35849);var d=e.i(187777),h=e.i(575898),p=e.i(741189),f=e.i(570889);e.i(465248);var m=e.i(540265);let g=function(e){function g(t,n,r){var i=e.call(this,t,n,r)||this;return(0,m.assertIs)(t,"acroText",[[p.PDFAcroText,"PDFAcroText"]]),i.acroField=t,i}return(0,t.__extends)(g,e),g.prototype.getText=function(){var e=this.acroField.getValue();if(!e&&this.isRichFormatted())throw new l.RichTextFieldReadError(this.getName());return null==e?void 0:e.decodeText()},g.prototype.setText=function(e){(0,m.assertOrUndefined)(e,"text",["string"]);var t=this.getMaxLength();if(void 0!==t&&e&&e.length>t)throw new l.ExceededMaxLengthError(e.length,t,this.getName());this.markAsDirty(),this.disableRichFormatting(),e?this.acroField.setValue(d.PDFHexString.fromText(e)):this.acroField.removeValue()},g.prototype.getAlignment=function(){var e=this.acroField.getQuadding();return 0===e?c.TextAlignment.Left:1===e?c.TextAlignment.Center:2===e?c.TextAlignment.Right:c.TextAlignment.Left},g.prototype.setAlignment=function(e){(0,m.assertIsOneOf)(e,"alignment",c.TextAlignment),this.markAsDirty(),this.acroField.setQuadding(e)},g.prototype.getMaxLength=function(){return this.acroField.getMaxLength()},g.prototype.setMaxLength=function(e){if((0,m.assertRangeOrUndefined)(e,"maxLength",0,Number.MAX_SAFE_INTEGER),this.markAsDirty(),void 0===e)this.acroField.removeMaxLength();else{var t=this.getText();if(t&&t.length>e)throw new l.InvalidMaxLengthError(t.length,e,this.getName());this.acroField.setMaxLength(e)}},g.prototype.removeMaxLength=function(){this.markAsDirty(),this.acroField.removeMaxLength()},g.prototype.setImage=function(e){for(var t=this.getAlignment(),n=t===c.TextAlignment.Center?u.ImageAlignment.Center:t===c.TextAlignment.Right?u.ImageAlignment.Right:u.ImageAlignment.Left,r=this.acroField.getWidgets(),i=0,a=r.length;i<a;i++){var o=r[i],s=this.createImageAppearanceStream(o,e,n);this.updateWidgetAppearances(o,{normal:s})}this.markAsClean()},g.prototype.setFontSize=function(e){(0,m.assertPositive)(e,"fontSize"),this.acroField.setFontSize(e),this.markAsDirty()},g.prototype.isMultiline=function(){return this.acroField.hasFlag(f.AcroTextFlags.Multiline)},g.prototype.enableMultiline=function(){this.markAsDirty(),this.acroField.setFlagTo(f.AcroTextFlags.Multiline,!0)},g.prototype.disableMultiline=function(){this.markAsDirty(),this.acroField.setFlagTo(f.AcroTextFlags.Multiline,!1)},g.prototype.isPassword=function(){return this.acroField.hasFlag(f.AcroTextFlags.Password)},g.prototype.enablePassword=function(){this.acroField.setFlagTo(f.AcroTextFlags.Password,!0)},g.prototype.disablePassword=function(){this.acroField.setFlagTo(f.AcroTextFlags.Password,!1)},g.prototype.isFileSelector=function(){return this.acroField.hasFlag(f.AcroTextFlags.FileSelect)},g.prototype.enableFileSelection=function(){this.acroField.setFlagTo(f.AcroTextFlags.FileSelect,!0)},g.prototype.disableFileSelection=function(){this.acroField.setFlagTo(f.AcroTextFlags.FileSelect,!1)},g.prototype.isSpellChecked=function(){return!this.acroField.hasFlag(f.AcroTextFlags.DoNotSpellCheck)},g.prototype.enableSpellChecking=function(){this.acroField.setFlagTo(f.AcroTextFlags.DoNotSpellCheck,!1)},g.prototype.disableSpellChecking=function(){this.acroField.setFlagTo(f.AcroTextFlags.DoNotSpellCheck,!0)},g.prototype.isScrollable=function(){return!this.acroField.hasFlag(f.AcroTextFlags.DoNotScroll)},g.prototype.enableScrolling=function(){this.acroField.setFlagTo(f.AcroTextFlags.DoNotScroll,!1)},g.prototype.disableScrolling=function(){this.acroField.setFlagTo(f.AcroTextFlags.DoNotScroll,!0)},g.prototype.isCombed=function(){return this.acroField.hasFlag(f.AcroTextFlags.Comb)&&!this.isMultiline()&&!this.isPassword()&&!this.isFileSelector()&&void 0!==this.getMaxLength()},g.prototype.enableCombing=function(){void 0===this.getMaxLength()&&console.warn("PDFTextFields must have a max length in order to be combed"),this.markAsDirty(),this.disableMultiline(),this.disablePassword(),this.disableFileSelection(),this.acroField.setFlagTo(f.AcroTextFlags.Comb,!0)},g.prototype.disableCombing=function(){this.markAsDirty(),this.acroField.setFlagTo(f.AcroTextFlags.Comb,!1)},g.prototype.isRichFormatted=function(){return this.acroField.hasFlag(f.AcroTextFlags.RichText)},g.prototype.enableRichFormatting=function(){this.acroField.setFlagTo(f.AcroTextFlags.RichText,!0)},g.prototype.disableRichFormatting=function(){this.acroField.setFlagTo(f.AcroTextFlags.RichText,!1)},g.prototype.addToPage=function(e,t){(0,m.assertIs)(e,"page",[[n.default,"PDFPage"]]),(0,i.assertFieldAppearanceOptions)(t),t||(t={}),"textColor"in t||(t.textColor=(0,o.rgb)(0,0,0)),"backgroundColor"in t||(t.backgroundColor=(0,o.rgb)(1,1,1)),"borderColor"in t||(t.borderColor=(0,o.rgb)(0,0,0)),"borderWidth"in t||(t.borderWidth=1);var r,a,l,u,c,d,h,p=this.createWidget({x:null!=(r=t.x)?r:0,y:null!=(a=t.y)?a:0,width:null!=(l=t.width)?l:200,height:null!=(u=t.height)?u:50,textColor:t.textColor,backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:null!=(c=t.borderWidth)?c:0,rotate:null!=(d=t.rotate)?d:(0,s.degrees)(0),hidden:t.hidden,page:e.ref}),f=this.doc.context.register(p.dict);this.acroField.addWidget(f);var g=null!=(h=t.font)?h:this.doc.getForm().getDefaultFont();this.updateWidgetAppearance(p,g),e.node.addAnnot(f)},g.prototype.needsAppearancesUpdate=function(){if(this.isDirty())return!0;for(var e,t=this.acroField.getWidgets(),n=0,r=t.length;n<r;n++)if(!((null==(e=t[n].getAppearances())?void 0:e.normal)instanceof h.PDFStream))return!0;return!1},g.prototype.defaultUpdateAppearances=function(e){(0,m.assertIs)(e,"font",[[r.default,"PDFFont"]]),this.updateAppearances(e)},g.prototype.updateAppearances=function(e,t){(0,m.assertIs)(e,"font",[[r.default,"PDFFont"]]),(0,m.assertOrUndefined)(t,"provider",[Function]);for(var n=this.acroField.getWidgets(),i=0,a=n.length;i<a;i++){var o=n[i];this.updateWidgetAppearance(o,e,t)}this.markAsClean()},g.prototype.updateWidgetAppearance=function(e,t,n){var r=null!=n?n:a.defaultTextFieldAppearanceProvider,i=(0,a.normalizeAppearance)(r(this,e,t));this.updateWidgetAppearanceWithFont(e,t,i)},g.of=function(e,t,n){return new g(e,t,n)},g}(i.default)},838328:e=>{"use strict";var t;e.s({StandardFonts:()=>t}),function(e){e.Courier="Courier",e.CourierBold="Courier-Bold",e.CourierOblique="Courier-Oblique",e.CourierBoldOblique="Courier-BoldOblique",e.Helvetica="Helvetica",e.HelveticaBold="Helvetica-Bold",e.HelveticaOblique="Helvetica-Oblique",e.HelveticaBoldOblique="Helvetica-BoldOblique",e.TimesRoman="Times-Roman",e.TimesRomanBold="Times-Bold",e.TimesRomanItalic="Times-Italic",e.TimesRomanBoldItalic="Times-BoldItalic",e.Symbol="Symbol",e.ZapfDingbats="ZapfDingbats"}(t||(t={}))},561807:e=>{"use strict";e.s({PDFAcroPushButton:()=>t.default});var t=e.i(582432)},533955:e=>{"use strict";e.s({PDFAcroNonTerminal:()=>t.default});var t=e.i(580549)},892177:e=>{"use strict";e.s({default:()=>N});var t=e.i(436255),n=e.i(905919),r=e.i(450882),i=e.i(315483),a=e.i(19193),o=e.i(609845),s=e.i(667930),l=e.i(235834),u=e.i(603469),c=e.i(137637),d=e.i(761660),h=e.i(838328),p=e.i(453631),f=e.i(283732);e.i(35849);var m=e.i(633612),g=e.i(232777),y=e.i(927699),b=e.i(551092),x=e.i(361732),w=e.i(957118),k=e.i(741189),S=e.i(561807),_=e.i(533955),C=e.i(544481),A=e.i(214466),E=e.i(977849),T=e.i(349043);e.i(465248);var M=e.i(540265),I=e.i(264900);let N=function(){function e(e,t){var r=this;this.embedDefaultFont=function(){return r.doc.embedStandardFont(h.StandardFonts.Helvetica)},(0,M.assertIs)(e,"acroForm",[[m.PDFAcroForm,"PDFAcroForm"]]),(0,M.assertIs)(t,"doc",[[n.default,"PDFDocument"]]),this.acroForm=e,this.doc=t,this.dirtyFields=new Set,this.defaultFontCache=I.Cache.populatedBy(this.embedDefaultFont)}return e.prototype.hasXFA=function(){return this.acroForm.dict.has(T.PDFName.of("XFA"))},e.prototype.deleteXFA=function(){this.acroForm.dict.delete(T.PDFName.of("XFA"))},e.prototype.getFields=function(){for(var e=this.acroForm.getAllFields(),t=[],n=0,r=e.length;n<r;n++){var i=e[n],a=D(i[0],i[1],this.doc);a&&t.push(a)}return t},e.prototype.getFieldMaybe=function(e){(0,M.assertIs)(e,"name",["string"]);for(var t=this.getFields(),n=0,r=t.length;n<r;n++){var i=t[n];if(i.getName()===e)return i}},e.prototype.getField=function(e){(0,M.assertIs)(e,"name",["string"]);var t=this.getFieldMaybe(e);if(t)return t;throw new c.NoSuchFieldError(e)},e.prototype.getButton=function(e){(0,M.assertIs)(e,"name",["string"]);var t=this.getField(e);if(t instanceof r.default)return t;throw new c.UnexpectedFieldTypeError(e,r.default,t)},e.prototype.getCheckBox=function(e){(0,M.assertIs)(e,"name",["string"]);var t=this.getField(e);if(t instanceof i.default)return t;throw new c.UnexpectedFieldTypeError(e,i.default,t)},e.prototype.getDropdown=function(e){(0,M.assertIs)(e,"name",["string"]);var t=this.getField(e);if(t instanceof a.default)return t;throw new c.UnexpectedFieldTypeError(e,a.default,t)},e.prototype.getOptionList=function(e){(0,M.assertIs)(e,"name",["string"]);var t=this.getField(e);if(t instanceof o.default)return t;throw new c.UnexpectedFieldTypeError(e,o.default,t)},e.prototype.getRadioGroup=function(e){(0,M.assertIs)(e,"name",["string"]);var t=this.getField(e);if(t instanceof s.default)return t;throw new c.UnexpectedFieldTypeError(e,s.default,t)},e.prototype.getSignature=function(e){(0,M.assertIs)(e,"name",["string"]);var t=this.getField(e);if(t instanceof l.default)return t;throw new c.UnexpectedFieldTypeError(e,l.default,t)},e.prototype.getTextField=function(e){(0,M.assertIs)(e,"name",["string"]);var t=this.getField(e);if(t instanceof u.default)return t;throw new c.UnexpectedFieldTypeError(e,u.default,t)},e.prototype.createButton=function(e){(0,M.assertIs)(e,"name",["string"]);var t=P(e),n=this.findOrCreateNonTerminals(t.nonTerminal),i=S.PDFAcroPushButton.create(this.doc.context);return i.setPartialName(t.terminal),R(n,[i,i.ref],t.terminal),r.default.of(i,i.ref,this.doc)},e.prototype.createCheckBox=function(e){(0,M.assertIs)(e,"name",["string"]);var t=P(e),n=this.findOrCreateNonTerminals(t.nonTerminal),r=g.PDFAcroCheckBox.create(this.doc.context);return r.setPartialName(t.terminal),R(n,[r,r.ref],t.terminal),i.default.of(r,r.ref,this.doc)},e.prototype.createDropdown=function(e){(0,M.assertIs)(e,"name",["string"]);var t=P(e),n=this.findOrCreateNonTerminals(t.nonTerminal),r=y.PDFAcroComboBox.create(this.doc.context);return r.setPartialName(t.terminal),R(n,[r,r.ref],t.terminal),a.default.of(r,r.ref,this.doc)},e.prototype.createOptionList=function(e){(0,M.assertIs)(e,"name",["string"]);var t=P(e),n=this.findOrCreateNonTerminals(t.nonTerminal),r=b.PDFAcroListBox.create(this.doc.context);return r.setPartialName(t.terminal),R(n,[r,r.ref],t.terminal),o.default.of(r,r.ref,this.doc)},e.prototype.createRadioGroup=function(e){(0,M.assertIs)(e,"name",["string"]);var t=P(e),n=this.findOrCreateNonTerminals(t.nonTerminal),r=x.PDFAcroRadioButton.create(this.doc.context);return r.setPartialName(t.terminal),R(n,[r,r.ref],t.terminal),s.default.of(r,r.ref,this.doc)},e.prototype.createTextField=function(e){(0,M.assertIs)(e,"name",["string"]);var t=P(e),n=this.findOrCreateNonTerminals(t.nonTerminal),r=k.PDFAcroText.create(this.doc.context);return r.setPartialName(t.terminal),R(n,[r,r.ref],t.terminal),u.default.of(r,r.ref,this.doc)},e.prototype.flatten=function(e){void 0===e&&(e={updateFieldAppearances:!0}),e.updateFieldAppearances&&this.updateFieldAppearances();for(var n=this.getFields(),r=0,i=n.length;r<i;r++){for(var a=n[r],o=a.acroField.getWidgets(),s=0,l=o.length;s<l;s++){var u=o[s],c=this.findWidgetPage(u),d=this.findWidgetAppearanceRef(a,u),h=c.node.newXObject("FlatWidget",d),m=u.getRectangle(),g=(0,t.__spreadArrays)([(0,f.pushGraphicsState)(),(0,f.translate)(m.x,m.y)],(0,p.rotateInPlace)((0,t.__assign)((0,t.__assign)({},m),{rotation:0})),[(0,f.drawObject)(h),(0,f.popGraphicsState)()]).filter(Boolean);c.pushOperators.apply(c,g)}this.removeField(a)}},e.prototype.removeField=function(e){for(var t=e.acroField.getWidgets(),n=new Set,r=0,i=t.length;r<i;r++){var a=t[r],o=this.findWidgetAppearanceRef(e,a),s=this.findWidgetPage(a);n.add(s),s.node.removeAnnot(o)}n.forEach(function(t){return t.node.removeAnnot(e.ref)}),this.acroForm.removeField(e.acroField);for(var l=e.acroField.normalizedEntries().Kids,u=l.size(),c=0;c<u;c++){var d=l.get(c);d instanceof A.PDFRef&&this.doc.context.delete(d)}this.doc.context.delete(e.ref)},e.prototype.updateFieldAppearances=function(e){(0,M.assertOrUndefined)(e,"font",[[d.default,"PDFFont"]]),e=null!=e?e:this.getDefaultFont();for(var t=this.getFields(),n=0,r=t.length;n<r;n++){var i=t[n];i.needsAppearancesUpdate()&&i.defaultUpdateAppearances(e)}},e.prototype.markFieldAsDirty=function(e){(0,M.assertOrUndefined)(e,"fieldRef",[[A.PDFRef,"PDFRef"]]),this.dirtyFields.add(e)},e.prototype.markFieldAsClean=function(e){(0,M.assertOrUndefined)(e,"fieldRef",[[A.PDFRef,"PDFRef"]]),this.dirtyFields.delete(e)},e.prototype.fieldIsDirty=function(e){return(0,M.assertOrUndefined)(e,"fieldRef",[[A.PDFRef,"PDFRef"]]),this.dirtyFields.has(e)},e.prototype.getDefaultFont=function(){return this.defaultFontCache.access()},e.prototype.findWidgetPage=function(e){var t=e.P(),n=this.doc.getPages().find(function(e){return e.ref===t});if(void 0===n){var r=this.doc.context.getObjectRef(e.dict);if(void 0===r)throw Error("Could not find PDFRef for PDFObject");if(void 0===(n=this.doc.findPageForAnnotationRef(r)))throw Error("Could not find page for PDFRef "+r)}return n},e.prototype.findWidgetAppearanceRef=function(e,t){var n,r=t.getNormalAppearance();if(r instanceof C.PDFDict&&(e instanceof i.default||e instanceof s.default)){var a=e.acroField.getValue(),o=null!=(n=r.get(a))?n:r.get(T.PDFName.of("Off"));o instanceof A.PDFRef&&(r=o)}if(!(r instanceof A.PDFRef))throw Error("Failed to extract appearance ref for: "+e.getName());return r},e.prototype.findOrCreateNonTerminals=function(e){for(var t=[this.acroForm],n=0,r=e.length;n<r;n++){var i=e[n];if(!i)throw new c.InvalidFieldNamePartError(i);var a=t[0],o=t[1],s=this.findNonTerminal(i,a);if(s)t=s;else{var l=_.PDFAcroNonTerminal.create(this.doc.context);l.setPartialName(i),l.setParent(o);var u=this.doc.context.register(l.dict);a.addField(u),t=[l,u]}}return t},e.prototype.findNonTerminal=function(e,t){for(var n=t instanceof m.PDFAcroForm?this.acroForm.getFields():(0,E.createPDFAcroFields)(t.Kids()),r=0,i=n.length;r<i;r++){var a=n[r],o=a[0],s=a[1];if(o.getPartialName()===e){if(o instanceof _.PDFAcroNonTerminal)return[o,s];throw new c.FieldAlreadyExistsError(e)}}},e.of=function(t,n){return new e(t,n)},e}();var D=function(e,t,n){return e instanceof S.PDFAcroPushButton?r.default.of(e,t,n):e instanceof g.PDFAcroCheckBox?i.default.of(e,t,n):e instanceof y.PDFAcroComboBox?a.default.of(e,t,n):e instanceof b.PDFAcroListBox?o.default.of(e,t,n):e instanceof k.PDFAcroText?u.default.of(e,t,n):e instanceof x.PDFAcroRadioButton?s.default.of(e,t,n):e instanceof w.PDFAcroSignature?l.default.of(e,t,n):void 0},P=function(e){if(0===e.length)throw Error("PDF field names must not be empty strings");for(var t=e.split("."),n=0,r=t.length;n<r;n++)if(""===t[n])throw Error('Periods in PDF field names must be separated by at least one character: "'+e+'"');return 1===t.length?{nonTerminal:[],terminal:t[0]}:{nonTerminal:t.slice(0,t.length-1),terminal:t[t.length-1]}},R=function(e,t,n){for(var r=e[0],i=e[1],a=t[0],o=t[1],s=r.normalizedEntries(),l=(0,E.createPDFAcroFields)("Kids"in s?s.Kids:s.Fields),u=0,d=l.length;u<d;u++)if(l[u][0].getPartialName()===n)throw new c.FieldAlreadyExistsError(n);r.addField(o),a.setParent(i)}},359878:e=>{"use strict";e.s({PageSizes:()=>t});var t={"4A0":[4767.87,6740.79],"2A0":[3370.39,4767.87],A0:[2383.94,3370.39],A1:[1683.78,2383.94],A2:[1190.55,1683.78],A3:[841.89,1190.55],A4:[595.28,841.89],A5:[419.53,595.28],A6:[297.64,419.53],A7:[209.76,297.64],A8:[147.4,209.76],A9:[104.88,147.4],A10:[73.7,104.88],B0:[2834.65,4008.19],B1:[2004.09,2834.65],B2:[1417.32,2004.09],B3:[1000.63,1417.32],B4:[708.66,1000.63],B5:[498.9,708.66],B6:[354.33,498.9],B7:[249.45,354.33],B8:[175.75,249.45],B9:[124.72,175.75],B10:[87.87,124.72],C0:[2599.37,3676.54],C1:[1836.85,2599.37],C2:[1298.27,1836.85],C3:[918.43,1298.27],C4:[649.13,918.43],C5:[459.21,649.13],C6:[323.15,459.21],C7:[229.61,323.15],C8:[161.57,229.61],C9:[113.39,161.57],C10:[79.37,113.39],RA0:[2437.8,3458.27],RA1:[1729.13,2437.8],RA2:[1218.9,1729.13],RA3:[864.57,1218.9],RA4:[609.45,864.57],SRA0:[2551.18,3628.35],SRA1:[1814.17,2551.18],SRA2:[1275.59,1814.17],SRA3:[907.09,1275.59],SRA4:[637.8,907.09],Executive:[521.86,756],Folio:[612,936],Legal:[612,1008],Letter:[612,792],Tabloid:[792,1224]}},114689:e=>{"use strict";e.s({CustomFontSubsetEmbedder:()=>t.default});var t=e.i(895970)},299806:e=>{"use strict";e.s({PDFCatalog:()=>t.default});var t=e.i(7724)},348712:e=>{"use strict";e.s({PDFContext:()=>t.default});var t=e.i(529676)},384162:e=>{"use strict";e.s({PDFObjectCopier:()=>t.default});var t=e.i(258446)},260885:e=>{"use strict";e.s({PDFPageLeaf:()=>t.default});var t=e.i(669076)},528567:e=>{"use strict";e.s({PDFPageTree:()=>t.default});var t=e.i(376764)},891795:e=>{"use strict";e.s({PDFParser:()=>t.default});var t=e.i(992791)},376075:e=>{"use strict";e.s({PDFStreamWriter:()=>t.default});var t=e.i(550353)},638625:e=>{"use strict";e.s({PDFString:()=>t.default});var t=e.i(738472)},762058:e=>{"use strict";e.s({PDFWriter:()=>t.default});var t=e.i(671329)},34906:e=>{"use strict";var t;e.s({ParseSpeeds:()=>t}),function(e){e[e.Fastest=1/0]="Fastest",e[e.Fast=1500]="Fast",e[e.Medium=500]="Medium",e[e.Slow=100]="Slow"}(t||(t={}))},512934:e=>{"use strict";e.s({PDFArray:()=>t.default});var t=e.i(922995)},979588:e=>{"use strict";e.s({default:()=>o});var t=e.i(436255);e.i(35849);var n=e.i(349043),r=e.i(512934),i=e.i(544481),a=e.i(187777);let o=function(){function e(e,t,n){this.alreadyEmbedded=!1,this.ref=e,this.doc=t,this.embedder=n}return e.prototype.embed=function(){return(0,t.__awaiter)(this,void 0,void 0,function(){var e,o,s,l;return(0,t.__generator)(this,function(t){switch(t.label){case 0:if(this.alreadyEmbedded)return[3,2];return[4,this.embedder.embedIntoContext(this.doc.context,this.ref)];case 1:e=t.sent(),this.doc.catalog.has(n.PDFName.of("Names"))||this.doc.catalog.set(n.PDFName.of("Names"),this.doc.context.obj({})),(o=this.doc.catalog.lookup(n.PDFName.of("Names"),i.PDFDict)).has(n.PDFName.of("EmbeddedFiles"))||o.set(n.PDFName.of("EmbeddedFiles"),this.doc.context.obj({})),(s=o.lookup(n.PDFName.of("EmbeddedFiles"),i.PDFDict)).has(n.PDFName.of("Names"))||s.set(n.PDFName.of("Names"),this.doc.context.obj([])),(l=s.lookup(n.PDFName.of("Names"),r.PDFArray)).push(a.PDFHexString.fromText(this.embedder.fileName)),l.push(e),this.doc.catalog.has(n.PDFName.of("AF"))||this.doc.catalog.set(n.PDFName.of("AF"),this.doc.context.obj([])),this.doc.catalog.lookup(n.PDFName.of("AF"),r.PDFArray).push(e),this.alreadyEmbedded=!0,t.label=2;case 2:return[2]}})})},e.of=function(t,n,r){return new e(t,n,r)},e}()},566045:e=>{"use strict";e.s({default:()=>o});var t=e.i(436255);e.i(35849);var n=e.i(349043),r=e.i(512934),i=e.i(544481),a=e.i(187777);let o=function(){function e(e,t,n){this.alreadyEmbedded=!1,this.ref=e,this.doc=t,this.embedder=n}return e.prototype.embed=function(){return(0,t.__awaiter)(this,void 0,void 0,function(){var e,o,s,l,u,c,d;return(0,t.__generator)(this,function(t){switch(t.label){case 0:if(this.alreadyEmbedded)return[3,2];return o=(e=this.doc).catalog,s=e.context,[4,this.embedder.embedIntoContext(this.doc.context,this.ref)];case 1:l=t.sent(),o.has(n.PDFName.of("Names"))||o.set(n.PDFName.of("Names"),s.obj({})),(u=o.lookup(n.PDFName.of("Names"),i.PDFDict)).has(n.PDFName.of("JavaScript"))||u.set(n.PDFName.of("JavaScript"),s.obj({})),(c=u.lookup(n.PDFName.of("JavaScript"),i.PDFDict)).has(n.PDFName.of("Names"))||c.set(n.PDFName.of("Names"),s.obj([])),(d=c.lookup(n.PDFName.of("Names"),r.PDFArray)).push(a.PDFHexString.fromText(this.embedder.scriptName)),d.push(l),this.alreadyEmbedded=!0,t.label=2;case 2:return[2]}})})},e.of=function(t,n,r){return new e(t,n,r)},e}()},58872:e=>{"use strict";e.s({default:()=>r});var t=e.i(436255),n=e.i(934271);let r=function(){function e(e,t){this.script=e,this.scriptName=t}return e.for=function(t,n){return new e(t,n)},e.prototype.embedIntoContext=function(e,r){return(0,t.__awaiter)(this,void 0,void 0,function(){var i;return(0,t.__generator)(this,function(t){return(i=e.obj({Type:"Action",S:"JavaScript",JS:n.default.fromText(this.script)}),r)?(e.assign(r,i),[2,r]):[2,e.register(i)]})})},e}()},905919:e=>{"use strict";e.s({default:()=>z});var t=e.i(436255),n=e.i(137637),r=e.i(920245),i=e.i(761660),a=e.i(55981),o=e.i(653191),s=e.i(892177),l=e.i(359878);e.i(35849);var u=e.i(621080),c=e.i(114689),d=e.i(120508),h=e.i(143682),p=e.i(299806),f=e.i(348712),m=e.i(544481),g=e.i(187777),y=e.i(349043),b=e.i(384162),x=e.i(142942),w=e.i(260885),k=e.i(528567),S=e.i(891795),_=e.i(376075),C=e.i(638625),A=e.i(762058),E=e.i(774065),T=e.i(887268),M=e.i(34906);e.i(465248);var I=e.i(540265),N=e.i(264900),D=e.i(411691),P=e.i(568948),R=e.i(482485),O=e.i(969951),j=e.i(979588),F=e.i(566045),L=e.i(58872);let z=function(){function e(e,t,r){var i=this;if(this.defaultWordBreaks=[" "],this.computePages=function(){var e=[];return i.catalog.Pages().traverse(function(t,n){if(t instanceof w.PDFPageLeaf){var r=i.pageMap.get(t);r||(r=o.default.of(t,n,i),i.pageMap.set(t,r)),e.push(r)}}),e},this.getOrCreateForm=function(){var e=i.catalog.getOrCreateAcroForm();return s.default.of(e,i)},(0,I.assertIs)(e,"context",[[f.PDFContext,"PDFContext"]]),(0,I.assertIs)(t,"ignoreEncryption",["boolean"]),this.context=e,this.catalog=e.lookup(e.trailerInfo.Root),this.isEncrypted=!!e.lookup(e.trailerInfo.Encrypt),this.pageCache=N.Cache.populatedBy(this.computePages),this.pageMap=new Map,this.formCache=N.Cache.populatedBy(this.getOrCreateForm),this.fonts=[],this.images=[],this.embeddedPages=[],this.embeddedFiles=[],this.javaScripts=[],!t&&this.isEncrypted)throw new n.EncryptedPDFError;r&&this.updateInfoDict()}return e.load=function(n,r){return void 0===r&&(r={}),(0,t.__awaiter)(this,void 0,void 0,function(){var i,a,o,s,l,u,c,d,h,p,f;return(0,t.__generator)(this,function(t){switch(t.label){case 0:return a=void 0!==(i=r.ignoreEncryption)&&i,s=void 0===(o=r.parseSpeed)?M.ParseSpeeds.Slow:o,u=void 0!==(l=r.throwOnInvalidObject)&&l,d=void 0===(c=r.updateMetadata)||c,p=void 0!==(h=r.capNumbers)&&h,(0,I.assertIs)(n,"pdf",["string",Uint8Array,ArrayBuffer]),(0,I.assertIs)(a,"ignoreEncryption",["boolean"]),(0,I.assertIs)(s,"parseSpeed",["number"]),(0,I.assertIs)(u,"throwOnInvalidObject",["boolean"]),f=(0,D.toUint8Array)(n),[4,S.PDFParser.forBytesWithOptions(f,s,u,p).parseDocument()];case 1:return[2,new e(t.sent(),a,d)]}})})},e.create=function(n){return void 0===n&&(n={}),(0,t.__awaiter)(this,void 0,void 0,function(){var r,i,a,o,s,l;return(0,t.__generator)(this,function(t){return i=void 0===(r=n.updateMetadata)||r,a=f.PDFContext.create(),o=k.PDFPageTree.withContext(a),s=a.register(o),l=p.PDFCatalog.withContextAndPages(a,s),a.trailerInfo.Root=a.register(l),[2,new e(a,!1,i)]})})},e.prototype.registerFontkit=function(e){this.fontkit=e},e.prototype.getForm=function(){var e=this.formCache.access();return e.hasXFA()&&(console.warn("Removing XFA form data as pdf-lib does not support reading or writing XFA"),e.deleteXFA()),e},e.prototype.getTitle=function(){var e=this.getInfoDict().lookup(y.PDFName.Title);if(e)return B(e),e.decodeText()},e.prototype.getAuthor=function(){var e=this.getInfoDict().lookup(y.PDFName.Author);if(e)return B(e),e.decodeText()},e.prototype.getSubject=function(){var e=this.getInfoDict().lookup(y.PDFName.Subject);if(e)return B(e),e.decodeText()},e.prototype.getKeywords=function(){var e=this.getInfoDict().lookup(y.PDFName.Keywords);if(e)return B(e),e.decodeText()},e.prototype.getCreator=function(){var e=this.getInfoDict().lookup(y.PDFName.Creator);if(e)return B(e),e.decodeText()},e.prototype.getProducer=function(){var e=this.getInfoDict().lookup(y.PDFName.Producer);if(e)return B(e),e.decodeText()},e.prototype.getCreationDate=function(){var e=this.getInfoDict().lookup(y.PDFName.CreationDate);if(e)return B(e),e.decodeDate()},e.prototype.getModificationDate=function(){var e=this.getInfoDict().lookup(y.PDFName.ModDate);if(e)return B(e),e.decodeDate()},e.prototype.setTitle=function(e,t){(0,I.assertIs)(e,"title",["string"]);var n=y.PDFName.of("Title");this.getInfoDict().set(n,g.PDFHexString.fromText(e)),(null==t?void 0:t.showInWindowTitleBar)&&this.catalog.getOrCreateViewerPreferences().setDisplayDocTitle(!0)},e.prototype.setAuthor=function(e){(0,I.assertIs)(e,"author",["string"]);var t=y.PDFName.of("Author");this.getInfoDict().set(t,g.PDFHexString.fromText(e))},e.prototype.setSubject=function(e){(0,I.assertIs)(e,"author",["string"]);var t=y.PDFName.of("Subject");this.getInfoDict().set(t,g.PDFHexString.fromText(e))},e.prototype.setKeywords=function(e){(0,I.assertIs)(e,"keywords",[Array]);var t=y.PDFName.of("Keywords");this.getInfoDict().set(t,g.PDFHexString.fromText(e.join(" ")))},e.prototype.setCreator=function(e){(0,I.assertIs)(e,"creator",["string"]);var t=y.PDFName.of("Creator");this.getInfoDict().set(t,g.PDFHexString.fromText(e))},e.prototype.setProducer=function(e){(0,I.assertIs)(e,"creator",["string"]);var t=y.PDFName.of("Producer");this.getInfoDict().set(t,g.PDFHexString.fromText(e))},e.prototype.setLanguage=function(e){(0,I.assertIs)(e,"language",["string"]);var t=y.PDFName.of("Lang");this.catalog.set(t,C.PDFString.of(e))},e.prototype.setCreationDate=function(e){(0,I.assertIs)(e,"creationDate",[[Date,"Date"]]);var t=y.PDFName.of("CreationDate");this.getInfoDict().set(t,C.PDFString.fromDate(e))},e.prototype.setModificationDate=function(e){(0,I.assertIs)(e,"modificationDate",[[Date,"Date"]]);var t=y.PDFName.of("ModDate");this.getInfoDict().set(t,C.PDFString.fromDate(e))},e.prototype.getPageCount=function(){return void 0===this.pageCount&&(this.pageCount=this.getPages().length),this.pageCount},e.prototype.getPages=function(){return this.pageCache.access()},e.prototype.getPage=function(e){var t=this.getPages();return(0,I.assertRange)(e,"index",0,t.length-1),t[e]},e.prototype.getPageIndices=function(){return(0,D.range)(0,this.getPageCount())},e.prototype.removePage=function(e){var t=this.getPageCount();if(0===this.pageCount)throw new n.RemovePageFromEmptyDocumentError;(0,I.assertRange)(e,"index",0,t-1),this.catalog.removeLeafNode(e),this.pageCount=t-1},e.prototype.addPage=function(e){return(0,I.assertIs)(e,"page",["undefined",[o.default,"PDFPage"],Array]),this.insertPage(this.getPageCount(),e)},e.prototype.insertPage=function(e,t){var r=this.getPageCount();if((0,I.assertRange)(e,"index",0,r),(0,I.assertIs)(t,"page",["undefined",[o.default,"PDFPage"],Array]),!t||Array.isArray(t)){var i=Array.isArray(t)?t:l.PageSizes.A4;(t=o.default.create(this)).setSize.apply(t,i)}else if(t.doc!==this)throw new n.ForeignPageError;var a=this.catalog.insertLeafNode(t.ref,e);return t.node.setParent(a),this.pageMap.set(t.node,t),this.pageCache.invalidate(),this.pageCount=r+1,t},e.prototype.copyPages=function(n,r){return(0,t.__awaiter)(this,void 0,void 0,function(){var i,a,s,l,u,c,d,h;return(0,t.__generator)(this,function(t){switch(t.label){case 0:return(0,I.assertIs)(n,"srcDoc",[[e,"PDFDocument"]]),(0,I.assertIs)(r,"indices",[Array]),[4,n.flush()];case 1:for(t.sent(),i=b.PDFObjectCopier.for(n.context,this.context),a=n.getPages(),s=Array(r.length),l=0,u=r.length;l<u;l++)c=a[r[l]],d=i.copy(c.node),h=this.context.register(d),s[l]=o.default.of(d,h,this);return[2,s]}})})},e.prototype.copy=function(){return(0,t.__awaiter)(this,void 0,void 0,function(){var n,r,i,a;return(0,t.__generator)(this,function(t){switch(t.label){case 0:return[4,e.create()];case 1:return[4,(n=t.sent()).copyPages(this,this.getPageIndices())];case 2:for(i=0,a=(r=t.sent()).length;i<a;i++)n.addPage(r[i]);return void 0!==this.getAuthor()&&n.setAuthor(this.getAuthor()),void 0!==this.getCreationDate()&&n.setCreationDate(this.getCreationDate()),void 0!==this.getCreator()&&n.setCreator(this.getCreator()),void 0!==this.getModificationDate()&&n.setModificationDate(this.getModificationDate()),void 0!==this.getProducer()&&n.setProducer(this.getProducer()),void 0!==this.getSubject()&&n.setSubject(this.getSubject()),void 0!==this.getTitle()&&n.setTitle(this.getTitle()),n.defaultWordBreaks=this.defaultWordBreaks,[2,n]}})})},e.prototype.addJavaScript=function(e,t){(0,I.assertIs)(e,"name",["string"]),(0,I.assertIs)(t,"script",["string"]);var n=L.default.for(t,e),r=this.context.nextRef(),i=F.default.of(r,this,n);this.javaScripts.push(i)},e.prototype.attach=function(e,n,r){return void 0===r&&(r={}),(0,t.__awaiter)(this,void 0,void 0,function(){var i,a,o,s;return(0,t.__generator)(this,function(t){return(0,I.assertIs)(e,"attachment",["string",Uint8Array,ArrayBuffer]),(0,I.assertIs)(n,"name",["string"]),(0,I.assertOrUndefined)(r.mimeType,"mimeType",["string"]),(0,I.assertOrUndefined)(r.description,"description",["string"]),(0,I.assertOrUndefined)(r.creationDate,"options.creationDate",[Date]),(0,I.assertOrUndefined)(r.modificationDate,"options.modificationDate",[Date]),(0,I.assertIsOneOfOrUndefined)(r.afRelationship,"options.afRelationship",O.AFRelationship),i=(0,D.toUint8Array)(e),a=O.default.for(i,n,r),o=this.context.nextRef(),s=j.default.of(o,this,a),this.embeddedFiles.push(s),[2]})})},e.prototype.embedFont=function(e,n){return void 0===n&&(n={}),(0,t.__awaiter)(this,void 0,void 0,function(){var r,a,o,s,l,d,h,p,f,m;return(0,t.__generator)(this,function(t){switch(t.label){case 0:if(a=void 0!==(r=n.subset)&&r,o=n.customName,s=n.features,(0,I.assertIs)(e,"font",["string",Uint8Array,ArrayBuffer]),(0,I.assertIs)(a,"subset",["boolean"]),!(0,R.isStandardFont)(e))return[3,1];return l=T.StandardFontEmbedder.for(e,o),[3,7];case 1:if(!(0,D.canBeConvertedToUint8Array)(e))return[3,6];if(d=(0,D.toUint8Array)(e),h=this.assertFontkit(),!a)return[3,3];return[4,c.CustomFontSubsetEmbedder.for(h,d,o,s)];case 2:return p=t.sent(),[3,5];case 3:return[4,u.CustomFontEmbedder.for(h,d,o,s)];case 4:p=t.sent(),t.label=5;case 5:return l=p,[3,7];case 6:throw TypeError("`font` must be one of `StandardFonts | string | Uint8Array | ArrayBuffer`");case 7:return f=this.context.nextRef(),m=i.default.of(f,this,l),this.fonts.push(m),[2,m]}})})},e.prototype.embedStandardFont=function(e,t){if((0,I.assertIs)(e,"font",["string"]),!(0,R.isStandardFont)(e))throw TypeError("`font` must be one of type `StandardFonts`");var n=T.StandardFontEmbedder.for(e,t),r=this.context.nextRef(),a=i.default.of(r,this,n);return this.fonts.push(a),a},e.prototype.embedJpg=function(e){return(0,t.__awaiter)(this,void 0,void 0,function(){var n,r,i,o;return(0,t.__generator)(this,function(t){switch(t.label){case 0:return(0,I.assertIs)(e,"jpg",["string",Uint8Array,ArrayBuffer]),n=(0,D.toUint8Array)(e),[4,d.JpegEmbedder.for(n)];case 1:return r=t.sent(),i=this.context.nextRef(),o=a.default.of(i,this,r),this.images.push(o),[2,o]}})})},e.prototype.embedPng=function(e){return(0,t.__awaiter)(this,void 0,void 0,function(){var n,r,i,o;return(0,t.__generator)(this,function(t){switch(t.label){case 0:return(0,I.assertIs)(e,"png",["string",Uint8Array,ArrayBuffer]),n=(0,D.toUint8Array)(e),[4,E.PngEmbedder.for(n)];case 1:return r=t.sent(),i=this.context.nextRef(),o=a.default.of(i,this,r),this.images.push(o),[2,o]}})})},e.prototype.embedPdf=function(n,r){return void 0===r&&(r=[0]),(0,t.__awaiter)(this,void 0,void 0,function(){var i,a,o;return(0,t.__generator)(this,function(t){switch(t.label){case 0:if((0,I.assertIs)(n,"pdf",["string",Uint8Array,ArrayBuffer,[e,"PDFDocument"]]),(0,I.assertIs)(r,"indices",[Array]),!(n instanceof e))return[3,1];return a=n,[3,3];case 1:return[4,e.load(n)];case 2:a=t.sent(),t.label=3;case 3:return i=a,o=(0,D.pluckIndices)(i.getPages(),r),[2,this.embedPages(o)]}})})},e.prototype.embedPage=function(e,n,r){return(0,t.__awaiter)(this,void 0,void 0,function(){return(0,t.__generator)(this,function(t){switch(t.label){case 0:return(0,I.assertIs)(e,"page",[[o.default,"PDFPage"]]),[4,this.embedPages([e],[n],[r])];case 1:return[2,t.sent()[0]]}})})},e.prototype.embedPages=function(e,n,i){return void 0===n&&(n=[]),void 0===i&&(i=[]),(0,t.__awaiter)(this,void 0,void 0,function(){var a,o,s,l,u,c,d,p,f,m,g,y,w;return(0,t.__generator)(this,function(t){switch(t.label){case 0:if(0===e.length)return[2,[]];for(a=0,o=e.length-1;a<o;a++)if(s=e[a],l=e[a+1],s.node.context!==l.node.context)throw new h.PageEmbeddingMismatchedContextError;c=(u=e[0].node.context)===this.context?function(e){return e}:b.PDFObjectCopier.for(u,this.context).copy,d=Array(e.length),a=0,o=e.length,t.label=1;case 1:if(!(a<o))return[3,4];return p=c(e[a].node),f=n[a],m=i[a],[4,x.PDFPageEmbedder.for(p,f,m)];case 2:g=t.sent(),y=this.context.nextRef(),d[a]=r.default.of(y,this,g),t.label=3;case 3:return a++,[3,1];case 4:return(w=this.embeddedPages).push.apply(w,d),[2,d]}})})},e.prototype.flush=function(){return(0,t.__awaiter)(this,void 0,void 0,function(){return(0,t.__generator)(this,function(e){switch(e.label){case 0:return[4,this.embedAll(this.fonts)];case 1:return e.sent(),[4,this.embedAll(this.images)];case 2:return e.sent(),[4,this.embedAll(this.embeddedPages)];case 3:return e.sent(),[4,this.embedAll(this.embeddedFiles)];case 4:return e.sent(),[4,this.embedAll(this.javaScripts)];case 5:return e.sent(),[2]}})})},e.prototype.save=function(e){return void 0===e&&(e={}),(0,t.__awaiter)(this,void 0,void 0,function(){var n,r,i,a,o,s,l,u,c;return(0,t.__generator)(this,function(t){switch(t.label){case 0:return r=void 0===(n=e.useObjectStreams)||n,a=void 0===(i=e.addDefaultPage)||i,s=void 0===(o=e.objectsPerTick)?50:o,u=void 0===(l=e.updateFieldAppearances)||l,(0,I.assertIs)(r,"useObjectStreams",["boolean"]),(0,I.assertIs)(a,"addDefaultPage",["boolean"]),(0,I.assertIs)(s,"objectsPerTick",["number"]),(0,I.assertIs)(u,"updateFieldAppearances",["boolean"]),a&&0===this.getPageCount()&&this.addPage(),u&&(c=this.formCache.getValue())&&c.updateFieldAppearances(),[4,this.flush()];case 1:return t.sent(),[2,(r?_.PDFStreamWriter:A.PDFWriter).forContext(this.context,s).serializeToBuffer()]}})})},e.prototype.saveAsBase64=function(e){return void 0===e&&(e={}),(0,t.__awaiter)(this,void 0,void 0,function(){var n,r,i,a,o;return(0,t.__generator)(this,function(s){switch(s.label){case 0:return r=void 0!==(n=e.dataUri)&&n,i=(0,t.__rest)(e,["dataUri"]),(0,I.assertIs)(r,"dataUri",["boolean"]),[4,this.save(i)];case 1:return a=s.sent(),o=(0,P.encodeToBase64)(a),[2,r?"data:application/pdf;base64,"+o:o]}})})},e.prototype.findPageForAnnotationRef=function(e){for(var t=this.getPages(),n=0,r=t.length;n<r;n++){var i=t[n],a=i.node.Annots();if((null==a?void 0:a.indexOf(e))!==void 0)return i}},e.prototype.embedAll=function(e){return(0,t.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,t.__generator)(this,function(t){switch(t.label){case 0:n=0,r=e.length,t.label=1;case 1:if(!(n<r))return[3,4];return[4,e[n].embed()];case 2:t.sent(),t.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},e.prototype.updateInfoDict=function(){var e="pdf-lib (https://github.com/Hopding/pdf-lib)",t=new Date,n=this.getInfoDict();this.setProducer(e),this.setModificationDate(t),n.get(y.PDFName.of("Creator"))||this.setCreator(e),n.get(y.PDFName.of("CreationDate"))||this.setCreationDate(t)},e.prototype.getInfoDict=function(){var e=this.context.lookup(this.context.trailerInfo.Info);if(e instanceof m.PDFDict)return e;var t=this.context.obj({});return this.context.trailerInfo.Info=this.context.register(t),t},e.prototype.assertFontkit=function(){if(!this.fontkit)throw new n.FontkitNotRegisteredError;return this.fontkit},e}();function B(e){if(!(e instanceof g.PDFHexString)&&!(e instanceof C.PDFString))throw new h.UnexpectedObjectTypeError([g.PDFHexString,C.PDFString],e)}},689720:e=>{"use strict";var t;e.s({BlendMode:()=>t}),function(e){e.Normal="Normal",e.Multiply="Multiply",e.Screen="Screen",e.Overlay="Overlay",e.Darken="Darken",e.Lighten="Lighten",e.ColorDodge="ColorDodge",e.ColorBurn="ColorBurn",e.HardLight="HardLight",e.SoftLight="SoftLight",e.Difference="Difference",e.Exclusion="Exclusion"}(t||(t={}))},519097:e=>{"use strict";e.s({PDFContentStream:()=>t.default});var t=e.i(637971)},653191:e=>{"use strict";e.s({default:()=>S});var t=e.i(436255),n=e.i(828226),r=e.i(453631),i=e.i(283732),a=e.i(905919),o=e.i(920245),s=e.i(761660),l=e.i(55981),u=e.i(689720),c=e.i(893475),d=e.i(838328);e.i(35849);var h=e.i(519097),p=e.i(349043),f=e.i(152126),m=e.i(260885),g=e.i(214466),y=e.i(544481),b=e.i(512934);e.i(465248);var x=e.i(540265),w=e.i(261205),k=e.i(482485);let S=function(){function e(e,t,r){this.fontSize=24,this.fontColor=(0,n.rgb)(0,0,0),this.lineHeight=24,this.x=0,this.y=0,(0,x.assertIs)(e,"leafNode",[[m.PDFPageLeaf,"PDFPageLeaf"]]),(0,x.assertIs)(t,"ref",[[g.PDFRef,"PDFRef"]]),(0,x.assertIs)(r,"doc",[[a.default,"PDFDocument"]]),this.node=e,this.ref=t,this.doc=r}return e.prototype.setRotation=function(e){var t=(0,c.toDegrees)(e);(0,x.assertMultiple)(t,"degreesAngle",90),this.node.set(p.PDFName.of("Rotate"),this.doc.context.obj(t))},e.prototype.getRotation=function(){var e=this.node.Rotate();return(0,c.degrees)(e?e.asNumber():0)},e.prototype.setSize=function(e,t){(0,x.assertIs)(e,"width",["number"]),(0,x.assertIs)(t,"height",["number"]);var n=this.getMediaBox();this.setMediaBox(n.x,n.y,e,t);var r=this.getCropBox(),i=this.getBleedBox(),a=this.getTrimBox(),o=this.getArtBox(),s=this.node.CropBox(),l=this.node.BleedBox(),u=this.node.TrimBox(),c=this.node.ArtBox();s&&(0,k.rectanglesAreEqual)(r,n)&&this.setCropBox(n.x,n.y,e,t),l&&(0,k.rectanglesAreEqual)(i,n)&&this.setBleedBox(n.x,n.y,e,t),u&&(0,k.rectanglesAreEqual)(a,n)&&this.setTrimBox(n.x,n.y,e,t),c&&(0,k.rectanglesAreEqual)(o,n)&&this.setArtBox(n.x,n.y,e,t)},e.prototype.setWidth=function(e){(0,x.assertIs)(e,"width",["number"]),this.setSize(e,this.getSize().height)},e.prototype.setHeight=function(e){(0,x.assertIs)(e,"height",["number"]),this.setSize(this.getSize().width,e)},e.prototype.setMediaBox=function(e,t,n,r){(0,x.assertIs)(e,"x",["number"]),(0,x.assertIs)(t,"y",["number"]),(0,x.assertIs)(n,"width",["number"]),(0,x.assertIs)(r,"height",["number"]);var i=this.doc.context.obj([e,t,e+n,t+r]);this.node.set(p.PDFName.MediaBox,i)},e.prototype.setCropBox=function(e,t,n,r){(0,x.assertIs)(e,"x",["number"]),(0,x.assertIs)(t,"y",["number"]),(0,x.assertIs)(n,"width",["number"]),(0,x.assertIs)(r,"height",["number"]);var i=this.doc.context.obj([e,t,e+n,t+r]);this.node.set(p.PDFName.CropBox,i)},e.prototype.setBleedBox=function(e,t,n,r){(0,x.assertIs)(e,"x",["number"]),(0,x.assertIs)(t,"y",["number"]),(0,x.assertIs)(n,"width",["number"]),(0,x.assertIs)(r,"height",["number"]);var i=this.doc.context.obj([e,t,e+n,t+r]);this.node.set(p.PDFName.BleedBox,i)},e.prototype.setTrimBox=function(e,t,n,r){(0,x.assertIs)(e,"x",["number"]),(0,x.assertIs)(t,"y",["number"]),(0,x.assertIs)(n,"width",["number"]),(0,x.assertIs)(r,"height",["number"]);var i=this.doc.context.obj([e,t,e+n,t+r]);this.node.set(p.PDFName.TrimBox,i)},e.prototype.setArtBox=function(e,t,n,r){(0,x.assertIs)(e,"x",["number"]),(0,x.assertIs)(t,"y",["number"]),(0,x.assertIs)(n,"width",["number"]),(0,x.assertIs)(r,"height",["number"]);var i=this.doc.context.obj([e,t,e+n,t+r]);this.node.set(p.PDFName.ArtBox,i)},e.prototype.getSize=function(){var e=this.getMediaBox();return{width:e.width,height:e.height}},e.prototype.getWidth=function(){return this.getSize().width},e.prototype.getHeight=function(){return this.getSize().height},e.prototype.getMediaBox=function(){return this.node.MediaBox().asRectangle()},e.prototype.getCropBox=function(){var e,t=this.node.CropBox();return null!=(e=null==t?void 0:t.asRectangle())?e:this.getMediaBox()},e.prototype.getBleedBox=function(){var e,t=this.node.BleedBox();return null!=(e=null==t?void 0:t.asRectangle())?e:this.getCropBox()},e.prototype.getTrimBox=function(){var e,t=this.node.TrimBox();return null!=(e=null==t?void 0:t.asRectangle())?e:this.getCropBox()},e.prototype.getArtBox=function(){var e,t=this.node.ArtBox();return null!=(e=null==t?void 0:t.asRectangle())?e:this.getCropBox()},e.prototype.translateContent=function(e,t){(0,x.assertIs)(e,"x",["number"]),(0,x.assertIs)(t,"y",["number"]),this.node.normalize(),this.getContentStream();var n=this.createContentStream((0,i.pushGraphicsState)(),(0,i.translate)(e,t)),r=this.doc.context.register(n),a=this.createContentStream((0,i.popGraphicsState)()),o=this.doc.context.register(a);this.node.wrapContentStreams(r,o)},e.prototype.scale=function(e,t){(0,x.assertIs)(e,"x",["number"]),(0,x.assertIs)(t,"y",["number"]),this.setSize(this.getWidth()*e,this.getHeight()*t),this.scaleContent(e,t),this.scaleAnnotations(e,t)},e.prototype.scaleContent=function(e,t){(0,x.assertIs)(e,"x",["number"]),(0,x.assertIs)(t,"y",["number"]),this.node.normalize(),this.getContentStream();var n=this.createContentStream((0,i.pushGraphicsState)(),(0,i.scale)(e,t)),r=this.doc.context.register(n),a=this.createContentStream((0,i.popGraphicsState)()),o=this.doc.context.register(a);this.node.wrapContentStreams(r,o)},e.prototype.scaleAnnotations=function(e,t){(0,x.assertIs)(e,"x",["number"]),(0,x.assertIs)(t,"y",["number"]);var n=this.node.Annots();if(n)for(var r=0;r<n.size();r++){var i=n.lookup(r);i instanceof y.PDFDict&&this.scaleAnnot(i,e,t)}},e.prototype.resetPosition=function(){this.getContentStream(!1),this.x=0,this.y=0},e.prototype.setFont=function(e){(0,x.assertIs)(e,"font",[[s.default,"PDFFont"]]),this.font=e,this.fontKey=this.node.newFontDictionary(this.font.name,this.font.ref)},e.prototype.setFontSize=function(e){(0,x.assertIs)(e,"fontSize",["number"]),this.fontSize=e},e.prototype.setFontColor=function(e){(0,x.assertIs)(e,"fontColor",[[Object,"Color"]]),this.fontColor=e},e.prototype.setLineHeight=function(e){(0,x.assertIs)(e,"lineHeight",["number"]),this.lineHeight=e},e.prototype.getPosition=function(){return{x:this.x,y:this.y}},e.prototype.getX=function(){return this.x},e.prototype.getY=function(){return this.y},e.prototype.moveTo=function(e,t){(0,x.assertIs)(e,"x",["number"]),(0,x.assertIs)(t,"y",["number"]),this.x=e,this.y=t},e.prototype.moveDown=function(e){(0,x.assertIs)(e,"yDecrease",["number"]),this.y-=e},e.prototype.moveUp=function(e){(0,x.assertIs)(e,"yIncrease",["number"]),this.y+=e},e.prototype.moveLeft=function(e){(0,x.assertIs)(e,"xDecrease",["number"]),this.x-=e},e.prototype.moveRight=function(e){(0,x.assertIs)(e,"xIncrease",["number"]),this.x+=e},e.prototype.pushOperators=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];(0,x.assertEachIs)(e,"operator",[[f.PDFOperator,"PDFOperator"]]);var n=this.getContentStream();n.push.apply(n,e)},e.prototype.drawText=function(e,t){void 0===t&&(t={}),(0,x.assertIs)(e,"text",["string"]),(0,x.assertOrUndefined)(t.color,"options.color",[[Object,"Color"]]),(0,x.assertRangeOrUndefined)(t.opacity,"opacity.opacity",0,1),(0,x.assertOrUndefined)(t.font,"options.font",[[s.default,"PDFFont"]]),(0,x.assertOrUndefined)(t.size,"options.size",["number"]),(0,x.assertOrUndefined)(t.rotate,"options.rotate",[[Object,"Rotation"]]),(0,x.assertOrUndefined)(t.xSkew,"options.xSkew",[[Object,"Rotation"]]),(0,x.assertOrUndefined)(t.ySkew,"options.ySkew",[[Object,"Rotation"]]),(0,x.assertOrUndefined)(t.x,"options.x",["number"]),(0,x.assertOrUndefined)(t.y,"options.y",["number"]),(0,x.assertOrUndefined)(t.lineHeight,"options.lineHeight",["number"]),(0,x.assertOrUndefined)(t.maxWidth,"options.maxWidth",["number"]),(0,x.assertOrUndefined)(t.wordBreaks,"options.wordBreaks",[Array]),(0,x.assertIsOneOfOrUndefined)(t.blendMode,"options.blendMode",u.BlendMode);for(var n,i,a,o,l,d,h,p=this.setOrEmbedFont(t.font),f=p.oldFont,m=p.newFont,g=p.newFontKey,y=t.size||this.fontSize,b=t.wordBreaks||this.doc.defaultWordBreaks,k=void 0===t.maxWidth?(0,w.lineSplit)((0,w.cleanText)(e)):(0,w.breakTextIntoLines)(e,b,t.maxWidth,function(e){return m.widthOfTextAtSize(e,y)}),S=Array(k.length),_=0,C=k.length;_<C;_++)S[_]=m.encodeText(k[_]);var A=this.maybeEmbedGraphicsState({opacity:t.opacity,blendMode:t.blendMode}),E=this.getContentStream();E.push.apply(E,(0,r.drawLinesOfText)(S,{color:null!=(n=t.color)?n:this.fontColor,font:g,size:y,rotate:null!=(i=t.rotate)?i:(0,c.degrees)(0),xSkew:null!=(a=t.xSkew)?a:(0,c.degrees)(0),ySkew:null!=(o=t.ySkew)?o:(0,c.degrees)(0),x:null!=(l=t.x)?l:this.x,y:null!=(d=t.y)?d:this.y,lineHeight:null!=(h=t.lineHeight)?h:this.lineHeight,graphicsState:A})),t.font&&(f?this.setFont(f):this.resetFont())},e.prototype.drawImage=function(e,t){void 0===t&&(t={}),(0,x.assertIs)(e,"image",[[l.default,"PDFImage"]]),(0,x.assertOrUndefined)(t.x,"options.x",["number"]),(0,x.assertOrUndefined)(t.y,"options.y",["number"]),(0,x.assertOrUndefined)(t.width,"options.width",["number"]),(0,x.assertOrUndefined)(t.height,"options.height",["number"]),(0,x.assertOrUndefined)(t.rotate,"options.rotate",[[Object,"Rotation"]]),(0,x.assertOrUndefined)(t.xSkew,"options.xSkew",[[Object,"Rotation"]]),(0,x.assertOrUndefined)(t.ySkew,"options.ySkew",[[Object,"Rotation"]]),(0,x.assertRangeOrUndefined)(t.opacity,"opacity.opacity",0,1),(0,x.assertIsOneOfOrUndefined)(t.blendMode,"options.blendMode",u.BlendMode);var n,i,a,o,s,d,h,p=this.node.newXObject("Image",e.ref),f=this.maybeEmbedGraphicsState({opacity:t.opacity,blendMode:t.blendMode}),m=this.getContentStream();m.push.apply(m,(0,r.drawImage)(p,{x:null!=(n=t.x)?n:this.x,y:null!=(i=t.y)?i:this.y,width:null!=(a=t.width)?a:e.size().width,height:null!=(o=t.height)?o:e.size().height,rotate:null!=(s=t.rotate)?s:(0,c.degrees)(0),xSkew:null!=(d=t.xSkew)?d:(0,c.degrees)(0),ySkew:null!=(h=t.ySkew)?h:(0,c.degrees)(0),graphicsState:f}))},e.prototype.drawPage=function(e,t){void 0===t&&(t={}),(0,x.assertIs)(e,"embeddedPage",[[o.default,"PDFEmbeddedPage"]]),(0,x.assertOrUndefined)(t.x,"options.x",["number"]),(0,x.assertOrUndefined)(t.y,"options.y",["number"]),(0,x.assertOrUndefined)(t.xScale,"options.xScale",["number"]),(0,x.assertOrUndefined)(t.yScale,"options.yScale",["number"]),(0,x.assertOrUndefined)(t.width,"options.width",["number"]),(0,x.assertOrUndefined)(t.height,"options.height",["number"]),(0,x.assertOrUndefined)(t.rotate,"options.rotate",[[Object,"Rotation"]]),(0,x.assertOrUndefined)(t.xSkew,"options.xSkew",[[Object,"Rotation"]]),(0,x.assertOrUndefined)(t.ySkew,"options.ySkew",[[Object,"Rotation"]]),(0,x.assertRangeOrUndefined)(t.opacity,"opacity.opacity",0,1),(0,x.assertIsOneOfOrUndefined)(t.blendMode,"options.blendMode",u.BlendMode);var n,i,a,s,l,d=this.node.newXObject("EmbeddedPdfPage",e.ref),h=this.maybeEmbedGraphicsState({opacity:t.opacity,blendMode:t.blendMode}),p=void 0!==t.width?t.width/e.width:void 0!==t.xScale?t.xScale:1,f=void 0!==t.height?t.height/e.height:void 0!==t.yScale?t.yScale:1,m=this.getContentStream();m.push.apply(m,(0,r.drawPage)(d,{x:null!=(n=t.x)?n:this.x,y:null!=(i=t.y)?i:this.y,xScale:p,yScale:f,rotate:null!=(a=t.rotate)?a:(0,c.degrees)(0),xSkew:null!=(s=t.xSkew)?s:(0,c.degrees)(0),ySkew:null!=(l=t.ySkew)?l:(0,c.degrees)(0),graphicsState:h}))},e.prototype.drawSvgPath=function(e,t){void 0===t&&(t={}),(0,x.assertIs)(e,"path",["string"]),(0,x.assertOrUndefined)(t.x,"options.x",["number"]),(0,x.assertOrUndefined)(t.y,"options.y",["number"]),(0,x.assertOrUndefined)(t.scale,"options.scale",["number"]),(0,x.assertOrUndefined)(t.rotate,"options.rotate",[[Object,"Rotation"]]),(0,x.assertOrUndefined)(t.borderWidth,"options.borderWidth",["number"]),(0,x.assertOrUndefined)(t.color,"options.color",[[Object,"Color"]]),(0,x.assertRangeOrUndefined)(t.opacity,"opacity.opacity",0,1),(0,x.assertOrUndefined)(t.borderColor,"options.borderColor",[[Object,"Color"]]),(0,x.assertOrUndefined)(t.borderDashArray,"options.borderDashArray",[Array]),(0,x.assertOrUndefined)(t.borderDashPhase,"options.borderDashPhase",["number"]),(0,x.assertIsOneOfOrUndefined)(t.borderLineCap,"options.borderLineCap",i.LineCapStyle),(0,x.assertRangeOrUndefined)(t.borderOpacity,"options.borderOpacity",0,1),(0,x.assertIsOneOfOrUndefined)(t.blendMode,"options.blendMode",u.BlendMode);var a,o,s,l,d,h,p,f,m,g=this.maybeEmbedGraphicsState({opacity:t.opacity,borderOpacity:t.borderOpacity,blendMode:t.blendMode});"color"in t||"borderColor"in t||(t.borderColor=(0,n.rgb)(0,0,0));var y=this.getContentStream();y.push.apply(y,(0,r.drawSvgPath)(e,{x:null!=(a=t.x)?a:this.x,y:null!=(o=t.y)?o:this.y,scale:t.scale,rotate:null!=(s=t.rotate)?s:(0,c.degrees)(0),color:null!=(l=t.color)?l:void 0,borderColor:null!=(d=t.borderColor)?d:void 0,borderWidth:null!=(h=t.borderWidth)?h:0,borderDashArray:null!=(p=t.borderDashArray)?p:void 0,borderDashPhase:null!=(f=t.borderDashPhase)?f:void 0,borderLineCap:null!=(m=t.borderLineCap)?m:void 0,graphicsState:g}))},e.prototype.drawLine=function(e){(0,x.assertIs)(e.start,"options.start",[[Object,"{ x: number, y: number }"]]),(0,x.assertIs)(e.end,"options.end",[[Object,"{ x: number, y: number }"]]),(0,x.assertIs)(e.start.x,"options.start.x",["number"]),(0,x.assertIs)(e.start.y,"options.start.y",["number"]),(0,x.assertIs)(e.end.x,"options.end.x",["number"]),(0,x.assertIs)(e.end.y,"options.end.y",["number"]),(0,x.assertOrUndefined)(e.thickness,"options.thickness",["number"]),(0,x.assertOrUndefined)(e.color,"options.color",[[Object,"Color"]]),(0,x.assertOrUndefined)(e.dashArray,"options.dashArray",[Array]),(0,x.assertOrUndefined)(e.dashPhase,"options.dashPhase",["number"]),(0,x.assertIsOneOfOrUndefined)(e.lineCap,"options.lineCap",i.LineCapStyle),(0,x.assertRangeOrUndefined)(e.opacity,"opacity.opacity",0,1),(0,x.assertIsOneOfOrUndefined)(e.blendMode,"options.blendMode",u.BlendMode);var t,a,o,s,l,c=this.maybeEmbedGraphicsState({borderOpacity:e.opacity,blendMode:e.blendMode});"color"in e||(e.color=(0,n.rgb)(0,0,0));var d=this.getContentStream();d.push.apply(d,(0,r.drawLine)({start:e.start,end:e.end,thickness:null!=(t=e.thickness)?t:1,color:null!=(a=e.color)?a:void 0,dashArray:null!=(o=e.dashArray)?o:void 0,dashPhase:null!=(s=e.dashPhase)?s:void 0,lineCap:null!=(l=e.lineCap)?l:void 0,graphicsState:c}))},e.prototype.drawRectangle=function(e){void 0===e&&(e={}),(0,x.assertOrUndefined)(e.x,"options.x",["number"]),(0,x.assertOrUndefined)(e.y,"options.y",["number"]),(0,x.assertOrUndefined)(e.width,"options.width",["number"]),(0,x.assertOrUndefined)(e.height,"options.height",["number"]),(0,x.assertOrUndefined)(e.rotate,"options.rotate",[[Object,"Rotation"]]),(0,x.assertOrUndefined)(e.xSkew,"options.xSkew",[[Object,"Rotation"]]),(0,x.assertOrUndefined)(e.ySkew,"options.ySkew",[[Object,"Rotation"]]),(0,x.assertOrUndefined)(e.borderWidth,"options.borderWidth",["number"]),(0,x.assertOrUndefined)(e.color,"options.color",[[Object,"Color"]]),(0,x.assertRangeOrUndefined)(e.opacity,"opacity.opacity",0,1),(0,x.assertOrUndefined)(e.borderColor,"options.borderColor",[[Object,"Color"]]),(0,x.assertOrUndefined)(e.borderDashArray,"options.borderDashArray",[Array]),(0,x.assertOrUndefined)(e.borderDashPhase,"options.borderDashPhase",["number"]),(0,x.assertIsOneOfOrUndefined)(e.borderLineCap,"options.borderLineCap",i.LineCapStyle),(0,x.assertRangeOrUndefined)(e.borderOpacity,"options.borderOpacity",0,1),(0,x.assertIsOneOfOrUndefined)(e.blendMode,"options.blendMode",u.BlendMode);var t,a,o,s,l,d,h,p,f,m,g,y,b,w=this.maybeEmbedGraphicsState({opacity:e.opacity,borderOpacity:e.borderOpacity,blendMode:e.blendMode});"color"in e||"borderColor"in e||(e.color=(0,n.rgb)(0,0,0));var k=this.getContentStream();k.push.apply(k,(0,r.drawRectangle)({x:null!=(t=e.x)?t:this.x,y:null!=(a=e.y)?a:this.y,width:null!=(o=e.width)?o:150,height:null!=(s=e.height)?s:100,rotate:null!=(l=e.rotate)?l:(0,c.degrees)(0),xSkew:null!=(d=e.xSkew)?d:(0,c.degrees)(0),ySkew:null!=(h=e.ySkew)?h:(0,c.degrees)(0),borderWidth:null!=(p=e.borderWidth)?p:0,color:null!=(f=e.color)?f:void 0,borderColor:null!=(m=e.borderColor)?m:void 0,borderDashArray:null!=(g=e.borderDashArray)?g:void 0,borderDashPhase:null!=(y=e.borderDashPhase)?y:void 0,graphicsState:w,borderLineCap:null!=(b=e.borderLineCap)?b:void 0}))},e.prototype.drawSquare=function(e){void 0===e&&(e={});var n=e.size;(0,x.assertOrUndefined)(n,"size",["number"]),this.drawRectangle((0,t.__assign)((0,t.__assign)({},e),{width:n,height:n}))},e.prototype.drawEllipse=function(e){void 0===e&&(e={}),(0,x.assertOrUndefined)(e.x,"options.x",["number"]),(0,x.assertOrUndefined)(e.y,"options.y",["number"]),(0,x.assertOrUndefined)(e.xScale,"options.xScale",["number"]),(0,x.assertOrUndefined)(e.yScale,"options.yScale",["number"]),(0,x.assertOrUndefined)(e.rotate,"options.rotate",[[Object,"Rotation"]]),(0,x.assertOrUndefined)(e.color,"options.color",[[Object,"Color"]]),(0,x.assertRangeOrUndefined)(e.opacity,"opacity.opacity",0,1),(0,x.assertOrUndefined)(e.borderColor,"options.borderColor",[[Object,"Color"]]),(0,x.assertRangeOrUndefined)(e.borderOpacity,"options.borderOpacity",0,1),(0,x.assertOrUndefined)(e.borderWidth,"options.borderWidth",["number"]),(0,x.assertOrUndefined)(e.borderDashArray,"options.borderDashArray",[Array]),(0,x.assertOrUndefined)(e.borderDashPhase,"options.borderDashPhase",["number"]),(0,x.assertIsOneOfOrUndefined)(e.borderLineCap,"options.borderLineCap",i.LineCapStyle),(0,x.assertIsOneOfOrUndefined)(e.blendMode,"options.blendMode",u.BlendMode);var t,a,o,s,l,c,d,h,p,f,m,g=this.maybeEmbedGraphicsState({opacity:e.opacity,borderOpacity:e.borderOpacity,blendMode:e.blendMode});"color"in e||"borderColor"in e||(e.color=(0,n.rgb)(0,0,0));var y=this.getContentStream();y.push.apply(y,(0,r.drawEllipse)({x:null!=(t=e.x)?t:this.x,y:null!=(a=e.y)?a:this.y,xScale:null!=(o=e.xScale)?o:100,yScale:null!=(s=e.yScale)?s:100,rotate:null!=(l=e.rotate)?l:void 0,color:null!=(c=e.color)?c:void 0,borderColor:null!=(d=e.borderColor)?d:void 0,borderWidth:null!=(h=e.borderWidth)?h:0,borderDashArray:null!=(p=e.borderDashArray)?p:void 0,borderDashPhase:null!=(f=e.borderDashPhase)?f:void 0,borderLineCap:null!=(m=e.borderLineCap)?m:void 0,graphicsState:g}))},e.prototype.drawCircle=function(e){void 0===e&&(e={});var n=e.size,r=void 0===n?100:n;(0,x.assertOrUndefined)(r,"size",["number"]),this.drawEllipse((0,t.__assign)((0,t.__assign)({},e),{xScale:r,yScale:r}))},e.prototype.setOrEmbedFont=function(e){var t=this.font,n=this.fontKey;return e?this.setFont(e):this.getFont(),{oldFont:t,oldFontKey:n,newFont:this.font,newFontKey:this.fontKey}},e.prototype.getFont=function(){if(!this.font||!this.fontKey){var e=this.doc.embedStandardFont(d.StandardFonts.Helvetica);this.setFont(e)}return[this.font,this.fontKey]},e.prototype.resetFont=function(){this.font=void 0,this.fontKey=void 0},e.prototype.getContentStream=function(e){return void 0===e&&(e=!0),e&&this.contentStream||(this.contentStream=this.createContentStream(),this.contentStreamRef=this.doc.context.register(this.contentStream),this.node.addContentStream(this.contentStreamRef)),this.contentStream},e.prototype.createContentStream=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.doc.context.obj({});return h.PDFContentStream.of(n,e)},e.prototype.maybeEmbedGraphicsState=function(e){var t=e.opacity,n=e.borderOpacity,r=e.blendMode;if(void 0!==t||void 0!==n||void 0!==r){var i=this.doc.context.obj({Type:"ExtGState",ca:t,CA:n,BM:r});return this.node.newExtGState("GS",i)}},e.prototype.scaleAnnot=function(e,t,n){for(var r=["RD","CL","Vertices","QuadPoints","L","Rect"],i=0,a=r.length;i<a;i++){var o=e.lookup(p.PDFName.of(r[i]));o instanceof b.PDFArray&&o.scalePDFNumbers(t,n)}var s=e.lookup(p.PDFName.of("InkList"));if(s instanceof b.PDFArray)for(var i=0,a=s.size();i<a;i++){var l=s.lookup(i);l instanceof b.PDFArray&&l.scalePDFNumbers(t,n)}},e.of=function(t,n,r){return new e(t,n,r)},e.create=function(t){(0,x.assertIs)(t,"doc",[[a.default,"PDFDocument"]]);var n=g.PDFRef.of(-1),r=m.PDFPageLeaf.withContextAndParent(t.context,n),i=t.context.register(r);return new e(r,i,t)},e}()},450882:e=>{"use strict";e.s({default:()=>h});var t=e.i(436255),n=e.i(653191),r=e.i(761660),i=e.i(240605),a=e.i(643035),o=e.i(556399),s=e.i(828226),l=e.i(893475);e.i(35849);var u=e.i(575898),c=e.i(561807);e.i(465248);var d=e.i(540265);let h=function(e){function h(t,n,r){var i=e.call(this,t,n,r)||this;return(0,d.assertIs)(t,"acroButton",[[c.PDFAcroPushButton,"PDFAcroPushButton"]]),i.acroField=t,i}return(0,t.__extends)(h,e),h.prototype.setImage=function(e,t){void 0===t&&(t=i.ImageAlignment.Center);for(var n=this.acroField.getWidgets(),r=0,a=n.length;r<a;r++){var o=n[r],s=this.createImageAppearanceStream(o,e,t);this.updateWidgetAppearances(o,{normal:s})}this.markAsClean()},h.prototype.setFontSize=function(e){(0,d.assertPositive)(e,"fontSize"),this.acroField.setFontSize(e),this.markAsDirty()},h.prototype.addToPage=function(e,t,r){(0,d.assertOrUndefined)(e,"text",["string"]),(0,d.assertOrUndefined)(t,"page",[[n.default,"PDFPage"]]),(0,o.assertFieldAppearanceOptions)(r);var i,a,u,c,h,p,f,m,g,y,b,x=this.createWidget({x:(null!=(i=null==r?void 0:r.x)?i:0)-(null!=(a=null==r?void 0:r.borderWidth)?a:0)/2,y:(null!=(u=null==r?void 0:r.y)?u:0)-(null!=(c=null==r?void 0:r.borderWidth)?c:0)/2,width:null!=(h=null==r?void 0:r.width)?h:100,height:null!=(p=null==r?void 0:r.height)?p:50,textColor:null!=(f=null==r?void 0:r.textColor)?f:(0,s.rgb)(0,0,0),backgroundColor:null!=(m=null==r?void 0:r.backgroundColor)?m:(0,s.rgb)(.75,.75,.75),borderColor:null==r?void 0:r.borderColor,borderWidth:null!=(g=null==r?void 0:r.borderWidth)?g:0,rotate:null!=(y=null==r?void 0:r.rotate)?y:(0,l.degrees)(0),caption:e,hidden:null==r?void 0:r.hidden,page:t.ref}),w=this.doc.context.register(x.dict);this.acroField.addWidget(w);var k=null!=(b=null==r?void 0:r.font)?b:this.doc.getForm().getDefaultFont();this.updateWidgetAppearance(x,k),t.node.addAnnot(w)},h.prototype.needsAppearancesUpdate=function(){if(this.isDirty())return!0;for(var e,t=this.acroField.getWidgets(),n=0,r=t.length;n<r;n++)if(!((null==(e=t[n].getAppearances())?void 0:e.normal)instanceof u.PDFStream))return!0;return!1},h.prototype.defaultUpdateAppearances=function(e){(0,d.assertIs)(e,"font",[[r.default,"PDFFont"]]),this.updateAppearances(e)},h.prototype.updateAppearances=function(e,t){(0,d.assertIs)(e,"font",[[r.default,"PDFFont"]]),(0,d.assertOrUndefined)(t,"provider",[Function]);for(var n=this.acroField.getWidgets(),i=0,a=n.length;i<a;i++){var o=n[i];this.updateWidgetAppearance(o,e,t)}},h.prototype.updateWidgetAppearance=function(e,t,n){var r=null!=n?n:a.defaultButtonAppearanceProvider,i=(0,a.normalizeAppearance)(r(this,e,t));this.updateWidgetAppearanceWithFont(e,t,i)},h.of=function(e,t,n){return new h(e,t,n)},h}(o.default)},771796:e=>{"use strict";e.s({}),e.i(643035),e.i(450882),e.i(315483),e.i(19193),e.i(556399),e.i(892177),e.i(609845),e.i(667930),e.i(235834),e.i(603469)},861574:e=>{"use strict";e.s({}),e.i(643035),e.i(450882),e.i(315483),e.i(19193),e.i(556399),e.i(892177),e.i(609845),e.i(667930),e.i(235834),e.i(603469),e.i(771796)},250906:e=>{"use strict";e.s({}),e.i(934303),e.i(103183)},342649:e=>{"use strict";e.s({}),e.i(934303),e.i(103183),e.i(250906)},695427:e=>{"use strict";e.s({}),e.i(861574),e.i(342649),e.i(828226),e.i(137637),e.i(182175),e.i(156410),e.i(453631),e.i(283732),e.i(893475),e.i(359878),e.i(689720),e.i(34906),e.i(838328),e.i(905919),e.i(761660),e.i(55981),e.i(653191),e.i(920245),e.i(566045)},885450:e=>{"use strict";e.s({}),e.i(861574),e.i(342649),e.i(828226),e.i(137637),e.i(182175),e.i(156410),e.i(453631),e.i(283732),e.i(893475),e.i(359878),e.i(689720),e.i(34906),e.i(838328),e.i(905919),e.i(761660),e.i(55981),e.i(653191),e.i(920245),e.i(566045),e.i(695427)},337799:e=>{var{m:t,e:n}=e},544445:e=>{"use strict";e.s({}),e.i(885450),e.i(35849),e.i(337799),e.i(465248)},230912:e=>{"use strict";e.s({}),e.i(885450),e.i(35849),e.i(337799),e.i(465248),e.i(544445)},855195:e=>{"use strict";e.s({PDFDocument:()=>t.default});var t=e.i(905919)},721011:e=>{"use strict";e.s({parsePdf:()=>a}),e.i(230912);var t=e.i(299806),n=e.i(855195),r=e.i(528567),i=e.i(555168);let a=async e=>{let i=await n.PDFDocument.load(e,{ignoreEncryption:!0}),a=null;for(let e of i.context.enumerateIndirectObjects()){let[t,n]=e;if(n instanceof r.PDFPageTree){a=n;break}}return a&&(i.catalog=t.PDFCatalog.withContextAndPages(i.context,a)),i},o=i.z.object({type:i.z.literal("document"),pageCount:i.z.number(),ingestedPages:i.z.array(i.z.object({pageNumber:i.z.number(),strategy:i.z.string(),duration:i.z.number().optional()}))}),s=i.z.object({type:i.z.literal("website"),url:i.z.string()});i.z.discriminatedUnion("type",[o,s])},475839:e=>{"use strict";e.s({compiler:()=>eq});var t=e.i(373150);function n(){return(n=Object.assign.bind()).apply(this,arguments)}let r=["allowFullScreen","allowTransparency","autoComplete","autoFocus","autoPlay","cellPadding","cellSpacing","charSet","classId","colSpan","contentEditable","contextMenu","crossOrigin","encType","formAction","formEncType","formMethod","formNoValidate","formTarget","frameBorder","hrefLang","inputMode","keyParams","keyType","marginHeight","marginWidth","maxLength","mediaGroup","minLength","noValidate","radioGroup","readOnly","rowSpan","spellCheck","srcDoc","srcLang","srcSet","tabIndex","useMap"].reduce((e,t)=>(e[t.toLowerCase()]=t,e),{class:"className",for:"htmlFor"}),i={amp:"&",apos:"'",gt:">",lt:"<",nbsp:"",quot:""},a=["style","script","pre"],o=["src","href","data","formAction","srcDoc","action"],s=/([-A-Z0-9_:]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|(?:\{((?:\\.|{[^}]*?}|[^}])*)\})))?/gi,l=/mailto:/i,u=/\n{2,}$/,c=/^(\s*>[\s\S]*?)(?=\n\n|$)/,d=/^ *> ?/gm,h=/^(?:\[!([^\]]*)\]\n)?([\s\S]*)/,p=/^ {2,}\n/,f=/^(?:( *[-*_])){3,} *(?:\n *)+\n/,m=/^(?: {1,3})?(`{3,}|~{3,}) *(\S+)? *([^\n]*?)?\n([\s\S]*?)(?:\1\n?|$)/,g=/^(?: {4}[^\n]+\n*)+(?:\n *)+\n?/,y=/^(`+)((?:\\`|(?!\1)`|[^`])+)\1/,b=/^(?:\n *)*\n/,x=/\r\n?/g,w=/^\[\^([^\]]+)](:(.*)((\n+ {4,}.*)|(\n(?!\[\^).+))*)/,k=/^\[\^([^\]]+)]/,S=/\f/g,_=/^---[ \t]*\n(.|\n)*\n---[ \t]*\n/,C=/^\s*?\[(x|\s)\]/,A=/^ *(#{1,6}) *([^\n]+?)(?: +#*)?(?:\n *)*(?:\n|$)/,E=/^ *(#{1,6}) +([^\n]+?)(?: +#*)?(?:\n *)*(?:\n|$)/,T=/^([^\n]+)\n *(=|-){3,} *\n/,M=/^ *(?!<[a-z][^ >/]* ?\/>)<([a-z][^ >/]*) ?((?:[^>]*[^/])?)>\n?(\s*(?:<\1[^>]*?>[\s\S]*?<\/\1>|(?!<\1\b)[\s\S])*?)<\/\1>(?!<\/\1>)\n*/i,I=/&([a-z0-9]+|#[0-9]{1,6}|#x[0-9a-fA-F]{1,6});/gi,N=/^<!--[\s\S]*?(?:-->)/,D=/^(data|aria|x)-[a-z_][a-z\d_.-]*$/,P=/^ *<([a-z][a-z0-9:]*)(?:\s+((?:<.*?>|[^>])*))?\/?>(?!<\/\1>)(\s*\n)?/i,R=/^\{.*\}$/,O=/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,j=/^<([^ >]+@[^ >]+)>/,F=/^<([^ >]+:\/[^ >]+)>/,L=/-([a-z])?/gi,z=/^(\|.*)\n(?: *(\|? *[-:]+ *\|[-| :]*)\n((?:.*\|.*\n)*))?\n?/,B=/^[^\n]+(?:  \n|\n{2,})/,U=/^\[([^\]]*)\]:\s+<?([^\s>]+)>?\s*("([^"]*)")?/,H=/^!\[([^\]]*)\] ?\[([^\]]*)\]/,W=/^\[([^\]]*)\] ?\[([^\]]*)\]/,V=/(\n|^[-*]\s|^#|^ {2,}|^-{2,}|^>\s)/,q=/\t/g,G=/(^ *\||\| *$)/g,$=/^ *:-+: *$/,K=/^ *:-+ *$/,Y=/^ *-+: *$/,X="((?:\\[.*?\\][([].*?[)\\]]|<.*?>(?:.*?<.*?>)?|`.*?`|\\\\\\1|[\\s\\S])+?)",Z=RegExp("^([*_])\\1".concat(X,"\\1\\1(?!\\1)")),J=RegExp("^([*_])".concat(X,"\\1(?!\\1)")),Q=RegExp("^(==)".concat(X,"\\1")),ee=RegExp("^(~~)".concat(X,"\\1")),et=/^\\([^0-9A-Za-z\s])/,en=/\\([^0-9A-Za-z\s])/g,er=/^[\s\S](?:(?!  |[0-9]\.|http)[^=*_~\-\n<`\\\[!])*/,ei=/^\n+/,ea=/^([ \t]*)/,eo=/(?:^|\n)( *)$/,es="(?:\\d+\\.)",el="(?:[*+-])";function eu(e){return"( *)("+(1===e?es:el)+") +"}let ec=eu(1),ed=eu(2);function eh(e){return RegExp("^"+(1===e?ec:ed))}let ep=eh(1),ef=eh(2);function em(e){return RegExp("^"+(1===e?ec:ed)+"[^\\n]*(?:\\n(?!\\1"+(1===e?es:el)+" )[^\\n]*)*(\\n|$)","gm")}let eg=em(1),ev=em(2);function ey(e){let t=1===e?es:el;return RegExp("^( *)("+t+") [\\s\\S]+?(?:\\n{2,}(?! )(?!\\1"+t+" (?!"+t+" ))\\n*|\\s*\\n*$)")}let eb=ey(1),ex=ey(2);function ew(e,t){let n=1===t,r=n?eb:ex,i=n?eg:ev,a=n?ep:ef;return{t:e=>a.test(e),o:eN(function(e,t){let n=eo.exec(t.prevCapture);return n&&(t.list||!t.inline&&!t.simple)?r.exec(e=n[1]+e):null}),i:1,u(e,t,r){let o=n?+e[2]:void 0,s=e[0].replace(u,"\n").match(i),l=!1;return{items:s.map(function(e,n){let i,o=RegExp("^ {1,"+a.exec(e)[0].length+"}","gm"),u=e.replace(o,"").replace(a,""),c=n===s.length-1,d=-1!==u.indexOf("\n\n")||c&&l;l=d;let h=r.inline,p=r.list;r.list=!0,d?(r.inline=!1,i=e_(u)+"\n\n"):(r.inline=!0,i=e_(u));let f=t(i,r);return r.inline=h,r.list=p,f}),ordered:n,start:o}},l:(t,n,r)=>e(t.ordered?"ol":"ul",{key:r.key,start:"20"===t.type?t.start:void 0},t.items.map(function(t,i){return e("li",{key:i},n(t,r))}))}}let ek=RegExp("^\\[((?:\\[[^\\]]*\\]|[^\\[\\]]|\\](?=[^\\[]*\\]))*)\\]\\(\\s*<?((?:\\([^)]*\\)|[^\\s\\\\]|\\\\.)*?)>?(?:\\s+['\"]([\\s\\S]*?)['\"])?\\s*\\)"),eS=/^!\[(.*?)\]\( *((?:\([^)]*\)|[^() ])*) *"?([^)"]*)?"?\)/;function e_(e){let t=e.length;for(;t>0&&e[t-1]<=" ";)t--;return e.slice(0,t)}function eC(e,t){return e.startsWith(t)}function eA(e){return e.replace(/[]/g,"a").replace(/[]/g,"c").replace(/[]/g,"d").replace(/[]/g,"e").replace(/[]/g,"i").replace(/[]/g,"n").replace(/[]/g,"o").replace(/[]/g,"u").replace(/[]/g,"y").replace(/[^a-z0-9- ]/gi,"").replace(/ /gi,"-").toLowerCase()}function eE(e){return Y.test(e)?"right":$.test(e)?"center":K.test(e)?"left":null}function eT(e,t,n,r){let i=n.inTable;n.inTable=!0;let a=[[]],o="";function s(){if(!o)return;let e=a[a.length-1];e.push.apply(e,t(o,n)),o=""}return e.trim().split(/(`[^`]*`|\\\||\|)/).filter(Boolean).forEach((e,t,n)=>{"|"===e.trim()&&(s(),r)?0!==t&&t!==n.length-1&&a.push([]):o+=e}),s(),n.inTable=i,a}function eM(e,t,n){var r;n.inline=!0;let i=e[2]?e[2].replace(G,"").split("|").map(eE):[],a=e[3]?(r=e[3],r.trim().split("\n").map(function(e){return eT(e,t,n,!0)})):[],o=eT(e[1],t,n,!!a.length);return n.inline=!1,a.length?{align:i,cells:a,header:o,type:"25"}:{children:o,type:"21"}}function eI(e,t){return null==e.align[t]?{}:{textAlign:e.align[t]}}function eN(e){return e.inline=1,e}function eD(e){return eN(function(t,n){return n.inline?e.exec(t):null})}function eP(e){return eN(function(t,n){return n.inline||n.simple?e.exec(t):null})}function eR(e){return function(t,n){return n.inline||n.simple?null:e.exec(t)}}function eO(e){return eN(function(t){return e.exec(t)})}let ej=/(javascript|vbscript|data(?!:image)):/i;function eF(e){try{let t=decodeURIComponent(e).replace(/[^A-Za-z0-9/:]/g,"");if(ej.test(t))return null}catch(e){return null}return e}function eL(e){return e?e.replace(en,"$1"):e}function ez(e,t,n){let r=n.inline||!1,i=n.simple||!1;n.inline=!0,n.simple=!0;let a=e(t,n);return n.inline=r,n.simple=i,a}function eB(e,t,n){let r=n.inline||!1;n.inline=!1;let i=e(t,n);return n.inline=r,i}let eU=(e,t,n)=>({children:ez(t,e[2],n)});function eH(){return{}}function eW(){return null}function eV(e,t,n){let r=e,i=t.split(".");for(;i.length&&void 0!==(r=r[i[0]]);)i.shift();return r||n}function eq(){var e,u,G;let $=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",K=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};K.overrides=K.overrides||{},K.namedCodesToUnicode=K.namedCodesToUnicode?n({},i,K.namedCodesToUnicode):i;let Y=K.slugify||eA,X=K.sanitizer||eF,en=K.createElement||t.createElement,eo=[c,m,g,K.enforceAtxHeadings?E:A,T,z,eb,ex],es=[...eo,B,M,N,P];function el(e,t){for(var r=arguments.length,i=Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];let o=eV(K.overrides,e+".props",{});return en(function(e,t){let n=eV(t,e);return n?"function"==typeof n||"object"==typeof n&&"render"in n?n:eV(t,e+".component",e):e}(e,K.overrides),n({},t,o,{className:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")}(null==t?void 0:t.className,o.className)||void 0}),...i)}function eu(e){let t;e=e.replace(_,"");let n=!1;K.forceInline?n=!0:K.forceBlock||(n=!1===V.test(e));let r=em(ef(n?e:e_(e).replace(ei,"")+"\n\n",{inline:n}));for(;"string"==typeof r[r.length-1]&&!r[r.length-1].trim();)r.pop();if(null===K.wrapper)return r;let i=K.wrapper||(n?"span":"div");if(r.length>1||K.forceWrapper)t=r;else{if(1===r.length)return"string"==typeof(t=r[0])?el("span",{key:"outer"},t):t;t=null}return en(i,{key:"outer"},t)}function ec(e,t){if(!t||!t.trim())return null;let n=t.match(s);return n?n.reduce(function(t,n){let i=n.indexOf("=");if(-1!==i){var a,s;let l=(-1!==(a=n.slice(0,i)).indexOf("-")&&null===a.match(D)&&(a=a.replace(L,function(e,t){return t.toUpperCase()})),a).trim(),u=function(e){let t=e[0];return('"'===t||"'"===t)&&e.length>=2&&e[e.length-1]===t?e.slice(1,-1):e}(n.slice(i+1).trim()),c=r[l]||l;if("ref"===c)return t;let d=t[c]=(s=u,"style"===l?(function(e){let t=[],n="",r=!1,i=!1,a="";if(!e)return t;for(let o=0;o<e.length;o++){let s=e[o];if('"'!==s&&"'"!==s||r||(i?s===a&&(i=!1,a=""):(i=!0,a=s)),"("===s&&n.endsWith("url")?r=!0:")"===s&&r&&(r=!1),";"!==s||i||r)n+=s;else{let e=n.trim();if(e){let n=e.indexOf(":");if(n>0){let r=e.slice(0,n).trim(),i=e.slice(n+1).trim();t.push([r,i])}}n=""}}let o=n.trim();if(o){let e=o.indexOf(":");if(e>0){let n=o.slice(0,e).trim(),r=o.slice(e+1).trim();t.push([n,r])}}return t})(s).reduce(function(t,n){let[r,i]=n;return t[r.replace(/(-[a-z])/g,e=>e[1].toUpperCase())]=X(i,e,r),t},{}):-1!==o.indexOf(l)?X(eL(s),e,l):(s.match(R)&&(s=eL(s.slice(1,s.length-1))),"true"===s||"false"!==s&&s));"string"==typeof d&&(M.test(d)||P.test(d))&&(t[c]=eu(d.trim()))}else"style"!==n&&(t[r[n]||n]=!0);return t},{}):null}let ed=[],eh={},ep={0:{t:[">"],o:eR(c),i:1,u(e,t,n){let[,r,i]=e[0].replace(d,"").match(h);return{alert:r,children:t(i,n)}},l(e,t,n){let r={key:n.key};return e.alert&&(r.className="markdown-alert-"+Y(e.alert.toLowerCase(),eA),e.children.unshift({attrs:{},children:[{type:"27",text:e.alert}],noInnerParse:!0,type:"11",tag:"header"})),el("blockquote",r,t(e.children,n))}},1:{o:eO(p),i:1,u:eH,l:(e,t,n)=>el("br",{key:n.key})},2:{t:e=>{let t=e[0];return"-"===t||"*"===t||"_"===t},o:eR(f),i:1,u:eH,l:(e,t,n)=>el("hr",{key:n.key})},3:{t:["    "],o:eR(g),i:0,u:e=>({lang:void 0,text:eL(e_(e[0].replace(/^ {4}/gm,"")))}),l:(e,t,r)=>el("pre",{key:r.key},el("code",n({},e.attrs,{className:e.lang?"lang-"+e.lang:""}),e.text))},4:{t:["```","~~~"],o:eR(m),i:0,u:e=>({attrs:ec("code",e[3]||""),lang:e[2]||void 0,text:e[4],type:"3"})},5:{t:["`"],o:eP(y),i:3,u:e=>({text:eL(e[2])}),l:(e,t,n)=>el("code",{key:n.key},e.text)},6:{t:["[^"],o:eR(w),i:0,u:e=>(ed.push({footnote:e[2],identifier:e[1]}),{}),l:eW},7:{t:["[^"],o:eD(k),i:1,u:e=>({target:"#"+Y(e[1],eA),text:e[1]}),l:(e,t,n)=>el("a",{key:n.key,href:X(e.target,"a","href")},el("sup",{key:n.key},e.text))},8:{t:["[ ]","[x]"],o:eD(C),i:1,u:e=>({completed:"x"===e[1].toLowerCase()}),l:(e,t,n)=>el("input",{checked:e.completed,key:n.key,readOnly:!0,type:"checkbox"})},9:{t:["#"],o:eR(K.enforceAtxHeadings?E:A),i:1,u:(e,t,n)=>({children:ez(t,e[2],n),id:Y(e[2],eA),level:e[1].length}),l:(e,t,n)=>el("h"+e.level,{id:e.id,key:n.key},t(e.children,n))},10:{o:eR(T),i:0,u:(e,t,n)=>({children:ez(t,e[1],n),level:"="===e[2]?1:2,type:"9"})},11:{t:["<"],o:eO(M),i:1,u(e,t,n){let[,r]=e[3].match(ea),i=RegExp("^"+r,"gm"),o=e[3].replace(i,""),s=es.some(e=>e.test(o))?eB:ez,l=e[1].toLowerCase(),u=-1!==a.indexOf(l),c=(u?l:e[1]).trim(),d={attrs:ec(c,e[2]),noInnerParse:u,tag:c};if(n.inAnchor=n.inAnchor||"a"===l,u)d.text=e[3];else{let e=n.inHTML;n.inHTML=!0,d.children=s(t,o,n),n.inHTML=e}return n.inAnchor=!1,d},l:(e,t,r)=>el(e.tag,n({key:r.key},e.attrs),e.text||(e.children?t(e.children,r):""))},13:{t:["<"],o:eO(P),i:1,u(e){let t=e[1].trim();return{attrs:ec(t,e[2]||""),tag:t}},l:(e,t,r)=>el(e.tag,n({},e.attrs,{key:r.key}))},12:{t:["<!--"],o:eO(N),i:1,u:()=>({}),l:eW},14:{t:["!["],o:eP(eS),i:1,u:e=>({alt:eL(e[1]),target:eL(e[2]),title:eL(e[3])}),l:(e,t,n)=>el("img",{key:n.key,alt:e.alt||void 0,title:e.title||void 0,src:X(e.target,"img","src")})},15:{t:["["],o:eD(ek),i:3,u:(e,t,n)=>({children:function(e,t,n){let r=n.inline||!1,i=n.simple||!1;n.inline=!1,n.simple=!0;let a=e(t,n);return n.inline=r,n.simple=i,a}(t,e[1],n),target:eL(e[2]),title:eL(e[3])}),l:(e,t,n)=>el("a",{key:n.key,href:X(e.target,"a","href"),title:e.title},t(e.children,n))},16:{t:["<"],o:eD(F),i:0,u:e=>({children:[{text:e[1],type:"27"}],target:e[1],type:"15"})},17:{t:(e,t)=>!t.inAnchor&&!K.disableAutoLink&&(eC(e,"http://")||eC(e,"https://")),o:eD(O),i:0,u:e=>({children:[{text:e[1],type:"27"}],target:e[1],title:void 0,type:"15"})},18:{t:["<"],o:eD(j),i:0,u(e){let t=e[1],n=e[1];return l.test(n)||(n="mailto:"+n),{children:[{text:t.replace("mailto:",""),type:"27"}],target:n,type:"15"}}},20:ew(el,1),33:ew(el,2),19:{o:eR(b),i:3,u:eH,l:()=>"\n"},21:{o:eN(function(e,t){if(t.inline||t.simple||t.inHTML&&-1===e.indexOf("\n\n")&&-1===t.prevCapture.indexOf("\n\n"))return null;let n="";e.split("\n").every(e=>(e+="\n",!eo.some(t=>t.test(e))&&(n+=e,!!e.trim())));let r=e_(n);return""===r?null:[n,,r]}),i:3,u:eU,l:(e,t,n)=>el("p",{key:n.key},t(e.children,n))},22:{t:["["],o:eD(U),i:0,u:e=>(eh[e[1]]={target:e[2],title:e[4]},{}),l:eW},23:{t:["!["],o:eP(H),i:0,u:e=>({alt:e[1]?eL(e[1]):void 0,ref:e[2]}),l:(e,t,n)=>eh[e.ref]?el("img",{key:n.key,alt:e.alt,src:X(eh[e.ref].target,"img","src"),title:eh[e.ref].title}):null},24:{t:["["],o:eD(W),i:0,u:(e,t,n)=>({children:t(e[1],n),fallbackChildren:e[0],ref:e[2]}),l:(e,t,n)=>eh[e.ref]?el("a",{key:n.key,href:X(eh[e.ref].target,"a","href"),title:eh[e.ref].title},t(e.children,n)):el("span",{key:n.key},e.fallbackChildren)},25:{t:["|"],o:eR(z),i:1,u:eM,l:(e,t,n)=>el("table",{key:n.key},el("thead",null,el("tr",null,e.header.map(function(r,i){return el("th",{key:i,style:eI(e,i)},t(r,n))}))),el("tbody",null,e.cells.map(function(r,i){return el("tr",{key:i},r.map(function(r,i){return el("td",{key:i,style:eI(e,i)},t(r,n))}))})))},27:{o:eO(er),i:4,u(e){let t=e[0];return{text:-1===t.indexOf("&")?t:t.replace(I,(e,t)=>K.namedCodesToUnicode[t]||e)}},l:e=>e.text},28:{t:["**","__"],o:eP(Z),i:2,u:(e,t,n)=>({children:t(e[2],n)}),l:(e,t,n)=>el("strong",{key:n.key},t(e.children,n))},29:{t:e=>{let t=e[0];return("*"===t||"_"===t)&&e[1]!==t},o:eP(J),i:3,u:(e,t,n)=>({children:t(e[2],n)}),l:(e,t,n)=>el("em",{key:n.key},t(e.children,n))},30:{t:["\\"],o:eP(et),i:1,u:e=>({text:e[1],type:"27"})},31:{t:["=="],o:eP(Q),i:3,u:eU,l:(e,t,n)=>el("mark",{key:n.key},t(e.children,n))},32:{t:["~~"],o:eP(ee),i:3,u:eU,l:(e,t,n)=>el("del",{key:n.key},t(e.children,n))}};!0===K.disableParsingRawHTML&&(delete ep[11],delete ep[13]);let ef=((u=Object.keys(ep)).sort(function(e,t){return ep[e].i-ep[t].i||(e<t?-1:1)}),function(e,t){return function e(t,n){var r=[];if(n.prevCapture=n.prevCapture||"",t.trim())for(;t;)for(var i=0;i<u.length;){var a=u[i],o=ep[a];if(!o.t||function(e,t,n){if(Array.isArray(n)){for(let t=0;t<n.length;t++)if(eC(e,n[t]))return!0;return!1}return n(e,t)}(t,n,o.t)){var s=o.o(t,n);if(s&&s[0]){t=t.substring(s[0].length);var l=o.u(s,e,n);n.prevCapture+=s[0],l.type||(l.type=a),r.push(l);break}i++}else i++}return n.prevCapture="",r}(e.replace(x,"\n").replace(S,"").replace(q,"    "),t)}),em=(G=K.renderRule,e=function(e,t,n){let r=ep[e.type].l;return G?G(()=>r(e,t,n),e,t,n):r(e,t,n)},function t(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Array.isArray(n)){let e=r.key,i=[],a=!1;for(let e=0;e<n.length;e++){r.key=e;let o=t(n[e],r),s="string"==typeof o;s&&a?i[i.length-1]+=o:null!==o&&i.push(o),a=s}return r.key=e,i}return e(n,t,r)}),eg=eu($);return ed.length?el("div",null,eg,el("footer",{key:"footer"},ed.map(function(e){return el("div",{id:Y(e.identifier,eA),key:e.identifier},e.identifier,em(ef(e.footnote,{inline:!0})))}))):eg}},24108:e=>{"use strict";var{m:t,e:n}=e,r=e.r(373150),i=e.r(784445);function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=Symbol.for("react.transitional.element"),s=Symbol.for("react.portal"),l=Symbol.for("react.fragment"),u=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),h=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),b=Symbol.for("react.scope"),x=Symbol.for("react.activity"),w=Symbol.for("react.legacy_hidden"),k=Symbol.for("react.memo_cache_sentinel"),S=Symbol.for("react.view_transition"),_=Symbol.iterator;function C(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=_&&e[_]||e["@@iterator"])?e:null}var A=Array.isArray;function E(e,t){var n=3&e.length,r=e.length-n,i=t;for(t=0;t<r;){var a=255&e.charCodeAt(t)|(255&e.charCodeAt(++t))<<8|(255&e.charCodeAt(++t))<<16|(255&e.charCodeAt(++t))<<24;++t,i^=a=0x1b873593*(65535&(a=(a=0xcc9e2d51*(65535&a)+((0xcc9e2d51*(a>>>16)&65535)<<16)|0)<<15|a>>>17))+((0x1b873593*(a>>>16)&65535)<<16)|0,i=(65535&(i=5*(65535&(i=i<<13|i>>>19))+((5*(i>>>16)&65535)<<16)|0))+27492+(((i>>>16)+58964&65535)<<16)}switch(a=0,n){case 3:a^=(255&e.charCodeAt(t+2))<<16;case 2:a^=(255&e.charCodeAt(t+1))<<8;case 1:a^=255&e.charCodeAt(t),i^=0x1b873593*(65535&(a=(a=0xcc9e2d51*(65535&a)+((0xcc9e2d51*(a>>>16)&65535)<<16)|0)<<15|a>>>17))+((0x1b873593*(a>>>16)&65535)<<16)}return i^=e.length,i^=i>>>16,i=0x85ebca6b*(65535&i)+((0x85ebca6b*(i>>>16)&65535)<<16)|0,i^=i>>>13,((i=0xc2b2ae35*(65535&i)+((0xc2b2ae35*(i>>>16)&65535)<<16)|0)^i>>>16)>>>0}var T=Object.assign,M=Object.prototype.hasOwnProperty,I=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),N={},D={};function P(e){return!!M.call(D,e)||!M.call(N,e)&&(I.test(e)?D[e]=!0:(N[e]=!0,!1))}var R=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" ")),O=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),j=/["'&<>]/;function F(e){if("boolean"==typeof e||"number"==typeof e||"bigint"==typeof e)return""+e;e=""+e;var t=j.exec(e);if(t){var n,r="",i=0;for(n=t.index;n<e.length;n++){switch(e.charCodeAt(n)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#x27;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}i!==n&&(r+=e.slice(i,n)),i=n+1,r+=t}e=i!==n?r+e.slice(i,n):r}return e}var L=/([A-Z])/g,z=/^ms-/,B=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function U(e){return B.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var H=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V={pending:!1,data:null,method:null,action:null},q=W.d;W.d={f:q.f,r:q.r,D:function(e){var t=tY||null;if(t){var n,r,i=t.resumableState,a=t.renderState;"string"==typeof e&&e&&(i.dnsResources.hasOwnProperty(e)||(i.dnsResources[e]=null,(r=(i=a.headers)&&0<i.remainingCapacity)&&(n="<"+(""+e).replace(e$,eK)+">; rel=dns-prefetch",r=0<=(i.remainingCapacity-=n.length+2)),r?(a.resets.dns[e]=null,i.preconnects&&(i.preconnects+=", "),i.preconnects+=n):(ep(n=[],{href:e,rel:"dns-prefetch"}),a.preconnects.add(n))),nI(t))}else q.D(e)},C:function(e,t){var n=tY||null;if(n){var r=n.resumableState,i=n.renderState;if("string"==typeof e&&e){var a,o,s="use-credentials"===t?"credentials":"string"==typeof t?"anonymous":"default";r.connectResources[s].hasOwnProperty(e)||(r.connectResources[s][e]=null,(o=(r=i.headers)&&0<r.remainingCapacity)&&(o="<"+(""+e).replace(e$,eK)+">; rel=preconnect","string"==typeof t&&(o+='; crossorigin="'+(""+t).replace(eY,eX)+'"'),a=o,o=0<=(r.remainingCapacity-=a.length+2)),o?(i.resets.connect[s][e]=null,r.preconnects&&(r.preconnects+=", "),r.preconnects+=a):(ep(s=[],{rel:"preconnect",href:e,crossOrigin:t}),i.preconnects.add(s))),nI(n)}}else q.C(e,t)},L:function(e,t,n){var r=tY||null;if(r){var i=r.resumableState,a=r.renderState;if(t&&e){switch(t){case"image":if(n)var o,s=n.imageSrcSet,l=n.imageSizes,u=n.fetchPriority;var c=s?s+"\n"+(l||""):e;if(i.imageResources.hasOwnProperty(c))return;i.imageResources[c]=G,(i=a.headers)&&0<i.remainingCapacity&&"string"!=typeof s&&"high"===u&&(o=eG(e,t,n),0<=(i.remainingCapacity-=o.length+2))?(a.resets.image[c]=G,i.highImagePreloads&&(i.highImagePreloads+=", "),i.highImagePreloads+=o):(ep(i=[],T({rel:"preload",href:s?void 0:e,as:t},n)),"high"===u?a.highImagePreloads.add(i):(a.bulkPreloads.add(i),a.preloads.images.set(c,i)));break;case"style":if(i.styleResources.hasOwnProperty(e))return;ep(s=[],T({rel:"preload",href:e,as:t},n)),i.styleResources[e]=n&&("string"==typeof n.crossOrigin||"string"==typeof n.integrity)?[n.crossOrigin,n.integrity]:G,a.preloads.stylesheets.set(e,s),a.bulkPreloads.add(s);break;case"script":if(i.scriptResources.hasOwnProperty(e))return;s=[],a.preloads.scripts.set(e,s),a.bulkPreloads.add(s),ep(s,T({rel:"preload",href:e,as:t},n)),i.scriptResources[e]=n&&("string"==typeof n.crossOrigin||"string"==typeof n.integrity)?[n.crossOrigin,n.integrity]:G;break;default:if(i.unknownResources.hasOwnProperty(t)){if((s=i.unknownResources[t]).hasOwnProperty(e))return}else s={},i.unknownResources[t]=s;s[e]=G,(i=a.headers)&&0<i.remainingCapacity&&"font"===t&&(c=eG(e,t,n),0<=(i.remainingCapacity-=c.length+2))?(a.resets.font[e]=G,i.fontPreloads&&(i.fontPreloads+=", "),i.fontPreloads+=c):(ep(i=[],e=T({rel:"preload",href:e,as:t},n)),"font"===t)?a.fontPreloads.add(i):a.bulkPreloads.add(i)}nI(r)}}else q.L(e,t,n)},m:function(e,t){var n=tY||null;if(n){var r=n.resumableState,i=n.renderState;if(e){var a=t&&"string"==typeof t.as?t.as:"script";if("script"===a){if(r.moduleScriptResources.hasOwnProperty(e))return;a=[],r.moduleScriptResources[e]=t&&("string"==typeof t.crossOrigin||"string"==typeof t.integrity)?[t.crossOrigin,t.integrity]:G,i.preloads.moduleScripts.set(e,a)}else{if(r.moduleUnknownResources.hasOwnProperty(a)){var o=r.unknownResources[a];if(o.hasOwnProperty(e))return}else o={},r.moduleUnknownResources[a]=o;a=[],o[e]=G}ep(a,T({rel:"modulepreload",href:e},t)),i.bulkPreloads.add(a),nI(n)}}else q.m(e,t)},X:function(e,t){var n=tY||null;if(n){var r=n.resumableState,i=n.renderState;if(e){var a=r.scriptResources.hasOwnProperty(e)?r.scriptResources[e]:void 0;null!==a&&(r.scriptResources[e]=null,t=T({src:e,async:!0},t),a&&(2===a.length&&eq(t,a),e=i.preloads.scripts.get(e))&&(e.length=0),e=[],i.scripts.add(e),ey(e,t),nI(n))}}else q.X(e,t)},S:function(e,t,n){var r=tY||null;if(r){var i=r.resumableState,a=r.renderState;if(e){t=t||"default";var o=a.styles.get(t),s=i.styleResources.hasOwnProperty(e)?i.styleResources[e]:void 0;null!==s&&(i.styleResources[e]=null,o||(o={precedence:F(t),rules:[],hrefs:[],sheets:new Map},a.styles.set(t,o)),t={state:0,props:T({rel:"stylesheet",href:e,"data-precedence":t},n)},s&&(2===s.length&&eq(t.props,s),(a=a.preloads.stylesheets.get(e))&&0<a.length?a.length=0:t.state=1),o.sheets.set(e,t),nI(r))}}else q.S(e,t,n)},M:function(e,t){var n=tY||null;if(n){var r=n.resumableState,i=n.renderState;if(e){var a=r.moduleScriptResources.hasOwnProperty(e)?r.moduleScriptResources[e]:void 0;null!==a&&(r.moduleScriptResources[e]=null,t=T({src:e,type:"module",async:!0},t),a&&(2===a.length&&eq(t,a),e=i.preloads.moduleScripts.get(e))&&(e.length=0),e=[],i.scripts.add(e),ey(e,t),nI(n))}}else q.M(e,t)}};var G=[],$=null,K=/(<\/|<)(s)(cript)/gi;function Y(e,t,n,r){return""+t+("s"===n?"\\u0073":"\\u0053")+r}function X(e,t,n,r){return{insertionMode:e,selectedValue:t,tagScope:n,viewTransition:r}}function Z(e,t,n){var r=-25&e.tagScope;switch(t){case"noscript":return X(2,null,1|r,null);case"select":return X(2,null!=n.value?n.value:n.defaultValue,r,null);case"svg":return X(4,null,r,null);case"picture":return X(2,null,2|r,null);case"math":return X(5,null,r,null);case"foreignObject":return X(2,null,r,null);case"table":return X(6,null,r,null);case"thead":case"tbody":case"tfoot":return X(7,null,r,null);case"colgroup":return X(9,null,r,null);case"tr":return X(8,null,r,null);case"head":if(2>e.insertionMode)return X(3,null,r,null);break;case"html":if(0===e.insertionMode)return X(1,null,r,null)}return 6<=e.insertionMode||2>e.insertionMode?X(2,null,r,null):e.tagScope!==r?X(e.insertionMode,e.selectedValue,r,null):e}function J(e){return null===e?null:{update:e.update,enter:"none",exit:"none",share:e.update,name:e.autoName,autoName:e.autoName,nameIdx:0}}function Q(e,t){return 32&t.tagScope&&(e.instructions|=128),X(t.insertionMode,t.selectedValue,12|t.tagScope,J(t.viewTransition))}function ee(e,t){return X(t.insertionMode,t.selectedValue,16|t.tagScope,J(t.viewTransition))}var et=new Map;function en(e,t){if("object"!=typeof t)throw Error(a(62));var n,r=!0;for(n in t)if(M.call(t,n)){var i=t[n];if(null!=i&&"boolean"!=typeof i&&""!==i){if(0===n.indexOf("--")){var o=F(n);i=F((""+i).trim())}else void 0===(o=et.get(n))&&(o=F(n.replace(L,"-$1").toLowerCase().replace(z,"-ms-")),et.set(n,o)),i="number"==typeof i?0===i||R.has(n)?""+i:i+"px":F((""+i).trim());r?(r=!1,e.push(' style="',o,":",i)):e.push(";",o,":",i)}}r||e.push('"')}function er(e,t,n){n&&"function"!=typeof n&&"symbol"!=typeof n&&e.push(" ",t,'=""')}function ei(e,t,n){"function"!=typeof n&&"symbol"!=typeof n&&"boolean"!=typeof n&&e.push(" ",t,'="',F(n),'"')}var ea=F("javascript:throw new Error('React form unexpectedly submitted.')");function eo(e,t){this.push('<input type="hidden"'),es(e),ei(this,"name",t),ei(this,"value",e),this.push("/>")}function es(e){if("string"!=typeof e)throw Error(a(480))}function el(e,t){if("function"==typeof t.$$FORM_ACTION){var n=e.nextFormID++;e=e.idPrefix+n;try{var r=t.$$FORM_ACTION(e);if(r){var i=r.data;null!=i&&i.forEach(es)}return r}catch(e){if("object"==typeof e&&null!==e&&"function"==typeof e.then)throw e}}return null}function eu(e,t,n,r,i,a,o,s){var l=null;if("function"==typeof r){var u=el(t,r);null!==u?(s=u.name,r=u.action||"",i=u.encType,a=u.method,o=u.target,l=u.data):(e.push(" ","formAction",'="',ea,'"'),o=a=i=r=s=null,eh(t,n))}return null!=s&&ec(e,"name",s),null!=r&&ec(e,"formAction",r),null!=i&&ec(e,"formEncType",i),null!=a&&ec(e,"formMethod",a),null!=o&&ec(e,"formTarget",o),l}function ec(e,t,n){switch(t){case"className":ei(e,"class",n);break;case"tabIndex":ei(e,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":ei(e,t,n);break;case"style":en(e,n);break;case"src":case"href":if(""===n)break;case"action":case"formAction":if(null==n||"function"==typeof n||"symbol"==typeof n||"boolean"==typeof n)break;n=U(""+n),e.push(" ",t,'="',F(n),'"');break;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":case"ref":break;case"autoFocus":case"multiple":case"muted":er(e,t.toLowerCase(),n);break;case"xlinkHref":if("function"==typeof n||"symbol"==typeof n||"boolean"==typeof n)break;n=U(""+n),e.push(" ","xlink:href",'="',F(n),'"');break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":"function"!=typeof n&&"symbol"!=typeof n&&e.push(" ",t,'="',F(n),'"');break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&"function"!=typeof n&&"symbol"!=typeof n&&e.push(" ",t,'=""');break;case"capture":case"download":!0===n?e.push(" ",t,'=""'):!1!==n&&"function"!=typeof n&&"symbol"!=typeof n&&e.push(" ",t,'="',F(n),'"');break;case"cols":case"rows":case"size":case"span":"function"!=typeof n&&"symbol"!=typeof n&&!isNaN(n)&&1<=n&&e.push(" ",t,'="',F(n),'"');break;case"rowSpan":case"start":"function"==typeof n||"symbol"==typeof n||isNaN(n)||e.push(" ",t,'="',F(n),'"');break;case"xlinkActuate":ei(e,"xlink:actuate",n);break;case"xlinkArcrole":ei(e,"xlink:arcrole",n);break;case"xlinkRole":ei(e,"xlink:role",n);break;case"xlinkShow":ei(e,"xlink:show",n);break;case"xlinkTitle":ei(e,"xlink:title",n);break;case"xlinkType":ei(e,"xlink:type",n);break;case"xmlBase":ei(e,"xml:base",n);break;case"xmlLang":ei(e,"xml:lang",n);break;case"xmlSpace":ei(e,"xml:space",n);break;default:if((!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&P(t=O.get(t)||t)){switch(typeof n){case"function":case"symbol":return;case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return}e.push(" ",t,'="',F(n),'"')}}}function ed(e,t,n){if(null!=t){if(null!=n)throw Error(a(60));if("object"!=typeof t||!("__html"in t))throw Error(a(61));null!=(t=t.__html)&&e.push(""+t)}}function eh(e,t){if(0==(16&e.instructions)){e.instructions|=16;var n=t.preamble,r=t.bootstrapChunks;(n.htmlChunks||n.headChunks)&&0===r.length?(r.push(t.startInlineScript),eW(r,e),r.push(">",'addEventListener("submit",function(a){if(!a.defaultPrevented){var c=a.target,d=a.submitter,e=c.action,b=d;if(d){var f=d.getAttribute("formAction");null!=f&&(e=f,b=null)}"javascript:throw new Error(\'React form unexpectedly submitted.\')"===e&&(a.preventDefault(),b?(a=document.createElement("input"),a.name=b.name,a.value=b.value,b.parentNode.insertBefore(a,b),b=new FormData(c),a.parentNode.removeChild(a)):b=new FormData(c),a=c.ownerDocument||c,(a.$$reactFormReplay=a.$$reactFormReplay||[]).push(c,d,b))}});',"</script>")):r.unshift(t.startInlineScript,">",'addEventListener("submit",function(a){if(!a.defaultPrevented){var c=a.target,d=a.submitter,e=c.action,b=d;if(d){var f=d.getAttribute("formAction");null!=f&&(e=f,b=null)}"javascript:throw new Error(\'React form unexpectedly submitted.\')"===e&&(a.preventDefault(),b?(a=document.createElement("input"),a.name=b.name,a.value=b.value,b.parentNode.insertBefore(a,b),b=new FormData(c),a.parentNode.removeChild(a)):b=new FormData(c),a=c.ownerDocument||c,(a.$$reactFormReplay=a.$$reactFormReplay||[]).push(c,d,b))}});',"</script>")}}function ep(e,t){for(var n in e.push(eS("link")),t)if(M.call(t,n)){var r=t[n];if(null!=r)switch(n){case"children":case"dangerouslySetInnerHTML":throw Error(a(399,"link"));default:ec(e,n,r)}}return e.push("/>"),null}var ef=/(<\/|<)(s)(tyle)/gi;function em(e,t,n,r){return""+t+("s"===n?"\\73 ":"\\53 ")+r}function eg(e,t,n){for(var r in e.push(eS(n)),t)if(M.call(t,r)){var i=t[r];if(null!=i)switch(r){case"children":case"dangerouslySetInnerHTML":throw Error(a(399,n));default:ec(e,r,i)}}return e.push("/>"),null}function ev(e,t){e.push(eS("title"));var n,r=null,i=null;for(n in t)if(M.call(t,n)){var a=t[n];if(null!=a)switch(n){case"children":r=a;break;case"dangerouslySetInnerHTML":i=a;break;default:ec(e,n,a)}}return e.push(">"),"function"!=typeof(t=Array.isArray(r)?2>r.length?r[0]:null:r)&&"symbol"!=typeof t&&null!=t&&e.push(F(""+t)),ed(e,i,r),e.push(eC("title")),null}function ey(e,t){e.push(eS("script"));var n,r=null,i=null;for(n in t)if(M.call(t,n)){var a=t[n];if(null!=a)switch(n){case"children":r=a;break;case"dangerouslySetInnerHTML":i=a;break;default:ec(e,n,a)}}return e.push(">"),ed(e,i,r),"string"==typeof r&&e.push((""+r).replace(K,Y)),e.push(eC("script")),null}function eb(e,t,n){e.push(eS(n));var r,i=n=null;for(r in t)if(M.call(t,r)){var a=t[r];if(null!=a)switch(r){case"children":n=a;break;case"dangerouslySetInnerHTML":i=a;break;default:ec(e,r,a)}}return e.push(">"),ed(e,i,n),n}function ex(e,t,n){e.push(eS(n));var r,i=n=null;for(r in t)if(M.call(t,r)){var a=t[r];if(null!=a)switch(r){case"children":n=a;break;case"dangerouslySetInnerHTML":i=a;break;default:ec(e,r,a)}}return e.push(">"),ed(e,i,n),"string"==typeof n?(e.push(F(n)),null):n}var ew=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,ek=new Map;function eS(e){var t=ek.get(e);if(void 0===t){if(!ew.test(e))throw Error(a(65,e));t="<"+e,ek.set(e,t)}return t}var e_=new Map;function eC(e){var t=e_.get(e);return void 0===t&&(t="</"+e+">",e_.set(e,t)),t}function eA(e,t){null===(e=e.preamble).htmlChunks&&t.htmlChunks&&(e.htmlChunks=t.htmlChunks),null===e.headChunks&&t.headChunks&&(e.headChunks=t.headChunks),null===e.bodyChunks&&t.bodyChunks&&(e.bodyChunks=t.bodyChunks)}function eE(e,t){t=t.bootstrapChunks;for(var n=0;n<t.length-1;n++)e.push(t[n]);return!(n<t.length)||(n=t[n],t.length=0,e.push(n))}function eT(e,t,n){if(e.push('<!--$?--><template id="'),null===n)throw Error(a(395));return e.push(t.boundaryPrefix),t=n.toString(16),e.push(t),e.push('"></template>')}var eM=/[<\u2028\u2029]/g,eI=/[&><\u2028\u2029]/g;function eN(e){return JSON.stringify(e).replace(eI,function(e){switch(e){case"&":return"\\u0026";case">":return"\\u003e";case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSObjectForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}var eD=!1,eP=!0;function eR(e){var t=e.rules,n=e.hrefs,r=0;if(n.length){for(this.push($.startInlineStyle),this.push(' media="not all" data-precedence="'),this.push(e.precedence),this.push('" data-href="');r<n.length-1;r++)this.push(n[r]),this.push(" ");for(this.push(n[r]),this.push('">'),r=0;r<t.length;r++)this.push(t[r]);eP=this.push("</style>"),eD=!0,t.length=0,n.length=0}}function eO(e){return 2!==e.state&&(eD=!0)}function ej(e,t,n){return eD=!1,eP=!0,$=n,t.styles.forEach(eR,e),$=null,t.stylesheets.forEach(eO),eD&&(n.stylesToHoist=!0),eP}function eF(e){for(var t=0;t<e.length;t++)this.push(e[t]);e.length=0}var eL=[];function ez(e){ep(eL,e.props);for(var t=0;t<eL.length;t++)this.push(eL[t]);eL.length=0,e.state=2}function eB(e){var t=0<e.sheets.size;e.sheets.forEach(ez,this),e.sheets.clear();var n=e.rules,r=e.hrefs;if(!t||r.length){if(this.push($.startInlineStyle),this.push(' data-precedence="'),this.push(e.precedence),e=0,r.length){for(this.push('" data-href="');e<r.length-1;e++)this.push(r[e]),this.push(" ");this.push(r[e])}for(this.push('">'),e=0;e<n.length;e++)this.push(n[e]);this.push("</style>"),n.length=0,r.length=0}}function eU(e){if(0===e.state){e.state=1;var t=e.props;for(ep(eL,{rel:"preload",as:"style",href:e.props.href,crossOrigin:t.crossOrigin,fetchPriority:t.fetchPriority,integrity:t.integrity,media:t.media,hrefLang:t.hrefLang,referrerPolicy:t.referrerPolicy}),e=0;e<eL.length;e++)this.push(eL[e]);eL.length=0}}function eH(e){e.sheets.forEach(eU,this),e.sheets.clear()}function eW(e,t){0==(32&t.instructions)&&(t.instructions|=32,e.push(' id="',F("_"+t.idPrefix+"R_"),'"'))}function eV(){return{styles:new Set,stylesheets:new Set}}function eq(e,t){null==e.crossOrigin&&(e.crossOrigin=t[0]),null==e.integrity&&(e.integrity=t[1])}function eG(e,t,n){for(var r in t="<"+(e=(""+e).replace(e$,eK))+'>; rel=preload; as="'+(t=(""+t).replace(eY,eX))+'"',n)M.call(n,r)&&"string"==typeof(e=n[r])&&(t+="; "+r.toLowerCase()+'="'+(""+e).replace(eY,eX)+'"');return t}var e$=/[<>\r\n]/g;function eK(e){switch(e){case"<":return"%3C";case">":return"%3E";case"\n":return"%0A";case"\r":return"%0D";default:throw Error("escapeLinkHrefForHeaderContextReplacer encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}}var eY=/["';,\r\n]/g;function eX(e){switch(e){case'"':return"%22";case"'":return"%27";case";":return"%3B";case",":return"%2C";case"\n":return"%0A";case"\r":return"%0D";default:throw Error("escapeStringForLinkHeaderQuotedParamValueContextReplacer encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}}function eZ(e){this.styles.add(e)}function eJ(e){this.stylesheets.add(e)}function eQ(e,t){t.styles.forEach(eZ,e),t.stylesheets.forEach(eJ,e)}function e0(e,t,n,r){return n.generateStaticMarkup?(e.push(F(t)),!1):(""===t?e=r:(r&&e.push("<!-- -->"),e.push(F(t)),e=!0),e)}function e1(e,t,n,r){t.generateStaticMarkup||n&&r&&e.push("<!-- -->")}var e2=Function.prototype.bind,e3=Symbol.for("react.client.reference");function e5(e){if(null==e)return null;if("function"==typeof e)return e.$$typeof===e3?null:e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case l:return"Fragment";case c:return"Profiler";case u:return"StrictMode";case f:return"Suspense";case m:return"SuspenseList";case x:return"Activity"}if("object"==typeof e)switch(e.$$typeof){case s:return"Portal";case h:return e.displayName||"Context";case d:return(e._context.displayName||"Context")+".Consumer";case p:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case g:return null!==(t=e.displayName||null)?t:e5(e.type)||"Memo";case y:t=e._payload,e=e._init;try{return e5(e(t))}catch(e){}}return null}var e4={},e9=null;function e8(e,t){if(e!==t){e.context._currentValue2=e.parentValue,e=e.parent;var n=t.parent;if(null===e){if(null!==n)throw Error(a(401))}else{if(null===n)throw Error(a(401));e8(e,n)}t.context._currentValue2=t.value}}function e6(e){var t=e9;t!==e&&(null===t?function e(t){var n=t.parent;null!==n&&e(n),t.context._currentValue2=t.value}(e):null===e?function e(t){t.context._currentValue2=t.parentValue,null!==(t=t.parent)&&e(t)}(t):t.depth===e.depth?e8(t,e):t.depth>e.depth?function e(t,n){if(t.context._currentValue2=t.parentValue,null===(t=t.parent))throw Error(a(402));t.depth===n.depth?e8(t,n):e(t,n)}(t,e):function e(t,n){var r=n.parent;if(null===r)throw Error(a(402));t.depth===r.depth?e8(t,r):e(t,r),n.context._currentValue2=n.value}(t,e),e9=e)}var e7={enqueueSetState:function(e,t){null!==(e=e._reactInternals).queue&&e.queue.push(t)},enqueueReplaceState:function(e,t){(e=e._reactInternals).replace=!0,e.queue=[t]},enqueueForceUpdate:function(){}},te={id:1,overflow:""};function tt(e,t,n){var r=e.id;e=e.overflow;var i=32-tn(r)-1;r&=~(1<<i),n+=1;var a=32-tn(t)+i;if(30<a){var o=i-i%5;return a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,{id:1<<32-tn(t)+i|n<<i|r,overflow:a+e}}return{id:1<<a|n<<i|r,overflow:e}}var tn=Math.clz32?Math.clz32:function(e){return 0==(e>>>=0)?32:31-(tr(e)/ti|0)|0},tr=Math.log,ti=Math.LN2;function ta(){}var to=Error(a(460)),ts=null;function tl(){if(null===ts)throw Error(a(459));var e=ts;return ts=null,e}var tu="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},tc=null,td=null,th=null,tp=null,tf=null,tm=null,tg=!1,tv=!1,ty=0,tb=0,tx=-1,tw=0,tk=null,tS=null,t_=0;function tC(){if(null===tc)throw Error(a(321));return tc}function tA(){if(0<t_)throw Error(a(312));return{memoizedState:null,queue:null,next:null}}function tE(){return null===tm?null===tf?(tg=!1,tf=tm=tA()):(tg=!0,tm=tf):null===tm.next?(tg=!1,tm=tm.next=tA()):(tg=!0,tm=tm.next),tm}function tT(){var e=tk;return tk=null,e}function tM(){tp=th=td=tc=null,tv=!1,tf=null,t_=0,tm=tS=null}function tI(e,t){return"function"==typeof t?t(e):t}function tN(e,t,n){if(tc=tC(),tm=tE(),tg){var r=tm.queue;if(t=r.dispatch,null!==tS&&void 0!==(n=tS.get(r))){tS.delete(r),r=tm.memoizedState;do r=e(r,n.action),n=n.next;while(null!==n)return tm.memoizedState=r,[r,t]}return[tm.memoizedState,t]}return e=e===tI?"function"==typeof t?t():t:void 0!==n?n(t):t,tm.memoizedState=e,e=(e=tm.queue={last:null,dispatch:null}).dispatch=tP.bind(null,tc,e),[tm.memoizedState,e]}function tD(e,t){if(tc=tC(),tm=tE(),t=void 0===t?null:t,null!==tm){var n=tm.memoizedState;if(null!==n&&null!==t){var r=n[1];s:if(null===r)r=!1;else{for(var i=0;i<r.length&&i<t.length;i++)if(!tu(t[i],r[i])){r=!1;break s}r=!0}if(r)return n[0]}}return e=e(),tm.memoizedState=[e,t],e}function tP(e,t,n){if(25<=t_)throw Error(a(301));if(e===tc)if(tv=!0,e={action:n,next:null},null===tS&&(tS=new Map),void 0===(n=tS.get(t)))tS.set(t,e);else{for(t=n;null!==t.next;)t=t.next;t.next=e}}function tR(){throw Error(a(394))}function tO(){throw Error(a(479))}function tj(e,t,n){tC();var r=tb++,i=th;if("function"==typeof e.$$FORM_ACTION){var a=null,o=tp;i=i.formState;var s=e.$$IS_SIGNATURE_EQUAL;if(null!==i&&"function"==typeof s){var l=i[1];s.call(e,i[2],i[3])&&l===(a=void 0!==n?"p"+n:"k"+E(JSON.stringify([o,null,r]),0))&&(tx=r,t=i[0])}var u=e.bind(null,t);return e=function(e){u(e)},"function"==typeof u.$$FORM_ACTION&&(e.$$FORM_ACTION=function(e){e=u.$$FORM_ACTION(e),void 0!==n&&(n+="",e.action=n);var t=e.data;return t&&(null===a&&(a=void 0!==n?"p"+n:"k"+E(JSON.stringify([o,null,r]),0)),t.append("$ACTION_KEY",a)),e}),[t,e,!1]}var c=e.bind(null,t);return[t,function(e){c(e)},!1]}function tF(e){var t=tw;tw+=1,null===tk&&(tk=[]);var n=tk,r=e,i=t;switch(void 0===(i=n[i])?n.push(r):i!==r&&(r.then(ta,ta),r=i),r.status){case"fulfilled":return r.value;case"rejected":throw r.reason;default:switch("string"==typeof r.status?r.then(ta,ta):((n=r).status="pending",n.then(function(e){if("pending"===r.status){var t=r;t.status="fulfilled",t.value=e}},function(e){if("pending"===r.status){var t=r;t.status="rejected",t.reason=e}})),r.status){case"fulfilled":return r.value;case"rejected":throw r.reason}throw ts=r,to}}function tL(){throw Error(a(393))}var tz,tB,tU={readContext:function(e){return e._currentValue2},use:function(e){if(null!==e&&"object"==typeof e){if("function"==typeof e.then)return tF(e);if(e.$$typeof===h)return e._currentValue2}throw Error(a(438,String(e)))},useContext:function(e){return tC(),e._currentValue2},useMemo:tD,useReducer:tN,useRef:function(e){tc=tC();var t=(tm=tE()).memoizedState;return null===t?(e={current:e},tm.memoizedState=e):t},useState:function(e){return tN(tI,e)},useInsertionEffect:ta,useLayoutEffect:ta,useCallback:function(e,t){return tD(function(){return e},t)},useImperativeHandle:ta,useEffect:ta,useDebugValue:ta,useDeferredValue:function(e,t){return tC(),void 0!==t?t:e},useTransition:function(){return tC(),[!1,tR]},useId:function(){var e=td.treeContext,t=e.overflow;e=((e=e.id)&~(1<<32-tn(e)-1)).toString(32)+t;var n=tH;if(null===n)throw Error(a(404));return t=ty++,e="_"+n.idPrefix+"R_"+e,0<t&&(e+="H"+t.toString(32)),e+"_"},useSyncExternalStore:function(e,t,n){if(void 0===n)throw Error(a(407));return n()},useOptimistic:function(e){return tC(),[e,tO]},useActionState:tj,useFormState:tj,useHostTransitionStatus:function(){return tC(),V},useMemoCache:function(e){for(var t=Array(e),n=0;n<e;n++)t[n]=k;return t},useCacheRefresh:function(){return tL}},tH=null,tW={getCacheForType:function(){throw Error(a(248))},cacheSignal:function(){throw Error(a(248))}};function tV(e){if(void 0===tz)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);tz=t&&t[1]||"",tB=-1<e.stack.indexOf("\n    at")?" (<anonymous>)":-1<e.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+tz+e+tB}var tq=!1;function tG(e,t){if(!e||tq)return"";tq=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(e){var r=e}Reflect.construct(e,[],n)}else{try{n.call()}catch(e){r=e}e.call(n.prototype)}}else{try{throw Error()}catch(e){r=e}(n=e())&&"function"==typeof n.catch&&n.catch(function(){})}}catch(e){if(e&&r&&"string"==typeof e.stack)return[e.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var a=r.DetermineComponentFrameRoot(),o=a[0],s=a[1];if(o&&s){var l=o.split("\n"),u=s.split("\n");for(i=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;if(r===l.length||i===u.length)for(r=l.length-1,i=u.length-1;1<=r&&0<=i&&l[r]!==u[i];)i--;for(;1<=r&&0<=i;r--,i--)if(l[r]!==u[i]){if(1!==r||1!==i)do if(r--,i--,0>i||l[r]!==u[i]){var c="\n"+l[r].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=r&&0<=i)break}}}finally{tq=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?tV(n):""}function t$(e){if("object"==typeof e&&null!==e&&"string"==typeof e.environmentName){var t=e.environmentName;"string"==typeof(e=[e])[0]?e.splice(0,1,"[%s] "+e[0]," "+t+" "):e.splice(0,0,"[%s] "," "+t+" "),e.unshift(console),(t=e2.apply(console.error,e))()}else console.error(e);return null}function tK(e,t,n,r,i,a,o,s,l,u,c){var d=new Set;this.destination=null,this.flushScheduled=!1,this.resumableState=e,this.renderState=t,this.rootFormatContext=n,this.progressiveChunkSize=void 0===r?12800:r,this.status=10,this.fatalError=null,this.pendingRootTasks=this.allPendingTasks=this.nextSegmentId=0,this.completedPreambleSegments=this.completedRootSegment=null,this.byteSize=0,this.abortableTasks=d,this.pingedTasks=[],this.clientRenderedBoundaries=[],this.completedBoundaries=[],this.partialBoundaries=[],this.trackedPostpones=null,this.onError=void 0===i?t$:i,this.onPostpone=void 0===u?ta:u,this.onAllReady=void 0===a?ta:a,this.onShellReady=void 0===o?ta:o,this.onShellError=void 0===s?ta:s,this.onFatalError=void 0===l?ta:l,this.formState=void 0===c?null:c}var tY=null;function tX(e,t){e.pingedTasks.push(t),1===e.pingedTasks.length&&(e.flushScheduled=null!==e.destination,nb(e))}function tZ(e,t,n,r,i){return n={status:0,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,row:t,completedSegments:[],byteSize:0,fallbackAbortableTasks:n,errorDigest:null,contentState:eV(),fallbackState:eV(),contentPreamble:r,fallbackPreamble:i,trackedContentKeyPath:null,trackedFallbackNode:null},null!==t&&(t.pendingTasks++,null!==(r=t.boundaries)&&(e.allPendingTasks++,n.pendingTasks++,r.push(n)),null!==(e=t.inheritedHoistables)&&eQ(n.contentState,e)),n}function tJ(e,t,n,r,i,a,o,s,l,u,c,d,h,p,f){e.allPendingTasks++,null===i?e.pendingRootTasks++:i.pendingTasks++,null!==p&&p.pendingTasks++;var m={replay:null,node:n,childIndex:r,ping:function(){return tX(e,m)},blockedBoundary:i,blockedSegment:a,blockedPreamble:o,hoistableState:s,abortSet:l,keyPath:u,formatContext:c,context:d,treeContext:h,row:p,componentStack:f,thenableState:t};return l.add(m),m}function tQ(e,t,n,r,i,a,o,s,l,u,c,d,h,p){e.allPendingTasks++,null===a?e.pendingRootTasks++:a.pendingTasks++,null!==h&&h.pendingTasks++,n.pendingTasks++;var f={replay:n,node:r,childIndex:i,ping:function(){return tX(e,f)},blockedBoundary:a,blockedSegment:null,blockedPreamble:null,hoistableState:o,abortSet:s,keyPath:l,formatContext:u,context:c,treeContext:d,row:h,componentStack:p,thenableState:t};return s.add(f),f}function t0(e,t,n,r,i,a){return{status:0,parentFlushed:!1,id:-1,index:t,chunks:[],children:[],preambleChildren:[],parentFormatContext:r,boundary:n,lastPushedText:i,textEmbedded:a}}function t1(e){var t=e.node;"object"==typeof t&&null!==t&&t.$$typeof===o&&(e.componentStack={parent:e.componentStack,type:t.type})}function t2(e){return null===e?null:{parent:e.parent,type:"Suspense Fallback"}}function t3(e){var t={};return e&&Object.defineProperty(t,"componentStack",{configurable:!0,enumerable:!0,get:function(){try{var n="",r=e;do n+=function e(t){if("string"==typeof t)return tV(t);if("function"==typeof t)return t.prototype&&t.prototype.isReactComponent?tG(t,!0):tG(t,!1);if("object"==typeof t&&null!==t){switch(t.$$typeof){case p:return tG(t.render,!1);case g:return tG(t.type,!1);case y:var n=t,r=n._payload;n=n._init;try{t=n(r)}catch(e){return tV("Lazy")}return e(t)}if("string"==typeof t.name){s:{r=t.name,n=t.env;var i=t.debugLocation;if(null!=i&&(t=Error.prepareStackTrace,Error.prepareStackTrace=void 0,i=i.stack,Error.prepareStackTrace=t,i.startsWith("Error: react-stack-top-frame\n")&&(i=i.slice(29)),-1!==(t=i.indexOf("\n"))&&(i=i.slice(t+1)),-1!==(t=i.indexOf("react_stack_bottom_frame"))&&(t=i.lastIndexOf("\n",t)),-1!==(t=-1===(i=(t=-1!==t?i=i.slice(0,t):"").lastIndexOf("\n"))?t:t.slice(i+1)).indexOf(r))){r="\n"+t;break s}r=tV(r+(n?" ["+n+"]":""))}return r}}switch(t){case m:return tV("SuspenseList");case f:return tV("Suspense")}return""}(r.type),r=r.parent;while(r)var i=n}catch(e){i="\nError generating stack: "+e.message+"\n"+e.stack}return Object.defineProperty(t,"componentStack",{value:i}),i}}),t}function t5(e,t,n){if(null==(t=(e=e.onError)(t,n))||"string"==typeof t)return t}function t4(e,t){var n=e.onShellError,r=e.onFatalError;n(t),r(t),null!==e.destination?(e.status=14,e.destination.destroy(t)):(e.status=13,e.fatalError=t)}function t9(e,t){t8(e,t.next,t.hoistables)}function t8(e,t,n){for(;null!==t;){null!==n&&(eQ(t.hoistables,n),t.inheritedHoistables=n);var r=t.boundaries;if(null!==r){t.boundaries=null;for(var i=0;i<r.length;i++){var a=r[i];null!==n&&eQ(a.contentState,n),ny(e,a,null,null)}}if(t.pendingTasks--,0<t.pendingTasks)break;n=t.hoistables,t=t.next}}function t6(e,t){var n=t.boundaries;if(null!==n&&t.pendingTasks===n.length){for(var r=!0,i=0;i<n.length;i++){var a=n[i];if(1!==a.pendingTasks||a.parentFlushed||500<a.byteSize){r=!1;break}}r&&t8(e,t,t.hoistables)}}function t7(e){var t={pendingTasks:1,boundaries:null,hoistables:eV(),inheritedHoistables:null,together:!1,next:null};return null!==e&&0<e.pendingTasks&&(t.pendingTasks++,t.boundaries=[],e.next=t),t}function ne(e,t,n,r,i){var a=t.keyPath,o=t.treeContext,s=t.row;t.keyPath=n,n=r.length;var l=null;if(null!==t.replay){var u=t.replay.slots;if(null!==u&&"object"==typeof u)for(var c=0;c<n;c++){var d="backwards"!==i&&"unstable_legacy-backwards"!==i?c:n-1-c,h=r[d];t.row=l=t7(l),t.treeContext=tt(o,n,d);var p=u[d];"number"==typeof p?(ni(e,t,p,h,d),delete u[d]):nd(e,t,h,d),0==--l.pendingTasks&&t9(e,l)}else for(u=0;u<n;u++)d=r[c="backwards"!==i&&"unstable_legacy-backwards"!==i?u:n-1-u],t.row=l=t7(l),t.treeContext=tt(o,n,c),nd(e,t,d,c),0==--l.pendingTasks&&t9(e,l)}else if("backwards"!==i&&"unstable_legacy-backwards"!==i)for(i=0;i<n;i++)u=r[i],t.row=l=t7(l),t.treeContext=tt(o,n,i),nd(e,t,u,i),0==--l.pendingTasks&&t9(e,l);else{for(u=(i=t.blockedSegment).children.length,c=i.chunks.length,d=n-1;0<=d;d--){h=r[d],t.row=l=t7(l),t.treeContext=tt(o,n,d),p=t0(e,c,null,t.formatContext,0!==d||i.lastPushedText,!0),i.children.splice(u,0,p),t.blockedSegment=p;try{nd(e,t,h,d),e1(p.chunks,e.renderState,p.lastPushedText,p.textEmbedded),p.status=1,0==--l.pendingTasks&&t9(e,l)}catch(t){throw p.status=12===e.status?3:4,t}}t.blockedSegment=i,i.lastPushedText=!1}null!==s&&null!==l&&0<l.pendingTasks&&(s.pendingTasks++,l.next=s),t.treeContext=o,t.row=s,t.keyPath=a}function nt(e,t,n,r,i,a){var o=t.thenableState;for(t.thenableState=null,tc={},td=t,th=e,tp=n,tb=ty=0,tx=-1,tw=0,tk=o,e=r(i,a);tv;)tv=!1,tb=ty=0,tx=-1,tw=0,t_+=1,tm=null,e=r(i,a);return tM(),e}function nn(e,t,n,r,i,a,o){var s=!1;if(0!==a&&null!==e.formState){var l=t.blockedSegment;if(null!==l){s=!0,l=l.chunks;for(var u=0;u<a;u++)u===o?l.push("<!--F!-->"):l.push("<!--F-->")}}a=t.keyPath,t.keyPath=n,i?(n=t.treeContext,t.treeContext=tt(n,1,0),nd(e,t,r,-1),t.treeContext=n):s?nd(e,t,r,-1):na(e,t,r,-1),t.keyPath=a}function nr(e,t,n,i,o,s){if("function"==typeof i)if(i.prototype&&i.prototype.isReactComponent){var k=o;if("ref"in o)for(var _ in k={},o)"ref"!==_&&(k[_]=o[_]);var E=i.defaultProps;if(E)for(var I in k===o&&(k=T({},k,o)),E)void 0===k[I]&&(k[I]=E[I]);o=k,k=e4,"object"==typeof(E=i.contextType)&&null!==E&&(k=E._currentValue2);var N=void 0!==(k=new i(o,k)).state?k.state:null;if(k.updater=e7,k.props=o,k.state=N,E={queue:[],replace:!1},k._reactInternals=E,s=i.contextType,k.context="object"==typeof s&&null!==s?s._currentValue2:e4,"function"==typeof(s=i.getDerivedStateFromProps)&&(N=null==(s=s(o,N))?N:T({},N,s),k.state=N),"function"!=typeof i.getDerivedStateFromProps&&"function"!=typeof k.getSnapshotBeforeUpdate&&("function"==typeof k.UNSAFE_componentWillMount||"function"==typeof k.componentWillMount))if(i=k.state,"function"==typeof k.componentWillMount&&k.componentWillMount(),"function"==typeof k.UNSAFE_componentWillMount&&k.UNSAFE_componentWillMount(),i!==k.state&&e7.enqueueReplaceState(k,k.state,null),null!==E.queue&&0<E.queue.length)if(i=E.queue,s=E.replace,E.queue=null,E.replace=!1,s&&1===i.length)k.state=i[0];else{for(E=s?i[0]:k.state,N=!0,s=+!!s;s<i.length;s++)null!=(I="function"==typeof(I=i[s])?I.call(k,E,o,void 0):I)&&(N?(N=!1,E=T({},E,I)):T(E,I));k.state=E}else E.queue=null;if(i=k.render(),12===e.status)throw null;o=t.keyPath,t.keyPath=n,na(e,t,i,-1),t.keyPath=o}else{if(i=nt(e,t,n,i,o,void 0),12===e.status)throw null;nn(e,t,n,i,0!==ty,tb,tx)}else if("string"==typeof i)if(null===(k=t.blockedSegment))k=o.children,E=t.formatContext,N=t.keyPath,t.formatContext=Z(E,i,o),t.keyPath=n,nd(e,t,k,-1),t.formatContext=E,t.keyPath=N;else{if(N=function(e,t,n,i,o,s,l,u,c){switch(t){case"div":case"span":case"svg":case"path":case"g":case"p":case"li":case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":break;case"a":e.push(eS("a"));var d,h=null,p=null;for(d in n)if(M.call(n,d)){var f=n[d];if(null!=f)switch(d){case"children":h=f;break;case"dangerouslySetInnerHTML":p=f;break;case"href":""===f?ei(e,"href",""):ec(e,d,f);break;default:ec(e,d,f)}}if(e.push(">"),ed(e,p,h),"string"==typeof h){e.push(F(h));var m=null}else m=h;return m;case"select":e.push(eS("select"));var g,y=null,b=null;for(g in n)if(M.call(n,g)){var x=n[g];if(null!=x)switch(g){case"children":y=x;break;case"dangerouslySetInnerHTML":b=x;break;case"defaultValue":case"value":break;default:ec(e,g,x)}}return e.push(">"),ed(e,b,y),y;case"option":var w=u.selectedValue;e.push(eS("option"));var k,S=null,_=null,C=null,E=null;for(k in n)if(M.call(n,k)){var I=n[k];if(null!=I)switch(k){case"children":S=I;break;case"selected":C=I;break;case"dangerouslySetInnerHTML":E=I;break;case"value":_=I;default:ec(e,k,I)}}if(null!=w){var N,D,R=null!==_?""+_:(N=S,D="",r.Children.forEach(N,function(e){null!=e&&(D+=e)}),D);if(A(w)){for(var O=0;O<w.length;O++)if(""+w[O]===R){e.push(' selected=""');break}}else""+w===R&&e.push(' selected=""')}else C&&e.push(' selected=""');return e.push(">"),ed(e,E,S),S;case"textarea":e.push(eS("textarea"));var j,L=null,z=null,B=null;for(j in n)if(M.call(n,j)){var H=n[j];if(null!=H)switch(j){case"children":B=H;break;case"value":L=H;break;case"defaultValue":z=H;break;case"dangerouslySetInnerHTML":throw Error(a(91));default:ec(e,j,H)}}if(null===L&&null!==z&&(L=z),e.push(">"),null!=B){if(null!=L)throw Error(a(92));if(A(B)){if(1<B.length)throw Error(a(93));L=""+B[0]}L=""+B}return"string"==typeof L&&"\n"===L[0]&&e.push("\n"),null!==L&&e.push(F(""+L)),null;case"input":e.push(eS("input"));var W,V=null,q=null,$=null,K=null,Y=null,X=null,Z=null,J=null,Q=null;for(W in n)if(M.call(n,W)){var ee=n[W];if(null!=ee)switch(W){case"children":case"dangerouslySetInnerHTML":throw Error(a(399,"input"));case"name":V=ee;break;case"formAction":q=ee;break;case"formEncType":$=ee;break;case"formMethod":K=ee;break;case"formTarget":Y=ee;break;case"defaultChecked":Q=ee;break;case"defaultValue":Z=ee;break;case"checked":J=ee;break;case"value":X=ee;break;default:ec(e,W,ee)}}var et=eu(e,i,o,q,$,K,Y,V);return null!==J?er(e,"checked",J):null!==Q&&er(e,"checked",Q),null!==X?ec(e,"value",X):null!==Z&&ec(e,"value",Z),e.push("/>"),null!=et&&et.forEach(eo,e),null;case"button":e.push(eS("button"));var es,ew=null,ek=null,e_=null,eA=null,eE=null,eT=null,eM=null;for(es in n)if(M.call(n,es)){var eI=n[es];if(null!=eI)switch(es){case"children":ew=eI;break;case"dangerouslySetInnerHTML":ek=eI;break;case"name":e_=eI;break;case"formAction":eA=eI;break;case"formEncType":eE=eI;break;case"formMethod":eT=eI;break;case"formTarget":eM=eI;break;default:ec(e,es,eI)}}var eN=eu(e,i,o,eA,eE,eT,eM,e_);if(e.push(">"),null!=eN&&eN.forEach(eo,e),ed(e,ek,ew),"string"==typeof ew){e.push(F(ew));var eD=null}else eD=ew;return eD;case"form":e.push(eS("form"));var eP,eR=null,eO=null,ej=null,eF=null,eL=null,ez=null;for(eP in n)if(M.call(n,eP)){var eB=n[eP];if(null!=eB)switch(eP){case"children":eR=eB;break;case"dangerouslySetInnerHTML":eO=eB;break;case"action":ej=eB;break;case"encType":eF=eB;break;case"method":eL=eB;break;case"target":ez=eB;break;default:ec(e,eP,eB)}}var eU=null,eH=null;if("function"==typeof ej){var eW=el(i,ej);null!==eW?(ej=eW.action||"",eF=eW.encType,eL=eW.method,ez=eW.target,eU=eW.data,eH=eW.name):(e.push(" ","action",'="',ea,'"'),ez=eL=eF=ej=null,eh(i,o))}if(null!=ej&&ec(e,"action",ej),null!=eF&&ec(e,"encType",eF),null!=eL&&ec(e,"method",eL),null!=ez&&ec(e,"target",ez),e.push(">"),null!==eH&&(e.push('<input type="hidden"'),ei(e,"name",eH),e.push("/>"),null!=eU&&eU.forEach(eo,e)),ed(e,eO,eR),"string"==typeof eR){e.push(F(eR));var eV=null}else eV=eR;return eV;case"menuitem":for(var e$ in e.push(eS("menuitem")),n)if(M.call(n,e$)){var eK=n[e$];if(null!=eK)switch(e$){case"children":case"dangerouslySetInnerHTML":throw Error(a(400));default:ec(e,e$,eK)}}return e.push(">"),null;case"object":e.push(eS("object"));var eY,eX=null,eZ=null;for(eY in n)if(M.call(n,eY)){var eJ=n[eY];if(null!=eJ)switch(eY){case"children":eX=eJ;break;case"dangerouslySetInnerHTML":eZ=eJ;break;case"data":var eQ=U(""+eJ);if(""===eQ)break;e.push(" ","data",'="',F(eQ),'"');break;default:ec(e,eY,eJ)}}if(e.push(">"),ed(e,eZ,eX),"string"==typeof eX){e.push(F(eX));var e0=null}else e0=eX;return e0;case"title":var e1=1&u.tagScope,e2=4&u.tagScope;if(4===u.insertionMode||e1||null!=n.itemProp)var e3=ev(e,n);else e2?e3=null:(ev(o.hoistableChunks,n),e3=void 0);return e3;case"link":var e5=1&u.tagScope,e4=4&u.tagScope,e9=n.rel,e8=n.href,e6=n.precedence;if(4===u.insertionMode||e5||null!=n.itemProp||"string"!=typeof e9||"string"!=typeof e8||""===e8){ep(e,n);var e7=null}else if("stylesheet"===n.rel)if("string"!=typeof e6||null!=n.disabled||n.onLoad||n.onError)e7=ep(e,n);else{var te=o.styles.get(e6),tt=i.styleResources.hasOwnProperty(e8)?i.styleResources[e8]:void 0;if(null!==tt){i.styleResources[e8]=null,te||(te={precedence:F(e6),rules:[],hrefs:[],sheets:new Map},o.styles.set(e6,te));var tn={state:0,props:T({},n,{"data-precedence":n.precedence,precedence:null})};if(tt){2===tt.length&&eq(tn.props,tt);var tr=o.preloads.stylesheets.get(e8);tr&&0<tr.length?tr.length=0:tn.state=1}te.sheets.set(e8,tn),l&&l.stylesheets.add(tn)}else if(te){var ti=te.sheets.get(e8);ti&&l&&l.stylesheets.add(ti)}c&&e.push("<!-- -->"),e7=null}else n.onLoad||n.onError?e7=ep(e,n):(c&&e.push("<!-- -->"),e7=e4?null:ep(o.hoistableChunks,n));return e7;case"script":var ta=1&u.tagScope,to=n.async;if("string"!=typeof n.src||!n.src||!to||"function"==typeof to||"symbol"==typeof to||n.onLoad||n.onError||4===u.insertionMode||ta||null!=n.itemProp)var ts=ey(e,n);else{var tl=n.src;if("module"===n.type)var tu=i.moduleScriptResources,tc=o.preloads.moduleScripts;else tu=i.scriptResources,tc=o.preloads.scripts;var td=tu.hasOwnProperty(tl)?tu[tl]:void 0;if(null!==td){tu[tl]=null;var th=n;if(td){2===td.length&&eq(th=T({},n),td);var tp=tc.get(tl);tp&&(tp.length=0)}var tf=[];o.scripts.add(tf),ey(tf,th)}c&&e.push("<!-- -->"),ts=null}return ts;case"style":var tm=1&u.tagScope,tg=n.precedence,tv=n.href,ty=n.nonce;if(4===u.insertionMode||tm||null!=n.itemProp||"string"!=typeof tg||"string"!=typeof tv||""===tv){e.push(eS("style"));var tb,tx=null,tw=null;for(tb in n)if(M.call(n,tb)){var tk=n[tb];if(null!=tk)switch(tb){case"children":tx=tk;break;case"dangerouslySetInnerHTML":tw=tk;break;default:ec(e,tb,tk)}}e.push(">");var tS=Array.isArray(tx)?2>tx.length?tx[0]:null:tx;"function"!=typeof tS&&"symbol"!=typeof tS&&null!=tS&&e.push((""+tS).replace(ef,em)),ed(e,tw,tx),e.push(eC("style"));var t_=null}else{var tC=o.styles.get(tg);if(null!==(i.styleResources.hasOwnProperty(tv)?i.styleResources[tv]:void 0)){i.styleResources[tv]=null,tC||(tC={precedence:F(tg),rules:[],hrefs:[],sheets:new Map},o.styles.set(tg,tC));var tA=o.nonce.style;if(!tA||tA===ty){tC.hrefs.push(F(tv));var tE,tT=tC.rules,tM=null,tI=null;for(tE in n)if(M.call(n,tE)){var tN=n[tE];if(null!=tN)switch(tE){case"children":tM=tN;break;case"dangerouslySetInnerHTML":tI=tN}}var tD=Array.isArray(tM)?2>tM.length?tM[0]:null:tM;"function"!=typeof tD&&"symbol"!=typeof tD&&null!=tD&&tT.push((""+tD).replace(ef,em)),ed(tT,tI,tM)}}tC&&l&&l.styles.add(tC),c&&e.push("<!-- -->"),t_=void 0}return t_;case"meta":var tP=1&u.tagScope,tR=4&u.tagScope;if(4===u.insertionMode||tP||null!=n.itemProp)var tO=eg(e,n,"meta");else c&&e.push("<!-- -->"),tO=tR?null:"string"==typeof n.charSet?eg(o.charsetChunks,n,"meta"):"viewport"===n.name?eg(o.viewportChunks,n,"meta"):eg(o.hoistableChunks,n,"meta");return tO;case"listing":case"pre":e.push(eS(t));var tj,tF=null,tL=null;for(tj in n)if(M.call(n,tj)){var tz=n[tj];if(null!=tz)switch(tj){case"children":tF=tz;break;case"dangerouslySetInnerHTML":tL=tz;break;default:ec(e,tj,tz)}}if(e.push(">"),null!=tL){if(null!=tF)throw Error(a(60));if("object"!=typeof tL||!("__html"in tL))throw Error(a(61));var tB=tL.__html;null!=tB&&("string"==typeof tB&&0<tB.length&&"\n"===tB[0]?e.push("\n",tB):e.push(""+tB))}return"string"==typeof tF&&"\n"===tF[0]&&e.push("\n"),tF;case"img":var tU=3&u.tagScope,tH=n.src,tW=n.srcSet;if(!("lazy"===n.loading||!tH&&!tW||"string"!=typeof tH&&null!=tH||"string"!=typeof tW&&null!=tW||"low"===n.fetchPriority||tU)&&("string"!=typeof tH||":"!==tH[4]||"d"!==tH[0]&&"D"!==tH[0]||"a"!==tH[1]&&"A"!==tH[1]||"t"!==tH[2]&&"T"!==tH[2]||"a"!==tH[3]&&"A"!==tH[3])&&("string"!=typeof tW||":"!==tW[4]||"d"!==tW[0]&&"D"!==tW[0]||"a"!==tW[1]&&"A"!==tW[1]||"t"!==tW[2]&&"T"!==tW[2]||"a"!==tW[3]&&"A"!==tW[3])){var tV="string"==typeof n.sizes?n.sizes:void 0,tq=tW?tW+"\n"+(tV||""):tH,tG=o.preloads.images,t$=tG.get(tq);if(t$)("high"===n.fetchPriority||10>o.highImagePreloads.size)&&(tG.delete(tq),o.highImagePreloads.add(t$));else if(!i.imageResources.hasOwnProperty(tq)){i.imageResources[tq]=G;var tK,tY=n.crossOrigin,tX="string"==typeof tY?"use-credentials"===tY?tY:"":void 0,tZ=o.headers;tZ&&0<tZ.remainingCapacity&&"string"!=typeof n.srcSet&&("high"===n.fetchPriority||500>tZ.highImagePreloads.length)&&(tK=eG(tH,"image",{imageSrcSet:n.srcSet,imageSizes:n.sizes,crossOrigin:tX,integrity:n.integrity,nonce:n.nonce,type:n.type,fetchPriority:n.fetchPriority,referrerPolicy:n.refererPolicy}),0<=(tZ.remainingCapacity-=tK.length+2))?(o.resets.image[tq]=G,tZ.highImagePreloads&&(tZ.highImagePreloads+=", "),tZ.highImagePreloads+=tK):(ep(t$=[],{rel:"preload",as:"image",href:tW?void 0:tH,imageSrcSet:tW,imageSizes:tV,crossOrigin:tX,integrity:n.integrity,type:n.type,fetchPriority:n.fetchPriority,referrerPolicy:n.referrerPolicy}),"high"===n.fetchPriority||10>o.highImagePreloads.size?o.highImagePreloads.add(t$):(o.bulkPreloads.add(t$),tG.set(tq,t$)))}}return eg(e,n,"img");case"base":case"area":case"br":case"col":case"embed":case"hr":case"keygen":case"param":case"source":case"track":case"wbr":return eg(e,n,t);case"head":if(2>u.insertionMode){var tJ=s||o.preamble;if(tJ.headChunks)throw Error(a(545,"`<head>`"));null!==s&&e.push("<!--head-->"),tJ.headChunks=[];var tQ=eb(tJ.headChunks,n,"head")}else tQ=ex(e,n,"head");return tQ;case"body":if(2>u.insertionMode){var t0=s||o.preamble;if(t0.bodyChunks)throw Error(a(545,"`<body>`"));null!==s&&e.push("<!--body-->"),t0.bodyChunks=[];var t1=eb(t0.bodyChunks,n,"body")}else t1=ex(e,n,"body");return t1;case"html":if(0===u.insertionMode){var t2=s||o.preamble;if(t2.htmlChunks)throw Error(a(545,"`<html>`"));null!==s&&e.push("<!--html-->"),t2.htmlChunks=[""];var t3=eb(t2.htmlChunks,n,"html")}else t3=ex(e,n,"html");return t3;default:if(-1!==t.indexOf("-")){e.push(eS(t));var t5,t4=null,t9=null;for(t5 in n)if(M.call(n,t5)){var t8=n[t5];if(null!=t8){var t6=t5;switch(t5){case"children":t4=t8;break;case"dangerouslySetInnerHTML":t9=t8;break;case"style":en(e,t8);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"ref":break;case"className":t6="class";default:if(P(t5)&&"function"!=typeof t8&&"symbol"!=typeof t8&&!1!==t8){if(!0===t8)t8="";else if("object"==typeof t8)continue;e.push(" ",t6,'="',F(t8),'"')}}}}return e.push(">"),ed(e,t9,t4),t4}}return ex(e,n,t)}(k.chunks,i,o,e.resumableState,e.renderState,t.blockedPreamble,t.hoistableState,t.formatContext,k.lastPushedText),k.lastPushedText=!1,E=t.formatContext,s=t.keyPath,t.keyPath=n,3===(t.formatContext=Z(E,i,o)).insertionMode){n=t0(e,0,null,t.formatContext,!1,!1),k.preambleChildren.push(n),t.blockedSegment=n;try{n.status=6,nd(e,t,N,-1),e1(n.chunks,e.renderState,n.lastPushedText,n.textEmbedded),n.status=1}finally{t.blockedSegment=k}}else nd(e,t,N,-1);t.formatContext=E,t.keyPath=s;s:{switch(t=k.chunks,e=e.resumableState,i){case"title":case"style":case"script":case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break s;case"body":if(1>=E.insertionMode){e.hasBody=!0;break s}break;case"html":if(0===E.insertionMode){e.hasHtml=!0;break s}break;case"head":if(1>=E.insertionMode)break s}t.push(eC(i))}k.lastPushedText=!1}else{switch(i){case w:case u:case c:case l:i=t.keyPath,t.keyPath=n,na(e,t,o.children,-1),t.keyPath=i;return;case x:null===(i=t.blockedSegment)?"hidden"!==o.mode&&(i=t.keyPath,t.keyPath=n,nd(e,t,o.children,-1),t.keyPath=i):"hidden"!==o.mode&&(e.renderState.generateStaticMarkup||i.chunks.push("<!--&-->"),i.lastPushedText=!1,k=t.keyPath,t.keyPath=n,nd(e,t,o.children,-1),t.keyPath=k,e.renderState.generateStaticMarkup||i.chunks.push("<!--/&-->"),i.lastPushedText=!1);return;case m:s:{if(i=o.children,"forwards"===(o=o.revealOrder)||"backwards"===o||"unstable_legacy-backwards"===o){if(A(i)){ne(e,t,n,i,o);break s}if((k=C(i))&&(k=k.call(i))){if(!(E=k.next()).done){do E=k.next();while(!E.done)ne(e,t,n,i,o)}break s}}"together"===o?(o=t.keyPath,k=t.row,(E=t.row=t7(null)).boundaries=[],E.together=!0,t.keyPath=n,na(e,t,i,-1),0==--E.pendingTasks&&t9(e,E),t.keyPath=o,t.row=k,null!==k&&0<E.pendingTasks&&(k.pendingTasks++,E.next=k)):(o=t.keyPath,t.keyPath=n,na(e,t,i,-1),t.keyPath=o)}return;case S:case b:throw Error(a(343));case f:s:if(null!==t.replay){i=t.keyPath,k=t.formatContext,E=t.row,t.keyPath=n,t.formatContext=ee(e.resumableState,k),t.row=null,n=o.children;try{nd(e,t,n,-1)}finally{t.keyPath=i,t.formatContext=k,t.row=E}}else{i=t.keyPath,s=t.formatContext;var D=t.row,R=t.blockedBoundary;I=t.blockedPreamble;var O=t.hoistableState;_=t.blockedSegment;var j=o.fallback;o=o.children;var L=new Set,z=tZ(e,t.row,L,null,null);null!==e.trackedPostpones&&(z.trackedContentKeyPath=n);var B=t0(e,_.chunks.length,z,t.formatContext,!1,!1);_.children.push(B),_.lastPushedText=!1;var H=t0(e,0,null,t.formatContext,!1,!1);if(H.parentFlushed=!0,null!==e.trackedPostpones){k=t.componentStack,N=[(E=[n[0],"Suspense Fallback",n[2]])[1],E[2],[],null],e.trackedPostpones.workingMap.set(E,N),z.trackedFallbackNode=N,t.blockedSegment=B,t.blockedPreamble=z.fallbackPreamble,t.keyPath=E,t.formatContext=Q(e.resumableState,s),t.componentStack=t2(k),B.status=6;try{nd(e,t,j,-1),e1(B.chunks,e.renderState,B.lastPushedText,B.textEmbedded),B.status=1}catch(t){throw B.status=12===e.status?3:4,t}finally{t.blockedSegment=_,t.blockedPreamble=I,t.keyPath=i,t.formatContext=s}t1(t=tJ(e,null,o,-1,z,H,z.contentPreamble,z.contentState,t.abortSet,n,ee(e.resumableState,t.formatContext),t.context,t.treeContext,null,k)),e.pingedTasks.push(t)}else{t.blockedBoundary=z,t.blockedPreamble=z.contentPreamble,t.hoistableState=z.contentState,t.blockedSegment=H,t.keyPath=n,t.formatContext=ee(e.resumableState,s),t.row=null,H.status=6;try{if(nd(e,t,o,-1),e1(H.chunks,e.renderState,H.lastPushedText,H.textEmbedded),H.status=1,nv(z,H),0===z.pendingTasks&&0===z.status){if(z.status=1,!(500<z.byteSize)){null!==D&&0==--D.pendingTasks&&t9(e,D),0===e.pendingRootTasks&&t.blockedPreamble&&nk(e);break s}}else null!==D&&D.together&&t6(e,D)}catch(n){z.status=4,12===e.status?(H.status=3,k=e.fatalError):(H.status=4,k=n),z.errorDigest=N=t5(e,k,E=t3(t.componentStack)),nl(e,z)}finally{t.blockedBoundary=R,t.blockedPreamble=I,t.hoistableState=O,t.blockedSegment=_,t.keyPath=i,t.formatContext=s,t.row=D}t1(t=tJ(e,null,j,-1,R,B,z.fallbackPreamble,z.fallbackState,L,[n[0],"Suspense Fallback",n[2]],Q(e.resumableState,t.formatContext),t.context,t.treeContext,t.row,t2(t.componentStack))),e.pingedTasks.push(t)}}return}if("object"==typeof i&&null!==i)switch(i.$$typeof){case p:if("ref"in o)for(j in k={},o)"ref"!==j&&(k[j]=o[j]);else k=o;i=nt(e,t,n,i.render,k,s),nn(e,t,n,i,0!==ty,tb,tx);return;case g:nr(e,t,n,i.type,o,s);return;case h:if(E=o.children,k=t.keyPath,o=o.value,N=i._currentValue2,i._currentValue2=o,e9=i={parent:s=e9,depth:null===s?0:s.depth+1,context:i,parentValue:N,value:o},t.context=i,t.keyPath=n,na(e,t,E,-1),null===(e=e9))throw Error(a(403));e.context._currentValue2=e.parentValue,e=e9=e.parent,t.context=e,t.keyPath=k;return;case d:i=(o=o.children)(i._context._currentValue2),o=t.keyPath,t.keyPath=n,na(e,t,i,-1),t.keyPath=o;return;case y:if(i=(k=i._init)(i._payload),12===e.status)throw null;nr(e,t,n,i,o,s);return}throw Error(a(130,null==i?i:typeof i,""))}}function ni(e,t,n,r,i){var a=t.replay,o=t.blockedBoundary,s=t0(e,0,null,t.formatContext,!1,!1);s.id=n,s.parentFlushed=!0;try{t.replay=null,t.blockedSegment=s,nd(e,t,r,i),s.status=1,null===o?e.completedRootSegment=s:(nv(o,s),o.parentFlushed&&e.partialBoundaries.push(o))}finally{t.replay=a,t.blockedSegment=null}}function na(e,t,n,r){null!==t.replay&&"number"==typeof t.replay.slots?ni(e,t,t.replay.slots,n,r):(t.node=n,t.childIndex=r,n=t.componentStack,t1(t),no(e,t),t.componentStack=n)}function no(e,t){var n=t.node,r=t.childIndex;if(null!==n){if("object"==typeof n){switch(n.$$typeof){case o:var i=n.type,l=n.key,u=n.props,c=void 0!==(n=u.ref)?n:null,d=e5(i),p=null==l?-1===r?0:r:l;if(l=[t.keyPath,d,p],null!==t.replay)s:{var m=t.replay;for(n=0,r=m.nodes;n<r.length;n++){var g=r[n];if(p===g[1]){if(4===g.length){if(null!==d&&d!==g[0])throw Error(a(490,g[0],d));var b=g[2];d=g[3],p=t.node,t.replay={nodes:b,slots:d,pendingTasks:1};try{if(nr(e,t,l,i,u,c),1===t.replay.pendingTasks&&0<t.replay.nodes.length)throw Error(a(488));t.replay.pendingTasks--}catch(a){if("object"==typeof a&&null!==a&&(a===to||"function"==typeof a.then))throw t.node===p?t.replay=m:r.splice(n,1),a;t.replay.pendingTasks--,u=t3(t.componentStack),l=e,e=t.blockedBoundary,u=t5(l,i=a,u),np(l,e,b,d,i,u)}t.replay=m}else{if(i!==f)throw Error(a(490,"Suspense",e5(i)||"Unknown"));l:{m=void 0,i=g[5],c=g[2],d=g[3],p=null===g[4]?[]:g[4][2],g=null===g[4]?null:g[4][3];var x=t.keyPath,w=t.formatContext,k=t.row,S=t.replay,_=t.blockedBoundary,E=t.hoistableState,T=u.children,M=u.fallback,I=new Set;(u=tZ(e,t.row,I,null,null)).parentFlushed=!0,u.rootSegmentID=i,t.blockedBoundary=u,t.hoistableState=u.contentState,t.keyPath=l,t.formatContext=ee(e.resumableState,w),t.row=null,t.replay={nodes:c,slots:d,pendingTasks:1};try{if(nd(e,t,T,-1),1===t.replay.pendingTasks&&0<t.replay.nodes.length)throw Error(a(488));if(t.replay.pendingTasks--,0===u.pendingTasks&&0===u.status){u.status=1,e.completedBoundaries.push(u);break l}}catch(n){u.status=4,m=t5(e,n,b=t3(t.componentStack)),u.errorDigest=m,t.replay.pendingTasks--,e.clientRenderedBoundaries.push(u)}finally{t.blockedBoundary=_,t.hoistableState=E,t.replay=S,t.keyPath=x,t.formatContext=w,t.row=k}t1(b=tQ(e,null,{nodes:p,slots:g,pendingTasks:0},M,-1,_,u.fallbackState,I,[l[0],"Suspense Fallback",l[2]],Q(e.resumableState,t.formatContext),t.context,t.treeContext,t.row,t2(t.componentStack))),e.pingedTasks.push(b)}}r.splice(n,1);break s}}}else nr(e,t,l,i,u,c);return;case s:throw Error(a(257));case y:if(n=(b=n._init)(n._payload),12===e.status)throw null;na(e,t,n,r);return}if(A(n))return void ns(e,t,n,r);if((b=C(n))&&(b=b.call(n))){if(!(n=b.next()).done){u=[];do u.push(n.value),n=b.next();while(!n.done)ns(e,t,u,r)}return}if("function"==typeof n.then)return t.thenableState=null,na(e,t,tF(n),r);if(n.$$typeof===h)return na(e,t,n._currentValue2,r);throw Error(a(31,"[object Object]"===(r=Object.prototype.toString.call(n))?"object with keys {"+Object.keys(n).join(", ")+"}":r))}"string"==typeof n?null!==(r=t.blockedSegment)&&(r.lastPushedText=e0(r.chunks,n,e.renderState,r.lastPushedText)):("number"==typeof n||"bigint"==typeof n)&&null!==(r=t.blockedSegment)&&(r.lastPushedText=e0(r.chunks,""+n,e.renderState,r.lastPushedText))}}function ns(e,t,n,r){var i=t.keyPath;if(-1!==r&&(t.keyPath=[t.keyPath,"Fragment",r],null!==t.replay)){for(var o=t.replay,s=o.nodes,l=0;l<s.length;l++){var u=s[l];if(u[1]===r){t.replay={nodes:r=u[2],slots:u=u[3],pendingTasks:1};try{if(ns(e,t,n,-1),1===t.replay.pendingTasks&&0<t.replay.nodes.length)throw Error(a(488));t.replay.pendingTasks--}catch(i){if("object"==typeof i&&null!==i&&(i===to||"function"==typeof i.then))throw i;t.replay.pendingTasks--,n=t3(t.componentStack);var c=t.blockedBoundary;n=t5(e,i,n),np(e,c,r,u,i,n)}t.replay=o,s.splice(l,1);break}}t.keyPath=i;return}if(o=t.treeContext,s=n.length,null!==t.replay&&null!==(l=t.replay.slots)&&"object"==typeof l){for(r=0;r<s;r++)u=n[r],t.treeContext=tt(o,s,r),"number"==typeof(c=l[r])?(ni(e,t,c,u,r),delete l[r]):nd(e,t,u,r);t.treeContext=o,t.keyPath=i;return}for(l=0;l<s;l++)r=n[l],t.treeContext=tt(o,s,l),nd(e,t,r,l);t.treeContext=o,t.keyPath=i}function nl(e,t){null!==(e=e.trackedPostpones)&&null!==(t=t.trackedContentKeyPath)&&void 0!==(t=e.workingMap.get(t))&&(t.length=4,t[2]=[],t[3]=null)}function nu(e,t,n){return tQ(e,n,t.replay,t.node,t.childIndex,t.blockedBoundary,t.hoistableState,t.abortSet,t.keyPath,t.formatContext,t.context,t.treeContext,t.row,t.componentStack)}function nc(e,t,n){var r=t.blockedSegment,i=t0(e,r.chunks.length,null,t.formatContext,r.lastPushedText,!0);return r.children.push(i),r.lastPushedText=!1,tJ(e,n,t.node,t.childIndex,t.blockedBoundary,i,t.blockedPreamble,t.hoistableState,t.abortSet,t.keyPath,t.formatContext,t.context,t.treeContext,t.row,t.componentStack)}function nd(e,t,n,r){var i=t.formatContext,a=t.context,o=t.keyPath,s=t.treeContext,l=t.componentStack,u=t.blockedSegment;if(null===u){u=t.replay;try{return na(e,t,n,r)}catch(c){if(tM(),"object"==typeof(n=c===to?tl():c)&&null!==n){if("function"==typeof n.then){e=nu(e,t,r=tT()).ping,n.then(e,e),t.formatContext=i,t.context=a,t.keyPath=o,t.treeContext=s,t.componentStack=l,t.replay=u,e6(a);return}if("Maximum call stack size exceeded"===n.message){n=nu(e,t,n=tT()),e.pingedTasks.push(n),t.formatContext=i,t.context=a,t.keyPath=o,t.treeContext=s,t.componentStack=l,t.replay=u,e6(a);return}}}}else{var c=u.children.length,d=u.chunks.length;try{return na(e,t,n,r)}catch(r){if(tM(),u.children.length=c,u.chunks.length=d,"object"==typeof(n=r===to?tl():r)&&null!==n){if("function"==typeof n.then){u=n,e=nc(e,t,n=tT()).ping,u.then(e,e),t.formatContext=i,t.context=a,t.keyPath=o,t.treeContext=s,t.componentStack=l,e6(a);return}if("Maximum call stack size exceeded"===n.message){u=nc(e,t,u=tT()),e.pingedTasks.push(u),t.formatContext=i,t.context=a,t.keyPath=o,t.treeContext=s,t.componentStack=l,e6(a);return}}}}throw t.formatContext=i,t.context=a,t.keyPath=o,t.treeContext=s,e6(a),n}function nh(e){var t=e.blockedBoundary,n=e.blockedSegment;null!==n&&(n.status=3,ny(this,t,e.row,n))}function np(e,t,n,r,i,o){for(var s=0;s<n.length;s++){var l=n[s];if(4===l.length)np(e,t,l[2],l[3],i,o);else{l=l[5];var u=tZ(e,null,new Set,null,null);u.parentFlushed=!0,u.rootSegmentID=l,u.status=4,u.errorDigest=o,u.parentFlushed&&e.clientRenderedBoundaries.push(u)}}if(n.length=0,null!==r){if(null===t)throw Error(a(487));if(4!==t.status&&(t.status=4,t.errorDigest=o,t.parentFlushed&&e.clientRenderedBoundaries.push(t)),"object"==typeof r)for(var c in r)delete r[c]}}function nf(e,t){try{var n=e.renderState,r=n.onHeaders;if(r){var i=n.headers;if(i){n.headers=null;var a=i.preconnects;if(i.fontPreloads&&(a&&(a+=", "),a+=i.fontPreloads),i.highImagePreloads&&(a&&(a+=", "),a+=i.highImagePreloads),!t){var o=n.styles.values(),s=o.next();l:for(;0<i.remainingCapacity&&!s.done;s=o.next())for(var l=s.value.sheets.values(),u=l.next();0<i.remainingCapacity&&!u.done;u=l.next()){var c=u.value,d=c.props,h=d.href,p=c.props,f=eG(p.href,"style",{crossOrigin:p.crossOrigin,integrity:p.integrity,nonce:p.nonce,type:p.type,fetchPriority:p.fetchPriority,referrerPolicy:p.referrerPolicy,media:p.media});if(0<=(i.remainingCapacity-=f.length+2))n.resets.style[h]=G,a&&(a+=", "),a+=f,n.resets.style[h]="string"==typeof d.crossOrigin||"string"==typeof d.integrity?[d.crossOrigin,d.integrity]:G;else break l}}r(a?{Link:a}:{})}}}catch(t){t5(e,t,{})}}function nm(e){null===e.trackedPostpones&&nf(e,!0),null===e.trackedPostpones&&nk(e),e.onShellError=ta,(e=e.onShellReady)()}function ng(e){nf(e,null===e.trackedPostpones||null===e.completedRootSegment||5!==e.completedRootSegment.status),nk(e),(e=e.onAllReady)()}function nv(e,t){if(0===t.chunks.length&&1===t.children.length&&null===t.children[0].boundary&&-1===t.children[0].id){var n=t.children[0];n.id=t.id,n.parentFlushed=!0,1!==n.status&&3!==n.status&&4!==n.status||nv(e,n)}else e.completedSegments.push(t)}function ny(e,t,n,r){if(null!==n&&(0==--n.pendingTasks?t9(e,n):n.together&&t6(e,n)),e.allPendingTasks--,null===t){if(null!==r&&r.parentFlushed){if(null!==e.completedRootSegment)throw Error(a(389));e.completedRootSegment=r}e.pendingRootTasks--,0===e.pendingRootTasks&&nm(e)}else if(t.pendingTasks--,4!==t.status)if(0===t.pendingTasks){if(0===t.status&&(t.status=1),null!==r&&r.parentFlushed&&(1===r.status||3===r.status)&&nv(t,r),t.parentFlushed&&e.completedBoundaries.push(t),1===t.status)null!==(n=t.row)&&eQ(n.hoistables,t.contentState),500<t.byteSize||(t.fallbackAbortableTasks.forEach(nh,e),t.fallbackAbortableTasks.clear(),null!==n&&0==--n.pendingTasks&&t9(e,n)),0===e.pendingRootTasks&&null===e.trackedPostpones&&null!==t.contentPreamble&&nk(e);else if(5===t.status&&null!==(t=t.row)){if(null!==e.trackedPostpones){n=e.trackedPostpones;var i=t.next;if(null!==i&&null!==(r=i.boundaries))for(i.boundaries=null,i=0;i<r.length;i++){var o=r[i],s=e,l=n;if(o.status=5,o.rootSegmentID=s.nextSegmentId++,null===(s=o.trackedContentKeyPath))throw Error(a(486));var u=o.trackedFallbackNode,c=[],d=l.workingMap.get(s);void 0===d?(u=[s[1],s[2],c,null,u,o.rootSegmentID],l.workingMap.set(s,u),function e(t,n,r){if(null===n)r.rootNodes.push(t);else{var i=r.workingMap,a=i.get(n);void 0===a&&(a=[n[1],n[2],[],null],i.set(n,a),e(a,n[0],r)),a[2].push(t)}}(u,s[0],l)):(d[4]=u,d[5]=o.rootSegmentID),ny(e,o,null,null)}}0==--t.pendingTasks&&t9(e,t)}}else null===r||!r.parentFlushed||1!==r.status&&3!==r.status||(nv(t,r),1===t.completedSegments.length&&t.parentFlushed&&e.partialBoundaries.push(t)),null!==(t=t.row)&&t.together&&t6(e,t);0===e.allPendingTasks&&ng(e)}function nb(e){if(14!==e.status&&13!==e.status){var t=e9,n=H.H;H.H=tU;var r=H.A;H.A=tW;var i=tY;tY=e;var o=tH;tH=e.resumableState;try{var s,l=e.pingedTasks;for(s=0;s<l.length;s++){var u=l[s],c=e,d=u.blockedSegment;if(null===d){var h=c;if(0!==u.replay.pendingTasks){e6(u.context);try{if("number"==typeof u.replay.slots?ni(h,u,u.replay.slots,u.node,u.childIndex):no(h,u),1===u.replay.pendingTasks&&0<u.replay.nodes.length)throw Error(a(488));u.replay.pendingTasks--,u.abortSet.delete(u),ny(h,u.blockedBoundary,u.row,null)}catch(e){tM();var p=e===to?tl():e;if("object"==typeof p&&null!==p&&"function"==typeof p.then){var f=u.ping;p.then(f,f),u.thenableState=tT()}else{u.replay.pendingTasks--,u.abortSet.delete(u);var m=t3(u.componentStack);c=void 0;var g=h,y=u.blockedBoundary,b=12===h.status?h.fatalError:p,x=u.replay.nodes,w=u.replay.slots;c=t5(g,b,m),np(g,y,x,w,b,c),h.pendingRootTasks--,0===h.pendingRootTasks&&nm(h),h.allPendingTasks--,0===h.allPendingTasks&&ng(h)}}finally{}}}else if(h=void 0,g=d,0===g.status){g.status=6,e6(u.context);var k=g.children.length,S=g.chunks.length;try{no(c,u),e1(g.chunks,c.renderState,g.lastPushedText,g.textEmbedded),u.abortSet.delete(u),g.status=1,ny(c,u.blockedBoundary,u.row,g)}catch(e){tM(),g.children.length=k,g.chunks.length=S;var _=e===to?tl():12===c.status?c.fatalError:e;if("object"==typeof _&&null!==_&&"function"==typeof _.then){g.status=0,u.thenableState=tT();var C=u.ping;_.then(C,C)}else{var A=t3(u.componentStack);u.abortSet.delete(u),g.status=4;var E=u.blockedBoundary,T=u.row;if(null!==T&&0==--T.pendingTasks&&t9(c,T),c.allPendingTasks--,h=t5(c,_,A),null===E)t4(c,_);else if(E.pendingTasks--,4!==E.status){E.status=4,E.errorDigest=h,nl(c,E);var M=E.row;null!==M&&0==--M.pendingTasks&&t9(c,M),E.parentFlushed&&c.clientRenderedBoundaries.push(E),0===c.pendingRootTasks&&null===c.trackedPostpones&&null!==E.contentPreamble&&nk(c)}0===c.allPendingTasks&&ng(c)}}finally{}}}l.splice(0,s),null!==e.destination&&nM(e,e.destination)}catch(t){t5(e,t,{}),t4(e,t)}finally{tH=o,H.H=n,H.A=r,n===tU&&e6(t),tY=i}}}function nx(e,t,n){t.preambleChildren.length&&n.push(t.preambleChildren);for(var r=!1,i=0;i<t.children.length;i++)r=nw(e,t.children[i],n)||r;return r}function nw(e,t,n){var r=t.boundary;if(null===r)return nx(e,t,n);var i=r.contentPreamble,o=r.fallbackPreamble;if(null===i||null===o)return!1;switch(r.status){case 1:if(eA(e.renderState,i),!(t=r.completedSegments[0]))throw Error(a(391));return nx(e,t,n);case 5:if(null!==e.trackedPostpones)return!0;case 4:if(1===t.status)return eA(e.renderState,o),nx(e,t,n);default:return!0}}function nk(e){if(e.completedRootSegment&&null===e.completedPreambleSegments){var t=[],n=nw(e,e.completedRootSegment,t),r=e.renderState.preamble;(!1===n||r.headChunks&&r.bodyChunks)&&(e.completedPreambleSegments=t)}}function nS(e,t,n,r){switch(n.parentFlushed=!0,n.status){case 0:n.id=e.nextSegmentId++;case 5:return r=n.id,n.lastPushedText=!1,n.textEmbedded=!1,e=e.renderState,t.push('<template id="'),t.push(e.placeholderPrefix),e=r.toString(16),t.push(e),t.push('"></template>');case 1:n.status=2;var i=!0,o=n.chunks,s=0;n=n.children;for(var l=0;l<n.length;l++){for(i=n[l];s<i.index;s++)t.push(o[s]);i=nC(e,t,i,r)}for(;s<o.length-1;s++)t.push(o[s]);return s<o.length&&(i=t.push(o[s])),i;case 3:return!0;default:throw Error(a(390))}}var n_=0;function nC(e,t,n,r){var i=n.boundary;if(null===i)return nS(e,t,n,r);if(i.parentFlushed=!0,4===i.status){var o=i.row;return null!==o&&0==--o.pendingTasks&&t9(e,o),e.renderState.generateStaticMarkup||(i=i.errorDigest,t.push("<!--$!-->"),t.push("<template"),i&&(t.push(' data-dgst="'),i=F(i),t.push(i),t.push('"')),t.push("></template>")),nS(e,t,n,r),e=!!e.renderState.generateStaticMarkup||t.push("<!--/$-->")}if(1!==i.status)return 0===i.status&&(i.rootSegmentID=e.nextSegmentId++),0<i.completedSegments.length&&e.partialBoundaries.push(i),eT(t,e.renderState,i.rootSegmentID),r&&eQ(r,i.fallbackState),nS(e,t,n,r),t.push("<!--/$-->");if(500<i.byteSize&&n_+i.byteSize>e.progressiveChunkSize)return i.rootSegmentID=e.nextSegmentId++,e.completedBoundaries.push(i),eT(t,e.renderState,i.rootSegmentID),nS(e,t,n,r),t.push("<!--/$-->");if(n_+=i.byteSize,r&&eQ(r,i.contentState),null!==(n=i.row)&&500<i.byteSize&&0==--n.pendingTasks&&t9(e,n),e.renderState.generateStaticMarkup||t.push("<!--$-->"),1!==(n=i.completedSegments).length)throw Error(a(391));return nC(e,t,n[0],r),e=!!e.renderState.generateStaticMarkup||t.push("<!--/$-->")}function nA(e,t,n,r){switch(!function(e,t,n,r){switch(n.insertionMode){case 0:case 1:case 3:case 2:return e.push('<div hidden id="'),e.push(t.segmentPrefix),t=r.toString(16),e.push(t),e.push('">');case 4:return e.push('<svg aria-hidden="true" style="display:none" id="'),e.push(t.segmentPrefix),t=r.toString(16),e.push(t),e.push('">');case 5:return e.push('<math aria-hidden="true" style="display:none" id="'),e.push(t.segmentPrefix),t=r.toString(16),e.push(t),e.push('">');case 6:return e.push('<table hidden id="'),e.push(t.segmentPrefix),t=r.toString(16),e.push(t),e.push('">');case 7:return e.push('<table hidden><tbody id="'),e.push(t.segmentPrefix),t=r.toString(16),e.push(t),e.push('">');case 8:return e.push('<table hidden><tr id="'),e.push(t.segmentPrefix),t=r.toString(16),e.push(t),e.push('">');case 9:return e.push('<table hidden><colgroup id="'),e.push(t.segmentPrefix),t=r.toString(16),e.push(t),e.push('">');default:throw Error(a(397))}}(t,e.renderState,n.parentFormatContext,n.id),nC(e,t,n,r),n.parentFormatContext.insertionMode){case 0:case 1:case 3:case 2:return t.push("</div>");case 4:return t.push("</svg>");case 5:return t.push("</math>");case 6:return t.push("</table>");case 7:return t.push("</tbody></table>");case 8:return t.push("</tr></table>");case 9:return t.push("</colgroup></table>");default:throw Error(a(397))}}function nE(e,t,n){n_=n.byteSize;for(var r,i,o=n.completedSegments,s=0;s<o.length;s++)nT(e,t,n,o[s]);o.length=0,null!==(o=n.row)&&500<n.byteSize&&0==--o.pendingTasks&&t9(e,o),ej(t,n.contentState,e.renderState),o=e.resumableState,e=e.renderState,s=n.rootSegmentID,n=n.contentState;var l=e.stylesToHoist;return e.stylesToHoist=!1,t.push(e.startInlineScript),t.push(">"),l?(0==(4&o.instructions)&&(o.instructions|=4,t.push('$RX=function(b,c,d,e,f){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),f&&(a.cstck=f),b._reactRetry&&b._reactRetry())};')),0==(2&o.instructions)&&(o.instructions|=2,t.push('$RB=[];$RV=function(b){$RT=performance.now();for(var a=0;a<b.length;a+=2){var c=b[a],e=b[a+1];null!==e.parentNode&&e.parentNode.removeChild(e);var f=c.parentNode;if(f){var g=c.previousSibling,h=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d||"/&"===d)if(0===h)break;else h--;else"$"!==d&&"$?"!==d&&"$~"!==d&&"$!"!==d&&"&"!==d||h++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;e.firstChild;)f.insertBefore(e.firstChild,c);g.data="$";g._reactRetry&&g._reactRetry()}}b.length=0};\n$RC=function(b,a){if(a=document.getElementById(a))(b=document.getElementById(b))?(b.previousSibling.data="$~",$RB.push(b,a),2===$RB.length&&(b="number"!==typeof $RT?0:$RT,a=performance.now(),setTimeout($RV.bind(null,$RB),2300>a&&2E3<a?2300-a:b+300-a))):a.parentNode.removeChild(a)};')),0==(8&o.instructions)?(o.instructions|=8,t.push('$RM=new Map;$RR=function(n,w,p){function u(q){this._p=null;q()}for(var r=new Map,t=document,h,b,e=t.querySelectorAll("link[data-precedence],style[data-precedence]"),v=[],k=0;b=e[k++];)"not all"===b.getAttribute("media")?v.push(b):("LINK"===b.tagName&&$RM.set(b.getAttribute("href"),b),r.set(b.dataset.precedence,h=b));e=0;b=[];var l,a;for(k=!0;;){if(k){var f=p[e++];if(!f){k=!1;e=0;continue}var c=!1,m=0;var d=f[m++];if(a=$RM.get(d)){var g=a._p;c=!0}else{a=t.createElement("link");a.href=d;a.rel=\n"stylesheet";for(a.dataset.precedence=l=f[m++];g=f[m++];)a.setAttribute(g,f[m++]);g=a._p=new Promise(function(q,x){a.onload=u.bind(a,q);a.onerror=u.bind(a,x)});$RM.set(d,a)}d=a.getAttribute("media");!g||d&&!matchMedia(d).matches||b.push(g);if(c)continue}else{a=v[e++];if(!a)break;l=a.getAttribute("data-precedence");a.removeAttribute("media")}c=r.get(l)||h;c===h&&(h=a);r.set(l,a);c?c.parentNode.insertBefore(a,c.nextSibling):(c=t.head,c.insertBefore(a,c.firstChild))}if(p=document.getElementById(n))p.previousSibling.data=\n"$~";Promise.all(b).then($RC.bind(null,n,w),$RX.bind(null,n,"CSS failed to load"))};$RR("')):t.push('$RR("')):(0==(2&o.instructions)&&(o.instructions|=2,t.push('$RB=[];$RV=function(b){$RT=performance.now();for(var a=0;a<b.length;a+=2){var c=b[a],e=b[a+1];null!==e.parentNode&&e.parentNode.removeChild(e);var f=c.parentNode;if(f){var g=c.previousSibling,h=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d||"/&"===d)if(0===h)break;else h--;else"$"!==d&&"$?"!==d&&"$~"!==d&&"$!"!==d&&"&"!==d||h++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;e.firstChild;)f.insertBefore(e.firstChild,c);g.data="$";g._reactRetry&&g._reactRetry()}}b.length=0};\n$RC=function(b,a){if(a=document.getElementById(a))(b=document.getElementById(b))?(b.previousSibling.data="$~",$RB.push(b,a),2===$RB.length&&(b="number"!==typeof $RT?0:$RT,a=performance.now(),setTimeout($RV.bind(null,$RB),2300>a&&2E3<a?2300-a:b+300-a))):a.parentNode.removeChild(a)};')),t.push('$RC("')),o=s.toString(16),t.push(e.boundaryPrefix),t.push(o),t.push('","'),t.push(e.segmentPrefix),t.push(o),l?(t.push('",'),r=n,t.push("["),i="[",r.stylesheets.forEach(function(e){if(2!==e.state)if(3===e.state)t.push(i),e=eN(""+e.props.href),t.push(e),t.push("]"),i=",[";else{t.push(i);var n=e.props["data-precedence"],r=e.props,o=U(""+e.props.href);for(var s in o=eN(o),t.push(o),n=""+n,t.push(","),n=eN(n),t.push(n),r)if(M.call(r,s)&&null!=(n=r[s]))switch(s){case"href":case"rel":case"precedence":case"data-precedence":break;case"children":case"dangerouslySetInnerHTML":throw Error(a(399,"link"));default:!function(e,t,n){var r=t.toLowerCase();switch(typeof n){case"function":case"symbol":return}switch(t){case"innerHTML":case"dangerouslySetInnerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":case"style":case"ref":return;case"className":r="class",t=""+n;break;case"hidden":if(!1===n)return;t="";break;case"src":case"href":t=""+(n=U(n));break;default:if(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])||!P(t))return;t=""+n}e.push(","),r=eN(r),e.push(r),e.push(","),r=eN(t),e.push(r)}(t,s,n)}t.push("]"),i=",[",e.state=3}}),t.push("]")):t.push('"'),n=t.push(")</script>"),eE(t,e)&&n}function nT(e,t,n,r){if(2===r.status)return!0;var i=n.contentState,o=r.id;if(-1===o){if(-1===(r.id=n.rootSegmentID))throw Error(a(392));return nA(e,t,r,i)}return o===n.rootSegmentID?nA(e,t,r,i):(nA(e,t,r,i),n=e.resumableState,e=e.renderState,t.push(e.startInlineScript),t.push(">"),0==(1&n.instructions)?(n.instructions|=1,t.push('$RS=function(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("')):t.push('$RS("'),t.push(e.segmentPrefix),o=o.toString(16),t.push(o),t.push('","'),t.push(e.placeholderPrefix),t.push(o),t=t.push('")</script>'))}function nM(e,t){try{if(!(0<e.pendingRootTasks)){var n,r=e.completedRootSegment;if(null!==r){if(5===r.status)return;var i=e.completedPreambleSegments;if(null===i)return;n_=e.byteSize;var a,o=e.resumableState,s=e.renderState,l=s.preamble,u=l.htmlChunks,c=l.headChunks;if(u){for(a=0;a<u.length;a++)t.push(u[a]);if(c)for(a=0;a<c.length;a++)t.push(c[a]);else{var d=eS("head");t.push(d),t.push(">")}}else if(c)for(a=0;a<c.length;a++)t.push(c[a]);var h=s.charsetChunks;for(a=0;a<h.length;a++)t.push(h[a]);h.length=0,s.preconnects.forEach(eF,t),s.preconnects.clear();var p=s.viewportChunks;for(a=0;a<p.length;a++)t.push(p[a]);p.length=0,s.fontPreloads.forEach(eF,t),s.fontPreloads.clear(),s.highImagePreloads.forEach(eF,t),s.highImagePreloads.clear(),$=s,s.styles.forEach(eB,t),$=null;var f=s.importMapChunks;for(a=0;a<f.length;a++)t.push(f[a]);f.length=0,s.bootstrapScripts.forEach(eF,t),s.scripts.forEach(eF,t),s.scripts.clear(),s.bulkPreloads.forEach(eF,t),s.bulkPreloads.clear(),o.instructions|=32;var m=s.hoistableChunks;for(a=0;a<m.length;a++)t.push(m[a]);for(o=m.length=0;o<i.length;o++){var g=i[o];for(s=0;s<g.length;s++)nC(e,t,g[s],null)}var y=e.renderState.preamble,b=y.headChunks;if(y.htmlChunks||b){var x=eC("head");t.push(x)}var w=y.bodyChunks;if(w)for(i=0;i<w.length;i++)t.push(w[i]);nC(e,t,r,null),e.completedRootSegment=null;var k=e.renderState;if(0!==e.allPendingTasks||0!==e.clientRenderedBoundaries.length||0!==e.completedBoundaries.length||null!==e.trackedPostpones&&(0!==e.trackedPostpones.rootNodes.length||null!==e.trackedPostpones.rootSlots)){var S=e.resumableState;if(0==(64&S.instructions)){if(S.instructions|=64,t.push(k.startInlineScript),0==(32&S.instructions)){S.instructions|=32;var _="_"+S.idPrefix+"R_";t.push(' id="');var C=F(_);t.push(C),t.push('"')}t.push(">"),t.push("requestAnimationFrame(function(){$RT=performance.now()});"),t.push("</script>")}}eE(t,k)}var A=e.renderState;r=0;var E=A.viewportChunks;for(r=0;r<E.length;r++)t.push(E[r]);E.length=0,A.preconnects.forEach(eF,t),A.preconnects.clear(),A.fontPreloads.forEach(eF,t),A.fontPreloads.clear(),A.highImagePreloads.forEach(eF,t),A.highImagePreloads.clear(),A.styles.forEach(eH,t),A.scripts.forEach(eF,t),A.scripts.clear(),A.bulkPreloads.forEach(eF,t),A.bulkPreloads.clear();var T=A.hoistableChunks;for(r=0;r<T.length;r++)t.push(T[r]);T.length=0;var M=e.clientRenderedBoundaries;for(n=0;n<M.length;n++){var I=M[n];A=t;var N=e.resumableState,D=e.renderState,P=I.rootSegmentID,R=I.errorDigest;A.push(D.startInlineScript),A.push(">"),0==(4&N.instructions)?(N.instructions|=4,A.push('$RX=function(b,c,d,e,f){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),f&&(a.cstck=f),b._reactRetry&&b._reactRetry())};;$RX("')):A.push('$RX("'),A.push(D.boundaryPrefix);var O=P.toString(16);if(A.push(O),A.push('"'),R){A.push(",");var j,L=(j=R||"",JSON.stringify(j).replace(eM,function(e){switch(e){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}}));A.push(L)}var z=A.push(")</script>");if(!z){e.destination=null,n++,M.splice(0,n);return}}M.splice(0,n);var B=e.completedBoundaries;for(n=0;n<B.length;n++)if(!nE(e,t,B[n])){e.destination=null,n++,B.splice(0,n);return}B.splice(0,n);var U=e.partialBoundaries;for(n=0;n<U.length;n++){var H=U[n];s:{M=e,I=t,n_=H.byteSize;var W=H.completedSegments;for(z=0;z<W.length;z++)if(!nT(M,I,H,W[z])){z++,W.splice(0,z);var V=!1;break s}W.splice(0,z);var q=H.row;null!==q&&q.together&&1===H.pendingTasks&&(1===q.pendingTasks?t8(M,q,q.hoistables):q.pendingTasks--),V=ej(I,H.contentState,M.renderState)}if(!V){e.destination=null,n++,U.splice(0,n);return}}U.splice(0,n);var G=e.completedBoundaries;for(n=0;n<G.length;n++)if(!nE(e,t,G[n])){e.destination=null,n++,G.splice(0,n);return}G.splice(0,n)}}finally{0===e.allPendingTasks&&0===e.clientRenderedBoundaries.length&&0===e.completedBoundaries.length&&(e.flushScheduled=!1,(n=e.resumableState).hasBody&&(U=eC("body"),t.push(U)),n.hasHtml&&(n=eC("html"),t.push(n)),e.status=14,t.push(null),e.destination=null)}}function nI(e){if(!1===e.flushScheduled&&0===e.pingedTasks.length&&null!==e.destination){e.flushScheduled=!0;var t=e.destination;t?nM(e,t):e.flushScheduled=!1}}function nN(){}function nD(e,t,n,r){var i,o,s,l,u,c=!1,d=null,h="",p=!1;t={idPrefix:void 0===(i=t?t.identifierPrefix:void 0)?"":i,nextFormID:0,streamingFormat:0,bootstrapScriptContent:void 0,bootstrapScripts:void 0,bootstrapModules:void 0,instructions:0,hasBody:!1,hasHtml:!1,unknownResources:{},dnsResources:{},connectResources:{default:{},anonymous:{},credentials:{}},imageResources:{},styleResources:{},scriptResources:{},moduleUnknownResources:{},moduleScriptResources:{}},o=e,s=t,l=function(e,t){var n=e.idPrefix,r=[],i=e.bootstrapScriptContent,a=e.bootstrapScripts,o=e.bootstrapModules;void 0!==i&&(r.push("<script"),eW(r,e),r.push(">",(""+i).replace(K,Y),"</script>")),i=n+"P:";var s=n+"S:";n+="B:";var l=new Set,u=new Set,c=new Set,d=new Map,h=new Set,p=new Set,f=new Set,m={images:new Map,stylesheets:new Map,scripts:new Map,moduleScripts:new Map};if(void 0!==a)for(var g=0;g<a.length;g++){var y,b=a[g],x=void 0,w=void 0,k={rel:"preload",as:"script",fetchPriority:"low",nonce:void 0};"string"==typeof b?k.href=y=b:(k.href=y=b.src,k.integrity=w="string"==typeof b.integrity?b.integrity:void 0,k.crossOrigin=x="string"==typeof b||null==b.crossOrigin?void 0:"use-credentials"===b.crossOrigin?"use-credentials":"");var S=y;(b=e).scriptResources[S]=null,b.moduleScriptResources[S]=null,ep(b=[],k),h.add(b),r.push('<script src="',F(y),'"'),"string"==typeof w&&r.push(' integrity="',F(w),'"'),"string"==typeof x&&r.push(' crossorigin="',F(x),'"'),eW(r,e),r.push(' async=""></script>')}if(void 0!==o)for(a=0;a<o.length;a++)k=o[a],x=y=void 0,w={rel:"modulepreload",fetchPriority:"low",nonce:void 0},"string"==typeof k?w.href=g=k:(w.href=g=k.src,w.integrity=x="string"==typeof k.integrity?k.integrity:void 0,w.crossOrigin=y="string"==typeof k||null==k.crossOrigin?void 0:"use-credentials"===k.crossOrigin?"use-credentials":""),k=e,b=g,k.scriptResources[b]=null,k.moduleScriptResources[b]=null,ep(k=[],w),h.add(k),r.push('<script type="module" src="',F(g),'"'),"string"==typeof x&&r.push(' integrity="',F(x),'"'),"string"==typeof y&&r.push(' crossorigin="',F(y),'"'),eW(r,e),r.push(' async=""></script>');return{placeholderPrefix:i,segmentPrefix:s,boundaryPrefix:n,startInlineScript:"<script",startInlineStyle:"<style",preamble:{htmlChunks:null,headChunks:null,bodyChunks:null},externalRuntimeScript:null,bootstrapChunks:r,importMapChunks:[],onHeaders:void 0,headers:null,resets:{font:{},dns:{},connect:{default:{},anonymous:{},credentials:{}},image:{},style:{}},charsetChunks:[],viewportChunks:[],hoistableChunks:[],preconnects:l,fontPreloads:u,highImagePreloads:c,styles:d,bootstrapScripts:h,scripts:p,bulkPreloads:f,preloads:m,nonce:{script:void 0,style:void 0},stylesToHoist:!1,generateStaticMarkup:t}}(t,n),(l=t0(s=new tK(s,l,u=X(0,null,0,null),1/0,nN,void 0,function(){p=!0},void 0,void 0,void 0,void 0),0,null,u,!1,!1)).parentFlushed=!0,t1(o=tJ(s,null,o,-1,null,l,null,null,s.abortableTasks,null,u,null,te,null,null)),s.pingedTasks.push(o),(e=s).flushScheduled=null!==e.destination,nb(e),10===e.status&&(e.status=11),null===e.trackedPostpones&&nf(e,0===e.pendingRootTasks);var f=e;(11===f.status||10===f.status)&&(f.status=12);try{var m=f.abortableTasks;if(0<m.size){var g=void 0===r?Error(a(432)):"object"==typeof r&&null!==r&&"function"==typeof r.then?Error(a(530)):r;f.fatalError=g,m.forEach(function(e){return function e(t,n,r){var i=t.blockedBoundary,a=t.blockedSegment;if(null!==a){if(6===a.status)return;a.status=3}if(a=t3(t.componentStack),null===i){if(13!==n.status&&14!==n.status){if(null===(i=t.replay)){t5(n,r,a),t4(n,r);return}i.pendingTasks--,0===i.pendingTasks&&0<i.nodes.length&&(a=t5(n,r,a),np(n,null,i.nodes,i.slots,r,a)),n.pendingRootTasks--,0===n.pendingRootTasks&&nm(n)}}else 4!==i.status&&(i.status=4,a=t5(n,r,a),i.status=4,i.errorDigest=a,nl(n,i),i.parentFlushed&&n.clientRenderedBoundaries.push(i)),i.pendingTasks--,null!==(a=i.row)&&0==--a.pendingTasks&&t9(n,a),i.fallbackAbortableTasks.forEach(function(t){return e(t,n,r)}),i.fallbackAbortableTasks.clear();null!==(t=t.row)&&0==--t.pendingTasks&&t9(n,t),n.allPendingTasks--,0===n.allPendingTasks&&ng(n)}(e,f,g)}),m.clear()}null!==f.destination&&nM(f,f.destination)}catch(e){t5(f,e,{}),t4(f,e)}var y=e,b={push:function(e){return null!==e&&(h+=e),!0},destroy:function(e){c=!0,d=e}};if(13===y.status)y.status=14,b.destroy(y.fatalError);else if(14!==y.status&&null===y.destination){y.destination=b;try{nM(y,b)}catch(e){t5(y,e,{}),t4(y,e)}}if(c&&d!==r)throw d;if(!p)throw Error(a(426));return h}n.renderToStaticMarkup=function(e,t){return nD(e,t,!0,'The server used "renderToStaticMarkup" which does not support Suspense. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')},n.renderToString=function(e,t){return nD(e,t,!1,'The server used "renderToString" which does not support Suspense. If you intended for this Suspense boundary to render the fallback content on the server consider throwing an Error somewhere within the Suspense boundary. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')},n.version="19.2.0-canary-97cdd5d3-20250710"},399764:e=>{"use strict";var{m:t,e:n}=e,r=e.r(373150),i=e.r(784445);function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=Symbol.for("react.transitional.element"),s=Symbol.for("react.portal"),l=Symbol.for("react.fragment"),u=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),h=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),b=Symbol.for("react.scope"),x=Symbol.for("react.activity"),w=Symbol.for("react.legacy_hidden"),k=Symbol.for("react.memo_cache_sentinel"),S=Symbol.for("react.view_transition"),_=Symbol.iterator;function C(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=_&&e[_]||e["@@iterator"])?e:null}var A=Array.isArray;function E(e,t){var n=3&e.length,r=e.length-n,i=t;for(t=0;t<r;){var a=255&e.charCodeAt(t)|(255&e.charCodeAt(++t))<<8|(255&e.charCodeAt(++t))<<16|(255&e.charCodeAt(++t))<<24;++t,i^=a=0x1b873593*(65535&(a=(a=0xcc9e2d51*(65535&a)+((0xcc9e2d51*(a>>>16)&65535)<<16)|0)<<15|a>>>17))+((0x1b873593*(a>>>16)&65535)<<16)|0,i=(65535&(i=5*(65535&(i=i<<13|i>>>19))+((5*(i>>>16)&65535)<<16)|0))+27492+(((i>>>16)+58964&65535)<<16)}switch(a=0,n){case 3:a^=(255&e.charCodeAt(t+2))<<16;case 2:a^=(255&e.charCodeAt(t+1))<<8;case 1:a^=255&e.charCodeAt(t),i^=0x1b873593*(65535&(a=(a=0xcc9e2d51*(65535&a)+((0xcc9e2d51*(a>>>16)&65535)<<16)|0)<<15|a>>>17))+((0x1b873593*(a>>>16)&65535)<<16)}return i^=e.length,i^=i>>>16,i=0x85ebca6b*(65535&i)+((0x85ebca6b*(i>>>16)&65535)<<16)|0,i^=i>>>13,((i=0xc2b2ae35*(65535&i)+((0xc2b2ae35*(i>>>16)&65535)<<16)|0)^i>>>16)>>>0}var T=new MessageChannel,M=[];function I(e){M.push(e),T.port2.postMessage(null)}function N(e){setTimeout(function(){throw e})}T.port1.onmessage=function(){var e=M.shift();e&&e()};var D=Promise,P="function"==typeof queueMicrotask?queueMicrotask:function(e){D.resolve(null).then(e).catch(N)},R=null,O=0;function j(e,t){if(0!==t.byteLength)if(2048<t.byteLength)0<O&&(e.enqueue(new Uint8Array(R.buffer,0,O)),R=new Uint8Array(2048),O=0),e.enqueue(t);else{var n=R.length-O;n<t.byteLength&&(0===n?e.enqueue(R):(R.set(t.subarray(0,n),O),e.enqueue(R),t=t.subarray(n)),R=new Uint8Array(2048),O=0),R.set(t,O),O+=t.byteLength}}function F(e,t){return j(e,t),!0}function L(e){R&&0<O&&(e.enqueue(new Uint8Array(R.buffer,0,O)),R=null,O=0)}var z=new TextEncoder;function B(e){return z.encode(e)}function U(e){return z.encode(e)}function H(e){return e.byteLength}function W(e,t){"function"==typeof e.error?e.error(t):e.close()}var V=Object.assign,q=Object.prototype.hasOwnProperty,G=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),$={},K={};function Y(e){return!!q.call(K,e)||!q.call($,e)&&(G.test(e)?K[e]=!0:($[e]=!0,!1))}var X=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" ")),Z=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),J=/["'&<>]/;function Q(e){if("boolean"==typeof e||"number"==typeof e||"bigint"==typeof e)return""+e;e=""+e;var t=J.exec(e);if(t){var n,r="",i=0;for(n=t.index;n<e.length;n++){switch(e.charCodeAt(n)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#x27;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}i!==n&&(r+=e.slice(i,n)),i=n+1,r+=t}e=i!==n?r+e.slice(i,n):r}return e}var ee=/([A-Z])/g,et=/^ms-/,en=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function er(e){return en.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var ei=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ea=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,eo={pending:!1,data:null,method:null,action:null},es=ea.d;ea.d={f:es.f,r:es.r,D:function(e){var t=rz||null;if(t){var n,r,i=t.resumableState,a=t.renderState;"string"==typeof e&&e&&(i.dnsResources.hasOwnProperty(e)||(i.dnsResources[e]=null,(r=(i=a.headers)&&0<i.remainingCapacity)&&(n="<"+(""+e).replace(nL,nz)+">; rel=dns-prefetch",r=0<=(i.remainingCapacity-=n.length+2)),r?(a.resets.dns[e]=null,i.preconnects&&(i.preconnects+=", "),i.preconnects+=n):(e9(n=[],{href:e,rel:"dns-prefetch"}),a.preconnects.add(n))),i_(t))}else es.D(e)},C:function(e,t){var n=rz||null;if(n){var r=n.resumableState,i=n.renderState;if("string"==typeof e&&e){var a,o,s="use-credentials"===t?"credentials":"string"==typeof t?"anonymous":"default";r.connectResources[s].hasOwnProperty(e)||(r.connectResources[s][e]=null,(o=(r=i.headers)&&0<r.remainingCapacity)&&(o="<"+(""+e).replace(nL,nz)+">; rel=preconnect","string"==typeof t&&(o+='; crossorigin="'+(""+t).replace(nB,nU)+'"'),a=o,o=0<=(r.remainingCapacity-=a.length+2)),o?(i.resets.connect[s][e]=null,r.preconnects&&(r.preconnects+=", "),r.preconnects+=a):(e9(s=[],{rel:"preconnect",href:e,crossOrigin:t}),i.preconnects.add(s))),i_(n)}}else es.C(e,t)},L:function(e,t,n){var r=rz||null;if(r){var i=r.resumableState,a=r.renderState;if(t&&e){switch(t){case"image":if(n)var o,s=n.imageSrcSet,l=n.imageSizes,u=n.fetchPriority;var c=s?s+"\n"+(l||""):e;if(i.imageResources.hasOwnProperty(c))return;i.imageResources[c]=el,(i=a.headers)&&0<i.remainingCapacity&&"string"!=typeof s&&"high"===u&&(o=nF(e,t,n),0<=(i.remainingCapacity-=o.length+2))?(a.resets.image[c]=el,i.highImagePreloads&&(i.highImagePreloads+=", "),i.highImagePreloads+=o):(e9(i=[],V({rel:"preload",href:s?void 0:e,as:t},n)),"high"===u?a.highImagePreloads.add(i):(a.bulkPreloads.add(i),a.preloads.images.set(c,i)));break;case"style":if(i.styleResources.hasOwnProperty(e))return;e9(s=[],V({rel:"preload",href:e,as:t},n)),i.styleResources[e]=n&&("string"==typeof n.crossOrigin||"string"==typeof n.integrity)?[n.crossOrigin,n.integrity]:el,a.preloads.stylesheets.set(e,s),a.bulkPreloads.add(s);break;case"script":if(i.scriptResources.hasOwnProperty(e))return;s=[],a.preloads.scripts.set(e,s),a.bulkPreloads.add(s),e9(s,V({rel:"preload",href:e,as:t},n)),i.scriptResources[e]=n&&("string"==typeof n.crossOrigin||"string"==typeof n.integrity)?[n.crossOrigin,n.integrity]:el;break;default:if(i.unknownResources.hasOwnProperty(t)){if((s=i.unknownResources[t]).hasOwnProperty(e))return}else s={},i.unknownResources[t]=s;s[e]=el,(i=a.headers)&&0<i.remainingCapacity&&"font"===t&&(c=nF(e,t,n),0<=(i.remainingCapacity-=c.length+2))?(a.resets.font[e]=el,i.fontPreloads&&(i.fontPreloads+=", "),i.fontPreloads+=c):(e9(i=[],e=V({rel:"preload",href:e,as:t},n)),"font"===t)?a.fontPreloads.add(i):a.bulkPreloads.add(i)}i_(r)}}else es.L(e,t,n)},m:function(e,t){var n=rz||null;if(n){var r=n.resumableState,i=n.renderState;if(e){var a=t&&"string"==typeof t.as?t.as:"script";if("script"===a){if(r.moduleScriptResources.hasOwnProperty(e))return;a=[],r.moduleScriptResources[e]=t&&("string"==typeof t.crossOrigin||"string"==typeof t.integrity)?[t.crossOrigin,t.integrity]:el,i.preloads.moduleScripts.set(e,a)}else{if(r.moduleUnknownResources.hasOwnProperty(a)){var o=r.unknownResources[a];if(o.hasOwnProperty(e))return}else o={},r.moduleUnknownResources[a]=o;a=[],o[e]=el}e9(a,V({rel:"modulepreload",href:e},t)),i.bulkPreloads.add(a),i_(n)}}else es.m(e,t)},X:function(e,t){var n=rz||null;if(n){var r=n.resumableState,i=n.renderState;if(e){var a=r.scriptResources.hasOwnProperty(e)?r.scriptResources[e]:void 0;null!==a&&(r.scriptResources[e]=null,t=V({src:e,async:!0},t),a&&(2===a.length&&nj(t,a),e=i.preloads.scripts.get(e))&&(e.length=0),e=[],i.scripts.add(e),ti(e,t),i_(n))}}else es.X(e,t)},S:function(e,t,n){var r=rz||null;if(r){var i=r.resumableState,a=r.renderState;if(e){t=t||"default";var o=a.styles.get(t),s=i.styleResources.hasOwnProperty(e)?i.styleResources[e]:void 0;null!==s&&(i.styleResources[e]=null,o||(o={precedence:B(Q(t)),rules:[],hrefs:[],sheets:new Map},a.styles.set(t,o)),t={state:0,props:V({rel:"stylesheet",href:e,"data-precedence":t},n)},s&&(2===s.length&&nj(t.props,s),(a=a.preloads.stylesheets.get(e))&&0<a.length?a.length=0:t.state=1),o.sheets.set(e,t),i_(r))}}else es.S(e,t,n)},M:function(e,t){var n=rz||null;if(n){var r=n.resumableState,i=n.renderState;if(e){var a=r.moduleScriptResources.hasOwnProperty(e)?r.moduleScriptResources[e]:void 0;null!==a&&(r.moduleScriptResources[e]=null,t=V({src:e,type:"module",async:!0},t),a&&(2===a.length&&nj(t,a),e=i.preloads.moduleScripts.get(e))&&(e.length=0),e=[],i.scripts.add(e),ti(e,t),i_(n))}}else es.M(e,t)}};var el=[],eu=null;U('"></template>');var ec=U("<script"),ed=U("</script>"),eh=U('<script src="'),ep=U('<script type="module" src="'),ef=U(' nonce="'),em=U(' integrity="'),eg=U(' crossorigin="'),ev=U(' async=""></script>'),ey=U("<style"),eb=/(<\/|<)(s)(cript)/gi;function ex(e,t,n,r){return""+t+("s"===n?"\\u0073":"\\u0053")+r}var ew=U('<script type="importmap">'),ek=U("</script>");function eS(e,t,n,r,i,a){var o=void 0===(n="string"==typeof t?t:t&&t.script)?ec:U('<script nonce="'+Q(n)+'"'),s="string"==typeof t?void 0:t&&t.style,l=void 0===s?ey:U('<style nonce="'+Q(s)+'"'),u=e.idPrefix,c=[],d=e.bootstrapScriptContent,h=e.bootstrapScripts,p=e.bootstrapModules;if(void 0!==d&&(c.push(o),nI(c,e),c.push(eJ,B((""+d).replace(eb,ex)),ed)),d=[],void 0!==r&&(d.push(ew),d.push(B((""+JSON.stringify(r)).replace(eb,ex))),d.push(ek)),r=i?{preconnects:"",fontPreloads:"",highImagePreloads:"",remainingCapacity:2+("number"==typeof a?a:2e3)}:null,i={placeholderPrefix:U(u+"P:"),segmentPrefix:U(u+"S:"),boundaryPrefix:U(u+"B:"),startInlineScript:o,startInlineStyle:l,preamble:eC(),externalRuntimeScript:null,bootstrapChunks:c,importMapChunks:d,onHeaders:i,headers:r,resets:{font:{},dns:{},connect:{default:{},anonymous:{},credentials:{}},image:{},style:{}},charsetChunks:[],viewportChunks:[],hoistableChunks:[],preconnects:new Set,fontPreloads:new Set,highImagePreloads:new Set,styles:new Map,bootstrapScripts:new Set,scripts:new Set,bulkPreloads:new Set,preloads:{images:new Map,stylesheets:new Map,scripts:new Map,moduleScripts:new Map},nonce:{script:n,style:s},hoistableState:null,stylesToHoist:!1},void 0!==h)for(r=0;r<h.length;r++)u=h[r],s=o=void 0,l={rel:"preload",as:"script",fetchPriority:"low",nonce:t},"string"==typeof u?l.href=a=u:(l.href=a=u.src,l.integrity=s="string"==typeof u.integrity?u.integrity:void 0,l.crossOrigin=o="string"==typeof u||null==u.crossOrigin?void 0:"use-credentials"===u.crossOrigin?"use-credentials":""),u=e,d=a,u.scriptResources[d]=null,u.moduleScriptResources[d]=null,e9(u=[],l),i.bootstrapScripts.add(u),c.push(eh,B(Q(a)),eU),n&&c.push(ef,B(Q(n)),eU),"string"==typeof s&&c.push(em,B(Q(s)),eU),"string"==typeof o&&c.push(eg,B(Q(o)),eU),nI(c,e),c.push(ev);if(void 0!==p)for(t=0;t<p.length;t++)s=p[t],a=r=void 0,o={rel:"modulepreload",fetchPriority:"low",nonce:n},"string"==typeof s?o.href=h=s:(o.href=h=s.src,o.integrity=a="string"==typeof s.integrity?s.integrity:void 0,o.crossOrigin=r="string"==typeof s||null==s.crossOrigin?void 0:"use-credentials"===s.crossOrigin?"use-credentials":""),s=e,l=h,s.scriptResources[l]=null,s.moduleScriptResources[l]=null,e9(s=[],o),i.bootstrapScripts.add(s),c.push(ep,B(Q(h)),eU),n&&c.push(ef,B(Q(n)),eU),"string"==typeof a&&c.push(em,B(Q(a)),eU),"string"==typeof r&&c.push(eg,B(Q(r)),eU),nI(c,e),c.push(ev);return i}function e_(e,t,n,r,i){return{idPrefix:void 0===e?"":e,nextFormID:0,streamingFormat:0,bootstrapScriptContent:n,bootstrapScripts:r,bootstrapModules:i,instructions:0,hasBody:!1,hasHtml:!1,unknownResources:{},dnsResources:{},connectResources:{default:{},anonymous:{},credentials:{}},imageResources:{},styleResources:{},scriptResources:{},moduleUnknownResources:{},moduleScriptResources:{}}}function eC(){return{htmlChunks:null,headChunks:null,bodyChunks:null}}function eA(e,t,n,r){return{insertionMode:e,selectedValue:t,tagScope:n,viewTransition:r}}function eE(e){return eA("http://www.w3.org/2000/svg"===e?4:5*("http://www.w3.org/1998/Math/MathML"===e),null,0,null)}function eT(e,t,n){var r=-25&e.tagScope;switch(t){case"noscript":return eA(2,null,1|r,null);case"select":return eA(2,null!=n.value?n.value:n.defaultValue,r,null);case"svg":return eA(4,null,r,null);case"picture":return eA(2,null,2|r,null);case"math":return eA(5,null,r,null);case"foreignObject":return eA(2,null,r,null);case"table":return eA(6,null,r,null);case"thead":case"tbody":case"tfoot":return eA(7,null,r,null);case"colgroup":return eA(9,null,r,null);case"tr":return eA(8,null,r,null);case"head":if(2>e.insertionMode)return eA(3,null,r,null);break;case"html":if(0===e.insertionMode)return eA(1,null,r,null)}return 6<=e.insertionMode||2>e.insertionMode?eA(2,null,r,null):e.tagScope!==r?eA(e.insertionMode,e.selectedValue,r,null):e}function eM(e){return null===e?null:{update:e.update,enter:"none",exit:"none",share:e.update,name:e.autoName,autoName:e.autoName,nameIdx:0}}function eI(e,t){return 32&t.tagScope&&(e.instructions|=128),eA(t.insertionMode,t.selectedValue,12|t.tagScope,eM(t.viewTransition))}function eN(e,t){return eA(t.insertionMode,t.selectedValue,16|t.tagScope,eM(t.viewTransition))}var eD=U("<!-- -->");function eP(e,t,n,r){return""===t?r:(r&&e.push(eD),e.push(B(Q(t))),!0)}var eR=new Map,eO=U(' style="'),ej=U(":"),eF=U(";");function eL(e,t){if("object"!=typeof t)throw Error(a(62));var n,r=!0;for(n in t)if(q.call(t,n)){var i=t[n];if(null!=i&&"boolean"!=typeof i&&""!==i){if(0===n.indexOf("--")){var o=B(Q(n));i=B(Q((""+i).trim()))}else void 0===(o=eR.get(n))&&(o=U(Q(n.replace(ee,"-$1").toLowerCase().replace(et,"-ms-"))),eR.set(n,o)),i="number"==typeof i?0===i||X.has(n)?B(""+i):B(i+"px"):B(Q((""+i).trim()));r?(r=!1,e.push(eO,o,ej,i)):e.push(eF,o,ej,i)}}r||e.push(eU)}var ez=U(" "),eB=U('="'),eU=U('"'),eH=U('=""');function eW(e,t,n){n&&"function"!=typeof n&&"symbol"!=typeof n&&e.push(ez,B(t),eH)}function eV(e,t,n){"function"!=typeof n&&"symbol"!=typeof n&&"boolean"!=typeof n&&e.push(ez,B(t),eB,B(Q(n)),eU)}var eq=U(Q("javascript:throw new Error('React form unexpectedly submitted.')")),eG=U('<input type="hidden"');function e$(e,t){this.push(eG),eK(e),eV(this,"name",t),eV(this,"value",e),this.push(eQ)}function eK(e){if("string"!=typeof e)throw Error(a(480))}function eY(e,t){if("function"==typeof t.$$FORM_ACTION){var n=e.nextFormID++;e=e.idPrefix+n;try{var r=t.$$FORM_ACTION(e);if(r){var i=r.data;null!=i&&i.forEach(eK)}return r}catch(e){if("object"==typeof e&&null!==e&&"function"==typeof e.then)throw e}}return null}function eX(e,t,n,r,i,a,o,s){var l=null;if("function"==typeof r){var u=eY(t,r);null!==u?(s=u.name,r=u.action||"",i=u.encType,a=u.method,o=u.target,l=u.data):(e.push(ez,B("formAction"),eB,eq,eU),o=a=i=r=s=null,e3(t,n))}return null!=s&&eZ(e,"name",s),null!=r&&eZ(e,"formAction",r),null!=i&&eZ(e,"formEncType",i),null!=a&&eZ(e,"formMethod",a),null!=o&&eZ(e,"formTarget",o),l}function eZ(e,t,n){switch(t){case"className":eV(e,"class",n);break;case"tabIndex":eV(e,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":eV(e,t,n);break;case"style":eL(e,n);break;case"src":case"href":if(""===n)break;case"action":case"formAction":if(null==n||"function"==typeof n||"symbol"==typeof n||"boolean"==typeof n)break;n=er(""+n),e.push(ez,B(t),eB,B(Q(n)),eU);break;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":case"ref":break;case"autoFocus":case"multiple":case"muted":eW(e,t.toLowerCase(),n);break;case"xlinkHref":if("function"==typeof n||"symbol"==typeof n||"boolean"==typeof n)break;n=er(""+n),e.push(ez,B("xlink:href"),eB,B(Q(n)),eU);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":"function"!=typeof n&&"symbol"!=typeof n&&e.push(ez,B(t),eB,B(Q(n)),eU);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&"function"!=typeof n&&"symbol"!=typeof n&&e.push(ez,B(t),eH);break;case"capture":case"download":!0===n?e.push(ez,B(t),eH):!1!==n&&"function"!=typeof n&&"symbol"!=typeof n&&e.push(ez,B(t),eB,B(Q(n)),eU);break;case"cols":case"rows":case"size":case"span":"function"!=typeof n&&"symbol"!=typeof n&&!isNaN(n)&&1<=n&&e.push(ez,B(t),eB,B(Q(n)),eU);break;case"rowSpan":case"start":"function"==typeof n||"symbol"==typeof n||isNaN(n)||e.push(ez,B(t),eB,B(Q(n)),eU);break;case"xlinkActuate":eV(e,"xlink:actuate",n);break;case"xlinkArcrole":eV(e,"xlink:arcrole",n);break;case"xlinkRole":eV(e,"xlink:role",n);break;case"xlinkShow":eV(e,"xlink:show",n);break;case"xlinkTitle":eV(e,"xlink:title",n);break;case"xlinkType":eV(e,"xlink:type",n);break;case"xmlBase":eV(e,"xml:base",n);break;case"xmlLang":eV(e,"xml:lang",n);break;case"xmlSpace":eV(e,"xml:space",n);break;default:if((!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&Y(t=Z.get(t)||t)){switch(typeof n){case"function":case"symbol":return;case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return}e.push(ez,B(t),eB,B(Q(n)),eU)}}}var eJ=U(">"),eQ=U("/>");function e0(e,t,n){if(null!=t){if(null!=n)throw Error(a(60));if("object"!=typeof t||!("__html"in t))throw Error(a(61));null!=(t=t.__html)&&e.push(B(""+t))}}var e1=U(' selected=""'),e2=U('addEventListener("submit",function(a){if(!a.defaultPrevented){var c=a.target,d=a.submitter,e=c.action,b=d;if(d){var f=d.getAttribute("formAction");null!=f&&(e=f,b=null)}"javascript:throw new Error(\'React form unexpectedly submitted.\')"===e&&(a.preventDefault(),b?(a=document.createElement("input"),a.name=b.name,a.value=b.value,b.parentNode.insertBefore(a,b),b=new FormData(c),a.parentNode.removeChild(a)):b=new FormData(c),a=c.ownerDocument||c,(a.$$reactFormReplay=a.$$reactFormReplay||[]).push(c,d,b))}});');function e3(e,t){if(0==(16&e.instructions)){e.instructions|=16;var n=t.preamble,r=t.bootstrapChunks;(n.htmlChunks||n.headChunks)&&0===r.length?(r.push(t.startInlineScript),nI(r,e),r.push(eJ,e2,ed)):r.unshift(t.startInlineScript,eJ,e2,ed)}}var e5=U("<!--F!-->"),e4=U("<!--F-->");function e9(e,t){for(var n in e.push(tc("link")),t)if(q.call(t,n)){var r=t[n];if(null!=r)switch(n){case"children":case"dangerouslySetInnerHTML":throw Error(a(399,"link"));default:eZ(e,n,r)}}return e.push(eQ),null}var e8=/(<\/|<)(s)(tyle)/gi;function e6(e,t,n,r){return""+t+("s"===n?"\\73 ":"\\53 ")+r}function e7(e,t,n){for(var r in e.push(tc(n)),t)if(q.call(t,r)){var i=t[r];if(null!=i)switch(r){case"children":case"dangerouslySetInnerHTML":throw Error(a(399,n));default:eZ(e,r,i)}}return e.push(eQ),null}function te(e,t){e.push(tc("title"));var n,r=null,i=null;for(n in t)if(q.call(t,n)){var a=t[n];if(null!=a)switch(n){case"children":r=a;break;case"dangerouslySetInnerHTML":i=a;break;default:eZ(e,n,a)}}return e.push(eJ),"function"!=typeof(t=Array.isArray(r)?2>r.length?r[0]:null:r)&&"symbol"!=typeof t&&null!=t&&e.push(B(Q(""+t))),e0(e,i,r),e.push(tp("title")),null}var tt=U("<!--head-->"),tn=U("<!--body-->"),tr=U("<!--html-->");function ti(e,t){e.push(tc("script"));var n,r=null,i=null;for(n in t)if(q.call(t,n)){var a=t[n];if(null!=a)switch(n){case"children":r=a;break;case"dangerouslySetInnerHTML":i=a;break;default:eZ(e,n,a)}}return e.push(eJ),e0(e,i,r),"string"==typeof r&&e.push(B((""+r).replace(eb,ex))),e.push(tp("script")),null}function ta(e,t,n){e.push(tc(n));var r,i=n=null;for(r in t)if(q.call(t,r)){var a=t[r];if(null!=a)switch(r){case"children":n=a;break;case"dangerouslySetInnerHTML":i=a;break;default:eZ(e,r,a)}}return e.push(eJ),e0(e,i,n),n}function to(e,t,n){e.push(tc(n));var r,i=n=null;for(r in t)if(q.call(t,r)){var a=t[r];if(null!=a)switch(r){case"children":n=a;break;case"dangerouslySetInnerHTML":i=a;break;default:eZ(e,r,a)}}return e.push(eJ),e0(e,i,n),"string"==typeof n?(e.push(B(Q(n))),null):n}var ts=U("\n"),tl=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,tu=new Map;function tc(e){var t=tu.get(e);if(void 0===t){if(!tl.test(e))throw Error(a(65,e));t=U("<"+e),tu.set(e,t)}return t}var td=U("<!DOCTYPE html>"),th=new Map;function tp(e){var t=th.get(e);return void 0===t&&(t=U("</"+e+">"),th.set(e,t)),t}function tf(e,t){null===(e=e.preamble).htmlChunks&&t.htmlChunks&&(e.htmlChunks=t.htmlChunks),null===e.headChunks&&t.headChunks&&(e.headChunks=t.headChunks),null===e.bodyChunks&&t.bodyChunks&&(e.bodyChunks=t.bodyChunks)}function tm(e,t){t=t.bootstrapChunks;for(var n=0;n<t.length-1;n++)j(e,t[n]);return!(n<t.length)||(n=t[n],t.length=0,F(e,n))}var tg=U("requestAnimationFrame(function(){$RT=performance.now()});"),tv=U('<template id="'),ty=U('"></template>'),tb=U("<!--&-->"),tx=U("<!--/&-->"),tw=U("<!--$-->"),tk=U('<!--$?--><template id="'),tS=U('"></template>'),t_=U("<!--$!-->"),tC=U("<!--/$-->"),tA=U("<template"),tE=U('"'),tT=U(' data-dgst="');U(' data-msg="'),U(' data-stck="'),U(' data-cstck="');var tM=U("></template>");function tI(e,t,n){if(j(e,tk),null===n)throw Error(a(395));return j(e,t.boundaryPrefix),j(e,B(n.toString(16))),F(e,tS)}var tN=U('<div hidden id="'),tD=U('">'),tP=U("</div>"),tR=U('<svg aria-hidden="true" style="display:none" id="'),tO=U('">'),tj=U("</svg>"),tF=U('<math aria-hidden="true" style="display:none" id="'),tL=U('">'),tz=U("</math>"),tB=U('<table hidden id="'),tU=U('">'),tH=U("</table>"),tW=U('<table hidden><tbody id="'),tV=U('">'),tq=U("</tbody></table>"),tG=U('<table hidden><tr id="'),t$=U('">'),tK=U("</tr></table>"),tY=U('<table hidden><colgroup id="'),tX=U('">'),tZ=U("</colgroup></table>"),tJ=U('$RS=function(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("'),tQ=U('$RS("'),t0=U('","'),t1=U('")</script>');U('<template data-rsi="" data-sid="'),U('" data-pid="');var t2=U('$RB=[];$RV=function(b){$RT=performance.now();for(var a=0;a<b.length;a+=2){var c=b[a],e=b[a+1];null!==e.parentNode&&e.parentNode.removeChild(e);var f=c.parentNode;if(f){var g=c.previousSibling,h=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d||"/&"===d)if(0===h)break;else h--;else"$"!==d&&"$?"!==d&&"$~"!==d&&"$!"!==d&&"&"!==d||h++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;e.firstChild;)f.insertBefore(e.firstChild,c);g.data="$";g._reactRetry&&g._reactRetry()}}b.length=0};\n$RC=function(b,a){if(a=document.getElementById(a))(b=document.getElementById(b))?(b.previousSibling.data="$~",$RB.push(b,a),2===$RB.length&&(b="number"!==typeof $RT?0:$RT,a=performance.now(),setTimeout($RV.bind(null,$RB),2300>a&&2E3<a?2300-a:b+300-a))):a.parentNode.removeChild(a)};');B('$RV=function(A,g){function k(a,b){var e=a.getAttribute(b);e&&(b=a.style,l.push(a,b.viewTransitionName,b.viewTransitionClass),"auto"!==e&&(b.viewTransitionClass=e),(a=a.getAttribute("vt-name"))||(a="_T_"+K++ +"_"),b.viewTransitionName=a,B=!0)}var B=!1,K=0,l=[];try{var f=document.__reactViewTransition;if(f){f.finished.finally($RV.bind(null,g));return}var m=new Map;for(f=1;f<g.length;f+=2)for(var h=g[f].querySelectorAll("[vt-share]"),d=0;d<h.length;d++){var c=h[d];m.set(c.getAttribute("vt-name"),c)}var u=[];for(h=0;h<g.length;h+=2){var C=g[h],x=C.parentNode;if(x){var v=x.getBoundingClientRect();if(v.left||v.top||v.width||v.height){c=C;for(f=0;c;){if(8===c.nodeType){var r=c.data;if("/$"===r)if(0===f)break;else f--;else"$"!==r&&"$?"!==r&&"$~"!==r&&"$!"!==r||f++}else if(1===c.nodeType){d=c;var D=d.getAttribute("vt-name"),y=m.get(D);k(d,y?"vt-share":"vt-exit");y&&(k(y,"vt-share"),m.set(D,null));var E=d.querySelectorAll("[vt-share]");for(d=0;d<E.length;d++){var F=E[d],G=F.getAttribute("vt-name"),\nH=m.get(G);H&&(k(F,"vt-share"),k(H,"vt-share"),m.set(G,null))}}c=c.nextSibling}for(var I=g[h+1],t=I.firstElementChild;t;)null!==m.get(t.getAttribute("vt-name"))&&k(t,"vt-enter"),t=t.nextElementSibling;c=x;do for(var n=c.firstElementChild;n;){var J=n.getAttribute("vt-update");J&&"none"!==J&&!l.includes(n)&&k(n,"vt-update");n=n.nextElementSibling}while((c=c.parentNode)&&1===c.nodeType&&"none"!==c.getAttribute("vt-update"));u.push.apply(u,I.querySelectorAll(\'img[src]:not([loading="lazy"])\'))}}}if(B){var z=\ndocument.__reactViewTransition=document.startViewTransition({update:function(){A(g);for(var a=[document.documentElement.clientHeight,document.fonts.ready],b={},e=0;e<u.length;b={g:b.g},e++)if(b.g=u[e],!b.g.complete){var p=b.g.getBoundingClientRect();0<p.bottom&&0<p.right&&p.top<window.innerHeight&&p.left<window.innerWidth&&(p=new Promise(function(w){return function(q){w.g.addEventListener("load",q);w.g.addEventListener("error",q)}}(b)),a.push(p))}return Promise.race([Promise.all(a),new Promise(function(w){var q=\nperformance.now();setTimeout(w,2300>q&&2E3<q?2300-q:500)})])},types:[]});z.ready.finally(function(){for(var a=l.length-3;0<=a;a-=3){var b=l[a],e=b.style;e.viewTransitionName=l[a+1];e.viewTransitionClass=l[a+1];""===b.getAttribute("style")&&b.removeAttribute("style")}});z.finished.finally(function(){document.__reactViewTransition===z&&(document.__reactViewTransition=null)});$RB=[];return}}catch(a){}A(g)}.bind(null,$RV);');var t3=U('$RC("'),t5=U('$RM=new Map;$RR=function(n,w,p){function u(q){this._p=null;q()}for(var r=new Map,t=document,h,b,e=t.querySelectorAll("link[data-precedence],style[data-precedence]"),v=[],k=0;b=e[k++];)"not all"===b.getAttribute("media")?v.push(b):("LINK"===b.tagName&&$RM.set(b.getAttribute("href"),b),r.set(b.dataset.precedence,h=b));e=0;b=[];var l,a;for(k=!0;;){if(k){var f=p[e++];if(!f){k=!1;e=0;continue}var c=!1,m=0;var d=f[m++];if(a=$RM.get(d)){var g=a._p;c=!0}else{a=t.createElement("link");a.href=d;a.rel=\n"stylesheet";for(a.dataset.precedence=l=f[m++];g=f[m++];)a.setAttribute(g,f[m++]);g=a._p=new Promise(function(q,x){a.onload=u.bind(a,q);a.onerror=u.bind(a,x)});$RM.set(d,a)}d=a.getAttribute("media");!g||d&&!matchMedia(d).matches||b.push(g);if(c)continue}else{a=v[e++];if(!a)break;l=a.getAttribute("data-precedence");a.removeAttribute("media")}c=r.get(l)||h;c===h&&(h=a);r.set(l,a);c?c.parentNode.insertBefore(a,c.nextSibling):(c=t.head,c.insertBefore(a,c.firstChild))}if(p=document.getElementById(n))p.previousSibling.data=\n"$~";Promise.all(b).then($RC.bind(null,n,w),$RX.bind(null,n,"CSS failed to load"))};$RR("'),t4=U('$RR("'),t9=U('","'),t8=U('",'),t6=U('"'),t7=U(")</script>");U('<template data-rci="" data-bid="'),U('<template data-rri="" data-bid="'),U('" data-sid="'),U('" data-sty="');var ne=U('$RX=function(b,c,d,e,f){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),f&&(a.cstck=f),b._reactRetry&&b._reactRetry())};'),nt=U('$RX=function(b,c,d,e,f){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),f&&(a.cstck=f),b._reactRetry&&b._reactRetry())};;$RX("'),nn=U('$RX("'),nr=U('"'),ni=U(","),na=U(")</script>");U('<template data-rxi="" data-bid="'),U('" data-dgst="'),U('" data-msg="'),U('" data-stck="'),U('" data-cstck="');var no=/[<\u2028\u2029]/g,ns=/[&><\u2028\u2029]/g;function nl(e){return JSON.stringify(e).replace(ns,function(e){switch(e){case"&":return"\\u0026";case">":return"\\u003e";case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSObjectForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}var nu=U(' media="not all" data-precedence="'),nc=U('" data-href="'),nd=U('">'),nh=U("</style>"),np=!1,nf=!0;function nm(e){var t=e.rules,n=e.hrefs,r=0;if(n.length){for(j(this,eu.startInlineStyle),j(this,nu),j(this,e.precedence),j(this,nc);r<n.length-1;r++)j(this,n[r]),j(this,nS);for(j(this,n[r]),j(this,nd),r=0;r<t.length;r++)j(this,t[r]);nf=F(this,nh),np=!0,t.length=0,n.length=0}}function ng(e){return 2!==e.state&&(np=!0)}function nv(e,t,n){return np=!1,nf=!0,eu=n,t.styles.forEach(nm,e),eu=null,t.stylesheets.forEach(ng),np&&(n.stylesToHoist=!0),nf}function ny(e){for(var t=0;t<e.length;t++)j(this,e[t]);e.length=0}var nb=[];function nx(e){e9(nb,e.props);for(var t=0;t<nb.length;t++)j(this,nb[t]);nb.length=0,e.state=2}var nw=U(' data-precedence="'),nk=U('" data-href="'),nS=U(" "),n_=U('">'),nC=U("</style>");function nA(e){var t=0<e.sheets.size;e.sheets.forEach(nx,this),e.sheets.clear();var n=e.rules,r=e.hrefs;if(!t||r.length){if(j(this,eu.startInlineStyle),j(this,nw),j(this,e.precedence),e=0,r.length){for(j(this,nk);e<r.length-1;e++)j(this,r[e]),j(this,nS);j(this,r[e])}for(j(this,n_),e=0;e<n.length;e++)j(this,n[e]);j(this,nC),n.length=0,r.length=0}}function nE(e){if(0===e.state){e.state=1;var t=e.props;for(e9(nb,{rel:"preload",as:"style",href:e.props.href,crossOrigin:t.crossOrigin,fetchPriority:t.fetchPriority,integrity:t.integrity,media:t.media,hrefLang:t.hrefLang,referrerPolicy:t.referrerPolicy}),e=0;e<nb.length;e++)j(this,nb[e]);nb.length=0}}function nT(e){e.sheets.forEach(nE,this),e.sheets.clear()}U('<link rel="expect" href="#'),U('" blocking="render"/>');var nM=U(' id="');function nI(e,t){0==(32&t.instructions)&&(t.instructions|=32,e.push(nM,B(Q("_"+t.idPrefix+"R_")),eU))}var nN=U("["),nD=U(",["),nP=U(","),nR=U("]");function nO(){return{styles:new Set,stylesheets:new Set}}function nj(e,t){null==e.crossOrigin&&(e.crossOrigin=t[0]),null==e.integrity&&(e.integrity=t[1])}function nF(e,t,n){for(var r in t="<"+(e=(""+e).replace(nL,nz))+'>; rel=preload; as="'+(t=(""+t).replace(nB,nU))+'"',n)q.call(n,r)&&"string"==typeof(e=n[r])&&(t+="; "+r.toLowerCase()+'="'+(""+e).replace(nB,nU)+'"');return t}var nL=/[<>\r\n]/g;function nz(e){switch(e){case"<":return"%3C";case">":return"%3E";case"\n":return"%0A";case"\r":return"%0D";default:throw Error("escapeLinkHrefForHeaderContextReplacer encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}}var nB=/["';,\r\n]/g;function nU(e){switch(e){case'"':return"%22";case"'":return"%27";case";":return"%3B";case",":return"%2C";case"\n":return"%0A";case"\r":return"%0D";default:throw Error("escapeStringForLinkHeaderQuotedParamValueContextReplacer encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}}function nH(e){this.styles.add(e)}function nW(e){this.stylesheets.add(e)}function nV(e,t){t.styles.forEach(nH,e),t.stylesheets.forEach(nW,e)}var nq=Function.prototype.bind,nG=Symbol.for("react.client.reference");function n$(e){if(null==e)return null;if("function"==typeof e)return e.$$typeof===nG?null:e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case l:return"Fragment";case c:return"Profiler";case u:return"StrictMode";case f:return"Suspense";case m:return"SuspenseList";case x:return"Activity"}if("object"==typeof e)switch(e.$$typeof){case s:return"Portal";case h:return e.displayName||"Context";case d:return(e._context.displayName||"Context")+".Consumer";case p:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case g:return null!==(t=e.displayName||null)?t:n$(e.type)||"Memo";case y:t=e._payload,e=e._init;try{return n$(e(t))}catch(e){}}return null}var nK={},nY=null;function nX(e,t){if(e!==t){e.context._currentValue=e.parentValue,e=e.parent;var n=t.parent;if(null===e){if(null!==n)throw Error(a(401))}else{if(null===n)throw Error(a(401));nX(e,n)}t.context._currentValue=t.value}}function nZ(e){var t=nY;t!==e&&(null===t?function e(t){var n=t.parent;null!==n&&e(n),t.context._currentValue=t.value}(e):null===e?function e(t){t.context._currentValue=t.parentValue,null!==(t=t.parent)&&e(t)}(t):t.depth===e.depth?nX(t,e):t.depth>e.depth?function e(t,n){if(t.context._currentValue=t.parentValue,null===(t=t.parent))throw Error(a(402));t.depth===n.depth?nX(t,n):e(t,n)}(t,e):function e(t,n){var r=n.parent;if(null===r)throw Error(a(402));t.depth===r.depth?nX(t,r):e(t,r),n.context._currentValue=n.value}(t,e),nY=e)}var nJ={enqueueSetState:function(e,t){null!==(e=e._reactInternals).queue&&e.queue.push(t)},enqueueReplaceState:function(e,t){(e=e._reactInternals).replace=!0,e.queue=[t]},enqueueForceUpdate:function(){}},nQ={id:1,overflow:""};function n0(e,t,n){var r=e.id;e=e.overflow;var i=32-n1(r)-1;r&=~(1<<i),n+=1;var a=32-n1(t)+i;if(30<a){var o=i-i%5;return a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,{id:1<<32-n1(t)+i|n<<i|r,overflow:a+e}}return{id:1<<a|n<<i|r,overflow:e}}var n1=Math.clz32?Math.clz32:function(e){return 0==(e>>>=0)?32:31-(n2(e)/n3|0)|0},n2=Math.log,n3=Math.LN2;function n5(){}var n4=Error(a(460)),n9=null;function n8(){if(null===n9)throw Error(a(459));var e=n9;return n9=null,e}var n6="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},n7=null,re=null,rt=null,rn=null,rr=null,ri=null,ra=!1,ro=!1,rs=0,rl=0,ru=-1,rc=0,rd=null,rh=null,rp=0;function rf(){if(null===n7)throw Error(a(321));return n7}function rm(){if(0<rp)throw Error(a(312));return{memoizedState:null,queue:null,next:null}}function rg(){return null===ri?null===rr?(ra=!1,rr=ri=rm()):(ra=!0,ri=rr):null===ri.next?(ra=!1,ri=ri.next=rm()):(ra=!0,ri=ri.next),ri}function rv(){var e=rd;return rd=null,e}function ry(){rn=rt=re=n7=null,ro=!1,rr=null,rp=0,ri=rh=null}function rb(e,t){return"function"==typeof t?t(e):t}function rx(e,t,n){if(n7=rf(),ri=rg(),ra){var r=ri.queue;if(t=r.dispatch,null!==rh&&void 0!==(n=rh.get(r))){rh.delete(r),r=ri.memoizedState;do r=e(r,n.action),n=n.next;while(null!==n)return ri.memoizedState=r,[r,t]}return[ri.memoizedState,t]}return e=e===rb?"function"==typeof t?t():t:void 0!==n?n(t):t,ri.memoizedState=e,e=(e=ri.queue={last:null,dispatch:null}).dispatch=rk.bind(null,n7,e),[ri.memoizedState,e]}function rw(e,t){if(n7=rf(),ri=rg(),t=void 0===t?null:t,null!==ri){var n=ri.memoizedState;if(null!==n&&null!==t){var r=n[1];s:if(null===r)r=!1;else{for(var i=0;i<r.length&&i<t.length;i++)if(!n6(t[i],r[i])){r=!1;break s}r=!0}if(r)return n[0]}}return e=e(),ri.memoizedState=[e,t],e}function rk(e,t,n){if(25<=rp)throw Error(a(301));if(e===n7)if(ro=!0,e={action:n,next:null},null===rh&&(rh=new Map),void 0===(n=rh.get(t)))rh.set(t,e);else{for(t=n;null!==t.next;)t=t.next;t.next=e}}function rS(){throw Error(a(394))}function r_(){throw Error(a(479))}function rC(e,t,n){rf();var r=rl++,i=rt;if("function"==typeof e.$$FORM_ACTION){var a=null,o=rn;i=i.formState;var s=e.$$IS_SIGNATURE_EQUAL;if(null!==i&&"function"==typeof s){var l=i[1];s.call(e,i[2],i[3])&&l===(a=void 0!==n?"p"+n:"k"+E(JSON.stringify([o,null,r]),0))&&(ru=r,t=i[0])}var u=e.bind(null,t);return e=function(e){u(e)},"function"==typeof u.$$FORM_ACTION&&(e.$$FORM_ACTION=function(e){e=u.$$FORM_ACTION(e),void 0!==n&&(n+="",e.action=n);var t=e.data;return t&&(null===a&&(a=void 0!==n?"p"+n:"k"+E(JSON.stringify([o,null,r]),0)),t.append("$ACTION_KEY",a)),e}),[t,e,!1]}var c=e.bind(null,t);return[t,function(e){c(e)},!1]}function rA(e){var t=rc;rc+=1,null===rd&&(rd=[]);var n=rd,r=e,i=t;switch(void 0===(i=n[i])?n.push(r):i!==r&&(r.then(n5,n5),r=i),r.status){case"fulfilled":return r.value;case"rejected":throw r.reason;default:switch("string"==typeof r.status?r.then(n5,n5):((n=r).status="pending",n.then(function(e){if("pending"===r.status){var t=r;t.status="fulfilled",t.value=e}},function(e){if("pending"===r.status){var t=r;t.status="rejected",t.reason=e}})),r.status){case"fulfilled":return r.value;case"rejected":throw r.reason}throw n9=r,n4}}function rE(){throw Error(a(393))}var rT,rM,rI={readContext:function(e){return e._currentValue},use:function(e){if(null!==e&&"object"==typeof e){if("function"==typeof e.then)return rA(e);if(e.$$typeof===h)return e._currentValue}throw Error(a(438,String(e)))},useContext:function(e){return rf(),e._currentValue},useMemo:rw,useReducer:rx,useRef:function(e){n7=rf();var t=(ri=rg()).memoizedState;return null===t?(e={current:e},ri.memoizedState=e):t},useState:function(e){return rx(rb,e)},useInsertionEffect:n5,useLayoutEffect:n5,useCallback:function(e,t){return rw(function(){return e},t)},useImperativeHandle:n5,useEffect:n5,useDebugValue:n5,useDeferredValue:function(e,t){return rf(),void 0!==t?t:e},useTransition:function(){return rf(),[!1,rS]},useId:function(){var e=re.treeContext,t=e.overflow;e=((e=e.id)&~(1<<32-n1(e)-1)).toString(32)+t;var n=rN;if(null===n)throw Error(a(404));return t=rs++,e="_"+n.idPrefix+"R_"+e,0<t&&(e+="H"+t.toString(32)),e+"_"},useSyncExternalStore:function(e,t,n){if(void 0===n)throw Error(a(407));return n()},useOptimistic:function(e){return rf(),[e,r_]},useActionState:rC,useFormState:rC,useHostTransitionStatus:function(){return rf(),eo},useMemoCache:function(e){for(var t=Array(e),n=0;n<e;n++)t[n]=k;return t},useCacheRefresh:function(){return rE}},rN=null,rD={getCacheForType:function(){throw Error(a(248))},cacheSignal:function(){throw Error(a(248))}};function rP(e){if(void 0===rT)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);rT=t&&t[1]||"",rM=-1<e.stack.indexOf("\n    at")?" (<anonymous>)":-1<e.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+rT+e+rM}var rR=!1;function rO(e,t){if(!e||rR)return"";rR=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(e){var r=e}Reflect.construct(e,[],n)}else{try{n.call()}catch(e){r=e}e.call(n.prototype)}}else{try{throw Error()}catch(e){r=e}(n=e())&&"function"==typeof n.catch&&n.catch(function(){})}}catch(e){if(e&&r&&"string"==typeof e.stack)return[e.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var a=r.DetermineComponentFrameRoot(),o=a[0],s=a[1];if(o&&s){var l=o.split("\n"),u=s.split("\n");for(i=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;if(r===l.length||i===u.length)for(r=l.length-1,i=u.length-1;1<=r&&0<=i&&l[r]!==u[i];)i--;for(;1<=r&&0<=i;r--,i--)if(l[r]!==u[i]){if(1!==r||1!==i)do if(r--,i--,0>i||l[r]!==u[i]){var c="\n"+l[r].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=r&&0<=i)break}}}finally{rR=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?rP(n):""}function rj(e){if("object"==typeof e&&null!==e&&"string"==typeof e.environmentName){var t=e.environmentName;"string"==typeof(e=[e])[0]?e.splice(0,1,"%c%s%c "+e[0],"background: #e6e6e6;background: light-dark(rgba(0,0,0,0.1), rgba(255,255,255,0.25));color: #000000;color: light-dark(#000000, #ffffff);border-radius: 2px"," "+t+" ",""):e.splice(0,0,"%c%s%c ","background: #e6e6e6;background: light-dark(rgba(0,0,0,0.1), rgba(255,255,255,0.25));color: #000000;color: light-dark(#000000, #ffffff);border-radius: 2px"," "+t+" ",""),e.unshift(console),(t=nq.apply(console.error,e))()}else console.error(e);return null}function rF(e,t,n,r,i,a,o,s,l,u,c){var d=new Set;this.destination=null,this.flushScheduled=!1,this.resumableState=e,this.renderState=t,this.rootFormatContext=n,this.progressiveChunkSize=void 0===r?12800:r,this.status=10,this.fatalError=null,this.pendingRootTasks=this.allPendingTasks=this.nextSegmentId=0,this.completedPreambleSegments=this.completedRootSegment=null,this.byteSize=0,this.abortableTasks=d,this.pingedTasks=[],this.clientRenderedBoundaries=[],this.completedBoundaries=[],this.partialBoundaries=[],this.trackedPostpones=null,this.onError=void 0===i?rj:i,this.onPostpone=void 0===u?n5:u,this.onAllReady=void 0===a?n5:a,this.onShellReady=void 0===o?n5:o,this.onShellError=void 0===s?n5:s,this.onFatalError=void 0===l?n5:l,this.formState=void 0===c?null:c}function rL(e,t,n,r,i,a,o,s,l,u,c,d){return(n=rV(t=new rF(t,n,r,i,a,o,s,l,u,c,d),0,null,r,!1,!1)).parentFlushed=!0,rq(e=rH(t,null,e,-1,null,n,null,null,t.abortableTasks,null,r,null,nQ,null,null)),t.pingedTasks.push(e),t}var rz=null;function rB(e,t){e.pingedTasks.push(t),1===e.pingedTasks.length&&(e.flushScheduled=null!==e.destination,null!==e.trackedPostpones||10===e.status?P(function(){return id(e)}):I(function(){return id(e)}))}function rU(e,t,n,r,i){return n={status:0,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,row:t,completedSegments:[],byteSize:0,fallbackAbortableTasks:n,errorDigest:null,contentState:nO(),fallbackState:nO(),contentPreamble:r,fallbackPreamble:i,trackedContentKeyPath:null,trackedFallbackNode:null},null!==t&&(t.pendingTasks++,null!==(r=t.boundaries)&&(e.allPendingTasks++,n.pendingTasks++,r.push(n)),null!==(e=t.inheritedHoistables)&&nV(n.contentState,e)),n}function rH(e,t,n,r,i,a,o,s,l,u,c,d,h,p,f){e.allPendingTasks++,null===i?e.pendingRootTasks++:i.pendingTasks++,null!==p&&p.pendingTasks++;var m={replay:null,node:n,childIndex:r,ping:function(){return rB(e,m)},blockedBoundary:i,blockedSegment:a,blockedPreamble:o,hoistableState:s,abortSet:l,keyPath:u,formatContext:c,context:d,treeContext:h,row:p,componentStack:f,thenableState:t};return l.add(m),m}function rW(e,t,n,r,i,a,o,s,l,u,c,d,h,p){e.allPendingTasks++,null===a?e.pendingRootTasks++:a.pendingTasks++,null!==h&&h.pendingTasks++,n.pendingTasks++;var f={replay:n,node:r,childIndex:i,ping:function(){return rB(e,f)},blockedBoundary:a,blockedSegment:null,blockedPreamble:null,hoistableState:o,abortSet:s,keyPath:l,formatContext:u,context:c,treeContext:d,row:h,componentStack:p,thenableState:t};return s.add(f),f}function rV(e,t,n,r,i,a){return{status:0,parentFlushed:!1,id:-1,index:t,chunks:[],children:[],preambleChildren:[],parentFormatContext:r,boundary:n,lastPushedText:i,textEmbedded:a}}function rq(e){var t=e.node;"object"==typeof t&&null!==t&&t.$$typeof===o&&(e.componentStack={parent:e.componentStack,type:t.type})}function rG(e){return null===e?null:{parent:e.parent,type:"Suspense Fallback"}}function r$(e){var t={};return e&&Object.defineProperty(t,"componentStack",{configurable:!0,enumerable:!0,get:function(){try{var n="",r=e;do n+=function e(t){if("string"==typeof t)return rP(t);if("function"==typeof t)return t.prototype&&t.prototype.isReactComponent?rO(t,!0):rO(t,!1);if("object"==typeof t&&null!==t){switch(t.$$typeof){case p:return rO(t.render,!1);case g:return rO(t.type,!1);case y:var n=t,r=n._payload;n=n._init;try{t=n(r)}catch(e){return rP("Lazy")}return e(t)}if("string"==typeof t.name){s:{r=t.name,n=t.env;var i=t.debugLocation;if(null!=i&&(t=Error.prepareStackTrace,Error.prepareStackTrace=void 0,i=i.stack,Error.prepareStackTrace=t,i.startsWith("Error: react-stack-top-frame\n")&&(i=i.slice(29)),-1!==(t=i.indexOf("\n"))&&(i=i.slice(t+1)),-1!==(t=i.indexOf("react_stack_bottom_frame"))&&(t=i.lastIndexOf("\n",t)),-1!==(t=-1===(i=(t=-1!==t?i=i.slice(0,t):"").lastIndexOf("\n"))?t:t.slice(i+1)).indexOf(r))){r="\n"+t;break s}r=rP(r+(n?" ["+n+"]":""))}return r}}switch(t){case m:return rP("SuspenseList");case f:return rP("Suspense")}return""}(r.type),r=r.parent;while(r)var i=n}catch(e){i="\nError generating stack: "+e.message+"\n"+e.stack}return Object.defineProperty(t,"componentStack",{value:i}),i}}),t}function rK(e,t,n){if(null==(t=(e=e.onError)(t,n))||"string"==typeof t)return t}function rY(e,t){var n=e.onShellError,r=e.onFatalError;n(t),r(t),null!==e.destination?(e.status=14,W(e.destination,t)):(e.status=13,e.fatalError=t)}function rX(e,t){rZ(e,t.next,t.hoistables)}function rZ(e,t,n){for(;null!==t;){null!==n&&(nV(t.hoistables,n),t.inheritedHoistables=n);var r=t.boundaries;if(null!==r){t.boundaries=null;for(var i=0;i<r.length;i++){var a=r[i];null!==n&&nV(a.contentState,n),ic(e,a,null,null)}}if(t.pendingTasks--,0<t.pendingTasks)break;n=t.hoistables,t=t.next}}function rJ(e,t){var n=t.boundaries;if(null!==n&&t.pendingTasks===n.length){for(var r=!0,i=0;i<n.length;i++){var a=n[i];if(1!==a.pendingTasks||a.parentFlushed||500<a.byteSize){r=!1;break}}r&&rZ(e,t,t.hoistables)}}function rQ(e){var t={pendingTasks:1,boundaries:null,hoistables:nO(),inheritedHoistables:null,together:!1,next:null};return null!==e&&0<e.pendingTasks&&(t.pendingTasks++,t.boundaries=[],e.next=t),t}function r0(e,t,n,r,i){var a=t.keyPath,o=t.treeContext,s=t.row;t.keyPath=n,n=r.length;var l=null;if(null!==t.replay){var u=t.replay.slots;if(null!==u&&"object"==typeof u)for(var c=0;c<n;c++){var d="backwards"!==i&&"unstable_legacy-backwards"!==i?c:n-1-c,h=r[d];t.row=l=rQ(l),t.treeContext=n0(o,n,d);var p=u[d];"number"==typeof p?(r5(e,t,p,h,d),delete u[d]):it(e,t,h,d),0==--l.pendingTasks&&rX(e,l)}else for(u=0;u<n;u++)d=r[c="backwards"!==i&&"unstable_legacy-backwards"!==i?u:n-1-u],t.row=l=rQ(l),t.treeContext=n0(o,n,c),it(e,t,d,c),0==--l.pendingTasks&&rX(e,l)}else if("backwards"!==i&&"unstable_legacy-backwards"!==i)for(i=0;i<n;i++)u=r[i],t.row=l=rQ(l),t.treeContext=n0(o,n,i),it(e,t,u,i),0==--l.pendingTasks&&rX(e,l);else{for(u=(i=t.blockedSegment).children.length,c=i.chunks.length,d=n-1;0<=d;d--){h=r[d],t.row=l=rQ(l),t.treeContext=n0(o,n,d),p=rV(e,c,null,t.formatContext,0!==d||i.lastPushedText,!0),i.children.splice(u,0,p),t.blockedSegment=p;try{it(e,t,h,d),p.lastPushedText&&p.textEmbedded&&p.chunks.push(eD),p.status=1,iu(e,t.blockedBoundary,p),0==--l.pendingTasks&&rX(e,l)}catch(t){throw p.status=12===e.status?3:4,t}}t.blockedSegment=i,i.lastPushedText=!1}null!==s&&null!==l&&0<l.pendingTasks&&(s.pendingTasks++,l.next=s),t.treeContext=o,t.row=s,t.keyPath=a}function r1(e,t,n,r,i,a){var o=t.thenableState;for(t.thenableState=null,n7={},re=t,rt=e,rn=n,rl=rs=0,ru=-1,rc=0,rd=o,e=r(i,a);ro;)ro=!1,rl=rs=0,ru=-1,rc=0,rp+=1,ri=null,e=r(i,a);return ry(),e}function r2(e,t,n,r,i,a,o){var s=!1;if(0!==a&&null!==e.formState){var l=t.blockedSegment;if(null!==l){s=!0,l=l.chunks;for(var u=0;u<a;u++)u===o?l.push(e5):l.push(e4)}}a=t.keyPath,t.keyPath=n,i?(n=t.treeContext,t.treeContext=n0(n,1,0),it(e,t,r,-1),t.treeContext=n):s?it(e,t,r,-1):r4(e,t,r,-1),t.keyPath=a}function r3(e,t,n,i,o,s){if("function"==typeof i)if(i.prototype&&i.prototype.isReactComponent){var k=o;if("ref"in o)for(var _ in k={},o)"ref"!==_&&(k[_]=o[_]);var E=i.defaultProps;if(E)for(var T in k===o&&(k=V({},k,o)),E)void 0===k[T]&&(k[T]=E[T]);o=k,k=nK,"object"==typeof(E=i.contextType)&&null!==E&&(k=E._currentValue);var M=void 0!==(k=new i(o,k)).state?k.state:null;if(k.updater=nJ,k.props=o,k.state=M,E={queue:[],replace:!1},k._reactInternals=E,s=i.contextType,k.context="object"==typeof s&&null!==s?s._currentValue:nK,"function"==typeof(s=i.getDerivedStateFromProps)&&(M=null==(s=s(o,M))?M:V({},M,s),k.state=M),"function"!=typeof i.getDerivedStateFromProps&&"function"!=typeof k.getSnapshotBeforeUpdate&&("function"==typeof k.UNSAFE_componentWillMount||"function"==typeof k.componentWillMount))if(i=k.state,"function"==typeof k.componentWillMount&&k.componentWillMount(),"function"==typeof k.UNSAFE_componentWillMount&&k.UNSAFE_componentWillMount(),i!==k.state&&nJ.enqueueReplaceState(k,k.state,null),null!==E.queue&&0<E.queue.length)if(i=E.queue,s=E.replace,E.queue=null,E.replace=!1,s&&1===i.length)k.state=i[0];else{for(E=s?i[0]:k.state,M=!0,s=+!!s;s<i.length;s++)null!=(T="function"==typeof(T=i[s])?T.call(k,E,o,void 0):T)&&(M?(M=!1,E=V({},E,T)):V(E,T));k.state=E}else E.queue=null;if(i=k.render(),12===e.status)throw null;o=t.keyPath,t.keyPath=n,r4(e,t,i,-1),t.keyPath=o}else{if(i=r1(e,t,n,i,o,void 0),12===e.status)throw null;r2(e,t,n,i,0!==rs,rl,ru)}else if("string"==typeof i)if(null===(k=t.blockedSegment))k=o.children,E=t.formatContext,M=t.keyPath,t.formatContext=eT(E,i,o),t.keyPath=n,it(e,t,k,-1),t.formatContext=E,t.keyPath=M;else{if(M=function(e,t,n,i,o,s,l,u,c){switch(t){case"div":case"span":case"svg":case"path":case"g":case"p":case"li":case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":break;case"a":e.push(tc("a"));var d,h=null,p=null;for(d in n)if(q.call(n,d)){var f=n[d];if(null!=f)switch(d){case"children":h=f;break;case"dangerouslySetInnerHTML":p=f;break;case"href":""===f?eV(e,"href",""):eZ(e,d,f);break;default:eZ(e,d,f)}}if(e.push(eJ),e0(e,p,h),"string"==typeof h){e.push(B(Q(h)));var m=null}else m=h;return m;case"select":e.push(tc("select"));var g,y=null,b=null;for(g in n)if(q.call(n,g)){var x=n[g];if(null!=x)switch(g){case"children":y=x;break;case"dangerouslySetInnerHTML":b=x;break;case"defaultValue":case"value":break;default:eZ(e,g,x)}}return e.push(eJ),e0(e,b,y),y;case"option":var w=u.selectedValue;e.push(tc("option"));var k,S=null,_=null,C=null,E=null;for(k in n)if(q.call(n,k)){var T=n[k];if(null!=T)switch(k){case"children":S=T;break;case"selected":C=T;break;case"dangerouslySetInnerHTML":E=T;break;case"value":_=T;default:eZ(e,k,T)}}if(null!=w){var M,I,N=null!==_?""+_:(M=S,I="",r.Children.forEach(M,function(e){null!=e&&(I+=e)}),I);if(A(w)){for(var D=0;D<w.length;D++)if(""+w[D]===N){e.push(e1);break}}else""+w===N&&e.push(e1)}else C&&e.push(e1);return e.push(eJ),e0(e,E,S),S;case"textarea":e.push(tc("textarea"));var P,R=null,O=null,j=null;for(P in n)if(q.call(n,P)){var F=n[P];if(null!=F)switch(P){case"children":j=F;break;case"value":R=F;break;case"defaultValue":O=F;break;case"dangerouslySetInnerHTML":throw Error(a(91));default:eZ(e,P,F)}}if(null===R&&null!==O&&(R=O),e.push(eJ),null!=j){if(null!=R)throw Error(a(92));if(A(j)){if(1<j.length)throw Error(a(93));R=""+j[0]}R=""+j}return"string"==typeof R&&"\n"===R[0]&&e.push(ts),null!==R&&e.push(B(Q(""+R))),null;case"input":e.push(tc("input"));var L,z=null,U=null,H=null,W=null,G=null,$=null,K=null,X=null,Z=null;for(L in n)if(q.call(n,L)){var J=n[L];if(null!=J)switch(L){case"children":case"dangerouslySetInnerHTML":throw Error(a(399,"input"));case"name":z=J;break;case"formAction":U=J;break;case"formEncType":H=J;break;case"formMethod":W=J;break;case"formTarget":G=J;break;case"defaultChecked":Z=J;break;case"defaultValue":K=J;break;case"checked":X=J;break;case"value":$=J;break;default:eZ(e,L,J)}}var ee=eX(e,i,o,U,H,W,G,z);return null!==X?eW(e,"checked",X):null!==Z&&eW(e,"checked",Z),null!==$?eZ(e,"value",$):null!==K&&eZ(e,"value",K),e.push(eQ),null!=ee&&ee.forEach(e$,e),null;case"button":e.push(tc("button"));var et,en=null,ei=null,ea=null,eo=null,es=null,eu=null,ec=null;for(et in n)if(q.call(n,et)){var ed=n[et];if(null!=ed)switch(et){case"children":en=ed;break;case"dangerouslySetInnerHTML":ei=ed;break;case"name":ea=ed;break;case"formAction":eo=ed;break;case"formEncType":es=ed;break;case"formMethod":eu=ed;break;case"formTarget":ec=ed;break;default:eZ(e,et,ed)}}var eh=eX(e,i,o,eo,es,eu,ec,ea);if(e.push(eJ),null!=eh&&eh.forEach(e$,e),e0(e,ei,en),"string"==typeof en){e.push(B(Q(en)));var ep=null}else ep=en;return ep;case"form":e.push(tc("form"));var ef,em=null,eg=null,ev=null,ey=null,eb=null,ex=null;for(ef in n)if(q.call(n,ef)){var ew=n[ef];if(null!=ew)switch(ef){case"children":em=ew;break;case"dangerouslySetInnerHTML":eg=ew;break;case"action":ev=ew;break;case"encType":ey=ew;break;case"method":eb=ew;break;case"target":ex=ew;break;default:eZ(e,ef,ew)}}var ek=null,eS=null;if("function"==typeof ev){var e_=eY(i,ev);null!==e_?(ev=e_.action||"",ey=e_.encType,eb=e_.method,ex=e_.target,ek=e_.data,eS=e_.name):(e.push(ez,B("action"),eB,eq,eU),ex=eb=ey=ev=null,e3(i,o))}if(null!=ev&&eZ(e,"action",ev),null!=ey&&eZ(e,"encType",ey),null!=eb&&eZ(e,"method",eb),null!=ex&&eZ(e,"target",ex),e.push(eJ),null!==eS&&(e.push(eG),eV(e,"name",eS),e.push(eQ),null!=ek&&ek.forEach(e$,e)),e0(e,eg,em),"string"==typeof em){e.push(B(Q(em)));var eC=null}else eC=em;return eC;case"menuitem":for(var eA in e.push(tc("menuitem")),n)if(q.call(n,eA)){var eE=n[eA];if(null!=eE)switch(eA){case"children":case"dangerouslySetInnerHTML":throw Error(a(400));default:eZ(e,eA,eE)}}return e.push(eJ),null;case"object":e.push(tc("object"));var eT,eM=null,eI=null;for(eT in n)if(q.call(n,eT)){var eN=n[eT];if(null!=eN)switch(eT){case"children":eM=eN;break;case"dangerouslySetInnerHTML":eI=eN;break;case"data":var eP=er(""+eN);if(""===eP)break;e.push(ez,B("data"),eB,B(Q(eP)),eU);break;default:eZ(e,eT,eN)}}if(e.push(eJ),e0(e,eI,eM),"string"==typeof eM){e.push(B(Q(eM)));var eR=null}else eR=eM;return eR;case"title":var eO=1&u.tagScope,ej=4&u.tagScope;if(4===u.insertionMode||eO||null!=n.itemProp)var eF=te(e,n);else ej?eF=null:(te(o.hoistableChunks,n),eF=void 0);return eF;case"link":var eH=1&u.tagScope,eK=4&u.tagScope,e2=n.rel,e5=n.href,e4=n.precedence;if(4===u.insertionMode||eH||null!=n.itemProp||"string"!=typeof e2||"string"!=typeof e5||""===e5){e9(e,n);var tl=null}else if("stylesheet"===n.rel)if("string"!=typeof e4||null!=n.disabled||n.onLoad||n.onError)tl=e9(e,n);else{var tu=o.styles.get(e4),th=i.styleResources.hasOwnProperty(e5)?i.styleResources[e5]:void 0;if(null!==th){i.styleResources[e5]=null,tu||(tu={precedence:B(Q(e4)),rules:[],hrefs:[],sheets:new Map},o.styles.set(e4,tu));var tf={state:0,props:V({},n,{"data-precedence":n.precedence,precedence:null})};if(th){2===th.length&&nj(tf.props,th);var tm=o.preloads.stylesheets.get(e5);tm&&0<tm.length?tm.length=0:tf.state=1}tu.sheets.set(e5,tf),l&&l.stylesheets.add(tf)}else if(tu){var tg=tu.sheets.get(e5);tg&&l&&l.stylesheets.add(tg)}c&&e.push(eD),tl=null}else n.onLoad||n.onError?tl=e9(e,n):(c&&e.push(eD),tl=eK?null:e9(o.hoistableChunks,n));return tl;case"script":var tv=1&u.tagScope,ty=n.async;if("string"!=typeof n.src||!n.src||!ty||"function"==typeof ty||"symbol"==typeof ty||n.onLoad||n.onError||4===u.insertionMode||tv||null!=n.itemProp)var tb=ti(e,n);else{var tx=n.src;if("module"===n.type)var tw=i.moduleScriptResources,tk=o.preloads.moduleScripts;else tw=i.scriptResources,tk=o.preloads.scripts;var tS=tw.hasOwnProperty(tx)?tw[tx]:void 0;if(null!==tS){tw[tx]=null;var t_=n;if(tS){2===tS.length&&nj(t_=V({},n),tS);var tC=tk.get(tx);tC&&(tC.length=0)}var tA=[];o.scripts.add(tA),ti(tA,t_)}c&&e.push(eD),tb=null}return tb;case"style":var tE=1&u.tagScope,tT=n.precedence,tM=n.href,tI=n.nonce;if(4===u.insertionMode||tE||null!=n.itemProp||"string"!=typeof tT||"string"!=typeof tM||""===tM){e.push(tc("style"));var tN,tD=null,tP=null;for(tN in n)if(q.call(n,tN)){var tR=n[tN];if(null!=tR)switch(tN){case"children":tD=tR;break;case"dangerouslySetInnerHTML":tP=tR;break;default:eZ(e,tN,tR)}}e.push(eJ);var tO=Array.isArray(tD)?2>tD.length?tD[0]:null:tD;"function"!=typeof tO&&"symbol"!=typeof tO&&null!=tO&&e.push(B((""+tO).replace(e8,e6))),e0(e,tP,tD),e.push(tp("style"));var tj=null}else{var tF=o.styles.get(tT);if(null!==(i.styleResources.hasOwnProperty(tM)?i.styleResources[tM]:void 0)){i.styleResources[tM]=null,tF||(tF={precedence:B(Q(tT)),rules:[],hrefs:[],sheets:new Map},o.styles.set(tT,tF));var tL=o.nonce.style;if(!tL||tL===tI){tF.hrefs.push(B(Q(tM)));var tz,tB=tF.rules,tU=null,tH=null;for(tz in n)if(q.call(n,tz)){var tW=n[tz];if(null!=tW)switch(tz){case"children":tU=tW;break;case"dangerouslySetInnerHTML":tH=tW}}var tV=Array.isArray(tU)?2>tU.length?tU[0]:null:tU;"function"!=typeof tV&&"symbol"!=typeof tV&&null!=tV&&tB.push(B((""+tV).replace(e8,e6))),e0(tB,tH,tU)}}tF&&l&&l.styles.add(tF),c&&e.push(eD),tj=void 0}return tj;case"meta":var tq=1&u.tagScope,tG=4&u.tagScope;if(4===u.insertionMode||tq||null!=n.itemProp)var t$=e7(e,n,"meta");else c&&e.push(eD),t$=tG?null:"string"==typeof n.charSet?e7(o.charsetChunks,n,"meta"):"viewport"===n.name?e7(o.viewportChunks,n,"meta"):e7(o.hoistableChunks,n,"meta");return t$;case"listing":case"pre":e.push(tc(t));var tK,tY=null,tX=null;for(tK in n)if(q.call(n,tK)){var tZ=n[tK];if(null!=tZ)switch(tK){case"children":tY=tZ;break;case"dangerouslySetInnerHTML":tX=tZ;break;default:eZ(e,tK,tZ)}}if(e.push(eJ),null!=tX){if(null!=tY)throw Error(a(60));if("object"!=typeof tX||!("__html"in tX))throw Error(a(61));var tJ=tX.__html;null!=tJ&&("string"==typeof tJ&&0<tJ.length&&"\n"===tJ[0]?e.push(ts,B(tJ)):e.push(B(""+tJ)))}return"string"==typeof tY&&"\n"===tY[0]&&e.push(ts),tY;case"img":var tQ=3&u.tagScope,t0=n.src,t1=n.srcSet;if(!("lazy"===n.loading||!t0&&!t1||"string"!=typeof t0&&null!=t0||"string"!=typeof t1&&null!=t1||"low"===n.fetchPriority||tQ)&&("string"!=typeof t0||":"!==t0[4]||"d"!==t0[0]&&"D"!==t0[0]||"a"!==t0[1]&&"A"!==t0[1]||"t"!==t0[2]&&"T"!==t0[2]||"a"!==t0[3]&&"A"!==t0[3])&&("string"!=typeof t1||":"!==t1[4]||"d"!==t1[0]&&"D"!==t1[0]||"a"!==t1[1]&&"A"!==t1[1]||"t"!==t1[2]&&"T"!==t1[2]||"a"!==t1[3]&&"A"!==t1[3])){var t2="string"==typeof n.sizes?n.sizes:void 0,t3=t1?t1+"\n"+(t2||""):t0,t5=o.preloads.images,t4=t5.get(t3);if(t4)("high"===n.fetchPriority||10>o.highImagePreloads.size)&&(t5.delete(t3),o.highImagePreloads.add(t4));else if(!i.imageResources.hasOwnProperty(t3)){i.imageResources[t3]=el;var t9,t8=n.crossOrigin,t6="string"==typeof t8?"use-credentials"===t8?t8:"":void 0,t7=o.headers;t7&&0<t7.remainingCapacity&&"string"!=typeof n.srcSet&&("high"===n.fetchPriority||500>t7.highImagePreloads.length)&&(t9=nF(t0,"image",{imageSrcSet:n.srcSet,imageSizes:n.sizes,crossOrigin:t6,integrity:n.integrity,nonce:n.nonce,type:n.type,fetchPriority:n.fetchPriority,referrerPolicy:n.refererPolicy}),0<=(t7.remainingCapacity-=t9.length+2))?(o.resets.image[t3]=el,t7.highImagePreloads&&(t7.highImagePreloads+=", "),t7.highImagePreloads+=t9):(e9(t4=[],{rel:"preload",as:"image",href:t1?void 0:t0,imageSrcSet:t1,imageSizes:t2,crossOrigin:t6,integrity:n.integrity,type:n.type,fetchPriority:n.fetchPriority,referrerPolicy:n.referrerPolicy}),"high"===n.fetchPriority||10>o.highImagePreloads.size?o.highImagePreloads.add(t4):(o.bulkPreloads.add(t4),t5.set(t3,t4)))}}return e7(e,n,"img");case"base":case"area":case"br":case"col":case"embed":case"hr":case"keygen":case"param":case"source":case"track":case"wbr":return e7(e,n,t);case"head":if(2>u.insertionMode){var ne=s||o.preamble;if(ne.headChunks)throw Error(a(545,"`<head>`"));null!==s&&e.push(tt),ne.headChunks=[];var nt=ta(ne.headChunks,n,"head")}else nt=to(e,n,"head");return nt;case"body":if(2>u.insertionMode){var nn=s||o.preamble;if(nn.bodyChunks)throw Error(a(545,"`<body>`"));null!==s&&e.push(tn),nn.bodyChunks=[];var nr=ta(nn.bodyChunks,n,"body")}else nr=to(e,n,"body");return nr;case"html":if(0===u.insertionMode){var ni=s||o.preamble;if(ni.htmlChunks)throw Error(a(545,"`<html>`"));null!==s&&e.push(tr),ni.htmlChunks=[td];var na=ta(ni.htmlChunks,n,"html")}else na=to(e,n,"html");return na;default:if(-1!==t.indexOf("-")){e.push(tc(t));var no,ns=null,nl=null;for(no in n)if(q.call(n,no)){var nu=n[no];if(null!=nu){var nc=no;switch(no){case"children":ns=nu;break;case"dangerouslySetInnerHTML":nl=nu;break;case"style":eL(e,nu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"ref":break;case"className":nc="class";default:if(Y(no)&&"function"!=typeof nu&&"symbol"!=typeof nu&&!1!==nu){if(!0===nu)nu="";else if("object"==typeof nu)continue;e.push(ez,B(nc),eB,B(Q(nu)),eU)}}}}return e.push(eJ),e0(e,nl,ns),ns}}return to(e,n,t)}(k.chunks,i,o,e.resumableState,e.renderState,t.blockedPreamble,t.hoistableState,t.formatContext,k.lastPushedText),k.lastPushedText=!1,E=t.formatContext,s=t.keyPath,t.keyPath=n,3===(t.formatContext=eT(E,i,o)).insertionMode){n=rV(e,0,null,t.formatContext,!1,!1),k.preambleChildren.push(n),t.blockedSegment=n;try{n.status=6,it(e,t,M,-1),n.lastPushedText&&n.textEmbedded&&n.chunks.push(eD),n.status=1,iu(e,t.blockedBoundary,n)}finally{t.blockedSegment=k}}else it(e,t,M,-1);t.formatContext=E,t.keyPath=s;s:{switch(t=k.chunks,e=e.resumableState,i){case"title":case"style":case"script":case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break s;case"body":if(1>=E.insertionMode){e.hasBody=!0;break s}break;case"html":if(0===E.insertionMode){e.hasHtml=!0;break s}break;case"head":if(1>=E.insertionMode)break s}t.push(tp(i))}k.lastPushedText=!1}else{switch(i){case w:case u:case c:case l:i=t.keyPath,t.keyPath=n,r4(e,t,o.children,-1),t.keyPath=i;return;case x:null===(i=t.blockedSegment)?"hidden"!==o.mode&&(i=t.keyPath,t.keyPath=n,it(e,t,o.children,-1),t.keyPath=i):"hidden"!==o.mode&&(i.chunks.push(tb),i.lastPushedText=!1,k=t.keyPath,t.keyPath=n,it(e,t,o.children,-1),t.keyPath=k,i.chunks.push(tx),i.lastPushedText=!1);return;case m:s:{if(i=o.children,"forwards"===(o=o.revealOrder)||"backwards"===o||"unstable_legacy-backwards"===o){if(A(i)){r0(e,t,n,i,o);break s}if((k=C(i))&&(k=k.call(i))){if(!(E=k.next()).done){do E=k.next();while(!E.done)r0(e,t,n,i,o)}break s}}"together"===o?(o=t.keyPath,k=t.row,(E=t.row=rQ(null)).boundaries=[],E.together=!0,t.keyPath=n,r4(e,t,i,-1),0==--E.pendingTasks&&rX(e,E),t.keyPath=o,t.row=k,null!==k&&0<E.pendingTasks&&(k.pendingTasks++,E.next=k)):(o=t.keyPath,t.keyPath=n,r4(e,t,i,-1),t.keyPath=o)}return;case S:case b:throw Error(a(343));case f:s:if(null!==t.replay){i=t.keyPath,k=t.formatContext,E=t.row,t.keyPath=n,t.formatContext=eN(e.resumableState,k),t.row=null,n=o.children;try{it(e,t,n,-1)}finally{t.keyPath=i,t.formatContext=k,t.row=E}}else{i=t.keyPath,s=t.formatContext;var I=t.row;T=t.blockedBoundary,_=t.blockedPreamble;var N=t.hoistableState,D=t.blockedSegment,P=o.fallback;o=o.children;var R=new Set,O=2>t.formatContext.insertionMode?rU(e,t.row,R,eC(),eC()):rU(e,t.row,R,null,null);null!==e.trackedPostpones&&(O.trackedContentKeyPath=n);var j=rV(e,D.chunks.length,O,t.formatContext,!1,!1);D.children.push(j),D.lastPushedText=!1;var F=rV(e,0,null,t.formatContext,!1,!1);if(F.parentFlushed=!0,null!==e.trackedPostpones){k=t.componentStack,M=[(E=[n[0],"Suspense Fallback",n[2]])[1],E[2],[],null],e.trackedPostpones.workingMap.set(E,M),O.trackedFallbackNode=M,t.blockedSegment=j,t.blockedPreamble=O.fallbackPreamble,t.keyPath=E,t.formatContext=eI(e.resumableState,s),t.componentStack=rG(k),j.status=6;try{it(e,t,P,-1),j.lastPushedText&&j.textEmbedded&&j.chunks.push(eD),j.status=1,iu(e,T,j)}catch(t){throw j.status=12===e.status?3:4,t}finally{t.blockedSegment=D,t.blockedPreamble=_,t.keyPath=i,t.formatContext=s}rq(t=rH(e,null,o,-1,O,F,O.contentPreamble,O.contentState,t.abortSet,n,eN(e.resumableState,t.formatContext),t.context,t.treeContext,null,k)),e.pingedTasks.push(t)}else{t.blockedBoundary=O,t.blockedPreamble=O.contentPreamble,t.hoistableState=O.contentState,t.blockedSegment=F,t.keyPath=n,t.formatContext=eN(e.resumableState,s),t.row=null,F.status=6;try{if(it(e,t,o,-1),F.lastPushedText&&F.textEmbedded&&F.chunks.push(eD),F.status=1,iu(e,O,F),il(O,F),0===O.pendingTasks&&0===O.status){if(O.status=1,!(500<O.byteSize)){null!==I&&0==--I.pendingTasks&&rX(e,I),0===e.pendingRootTasks&&t.blockedPreamble&&im(e);break s}}else null!==I&&I.together&&rJ(e,I)}catch(n){O.status=4,12===e.status?(F.status=3,k=e.fatalError):(F.status=4,k=n),O.errorDigest=M=rK(e,k,E=r$(t.componentStack)),r6(e,O)}finally{t.blockedBoundary=T,t.blockedPreamble=_,t.hoistableState=N,t.blockedSegment=D,t.keyPath=i,t.formatContext=s,t.row=I}rq(t=rH(e,null,P,-1,T,j,O.fallbackPreamble,O.fallbackState,R,[n[0],"Suspense Fallback",n[2]],eI(e.resumableState,t.formatContext),t.context,t.treeContext,t.row,rG(t.componentStack))),e.pingedTasks.push(t)}}return}if("object"==typeof i&&null!==i)switch(i.$$typeof){case p:if("ref"in o)for(D in k={},o)"ref"!==D&&(k[D]=o[D]);else k=o;i=r1(e,t,n,i.render,k,s),r2(e,t,n,i,0!==rs,rl,ru);return;case g:r3(e,t,n,i.type,o,s);return;case h:if(E=o.children,k=t.keyPath,o=o.value,M=i._currentValue,i._currentValue=o,nY=i={parent:s=nY,depth:null===s?0:s.depth+1,context:i,parentValue:M,value:o},t.context=i,t.keyPath=n,r4(e,t,E,-1),null===(e=nY))throw Error(a(403));e.context._currentValue=e.parentValue,e=nY=e.parent,t.context=e,t.keyPath=k;return;case d:i=(o=o.children)(i._context._currentValue),o=t.keyPath,t.keyPath=n,r4(e,t,i,-1),t.keyPath=o;return;case y:if(i=(k=i._init)(i._payload),12===e.status)throw null;r3(e,t,n,i,o,s);return}throw Error(a(130,null==i?i:typeof i,""))}}function r5(e,t,n,r,i){var a=t.replay,o=t.blockedBoundary,s=rV(e,0,null,t.formatContext,!1,!1);s.id=n,s.parentFlushed=!0;try{t.replay=null,t.blockedSegment=s,it(e,t,r,i),s.status=1,iu(e,o,s),null===o?e.completedRootSegment=s:(il(o,s),o.parentFlushed&&e.partialBoundaries.push(o))}finally{t.replay=a,t.blockedSegment=null}}function r4(e,t,n,r){null!==t.replay&&"number"==typeof t.replay.slots?r5(e,t,t.replay.slots,n,r):(t.node=n,t.childIndex=r,n=t.componentStack,rq(t),r9(e,t),t.componentStack=n)}function r9(e,t){var n=t.node,r=t.childIndex;if(null!==n){if("object"==typeof n){switch(n.$$typeof){case o:var i=n.type,l=n.key,u=n.props,c=void 0!==(n=u.ref)?n:null,d=n$(i),p=null==l?-1===r?0:r:l;if(l=[t.keyPath,d,p],null!==t.replay)s:{var m=t.replay;for(n=0,r=m.nodes;n<r.length;n++){var g=r[n];if(p===g[1]){if(4===g.length){if(null!==d&&d!==g[0])throw Error(a(490,g[0],d));var b=g[2];d=g[3],p=t.node,t.replay={nodes:b,slots:d,pendingTasks:1};try{if(r3(e,t,l,i,u,c),1===t.replay.pendingTasks&&0<t.replay.nodes.length)throw Error(a(488));t.replay.pendingTasks--}catch(a){if("object"==typeof a&&null!==a&&(a===n4||"function"==typeof a.then))throw t.node===p?t.replay=m:r.splice(n,1),a;t.replay.pendingTasks--,u=r$(t.componentStack),l=e,e=t.blockedBoundary,u=rK(l,i=a,u),ii(l,e,b,d,i,u)}t.replay=m}else{if(i!==f)throw Error(a(490,"Suspense",n$(i)||"Unknown"));l:{m=void 0,i=g[5],c=g[2],d=g[3],p=null===g[4]?[]:g[4][2],g=null===g[4]?null:g[4][3];var x=t.keyPath,w=t.formatContext,k=t.row,S=t.replay,_=t.blockedBoundary,E=t.hoistableState,T=u.children,M=u.fallback,I=new Set;(u=2>t.formatContext.insertionMode?rU(e,t.row,I,eC(),eC()):rU(e,t.row,I,null,null)).parentFlushed=!0,u.rootSegmentID=i,t.blockedBoundary=u,t.hoistableState=u.contentState,t.keyPath=l,t.formatContext=eN(e.resumableState,w),t.row=null,t.replay={nodes:c,slots:d,pendingTasks:1};try{if(it(e,t,T,-1),1===t.replay.pendingTasks&&0<t.replay.nodes.length)throw Error(a(488));if(t.replay.pendingTasks--,0===u.pendingTasks&&0===u.status){u.status=1,e.completedBoundaries.push(u);break l}}catch(n){u.status=4,m=rK(e,n,b=r$(t.componentStack)),u.errorDigest=m,t.replay.pendingTasks--,e.clientRenderedBoundaries.push(u)}finally{t.blockedBoundary=_,t.hoistableState=E,t.replay=S,t.keyPath=x,t.formatContext=w,t.row=k}rq(b=rW(e,null,{nodes:p,slots:g,pendingTasks:0},M,-1,_,u.fallbackState,I,[l[0],"Suspense Fallback",l[2]],eI(e.resumableState,t.formatContext),t.context,t.treeContext,t.row,rG(t.componentStack))),e.pingedTasks.push(b)}}r.splice(n,1);break s}}}else r3(e,t,l,i,u,c);return;case s:throw Error(a(257));case y:if(n=(b=n._init)(n._payload),12===e.status)throw null;r4(e,t,n,r);return}if(A(n))return void r8(e,t,n,r);if((b=C(n))&&(b=b.call(n))){if(!(n=b.next()).done){u=[];do u.push(n.value),n=b.next();while(!n.done)r8(e,t,u,r)}return}if("function"==typeof n.then)return t.thenableState=null,r4(e,t,rA(n),r);if(n.$$typeof===h)return r4(e,t,n._currentValue,r);throw Error(a(31,"[object Object]"===(r=Object.prototype.toString.call(n))?"object with keys {"+Object.keys(n).join(", ")+"}":r))}"string"==typeof n?null!==(r=t.blockedSegment)&&(r.lastPushedText=eP(r.chunks,n,e.renderState,r.lastPushedText)):("number"==typeof n||"bigint"==typeof n)&&null!==(r=t.blockedSegment)&&(r.lastPushedText=eP(r.chunks,""+n,e.renderState,r.lastPushedText))}}function r8(e,t,n,r){var i=t.keyPath;if(-1!==r&&(t.keyPath=[t.keyPath,"Fragment",r],null!==t.replay)){for(var o=t.replay,s=o.nodes,l=0;l<s.length;l++){var u=s[l];if(u[1]===r){t.replay={nodes:r=u[2],slots:u=u[3],pendingTasks:1};try{if(r8(e,t,n,-1),1===t.replay.pendingTasks&&0<t.replay.nodes.length)throw Error(a(488));t.replay.pendingTasks--}catch(i){if("object"==typeof i&&null!==i&&(i===n4||"function"==typeof i.then))throw i;t.replay.pendingTasks--,n=r$(t.componentStack);var c=t.blockedBoundary;n=rK(e,i,n),ii(e,c,r,u,i,n)}t.replay=o,s.splice(l,1);break}}t.keyPath=i;return}if(o=t.treeContext,s=n.length,null!==t.replay&&null!==(l=t.replay.slots)&&"object"==typeof l){for(r=0;r<s;r++)u=n[r],t.treeContext=n0(o,s,r),"number"==typeof(c=l[r])?(r5(e,t,c,u,r),delete l[r]):it(e,t,u,r);t.treeContext=o,t.keyPath=i;return}for(l=0;l<s;l++)r=n[l],t.treeContext=n0(o,s,l),it(e,t,r,l);t.treeContext=o,t.keyPath=i}function r6(e,t){null!==(e=e.trackedPostpones)&&null!==(t=t.trackedContentKeyPath)&&void 0!==(t=e.workingMap.get(t))&&(t.length=4,t[2]=[],t[3]=null)}function r7(e,t,n){return rW(e,n,t.replay,t.node,t.childIndex,t.blockedBoundary,t.hoistableState,t.abortSet,t.keyPath,t.formatContext,t.context,t.treeContext,t.row,t.componentStack)}function ie(e,t,n){var r=t.blockedSegment,i=rV(e,r.chunks.length,null,t.formatContext,r.lastPushedText,!0);return r.children.push(i),r.lastPushedText=!1,rH(e,n,t.node,t.childIndex,t.blockedBoundary,i,t.blockedPreamble,t.hoistableState,t.abortSet,t.keyPath,t.formatContext,t.context,t.treeContext,t.row,t.componentStack)}function it(e,t,n,r){var i=t.formatContext,a=t.context,o=t.keyPath,s=t.treeContext,l=t.componentStack,u=t.blockedSegment;if(null===u){u=t.replay;try{return r4(e,t,n,r)}catch(c){if(ry(),"object"==typeof(n=c===n4?n8():c)&&null!==n){if("function"==typeof n.then){e=r7(e,t,r=rv()).ping,n.then(e,e),t.formatContext=i,t.context=a,t.keyPath=o,t.treeContext=s,t.componentStack=l,t.replay=u,nZ(a);return}if("Maximum call stack size exceeded"===n.message){n=r7(e,t,n=rv()),e.pingedTasks.push(n),t.formatContext=i,t.context=a,t.keyPath=o,t.treeContext=s,t.componentStack=l,t.replay=u,nZ(a);return}}}}else{var c=u.children.length,d=u.chunks.length;try{return r4(e,t,n,r)}catch(r){if(ry(),u.children.length=c,u.chunks.length=d,"object"==typeof(n=r===n4?n8():r)&&null!==n){if("function"==typeof n.then){u=n,e=ie(e,t,n=rv()).ping,u.then(e,e),t.formatContext=i,t.context=a,t.keyPath=o,t.treeContext=s,t.componentStack=l,nZ(a);return}if("Maximum call stack size exceeded"===n.message){u=ie(e,t,u=rv()),e.pingedTasks.push(u),t.formatContext=i,t.context=a,t.keyPath=o,t.treeContext=s,t.componentStack=l,nZ(a);return}}}}throw t.formatContext=i,t.context=a,t.keyPath=o,t.treeContext=s,nZ(a),n}function ir(e){var t=e.blockedBoundary,n=e.blockedSegment;null!==n&&(n.status=3,ic(this,t,e.row,n))}function ii(e,t,n,r,i,o){for(var s=0;s<n.length;s++){var l=n[s];if(4===l.length)ii(e,t,l[2],l[3],i,o);else{l=l[5];var u=rU(e,null,new Set,null,null);u.parentFlushed=!0,u.rootSegmentID=l,u.status=4,u.errorDigest=o,u.parentFlushed&&e.clientRenderedBoundaries.push(u)}}if(n.length=0,null!==r){if(null===t)throw Error(a(487));if(4!==t.status&&(t.status=4,t.errorDigest=o,t.parentFlushed&&e.clientRenderedBoundaries.push(t)),"object"==typeof r)for(var c in r)delete r[c]}}function ia(e,t){try{var n=e.renderState,r=n.onHeaders;if(r){var i=n.headers;if(i){n.headers=null;var a=i.preconnects;if(i.fontPreloads&&(a&&(a+=", "),a+=i.fontPreloads),i.highImagePreloads&&(a&&(a+=", "),a+=i.highImagePreloads),!t){var o=n.styles.values(),s=o.next();l:for(;0<i.remainingCapacity&&!s.done;s=o.next())for(var l=s.value.sheets.values(),u=l.next();0<i.remainingCapacity&&!u.done;u=l.next()){var c=u.value,d=c.props,h=d.href,p=c.props,f=nF(p.href,"style",{crossOrigin:p.crossOrigin,integrity:p.integrity,nonce:p.nonce,type:p.type,fetchPriority:p.fetchPriority,referrerPolicy:p.referrerPolicy,media:p.media});if(0<=(i.remainingCapacity-=f.length+2))n.resets.style[h]=el,a&&(a+=", "),a+=f,n.resets.style[h]="string"==typeof d.crossOrigin||"string"==typeof d.integrity?[d.crossOrigin,d.integrity]:el;else break l}}r(a?{Link:a}:{})}}}catch(t){rK(e,t,{})}}function io(e){null===e.trackedPostpones&&ia(e,!0),null===e.trackedPostpones&&im(e),e.onShellError=n5,(e=e.onShellReady)()}function is(e){ia(e,null===e.trackedPostpones||null===e.completedRootSegment||5!==e.completedRootSegment.status),im(e),(e=e.onAllReady)()}function il(e,t){if(0===t.chunks.length&&1===t.children.length&&null===t.children[0].boundary&&-1===t.children[0].id){var n=t.children[0];n.id=t.id,n.parentFlushed=!0,1!==n.status&&3!==n.status&&4!==n.status||il(e,n)}else e.completedSegments.push(t)}function iu(e,t,n){if(null!==H){n=n.chunks;for(var r=0,i=0;i<n.length;i++)r+=n[i].byteLength;null===t?e.byteSize+=r:t.byteSize+=r}}function ic(e,t,n,r){if(null!==n&&(0==--n.pendingTasks?rX(e,n):n.together&&rJ(e,n)),e.allPendingTasks--,null===t){if(null!==r&&r.parentFlushed){if(null!==e.completedRootSegment)throw Error(a(389));e.completedRootSegment=r}e.pendingRootTasks--,0===e.pendingRootTasks&&io(e)}else if(t.pendingTasks--,4!==t.status)if(0===t.pendingTasks){if(0===t.status&&(t.status=1),null!==r&&r.parentFlushed&&(1===r.status||3===r.status)&&il(t,r),t.parentFlushed&&e.completedBoundaries.push(t),1===t.status)null!==(n=t.row)&&nV(n.hoistables,t.contentState),500<t.byteSize||(t.fallbackAbortableTasks.forEach(ir,e),t.fallbackAbortableTasks.clear(),null!==n&&0==--n.pendingTasks&&rX(e,n)),0===e.pendingRootTasks&&null===e.trackedPostpones&&null!==t.contentPreamble&&im(e);else if(5===t.status&&null!==(t=t.row)){if(null!==e.trackedPostpones){n=e.trackedPostpones;var i=t.next;if(null!==i&&null!==(r=i.boundaries))for(i.boundaries=null,i=0;i<r.length;i++){var o=r[i],s=e,l=n;if(o.status=5,o.rootSegmentID=s.nextSegmentId++,null===(s=o.trackedContentKeyPath))throw Error(a(486));var u=o.trackedFallbackNode,c=[],d=l.workingMap.get(s);void 0===d?(u=[s[1],s[2],c,null,u,o.rootSegmentID],l.workingMap.set(s,u),function e(t,n,r){if(null===n)r.rootNodes.push(t);else{var i=r.workingMap,a=i.get(n);void 0===a&&(a=[n[1],n[2],[],null],i.set(n,a),e(a,n[0],r)),a[2].push(t)}}(u,s[0],l)):(d[4]=u,d[5]=o.rootSegmentID),ic(e,o,null,null)}}0==--t.pendingTasks&&rX(e,t)}}else null===r||!r.parentFlushed||1!==r.status&&3!==r.status||(il(t,r),1===t.completedSegments.length&&t.parentFlushed&&e.partialBoundaries.push(t)),null!==(t=t.row)&&t.together&&rJ(e,t);0===e.allPendingTasks&&is(e)}function id(e){if(14!==e.status&&13!==e.status){var t=nY,n=ei.H;ei.H=rI;var r=ei.A;ei.A=rD;var i=rz;rz=e;var o=rN;rN=e.resumableState;try{var s,l=e.pingedTasks;for(s=0;s<l.length;s++){var u=l[s],c=e,d=u.blockedSegment;if(null===d){var h=c;if(0!==u.replay.pendingTasks){nZ(u.context);try{if("number"==typeof u.replay.slots?r5(h,u,u.replay.slots,u.node,u.childIndex):r9(h,u),1===u.replay.pendingTasks&&0<u.replay.nodes.length)throw Error(a(488));u.replay.pendingTasks--,u.abortSet.delete(u),ic(h,u.blockedBoundary,u.row,null)}catch(e){ry();var p=e===n4?n8():e;if("object"==typeof p&&null!==p&&"function"==typeof p.then){var f=u.ping;p.then(f,f),u.thenableState=rv()}else{u.replay.pendingTasks--,u.abortSet.delete(u);var m=r$(u.componentStack);c=void 0;var g=h,y=u.blockedBoundary,b=12===h.status?h.fatalError:p,x=u.replay.nodes,w=u.replay.slots;c=rK(g,b,m),ii(g,y,x,w,b,c),h.pendingRootTasks--,0===h.pendingRootTasks&&io(h),h.allPendingTasks--,0===h.allPendingTasks&&is(h)}}finally{}}}else if(h=void 0,g=d,0===g.status){g.status=6,nZ(u.context);var k=g.children.length,S=g.chunks.length;try{r9(c,u),g.lastPushedText&&g.textEmbedded&&g.chunks.push(eD),u.abortSet.delete(u),g.status=1,iu(c,u.blockedBoundary,g),ic(c,u.blockedBoundary,u.row,g)}catch(e){ry(),g.children.length=k,g.chunks.length=S;var _=e===n4?n8():12===c.status?c.fatalError:e;if("object"==typeof _&&null!==_&&"function"==typeof _.then){g.status=0,u.thenableState=rv();var C=u.ping;_.then(C,C)}else{var A=r$(u.componentStack);u.abortSet.delete(u),g.status=4;var E=u.blockedBoundary,T=u.row;if(null!==T&&0==--T.pendingTasks&&rX(c,T),c.allPendingTasks--,h=rK(c,_,A),null===E)rY(c,_);else if(E.pendingTasks--,4!==E.status){E.status=4,E.errorDigest=h,r6(c,E);var M=E.row;null!==M&&0==--M.pendingTasks&&rX(c,M),E.parentFlushed&&c.clientRenderedBoundaries.push(E),0===c.pendingRootTasks&&null===c.trackedPostpones&&null!==E.contentPreamble&&im(c)}0===c.allPendingTasks&&is(c)}}finally{}}}l.splice(0,s),null!==e.destination&&ik(e,e.destination)}catch(t){rK(e,t,{}),rY(e,t)}finally{rN=o,ei.H=n,ei.A=r,n===rI&&nZ(t),rz=i}}}function ih(e,t,n){t.preambleChildren.length&&n.push(t.preambleChildren);for(var r=!1,i=0;i<t.children.length;i++)r=ip(e,t.children[i],n)||r;return r}function ip(e,t,n){var r=t.boundary;if(null===r)return ih(e,t,n);var i=r.contentPreamble,o=r.fallbackPreamble;if(null===i||null===o)return!1;switch(r.status){case 1:if(tf(e.renderState,i),!(t=r.completedSegments[0]))throw Error(a(391));return ih(e,t,n);case 5:if(null!==e.trackedPostpones)return!0;case 4:if(1===t.status)return tf(e.renderState,o),ih(e,t,n);default:return!0}}function im(e){if(e.completedRootSegment&&null===e.completedPreambleSegments){var t=[],n=ip(e,e.completedRootSegment,t),r=e.renderState.preamble;(!1===n||r.headChunks&&r.bodyChunks)&&(e.completedPreambleSegments=t)}}function ig(e,t,n,r){switch(n.parentFlushed=!0,n.status){case 0:n.id=e.nextSegmentId++;case 5:return r=n.id,n.lastPushedText=!1,n.textEmbedded=!1,e=e.renderState,j(t,tv),j(t,e.placeholderPrefix),j(t,e=B(r.toString(16))),F(t,ty);case 1:n.status=2;var i=!0,o=n.chunks,s=0;n=n.children;for(var l=0;l<n.length;l++){for(i=n[l];s<i.index;s++)j(t,o[s]);i=iy(e,t,i,r)}for(;s<o.length-1;s++)j(t,o[s]);return s<o.length&&(i=F(t,o[s])),i;case 3:return!0;default:throw Error(a(390))}}var iv=0;function iy(e,t,n,r){var i=n.boundary;if(null===i)return ig(e,t,n,r);if(i.parentFlushed=!0,4===i.status){var o=i.row;null!==o&&0==--o.pendingTasks&&rX(e,o),i=i.errorDigest,F(t,t_),j(t,tA),i&&(j(t,tT),j(t,B(Q(i))),j(t,tE)),F(t,tM),ig(e,t,n,r)}else if(1!==i.status)0===i.status&&(i.rootSegmentID=e.nextSegmentId++),0<i.completedSegments.length&&e.partialBoundaries.push(i),tI(t,e.renderState,i.rootSegmentID),r&&nV(r,i.fallbackState),ig(e,t,n,r);else if(500<i.byteSize&&iv+i.byteSize>e.progressiveChunkSize)i.rootSegmentID=e.nextSegmentId++,e.completedBoundaries.push(i),tI(t,e.renderState,i.rootSegmentID),ig(e,t,n,r);else{if(iv+=i.byteSize,r&&nV(r,i.contentState),null!==(n=i.row)&&500<i.byteSize&&0==--n.pendingTasks&&rX(e,n),F(t,tw),1!==(n=i.completedSegments).length)throw Error(a(391));iy(e,t,n[0],r)}return F(t,tC)}function ib(e,t,n,r){switch(!function(e,t,n,r){switch(n.insertionMode){case 0:case 1:case 3:case 2:return j(e,tN),j(e,t.segmentPrefix),j(e,B(r.toString(16))),F(e,tD);case 4:return j(e,tR),j(e,t.segmentPrefix),j(e,B(r.toString(16))),F(e,tO);case 5:return j(e,tF),j(e,t.segmentPrefix),j(e,B(r.toString(16))),F(e,tL);case 6:return j(e,tB),j(e,t.segmentPrefix),j(e,B(r.toString(16))),F(e,tU);case 7:return j(e,tW),j(e,t.segmentPrefix),j(e,B(r.toString(16))),F(e,tV);case 8:return j(e,tG),j(e,t.segmentPrefix),j(e,B(r.toString(16))),F(e,t$);case 9:return j(e,tY),j(e,t.segmentPrefix),j(e,B(r.toString(16))),F(e,tX);default:throw Error(a(397))}}(t,e.renderState,n.parentFormatContext,n.id),iy(e,t,n,r),n.parentFormatContext.insertionMode){case 0:case 1:case 3:case 2:return F(t,tP);case 4:return F(t,tj);case 5:return F(t,tz);case 6:return F(t,tH);case 7:return F(t,tq);case 8:return F(t,tK);case 9:return F(t,tZ);default:throw Error(a(397))}}function ix(e,t,n){iv=n.byteSize;for(var r,i,o=n.completedSegments,s=0;s<o.length;s++)iw(e,t,n,o[s]);o.length=0,null!==(o=n.row)&&500<n.byteSize&&0==--o.pendingTasks&&rX(e,o),nv(t,n.contentState,e.renderState),o=e.resumableState,e=e.renderState,s=n.rootSegmentID,n=n.contentState;var l=e.stylesToHoist;return e.stylesToHoist=!1,j(t,e.startInlineScript),j(t,eJ),l?(0==(4&o.instructions)&&(o.instructions|=4,j(t,ne)),0==(2&o.instructions)&&(o.instructions|=2,j(t,t2)),0==(8&o.instructions)?(o.instructions|=8,j(t,t5)):j(t,t4)):(0==(2&o.instructions)&&(o.instructions|=2,j(t,t2)),j(t,t3)),o=B(s.toString(16)),j(t,e.boundaryPrefix),j(t,o),j(t,t9),j(t,e.segmentPrefix),j(t,o),l?(j(t,t8),r=n,j(t,nN),i=nN,r.stylesheets.forEach(function(e){if(2!==e.state)if(3===e.state)j(t,i),j(t,B(nl(""+e.props.href))),j(t,nR),i=nD;else{j(t,i);var n=e.props["data-precedence"],r=e.props;for(var o in j(t,B(nl(er(""+e.props.href)))),n=""+n,j(t,nP),j(t,B(nl(n))),r)if(q.call(r,o)&&null!=(n=r[o]))switch(o){case"href":case"rel":case"precedence":case"data-precedence":break;case"children":case"dangerouslySetInnerHTML":throw Error(a(399,"link"));default:!function(e,t,n){var r=t.toLowerCase();switch(typeof n){case"function":case"symbol":return}switch(t){case"innerHTML":case"dangerouslySetInnerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":case"style":case"ref":return;case"className":r="class",t=""+n;break;case"hidden":if(!1===n)return;t="";break;case"src":case"href":t=""+(n=er(n));break;default:if(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])||!Y(t))return;t=""+n}j(e,nP),j(e,B(nl(r))),j(e,nP),j(e,B(nl(t)))}(t,o,n)}j(t,nR),i=nD,e.state=3}}),j(t,nR)):j(t,t6),n=F(t,t7),tm(t,e)&&n}function iw(e,t,n,r){if(2===r.status)return!0;var i=n.contentState,o=r.id;if(-1===o){if(-1===(r.id=n.rootSegmentID))throw Error(a(392));return ib(e,t,r,i)}return o===n.rootSegmentID?ib(e,t,r,i):(ib(e,t,r,i),n=e.resumableState,j(t,(e=e.renderState).startInlineScript),j(t,eJ),0==(1&n.instructions)?(n.instructions|=1,j(t,tJ)):j(t,tQ),j(t,e.segmentPrefix),j(t,o=B(o.toString(16))),j(t,t0),j(t,e.placeholderPrefix),j(t,o),t=F(t,t1))}function ik(e,t){R=new Uint8Array(2048),O=0;try{if(!(0<e.pendingRootTasks)){var n,r=e.completedRootSegment;if(null!==r){if(5===r.status)return;var i=e.completedPreambleSegments;if(null===i)return;iv=e.byteSize;var a,o=e.resumableState,s=e.renderState,l=s.preamble,u=l.htmlChunks,c=l.headChunks;if(u){for(a=0;a<u.length;a++)j(t,u[a]);if(c)for(a=0;a<c.length;a++)j(t,c[a]);else j(t,tc("head")),j(t,eJ)}else if(c)for(a=0;a<c.length;a++)j(t,c[a]);var d=s.charsetChunks;for(a=0;a<d.length;a++)j(t,d[a]);d.length=0,s.preconnects.forEach(ny,t),s.preconnects.clear();var h=s.viewportChunks;for(a=0;a<h.length;a++)j(t,h[a]);h.length=0,s.fontPreloads.forEach(ny,t),s.fontPreloads.clear(),s.highImagePreloads.forEach(ny,t),s.highImagePreloads.clear(),eu=s,s.styles.forEach(nA,t),eu=null;var p=s.importMapChunks;for(a=0;a<p.length;a++)j(t,p[a]);p.length=0,s.bootstrapScripts.forEach(ny,t),s.scripts.forEach(ny,t),s.scripts.clear(),s.bulkPreloads.forEach(ny,t),s.bulkPreloads.clear(),u||c||(o.instructions|=32);var f=s.hoistableChunks;for(a=0;a<f.length;a++)j(t,f[a]);for(o=f.length=0;o<i.length;o++){var m=i[o];for(s=0;s<m.length;s++)iy(e,t,m[s],null)}var g=e.renderState.preamble,y=g.headChunks;(g.htmlChunks||y)&&j(t,tp("head"));var b=g.bodyChunks;if(b)for(i=0;i<b.length;i++)j(t,b[i]);iy(e,t,r,null),e.completedRootSegment=null;var x=e.renderState;if(0!==e.allPendingTasks||0!==e.clientRenderedBoundaries.length||0!==e.completedBoundaries.length||null!==e.trackedPostpones&&(0!==e.trackedPostpones.rootNodes.length||null!==e.trackedPostpones.rootSlots)){var w=e.resumableState;if(0==(64&w.instructions)){if(w.instructions|=64,j(t,x.startInlineScript),0==(32&w.instructions)){w.instructions|=32;var k="_"+w.idPrefix+"R_";j(t,nM),j(t,B(Q(k))),j(t,eU)}j(t,eJ),j(t,tg),F(t,ed)}}tm(t,x)}var S=e.renderState;r=0;var _=S.viewportChunks;for(r=0;r<_.length;r++)j(t,_[r]);_.length=0,S.preconnects.forEach(ny,t),S.preconnects.clear(),S.fontPreloads.forEach(ny,t),S.fontPreloads.clear(),S.highImagePreloads.forEach(ny,t),S.highImagePreloads.clear(),S.styles.forEach(nT,t),S.scripts.forEach(ny,t),S.scripts.clear(),S.bulkPreloads.forEach(ny,t),S.bulkPreloads.clear();var C=S.hoistableChunks;for(r=0;r<C.length;r++)j(t,C[r]);C.length=0;var A=e.clientRenderedBoundaries;for(n=0;n<A.length;n++){var E,T=A[n];S=t;var M=e.resumableState,I=e.renderState,N=T.rootSegmentID,D=T.errorDigest;j(S,I.startInlineScript),j(S,eJ),0==(4&M.instructions)?(M.instructions|=4,j(S,nt)):j(S,nn),j(S,I.boundaryPrefix),j(S,B(N.toString(16))),j(S,nr),D&&(j(S,ni),j(S,B((E=D||"",JSON.stringify(E).replace(no,function(e){switch(e){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})))));var P=F(S,na);if(!P){e.destination=null,n++,A.splice(0,n);return}}A.splice(0,n);var z=e.completedBoundaries;for(n=0;n<z.length;n++)if(!ix(e,t,z[n])){e.destination=null,n++,z.splice(0,n);return}z.splice(0,n),L(t),R=new Uint8Array(2048),O=0;var U=e.partialBoundaries;for(n=0;n<U.length;n++){var H=U[n];s:{A=e,T=t,iv=H.byteSize;var W=H.completedSegments;for(P=0;P<W.length;P++)if(!iw(A,T,H,W[P])){P++,W.splice(0,P);var V=!1;break s}W.splice(0,P);var q=H.row;null!==q&&q.together&&1===H.pendingTasks&&(1===q.pendingTasks?rZ(A,q,q.hoistables):q.pendingTasks--),V=nv(T,H.contentState,A.renderState)}if(!V){e.destination=null,n++,U.splice(0,n);return}}U.splice(0,n);var G=e.completedBoundaries;for(n=0;n<G.length;n++)if(!ix(e,t,G[n])){e.destination=null,n++,G.splice(0,n);return}G.splice(0,n)}}finally{0===e.allPendingTasks&&0===e.clientRenderedBoundaries.length&&0===e.completedBoundaries.length?(e.flushScheduled=!1,(n=e.resumableState).hasBody&&j(t,tp("body")),n.hasHtml&&j(t,tp("html")),L(t),e.status=14,t.close(),e.destination=null):L(t)}}function iS(e){e.flushScheduled=null!==e.destination,P(function(){return id(e)}),I(function(){10===e.status&&(e.status=11),null===e.trackedPostpones&&ia(e,0===e.pendingRootTasks)})}function i_(e){!1===e.flushScheduled&&0===e.pingedTasks.length&&null!==e.destination&&(e.flushScheduled=!0,I(function(){var t=e.destination;t?ik(e,t):e.flushScheduled=!1}))}function iC(e,t){if(13===e.status)e.status=14,W(t,e.fatalError);else if(14!==e.status&&null===e.destination){e.destination=t;try{ik(e,t)}catch(t){rK(e,t,{}),rY(e,t)}}}function iA(e,t){(11===e.status||10===e.status)&&(e.status=12);try{var n=e.abortableTasks;if(0<n.size){var r=void 0===t?Error(a(432)):"object"==typeof t&&null!==t&&"function"==typeof t.then?Error(a(530)):t;e.fatalError=r,n.forEach(function(t){return function e(t,n,r){var i=t.blockedBoundary,a=t.blockedSegment;if(null!==a){if(6===a.status)return;a.status=3}if(a=r$(t.componentStack),null===i){if(13!==n.status&&14!==n.status){if(null===(i=t.replay)){rK(n,r,a),rY(n,r);return}i.pendingTasks--,0===i.pendingTasks&&0<i.nodes.length&&(a=rK(n,r,a),ii(n,null,i.nodes,i.slots,r,a)),n.pendingRootTasks--,0===n.pendingRootTasks&&io(n)}}else 4!==i.status&&(i.status=4,a=rK(n,r,a),i.status=4,i.errorDigest=a,r6(n,i),i.parentFlushed&&n.clientRenderedBoundaries.push(i)),i.pendingTasks--,null!==(a=i.row)&&0==--a.pendingTasks&&rX(n,a),i.fallbackAbortableTasks.forEach(function(t){return e(t,n,r)}),i.fallbackAbortableTasks.clear();null!==(t=t.row)&&0==--t.pendingTasks&&rX(n,t),n.allPendingTasks--,0===n.allPendingTasks&&is(n)}(t,e,r)}),n.clear()}null!==e.destination&&ik(e,e.destination)}catch(t){rK(e,t,{}),rY(e,t)}}function iE(){var e=r.version;if("19.2.0-canary-97cdd5d3-20250710"!==e)throw Error(a(527,e,"19.2.0-canary-97cdd5d3-20250710"))}iE(),iE(),n.prerender=function(e,t){return new Promise(function(n,r){var i,a,o,s,l,u=t?t.onHeaders:void 0;u&&(l=function(e){u(new Headers(e))});var c=e_(t?t.identifierPrefix:void 0,t?t.unstable_externalRuntimeSrc:void 0,t?t.bootstrapScriptContent:void 0,t?t.bootstrapScripts:void 0,t?t.bootstrapModules:void 0),d=(i=e,a=eS(c,void 0,t?t.unstable_externalRuntimeSrc:void 0,t?t.importMap:void 0,l,t?t.maxHeadersLength:void 0),o=eE(t?t.namespaceURI:void 0),s=t?t.progressiveChunkSize:void 0,(i=rL(i,c,a,o,s,t?t.onError:void 0,function(){n({prelude:new ReadableStream({type:"bytes",pull:function(e){iC(d,e)},cancel:function(e){d.destination=null,iA(d,e)}},{highWaterMark:0})})},void 0,void 0,r,t?t.onPostpone:void 0,void 0)).trackedPostpones={workingMap:new Map,rootNodes:[],rootSlots:null},i);if(t&&t.signal){var h=t.signal;if(h.aborted)iA(d,h.reason);else{var p=function(){iA(d,h.reason),h.removeEventListener("abort",p)};h.addEventListener("abort",p)}}iS(d)})},n.renderToReadableStream=function(e,t){return new Promise(function(n,r){var i,a,o,s=new Promise(function(e,t){a=e,i=t}),l=t?t.onHeaders:void 0;l&&(o=function(e){l(new Headers(e))});var u=e_(t?t.identifierPrefix:void 0,t?t.unstable_externalRuntimeSrc:void 0,t?t.bootstrapScriptContent:void 0,t?t.bootstrapScripts:void 0,t?t.bootstrapModules:void 0),c=rL(e,u,eS(u,t?t.nonce:void 0,t?t.unstable_externalRuntimeSrc:void 0,t?t.importMap:void 0,o,t?t.maxHeadersLength:void 0),eE(t?t.namespaceURI:void 0),t?t.progressiveChunkSize:void 0,t?t.onError:void 0,a,function(){var e=new ReadableStream({type:"bytes",pull:function(e){iC(c,e)},cancel:function(e){c.destination=null,iA(c,e)}},{highWaterMark:0});e.allReady=s,n(e)},function(e){s.catch(function(){}),r(e)},i,t?t.onPostpone:void 0,t?t.formState:void 0);if(t&&t.signal){var d=t.signal;if(d.aborted)iA(c,d.reason);else{var h=function(){iA(c,d.reason),d.removeEventListener("abort",h)};d.addEventListener("abort",h)}}iS(c)})},n.version="19.2.0-canary-97cdd5d3-20250710"},391161:e=>{"use strict";var t,n,{m:r,e:i}=e;t=e.r(24108),n=e.r(399764),i.version=t.version,i.renderToString=t.renderToString,i.renderToStaticMarkup=t.renderToStaticMarkup,i.renderToReadableStream=n.renderToReadableStream,n.resume&&(i.resume=n.resume)},754841:e=>{"use strict";e.s({useSignedUrlUpload:()=>r});var t=e.i(814733),n=e.i(238635);let r=()=>{let{mutateAsync:e}=t.api.aws.getSignedDocumentUploadUrl.useMutation();return{uploadFile:async(t,r)=>{try{let{signedUrl:n}=await e({fileName:t.name,fileType:t.type,type:r.type,chatbotId:r.chatbotId,documentType:r.documentType}),i=await fetch(n,{method:"PUT",body:t,headers:{"Content-Type":t.type}});if(!i.ok)throw Error("Upload failed with status ".concat(i.status));return r.chatbotId}catch(t){let e=t instanceof Error?t:Error("Upload failed");throw r.onError&&r.onError(e),n.captureException(t),e}}}}},852043:e=>{"use strict";e.s({getPdfStrategy:()=>i});var t=e.i(598944);async function n(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=await (0,t.getDocument)({data:new Uint8Array(e)}).promise,a=n.maxPages&&n.maxPages>0?Math.min(n.maxPages,i.numPages):i.numPages,o=await Promise.all(Array.from({length:a},(e,t)=>r(i,t+1)));return await i.destroy(),o.filter(Boolean).join("\n\n")}async function r(e,t){try{let n=await e.getPage(t);return(await n.getTextContent()).items.map(e=>"str"in e?e.str:"").join(" ").trim()}catch(e){return""}}void 0===Promise.withResolvers&&(window.Promise.withResolvers=()=>{let e,t;return{promise:new Promise((n,r)=>{e=n,t=r}),resolve:e,reject:t}}),t.GlobalWorkerOptions.workerSrc=new e.U(e.r(183270)).toString();let i=async e=>(await n(e,{maxPages:20})).length>1e3?"fast":"auto"},70241:e=>{"use strict";e.s({default:()=>i});var t=e.i(294254),n=e.i(754841),r=e.i(814733);let i=()=>{let{uploadFile:e}=(0,t.useMultipartUpload)(),{uploadFile:i}=(0,n.useSignedUrlUpload)(),{mutateAsync:a}=r.api.file.convertFile.useMutation(),{mutateAsync:o}=r.api.file.convertSignedUrl.useMutation();return{convertFile:async t=>{let{id:n,file:r,extension:s}=t,l={chatbotId:n,type:"convert",onError:e=>{throw console.error("Convert file upload failed:",e),e}};r.size>=0x1000000?await e(r,l):await i(r,l);let{url:u}=await o(n);return await a({url:u,extension:s,key:n})}}}},594983:e=>{"use strict";e.s({useIngestMetadata:()=>i});var t=e.i(852951),n=e.i(814733),r=e.i(525094);let i=()=>{let{updateChatbot:e}=(0,t.useWorkspaceActions)(),i=n.api.useUtils(),{mutateAsync:a}=n.api.documentMetadata.generate.useMutation();return{ingestGenerateMetadata:async(t,n)=>{var o;let s=await a({chatbotId:t}),l=i.userSettings.get.getData();i.documentMetadata.byId.setData({chatbotId:t},()=>s),e(t,{name:null!=(o=null==s?void 0:s.title)?o:n,authors:null==s?void 0:s.authors,...(null==s?void 0:s.summary)&&{summary:s.summary}}),(null==l?void 0:l.autoRenameEnabled)&&(null==s?void 0:s.title)&&s.title!==n&&(0,r.toast)("Document name updated")}}}},231512:e=>{"use strict";e.s({default:()=>T});var t=e.i(781635),n=e.i(238635),r=e.i(691283),i=e.i(721011),a=e.i(475839),o=e.i(391161),s=e.i(525094),l=e.i(450807),u=e.i(544625),c=e.i(885905),d=e.i(847934),h=e.i(382680),p=e.i(950347),f=e.i(294254),m=e.i(461655),g=e.i(754841),y=e.i(852951),b=e.i(252390),x=e.i(459793),w=e.i(814733),k=e.i(46621),S=e.i(289702),_=e.i(852043),C=e.i(70241),A=e.i(91086),E=e.i(594983);let T=()=>{let{exceededLimits:e,optimisticIncreaseImportLimit:T,optimisticDecreaseImportLimit:M}=(0,p.default)(),{checkImportLimit:I}=(0,h.useImportLimitCheck)(),{userPlanDetails:N}=(0,c.useAuth)(),{track:D}=(0,b.default)(),{convertFile:P}=(0,C.default)(),{showUpgrade:R}=(0,l.useUpgrade)(),{uploadFile:O}=(0,f.useMultipartUpload)(),{uploadFile:j}=(0,g.useSignedUrlUpload)(),{mutate:F}=(0,k.useMarkStepCompletedWithTracking)(),{mutateAsync:L}=w.api.file.uploadUrl.useMutation({onError:()=>{M()}}),{updateChatbot:z}=(0,y.useWorkspaceActions)(),{mutateAsync:B}=w.api.ingest.updateStatus.useMutation({onMutate:e=>{let{chatbotId:t,status:n}=e;z(t,{ingestionStatus:n})}}),{mutateDelete:U}=(0,d.default)(),{createNote:H}=(0,m.default)(),{createChatbot:W}=(0,A.useCreateChatbot)(),{mutateAsync:V}=w.api.file.updateChatbotUrl.useMutation({onError:()=>{M()}}),q=async(e,t)=>{if(e.size>1048576){var n;let r=null==(n=e.name.split(".").pop())?void 0:n.toLowerCase();if(!r||!["txt","md"].includes(r))return s.toast.error("Invalid file extension for text/markdown file"),null;let i=(0,S.sanitizeName)(e.name),a=await W({name:i,type:"DOCUMENT",groupId:t});if(!a)return null;T(),D("chatbotCreated",{chatbotId:a.id,fileExtension:r,type:"DOCUMENT"});try{let t=await P({id:a.id,name:i,file:e,extension:r});return await L({url:t,type:"DOCUMENT",name:i,chatbotId:a.id}),await V({chatbotId:a.id,type:"FILE"}),G(a.id,a.name),a.id}catch(e){throw B({chatbotId:a.id,status:"FAILED",failureReason:e instanceof Error?e.message:"Unknown error"}),M(),U([{id:a.id}]),e}}let i=new FileReader,l=await new Promise((t,n)=>{i.onload=e=>{var r;let i=null==(r=e.target)?void 0:r.result;"string"==typeof i?t(i):n(Error("Failed to read file as text"))},i.onerror=()=>{n(i.error)},i.readAsText(e)});if(!l||""===l.trim())return s.toast.error("The document is empty and contains no text."),null;let u=(0,a.compiler)(l),c=e.name.replace(/\.(txt|md)$/,""),d=(0,r.generateJSON)((0,o.renderToString)(u),[(0,x.starterKit)(!1),...x.defaultExtensions]),h=await H({name:c,contents:d});if(h)return h.id},{ingestGenerateMetadata:G}=(0,E.useIngestMetadata)();return{ingestFile:async(r,a)=>{var o;if(!N)return null;if(null==e?void 0:e.isDailyPageLimitExceeded)throw"Free"===N.planName?R("dailyPageLimit"):s.toast.error("Daily page limit exceeded. Contact support for more."),D("dailyPageLimitHit"),D("Paywall Shown",{reason:"Daily Page Limit Hit"}),Error("Daily page limit exceeded");if(I(),r.size>N.fileSizeLimit)throw R("sizeLimit"),n.captureException("File size limit exceeded",{extra:{fileSize:r.size,fileSizeLimit:N.fileSizeLimit}}),D("fileUploadFailed",{reason:"File too large"}),Error("File size limit exceeded");if("text/plain"===r.type||"text/markdown"===r.type)return q(r,a);let l=null==(o=r.name.split(".").pop())?void 0:o.toLowerCase();if("md"===l||"txt"===l)return q(r,a);let c=(0,u.getFileExtension)(r.type);if(!c)return s.toast.error("".concat(r.type," not recognized")),null;let d=u.CONVERT_EXTENSIONS.includes(c);if(!d&&"pdf"!==c)return s.toast.error("".concat(c," files are not supported.")),null;let h=u.IMAGES_EXTENSIONS.includes(c)?"IMAGE":"DOCUMENT",p=(0,S.sanitizeName)(r.name),f=await W({name:p,type:h,groupId:a});if(!f)return;T(),D("chatbotCreated",{chatbotId:f.id,fileExtension:c,type:h});try{if(d){let e=await P({id:f.id,name:p,file:r,extension:c});return await L({url:e,type:h,name:p,chatbotId:f.id})}}catch(e){throw B({chatbotId:f.id,status:"FAILED",failureReason:e instanceof Error?e.message:"Unknown error"}),M(),U([{id:f.id}]),e}let m=await r.arrayBuffer(),g=await (0,i.parsePdf)(m),y=-1;try{y=g.getPageCount()}catch(e){}if(y>N.pageLimit)throw R("pageLimit"),D("pageLimitExceeded"),D("Paywall Shown",{reason:"Page Limit Hit"}),U([{id:f.id}]),Error("Page limit exceeded");let b=null;try{b=await (0,_.getPdfStrategy)(t.Buffer.from(m))}catch(e){return n.captureException("PDF is encrypted.",{extra:{error:e}}),s.toast.error("PDF is password protected. Please remove the password and try again."),U([{id:f.id}]),null}if("fast"!==b&&"Free"===N.planName)throw R("strategyFeature"),D("Paywall Shown",{reason:"Strategy feature"}),U([{id:f.id}]),Error("High-res strategy is not available for Free plan");let x={chatbotId:f.id,type:"document",documentType:h,onError:e=>{B({chatbotId:f.id,status:"FAILED",failureReason:e.message}),M(),U([{id:f.id}])}};return r.size>=0x1000000?await O(r,x):await j(r,x),await V({chatbotId:f.id,type:"FILE"}),"IMAGE"!==h&&G(f.id,f.name),a?F({workflowKey:"add-files-to-folder",stepKey:"add-files-to-folder"}):F({workflowKey:"import-and-chat-document",stepKey:"import-document"}),f.id}}}},834799:e=>{"use strict";e.s({SUPPORTED_EXTENSIONS:()=>c,default:()=>d});var t=e.i(290479),n=e.i(985132),r=e.i(608294),i=e.i(525094),a=e.i(980919),o=e.i(724648),s=e.i(592316),l=e.i(231512),u=e.i(382680);let c=[".pdf",".doc",".docx",".ppt",".pptx",".md",".txt",".epub",".png",".jpg",".jpeg",".tiff",".bmp",".heic",".mp4",".mp3",".wav"],d=()=>{let{ingestFile:e}=(0,l.default)(),{ingestCustomVideo:d}=(0,s.default)(),{ingestCustomAudio:h}=(0,o.default)(),{checkImportLimit:p}=(0,u.useImportLimitCheck)(),f=(0,r.useSetAtom)(n.addUploadingFilesAtom),m=(0,r.useSetAtom)(n.updateUploadingFileAtom),g=async n=>{if(!p({shouldThrow:!1})&&n.length>0)return void i.toast.error("Import limit exceeded.");let r=f(n.map(e=>({name:e.name})));i.toast.custom(e=>(0,t.jsx)(a.FileUploadToastContent,{toastId:e}),{id:a.UPLOAD_TOAST_ID,duration:1/0,dismissible:!1,position:"bottom-left",className:"!px-0 !py-0 bg-popover border-border-primary !rounded-6"}),Promise.race(Array.from(n).map(async(t,n)=>{let i=r[n];if(!i)return console.error("Mismatch between input files and state files"),null;try{let n=null;if(n="video/mp4"===t.type?await d([t],!1):t.type.startsWith("audio/")?await h([t],!1):await e(t))return m({id:i.id,status:"IN_PROGRESS",chatbotId:n}),n;return m({id:i.id,status:"FAILED",errorMessage:"File could not be processed."}),null}catch(n){console.error("Error ingesting file:",t.name,n);let e=n instanceof Error?n.message:"Upload failed";return m({id:i.id,status:"FAILED",errorMessage:e}),null}}).map(e=>e.catch(()=>null))).catch(()=>null)},y=e=>{var t;let n=".".concat(null==(t=e.name.split(".").pop())?void 0:t.toLowerCase());return c.includes(n)};return{processFiles:e=>{let t=e.filter(y);if(0===t.length)return void i.toast.error("No supported files found");t.length<e.length&&i.toast.warning("".concat(e.length-t.length," unsupported files were skipped")),(e=>{if(0===e.length)return i.toast.error("Please add a supported file.");g(e)})(t)}}}},855808:e=>{"use strict";e.s({default:()=>d});var t=e.i(781635),n=e.i(544625),r=e.i(294254),i=e.i(754841),a=e.i(852951),o=e.i(252390),s=e.i(814733),l=e.i(852043),u=e.i(70241),c=e.i(594983);let d=()=>{let{track:e}=(0,o.default)(),{uploadFile:d}=(0,r.useMultipartUpload)(),{uploadFile:h}=(0,i.useSignedUrlUpload)(),{updateChatbot:p}=(0,a.useWorkspaceActions)(),{ingestGenerateMetadata:f}=(0,c.useIngestMetadata)(),{convertFile:m}=(0,u.default)(),{mutateAsync:g}=s.api.file.clearChatbotDocs.useMutation(),{mutateAsync:y}=s.api.ingest.updateStatus.useMutation({onMutate:e=>{let{chatbotId:t,status:n}=e;p(t,{ingestionStatus:n})}}),{mutateAsync:b}=s.api.file.updateChatbotUrl.useMutation({onSuccess:(e,t)=>{let{chatbotId:n}=t;p(n,{isIndexed:!0,documentUrl:e})}}),{mutateAsync:x}=s.api.file.uploadUrl.useMutation();return{reuploadPdf:async(r,i)=>{try{var a;await y({chatbotId:i,status:"IN_PROGRESS"}),await g({chatbotId:i});let o=null==(a=r.name.split(".").pop())?void 0:a.toLowerCase(),s=(0,n.getFileExtension)(r.type);if(!s&&!o)throw Error("".concat(r.type," not recognized"));let u=s||o||"",c=n.CONVERT_EXTENSIONS.includes(u),p=n.IMAGES_EXTENSIONS.includes(u),w="pdf"===u;if(!c&&!w)throw Error("".concat(u," files are not supported."));let k=p?"IMAGE":"DOCUMENT";if(c){let t=await m({id:i,name:r.name,file:r,extension:u});return await x({url:t,type:k,name:r.name,chatbotId:i}),await b({chatbotId:i,type:"FILE"}),await y({chatbotId:i,status:"SUCCESS"}),"IMAGE"!==k&&f(i,r.name),e("pdf_reupload_bucket_google",{chatbotId:i,fileSize:r.size,fileExtension:u}),i}let S=null;try{let e=await r.arrayBuffer();S=await (0,l.getPdfStrategy)(t.Buffer.from(e))}catch(e){console.warn("Could not detect PDF strategy:",e)}let _={chatbotId:i,type:"document",documentType:k,onError:e=>{y({chatbotId:i,status:"FAILED",failureReason:e.message})}};return r.size>=0x1000000?await d(r,_):await h(r,_),await b({chatbotId:i,type:"FILE"}),await y({chatbotId:i,status:"SUCCESS"}),"IMAGE"!==k&&f(i,r.name),e("pdf_reupload_bucket_google",{chatbotId:i,fileSize:r.size,strategy:S}),i}catch(e){throw await y({chatbotId:i,status:"FAILED",failureReason:e instanceof Error?e.message:"Unknown error"}),e}}}}},180555:e=>{"use strict";e.s({default:()=>d});var t=e.i(290479),n=e.i(459801),r=e.i(282979),i=e.i(373150),a=e.i(525094),o=e.i(252390),s=e.i(704255),l=e.i(834799),u=e.i(855808),c=e.i(972899);let d=e=>{let{fileName:d,chatbotId:h}=e,p=(0,i.useRef)(null),[f,m]=(0,i.useState)(!1),{reuploadPdf:g}=(0,u.default)(),{track:y}=(0,o.default)();(0,i.useEffect)(()=>{y("google_storage_bucket_unavailable_shown",{fileName:d,chatbotId:h})},[y,d,h]);let b=async e=>{var t;let n=null==(t=e.target.files)?void 0:t[0];if(n&&h){m(!0);try{await g(n,h),a.toast.success("File reuploaded successfully")}catch(e){console.error("Reupload failed:",e),a.toast.error("Failed to reupload file")}finally{m(!1)}}};return(0,t.jsx)("div",{className:"w-full h-full bg-background-primary flex flex-col items-center justify-center p-8",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-6 max-w-md text-center",children:[(0,t.jsx)("div",{className:"relative",children:(0,t.jsx)(c.Icon,{as:n.CloudOff,size:"xl",className:"text-destructive-solid"})}),(0,t.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,t.jsxs)("h2",{className:"text-lg font-semibold text-text-primary",children:[d&&'"'.concat(d,'" ')," is unavailable."]}),(0,t.jsx)("p",{className:"text-text-secondary text-sm leading-relaxed max-w-xs",children:"You can still chat with the file. Please upload the exact same document to view it here."})]}),(0,t.jsx)("input",{ref:p,type:"file",accept:l.SUPPORTED_EXTENSIONS.join(","),onChange:b,className:"hidden"}),(0,t.jsx)("div",{className:"flex gap-3 w-full justify-center",children:(0,t.jsx)(s.Button,{onClick:()=>{var e;null==(e=p.current)||e.click()},disabled:f||!h,leadingIcon:(0,t.jsx)(c.Icon,{as:r.Upload,size:"sm"}),children:f?"Uploading...":"Upload file"})})]})})}},455578:e=>{"use strict";e.s({default:()=>r});var t=e.i(373150);function n(e,t){let n;return function(){for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];window.clearTimeout(n),n=window.setTimeout(()=>e(...i),t)}}function r(){var e,r,i;let{debounce:o,scroll:s,polyfill:l,offsetSize:u}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{debounce:0,scroll:!1,offsetSize:!1},c=l||("undefined"==typeof window?class{}:window.ResizeObserver);if(!c)throw Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");let[d,h]=(0,t.useState)({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),p=(0,t.useRef)({element:null,scrollContainers:null,resizeObserver:null,lastBounds:d,orientationHandler:null}),f=o?"number"==typeof o?o:o.scroll:null,m=o?"number"==typeof o?o:o.resize:null,g=(0,t.useRef)(!1);(0,t.useEffect)(()=>(g.current=!0,()=>void(g.current=!1)));let[y,b,x]=(0,t.useMemo)(()=>{let e=()=>{if(!p.current.element)return;let{left:e,top:t,width:n,height:r,bottom:i,right:o,x:s,y:l}=p.current.element.getBoundingClientRect(),c={left:e,top:t,width:n,height:r,bottom:i,right:o,x:s,y:l};p.current.element instanceof HTMLElement&&u&&(c.height=p.current.element.offsetHeight,c.width=p.current.element.offsetWidth),Object.freeze(c),g.current&&!a(p.current.lastBounds,c)&&h(p.current.lastBounds=c)};return[e,m?n(e,m):e,f?n(e,f):e]},[h,u,f,m]);function w(){p.current.scrollContainers&&(p.current.scrollContainers.forEach(e=>e.removeEventListener("scroll",x,!0)),p.current.scrollContainers=null),p.current.resizeObserver&&(p.current.resizeObserver.disconnect(),p.current.resizeObserver=null),p.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",p.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",p.current.orientationHandler))}function k(){p.current.element&&(p.current.resizeObserver=new c(x),p.current.resizeObserver.observe(p.current.element),s&&p.current.scrollContainers&&p.current.scrollContainers.forEach(e=>e.addEventListener("scroll",x,{capture:!0,passive:!0})),p.current.orientationHandler=()=>{x()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",p.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",p.current.orientationHandler))}return e=x,r=!!s,(0,t.useEffect)(()=>{if(r)return window.addEventListener("scroll",e,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",e,!0)},[e,r]),i=b,(0,t.useEffect)(()=>(window.addEventListener("resize",i),()=>void window.removeEventListener("resize",i)),[i]),(0,t.useEffect)(()=>{w(),k()},[s,x,b]),(0,t.useEffect)(()=>w,[]),[e=>{e&&e!==p.current.element&&(w(),p.current.element=e,p.current.scrollContainers=function e(t){let n=[];if(!t||t===document.body)return n;let{overflow:r,overflowX:i,overflowY:a}=window.getComputedStyle(t);return[r,i,a].some(e=>"auto"===e||"scroll"===e)&&n.push(t),[...n,...e(t.parentElement)]}(e),k())},d,y]}let i=["x","y","top","bottom","left","right","width","height"],a=(e,t)=>i.every(n=>e[n]===t[n])},701187:e=>{"use strict";e.s({useQuizContextStore:()=>t});let t=(0,e.i(496438).create)((e,t)=>({currentQuizContext:null,setCurrentQuestion:(t,n,r,i)=>{e({currentQuizContext:{chatbotId:t,activeQuestionIndex:n,currentQuestion:r,totalQuestions:i}})},clearCurrentQuestion:n=>{let r=t().currentQuizContext;n&&(null==r?void 0:r.chatbotId)!==n||e({currentQuizContext:null})},getCurrentQuestionContext:e=>{let n=t().currentQuizContext;return(null==n?void 0:n.chatbotId)===e?{activeQuestionIndex:n.activeQuestionIndex,currentQuestion:n.currentQuestion,totalQuestions:n.totalQuestions}:null}}))},296709:e=>{"use strict";e.s({default:()=>S});var t=e.i(290479),n=e.i(94371),r=e.i(996481),i=e.i(330462),a=e.i(34818),o=e.i(520668),s=e.i(162109),l=e.i(625483),u=e.i(373150),c=e.i(455578),d=e.i(704255),h=e.i(91410),p=e.i(701187);let f=e=>{let{index:n,flashcard:r,cardCount:i,globalScrollProgress:o,activeIndex:s,cardStates:l,setCardStates:c}=e,[d,h]=(0,u.useState)({transform:"",zIndex:0,opacity:1});return(0,u.useEffect)(()=>{(()=>{let e=i>1?1/(i-1):1,t=(o-e*n)/e,r=Math.abs(t),a=o/e-s,l=Math.abs(a),u=0;u=s===n?r<.5?-128*t:-128*Math.sign(t)+128*t+-((1-r/i/4)*10)*(r-.5)*2*Math.sign(t):-((1-r/i/4)*10*t);let c=0;c=l<.5?-30*l:-((1-l)*30),n===s&&(c=r<.5?-45*r:-((1-r)*45)),c*=Math.sign(a)*(1-Math.abs(s-n)/i);let d=1-.03*r;n===s&&(r<.5?d-=.15*r:d-=(1-r)*.15),d<0&&(d=0);let p=i-Math.abs(s-n);-1===Math.sign(a)&&n<s&&(p+=1,a<-.5&&(p+=1)),1===Math.sign(a)&&(n===s&&(p+=1),n>s&&(p+=1,a>.5&&(p+=1))),p=Math.max(0,p);let f=3-r;f<0&&(f=0),f>1&&(f=1),h({transform:"translateX(".concat(u-50,"%) translateY(-50%) translateZ(").concat(100-20*r,"px) rotateY(").concat(c,"deg) rotateZ(").concat(-1*t,"deg) scale(").concat(d,")"),zIndex:p,opacity:f})})()},[o,s]),(0,t.jsx)(a.motion.div,{className:"flex absolute  top-1/2 left-1/2 justify-center items-center w-[85%] sm:w-[70%] md:w-[60%] lg:w-[55%] h-fit",style:{transform:d.transform,zIndex:d.zIndex,opacity:d.opacity,transformStyle:"preserve-3d",pointerEvents:n===s?"auto":"none",willChange:n===s?"transform":"auto",isolation:"isolate"},children:(0,t.jsx)("div",{className:"rounded-6 w-full h-96 bg-card overflow-hidden",children:m(r,l,c,n===s)})})},m=(e,n,r,i)=>{switch(e.type){case"multiple-choice":return(0,t.jsx)(x,{card:e,cardStates:n,setCardStates:r,isActive:i});case"true-false":return(0,t.jsx)(w,{card:e,cardStates:n,setCardStates:r,isActive:i});case"fill-in-blank":return(0,t.jsx)(k,{card:e,cardStates:n,setCardStates:r,isActive:i});default:return(0,t.jsx)(b,{card:e,cardStates:n,setCardStates:r,isActive:i})}},g=e=>{let{frontCard:n,onCardExit:r}=e,[i,l]=(0,u.useState)(0),c=(0,o.useMotionValue)(0),d=(0,s.useTransform)(c,[-150,0,150],[.5,1,.5]),h=(0,s.useTransform)(c,[-150,0,150],[-45,0,45],{clamp:!1});return(0,u.useEffect)(()=>{if(n){let e=setTimeout(()=>{l(Math.random()>.5?250:-250),null==r||r()},1500);return()=>clearTimeout(e)}},[n,r]),(0,t.jsx)(a.motion.div,{className:"absolute top-0",style:{width:"100%",height:"384px",x:c,rotate:h},variants:n?{animate:{scale:1,y:0,opacity:1},exit:e=>({x:e,opacity:0,scale:.5,transition:{duration:.3}})}:{initial:{scale:0,y:105,opacity:0},animate:{scale:.75,y:30,opacity:.5}},initial:"initial",animate:"animate",exit:"exit",custom:i,transition:n?{type:"spring",stiffness:300,damping:20}:{scale:{duration:.2},opacity:{duration:.4}},children:(0,t.jsx)(a.motion.div,{className:"w-full h-full bg-card border border-border-primary rounded-6 overflow-hidden",style:{scale:d},children:(0,t.jsx)("div",{className:"p-9 h-full flex flex-col",children:(0,t.jsxs)("div",{className:"flex-1 flex flex-col justify-between",children:[(0,t.jsxs)("div",{className:"space-y-7",children:[(0,t.jsx)(a.motion.div,{className:"w-32 h-10 bg-borderSecondary rounded-4",animate:{opacity:[.3,.8,.3]},transition:{duration:1.5,repeat:1/0}}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(a.motion.div,{className:"w-full h-15 bg-borderSecondary rounded-4",animate:{opacity:[.3,.8,.3]},transition:{duration:1.5,repeat:1/0,delay:.2}}),(0,t.jsx)(a.motion.div,{className:"w-8/6 h-15 bg-borderSecondary rounded-4",animate:{opacity:[.3,.8,.3]},transition:{duration:1.5,repeat:1/0,delay:.4}}),(0,t.jsx)(a.motion.div,{className:"w-7/5 h-15 bg-borderSecondary rounded-4",animate:{opacity:[.3,.8,.3]},transition:{duration:1.5,repeat:1/0,delay:.6}})]})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(a.motion.div,{className:"w-6/4 h-13 bg-borderSecondary rounded-4",animate:{opacity:[.3,.8,.3]},transition:{duration:1.5,repeat:1/0,delay:.8}}),(0,t.jsx)(a.motion.div,{className:"w-20 h-10 bg-primary/20 rounded-4 mx-auto",animate:{opacity:[.3,1,.3]},transition:{duration:1.5,repeat:1/0,delay:1}})]})]})})})})},y=()=>{let[e,n]=(0,u.useState)(0),r=(0,u.useCallback)(()=>{n(e=>e+1)},[]);return(0,t.jsx)("div",{className:"relative w-full h-full",children:(0,t.jsxs)(i.AnimatePresence,{initial:!1,children:[(0,t.jsx)(g,{frontCard:!1,cardIndex:e+1},e+1),(0,t.jsx)(g,{frontCard:!0,cardIndex:e,onCardExit:r},e)]})})},b=e=>{let{card:n,cardStates:r,setCardStates:i,isActive:o}=e,{theme:s}=(0,l.useTheme)(),u=r[n.id],c=(null==u?void 0:u.isRevealed)||!1;return(0,t.jsxs)("div",{className:"absolute inset-0 rounded-6 bg-card border border-border-primary overflow-hidden cursor-pointer select-none",onClick:()=>{o&&i(e=>({...e,[n.id]:{...e[n.id],isRevealed:!c}}))},children:[(0,t.jsx)(a.motion.div,{className:"absolute bg-primary rounded-full z-10",initial:{width:24,height:24,bottom:12,right:12},animate:c?{width:700,height:700,bottom:-150,right:-150}:{width:24,height:24,bottom:12,right:12},transition:{duration:.25,ease:[.25,.1,.25,1]}}),(0,t.jsxs)(a.motion.div,{className:"absolute inset-0 p-7 flex flex-col justify-between z-5",animate:{opacity:+!c},transition:{duration:.1},children:[(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto scrollbar-thin scrollbar-track-transparent scrollbar-thumb-muted-foreground/20 hover:scrollbar-thumb-muted-foreground/40",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-text-primary mb-6",children:"Question"}),(0,t.jsx)("p",{className:"text-sm text-text-primary leading-relaxed",children:n.question})]}),(0,t.jsx)("div",{className:"text-xs text-text-secondary text-center mt-6",children:"Click to reveal explanation"})]}),(0,t.jsxs)(a.motion.div,{className:"absolute inset-0 p-7 flex flex-col justify-between z-20 bg-primary ".concat("light"===s?"text-white":"text-text-primary"),animate:{opacity:+!!c},transition:{duration:.1},children:[(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto scrollbar-thin scrollbar-track-transparent scrollbar-thumb-primary-foreground/20 hover:scrollbar-thumb-primary-foreground/40",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold mb-6",children:"Explanation"}),(0,t.jsx)("p",{className:"text-sm leading-relaxed",children:n.explanation})]}),(0,t.jsx)("div",{className:"text-xs opacity-75 text-center mt-6",children:"Click to show question"})]})]})},x=e=>{var n,r;let{card:i,cardStates:o,setCardStates:s,isActive:u}=e,{theme:c}=(0,l.useTheme)(),d=o[i.id],h=null==d?void 0:d.selectedAnswer,p=(null==d?void 0:d.isRevealed)||!1,f=()=>{u&&void 0!==h&&s(e=>({...e,[i.id]:{...e[i.id],isRevealed:!p}}))};return(0,t.jsxs)("div",{className:"absolute inset-0 rounded-6 bg-card border border-border-primary overflow-hidden select-none",children:[(0,t.jsx)(a.motion.div,{className:"absolute bg-primary rounded-full z-10",initial:{width:24,height:24,bottom:12,right:12},animate:p?{width:700,height:700,bottom:-150,right:-150}:{width:24,height:24,bottom:12,right:12},transition:{duration:.25,ease:[.25,.1,.25,1]}}),(0,t.jsxs)(a.motion.div,{className:"absolute inset-0 p-7 overflow-y-auto scrollbar-hide  z-5",animate:{opacity:+!p},transition:{duration:.1},children:[(0,t.jsxs)("div",{className:"cursor-pointer mb-7",onClick:f,children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-text-primary mb-6",children:"Multiple Choice"}),(0,t.jsx)("p",{className:"text-sm text-text-primary leading-relaxed",children:i.question})]}),(0,t.jsx)("div",{className:"space-y-4 mb-7",children:null==(n=i.options)?void 0:n.map((e,n)=>{let r=n===i.correctAnswer,a=h===n;return(0,t.jsxs)("button",{onClick:e=>{u&&s(e=>({...e,[i.id]:{...e[i.id],selectedAnswer:n}}))},disabled:!u,className:"w-full text-left p-6 text-sm rounded-4 border-2 transition-all duration-200 ".concat(void 0===h?"hover:bg-accent bg-background-primary border-border-primary hover:border-muted-foreground/30":r?"bg-green/10 border-green text-green shadow-shadowLow":a&&!r?"bg-red/10 border-red text-red shadow-shadowLow":"bg-control-primary border-muted-foreground/20 text-text-secondary"),children:[(0,t.jsxs)("span",{className:"font-medium mr-4 text-xs",children:[String.fromCharCode(65+n),"."]}),e]},"".concat(i.id,"-option-").concat(n))})}),(0,t.jsx)("div",{className:"text-xs text-text-secondary text-center cursor-pointer",onClick:f,children:void 0!==h?"Click to reveal explanation":"Select an answer first"})]}),(0,t.jsxs)(a.motion.div,{className:"absolute inset-0 p-7 flex flex-col justify-between z-20 cursor-pointer bg-primary ".concat("light"===c?"text-white":"text-text-primary"),animate:{opacity:+!!p},transition:{duration:.1},onClick:f,style:{pointerEvents:p?"auto":"none"},children:[(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto scrollbar-thin scrollbar-track-transparent scrollbar-thumb-primary-foreground/20 hover:scrollbar-thumb-primary-foreground/40",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold mb-6",children:"Explanation"}),(0,t.jsx)("p",{className:"text-sm leading-relaxed",children:i.explanation}),void 0!==h&&(0,t.jsxs)("div",{className:"mt-7 p-6 bg-primary-foreground/10 rounded-4",children:[(0,t.jsx)("p",{className:"text-xs font-medium mb-2",children:"Correct Answer:"}),(0,t.jsxs)("p",{className:"text-sm",children:[(0,t.jsxs)("span",{className:"font-medium",children:[String.fromCharCode(65+i.correctAnswer),"."]})," ",null==(r=i.options)?void 0:r[i.correctAnswer]]})]})]}),(0,t.jsx)("div",{className:"text-xs opacity-75 text-center mt-6",children:"Click to show question"})]})]})},w=e=>{let{card:n,cardStates:r,setCardStates:i,isActive:o}=e,{theme:s}=(0,l.useTheme)(),u=r[n.id],c=null==u?void 0:u.selectedAnswer,d=(null==u?void 0:u.isRevealed)||!1,p=()=>{o&&void 0!==c&&i(e=>({...e,[n.id]:{...e[n.id],isRevealed:!d}}))};return(0,t.jsxs)("div",{className:"absolute inset-0 rounded-6 bg-card border border-border-primary overflow-hidden select-none",children:[(0,t.jsx)(a.motion.div,{className:"absolute bg-primary rounded-full z-10",initial:{width:24,height:24,bottom:12,right:12},animate:d?{width:700,height:700,bottom:-150,right:-150}:{width:24,height:24,bottom:12,right:12},transition:{duration:.25,ease:[.25,.1,.25,1]}}),(0,t.jsx)(a.motion.div,{className:"absolute inset-0 p-8 flex flex-col justify-center z-5",animate:{opacity:+!d},transition:{duration:.1},children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"cursor-pointer mb-9",onClick:p,children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-text-primary mb-6",children:"True or False?"}),(0,t.jsx)("p",{className:"text-sm text-text-primary leading-relaxed",children:n.statement})]}),(0,t.jsxs)(h.ToggleGroup,{type:"single",value:void 0!==c?c.toString():"",onValueChange:e=>{var t;e&&o&&void 0===c&&(t="true"===e,o&&i(e=>({...e,[n.id]:{...e[n.id],selectedAnswer:t}})))},className:"grid grid-cols-2 gap-6 w-full",children:[(0,t.jsx)(h.ToggleGroupItem,{value:"true",disabled:!o||void 0!==c,className:"justify-center py-6 px-7 text-sm font-medium h-auto border-2 transition-all duration-200 ".concat(void 0===c?"bg-background-primary border-border-primary hover:bg-accent hover:border-muted-foreground/30":(()=>{let e=!0===n.correctAnswer,t=!0===c;return t&&e?"bg-green/10 border-green text-green shadow-shadowLow":t&&!e?"bg-red/10 border-red text-red shadow-shadowLow":!t&&e?"bg-green/10 border-green text-green shadow-shadowLow":"bg-control-primary border-muted-foreground/20 text-text-secondary"})()),children:"TRUE"}),(0,t.jsx)(h.ToggleGroupItem,{value:"false",disabled:!o||void 0!==c,className:"justify-center py-6 px-7 text-sm font-medium h-auto border-2 transition-all duration-200 ".concat(void 0===c?"bg-background-primary border-border-primary hover:bg-accent hover:border-muted-foreground/30":(()=>{let e=!1===n.correctAnswer,t=!1===c;return t&&e?"bg-green/10 border-green text-green shadow-shadowLow":t&&!e?"bg-red/10 border-red text-red shadow-shadowLow":!t&&e?"bg-green/10 border-green text-green shadow-shadowLow":"bg-control-primary border-muted-foreground/20 text-text-secondary"})()),children:"FALSE"})]}),(0,t.jsx)("div",{className:"text-xs text-text-secondary text-center mt-9 cursor-pointer",onClick:p,children:void 0!==c?"Click to reveal explanation":"Select an answer first"})]})}),(0,t.jsxs)(a.motion.div,{className:"absolute inset-0 p-8 flex flex-col justify-center z-20 cursor-pointer bg-primary ".concat("light"===s?"text-white":"text-text-primary"),animate:{opacity:+!!d},transition:{duration:.1},onClick:p,style:{pointerEvents:d?"auto":"none"},children:[(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto scrollbar-thin scrollbar-track-transparent scrollbar-thumb-primary-foreground/20 hover:scrollbar-thumb-primary-foreground/40",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold mb-6",children:"Explanation"}),(0,t.jsx)("p",{className:"text-sm leading-relaxed",children:n.explanation}),void 0!==c&&(0,t.jsxs)("div",{className:"mt-7 p-6 bg-primary-foreground/10 rounded-4",children:[(0,t.jsx)("p",{className:"text-xs font-medium mb-2",children:"Correct Answer:"}),(0,t.jsx)("p",{className:"text-sm font-medium",children:n.correctAnswer?"TRUE":"FALSE"})]})]}),(0,t.jsx)("div",{className:"text-xs opacity-75 text-center mt-6",children:"Click to show question"})]})]})},k=e=>{let{card:n,cardStates:r,setCardStates:i,isActive:o}=e,{theme:s}=(0,l.useTheme)(),u=r[n.id],c=(n.text.match(/___BLANK___/g)||[]).length,h=(null==u?void 0:u.userAnswers)||Array(c).fill(""),p=(null==u?void 0:u.isRevealed)||!1,f=(null==u?void 0:u.isSubmitted)||!1,m=()=>{o&&f&&i(e=>({...e,[n.id]:{...e[n.id],isRevealed:!p}}))},g=()=>{o&&i(e=>({...e,[n.id]:{...e[n.id],isSubmitted:!0}}))},y=e=>e.toLowerCase().trim().replace(/[$,%.]/g,"").replace(/\s+/g," ").trim(),b=n.correctAnswer.split(";").map(e=>e.trim()),x=h.every((e,t)=>{let n=b[t]||b[0];return y(e)===y(n)}),w=h.some(e=>e.trim().length>0);return(0,t.jsxs)("div",{className:"absolute inset-0 rounded-6 bg-card border border-border-primary overflow-hidden select-none",children:[(0,t.jsx)(a.motion.div,{className:"absolute bg-primary rounded-full z-10",initial:{width:24,height:24,bottom:12,right:12},animate:p?{width:700,height:700,bottom:-150,right:-150}:{width:24,height:24,bottom:12,right:12},transition:{duration:.25,ease:[.25,.1,.25,1]}}),(0,t.jsxs)(a.motion.div,{className:"absolute inset-0 p-7 flex flex-col overflow-y-auto scrollbar-hide z-5",animate:{opacity:+!p},transition:{duration:.1},children:[(0,t.jsxs)("div",{className:"cursor-pointer mb-7 flex-shrink-0",onClick:m,children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-text-primary mb-6",children:"Fill in the Blank"}),(0,t.jsx)("div",{className:"break-words",children:((e,r)=>{let i=e.split("___BLANK___");return(0,t.jsx)("div",{className:"text-sm leading-relaxed break-words",children:i.map((e,a)=>(0,t.jsxs)("span",{className:"break-words",children:[e,a<i.length-1&&(0,t.jsx)("span",{className:"relative inline-block max-w-full",children:(null==r?void 0:r[a])?(0,t.jsx)("span",{className:"px-2 py-1 bg-blue/10 rounded text-blue rounded-2 font-medium text-xs break-words max-w-full inline-block",children:r[a]}):(0,t.jsx)("span",{className:"inline-block w-20 h-9 border-b-2 border-dashed border-gray-400 mx-2 max-w-full"})})]},"".concat(n.id,"-text-part-").concat(a)))})})(n.text,f?h:void 0)})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-3 mb-7 flex-shrink-0",children:[c>1&&(0,t.jsxs)("p",{className:"text-xs text-text-secondary",children:["Fill in all ",c," blanks:"]}),h.map((e,r)=>(0,t.jsxs)("div",{className:"flex gap-3 items-center",children:[c>1&&(0,t.jsxs)("span",{className:"text-xs font-medium text-text-secondary w-5",children:[r+1,"."]}),(0,t.jsx)("input",{type:"text",value:e,onChange:e=>{if(!o)return;let t=[...h];t[r]=e.target.value,i(e=>({...e,[n.id]:{...e[n.id],userAnswers:t}}))},placeholder:"Type answer ".concat(c>1?r+1:"","..."),className:"flex-1 h-10 px-4 py-2 text-sm rounded-4 bg-background-primary focus:ring-1 focus:ring-primary transition-colors",onKeyDown:e=>{if(o&&"Enter"===e.key)if(r<c-1){let e=document.querySelector('input[placeholder="Type answer '.concat(r+2,'..."]'));null==e||e.focus()}else w&&g()},disabled:!o||f})]},"".concat(n.id,"-input-").concat(r))),(0,t.jsx)(d.Button,{onClick:g,disabled:!w||!o||f,size:"xs",variant:"secondary",className:"self-end mt-2",children:"Submit"})]}),f&&w&&(0,t.jsxs)("div",{className:"p-6 rounded-4 border-2 transition-all duration-200 cursor-pointer mb-7 flex-shrink-0 ".concat(x?"bg-green-500/10 border-green-500":"bg-red-500/10 border-red-500"),onClick:m,children:[(0,t.jsx)("p",{className:"font-medium text-sm ".concat(x?"text-green-700":"text-red-700"),children:x?"Correct!":"Incorrect"}),!x&&(0,t.jsx)("div",{className:"text-xs mt-2 text-red-700 break-words",children:1===c?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"break-words",children:['Your answer: "',h[0],'"']}),(0,t.jsxs)("div",{className:"break-words",children:['Correct answer: "',b[0],'"']})]}):(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("div",{children:"Your answers:"}),h.map((e,r)=>(0,t.jsxs)("div",{className:"ml-3",children:[r+1,'. "',e,'"'," ",y(e)===y(b[r]||b[0])?"":""]},"user-answer-".concat(n.id,"-").concat(r))),(0,t.jsx)("div",{className:"mt-2",children:"Correct answers:"}),b.map((e,r)=>(0,t.jsxs)("div",{className:"ml-3",children:[r+1,'. "',e,'"']},"correct-answer-".concat(n.id,"-").concat(r)))]})})]}),(0,t.jsx)("div",{className:"text-xs text-text-secondary text-center mt-auto cursor-pointer",onClick:m,children:w?f?"Click to reveal explanation":"Click submit to check your answer":"Type your answer first"})]}),(0,t.jsxs)(a.motion.div,{className:"absolute inset-0 p-7 flex flex-col z-20 cursor-pointer bg-primary ".concat("light"===s?"text-white":"text-text-primary"),animate:{opacity:+!!p},transition:{duration:.1},onClick:m,style:{pointerEvents:p?"auto":"none"},children:[(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto overflow-x-hidden scrollbar-thin scrollbar-track-transparent scrollbar-thumb-primary-foreground/20 hover:scrollbar-thumb-primary-foreground/40",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold mb-6",children:"Explanation"}),(0,t.jsx)("p",{className:"text-sm leading-relaxed",children:n.explanation}),f&&w&&(0,t.jsxs)("div",{className:"mt-7 p-6 bg-primary-foreground/10 rounded-4",children:[(0,t.jsxs)("p",{className:"text-xs font-medium mb-2",children:["Correct Answer",b.length>1?"s":"",":"]}),1===b.length?(0,t.jsxs)("p",{className:"text-sm break-words",children:['"',b[0],'"']}):(0,t.jsx)("div",{className:"text-sm space-y-1",children:b.map((e,r)=>(0,t.jsxs)("div",{className:"break-words",children:[r+1,'. "',e,'"']},"explanation-answer-".concat(n.id,"-").concat(r)))})]})]}),(0,t.jsx)("div",{className:"text-xs opacity-75 text-center mt-6",children:"Click to show question"})]})]})},S=e=>{let{flashcards:i,isGenerating:a=!1,quizChatbotId:o}=e,s=(0,u.useRef)(null),l=(0,u.useRef)(null),h=(0,u.useRef)(!1),[m,g]=(0,u.useState)(0),[b,x]=(0,u.useState)(0),[w,k]=(0,u.useState)({}),[S,{height:_}]=(0,c.default)(),C=i.length,{setCurrentQuestion:A,clearCurrentQuestion:E}=(0,p.useQuizContextStore)(),T=()=>{if(!s.current)return;let{scrollLeft:e,scrollWidth:t,clientWidth:n}=s.current,r=t-n,i=r>0?e/r:0;x(i),I(i)},M=e=>{if(h.current)return;let t=Math.max(0,Math.min(e,C-1));if(!s.current||t===m)return;h.current=!0,g(t);let n=s.current,r=t*n.clientWidth,i=n.scrollLeft,a=r-i,o=performance.now(),l=e=>{let t=Math.min((e-o)/200,1),s=i+a*(t<.5?2*t*t:1-(-2*t+2)**2/2);n.scrollLeft=s;let{scrollWidth:u,clientWidth:c}=n,d=u-c;(x(d>0?s/d:0),t<1)?requestAnimationFrame(l):(h.current=!1,n.scrollLeft=r,x(d>0?r/d:0))};requestAnimationFrame(l)},I=e=>{if(C<=1||h.current)return;let t=1/(C-1),n=t*(m-1),r=t*(m+1);if(m>=C)return void g(C-1);e<=n&&m>0?g(m-1):e>=r&&m<C-1&&g(m+1)};(0,u.useEffect)(()=>{let e=s.current;if(e)return e.addEventListener("scroll",T),()=>e.removeEventListener("scroll",T)},[m]);let N=(0,u.useRef)(a);return(0,u.useEffect)(()=>{a&&g(0),N.current&&!a&&g(0),N.current=a},[a]),(0,u.useEffect)(()=>{if(o&&i.length>0&&!a){let e=i[m];e&&A(o,m,e,i.length)}},[m,i,o,a,A]),(0,u.useEffect)(()=>()=>{o&&E(o)},[o,E]),(0,t.jsxs)("div",{ref:e=>{l.current=e,S(e)},className:"relative w-full h-full flex flex-col items-center justify-center gap-9 focus:outline-none rounded-4",tabIndex:0,onKeyDown:e=>{"ArrowLeft"===e.key?(e.preventDefault(),M(m-1)):"ArrowRight"===e.key&&(e.preventDefault(),M(m+1))},children:[(0,t.jsxs)("div",{className:"relative w-full h-full",children:[!a&&(0,t.jsx)("div",{ref:s,className:"flex overflow-x-scroll h-full [&::-webkit-scrollbar]:hidden",style:{scrollSnapType:"x mandatory",msOverflowStyle:"none",scrollbarWidth:"none",WebkitOverflowScrolling:"touch"},children:i.map(e=>(0,t.jsx)("div",{className:"flex-shrink-0 w-full h-full",style:{scrollSnapAlign:"start",scrollSnapStop:"always"}},"scroll-".concat(e.id)))}),(0,t.jsx)("div",{className:"absolute top-0 left-0 w-full h-full pointer-events-none",style:{perspective:"calc(50rem * 2)"},children:a?(0,t.jsx)("div",{className:"absolute inset-0 flex justify-center items-center",children:(0,t.jsx)("div",{className:"w-[90%] md:w-[60%] lg:w-[50%] h-96",children:(0,t.jsx)(y,{})})}):i.map((e,n)=>(0,t.jsx)(f,{index:n,flashcard:e,cardCount:C,globalScrollProgress:b,activeIndex:m,cardStates:w,setCardStates:k,scrollableContainerRef:s},e.id))})]}),!a&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"absolute left-1/2 transform -translate-x-1/2 ".concat(_<550?"bottom-7":"top-1/2 -translate-y-72"),children:(0,t.jsxs)("span",{className:"text-sm font-medium text-text-primary/80 px-6 py-2 bg-background-primary/80 backdrop-blur-sm rounded-full border",children:[m+1," / ",C]})}),m>0&&(0,t.jsx)(d.Button,{onClick:()=>M(m-1),variant:"outline",size:"sm",className:"absolute left-7 h-13 w-13 p-0 rounded-full select-none bg-background-primary/80 backdrop-blur-sm hover:bg-background-primary ".concat(_<500?"bottom-7":"top-1/2 transform translate-y-52"),children:(0,t.jsx)(n.ChevronLeft,{size:18})}),m<C-1&&(0,t.jsx)(d.Button,{onClick:()=>M(m+1),variant:"outline",size:"sm",className:"absolute right-7 h-13 w-13 p-0 rounded-full select-none bg-background-primary/80 backdrop-blur-sm hover:bg-background-primary ".concat(_<500?"bottom-7":"top-1/2 transform translate-y-52"),children:(0,t.jsx)(r.ChevronRight,{size:18})}),(0,t.jsx)("div",{className:"text-3xs text-text-secondary/50 text-center opacity-0 hover:opacity-100 transition-opacity duration-300",children:"Scroll horizontally or use arrow keys"})]})]})}},118440:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},299901:e=>{"use strict";e.s({Loader2:()=>t.default});var t=e.i(118440)},899925:e=>{"use strict";e.s({QuizEditDialog:()=>y,useQuizEditContent:()=>g});var t=e.i(290479),n=e.i(647968),r=e.i(608294),i=e.i(227348),a=e.i(874133),o=e.i(299901),s=e.i(334145),l=e.i(373150),u=e.i(704255),c=e.i(972899),d=e.i(852951),h=e.i(814733);let p=(0,i.atomFamily)(e=>(0,n.atom)(null)),f=(0,i.atomFamily)(e=>(0,n.atom)(!1)),m=(0,i.atomFamily)(e=>(0,n.atom)(!1)),g=e=>{let[t,n]=(0,r.useAtom)(p(e)),[i,a]=(0,r.useAtom)(f(e)),[o,s]=(0,r.useAtom)(m(e));return{quizEditContent:t,setQuizEditContent:n,showPreview:i,setShowPreview:a,isQuizReady:o,setIsQuizReady:s}},y=e=>{let{chatbotId:n}=e,{quizEditContent:r,setQuizEditContent:i,setShowPreview:p,isQuizReady:f,setIsQuizReady:m}=g(n),y=h.api.useUtils(),{updateChatbot:b}=(0,d.useWorkspaceActions)(),{mutate:x}=h.api.message.markQuizEditProcessed.useMutation({onSuccess:()=>{},onError:()=>{}}),{mutate:w,isPending:k}=h.api.chatbot.saveQuiz.useMutation({onMutate:e=>{let{name:t,contents:r}=e;if(n){b(n,{name:t||null});let e=y.chatbot.byId.getData(n);return y.chatbot.byId.setData(n,e=>e?{...e,contents:r,name:t||e.name}:void 0),{prevData:e}}},onError:(e,t,r)=>{(null==r?void 0:r.prevData)&&n&&y.chatbot.byId.setData(n,r.prevData)},onSuccess:()=>{var e,t;(null==r?void 0:r.messageId)&&(null==r||null==(t=r.updatedQuiz)||null==(e=t.metadata)?void 0:e.sourceMessageId)?x({messageId:r.messageId,sourceMessageId:r.updatedQuiz.metadata.sourceMessageId}):console.error("Missing data for markQuizEditProcessed (accept)"),i(null),p(!1),m(!1)}});(0,l.useEffect)(()=>{if(!(null==r?void 0:r.updatedQuiz))return;let e=e=>{"Enter"!==e.key||e.shiftKey?"Escape"===e.key&&(e.preventDefault(),_()):(e.preventDefault(),S())};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[r]);let S=()=>{if((null==r?void 0:r.updatedQuiz)&&n)try{w({id:n,name:r.updatedQuiz.title,contents:r.updatedQuiz})}catch(e){console.error("Failed to save quiz changes:",e)}},_=()=>{var e,t;(null==r?void 0:r.messageId)&&(null==r||null==(t=r.updatedQuiz)||null==(e=t.metadata)?void 0:e.sourceMessageId)?x({messageId:r.messageId,sourceMessageId:r.updatedQuiz.metadata.sourceMessageId}):console.error("Missing data for markQuizEditProcessed (reject)"),i(null),p(!1),m(!1)};return f&&(null==r?void 0:r.updatedQuiz)?(0,t.jsxs)("div",{className:"absolute bottom-16 z-50 flex justify-between items-center -translate-x-1/2 left-1/2 w-full max-w-lg p-4 bg-background-primary rounded-4 shadow-feint border",children:[(0,t.jsx)("span",{className:"text-xs text-text-secondary ml-4",children:"Review cards changes"}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)(u.Button,{onClick:S,size:"xs",className:"h-[28px] px-5 flex items-center text-sm",disabled:k,leadingIcon:k?(0,t.jsx)(o.Loader2,{className:"w-[14px] h-[14px] animate-spin"}):(0,t.jsx)(c.Icon,{as:a.Check,className:"w-[14px] h-[14px]"}),trailingIcon:k?void 0:(0,t.jsx)("span",{className:"text-xs text-text-secondary ml-2",children:"ENTER"}),label:k?"Saving...":"Accept"}),(0,t.jsx)(u.Button,{onClick:_,variant:"secondary",size:"xs",className:"h-[28px] px-5 flex items-center text-sm",disabled:k,leadingIcon:(0,t.jsx)(c.Icon,{as:s.X,className:"w-[14px] h-[14px]"}),trailingIcon:(0,t.jsx)("span",{className:"text-xs text-text-secondary ml-2",children:"ESC"}),label:"Reject"})]})]}):null}},276442:e=>{"use strict";e.s({default:()=>a});var t=e.i(290479),n=e.i(296709),r=e.i(899925),i=e.i(814733);let a=e=>{let{chatbotId:a}=e,{data:o}=i.api.chatbot.byId.useQuery(a),{quizEditContent:s,showPreview:l}=(0,r.useQuizEditContent)(a);if(!o)return(0,t.jsx)("div",{className:"h-full bg-background-primary flex items-center justify-center",children:(0,t.jsx)("div",{className:"text-text-secondary",children:"Loading cards..."})});let u=l&&(null==s?void 0:s.updatedQuiz)?s.updatedQuiz:o.contents;return(null==u?void 0:u.cards)&&0!==u.cards.length?(0,t.jsxs)("div",{className:"h-full bg-background-primary flex flex-col relative",children:[(0,t.jsx)(r.QuizEditDialog,{chatbotId:a}),(0,t.jsx)("div",{className:"flex-1 min-h-0",children:(0,t.jsx)(n.default,{flashcards:u.cards,isGenerating:!1,quizChatbotId:a})})]}):(0,t.jsx)("div",{className:"h-full bg-background-primary flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-text-primary mb-4",children:"Empty Cards"}),(0,t.jsx)("p",{className:"text-sm text-text-secondary",children:"This cards doesn't contain any cards."})]})})}},656908:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},585150:e=>{"use strict";e.s({AlertTriangleIcon:()=>t.default});var t=e.i(656908)},842877:e=>{"use strict";e.s({default:()=>a});var t=e.i(290479),n=e.i(585150),r=e.i(397711),i=e.i(704255);let a=e=>{let a=(0,r.useRouter)();return(0,t.jsxs)("div",{className:"w-full h-full bg-background-primary flex flex-col gap-7 items-center justify-center",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center gap-4 max-w-sm",children:[(0,t.jsx)(n.AlertTriangleIcon,{}),(0,t.jsxs)("div",{className:"flex flex-col items-center text-center text-sm gap-2",children:[e.isWebsite&&(0,t.jsxs)("div",{className:"font-medium text-md",children:["Web page cannot ",(0,t.jsx)("br",{})," be rendered"]}),!e.isWebsite&&(0,t.jsx)("p",{className:"font-medium",children:"PDF not found"}),!e.isWebsite&&(0,t.jsx)("p",{className:"text-text-secondary",children:"Please reupload"})]})]}),e.isWebsite&&e.url&&(0,t.jsx)("a",{href:e.url,target:"_blank",children:(0,t.jsx)(i.Button,{size:"sm",children:"Go to site"})}),!e.isWebsite&&(0,t.jsx)(i.Button,{size:"sm",onClick:()=>a.push("/new"),children:"Upload"})]})}},285038:e=>{"use strict";e.s({parseSelector:()=>n});let t=/[#.]/g;function n(e,n){let r,i,a=e||"",o={},s=0;for(;s<a.length;){t.lastIndex=s;let e=t.exec(a),n=a.slice(s,e?e.index:a.length);n&&(r?"#"===r?o.id=n:Array.isArray(o.className)?o.className.push(n):o.className=[n]:i=n,s+=n.length),e&&(r=e[0],s++)}return{type:"element",tagName:i||n||"div",properties:o,children:[]}}},935881:e=>{"use strict";e.s({createH:()=>o});var t=e.i(152980),n=e.i(285038),r=e.i(753448),i=e.i(934504),a=e.i(384779);function o(e,i,o){let l=o?function(e){let t=new Map;for(let n of e)t.set(n.toLowerCase(),n);return t}(o):void 0;return function(o,u){let c;for(var d=arguments.length,h=Array(d>2?d-2:0),p=2;p<d;p++)h[p-2]=arguments[p];if(null==o)c={type:"root",children:[]},h.unshift(u);else{let d=(c=(0,n.parseSelector)(o,i)).tagName.toLowerCase(),p=l?l.get(d):void 0;if(c.tagName=p||d,function(e){if(null===e||"object"!=typeof e||Array.isArray(e))return!0;if("string"!=typeof e.type)return!1;for(let t of Object.keys(e)){let n=e[t];if(n&&"object"==typeof n){if(!Array.isArray(n))return!0;for(let e of n)if("number"!=typeof e&&"string"!=typeof e)return!0}}return!!("children"in e&&Array.isArray(e.children))}(u))h.unshift(u);else for(let[n,i]of Object.entries(u))!function(e,n,i,o){let l,u=(0,r.find)(e,i);if(null!=o){if("number"==typeof o){if(Number.isNaN(o))return;l=o}else l="boolean"==typeof o?o:"string"==typeof o?u.spaceSeparated?(0,a.parse)(o):u.commaSeparated?(0,t.parse)(o):u.commaOrSpaceSeparated?(0,a.parse)((0,t.parse)(o).join(" ")):s(u,u.property,o):Array.isArray(o)?[...o]:"style"===u.property?function(e){let t=[];for(let[n,r]of Object.entries(e))t.push([n,r].join(": "));return t.join("; ")}(o):String(o);if(Array.isArray(l)){let e=[];for(let t of l)e.push(s(u,u.property,t));l=e}"className"===u.property&&Array.isArray(n.className)&&(l=n.className.concat(l)),n[u.property]=l}}(e,c.properties,n,i)}for(let e of h)!function e(t,n){if(null==n);else if("number"==typeof n||"string"==typeof n)t.push({type:"text",value:String(n)});else if(Array.isArray(n))for(let r of n)e(t,r);else if("object"==typeof n&&"type"in n)"root"===n.type?e(t,n.children):t.push(n);else throw Error("Expected node, nodes, or string, got `"+n+"`")}(c.children,e);return"element"===c.type&&"template"===c.tagName&&(c.content={type:"root",children:c.children},c.children=[]),c}}function s(e,t,n){if("string"==typeof n){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(""===n||(0,i.normalize)(n)===(0,i.normalize)(t)))return!0}return n}},569415:e=>{"use strict";e.s({svgCaseSensitiveTagNames:()=>t});let t=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"]},319707:e=>{"use strict";e.s({h:()=>i,s:()=>a});var t=e.i(254158),n=e.i(935881),r=e.i(569415);let i=(0,n.createH)(t.html,"div"),a=(0,n.createH)(t.svg,"g",r.svgCaseSensitiveTagNames)},871336:e=>{"use strict";e.s({webNamespaces:()=>t});let t={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"}},858376:e=>{"use strict";e.s({fromDom:()=>r});var t=e.i(319707),n=e.i(871336);function r(e,t){return i(e,t||{})||{type:"root",children:[]}}function i(e,r){let i=function(e,r){switch(e.nodeType){case 1:return function(e,r){let i=e.namespaceURI,o=i===n.webNamespaces.svg?t.s:t.h,s=i===n.webNamespaces.html?e.tagName.toLowerCase():e.tagName,l=i===n.webNamespaces.html&&"template"===s?e.content:e,u=e.getAttributeNames(),c={},d=-1;for(;++d<u.length;)c[u[d]]=e.getAttribute(u[d])||"";return o(s,c,a(l,r))}(e,r);case 3:return{type:"text",value:e.nodeValue||""};case 8:return{type:"comment",value:e.nodeValue||""};case 9:case 11:return function(e,t){return{type:"root",children:a(e,t)}}(e,r);case 10:return{type:"doctype"};default:return}}(e,r);return i&&r.afterTransform&&r.afterTransform(e,i),i}function a(e,t){let n=e.childNodes,r=[],a=-1;for(;++a<n.length;){let e=i(n[a],t);void 0!==e&&r.push(e)}return r}},680892:e=>{"use strict";e.s({fromHtmlIsomorphic:()=>r});var t=e.i(858376);let n=new DOMParser;function r(e,r){let i=(null==r?void 0:r.fragment)?function(e){let t=document.createElement("template");return t.innerHTML=e,t.content}(e):n.parseFromString(e,"text/html");return(0,t.fromDom)(i)}},194491:e=>{"use strict";e.s({convert:()=>t});let t=function(e){var i,a;if(null==e)return r;if("function"==typeof e)return n(e);if("object"==typeof e){return Array.isArray(e)?function(e){let r=[],i=-1;for(;++i<e.length;)r[i]=t(e[i]);return n(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let i=-1;for(;++i<r.length;)if(r[i].apply(this,t))return!0;return!1})}(e):(i=e,n(function(e){let t;for(t in i)if(e[t]!==i[t])return!1;return!0}))}if("string"==typeof e){return a=e,n(function(e){return e&&e.type===a})}throw Error("Expected function, string, or object as test")};function n(e){return function(t,n,r){return!!(function(e){return null!==e&&"object"==typeof e&&"type"in e}(t)&&e.call(this,t,"number"==typeof n?n:void 0,r||void 0))}}function r(){return!0}},128305:e=>{"use strict";e.s({findAfter:()=>n});var t=e.i(194491);let n=function(e,n,r){let i=(0,t.convert)(r);if(!e||!e.type||!e.children)throw Error("Expected parent node");if("number"==typeof n){if(n<0||n===1/0)throw Error("Expected positive finite number as index")}else if((n=e.children.indexOf(n))<0)throw Error("Expected child node or index");for(;++n<e.children.length;)if(i(e.children[n],n,e))return e.children[n]}},144492:e=>{"use strict";e.s({convertElement:()=>t});let t=function(e){if(null==e)return r;if("string"==typeof e){var i;return i=e,n(function(e){return e.tagName===i})}if("object"==typeof e){var a=e;let r=[],i=-1;for(;++i<a.length;)r[i]=t(a[i]);return n(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let i=-1;for(;++i<r.length;)if(r[i].apply(this,t))return!0;return!1})}if("function"==typeof e)return n(e);throw Error("Expected function, string, or array as `test`")};function n(e){return function(t,n,r){var i;return!!(null!==(i=t)&&"object"==typeof i&&"type"in i&&"tagName"in i&&e.call(this,t,"number"==typeof n?n:void 0,r||void 0))}}function r(e){return!!(e&&"object"==typeof e&&"type"in e&&"element"===e.type&&"tagName"in e&&"string"==typeof e.tagName)}},258158:e=>{"use strict";e.s({toText:()=>d});var t=e.i(128305),n=e.i(144492);let r=/\n/g,i=/[\t ]+/g,a=(0,n.convertElement)("br"),o=(0,n.convertElement)(function(e){return"td"===e.tagName||"th"===e.tagName}),s=(0,n.convertElement)("p"),l=(0,n.convertElement)("tr"),u=(0,n.convertElement)(["datalist","head","noembed","noframes","noscript","rp","script","style","template","title",function(e){return!!(e.properties||{}).hidden},function(e){return"dialog"===e.tagName&&!(e.properties||{}).open}]),c=(0,n.convertElement)(["address","article","aside","blockquote","body","caption","center","dd","dialog","dir","dl","dt","div","figure","figcaption","footer","form,","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","legend","li","listing","main","menu","nav","ol","p","plaintext","pre","section","ul","xmp"]);function d(e,n){let r,i="children"in e?e.children:[],d=c(e),f=p(e,{whitespace:(n||{}).whitespace||"normal",breakBefore:!1,breakAfter:!1}),m=[];("text"===e.type||"comment"===e.type)&&m.push(...h(e,{whitespace:f,breakBefore:!0,breakAfter:!0}));let g=-1;for(;++g<i.length;)m.push(...function e(n,r,i){return"element"===n.type?function(n,r,i){let d,h,f=p(n,i),m=n.children||[],g=-1,y=[];if(u(n))return y;for(a(n)||l(n)&&(0,t.findAfter)(r,n,l)?h="\n":s(n)?(d=2,h=2):c(n)&&(d=1,h=1);++g<m.length;)y=y.concat(e(m[g],n,{whitespace:f,breakBefore:g?void 0:d,breakAfter:g<m.length-1?a(m[g+1]):h}));return o(n)&&(0,t.findAfter)(r,n,o)&&y.push("	"),d&&y.unshift(d),h&&y.push(h),y}(n,r,i):"text"===n.type?"normal"===i.whitespace?h(n,i):[String(n.value)]:[]}(i[g],e,{whitespace:f,breakBefore:g?void 0:d,breakAfter:g<i.length-1?a(i[g+1]):d}));let y=[];for(g=-1;++g<m.length;){let e=m[g];"number"==typeof e?void 0!==r&&e>r&&(r=e):e&&(void 0!==r&&r>-1&&y.push("\n".repeat(r)||" "),r=-1,y.push(e))}return y.join("")}function h(e,t){let n,a=String(e.value),o=[],s=[],l=0;for(;l<=a.length;){r.lastIndex=l;let e=r.exec(a),n=e&&"index"in e?e.index:a.length;o.push(function(e,t,n){let r,a=[],o=0;for(;o<e.length;){i.lastIndex=o;let n=i.exec(e);r=n?n.index:e.length,o||r||!n||t||a.push(""),o!==r&&a.push(e.slice(o,r)),o=n?r+n[0].length:r}return o===r||n||a.push(""),a.join(" ")}(a.slice(l,n).replace(/[\u061C\u200E\u200F\u202A-\u202E\u2066-\u2069]/g,""),0!==l||t.breakBefore,n!==a.length||t.breakAfter)),l=n+1}let u=-1;for(;++u<o.length;)8203===o[u].charCodeAt(o[u].length-1)||u<o.length-1&&8203===o[u+1].charCodeAt(0)?(s.push(o[u]),n=void 0):o[u]?("number"==typeof n&&s.push(n),s.push(o[u]),n=0):(0===u||u===o.length-1)&&s.push(0);return s}function p(e,t){if("element"===e.type){let n=e.properties||{};switch(e.tagName){case"listing":case"plaintext":case"xmp":return"pre";case"nobr":return"nowrap";case"pre":return n.wrap?"pre-wrap":"pre";case"td":case"th":return n.noWrap?"nowrap":t.whitespace;case"textarea":return"pre-wrap"}}return t.whitespace}},157489:e=>{"use strict";function t(e){return e}e.s({color:()=>t})},115417:e=>{"use strict";e.s({EXIT:()=>i,SKIP:()=>a,visitParents:()=>o});var t=e.i(194491),n=e.i(157489);let r=[],i=!1,a="skip";function o(e,o,s,l){let u;"function"==typeof o&&"function"!=typeof s?(l=s,s=o):u=o;let c=(0,t.convert)(u),d=l?-1:1;(function e(t,u,h){let p=t&&"object"==typeof t?t:{};if("string"==typeof p.type){let e="string"==typeof p.tagName?p.tagName:"string"==typeof p.name?p.name:void 0;Object.defineProperty(f,"name",{value:"node ("+(0,n.color)(t.type+(e?"<"+e+">":""))+")"})}return f;function f(){var n;let p,f,m,g=r;if((!o||c(t,u,h[h.length-1]||void 0))&&(g=Array.isArray(n=s(t,h))?n:"number"==typeof n?[!0,n]:null==n?r:[n])[0]===i)return g;if("children"in t&&t.children&&t.children&&g[0]!==a)for(f=(l?t.children.length:-1)+d,m=h.concat(t);f>-1&&f<t.children.length;){if((p=e(t.children[f],f,m)())[0]===i)return p;f="number"==typeof p[1]?p[1]:f+d}return g}})(e,void 0,[])()}},331237:e=>{"use strict";e.s({default:()=>s});var t=e.i(680892),n=e.i(258158),r=e.i(629906),i=e.i(115417);let a={},o=[];function s(e){let s=e||a;return function(e,a){(0,i.visitParents)(e,"element",function(e,l){let u,c=Array.isArray(e.properties.className)?e.properties.className:o,d=c.includes("language-math"),h=c.includes("math-display"),p=c.includes("math-inline"),f=h;if(!d&&!h&&!p)return;let m=l[l.length-1],g=e;if("code"===e.tagName&&d&&m&&"element"===m.type&&"pre"===m.tagName&&(g=m,m=l[l.length-2],f=!0),!m)return;let y=(0,n.toText)(g,{whitespace:"pre"});try{u=r.default.renderToString(y,{...s,displayMode:f,throwOnError:!0})}catch(n){let t=n.name.toLowerCase();a.message("Could not render math with KaTeX",{ancestors:[...l,e],cause:n,place:e.position,ruleId:t,source:"rehype-katex"});try{u=r.default.renderToString(y,{...s,displayMode:f,strict:"ignore",throwOnError:!1})}catch(e){u=[{type:"element",tagName:"span",properties:{className:["katex-error"],style:"color:"+(s.errorColor||"#cc0000"),title:String(n)},children:[{type:"text",value:y}]}]}}"string"==typeof u&&(u=(0,t.fromHtmlIsomorphic)(u,{fragment:!0}).children);let b=m.children.indexOf(g);return m.children.splice(b,1,...u),i.SKIP})}}},366506:e=>{"use strict";function t(){}function n(){}e.s({ok:()=>t,unreachable:()=>n})},32633:e=>{"use strict";e.s({asciiAlpha:()=>t,asciiAlphanumeric:()=>n,asciiAtext:()=>r,asciiControl:()=>i,asciiDigit:()=>a,asciiHexDigit:()=>o,asciiPunctuation:()=>s,markdownLineEnding:()=>l,markdownLineEndingOrSpace:()=>u,markdownSpace:()=>c,unicodePunctuation:()=>d,unicodeWhitespace:()=>h});let t=p(/[A-Za-z]/),n=p(/[\dA-Za-z]/),r=p(/[#-'*+\--9=?A-Z^-~]/);function i(e){return null!==e&&(e<32||127===e)}let a=p(/\d/),o=p(/[\dA-Fa-f]/),s=p(/[!-/:-@[-`{-~]/);function l(e){return null!==e&&e<-2}function u(e){return null!==e&&(e<0||32===e)}function c(e){return -2===e||-1===e||32===e}let d=p(RegExp("\\p{P}|\\p{S}","u")),h=p(/\s/);function p(e){return function(t){return null!==t&&t>-1&&e.test(String.fromCharCode(t))}}},152072:e=>{"use strict";function t(e){if("string"!=typeof e)throw TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}e.s({default:()=>t})},784825:e=>{"use strict";e.s({findAndReplace:()=>i});var t=e.i(152072),n=e.i(115417),r=e.i(194491);function i(e,i,a){let o=(0,r.convert)((a||{}).ignore||[]),s=function(e){let n=[];if(!Array.isArray(e))throw TypeError("Expected find and replace tuple or list of tuples");let r=!e[0]||Array.isArray(e[0])?e:[e],i=-1;for(;++i<r.length;){var a;let e=r[i];n.push(["string"==typeof(a=e[0])?RegExp((0,t.default)(a),"g"):a,function(e){return"function"==typeof e?e:function(){return e}}(e[1])])}return n}(i),l=-1;for(;++l<s.length;)(0,n.visitParents)(e,"text",u);function u(e,t){let n,r=-1;for(;++r<t.length;){let e=t[r],i=n?n.children:void 0;if(o(e,i?i.indexOf(e):void 0,n))return;n=e}if(n)return function(e,t){let n=t[t.length-1],r=s[l][0],i=s[l][1],a=0,o=n.children.indexOf(e),u=!1,c=[];r.lastIndex=0;let d=r.exec(e.value);for(;d;){let n=d.index,o={index:d.index,input:d.input,stack:[...t,e]},s=i(...d,o);if("string"==typeof s&&(s=s.length>0?{type:"text",value:s}:void 0),!1===s?r.lastIndex=n+1:(a!==n&&c.push({type:"text",value:e.value.slice(a,n)}),Array.isArray(s)?c.push(...s):s&&c.push(s),a=n+d[0].length,u=!0),!r.global)break;d=r.exec(e.value)}return u?(a<e.value.length&&c.push({type:"text",value:e.value.slice(a)}),n.children.splice(o,1,...c)):c=[e],o+c.length}(e,t)}}},154319:e=>{"use strict";e.s({gfmAutolinkLiteralFromMarkdown:()=>s,gfmAutolinkLiteralToMarkdown:()=>l});var t=e.i(522956),n=e.i(366506),r=e.i(32633),i=e.i(784825);let a="phrasing",o=["autolink","link","image","label"];function s(){return{transforms:[m],enter:{literalAutolink:u,literalAutolinkEmail:c,literalAutolinkHttp:c,literalAutolinkWww:c},exit:{literalAutolink:f,literalAutolinkEmail:p,literalAutolinkHttp:d,literalAutolinkWww:h}}}function l(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:a,notInConstruct:o},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:a,notInConstruct:o},{character:":",before:"[ps]",after:"\\/",inConstruct:a,notInConstruct:o}]}}function u(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function c(e){this.config.enter.autolinkProtocol.call(this,e)}function d(e){this.config.exit.autolinkProtocol.call(this,e)}function h(e){this.config.exit.data.call(this,e);let t=this.stack[this.stack.length-1];(0,n.ok)("link"===t.type),t.url="http://"+this.sliceSerialize(e)}function p(e){this.config.exit.autolinkEmail.call(this,e)}function f(e){this.exit(e)}function m(e){(0,i.findAndReplace)(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,g],[/([-.\w+]+)@([-\w]+(?:\.[-\w]+)+)/g,y]],{ignore:["link","linkReference"]})}function g(e,n,r,i,a){let o="";if(!b(a)||(/^w/i.test(n)&&(r=n+r,n="",o="http://"),!function(e){let t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}(r)))return!1;let s=function(e){let n=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!n)return[e,void 0];e=e.slice(0,n.index);let r=n[0],i=r.indexOf(")"),a=(0,t.ccount)(e,"("),o=(0,t.ccount)(e,")");for(;-1!==i&&a>o;)e+=r.slice(0,i+1),i=(r=r.slice(i+1)).indexOf(")"),o++;return[e,r]}(r+i);if(!s[0])return!1;let l={type:"link",title:null,url:o+n+s[0],children:[{type:"text",value:n+s[0]}]};return s[1]?[l,{type:"text",value:s[1]}]:l}function y(e,t,n,r){return!(!b(r,!0)||/[-\d_]$/.test(n))&&{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function b(e,t){let n=e.input.charCodeAt(e.index-1);return(0===e.index||(0,r.unicodeWhitespace)(n)||(0,r.unicodePunctuation)(n))&&(!t||47!==n)}},967148:e=>{"use strict";function t(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}e.s({normalizeIdentifier:()=>t})},722461:e=>{"use strict";e.s({gfmFootnoteFromMarkdown:()=>h,gfmFootnoteToMarkdown:()=>p});var t=e.i(366506),n=e.i(967148);function r(){this.buffer()}function i(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function a(){this.buffer()}function o(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function s(e){let r=this.resume(),i=this.stack[this.stack.length-1];(0,t.ok)("footnoteReference"===i.type),i.identifier=(0,n.normalizeIdentifier)(this.sliceSerialize(e)).toLowerCase(),i.label=r}function l(e){this.exit(e)}function u(e){let r=this.resume(),i=this.stack[this.stack.length-1];(0,t.ok)("footnoteDefinition"===i.type),i.identifier=(0,n.normalizeIdentifier)(this.sliceSerialize(e)).toLowerCase(),i.label=r}function c(e){this.exit(e)}function d(e,t,n,r){let i=n.createTracker(r),a=i.move("[^"),o=n.enter("footnoteReference"),s=n.enter("reference");return a+=i.move(n.safe(n.associationId(e),{after:"]",before:a})),s(),o(),a+=i.move("]")}function h(){return{enter:{gfmFootnoteCallString:r,gfmFootnoteCall:i,gfmFootnoteDefinitionLabelString:a,gfmFootnoteDefinition:o},exit:{gfmFootnoteCallString:s,gfmFootnoteCall:l,gfmFootnoteDefinitionLabelString:u,gfmFootnoteDefinition:c}}}function p(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:function(e,n,r,i){let a=r.createTracker(i),o=a.move("[^"),s=r.enter("footnoteDefinition"),l=r.enter("label");return o+=a.move(r.safe(r.associationId(e),{before:o,after:"]"})),l(),o+=a.move("]:"),e.children&&e.children.length>0&&(a.shift(4),o+=a.move((t?"\n":" ")+r.indentLines(r.containerFlow(e,a.current()),t?m:f))),s(),o},footnoteReference:d},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]}}function f(e,t,n){return 0===t?e:m(e,t,n)}function m(e,t,n){return(n?"":"    ")+e}d.peek=function(){return"["}},532199:e=>{"use strict";e.s({gfmStrikethroughFromMarkdown:()=>n,gfmStrikethroughToMarkdown:()=>r});let t=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];function n(){return{canContainEols:["delete"],enter:{strikethrough:i},exit:{strikethrough:a}}}function r(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:t}],handlers:{delete:o}}}function i(e){this.enter({type:"delete",children:[]},e)}function a(e){this.exit(e)}function o(e,t,n,r){let i=n.createTracker(r),a=n.enter("strikethrough"),o=i.move("~~");return o+=n.containerPhrasing(e,{...i.current(),before:o,after:"~"}),o+=i.move("~~"),a(),o}o.peek=function(){return"~"}},168147:e=>{"use strict";function t(e){return e.length}function n(e,n){let i=n||{},a=(i.align||[]).concat(),o=i.stringLength||t,s=[],l=[],u=[],c=[],d=0,h=-1;for(;++h<e.length;){let t=[],n=[],r=-1;for(e[h].length>d&&(d=e[h].length);++r<e[h].length;){var p;let a=null==(p=e[h][r])?"":String(p);if(!1!==i.alignDelimiters){let e=o(a);n[r]=e,(void 0===c[r]||e>c[r])&&(c[r]=e)}t.push(a)}l[h]=t,u[h]=n}let f=-1;if("object"==typeof a&&"length"in a)for(;++f<d;)s[f]=r(a[f]);else{let e=r(a);for(;++f<d;)s[f]=e}f=-1;let m=[],g=[];for(;++f<d;){let e=s[f],t="",n="";99===e?(t=":",n=":"):108===e?t=":":114===e&&(n=":");let r=!1===i.alignDelimiters?1:Math.max(1,c[f]-t.length-n.length),a=t+"-".repeat(r)+n;!1!==i.alignDelimiters&&((r=t.length+r+n.length)>c[f]&&(c[f]=r),g[f]=r),m[f]=a}l.splice(1,0,m),u.splice(1,0,g),h=-1;let y=[];for(;++h<l.length;){let e=l[h],t=u[h];f=-1;let n=[];for(;++f<d;){let r=e[f]||"",a="",o="";if(!1!==i.alignDelimiters){let e=c[f]-(t[f]||0),n=s[f];114===n?a=" ".repeat(e):99===n?e%2?(a=" ".repeat(e/2+.5),o=" ".repeat(e/2-.5)):o=a=" ".repeat(e/2):o=" ".repeat(e)}!1===i.delimiterStart||f||n.push("|"),!1!==i.padding&&(!1!==i.alignDelimiters||""!==r)&&(!1!==i.delimiterStart||f)&&n.push(" "),!1!==i.alignDelimiters&&n.push(a),n.push(r),!1!==i.alignDelimiters&&n.push(o),!1!==i.padding&&n.push(" "),(!1!==i.delimiterEnd||f!==d-1)&&n.push("|")}y.push(!1===i.delimiterEnd?n.join("").replace(/ +$/,""):n.join(""))}return y.join("\n")}function r(e){let t="string"==typeof e?e.codePointAt(0):0;return 67===t||99===t?99:76===t||108===t?108:114*(82===t||114===t)}e.s({markdownTable:()=>n})},168975:e=>{"use strict";function t(e,t,r,i){let a=r.enter("blockquote"),o=r.createTracker(i);o.move("> "),o.shift(2);let s=r.indentLines(r.containerFlow(e,o.current()),n);return a(),s}function n(e,t,n){return">"+(n?"":" ")+e}e.s({blockquote:()=>t})},136682:e=>{"use strict";function t(e,t){return n(e,t.inConstruct,!0)&&!n(e,t.notInConstruct,!1)}function n(e,t,n){if("string"==typeof t&&(t=[t]),!t||0===t.length)return n;let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}e.s({patternInScope:()=>t})},929619:e=>{"use strict";e.s({hardBreak:()=>n});var t=e.i(136682);function n(e,n,r,i){let a=-1;for(;++a<r.unsafe.length;)if("\n"===r.unsafe[a].character&&(0,t.patternInScope)(r.stack,r.unsafe[a]))return/[ \t]/.test(i.before)?"":" ";return"\\\n"}},733442:e=>{"use strict";function t(e,t){let n=String(e),r=n.indexOf(t),i=r,a=0,o=0;if("string"!=typeof t)throw TypeError("Expected substring");for(;-1!==r;)r===i?++a>o&&(o=a):a=1,i=r+t.length,r=n.indexOf(t,i);return o}e.s({longestStreak:()=>t})},681292:e=>{"use strict";function t(e,t){return!!(!1===t.options.fences&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}e.s({formatCodeAsIndented:()=>t})},601970:e=>{"use strict";function t(e){let t=e.options.fence||"`";if("`"!==t&&"~"!==t)throw Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}e.s({checkFence:()=>t})},595210:e=>{"use strict";e.s({code:()=>i});var t=e.i(733442),n=e.i(681292),r=e.i(601970);function i(e,i,o,s){let l=(0,r.checkFence)(o),u=e.value||"",c="`"===l?"GraveAccent":"Tilde";if((0,n.formatCodeAsIndented)(e,o)){let e=o.enter("codeIndented"),t=o.indentLines(u,a);return e(),t}let d=o.createTracker(s),h=l.repeat(Math.max((0,t.longestStreak)(u,l)+1,3)),p=o.enter("codeFenced"),f=d.move(h);if(e.lang){let t=o.enter("codeFencedLang".concat(c));f+=d.move(o.safe(e.lang,{before:f,after:" ",encode:["`"],...d.current()})),t()}if(e.lang&&e.meta){let t=o.enter("codeFencedMeta".concat(c));f+=d.move(" "),f+=d.move(o.safe(e.meta,{before:f,after:"\n",encode:["`"],...d.current()})),t()}return f+=d.move("\n"),u&&(f+=d.move(u+"\n")),f+=d.move(h),p(),f}function a(e,t,n){return(n?"":"    ")+e}},89217:e=>{"use strict";function t(e){let t=e.options.quote||'"';if('"'!==t&&"'"!==t)throw Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}e.s({checkQuote:()=>t})},437308:e=>{"use strict";e.s({definition:()=>n});var t=e.i(89217);function n(e,n,r,i){let a=(0,t.checkQuote)(r),o='"'===a?"Quote":"Apostrophe",s=r.enter("definition"),l=r.enter("label"),u=r.createTracker(i),c=u.move("[");return c+=u.move(r.safe(r.associationId(e),{before:c,after:"]",...u.current()})),c+=u.move("]: "),l(),!e.url||/[\0- \u007F]/.test(e.url)?(l=r.enter("destinationLiteral"),c+=u.move("<"),c+=u.move(r.safe(e.url,{before:c,after:">",...u.current()})),c+=u.move(">")):(l=r.enter("destinationRaw"),c+=u.move(r.safe(e.url,{before:c,after:e.title?" ":"\n",...u.current()}))),l(),e.title&&(l=r.enter("title".concat(o)),c+=u.move(" "+a),c+=u.move(r.safe(e.title,{before:c,after:a,...u.current()})),c+=u.move(a),l()),s(),c}},846272:e=>{"use strict";function t(e){let t=e.options.emphasis||"*";if("*"!==t&&"_"!==t)throw Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}e.s({checkEmphasis:()=>t})},796496:e=>{"use strict";function t(e){return"&#x"+e.toString(16).toUpperCase()+";"}e.s({encodeCharacterReference:()=>t})},909300:e=>{"use strict";e.s({classifyCharacter:()=>n});var t=e.i(32633);function n(e){return null===e||(0,t.markdownLineEndingOrSpace)(e)||(0,t.unicodeWhitespace)(e)?1:(0,t.unicodePunctuation)(e)?2:void 0}},309036:e=>{"use strict";e.s({encodeInfo:()=>n});var t=e.i(909300);function n(e,n,r){let i=(0,t.classifyCharacter)(e),a=(0,t.classifyCharacter)(n);return void 0===i?void 0===a?"_"===r?{inside:!0,outside:!0}:{inside:!1,outside:!1}:1===a?{inside:!0,outside:!0}:{inside:!1,outside:!0}:1===i?void 0===a?{inside:!1,outside:!1}:1===a?{inside:!0,outside:!0}:{inside:!1,outside:!1}:void 0===a?{inside:!1,outside:!1}:1===a?{inside:!0,outside:!1}:{inside:!1,outside:!1}}},884747:e=>{"use strict";e.s({emphasis:()=>i});var t=e.i(846272),n=e.i(796496),r=e.i(309036);function i(e,i,a,o){let s=(0,t.checkEmphasis)(a),l=a.enter("emphasis"),u=a.createTracker(o),c=u.move(s),d=u.move(a.containerPhrasing(e,{after:s,before:c,...u.current()})),h=d.charCodeAt(0),p=(0,r.encodeInfo)(o.before.charCodeAt(o.before.length-1),h,s);p.inside&&(d=(0,n.encodeCharacterReference)(h)+d.slice(1));let f=d.charCodeAt(d.length-1),m=(0,r.encodeInfo)(o.after.charCodeAt(0),f,s);m.inside&&(d=d.slice(0,-1)+(0,n.encodeCharacterReference)(f));let g=u.move(s);return l(),a.attentionEncodeSurroundingInfo={after:m.outside,before:p.outside},c+d+g}i.peek=function(e,t,n){return n.options.emphasis||"*"}},792021:e=>{"use strict";e.s({visit:()=>n});var t=e.i(115417);function n(e,n,r,i){let a,o,s;"function"==typeof n&&"function"!=typeof r?(o=void 0,s=n,a=r):(o=n,s=r,a=i),(0,t.visitParents)(e,o,function(e,t){let n=t[t.length-1],r=n?n.children.indexOf(e):void 0;return s(e,r,n)},a)}},863653:e=>{"use strict";e.s({toString:()=>n});let t={};function n(e,n){let i=n||t;return r(e,"boolean"!=typeof i.includeImageAlt||i.includeImageAlt,"boolean"!=typeof i.includeHtml||i.includeHtml)}function r(e,t,n){var r;if((r=e)&&"object"==typeof r){if("value"in e)return"html"!==e.type||n?e.value:"";if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return i(e.children,t,n)}return Array.isArray(e)?i(e,t,n):""}function i(e,t,n){let i=[],a=-1;for(;++a<e.length;)i[a]=r(e[a],t,n);return i.join("")}},367813:e=>{"use strict";e.s({formatHeadingAsSetext:()=>i});var t=e.i(115417),n=e.i(792021),r=e.i(863653);function i(e,i){let a=!1;return(0,n.visit)(e,function(e){if("value"in e&&/\r?\n|\r/.test(e.value)||"break"===e.type)return a=!0,t.EXIT}),!!((!e.depth||e.depth<3)&&(0,r.toString)(e)&&(i.options.setext||a))}},610468:e=>{"use strict";e.s({heading:()=>r});var t=e.i(796496),n=e.i(367813);function r(e,r,i,a){let o=Math.max(Math.min(6,e.depth||1),1),s=i.createTracker(a);if((0,n.formatHeadingAsSetext)(e,i)){let t=i.enter("headingSetext"),n=i.enter("phrasing"),r=i.containerPhrasing(e,{...s.current(),before:"\n",after:"\n"});return n(),t(),r+"\n"+(1===o?"=":"-").repeat(r.length-(Math.max(r.lastIndexOf("\r"),r.lastIndexOf("\n"))+1))}let l="#".repeat(o),u=i.enter("headingAtx"),c=i.enter("phrasing");s.move(l+" ");let d=i.containerPhrasing(e,{before:"# ",after:"\n",...s.current()});return/^[\t ]/.test(d)&&(d=(0,t.encodeCharacterReference)(d.charCodeAt(0))+d.slice(1)),d=d?l+" "+d:l,i.options.closeAtx&&(d+=" "+l),c(),u(),d}},261882:e=>{"use strict";function t(e){return e.value||""}e.s({html:()=>t}),t.peek=function(){return"<"}},863828:e=>{"use strict";e.s({image:()=>n});var t=e.i(89217);function n(e,n,r,i){let a=(0,t.checkQuote)(r),o='"'===a?"Quote":"Apostrophe",s=r.enter("image"),l=r.enter("label"),u=r.createTracker(i),c=u.move("![");return c+=u.move(r.safe(e.alt,{before:c,after:"]",...u.current()})),c+=u.move("]("),l(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(l=r.enter("destinationLiteral"),c+=u.move("<"),c+=u.move(r.safe(e.url,{before:c,after:">",...u.current()})),c+=u.move(">")):(l=r.enter("destinationRaw"),c+=u.move(r.safe(e.url,{before:c,after:e.title?" ":")",...u.current()}))),l(),e.title&&(l=r.enter("title".concat(o)),c+=u.move(" "+a),c+=u.move(r.safe(e.title,{before:c,after:a,...u.current()})),c+=u.move(a),l()),c+=u.move(")"),s(),c}n.peek=function(){return"!"}},621178:e=>{"use strict";function t(e,t,n,r){let i=e.referenceType,a=n.enter("imageReference"),o=n.enter("label"),s=n.createTracker(r),l=s.move("!["),u=n.safe(e.alt,{before:l,after:"]",...s.current()});l+=s.move(u+"]["),o();let c=n.stack;n.stack=[],o=n.enter("reference");let d=n.safe(n.associationId(e),{before:l,after:"]",...s.current()});return o(),n.stack=c,a(),"full"!==i&&u&&u===d?"shortcut"===i?l=l.slice(0,-1):l+=s.move("]"):l+=s.move(d+"]"),l}e.s({imageReference:()=>t}),t.peek=function(){return"!"}},93474:e=>{"use strict";function t(e,t,n){let r=e.value||"",i="`",a=-1;for(;RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++a<n.unsafe.length;){let e,t=n.unsafe[a],i=n.compilePattern(t);if(t.atBreak)for(;e=i.exec(r);){let t=e.index;10===r.charCodeAt(t)&&13===r.charCodeAt(t-1)&&t--,r=r.slice(0,t)+" "+r.slice(e.index+1)}}return i+r+i}e.s({inlineCode:()=>t}),t.peek=function(){return"`"}},700136:e=>{"use strict";e.s({formatLinkAsAutolink:()=>n});var t=e.i(863653);function n(e,n){let r=(0,t.toString)(e);return!!(!n.options.resourceLink&&e.url&&!e.title&&e.children&&1===e.children.length&&"text"===e.children[0].type&&(r===e.url||"mailto:"+r===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}},657457:e=>{"use strict";e.s({link:()=>r});var t=e.i(89217),n=e.i(700136);function r(e,r,i,a){let o,s,l=(0,t.checkQuote)(i),u='"'===l?"Quote":"Apostrophe",c=i.createTracker(a);if((0,n.formatLinkAsAutolink)(e,i)){let t=i.stack;i.stack=[],o=i.enter("autolink");let n=c.move("<");return n+=c.move(i.containerPhrasing(e,{before:n,after:">",...c.current()})),n+=c.move(">"),o(),i.stack=t,n}o=i.enter("link"),s=i.enter("label");let d=c.move("[");return d+=c.move(i.containerPhrasing(e,{before:d,after:"](",...c.current()})),d+=c.move("]("),s(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(s=i.enter("destinationLiteral"),d+=c.move("<"),d+=c.move(i.safe(e.url,{before:d,after:">",...c.current()})),d+=c.move(">")):(s=i.enter("destinationRaw"),d+=c.move(i.safe(e.url,{before:d,after:e.title?" ":")",...c.current()}))),s(),e.title&&(s=i.enter("title".concat(u)),d+=c.move(" "+l),d+=c.move(i.safe(e.title,{before:d,after:l,...c.current()})),d+=c.move(l),s()),d+=c.move(")"),o(),d}r.peek=function(e,t,r){return(0,n.formatLinkAsAutolink)(e,r)?"<":"["}},233957:e=>{"use strict";function t(e,t,n,r){let i=e.referenceType,a=n.enter("linkReference"),o=n.enter("label"),s=n.createTracker(r),l=s.move("["),u=n.containerPhrasing(e,{before:l,after:"]",...s.current()});l+=s.move(u+"]["),o();let c=n.stack;n.stack=[],o=n.enter("reference");let d=n.safe(n.associationId(e),{before:l,after:"]",...s.current()});return o(),n.stack=c,a(),"full"!==i&&u&&u===d?"shortcut"===i?l=l.slice(0,-1):l+=s.move("]"):l+=s.move(d+"]"),l}e.s({linkReference:()=>t}),t.peek=function(){return"["}},982708:e=>{"use strict";function t(e){let t=e.options.bullet||"*";if("*"!==t&&"+"!==t&&"-"!==t)throw Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}e.s({checkBullet:()=>t})},460014:e=>{"use strict";e.s({checkBulletOther:()=>n});var t=e.i(982708);function n(e){let n=(0,t.checkBullet)(e),r=e.options.bulletOther;if(!r)return"*"===n?"-":"*";if("*"!==r&&"+"!==r&&"-"!==r)throw Error("Cannot serialize items with `"+r+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(r===n)throw Error("Expected `bullet` (`"+n+"`) and `bulletOther` (`"+r+"`) to be different");return r}},506504:e=>{"use strict";function t(e){let t=e.options.bulletOrdered||".";if("."!==t&&")"!==t)throw Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}e.s({checkBulletOrdered:()=>t})},219902:e=>{"use strict";function t(e){let t=e.options.rule||"*";if("*"!==t&&"-"!==t&&"_"!==t)throw Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}e.s({checkRule:()=>t})},502297:e=>{"use strict";e.s({list:()=>a});var t=e.i(982708),n=e.i(460014),r=e.i(506504),i=e.i(219902);function a(e,a,o,s){let l=o.enter("list"),u=o.bulletCurrent,c=e.ordered?(0,r.checkBulletOrdered)(o):(0,t.checkBullet)(o),d=e.ordered?"."===c?")":".":(0,n.checkBulletOther)(o),h=!!a&&!!o.bulletLastUsed&&c===o.bulletLastUsed;if(!e.ordered){let t=e.children?e.children[0]:void 0;if("*"!==c&&"-"!==c||!t||t.children&&t.children[0]||"list"!==o.stack[o.stack.length-1]||"listItem"!==o.stack[o.stack.length-2]||"list"!==o.stack[o.stack.length-3]||"listItem"!==o.stack[o.stack.length-4]||0!==o.indexStack[o.indexStack.length-1]||0!==o.indexStack[o.indexStack.length-2]||0!==o.indexStack[o.indexStack.length-3]||(h=!0),(0,i.checkRule)(o)===c&&t){let t=-1;for(;++t<e.children.length;){let n=e.children[t];if(n&&"listItem"===n.type&&n.children&&n.children[0]&&"thematicBreak"===n.children[0].type){h=!0;break}}}}h&&(c=d),o.bulletCurrent=c;let p=o.containerFlow(e,s);return o.bulletLastUsed=c,o.bulletCurrent=u,l(),p}},753921:e=>{"use strict";function t(e){let t=e.options.listItemIndent||"one";if("tab"!==t&&"one"!==t&&"mixed"!==t)throw Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}e.s({checkListItemIndent:()=>t})},116092:e=>{"use strict";e.s({listItem:()=>r});var t=e.i(982708),n=e.i(753921);function r(e,r,i,a){let o=(0,n.checkListItemIndent)(i),s=i.bulletCurrent||(0,t.checkBullet)(i);r&&"list"===r.type&&r.ordered&&(s=("number"==typeof r.start&&r.start>-1?r.start:1)+(!1===i.options.incrementListMarker?0:r.children.indexOf(e))+s);let l=s.length+1;("tab"===o||"mixed"===o&&(r&&"list"===r.type&&r.spread||e.spread))&&(l=4*Math.ceil(l/4));let u=i.createTracker(a);u.move(s+" ".repeat(l-s.length)),u.shift(l);let c=i.enter("listItem"),d=i.indentLines(i.containerFlow(e,u.current()),function(e,t,n){return t?(n?"":" ".repeat(l))+e:(n?s:s+" ".repeat(l-s.length))+e});return c(),d}},242305:e=>{"use strict";function t(e,t,n,r){let i=n.enter("paragraph"),a=n.enter("phrasing"),o=n.containerPhrasing(e,r);return a(),i(),o}e.s({paragraph:()=>t})},911675:e=>{"use strict";e.s({phrasing:()=>t});let t=(0,e.i(194491).convert)(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"])},258242:e=>{"use strict";e.s({root:()=>n});var t=e.i(911675);function n(e,n,r,i){return(e.children.some(function(e){return(0,t.phrasing)(e)})?r.containerPhrasing:r.containerFlow).call(r,e,i)}},584499:e=>{"use strict";function t(e){let t=e.options.strong||"*";if("*"!==t&&"_"!==t)throw Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}e.s({checkStrong:()=>t})},726487:e=>{"use strict";e.s({strong:()=>i});var t=e.i(584499),n=e.i(796496),r=e.i(309036);function i(e,i,a,o){let s=(0,t.checkStrong)(a),l=a.enter("strong"),u=a.createTracker(o),c=u.move(s+s),d=u.move(a.containerPhrasing(e,{after:s,before:c,...u.current()})),h=d.charCodeAt(0),p=(0,r.encodeInfo)(o.before.charCodeAt(o.before.length-1),h,s);p.inside&&(d=(0,n.encodeCharacterReference)(h)+d.slice(1));let f=d.charCodeAt(d.length-1),m=(0,r.encodeInfo)(o.after.charCodeAt(0),f,s);m.inside&&(d=d.slice(0,-1)+(0,n.encodeCharacterReference)(f));let g=u.move(s+s);return l(),a.attentionEncodeSurroundingInfo={after:m.outside,before:p.outside},c+d+g}i.peek=function(e,t,n){return n.options.strong||"*"}},391063:e=>{"use strict";function t(e,t,n,r){return n.safe(e.value,r)}e.s({text:()=>t})},420554:e=>{"use strict";function t(e){let t=e.options.ruleRepetition||3;if(t<3)throw Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}e.s({checkRuleRepetition:()=>t})},481804:e=>{"use strict";e.s({thematicBreak:()=>r});var t=e.i(420554),n=e.i(219902);function r(e,r,i){let a=((0,n.checkRule)(i)+(i.options.ruleSpaces?" ":"")).repeat((0,t.checkRuleRepetition)(i));return i.options.ruleSpaces?a.slice(0,-1):a}},782402:e=>{"use strict";e.s({handle:()=>w});var t=e.i(168975),n=e.i(929619),r=e.i(595210),i=e.i(437308),a=e.i(884747),o=e.i(610468),s=e.i(261882),l=e.i(863828),u=e.i(621178),c=e.i(93474),d=e.i(657457),h=e.i(233957),p=e.i(502297),f=e.i(116092),m=e.i(242305),g=e.i(258242),y=e.i(726487),b=e.i(391063),x=e.i(481804);let w={blockquote:t.blockquote,break:n.hardBreak,code:r.code,definition:i.definition,emphasis:a.emphasis,hardBreak:n.hardBreak,heading:o.heading,html:s.html,image:l.image,imageReference:u.imageReference,inlineCode:c.inlineCode,link:d.link,linkReference:h.linkReference,list:p.list,listItem:f.listItem,paragraph:m.paragraph,root:g.root,strong:y.strong,text:b.text,thematicBreak:x.thematicBreak}},236646:e=>{"use strict";e.s({defaultHandlers:()=>t.handle});var t=e.i(782402)},847641:e=>{"use strict";e.s({gfmTableFromMarkdown:()=>i,gfmTableToMarkdown:()=>h});var t=e.i(366506),n=e.i(168147),r=e.i(236646);function i(){return{enter:{table:a,tableData:u,tableHeader:u,tableRow:s},exit:{codeText:c,table:o,tableData:l,tableHeader:l,tableRow:l}}}function a(e){let n=e._align;(0,t.ok)(n,"expected `_align` on table"),this.enter({type:"table",align:n.map(function(e){return"none"===e?null:e}),children:[]},e),this.data.inTable=!0}function o(e){this.exit(e),this.data.inTable=void 0}function s(e){this.enter({type:"tableRow",children:[]},e)}function l(e){this.exit(e)}function u(e){this.enter({type:"tableCell",children:[]},e)}function c(e){let n=this.resume();this.data.inTable&&(n=n.replace(/\\([\\|])/g,d));let r=this.stack[this.stack.length-1];(0,t.ok)("inlineCode"===r.type),r.value=n,this.exit(e)}function d(e,t){return"|"===t?t:e}function h(e){let t=e||{},i=t.tableCellPadding,a=t.tablePipeAlign,o=t.stringLength,s=i?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:"\n",inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:function(e,t,n){let i=r.defaultHandlers.inlineCode(e,t,n);return n.stack.includes("tableCell")&&(i=i.replace(/\|/g,"\\$&")),i},table:function(e,t,n,r){return u(function(e,t,n){let r=e.children,i=-1,a=[],o=t.enter("table");for(;++i<r.length;)a[i]=c(r[i],t,n);return o(),a}(e,n,r),e.align)},tableCell:l,tableRow:function(e,t,n,r){let i=u([c(e,n,r)]);return i.slice(0,i.indexOf("\n"))}}};function l(e,t,n,r){let i=n.enter("tableCell"),a=n.enter("phrasing"),o=n.containerPhrasing(e,{...r,before:s,after:s});return a(),i(),o}function u(e,t){return(0,n.markdownTable)(e,{align:t,alignDelimiters:a,padding:i,stringLength:o})}function c(e,t,n){let r=e.children,i=-1,a=[],o=t.enter("tableRow");for(;++i<r.length;)a[i]=l(r[i],e,t,n);return o(),a}}},457394:e=>{"use strict";e.s({gfmTaskListItemFromMarkdown:()=>r,gfmTaskListItemToMarkdown:()=>i});var t=e.i(366506),n=e.i(236646);function r(){return{exit:{taskListCheckValueChecked:a,taskListCheckValueUnchecked:a,paragraph:o}}}function i(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:s}}}function a(e){let n=this.stack[this.stack.length-2];(0,t.ok)("listItem"===n.type),n.checked="taskListCheckValueChecked"===e.type}function o(e){let n=this.stack[this.stack.length-2];if(n&&"listItem"===n.type&&"boolean"==typeof n.checked){let e=this.stack[this.stack.length-1];(0,t.ok)("paragraph"===e.type);let r=e.children[0];if(r&&"text"===r.type){let t,i=n.children,a=-1;for(;++a<i.length;){let e=i[a];if("paragraph"===e.type){t=e;break}}t===e&&(r.value=r.value.slice(1),0===r.value.length?e.children.shift():e.position&&r.position&&"number"==typeof r.position.start.offset&&(r.position.start.column++,r.position.start.offset++,e.position.start=Object.assign({},r.position.start)))}}this.exit(e)}function s(e,t,r,i){let a=e.children[0],o="boolean"==typeof e.checked&&a&&"paragraph"===a.type,s="["+(e.checked?"x":" ")+"] ",l=r.createTracker(i);o&&l.move(s);let u=n.defaultHandlers.listItem(e,t,r,{...i,...l.current()});return o&&(u=u.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,function(e){return e+s})),u}},390689:e=>{"use strict";e.s({gfmFromMarkdown:()=>o,gfmToMarkdown:()=>s});var t=e.i(154319),n=e.i(722461),r=e.i(532199),i=e.i(847641),a=e.i(457394);function o(){return[(0,t.gfmAutolinkLiteralFromMarkdown)(),(0,n.gfmFootnoteFromMarkdown)(),(0,r.gfmStrikethroughFromMarkdown)(),(0,i.gfmTableFromMarkdown)(),(0,a.gfmTaskListItemFromMarkdown)()]}function s(e){return{extensions:[(0,t.gfmAutolinkLiteralToMarkdown)(),(0,n.gfmFootnoteToMarkdown)(e),(0,r.gfmStrikethroughToMarkdown)(),(0,i.gfmTableToMarkdown)(e),(0,a.gfmTaskListItemToMarkdown)()]}}},906112:e=>{"use strict";function t(e,t,n,r){let i,a=e.length,o=0;if(t=t<0?-t>a?0:a+t:t>a?a:t,n=n>0?n:0,r.length<1e4)(i=Array.from(r)).unshift(t,n),e.splice(...i);else for(n&&e.splice(t,n);o<r.length;)(i=r.slice(o,o+1e4)).unshift(t,0),e.splice(...i),o+=1e4,t+=1e4}function n(e,n){return e.length>0?(t(e,e.length,0,n),e):n}e.s({push:()=>n,splice:()=>t})},862665:e=>{"use strict";e.s({combineExtensions:()=>r,combineHtmlExtensions:()=>i});var t=e.i(906112);let n={}.hasOwnProperty;function r(e){let r={},i=-1;for(;++i<e.length;)!function(e,r){let i;for(i in r){let a,o=(n.call(e,i)?e[i]:void 0)||(e[i]={}),s=r[i];if(s)for(a in s){n.call(o,a)||(o[a]=[]);let e=s[a];!function(e,n){let r=-1,i=[];for(;++r<n.length;)("after"===n[r].add?e:i).push(n[r]);(0,t.splice)(e,0,0,i)}(o[a],Array.isArray(e)?e:e?[e]:[])}}}(r,e[i]);return r}function i(e){let t={},r=-1;for(;++r<e.length;)!function(e,t){let r;for(r in t){let i,a=(n.call(e,r)?e[r]:void 0)||(e[r]={}),o=t[r];if(o)for(i in o)a[i]=o[i]}}(t,e[r]);return t}},674925:e=>{"use strict";e.s({gfmAutolinkLiteral:()=>d});var t=e.i(32633);let n={tokenize:function(e,t,n){let r=0;return function t(a){return(87===a||119===a)&&r<3?(r++,e.consume(a),t):46===a&&3===r?(e.consume(a),i):n(a)};function i(e){return null===e?n(e):t(e)}},partial:!0},r={tokenize:function(e,n,r){let i,o,s;return l;function l(n){return 46===n||95===n?e.check(a,c,u)(n):null===n||(0,t.markdownLineEndingOrSpace)(n)||(0,t.unicodeWhitespace)(n)||45!==n&&(0,t.unicodePunctuation)(n)?c(n):(s=!0,e.consume(n),l)}function u(t){return 95===t?i=!0:(o=i,i=void 0),e.consume(t),l}function c(e){return o||i||!s?r(e):n(e)}},partial:!0},i={tokenize:function(e,n){let r=0,i=0;return o;function o(l){return 40===l?(r++,e.consume(l),o):41===l&&i<r?s(l):33===l||34===l||38===l||39===l||41===l||42===l||44===l||46===l||58===l||59===l||60===l||63===l||93===l||95===l||126===l?e.check(a,n,s)(l):null===l||(0,t.markdownLineEndingOrSpace)(l)||(0,t.unicodeWhitespace)(l)?n(l):(e.consume(l),o)}function s(t){return 41===t&&i++,e.consume(t),o}},partial:!0},a={tokenize:function(e,n,r){return i;function i(s){return 33===s||34===s||39===s||41===s||42===s||44===s||46===s||58===s||59===s||63===s||95===s||126===s?(e.consume(s),i):38===s?(e.consume(s),o):93===s?(e.consume(s),a):60===s||null===s||(0,t.markdownLineEndingOrSpace)(s)||(0,t.unicodeWhitespace)(s)?n(s):r(s)}function a(e){return null===e||40===e||91===e||(0,t.markdownLineEndingOrSpace)(e)||(0,t.unicodeWhitespace)(e)?n(e):i(e)}function o(n){return(0,t.asciiAlpha)(n)?function n(a){return 59===a?(e.consume(a),i):(0,t.asciiAlpha)(a)?(e.consume(a),n):r(a)}(n):r(n)}},partial:!0},o={tokenize:function(e,n,r){return function(t){return e.consume(t),i};function i(e){return(0,t.asciiAlphanumeric)(e)?r(e):n(e)}},partial:!0},s={name:"wwwAutolink",tokenize:function(e,t,a){let o=this;return function(t){return 87!==t&&119!==t||!p.call(o,o.previous)||y(o.events)?a(t):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(n,e.attempt(r,e.attempt(i,s),a),a)(t))};function s(n){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(n)}},previous:p},l={name:"protocolAutolink",tokenize:function(e,n,a){let o=this,s="",l=!1;return function(t){return(72===t||104===t)&&f.call(o,o.previous)&&!y(o.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),s+=String.fromCodePoint(t),e.consume(t),u):a(t)};function u(n){if((0,t.asciiAlpha)(n)&&s.length<5)return s+=String.fromCodePoint(n),e.consume(n),u;if(58===n){let t=s.toLowerCase();if("http"===t||"https"===t)return e.consume(n),c}return a(n)}function c(t){return 47===t?(e.consume(t),l)?d:(l=!0,c):a(t)}function d(n){return null===n||(0,t.asciiControl)(n)||(0,t.markdownLineEndingOrSpace)(n)||(0,t.unicodeWhitespace)(n)||(0,t.unicodePunctuation)(n)?a(n):e.attempt(r,e.attempt(i,h),a)(n)}function h(t){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),n(t)}},previous:f},u={name:"emailAutolink",tokenize:function(e,n,r){let i,a,s=this;return function(t){return!g(t)||!m.call(s,s.previous)||y(s.events)?r(t):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),function t(n){return g(n)?(e.consume(n),t):64===n?(e.consume(n),l):r(n)}(t))};function l(n){return 46===n?e.check(o,c,u)(n):45===n||95===n||(0,t.asciiAlphanumeric)(n)?(a=!0,e.consume(n),l):c(n)}function u(t){return e.consume(t),i=!0,l}function c(o){return a&&i&&(0,t.asciiAlpha)(s.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),n(o)):r(o)}},previous:m},c={};function d(){return{text:c}}let h=48;for(;h<123;)c[h]=u,58==++h?h=65:91===h&&(h=97);function p(e){return null===e||40===e||42===e||95===e||91===e||93===e||126===e||(0,t.markdownLineEndingOrSpace)(e)}function f(e){return!(0,t.asciiAlpha)(e)}function m(e){return!(47===e||g(e))}function g(e){return 43===e||45===e||46===e||95===e||(0,t.asciiAlphanumeric)(e)}function y(e){let t=e.length,n=!1;for(;t--;){let r=e[t][1];if(("labelLink"===r.type||"labelImage"===r.type)&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}c[43]=u,c[45]=u,c[46]=u,c[95]=u,c[72]=[u,l],c[104]=[u,l],c[87]=[u,s],c[119]=[u,s]},596708:e=>{"use strict";e.s({encode:()=>n});let t={'"':"quot","&":"amp","<":"lt",">":"gt"};function n(e){return e.replace(/["&<>]/g,function(e){return"&"+t[e]+";"})}},883175:e=>{"use strict";e.s({normalizeUri:()=>i,sanitizeUri:()=>r});var t=e.i(32633),n=e.i(596708);function r(e,t){let r=(0,n.encode)(i(e||""));if(!t)return r;let a=r.indexOf(":"),o=r.indexOf("?"),s=r.indexOf("#"),l=r.indexOf("/");return a<0||l>-1&&a>l||o>-1&&a>o||s>-1&&a>s||t.test(r.slice(0,a))?r:""}function i(e){let n=[],r=-1,i=0,a=0;for(;++r<e.length;){let o=e.charCodeAt(r),s="";if(37===o&&(0,t.asciiAlphanumeric)(e.charCodeAt(r+1))&&(0,t.asciiAlphanumeric)(e.charCodeAt(r+2)))a=2;else if(o<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(o))||(s=String.fromCharCode(o));else if(o>55295&&o<57344){let t=e.charCodeAt(r+1);o<56320&&t>56319&&t<57344?(s=String.fromCharCode(o,t),a=1):s=""}else s=String.fromCharCode(o);s&&(n.push(e.slice(i,r),encodeURIComponent(s)),i=r+a+1,s=""),a&&(r+=a,a=0)}return n.join("")+e.slice(i)}},649994:e=>{"use strict";e.s({gfmAutolinkLiteralHtml:()=>n});var t=e.i(883175);function n(){return{exit:{literalAutolinkEmail:i,literalAutolinkHttp:a,literalAutolinkWww:r}}}function r(e){o.call(this,e,"http://")}function i(e){o.call(this,e,"mailto:")}function a(e){o.call(this,e)}function o(e,n){let r=this.sliceSerialize(e);this.tag('<a href="'+(0,t.sanitizeUri)((n||"")+r)+'">'),this.raw(this.encode(r)),this.tag("</a>")}},945771:e=>{"use strict";e.s({factorySpace:()=>n});var t=e.i(32633);function n(e,n,r,i){let a=i?i-1:1/0,o=0;return function(i){return(0,t.markdownSpace)(i)?(e.enter(r),function i(s){return(0,t.markdownSpace)(s)&&o++<a?(e.consume(s),i):(e.exit(r),n(s))}(i)):n(i)}}},276842:e=>{"use strict";e.s({blankLine:()=>r});var t=e.i(945771),n=e.i(32633);let r={partial:!0,tokenize:function(e,r,i){return function(r){return(0,n.markdownSpace)(r)?(0,t.factorySpace)(e,a,"linePrefix")(r):a(r)};function a(e){return null===e||(0,n.markdownLineEnding)(e)?r(e):i(e)}}}},765852:e=>{"use strict";e.s({gfmFootnote:()=>o});var t=e.i(276842),n=e.i(945771),r=e.i(32633),i=e.i(967148);let a={tokenize:function(e,t,r){let i=this;return(0,n.factorySpace)(e,function(e){let n=i.events[i.events.length-1];return n&&"gfmFootnoteDefinitionIndent"===n[1].type&&4===n[2].sliceSerialize(n[1],!0).length?t(e):r(e)},"gfmFootnoteDefinitionIndent",5)},partial:!0};function o(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:c,continuation:{tokenize:d},exit:h}},text:{91:{name:"gfmFootnoteCall",tokenize:u},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:s,resolveTo:l}}}}function s(e,t,n){let r,a=this,o=a.events.length,s=a.parser.gfmFootnotes||(a.parser.gfmFootnotes=[]);for(;o--;){let e=a.events[o][1];if("labelImage"===e.type){r=e;break}if("gfmFootnoteCall"===e.type||"labelLink"===e.type||"label"===e.type||"image"===e.type||"link"===e.type)break}return function(o){if(!r||!r._balanced)return n(o);let l=(0,i.normalizeIdentifier)(a.sliceSerialize({start:r.end,end:a.now()}));return 94===l.codePointAt(0)&&s.includes(l.slice(1))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(o),e.exit("gfmFootnoteCallLabelMarker"),t(o)):n(o)}}function l(e,t){let n=e.length;for(;n--;)if("labelImage"===e[n][1].type&&"enter"===e[n][0]){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";let r={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;let a={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},e[e.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},a.start),end:Object.assign({},a.end)},s=[e[n+1],e[n+2],["enter",r,t],e[n+3],e[n+4],["enter",i,t],["exit",i,t],["enter",a,t],["enter",o,t],["exit",o,t],["exit",a,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(n,e.length-n+1,...s),e}function u(e,t,n){let a,o=this,s=o.parser.gfmFootnotes||(o.parser.gfmFootnotes=[]),l=0;return function(t){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(t),e.exit("gfmFootnoteCallLabelMarker"),u};function u(t){return 94!==t?n(t):(e.enter("gfmFootnoteCallMarker"),e.consume(t),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",c)}function c(u){if(l>999||93===u&&!a||null===u||91===u||(0,r.markdownLineEndingOrSpace)(u))return n(u);if(93===u){e.exit("chunkString");let r=e.exit("gfmFootnoteCallString");return s.includes((0,i.normalizeIdentifier)(o.sliceSerialize(r)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(u),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(u)}return(0,r.markdownLineEndingOrSpace)(u)||(a=!0),l++,e.consume(u),92===u?d:c}function d(t){return 91===t||92===t||93===t?(e.consume(t),l++,c):c(t)}}function c(e,t,a){let o,s,l=this,u=l.parser.gfmFootnotes||(l.parser.gfmFootnotes=[]),c=0;return function(t){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(t),e.exit("gfmFootnoteDefinitionLabelMarker"),d};function d(t){return 94===t?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(t),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",h):a(t)}function h(t){if(c>999||93===t&&!s||null===t||91===t||(0,r.markdownLineEndingOrSpace)(t))return a(t);if(93===t){e.exit("chunkString");let n=e.exit("gfmFootnoteDefinitionLabelString");return o=(0,i.normalizeIdentifier)(l.sliceSerialize(n)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(t),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),f}return(0,r.markdownLineEndingOrSpace)(t)||(s=!0),c++,e.consume(t),92===t?p:h}function p(t){return 91===t||92===t||93===t?(e.consume(t),c++,h):h(t)}function f(t){return 58===t?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),u.includes(o)||u.push(o),(0,n.factorySpace)(e,m,"gfmFootnoteDefinitionWhitespace")):a(t)}function m(e){return t(e)}}function d(e,n,r){return e.check(t.blankLine,n,e.attempt(a,n,r))}function h(e){e.exit("gfmFootnoteDefinition")}},905803:e=>{"use strict";e.s({gfmFootnoteHtml:()=>o});var t=e.i(967148),n=e.i(883175);let r={}.hasOwnProperty,i={};function a(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function o(e){let o=e||i,s=o.label||"Footnotes",l=o.labelTagName||"h2",u=null===o.labelAttributes||void 0===o.labelAttributes?'class="sr-only"':o.labelAttributes,c=o.backLabel||a,d=null===o.clobberPrefix||void 0===o.clobberPrefix?"user-content-":o.clobberPrefix;return{enter:{gfmFootnoteDefinition(){this.getData("tightStack").push(!1)},gfmFootnoteDefinitionLabelString(){this.buffer()},gfmFootnoteCallString(){this.buffer()}},exit:{gfmFootnoteDefinition(){let e=this.getData("gfmFootnoteDefinitions"),t=this.getData("gfmFootnoteDefinitionStack"),n=this.getData("tightStack"),i=t.pop(),a=this.resume();e||this.setData("gfmFootnoteDefinitions",e={}),r.call(e,i)||(e[i]=a),n.pop(),this.setData("slurpOneLineEnding",!0),this.setData("lastWasTag")},gfmFootnoteDefinitionLabelString(e){let n=this.getData("gfmFootnoteDefinitionStack");n||this.setData("gfmFootnoteDefinitionStack",n=[]),n.push((0,t.normalizeIdentifier)(this.sliceSerialize(e))),this.resume(),this.buffer()},gfmFootnoteCallString(e){let r,i=this.getData("gfmFootnoteCallOrder"),a=this.getData("gfmFootnoteCallCounts"),o=(0,t.normalizeIdentifier)(this.sliceSerialize(e));this.resume(),i||this.setData("gfmFootnoteCallOrder",i=[]),a||this.setData("gfmFootnoteCallCounts",a={});let s=i.indexOf(o),l=(0,n.sanitizeUri)(o.toLowerCase());-1===s?(i.push(o),a[o]=1,r=i.length):(a[o]++,r=s+1);let u=a[o];this.tag('<sup><a href="#'+d+"fn-"+l+'" id="'+d+"fnref-"+l+(u>1?"-"+u:"")+'" data-footnote-ref="" aria-describedby="footnote-label">'+String(r)+"</a></sup>")},null(){let e=this.getData("gfmFootnoteCallOrder")||[],t=this.getData("gfmFootnoteCallCounts")||{},r=this.getData("gfmFootnoteDefinitions")||{},i=-1;for(e.length>0&&(this.lineEndingIfNeeded(),this.tag('<section data-footnotes="" class="footnotes"><'+l+' id="footnote-label"'+(u?" "+u:"")+">"),this.raw(this.encode(s)),this.tag("</"+l+">"),this.lineEndingIfNeeded(),this.tag("<ol>"));++i<e.length;){let a=e[i],o=(0,n.sanitizeUri)(a.toLowerCase()),s=0,l=[];for(;++s<=t[a];)l.push('<a href="#'+d+"fnref-"+o+(s>1?"-"+s:"")+'" data-footnote-backref="" aria-label="'+this.encode("string"==typeof c?c:c(i,s))+'" class="data-footnote-backref">'+(s>1?"<sup>"+s+"</sup>":"")+"</a>");let u=l.join(" "),h=!1;this.lineEndingIfNeeded(),this.tag('<li id="'+d+"fn-"+o+'">'),this.lineEndingIfNeeded(),this.tag(r[a].replace(/<\/p>(?:\r?\n|\r)?$/,function(e){return h=!0," "+u+e})),h||(this.lineEndingIfNeeded(),this.tag(u)),this.lineEndingIfNeeded(),this.tag("</li>")}e.length>0&&(this.lineEndingIfNeeded(),this.tag("</ol>"),this.lineEndingIfNeeded(),this.tag("</section>"))}}}}},192784:e=>{"use strict";function t(e,t,n){let r=[],i=-1;for(;++i<e.length;){let a=e[i].resolveAll;a&&!r.includes(a)&&(t=a(t,n),r.push(a))}return t}e.s({resolveAll:()=>t})},248456:e=>{"use strict";e.s({gfmStrikethrough:()=>i});var t=e.i(906112),n=e.i(909300),r=e.i(192784);function i(e){let i=(e||{}).singleTilde,a={name:"strikethrough",tokenize:function(e,t,r){let a=this.previous,o=this.events,s=0;return function(l){return 126===a&&"characterEscape"!==o[o.length-1][1].type?r(l):(e.enter("strikethroughSequenceTemporary"),function o(l){let u=(0,n.classifyCharacter)(a);if(126===l)return s>1?r(l):(e.consume(l),s++,o);if(s<2&&!i)return r(l);let c=e.exit("strikethroughSequenceTemporary"),d=(0,n.classifyCharacter)(l);return c._open=!d||2===d&&!!u,c._close=!u||2===u&&!!d,t(l)}(l))}},resolveAll:function(e,n){let i=-1;for(;++i<e.length;)if("enter"===e[i][0]&&"strikethroughSequenceTemporary"===e[i][1].type&&e[i][1]._close){let a=i;for(;a--;)if("exit"===e[a][0]&&"strikethroughSequenceTemporary"===e[a][1].type&&e[a][1]._open&&e[i][1].end.offset-e[i][1].start.offset==e[a][1].end.offset-e[a][1].start.offset){e[i][1].type="strikethroughSequence",e[a][1].type="strikethroughSequence";let o={type:"strikethrough",start:Object.assign({},e[a][1].start),end:Object.assign({},e[i][1].end)},s={type:"strikethroughText",start:Object.assign({},e[a][1].end),end:Object.assign({},e[i][1].start)},l=[["enter",o,n],["enter",e[a][1],n],["exit",e[a][1],n],["enter",s,n]],u=n.parser.constructs.insideSpan.null;u&&(0,t.splice)(l,l.length,0,(0,r.resolveAll)(u,e.slice(a+1,i),n)),(0,t.splice)(l,l.length,0,[["exit",s,n],["enter",e[i][1],n],["exit",e[i][1],n],["exit",o,n]]),(0,t.splice)(e,a-1,i-a+3,l),i=a+l.length-2;break}}for(i=-1;++i<e.length;)"strikethroughSequenceTemporary"===e[i][1].type&&(e[i][1].type="data");return e}};return null==i&&(i=!0),{text:{126:a},insideSpan:{null:[a]},attentionMarkers:{null:[126]}}}},303736:e=>{"use strict";function t(){return{enter:{strikethrough(){this.tag("<del>")}},exit:{strikethrough(){this.tag("</del>")}}}}e.s({gfmStrikethroughHtml:()=>t})},607131:e=>{"use strict";e.s({EditMap:()=>t});class t{add(e,t,n){!function(e,t,n,r){let i=0;if(0!==n||0!==r.length){for(;i<e.map.length;){if(e.map[i][0]===t){e.map[i][1]+=n,e.map[i][2].push(...r);return}i+=1}e.map.push([t,n,r])}}(this,e,t,n)}consume(e){if(this.map.sort(function(e,t){return e[0]-t[0]}),0===this.map.length)return;let t=this.map.length,n=[];for(;t>0;)t-=1,n.push(e.slice(this.map[t][0]+this.map[t][1]),this.map[t][2]),e.length=this.map[t][0];n.push(e.slice()),e.length=0;let r=n.pop();for(;r;){for(let t of r)e.push(t);r=n.pop()}this.map.length=0}constructor(){this.map=[]}}},801261:e=>{"use strict";function t(e,t){let n=!1,r=[];for(;t<e.length;){let i=e[t];if(n){if("enter"===i[0])"tableContent"===i[1].type&&r.push("tableDelimiterMarker"===e[t+1][1].type?"left":"none");else if("tableContent"===i[1].type){if("tableDelimiterMarker"===e[t-1][1].type){let e=r.length-1;r[e]="left"===r[e]?"center":"right"}}else if("tableDelimiterRow"===i[1].type)break}else"enter"===i[0]&&"tableDelimiterRow"===i[1].type&&(n=!0);t+=1}return r}e.s({gfmTableAlign:()=>t})},208566:e=>{"use strict";e.s({gfmTable:()=>a});var t=e.i(945771),n=e.i(32633),r=e.i(607131),i=e.i(801261);function a(){return{flow:{null:{name:"table",tokenize:o,resolveAll:s}}}}function o(e,r,i){let a,o=this,s=0,l=0;return function(e){let t=o.events.length-1;for(;t>-1;){let e=o.events[t][1].type;if("lineEnding"===e||"linePrefix"===e)t--;else break}let n=t>-1?o.events[t][1].type:null,r="tableHead"===n||"tableRow"===n?w:u;return r===w&&o.parser.lazy[o.now().line]?i(e):r(e)};function u(t){var n;return e.enter("tableHead"),e.enter("tableRow"),124===(n=t)||(a=!0,l+=1),c(n)}function c(r){return null===r?i(r):(0,n.markdownLineEnding)(r)?l>1?(l=0,o.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),p):i(r):(0,n.markdownSpace)(r)?(0,t.factorySpace)(e,c,"whitespace")(r):(l+=1,a&&(a=!1,s+=1),124===r)?(e.enter("tableCellDivider"),e.consume(r),e.exit("tableCellDivider"),a=!0,c):(e.enter("data"),d(r))}function d(t){return null===t||124===t||(0,n.markdownLineEndingOrSpace)(t)?(e.exit("data"),c(t)):(e.consume(t),92===t?h:d)}function h(t){return 92===t||124===t?(e.consume(t),d):d(t)}function p(r){return(o.interrupt=!1,o.parser.lazy[o.now().line])?i(r):(e.enter("tableDelimiterRow"),a=!1,(0,n.markdownSpace)(r))?(0,t.factorySpace)(e,f,"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(r):f(r)}function f(t){return 45===t||58===t?g(t):124===t?(a=!0,e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),m):i(t)}function m(r){return(0,n.markdownSpace)(r)?(0,t.factorySpace)(e,g,"whitespace")(r):g(r)}function g(t){return 58===t?(l+=1,a=!0,e.enter("tableDelimiterMarker"),e.consume(t),e.exit("tableDelimiterMarker"),y):45===t?(l+=1,y(t)):null===t||(0,n.markdownLineEnding)(t)?x(t):i(t)}function y(t){return 45===t?(e.enter("tableDelimiterFiller"),function t(n){return 45===n?(e.consume(n),t):58===n?(a=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(n),e.exit("tableDelimiterMarker"),b):(e.exit("tableDelimiterFiller"),b(n))}(t)):i(t)}function b(r){return(0,n.markdownSpace)(r)?(0,t.factorySpace)(e,x,"whitespace")(r):x(r)}function x(t){if(124===t)return f(t);if(null===t||(0,n.markdownLineEnding)(t))return a&&s===l?(e.exit("tableDelimiterRow"),e.exit("tableHead"),r(t)):i(t);return i(t)}function w(t){return e.enter("tableRow"),k(t)}function k(i){return 124===i?(e.enter("tableCellDivider"),e.consume(i),e.exit("tableCellDivider"),k):null===i||(0,n.markdownLineEnding)(i)?(e.exit("tableRow"),r(i)):(0,n.markdownSpace)(i)?(0,t.factorySpace)(e,k,"whitespace")(i):(e.enter("data"),S(i))}function S(t){return null===t||124===t||(0,n.markdownLineEndingOrSpace)(t)?(e.exit("data"),k(t)):(e.consume(t),92===t?_:S)}function _(t){return 92===t||124===t?(e.consume(t),S):S(t)}}function s(e,t){let n,a,o,s=-1,c=!0,d=0,h=[0,0,0,0],p=[0,0,0,0],f=!1,m=0,g=new r.EditMap;for(;++s<e.length;){let r=e[s],i=r[1];"enter"===r[0]?"tableHead"===i.type?(f=!1,0!==m&&(u(g,t,m,n,a),a=void 0,m=0),n={type:"table",start:Object.assign({},i.start),end:Object.assign({},i.end)},g.add(s,0,[["enter",n,t]])):"tableRow"===i.type||"tableDelimiterRow"===i.type?(c=!0,o=void 0,h=[0,0,0,0],p=[0,s+1,0,0],f&&(f=!1,a={type:"tableBody",start:Object.assign({},i.start),end:Object.assign({},i.end)},g.add(s,0,[["enter",a,t]])),d="tableDelimiterRow"===i.type?2:a?3:1):d&&("data"===i.type||"tableDelimiterMarker"===i.type||"tableDelimiterFiller"===i.type)?(c=!1,0===p[2]&&(0!==h[1]&&(p[0]=p[1],o=l(g,t,h,d,void 0,o),h=[0,0,0,0]),p[2]=s)):"tableCellDivider"===i.type&&(c?c=!1:(0!==h[1]&&(p[0]=p[1],o=l(g,t,h,d,void 0,o)),p=[(h=p)[1],s,0,0])):"tableHead"===i.type?(f=!0,m=s):"tableRow"===i.type||"tableDelimiterRow"===i.type?(m=s,0!==h[1]?(p[0]=p[1],o=l(g,t,h,d,s,o)):0!==p[1]&&(o=l(g,t,p,d,s,o)),d=0):d&&("data"===i.type||"tableDelimiterMarker"===i.type||"tableDelimiterFiller"===i.type)&&(p[3]=s)}for(0!==m&&u(g,t,m,n,a),g.consume(t.events),s=-1;++s<t.events.length;){let e=t.events[s];"enter"===e[0]&&"table"===e[1].type&&(e[1]._align=(0,i.gfmTableAlign)(t.events,s))}return e}function l(e,t,n,r,i,a){0!==n[0]&&(a.end=Object.assign({},c(t.events,n[0])),e.add(n[0],0,[["exit",a,t]]));let o=c(t.events,n[1]);if(a={type:1===r?"tableHeader":2===r?"tableDelimiter":"tableData",start:Object.assign({},o),end:Object.assign({},o)},e.add(n[1],0,[["enter",a,t]]),0!==n[2]){let i=c(t.events,n[2]),a=c(t.events,n[3]),o={type:"tableContent",start:Object.assign({},i),end:Object.assign({},a)};if(e.add(n[2],0,[["enter",o,t]]),2!==r){let r=t.events[n[2]],i=t.events[n[3]];if(r[1].end=Object.assign({},i[1].end),r[1].type="chunkText",r[1].contentType="text",n[3]>n[2]+1){let t=n[2]+1,r=n[3]-n[2]-1;e.add(t,r,[])}}e.add(n[3]+1,0,[["exit",o,t]])}return void 0!==i&&(a.end=Object.assign({},c(t.events,i)),e.add(i,0,[["exit",a,t]]),a=void 0),a}function u(e,t,n,r,i){let a=[],o=c(t.events,n);i&&(i.end=Object.assign({},o),a.push(["exit",i,t])),r.end=Object.assign({},o),a.push(["exit",r,t]),e.add(n+1,0,a)}function c(e,t){let n=e[t],r="enter"===n[0]?"start":"end";return n[1][r]}},649859:e=>{"use strict";e.s({gfmTableHtml:()=>n});let t={none:"",left:' align="left"',right:' align="right"',center:' align="center"'};function n(){return{enter:{table(e){let t=e._align;this.lineEndingIfNeeded(),this.tag("<table>"),this.setData("tableAlign",t)},tableBody(){this.tag("<tbody>")},tableData(){let e=t[this.getData("tableAlign")[this.getData("tableColumn")]];void 0===e?this.buffer():(this.lineEndingIfNeeded(),this.tag("<td"+e+">"))},tableHead(){this.lineEndingIfNeeded(),this.tag("<thead>")},tableHeader(){let e=t[this.getData("tableAlign")[this.getData("tableColumn")]];this.lineEndingIfNeeded(),this.tag("<th"+e+">")},tableRow(){this.setData("tableColumn",0),this.lineEndingIfNeeded(),this.tag("<tr>")}},exit:{codeTextData(e){let t=this.sliceSerialize(e);this.getData("tableAlign")&&(t=t.replace(/\\([\\|])/g,r)),this.raw(this.encode(t))},table(){this.setData("tableAlign"),this.setData("slurpAllLineEndings"),this.lineEndingIfNeeded(),this.tag("</table>")},tableBody(){this.lineEndingIfNeeded(),this.tag("</tbody>")},tableData(){let e=this.getData("tableAlign"),t=this.getData("tableColumn");t in e?(this.tag("</td>"),this.setData("tableColumn",t+1)):this.resume()},tableHead(){this.lineEndingIfNeeded(),this.tag("</thead>")},tableHeader(){let e=this.getData("tableColumn");this.tag("</th>"),this.setData("tableColumn",e+1)},tableRow(){let e=this.getData("tableAlign"),n=this.getData("tableColumn");for(;n<e.length;)this.lineEndingIfNeeded(),this.tag("<td"+t[e[n]]+"></td>"),n++;this.setData("tableColumn",n),this.lineEndingIfNeeded(),this.tag("</tr>")}}}}function r(e,t){return"|"===t?t:e}},620733:e=>{"use strict";e.s({gfmTagfilterHtml:()=>r});let t=/<(\/?)(iframe|noembed|noframes|plaintext|script|style|title|textarea|xmp)(?=[\t\n\f\r />])/gi,n=RegExp("^"+t.source,"i");function r(){return{exit:{htmlFlowData(e){i.call(this,e,t)},htmlTextData(e){i.call(this,e,n)}}}}function i(e,t){let n=this.sliceSerialize(e);this.options.allowDangerousHtml&&(n=n.replace(t,"&lt;$1$2")),this.raw(this.encode(n))}},401652:e=>{"use strict";e.s({gfmTaskListItem:()=>i});var t=e.i(945771),n=e.i(32633);let r={name:"tasklistCheck",tokenize:function(e,t,r){let i=this;return function(t){return null===i.previous&&i._gfmTasklistFirstContentOfListItem?(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(t),e.exit("taskListCheckMarker"),o):r(t)};function o(t){return(0,n.markdownLineEndingOrSpace)(t)?(e.enter("taskListCheckValueUnchecked"),e.consume(t),e.exit("taskListCheckValueUnchecked"),s):88===t||120===t?(e.enter("taskListCheckValueChecked"),e.consume(t),e.exit("taskListCheckValueChecked"),s):r(t)}function s(t){return 93===t?(e.enter("taskListCheckMarker"),e.consume(t),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),l):r(t)}function l(i){return(0,n.markdownLineEnding)(i)?t(i):(0,n.markdownSpace)(i)?e.check({tokenize:a},t,r)(i):r(i)}}};function i(){return{text:{91:r}}}function a(e,n,r){return(0,t.factorySpace)(e,function(e){return null===e?r(e):n(e)},"whitespace")}},908608:e=>{"use strict";function t(){return{enter:{taskListCheck(){this.tag('<input type="checkbox" disabled="" ')}},exit:{taskListCheck(){this.tag("/>")},taskListCheckValueChecked(){this.tag('checked="" ')}}}}e.s({gfmTaskListItemHtml:()=>t})},425905:e=>{"use strict";e.s({gfm:()=>s});var t=e.i(862665),n=e.i(674925);e.i(649994);var r=e.i(765852);e.i(905803);var i=e.i(248456);e.i(303736);var a=e.i(208566);e.i(649859),e.i(620733);var o=e.i(401652);function s(e){return(0,t.combineExtensions)([(0,n.gfmAutolinkLiteral)(),(0,r.gfmFootnote)(),(0,i.gfmStrikethrough)(e),(0,a.gfmTable)(),(0,o.gfmTaskListItem)()])}e.i(908608)},852878:e=>{"use strict";e.s({default:()=>i});var t=e.i(390689),n=e.i(425905);let r={};function i(e){let i=e||r,a=this.data(),o=a.micromarkExtensions||(a.micromarkExtensions=[]),s=a.fromMarkdownExtensions||(a.fromMarkdownExtensions=[]),l=a.toMarkdownExtensions||(a.toMarkdownExtensions=[]);o.push((0,n.gfm)(i)),s.push((0,t.gfmFromMarkdown)()),l.push((0,t.gfmToMarkdown)(i))}},468245:e=>{"use strict";e.s({mathFromMarkdown:()=>r,mathToMarkdown:()=>i});var t=e.i(366506),n=e.i(733442);function r(){return{enter:{mathFlow:function(e){this.enter({type:"math",meta:null,value:"",data:{hName:"pre",hChildren:[{type:"element",tagName:"code",properties:{className:["language-math","math-display"]},children:[]}]}},e)},mathFlowFenceMeta:function(){this.buffer()},mathText:function(e){this.enter({type:"inlineMath",value:"",data:{hName:"code",hProperties:{className:["language-math","math-inline"]},hChildren:[]}},e),this.buffer()}},exit:{mathFlow:function(e){let n=this.resume().replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),r=this.stack[this.stack.length-1];(0,t.ok)("math"===r.type),this.exit(e),r.value=n;let i=r.data.hChildren[0];(0,t.ok)("element"===i.type),(0,t.ok)("code"===i.tagName),i.children.push({type:"text",value:n}),this.data.mathFlowInside=void 0},mathFlowFence:function(){this.data.mathFlowInside||(this.buffer(),this.data.mathFlowInside=!0)},mathFlowFenceMeta:function(){let e=this.resume(),n=this.stack[this.stack.length-1];(0,t.ok)("math"===n.type),n.meta=e},mathFlowValue:e,mathText:function(e){let n=this.resume(),r=this.stack[this.stack.length-1];(0,t.ok)("inlineMath"===r.type),this.exit(e),r.value=n,r.data.hChildren.push({type:"text",value:n})},mathTextData:e}};function e(e){this.config.enter.data.call(this,e),this.config.exit.data.call(this,e)}}function i(e){let t=(e||{}).singleDollarTextMath;return null==t&&(t=!0),r.peek=function(){return"$"},{unsafe:[{character:"\r",inConstruct:"mathFlowMeta"},{character:"\n",inConstruct:"mathFlowMeta"},{character:"$",after:t?void 0:"\\$",inConstruct:"phrasing"},{character:"$",inConstruct:"mathFlowMeta"},{atBreak:!0,character:"$",after:"\\$"}],handlers:{math:function(e,t,r,i){let a=e.value||"",o=r.createTracker(i),s="$".repeat(Math.max((0,n.longestStreak)(a,"$")+1,2)),l=r.enter("mathFlow"),u=o.move(s);if(e.meta){let t=r.enter("mathFlowMeta");u+=o.move(r.safe(e.meta,{after:"\n",before:u,encode:["$"],...o.current()})),t()}return u+=o.move("\n"),a&&(u+=o.move(a+"\n")),u+=o.move(s),l(),u},inlineMath:r}};function r(e,n,r){let i=e.value||"",a=1;for(!t&&a++;RegExp("(^|[^$])"+"\\$".repeat(a)+"([^$]|$)").test(i);)a++;let o="$".repeat(a);/[^ \r\n]/.test(i)&&(/^[ \r\n]/.test(i)&&/[ \r\n]$/.test(i)||/^\$|\$$/.test(i))&&(i=" "+i+" ");let s=-1;for(;++s<r.unsafe.length;){let e,t=r.unsafe[s];if(!t.atBreak)continue;let n=r.compilePattern(t);for(;e=n.exec(i);){let t=e.index;10===i.codePointAt(t)&&13===i.codePointAt(t-1)&&t--,i=i.slice(0,t)+" "+i.slice(e.index+1)}}return o+i+o}}},723374:e=>{"use strict";e.s({mathFlow:()=>r});var t=e.i(945771),n=e.i(32633);let r={tokenize:function(e,r,a){let o=this,s=o.events[o.events.length-1],l=s&&"linePrefix"===s[1].type?s[2].sliceSerialize(s[1],!0).length:0,u=0;return function(n){return e.enter("mathFlow"),e.enter("mathFlowFence"),e.enter("mathFlowFenceSequence"),function n(r){return 36===r?(e.consume(r),u++,n):u<2?a(r):(e.exit("mathFlowFenceSequence"),(0,t.factorySpace)(e,c,"whitespace")(r))}(n)};function c(t){return null===t||(0,n.markdownLineEnding)(t)?d(t):(e.enter("mathFlowFenceMeta"),e.enter("chunkString",{contentType:"string"}),function t(r){return null===r||(0,n.markdownLineEnding)(r)?(e.exit("chunkString"),e.exit("mathFlowFenceMeta"),d(r)):36===r?a(r):(e.consume(r),t)}(t))}function d(t){return(e.exit("mathFlowFence"),o.interrupt)?r(t):e.attempt(i,h,m)(t)}function h(t){return e.attempt({tokenize:g,partial:!0},m,p)(t)}function p(n){return(l?(0,t.factorySpace)(e,f,"linePrefix",l+1):f)(n)}function f(t){return null===t?m(t):(0,n.markdownLineEnding)(t)?e.attempt(i,h,m)(t):(e.enter("mathFlowValue"),function t(r){return null===r||(0,n.markdownLineEnding)(r)?(e.exit("mathFlowValue"),f(r)):(e.consume(r),t)}(t))}function m(t){return e.exit("mathFlow"),r(t)}function g(e,r,i){let a=0;return(0,t.factorySpace)(e,function(n){return e.enter("mathFlowFence"),e.enter("mathFlowFenceSequence"),function n(r){return 36===r?(a++,e.consume(r),n):a<u?i(r):(e.exit("mathFlowFenceSequence"),(0,t.factorySpace)(e,s,"whitespace")(r))}(n)},"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4);function s(t){return null===t||(0,n.markdownLineEnding)(t)?(e.exit("mathFlowFence"),r(t)):i(t)}}},concrete:!0,name:"mathFlow"},i={tokenize:function(e,t,n){let r=this;return function(n){return null===n?t(n):(e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),i)};function i(e){return r.parser.lazy[r.now().line]?n(e):t(e)}},partial:!0}},182149:e=>{"use strict";e.s({mathText:()=>n});var t=e.i(32633);function n(e){let n=(e||{}).singleDollarTextMath;return null==n&&(n=!0),{tokenize:function(e,r,i){let a,o,s=0;return function(t){return e.enter("mathText"),e.enter("mathTextSequence"),function t(r){return 36===r?(e.consume(r),s++,t):s<2&&!n?i(r):(e.exit("mathTextSequence"),l(r))}(t)};function l(n){return null===n?i(n):36===n?(o=e.enter("mathTextSequence"),a=0,function t(n){return 36===n?(e.consume(n),a++,t):a===s?(e.exit("mathTextSequence"),e.exit("mathText"),r(n)):(o.type="mathTextData",u(n))}(n)):32===n?(e.enter("space"),e.consume(n),e.exit("space"),l):(0,t.markdownLineEnding)(n)?(e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),l):(e.enter("mathTextData"),u(n))}function u(n){return null===n||32===n||36===n||(0,t.markdownLineEnding)(n)?(e.exit("mathTextData"),l(n)):(e.consume(n),u)}},resolve:r,previous:i,name:"mathText"}}function r(e){let t,n,r=e.length-4,i=3;if(("lineEnding"===e[3][1].type||"space"===e[i][1].type)&&("lineEnding"===e[r][1].type||"space"===e[r][1].type)){for(t=i;++t<r;)if("mathTextData"===e[t][1].type){e[r][1].type="mathTextPadding",e[i][1].type="mathTextPadding",i+=2,r-=2;break}}for(t=i-1,r++;++t<=r;)void 0===n?t!==r&&"lineEnding"!==e[t][1].type&&(n=t):(t===r||"lineEnding"===e[t][1].type)&&(e[n][1].type="mathTextData",t!==n+2&&(e[n][1].end=e[t-1][1].end,e.splice(n+2,t-n-2),r-=t-n-2,t=n+2),n=void 0);return e}function i(e){return 36!==e||"characterEscape"===this.events[this.events.length-1][1].type}},8527:e=>{"use strict";e.s({math:()=>r});var t=e.i(723374),n=e.i(182149);function r(e){return{flow:{36:t.mathFlow},text:{36:(0,n.mathText)(e)}}}},475096:e=>{"use strict";e.s({default:()=>i});var t=e.i(468245),n=e.i(8527);let r={};function i(e){let i=e||r,a=this.data(),o=a.micromarkExtensions||(a.micromarkExtensions=[]),s=a.fromMarkdownExtensions||(a.fromMarkdownExtensions=[]),l=a.toMarkdownExtensions||(a.toMarkdownExtensions=[]);o.push((0,n.math)(i)),s.push((0,t.mathFromMarkdown)()),l.push((0,t.mathToMarkdown)(i))}},562851:e=>{"use strict";e.s({name:()=>i}),RegExp("[$_\\p{ID_Start}]","u"),RegExp("[$_\\u{200C}\\u{200D}\\p{ID_Continue}]","u"),RegExp("[-$_\\u{200C}\\u{200D}\\p{ID_Continue}]","u");let t=RegExp("^[$_\\p{ID_Start}][$_\\u{200C}\\u{200D}\\p{ID_Continue}]*$","u"),n=RegExp("^[$_\\p{ID_Start}][-$_\\u{200C}\\u{200D}\\p{ID_Continue}]*$","u"),r={};function i(e,i){return((i||r).jsx?n:t).test(e)}},560892:e=>{"use strict";e.s({hastToReact:()=>t});let t={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"}},662449:e=>{var{m:t,e:n}=e,r=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,i=/\n/g,a=/^\s*/,o=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,s=/^:\s*/,l=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,u=/^[;\s]*/,c=/^\s+|\s+$/g;function d(e){return e?e.replace(c,""):""}t.exports=function(e,t){if("string"!=typeof e)throw TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,c=1;function h(e){var t=e.match(i);t&&(n+=t.length);var r=e.lastIndexOf("\n");c=~r?e.length-r:c+e.length}function p(){var e={line:n,column:c};return function(t){return t.position=new f(e),y(a),t}}function f(e){this.start=e,this.end={line:n,column:c},this.source=t.source}f.prototype.content=e;var m=[];function g(r){var i=Error(t.source+":"+n+":"+c+": "+r);if(i.reason=r,i.filename=t.source,i.line=n,i.column=c,i.source=e,t.silent)m.push(i);else throw i}function y(t){var n=t.exec(e);if(n){var r=n[0];return h(r),e=e.slice(r.length),n}}function b(e){var t;for(e=e||[];t=x();)!1!==t&&e.push(t);return e}function x(){var t=p();if("/"==e.charAt(0)&&"*"==e.charAt(1)){for(var n=2;""!=e.charAt(n)&&("*"!=e.charAt(n)||"/"!=e.charAt(n+1));)++n;if(n+=2,""===e.charAt(n-1))return g("End of comment missing");var r=e.slice(2,n-2);return c+=2,h(r),e=e.slice(n),c+=2,t({type:"comment",comment:r})}}y(a);var w,k=[];for(b(k);w=function(){var e=p(),t=y(o);if(t){if(x(),!y(s))return g("property missing ':'");var n=y(l),i=e({type:"declaration",property:d(t[0].replace(r,"")),value:n?d(n[0].replace(r,"")):""});return y(u),i}}();)!1!==w&&(k.push(w),b(k));return k}},565209:e=>{"use strict";var{m:t,e:n}=e,r=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){var n=null;if(!e||"string"!=typeof e)return n;var r=(0,i.default)(e),a="function"==typeof t;return r.forEach(function(e){if("declaration"===e.type){var r=e.property,i=e.value;a?t(r,i,e):i&&((n=n||{})[r]=i)}}),n};var i=r(e.r(662449))},974169:e=>{"use strict";var{m:t,e:n}=e;Object.defineProperty(n,"__esModule",{value:!0}),n.camelCase=void 0;var r=/^--[a-zA-Z0-9_-]+$/,i=/-([a-z])/g,a=/^[^-]+$/,o=/^-(webkit|moz|ms|o|khtml)-/,s=/^-(ms)-/,l=function(e,t){return t.toUpperCase()},u=function(e,t){return"".concat(t,"-")};n.camelCase=function(e,t){var n;return(void 0===t&&(t={}),!(n=e)||a.test(n)||r.test(n))?e:(e=e.toLowerCase(),(e=t.reactCompat?e.replace(s,u):e.replace(o,u)).replace(i,l))}},754157:e=>{"use strict";var{m:t,e:n}=e,r=(e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}})(e.r(565209)),i=e.r(974169);function a(e,t){var n={};return e&&"string"==typeof e&&(0,r.default)(e,function(e,r){e&&r&&(n[(0,i.camelCase)(e,t)]=r)}),n}a.default=a,t.exports=a},107723:e=>{"use strict";e.s({pointEnd:()=>t,pointStart:()=>n,position:()=>i});let t=r("end"),n=r("start");function r(e){return function(t){let n=t&&t.position&&t.position[e]||{};if("number"==typeof n.line&&n.line>0&&"number"==typeof n.column&&n.column>0)return{line:n.line,column:n.column,offset:"number"==typeof n.offset&&n.offset>-1?n.offset:void 0}}}function i(e){let r=n(e),i=t(e);if(r&&i)return{start:r,end:i}}},772225:e=>{"use strict";function t(e){return e&&"object"==typeof e?"position"in e||"type"in e?r(e.position):"start"in e||"end"in e?r(e):"line"in e||"column"in e?n(e):"":""}function n(e){return i(e&&e.line)+":"+i(e&&e.column)}function r(e){return n(e&&e.start)+"-"+n(e&&e.end)}function i(e){return e&&"number"==typeof e?e:1}e.s({stringifyPosition:()=>t})},425541:e=>{"use strict";e.s({VFileMessage:()=>n});var t=e.i(772225);class n extends Error{constructor(e,n,r){super(),"string"==typeof n&&(r=n,n=void 0);let i="",a={},o=!1;if(n&&(a="line"in n&&"column"in n||"start"in n&&"end"in n?{place:n}:"type"in n?{ancestors:[n],place:n.position}:{...n}),"string"==typeof e?i=e:!a.cause&&e&&(o=!0,i=e.message,a.cause=e),!a.ruleId&&!a.source&&"string"==typeof r){let e=r.indexOf(":");-1===e?a.ruleId=r:(a.source=r.slice(0,e),a.ruleId=r.slice(e+1))}if(!a.place&&a.ancestors&&a.ancestors){let e=a.ancestors[a.ancestors.length-1];e&&(a.place=e.position)}let s=a.place&&"start"in a.place?a.place.start:a.place;this.ancestors=a.ancestors||void 0,this.cause=a.cause||void 0,this.column=s?s.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=s?s.line:void 0,this.name=(0,t.stringifyPosition)(a.place)||"1:1",this.place=a.place||void 0,this.reason=this.message,this.ruleId=a.ruleId||void 0,this.source=a.source||void 0,this.stack=o&&a.cause&&"string"==typeof a.cause.stack?a.cause.stack:"",this.actual,this.expected,this.note,this.url}}n.prototype.file="",n.prototype.name="",n.prototype.reason="",n.prototype.message="",n.prototype.stack="",n.prototype.column=void 0,n.prototype.line=void 0,n.prototype.ancestors=void 0,n.prototype.cause=void 0,n.prototype.fatal=void 0,n.prototype.place=void 0,n.prototype.ruleId=void 0,n.prototype.source=void 0},645311:e=>{"use strict";e.s({toJsxRuntime:()=>b});var t=e.i(152980),n=e.i(366506),r=e.i(562851),i=e.i(844751),a=e.i(753448),o=e.i(560892),s=e.i(254158),l=e.i(384779),u=e.i(754157),c=e.i(107723),d=e.i(425541);let h={}.hasOwnProperty,p=new Map,f=/[A-Z]/g,m=new Set(["table","tbody","thead","tfoot","tr"]),g=new Set(["td","th"]),y="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function b(e,t){var n,r,i,a;let o;if(!t||void 0===t.Fragment)throw TypeError("Expected `Fragment` in options");let l=t.filePath||void 0;if(t.development){if("function"!=typeof t.jsxDEV)throw TypeError("Expected `jsxDEV` in options when `development: true`");n=l,r=t.jsxDEV,o=function(e,t,i,a){let o=Array.isArray(i.children),s=(0,c.pointStart)(e);return r(t,i,a,o,{columnNumber:s?s.column-1:void 0,fileName:n,lineNumber:s?s.line:void 0},void 0)}}else{if("function"!=typeof t.jsx)throw TypeError("Expected `jsx` in production options");if("function"!=typeof t.jsxs)throw TypeError("Expected `jsxs` in production options");i=t.jsx,a=t.jsxs,o=function(e,t,n,r){let o=Array.isArray(n.children)?a:i;return r?o(t,n,r):o(t,n)}}let u={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:o,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:l,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:!1!==t.passKeys,passNode:t.passNode||!1,schema:"svg"===t.space?s.svg:s.html,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:!1!==t.tableCellAlignToStyle},d=x(u,e,void 0);return d&&"string"!=typeof d?d:u.create(e,u.Fragment,{children:d||void 0},void 0)}function x(e,r,c){return"element"===r.type?function(e,n,r){let c=e.schema;"svg"===n.tagName.toLowerCase()&&"html"===c.space&&(e.schema=s.svg),e.ancestors.push(n);let p=_(e,n.tagName,!1),b=function(e,n){let r,i,s={};for(i in n.properties)if("children"!==i&&h.call(n.properties,i)){let c=function(e,n,r){let i=(0,a.find)(e.schema,n);if(!(null==r||"number"==typeof r&&Number.isNaN(r))){if(Array.isArray(r)&&(r=i.commaSeparated?(0,t.stringify)(r):(0,l.stringify)(r)),"style"===i.property){let t="object"==typeof r?r:function(e,t){try{return(0,u.default)(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};let t=new d.VFileMessage("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:n,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw t.file=e.filePath||void 0,t.url=y+"#cannot-parse-style-attribute",t}}(e,String(r));return"css"===e.stylePropertyNameCase&&(t=function(e){let t,n={};for(t in e)h.call(e,t)&&(n[function(e){let t=e.replace(f,A);return"ms-"===t.slice(0,3)&&(t="-"+t),t}(t)]=e[t]);return n}(t)),["style",t]}return["react"===e.elementAttributeNameCase&&i.space?o.hastToReact[i.property]||i.property:i.attribute,r]}}(e,i,n.properties[i]);if(c){let[t,i]=c;e.tableCellAlignToStyle&&"align"===t&&"string"==typeof i&&g.has(n.tagName)?r=i:s[t]=i}}return r&&((s.style||(s.style={}))["css"===e.stylePropertyNameCase?"text-align":"textAlign"]=r),s}(e,n),x=S(e,n);return m.has(n.tagName)&&(x=x.filter(function(e){return"string"!=typeof e||!(0,i.whitespace)(e)})),w(e,b,p,n),k(b,x),e.ancestors.pop(),e.schema=c,e.create(n,p,b,r)}(e,r,c):"mdxFlowExpression"===r.type||"mdxTextExpression"===r.type?function(e,t){if(t.data&&t.data.estree&&e.evaluater){let r=t.data.estree.body[0];return(0,n.ok)("ExpressionStatement"===r.type),e.evaluater.evaluateExpression(r.expression)}C(e,t.position)}(e,r):"mdxJsxFlowElement"===r.type||"mdxJsxTextElement"===r.type?function(e,t,r){let i=e.schema;"svg"===t.name&&"html"===i.space&&(e.schema=s.svg),e.ancestors.push(t);let a=null===t.name?e.Fragment:_(e,t.name,!0),o=function(e,t){let r={};for(let i of t.attributes)if("mdxJsxExpressionAttribute"===i.type)if(i.data&&i.data.estree&&e.evaluater){let t=i.data.estree.body[0];(0,n.ok)("ExpressionStatement"===t.type);let a=t.expression;(0,n.ok)("ObjectExpression"===a.type);let o=a.properties[0];(0,n.ok)("SpreadElement"===o.type),Object.assign(r,e.evaluater.evaluateExpression(o.argument))}else C(e,t.position);else{let a,o=i.name;if(i.value&&"object"==typeof i.value)if(i.value.data&&i.value.data.estree&&e.evaluater){let t=i.value.data.estree.body[0];(0,n.ok)("ExpressionStatement"===t.type),a=e.evaluater.evaluateExpression(t.expression)}else C(e,t.position);else a=null===i.value||i.value;r[o]=a}return r}(e,t),l=S(e,t);return w(e,o,a,t),k(o,l),e.ancestors.pop(),e.schema=i,e.create(t,a,o,r)}(e,r,c):"mdxjsEsm"===r.type?function(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);C(e,t.position)}(e,r):"root"===r.type?function(e,t,n){let r={};return k(r,S(e,t)),e.create(t,e.Fragment,r,n)}(e,r,c):"text"===r.type?r.value:void 0}function w(e,t,n,r){"string"!=typeof n&&n!==e.Fragment&&e.passNode&&(t.node=r)}function k(e,t){if(t.length>0){let n=t.length>1?t:t[0];n&&(e.children=n)}}function S(e,t){let n=[],r=-1,i=e.passKeys?new Map:p;for(;++r<t.children.length;){let a,o=t.children[r];if(e.passKeys){let e="element"===o.type?o.tagName:"mdxJsxFlowElement"===o.type||"mdxJsxTextElement"===o.type?o.name:void 0;if(e){let t=i.get(e)||0;a=e+"-"+t,i.set(e,t+1)}}let s=x(e,o,a);void 0!==s&&n.push(s)}return n}function _(e,t,i){let a;if(i)if(t.includes(".")){let e,i=t.split("."),o=-1;for(;++o<i.length;){let t=(0,r.name)(i[o])?{type:"Identifier",name:i[o]}:{type:"Literal",value:i[o]};e=e?{type:"MemberExpression",object:e,property:t,computed:!!(o&&"Literal"===t.type),optional:!1}:t}(0,n.ok)(e,"always a result"),a=e}else a=(0,r.name)(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};else a={type:"Literal",value:t};if("Literal"===a.type){let t=a.value;return h.call(e.components,t)?e.components[t]:t}if(e.evaluater)return e.evaluater.evaluateExpression(a);C(e)}function C(e,t){let n=new d.VFileMessage("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=y+"#cannot-handle-mdx-estrees-without-createevaluater",n}function A(e){return"-"+e.toLowerCase()}},508399:e=>{"use strict";e.s({urlAttributes:()=>t});let t={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]}},517971:e=>{"use strict";e.s({content:()=>r});var t=e.i(945771),n=e.i(32633);let r={tokenize:function(e){let r,i=e.attempt(this.parser.constructs.contentInitial,function(n){return null===n?void e.consume(n):(e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),(0,t.factorySpace)(e,i,"linePrefix"))},function(t){return e.enter("paragraph"),function t(i){let a=e.enter("chunkText",{contentType:"text",previous:r});return r&&(r.next=a),r=a,function r(i){if(null===i){e.exit("chunkText"),e.exit("paragraph"),e.consume(i);return}return(0,n.markdownLineEnding)(i)?(e.consume(i),e.exit("chunkText"),t):(e.consume(i),r)}(i)}(t)});return i}}},193709:e=>{"use strict";e.s({document:()=>i});var t=e.i(945771),n=e.i(32633),r=e.i(906112);let i={tokenize:function(e){let t,i,o,s=this,l=[],u=0;return c;function c(t){if(u<l.length){let n=l[u];return s.containerState=n[1],e.attempt(n[0].continuation,d,h)(t)}return h(t)}function d(e){if(u++,s.containerState._closeFlow){let n;s.containerState._closeFlow=void 0,t&&w();let i=s.events.length,a=i;for(;a--;)if("exit"===s.events[a][0]&&"chunkFlow"===s.events[a][1].type){n=s.events[a][1].end;break}x(u);let o=i;for(;o<s.events.length;)s.events[o][1].end={...n},o++;return(0,r.splice)(s.events,a+1,0,s.events.slice(i)),s.events.length=o,h(e)}return c(e)}function h(n){if(u===l.length){if(!t)return m(n);if(t.currentConstruct&&t.currentConstruct.concrete)return y(n);s.interrupt=!!(t.currentConstruct&&!t._gfmTableDynamicInterruptHack)}return s.containerState={},e.check(a,p,f)(n)}function p(e){return t&&w(),x(u),m(e)}function f(e){return s.parser.lazy[s.now().line]=u!==l.length,o=s.now().offset,y(e)}function m(t){return s.containerState={},e.attempt(a,g,y)(t)}function g(e){return u++,l.push([s.currentConstruct,s.containerState]),m(e)}function y(r){if(null===r){t&&w(),x(0),e.consume(r);return}return t=t||s.parser.flow(s.now()),e.enter("chunkFlow",{_tokenizer:t,contentType:"flow",previous:i}),function t(r){if(null===r){b(e.exit("chunkFlow"),!0),x(0),e.consume(r);return}return(0,n.markdownLineEnding)(r)?(e.consume(r),b(e.exit("chunkFlow")),u=0,s.interrupt=void 0,c):(e.consume(r),t)}(r)}function b(e,n){let a=s.sliceStream(e);if(n&&a.push(null),e.previous=i,i&&(i.next=e),i=e,t.defineSkip(e.start),t.write(a),s.parser.lazy[e.start.line]){let e,n,i=t.events.length;for(;i--;)if(t.events[i][1].start.offset<o&&(!t.events[i][1].end||t.events[i][1].end.offset>o))return;let a=s.events.length,l=a;for(;l--;)if("exit"===s.events[l][0]&&"chunkFlow"===s.events[l][1].type){if(e){n=s.events[l][1].end;break}e=!0}for(x(u),i=a;i<s.events.length;)s.events[i][1].end={...n},i++;(0,r.splice)(s.events,l+1,0,s.events.slice(a)),s.events.length=i}}function x(t){let n=l.length;for(;n-- >t;){let t=l[n];s.containerState=t[1],t[0].exit.call(s,e)}l.length=t}function w(){t.write([null]),i=void 0,t=void 0,s.containerState._closeFlow=void 0}}},a={tokenize:function(e,n,r){return(0,t.factorySpace)(e,e.attempt(this.parser.constructs.document,n,r),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}}},654644:e=>{"use strict";e.s({SpliceBuffer:()=>t});class t{get(e){if(e<0||e>=this.left.length+this.right.length)throw RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,t){let n=null==t?1/0:t;return n<this.left.length?this.left.slice(e,n):e>this.left.length?this.right.slice(this.right.length-n+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-n+this.left.length).reverse())}splice(e,t,r){this.setCursor(Math.trunc(e));let i=this.right.splice(this.right.length-(t||0),1/0);return r&&n(this.left,r),i.reverse()}pop(){return this.setCursor(1/0),this.left.pop()}push(e){this.setCursor(1/0),this.left.push(e)}pushMany(e){this.setCursor(1/0),n(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),n(this.right,e.reverse())}setCursor(e){if(e!==this.left.length&&(!(e>this.left.length)||0!==this.right.length)&&(!(e<0)||0!==this.left.length))if(e<this.left.length){let t=this.left.splice(e,1/0);n(this.right,t.reverse())}else{let t=this.right.splice(this.left.length+this.right.length-e,1/0);n(this.left,t.reverse())}}constructor(e){this.left=e?[...e]:[],this.right=[]}}function n(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}},493431:e=>{"use strict";e.s({subtokenize:()=>r});var t=e.i(906112),n=e.i(654644);function r(e){let r,i,a,o,s,l,u,c={},d=-1,h=new n.SpliceBuffer(e);for(;++d<h.length;){for(;d in c;)d=c[d];if(r=h.get(d),d&&"chunkFlow"===r[1].type&&"listItemPrefix"===h.get(d-1)[1].type&&((a=0)<(l=r[1]._tokenizer.events).length&&"lineEndingBlank"===l[a][1].type&&(a+=2),a<l.length&&"content"===l[a][1].type))for(;++a<l.length&&"content"!==l[a][1].type;)"chunkText"===l[a][1].type&&(l[a][1]._isInFirstContentOfListItem=!0,a++);if("enter"===r[0])r[1].contentType&&(Object.assign(c,function(e,t){let n,r,i=e.get(t)[1],a=e.get(t)[2],o=t-1,s=[],l=i._tokenizer;!l&&(l=a.parser[i.contentType](i.start),i._contentTypeTextTrailing&&(l._contentTypeTextTrailing=!0));let u=l.events,c=[],d={},h=-1,p=i,f=0,m=0,g=[0];for(;p;){for(;e.get(++o)[1]!==p;);s.push(o),!p._tokenizer&&(n=a.sliceStream(p),p.next||n.push(null),r&&l.defineSkip(p.start),p._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=!0),l.write(n),p._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=void 0)),r=p,p=p.next}for(p=i;++h<u.length;)"exit"===u[h][0]&&"enter"===u[h-1][0]&&u[h][1].type===u[h-1][1].type&&u[h][1].start.line!==u[h][1].end.line&&(m=h+1,g.push(m),p._tokenizer=void 0,p.previous=void 0,p=p.next);for(l.events=[],p?(p._tokenizer=void 0,p.previous=void 0):g.pop(),h=g.length;h--;){let t=u.slice(g[h],g[h+1]),n=s.pop();c.push([n,n+t.length-1]),e.splice(n,2,t)}for(c.reverse(),h=-1;++h<c.length;)d[f+c[h][0]]=f+c[h][1],f+=c[h][1]-c[h][0]-1;return d}(h,d)),d=c[d],u=!0);else if(r[1]._container){for(a=d,i=void 0;a--;)if("lineEnding"===(o=h.get(a))[1].type||"lineEndingBlank"===o[1].type)"enter"===o[0]&&(i&&(h.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=a);else if("linePrefix"===o[1].type||"listItemIndent"===o[1].type);else break;i&&(r[1].end={...h.get(i)[1].start},(s=h.slice(i,d)).unshift(r),h.splice(i,d-i+1,s))}}return(0,t.splice)(e,0,1/0,h.slice(0)),!u}},53770:e=>{"use strict";e.s({content:()=>i});var t=e.i(945771),n=e.i(32633),r=e.i(493431);let i={resolve:function(e){return(0,r.subtokenize)(e),e},tokenize:function(e,t){let r;return function(t){return e.enter("content"),r=e.enter("chunkContent",{contentType:"content"}),i(t)};function i(t){return null===t?o(t):(0,n.markdownLineEnding)(t)?e.check(a,s,o)(t):(e.consume(t),i)}function o(n){return e.exit("chunkContent"),e.exit("content"),t(n)}function s(t){return e.consume(t),e.exit("chunkContent"),r.next=e.enter("chunkContent",{contentType:"content",previous:r}),r=r.next,i}}},a={partial:!0,tokenize:function(e,r,i){let a=this;return function(n){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),(0,t.factorySpace)(e,o,"linePrefix")};function o(t){if(null===t||(0,n.markdownLineEnding)(t))return i(t);let o=a.events[a.events.length-1];return!a.parser.constructs.disable.null.includes("codeIndented")&&o&&"linePrefix"===o[1].type&&o[2].sliceSerialize(o[1],!0).length>=4?r(t):e.interrupt(a.parser.constructs.flow,i,r)(t)}}}},799439:e=>{"use strict";e.s({flow:()=>i});var t=e.i(276842),n=e.i(53770),r=e.i(945771);let i={tokenize:function(e){let i=this,a=e.attempt(t.blankLine,function(t){return null===t?void e.consume(t):(e.enter("lineEndingBlank"),e.consume(t),e.exit("lineEndingBlank"),i.currentConstruct=void 0,a)},e.attempt(this.parser.constructs.flowInitial,o,(0,r.factorySpace)(e,e.attempt(this.parser.constructs.flow,o,e.attempt(n.content,o)),"linePrefix")));return a;function o(t){return null===t?void e.consume(t):(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),i.currentConstruct=void 0,a)}}}},663203:e=>{"use strict";e.s({resolver:()=>t,string:()=>n,text:()=>r});let t={resolveAll:a()},n=i("string"),r=i("text");function i(e){return{resolveAll:a("text"===e?o:void 0),tokenize:function(t){let n=this,r=this.parser.constructs[e],i=t.attempt(r,a,o);return a;function a(e){return l(e)?i(e):o(e)}function o(e){return null===e?void t.consume(e):(t.enter("data"),t.consume(e),s)}function s(e){return l(e)?(t.exit("data"),i(e)):(t.consume(e),s)}function l(e){if(null===e)return!0;let t=r[e],i=-1;if(t)for(;++i<t.length;){let e=t[i];if(!e.previous||e.previous.call(n,n.previous))return!0}return!1}}}}function a(e){return function(t,n){let r,i=-1;for(;++i<=t.length;)void 0===r?t[i]&&"data"===t[i][1].type&&(r=i,i++):t[i]&&"data"===t[i][1].type||(i!==r+2&&(t[r][1].end=t[i-1][1].end,t.splice(r+2,i-r-2),i=r+2),r=void 0);return e?e(t,n):t}}function o(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||"lineEnding"===e[n][1].type)&&"data"===e[n-1][1].type){let r,i=e[n-1][1],a=t.sliceStream(i),o=a.length,s=-1,l=0;for(;o--;){let e=a[o];if("string"==typeof e){for(s=e.length;32===e.charCodeAt(s-1);)l++,s--;if(s)break;s=-1}else if(-2===e)r=!0,l++;else if(-1===e);else{o++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(l=0),l){let a={type:n===e.length||r||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:o?s:i.start._bufferIndex+s,_index:i.start._index+o,line:i.end.line,column:i.end.column-l,offset:i.end.offset-l},end:{...i.end}};i.end={...a.start},i.start.offset===i.end.offset?Object.assign(i,a):(e.splice(n,0,["enter",a,t],["exit",a,t]),n+=2)}n++}return e}},824041:e=>{"use strict";e.s({attention:()=>i});var t=e.i(906112),n=e.i(909300),r=e.i(192784);let i={name:"attention",resolveAll:function(e,n){let i,o,s,l,u,c,d,h,p=-1;for(;++p<e.length;)if("enter"===e[p][0]&&"attentionSequence"===e[p][1].type&&e[p][1]._close){for(i=p;i--;)if("exit"===e[i][0]&&"attentionSequence"===e[i][1].type&&e[i][1]._open&&n.sliceSerialize(e[i][1]).charCodeAt(0)===n.sliceSerialize(e[p][1]).charCodeAt(0)){if((e[i][1]._close||e[p][1]._open)&&(e[p][1].end.offset-e[p][1].start.offset)%3&&!((e[i][1].end.offset-e[i][1].start.offset+e[p][1].end.offset-e[p][1].start.offset)%3))continue;c=e[i][1].end.offset-e[i][1].start.offset>1&&e[p][1].end.offset-e[p][1].start.offset>1?2:1;let f={...e[i][1].end},m={...e[p][1].start};a(f,-c),a(m,c),l={type:c>1?"strongSequence":"emphasisSequence",start:f,end:{...e[i][1].end}},u={type:c>1?"strongSequence":"emphasisSequence",start:{...e[p][1].start},end:m},s={type:c>1?"strongText":"emphasisText",start:{...e[i][1].end},end:{...e[p][1].start}},o={type:c>1?"strong":"emphasis",start:{...l.start},end:{...u.end}},e[i][1].end={...l.start},e[p][1].start={...u.end},d=[],e[i][1].end.offset-e[i][1].start.offset&&(d=(0,t.push)(d,[["enter",e[i][1],n],["exit",e[i][1],n]])),d=(0,t.push)(d,[["enter",o,n],["enter",l,n],["exit",l,n],["enter",s,n]]),d=(0,t.push)(d,(0,r.resolveAll)(n.parser.constructs.insideSpan.null,e.slice(i+1,p),n)),d=(0,t.push)(d,[["exit",s,n],["enter",u,n],["exit",u,n],["exit",o,n]]),e[p][1].end.offset-e[p][1].start.offset?(h=2,d=(0,t.push)(d,[["enter",e[p][1],n],["exit",e[p][1],n]])):h=0,(0,t.splice)(e,i-1,p-i+3,d),p=i+d.length-h-2;break}}for(p=-1;++p<e.length;)"attentionSequence"===e[p][1].type&&(e[p][1].type="data");return e},tokenize:function(e,t){let r,i=this.parser.constructs.attentionMarkers.null,a=this.previous,o=(0,n.classifyCharacter)(a);return function(s){return r=s,e.enter("attentionSequence"),function s(l){if(l===r)return e.consume(l),s;let u=e.exit("attentionSequence"),c=(0,n.classifyCharacter)(l),d=!c||2===c&&o||i.includes(l),h=!o||2===o&&c||i.includes(a);return u._open=!!(42===r?d:d&&(o||!h)),u._close=!!(42===r?h:h&&(c||!d)),t(l)}(s)}}};function a(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}},931698:e=>{"use strict";e.s({autolink:()=>n});var t=e.i(32633);let n={name:"autolink",tokenize:function(e,n,r){let i=0;return function(t){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(t),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),a};function a(n){return(0,t.asciiAlpha)(n)?(e.consume(n),o):64===n?r(n):l(n)}function o(n){return 43===n||45===n||46===n||(0,t.asciiAlphanumeric)(n)?(i=1,function n(r){return 58===r?(e.consume(r),i=0,s):(43===r||45===r||46===r||(0,t.asciiAlphanumeric)(r))&&i++<32?(e.consume(r),n):(i=0,l(r))}(n)):l(n)}function s(i){return 62===i?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(i),e.exit("autolinkMarker"),e.exit("autolink"),n):null===i||32===i||60===i||(0,t.asciiControl)(i)?r(i):(e.consume(i),s)}function l(n){return 64===n?(e.consume(n),u):(0,t.asciiAtext)(n)?(e.consume(n),l):r(n)}function u(a){return(0,t.asciiAlphanumeric)(a)?function a(o){return 46===o?(e.consume(o),i=0,u):62===o?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(o),e.exit("autolinkMarker"),e.exit("autolink"),n):function n(o){if((45===o||(0,t.asciiAlphanumeric)(o))&&i++<63){let t=45===o?n:a;return e.consume(o),t}return r(o)}(o)}(a):r(a)}}}},776281:e=>{"use strict";e.s({blockQuote:()=>r});var t=e.i(945771),n=e.i(32633);let r={continuation:{tokenize:function(e,i,a){let o=this;return function(r){return(0,n.markdownSpace)(r)?(0,t.factorySpace)(e,s,"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(r):s(r)};function s(t){return e.attempt(r,i,a)(t)}}},exit:function(e){e.exit("blockQuote")},name:"blockQuote",tokenize:function(e,t,r){let i=this;return function(t){if(62===t){let n=i.containerState;return n.open||(e.enter("blockQuote",{_container:!0}),n.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(t),e.exit("blockQuoteMarker"),a}return r(t)};function a(r){return(0,n.markdownSpace)(r)?(e.enter("blockQuotePrefixWhitespace"),e.consume(r),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(r))}}}},827839:e=>{"use strict";e.s({characterEscape:()=>n});var t=e.i(32633);let n={name:"characterEscape",tokenize:function(e,n,r){return function(t){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(t),e.exit("escapeMarker"),i};function i(i){return(0,t.asciiPunctuation)(i)?(e.enter("characterEscapeValue"),e.consume(i),e.exit("characterEscapeValue"),e.exit("characterEscape"),n):r(i)}}}},594776:e=>{"use strict";e.s({decodeNamedCharacterReference:()=>n});let t=document.createElement("i");function n(e){let n="&"+e+";";t.innerHTML=n;let r=t.textContent;return(59!==r.charCodeAt(r.length-1)||"semi"===e)&&r!==n&&r}},158170:e=>{"use strict";e.s({characterReference:()=>r});var t=e.i(594776),n=e.i(32633);let r={name:"characterReference",tokenize:function(e,r,i){let a,o,s=this,l=0;return function(t){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(t),e.exit("characterReferenceMarker"),u};function u(t){return 35===t?(e.enter("characterReferenceMarkerNumeric"),e.consume(t),e.exit("characterReferenceMarkerNumeric"),c):(e.enter("characterReferenceValue"),a=31,o=n.asciiAlphanumeric,d(t))}function c(t){return 88===t||120===t?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(t),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),a=6,o=n.asciiHexDigit,d):(e.enter("characterReferenceValue"),a=7,o=n.asciiDigit,d(t))}function d(u){if(59===u&&l){let a=e.exit("characterReferenceValue");return o!==n.asciiAlphanumeric||(0,t.decodeNamedCharacterReference)(s.sliceSerialize(a))?(e.enter("characterReferenceMarker"),e.consume(u),e.exit("characterReferenceMarker"),e.exit("characterReference"),r):i(u)}return o(u)&&l++<a?(e.consume(u),d):i(u)}}}},783123:e=>{"use strict";e.s({codeFenced:()=>i});var t=e.i(945771),n=e.i(32633);let r={partial:!0,tokenize:function(e,t,n){let r=this;return function(t){return null===t?n(t):(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),i)};function i(e){return r.parser.lazy[r.now().line]?n(e):t(e)}}},i={concrete:!0,name:"codeFenced",tokenize:function(e,i,a){let o,s=this,l={partial:!0,tokenize:function(e,r,i){let a=0;return function(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),l};function l(r){return e.enter("codeFencedFence"),(0,n.markdownSpace)(r)?(0,t.factorySpace)(e,u,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(r):u(r)}function u(r){return r===o?(e.enter("codeFencedFenceSequence"),function r(s){return s===o?(a++,e.consume(s),r):a>=c?(e.exit("codeFencedFenceSequence"),(0,n.markdownSpace)(s)?(0,t.factorySpace)(e,d,"whitespace")(s):d(s)):i(s)}(r)):i(r)}function d(t){return null===t||(0,n.markdownLineEnding)(t)?(e.exit("codeFencedFence"),r(t)):i(t)}}},u=0,c=0;return function(r){var i=r;let l=s.events[s.events.length-1];return u=l&&"linePrefix"===l[1].type?l[2].sliceSerialize(l[1],!0).length:0,o=i,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),function r(i){return i===o?(c++,e.consume(i),r):c<3?a(i):(e.exit("codeFencedFenceSequence"),(0,n.markdownSpace)(i)?(0,t.factorySpace)(e,d,"whitespace")(i):d(i))}(i)};function d(l){return null===l||(0,n.markdownLineEnding)(l)?(e.exit("codeFencedFence"),s.interrupt?i(l):e.check(r,p,y)(l)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),function r(i){return null===i||(0,n.markdownLineEnding)(i)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),d(i)):(0,n.markdownSpace)(i)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),(0,t.factorySpace)(e,h,"whitespace")(i)):96===i&&i===o?a(i):(e.consume(i),r)}(l))}function h(t){return null===t||(0,n.markdownLineEnding)(t)?d(t):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),function t(r){return null===r||(0,n.markdownLineEnding)(r)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),d(r)):96===r&&r===o?a(r):(e.consume(r),t)}(t))}function p(t){return e.attempt(l,y,f)(t)}function f(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),m}function m(r){return u>0&&(0,n.markdownSpace)(r)?(0,t.factorySpace)(e,g,"linePrefix",u+1)(r):g(r)}function g(t){return null===t||(0,n.markdownLineEnding)(t)?e.check(r,p,y)(t):(e.enter("codeFlowValue"),function t(r){return null===r||(0,n.markdownLineEnding)(r)?(e.exit("codeFlowValue"),g(r)):(e.consume(r),t)}(t))}function y(t){return e.exit("codeFenced"),i(t)}}}},103056:e=>{"use strict";e.s({codeIndented:()=>r});var t=e.i(945771),n=e.i(32633);let r={name:"codeIndented",tokenize:function(e,r,a){let o=this;return function(n){return e.enter("codeIndented"),(0,t.factorySpace)(e,s,"linePrefix",5)(n)};function s(t){let r=o.events[o.events.length-1];return r&&"linePrefix"===r[1].type&&r[2].sliceSerialize(r[1],!0).length>=4?function t(r){return null===r?l(r):(0,n.markdownLineEnding)(r)?e.attempt(i,t,l)(r):(e.enter("codeFlowValue"),function r(i){return null===i||(0,n.markdownLineEnding)(i)?(e.exit("codeFlowValue"),t(i)):(e.consume(i),r)}(r))}(t):a(t)}function l(t){return e.exit("codeIndented"),r(t)}}},i={partial:!0,tokenize:function(e,r,i){let a=this;return o;function o(r){return a.parser.lazy[a.now().line]?i(r):(0,n.markdownLineEnding)(r)?(e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),o):(0,t.factorySpace)(e,s,"linePrefix",5)(r)}function s(e){let t=a.events[a.events.length-1];return t&&"linePrefix"===t[1].type&&t[2].sliceSerialize(t[1],!0).length>=4?r(e):(0,n.markdownLineEnding)(e)?o(e):i(e)}}}},397133:e=>{"use strict";e.s({codeText:()=>n});var t=e.i(32633);let n={name:"codeText",previous:function(e){return 96!==e||"characterEscape"===this.events[this.events.length-1][1].type},resolve:function(e){let t,n,r=e.length-4,i=3;if(("lineEnding"===e[3][1].type||"space"===e[i][1].type)&&("lineEnding"===e[r][1].type||"space"===e[r][1].type)){for(t=i;++t<r;)if("codeTextData"===e[t][1].type){e[i][1].type="codeTextPadding",e[r][1].type="codeTextPadding",i+=2,r-=2;break}}for(t=i-1,r++;++t<=r;)void 0===n?t!==r&&"lineEnding"!==e[t][1].type&&(n=t):(t===r||"lineEnding"===e[t][1].type)&&(e[n][1].type="codeTextData",t!==n+2&&(e[n][1].end=e[t-1][1].end,e.splice(n+2,t-n-2),r-=t-n-2,t=n+2),n=void 0);return e},tokenize:function(e,n,r){let i,a,o=0;return function(t){return e.enter("codeText"),e.enter("codeTextSequence"),function t(n){return 96===n?(e.consume(n),o++,t):(e.exit("codeTextSequence"),s(n))}(t)};function s(u){return null===u?r(u):32===u?(e.enter("space"),e.consume(u),e.exit("space"),s):96===u?(a=e.enter("codeTextSequence"),i=0,function t(r){return 96===r?(e.consume(r),i++,t):i===o?(e.exit("codeTextSequence"),e.exit("codeText"),n(r)):(a.type="codeTextData",l(r))}(u)):(0,t.markdownLineEnding)(u)?(e.enter("lineEnding"),e.consume(u),e.exit("lineEnding"),s):(e.enter("codeTextData"),l(u))}function l(n){return null===n||32===n||96===n||(0,t.markdownLineEnding)(n)?(e.exit("codeTextData"),s(n)):(e.consume(n),l)}}}},215519:e=>{"use strict";e.s({factoryDestination:()=>n});var t=e.i(32633);function n(e,n,r,i,a,o,s,l,u){let c=u||1/0,d=0;return function(n){return 60===n?(e.enter(i),e.enter(a),e.enter(o),e.consume(n),e.exit(o),h):null===n||32===n||41===n||(0,t.asciiControl)(n)?r(n):(e.enter(i),e.enter(s),e.enter(l),e.enter("chunkString",{contentType:"string"}),m(n))};function h(t){return 62===t?(e.enter(o),e.consume(t),e.exit(o),e.exit(a),e.exit(i),n):(e.enter(l),e.enter("chunkString",{contentType:"string"}),p(t))}function p(n){return 62===n?(e.exit("chunkString"),e.exit(l),h(n)):null===n||60===n||(0,t.markdownLineEnding)(n)?r(n):(e.consume(n),92===n?f:p)}function f(t){return 60===t||62===t||92===t?(e.consume(t),p):p(t)}function m(a){return!d&&(null===a||41===a||(0,t.markdownLineEndingOrSpace)(a))?(e.exit("chunkString"),e.exit(l),e.exit(s),e.exit(i),n(a)):d<c&&40===a?(e.consume(a),d++,m):41===a?(e.consume(a),d--,m):null===a||32===a||40===a||(0,t.asciiControl)(a)?r(a):(e.consume(a),92===a?g:m)}function g(t){return 40===t||41===t||92===t?(e.consume(t),m):m(t)}}},284975:e=>{"use strict";e.s({factoryLabel:()=>n});var t=e.i(32633);function n(e,n,r,i,a,o){let s,l=this,u=0;return function(t){return e.enter(i),e.enter(a),e.consume(t),e.exit(a),e.enter(o),c};function c(h){return u>999||null===h||91===h||93===h&&!s||94===h&&!u&&"_hiddenFootnoteSupport"in l.parser.constructs?r(h):93===h?(e.exit(o),e.enter(a),e.consume(h),e.exit(a),e.exit(i),n):(0,t.markdownLineEnding)(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),d(h))}function d(n){return null===n||91===n||93===n||(0,t.markdownLineEnding)(n)||u++>999?(e.exit("chunkString"),c(n)):(e.consume(n),s||(s=!(0,t.markdownSpace)(n)),92===n?h:d)}function h(t){return 91===t||92===t||93===t?(e.consume(t),u++,d):d(t)}}},288120:e=>{"use strict";e.s({factoryTitle:()=>r});var t=e.i(945771),n=e.i(32633);function r(e,r,i,a,o,s){let l;return function(t){return 34===t||39===t||40===t?(e.enter(a),e.enter(o),e.consume(t),e.exit(o),l=40===t?41:t,u):i(t)};function u(t){return t===l?(e.enter(o),e.consume(t),e.exit(o),e.exit(a),r):(e.enter(s),c(t))}function c(r){return r===l?(e.exit(s),u(l)):null===r?i(r):(0,n.markdownLineEnding)(r)?(e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),(0,t.factorySpace)(e,c,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),d(r))}function d(t){return t===l||null===t||(0,n.markdownLineEnding)(t)?(e.exit("chunkString"),c(t)):(e.consume(t),92===t?h:d)}function h(t){return t===l||92===t?(e.consume(t),d):d(t)}}},252391:e=>{"use strict";e.s({factoryWhitespace:()=>r});var t=e.i(945771),n=e.i(32633);function r(e,r){let i;return function a(o){return(0,n.markdownLineEnding)(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i=!0,a):(0,n.markdownSpace)(o)?(0,t.factorySpace)(e,a,i?"linePrefix":"lineSuffix")(o):r(o)}}},273828:e=>{"use strict";e.s({definition:()=>l});var t=e.i(215519),n=e.i(284975),r=e.i(945771),i=e.i(288120),a=e.i(252391),o=e.i(32633),s=e.i(967148);let l={name:"definition",tokenize:function(e,i,l){let c,d=this;return function(t){var r;return e.enter("definition"),r=t,n.factoryLabel.call(d,e,h,l,"definitionLabel","definitionLabelMarker","definitionLabelString")(r)};function h(t){return(c=(0,s.normalizeIdentifier)(d.sliceSerialize(d.events[d.events.length-1][1]).slice(1,-1)),58===t)?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),p):l(t)}function p(t){return(0,o.markdownLineEndingOrSpace)(t)?(0,a.factoryWhitespace)(e,f)(t):f(t)}function f(n){return(0,t.factoryDestination)(e,m,l,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(n)}function m(t){return e.attempt(u,g,g)(t)}function g(t){return(0,o.markdownSpace)(t)?(0,r.factorySpace)(e,y,"whitespace")(t):y(t)}function y(t){return null===t||(0,o.markdownLineEnding)(t)?(e.exit("definition"),d.parser.defined.push(c),i(t)):l(t)}}},u={partial:!0,tokenize:function(e,t,n){return function(t){return(0,o.markdownLineEndingOrSpace)(t)?(0,a.factoryWhitespace)(e,s)(t):n(t)};function s(t){return(0,i.factoryTitle)(e,l,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(t)}function l(t){return(0,o.markdownSpace)(t)?(0,r.factorySpace)(e,u,"whitespace")(t):u(t)}function u(e){return null===e||(0,o.markdownLineEnding)(e)?t(e):n(e)}}}},572304:e=>{"use strict";e.s({hardBreakEscape:()=>n});var t=e.i(32633);let n={name:"hardBreakEscape",tokenize:function(e,n,r){return function(t){return e.enter("hardBreakEscape"),e.consume(t),i};function i(i){return(0,t.markdownLineEnding)(i)?(e.exit("hardBreakEscape"),n(i)):r(i)}}}},761707:e=>{"use strict";e.s({headingAtx:()=>i});var t=e.i(945771),n=e.i(32633),r=e.i(906112);let i={name:"headingAtx",resolve:function(e,t){let n,i,a=e.length-2,o=3;return"whitespace"===e[3][1].type&&(o+=2),a-2>o&&"whitespace"===e[a][1].type&&(a-=2),"atxHeadingSequence"===e[a][1].type&&(o===a-1||a-4>o&&"whitespace"===e[a-2][1].type)&&(a-=o+1===a?2:4),a>o&&(n={type:"atxHeadingText",start:e[o][1].start,end:e[a][1].end},i={type:"chunkText",start:e[o][1].start,end:e[a][1].end,contentType:"text"},(0,r.splice)(e,o,a-o+1,[["enter",n,t],["enter",i,t],["exit",i,t],["exit",n,t]])),e},tokenize:function(e,r,i){let a=0;return function(o){var s;return e.enter("atxHeading"),s=o,e.enter("atxHeadingSequence"),function o(s){return 35===s&&a++<6?(e.consume(s),o):null===s||(0,n.markdownLineEndingOrSpace)(s)?(e.exit("atxHeadingSequence"),function i(a){return 35===a?(e.enter("atxHeadingSequence"),function t(n){return 35===n?(e.consume(n),t):(e.exit("atxHeadingSequence"),i(n))}(a)):null===a||(0,n.markdownLineEnding)(a)?(e.exit("atxHeading"),r(a)):(0,n.markdownSpace)(a)?(0,t.factorySpace)(e,i,"whitespace")(a):(e.enter("atxHeadingText"),function t(r){return null===r||35===r||(0,n.markdownLineEndingOrSpace)(r)?(e.exit("atxHeadingText"),i(r)):(e.consume(r),t)}(a))}(s)):i(s)}(s)}}}},828776:e=>{"use strict";e.s({htmlBlockNames:()=>t,htmlRawNames:()=>n});let t=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],n=["pre","script","style","textarea"]},984105:e=>{"use strict";e.s({htmlFlow:()=>i});var t=e.i(32633),n=e.i(828776),r=e.i(276842);let i={concrete:!0,name:"htmlFlow",resolveTo:function(e){let t=e.length;for(;t--&&("enter"!==e[t][0]||"htmlFlow"!==e[t][1].type););return t>1&&"linePrefix"===e[t-2][1].type&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e},tokenize:function(e,r,i){let s,l,u,c,d,h=this;return function(t){var n;return n=t,e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(n),p};function p(n){return 33===n?(e.consume(n),f):47===n?(e.consume(n),l=!0,y):63===n?(e.consume(n),s=3,h.interrupt?r:F):(0,t.asciiAlpha)(n)?(e.consume(n),u=String.fromCharCode(n),b):i(n)}function f(n){return 45===n?(e.consume(n),s=2,m):91===n?(e.consume(n),s=5,c=0,g):(0,t.asciiAlpha)(n)?(e.consume(n),s=4,h.interrupt?r:F):i(n)}function m(t){return 45===t?(e.consume(t),h.interrupt?r:F):i(t)}function g(t){let n="CDATA[";return t===n.charCodeAt(c++)?(e.consume(t),c===n.length)?h.interrupt?r:M:g:i(t)}function y(n){return(0,t.asciiAlpha)(n)?(e.consume(n),u=String.fromCharCode(n),b):i(n)}function b(a){if(null===a||47===a||62===a||(0,t.markdownLineEndingOrSpace)(a)){let o=47===a,c=u.toLowerCase();return!o&&!l&&n.htmlRawNames.includes(c)?(s=1,h.interrupt?r(a):M(a)):n.htmlBlockNames.includes(u.toLowerCase())?(s=6,o)?(e.consume(a),x):h.interrupt?r(a):M(a):(s=7,h.interrupt&&!h.parser.lazy[h.now().line]?i(a):l?function n(r){return(0,t.markdownSpace)(r)?(e.consume(r),n):E(r)}(a):w(a))}return 45===a||(0,t.asciiAlphanumeric)(a)?(e.consume(a),u+=String.fromCharCode(a),b):i(a)}function x(t){return 62===t?(e.consume(t),h.interrupt?r:M):i(t)}function w(n){return 47===n?(e.consume(n),E):58===n||95===n||(0,t.asciiAlpha)(n)?(e.consume(n),k):(0,t.markdownSpace)(n)?(e.consume(n),w):E(n)}function k(n){return 45===n||46===n||58===n||95===n||(0,t.asciiAlphanumeric)(n)?(e.consume(n),k):S(n)}function S(n){return 61===n?(e.consume(n),_):(0,t.markdownSpace)(n)?(e.consume(n),S):w(n)}function _(n){return null===n||60===n||61===n||62===n||96===n?i(n):34===n||39===n?(e.consume(n),d=n,C):(0,t.markdownSpace)(n)?(e.consume(n),_):function n(r){return null===r||34===r||39===r||47===r||60===r||61===r||62===r||96===r||(0,t.markdownLineEndingOrSpace)(r)?S(r):(e.consume(r),n)}(n)}function C(n){return n===d?(e.consume(n),d=null,A):null===n||(0,t.markdownLineEnding)(n)?i(n):(e.consume(n),C)}function A(e){return 47===e||62===e||(0,t.markdownSpace)(e)?w(e):i(e)}function E(t){return 62===t?(e.consume(t),T):i(t)}function T(n){return null===n||(0,t.markdownLineEnding)(n)?M(n):(0,t.markdownSpace)(n)?(e.consume(n),T):i(n)}function M(n){return 45===n&&2===s?(e.consume(n),P):60===n&&1===s?(e.consume(n),R):62===n&&4===s?(e.consume(n),L):63===n&&3===s?(e.consume(n),F):93===n&&5===s?(e.consume(n),j):(0,t.markdownLineEnding)(n)&&(6===s||7===s)?(e.exit("htmlFlowData"),e.check(a,z,I)(n)):null===n||(0,t.markdownLineEnding)(n)?(e.exit("htmlFlowData"),I(n)):(e.consume(n),M)}function I(t){return e.check(o,N,z)(t)}function N(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),D}function D(n){return null===n||(0,t.markdownLineEnding)(n)?I(n):(e.enter("htmlFlowData"),M(n))}function P(t){return 45===t?(e.consume(t),F):M(t)}function R(t){return 47===t?(e.consume(t),u="",O):M(t)}function O(r){if(62===r){let t=u.toLowerCase();return n.htmlRawNames.includes(t)?(e.consume(r),L):M(r)}return(0,t.asciiAlpha)(r)&&u.length<8?(e.consume(r),u+=String.fromCharCode(r),O):M(r)}function j(t){return 93===t?(e.consume(t),F):M(t)}function F(t){return 62===t?(e.consume(t),L):45===t&&2===s?(e.consume(t),F):M(t)}function L(n){return null===n||(0,t.markdownLineEnding)(n)?(e.exit("htmlFlowData"),z(n)):(e.consume(n),L)}function z(t){return e.exit("htmlFlow"),r(t)}}},a={partial:!0,tokenize:function(e,t,n){return function(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(r.blankLine,t,n)}}},o={partial:!0,tokenize:function(e,n,r){let i=this;return function(n){return(0,t.markdownLineEnding)(n)?(e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),a):r(n)};function a(e){return i.parser.lazy[i.now().line]?r(e):n(e)}}}},634188:e=>{"use strict";e.s({htmlText:()=>r});var t=e.i(945771),n=e.i(32633);let r={name:"htmlText",tokenize:function(e,r,i){let a,o,s,l=this;return function(t){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(t),u};function u(t){return 33===t?(e.consume(t),c):47===t?(e.consume(t),S):63===t?(e.consume(t),w):(0,n.asciiAlpha)(t)?(e.consume(t),C):i(t)}function c(t){return 45===t?(e.consume(t),d):91===t?(e.consume(t),o=0,m):(0,n.asciiAlpha)(t)?(e.consume(t),x):i(t)}function d(t){return 45===t?(e.consume(t),f):i(t)}function h(t){return null===t?i(t):45===t?(e.consume(t),p):(0,n.markdownLineEnding)(t)?(s=h,P(t)):(e.consume(t),h)}function p(t){return 45===t?(e.consume(t),f):h(t)}function f(e){return 62===e?D(e):45===e?p(e):h(e)}function m(t){let n="CDATA[";return t===n.charCodeAt(o++)?(e.consume(t),o===n.length?g:m):i(t)}function g(t){return null===t?i(t):93===t?(e.consume(t),y):(0,n.markdownLineEnding)(t)?(s=g,P(t)):(e.consume(t),g)}function y(t){return 93===t?(e.consume(t),b):g(t)}function b(t){return 62===t?D(t):93===t?(e.consume(t),b):g(t)}function x(t){return null===t||62===t?D(t):(0,n.markdownLineEnding)(t)?(s=x,P(t)):(e.consume(t),x)}function w(t){return null===t?i(t):63===t?(e.consume(t),k):(0,n.markdownLineEnding)(t)?(s=w,P(t)):(e.consume(t),w)}function k(e){return 62===e?D(e):w(e)}function S(t){return(0,n.asciiAlpha)(t)?(e.consume(t),_):i(t)}function _(t){return 45===t||(0,n.asciiAlphanumeric)(t)?(e.consume(t),_):function t(r){return(0,n.markdownLineEnding)(r)?(s=t,P(r)):(0,n.markdownSpace)(r)?(e.consume(r),t):D(r)}(t)}function C(t){return 45===t||(0,n.asciiAlphanumeric)(t)?(e.consume(t),C):47===t||62===t||(0,n.markdownLineEndingOrSpace)(t)?A(t):i(t)}function A(t){return 47===t?(e.consume(t),D):58===t||95===t||(0,n.asciiAlpha)(t)?(e.consume(t),E):(0,n.markdownLineEnding)(t)?(s=A,P(t)):(0,n.markdownSpace)(t)?(e.consume(t),A):D(t)}function E(t){return 45===t||46===t||58===t||95===t||(0,n.asciiAlphanumeric)(t)?(e.consume(t),E):function t(r){return 61===r?(e.consume(r),T):(0,n.markdownLineEnding)(r)?(s=t,P(r)):(0,n.markdownSpace)(r)?(e.consume(r),t):A(r)}(t)}function T(t){return null===t||60===t||61===t||62===t||96===t?i(t):34===t||39===t?(e.consume(t),a=t,M):(0,n.markdownLineEnding)(t)?(s=T,P(t)):(0,n.markdownSpace)(t)?(e.consume(t),T):(e.consume(t),I)}function M(t){return t===a?(e.consume(t),a=void 0,N):null===t?i(t):(0,n.markdownLineEnding)(t)?(s=M,P(t)):(e.consume(t),M)}function I(t){return null===t||34===t||39===t||60===t||61===t||96===t?i(t):47===t||62===t||(0,n.markdownLineEndingOrSpace)(t)?A(t):(e.consume(t),I)}function N(e){return 47===e||62===e||(0,n.markdownLineEndingOrSpace)(e)?A(e):i(e)}function D(t){return 62===t?(e.consume(t),e.exit("htmlTextData"),e.exit("htmlText"),r):i(t)}function P(t){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),R}function R(r){return(0,n.markdownSpace)(r)?(0,t.factorySpace)(e,O,"linePrefix",l.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(r):O(r)}function O(t){return e.enter("htmlTextData"),s(t)}}}},169020:e=>{"use strict";e.s({labelEnd:()=>u});var t=e.i(215519),n=e.i(284975),r=e.i(288120),i=e.i(252391),a=e.i(32633),o=e.i(906112),s=e.i(967148),l=e.i(192784);let u={name:"labelEnd",resolveAll:function(e){let t=-1,n=[];for(;++t<e.length;){let r=e[t][1];if(n.push(e[t]),"labelImage"===r.type||"labelLink"===r.type||"labelEnd"===r.type){let e="labelImage"===r.type?4:2;r.type="data",t+=e}}return e.length!==n.length&&(0,o.splice)(e,0,e.length,n),e},resolveTo:function(e,t){let n,r,i,a,s=e.length,u=0;for(;s--;)if(n=e[s][1],r){if("link"===n.type||"labelLink"===n.type&&n._inactive)break;"enter"===e[s][0]&&"labelLink"===n.type&&(n._inactive=!0)}else if(i){if("enter"===e[s][0]&&("labelImage"===n.type||"labelLink"===n.type)&&!n._balanced&&(r=s,"labelLink"!==n.type)){u=2;break}}else"labelEnd"===n.type&&(i=s);let c={type:"labelLink"===e[r][1].type?"link":"image",start:{...e[r][1].start},end:{...e[e.length-1][1].end}},d={type:"label",start:{...e[r][1].start},end:{...e[i][1].end}},h={type:"labelText",start:{...e[r+u+2][1].end},end:{...e[i-2][1].start}};return a=[["enter",c,t],["enter",d,t]],a=(0,o.push)(a,e.slice(r+1,r+u+3)),a=(0,o.push)(a,[["enter",h,t]]),a=(0,o.push)(a,(0,l.resolveAll)(t.parser.constructs.insideSpan.null,e.slice(r+u+4,i-3),t)),a=(0,o.push)(a,[["exit",h,t],e[i-2],e[i-1],["exit",d,t]]),a=(0,o.push)(a,e.slice(i+1)),a=(0,o.push)(a,[["exit",c,t]]),(0,o.splice)(e,r,e.length,a),e},tokenize:function(e,t,n){let r,i,a=this,o=a.events.length;for(;o--;)if(("labelImage"===a.events[o][1].type||"labelLink"===a.events[o][1].type)&&!a.events[o][1]._balanced){r=a.events[o][1];break}return function(t){return r?r._inactive?f(t):(i=a.parser.defined.includes((0,s.normalizeIdentifier)(a.sliceSerialize({start:r.end,end:a.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelEnd"),l):n(t)};function l(t){return 40===t?e.attempt(c,p,i?p:f)(t):91===t?e.attempt(d,p,i?u:f)(t):i?p(t):f(t)}function u(t){return e.attempt(h,p,f)(t)}function p(e){return t(e)}function f(e){return r._balanced=!0,n(e)}}},c={tokenize:function(e,n,o){return function(t){return e.enter("resource"),e.enter("resourceMarker"),e.consume(t),e.exit("resourceMarker"),s};function s(t){return(0,a.markdownLineEndingOrSpace)(t)?(0,i.factoryWhitespace)(e,l)(t):l(t)}function l(n){return 41===n?p(n):(0,t.factoryDestination)(e,u,c,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(n)}function u(t){return(0,a.markdownLineEndingOrSpace)(t)?(0,i.factoryWhitespace)(e,d)(t):p(t)}function c(e){return o(e)}function d(t){return 34===t||39===t||40===t?(0,r.factoryTitle)(e,h,o,"resourceTitle","resourceTitleMarker","resourceTitleString")(t):p(t)}function h(t){return(0,a.markdownLineEndingOrSpace)(t)?(0,i.factoryWhitespace)(e,p)(t):p(t)}function p(t){return 41===t?(e.enter("resourceMarker"),e.consume(t),e.exit("resourceMarker"),e.exit("resource"),n):o(t)}}},d={tokenize:function(e,t,r){let i=this;return function(t){return n.factoryLabel.call(i,e,a,o,"reference","referenceMarker","referenceString")(t)};function a(e){return i.parser.defined.includes((0,s.normalizeIdentifier)(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)))?t(e):r(e)}function o(e){return r(e)}}},h={tokenize:function(e,t,n){return function(t){return e.enter("reference"),e.enter("referenceMarker"),e.consume(t),e.exit("referenceMarker"),r};function r(r){return 93===r?(e.enter("referenceMarker"),e.consume(r),e.exit("referenceMarker"),e.exit("reference"),t):n(r)}}}},543335:e=>{"use strict";e.s({labelStartImage:()=>t});let t={name:"labelStartImage",resolveAll:e.i(169020).labelEnd.resolveAll,tokenize:function(e,t,n){let r=this;return function(t){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(t),e.exit("labelImageMarker"),i};function i(t){return 91===t?(e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelImage"),a):n(t)}function a(e){return 94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?n(e):t(e)}}}},263843:e=>{"use strict";e.s({labelStartLink:()=>t});let t={name:"labelStartLink",resolveAll:e.i(169020).labelEnd.resolveAll,tokenize:function(e,t,n){let r=this;return function(t){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelLink"),i};function i(e){return 94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?n(e):t(e)}}}},506710:e=>{"use strict";e.s({lineEnding:()=>n});var t=e.i(945771);let n={name:"lineEnding",tokenize:function(e,n){return function(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),(0,t.factorySpace)(e,n,"linePrefix")}}}},25032:e=>{"use strict";e.s({thematicBreak:()=>r});var t=e.i(945771),n=e.i(32633);let r={name:"thematicBreak",tokenize:function(e,r,i){let a,o=0;return function(s){var l;return e.enter("thematicBreak"),a=l=s,function s(l){return l===a?(e.enter("thematicBreakSequence"),function r(i){return i===a?(e.consume(i),o++,r):(e.exit("thematicBreakSequence"),(0,n.markdownSpace)(i)?(0,t.factorySpace)(e,s,"whitespace")(i):s(i))}(l)):o>=3&&(null===l||(0,n.markdownLineEnding)(l))?(e.exit("thematicBreak"),r(l)):i(l)}(l)}}}},467246:e=>{"use strict";e.s({list:()=>a});var t=e.i(945771),n=e.i(32633),r=e.i(276842),i=e.i(25032);let a={continuation:{tokenize:function(e,i,o){let l=this;return l.containerState._closeFlow=void 0,e.check(r.blankLine,function(n){return l.containerState.furtherBlankLines=l.containerState.furtherBlankLines||l.containerState.initialBlankLine,(0,t.factorySpace)(e,i,"listItemIndent",l.containerState.size+1)(n)},function(t){return l.containerState.furtherBlankLines||!(0,n.markdownSpace)(t)?(l.containerState.furtherBlankLines=void 0,l.containerState.initialBlankLine=void 0,u(t)):(l.containerState.furtherBlankLines=void 0,l.containerState.initialBlankLine=void 0,e.attempt(s,i,u)(t))});function u(n){return l.containerState._closeFlow=!0,l.interrupt=void 0,(0,t.factorySpace)(e,e.attempt(a,i,o),"linePrefix",l.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(n)}}},exit:function(e){e.exit(this.containerState.type)},name:"list",tokenize:function(e,t,a){let s=this,l=s.events[s.events.length-1],u=l&&"linePrefix"===l[1].type?l[2].sliceSerialize(l[1],!0).length:0,c=0;return function(t){let r=s.containerState.type||(42===t||43===t||45===t?"listUnordered":"listOrdered");if("listUnordered"===r?!s.containerState.marker||t===s.containerState.marker:(0,n.asciiDigit)(t)){if(s.containerState.type||(s.containerState.type=r,e.enter(r,{_container:!0})),"listUnordered"===r)return e.enter("listItemPrefix"),42===t||45===t?e.check(i.thematicBreak,a,d)(t):d(t);if(!s.interrupt||49===t)return e.enter("listItemPrefix"),e.enter("listItemValue"),function t(r){return(0,n.asciiDigit)(r)&&++c<10?(e.consume(r),t):(!s.interrupt||c<2)&&(s.containerState.marker?r===s.containerState.marker:41===r||46===r)?(e.exit("listItemValue"),d(r)):a(r)}(t)}return a(t)};function d(t){return e.enter("listItemMarker"),e.consume(t),e.exit("listItemMarker"),s.containerState.marker=s.containerState.marker||t,e.check(r.blankLine,s.interrupt?a:h,e.attempt(o,f,p))}function h(e){return s.containerState.initialBlankLine=!0,u++,f(e)}function p(t){return(0,n.markdownSpace)(t)?(e.enter("listItemPrefixWhitespace"),e.consume(t),e.exit("listItemPrefixWhitespace"),f):a(t)}function f(n){return s.containerState.size=u+s.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(n)}}},o={partial:!0,tokenize:function(e,r,i){let a=this;return(0,t.factorySpace)(e,function(e){let t=a.events[a.events.length-1];return!(0,n.markdownSpace)(e)&&t&&"listItemPrefixWhitespace"===t[1].type?r(e):i(e)},"listItemPrefixWhitespace",a.parser.constructs.disable.null.includes("codeIndented")?void 0:5)}},s={partial:!0,tokenize:function(e,n,r){let i=this;return(0,t.factorySpace)(e,function(e){let t=i.events[i.events.length-1];return t&&"listItemIndent"===t[1].type&&t[2].sliceSerialize(t[1],!0).length===i.containerState.size?n(e):r(e)},"listItemIndent",i.containerState.size+1)}}},764130:e=>{"use strict";e.s({setextUnderline:()=>r});var t=e.i(945771),n=e.i(32633);let r={name:"setextUnderline",resolveTo:function(e,t){let n,r,i,a=e.length;for(;a--;)if("enter"===e[a][0]){if("content"===e[a][1].type){n=a;break}"paragraph"===e[a][1].type&&(r=a)}else"content"===e[a][1].type&&e.splice(a,1),i||"definition"!==e[a][1].type||(i=a);let o={type:"setextHeading",start:{...e[n][1].start},end:{...e[e.length-1][1].end}};return e[r][1].type="setextHeadingText",i?(e.splice(r,0,["enter",o,t]),e.splice(i+1,0,["exit",e[n][1],t]),e[n][1].end={...e[i][1].end}):e[n][1]=o,e.push(["exit",o,t]),e},tokenize:function(e,r,i){let a,o=this;return function(r){var l;let u,c=o.events.length;for(;c--;)if("lineEnding"!==o.events[c][1].type&&"linePrefix"!==o.events[c][1].type&&"content"!==o.events[c][1].type){u="paragraph"===o.events[c][1].type;break}return!o.parser.lazy[o.now().line]&&(o.interrupt||u)?(e.enter("setextHeadingLine"),a=r,l=r,e.enter("setextHeadingLineSequence"),function r(i){return i===a?(e.consume(i),r):(e.exit("setextHeadingLineSequence"),(0,n.markdownSpace)(i)?(0,t.factorySpace)(e,s,"lineSuffix")(i):s(i))}(l)):i(r)};function s(t){return null===t||(0,n.markdownLineEnding)(t)?(e.exit("setextHeadingLine"),r(t)):i(t)}}}},25002:e=>{"use strict";e.s({attentionMarkers:()=>I,contentInitial:()=>_,disable:()=>N,document:()=>S,flow:()=>A,flowInitial:()=>C,insideSpan:()=>M,string:()=>E,text:()=>T});var t=e.i(824041),n=e.i(931698),r=e.i(776281),i=e.i(827839),a=e.i(158170),o=e.i(783123),s=e.i(103056),l=e.i(397133),u=e.i(273828),c=e.i(572304),d=e.i(761707),h=e.i(984105),p=e.i(634188),f=e.i(169020),m=e.i(543335),g=e.i(263843),y=e.i(506710),b=e.i(467246),x=e.i(764130),w=e.i(25032),k=e.i(663203);let S={42:b.list,43:b.list,45:b.list,48:b.list,49:b.list,50:b.list,51:b.list,52:b.list,53:b.list,54:b.list,55:b.list,56:b.list,57:b.list,62:r.blockQuote},_={91:u.definition},C={[-2]:s.codeIndented,[-1]:s.codeIndented,32:s.codeIndented},A={35:d.headingAtx,42:w.thematicBreak,45:[x.setextUnderline,w.thematicBreak],60:h.htmlFlow,61:x.setextUnderline,95:w.thematicBreak,96:o.codeFenced,126:o.codeFenced},E={38:a.characterReference,92:i.characterEscape},T={[-5]:y.lineEnding,[-4]:y.lineEnding,[-3]:y.lineEnding,33:m.labelStartImage,38:a.characterReference,42:t.attention,60:[n.autolink,p.htmlText],91:g.labelStartLink,92:[c.hardBreakEscape,i.characterEscape],93:f.labelEnd,95:t.attention,96:l.codeText},M={null:[t.attention,k.resolver]},I={null:[42,95]},N={null:[]}},258863:e=>{"use strict";e.s({createTokenizer:()=>i});var t=e.i(32633),n=e.i(906112),r=e.i(192784);function i(e,i,a){let o={_bufferIndex:-1,_index:0,line:a&&a.line||1,column:a&&a.column||1,offset:a&&a.offset||0},s={},l=[],u=[],c=[],d={attempt:y(function(e,t){b(e,t.from)}),check:y(g),consume:function(e){(0,t.markdownLineEnding)(e)?(o.line++,o.column=1,o.offset+=-3===e?2:1,x()):-1!==e&&(o.column++,o.offset++),o._bufferIndex<0?o._index++:(o._bufferIndex++,o._bufferIndex===u[o._index].length&&(o._bufferIndex=-1,o._index++)),h.previous=e},enter:function(e,t){let n=t||{};return n.type=e,n.start=m(),h.events.push(["enter",n,h]),c.push(n),n},exit:function(e){let t=c.pop();return t.end=m(),h.events.push(["exit",t,h]),t},interrupt:y(g,{interrupt:!0})},h={code:null,containerState:{},defineSkip:function(e){s[e.line]=e.column,x()},events:[],now:m,parser:e,previous:null,sliceSerialize:function(e,t){return function(e,t){let n,r=-1,i=[];for(;++r<e.length;){let a,o=e[r];if("string"==typeof o)a=o;else switch(o){case -5:a="\r";break;case -4:a="\n";break;case -3:a="\r\n";break;case -2:a=t?" ":"	";break;case -1:if(!t&&n)continue;a=" ";break;default:a=String.fromCharCode(o)}n=-2===o,i.push(a)}return i.join("")}(f(e),t)},sliceStream:f,write:function(e){return(u=(0,n.push)(u,e),function(){let e;for(;o._index<u.length;){let n=u[o._index];if("string"==typeof n)for(e=o._index,o._bufferIndex<0&&(o._bufferIndex=0);o._index===e&&o._bufferIndex<n.length;){var t;t=n.charCodeAt(o._bufferIndex),p=p(t)}else p=p(n)}}(),null!==u[u.length-1])?[]:(b(i,0),h.events=(0,r.resolveAll)(l,h.events,h),h.events)}},p=i.tokenize.call(h,d);return i.resolveAll&&l.push(i),h;function f(e){return function(e,t){let n,r=t.start._index,i=t.start._bufferIndex,a=t.end._index,o=t.end._bufferIndex;if(r===a)n=[e[r].slice(i,o)];else{if(n=e.slice(r,a),i>-1){let e=n[0];"string"==typeof e?n[0]=e.slice(i):n.shift()}o>0&&n.push(e[a].slice(0,o))}return n}(u,e)}function m(){let{_bufferIndex:e,_index:t,line:n,column:r,offset:i}=o;return{_bufferIndex:e,_index:t,line:n,column:r,offset:i}}function g(e,t){t.restore()}function y(e,t){return function(n,r,i){var a;let s,l,u,p;return Array.isArray(n)?f(n):"tokenize"in n?f([n]):(a=n,function(e){let t=null!==e&&a[e],n=null!==e&&a.null;return f([...Array.isArray(t)?t:t?[t]:[],...Array.isArray(n)?n:n?[n]:[]])(e)});function f(e){return(s=e,l=0,0===e.length)?i:g(e[l])}function g(e){return function(n){return(p=function(){let e=m(),t=h.previous,n=h.currentConstruct,r=h.events.length,i=Array.from(c);return{from:r,restore:function(){o=e,h.previous=t,h.currentConstruct=n,h.events.length=r,c=i,x()}}}(),u=e,e.partial||(h.currentConstruct=e),e.name&&h.parser.constructs.disable.null.includes(e.name))?b(n):e.tokenize.call(t?Object.assign(Object.create(h),t):h,d,y,b)(n)}}function y(t){return e(u,p),r}function b(e){return(p.restore(),++l<s.length)?g(s[l]):i}}}function b(e,t){e.resolveAll&&!l.includes(e)&&l.push(e),e.resolve&&(0,n.splice)(h.events,t,h.events.length-t,e.resolve(h.events.slice(t),h)),e.resolveTo&&(h.events=e.resolveTo(h.events,h))}function x(){o.line in s&&o.column<2&&(o.column=s[o.line],o.offset+=s[o.line]-1)}}},178669:e=>{"use strict";e.s({parse:()=>l});var t=e.i(862665),n=e.i(517971),r=e.i(193709),i=e.i(799439),a=e.i(663203),o=e.i(25002),s=e.i(258863);function l(e){let l={constructs:(0,t.combineExtensions)([o,...(e||{}).extensions||[]]),content:u(n.content),defined:[],document:u(r.document),flow:u(i.flow),lazy:{},string:u(a.string),text:u(a.text)};return l;function u(e){return function(t){return(0,s.createTokenizer)(l,e,t)}}}},963268:e=>{"use strict";e.s({postprocess:()=>n});var t=e.i(493431);function n(e){for(;!(0,t.subtokenize)(e););return e}},46378:e=>{"use strict";e.s({preprocess:()=>n});let t=/[\0\t\n\r]/g;function n(){let e,n=1,r="",i=!0;return function(a,o,s){let l,u,c,d,h,p=[];for(a=r+("string"==typeof a?a.toString():new TextDecoder(o||void 0).decode(a)),c=0,r="",i&&(65279===a.charCodeAt(0)&&c++,i=void 0);c<a.length;){if(t.lastIndex=c,d=(l=t.exec(a))&&void 0!==l.index?l.index:a.length,h=a.charCodeAt(d),!l){r=a.slice(c);break}if(10===h&&c===d&&e)p.push(-3),e=void 0;else switch(e&&(p.push(-5),e=void 0),c<d&&(p.push(a.slice(c,d)),n+=d-c),h){case 0:p.push(65533),n++;break;case 9:for(u=4*Math.ceil(n/4),p.push(-2);n++<u;)p.push(-1);break;case 10:p.push(-4),n=1;break;default:e=!0,n=1}c=d+1}return s&&(e&&p.push(-5),r&&p.push(r),p.push(null)),p}}},153196:e=>{"use strict";function t(e,t){let n=Number.parseInt(e,t);return n<9||11===n||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(65535&n)==65535||(65535&n)==65534||n>1114111?"":String.fromCodePoint(n)}e.s({decodeNumericCharacterReference:()=>t})},608345:e=>{"use strict";e.s({decodeString:()=>i});var t=e.i(594776),n=e.i(153196);let r=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function i(e){return e.replace(r,a)}function a(e,r,i){if(r)return r;if(35===i.charCodeAt(0)){let e=i.charCodeAt(1),t=120===e||88===e;return(0,n.decodeNumericCharacterReference)(i.slice(t?2:1),t?16:10)}return(0,t.decodeNamedCharacterReference)(i)||e}},709661:e=>{"use strict";e.s({fromMarkdown:()=>d});var t=e.i(863653),n=e.i(178669),r=e.i(963268),i=e.i(46378),a=e.i(153196),o=e.i(608345),s=e.i(967148),l=e.i(594776),u=e.i(772225);let c={}.hasOwnProperty;function d(e,d,f){return"string"!=typeof d&&(f=d,d=void 0),(function(e){let n={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:i(E),autolinkProtocol:b,autolinkEmail:b,atxHeading:i(_),blockQuote:i(function(){return{type:"blockquote",children:[]}}),characterEscape:b,characterReference:b,codeFenced:i(S),codeFencedFenceInfo:d,codeFencedFenceMeta:d,codeIndented:i(S,d),codeText:i(function(){return{type:"inlineCode",value:""}},d),codeTextData:b,data:b,codeFlowValue:b,definition:i(function(){return{type:"definition",identifier:"",label:null,title:null,url:""}}),definitionDestinationString:d,definitionLabelString:d,definitionTitleString:d,emphasis:i(function(){return{type:"emphasis",children:[]}}),hardBreakEscape:i(C),hardBreakTrailing:i(C),htmlFlow:i(A,d),htmlFlowData:b,htmlText:i(A,d),htmlTextData:b,image:i(function(){return{type:"image",title:null,url:"",alt:null}}),label:d,link:i(E),listItem:i(function(e){return{type:"listItem",spread:e._spread,checked:null,children:[]}}),listItemValue:function(e){this.data.expectingFirstListItemValue&&(this.stack[this.stack.length-2].start=Number.parseInt(this.sliceSerialize(e),10),this.data.expectingFirstListItemValue=void 0)},listOrdered:i(T,function(){this.data.expectingFirstListItemValue=!0}),listUnordered:i(T),paragraph:i(function(){return{type:"paragraph",children:[]}}),reference:function(){this.data.referenceType="collapsed"},referenceString:d,resourceDestinationString:d,resourceTitleString:d,setextHeading:i(_),strong:i(function(){return{type:"strong",children:[]}}),thematicBreak:i(function(){return{type:"thematicBreak"}})},exit:{atxHeading:m(),atxHeadingSequence:function(e){let t=this.stack[this.stack.length-1];t.depth||(t.depth=this.sliceSerialize(e).length)},autolink:m(),autolinkEmail:function(e){x.call(this,e),this.stack[this.stack.length-1].url="mailto:"+this.sliceSerialize(e)},autolinkProtocol:function(e){x.call(this,e),this.stack[this.stack.length-1].url=this.sliceSerialize(e)},blockQuote:m(),characterEscapeValue:x,characterReferenceMarkerHexadecimal:k,characterReferenceMarkerNumeric:k,characterReferenceValue:function(e){let t,n=this.sliceSerialize(e),r=this.data.characterReferenceType;r?(t=(0,a.decodeNumericCharacterReference)(n,"characterReferenceMarkerNumeric"===r?10:16),this.data.characterReferenceType=void 0):t=(0,l.decodeNamedCharacterReference)(n);let i=this.stack[this.stack.length-1];i.value+=t},characterReference:function(e){this.stack.pop().position.end=h(e.end)},codeFenced:m(function(){let e=this.resume();this.stack[this.stack.length-1].value=e.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}),codeFencedFence:function(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)},codeFencedFenceInfo:function(){let e=this.resume();this.stack[this.stack.length-1].lang=e},codeFencedFenceMeta:function(){let e=this.resume();this.stack[this.stack.length-1].meta=e},codeFlowValue:x,codeIndented:m(function(){let e=this.resume();this.stack[this.stack.length-1].value=e.replace(/(\r?\n|\r)$/g,"")}),codeText:m(function(){let e=this.resume();this.stack[this.stack.length-1].value=e}),codeTextData:x,data:x,definition:m(),definitionDestinationString:function(){let e=this.resume();this.stack[this.stack.length-1].url=e},definitionLabelString:function(e){let t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=(0,s.normalizeIdentifier)(this.sliceSerialize(e)).toLowerCase()},definitionTitleString:function(){let e=this.resume();this.stack[this.stack.length-1].title=e},emphasis:m(),hardBreakEscape:m(w),hardBreakTrailing:m(w),htmlFlow:m(function(){let e=this.resume();this.stack[this.stack.length-1].value=e}),htmlFlowData:x,htmlText:m(function(){let e=this.resume();this.stack[this.stack.length-1].value=e}),htmlTextData:x,image:m(function(){let e=this.stack[this.stack.length-1];if(this.data.inReference){let t=this.data.referenceType||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;this.data.referenceType=void 0}),label:function(){let e=this.stack[this.stack.length-1],t=this.resume(),n=this.stack[this.stack.length-1];this.data.inReference=!0,"link"===n.type?n.children=e.children:n.alt=t},labelText:function(e){let t=this.sliceSerialize(e),n=this.stack[this.stack.length-2];n.label=(0,o.decodeString)(t),n.identifier=(0,s.normalizeIdentifier)(t).toLowerCase()},lineEnding:function(e){let t=this.stack[this.stack.length-1];if(this.data.atHardBreak){t.children[t.children.length-1].position.end=h(e.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&n.canContainEols.includes(t.type)&&(b.call(this,e),x.call(this,e))},link:m(function(){let e=this.stack[this.stack.length-1];if(this.data.inReference){let t=this.data.referenceType||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;this.data.referenceType=void 0}),listItem:m(),listOrdered:m(),listUnordered:m(),paragraph:m(),referenceString:function(e){let t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=(0,s.normalizeIdentifier)(this.sliceSerialize(e)).toLowerCase(),this.data.referenceType="full"},resourceDestinationString:function(){let e=this.resume();this.stack[this.stack.length-1].url=e},resourceTitleString:function(){let e=this.resume();this.stack[this.stack.length-1].title=e},resource:function(){this.data.inReference=void 0},setextHeading:m(function(){this.data.setextHeadingSlurpLineEnding=void 0}),setextHeadingLineSequence:function(e){this.stack[this.stack.length-1].depth=61===this.sliceSerialize(e).codePointAt(0)?1:2},setextHeadingText:function(){this.data.setextHeadingSlurpLineEnding=!0},strong:m(),thematicBreak:m()}};!function e(t,n){let r=-1;for(;++r<n.length;){let i=n[r];Array.isArray(i)?e(t,i):function(e,t){let n;for(n in t)if(c.call(t,n))switch(n){case"canContainEols":{let r=t[n];r&&e[n].push(...r);break}case"transforms":{let r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{let r=t[n];r&&Object.assign(e[n],r)}}}(t,i)}}(n,(e||{}).mdastExtensions||[]);let r={};return function(e){let t={type:"root",children:[]},i={stack:[t],tokenStack:[],config:n,enter:f,exit:g,buffer:d,resume:y,data:r},a=[],o=-1;for(;++o<e.length;)("listOrdered"===e[o][1].type||"listUnordered"===e[o][1].type)&&("enter"===e[o][0]?a.push(o):o=function(e,t,n){let r,i,a,o,s=t-1,l=-1,u=!1;for(;++s<=n;){let t=e[s];switch(t[1].type){case"listUnordered":case"listOrdered":case"blockQuote":"enter"===t[0]?l++:l--,o=void 0;break;case"lineEndingBlank":"enter"===t[0]&&(!r||o||l||a||(a=s),o=void 0);break;case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:o=void 0}if(!l&&"enter"===t[0]&&"listItemPrefix"===t[1].type||-1===l&&"exit"===t[0]&&("listUnordered"===t[1].type||"listOrdered"===t[1].type)){if(r){let o=s;for(i=void 0;o--;){let t=e[o];if("lineEnding"===t[1].type||"lineEndingBlank"===t[1].type){if("exit"===t[0])continue;i&&(e[i][1].type="lineEndingBlank",u=!0),t[1].type="lineEnding",i=o}else if("linePrefix"===t[1].type||"blockQuotePrefix"===t[1].type||"blockQuotePrefixWhitespace"===t[1].type||"blockQuoteMarker"===t[1].type||"listItemIndent"===t[1].type);else break}a&&(!i||a<i)&&(r._spread=!0),r.end=Object.assign({},i?e[i][1].start:t[1].end),e.splice(i||s,0,["exit",r,t[2]]),s++,n++}if("listItemPrefix"===t[1].type){let i={type:"listItem",_spread:!1,start:Object.assign({},t[1].start),end:void 0};r=i,e.splice(s,0,["enter",i,t[2]]),s++,n++,a=void 0,o=!0}}}return e[t][1]._spread=u,n}(e,a.pop(),o));for(o=-1;++o<e.length;){let t=n[e[o][0]];c.call(t,e[o][1].type)&&t[e[o][1].type].call(Object.assign({sliceSerialize:e[o][2].sliceSerialize},i),e[o][1])}if(i.tokenStack.length>0){let e=i.tokenStack[i.tokenStack.length-1];(e[1]||p).call(i,void 0,e[0])}for(t.position={start:h(e.length>0?e[0][1].start:{line:1,column:1,offset:0}),end:h(e.length>0?e[e.length-2][1].end:{line:1,column:1,offset:0})},o=-1;++o<n.transforms.length;)t=n.transforms[o](t)||t;return t};function i(e,t){return function(n){f.call(this,e(n),n),t&&t.call(this,n)}}function d(){this.stack.push({type:"fragment",children:[]})}function f(e,t,n){this.stack[this.stack.length-1].children.push(e),this.stack.push(e),this.tokenStack.push([t,n||void 0]),e.position={start:h(t.start),end:void 0}}function m(e){return function(t){e&&e.call(this,t),g.call(this,t)}}function g(e,t){let n=this.stack.pop(),r=this.tokenStack.pop();if(r)r[0].type!==e.type&&(t?t.call(this,e,r[0]):(r[1]||p).call(this,e,r[0]));else throw Error("Cannot close `"+e.type+"` ("+(0,u.stringifyPosition)({start:e.start,end:e.end})+"): its not open");n.position.end=h(e.end)}function y(){return(0,t.toString)(this.stack.pop())}function b(e){let t=this.stack[this.stack.length-1].children,n=t[t.length-1];n&&"text"===n.type||((n={type:"text",value:""}).position={start:h(e.start),end:void 0},t.push(n)),this.stack.push(n)}function x(e){let t=this.stack.pop();t.value+=this.sliceSerialize(e),t.position.end=h(e.end)}function w(){this.data.atHardBreak=!0}function k(e){this.data.characterReferenceType=e.type}function S(){return{type:"code",lang:null,meta:null,value:""}}function _(){return{type:"heading",depth:0,children:[]}}function C(){return{type:"break"}}function A(){return{type:"html",value:""}}function E(){return{type:"link",title:null,url:"",children:[]}}function T(e){return{type:"list",ordered:"listOrdered"===e.type,start:null,spread:e._spread,children:[]}}})(f)((0,r.postprocess)((0,n.parse)(f).document().write((0,i.preprocess)()(e,d,!0))))}function h(e){return{line:e.line,column:e.column,offset:e.offset}}function p(e,t){if(e)throw Error("Cannot close `"+e.type+"` ("+(0,u.stringifyPosition)({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+(0,u.stringifyPosition)({start:t.start,end:t.end})+") is open");throw Error("Cannot close document, a token (`"+t.type+"`, "+(0,u.stringifyPosition)({start:t.start,end:t.end})+") is still open")}},284866:e=>{"use strict";e.s({default:()=>n});var t=e.i(709661);function n(e){let n=this;n.parser=function(r){return(0,t.fromMarkdown)(r,{...n.data("settings"),...e,extensions:n.data("micromarkExtensions")||[],mdastExtensions:n.data("fromMarkdownExtensions")||[]})}}},864159:e=>{"use strict";e.s({ARRAY:()=>r,BIGINT:()=>c,DATE:()=>a,ERROR:()=>u,MAP:()=>s,OBJECT:()=>i,PRIMITIVE:()=>n,REGEXP:()=>o,SET:()=>l,VOID:()=>t});let t=-1,n=0,r=1,i=2,a=3,o=4,s=5,l=6,u=7,c=8},685226:e=>{"use strict";e.s({deserialize:()=>r});var t=e.i(864159);let n="object"==typeof self?self:globalThis,r=e=>((e,r)=>{let i=(t,n)=>(e.set(n,t),t),a=o=>{if(e.has(o))return e.get(o);let[s,l]=r[o];switch(s){case t.PRIMITIVE:case t.VOID:return i(l,o);case t.ARRAY:{let e=i([],o);for(let t of l)e.push(a(t));return e}case t.OBJECT:{let e=i({},o);for(let[t,n]of l)e[a(t)]=a(n);return e}case t.DATE:return i(new Date(l),o);case t.REGEXP:{let{source:e,flags:t}=l;return i(new RegExp(e,t),o)}case t.MAP:{let e=i(new Map,o);for(let[t,n]of l)e.set(a(t),a(n));return e}case t.SET:{let e=i(new Set,o);for(let t of l)e.add(a(t));return e}case t.ERROR:{let{name:e,message:t}=l;return i(new n[e](t),o)}case t.BIGINT:return i(BigInt(l),o);case"BigInt":return i(Object(BigInt(l)),o);case"ArrayBuffer":return i(new Uint8Array(l).buffer,l);case"DataView":{let{buffer:e}=new Uint8Array(l);return i(new DataView(e),l)}}return i(new n[s](l),o)};return a})(new Map,e)(0)},338409:e=>{"use strict";e.s({serialize:()=>o});var t=e.i(864159);let{toString:n}={},{keys:r}=Object,i=e=>{let r=typeof e;if("object"!==r||!e)return[t.PRIMITIVE,r];let i=n.call(e).slice(8,-1);switch(i){case"Array":return[t.ARRAY,""];case"Object":return[t.OBJECT,""];case"Date":return[t.DATE,""];case"RegExp":return[t.REGEXP,""];case"Map":return[t.MAP,""];case"Set":return[t.SET,""];case"DataView":return[t.ARRAY,i]}return i.includes("Array")?[t.ARRAY,i]:i.includes("Error")?[t.ERROR,i]:[t.OBJECT,i]},a=e=>{let[n,r]=e;return n===t.PRIMITIVE&&("function"===r||"symbol"===r)},o=function(e){let{json:n,lossy:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=[];return((e,n,o,s)=>{let l=(e,t)=>{let n=s.push(e)-1;return o.set(t,n),n},u=s=>{if(o.has(s))return o.get(s);let[c,d]=i(s);switch(c){case t.PRIMITIVE:{let n=s;switch(d){case"bigint":c=t.BIGINT,n=s.toString();break;case"function":case"symbol":if(e)throw TypeError("unable to serialize "+d);n=null;break;case"undefined":return l([t.VOID],s)}return l([c,n],s)}case t.ARRAY:{if(d){let e=s;return"DataView"===d?e=new Uint8Array(s.buffer):"ArrayBuffer"===d&&(e=new Uint8Array(s)),l([d,[...e]],s)}let e=[],t=l([c,e],s);for(let t of s)e.push(u(t));return t}case t.OBJECT:{if(d)switch(d){case"BigInt":return l([d,s.toString()],s);case"Boolean":case"Number":case"String":return l([d,s.valueOf()],s)}if(n&&"toJSON"in s)return u(s.toJSON());let t=[],o=l([c,t],s);for(let n of r(s))(e||!a(i(s[n])))&&t.push([u(n),u(s[n])]);return o}case t.DATE:return l([c,s.toISOString()],s);case t.REGEXP:{let{source:e,flags:t}=s;return l([c,{source:e,flags:t}],s)}case t.MAP:{let t=[],n=l([c,t],s);for(let[n,r]of s)(e||!(a(i(n))||a(i(r))))&&t.push([u(n),u(r)]);return n}case t.SET:{let t=[],n=l([c,t],s);for(let n of s)(e||!a(i(n)))&&t.push(u(n));return n}}let{message:h}=s;return l([c,{name:d,message:h}],s)};return u})(!(n||o),!!n,new Map,s)(e),s}},502646:e=>{"use strict";e.s({default:()=>r});var t=e.i(685226),n=e.i(338409);let r="function"==typeof structuredClone?(e,r)=>r&&("json"in r||"lossy"in r)?(0,t.deserialize)((0,n.serialize)(e,r)):structuredClone(e):(e,r)=>(0,t.deserialize)((0,n.serialize)(e,r))},475414:e=>{"use strict";e.s({footer:()=>a});var t=e.i(502646),n=e.i(883175);function r(e,t){let n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function i(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function a(e){let a="string"==typeof e.options.clobberPrefix?e.options.clobberPrefix:"user-content-",o=e.options.footnoteBackContent||r,s=e.options.footnoteBackLabel||i,l=e.options.footnoteLabel||"Footnotes",u=e.options.footnoteLabelTagName||"h2",c=e.options.footnoteLabelProperties||{className:["sr-only"]},d=[],h=-1;for(;++h<e.footnoteOrder.length;){let t=e.footnoteById.get(e.footnoteOrder[h]);if(!t)continue;let r=e.all(t),i=String(t.identifier).toUpperCase(),l=(0,n.normalizeUri)(i.toLowerCase()),u=0,c=[],p=e.footnoteCounts.get(i);for(;void 0!==p&&++u<=p;){c.length>0&&c.push({type:"text",value:" "});let e="string"==typeof o?o:o(h,u);"string"==typeof e&&(e={type:"text",value:e}),c.push({type:"element",tagName:"a",properties:{href:"#"+a+"fnref-"+l+(u>1?"-"+u:""),dataFootnoteBackref:"",ariaLabel:"string"==typeof s?s:s(h,u),className:["data-footnote-backref"]},children:Array.isArray(e)?e:[e]})}let f=r[r.length-1];if(f&&"element"===f.type&&"p"===f.tagName){let e=f.children[f.children.length-1];e&&"text"===e.type?e.value+=" ":f.children.push({type:"text",value:" "}),f.children.push(...c)}else r.push(...c);let m={type:"element",tagName:"li",properties:{id:a+"fn-"+l},children:e.wrap(r,!0)};e.patch(t,m),d.push(m)}if(0!==d.length)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:u,properties:{...(0,t.default)(c),id:"footnote-label"},children:[{type:"text",value:l}]},{type:"text",value:"\n"},{type:"element",tagName:"ol",properties:{},children:e.wrap(d,!0)},{type:"text",value:"\n"}]}}},995702:e=>{"use strict";function t(e,t){let n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}e.s({blockquote:()=>t})},330942:e=>{"use strict";function t(e,t){let n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:"\n"}]}e.s({hardBreak:()=>t})},445083:e=>{"use strict";function t(e,t){let n=t.value?t.value+"\n":"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i={type:"element",tagName:"pre",properties:{},children:[i=e.applyData(t,i)]},e.patch(t,i),i}e.s({code:()=>t})},468764:e=>{"use strict";function t(e,t){let n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}e.s({strikethrough:()=>t})},906211:e=>{"use strict";function t(e,t){let n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}e.s({emphasis:()=>t})},291590:e=>{"use strict";e.s({footnoteReference:()=>n});var t=e.i(883175);function n(e,n){let r,i="string"==typeof e.options.clobberPrefix?e.options.clobberPrefix:"user-content-",a=String(n.identifier).toUpperCase(),o=(0,t.normalizeUri)(a.toLowerCase()),s=e.footnoteOrder.indexOf(a),l=e.footnoteCounts.get(a);void 0===l?(l=0,e.footnoteOrder.push(a),r=e.footnoteOrder.length):r=s+1,l+=1,e.footnoteCounts.set(a,l);let u={type:"element",tagName:"a",properties:{href:"#"+i+"fn-"+o,id:i+"fnref-"+o+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(r)}]};e.patch(n,u);let c={type:"element",tagName:"sup",properties:{},children:[u]};return e.patch(n,c),e.applyData(n,c)}},463573:e=>{"use strict";function t(e,t){let n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}e.s({heading:()=>t})},488456:e=>{"use strict";function t(e,t){if(e.options.allowDangerousHtml){let n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}e.s({html:()=>t})},441457:e=>{"use strict";function t(e,t){let n=t.referenceType,r="]";if("collapsed"===n?r+="[]":"full"===n&&(r+="["+(t.label||t.identifier)+"]"),"imageReference"===t.type)return[{type:"text",value:"!["+t.alt+r}];let i=e.all(t),a=i[0];a&&"text"===a.type?a.value="["+a.value:i.unshift({type:"text",value:"["});let o=i[i.length-1];return o&&"text"===o.type?o.value+=r:i.push({type:"text",value:r}),i}e.s({revert:()=>t})},999543:e=>{"use strict";e.s({imageReference:()=>r});var t=e.i(883175),n=e.i(441457);function r(e,r){let i=String(r.identifier).toUpperCase(),a=e.definitionById.get(i);if(!a)return(0,n.revert)(e,r);let o={src:(0,t.normalizeUri)(a.url||""),alt:r.alt};null!==a.title&&void 0!==a.title&&(o.title=a.title);let s={type:"element",tagName:"img",properties:o,children:[]};return e.patch(r,s),e.applyData(r,s)}},297883:e=>{"use strict";e.s({image:()=>n});var t=e.i(883175);function n(e,n){let r={src:(0,t.normalizeUri)(n.url)};null!==n.alt&&void 0!==n.alt&&(r.alt=n.alt),null!==n.title&&void 0!==n.title&&(r.title=n.title);let i={type:"element",tagName:"img",properties:r,children:[]};return e.patch(n,i),e.applyData(n,i)}},713208:e=>{"use strict";function t(e,t){let n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);let r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}e.s({inlineCode:()=>t})},631452:e=>{"use strict";e.s({linkReference:()=>r});var t=e.i(883175),n=e.i(441457);function r(e,r){let i=String(r.identifier).toUpperCase(),a=e.definitionById.get(i);if(!a)return(0,n.revert)(e,r);let o={href:(0,t.normalizeUri)(a.url||"")};null!==a.title&&void 0!==a.title&&(o.title=a.title);let s={type:"element",tagName:"a",properties:o,children:e.all(r)};return e.patch(r,s),e.applyData(r,s)}},830432:e=>{"use strict";e.s({link:()=>n});var t=e.i(883175);function n(e,n){let r={href:(0,t.normalizeUri)(n.url)};null!==n.title&&void 0!==n.title&&(r.title=n.title);let i={type:"element",tagName:"a",properties:r,children:e.all(n)};return e.patch(n,i),e.applyData(n,i)}},45418:e=>{"use strict";function t(e,t,r){let i=e.all(t),a=r?function(e){let t=!1;if("list"===e.type){t=e.spread||!1;let r=e.children,i=-1;for(;!t&&++i<r.length;)t=n(r[i])}return t}(r):n(t),o={},s=[];if("boolean"==typeof t.checked){let e,n=i[0];n&&"element"===n.type&&"p"===n.tagName?e=n:(e={type:"element",tagName:"p",properties:{},children:[]},i.unshift(e)),e.children.length>0&&e.children.unshift({type:"text",value:" "}),e.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),o.className=["task-list-item"]}let l=-1;for(;++l<i.length;){let e=i[l];(a||0!==l||"element"!==e.type||"p"!==e.tagName)&&s.push({type:"text",value:"\n"}),"element"!==e.type||"p"!==e.tagName||a?s.push(e):s.push(...e.children)}let u=i[i.length-1];u&&(a||"element"!==u.type||"p"!==u.tagName)&&s.push({type:"text",value:"\n"});let c={type:"element",tagName:"li",properties:o,children:s};return e.patch(t,c),e.applyData(t,c)}function n(e){let t=e.spread;return null==t?e.children.length>1:t}e.s({listItem:()=>t})},994056:e=>{"use strict";function t(e,t){let n={},r=e.all(t),i=-1;for("number"==typeof t.start&&1!==t.start&&(n.start=t.start);++i<r.length;){let e=r[i];if("element"===e.type&&"li"===e.tagName&&e.properties&&Array.isArray(e.properties.className)&&e.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}let a={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,a),e.applyData(t,a)}e.s({list:()=>t})},606858:e=>{"use strict";function t(e,t){let n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}e.s({paragraph:()=>t})},228886:e=>{"use strict";function t(e,t){let n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}e.s({root:()=>t})},208203:e=>{"use strict";function t(e,t){let n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}e.s({strong:()=>t})},991154:e=>{"use strict";e.s({table:()=>n});var t=e.i(107723);function n(e,n){let r=e.all(n),i=r.shift(),a=[];if(i){let t={type:"element",tagName:"thead",properties:{},children:e.wrap([i],!0)};e.patch(n.children[0],t),a.push(t)}if(r.length>0){let i={type:"element",tagName:"tbody",properties:{},children:e.wrap(r,!0)},o=(0,t.pointStart)(n.children[1]),s=(0,t.pointEnd)(n.children[n.children.length-1]);o&&s&&(i.position={start:o,end:s}),a.push(i)}let o={type:"element",tagName:"table",properties:{},children:e.wrap(a,!0)};return e.patch(n,o),e.applyData(n,o)}},547393:e=>{"use strict";function t(e,t,n){let r=n?n.children:void 0,i=0===(r?r.indexOf(t):1)?"th":"td",a=n&&"table"===n.type?n.align:void 0,o=a?a.length:t.children.length,s=-1,l=[];for(;++s<o;){let n=t.children[s],r={},o=a?a[s]:void 0;o&&(r.align=o);let u={type:"element",tagName:i,properties:r,children:[]};n&&(u.children=e.all(n),e.patch(n,u),u=e.applyData(n,u)),l.push(u)}let u={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,u),e.applyData(t,u)}e.s({tableRow:()=>t})},891509:e=>{"use strict";function t(e,t){let n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}e.s({tableCell:()=>t})},816688:e=>{"use strict";function t(e){let t=String(e),r=/\r?\n|\r/g,i=r.exec(t),a=0,o=[];for(;i;)o.push(n(t.slice(a,i.index),a>0,!0),i[0]),a=i.index+i[0].length,i=r.exec(t);return o.push(n(t.slice(a),a>0,!1)),o.join("")}function n(e,t,n){let r=0,i=e.length;if(t){let t=e.codePointAt(r);for(;9===t||32===t;)r++,t=e.codePointAt(r)}if(n){let t=e.codePointAt(i-1);for(;9===t||32===t;)i--,t=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}e.s({trimLines:()=>t})},387774:e=>{"use strict";e.s({text:()=>n});var t=e.i(816688);function n(e,n){let r={type:"text",value:(0,t.trimLines)(String(n.value))};return e.patch(n,r),e.applyData(n,r)}},768180:e=>{"use strict";function t(e,t){let n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}e.s({thematicBreak:()=>t})},140340:e=>{"use strict";e.s({handlers:()=>C});var t=e.i(995702),n=e.i(330942),r=e.i(445083),i=e.i(468764),a=e.i(906211),o=e.i(291590),s=e.i(463573),l=e.i(488456),u=e.i(999543),c=e.i(297883),d=e.i(713208),h=e.i(631452),p=e.i(830432),f=e.i(45418),m=e.i(994056),g=e.i(606858),y=e.i(228886),b=e.i(208203),x=e.i(991154),w=e.i(547393),k=e.i(891509),S=e.i(387774),_=e.i(768180);let C={blockquote:t.blockquote,break:n.hardBreak,code:r.code,delete:i.strikethrough,emphasis:a.emphasis,footnoteReference:o.footnoteReference,heading:s.heading,html:l.html,imageReference:u.imageReference,image:c.image,inlineCode:d.inlineCode,linkReference:h.linkReference,link:p.link,listItem:f.listItem,list:m.list,paragraph:g.paragraph,root:y.root,strong:b.strong,table:x.table,tableCell:k.tableCell,tableRow:w.tableRow,text:S.text,thematicBreak:_.thematicBreak,toml:A,yaml:A,definition:A,footnoteDefinition:A};function A(){}},696595:e=>{"use strict";e.s({createState:()=>s});var t=e.i(502646),n=e.i(792021),r=e.i(107723),i=e.i(140340);let a={}.hasOwnProperty,o={};function s(e,r){let s=r||o,h=new Map,p=new Map,f={all:function(e){let t=[];if("children"in e){let n=e.children,r=-1;for(;++r<n.length;){let i=f.one(n[r],e);if(i){if(r&&"break"===n[r-1].type&&(Array.isArray(i)||"text"!==i.type||(i.value=d(i.value)),!Array.isArray(i)&&"element"===i.type)){let e=i.children[0];e&&"text"===e.type&&(e.value=d(e.value))}Array.isArray(i)?t.push(...i):t.push(i)}}}return t},applyData:u,definitionById:h,footnoteById:p,footnoteCounts:new Map,footnoteOrder:[],handlers:{...i.handlers,...s.handlers},one:function(e,n){let r=e.type,i=f.handlers[r];if(a.call(f.handlers,r)&&i)return i(f,e,n);if(f.options.passThrough&&f.options.passThrough.includes(r)){if("children"in e){let{children:n,...r}=e,i=(0,t.default)(r);return i.children=f.all(e),i}return(0,t.default)(e)}return(f.options.unknownHandler||function(e,t){let n=t.data||{},r="value"in t&&!(a.call(n,"hProperties")||a.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)})(f,e,n)},options:s,patch:l,wrap:c};return(0,n.visit)(e,function(e){if("definition"===e.type||"footnoteDefinition"===e.type){let t="definition"===e.type?h:p,n=String(e.identifier).toUpperCase();t.has(n)||t.set(n,e)}}),f}function l(e,t){e.position&&(t.position=(0,r.position)(e))}function u(e,n){let r=n;if(e&&e.data){let n=e.data.hName,i=e.data.hChildren,a=e.data.hProperties;"string"==typeof n&&("element"===r.type?r.tagName=n:r={type:"element",tagName:n,properties:{},children:"children"in r?r.children:[r]}),"element"===r.type&&a&&Object.assign(r.properties,(0,t.default)(a)),"children"in r&&r.children&&null!=i&&(r.children=i)}return r}function c(e,t){let n=[],r=-1;for(t&&n.push({type:"text",value:"\n"});++r<e.length;)r&&n.push({type:"text",value:"\n"}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:"\n"}),n}function d(e){let t=0,n=e.charCodeAt(t);for(;9===n||32===n;)t++,n=e.charCodeAt(t);return e.slice(t)}},906134:e=>{"use strict";e.s({toHast:()=>i});var t=e.i(366506),n=e.i(475414),r=e.i(696595);function i(e,i){let a=(0,r.createState)(e,i),o=a.one(e,void 0),s=(0,n.footer)(a),l=Array.isArray(o)?{type:"root",children:o}:o||{type:"root",children:[]};return s&&((0,t.ok)("children"in l),l.children.push({type:"text",value:"\n"},s)),l}},860244:e=>{"use strict";e.s({default:()=>n});var t=e.i(906134);function n(e,n){return e&&"run"in e?async function(r,i){let a=(0,t.toHast)(r,{file:i,...n});await e.run(a,i)}:function(r,i){return(0,t.toHast)(r,{file:i,...e||n})}}},881442:e=>{"use strict";function t(e){if(e)throw e}e.s({bail:()=>t})},562201:e=>{"use strict";var{m:t,e:n}=e,r=Object.prototype.hasOwnProperty,i=Object.prototype.toString,a=Object.defineProperty,o=Object.getOwnPropertyDescriptor,s=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===i.call(e)},l=function(e){if(!e||"[object Object]"!==i.call(e))return!1;var t,n=r.call(e,"constructor"),a=e.constructor&&e.constructor.prototype&&r.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!a)return!1;for(t in e);return void 0===t||r.call(e,t)},u=function(e,t){a&&"__proto__"===t.name?a(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},c=function(e,t){if("__proto__"===t){if(!r.call(e,t))return;else if(o)return o(e,t).value}return e[t]};t.exports=function e(){var t,n,r,i,a,o,d=arguments[0],h=1,p=arguments.length,f=!1;for("boolean"==typeof d&&(f=d,d=arguments[1]||{},h=2),(null==d||"object"!=typeof d&&"function"!=typeof d)&&(d={});h<p;++h)if(t=arguments[h],null!=t)for(n in t)r=c(d,n),d!==(i=c(t,n))&&(f&&i&&(l(i)||(a=s(i)))?(a?(a=!1,o=r&&s(r)?r:[]):o=r&&l(r)?r:{},u(d,{name:n,newValue:e(f,o,i)})):void 0!==i&&u(d,{name:n,newValue:i}));return d}},46875:e=>{"use strict";function t(e){if("object"!=typeof e||null===e)return!1;let t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}e.s({default:()=>t})},386601:e=>{"use strict";function t(){let e=[],t={run:function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];let i=-1,a=n.pop();if("function"!=typeof a)throw TypeError("Expected function as last argument, not "+a);!function t(r){for(var o=arguments.length,s=Array(o>1?o-1:0),l=1;l<o;l++)s[l-1]=arguments[l];let u=e[++i],c=-1;if(r)return void a(r);for(;++c<n.length;)(null===s[c]||void 0===s[c])&&(s[c]=n[c]);n=s,u?(function(e,t){let n;return function(){let t;for(var a=arguments.length,o=Array(a),s=0;s<a;s++)o[s]=arguments[s];let l=e.length>o.length;l&&o.push(r);try{t=e.apply(this,o)}catch(e){if(l&&n)throw e;return r(e)}l||(t&&t.then&&"function"==typeof t.then?t.then(i,r):t instanceof Error?r(t):i(t))};function r(e){for(var r=arguments.length,i=Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];n||(n=!0,t(e,...i))}function i(e){r(null,e)}})(u,t)(...s):a(null,...s)}(null,...n)},use:function(n){if("function"!=typeof n)throw TypeError("Expected `middelware` to be a function, not "+n);return e.push(n),t}};return t}e.s({trough:()=>t})},665264:e=>{"use strict";e.s({minpath:()=>t});let t={basename:function(e,t){let r;if(void 0!==t&&"string"!=typeof t)throw TypeError('"ext" argument must be a string');n(e);let i=0,a=-1,o=e.length;if(void 0===t||0===t.length||t.length>e.length){for(;o--;)if(47===e.codePointAt(o)){if(r){i=o+1;break}}else a<0&&(r=!0,a=o+1);return a<0?"":e.slice(i,a)}if(t===e)return"";let s=-1,l=t.length-1;for(;o--;)if(47===e.codePointAt(o)){if(r){i=o+1;break}}else s<0&&(r=!0,s=o+1),l>-1&&(e.codePointAt(o)===t.codePointAt(l--)?l<0&&(a=o):(l=-1,a=s));return i===a?a=s:a<0&&(a=e.length),e.slice(i,a)},dirname:function(e){let t;if(n(e),0===e.length)return".";let r=-1,i=e.length;for(;--i;)if(47===e.codePointAt(i)){if(t){r=i;break}}else t||(t=!0);return r<0?47===e.codePointAt(0)?"/":".":1===r&&47===e.codePointAt(0)?"//":e.slice(0,r)},extname:function(e){let t;n(e);let r=e.length,i=-1,a=0,o=-1,s=0;for(;r--;){let n=e.codePointAt(r);if(47===n){if(t){a=r+1;break}continue}i<0&&(t=!0,i=r+1),46===n?o<0?o=r:1!==s&&(s=1):o>-1&&(s=-1)}return o<0||i<0||0===s||1===s&&o===i-1&&o===a+1?"":e.slice(o,i)},join:function(){let e;for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];let a=-1;for(;++a<r.length;)n(r[a]),r[a]&&(e=void 0===e?r[a]:e+"/"+r[a]);return void 0===e?".":function(e){n(e);let t=47===e.codePointAt(0),r=function(e,t){let n,r,i="",a=0,o=-1,s=0,l=-1;for(;++l<=e.length;){if(l<e.length)n=e.codePointAt(l);else if(47===n)break;else n=47;if(47===n){if(o===l-1||1===s);else if(o!==l-1&&2===s){if(i.length<2||2!==a||46!==i.codePointAt(i.length-1)||46!==i.codePointAt(i.length-2)){if(i.length>2){if((r=i.lastIndexOf("/"))!==i.length-1){r<0?(i="",a=0):a=(i=i.slice(0,r)).length-1-i.lastIndexOf("/"),o=l,s=0;continue}}else if(i.length>0){i="",a=0,o=l,s=0;continue}}t&&(i=i.length>0?i+"/..":"..",a=2)}else i.length>0?i+="/"+e.slice(o+1,l):i=e.slice(o+1,l),a=l-o-1;o=l,s=0}else 46===n&&s>-1?s++:s=-1}return i}(e,!t);return 0!==r.length||t||(r="."),r.length>0&&47===e.codePointAt(e.length-1)&&(r+="/"),t?"/"+r:r}(e)},sep:"/"};function n(e){if("string"!=typeof e)throw TypeError("Path must be a string. Received "+JSON.stringify(e))}},127269:e=>{"use strict";e.s({minproc:()=>t});let t={cwd:function(){return"/"}}},399376:e=>{"use strict";function t(e){return!!(null!==e&&"object"==typeof e&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&void 0===e.auth)}e.s({isUrl:()=>t})},135189:e=>{"use strict";e.s({urlToPath:()=>n});var t=e.i(399376);function n(e){if("string"==typeof e)e=new URL(e);else if(!(0,t.isUrl)(e)){let t=TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if("file:"!==e.protocol){let e=TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return function(e){if(""!==e.hostname){let e=TypeError('File URL host must be "localhost" or empty on darwin');throw e.code="ERR_INVALID_FILE_URL_HOST",e}let t=e.pathname,n=-1;for(;++n<t.length;)if(37===t.codePointAt(n)&&50===t.codePointAt(n+1)){let e=t.codePointAt(n+2);if(70===e||102===e){let e=TypeError("File URL path must not include encoded / characters");throw e.code="ERR_INVALID_FILE_URL_PATH",e}}return decodeURIComponent(t)}(e)}},560510:e=>{"use strict";e.s({VFile:()=>s});var t=e.i(425541),n=e.i(665264),r=e.i(127269),i=e.i(135189),a=e.i(399376);let o=["history","path","basename","stem","extname","dirname"];class s{get basename(){return"string"==typeof this.path?n.minpath.basename(this.path):void 0}set basename(e){u(e,"basename"),l(e,"basename"),this.path=n.minpath.join(this.dirname||"",e)}get dirname(){return"string"==typeof this.path?n.minpath.dirname(this.path):void 0}set dirname(e){c(this.basename,"dirname"),this.path=n.minpath.join(e||"",this.basename)}get extname(){return"string"==typeof this.path?n.minpath.extname(this.path):void 0}set extname(e){if(l(e,"extname"),c(this.dirname,"extname"),e){if(46!==e.codePointAt(0))throw Error("`extname` must start with `.`");if(e.includes(".",1))throw Error("`extname` cannot contain multiple dots")}this.path=n.minpath.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){(0,a.isUrl)(e)&&(e=(0,i.urlToPath)(e)),u(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return"string"==typeof this.path?n.minpath.basename(this.path,this.extname):void 0}set stem(e){u(e,"stem"),l(e,"stem"),this.path=n.minpath.join(this.dirname||"",e+(this.extname||""))}fail(e,t,n){let r=this.message(e,t,n);throw r.fatal=!0,r}info(e,t,n){let r=this.message(e,t,n);return r.fatal=void 0,r}message(e,n,r){let i=new t.VFileMessage(e,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return void 0===this.value?"":"string"==typeof this.value?this.value:new TextDecoder(e||void 0).decode(this.value)}constructor(e){let t,n;t=e?(0,a.isUrl)(e)?{path:e}:"string"==typeof e||function(e){return!!(e&&"object"==typeof e&&"byteLength"in e&&"byteOffset"in e)}(e)?{value:e}:e:{},this.cwd="cwd"in t?"":r.minproc.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let i=-1;for(;++i<o.length;){let e=o[i];e in t&&void 0!==t[e]&&null!==t[e]&&(this[e]="history"===e?[...t[e]]:t[e])}for(n in t)o.includes(n)||(this[n]=t[n])}}function l(e,t){if(e&&e.includes(n.minpath.sep))throw Error("`"+t+"` cannot be a path: did not expect `"+n.minpath.sep+"`")}function u(e,t){if(!e)throw Error("`"+t+"` cannot be empty")}function c(e,t){if(!e)throw Error("Setting `"+t+"` requires `path` to be set too")}},916299:e=>{"use strict";e.s({CallableInstance:()=>t});let t=function(e){let t=this.constructor.prototype,n=t[e],r=function(){return n.apply(r,arguments)};return Object.setPrototypeOf(r,t),r}},678566:e=>{"use strict";e.s({unified:()=>c});var t=e.i(881442),n=e.i(562201),r=e.i(366506),i=e.i(46875),a=e.i(386601),o=e.i(560510),s=e.i(916299);let l={}.hasOwnProperty;class u extends s.CallableInstance{copy(){let e=new u,t=-1;for(;++t<this.attachers.length;){let n=this.attachers[t];e.use(...n)}return e.data((0,n.default)(!0,{},this.namespace)),e}data(e,t){return"string"==typeof e?2==arguments.length?(p("data",this.frozen),this.namespace[e]=t,this):l.call(this.namespace,e)&&this.namespace[e]||void 0:e?(p("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;for(;++this.freezeIndex<this.attachers.length;){let[e,...t]=this.attachers[this.freezeIndex];if(!1===t[0])continue;!0===t[0]&&(t[0]=void 0);let n=e.call(this,...t);"function"==typeof n&&this.transformers.use(n)}return this.frozen=!0,this.freezeIndex=1/0,this}parse(e){this.freeze();let t=g(e),n=this.parser||this.Parser;return d("parse",n),n(String(t),t)}process(e,t){let n=this;return this.freeze(),d("process",this.parser||this.Parser),h("process",this.compiler||this.Compiler),t?i(void 0,t):new Promise(i);function i(i,a){let o=g(e),s=n.parse(o);function l(e,n){e||!n?a(e):i?i(n):((0,r.ok)(t,"`done` is defined if `resolve` is not"),t(void 0,n))}n.run(s,o,function(e,t,r){var i,a;if(e||!t||!r)return l(e);let o=n.stringify(t,r);"string"==typeof(i=o)||(a=i)&&"object"==typeof a&&"byteLength"in a&&"byteOffset"in a?r.value=o:r.result=o,l(e,r)})}}processSync(e){let n,i=!1;return this.freeze(),d("processSync",this.parser||this.Parser),h("processSync",this.compiler||this.Compiler),this.process(e,function(e,r){i=!0,(0,t.bail)(e),n=r}),m("processSync","process",i),(0,r.ok)(n,"we either bailed on an error or have a tree"),n}run(e,t,n){f(e),this.freeze();let i=this.transformers;return n||"function"!=typeof t||(n=t,t=void 0),n?a(void 0,n):new Promise(a);function a(a,o){(0,r.ok)("function"!=typeof t,"`file` cant be a `done` anymore, we checked");let s=g(t);i.run(e,s,function(t,i,s){let l=i||e;t?o(t):a?a(l):((0,r.ok)(n,"`done` is defined if `resolve` is not"),n(void 0,l,s))})}}runSync(e,n){let i,a=!1;return this.run(e,n,function(e,n){(0,t.bail)(e),i=n,a=!0}),m("runSync","run",a),(0,r.ok)(i,"we either bailed on an error or have a tree"),i}stringify(e,t){this.freeze();let n=g(t),r=this.compiler||this.Compiler;return h("stringify",r),f(e),r(e,n)}use(e){for(var t=arguments.length,r=Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];let o=this.attachers,s=this.namespace;if(p("use",this.frozen),null==e);else if("function"==typeof e)c(e,r);else if("object"==typeof e)Array.isArray(e)?u(e):l(e);else throw TypeError("Expected usable value, not `"+e+"`");return this;function l(e){if(!("plugins"in e)&&!("settings"in e))throw Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");u(e.plugins),e.settings&&(s.settings=(0,n.default)(!0,s.settings,e.settings))}function u(e){let t=-1;if(null==e);else if(Array.isArray(e))for(;++t<e.length;){var n=e[t];if("function"==typeof n)c(n,[]);else if("object"==typeof n)if(Array.isArray(n)){let[e,...t]=n;c(e,t)}else l(n);else throw TypeError("Expected usable value, not `"+n+"`")}else throw TypeError("Expected a list of plugins, not `"+e+"`")}function c(e,t){let r=-1,a=-1;for(;++r<o.length;)if(o[r][0]===e){a=r;break}if(-1===a)o.push([e,...t]);else if(t.length>0){let[r,...s]=t,l=o[a][1];(0,i.default)(l)&&(0,i.default)(r)&&(r=(0,n.default)(!0,l,r)),o[a]=[e,r,...s]}}}constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=(0,a.trough)()}}let c=new u().freeze();function d(e,t){if("function"!=typeof t)throw TypeError("Cannot `"+e+"` without `parser`")}function h(e,t){if("function"!=typeof t)throw TypeError("Cannot `"+e+"` without `compiler`")}function p(e,t){if(t)throw Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function f(e){if(!(0,i.default)(e)||"string"!=typeof e.type)throw TypeError("Expected node, got `"+e+"`")}function m(e,t,n){if(!n)throw Error("`"+e+"` finished async. Use `"+t+"` instead")}function g(e){var t;return(t=e)&&"object"==typeof t&&"message"in t&&"messages"in t?e:new o.VFile(e)}},51413:e=>{"use strict";e.s({Markdown:()=>f});var t=e.i(366506),n=e.i(645311),r=e.i(508399),i=e.i(290479);e.i(373150);var a=e.i(284866),o=e.i(860244),s=e.i(678566),l=e.i(792021),u=e.i(560510);let c=[],d={allowDangerousHtml:!0},h=/^(https?|ircs?|mailto|xmpp)$/i,p=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function f(e){let h=function(e){let t=e.rehypePlugins||c,n=e.remarkPlugins||c,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...d}:d;return(0,s.unified)().use(a.default).use(n).use(o.default,r).use(t)}(e),f=function(e){let n=e.children||"",r=new u.VFile;return"string"==typeof n?r.value=n:(0,t.unreachable)("Unexpected value `"+n+"` for `children` prop, expected `string`"),r}(e);return function(e,a){let o=a.allowedElements,s=a.allowElement,u=a.components,c=a.disallowedElements,d=a.skipHtml,h=a.unwrapDisallowed,f=a.urlTransform||m;for(let e of p)Object.hasOwn(a,e.from)&&(0,t.unreachable)("Unexpected `"+e.from+"` prop, "+(e.to?"use `"+e.to+"` instead":"remove it")+" (see <https://github.com/remarkjs/react-markdown/blob/main/changelog.md#"+e.id+"> for more info)");return o&&c&&(0,t.unreachable)("Unexpected combined `allowedElements` and `disallowedElements`, expected one or the other"),(0,l.visit)(e,function(e,t,n){if("raw"===e.type&&n&&"number"==typeof t)return d?n.children.splice(t,1):n.children[t]={type:"text",value:e.value},t;if("element"===e.type){let t;for(t in r.urlAttributes)if(Object.hasOwn(r.urlAttributes,t)&&Object.hasOwn(e.properties,t)){let n=e.properties[t],i=r.urlAttributes[t];(null===i||i.includes(e.tagName))&&(e.properties[t]=f(String(n||""),t,e))}}if("element"===e.type){let r=o?!o.includes(e.tagName):!!c&&c.includes(e.tagName);if(!r&&s&&"number"==typeof t&&(r=!s(e,t,n)),r&&n&&"number"==typeof t)return h&&e.children?n.children.splice(t,1,...e.children):n.children.splice(t,1),t}}),(0,n.toJsxRuntime)(e,{Fragment:i.Fragment,components:u,ignoreInvalidStyle:!0,jsx:i.jsx,jsxs:i.jsxs,passKeys:!0,passNode:!0})}(h.runSync(h.parse(f),f),e)}function m(e){let t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return -1===t||-1!==i&&t>i||-1!==n&&t>n||-1!==r&&t>r||h.test(e.slice(0,t))?e:""}},436133:e=>{"use strict";e.s({default:()=>t.Markdown});var t=e.i(51413)},391173:e=>{"use strict";var{m:t,e:n}=e,r=e.e&&e.e.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=e.e&&e.e.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return function(t){var n=t.defaultOrigin,s=void 0===n?"":n,l=t.allowedLinkPrefixes,u=void 0===l?[]:l,c=t.allowedImagePrefixes,d=void 0===c?[]:c,h=t.components,p=i(t,["defaultOrigin","allowedLinkPrefixes","allowedImagePrefixes","components"]),f=u.length&&!u.every(function(e){return"*"===e}),m=d.length&&!d.every(function(e){return"*"===e});if(!s&&(f||m))throw Error("defaultOrigin is required when allowedLinkPrefixes or allowedImagePrefixes are provided");var g=function(e){if("string"!=typeof e)return null;try{var t=new URL(e);return t}catch(n){if(s)try{var t=new URL(e,s);return t}catch(e){}return null}},y=function(e){return"string"==typeof e&&e.startsWith("/")},b=function(e,t){if(!e||!g(e))return null;if(t.includes("*")){var n=y(e),r=g(e);return r?n?r.pathname+r.search+r.hash:r.href:null}var i=y(e),a=g(e);return a&&t.some(function(e){var t=g(e);return!!t&&t.origin===a.origin&&a.href.startsWith(t.href)})?i?a.pathname+a.search+a.hash:a.href:null},x=r(r({},h),{a:function(e){var t=e.href,n=e.children,s=e.node,l=i(e,["href","children","node"]),c=b(t,u);return null!==c?(null==h?void 0:h.a)?(0,o.createElement)(h.a,r({href:c,children:n,node:s,target:"_blank",rel:"noopener noreferrer"},l)):(0,a.jsx)("a",r({href:c},l,{target:"_blank",rel:"noopener noreferrer",children:n})):(0,a.jsxs)("span",{className:"text-gray-500",title:"Blocked URL: ".concat(t),children:[n," [blocked]"]})},img:function(e){var t=e.src,n=e.alt,s=e.node,l=i(e,["src","alt","node"]),u=b(t,d);return null!==u?(null==h?void 0:h.img)?(0,o.createElement)(h.img,r({src:u,alt:n,node:s},l)):(0,a.jsx)("img",r({src:u,alt:n},l)):(0,a.jsxs)("span",{className:"inline-block bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-400 px-3 py-1 rounded text-sm",children:["[Image blocked: ",n||"No description","]"]})}}),w=r(r({},p),{components:x});return(0,o.createElement)(e,w)}};var a=e.r(290479),o=e.r(373150)},401586:e=>{"use strict";e.s({hasA11yProp:()=>i,mergeClasses:()=>r,toKebabCase:()=>t,toPascalCase:()=>n});let t=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},r=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e,t,n)=>!!e&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim()},i=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0}},781875:e=>{"use strict";e.s({default:()=>t});var t={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}},742131:e=>{"use strict";e.s({default:()=>i});var t=e.i(373150),n=e.i(781875),r=e.i(401586);let i=(0,t.forwardRef)((e,i)=>{let{color:a="currentColor",size:o=24,strokeWidth:s=2,absoluteStrokeWidth:l,className:u="",children:c,iconNode:d,...h}=e;return(0,t.createElement)("svg",{ref:i,...n.default,width:o,height:o,stroke:a,strokeWidth:l?24*Number(s)/Number(o):s,className:(0,r.mergeClasses)("lucide",u),...!c&&!(0,r.hasA11yProp)(h)&&{"aria-hidden":"true"},...h},[...d.map(e=>{let[n,r]=e;return(0,t.createElement)(n,r)}),...Array.isArray(c)?c:[c]])})},251606:e=>{"use strict";e.s({default:()=>i});var t=e.i(373150),n=e.i(401586),r=e.i(742131);let i=(e,i)=>{let a=(0,t.forwardRef)((a,o)=>{let{className:s,...l}=a;return(0,t.createElement)(r.default,{ref:o,iconNode:i,className:(0,n.mergeClasses)("lucide-".concat((0,n.toKebabCase)((0,n.toPascalCase)(e))),"lucide-".concat(e),s),...l})});return a.displayName=(0,n.toPascalCase)(e),a}},658798:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(251606).default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},820193:e=>{"use strict";e.s({CheckIcon:()=>t.default});var t=e.i(658798)},687392:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(251606).default)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},355239:e=>{"use strict";e.s({CopyIcon:()=>t.default});var t=e.i(687392)},736717:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(251606).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])},623012:e=>{"use strict";e.s({DownloadIcon:()=>t.default});var t=e.i(736717)},634522:e=>{"use strict";function t(e){return(t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}e.s({_:()=>t})},475083:e=>{"use strict";e.s({_:()=>n});var t=e.i(634522);function n(e,n){for(;!Object.prototype.hasOwnProperty.call(e,n)&&null!==(e=(0,t._)(e)););return e}},353630:e=>{"use strict";e.s({_:()=>n});var t=e.i(475083);function n(e,r,i){return(n="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,n,r){var i=(0,t._)(e,n);if(i){var a=Object.getOwnPropertyDescriptor(i,n);return a.get?a.get.call(r||e):a.value}})(e,r,i||e)}},198699:e=>{"use strict";function t(e){if(1!=[...e].length)throw Error('Expected "'.concat(e,'" to be a single code point'));return e.codePointAt(0)}function n(e,t,n){return e.has(t)||e.set(t,n),e.get(t)}e.s({PosixClassNames:()=>r,cpOf:()=>t,getOrInsert:()=>n,r:()=>i,throwIfNullish:()=>a});let r=new Set(["alnum","alpha","ascii","blank","cntrl","digit","graph","lower","print","punct","space","upper","word","xdigit"]),i=String.raw;function a(e,t){if(null==e)throw Error(null!=t?t:"Value expected");return e}},959266:e=>{"use strict";e.s({tokenize:()=>k});var t=e.i(213384),n=e.i(198699);function r(){let e=(0,t._)(["[^?"],["\\[\\^?"]);return r=function(){return e},e}function i(){let e=(0,t._)(["[pP]{(?:^?[- _]*[A-Za-z][- w]*})?"],["[pP]\\{(?:\\^?[-\\x20_]*[A-Za-z][-\\x20\\w]*\\})?"]);return i=function(){return e},e}function a(){let e=(0,t._)(["x[89A-Fa-f]p{AHex}(?:\\x[89A-Fa-f]p{AHex})*"],["x[89A-Fa-f]\\p{AHex}(?:\\\\x[89A-Fa-f]\\p{AHex})*"]);return a=function(){return e},e}function o(){let e=(0,t._)(["u(?:p{AHex}{4})? | x{[^}]*}? | xp{AHex}{0,2}"],["u(?:\\p{AHex}{4})? | x\\{[^\\}]*\\}? | x\\p{AHex}{0,2}"]);return o=function(){return e},e}function s(){let e=(0,t._)(["o{[^}]*}?"],["o\\{[^\\}]*\\}?"]);return s=function(){return e},e}function l(){let e=(0,t._)(["d{1,3}"],["\\d{1,3}"]);return l=function(){return e},e}function u(){let e=(0,t._)(["\n  \\ (?:\n    ","\n    | [gk]<[^>]*>?\n    | [gk]'[^']*'?\n    | .\n  )\n  | ( (?:\n    ? (?:\n      [:=!>({]\n      | <[=!]\n      | <[^>]*>\n      | '[^']*'\n      | ~|?\n      | #(?:[^)\\]|\\.?)*\n      | [^:)]*[:)]\n    )?\n    | *[^)]*)?\n  )?\n  | (?:",")+\n  | ","\n  | .\n"],["\n  \\\\ (?:\n    ","\n    | [gk]<[^>]*>?\n    | [gk]'[^']*'?\n    | .\n  )\n  | \\( (?:\n    \\? (?:\n      [:=!>({]\n      | <[=!]\n      | <[^>]*>\n      | '[^']*'\n      | ~\\|?\n      | #(?:[^)\\\\]|\\\\.?)*\n      | [^:)]*[:)]\n    )?\n    | \\*[^\\)]*\\)?\n  )?\n  | (?:",")+\n  | ","\n  | .\n"]);return u=function(){return e},e}function c(){let e=(0,t._)(["\n  \\ (?:\n    ","\n    | .\n  )\n  | [:(?:^?p{Alpha}+|^):]\n  | ","\n  | &&\n  | .\n"],["\n  \\\\ (?:\n    ","\n    | .\n  )\n  | \\[:(?:\\^?\\p{Alpha}+|\\^):\\]\n  | ","\n  | &&\n  | .\n"]);return c=function(){return e},e}function d(){let e=(0,t._)(["A"],["\\A"]);return d=function(){return e},e}function h(){let e=(0,t._)(["Z"],["\\Z"]);return h=function(){return e},e}function p(){let e=(0,t._)(["o{"],["\\o{"]);return p=function(){return e},e}function f(){let e=(0,t._)(['Incomplete escape ""'],['Incomplete escape "\\"']);return f=function(){return e},e}function m(){let e=(0,t._)(['Octal encoded byte above 177 unsupported "','"']);return m=function(){return e},e}let g=(0,n.r)(r()),y="c.? | C(?:-.?)?|".concat((0,n.r)(i()),"|").concat((0,n.r)(a()),"|").concat((0,n.r)(o()),"|").concat((0,n.r)(s()),"|").concat((0,n.r)(l())),b=/[?*+][?+]?|\{(?:\d+(?:,\d*)?|,\d+)\}\??/,x=RegExp((0,n.r)(u(),y,b.source,g).replace(/\s+/g,""),"gsu"),w=RegExp((0,n.r)(c(),y,g).replace(/\s+/g,""),"gsu");function k(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={flags:"",...t,rules:{captureGroup:!1,singleline:!1,...t.rules}};if("string"!=typeof e)throw Error("String expected as pattern");let i=function(e){let t={ignoreCase:!1,dotAll:!1,extended:!1,digitIsAscii:!1,posixIsAscii:!1,spaceIsAscii:!1,wordIsAscii:!1,textSegmentMode:null};for(let n=0;n<e.length;n++){let r=e[n];if(!"imxDPSWy".includes(r))throw Error('Invalid flag "'.concat(r,'"'));if("y"===r){if(!/^y{[gw]}/.test(e.slice(n)))throw Error('Invalid or unspecified flag "y" mode');t.textSegmentMode="g"===e[n+2]?"grapheme":"word",n+=3;continue}t[({i:"ignoreCase",m:"dotAll",x:"extended",D:"digitIsAscii",P:"posixIsAscii",S:"spaceIsAscii",W:"wordIsAscii"})[r]]=!0}return t}(r.flags),a=[i.extended],o={captureGroup:r.rules.captureGroup,getCurrentModX:()=>a.at(-1),numOpenGroups:0,popModX(){a.pop()},pushModX(e){a.push(e)},replaceCurrentModX(e){a[a.length-1]=e},singleline:r.rules.singleline},s=[],l;for(x.lastIndex=0;l=x.exec(e);){let t=function(e,t,r,i){let[a,o]=r;if("["===r||"[^"===r){let e=function(e,t,r){let i=[E("^"===t[1],t)],a=1,o;for(w.lastIndex=r;o=w.exec(e);){let e=o[0];if("["===e[0]&&":"!==e[1])a++,i.push(E("^"===e[1],e));else if("]"===e){if("CharacterClassOpen"===i.at(-1).type)i.push(A(93,e));else if(a--,i.push({type:"CharacterClassClose",raw:e}),!a)break}else{let t=function(e){if("\\"===e[0])return S(e,{inCharClass:!0});if("["===e[0]){let t=RegExp("\\[:(?<negate>\\^?)(?<name>[a-z]+):\\]").exec(e);if(!t||!n.PosixClassNames.has(t.groups.name))throw Error('Invalid POSIX class "'.concat(e,'"'));return T("posix",e,{value:t.groups.name,negate:!!t.groups.negate})}return"-"===e?{type:"CharacterClassHyphen",raw:e}:"&&"===e?{type:"CharacterClassIntersector",raw:e}:A((0,n.cpOf)(e),e)}(e);Array.isArray(t)?i.push(...t):i.push(t)}}return{tokens:i,lastIndex:w.lastIndex||e.length}}(t,r,i);return{tokens:e.tokens,lastIndex:e.lastIndex}}if("\\"===a){if("AbBGyYzZ".includes(o))return{token:_(r,r)};if(/^\\g[<']/.test(r)){if(!/^\\g(?:<[^>]+>|'[^']+')$/.test(r))throw Error('Invalid group name "'.concat(r,'"'));return{token:{type:"Subroutine",raw:r}}}if(/^\\k[<']/.test(r)){if(!/^\\k(?:<[^>]+>|'[^']+')$/.test(r))throw Error('Invalid group name "'.concat(r,'"'));return{token:C(r)}}if("K"===o)return{token:M("keep",r)};if("N"===o||"R"===o)return{token:T("newline",r,{negate:"N"===o})};if("O"===o)return{token:T("any",r)};if("X"===o)return{token:T("text_segment",r)};let e=S(r,{inCharClass:!1});return Array.isArray(e)?{tokens:e}:{token:e}}if("("===a){if("*"===o)return{token:function(e){var t;let n=RegExp("\\(\\*(?<name>[A-Za-z_]\\w*)?(?:\\[(?<tag>(?:[A-Za-z_]\\w*)?)\\])?(?:\\{(?<args>[^}]*)\\})?\\)").exec(e);if(!n)throw Error('Incomplete or invalid named callout "'.concat(e,'"'));let{name:r,tag:i,args:a}=n.groups;if(!r)throw Error('Invalid named callout "'.concat(e,'"'));if(""===i)throw Error('Named callout tag with empty value not allowed "'.concat(e,'"'));let o=a?a.split(",").filter(e=>""!==e).map(e=>/^[+-]?\d+$/.test(e)?+e:e):[],[s,l,u]=o,c=N.has(r)?r.toLowerCase():"custom";switch(c){case"fail":case"mismatch":case"skip":if(o.length>0)throw Error('Named callout arguments not allowed "'.concat(o,'"'));break;case"error":if(o.length>1)throw Error('Named callout allows only one argument "'.concat(o,'"'));if("string"==typeof s)throw Error('Named callout argument must be a number "'.concat(s,'"'));break;case"max":if(!o.length||o.length>2)throw Error('Named callout must have one or two arguments "'.concat(o,'"'));if("string"==typeof s&&!/^[A-Za-z_]\w*$/.test(s))throw Error('Named callout argument one must be a tag or number "'.concat(s,'"'));if(2===o.length&&("number"==typeof l||!/^[<>X]$/.test(l)))throw Error("Named callout optional argument two must be '<', '>', or 'X' \"".concat(l,'"'));break;case"count":case"total_count":if(o.length>1)throw Error('Named callout allows only one argument "'.concat(o,'"'));if(1===o.length&&("number"==typeof s||!/^[<>X]$/.test(s)))throw Error("Named callout optional argument must be '<', '>', or 'X' \"".concat(s,'"'));break;case"cmp":if(3!==o.length)throw Error('Named callout must have three arguments "'.concat(o,'"'));if("string"==typeof s&&!/^[A-Za-z_]\w*$/.test(s))throw Error('Named callout argument one must be a tag or number "'.concat(s,'"'));if("number"==typeof l||!/^(?:[<>!=]=|[<>])$/.test(l))throw Error("Named callout argument two must be '==', '!=', '>', '<', '>=', or '<=' \"".concat(l,'"'));if("string"==typeof u&&!/^[A-Za-z_]\w*$/.test(u))throw Error('Named callout argument three must be a tag or number "'.concat(u,'"'));break;case"custom":throw Error('Undefined callout name "'.concat(r,'"'));default:throw Error('Unexpected named callout kind "'.concat(c,'"'))}return{type:"NamedCallout",kind:c,tag:null!=i?i:null,arguments:null!=(t=null==a?void 0:a.split(","))?t:null,raw:e}}(r)};if("(?{"===r)throw Error('Unsupported callout "'.concat(r,'"'));if(r.startsWith("(?#")){if(")"!==t[i])throw Error('Unclosed comment group "(?#"');return{lastIndex:i+1}}if(/^\(\?[-imx]+[:)]$/.test(r))return{token:function(e,t){let{on:n,off:r}=RegExp("^\\(\\?(?<on>[imx]*)(?:-(?<off>[-imx]*))?").exec(e).groups;null!=r||(r="");let i=(t.getCurrentModX()||n.includes("x"))&&!r.includes("x"),a=R(n),o=R(r),s={};if(a&&(s.enable=a),o&&(s.disable=o),e.endsWith(")"))return t.replaceCurrentModX(i),M("flags",e,{flags:s});if(e.endsWith(":"))return t.pushModX(i),t.numOpenGroups++,I("group",e,{...(a||o)&&{flags:s}});throw Error('Unexpected flag modifier "'.concat(e,'"'))}(r,e)};if(e.pushModX(e.getCurrentModX()),e.numOpenGroups++,"("===r&&!e.captureGroup||"(?:"===r)return{token:I("group",r)};if("(?>"===r)return{token:I("atomic",r)};if("(?="===r||"(?!"===r||"(?<="===r||"(?<!"===r)return{token:I("<"===r[2]?"lookbehind":"lookahead",r,{negate:r.endsWith("!")})};if("("===r&&e.captureGroup||r.startsWith("(?<")&&r.endsWith(">")||r.startsWith("(?'")&&r.endsWith("'"))return{token:I("capturing",r,{..."("!==r&&{name:r.slice(3,-1)}})};if(r.startsWith("(?~")){if("(?~|"===r)throw Error('Unsupported absence function kind "'.concat(r,'"'));return{token:I("absence_repeater",r)}}throw"(?("===r?Error('Unsupported conditional "'.concat(r,'"')):Error('Invalid or unsupported group option "'.concat(r,'"'))}if(")"===r){if(e.popModX(),e.numOpenGroups--,e.numOpenGroups<0)throw Error('Unmatched ")"');return{token:{type:"GroupClose",raw:r}}}if(e.getCurrentModX()){if("#"===r){let e=t.indexOf("\n",i);return{lastIndex:-1===e?t.length:e}}if(/^\s$/.test(r)){let e=/\s+/y;return e.lastIndex=i,{lastIndex:e.exec(t)?e.lastIndex:i}}}return"."===r?{token:T("dot",r)}:"^"===r||"$"===r?{token:_(e.singleline?({"^":(0,n.r)(d()),$:(0,n.r)(h())})[r]:r,r)}:"|"===r?{token:{type:"Alternator",raw:r}}:b.test(r)?{tokens:function(e){let t,n=[],r=RegExp(b,"gy");for(;t=r.exec(e);){let e=t[0];if("{"===e[0]){let t=RegExp("^\\{(?<min>\\d+),(?<max>\\d+)\\}\\??$").exec(e);if(t){let{min:i,max:a}=t.groups;if(+i>+a&&e.endsWith("?")){r.lastIndex--,n.push(P(e.slice(0,-1)));continue}}}n.push(P(e))}return n}(r)}:{token:A((0,n.cpOf)(r),r)}}(o,e,l[0],x.lastIndex);t.tokens?s.push(...t.tokens):t.token&&s.push(t.token),void 0!==t.lastIndex&&(x.lastIndex=t.lastIndex)}let u=[],c=0;s.filter(e=>"GroupOpen"===e.type).forEach(e=>{"capturing"===e.kind?e.number=++c:"("===e.raw&&u.push(e)}),c||u.forEach((e,t)=>{e.kind="capturing",e.number=t+1});let p=c||u.length;return{tokens:s.map(e=>"EscapedNumber"===e.type?function(e,t){let{raw:r,inCharClass:i}=e,a=r.slice(1);if(!i&&("0"!==a&&1===a.length||"0"!==a[0]&&+a<=t))return[C(r)];let o=[],s=a.match(/^[0-7]+|\d/g);for(let e=0;e<s.length;e++){let t,i=s[e];if(0===e&&"8"!==i&&"9"!==i){if((t=parseInt(i,8))>127)throw Error((0,n.r)(m(),r))}else t=(0,n.cpOf)(i);o.push(A(t,(0===e?"\\":"")+i))}return o}(e,p):e).flat(),flags:i}}function S(e,t){let{inCharClass:r}=t,i=e[1];if("c"===i||"C"===i){var a=e;let t="c"===a[1]?a[2]:a[3];if(!t||!/[A-Za-z]/.test(t))throw Error('Unsupported control character "'.concat(a,'"'));return A((0,n.cpOf)(t.toUpperCase())-64,a)}if("dDhHsSwW".includes(i)){var o=e;let t=o[1].toLowerCase();return T({d:"digit",h:"hex",s:"space",w:"word"}[t],o,{negate:o[1]!==t})}if(e.startsWith((0,n.r)(p())))throw Error('Incomplete, invalid, or unsupported octal code point "'.concat(e,'"'));if(/^\\[pP]\{/.test(e)){if(3===e.length)throw Error('Incomplete or invalid Unicode property "'.concat(e,'"'));var s=e;let{p:t,neg:n,value:r}=RegExp("^\\\\(?<p>[pP])\\{(?<neg>\\^?)(?<value>[^}]+)").exec(s).groups;return T("property",s,{value:r,negate:"P"===t&&!n||"p"===t&&!!n})}if(RegExp("^\\\\x[89A-Fa-f]\\p{AHex}","u").test(e))try{let t=e.split(/\\x/).slice(1).map(e=>parseInt(e,16)),r=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}).decode(new Uint8Array(t)),i=new TextEncoder;return[...r].map(e=>{let t=[...i.encode(e)].map(e=>"\\x".concat(e.toString(16))).join("");return A((0,n.cpOf)(e),t)})}catch(t){throw Error('Multibyte code "'.concat(e,'" incomplete or invalid in Oniguruma'))}if("u"===i||"x"===i)return A(function(e){if(RegExp("^(?:\\\\u(?!\\p{AHex}{4})|\\\\x(?!\\p{AHex}{1,2}|\\{\\p{AHex}{1,8}\\}))","u").test(e))throw Error('Incomplete or invalid escape "'.concat(e,'"'));return parseInt("{"===e[2]?RegExp("^\\\\x\\{\\s*(?<hex>\\p{AHex}+)","u").exec(e).groups.hex:e.slice(2),16)}(e),e);if(D.has(i))return A(D.get(i),e);if(/\d/.test(i))return{type:"EscapedNumber",inCharClass:r,raw:e};if("\\"===e)throw Error((0,n.r)(f()));if("M"===i)throw Error('Unsupported meta "'.concat(e,'"'));if(2==[...e].length)return A(e.codePointAt(1),e);throw Error('Unexpected escape "'.concat(e,'"'))}function _(e,t){return{type:"Assertion",kind:e,raw:t}}function C(e){return{type:"Backreference",raw:e}}function A(e,t){return{type:"Character",value:e,raw:t}}function E(e,t){return{type:"CharacterClassOpen",negate:e,raw:t}}function T(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return{type:"CharacterSet",kind:e,...n,raw:t}}function M(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return"keep"===e?{type:"Directive",kind:e,raw:t}:{type:"Directive",kind:e,flags:(0,n.throwIfNullish)(r.flags),raw:t}}function I(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return{type:"GroupOpen",kind:e,...n,raw:t}}let N=new Set(["COUNT","CMP","ERROR","FAIL","MAX","MISMATCH","SKIP","TOTAL_COUNT"]),D=new Map([["a",7],["b",8],["e",27],["f",12],["n",10],["r",13],["t",9],["v",11]]);function P(e){let t=null,n,r;if("{"===e[0]){let{minStr:i,maxStr:a}=RegExp("^\\{(?<minStr>\\d*)(?:,(?<maxStr>\\d*))?").exec(e).groups;if(+i>1e5||a&&+a>1e5)throw Error("Quantifier value unsupported in Oniguruma");if((n=+i)>(r=void 0===a?+i:""===a?1/0:+a)&&(t="possessive",[n,r]=[r,n]),e.endsWith("?")){if("possessive"===t)throw Error('Unsupported possessive interval quantifier chain with "?"');t="lazy"}else t||(t="greedy")}else n=+("+"===e[0]),r="?"===e[0]?1:1/0,t="+"===e[1]?"possessive":"?"===e[1]?"lazy":"greedy";return{type:"Quantifier",kind:t,min:n,max:r,raw:e}}function R(e){let t={};return e.includes("i")&&(t.ignoreCase=!0),e.includes("m")&&(t.dotAll=!0),e.includes("x")&&(t.extended=!0),Object.keys(t).length?t:null}},935781:e=>{"use strict";function t(e,t){if(!Array.isArray(e.body))throw Error("Expected node with body array");if(1!==e.body.length)return!1;let n=e.body[0];return!t||Object.keys(t).every(e=>t[e]===n[e])}function n(e){return r.has(e.type)}e.s({hasOnlyChild:()=>t,isQuantifiable:()=>n});let r=new Set(["AbsenceFunction","Backreference","CapturingGroup","Character","CharacterClass","CharacterSet","Group","Quantifier","Subroutine"])},671103:e=>{"use strict";e.s({createAlternative:()=>d,createAssertion:()=>h,createBackreference:()=>p,createCapturingGroup:()=>f,createCharacter:()=>m,createCharacterClass:()=>g,createCharacterSet:()=>y,createGroup:()=>b,createLookaroundAssertion:()=>x,createQuantifier:()=>w,createSubroutine:()=>k,createUnicodeProperty:()=>S,parse:()=>c,slug:()=>T});var t=e.i(213384),n=e.i(959266),r=e.i(198699),i=e.i(935781);function a(){let e=(0,t._)(['Subroutine uses a duplicate group name "g<','>"'],['Subroutine uses a duplicate group name "\\g<','>"']);return a=function(){return e},e}function o(){let e=(0,t._)(["Subroutine uses a group name that's not defined \"g<",'>"'],["Subroutine uses a group name that's not defined \"\\g<",'>"']);return o=function(){return e},e}function s(){let e=(0,t._)(["B"],["\\B"]);return s=function(){return e},e}function l(){let e=(0,t._)(["Y"],["\\Y"]);return l=function(){return e},e}function u(){let e=(0,t._)(['Invalid Unicode property "p{','}"'],['Invalid Unicode property "\\p{','}"']);return u=function(){return e},e}function c(e){var t,u;let c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},C={flags:"",normalizeUnknownPropertyNames:!1,skipBackrefValidation:!1,skipLookbehindValidation:!1,skipPropertyNameValidation:!1,unicodePropertyMap:null,...c,rules:{captureGroup:!1,singleline:!1,...c.rules}},N=(0,n.tokenize)(e,{flags:C.flags,rules:{captureGroup:C.rules.captureGroup,singleline:C.rules.singleline}}),D=(e,t)=>{let n=N.tokens[P.nextIndex];switch(P.parent=e,P.nextIndex++,n.type){case"Alternator":return d();case"Assertion":return function(e){let{kind:t}=e;return h((0,r.throwIfNullish)({"^":"line_start",$:"line_end","\\A":"string_start","\\b":"word_boundary","\\B":"word_boundary","\\G":"search_start","\\y":"text_segment_boundary","\\Y":"text_segment_boundary","\\z":"string_end","\\Z":"string_end_newline"}[t],'Unexpected assertion kind "'.concat(t,'"')),{negate:t===(0,r.r)(s())||t===(0,r.r)(l())})}(n);case"Backreference":return function(e,t){let{raw:n}=e,r=/^\\k[<']/.test(n),i=r?n.slice(3,-1):n.slice(1),a=function(e){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=t.capturingGroups.length,a=!1;if(e>i)if(t.skipBackrefValidation)a=!0;else throw Error('Not enough capturing groups defined to the left "'.concat(n,'"'));return t.hasNumberedRef=!0,p(r?i+1-e:e,{orphan:a})};if(r){let e=RegExp("^(?<sign>-?)0*(?<num>[1-9]\\d*)$").exec(i);if(e)return a(+e.groups.num,!!e.groups.sign);if(/[-+]/.test(i))throw Error('Invalid backref name "'.concat(n,'"'));if(!t.namedGroupsByName.has(i))throw Error('Group name not defined to the left "'.concat(n,'"'));return p(i)}return a(+i)}(n,P);case"Character":return m(n.value,{useLastValid:!!t.isCheckingRangeEnd});case"CharacterClassHyphen":return function(e,t,n){let{tokens:i,walk:a}=t,o=t.parent,s=o.body.at(-1),l=i[t.nextIndex];if(!n.isCheckingRangeEnd&&s&&"CharacterClass"!==s.type&&"CharacterClassRange"!==s.type&&l&&"CharacterClassOpen"!==l.type&&"CharacterClassClose"!==l.type&&"CharacterClassIntersector"!==l.type){let e=a(o,{...n,isCheckingRangeEnd:!0});if("Character"===s.type&&"Character"===e.type)return o.body.pop(),function(e,t){if(t.value<e.value)throw Error("Character class range out of order");return{type:"CharacterClassRange",min:e,max:t}}(s,e);throw Error("Invalid character class range")}return m((0,r.cpOf)("-"))}(0,P,t);case"CharacterClassOpen":return function(e,t,n){let{negate:r}=e,{tokens:i,walk:a}=t,o=i[t.nextIndex],s=[g()],l=M(o);for(;"CharacterClassClose"!==l.type;){if("CharacterClassIntersector"===l.type)s.push(g()),t.nextIndex++;else{let e=s.at(-1);e.body.push(a(e,n))}l=M(i[t.nextIndex],o)}let u=g({negate:r});return 1===s.length?u.body=s[0].body:(u.kind="intersection",u.body=s.map(e=>1===e.body.length?e.body[0]:e)),t.nextIndex++,u}(n,P,t);case"CharacterSet":return function(e,t){let{kind:n,negate:i,value:a}=e,{normalizeUnknownPropertyNames:o,skipPropertyNameValidation:s,unicodePropertyMap:l}=t;if("property"===n){let e=T(a);if(!r.PosixClassNames.has(e)||(null==l?void 0:l.has(e)))return S(a,{negate:i,normalizeUnknownPropertyNames:o,skipPropertyNameValidation:s,unicodePropertyMap:l});n="posix",a=e}return"posix"===n?function(e,t){let n=!!(null==t?void 0:t.negate);if(!r.PosixClassNames.has(e))throw Error('Invalid POSIX class "'.concat(e,'"'));return{type:"CharacterSet",kind:"posix",value:e,negate:n}}(a,{negate:i}):y(n,{negate:i})}(n,P);case"Directive":return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("keep"===e)return{type:"Directive",kind:e};if("flags"===e)return{type:"Directive",kind:e,flags:(0,r.throwIfNullish)(t.flags)};throw Error('Unexpected directive kind "'.concat(e,'"'))}(n.kind,{flags:n.flags});case"GroupOpen":return function(e,t,n){let{tokens:i,capturingGroups:a,namedGroupsByName:o,skipLookbehindValidation:s,walk:l}=t,u=function(e){let{flags:t,kind:n,name:r,negate:i,number:a}=e;switch(n){case"absence_repeater":var o="repeater";!1;return{type:"AbsenceFunction",kind:o,body:_(void 0)};case"atomic":return b({atomic:!0});case"capturing":return f(a,{name:r});case"group":return b({flags:t});case"lookahead":case"lookbehind":return x({behind:"lookbehind"===n,negate:i});default:throw Error('Unexpected group kind "'.concat(n,'"'))}}(e),c="AbsenceFunction"===u.type,h=E(u),p=h&&u.negate;if("CapturingGroup"===u.type&&(a.push(u),u.name&&(0,r.getOrInsert)(o,u.name,[]).push(u)),c&&n.isInAbsenceFunction)throw Error("Nested absence function not supported by Oniguruma");let m=I(i[t.nextIndex]);for(;"GroupClose"!==m.type;){if("Alternator"===m.type)u.body.push(d()),t.nextIndex++;else{let e=u.body.at(-1),t=l(e,{...n,isInAbsenceFunction:n.isInAbsenceFunction||c,isInLookbehind:n.isInLookbehind||h,isInNegLookbehind:n.isInNegLookbehind||p});if(e.body.push(t),(h||n.isInLookbehind)&&!s){let e="Lookbehind includes a pattern not allowed by Oniguruma";if(p||n.isInNegLookbehind){if(A(t)||"CapturingGroup"===t.type)throw Error(e)}else if(A(t)||E(t)&&t.negate)throw Error(e)}}m=I(i[t.nextIndex])}return t.nextIndex++,u}(n,P,t);case"NamedCallout":var a,o;return a=n.kind,o=n.tag,{type:"NamedCallout",kind:a,tag:o,arguments:n.arguments};case"Quantifier":return function(e,t){let{kind:n,min:r,max:a}=e,o=t.parent,s=o.body.at(-1);if(!s||!(0,i.isQuantifiable)(s))throw Error("Quantifier requires a repeatable token");let l=w(n,r,a,s);return o.body.pop(),l}(n,P);case"Subroutine":return function(e,t){let{raw:n}=e,{capturingGroups:r,subroutines:i}=t,a=n.slice(3,-1),o=RegExp("^(?<sign>[-+]?)0*(?<num>[1-9]\\d*)$").exec(a);if(o){let e=+o.groups.num,n=r.length;if(t.hasNumberedRef=!0,(a=({"":e,"+":n+e,"-":n+1-e})[o.groups.sign])<1)throw Error("Invalid subroutine number")}else"0"===a&&(a=0);let s=k(a);return i.push(s),s}(n,P);default:throw Error('Unexpected token type "'.concat(n.type,'"'))}},P={capturingGroups:[],hasNumberedRef:!1,namedGroupsByName:new Map,nextIndex:0,normalizeUnknownPropertyNames:C.normalizeUnknownPropertyNames,parent:null,skipBackrefValidation:C.skipBackrefValidation,skipLookbehindValidation:C.skipLookbehindValidation,skipPropertyNameValidation:C.skipPropertyNameValidation,subroutines:[],tokens:N.tokens,unicodePropertyMap:C.unicodePropertyMap,walk:D},R=(t={type:"Flags",...N.flags},{type:"Regex",body:_(void 0),flags:t}),O=R.body[0];for(;P.nextIndex<N.tokens.length;){let e=D(O,{});"Alternative"===e.type?(R.body.push(e),O=e):O.body.push(e)}let{capturingGroups:j,hasNumberedRef:F,namedGroupsByName:L,subroutines:z}=P;if(F&&L.size&&!C.rules.captureGroup)throw Error("Numbered backref/subroutine not allowed when using named capture");for(let{ref:e}of z)if("number"==typeof e){if(e>j.length)throw Error("Subroutine uses a group number that's not defined");e&&(j[e-1].isSubroutined=!0)}else if(L.has(e)){if(L.get(e).length>1)throw Error((0,r.r)(a(),e));L.get(e)[0].isSubroutined=!0}else throw Error((0,r.r)(o(),e));return R}function d(e){return{type:"Alternative",body:C(null==e?void 0:e.body)}}function h(e,t){let n={type:"Assertion",kind:e};return("word_boundary"===e||"text_segment_boundary"===e)&&(n.negate=!!(null==t?void 0:t.negate)),n}function p(e,t){let n=!!(null==t?void 0:t.orphan);return{type:"Backreference",ref:e,...n&&{orphan:n}}}function f(e,t){var n;let r={name:void 0,isSubroutined:!1,...t};if(void 0!==r.name&&(n=r.name,!RegExp("^[\\p{Alpha}\\p{Pc}][^)]*$","u").test(n)))throw Error('Group name "'.concat(r.name,'" invalid in Oniguruma'));return{type:"CapturingGroup",number:e,...r.name&&{name:r.name},...r.isSubroutined&&{isSubroutined:r.isSubroutined},body:_(null==t?void 0:t.body)}}function m(e,t){let n={useLastValid:!1,...t};if(e>1114111){let t=e.toString(16);if(n.useLastValid)e=1114111;else throw e>1310719?Error('Invalid code point out of range "\\x{'.concat(t,'}"')):Error('Invalid code point out of range in JS "\\x{'.concat(t,'}"'))}return{type:"Character",value:e}}function g(e){let t={kind:"union",negate:!1,...e};return{type:"CharacterClass",kind:t.kind,negate:t.negate,body:C(null==e?void 0:e.body)}}function y(e,t){let n=!!(null==t?void 0:t.negate),r={type:"CharacterSet",kind:e};return("digit"===e||"hex"===e||"newline"===e||"space"===e||"word"===e)&&(r.negate=n),"text_segment"!==e&&("newline"!==e||n)||(r.variableLength=!0),r}function b(e){let t=null==e?void 0:e.atomic,n=null==e?void 0:e.flags;if(t&&n)throw Error("Atomic group cannot have flags");return{type:"Group",...t&&{atomic:t},...n&&{flags:n},body:_(null==e?void 0:e.body)}}function x(e){let t={behind:!1,negate:!1,...e};return{type:"LookaroundAssertion",kind:t.behind?"lookbehind":"lookahead",negate:t.negate,body:_(null==e?void 0:e.body)}}function w(e,t,n,r){if(t>n)throw Error("Invalid reversed quantifier range");return{type:"Quantifier",kind:e,min:t,max:n,body:r}}function k(e){return{type:"Subroutine",ref:e}}function S(e,t){var n;let i={negate:!1,normalizeUnknownPropertyNames:!1,skipPropertyNameValidation:!1,unicodePropertyMap:null,...t},a=null==(n=i.unicodePropertyMap)?void 0:n.get(T(e));if(!a){if(i.normalizeUnknownPropertyNames)a=e.trim().replace(/[- _]+/g,"_").replace(/[A-Z][a-z]+(?=[A-Z])/g,"$&_").replace(/[A-Za-z]+/g,e=>e[0].toUpperCase()+e.slice(1).toLowerCase());else if(i.unicodePropertyMap&&!i.skipPropertyNameValidation)throw Error((0,r.r)(u(),e))}return{type:"CharacterSet",kind:"property",value:null!=a?a:e,negate:i.negate}}function _(e){if(void 0===e)e=[d()];else if(!Array.isArray(e)||!e.length||!e.every(e=>"Alternative"===e.type))throw Error("Invalid body; expected array of one or more Alternative nodes");return e}function C(e){if(void 0===e)e=[];else if(!Array.isArray(e)||!e.every(e=>!!e.type))throw Error("Invalid body; expected array of nodes");return e}function A(e){return"LookaroundAssertion"===e.type&&"lookahead"===e.kind}function E(e){return"LookaroundAssertion"===e.type&&"lookbehind"===e.kind}function T(e){return e.replace(/[- _]+/g,"").toLowerCase()}function M(e,t){return(0,r.throwIfNullish)(e,"".concat((null==t?void 0:t.type)==="Character"&&93===t.value?"Empty":"Unclosed"," character class"))}function I(e){return(0,r.throwIfNullish)(e,"Unclosed group")}},909823:e=>{"use strict";e.s({traverse:()=>n});var t=e.i(198699);function n(e,n){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;function o(e,t){for(let n=0;n<e.length;n++){let r=s(e[n],t,n,e);n=Math.max(-1,n+r)}}function s(l){var u,c;let d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,p=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,f=0,m=!1,g={node:l,parent:d,key:h,container:p,root:e,remove(){r(p).splice(Math.max(0,i(h)+f),1),f--,m=!0},removeAllNextSiblings:()=>r(p).splice(i(h)+1),removeAllPrevSiblings(){let e=i(h)+f;return f-=e,r(p).splice(0,Math.max(0,e))},replaceWith(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=!!n.traverse;p?p[Math.max(0,i(h)+f)]=e:(0,t.throwIfNullish)(d,"Can't replace root node")[h]=e,r&&s(e,d,h,p),m=!0},replaceWithMultiple(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!!t.traverse;if(r(p).splice(Math.max(0,i(h)+f),1,...e),f+=e.length-1,n){let t=0;for(let n=0;n<e.length;n++)t+=s(e[n],d,i(h)+n+t,p)}m=!0},skip(){m=!0}},{type:y}=l,b=n["*"],x=n[y],w="function"==typeof b?b:null==b?void 0:b.enter,k="function"==typeof x?x:null==x?void 0:x.enter;if(null==w||w(g,a),null==k||k(g,a),!m)switch(y){case"AbsenceFunction":case"CapturingGroup":case"Group":case"Alternative":case"CharacterClass":case"LookaroundAssertion":o(l.body,l);break;case"Assertion":case"Backreference":case"Character":case"CharacterSet":case"Directive":case"Flags":case"NamedCallout":case"Subroutine":break;case"CharacterClassRange":s(l.min,l,"min"),s(l.max,l,"max");break;case"Quantifier":s(l.body,l,"body");break;case"Regex":o(l.body,l),s(l.flags,l,"flags");break;default:throw Error('Unexpected node type "'.concat(y,'"'))}return null==x||null==(u=x.exit)||u.call(x,g,a),null==b||null==(c=b.exit)||c.call(b,g,a),f}return s(e),e}function r(e){if(!Array.isArray(e))throw Error("Container expected");return e}function i(e){if("number"!=typeof e)throw Error("Numeric key expected");return e}},222226:e=>{"use strict";e.s({incrementIfAtLeast:()=>i,noncapturingDelim:()=>r,spliceStr:()=>a});var t=e.i(213384);function n(){let e=(0,t._)(["(?(?:[:=!>A-Za-z-]|<[=!]|(DEFINE))"],["\\(\\?(?:[:=!>A-Za-z\\-]|<[=!]|\\(DEFINE\\))"]);return n=function(){return e},e}let r=String.raw(n());function i(e,t){for(let n=0;n<e.length;n++)e[n]>=t&&e[n]++}function a(e,t,n,r){return e.slice(0,t)+r+e.slice(t+n.length)}},280588:e=>{"use strict";e.s({Context:()=>r,forEachUnescaped:()=>a,getGroupContents:()=>s,hasUnescaped:()=>o,replaceUnescaped:()=>i});var t=e.i(213384);function n(){let e=(0,t._)(["","|(?<$skip>[^?|\\?.)"],["","|(?<$skip>\\[\\^?|\\\\?.)"]);return n=function(){return e},e}let r=Object.freeze({DEFAULT:"DEFAULT",CHAR_CLASS:"CHAR_CLASS"});function i(e,t,i,a){let o=RegExp(String.raw(n(),t),"gsu"),s=[!1],l=0,u="";for(let t of e.matchAll(o)){let{0:e,groups:{$skip:n}}=t;if(!n&&(!a||a===r.DEFAULT==!l)){i instanceof Function?u+=i(t,{context:l?r.CHAR_CLASS:r.DEFAULT,negated:s[s.length-1]}):u+=i;continue}"["===e[0]?(l++,s.push("^"===e[1])):"]"===e&&l&&(l--,s.pop()),u+=e}return u}function a(e,t,n,r){i(e,t,n,r)}function o(e,t,n){return!!function(e,t){let n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3?arguments[3]:void 0;if(!RegExp(t,"su").test(e))return null;let o=RegExp("".concat(t,"|(?<$skip>\\\\?.)"),"gsu");o.lastIndex=i;let s=0;for(;n=o.exec(e);){let{0:e,groups:{$skip:t}}=n;if(!t&&(!a||a===r.DEFAULT==!s))return n;"["===e?s++:"]"===e&&s&&s--,o.lastIndex==n.index&&o.lastIndex++}return null}(e,t,0,n)}function s(e,t){let n,r=RegExp("\\\\?.","gsu");r.lastIndex=t;let i=e.length,a=0,o=1;for(;n=r.exec(e);){let[e]=n;if("["===e)a++;else if(a)"]"===e&&a--;else if("("===e)o++;else if(")"===e&&!--o){i=n.index;break}}return e.slice(t,i)}},714249:e=>{"use strict";e.s({atomic:()=>u,possessive:()=>h});var t=e.i(213384),n=e.i(222226),r=e.i(280588);function i(){let e=(0,t._)(["(?<noncapturingStart>",")|(?<capturingStart>((?:?<[^>]+>)?)|\\?."],["(?<noncapturingStart>",")|(?<capturingStart>\\((?:\\?<[^>]+>)?)|\\\\?."]);return i=function(){return e},e}function a(){let e=(0,t._)(["\\(?<backrefNum>[1-9]d*)|<$$(?<wrappedBackrefNum>d+)>"],["\\\\(?<backrefNum>[1-9]\\d*)|<\\$\\$(?<wrappedBackrefNum>\\d+)>"]);return a=function(){return e},e}function o(){let e=(0,t._)(["(?:[?*+]|{d+(?:,d*)?})"],["(?:[?*+]|\\{\\d+(?:,\\d*)?\\})"]);return o=function(){return e},e}function s(){let e=(0,t._)(["\n\\(?: d+\n  | c[A-Za-z]\n  | [gk]<[^>]+>\n  | [pPu]{[^}]+}\n  | u[A-Fa-fd]{4}\n  | x[A-Fa-fd]{2}\n  )\n| ((?: ? (?: [:=!>]\n  | <(?:[=!]|[^>]+>)\n  | [A-Za-z-]+:\n  | (DEFINE)\n  ))?\n| (?<qBase>",")(?<qMod>[?+]?)(?<invalidQ>[?*+{]?)\n| \\?.\n"],["\n\\\\(?: \\d+\n  | c[A-Za-z]\n  | [gk]<[^>]+>\n  | [pPu]\\{[^\\}]+\\}\n  | u[A-Fa-f\\d]{4}\n  | x[A-Fa-f\\d]{2}\n  )\n| \\((?: \\? (?: [:=!>]\n  | <(?:[=!]|[^>]+>)\n  | [A-Za-z\\-]+:\n  | \\(DEFINE\\)\n  ))?\n| (?<qBase>",")(?<qMod>[?+]?)(?<invalidQ>[?*+\\{]?)\n| \\\\?.\n"]);return s=function(){return e},e}let l=RegExp(String.raw(i(),n.noncapturingDelim),"gsu");function u(e,t){var i,o;let s,u=null!=(i=null==t?void 0:t.hiddenCaptures)?i:[],c=null!=(o=null==t?void 0:t.captureTransfers)?o:new Map;if(!/\(\?>/.test(e))return{pattern:e,captureTransfers:c,hiddenCaptures:u};let d="(?:(?=(",h=[0],p=[],f=0,m=0,g=NaN;do{let t;s=!1;let r=0,i=0,a=!1;for(l.lastIndex=Number.isNaN(g)?0:g+d.length;t=l.exec(e);){let{0:o,index:l,groups:{capturingStart:y,noncapturingStart:b}}=t;if("["===o)r++;else if(r)"]"===o&&r--;else if("(?>"!==o||a){if(a&&b)i++;else if(y)a?i++:(f++,h.push(f+m));else if(")"===o&&a){if(!i){let t=f+ ++m;if(e="".concat(e.slice(0,g)).concat(d).concat(e.slice(g+3,l),"))<$$").concat(t,">)").concat(e.slice(l+1)),s=!0,p.push(t),(0,n.incrementIfAtLeast)(u,t),c.size){let e=new Map;c.forEach((n,r)=>{e.set(r>=t?r+1:r,n.map(e=>e>=t?e+1:e))}),c=e}break}i--}}else g=l,a=!0}}while(s)return u.push(...p),{pattern:e=(0,r.replaceUnescaped)(e,String.raw(a()),e=>{let{0:t,groups:{backrefNum:n,wrappedBackrefNum:r}}=e;if(n){let e=+n;if(e>h.length-1)throw Error('Backref "'.concat(t,'" greater than number of captures'));return"\\".concat(h[e])}return"\\".concat(r)},r.Context.DEFAULT),captureTransfers:c,hiddenCaptures:u}}let c=String.raw(o()),d=RegExp(String.raw(s(),c).replace(/\s+/g,""),"gsu");function h(e){let t;if(!new RegExp("".concat(c,"\\+")).test(e))return{pattern:e};let r=[],i=null,a=null,o="",s=0;for(d.lastIndex=0;t=d.exec(e);){let{0:l,index:u,groups:{qBase:c,qMod:h,invalidQ:p}}=t;if("["===l)s||(a=u),s++;else if("]"===l)s?s--:a=null;else if(!s)if("+"===h&&o&&!o.startsWith("(")){if(p)throw Error('Invalid quantifier "'.concat(l,'"'));let t=-1;if(/^\{\d+\}$/.test(c))e=(0,n.spliceStr)(e,u+c.length,h,"");else{if(")"===o||"]"===o){let t=")"===o?i:a;if(null===t)throw Error('Invalid unmatched "'.concat(o,'"'));e="".concat(e.slice(0,t),"(?>").concat(e.slice(t,u)).concat(c,")").concat(e.slice(u+l.length))}else e="".concat(e.slice(0,u-o.length),"(?>").concat(o).concat(c,")").concat(e.slice(u+l.length));t+=4}d.lastIndex+=t}else"("===l[0]?r.push(u):")"===l&&(i=r.length?r.pop():null);o=l}return{pattern:e}}},116478:e=>{"use strict";e.s({}),e.i(11968)},691310:e=>{"use strict";e.s({}),e.i(714249),e.i(116478)},870535:e=>{"use strict";e.s({}),e.i(714249),e.i(116478),e.i(691310)},406924:e=>{"use strict";e.s({recursion:()=>S});var t=e.i(213384),n=e.i(280588);function r(){let e=(0,t._)(["\\g<(?<gRNameOrNum>[^>&]+)&R=(?<gRDepth>[^>]+)>"],["\\\\g<(?<gRNameOrNum>[^>&]+)&R=(?<gRDepth>[^>]+)>"]);return r=function(){return e},e}function i(){let e=(0,t._)(["(?R=(?<rDepth>[^)]+))|",""],["\\(\\?R=(?<rDepth>[^\\)]+)\\)|",""]);return i=function(){return e},e}function a(){let e=(0,t._)(["(?<(?![=!])(?<captureName>[^>]+)>"],["\\(\\?<(?![=!])(?<captureName>[^>]+)>"]);return a=function(){return e},e}function o(){let e=(0,t._)(["","|(?<unnamed>()(?!?)"],["","|(?<unnamed>\\()(?!\\?)"]);return o=function(){return e},e}function s(){let e=(0,t._)(["","|","|(?|\\?."],["","|","|\\(\\?|\\\\?."]);return s=function(){return e},e}function l(){let e=(0,t._)(["(?(DEFINE)"],["\\(\\?\\(DEFINE\\)"]);return l=function(){return e},e}function u(){let e=(0,t._)(["\\[1-9]"],["\\\\[1-9]"]);return u=function(){return e},e}function c(){let e=(0,t._)(["g<","&R=",">"],["\\g<","&R=",">"]);return c=function(){return e},e}function d(){let e=(0,t._)(['Recursive g cannot be used outside the referenced group "','"'],['Recursive \\g cannot be used outside the referenced group "','"']);return d=function(){return e},e}function h(){let e=(0,t._)(["","|((?!?)"],["","|\\((?!\\?)"]);return h=function(){return e},e}function p(){let e=(0,t._)(["","|\\k<(?<backref>[^>]+)>"],["","|\\\\k<(?<backref>[^>]+)>"]);return p=function(){return e},e}function f(){let e=(0,t._)(["k<","",">"],["\\k<","",">"]);return f=function(){return e},e}let m=String.raw,g=m(r()),y=m(i(),g),b=m(a()),x=m(o(),b),w=RegExp(m(s(),b,y),"gsu"),k="Cannot use multiple overlapping recursions";function S(e,t){var r;let i,{hiddenCaptures:a,mode:o}={hiddenCaptures:[],mode:"plugin",...t},s=null!=(r=null==t?void 0:t.captureTransfers)?r:new Map;if(!RegExp(y,"su").test(e))return{pattern:e,captureTransfers:s,hiddenCaptures:a};if("plugin"===o&&(0,n.hasUnescaped)(e,m(l()),n.Context.DEFAULT))throw Error("DEFINE groups cannot be used with recursion");let p=[],f=(0,n.hasUnescaped)(e,m(u()),n.Context.DEFAULT),g=new Map,x=[],S=!1,A=0,T=0;for(w.lastIndex=0;i=w.exec(e);){let{0:t,groups:{captureName:r,rDepth:l,gRNameOrNum:u,gRDepth:M}}=i;if("["===t)A++;else if(A)"]"===t&&A--;else if(l){if(_(l),S)throw Error(k);if(f)throw Error("".concat("external"===o?"Backrefs":"Numbered backrefs"," cannot be used with global recursion"));let t=e.slice(0,i.index),r=e.slice(w.lastIndex);if((0,n.hasUnescaped)(r,y,n.Context.DEFAULT))throw Error(k);let u=l-1;e=C(t,r,u,!1,a,p,T),s=E(s,t,u,p.length,0,T);break}else if(u){_(M);let r=!1;for(let e of x)if(e.name===u||e.num===+u){if(r=!0,e.hasRecursedWithin)throw Error(k);break}if(!r)throw Error(m(d(),"external"===o?u:m(c(),u,M)));let l=g.get(u),y=(0,n.getGroupContents)(e,l);if(f&&(0,n.hasUnescaped)(y,m(h(),b),n.Context.DEFAULT))throw Error("".concat("external"===o?"Backrefs":"Numbered backrefs"," cannot be used with recursion of capturing groups"));let A=e.slice(l,i.index),I=y.slice(A.length+t.length),N=p.length,D=M-1,P=C(A,I,D,!0,a,p,T);s=E(s,A,D,p.length-N,N,T);let R=e.slice(0,l),O=e.slice(l+y.length);e="".concat(R).concat(P).concat(O),w.lastIndex+=P.length-t.length-A.length-I.length,x.forEach(e=>e.hasRecursedWithin=!0),S=!0}else if(r)T++,g.set(String(T),w.lastIndex),g.set(r,w.lastIndex),x.push({num:T,name:r});else if("("===t[0]){let e="("===t;e&&(T++,g.set(String(T),w.lastIndex)),x.push(e?{num:T}:{})}else")"===t&&x.pop()}return a.push(...p),{pattern:e,captureTransfers:s,hiddenCaptures:a}}function _(e){let t="Max depth must be integer between 2 and 100; used ".concat(e);if(!/^[1-9]\d*$/.test(e)||(e*=1)<2||e>100)throw Error(t)}function C(e,t,r,i,a,o,s){let l=new Set;i&&(0,n.forEachUnescaped)(e+t,b,e=>{let{groups:{captureName:t}}=e;l.add(t)},n.Context.DEFAULT);let u=[r,i?l:null,a,o,s];return"".concat(e).concat(A("(?:".concat(e),"forward",...u),"(?:)").concat(A("".concat(t,")"),"backward",...u)).concat(t)}function A(e,t,r,i,a,o,s){let l=e=>"forward"===t?e+2:r-e+2-1,u="";for(let t=0;t<r;t++){let r=l(t);u+=(0,n.replaceUnescaped)(e,m(p(),x),e=>{let{0:t,groups:{captureName:n,unnamed:l,backref:u}}=e;if(u&&i&&!i.has(u))return t;let c="_$".concat(r);if(l||n){let e=s+o.length+1;return o.push(e),function(e,t){for(let n=0;n<e.length;n++)e[n]>=t&&e[n]++}(a,e),l?t:"(?<".concat(n).concat(c,">")}return m(f(),u,c)},n.Context.DEFAULT)}return u}function E(e,t,r,i,a,o){if(e.size&&i){let s=0;(0,n.forEachUnescaped)(t,x,()=>s++,n.Context.DEFAULT);let l=o-s+a,u=new Map;return e.forEach((e,t)=>{let n=(i-s*r)/r,a=s*r,o=t>l+s?t+i:t,c=[];for(let t of e)if(t<=l)c.push(t);else if(t>l+s+n)c.push(t+i);else if(t<=l+s)for(let e=0;e<=r;e++)c.push(t+s*e);else for(let e=0;e<=r;e++)c.push(t+a+n*e);u.set(o,c)}),u}return e}},106630:e=>{"use strict";e.s({toRegExp:()=>e3});var t,n,r,i,a,o,s,l=e.i(632859),u=e.i(526050),c=e.i(607618),d=e.i(238193),h=e.i(526350),p=e.i(11968),f=e.i(353630),m=e.i(634522),g=e.i(213384),y=e.i(671103),b=e.i(935781),x=e.i(909823);e.i(870535);var w=e.i(714249),k=e.i(406924);function S(){let e=(0,g._)(["[d-a]"],["[\\d\\-a]"]);return S=function(){return e},e}function _(){let e=(0,g._)(["[p{L}p{M}p{N}p{Pc}]"],["[\\p{L}\\p{M}\\p{N}\\p{Pc}]"]);return _=function(){return e},e}function C(){let e=(0,g._)(["[p{Alpha}p{Nd}]"],["[\\p{Alpha}\\p{Nd}]"]);return C=function(){return e},e}function A(){let e=(0,g._)(["p{Alpha}"],["\\p{Alpha}"]);return A=function(){return e},e}function E(){let e=(0,g._)(["p{ASCII}"],["\\p{ASCII}"]);return E=function(){return e},e}function T(){let e=(0,g._)(["[p{Zs}	]"],["[\\p{Zs}\\t]"]);return T=function(){return e},e}function M(){let e=(0,g._)(["p{Cc}"],["\\p{Cc}"]);return M=function(){return e},e}function I(){let e=(0,g._)(["p{Nd}"],["\\p{Nd}"]);return I=function(){return e},e}function N(){let e=(0,g._)(["[P{space}&&P{Cc}&&P{Cn}&&P{Cs}]"],["[\\P{space}&&\\P{Cc}&&\\P{Cn}&&\\P{Cs}]"]);return N=function(){return e},e}function D(){let e=(0,g._)(["p{Lower}"],["\\p{Lower}"]);return D=function(){return e},e}function P(){let e=(0,g._)(["[[P{space}&&P{Cc}&&P{Cn}&&P{Cs}]p{Zs}]"],["[[\\P{space}&&\\P{Cc}&&\\P{Cn}&&\\P{Cs}]\\p{Zs}]"]);return P=function(){return e},e}function R(){let e=(0,g._)(["[p{P}p{S}]"],["[\\p{P}\\p{S}]"]);return R=function(){return e},e}function O(){let e=(0,g._)(["p{space}"],["\\p{space}"]);return O=function(){return e},e}function j(){let e=(0,g._)(["p{Upper}"],["\\p{Upper}"]);return j=function(){return e},e}function F(){let e=(0,g._)(["[p{Alpha}p{M}p{Nd}p{Pc}]"],["[\\p{Alpha}\\p{M}\\p{Nd}\\p{Pc}]"]);return F=function(){return e},e}function L(){let e=(0,g._)(["p{AHex}"],["\\p{AHex}"]);return L=function(){return e},e}function z(){let e=(0,g._)(["(?<=A|\n(?!z))"],["(?<=\\A|\\n(?!\\z))"]);return z=function(){return e},e}function B(){let e=(0,g._)(['Uses "G" in a way that requires a subclass'],['Uses "\\G" in a way that requires a subclass']);return B=function(){return e},e}function U(){let e=(0,g._)(["(?=\n?z)"],["(?=\\n?\\z)"]);return U=function(){return e},e}function H(){let e=(0,g._)(['Use of "X" requires non-strict accuracy'],['Use of "\\X" requires non-strict accuracy']);return H=function(){return e},e}function W(){let e=(0,g._)(["p{RI}{2}|","(?:",")*"],["\\p{RI}{2}|","(?:\\u200D",")*"]);return W=function(){return e},e}function V(){let e=(0,g._)(["p{RGI_Emoji}"],["\\p{RGI_Emoji}"]);return V=function(){return e},e}function q(){let e=(0,g._)(["(?>\r\n|","|P{M}p{M}*)"],["(?>\\r\\n|","|\\P{M}\\p{M}*)"]);return q=function(){return e},e}function G(){let e=(0,g._)(['Uses "K" in a way that\'s unsupported'],['Uses "\\K" in a way that\'s unsupported']);return G=function(){return e},e}function $(){let e=(0,g._)(['Uses "G" in a way that requires non-strict accuracy'],['Uses "\\G" in a way that requires non-strict accuracy']);return $=function(){return e},e}function K(){let e=(0,g._)(["B"],["\\B"]);return K=function(){return e},e}function Y(){let e=(0,g._)(["\b"],["\\b"]);return Y=function(){return e},e}function X(){let e=(0,g._)(["[^\n]"],["[^\\n]"]);return X=function(){return e},e}function Z(){let e=(0,g._)(["D"],["\\D"]);return Z=function(){return e},e}function J(){let e=(0,g._)(["d"],["\\d"]);return J=function(){return e},e}function Q(){let e=(0,g._)(["P"],["\\P"]);return Q=function(){return e},e}function ee(){let e=(0,g._)(["p"],["\\p"]);return ee=function(){return e},e}function et(){let e=(0,g._)(["W"],["\\W"]);return et=function(){return e},e}function en(){let e=(0,g._)(["w"],["\\w"]);return en=function(){return e},e}function er(){let e=(0,g._)(["g<","&R=",">"],["\\g<","&R=",">"]);return er=function(){return e},e}function ei(){let e=(0,g._)(["	"],["\\t"]);return ei=function(){return e},e}function ea(){let e=(0,g._)(["\n"],["\\n"]);return ea=function(){return e},e}function eo(){let e=(0,g._)(["\v"],["\\v"]);return eo=function(){return e},e}function es(){let e=(0,g._)(["\f"],["\\f"]);return es=function(){return e},e}function el(){let e=(0,g._)(["\r"],["\\r"]);return el=function(){return e},e}function eu(){let e=(0,g._)(["\u2028"],["\\u2028"]);return eu=function(){return e},e}function ec(){let e=(0,g._)(["\u2029"],["\\u2029"]);return ec=function(){return e},e}function ed(){let e=(0,g._)(["\uFEFF"],["\\uFEFF"]);return ed=function(){return e},e}var eh=String.fromCodePoint,ep=String.raw,ef={flagGroups:(()=>{try{RegExp("(?i:)")}catch(e){return!1}return!0})(),unicodeSets:(()=>{try{RegExp("","v")}catch(e){return!1}return!0})()};function em(e,t){let{enable:n,disable:r}=t;return{dotAll:!(null==r?void 0:r.dotAll)&&!!((null==n?void 0:n.dotAll)||e.dotAll),ignoreCase:!(null==r?void 0:r.ignoreCase)&&!!((null==n?void 0:n.ignoreCase)||e.ignoreCase)}}function eg(e,t,n){return e.has(t)||e.set(t,n),e.get(t)}ef.bugFlagVLiteralHyphenIsRange=!!ef.unicodeSets&&(()=>{try{RegExp(ep(S()),"v")}catch(e){return!0}return!1})(),ef.bugNestedClassIgnoresNegation=ef.unicodeSets&&RegExp("[[^a]]","v").test("a");var ev={ES2025:2025,ES2024:2024,ES2018:2018},ey={auto:"auto",ES2025:"ES2025",ES2024:"ES2024",ES2018:"ES2018"};function eb(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("[object Object]"!==({}).toString.call(e))throw Error("Unexpected options");if(void 0!==e.target&&!ey[e.target])throw Error('Unexpected target "'.concat(e.target,'"'));let t={accuracy:"default",avoidSubclass:!1,flags:"",global:!1,hasIndices:!1,lazyCompileLength:1/0,target:"auto",verbose:!1,...e,rules:{allowOrphanBackrefs:!1,asciiWordBoundaries:!1,captureGroup:!1,recursionLimit:20,singleline:!1,...e.rules}};return"auto"===t.target&&(t.target=ef.flagGroups?"ES2025":ef.unicodeSets?"ES2024":"ES2018"),t}var ex=new Set([eh(304),eh(305)]),ew=ep(_());function ek(e){if(ex.has(e))return[e];let t=new Set,n=e.toLowerCase(),r=n.toUpperCase(),i=eA.get(n),a=e_.get(n),o=eC.get(n);return 1==[...r].length&&t.add(r),o&&t.add(o),i&&t.add(i),t.add(n),a&&t.add(a),[...t]}var eS=new Map("C Other\nCc Control cntrl\nCf Format\nCn Unassigned\nCo Private_Use\nCs Surrogate\nL Letter\nLC Cased_Letter\nLl Lowercase_Letter\nLm Modifier_Letter\nLo Other_Letter\nLt Titlecase_Letter\nLu Uppercase_Letter\nM Mark Combining_Mark\nMc Spacing_Mark\nMe Enclosing_Mark\nMn Nonspacing_Mark\nN Number\nNd Decimal_Number digit\nNl Letter_Number\nNo Other_Number\nP Punctuation punct\nPc Connector_Punctuation\nPd Dash_Punctuation\nPe Close_Punctuation\nPf Final_Punctuation\nPi Initial_Punctuation\nPo Other_Punctuation\nPs Open_Punctuation\nS Symbol\nSc Currency_Symbol\nSk Modifier_Symbol\nSm Math_Symbol\nSo Other_Symbol\nZ Separator\nZl Line_Separator\nZp Paragraph_Separator\nZs Space_Separator\nASCII\nASCII_Hex_Digit AHex\nAlphabetic Alpha\nAny\nAssigned\nBidi_Control Bidi_C\nBidi_Mirrored Bidi_M\nCase_Ignorable CI\nCased\nChanges_When_Casefolded CWCF\nChanges_When_Casemapped CWCM\nChanges_When_Lowercased CWL\nChanges_When_NFKC_Casefolded CWKCF\nChanges_When_Titlecased CWT\nChanges_When_Uppercased CWU\nDash\nDefault_Ignorable_Code_Point DI\nDeprecated Dep\nDiacritic Dia\nEmoji\nEmoji_Component EComp\nEmoji_Modifier EMod\nEmoji_Modifier_Base EBase\nEmoji_Presentation EPres\nExtended_Pictographic ExtPict\nExtender Ext\nGrapheme_Base Gr_Base\nGrapheme_Extend Gr_Ext\nHex_Digit Hex\nIDS_Binary_Operator IDSB\nIDS_Trinary_Operator IDST\nID_Continue IDC\nID_Start IDS\nIdeographic Ideo\nJoin_Control Join_C\nLogical_Order_Exception LOE\nLowercase Lower\nMath\nNoncharacter_Code_Point NChar\nPattern_Syntax Pat_Syn\nPattern_White_Space Pat_WS\nQuotation_Mark QMark\nRadical\nRegional_Indicator RI\nSentence_Terminal STerm\nSoft_Dotted SD\nTerminal_Punctuation Term\nUnified_Ideograph UIdeo\nUppercase Upper\nVariation_Selector VS\nWhite_Space space\nXID_Continue XIDC\nXID_Start XIDS".split(/\s/).map(e=>[(0,y.slug)(e),e])),e_=new Map([["s",eh(383)],[eh(383),"s"]]),eC=new Map([[eh(223),eh(7838)],[eh(107),eh(8490)],[eh(229),eh(8491)],[eh(969),eh(8486)]]),eA=new Map([eT(453),eT(456),eT(459),eT(498),...eM(8072,8079),...eM(8088,8095),...eM(8104,8111),eT(8124),eT(8140),eT(8188)]),eE=new Map([["alnum",ep(C())],["alpha",ep(A())],["ascii",ep(E())],["blank",ep(T())],["cntrl",ep(M())],["digit",ep(I())],["graph",ep(N())],["lower",ep(D())],["print",ep(P())],["punct",ep(R())],["space",ep(O())],["upper",ep(j())],["word",ep(F())],["xdigit",ep(L())]]);function eT(e){let t=eh(e);return[t.toLowerCase(),t]}function eM(e,t){return(function(e,t){let n=[];for(let r=e;r<=t;r++)n.push(r);return n})(e,t).map(e=>eT(e))}var eI=new Set(["Lower","Lowercase","Upper","Uppercase","Ll","Lowercase_Letter","Lt","Titlecase_Letter","Lu","Uppercase_Letter"]),eN={AbsenceFunction(e){let{node:t,parent:n,replaceWith:r}=e,{body:i,kind:a}=t;if("repeater"===a){let e=(0,y.createGroup)();e.body[0].body.push((0,y.createLookaroundAssertion)({negate:!0,body:i}),(0,y.createUnicodeProperty)("Any"));let t=(0,y.createGroup)();t.body[0].body.push((0,y.createQuantifier)("greedy",0,1/0,e)),r(eW(t,n),{traverse:!0})}else throw Error('Unsupported absence function "(?~|"')},Alternative:{enter(e,t){let{node:n,parent:r,key:i}=e,{flagDirectivesByAlt:a}=t,o=n.body.filter(e=>"flags"===e.kind);for(let e=i+1;e<r.body.length;e++)eg(a,r.body[e],[]).push(...o)},exit(e,t){var n;let{node:r}=e,{flagDirectivesByAlt:i}=t;if(null==(n=i.get(r))?void 0:n.length){let e=eF(i.get(r));if(e){let t=(0,y.createGroup)({flags:e});t.body[0].body=r.body,r.body=[eW(t,r)]}}}},Assertion(e,t){let{node:n,parent:r,key:i,container:a,root:o,remove:s,replaceWith:l}=e,{kind:u,negate:c}=n,{asciiWordBoundaries:d,avoidSubclass:h,supportedGNodes:p,wordIsAscii:f}=t;if("text_segment_boundary"===u)throw Error('Unsupported text segment boundary "\\'.concat(c?"Y":"y",'"'));if("line_end"===u)l(eW((0,y.createLookaroundAssertion)({body:[(0,y.createAlternative)({body:[(0,y.createAssertion)("string_end")]}),(0,y.createAlternative)({body:[(0,y.createCharacter)(10)]})]}),r));else if("line_start"===u)l(eW(eB(ep(z()),{skipLookbehindValidation:!0}),r));else if("search_start"===u)if(p.has(n))o.flags.sticky=!0,s();else{let e=a[i-1];if(e&&function(e){let t=["Character","CharacterClass","CharacterSet"];return t.includes(e.type)||"Quantifier"===e.type&&e.min&&t.includes(e.body.type)}(e))l(eW((0,y.createLookaroundAssertion)({negate:!0}),r));else if(h)throw Error(ep(B()));else l(eH((0,y.createAssertion)("string_start"),r)),t.strategy="clip_search"}else if("string_end"===u||"string_start"===u);else if("string_end_newline"===u)l(eW(eB(ep(U())),r));else if("word_boundary"===u){if(!f&&!d){let e="(?:(?<=".concat(ew,")(?!").concat(ew,")|(?<!").concat(ew,")(?=").concat(ew,"))"),t="(?:(?<=".concat(ew,")(?=").concat(ew,")|(?<!").concat(ew,")(?!").concat(ew,"))");l(eW(eB(c?t:e),r))}}else throw Error('Unexpected assertion kind "'.concat(u,'"'))},Backreference(e,t){let{node:n}=e,{jsGroupNameMap:r}=t,{ref:i}=n;"string"!=typeof i||ez(i)||(n.ref=i=ej(i,r))},CapturingGroup(e,t){let{node:n}=e,{jsGroupNameMap:r,subroutineRefMap:i}=t,{name:a}=n;a&&!ez(a)&&(n.name=a=ej(a,r)),i.set(n.number,n),a&&i.set(a,n)},CharacterClassRange(e){let{node:t,parent:n,replaceWith:r}=e;"intersection"===n.kind&&r(eW((0,y.createCharacterClass)({body:[t]}),n),{traverse:!0})},CharacterSet(e,t){let{node:n,parent:r,replaceWith:i}=e,{accuracy:a,minTargetEs2024:o,digitIsAscii:s,spaceIsAscii:l,wordIsAscii:u}=t,{kind:c,negate:d,value:h}=n;if(s&&("digit"===c||"digit"===h))return void i(eH((0,y.createCharacterSet)("digit",{negate:d}),r));if(l&&("space"===c||"space"===h))return void i(eW(eU(eB("[	-\r ]"),d),r));if(u&&("word"===c||"word"===h))return void i(eH((0,y.createCharacterSet)("word",{negate:d}),r));if("any"===c)i(eH((0,y.createUnicodeProperty)("Any"),r));else if("digit"===c)i(eH((0,y.createUnicodeProperty)("Nd",{negate:d}),r));else if("dot"===c);else if("text_segment"===c){if("strict"===a)throw Error(ep(H()));let e="\\p{Emoji}(?:\\p{EMod}|\\uFE0F\\u20E3?|[\\x{E0020}-\\x{E007E}]+\\x{E007F})?",t=ep(W(),e,e);i(eW(eB(ep(q(),o?ep(V()):t),{skipPropertyNameValidation:!0}),r))}else if("hex"===c)i(eH((0,y.createUnicodeProperty)("AHex",{negate:d}),r));else if("newline"===c)i(eW(eB(d?"[^\n]":"(?>\r\n?|[\n\v\f\u2028\u2029])"),r));else if("posix"===c)if(o||"graph"!==h&&"print"!==h)i(eW(eU(eB(eE.get(h)),d),r));else{if("strict"===a)throw Error('POSIX class "'.concat(h,'" requires min target ES2024 or non-strict accuracy'));let e={graph:"!-~",print:" -~"}[h];d&&(e="\0-".concat(eh(e.codePointAt(0)-1)).concat(eh(e.codePointAt(2)+1),"-")),i(eW(eB("[".concat(e,"]")),r))}else if("property"===c)eS.has((0,y.slug)(h))||(n.key="sc");else if("space"===c)i(eH((0,y.createUnicodeProperty)("space",{negate:d}),r));else if("word"===c)i(eW(eU(eB(ew),d),r));else throw Error('Unexpected character set kind "'.concat(c,'"'))},Directive(e){let{node:t,parent:n,root:r,remove:i,replaceWith:a,removeAllPrevSiblings:o,removeAllNextSiblings:s}=e,{kind:l,flags:u}=t;if("flags"===l)if(u.enable||u.disable){let e=(0,y.createGroup)({flags:u});e.body[0].body=s(),a(eW(e,n),{traverse:!0})}else i();else if("keep"===l){let e=r.body[0],t=1===r.body.length&&(0,b.hasOnlyChild)(e,{type:"Group"})&&1===e.body[0].body.length?e.body[0]:r;if(n.parent!==t||t.body.length>1)throw Error(ep(G()));let i=(0,y.createLookaroundAssertion)({behind:!0});i.body[0].body=o(),a(eW(i,n))}else throw Error('Unexpected directive kind "'.concat(l,'"'))},Flags(e){var t;let{node:n,parent:r}=e;if(n.posixIsAscii)throw Error('Unsupported flag "P"');if("word"===n.textSegmentMode)throw Error('Unsupported flag "y{w}"');["digitIsAscii","extended","posixIsAscii","spaceIsAscii","wordIsAscii","textSegmentMode"].forEach(e=>delete n[e]),Object.assign(n,{global:!1,hasIndices:!1,multiline:!1,sticky:null!=(t=n.sticky)&&t}),r.options={disable:{x:!0,n:!0},force:{v:!0}}},Group(e){let{node:t}=e;if(!t.flags)return;let{enable:n,disable:r}=t.flags;(null==n?void 0:n.extended)&&delete n.extended,(null==r?void 0:r.extended)&&delete r.extended,(null==n?void 0:n.dotAll)&&(null==r?void 0:r.dotAll)&&delete n.dotAll,(null==n?void 0:n.ignoreCase)&&(null==r?void 0:r.ignoreCase)&&delete n.ignoreCase,n&&!Object.keys(n).length&&delete t.flags.enable,r&&!Object.keys(r).length&&delete t.flags.disable,t.flags.enable||t.flags.disable||delete t.flags},LookaroundAssertion(e,t){let{node:n}=e,{kind:r}=n;"lookbehind"===r&&(t.passedLookbehind=!0)},NamedCallout(e){let{node:t,parent:n,replaceWith:r}=e,{kind:i}=t;if("fail"===i)r(eW((0,y.createLookaroundAssertion)({negate:!0}),n));else throw Error('Unsupported named callout "(*'.concat(i.toUpperCase(),'"'))},Quantifier(e){let{node:t}=e;if("Quantifier"===t.body.type){let e=(0,y.createGroup)();e.body[0].body.push(t.body),t.body=eW(e,t)}},Regex:{enter(e,t){let{node:n}=e,{supportedGNodes:r}=t,i=[],a=!1,o=!1;for(let e of n.body)if(1===e.body.length&&"search_start"===e.body[0].kind)e.body.pop();else{let t=function e(t){let n=t.find(e=>"search_start"===e.kind||function(e,t){let n={negate:null,...t};return"LookaroundAssertion"===e.type&&(null===n.negate||e.negate===n.negate)&&1===e.body.length&&(0,b.hasOnlyChild)(e.body[0],{type:"Assertion",kind:"search_start"})}(e,{negate:!1})||!function(e){let{type:t}=e;return"Assertion"===t||"Directive"===t||"LookaroundAssertion"===t}(e));if(!n)return null;if("search_start"===n.kind)return n;if("LookaroundAssertion"===n.type)return n.body[0].body[0];if("CapturingGroup"===n.type||"Group"===n.type){let t=[];for(let r of n.body){let n=e(r.body);if(!n)return null;Array.isArray(n)?t.push(...n):t.push(n)}return t}return null}(e.body);t?(a=!0,Array.isArray(t)?i.push(...t):i.push(t)):o=!0}a&&!o&&i.forEach(e=>r.add(e))},exit(e,t){let{accuracy:n,passedLookbehind:r,strategy:i}=t;if("strict"===n&&r&&i)throw Error(ep($()))}},Subroutine(e,t){let{node:n}=e,{jsGroupNameMap:r}=t,{ref:i}=n;"string"!=typeof i||ez(i)||(n.ref=i=ej(i,r))}},eD={Backreference(e,t){let{node:n}=e,{multiplexCapturesToLeftByRef:r,reffedNodesByReferencer:i}=t,{orphan:a,ref:o}=n;a||i.set(n,[...r.get(o).map(e=>{let{node:t}=e;return t})])},CapturingGroup:{enter(e,t){var n;let{node:r,parent:i,replaceWith:a,skip:o}=e,{groupOriginByCopy:s,groupsByName:l,multiplexCapturesToLeftByRef:u,openRefs:c,reffedNodesByReferencer:d}=t,h=s.get(r);if(h&&c.has(r.number)){let e=eH(eO(r.number),i);d.set(e,c.get(r.number)),a(e);return}c.set(r.number,r),u.set(r.number,[]),r.name&&eg(u,r.name,[]);let p=u.get(null!=(n=r.name)?n:r.number);for(let e=0;e<p.length;e++){let t=p[e];if(h===t.node||h&&h===t.origin||r===t.origin){p.splice(e,1);break}}if(u.get(r.number).push({node:r,origin:h}),r.name&&u.get(r.name).push({node:r,origin:h}),r.name){let e=eg(l,r.name,new Map),t=!1;if(h)t=!0;else for(let n of e.values())if(!n.hasDuplicateNameToRemove){t=!0;break}l.get(r.name).set(r,{node:r,hasDuplicateNameToRemove:t})}},exit(e,t){let{node:n}=e,{openRefs:r}=t;r.delete(n.number)}},Group:{enter(e,t){let{node:n}=e;t.prevFlags=t.currentFlags,n.flags&&(t.currentFlags=em(t.currentFlags,n.flags))},exit(e,t){t.currentFlags=t.prevFlags}},Subroutine(e,t){let{node:n,parent:r,replaceWith:i}=e,{isRecursive:a,ref:o}=n;if(a){let e=r;for(;(e=e.parent)&&("CapturingGroup"!==e.type||e.name!==o&&e.number!==o););t.reffedNodesByReferencer.set(n,e);return}let s=t.subroutineRefMap.get(o),l=0===o,u=l?eO(0):function e(t,n,r,i){let a=Array.isArray(t)?[]:{};for(let[s,l]of Object.entries(t))if("parent"===s)a.parent=Array.isArray(r)?i:r;else if(l&&"object"==typeof l)a[s]=e(l,n,a,r);else{if("type"===s&&"CapturingGroup"===l){var o;n.set(a,null!=(o=n.get(t))?o:t)}a[s]=l}return a}(s,t.groupOriginByCopy,null),c=u;if(!l){var d,h;let e=eF(function(e,t){let n=[];for(;e=e.parent;)(!t||t(e))&&n.push(e);return n}(s,e=>"Group"===e.type&&!!e.flags)),n=e?em(t.globalFlags,e):t.globalFlags;d=n,h=t.currentFlags,(d.dotAll!==h.dotAll||d.ignoreCase!==h.ignoreCase)&&(c=(0,y.createGroup)({flags:function(e){let{dotAll:t,ignoreCase:n}=e,r={};return(t||n)&&(r.enable={},t&&(r.enable.dotAll=!0),n&&(r.enable.ignoreCase=!0)),t&&n||(r.disable={},t||(r.disable.dotAll=!0),n||(r.disable.ignoreCase=!0)),r}(n)})).body[0].body.push(u)}i(eW(c,r),{traverse:!l})}},eP={Backreference(e,t){let{node:n,parent:r,replaceWith:i}=e;if(n.orphan){t.highestOrphanBackref=Math.max(t.highestOrphanBackref,n.ref);return}let a=t.reffedNodesByReferencer.get(n).filter(e=>(function(e,t){let n=t;do{if("Regex"===n.type)return!1;if("Alternative"===n.type)continue;if(n===e)return!1;for(let t of eL(n.parent)){if(t===n)break;if(t===e||function e(t,n){var r;for(let i of null!=(r=eL(t))?r:[])if(i===n||e(i,n))return!0;return!1}(t,e))return!0}}while(n=n.parent)throw Error("Unexpected path")})(e,n));a.length?a.length>1?i(eW((0,y.createGroup)({atomic:!0,body:a.reverse().map(e=>(0,y.createAlternative)({body:[(0,y.createBackreference)(e.number)]}))}),r)):n.ref=a[0].number:i(eW((0,y.createLookaroundAssertion)({negate:!0}),r))},CapturingGroup(e,t){let{node:n}=e;n.number=++t.numCapturesToLeft,n.name&&t.groupsByName.get(n.name).get(n).hasDuplicateNameToRemove&&delete n.name},Regex:{exit(e,t){let{node:n}=e,r=Math.max(t.highestOrphanBackref-t.numCapturesToLeft,0);for(let e=0;e<r;e++){let e=(0,y.createCapturingGroup)();n.body.at(-1).body.push(e)}}},Subroutine(e,t){let{node:n}=e;n.isRecursive&&0!==n.ref&&(n.ref=t.reffedNodesByReferencer.get(n).number)}};function eR(e){(0,x.traverse)(e,{"*"(e){let{node:t,parent:n}=e;t.parent=n}})}function eO(e){let t=(0,y.createSubroutine)(e);return t.isRecursive=!0,t}function ej(e,t){if(t.has(e))return t.get(e);let n="$".concat(t.size,"_").concat(e.replace(RegExp("^[^$_\\p{IDS}]|[^$\\u200C\\u200D\\p{IDC}]","ug"),"_"));return t.set(e,n),n}function eF(e){let t=["dotAll","ignoreCase"],n={enable:{},disable:{}};return(e.forEach(e=>{let{flags:r}=e;t.forEach(e=>{var t,i;(null==(t=r.enable)?void 0:t[e])&&(delete n.disable[e],n.enable[e]=!0),(null==(i=r.disable)?void 0:i[e])&&(n.disable[e]=!0)})}),Object.keys(n.enable).length||delete n.enable,Object.keys(n.disable).length||delete n.disable,n.enable||n.disable)?n:null}function eL(e){if(!e)throw Error("Node expected");let{body:t}=e;return Array.isArray(t)?t:t?[t]:null}function ez(e){return RegExp("^[$_\\p{IDS}][$\\u200C\\u200D\\p{IDC}]*$","u").test(e)}function eB(e,t){let n=(0,y.parse)(e,{...t,unicodePropertyMap:eS}).body;return n.length>1||n[0].body.length>1?(0,y.createGroup)({body:n}):n[0].body[0]}function eU(e,t){return e.negate=t,e}function eH(e,t){return e.parent=t,e}function eW(e,t){return eR(e),e.parent=t,e}var eV={"*":{enter(e,t){let{node:n}=e;if(e0(n)){let e=t.getCurrentModI();t.pushModI(n.flags?em({ignoreCase:e},n.flags).ignoreCase:e)}},exit(e,t){let{node:n}=e;e0(n)&&t.popModI()}},Backreference(e,t){t.setHasCasedChar()},Character(e,t){let{node:n}=e;eZ(eh(n.value))&&t.setHasCasedChar()},CharacterClassRange(e,t){let{node:n,skip:r}=e;r(),eJ(n,{firstOnly:!0}).length&&t.setHasCasedChar()},CharacterSet(e,t){let{node:n}=e;"property"===n.kind&&eI.has(n.value)&&t.setHasCasedChar()}},eq={Alternative(e,t,n){let{body:r}=e;return r.map(n).join("")},Assertion(e){let{kind:t,negate:n}=e;if("string_end"===t)return"$";if("string_start"===t)return"^";if("word_boundary"===t)return n?ep(K()):ep(Y());throw Error('Unexpected assertion kind "'.concat(t,'"'))},Backreference(e,t){let{ref:n}=e;if("number"!=typeof n)throw Error("Unexpected named backref in transformed AST");if(!t.useFlagMods&&"strict"===t.accuracy&&t.currentFlags.ignoreCase&&!t.captureMap.get(n).ignoreCase)throw Error("Use of case-insensitive backref to case-sensitive group requires target ES2025 or non-strict accuracy");return"\\"+n},CapturingGroup(e,t,n){let{body:r,name:i,number:a}=e,o={ignoreCase:t.currentFlags.ignoreCase},s=t.originMap.get(e);return s&&(o.hidden=!0,a>s.number&&(o.transferTo=s.number)),t.captureMap.set(a,o),"(".concat(i?"?<".concat(i,">"):"").concat(r.map(n).join("|"),")")},Character(e,t){let{value:n}=e,r=eh(n),i=eQ(n,{escDigit:"Backreference"===t.lastNode.type,inCharClass:t.inCharClass,useFlagV:t.useFlagV});if(i!==r)return i;if(t.useAppliedIgnoreCase&&t.currentFlags.ignoreCase&&eZ(r)){let e=ek(r);return t.inCharClass?e.join(""):e.length>1?"[".concat(e.join(""),"]"):e[0]}return r},CharacterClass(e,t,n){let{kind:r,negate:i,parent:a}=e,{body:o}=e;if("intersection"===r&&!t.useFlagV)throw Error("Use of class intersection requires min target ES2024");ef.bugFlagVLiteralHyphenIsRange&&t.useFlagV&&o.some(e1)&&(o=[(0,y.createCharacter)(45),...o.filter(e=>!e1(e))]);let s=()=>"[".concat(i?"^":"").concat(o.map(n).join("intersection"===r?"&&":""),"]");if(!t.inCharClass){if((!t.useFlagV||ef.bugNestedClassIgnoresNegation)&&!i){let t=o.filter(e=>"CharacterClass"===e.type&&"union"===e.kind&&e.negate);if(t.length){let r=(0,y.createGroup)(),i=r.body[0];return r.parent=a,i.parent=r,e.body=o=o.filter(e=>!t.includes(e)),o.length?(e.parent=i,i.body.push(e)):r.body.pop(),t.forEach(e=>{let t=(0,y.createAlternative)({body:[e]});e.parent=t,t.parent=r,r.body.push(t)}),n(r)}}t.inCharClass=!0;let r=s();return t.inCharClass=!1,r}let l=o[0];if("union"===r&&!i&&l&&((!t.useFlagV||!t.verbose)&&"union"===a.kind&&!(ef.bugFlagVLiteralHyphenIsRange&&t.useFlagV)||!t.verbose&&"intersection"===a.kind&&1===o.length&&"CharacterClassRange"!==l.type))return o.map(n).join("");if(!t.useFlagV&&"CharacterClass"===a.type)throw Error("Use of nested character class requires min target ES2024");return s()},CharacterClassRange(e,t){let n=e.min.value,r=e.max.value,i={escDigit:!1,inCharClass:!0,useFlagV:t.useFlagV},a=eQ(n,i),o=eQ(r,i),s=new Set;return t.useAppliedIgnoreCase&&t.currentFlags.ignoreCase&&(function(e){let t=e.map(e=>e.codePointAt(0)).sort((e,t)=>e-t),n=[],r=null;for(let e=0;e<t.length;e++)t[e+1]===t[e]+1?null!=r||(r=t[e]):null===r?n.push(t[e]):(n.push([r,t[e]]),r=null);return n})(eJ(e)).forEach(e=>{s.add(Array.isArray(e)?"".concat(eQ(e[0],i),"-").concat(eQ(e[1],i)):eQ(e,i))}),"".concat(a,"-").concat(o).concat([...s].join(""))},CharacterSet(e,t){let{kind:n,negate:r,value:i,key:a}=e;if("dot"===n)return t.currentFlags.dotAll?t.appliedGlobalFlags.dotAll||t.useFlagMods?".":"[^]":ep(X());if("digit"===n)return r?ep(Z()):ep(J());if("property"===n){if(t.useAppliedIgnoreCase&&t.currentFlags.ignoreCase&&eI.has(i))throw Error('Unicode property "'.concat(i,"\" can't be case-insensitive when other chars have specific case"));return"".concat(r?ep(Q()):ep(ee()),"{").concat(a?"".concat(a,"="):"").concat(i,"}")}if("word"===n)return r?ep(et()):ep(en());throw Error('Unexpected character set kind "'.concat(n,'"'))},Flags:(e,t)=>(t.appliedGlobalFlags.ignoreCase?"i":"")+(e.dotAll?"s":"")+(e.sticky?"y":""),Group(e,t,n){let{atomic:r,body:i,flags:a,parent:o}=e,s=t.currentFlags;a&&(t.currentFlags=em(s,a));let l=i.map(n).join("|"),u=t.verbose||1!==i.length||"Quantifier"===o.type||r||t.useFlagMods&&a?"(?".concat(function(e,t,n){if(e)return">";let r="";if(t&&n){let{enable:e,disable:n}=t;r=((null==e?void 0:e.ignoreCase)?"i":"")+((null==e?void 0:e.dotAll)?"s":"")+(n?"-":"")+((null==n?void 0:n.ignoreCase)?"i":"")+((null==n?void 0:n.dotAll)?"s":"")}return"".concat(r,":")}(r,a,t.useFlagMods)).concat(l,")"):l;return t.currentFlags=s,u},LookaroundAssertion(e,t,n){let{body:r,kind:i,negate:a}=e,o="".concat("lookahead"===i?"":"<").concat(a?"!":"=");return"(?".concat(o).concat(r.map(n).join("|"),")")},Quantifier:(e,t,n)=>n(e.body)+function(e){let{kind:t,max:n,min:r}=e;return(r||1!==n?r||n!==1/0?1===r&&n===1/0?"+":r===n?"{".concat(r,"}"):"{".concat(r,",").concat(n===1/0?"":n,"}"):"*":"?")+({greedy:"",lazy:"?",possessive:"+"})[t]}(e),Subroutine(e,t){let{isRecursive:n,ref:r}=e;if(!n)throw Error("Unexpected non-recursive subroutine in transformed AST");let i=t.recursionLimit;return 0===r?"(?R=".concat(i,")"):ep(er(),r,i)}},eG=new Set(["$","(",")","*","+",".","?","[","\\","]","^","{","|","}"]),e$=new Set(["-","\\","]","^","["]),eK=new Set(["(",")","-","/","[","\\","]","^","{","|","}","!","#","$","%","&","*","+",",",".",":",";","<","=",">","?","@","`","~"]),eY=new Map([[9,ep(ei())],[10,ep(ea())],[11,ep(eo())],[12,ep(es())],[13,ep(el())],[8232,ep(eu())],[8233,ep(ec())],[65279,ep(ed())]]),eX=RegExp("^\\p{Cased}$","u");function eZ(e){return eX.test(e)}function eJ(e,t){let n=!!(null==t?void 0:t.firstOnly),r=e.min.value,i=e.max.value,a=[];if(r<65&&(65535===i||i>=131071)||65536===r&&i>=131071)return a;for(let e=r;e<=i;e++){let t=eh(e);if(!eZ(t))continue;let o=ek(t).filter(e=>{let t=e.codePointAt(0);return t<r||t>i});if(o.length&&(a.push(...o),n))break}return a}function eQ(e,t){var n;let{escDigit:r,inCharClass:i,useFlagV:a}=t;if(eY.has(e))return eY.get(e);if(e<32||e>126&&e<160||e>262143||r&&(n=e)>47&&n<58)return e>255?"\\u{".concat(e.toString(16).toUpperCase(),"}"):"\\x".concat(e.toString(16).toUpperCase().padStart(2,"0"));let o=eh(e);return((i?a?eK:e$:eG).has(o)?"\\":"")+o}function e0(e){let{type:t}=e;return"CapturingGroup"===t||"Group"===t||"LookaroundAssertion"===t}function e1(e){let{type:t,value:n}=e;return"Character"===t&&45===n}var e2=(t=new WeakMap,n=new WeakMap,r=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakSet,s=class e extends RegExp{get source(){return(0,l._)(this,r)||"(?:)"}exec(t){if(!(0,l._)(this,n)){let{lazyCompile:t,...i}=this.rawOptions;(0,c._)(this,n,new e((0,l._)(this,r),this.flags,i))}let i=this.global||this.sticky,s=this.lastIndex;if("clip_search"===(0,l._)(this,a)&&i&&s){this.lastIndex=0;let e=(0,d._)(this,o,e5).call(this,t.slice(s));return e&&(function(e,t,n,r){if(e.index+=t,e.input=n,r){let n=e.indices;for(let e=0;e<n.length;e++){let r=n[e];r&&(n[e]=[r[0]+t,r[1]+t])}let r=n.groups;r&&Object.keys(r).forEach(e=>{let n=r[e];n&&(r[e]=[n[0]+t,n[1]+t])})}}(e,s,t,this.hasIndices),this.lastIndex+=s),e}return(0,d._)(this,o,e5).call(this,t)}constructor(s,d,f){let m=!!(null==f?void 0:f.lazyCompile);if(s instanceof RegExp){if(f)throw Error("Cannot provide options when copying a regexp");super(s,d),(0,h._)(this,o),(0,u._)(this,t,{writable:!0,value:new Map}),(0,u._)(this,n,{writable:!0,value:null}),(0,u._)(this,r,{writable:!0,value:void 0}),(0,u._)(this,i,{writable:!0,value:null}),(0,u._)(this,a,{writable:!0,value:null}),(0,p._)(this,"rawOptions",{}),(0,c._)(this,r,s.source),s instanceof e&&((0,c._)(this,t,(0,l._)(s,t)),(0,c._)(this,i,(0,l._)(s,i)),(0,c._)(this,a,(0,l._)(s,a)),this.rawOptions=s.rawOptions)}else{let e={hiddenCaptures:[],strategy:null,transfers:[],...f};super(m?"":s,d),(0,h._)(this,o),(0,u._)(this,t,{writable:!0,value:new Map}),(0,u._)(this,n,{writable:!0,value:null}),(0,u._)(this,r,{writable:!0,value:void 0}),(0,u._)(this,i,{writable:!0,value:null}),(0,u._)(this,a,{writable:!0,value:null}),(0,p._)(this,"rawOptions",{}),(0,c._)(this,r,s),(0,c._)(this,t,function(e,t){let n=new Map;for(let t of e)n.set(t,{hidden:!0});for(let[e,r]of t)for(let t of r)eg(n,t,{}).transferTo=e;return n}(e.hiddenCaptures,e.transfers)),(0,c._)(this,a,e.strategy),this.rawOptions=null!=f?f:{}}m||(0,c._)(this,n,this)}});function e3(e,t){let n=function(e,t){let n=eb(t),r=function(e,t){let n={accuracy:"default",asciiWordBoundaries:!1,avoidSubclass:!1,bestEffortTarget:"ES2025",...t};eR(e);let r={accuracy:n.accuracy,asciiWordBoundaries:n.asciiWordBoundaries,avoidSubclass:n.avoidSubclass,flagDirectivesByAlt:new Map,jsGroupNameMap:new Map,minTargetEs2024:ev[n.bestEffortTarget]>=ev.ES2024,passedLookbehind:!1,strategy:null,subroutineRefMap:new Map,supportedGNodes:new Set,digitIsAscii:e.flags.digitIsAscii,spaceIsAscii:e.flags.spaceIsAscii,wordIsAscii:e.flags.wordIsAscii};(0,x.traverse)(e,eN,r);let i={dotAll:e.flags.dotAll,ignoreCase:e.flags.ignoreCase},a={currentFlags:i,prevFlags:null,globalFlags:i,groupOriginByCopy:new Map,groupsByName:new Map,multiplexCapturesToLeftByRef:new Map,openRefs:new Map,reffedNodesByReferencer:new Map,subroutineRefMap:r.subroutineRefMap};(0,x.traverse)(e,eD,a);let o={groupsByName:a.groupsByName,highestOrphanBackref:0,numCapturesToLeft:0,reffedNodesByReferencer:a.reffedNodesByReferencer};return(0,x.traverse)(e,eP,o),e._originMap=a.groupOriginByCopy,e._strategy=r.strategy,e}((0,y.parse)(e,{flags:n.flags,normalizeUnknownPropertyNames:!0,rules:{captureGroup:n.rules.captureGroup,singleline:n.rules.singleline},skipBackrefValidation:n.rules.allowOrphanBackrefs,unicodePropertyMap:eS}),{accuracy:n.accuracy,asciiWordBoundaries:n.rules.asciiWordBoundaries,avoidSubclass:n.avoidSubclass,bestEffortTarget:n.target}),i=function(e,t){let n=eb(t),r=ev[n.target]>=ev.ES2024,i=ev[n.target]>=ev.ES2025,a=n.rules.recursionLimit;if(!Number.isInteger(a)||a<2||a>20)throw Error("Invalid recursionLimit; use 2-20");let o=null,s=null;if(!i){let t=[e.flags.ignoreCase];(0,x.traverse)(e,eV,{getCurrentModI:()=>t.at(-1),popModI(){t.pop()},pushModI(e){t.push(e)},setHasCasedChar(){t.at(-1)?o=!0:s=!0}})}let l={dotAll:e.flags.dotAll,ignoreCase:!!((e.flags.ignoreCase||o)&&!s)},u=e,c={accuracy:n.accuracy,appliedGlobalFlags:l,captureMap:new Map,currentFlags:{dotAll:e.flags.dotAll,ignoreCase:e.flags.ignoreCase},inCharClass:!1,lastNode:u,originMap:e._originMap,recursionLimit:a,useAppliedIgnoreCase:!!(!i&&o&&s),useFlagMods:i,useFlagV:r,verbose:n.verbose};function d(e){return c.lastNode=u,u=e,(function(e,t){if(null==e)throw Error(null!=t?t:"Value expected");return e})(eq[e.type],'Unexpected node type "'.concat(e.type,'"'))(e,c,d)}let h={pattern:e.body.map(d).join("|"),flags:d(e.flags),options:{...e.options}};return r||(delete h.options.force.v,h.options.disable.v=!0,h.options.unicodeSetsPlugin=null),h._captureTransfers=new Map,h._hiddenCaptures=[],c.captureMap.forEach((e,t)=>{e.hidden&&h._hiddenCaptures.push(t),e.transferTo&&eg(h._captureTransfers,e.transferTo,[]).push(t)}),h}(r,n),a=(0,k.recursion)(i.pattern,{captureTransfers:i._captureTransfers,hiddenCaptures:i._hiddenCaptures,mode:"external"}),o=(0,w.possessive)(a.pattern),s=(0,w.atomic)(o.pattern,{captureTransfers:a.captureTransfers,hiddenCaptures:a.hiddenCaptures}),l={pattern:s.pattern,flags:"".concat(n.hasIndices?"d":"").concat(n.global?"g":"").concat(i.flags).concat(i.options.disable.v?"u":"v")};if(n.avoidSubclass){if(n.lazyCompileLength!==1/0)throw Error("Lazy compilation requires subclass")}else{let e=s.hiddenCaptures.sort((e,t)=>e-t),t=Array.from(s.captureTransfers),i=r._strategy,a=l.pattern.length>=n.lazyCompileLength;(e.length||t.length||i||a)&&(l.options={...e.length&&{hiddenCaptures:e},...t.length&&{transfers:t},...i&&{strategy:i},...a&&{lazyCompile:a}})}return l}(e,t);return n.options?new e2(n.pattern,n.flags,n.options):new RegExp(n.pattern,n.flags)}function e5(e){let r;(0,l._)(this,n).lastIndex=this.lastIndex;let a=(0,f._)((0,m._)(s.prototype),"exec",this).call((0,l._)(this,n),e);if(this.lastIndex=(0,l._)(this,n).lastIndex,!a||!(0,l._)(this,t).size)return a;let o=[...a];a.length=1,this.hasIndices&&(r=[...a.indices],a.indices.length=1);let u=[0];for(let e=1;e<o.length;e++){var d;let{hidden:n,transferTo:s}=null!=(d=(0,l._)(this,t).get(e))?d:{};if(n?u.push(null):(u.push(a.length),a.push(o[e]),this.hasIndices&&a.indices.push(r[e])),s&&void 0!==o[e]){let t=u[s];if(!t)throw Error('Invalid capture transfer to "'.concat(t,'"'));if(a[t]=o[e],this.hasIndices&&(a.indices[t]=r[e]),a.groups){(0,l._)(this,i)||(0,c._)(this,i,function(e){let t,n=RegExp("(?<capture>\\((?:\\?<(?![=!])(?<name>[^>]+)>|(?!\\?)))|\\\\?.","gsu"),r=new Map,i=0,a=0;for(;t=n.exec(e);){let{0:e,groups:{capture:n,name:o}}=t;"["===e?i++:i?"]"===e&&i--:n&&(a++,o&&r.set(a,o))}return r}(this.source));let t=(0,l._)(this,i).get(s);t&&(a.groups[t]=o[e],this.hasIndices&&(a.indices.groups[t]=r[e]))}}}return a}},296544:e=>{"use strict";e.s({J:()=>n});var t=e.i(11968);class n{findNextMatchSync(e,t,n){let r="string"==typeof e?e:e.content,i=[];function a(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return{index:e,captureIndices:t.indices.map(e=>null==e?{start:0xffffffff,end:0xffffffff,length:0}:{start:e[0]+n,end:e[1]+n,length:e[1]-e[0]})}}for(let e=0;e<this.regexps.length;e++){let n=this.regexps[e];if(n)try{n.lastIndex=t;let o=n.exec(r);if(!o)continue;if(o.index===t)return a(e,o,0);i.push([e,o,0])}catch(e){if(this.options.forgiving)continue;throw e}}if(i.length){let e=Math.min(...i.map(e=>e[1].index));for(let[t,n,r]of i)if(n.index===e)return a(t,n,r)}return null}constructor(e,n={}){(0,t._)(this,"regexps",void 0),this.patterns=e,this.options=n;let{forgiving:r=!1,cache:i,regexConstructor:a}=n;if(!a)throw Error("Option `regexConstructor` is not provided");this.regexps=e.map(e=>{if("string"!=typeof e)return e;let t=null==i?void 0:i.get(e);if(t){if(t instanceof RegExp)return t;if(r)return null;throw t}try{let t=a(e);return null==i||i.set(e,t),t}catch(t){if(null==i||i.set(e,t),r)return null;throw t}})}}},374234:e=>{"use strict";e.s({createJavaScriptRegexEngine:()=>r});var t=e.i(106630),n=e.i(296544);function r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=Object.assign({target:"auto",cache:new Map},e);return r.regexConstructor||(r.regexConstructor=e=>{var n;return n={target:r.target},(0,t.toRegExp)(e,{global:!0,hasIndices:!0,lazyCompileLength:3e3,rules:{allowOrphanBackrefs:!0,asciiWordBoundaries:!0,captureGroup:!0,recursionLimit:5,singleline:!0},...n})}),{createScanner:e=>new n.J(e,r),createString:e=>({content:e})}}},205756:e=>{"use strict";e.s({twMerge:()=>Q});let t=(e,n)=>{var r;if(0===e.length)return n.classGroupId;let i=e[0],a=n.nextPart.get(i),o=a?t(e.slice(1),a):void 0;if(o)return o;if(0===n.validators.length)return;let s=e.join("-");return null==(r=n.validators.find(e=>{let{validator:t}=e;return t(s)}))?void 0:r.classGroupId},n=/^\[(.+)\]$/,r=(e,t,n,o)=>{e.forEach(e=>{if("string"==typeof e){(""===e?t:i(t,e)).classGroupId=n;return}if("function"==typeof e)return a(e)?void r(e(o),t,n,o):void t.validators.push({validator:e,classGroupId:n});Object.entries(e).forEach(e=>{let[a,s]=e;r(s,i(t,a),n,o)})})},i=(e,t)=>{let n=e;return t.split("-").forEach(e=>{n.nextPart.has(e)||n.nextPart.set(e,{nextPart:new Map,validators:[]}),n=n.nextPart.get(e)}),n},a=e=>e.isThemeGetter,o=/\s+/;function s(){let e,t,n=0,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=l(e))&&(r&&(r+=" "),r+=t);return r}let l=e=>{let t;if("string"==typeof e)return e;let n="";for(let r=0;r<e.length;r++)e[r]&&(t=l(e[r]))&&(n&&(n+=" "),n+=t);return n},u=e=>{let t=t=>t[e]||[];return t.isThemeGetter=!0,t},c=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,d=/^\((?:(\w[\w-]*):)?(.+)\)$/i,h=/^\d+\/\d+$/,p=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,f=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,m=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,g=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,y=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,b=e=>h.test(e),x=e=>!!e&&!Number.isNaN(Number(e)),w=e=>!!e&&Number.isInteger(Number(e)),k=e=>e.endsWith("%")&&x(e.slice(0,-1)),S=e=>p.test(e),_=()=>!0,C=e=>f.test(e)&&!m.test(e),A=()=>!1,E=e=>g.test(e),T=e=>y.test(e),M=e=>!N(e)&&!F(e),I=e=>V(e,K,A),N=e=>c.test(e),D=e=>V(e,Y,C),P=e=>V(e,X,x),R=e=>V(e,G,A),O=e=>V(e,$,T),j=e=>V(e,J,E),F=e=>d.test(e),L=e=>q(e,Y),z=e=>q(e,Z),B=e=>q(e,G),U=e=>q(e,K),H=e=>q(e,$),W=e=>q(e,J,!0),V=(e,t,n)=>{let r=c.exec(e);return!!r&&(r[1]?t(r[1]):n(r[2]))},q=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=d.exec(e);return!!r&&(r[1]?t(r[1]):n)},G=e=>"position"===e||"percentage"===e,$=e=>"image"===e||"url"===e,K=e=>"length"===e||"size"===e||"bg-size"===e,Y=e=>"length"===e,X=e=>"number"===e,Z=e=>"family-name"===e,J=e=>"shadow"===e;Symbol.toStringTag;let Q=function(e){let i,a,l;for(var u=arguments.length,c=Array(u>1?u-1:0),d=1;d<u;d++)c[d-1]=arguments[d];let h=function(o){let s;return a=(i={cache:(e=>{if(e<1)return{get:()=>void 0,set:()=>{}};let t=0,n=new Map,r=new Map,i=(i,a)=>{n.set(i,a),++t>e&&(t=0,r=n,n=new Map)};return{get(e){let t=n.get(e);return void 0!==t?t:void 0!==(t=r.get(e))?(i(e,t),t):void 0},set(e,t){n.has(e)?n.set(e,t):i(e,t)}}})((s=c.reduce((e,t)=>t(e),e())).cacheSize),parseClassName:(e=>{let{prefix:t,experimentalParseClassName:n}=e,r=e=>{let t,n,r=[],i=0,a=0,o=0;for(let n=0;n<e.length;n++){let s=e[n];if(0===i&&0===a){if(":"===s){r.push(e.slice(o,n)),o=n+1;continue}if("/"===s){t=n;continue}}"["===s?i++:"]"===s?i--:"("===s?a++:")"===s&&a--}let s=0===r.length?e:e.substring(o),l=(n=s).endsWith("!")?n.substring(0,n.length-1):n.startsWith("!")?n.substring(1):n;return{modifiers:r,hasImportantModifier:l!==s,baseClassName:l,maybePostfixModifierPosition:t&&t>o?t-o:void 0}};if(t){let e=t+":",n=r;r=t=>t.startsWith(e)?n(t.substring(e.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:t,maybePostfixModifierPosition:void 0}}if(n){let e=r;r=t=>n({className:t,parseClassName:e})}return r})(s),sortModifiers:(e=>{let t=Object.fromEntries(e.orderSensitiveModifiers.map(e=>[e,!0]));return e=>{if(e.length<=1)return e;let n=[],r=[];return e.forEach(e=>{"["===e[0]||t[e]?(n.push(...r.sort(),e),r=[]):r.push(e)}),n.push(...r.sort()),n}})(s),...(e=>{let i=(e=>{let{theme:t,classGroups:n}=e,i={nextPart:new Map,validators:[]};for(let e in n)r(n[e],i,e,t);return i})(e),{conflictingClassGroups:a,conflictingClassGroupModifiers:o}=e;return{getClassGroupId:e=>{let r=e.split("-");return""===r[0]&&1!==r.length&&r.shift(),t(r,i)||(e=>{if(n.test(e)){let t=n.exec(e)[1],r=null==t?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}})(e)},getConflictingClassGroupIds:(e,t)=>{let n=a[e]||[];return t&&o[e]?[...n,...o[e]]:n}}})(s)}).cache.get,l=i.cache.set,h=p,p(o)};function p(e){let t=a(e);if(t)return t;let n=((e,t)=>{let{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:a}=t,s=[],l=e.trim().split(o),u="";for(let e=l.length-1;e>=0;e-=1){let t=l[e],{isExternal:o,modifiers:c,hasImportantModifier:d,baseClassName:h,maybePostfixModifierPosition:p}=n(t);if(o){u=t+(u.length>0?" "+u:u);continue}let f=!!p,m=r(f?h.substring(0,p):h);if(!m){if(!f||!(m=r(h))){u=t+(u.length>0?" "+u:u);continue}f=!1}let g=a(c).join(":"),y=d?g+"!":g,b=y+m;if(s.includes(b))continue;s.push(b);let x=i(m,f);for(let e=0;e<x.length;++e){let t=x[e];s.push(y+t)}u=t+(u.length>0?" "+u:u)}return u})(e,i);return l(e,n),n}return function(){return h(s.apply(null,arguments))}}(()=>{let e=u("color"),t=u("font"),n=u("text"),r=u("font-weight"),i=u("tracking"),a=u("leading"),o=u("breakpoint"),s=u("container"),l=u("spacing"),c=u("radius"),d=u("shadow"),h=u("inset-shadow"),p=u("text-shadow"),f=u("drop-shadow"),m=u("blur"),g=u("perspective"),y=u("aspect"),C=u("ease"),A=u("animate"),E=()=>["auto","avoid","all","avoid-page","page","left","right","column"],T=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],V=()=>[...T(),F,N],q=()=>["auto","hidden","clip","visible","scroll"],G=()=>["auto","contain","none"],$=()=>[F,N,l],K=()=>[b,"full","auto",...$()],Y=()=>[w,"none","subgrid",F,N],X=()=>["auto",{span:["full",w,F,N]},w,F,N],Z=()=>[w,"auto",F,N],J=()=>["auto","min","max","fr",F,N],Q=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],ee=()=>["start","end","center","stretch","center-safe","end-safe"],et=()=>["auto",...$()],en=()=>[b,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...$()],er=()=>[e,F,N],ei=()=>[...T(),B,R,{position:[F,N]}],ea=()=>["no-repeat",{repeat:["","x","y","space","round"]}],eo=()=>["auto","cover","contain",U,I,{size:[F,N]}],es=()=>[k,L,D],el=()=>["","none","full",c,F,N],eu=()=>["",x,L,D],ec=()=>["solid","dashed","dotted","double"],ed=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],eh=()=>[x,k,B,R],ep=()=>["","none",m,F,N],ef=()=>["none",x,F,N],em=()=>["none",x,F,N],eg=()=>[x,F,N],ev=()=>[b,"full",...$()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[S],breakpoint:[S],color:[_],container:[S],"drop-shadow":[S],ease:["in","out","in-out"],font:[M],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[S],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[S],shadow:[S],spacing:["px",x],text:[S],"text-shadow":[S],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",b,N,F,y]}],container:["container"],columns:[{columns:[x,N,F,s]}],"break-after":[{"break-after":E()}],"break-before":[{"break-before":E()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:V()}],overflow:[{overflow:q()}],"overflow-x":[{"overflow-x":q()}],"overflow-y":[{"overflow-y":q()}],overscroll:[{overscroll:G()}],"overscroll-x":[{"overscroll-x":G()}],"overscroll-y":[{"overscroll-y":G()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:K()}],"inset-x":[{"inset-x":K()}],"inset-y":[{"inset-y":K()}],start:[{start:K()}],end:[{end:K()}],top:[{top:K()}],right:[{right:K()}],bottom:[{bottom:K()}],left:[{left:K()}],visibility:["visible","invisible","collapse"],z:[{z:[w,"auto",F,N]}],basis:[{basis:[b,"full","auto",s,...$()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[x,b,"auto","initial","none",N]}],grow:[{grow:["",x,F,N]}],shrink:[{shrink:["",x,F,N]}],order:[{order:[w,"first","last","none",F,N]}],"grid-cols":[{"grid-cols":Y()}],"col-start-end":[{col:X()}],"col-start":[{"col-start":Z()}],"col-end":[{"col-end":Z()}],"grid-rows":[{"grid-rows":Y()}],"row-start-end":[{row:X()}],"row-start":[{"row-start":Z()}],"row-end":[{"row-end":Z()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":J()}],"auto-rows":[{"auto-rows":J()}],gap:[{gap:$()}],"gap-x":[{"gap-x":$()}],"gap-y":[{"gap-y":$()}],"justify-content":[{justify:[...Q(),"normal"]}],"justify-items":[{"justify-items":[...ee(),"normal"]}],"justify-self":[{"justify-self":["auto",...ee()]}],"align-content":[{content:["normal",...Q()]}],"align-items":[{items:[...ee(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...ee(),{baseline:["","last"]}]}],"place-content":[{"place-content":Q()}],"place-items":[{"place-items":[...ee(),"baseline"]}],"place-self":[{"place-self":["auto",...ee()]}],p:[{p:$()}],px:[{px:$()}],py:[{py:$()}],ps:[{ps:$()}],pe:[{pe:$()}],pt:[{pt:$()}],pr:[{pr:$()}],pb:[{pb:$()}],pl:[{pl:$()}],m:[{m:et()}],mx:[{mx:et()}],my:[{my:et()}],ms:[{ms:et()}],me:[{me:et()}],mt:[{mt:et()}],mr:[{mr:et()}],mb:[{mb:et()}],ml:[{ml:et()}],"space-x":[{"space-x":$()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":$()}],"space-y-reverse":["space-y-reverse"],size:[{size:en()}],w:[{w:[s,"screen",...en()]}],"min-w":[{"min-w":[s,"screen","none",...en()]}],"max-w":[{"max-w":[s,"screen","none","prose",{screen:[o]},...en()]}],h:[{h:["screen","lh",...en()]}],"min-h":[{"min-h":["screen","lh","none",...en()]}],"max-h":[{"max-h":["screen","lh",...en()]}],"font-size":[{text:["base",n,L,D]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,F,P]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",k,N]}],"font-family":[{font:[z,N,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,F,N]}],"line-clamp":[{"line-clamp":[x,"none",F,P]}],leading:[{leading:[a,...$()]}],"list-image":[{"list-image":["none",F,N]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",F,N]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:er()}],"text-color":[{text:er()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ec(),"wavy"]}],"text-decoration-thickness":[{decoration:[x,"from-font","auto",F,D]}],"text-decoration-color":[{decoration:er()}],"underline-offset":[{"underline-offset":[x,"auto",F,N]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:$()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",F,N]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",F,N]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ei()}],"bg-repeat":[{bg:ea()}],"bg-size":[{bg:eo()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},w,F,N],radial:["",F,N],conic:[w,F,N]},H,O]}],"bg-color":[{bg:er()}],"gradient-from-pos":[{from:es()}],"gradient-via-pos":[{via:es()}],"gradient-to-pos":[{to:es()}],"gradient-from":[{from:er()}],"gradient-via":[{via:er()}],"gradient-to":[{to:er()}],rounded:[{rounded:el()}],"rounded-s":[{"rounded-s":el()}],"rounded-e":[{"rounded-e":el()}],"rounded-t":[{"rounded-t":el()}],"rounded-r":[{"rounded-r":el()}],"rounded-b":[{"rounded-b":el()}],"rounded-l":[{"rounded-l":el()}],"rounded-ss":[{"rounded-ss":el()}],"rounded-se":[{"rounded-se":el()}],"rounded-ee":[{"rounded-ee":el()}],"rounded-es":[{"rounded-es":el()}],"rounded-tl":[{"rounded-tl":el()}],"rounded-tr":[{"rounded-tr":el()}],"rounded-br":[{"rounded-br":el()}],"rounded-bl":[{"rounded-bl":el()}],"border-w":[{border:eu()}],"border-w-x":[{"border-x":eu()}],"border-w-y":[{"border-y":eu()}],"border-w-s":[{"border-s":eu()}],"border-w-e":[{"border-e":eu()}],"border-w-t":[{"border-t":eu()}],"border-w-r":[{"border-r":eu()}],"border-w-b":[{"border-b":eu()}],"border-w-l":[{"border-l":eu()}],"divide-x":[{"divide-x":eu()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":eu()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ec(),"hidden","none"]}],"divide-style":[{divide:[...ec(),"hidden","none"]}],"border-color":[{border:er()}],"border-color-x":[{"border-x":er()}],"border-color-y":[{"border-y":er()}],"border-color-s":[{"border-s":er()}],"border-color-e":[{"border-e":er()}],"border-color-t":[{"border-t":er()}],"border-color-r":[{"border-r":er()}],"border-color-b":[{"border-b":er()}],"border-color-l":[{"border-l":er()}],"divide-color":[{divide:er()}],"outline-style":[{outline:[...ec(),"none","hidden"]}],"outline-offset":[{"outline-offset":[x,F,N]}],"outline-w":[{outline:["",x,L,D]}],"outline-color":[{outline:er()}],shadow:[{shadow:["","none",d,W,j]}],"shadow-color":[{shadow:er()}],"inset-shadow":[{"inset-shadow":["none",h,W,j]}],"inset-shadow-color":[{"inset-shadow":er()}],"ring-w":[{ring:eu()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:er()}],"ring-offset-w":[{"ring-offset":[x,D]}],"ring-offset-color":[{"ring-offset":er()}],"inset-ring-w":[{"inset-ring":eu()}],"inset-ring-color":[{"inset-ring":er()}],"text-shadow":[{"text-shadow":["none",p,W,j]}],"text-shadow-color":[{"text-shadow":er()}],opacity:[{opacity:[x,F,N]}],"mix-blend":[{"mix-blend":[...ed(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ed()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[x]}],"mask-image-linear-from-pos":[{"mask-linear-from":eh()}],"mask-image-linear-to-pos":[{"mask-linear-to":eh()}],"mask-image-linear-from-color":[{"mask-linear-from":er()}],"mask-image-linear-to-color":[{"mask-linear-to":er()}],"mask-image-t-from-pos":[{"mask-t-from":eh()}],"mask-image-t-to-pos":[{"mask-t-to":eh()}],"mask-image-t-from-color":[{"mask-t-from":er()}],"mask-image-t-to-color":[{"mask-t-to":er()}],"mask-image-r-from-pos":[{"mask-r-from":eh()}],"mask-image-r-to-pos":[{"mask-r-to":eh()}],"mask-image-r-from-color":[{"mask-r-from":er()}],"mask-image-r-to-color":[{"mask-r-to":er()}],"mask-image-b-from-pos":[{"mask-b-from":eh()}],"mask-image-b-to-pos":[{"mask-b-to":eh()}],"mask-image-b-from-color":[{"mask-b-from":er()}],"mask-image-b-to-color":[{"mask-b-to":er()}],"mask-image-l-from-pos":[{"mask-l-from":eh()}],"mask-image-l-to-pos":[{"mask-l-to":eh()}],"mask-image-l-from-color":[{"mask-l-from":er()}],"mask-image-l-to-color":[{"mask-l-to":er()}],"mask-image-x-from-pos":[{"mask-x-from":eh()}],"mask-image-x-to-pos":[{"mask-x-to":eh()}],"mask-image-x-from-color":[{"mask-x-from":er()}],"mask-image-x-to-color":[{"mask-x-to":er()}],"mask-image-y-from-pos":[{"mask-y-from":eh()}],"mask-image-y-to-pos":[{"mask-y-to":eh()}],"mask-image-y-from-color":[{"mask-y-from":er()}],"mask-image-y-to-color":[{"mask-y-to":er()}],"mask-image-radial":[{"mask-radial":[F,N]}],"mask-image-radial-from-pos":[{"mask-radial-from":eh()}],"mask-image-radial-to-pos":[{"mask-radial-to":eh()}],"mask-image-radial-from-color":[{"mask-radial-from":er()}],"mask-image-radial-to-color":[{"mask-radial-to":er()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":T()}],"mask-image-conic-pos":[{"mask-conic":[x]}],"mask-image-conic-from-pos":[{"mask-conic-from":eh()}],"mask-image-conic-to-pos":[{"mask-conic-to":eh()}],"mask-image-conic-from-color":[{"mask-conic-from":er()}],"mask-image-conic-to-color":[{"mask-conic-to":er()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ei()}],"mask-repeat":[{mask:ea()}],"mask-size":[{mask:eo()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",F,N]}],filter:[{filter:["","none",F,N]}],blur:[{blur:ep()}],brightness:[{brightness:[x,F,N]}],contrast:[{contrast:[x,F,N]}],"drop-shadow":[{"drop-shadow":["","none",f,W,j]}],"drop-shadow-color":[{"drop-shadow":er()}],grayscale:[{grayscale:["",x,F,N]}],"hue-rotate":[{"hue-rotate":[x,F,N]}],invert:[{invert:["",x,F,N]}],saturate:[{saturate:[x,F,N]}],sepia:[{sepia:["",x,F,N]}],"backdrop-filter":[{"backdrop-filter":["","none",F,N]}],"backdrop-blur":[{"backdrop-blur":ep()}],"backdrop-brightness":[{"backdrop-brightness":[x,F,N]}],"backdrop-contrast":[{"backdrop-contrast":[x,F,N]}],"backdrop-grayscale":[{"backdrop-grayscale":["",x,F,N]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[x,F,N]}],"backdrop-invert":[{"backdrop-invert":["",x,F,N]}],"backdrop-opacity":[{"backdrop-opacity":[x,F,N]}],"backdrop-saturate":[{"backdrop-saturate":[x,F,N]}],"backdrop-sepia":[{"backdrop-sepia":["",x,F,N]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":$()}],"border-spacing-x":[{"border-spacing-x":$()}],"border-spacing-y":[{"border-spacing-y":$()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",F,N]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[x,"initial",F,N]}],ease:[{ease:["linear","initial",C,F,N]}],delay:[{delay:[x,F,N]}],animate:[{animate:["none",A,F,N]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[g,F,N]}],"perspective-origin":[{"perspective-origin":V()}],rotate:[{rotate:ef()}],"rotate-x":[{"rotate-x":ef()}],"rotate-y":[{"rotate-y":ef()}],"rotate-z":[{"rotate-z":ef()}],scale:[{scale:em()}],"scale-x":[{"scale-x":em()}],"scale-y":[{"scale-y":em()}],"scale-z":[{"scale-z":em()}],"scale-3d":["scale-3d"],skew:[{skew:eg()}],"skew-x":[{"skew-x":eg()}],"skew-y":[{"skew-y":eg()}],transform:[{transform:[F,N,"","none","gpu","cpu"]}],"transform-origin":[{origin:V()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ev()}],"translate-x":[{"translate-x":ev()}],"translate-y":[{"translate-y":ev()}],"translate-z":[{"translate-z":ev()}],"translate-none":["translate-none"],accent:[{accent:er()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:er()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",F,N]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":$()}],"scroll-mx":[{"scroll-mx":$()}],"scroll-my":[{"scroll-my":$()}],"scroll-ms":[{"scroll-ms":$()}],"scroll-me":[{"scroll-me":$()}],"scroll-mt":[{"scroll-mt":$()}],"scroll-mr":[{"scroll-mr":$()}],"scroll-mb":[{"scroll-mb":$()}],"scroll-ml":[{"scroll-ml":$()}],"scroll-p":[{"scroll-p":$()}],"scroll-px":[{"scroll-px":$()}],"scroll-py":[{"scroll-py":$()}],"scroll-ps":[{"scroll-ps":$()}],"scroll-pe":[{"scroll-pe":$()}],"scroll-pt":[{"scroll-pt":$()}],"scroll-pr":[{"scroll-pr":$()}],"scroll-pb":[{"scroll-pb":$()}],"scroll-pl":[{"scroll-pl":$()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",F,N]}],fill:[{fill:["none",...er()]}],"stroke-w":[{stroke:[x,L,D,P]}],stroke:[{stroke:["none",...er()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}})},100431:e=>{"use strict";e.s({marked:()=>eg});var t,n=e.i(11968);function r(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var i=r(),a={exec:()=>null};function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n="string"==typeof e?e:e.source,r={replace:(e,t)=>{let i="string"==typeof t?t:t.source;return i=i.replace(s.caret,"$1"),n=n.replace(e,i),r},getRegex:()=>new RegExp(n,t)};return r}var s={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:RegExp("[\\p{L}\\p{N}]","u"),escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:e=>new RegExp("^( {0,3}".concat(e,")((?:[	 ][^\\n]*)?(?:\\n|$))")),nextBulletRegex:e=>new RegExp("^ {0,".concat(Math.min(3,e-1),"}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))")),hrRegex:e=>new RegExp("^ {0,".concat(Math.min(3,e-1),"}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)")),fencesBeginRegex:e=>new RegExp("^ {0,".concat(Math.min(3,e-1),"}(?:```|~~~)")),headingBeginRegex:e=>new RegExp("^ {0,".concat(Math.min(3,e-1),"}#")),htmlBeginRegex:e=>RegExp("^ {0,".concat(Math.min(3,e-1),"}<(?:[a-z].*>|!--)"),"i")},l=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,u=/(?:[*+-]|\d{1,9}[.)])/,c=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,d=o(c).replace(/bull/g,u).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),h=o(c).replace(/bull/g,u).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),p=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,f=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,m=o(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",f).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),g=o(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,u).getRegex(),y="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",b=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,x=o("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",b).replace("tag",y).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),w=o(p).replace("hr",l).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",y).getRegex(),k={blockquote:o(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",w).getRegex(),code:/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,def:m,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,hr:l,html:x,lheading:d,list:g,newline:/^(?:[ \t]*(?:\n|$))+/,paragraph:w,table:a,text:/^[^\n]+/},S=o("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",l).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",y).getRegex(),_={...k,lheading:h,table:S,paragraph:o(p).replace("hr",l).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",S).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",y).getRegex()},C={...k,html:o("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",b).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:a,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:o(p).replace("hr",l).replace("heading"," *#{1,6} *[^\n]").replace("lheading",d).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},A=/^( {2,}|\\)\n(?!\s*$)/,E=RegExp("[\\p{P}\\p{S}]","u"),T=RegExp("[\\s\\p{P}\\p{S}]","u"),M=RegExp("[^\\s\\p{P}\\p{S}]","u"),I=o(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,T).getRegex(),N=RegExp("(?!~)[\\p{P}\\p{S}]","u"),D=RegExp("(?!~)[\\s\\p{P}\\p{S}]","u"),P=RegExp("(?:[^\\s\\p{P}\\p{S}]|~)","u"),R=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,O=o(R,"u").replace(/punct/g,E).getRegex(),j=o(R,"u").replace(/punct/g,N).getRegex(),F="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",L=o(F,"gu").replace(/notPunctSpace/g,M).replace(/punctSpace/g,T).replace(/punct/g,E).getRegex(),z=o(F,"gu").replace(/notPunctSpace/g,P).replace(/punctSpace/g,D).replace(/punct/g,N).getRegex(),B=o("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,M).replace(/punctSpace/g,T).replace(/punct/g,E).getRegex(),U=o(/\\(punct)/,"gu").replace(/punct/g,E).getRegex(),H=o(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),W=o(b).replace("(?:-->|$)","-->").getRegex(),V=o("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",W).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),q=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`[^`]*`|[^\[\]\\`])*?/,G=o(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",q).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),$=o(/^!?\[(label)\]\[(ref)\]/).replace("label",q).replace("ref",f).getRegex(),K=o(/^!?\[(ref)\](?:\[\])?/).replace("ref",f).getRegex(),Y=o("reflink|nolink(?!\\()","g").replace("reflink",$).replace("nolink",K).getRegex(),X={_backpedal:a,anyPunctuation:U,autolink:H,blockSkip:/\[[^\[\]]*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)|`[^`]*?`|<(?! )[^<>]*?>/g,br:A,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,del:a,emStrongLDelim:O,emStrongRDelimAst:L,emStrongRDelimUnd:B,escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,link:G,nolink:K,punctuation:I,reflink:$,reflinkSearch:Y,tag:V,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,url:a},Z={...X,link:o(/^!?\[(label)\]\((.*?)\)/).replace("label",q).getRegex(),reflink:o(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",q).getRegex()},J={...X,emStrongRDelimAst:z,emStrongLDelim:j,url:o(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},Q={...J,br:o(A).replace("{2,}","*").getRegex(),text:o(J.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},ee={normal:k,gfm:_,pedantic:C},et={normal:X,gfm:J,breaks:Q,pedantic:Z},en={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},er=e=>en[e];function ei(e,t){if(t){if(s.escapeTest.test(e))return e.replace(s.escapeReplace,er)}else if(s.escapeTestNoEncode.test(e))return e.replace(s.escapeReplaceNoEncode,er);return e}function ea(e){try{e=encodeURI(e).replace(s.percentDecode,"%")}catch(e){return null}return e}function eo(e,t){var n;let r=e.replace(s.findPipe,(e,t,n)=>{let r=!1,i=t;for(;--i>=0&&"\\"===n[i];)r=!r;return r?"|":" |"}).split(s.splitPipe),i=0;if(r[0].trim()||r.shift(),!(r.length>0)||(null==(n=r.at(-1))?void 0:n.trim())||r.pop(),t)if(r.length>t)r.splice(t);else for(;r.length<t;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(s.slashPipe,"|");return r}function es(e,t,n){let r=e.length;if(0===r)return"";let i=0;for(;i<r;){let a=e.charAt(r-i-1);if(a!==t||n)if(a!==t&&n)i++;else break;else i++}return e.slice(0,r-i)}function el(e,t,n,r,i){let a=t.href,o=t.title||null,s=e[1].replace(i.other.outputLinkReplace,"$1");r.state.inLink=!0;let l={type:"!"===e[0].charAt(0)?"image":"link",raw:n,href:a,title:o,text:s,tokens:r.inlineTokens(s)};return r.state.inLink=!1,l}var eu=class{space(e){let t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){let t=this.rules.block.code.exec(e);if(t){let e=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?e:es(e,"\n")}}}fences(e){let t=this.rules.block.fences.exec(e);if(t){let e=t[0],n=function(e,t,n){let r=e.match(n.other.indentCodeCompensation);if(null===r)return t;let i=r[1];return t.split("\n").map(e=>{let t=e.match(n.other.beginningSpace);if(null===t)return e;let[r]=t;return r.length>=i.length?e.slice(i.length):e}).join("\n")}(e,t[3]||"",this.rules);return{type:"code",raw:e,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:n}}}heading(e){let t=this.rules.block.heading.exec(e);if(t){let e=t[2].trim();if(this.rules.other.endingHash.test(e)){let t=es(e,"#");(this.options.pedantic||!t||this.rules.other.endingSpaceChar.test(t))&&(e=t.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:e,tokens:this.lexer.inline(e)}}}hr(e){let t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:es(t[0],"\n")}}blockquote(e){let t=this.rules.block.blockquote.exec(e);if(t){let e=es(t[0],"\n").split("\n"),n="",r="",i=[];for(;e.length>0;){let t=!1,a=[],o;for(o=0;o<e.length;o++)if(this.rules.other.blockquoteStart.test(e[o]))a.push(e[o]),t=!0;else if(t)break;else a.push(e[o]);e=e.slice(o);let s=a.join("\n"),l=s.replace(this.rules.other.blockquoteSetextReplace,"\n    $1").replace(this.rules.other.blockquoteSetextReplace2,"");n=n?"".concat(n,"\n").concat(s):s,r=r?"".concat(r,"\n").concat(l):l;let u=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(l,i,!0),this.lexer.state.top=u,0===e.length)break;let c=i.at(-1);if((null==c?void 0:c.type)==="code")break;if((null==c?void 0:c.type)==="blockquote"){let t=c.raw+"\n"+e.join("\n"),a=this.blockquote(t);i[i.length-1]=a,n=n.substring(0,n.length-c.raw.length)+a.raw,r=r.substring(0,r.length-c.text.length)+a.text;break}if((null==c?void 0:c.type)==="list"){let t=c.raw+"\n"+e.join("\n"),a=this.list(t);i[i.length-1]=a,n=n.substring(0,n.length-c.raw.length)+a.raw,r=r.substring(0,r.length-c.raw.length)+a.raw,e=t.substring(i.at(-1).raw.length).split("\n");continue}}return{type:"blockquote",raw:n,tokens:i,text:r}}}list(e){let t=this.rules.block.list.exec(e);if(t){let n=t[1].trim(),r=n.length>1,i={type:"list",raw:"",ordered:r,start:r?+n.slice(0,-1):"",loose:!1,items:[]};n=r?"\\d{1,9}\\".concat(n.slice(-1)):"\\".concat(n),this.options.pedantic&&(n=r?n:"[*+-]");let a=this.rules.other.listItemRegex(n),o=!1;for(;e;){let n=!1,r="",s="";if(!(t=a.exec(e))||this.rules.block.hr.test(e))break;r=t[0],e=e.substring(r.length);let l=t[2].split("\n",1)[0].replace(this.rules.other.listReplaceTabs,e=>" ".repeat(3*e.length)),u=e.split("\n",1)[0],c=!l.trim(),d=0;if(this.options.pedantic?(d=2,s=l.trimStart()):c?d=t[1].length+1:(d=(d=t[2].search(this.rules.other.nonSpaceChar))>4?1:d,s=l.slice(d),d+=t[1].length),c&&this.rules.other.blankLine.test(u)&&(r+=u+"\n",e=e.substring(u.length+1),n=!0),!n){let t=this.rules.other.nextBulletRegex(d),n=this.rules.other.hrRegex(d),i=this.rules.other.fencesBeginRegex(d),a=this.rules.other.headingBeginRegex(d),o=this.rules.other.htmlBeginRegex(d);for(;e;){let h=e.split("\n",1)[0],p;if(u=h,p=this.options.pedantic?u=u.replace(this.rules.other.listReplaceNesting,"  "):u.replace(this.rules.other.tabCharGlobal,"    "),i.test(u)||a.test(u)||o.test(u)||t.test(u)||n.test(u))break;if(p.search(this.rules.other.nonSpaceChar)>=d||!u.trim())s+="\n"+p.slice(d);else{if(c||l.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||i.test(l)||a.test(l)||n.test(l))break;s+="\n"+u}c||u.trim()||(c=!0),r+=h+"\n",e=e.substring(h.length+1),l=p.slice(d)}}i.loose||(o?i.loose=!0:this.rules.other.doubleBlankLine.test(r)&&(o=!0));let h=null,p;this.options.gfm&&(h=this.rules.other.listIsTask.exec(s))&&(p="[ ] "!==h[0],s=s.replace(this.rules.other.listReplaceTask,"")),i.items.push({type:"list_item",raw:r,task:!!h,checked:p,loose:!1,text:s,tokens:[]}),i.raw+=r}let s=i.items.at(-1);if(!s)return;s.raw=s.raw.trimEnd(),s.text=s.text.trimEnd(),i.raw=i.raw.trimEnd();for(let e=0;e<i.items.length;e++)if(this.lexer.state.top=!1,i.items[e].tokens=this.lexer.blockTokens(i.items[e].text,[]),!i.loose){let t=i.items[e].tokens.filter(e=>"space"===e.type);i.loose=t.length>0&&t.some(e=>this.rules.other.anyLine.test(e.raw))}if(i.loose)for(let e=0;e<i.items.length;e++)i.items[e].loose=!0;return i}}html(e){let t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:"pre"===t[1]||"script"===t[1]||"style"===t[1],text:t[0]}}def(e){let t=this.rules.block.def.exec(e);if(t){let e=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),n=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",r=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:e,raw:t[0],href:n,title:r}}}table(e){var t;let n=this.rules.block.table.exec(e);if(!n||!this.rules.other.tableDelimiter.test(n[2]))return;let r=eo(n[1]),i=n[2].replace(this.rules.other.tableAlignChars,"").split("|"),a=(null==(t=n[3])?void 0:t.trim())?n[3].replace(this.rules.other.tableRowBlankLine,"").split("\n"):[],o={type:"table",raw:n[0],header:[],align:[],rows:[]};if(r.length===i.length){for(let e of i)this.rules.other.tableAlignRight.test(e)?o.align.push("right"):this.rules.other.tableAlignCenter.test(e)?o.align.push("center"):this.rules.other.tableAlignLeft.test(e)?o.align.push("left"):o.align.push(null);for(let e=0;e<r.length;e++)o.header.push({text:r[e],tokens:this.lexer.inline(r[e]),header:!0,align:o.align[e]});for(let e of a)o.rows.push(eo(e,o.header.length).map((e,t)=>({text:e,tokens:this.lexer.inline(e),header:!1,align:o.align[t]})));return o}}lheading(e){let t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){let t=this.rules.block.paragraph.exec(e);if(t){let e="\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:e,tokens:this.lexer.inline(e)}}}text(e){let t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){let t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(e){let t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){let t=this.rules.inline.link.exec(e);if(t){let e=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(e)){if(!this.rules.other.endAngleBracket.test(e))return;let t=es(e.slice(0,-1),"\\");if((e.length-t.length)%2==0)return}else{let e=function(e,t){if(-1===e.indexOf(")"))return -1;let n=0;for(let r=0;r<e.length;r++)if("\\"===e[r])r++;else if("("===e[r])n++;else if(e[r]===t[1]&&--n<0)return r;return n>0?-2:-1}(t[2],"()");if(-2===e)return;if(e>-1){let n=(0===t[0].indexOf("!")?5:4)+t[1].length+e;t[2]=t[2].substring(0,e),t[0]=t[0].substring(0,n).trim(),t[3]=""}}let n=t[2],r="";if(this.options.pedantic){let e=this.rules.other.pedanticHrefTitle.exec(n);e&&(n=e[1],r=e[3])}else r=t[3]?t[3].slice(1,-1):"";return n=n.trim(),this.rules.other.startAngleBracket.test(n)&&(n=this.options.pedantic&&!this.rules.other.endAngleBracket.test(e)?n.slice(1):n.slice(1,-1)),el(t,{href:n&&n.replace(this.rules.inline.anyPunctuation,"$1"),title:r&&r.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){let e=t[(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," ").toLowerCase()];if(!e){let e=n[0].charAt(0);return{type:"text",raw:e,text:e}}return el(n,e,n[0],this.lexer,this.rules)}}emStrong(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=this.rules.inline.emStrongLDelim.exec(e);if(!(!r||r[3]&&n.match(this.rules.other.unicodeAlphaNumeric))&&(!(r[1]||r[2])||!n||this.rules.inline.punctuation.exec(n))){let n=[...r[0]].length-1,i,a,o=n,s=0,l="*"===r[0][0]?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(l.lastIndex=0,t=t.slice(-1*e.length+n);null!=(r=l.exec(t));){if(!(i=r[1]||r[2]||r[3]||r[4]||r[5]||r[6]))continue;if(a=[...i].length,r[3]||r[4]){o+=a;continue}if((r[5]||r[6])&&n%3&&!((n+a)%3)){s+=a;continue}if((o-=a)>0)continue;a=Math.min(a,a+o+s);let t=[...r[0]][0].length,l=e.slice(0,n+r.index+t+a);if(Math.min(n,a)%2){let e=l.slice(1,-1);return{type:"em",raw:l,text:e,tokens:this.lexer.inlineTokens(e)}}let u=l.slice(2,-2);return{type:"strong",raw:l,text:u,tokens:this.lexer.inlineTokens(u)}}}}codespan(e){let t=this.rules.inline.code.exec(e);if(t){let e=t[2].replace(this.rules.other.newLineCharGlobal," "),n=this.rules.other.nonSpaceChar.test(e),r=this.rules.other.startingSpaceChar.test(e)&&this.rules.other.endingSpaceChar.test(e);return n&&r&&(e=e.substring(1,e.length-1)),{type:"codespan",raw:t[0],text:e}}}br(e){let t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){let t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){let t=this.rules.inline.autolink.exec(e);if(t){let e,n;return n="@"===t[2]?"mailto:"+(e=t[1]):e=t[1],{type:"link",raw:t[0],text:e,href:n,tokens:[{type:"text",raw:e,text:e}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let e,i;if("@"===t[2])i="mailto:"+(e=t[0]);else{var n,r;let a;do a=t[0],t[0]=null!=(r=null==(n=this.rules.inline._backpedal.exec(t[0]))?void 0:n[0])?r:"";while(a!==t[0])e=t[0],i="www."===t[1]?"http://"+t[0]:t[0]}return{type:"link",raw:t[0],text:e,href:i,tokens:[{type:"text",raw:e,text:e}]}}}inlineText(e){let t=this.rules.inline.text.exec(e);if(t){let e=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:e}}}constructor(e){(0,n._)(this,"options",void 0),(0,n._)(this,"rules",void 0),(0,n._)(this,"lexer",void 0),this.options=e||i}},ec=class e{static get rules(){return{block:ee,inline:et}}static lex(t,n){return new e(n).lex(t)}static lexInline(t,n){return new e(n).inlineTokens(t)}lex(e){e=e.replace(s.carriageReturn,"\n"),this.blockTokens(e,this.tokens);for(let e=0;e<this.inlineQueue.length;e++){let t=this.inlineQueue[e];this.inlineTokens(t.src,t.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];for(this.options.pedantic&&(e=e.replace(s.tabCharGlobal,"    ").replace(s.spaceLine,""));e;){var r,i,a;let o;if(null==(i=this.options.extensions)||null==(r=i.block)?void 0:r.some(n=>!!(o=n.call({lexer:this},e,t))&&(e=e.substring(o.raw.length),t.push(o),!0)))continue;if(o=this.tokenizer.space(e)){e=e.substring(o.raw.length);let n=t.at(-1);1===o.raw.length&&void 0!==n?n.raw+="\n":t.push(o);continue}if(o=this.tokenizer.code(e)){e=e.substring(o.raw.length);let n=t.at(-1);(null==n?void 0:n.type)==="paragraph"||(null==n?void 0:n.type)==="text"?(n.raw+=(n.raw.endsWith("\n")?"":"\n")+o.raw,n.text+="\n"+o.text,this.inlineQueue.at(-1).src=n.text):t.push(o);continue}if((o=this.tokenizer.fences(e))||(o=this.tokenizer.heading(e))||(o=this.tokenizer.hr(e))||(o=this.tokenizer.blockquote(e))||(o=this.tokenizer.list(e))||(o=this.tokenizer.html(e))){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.def(e)){e=e.substring(o.raw.length);let n=t.at(-1);(null==n?void 0:n.type)==="paragraph"||(null==n?void 0:n.type)==="text"?(n.raw+=(n.raw.endsWith("\n")?"":"\n")+o.raw,n.text+="\n"+o.raw,this.inlineQueue.at(-1).src=n.text):this.tokens.links[o.tag]||(this.tokens.links[o.tag]={href:o.href,title:o.title},t.push(o));continue}if((o=this.tokenizer.table(e))||(o=this.tokenizer.lheading(e))){e=e.substring(o.raw.length),t.push(o);continue}let s=e;if(null==(a=this.options.extensions)?void 0:a.startBlock){let t=1/0,n=e.slice(1),r;this.options.extensions.startBlock.forEach(e=>{"number"==typeof(r=e.call({lexer:this},n))&&r>=0&&(t=Math.min(t,r))}),t<1/0&&t>=0&&(s=e.substring(0,t+1))}if(this.state.top&&(o=this.tokenizer.paragraph(s))){let r=t.at(-1);n&&(null==r?void 0:r.type)==="paragraph"?(r.raw+=(r.raw.endsWith("\n")?"":"\n")+o.raw,r.text+="\n"+o.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=r.text):t.push(o),n=s.length!==e.length,e=e.substring(o.raw.length);continue}if(o=this.tokenizer.text(e)){e=e.substring(o.raw.length);let n=t.at(-1);(null==n?void 0:n.type)==="text"?(n.raw+=(n.raw.endsWith("\n")?"":"\n")+o.raw,n.text+="\n"+o.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=n.text):t.push(o);continue}if(e){let t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw Error(t)}}return this.state.top=!0,t}inline(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e,r=null;if(this.tokens.links){let e=Object.keys(this.tokens.links);if(e.length>0)for(;null!=(r=this.tokenizer.rules.inline.reflinkSearch.exec(n));)e.includes(r[0].slice(r[0].lastIndexOf("[")+1,-1))&&(n=n.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(r=this.tokenizer.rules.inline.anyPunctuation.exec(n));)n=n.slice(0,r.index)+"++"+n.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;null!=(r=this.tokenizer.rules.inline.blockSkip.exec(n));)n=n.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let i=!1,a="";for(;e;){var o,s,l;let r;if(i||(a=""),i=!1,null==(s=this.options.extensions)||null==(o=s.inline)?void 0:o.some(n=>!!(r=n.call({lexer:this},e,t))&&(e=e.substring(r.raw.length),t.push(r),!0)))continue;if((r=this.tokenizer.escape(e))||(r=this.tokenizer.tag(e))||(r=this.tokenizer.link(e))){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(r.raw.length);let n=t.at(-1);"text"===r.type&&(null==n?void 0:n.type)==="text"?(n.raw+=r.raw,n.text+=r.text):t.push(r);continue}if((r=this.tokenizer.emStrong(e,n,a))||(r=this.tokenizer.codespan(e))||(r=this.tokenizer.br(e))||(r=this.tokenizer.del(e))||(r=this.tokenizer.autolink(e))||!this.state.inLink&&(r=this.tokenizer.url(e))){e=e.substring(r.raw.length),t.push(r);continue}let u=e;if(null==(l=this.options.extensions)?void 0:l.startInline){let t=1/0,n=e.slice(1),r;this.options.extensions.startInline.forEach(e=>{"number"==typeof(r=e.call({lexer:this},n))&&r>=0&&(t=Math.min(t,r))}),t<1/0&&t>=0&&(u=e.substring(0,t+1))}if(r=this.tokenizer.inlineText(u)){e=e.substring(r.raw.length),"_"!==r.raw.slice(-1)&&(a=r.raw.slice(-1)),i=!0;let n=t.at(-1);(null==n?void 0:n.type)==="text"?(n.raw+=r.raw,n.text+=r.text):t.push(r);continue}if(e){let t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw Error(t)}}return t}constructor(e){(0,n._)(this,"tokens",void 0),(0,n._)(this,"options",void 0),(0,n._)(this,"state",void 0),(0,n._)(this,"tokenizer",void 0),(0,n._)(this,"inlineQueue",void 0),this.tokens=[],this.tokens.links=Object.create(null),this.options=e||i,this.options.tokenizer=this.options.tokenizer||new eu,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let t={other:s,block:ee.normal,inline:et.normal};this.options.pedantic?(t.block=ee.pedantic,t.inline=et.pedantic):this.options.gfm&&(t.block=ee.gfm,this.options.breaks?t.inline=et.breaks:t.inline=et.gfm),this.tokenizer.rules=t}},ed=class{space(e){return""}code(e){var t;let{text:n,lang:r,escaped:i}=e,a=null==(t=(r||"").match(s.notSpaceStart))?void 0:t[0],o=n.replace(s.endingNewline,"")+"\n";return a?'<pre><code class="language-'+ei(a)+'">'+(i?o:ei(o,!0))+"</code></pre>\n":"<pre><code>"+(i?o:ei(o,!0))+"</code></pre>\n"}blockquote(e){let{tokens:t}=e;return"<blockquote>\n".concat(this.parser.parse(t),"</blockquote>\n")}html(e){let{text:t}=e;return t}def(e){return""}heading(e){let{tokens:t,depth:n}=e;return"<h".concat(n,">").concat(this.parser.parseInline(t),"</h").concat(n,">\n")}hr(e){return"<hr>\n"}list(e){let t=e.ordered,n=e.start,r="";for(let t=0;t<e.items.length;t++){let n=e.items[t];r+=this.listitem(n)}let i=t?"ol":"ul";return"<"+i+(t&&1!==n?' start="'+n+'"':"")+">\n"+r+"</"+i+">\n"}listitem(e){let t="";if(e.task){var n;let r=this.checkbox({checked:!!e.checked});e.loose?(null==(n=e.tokens[0])?void 0:n.type)==="paragraph"?(e.tokens[0].text=r+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&"text"===e.tokens[0].tokens[0].type&&(e.tokens[0].tokens[0].text=r+" "+ei(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:r+" ",text:r+" ",escaped:!0}):t+=r+" "}return t+=this.parser.parse(e.tokens,!!e.loose),"<li>".concat(t,"</li>\n")}checkbox(e){let{checked:t}=e;return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(e){let{tokens:t}=e;return"<p>".concat(this.parser.parseInline(t),"</p>\n")}table(e){let t="",n="";for(let t=0;t<e.header.length;t++)n+=this.tablecell(e.header[t]);t+=this.tablerow({text:n});let r="";for(let t=0;t<e.rows.length;t++){let i=e.rows[t];n="";for(let e=0;e<i.length;e++)n+=this.tablecell(i[e]);r+=this.tablerow({text:n})}return r&&(r="<tbody>".concat(r,"</tbody>")),"<table>\n<thead>\n"+t+"</thead>\n"+r+"</table>\n"}tablerow(e){let{text:t}=e;return"<tr>\n".concat(t,"</tr>\n")}tablecell(e){let t=this.parser.parseInline(e.tokens),n=e.header?"th":"td";return(e.align?"<".concat(n,' align="').concat(e.align,'">'):"<".concat(n,">"))+t+"</".concat(n,">\n")}strong(e){let{tokens:t}=e;return"<strong>".concat(this.parser.parseInline(t),"</strong>")}em(e){let{tokens:t}=e;return"<em>".concat(this.parser.parseInline(t),"</em>")}codespan(e){let{text:t}=e;return"<code>".concat(ei(t,!0),"</code>")}br(e){return"<br>"}del(e){let{tokens:t}=e;return"<del>".concat(this.parser.parseInline(t),"</del>")}link(e){let{href:t,title:n,tokens:r}=e,i=this.parser.parseInline(r),a=ea(t);if(null===a)return i;let o='<a href="'+(t=a)+'"';return n&&(o+=' title="'+ei(n)+'"'),o+=">"+i+"</a>"}image(e){let{href:t,title:n,text:r,tokens:i}=e;i&&(r=this.parser.parseInline(i,this.parser.textRenderer));let a=ea(t);if(null===a)return ei(r);t=a;let o='<img src="'.concat(t,'" alt="').concat(r,'"');return n&&(o+=' title="'.concat(ei(n),'"')),o+=">"}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:ei(e.text)}constructor(e){(0,n._)(this,"options",void 0),(0,n._)(this,"parser",void 0),this.options=e||i}},eh=class{strong(e){let{text:t}=e;return t}em(e){let{text:t}=e;return t}codespan(e){let{text:t}=e;return t}del(e){let{text:t}=e;return t}html(e){let{text:t}=e;return t}text(e){let{text:t}=e;return t}link(e){let{text:t}=e;return""+t}image(e){let{text:t}=e;return""+t}br(){return""}},ep=class e{static parse(t,n){return new e(n).parse(t)}static parseInline(t,n){return new e(n).parseInline(t)}parse(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],n="";for(let a=0;a<e.length;a++){var r,i;let o=e[a];if(null==(i=this.options.extensions)||null==(r=i.renderers)?void 0:r[o.type]){let e=this.options.extensions.renderers[o.type].call({parser:this},o);if(!1!==e||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(o.type)){n+=e||"";continue}}switch(o.type){case"space":n+=this.renderer.space(o);continue;case"hr":n+=this.renderer.hr(o);continue;case"heading":n+=this.renderer.heading(o);continue;case"code":n+=this.renderer.code(o);continue;case"table":n+=this.renderer.table(o);continue;case"blockquote":n+=this.renderer.blockquote(o);continue;case"list":n+=this.renderer.list(o);continue;case"html":n+=this.renderer.html(o);continue;case"def":n+=this.renderer.def(o);continue;case"paragraph":n+=this.renderer.paragraph(o);continue;case"text":{let r=o,i=this.renderer.text(r);for(;a+1<e.length&&"text"===e[a+1].type;)r=e[++a],i+="\n"+this.renderer.text(r);t?n+=this.renderer.paragraph({type:"paragraph",raw:i,text:i,tokens:[{type:"text",raw:i,text:i,escaped:!0}]}):n+=i;continue}default:{let e='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(e),"";throw Error(e)}}}return n}parseInline(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.renderer,n="";for(let a=0;a<e.length;a++){var r,i;let o=e[a];if(null==(i=this.options.extensions)||null==(r=i.renderers)?void 0:r[o.type]){let e=this.options.extensions.renderers[o.type].call({parser:this},o);if(!1!==e||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type)){n+=e||"";continue}}switch(o.type){case"escape":case"text":n+=t.text(o);break;case"html":n+=t.html(o);break;case"link":n+=t.link(o);break;case"image":n+=t.image(o);break;case"strong":n+=t.strong(o);break;case"em":n+=t.em(o);break;case"codespan":n+=t.codespan(o);break;case"br":n+=t.br(o);break;case"del":n+=t.del(o);break;default:{let e='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(e),"";throw Error(e)}}}return n}constructor(e){(0,n._)(this,"options",void 0),(0,n._)(this,"renderer",void 0),(0,n._)(this,"textRenderer",void 0),this.options=e||i,this.options.renderer=this.options.renderer||new ed,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new eh}},ef=(t=class{preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}provideLexer(){return this.block?ec.lex:ec.lexInline}provideParser(){return this.block?ep.parse:ep.parseInline}constructor(e){(0,n._)(this,"options",void 0),(0,n._)(this,"block",void 0),this.options=e||i}},(0,n._)(t,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"])),t),em=new class{walkTokens(e,t){let n=[];for(let a of e)switch(n=n.concat(t.call(this,a)),a.type){case"table":for(let e of a.header)n=n.concat(this.walkTokens(e.tokens,t));for(let e of a.rows)for(let r of e)n=n.concat(this.walkTokens(r.tokens,t));break;case"list":n=n.concat(this.walkTokens(a.items,t));break;default:{var r,i;let e=a;(null==(i=this.defaults.extensions)||null==(r=i.childTokens)?void 0:r[e.type])?this.defaults.extensions.childTokens[e.type].forEach(r=>{let i=e[r].flat(1/0);n=n.concat(this.walkTokens(i,t))}):e.tokens&&(n=n.concat(this.walkTokens(e.tokens,t)))}}return n}use(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let r=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(e=>{let t={...e};if(t.async=this.defaults.async||t.async||!1,e.extensions&&(e.extensions.forEach(e=>{if(!e.name)throw Error("extension name required");if("renderer"in e){let t=r.renderers[e.name];t?r.renderers[e.name]=function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];let a=e.renderer.apply(this,r);return!1===a&&(a=t.apply(this,r)),a}:r.renderers[e.name]=e.renderer}if("tokenizer"in e){if(!e.level||"block"!==e.level&&"inline"!==e.level)throw Error("extension level must be 'block' or 'inline'");let t=r[e.level];t?t.unshift(e.tokenizer):r[e.level]=[e.tokenizer],e.start&&("block"===e.level?r.startBlock?r.startBlock.push(e.start):r.startBlock=[e.start]:"inline"===e.level&&(r.startInline?r.startInline.push(e.start):r.startInline=[e.start]))}"childTokens"in e&&e.childTokens&&(r.childTokens[e.name]=e.childTokens)}),t.extensions=r),e.renderer){let n=this.defaults.renderer||new ed(this.defaults);for(let t in e.renderer){if(!(t in n))throw Error("renderer '".concat(t,"' does not exist"));if(["options","parser"].includes(t))continue;let r=e.renderer[t],i=n[t];n[t]=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];let o=r.apply(n,t);return!1===o&&(o=i.apply(n,t)),o||""}}t.renderer=n}if(e.tokenizer){let n=this.defaults.tokenizer||new eu(this.defaults);for(let t in e.tokenizer){if(!(t in n))throw Error("tokenizer '".concat(t,"' does not exist"));if(["options","rules","lexer"].includes(t))continue;let r=e.tokenizer[t],i=n[t];n[t]=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];let o=r.apply(n,t);return!1===o&&(o=i.apply(n,t)),o}}t.tokenizer=n}if(e.hooks){let n=this.defaults.hooks||new ef;for(let t in e.hooks){if(!(t in n))throw Error("hook '".concat(t,"' does not exist"));if(["options","block"].includes(t))continue;let r=e.hooks[t],i=n[t];ef.passThroughHooks.has(t)?n[t]=e=>{if(this.defaults.async)return Promise.resolve(r.call(n,e)).then(e=>i.call(n,e));let t=r.call(n,e);return i.call(n,t)}:n[t]=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];let o=r.apply(n,t);return!1===o&&(o=i.apply(n,t)),o}}t.hooks=n}if(e.walkTokens){let n=this.defaults.walkTokens,r=e.walkTokens;t.walkTokens=function(e){let t=[];return t.push(r.call(this,e)),n&&(t=t.concat(n.call(this,e))),t}}this.defaults={...this.defaults,...t}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return ec.lex(e,null!=t?t:this.defaults)}parser(e,t){return ep.parse(e,null!=t?t:this.defaults)}parseMarkdown(e){return(t,n)=>{let r={...n},i={...this.defaults,...r},a=this.onError(!!i.silent,!!i.async);if(!0===this.defaults.async&&!1===r.async)return a(Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof t>"u"||null===t)return a(Error("marked(): input parameter is undefined or null"));if("string"!=typeof t)return a(Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));i.hooks&&(i.hooks.options=i,i.hooks.block=e);let o=i.hooks?i.hooks.provideLexer():e?ec.lex:ec.lexInline,s=i.hooks?i.hooks.provideParser():e?ep.parse:ep.parseInline;if(i.async)return Promise.resolve(i.hooks?i.hooks.preprocess(t):t).then(e=>o(e,i)).then(e=>i.hooks?i.hooks.processAllTokens(e):e).then(e=>i.walkTokens?Promise.all(this.walkTokens(e,i.walkTokens)).then(()=>e):e).then(e=>s(e,i)).then(e=>i.hooks?i.hooks.postprocess(e):e).catch(a);try{i.hooks&&(t=i.hooks.preprocess(t));let e=o(t,i);i.hooks&&(e=i.hooks.processAllTokens(e)),i.walkTokens&&this.walkTokens(e,i.walkTokens);let n=s(e,i);return i.hooks&&(n=i.hooks.postprocess(n)),n}catch(e){return a(e)}}}onError(e,t){return n=>{if(n.message+="\nPlease report this to https://github.com/markedjs/marked.",e){let e="<p>An error occurred:</p><pre>"+ei(n.message+"",!0)+"</pre>";return t?Promise.resolve(e):e}if(t)return Promise.reject(n);throw n}}constructor(...e){(0,n._)(this,"defaults",r()),(0,n._)(this,"options",this.setOptions),(0,n._)(this,"parse",this.parseMarkdown(!0)),(0,n._)(this,"parseInline",this.parseMarkdown(!1)),(0,n._)(this,"Parser",ep),(0,n._)(this,"Renderer",ed),(0,n._)(this,"TextRenderer",eh),(0,n._)(this,"Lexer",ec),(0,n._)(this,"Tokenizer",eu),(0,n._)(this,"Hooks",ef),this.use(...e)}};function eg(e,t){return em.parse(e,t)}eg.options=eg.setOptions=function(e){return em.setOptions(e),eg.defaults=em.defaults,i=eg.defaults,eg},eg.getDefaults=r,eg.defaults=i,eg.use=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return em.use(...t),eg.defaults=em.defaults,i=eg.defaults,eg},eg.walkTokens=function(e,t){return em.walkTokens(e,t)},eg.parseInline=em.parseInline,eg.Parser=ep,eg.parser=ep.parse,eg.Renderer=ed,eg.TextRenderer=eh,eg.Lexer=ec,eg.lexer=ec.lex,eg.Tokenizer=eu,eg.Hooks=ef,eg.parse=eg,eg.options,eg.setOptions,eg.use,eg.walkTokens,eg.parseInline,ep.parse,ec.lex},280859:e=>{"use strict";e.s({Streamdown:()=>Q});var t=e.i(373150),n=e.i(436133),r=e.i(331237),i=e.i(852878),a=e.i(475096),o=e.i(391173),s=e.i(820193),l=e.i(355239),u=e.i(623012),c=e.i(364869),d=e.i(374234),h=e.i(207796),p=e.i(205756),f=e.i(290479),m=e.i(100431),g=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,p.twMerge)((0,h.clsx)(t))},y=(e,t,n)=>{let r="string"==typeof t?new Blob([t],{type:n}):t,i=URL.createObjectURL(r),a=document.createElement("a");a.href=i,a.download=e,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(i)},b=/<pre(\s|>)/,x=(0,t.createContext)({code:""}),w=new class{async ensureHighlightersInitialized(e,t){var n,r;let[i,a]=e,o=(0,d.createJavaScriptRegexEngine)({forgiving:!0}),s=!this.lightHighlighter||this.lightTheme!==i,l=!this.darkHighlighter||this.darkTheme!==a;(s||l)&&this.loadedLanguages.clear();let u=!this.loadedLanguages.has(t);if(s?(this.lightHighlighter=await (0,c.createHighlighter)({themes:[i],langs:[t],engine:o}),this.lightTheme=i,this.loadedLanguages.add(t)):u&&await (null==(n=this.lightHighlighter)?void 0:n.loadLanguage(t)),l){let e=u?[...this.loadedLanguages,t]:Array.from(this.loadedLanguages);this.darkHighlighter=await (0,c.createHighlighter)({themes:[a],langs:e.length>0?e:[t],engine:o}),this.darkTheme=a}else u&&await (null==(r=this.darkHighlighter)?void 0:r.loadLanguage(t));u&&this.loadedLanguages.add(t)}async highlightCode(e,t,n,r){var i,a;this.initializationPromise&&await this.initializationPromise,this.initializationPromise=this.ensureHighlightersInitialized(n,t),await this.initializationPromise,this.initializationPromise=null;let o=e=>r?e.replace(b,'<pre class="'.concat(r,'"$1')):e,[s,l]=n,u=null==(i=this.lightHighlighter)?void 0:i.codeToHtml(e,{lang:t,theme:s}),c=null==(a=this.darkHighlighter)?void 0:a.codeToHtml(e,{lang:t,theme:l});return[k(o(u)),k(o(c))]}constructor(){this.lightHighlighter=null,this.darkHighlighter=null,this.lightTheme=null,this.darkTheme=null,this.loadedLanguages=new Set,this.initializationPromise=null}},k=e=>e.replace(/(<pre[^>]*)(style="[^"]*background[^";]*;?[^"]*")([^>]*>)/g,"$1$3"),S=e=>{let{code:n,language:r,className:i,children:a,preClassName:o,...s}=e,[l,u]=(0,t.useState)(""),[c,d]=(0,t.useState)(""),h=(0,t.useRef)(!1),[p,m]=(0,t.useContext)(Y);return(0,t.useEffect)(()=>(h.current=!0,w.highlightCode(n,r,[p,m],o).then(e=>{let[t,n]=e;h.current&&(u(t),d(n))}),()=>{h.current=!1}),[n,r,p,m,o]),(0,f.jsx)(x.Provider,{value:{code:n},children:(0,f.jsxs)("div",{className:"my-4 w-full overflow-hidden rounded-xl border","data-code-block-container":!0,"data-language":r,children:[(0,f.jsxs)("div",{className:"flex items-center justify-between bg-muted/80 p-3 text-muted-foreground text-xs","data-code-block-header":!0,"data-language":r,children:[(0,f.jsx)("span",{className:"ml-1 font-mono lowercase",children:r}),(0,f.jsx)("div",{className:"flex items-center gap-2",children:a})]}),(0,f.jsx)("div",{className:"w-full",children:(0,f.jsxs)("div",{className:"min-w-full",children:[(0,f.jsx)("div",{className:g("overflow-x-auto dark:hidden",i),dangerouslySetInnerHTML:{__html:l},"data-code-block":!0,"data-language":r,...s}),(0,f.jsx)("div",{className:g("hidden overflow-x-auto dark:block",i),dangerouslySetInnerHTML:{__html:c},"data-code-block":!0,"data-language":r,...s})]})})]})})},_={"1c":"1c","1c-query":"1cq",abap:"abap","actionscript-3":"as",ada:"ada",adoc:"adoc","angular-html":"html","angular-ts":"ts",apache:"conf",apex:"cls",apl:"apl",applescript:"applescript",ara:"ara",asciidoc:"adoc",asm:"asm",astro:"astro",awk:"awk",ballerina:"bal",bash:"sh",bat:"bat",batch:"bat",be:"be",beancount:"beancount",berry:"berry",bibtex:"bib",bicep:"bicep",blade:"blade.php",bsl:"bsl",c:"c","c#":"cs","c++":"cpp",cadence:"cdc",cairo:"cairo",cdc:"cdc",clarity:"clar",clj:"clj",clojure:"clj","closure-templates":"soy",cmake:"cmake",cmd:"cmd",cobol:"cob",codeowners:"CODEOWNERS",codeql:"ql",coffee:"coffee",coffeescript:"coffee","common-lisp":"lisp",console:"sh",coq:"v",cpp:"cpp",cql:"cql",crystal:"cr",cs:"cs",csharp:"cs",css:"css",csv:"csv",cue:"cue",cypher:"cql",d:"d",dart:"dart",dax:"dax",desktop:"desktop",diff:"diff",docker:"dockerfile",dockerfile:"dockerfile",dotenv:"env","dream-maker":"dm",edge:"edge",elisp:"el",elixir:"ex",elm:"elm","emacs-lisp":"el",erb:"erb",erl:"erl",erlang:"erl",f:"f","f#":"fs",f03:"f03",f08:"f08",f18:"f18",f77:"f77",f90:"f90",f95:"f95",fennel:"fnl",fish:"fish",fluent:"ftl",for:"for","fortran-fixed-form":"f","fortran-free-form":"f90",fs:"fs",fsharp:"fs",fsl:"fsl",ftl:"ftl",gdresource:"tres",gdscript:"gd",gdshader:"gdshader",genie:"gs",gherkin:"feature","git-commit":"gitcommit","git-rebase":"gitrebase",gjs:"js",gleam:"gleam","glimmer-js":"js","glimmer-ts":"ts",glsl:"glsl",gnuplot:"plt",go:"go",gql:"gql",graphql:"graphql",groovy:"groovy",gts:"gts",hack:"hack",haml:"haml",handlebars:"hbs",haskell:"hs",haxe:"hx",hbs:"hbs",hcl:"hcl",hjson:"hjson",hlsl:"hlsl",hs:"hs",html:"html","html-derivative":"html",http:"http",hxml:"hxml",hy:"hy",imba:"imba",ini:"ini",jade:"jade",java:"java",javascript:"js",jinja:"jinja",jison:"jison",jl:"jl",js:"js",json:"json",json5:"json5",jsonc:"jsonc",jsonl:"jsonl",jsonnet:"jsonnet",jssm:"jssm",jsx:"jsx",julia:"jl",kotlin:"kt",kql:"kql",kt:"kt",kts:"kts",kusto:"kql",latex:"tex",lean:"lean",lean4:"lean",less:"less",liquid:"liquid",lisp:"lisp",lit:"lit",llvm:"ll",log:"log",logo:"logo",lua:"lua",luau:"luau",make:"mak",makefile:"mak",markdown:"md",marko:"marko",matlab:"m",md:"md",mdc:"mdc",mdx:"mdx",mediawiki:"wiki",mermaid:"mmd",mips:"s",mipsasm:"s",mmd:"mmd",mojo:"mojo",move:"move",nar:"nar",narrat:"narrat",nextflow:"nf",nf:"nf",nginx:"conf",nim:"nim",nix:"nix",nu:"nu",nushell:"nu",objc:"m","objective-c":"m","objective-cpp":"mm",ocaml:"ml",pascal:"pas",perl:"pl",perl6:"p6",php:"php",plsql:"pls",po:"po",polar:"polar",postcss:"pcss",pot:"pot",potx:"potx",powerquery:"pq",powershell:"ps1",prisma:"prisma",prolog:"pl",properties:"properties",proto:"proto",protobuf:"proto",ps:"ps",ps1:"ps1",pug:"pug",puppet:"pp",purescript:"purs",py:"py",python:"py",ql:"ql",qml:"qml",qmldir:"qmldir",qss:"qss",r:"r",racket:"rkt",raku:"raku",razor:"cshtml",rb:"rb",reg:"reg",regex:"regex",regexp:"regexp",rel:"rel",riscv:"s",rs:"rs",rst:"rst",ruby:"rb",rust:"rs",sas:"sas",sass:"sass",scala:"scala",scheme:"scm",scss:"scss",sdbl:"sdbl",sh:"sh",shader:"shader",shaderlab:"shader",shell:"sh",shellscript:"sh",shellsession:"sh",smalltalk:"st",solidity:"sol",soy:"soy",sparql:"rq",spl:"spl",splunk:"spl",sql:"sql","ssh-config":"config",stata:"do",styl:"styl",stylus:"styl",svelte:"svelte",swift:"swift","system-verilog":"sv",systemd:"service",talon:"talon",talonscript:"talon",tasl:"tasl",tcl:"tcl",templ:"templ",terraform:"tf",tex:"tex",tf:"tf",tfvars:"tfvars",toml:"toml",ts:"ts","ts-tags":"ts",tsp:"tsp",tsv:"tsv",tsx:"tsx",turtle:"ttl",twig:"twig",typ:"typ",typescript:"ts",typespec:"tsp",typst:"typ",v:"v",vala:"vala",vb:"vb",verilog:"v",vhdl:"vhdl",vim:"vim",viml:"vim",vimscript:"vim",vue:"vue","vue-html":"html","vue-vine":"vine",vy:"vy",vyper:"vy",wasm:"wasm",wenyan:"wy",wgsl:"wgsl",wiki:"wiki",wikitext:"wiki",wit:"wit",wl:"wl",wolfram:"wl",xml:"xml",xsl:"xsl",yaml:"yaml",yml:"yml",zenscript:"zs",zig:"zig",zsh:"zsh",:"wy"},C=e=>{let{onDownload:n,onError:r,language:i,children:a,className:o,code:s,...l}=e,c=(0,t.useContext)(x).code,d=null!=s?s:c,h="file.".concat(i&&i in _?_[i]:"txt");return(0,f.jsx)("button",{className:g("cursor-pointer p-1 text-muted-foreground transition-all hover:text-foreground",o),onClick:()=>{try{y(h,d,"text/plain"),null==n||n()}catch(e){null==r||r(e)}},title:"Download file",type:"button",...l,children:null!=a?a:(0,f.jsx)(u.DownloadIcon,{size:14})})},A=e=>{let{onCopy:n,onError:r,timeout:i=2e3,children:a,className:o,code:u,...c}=e,[d,h]=(0,t.useState)(!1),p=(0,t.useRef)(0),m=(0,t.useContext)(x).code,y=null!=u?u:m,b=async()=>{var e;if("undefined"==typeof window||!(null!=(e=null==navigator?void 0:navigator.clipboard)&&e.writeText)){null==r||r(Error("Clipboard API not available"));return}try{d||(await navigator.clipboard.writeText(y),h(!0),null==n||n(),p.current=window.setTimeout(()=>h(!1),i))}catch(e){null==r||r(e)}};(0,t.useEffect)(()=>()=>{window.clearTimeout(p.current)},[]);let w=d?s.CheckIcon:l.CopyIcon;return(0,f.jsx)("button",{className:g("cursor-pointer p-1 text-muted-foreground transition-all hover:text-foreground",o),onClick:b,type:"button",...c,children:null!=a?a:(0,f.jsx)(w,{size:14})})},E=!1,T=async()=>{if(!E){let t=(await e.r(188116)(e.i)).default;return t.initialize({startOnLoad:!1,theme:"default",securityLevel:"strict",fontFamily:"monospace",suppressErrorRendering:!0}),E=!0,t}return(await e.r(188116)(e.i)).default},M=e=>{let{chart:n,className:r}=e,[i,a]=(0,t.useState)(null),[o,s]=(0,t.useState)(!0),[l,u]=(0,t.useState)(""),[c,d]=(0,t.useState)("");return((0,t.useEffect)(()=>{(async()=>{try{a(null),s(!0);let e=await T(),t=n.split("").reduce((e,t)=>(e<<5)-e+t.charCodeAt(0)|0,0),r="mermaid-".concat(Math.abs(t),"-").concat(Date.now(),"-").concat(Math.random().toString(36).substring(2,9)),{svg:i}=await e.render(r,n);u(i),d(i)}catch(e){c||l||a(e instanceof Error?e.message:"Failed to render Mermaid chart")}finally{s(!1)}})()},[n]),!o||l||c)?!i||l||c?(0,f.jsx)("div",{"aria-label":"Mermaid chart",className:g("my-4 flex justify-center",r),dangerouslySetInnerHTML:{__html:l||c},role:"img"}):(0,f.jsxs)("div",{className:g("rounded-lg border border-red-200 bg-red-50 p-4",r),children:[(0,f.jsxs)("p",{className:"font-mono text-red-700 text-sm",children:["Mermaid Error: ",i]}),(0,f.jsxs)("details",{className:"mt-2",children:[(0,f.jsx)("summary",{className:"cursor-pointer text-red-600 text-xs",children:"Show Code"}),(0,f.jsx)("pre",{className:"mt-2 overflow-x-auto rounded bg-red-100 p-2 text-red-800 text-xs",children:n})]})]}):(0,f.jsx)("div",{className:g("my-4 flex justify-center p-4",r),children:(0,f.jsxs)("div",{className:"flex items-center space-x-2 text-muted-foreground",children:[(0,f.jsx)("div",{className:"h-4 w-4 animate-spin rounded-full border-current border-b-2"}),(0,f.jsx)("span",{className:"text-sm",children:"Loading diagram..."})]})})};function I(e){var t,n;let r=[],i=[];for(let n of e.querySelectorAll("thead th"))r.push((null==(t=n.textContent)?void 0:t.trim())||"");for(let t of e.querySelectorAll("tbody tr")){let e=[];for(let r of t.querySelectorAll("td"))e.push((null==(n=r.textContent)?void 0:n.trim())||"");i.push(e)}return{headers:r,rows:i}}function N(e){let{headers:t,rows:n}=e,r=e=>e.includes(",")||e.includes('"')||e.includes("\n")?'"'.concat(e.replace(/"/g,'""'),'"'):e,i=[];for(let e of(t.length>0&&i.push(t.map(r).join(",")),n))i.push(e.map(r).join(","));return i.join("\n")}function D(e){let{headers:t,rows:n}=e;if(0===t.length)return"";let r=[],i=t.map(e=>e.replace(/\|/g,"\\|"));for(let e of(r.push("| ".concat(i.join(" | ")," |")),r.push("| ".concat(t.map(()=>"---").join(" | ")," |")),n)){let n=[...e];for(;n.length<t.length;)n.push("");let i=n.map(e=>e.replace(/\|/g,"\\|"));r.push("| ".concat(i.join(" | ")," |"))}return r.join("\n")}var P=e=>{let{children:n,className:r,onCopy:i,onError:a,timeout:o=2e3,format:u="markdown"}=e,[c,d]=(0,t.useState)(!1),h=(0,t.useRef)(0),p=async e=>{var t;if("undefined"==typeof window||!(null!=(t=null==navigator?void 0:navigator.clipboard)&&t.writeText)){null==a||a(Error("Clipboard API not available"));return}try{if(!c){let t=e.currentTarget.closest('[data-streamdown="table-wrapper"]'),n=null==t?void 0:t.querySelector("table");if(!n){null==a||a(Error("Table not found"));return}let r=I(n),s="";switch(u){case"csv":default:s=N(r);break;case"markdown":s=D(r);break;case"text":s=N(r).replace(/,/g,"	")}await navigator.clipboard.writeText(s),d(!0),null==i||i(),h.current=window.setTimeout(()=>d(!1),o)}}catch(e){null==a||a(e)}};(0,t.useEffect)(()=>()=>{window.clearTimeout(h.current)},[]);let m=c?s.CheckIcon:l.CopyIcon;return(0,f.jsx)("button",{className:g("cursor-pointer p-1 text-muted-foreground transition-all hover:text-foreground",r),onClick:p,title:"Copy table as ".concat(u),type:"button",children:null!=n?n:(0,f.jsx)(m,{size:14})})},R=e=>{let{children:n,className:r,onDownload:i,onError:a}=e,[o,s]=(0,t.useState)(!1),l=(0,t.useRef)(null),c=e=>{var t;try{let n=null==(t=l.current)?void 0:t.closest('[data-streamdown="table-wrapper"]'),r=null==n?void 0:n.querySelector("table");if(!r){null==a||a(Error("Table not found"));return}let o=I(r),u="csv"===e?N(o):D(o);y("table.".concat("csv"===e?"csv":"md"),u,"csv"===e?"text/csv":"text/markdown"),s(!1),null==i||i(e)}catch(e){null==a||a(e)}};return(0,t.useEffect)(()=>{let e=e=>{l.current&&!l.current.contains(e.target)&&s(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,f.jsxs)("div",{className:"relative",ref:l,children:[(0,f.jsx)("button",{className:g("cursor-pointer p-1 text-muted-foreground transition-all hover:text-foreground",r),onClick:()=>s(!o),title:"Download table",type:"button",children:null!=n?n:(0,f.jsx)(u.DownloadIcon,{size:14})}),o&&(0,f.jsxs)("div",{className:"absolute top-full right-0 z-10 mt-1 min-w-[120px] rounded-md border border-border bg-white shadow-lg",children:[(0,f.jsx)("button",{className:"w-full px-3 py-2 text-left text-sm transition-colors hover:bg-muted/40",onClick:()=>c("csv"),type:"button",children:"CSV"}),(0,f.jsx)("button",{className:"w-full px-3 py-2 text-left text-sm transition-colors hover:bg-muted/40",onClick:()=>c("markdown"),type:"button",children:"Markdown"})]})]})},O=/language-([^\s]+)/,j={ol:e=>{let{node:t,children:n,className:r,...i}=e;return(0,f.jsx)("ol",{className:g("ml-4 list-outside list-decimal whitespace-normal",r),"data-streamdown":"ordered-list",...i,children:n})},li:e=>{let{node:t,children:n,className:r,...i}=e;return(0,f.jsx)("li",{className:g("py-1",r),"data-streamdown":"list-item",...i,children:n})},ul:e=>{let{node:t,children:n,className:r,...i}=e;return(0,f.jsx)("ul",{className:g("ml-4 list-outside list-disc whitespace-normal",r),"data-streamdown":"unordered-list",...i,children:n})},hr:e=>{let{node:t,className:n,...r}=e;return(0,f.jsx)("hr",{className:g("my-6 border-border",n),"data-streamdown":"horizontal-rule",...r})},strong:e=>{let{node:t,children:n,className:r,...i}=e;return(0,f.jsx)("span",{className:g("font-semibold",r),"data-streamdown":"strong",...i,children:n})},a:e=>{let{node:t,children:n,className:r,href:i,...a}=e;return(0,f.jsx)("a",{className:g("font-medium text-primary underline",r),"data-incomplete":"streamdown:incomplete-link"===i,"data-streamdown":"link",href:i,rel:"noreferrer",target:"_blank",...a,children:n})},h1:e=>{let{node:t,children:n,className:r,...i}=e;return(0,f.jsx)("h1",{className:g("mt-6 mb-2 font-semibold text-3xl",r),"data-streamdown":"heading-1",...i,children:n})},h2:e=>{let{node:t,children:n,className:r,...i}=e;return(0,f.jsx)("h2",{className:g("mt-6 mb-2 font-semibold text-2xl",r),"data-streamdown":"heading-2",...i,children:n})},h3:e=>{let{node:t,children:n,className:r,...i}=e;return(0,f.jsx)("h3",{className:g("mt-6 mb-2 font-semibold text-xl",r),"data-streamdown":"heading-3",...i,children:n})},h4:e=>{let{node:t,children:n,className:r,...i}=e;return(0,f.jsx)("h4",{className:g("mt-6 mb-2 font-semibold text-lg",r),"data-streamdown":"heading-4",...i,children:n})},h5:e=>{let{node:t,children:n,className:r,...i}=e;return(0,f.jsx)("h5",{className:g("mt-6 mb-2 font-semibold text-base",r),"data-streamdown":"heading-5",...i,children:n})},h6:e=>{let{node:t,children:n,className:r,...i}=e;return(0,f.jsx)("h6",{className:g("mt-6 mb-2 font-semibold text-sm",r),"data-streamdown":"heading-6",...i,children:n})},table:e=>{let{node:t,children:n,className:r,...i}=e;return(0,f.jsxs)("div",{className:"my-4 flex flex-col space-y-2","data-streamdown":"table-wrapper",children:[(0,f.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,f.jsx)(P,{}),(0,f.jsx)(R,{})]}),(0,f.jsx)("div",{className:"overflow-x-auto",children:(0,f.jsx)("table",{className:g("w-full border-collapse border border-border",r),"data-streamdown":"table",...i,children:n})})]})},thead:e=>{let{node:t,children:n,className:r,...i}=e;return(0,f.jsx)("thead",{className:g("bg-muted/80",r),"data-streamdown":"table-header",...i,children:n})},tbody:e=>{let{node:t,children:n,className:r,...i}=e;return(0,f.jsx)("tbody",{className:g("divide-y divide-border bg-muted/40",r),"data-streamdown":"table-body",...i,children:n})},tr:e=>{let{node:t,children:n,className:r,...i}=e;return(0,f.jsx)("tr",{className:g("border-border border-b",r),"data-streamdown":"table-row",...i,children:n})},th:e=>{let{node:t,children:n,className:r,...i}=e;return(0,f.jsx)("th",{className:g("whitespace-nowrap px-4 py-2 text-left font-semibold text-sm",r),"data-streamdown":"table-header-cell",...i,children:n})},td:e=>{let{node:t,children:n,className:r,...i}=e;return(0,f.jsx)("td",{className:g("px-4 py-2 text-sm",r),"data-streamdown":"table-cell",...i,children:n})},blockquote:e=>{let{node:t,children:n,className:r,...i}=e;return(0,f.jsx)("blockquote",{className:g("my-4 border-muted-foreground/30 border-l-4 pl-4 text-muted-foreground italic",r),"data-streamdown":"blockquote",...i,children:n})},code:e=>{var n,r,i;let{node:a,className:o,children:s,...l}=e;if((null==(n=null==a?void 0:a.position)?void 0:n.start.line)===(null==(r=null==a?void 0:a.position)?void 0:r.end.line))return(0,f.jsx)("code",{className:g("rounded bg-muted px-1.5 py-0.5 font-mono text-sm",o),"data-streamdown":"inline-code",...l,children:s});let u=null==o?void 0:o.match(O),c=null!=(i=null==u?void 0:u.at(1))?i:"",d="";return(0,t.isValidElement)(s)&&s.props&&"object"==typeof s.props&&"children"in s.props&&"string"==typeof s.props.children?d=s.props.children:"string"==typeof s&&(d=s),"mermaid"===c?(0,f.jsxs)("div",{className:g("group relative my-4 h-auto rounded-xl border p-4",o),"data-streamdown":"mermaid-block",children:[(0,f.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,f.jsx)(C,{code:d,language:c}),(0,f.jsx)(A,{code:d})]}),(0,f.jsx)(M,{chart:d})]}):(0,f.jsxs)(S,{className:g("overflow-x-auto border-t",o),code:d,"data-language":c,"data-streamdown":"code-block",language:c,preClassName:"overflow-x-auto font-mono text-xs p-4 bg-muted/40",children:[(0,f.jsx)(C,{code:d,language:c}),(0,f.jsx)(A,{})]})},img:e=>{let{node:t,className:n,src:r,alt:i,...a}=e,o=async()=>{var e;if(r)try{let t=await (await fetch(r)).blob(),n=new URL(r,window.location.origin).pathname.split("/").pop()||"",a=n.includes(".")&&(null==(e=n.split(".").pop())?void 0:e.length)<=4,o="";if(a)o=n;else{let e=t.type,r="png";e.includes("jpeg")||e.includes("jpg")?r="jpg":e.includes("png")?r="png":e.includes("svg")?r="svg":e.includes("gif")?r="gif":e.includes("webp")&&(r="webp"),o="".concat((i||n||"image").replace(/\.[^/.]+$/,""),".").concat(r)}y(o,t,t.type)}catch(e){console.error("Failed to download image:",e)}};return r?(0,f.jsxs)("div",{className:"group relative my-4 inline-block","data-streamdown":"image-wrapper",children:[(0,f.jsx)("img",{alt:i,className:g("max-w-full rounded-lg",n),"data-streamdown":"image",src:r,...a}),(0,f.jsx)("div",{className:"pointer-events-none absolute inset-0 hidden rounded-lg bg-black/10 group-hover:block"}),(0,f.jsx)("button",{className:g("absolute right-2 bottom-2 flex h-8 w-8 cursor-pointer items-center justify-center rounded-md border border-border bg-background/90 shadow-sm backdrop-blur-sm transition-all duration-200 hover:bg-background","opacity-0 group-hover:opacity-100"),onClick:o,title:"Download image",type:"button",children:(0,f.jsx)(u.DownloadIcon,{size:14})})]}):null},pre:e=>{let{children:t}=e;return t},sup:e=>{let{node:t,children:n,className:r,...i}=e;return(0,f.jsx)("sup",{className:g("text-sm",r),"data-streamdown":"superscript",...i,children:n})},sub:e=>{let{node:t,children:n,className:r,...i}=e;return(0,f.jsx)("sub",{className:g("text-sm",r),"data-streamdown":"subscript",...i,children:n})}},F=/(!?\[)([^\]]*?)$/,L=/(\*\*)([^*]*?)$/,z=/(__)([^_]*?)$/,B=/(\*\*\*)([^*]*?)$/,U=/(\*)([^*]*?)$/,H=/(_)([^_]*?)$/,W=/(`)([^`]*?)$/,V=/(~~)([^~]*?)$/,q=e=>{let t=(e.match(/```/g)||[]).length;return t>0&&t%2==0&&e.includes("\n")},G=(e,t)=>{let n=!1,r=!1;for(let i=0;i<e.length&&i<t;i++){if("\\"===e[i]&&"$"===e[i+1]){i++;continue}"$"===e[i]&&("$"===e[i+1]?(r=!r,i++,n=!1):r||(n=!n))}return n||r},$=(e,t)=>{let n="```"===e.substring(t,t+3),r=t>0&&"```"===e.substring(t-1,t+2),i=t>1&&"```"===e.substring(t-2,t+1);return n||r||i},K=(o.default.default||o.default)(n.default),Y=(0,t.createContext)(["github-light","github-dark"]),X={singleDollarTextMath:!1},Z={},J=(0,t.memo)(e=>{let{content:n,shouldParseIncompleteMarkdown:r,...i}=e,a=(0,t.useMemo)(()=>"string"==typeof n&&r?(e=>{if(!e||"string"!=typeof e)return e;let t=e,n=(e=>{let t=e.match(F);if(t){if(t[1].startsWith("!")){let n=e.lastIndexOf(t[1]);return e.substring(0,n)}return"".concat(e,"](streamdown:incomplete-link)")}return e})(t);return n.endsWith("](streamdown:incomplete-link)")?n:t=(e=>{if((e.match(/\$\$/g)||[]).length%2==0)return e;let t=e.indexOf("$$");return -1===t||-1===e.indexOf("\n",t)||e.endsWith("\n")?"".concat(e,"$$"):"".concat(e,"\n$$")})(t=(e=>{let t=e.match(V);if(t){let n=t[2];if(!n||/^[\s_~*`]*$/.test(n))return e;if((e.match(/~~/g)||[]).length%2==1)return"".concat(e,"~~")}return e})(t=(e=>{if(e.match(/^```[^`\n]*```?$/)&&!e.includes("\n"))return e.endsWith("``")&&!e.endsWith("```")?"".concat(e,"`"):e;let t=(e.match(/```/g)||[]).length;if(t>0&&t%2==0&&e.includes("\n")||(e.endsWith("```\n")||e.endsWith("```"))&&t%2==0)return e;let n=e.match(W);if(n&&t%2!=1){let t=n[2];if(!t||/^[\s_~*`]*$/.test(t))return e;if((e=>{let t=0;for(let n=0;n<e.length;n++)"`"===e[n]&&!$(e,n)&&t++;return t})(e)%2==1)return"".concat(e,"`")}return e})(t=(e=>{if(q(e))return e;if(e.match(H)){let t=-1;for(let n=0;n<e.length;n++)if("_"===e[n]&&"_"!==e[n-1]&&"_"!==e[n+1]&&!G(e,n)){t=n;break}if(-1===t)return e;let n=e.substring(t+1);if(!n||/^[\s_~*`]*$/.test(n))return e;if((e=>e.split("").reduce((t,n,r)=>{if("_"===n){let n=e[r-1],i=e[r+1];if("\\"===n||G(e,r))return t;if("_"!==n&&"_"!==i)return t+1}return t},0))(e)%2==1)return"".concat(e,"_")}return e})(t=(e=>{if(q(e))return e;if(e.match(U)){let t=-1;for(let n=0;n<e.length;n++)if("*"===e[n]&&"*"!==e[n-1]&&"*"!==e[n+1]){t=n;break}if(-1===t)return e;let n=e.substring(t+1);if(!n||/^[\s_~*`]*$/.test(n))return e;if((e=>e.split("").reduce((t,n,r)=>{if("*"===n){let n=e[r-1],i=e[r+1];if("\\"===n)return t;let a=r;for(let t=r-1;t>=0;t--){if("\n"===e[t]){a=t+1;break}if(0===t){a=0;break}}if(""===e.substring(a,r).trim()&&(" "===i||"	"===i))return t;if("*"!==n&&"*"!==i)return t+1}return t},0))(e)%2==1)return"".concat(e,"*")}return e})(t=(e=>{let t=e.match(z);if(t){let n=t[2];if(!n||/^[\s_~*`]*$/.test(n))return e;let r=e.lastIndexOf(t[1]),i=e.substring(0,r).lastIndexOf("\n"),a=e.substring(-1===i?0:i+1,r);if(/^[\s]*[-*+][\s]+$/.test(a)&&n.includes("\n"))return e;if((e.match(/__/g)||[]).length%2==1)return"".concat(e,"__")}return e})(t=(e=>{if(q(e))return e;let t=e.match(L);if(t){let n=t[2];if(!n||/^[\s_~*`]*$/.test(n))return e;let r=e.lastIndexOf(t[1]),i=e.substring(0,r).lastIndexOf("\n"),a=e.substring(-1===i?0:i+1,r);if(/^[\s]*[-*+][\s]+$/.test(a)&&n.includes("\n"))return e;if((e.match(/\*\*/g)||[]).length%2==1)return"".concat(e,"**")}return e})(t=(e=>{if(q(e)||/^\*{4,}$/.test(e))return e;let t=e.match(B);if(t){let n=t[2];if(!n||/^[\s_~*`]*$/.test(n))return e;if((e=>{let t=0;for(let n of e.match(/\*+/g)||[]){let e=n.length;e>=3&&(t+=Math.floor(e/3))}return t})(e)%2==1)return"".concat(e,"***")}return e})(t=n))))))))})(n.trim()):n,[n,r]);return(0,f.jsx)(K,{...i,children:a})},(e,t)=>e.content===t.content);J.displayName="Block";var Q=(0,t.memo)(e=>{let{children:n,allowedImagePrefixes:o=["*"],allowedLinkPrefixes:s=["*"],defaultOrigin:l,parseIncompleteMarkdown:u=!0,components:c,rehypePlugins:d,remarkPlugins:h,className:p,shikiTheme:y=["github-light","github-dark"],...b}=e,x=(0,t.useId)(),w=(0,t.useMemo)(()=>(e=>{let t=m.marked.use({gfm:!0}).lexer(e).map(e=>e.raw),n=[];for(let e=0;e<t.length;e++){let r=t[e];if("$$"===r.trim()&&n.length>0){let e=n.at(-1),t=e.trimStart().startsWith("$$"),i=(e.match(/\$\$/g)||[]).length;if(t&&i%2==1){n[n.length-1]=e+r;continue}}if(n.length>0&&r.trimEnd().endsWith("$$")){let e=n.at(-1),t=e.trimStart().startsWith("$$"),i=(e.match(/\$\$/g)||[]).length,a=(r.match(/\$\$/g)||[]).length;if(t&&i%2==1&&!r.trimStart().startsWith("$$")&&1===a){n[n.length-1]=e+r;continue}}n.push(r)}return n})("string"==typeof n?n:""),[n]),k=(0,t.useMemo)(()=>()=>(0,r.default)({errorColor:"var(--color-muted-foreground)"}),[]);return(0,f.jsx)(Y.Provider,{value:y,children:(0,f.jsx)("div",{className:g("space-y-4",p),...b,children:w.map((e,t)=>(0,f.jsx)(J,{allowedImagePrefixes:o,allowedLinkPrefixes:s,components:{...j,...c},content:e,defaultOrigin:l,rehypePlugins:[k,...null!=d?d:[]],remarkPlugins:[[i.default,Z],[a.default,X],...null!=h?h:[]],shouldParseIncompleteMarkdown:u},"".concat(x,"-block_").concat(t)))})})},(e,t)=>e.children===t.children&&e.shikiTheme===t.shikiTheme);Q.displayName="Streamdown"},143928:e=>{"use strict";e.s({useCurrentChatbotId:()=>n});var t=e.i(221297);let n=()=>{let e=(0,t.useChatV2Store)(e=>e.mode);return"chatbot"===e.type?e.chatbotId:void 0}},220642:e=>{"use strict";function t(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!e||!Array.isArray(e.points)||e.points.length<4)throw Error("Invalid coordinates object");let[n,,r]=e.points,{layout_width:i,layout_height:a}=e;if(!i||!a)throw Error("Missing layout dimensions");let o=n[0]/i*100,s=n[1]/a*100,l=(r[0]-n[0])/i*100,u=(r[1]-n[1])/a*100,c=e=>Number(e.toFixed(4));return{pageNumber:t+1,height:c(u),width:c(l),left:c(o),top:c(s),type:"percent"}}e.s({convertCoordinatesToArea:()=>t})},78015:e=>{"use strict";function t(e,t){return"function"==typeof e?e(t):e}function n(e,n){return r=>{n.setState(n=>({...n,[e]:t(r,n[e])}))}}function r(e){return e instanceof Function}function i(e,t,n){let r,i=[];return a=>{let o,s;n.key&&n.debug&&(o=Date.now());let l=e(a);if(!(l.length!==i.length||l.some((e,t)=>i[t]!==e)))return r;if(i=l,n.key&&n.debug&&(s=Date.now()),r=t(...l),null==n||null==n.onChange||n.onChange(r),n.key&&n.debug&&null!=n&&n.debug()){let e=Math.round((Date.now()-o)*100)/100,t=Math.round((Date.now()-s)*100)/100,r=t/16,i=(e,t)=>{for(e=String(e);e.length<t;)e=" "+e;return e};console.info("%c ".concat(i(t,5)," /").concat(i(e,5)," ms"),"\n            font-size: .6rem;\n            font-weight: bold;\n            color: hsl(".concat(Math.max(0,Math.min(120-120*r,120)),"deg 100% 31%);"),null==n?void 0:n.key)}return r}}function a(e,t,n,r){return{debug:()=>{var n;return null!=(n=null==e?void 0:e.debugAll)?n:e[t]},key:!1,onChange:r}}e.s({createTable:()=>H,getCoreRowModel:()=>W,getExpandedRowModel:()=>V,getFacetedMinMaxValues:()=>q,getFacetedRowModel:()=>$,getFacetedUniqueValues:()=>K,getFilteredRowModel:()=>Y,getSortedRowModel:()=>X});let o="debugHeaders";function s(e,t,n){var r;let i={id:null!=(r=n.id)?r:t.id,column:t,index:n.index,isPlaceholder:!!n.isPlaceholder,placeholderId:n.placeholderId,depth:n.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{let e=[],t=n=>{n.subHeaders&&n.subHeaders.length&&n.subHeaders.map(t),e.push(n)};return t(i),e},getContext:()=>({table:e,header:i,column:t})};return e._features.forEach(t=>{null==t.createHeader||t.createHeader(i,e)}),i}function l(e,t,n,r){var i,a;let o=0,l=function(e,t){void 0===t&&(t=1),o=Math.max(o,t),e.filter(e=>e.getIsVisible()).forEach(e=>{var n;null!=(n=e.columns)&&n.length&&l(e.columns,t+1)},0)};l(e);let u=[],c=(e,t)=>{let i={depth:t,id:[r,"".concat(t)].filter(Boolean).join("_"),headers:[]},a=[];e.forEach(e=>{let o,l=[...a].reverse()[0],u=e.column.depth===i.depth,c=!1;if(u&&e.column.parent?o=e.column.parent:(o=e.column,c=!0),l&&(null==l?void 0:l.column)===o)l.subHeaders.push(e);else{let i=s(n,o,{id:[r,t,o.id,null==e?void 0:e.id].filter(Boolean).join("_"),isPlaceholder:c,placeholderId:c?"".concat(a.filter(e=>e.column===o).length):void 0,depth:t,index:a.length});i.subHeaders.push(e),a.push(i)}i.headers.push(e),e.headerGroup=i}),u.push(i),t>0&&c(a,t-1)};c(t.map((e,t)=>s(n,e,{depth:o,index:t})),o-1),u.reverse();let d=e=>e.filter(e=>e.column.getIsVisible()).map(e=>{let t=0,n=0,r=[0];return e.subHeaders&&e.subHeaders.length?(r=[],d(e.subHeaders).forEach(e=>{let{colSpan:n,rowSpan:i}=e;t+=n,r.push(i)})):t=1,n+=Math.min(...r),e.colSpan=t,e.rowSpan=n,{colSpan:t,rowSpan:n}});return d(null!=(i=null==(a=u[0])?void 0:a.headers)?i:[]),u}let u=(e,t,n,r,o,s,l)=>{let u={id:t,index:r,original:n,depth:o,parentId:l,_valuesCache:{},_uniqueValuesCache:{},getValue:t=>{if(u._valuesCache.hasOwnProperty(t))return u._valuesCache[t];let n=e.getColumn(t);if(null!=n&&n.accessorFn)return u._valuesCache[t]=n.accessorFn(u.original,r),u._valuesCache[t]},getUniqueValues:t=>{if(u._uniqueValuesCache.hasOwnProperty(t))return u._uniqueValuesCache[t];let n=e.getColumn(t);if(null!=n&&n.accessorFn)return n.columnDef.getUniqueValues?u._uniqueValuesCache[t]=n.columnDef.getUniqueValues(u.original,r):u._uniqueValuesCache[t]=[u.getValue(t)],u._uniqueValuesCache[t]},renderValue:t=>{var n;return null!=(n=u.getValue(t))?n:e.options.renderFallbackValue},subRows:null!=s?s:[],getLeafRows:()=>(function(e,t){let n=[],r=e=>{e.forEach(e=>{n.push(e);let i=t(e);null!=i&&i.length&&r(i)})};return r(e),n})(u.subRows,e=>e.subRows),getParentRow:()=>u.parentId?e.getRow(u.parentId,!0):void 0,getParentRows:()=>{let e=[],t=u;for(;;){let n=t.getParentRow();if(!n)break;e.push(n),t=n}return e.reverse()},getAllCells:i(()=>[e.getAllLeafColumns()],t=>t.map(t=>(function(e,t,n,r){let o={id:"".concat(t.id,"_").concat(n.id),row:t,column:n,getValue:()=>t.getValue(r),renderValue:()=>{var t;return null!=(t=o.getValue())?t:e.options.renderFallbackValue},getContext:i(()=>[e,n,t,o],(e,t,n,r)=>({table:e,column:t,row:n,cell:r,getValue:r.getValue,renderValue:r.renderValue}),a(e.options,"debugCells","cell.getContext"))};return e._features.forEach(r=>{null==r.createCell||r.createCell(o,n,t,e)},{}),o})(e,u,t,t.id)),a(e.options,"debugRows","getAllCells")),_getAllCellsByColumnId:i(()=>[u.getAllCells()],e=>e.reduce((e,t)=>(e[t.column.id]=t,e),{}),a(e.options,"debugRows","getAllCellsByColumnId"))};for(let t=0;t<e._features.length;t++){let n=e._features[t];null==n||null==n.createRow||n.createRow(u,e)}return u},c=(e,t,n)=>{var r,i;let a=null==n||null==(r=n.toString())?void 0:r.toLowerCase();return!!(null==(i=e.getValue(t))||null==(i=i.toString())||null==(i=i.toLowerCase())?void 0:i.includes(a))};c.autoRemove=e=>w(e);let d=(e,t,n)=>{var r;return!!(null==(r=e.getValue(t))||null==(r=r.toString())?void 0:r.includes(n))};d.autoRemove=e=>w(e);let h=(e,t,n)=>{var r;return(null==(r=e.getValue(t))||null==(r=r.toString())?void 0:r.toLowerCase())===(null==n?void 0:n.toLowerCase())};h.autoRemove=e=>w(e);let p=(e,t,n)=>{var r;return null==(r=e.getValue(t))?void 0:r.includes(n)};p.autoRemove=e=>w(e);let f=(e,t,n)=>!n.some(n=>{var r;return!(null!=(r=e.getValue(t))&&r.includes(n))});f.autoRemove=e=>w(e)||!(null!=e&&e.length);let m=(e,t,n)=>n.some(n=>{var r;return null==(r=e.getValue(t))?void 0:r.includes(n)});m.autoRemove=e=>w(e)||!(null!=e&&e.length);let g=(e,t,n)=>e.getValue(t)===n;g.autoRemove=e=>w(e);let y=(e,t,n)=>e.getValue(t)==n;y.autoRemove=e=>w(e);let b=(e,t,n)=>{let[r,i]=n,a=e.getValue(t);return a>=r&&a<=i};b.resolveFilterValue=e=>{let[t,n]=e,r="number"!=typeof t?parseFloat(t):t,i="number"!=typeof n?parseFloat(n):n,a=null===t||Number.isNaN(r)?-1/0:r,o=null===n||Number.isNaN(i)?1/0:i;if(a>o){let e=a;a=o,o=e}return[a,o]},b.autoRemove=e=>w(e)||w(e[0])&&w(e[1]);let x={includesString:c,includesStringSensitive:d,equalsString:h,arrIncludes:p,arrIncludesAll:f,arrIncludesSome:m,equals:g,weakEquals:y,inNumberRange:b};function w(e){return null==e||""===e}function k(e,t,n){return!!e&&!!e.autoRemove&&e.autoRemove(t,n)||void 0===t||"string"==typeof t&&!t}let S={sum:(e,t,n)=>n.reduce((t,n)=>{let r=n.getValue(e);return t+("number"==typeof r?r:0)},0),min:(e,t,n)=>{let r;return n.forEach(t=>{let n=t.getValue(e);null!=n&&(r>n||void 0===r&&n>=n)&&(r=n)}),r},max:(e,t,n)=>{let r;return n.forEach(t=>{let n=t.getValue(e);null!=n&&(r<n||void 0===r&&n>=n)&&(r=n)}),r},extent:(e,t,n)=>{let r,i;return n.forEach(t=>{let n=t.getValue(e);null!=n&&(void 0===r?n>=n&&(r=i=n):(r>n&&(r=n),i<n&&(i=n)))}),[r,i]},mean:(e,t)=>{let n=0,r=0;if(t.forEach(t=>{let i=t.getValue(e);null!=i&&(i*=1)>=i&&(++n,r+=i)}),n)return r/n},median:(e,t)=>{if(!t.length)return;let n=t.map(t=>t.getValue(e));if(!function(e){return Array.isArray(e)&&e.every(e=>"number"==typeof e)}(n))return;if(1===n.length)return n[0];let r=Math.floor(n.length/2),i=n.sort((e,t)=>e-t);return n.length%2!=0?i[r]:(i[r-1]+i[r])/2},unique:(e,t)=>Array.from(new Set(t.map(t=>t.getValue(e))).values()),uniqueCount:(e,t)=>new Set(t.map(t=>t.getValue(e))).size,count:(e,t)=>t.length},_=()=>({left:[],right:[]}),C={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},A=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),E=null;function T(e){return"touchstart"===e.type}function M(e,t){return t?"center"===t?e.getCenterVisibleLeafColumns():"left"===t?e.getLeftVisibleLeafColumns():e.getRightVisibleLeafColumns():e.getVisibleLeafColumns()}let I=()=>({pageIndex:0,pageSize:10}),N=()=>({top:[],bottom:[]}),D=(e,t,n,r,i)=>{var a;let o=i.getRow(t,!0);n?(o.getCanMultiSelect()||Object.keys(e).forEach(t=>delete e[t]),o.getCanSelect()&&(e[t]=!0)):delete e[t],r&&null!=(a=o.subRows)&&a.length&&o.getCanSelectSubRows()&&o.subRows.forEach(t=>D(e,t.id,n,r,i))};function P(e,t){let n=e.getState().rowSelection,r=[],i={},a=function(e,t){return e.map(e=>{var t;let o=R(e,n);if(o&&(r.push(e),i[e.id]=e),null!=(t=e.subRows)&&t.length&&(e={...e,subRows:a(e.subRows)}),o)return e}).filter(Boolean)};return{rows:a(t.rows),flatRows:r,rowsById:i}}function R(e,t){var n;return null!=(n=t[e.id])&&n}function O(e,t,n){var r;if(!(null!=(r=e.subRows)&&r.length))return!1;let i=!0,a=!1;return e.subRows.forEach(e=>{if((!a||i)&&(e.getCanSelect()&&(R(e,t)?a=!0:i=!1),e.subRows&&e.subRows.length)){let n=O(e,t);"all"===n?a=!0:("some"===n&&(a=!0),i=!1)}}),i?"all":!!a&&"some"}let j=/([0-9]+)/gm;function F(e,t){return e===t?0:e>t?1:-1}function L(e){return"number"==typeof e?isNaN(e)||e===1/0||e===-1/0?"":String(e):"string"==typeof e?e:""}function z(e,t){let n=e.split(j).filter(Boolean),r=t.split(j).filter(Boolean);for(;n.length&&r.length;){let e=n.shift(),t=r.shift(),i=parseInt(e,10),a=parseInt(t,10),o=[i,a].sort();if(isNaN(o[0])){if(e>t)return 1;if(t>e)return -1;continue}if(isNaN(o[1]))return isNaN(i)?-1:1;if(i>a)return 1;if(a>i)return -1}return n.length-r.length}let B={alphanumeric:(e,t,n)=>z(L(e.getValue(n)).toLowerCase(),L(t.getValue(n)).toLowerCase()),alphanumericCaseSensitive:(e,t,n)=>z(L(e.getValue(n)),L(t.getValue(n))),text:(e,t,n)=>F(L(e.getValue(n)).toLowerCase(),L(t.getValue(n)).toLowerCase()),textCaseSensitive:(e,t,n)=>F(L(e.getValue(n)),L(t.getValue(n))),datetime:(e,t,n)=>{let r=e.getValue(n),i=t.getValue(n);return r>i?1:r<i?-1:0},basic:(e,t,n)=>F(e.getValue(n),t.getValue(n))},U=[{createTable:e=>{e.getHeaderGroups=i(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,r,i)=>{var a,o;let s=null!=(a=null==r?void 0:r.map(e=>n.find(t=>t.id===e)).filter(Boolean))?a:[],u=null!=(o=null==i?void 0:i.map(e=>n.find(t=>t.id===e)).filter(Boolean))?o:[];return l(t,[...s,...n.filter(e=>!(null!=r&&r.includes(e.id))&&!(null!=i&&i.includes(e.id))),...u],e)},a(e.options,o,"getHeaderGroups")),e.getCenterHeaderGroups=i(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,r,i)=>l(t,n=n.filter(e=>!(null!=r&&r.includes(e.id))&&!(null!=i&&i.includes(e.id))),e,"center"),a(e.options,o,"getCenterHeaderGroups")),e.getLeftHeaderGroups=i(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left],(t,n,r)=>{var i;return l(t,null!=(i=null==r?void 0:r.map(e=>n.find(t=>t.id===e)).filter(Boolean))?i:[],e,"left")},a(e.options,o,"getLeftHeaderGroups")),e.getRightHeaderGroups=i(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.right],(t,n,r)=>{var i;return l(t,null!=(i=null==r?void 0:r.map(e=>n.find(t=>t.id===e)).filter(Boolean))?i:[],e,"right")},a(e.options,o,"getRightHeaderGroups")),e.getFooterGroups=i(()=>[e.getHeaderGroups()],e=>[...e].reverse(),a(e.options,o,"getFooterGroups")),e.getLeftFooterGroups=i(()=>[e.getLeftHeaderGroups()],e=>[...e].reverse(),a(e.options,o,"getLeftFooterGroups")),e.getCenterFooterGroups=i(()=>[e.getCenterHeaderGroups()],e=>[...e].reverse(),a(e.options,o,"getCenterFooterGroups")),e.getRightFooterGroups=i(()=>[e.getRightHeaderGroups()],e=>[...e].reverse(),a(e.options,o,"getRightFooterGroups")),e.getFlatHeaders=i(()=>[e.getHeaderGroups()],e=>e.map(e=>e.headers).flat(),a(e.options,o,"getFlatHeaders")),e.getLeftFlatHeaders=i(()=>[e.getLeftHeaderGroups()],e=>e.map(e=>e.headers).flat(),a(e.options,o,"getLeftFlatHeaders")),e.getCenterFlatHeaders=i(()=>[e.getCenterHeaderGroups()],e=>e.map(e=>e.headers).flat(),a(e.options,o,"getCenterFlatHeaders")),e.getRightFlatHeaders=i(()=>[e.getRightHeaderGroups()],e=>e.map(e=>e.headers).flat(),a(e.options,o,"getRightFlatHeaders")),e.getCenterLeafHeaders=i(()=>[e.getCenterFlatHeaders()],e=>e.filter(e=>{var t;return!(null!=(t=e.subHeaders)&&t.length)}),a(e.options,o,"getCenterLeafHeaders")),e.getLeftLeafHeaders=i(()=>[e.getLeftFlatHeaders()],e=>e.filter(e=>{var t;return!(null!=(t=e.subHeaders)&&t.length)}),a(e.options,o,"getLeftLeafHeaders")),e.getRightLeafHeaders=i(()=>[e.getRightFlatHeaders()],e=>e.filter(e=>{var t;return!(null!=(t=e.subHeaders)&&t.length)}),a(e.options,o,"getRightLeafHeaders")),e.getLeafHeaders=i(()=>[e.getLeftHeaderGroups(),e.getCenterHeaderGroups(),e.getRightHeaderGroups()],(e,t,n)=>{var r,i,a,o,s,l;return[...null!=(r=null==(i=e[0])?void 0:i.headers)?r:[],...null!=(a=null==(o=t[0])?void 0:o.headers)?a:[],...null!=(s=null==(l=n[0])?void 0:l.headers)?s:[]].map(e=>e.getLeafHeaders()).flat()},a(e.options,o,"getLeafHeaders"))}},{getInitialState:e=>({columnVisibility:{},...e}),getDefaultOptions:e=>({onColumnVisibilityChange:n("columnVisibility",e)}),createColumn:(e,t)=>{e.toggleVisibility=n=>{e.getCanHide()&&t.setColumnVisibility(t=>({...t,[e.id]:null!=n?n:!e.getIsVisible()}))},e.getIsVisible=()=>{var n,r;let i=e.columns;return null==(n=i.length?i.some(e=>e.getIsVisible()):null==(r=t.getState().columnVisibility)?void 0:r[e.id])||n},e.getCanHide=()=>{var n,r;return(null==(n=e.columnDef.enableHiding)||n)&&(null==(r=t.options.enableHiding)||r)},e.getToggleVisibilityHandler=()=>t=>{null==e.toggleVisibility||e.toggleVisibility(t.target.checked)}},createRow:(e,t)=>{e._getAllVisibleCells=i(()=>[e.getAllCells(),t.getState().columnVisibility],e=>e.filter(e=>e.column.getIsVisible()),a(t.options,"debugRows","_getAllVisibleCells")),e.getVisibleCells=i(()=>[e.getLeftVisibleCells(),e.getCenterVisibleCells(),e.getRightVisibleCells()],(e,t,n)=>[...e,...t,...n],a(t.options,"debugRows","getVisibleCells"))},createTable:e=>{let t=(t,n)=>i(()=>[n(),n().filter(e=>e.getIsVisible()).map(e=>e.id).join("_")],e=>e.filter(e=>null==e.getIsVisible?void 0:e.getIsVisible()),a(e.options,"debugColumns",t));e.getVisibleFlatColumns=t("getVisibleFlatColumns",()=>e.getAllFlatColumns()),e.getVisibleLeafColumns=t("getVisibleLeafColumns",()=>e.getAllLeafColumns()),e.getLeftVisibleLeafColumns=t("getLeftVisibleLeafColumns",()=>e.getLeftLeafColumns()),e.getRightVisibleLeafColumns=t("getRightVisibleLeafColumns",()=>e.getRightLeafColumns()),e.getCenterVisibleLeafColumns=t("getCenterVisibleLeafColumns",()=>e.getCenterLeafColumns()),e.setColumnVisibility=t=>null==e.options.onColumnVisibilityChange?void 0:e.options.onColumnVisibilityChange(t),e.resetColumnVisibility=t=>{var n;e.setColumnVisibility(t?{}:null!=(n=e.initialState.columnVisibility)?n:{})},e.toggleAllColumnsVisible=t=>{var n;t=null!=(n=t)?n:!e.getIsAllColumnsVisible(),e.setColumnVisibility(e.getAllLeafColumns().reduce((e,n)=>({...e,[n.id]:t||!(null!=n.getCanHide&&n.getCanHide())}),{}))},e.getIsAllColumnsVisible=()=>!e.getAllLeafColumns().some(e=>!(null!=e.getIsVisible&&e.getIsVisible())),e.getIsSomeColumnsVisible=()=>e.getAllLeafColumns().some(e=>null==e.getIsVisible?void 0:e.getIsVisible()),e.getToggleAllColumnsVisibilityHandler=()=>t=>{var n;e.toggleAllColumnsVisible(null==(n=t.target)?void 0:n.checked)}}},{getInitialState:e=>({columnOrder:[],...e}),getDefaultOptions:e=>({onColumnOrderChange:n("columnOrder",e)}),createColumn:(e,t)=>{e.getIndex=i(e=>[M(t,e)],t=>t.findIndex(t=>t.id===e.id),a(t.options,"debugColumns","getIndex")),e.getIsFirstColumn=n=>{var r;return(null==(r=M(t,n)[0])?void 0:r.id)===e.id},e.getIsLastColumn=n=>{var r;let i=M(t,n);return(null==(r=i[i.length-1])?void 0:r.id)===e.id}},createTable:e=>{e.setColumnOrder=t=>null==e.options.onColumnOrderChange?void 0:e.options.onColumnOrderChange(t),e.resetColumnOrder=t=>{var n;e.setColumnOrder(t?[]:null!=(n=e.initialState.columnOrder)?n:[])},e._getOrderColumnsFn=i(()=>[e.getState().columnOrder,e.getState().grouping,e.options.groupedColumnMode],(e,t,n)=>r=>{let i=[];if(null!=e&&e.length){let t=[...e],n=[...r];for(;n.length&&t.length;){let e=t.shift(),r=n.findIndex(t=>t.id===e);r>-1&&i.push(n.splice(r,1)[0])}i=[...i,...n]}else i=r;return function(e,t,n){if(!(null!=t&&t.length)||!n)return e;let r=e.filter(e=>!t.includes(e.id));return"remove"===n?r:[...t.map(t=>e.find(e=>e.id===t)).filter(Boolean),...r]}(i,t,n)},a(e.options,"debugTable","_getOrderColumnsFn"))}},{getInitialState:e=>({columnPinning:_(),...e}),getDefaultOptions:e=>({onColumnPinningChange:n("columnPinning",e)}),createColumn:(e,t)=>{e.pin=n=>{let r=e.getLeafColumns().map(e=>e.id).filter(Boolean);t.setColumnPinning(e=>{var t,i,a,o,s,l;return"right"===n?{left:(null!=(a=null==e?void 0:e.left)?a:[]).filter(e=>!(null!=r&&r.includes(e))),right:[...(null!=(o=null==e?void 0:e.right)?o:[]).filter(e=>!(null!=r&&r.includes(e))),...r]}:"left"===n?{left:[...(null!=(s=null==e?void 0:e.left)?s:[]).filter(e=>!(null!=r&&r.includes(e))),...r],right:(null!=(l=null==e?void 0:e.right)?l:[]).filter(e=>!(null!=r&&r.includes(e)))}:{left:(null!=(t=null==e?void 0:e.left)?t:[]).filter(e=>!(null!=r&&r.includes(e))),right:(null!=(i=null==e?void 0:e.right)?i:[]).filter(e=>!(null!=r&&r.includes(e)))}})},e.getCanPin=()=>e.getLeafColumns().some(e=>{var n,r,i;return(null==(n=e.columnDef.enablePinning)||n)&&(null==(r=null!=(i=t.options.enableColumnPinning)?i:t.options.enablePinning)||r)}),e.getIsPinned=()=>{let n=e.getLeafColumns().map(e=>e.id),{left:r,right:i}=t.getState().columnPinning,a=n.some(e=>null==r?void 0:r.includes(e)),o=n.some(e=>null==i?void 0:i.includes(e));return a?"left":!!o&&"right"},e.getPinnedIndex=()=>{var n,r;let i=e.getIsPinned();return i?null!=(n=null==(r=t.getState().columnPinning)||null==(r=r[i])?void 0:r.indexOf(e.id))?n:-1:0}},createRow:(e,t)=>{e.getCenterVisibleCells=i(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,t,n)=>{let r=[...null!=t?t:[],...null!=n?n:[]];return e.filter(e=>!r.includes(e.column.id))},a(t.options,"debugRows","getCenterVisibleCells")),e.getLeftVisibleCells=i(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left],(e,t)=>(null!=t?t:[]).map(t=>e.find(e=>e.column.id===t)).filter(Boolean).map(e=>({...e,position:"left"})),a(t.options,"debugRows","getLeftVisibleCells")),e.getRightVisibleCells=i(()=>[e._getAllVisibleCells(),t.getState().columnPinning.right],(e,t)=>(null!=t?t:[]).map(t=>e.find(e=>e.column.id===t)).filter(Boolean).map(e=>({...e,position:"right"})),a(t.options,"debugRows","getRightVisibleCells"))},createTable:e=>{e.setColumnPinning=t=>null==e.options.onColumnPinningChange?void 0:e.options.onColumnPinningChange(t),e.resetColumnPinning=t=>{var n,r;return e.setColumnPinning(t?_():null!=(n=null==(r=e.initialState)?void 0:r.columnPinning)?n:_())},e.getIsSomeColumnsPinned=t=>{var n,r,i;let a=e.getState().columnPinning;return t?!!(null==(n=a[t])?void 0:n.length):!!((null==(r=a.left)?void 0:r.length)||(null==(i=a.right)?void 0:i.length))},e.getLeftLeafColumns=i(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left],(e,t)=>(null!=t?t:[]).map(t=>e.find(e=>e.id===t)).filter(Boolean),a(e.options,"debugColumns","getLeftLeafColumns")),e.getRightLeafColumns=i(()=>[e.getAllLeafColumns(),e.getState().columnPinning.right],(e,t)=>(null!=t?t:[]).map(t=>e.find(e=>e.id===t)).filter(Boolean),a(e.options,"debugColumns","getRightLeafColumns")),e.getCenterLeafColumns=i(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(e,t,n)=>{let r=[...null!=t?t:[],...null!=n?n:[]];return e.filter(e=>!r.includes(e.id))},a(e.options,"debugColumns","getCenterLeafColumns"))}},{createColumn:(e,t)=>{e._getFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,e.id),e.getFacetedRowModel=()=>e._getFacetedRowModel?e._getFacetedRowModel():t.getPreFilteredRowModel(),e._getFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,e.id),e.getFacetedUniqueValues=()=>e._getFacetedUniqueValues?e._getFacetedUniqueValues():new Map,e._getFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,e.id),e.getFacetedMinMaxValues=()=>{if(e._getFacetedMinMaxValues)return e._getFacetedMinMaxValues()}}},{getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:e=>({columnFilters:[],...e}),getDefaultOptions:e=>({onColumnFiltersChange:n("columnFilters",e),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(e,n)=>{e.getAutoFilterFn=()=>{let t=n.getCoreRowModel().flatRows[0],r=null==t?void 0:t.getValue(e.id);return"string"==typeof r?x.includesString:"number"==typeof r?x.inNumberRange:"boolean"==typeof r||null!==r&&"object"==typeof r?x.equals:Array.isArray(r)?x.arrIncludes:x.weakEquals},e.getFilterFn=()=>{var t,i;return r(e.columnDef.filterFn)?e.columnDef.filterFn:"auto"===e.columnDef.filterFn?e.getAutoFilterFn():null!=(t=null==(i=n.options.filterFns)?void 0:i[e.columnDef.filterFn])?t:x[e.columnDef.filterFn]},e.getCanFilter=()=>{var t,r,i;return(null==(t=e.columnDef.enableColumnFilter)||t)&&(null==(r=n.options.enableColumnFilters)||r)&&(null==(i=n.options.enableFilters)||i)&&!!e.accessorFn},e.getIsFiltered=()=>e.getFilterIndex()>-1,e.getFilterValue=()=>{var t;return null==(t=n.getState().columnFilters)||null==(t=t.find(t=>t.id===e.id))?void 0:t.value},e.getFilterIndex=()=>{var t,r;return null!=(t=null==(r=n.getState().columnFilters)?void 0:r.findIndex(t=>t.id===e.id))?t:-1},e.setFilterValue=r=>{n.setColumnFilters(n=>{var i,a;let o=e.getFilterFn(),s=null==n?void 0:n.find(t=>t.id===e.id),l=t(r,s?s.value:void 0);if(k(o,l,e))return null!=(i=null==n?void 0:n.filter(t=>t.id!==e.id))?i:[];let u={id:e.id,value:l};return s?null!=(a=null==n?void 0:n.map(t=>t.id===e.id?u:t))?a:[]:null!=n&&n.length?[...n,u]:[u]})}},createRow:(e,t)=>{e.columnFilters={},e.columnFiltersMeta={}},createTable:e=>{e.setColumnFilters=n=>{let r=e.getAllLeafColumns();null==e.options.onColumnFiltersChange||e.options.onColumnFiltersChange(e=>{var i;return null==(i=t(n,e))?void 0:i.filter(e=>{let t=r.find(t=>t.id===e.id);return!(t&&k(t.getFilterFn(),e.value,t))&&!0})})},e.resetColumnFilters=t=>{var n,r;e.setColumnFilters(t?[]:null!=(n=null==(r=e.initialState)?void 0:r.columnFilters)?n:[])},e.getPreFilteredRowModel=()=>e.getCoreRowModel(),e.getFilteredRowModel=()=>(!e._getFilteredRowModel&&e.options.getFilteredRowModel&&(e._getFilteredRowModel=e.options.getFilteredRowModel(e)),e.options.manualFiltering||!e._getFilteredRowModel)?e.getPreFilteredRowModel():e._getFilteredRowModel()}},{createTable:e=>{e._getGlobalFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,"__global__"),e.getGlobalFacetedRowModel=()=>e.options.manualFiltering||!e._getGlobalFacetedRowModel?e.getPreFilteredRowModel():e._getGlobalFacetedRowModel(),e._getGlobalFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,"__global__"),e.getGlobalFacetedUniqueValues=()=>e._getGlobalFacetedUniqueValues?e._getGlobalFacetedUniqueValues():new Map,e._getGlobalFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,"__global__"),e.getGlobalFacetedMinMaxValues=()=>{if(e._getGlobalFacetedMinMaxValues)return e._getGlobalFacetedMinMaxValues()}}},{getInitialState:e=>({globalFilter:void 0,...e}),getDefaultOptions:e=>({onGlobalFilterChange:n("globalFilter",e),globalFilterFn:"auto",getColumnCanGlobalFilter:t=>{var n;let r=null==(n=e.getCoreRowModel().flatRows[0])||null==(n=n._getAllCellsByColumnId()[t.id])?void 0:n.getValue();return"string"==typeof r||"number"==typeof r}}),createColumn:(e,t)=>{e.getCanGlobalFilter=()=>{var n,r,i,a;return(null==(n=e.columnDef.enableGlobalFilter)||n)&&(null==(r=t.options.enableGlobalFilter)||r)&&(null==(i=t.options.enableFilters)||i)&&(null==(a=null==t.options.getColumnCanGlobalFilter?void 0:t.options.getColumnCanGlobalFilter(e))||a)&&!!e.accessorFn}},createTable:e=>{e.getGlobalAutoFilterFn=()=>x.includesString,e.getGlobalFilterFn=()=>{var t,n;let{globalFilterFn:i}=e.options;return r(i)?i:"auto"===i?e.getGlobalAutoFilterFn():null!=(t=null==(n=e.options.filterFns)?void 0:n[i])?t:x[i]},e.setGlobalFilter=t=>{null==e.options.onGlobalFilterChange||e.options.onGlobalFilterChange(t)},e.resetGlobalFilter=t=>{e.setGlobalFilter(t?void 0:e.initialState.globalFilter)}}},{getInitialState:e=>({sorting:[],...e}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:e=>({onSortingChange:n("sorting",e),isMultiSortEvent:e=>e.shiftKey}),createColumn:(e,t)=>{e.getAutoSortingFn=()=>{let n=t.getFilteredRowModel().flatRows.slice(10),r=!1;for(let t of n){let n=null==t?void 0:t.getValue(e.id);if("[object Date]"===Object.prototype.toString.call(n))return B.datetime;if("string"==typeof n&&(r=!0,n.split(j).length>1))return B.alphanumeric}return r?B.text:B.basic},e.getAutoSortDir=()=>{let n=t.getFilteredRowModel().flatRows[0];return"string"==typeof(null==n?void 0:n.getValue(e.id))?"asc":"desc"},e.getSortingFn=()=>{var n,i;if(!e)throw Error();return r(e.columnDef.sortingFn)?e.columnDef.sortingFn:"auto"===e.columnDef.sortingFn?e.getAutoSortingFn():null!=(n=null==(i=t.options.sortingFns)?void 0:i[e.columnDef.sortingFn])?n:B[e.columnDef.sortingFn]},e.toggleSorting=(n,r)=>{let i=e.getNextSortingOrder(),a=null!=n;t.setSorting(o=>{let s,l=null==o?void 0:o.find(t=>t.id===e.id),u=null==o?void 0:o.findIndex(t=>t.id===e.id),c=[],d=a?n:"desc"===i;if("toggle"!=(s=null!=o&&o.length&&e.getCanMultiSort()&&r?l?"toggle":"add":null!=o&&o.length&&u!==o.length-1?"replace":l?"toggle":"replace")||a||i||(s="remove"),"add"===s){var h;(c=[...o,{id:e.id,desc:d}]).splice(0,c.length-(null!=(h=t.options.maxMultiSortColCount)?h:Number.MAX_SAFE_INTEGER))}else c="toggle"===s?o.map(t=>t.id===e.id?{...t,desc:d}:t):"remove"===s?o.filter(t=>t.id!==e.id):[{id:e.id,desc:d}];return c})},e.getFirstSortDir=()=>{var n,r;return(null!=(n=null!=(r=e.columnDef.sortDescFirst)?r:t.options.sortDescFirst)?n:"desc"===e.getAutoSortDir())?"desc":"asc"},e.getNextSortingOrder=n=>{var r,i;let a=e.getFirstSortDir(),o=e.getIsSorted();return o?(o===a||null!=(r=t.options.enableSortingRemoval)&&!r||!!n&&null!=(i=t.options.enableMultiRemove)&&!i)&&("desc"===o?"asc":"desc"):a},e.getCanSort=()=>{var n,r;return(null==(n=e.columnDef.enableSorting)||n)&&(null==(r=t.options.enableSorting)||r)&&!!e.accessorFn},e.getCanMultiSort=()=>{var n,r;return null!=(n=null!=(r=e.columnDef.enableMultiSort)?r:t.options.enableMultiSort)?n:!!e.accessorFn},e.getIsSorted=()=>{var n;let r=null==(n=t.getState().sorting)?void 0:n.find(t=>t.id===e.id);return!!r&&(r.desc?"desc":"asc")},e.getSortIndex=()=>{var n,r;return null!=(n=null==(r=t.getState().sorting)?void 0:r.findIndex(t=>t.id===e.id))?n:-1},e.clearSorting=()=>{t.setSorting(t=>null!=t&&t.length?t.filter(t=>t.id!==e.id):[])},e.getToggleSortingHandler=()=>{let n=e.getCanSort();return r=>{n&&(null==r.persist||r.persist(),null==e.toggleSorting||e.toggleSorting(void 0,!!e.getCanMultiSort()&&(null==t.options.isMultiSortEvent?void 0:t.options.isMultiSortEvent(r))))}}},createTable:e=>{e.setSorting=t=>null==e.options.onSortingChange?void 0:e.options.onSortingChange(t),e.resetSorting=t=>{var n,r;e.setSorting(t?[]:null!=(n=null==(r=e.initialState)?void 0:r.sorting)?n:[])},e.getPreSortedRowModel=()=>e.getGroupedRowModel(),e.getSortedRowModel=()=>(!e._getSortedRowModel&&e.options.getSortedRowModel&&(e._getSortedRowModel=e.options.getSortedRowModel(e)),e.options.manualSorting||!e._getSortedRowModel)?e.getPreSortedRowModel():e._getSortedRowModel()}},{getDefaultColumnDef:()=>({aggregatedCell:e=>{var t,n;return null!=(t=null==(n=e.getValue())||null==n.toString?void 0:n.toString())?t:null},aggregationFn:"auto"}),getInitialState:e=>({grouping:[],...e}),getDefaultOptions:e=>({onGroupingChange:n("grouping",e),groupedColumnMode:"reorder"}),createColumn:(e,t)=>{e.toggleGrouping=()=>{t.setGrouping(t=>null!=t&&t.includes(e.id)?t.filter(t=>t!==e.id):[...null!=t?t:[],e.id])},e.getCanGroup=()=>{var n,r;return(null==(n=e.columnDef.enableGrouping)||n)&&(null==(r=t.options.enableGrouping)||r)&&(!!e.accessorFn||!!e.columnDef.getGroupingValue)},e.getIsGrouped=()=>{var n;return null==(n=t.getState().grouping)?void 0:n.includes(e.id)},e.getGroupedIndex=()=>{var n;return null==(n=t.getState().grouping)?void 0:n.indexOf(e.id)},e.getToggleGroupingHandler=()=>{let t=e.getCanGroup();return()=>{t&&e.toggleGrouping()}},e.getAutoAggregationFn=()=>{let n=t.getCoreRowModel().flatRows[0],r=null==n?void 0:n.getValue(e.id);return"number"==typeof r?S.sum:"[object Date]"===Object.prototype.toString.call(r)?S.extent:void 0},e.getAggregationFn=()=>{var n,i;if(!e)throw Error();return r(e.columnDef.aggregationFn)?e.columnDef.aggregationFn:"auto"===e.columnDef.aggregationFn?e.getAutoAggregationFn():null!=(n=null==(i=t.options.aggregationFns)?void 0:i[e.columnDef.aggregationFn])?n:S[e.columnDef.aggregationFn]}},createTable:e=>{e.setGrouping=t=>null==e.options.onGroupingChange?void 0:e.options.onGroupingChange(t),e.resetGrouping=t=>{var n,r;e.setGrouping(t?[]:null!=(n=null==(r=e.initialState)?void 0:r.grouping)?n:[])},e.getPreGroupedRowModel=()=>e.getFilteredRowModel(),e.getGroupedRowModel=()=>(!e._getGroupedRowModel&&e.options.getGroupedRowModel&&(e._getGroupedRowModel=e.options.getGroupedRowModel(e)),e.options.manualGrouping||!e._getGroupedRowModel)?e.getPreGroupedRowModel():e._getGroupedRowModel()},createRow:(e,t)=>{e.getIsGrouped=()=>!!e.groupingColumnId,e.getGroupingValue=n=>{if(e._groupingValuesCache.hasOwnProperty(n))return e._groupingValuesCache[n];let r=t.getColumn(n);return null!=r&&r.columnDef.getGroupingValue?(e._groupingValuesCache[n]=r.columnDef.getGroupingValue(e.original),e._groupingValuesCache[n]):e.getValue(n)},e._groupingValuesCache={}},createCell:(e,t,n,r)=>{e.getIsGrouped=()=>t.getIsGrouped()&&t.id===n.groupingColumnId,e.getIsPlaceholder=()=>!e.getIsGrouped()&&t.getIsGrouped(),e.getIsAggregated=()=>{var t;return!e.getIsGrouped()&&!e.getIsPlaceholder()&&!!(null!=(t=n.subRows)&&t.length)}}},{getInitialState:e=>({expanded:{},...e}),getDefaultOptions:e=>({onExpandedChange:n("expanded",e),paginateExpandedRows:!0}),createTable:e=>{let t=!1,n=!1;e._autoResetExpanded=()=>{var r,i;if(!t)return void e._queue(()=>{t=!0});if(null!=(r=null!=(i=e.options.autoResetAll)?i:e.options.autoResetExpanded)?r:!e.options.manualExpanding){if(n)return;n=!0,e._queue(()=>{e.resetExpanded(),n=!1})}},e.setExpanded=t=>null==e.options.onExpandedChange?void 0:e.options.onExpandedChange(t),e.toggleAllRowsExpanded=t=>{(null!=t?t:!e.getIsAllRowsExpanded())?e.setExpanded(!0):e.setExpanded({})},e.resetExpanded=t=>{var n,r;e.setExpanded(t?{}:null!=(n=null==(r=e.initialState)?void 0:r.expanded)?n:{})},e.getCanSomeRowsExpand=()=>e.getPrePaginationRowModel().flatRows.some(e=>e.getCanExpand()),e.getToggleAllRowsExpandedHandler=()=>t=>{null==t.persist||t.persist(),e.toggleAllRowsExpanded()},e.getIsSomeRowsExpanded=()=>{let t=e.getState().expanded;return!0===t||Object.values(t).some(Boolean)},e.getIsAllRowsExpanded=()=>{let t=e.getState().expanded;return"boolean"==typeof t?!0===t:!(!Object.keys(t).length||e.getRowModel().flatRows.some(e=>!e.getIsExpanded()))},e.getExpandedDepth=()=>{let t=0;return(!0===e.getState().expanded?Object.keys(e.getRowModel().rowsById):Object.keys(e.getState().expanded)).forEach(e=>{let n=e.split(".");t=Math.max(t,n.length)}),t},e.getPreExpandedRowModel=()=>e.getSortedRowModel(),e.getExpandedRowModel=()=>(!e._getExpandedRowModel&&e.options.getExpandedRowModel&&(e._getExpandedRowModel=e.options.getExpandedRowModel(e)),e.options.manualExpanding||!e._getExpandedRowModel)?e.getPreExpandedRowModel():e._getExpandedRowModel()},createRow:(e,t)=>{e.toggleExpanded=n=>{t.setExpanded(r=>{var i;let a=!0===r||!!(null!=r&&r[e.id]),o={};if(!0===r?Object.keys(t.getRowModel().rowsById).forEach(e=>{o[e]=!0}):o=r,n=null!=(i=n)?i:!a,!a&&n)return{...o,[e.id]:!0};if(a&&!n){let{[e.id]:t,...n}=o;return n}return r})},e.getIsExpanded=()=>{var n;let r=t.getState().expanded;return!!(null!=(n=null==t.options.getIsRowExpanded?void 0:t.options.getIsRowExpanded(e))?n:!0===r||(null==r?void 0:r[e.id]))},e.getCanExpand=()=>{var n,r,i;return null!=(n=null==t.options.getRowCanExpand?void 0:t.options.getRowCanExpand(e))?n:(null==(r=t.options.enableExpanding)||r)&&!!(null!=(i=e.subRows)&&i.length)},e.getIsAllParentsExpanded=()=>{let n=!0,r=e;for(;n&&r.parentId;)n=(r=t.getRow(r.parentId,!0)).getIsExpanded();return n},e.getToggleExpandedHandler=()=>{let t=e.getCanExpand();return()=>{t&&e.toggleExpanded()}}}},{getInitialState:e=>({...e,pagination:{...I(),...null==e?void 0:e.pagination}}),getDefaultOptions:e=>({onPaginationChange:n("pagination",e)}),createTable:e=>{let n=!1,r=!1;e._autoResetPageIndex=()=>{var t,i;if(!n)return void e._queue(()=>{n=!0});if(null!=(t=null!=(i=e.options.autoResetAll)?i:e.options.autoResetPageIndex)?t:!e.options.manualPagination){if(r)return;r=!0,e._queue(()=>{e.resetPageIndex(),r=!1})}},e.setPagination=n=>null==e.options.onPaginationChange?void 0:e.options.onPaginationChange(e=>t(n,e)),e.resetPagination=t=>{var n;e.setPagination(t?I():null!=(n=e.initialState.pagination)?n:I())},e.setPageIndex=n=>{e.setPagination(r=>{let i=t(n,r.pageIndex);return i=Math.max(0,Math.min(i,void 0===e.options.pageCount||-1===e.options.pageCount?Number.MAX_SAFE_INTEGER:e.options.pageCount-1)),{...r,pageIndex:i}})},e.resetPageIndex=t=>{var n,r;e.setPageIndex(t?0:null!=(n=null==(r=e.initialState)||null==(r=r.pagination)?void 0:r.pageIndex)?n:0)},e.resetPageSize=t=>{var n,r;e.setPageSize(t?10:null!=(n=null==(r=e.initialState)||null==(r=r.pagination)?void 0:r.pageSize)?n:10)},e.setPageSize=n=>{e.setPagination(e=>{let r=Math.max(1,t(n,e.pageSize)),i=Math.floor(e.pageSize*e.pageIndex/r);return{...e,pageIndex:i,pageSize:r}})},e.setPageCount=n=>e.setPagination(r=>{var i;let a=t(n,null!=(i=e.options.pageCount)?i:-1);return"number"==typeof a&&(a=Math.max(-1,a)),{...r,pageCount:a}}),e.getPageOptions=i(()=>[e.getPageCount()],e=>{let t=[];return e&&e>0&&(t=[...Array(e)].fill(null).map((e,t)=>t)),t},a(e.options,"debugTable","getPageOptions")),e.getCanPreviousPage=()=>e.getState().pagination.pageIndex>0,e.getCanNextPage=()=>{let{pageIndex:t}=e.getState().pagination,n=e.getPageCount();return -1===n||0!==n&&t<n-1},e.previousPage=()=>e.setPageIndex(e=>e-1),e.nextPage=()=>e.setPageIndex(e=>e+1),e.firstPage=()=>e.setPageIndex(0),e.lastPage=()=>e.setPageIndex(e.getPageCount()-1),e.getPrePaginationRowModel=()=>e.getExpandedRowModel(),e.getPaginationRowModel=()=>(!e._getPaginationRowModel&&e.options.getPaginationRowModel&&(e._getPaginationRowModel=e.options.getPaginationRowModel(e)),e.options.manualPagination||!e._getPaginationRowModel)?e.getPrePaginationRowModel():e._getPaginationRowModel(),e.getPageCount=()=>{var t;return null!=(t=e.options.pageCount)?t:Math.ceil(e.getRowCount()/e.getState().pagination.pageSize)},e.getRowCount=()=>{var t;return null!=(t=e.options.rowCount)?t:e.getPrePaginationRowModel().rows.length}}},{getInitialState:e=>({rowPinning:N(),...e}),getDefaultOptions:e=>({onRowPinningChange:n("rowPinning",e)}),createRow:(e,t)=>{e.pin=(n,r,i)=>{let a=r?e.getLeafRows().map(e=>{let{id:t}=e;return t}):[],o=new Set([...i?e.getParentRows().map(e=>{let{id:t}=e;return t}):[],e.id,...a]);t.setRowPinning(e=>{var t,r,i,a,s,l;return"bottom"===n?{top:(null!=(i=null==e?void 0:e.top)?i:[]).filter(e=>!(null!=o&&o.has(e))),bottom:[...(null!=(a=null==e?void 0:e.bottom)?a:[]).filter(e=>!(null!=o&&o.has(e))),...Array.from(o)]}:"top"===n?{top:[...(null!=(s=null==e?void 0:e.top)?s:[]).filter(e=>!(null!=o&&o.has(e))),...Array.from(o)],bottom:(null!=(l=null==e?void 0:e.bottom)?l:[]).filter(e=>!(null!=o&&o.has(e)))}:{top:(null!=(t=null==e?void 0:e.top)?t:[]).filter(e=>!(null!=o&&o.has(e))),bottom:(null!=(r=null==e?void 0:e.bottom)?r:[]).filter(e=>!(null!=o&&o.has(e)))}})},e.getCanPin=()=>{var n;let{enableRowPinning:r,enablePinning:i}=t.options;return"function"==typeof r?r(e):null==(n=null!=r?r:i)||n},e.getIsPinned=()=>{let n=[e.id],{top:r,bottom:i}=t.getState().rowPinning,a=n.some(e=>null==r?void 0:r.includes(e)),o=n.some(e=>null==i?void 0:i.includes(e));return a?"top":!!o&&"bottom"},e.getPinnedIndex=()=>{var n,r;let i=e.getIsPinned();if(!i)return -1;let a=null==(n="top"===i?t.getTopRows():t.getBottomRows())?void 0:n.map(e=>{let{id:t}=e;return t});return null!=(r=null==a?void 0:a.indexOf(e.id))?r:-1}},createTable:e=>{e.setRowPinning=t=>null==e.options.onRowPinningChange?void 0:e.options.onRowPinningChange(t),e.resetRowPinning=t=>{var n,r;return e.setRowPinning(t?N():null!=(n=null==(r=e.initialState)?void 0:r.rowPinning)?n:N())},e.getIsSomeRowsPinned=t=>{var n,r,i;let a=e.getState().rowPinning;return t?!!(null==(n=a[t])?void 0:n.length):!!((null==(r=a.top)?void 0:r.length)||(null==(i=a.bottom)?void 0:i.length))},e._getPinnedRows=(t,n,r)=>{var i;return(null==(i=e.options.keepPinnedRows)||i?(null!=n?n:[]).map(t=>{let n=e.getRow(t,!0);return n.getIsAllParentsExpanded()?n:null}):(null!=n?n:[]).map(e=>t.find(t=>t.id===e))).filter(Boolean).map(e=>({...e,position:r}))},e.getTopRows=i(()=>[e.getRowModel().rows,e.getState().rowPinning.top],(t,n)=>e._getPinnedRows(t,n,"top"),a(e.options,"debugRows","getTopRows")),e.getBottomRows=i(()=>[e.getRowModel().rows,e.getState().rowPinning.bottom],(t,n)=>e._getPinnedRows(t,n,"bottom"),a(e.options,"debugRows","getBottomRows")),e.getCenterRows=i(()=>[e.getRowModel().rows,e.getState().rowPinning.top,e.getState().rowPinning.bottom],(e,t,n)=>{let r=new Set([...null!=t?t:[],...null!=n?n:[]]);return e.filter(e=>!r.has(e.id))},a(e.options,"debugRows","getCenterRows"))}},{getInitialState:e=>({rowSelection:{},...e}),getDefaultOptions:e=>({onRowSelectionChange:n("rowSelection",e),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:e=>{e.setRowSelection=t=>null==e.options.onRowSelectionChange?void 0:e.options.onRowSelectionChange(t),e.resetRowSelection=t=>{var n;return e.setRowSelection(t?{}:null!=(n=e.initialState.rowSelection)?n:{})},e.toggleAllRowsSelected=t=>{e.setRowSelection(n=>{t=void 0!==t?t:!e.getIsAllRowsSelected();let r={...n},i=e.getPreGroupedRowModel().flatRows;return t?i.forEach(e=>{e.getCanSelect()&&(r[e.id]=!0)}):i.forEach(e=>{delete r[e.id]}),r})},e.toggleAllPageRowsSelected=t=>e.setRowSelection(n=>{let r=void 0!==t?t:!e.getIsAllPageRowsSelected(),i={...n};return e.getRowModel().rows.forEach(t=>{D(i,t.id,r,!0,e)}),i}),e.getPreSelectedRowModel=()=>e.getCoreRowModel(),e.getSelectedRowModel=i(()=>[e.getState().rowSelection,e.getCoreRowModel()],(t,n)=>Object.keys(t).length?P(e,n):{rows:[],flatRows:[],rowsById:{}},a(e.options,"debugTable","getSelectedRowModel")),e.getFilteredSelectedRowModel=i(()=>[e.getState().rowSelection,e.getFilteredRowModel()],(t,n)=>Object.keys(t).length?P(e,n):{rows:[],flatRows:[],rowsById:{}},a(e.options,"debugTable","getFilteredSelectedRowModel")),e.getGroupedSelectedRowModel=i(()=>[e.getState().rowSelection,e.getSortedRowModel()],(t,n)=>Object.keys(t).length?P(e,n):{rows:[],flatRows:[],rowsById:{}},a(e.options,"debugTable","getGroupedSelectedRowModel")),e.getIsAllRowsSelected=()=>{let t=e.getFilteredRowModel().flatRows,{rowSelection:n}=e.getState(),r=!!(t.length&&Object.keys(n).length);return r&&t.some(e=>e.getCanSelect()&&!n[e.id])&&(r=!1),r},e.getIsAllPageRowsSelected=()=>{let t=e.getPaginationRowModel().flatRows.filter(e=>e.getCanSelect()),{rowSelection:n}=e.getState(),r=!!t.length;return r&&t.some(e=>!n[e.id])&&(r=!1),r},e.getIsSomeRowsSelected=()=>{var t;let n=Object.keys(null!=(t=e.getState().rowSelection)?t:{}).length;return n>0&&n<e.getFilteredRowModel().flatRows.length},e.getIsSomePageRowsSelected=()=>{let t=e.getPaginationRowModel().flatRows;return!e.getIsAllPageRowsSelected()&&t.filter(e=>e.getCanSelect()).some(e=>e.getIsSelected()||e.getIsSomeSelected())},e.getToggleAllRowsSelectedHandler=()=>t=>{e.toggleAllRowsSelected(t.target.checked)},e.getToggleAllPageRowsSelectedHandler=()=>t=>{e.toggleAllPageRowsSelected(t.target.checked)}},createRow:(e,t)=>{e.toggleSelected=(n,r)=>{let i=e.getIsSelected();t.setRowSelection(a=>{var o;if(n=void 0!==n?n:!i,e.getCanSelect()&&i===n)return a;let s={...a};return D(s,e.id,n,null==(o=null==r?void 0:r.selectChildren)||o,t),s})},e.getIsSelected=()=>{let{rowSelection:n}=t.getState();return R(e,n)},e.getIsSomeSelected=()=>{let{rowSelection:n}=t.getState();return"some"===O(e,n)},e.getIsAllSubRowsSelected=()=>{let{rowSelection:n}=t.getState();return"all"===O(e,n)},e.getCanSelect=()=>{var n;return"function"==typeof t.options.enableRowSelection?t.options.enableRowSelection(e):null==(n=t.options.enableRowSelection)||n},e.getCanSelectSubRows=()=>{var n;return"function"==typeof t.options.enableSubRowSelection?t.options.enableSubRowSelection(e):null==(n=t.options.enableSubRowSelection)||n},e.getCanMultiSelect=()=>{var n;return"function"==typeof t.options.enableMultiRowSelection?t.options.enableMultiRowSelection(e):null==(n=t.options.enableMultiRowSelection)||n},e.getToggleSelectedHandler=()=>{let t=e.getCanSelect();return n=>{var r;t&&e.toggleSelected(null==(r=n.target)?void 0:r.checked)}}}},{getDefaultColumnDef:()=>C,getInitialState:e=>({columnSizing:{},columnSizingInfo:A(),...e}),getDefaultOptions:e=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:n("columnSizing",e),onColumnSizingInfoChange:n("columnSizingInfo",e)}),createColumn:(e,t)=>{e.getSize=()=>{var n,r,i;let a=t.getState().columnSizing[e.id];return Math.min(Math.max(null!=(n=e.columnDef.minSize)?n:C.minSize,null!=(r=null!=a?a:e.columnDef.size)?r:C.size),null!=(i=e.columnDef.maxSize)?i:C.maxSize)},e.getStart=i(e=>[e,M(t,e),t.getState().columnSizing],(t,n)=>n.slice(0,e.getIndex(t)).reduce((e,t)=>e+t.getSize(),0),a(t.options,"debugColumns","getStart")),e.getAfter=i(e=>[e,M(t,e),t.getState().columnSizing],(t,n)=>n.slice(e.getIndex(t)+1).reduce((e,t)=>e+t.getSize(),0),a(t.options,"debugColumns","getAfter")),e.resetSize=()=>{t.setColumnSizing(t=>{let{[e.id]:n,...r}=t;return r})},e.getCanResize=()=>{var n,r;return(null==(n=e.columnDef.enableResizing)||n)&&(null==(r=t.options.enableColumnResizing)||r)},e.getIsResizing=()=>t.getState().columnSizingInfo.isResizingColumn===e.id},createHeader:(e,t)=>{e.getSize=()=>{let t=0,n=e=>{if(e.subHeaders.length)e.subHeaders.forEach(n);else{var r;t+=null!=(r=e.column.getSize())?r:0}};return n(e),t},e.getStart=()=>{if(e.index>0){let t=e.headerGroup.headers[e.index-1];return t.getStart()+t.getSize()}return 0},e.getResizeHandler=n=>{let r=t.getColumn(e.column.id),i=null==r?void 0:r.getCanResize();return a=>{if(!r||!i||(null==a.persist||a.persist(),T(a)&&a.touches&&a.touches.length>1))return;let o=e.getSize(),s=e?e.getLeafHeaders().map(e=>[e.column.id,e.column.getSize()]):[[r.id,r.getSize()]],l=T(a)?Math.round(a.touches[0].clientX):a.clientX,u={},c=(e,n)=>{"number"==typeof n&&(t.setColumnSizingInfo(e=>{var r,i;let a="rtl"===t.options.columnResizeDirection?-1:1,o=(n-(null!=(r=null==e?void 0:e.startOffset)?r:0))*a,s=Math.max(o/(null!=(i=null==e?void 0:e.startSize)?i:0),-.999999);return e.columnSizingStart.forEach(e=>{let[t,n]=e;u[t]=Math.round(100*Math.max(n+n*s,0))/100}),{...e,deltaOffset:o,deltaPercentage:s}}),("onChange"===t.options.columnResizeMode||"end"===e)&&t.setColumnSizing(e=>({...e,...u})))},d=e=>c("move",e),h=e=>{c("end",e),t.setColumnSizingInfo(e=>({...e,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},p=n||("undefined"!=typeof document?document:null),f={moveHandler:e=>d(e.clientX),upHandler:e=>{null==p||p.removeEventListener("mousemove",f.moveHandler),null==p||p.removeEventListener("mouseup",f.upHandler),h(e.clientX)}},m={moveHandler:e=>(e.cancelable&&(e.preventDefault(),e.stopPropagation()),d(e.touches[0].clientX),!1),upHandler:e=>{var t;null==p||p.removeEventListener("touchmove",m.moveHandler),null==p||p.removeEventListener("touchend",m.upHandler),e.cancelable&&(e.preventDefault(),e.stopPropagation()),h(null==(t=e.touches[0])?void 0:t.clientX)}},g=!!function(){if("boolean"==typeof E)return E;let e=!1;try{let t=()=>{};window.addEventListener("test",t,{get passive(){return e=!0,!1}}),window.removeEventListener("test",t)}catch(t){e=!1}return E=e}()&&{passive:!1};T(a)?(null==p||p.addEventListener("touchmove",m.moveHandler,g),null==p||p.addEventListener("touchend",m.upHandler,g)):(null==p||p.addEventListener("mousemove",f.moveHandler,g),null==p||p.addEventListener("mouseup",f.upHandler,g)),t.setColumnSizingInfo(e=>({...e,startOffset:l,startSize:o,deltaOffset:0,deltaPercentage:0,columnSizingStart:s,isResizingColumn:r.id}))}}},createTable:e=>{e.setColumnSizing=t=>null==e.options.onColumnSizingChange?void 0:e.options.onColumnSizingChange(t),e.setColumnSizingInfo=t=>null==e.options.onColumnSizingInfoChange?void 0:e.options.onColumnSizingInfoChange(t),e.resetColumnSizing=t=>{var n;e.setColumnSizing(t?{}:null!=(n=e.initialState.columnSizing)?n:{})},e.resetHeaderSizeInfo=t=>{var n;e.setColumnSizingInfo(t?A():null!=(n=e.initialState.columnSizingInfo)?n:A())},e.getTotalSize=()=>{var t,n;return null!=(t=null==(n=e.getHeaderGroups()[0])?void 0:n.headers.reduce((e,t)=>e+t.getSize(),0))?t:0},e.getLeftTotalSize=()=>{var t,n;return null!=(t=null==(n=e.getLeftHeaderGroups()[0])?void 0:n.headers.reduce((e,t)=>e+t.getSize(),0))?t:0},e.getCenterTotalSize=()=>{var t,n;return null!=(t=null==(n=e.getCenterHeaderGroups()[0])?void 0:n.headers.reduce((e,t)=>e+t.getSize(),0))?t:0},e.getRightTotalSize=()=>{var t,n;return null!=(t=null==(n=e.getRightHeaderGroups()[0])?void 0:n.headers.reduce((e,t)=>e+t.getSize(),0))?t:0}}}];function H(e){var n,r;let o=[...U,...null!=(n=e._features)?n:[]],s={_features:o},l=s._features.reduce((e,t)=>Object.assign(e,null==t.getDefaultOptions?void 0:t.getDefaultOptions(s)),{}),u={...null!=(r=e.initialState)?r:{}};s._features.forEach(e=>{var t;u=null!=(t=null==e.getInitialState?void 0:e.getInitialState(u))?t:u});let c=[],d=!1,h={_features:o,options:{...l,...e},initialState:u,_queue:e=>{c.push(e),d||(d=!0,Promise.resolve().then(()=>{for(;c.length;)c.shift()();d=!1}).catch(e=>setTimeout(()=>{throw e})))},reset:()=>{s.setState(s.initialState)},setOptions:e=>{var n;n=t(e,s.options),s.options=s.options.mergeOptions?s.options.mergeOptions(l,n):{...l,...n}},getState:()=>s.options.state,setState:e=>{null==s.options.onStateChange||s.options.onStateChange(e)},_getRowId:(e,t,n)=>{var r;return null!=(r=null==s.options.getRowId?void 0:s.options.getRowId(e,t,n))?r:"".concat(n?[n.id,t].join("."):t)},getCoreRowModel:()=>(s._getCoreRowModel||(s._getCoreRowModel=s.options.getCoreRowModel(s)),s._getCoreRowModel()),getRowModel:()=>s.getPaginationRowModel(),getRow:(e,t)=>{let n=(t?s.getPrePaginationRowModel():s.getRowModel()).rowsById[e];if(!n&&!(n=s.getCoreRowModel().rowsById[e]))throw Error();return n},_getDefaultColumnDef:i(()=>[s.options.defaultColumn],e=>{var t;return e=null!=(t=e)?t:{},{header:e=>{let t=e.header.column.columnDef;return t.accessorKey?t.accessorKey:t.accessorFn?t.id:null},cell:e=>{var t,n;return null!=(t=null==(n=e.renderValue())||null==n.toString?void 0:n.toString())?t:null},...s._features.reduce((e,t)=>Object.assign(e,null==t.getDefaultColumnDef?void 0:t.getDefaultColumnDef()),{}),...e}},a(e,"debugColumns","_getDefaultColumnDef")),_getColumnDefs:()=>s.options.columns,getAllColumns:i(()=>[s._getColumnDefs()],e=>{let t=function(e,n,r){return void 0===r&&(r=0),e.map(e=>{let o=function(e,t,n,r){var o,s;let l,u={...e._getDefaultColumnDef(),...t},c=u.accessorKey,d=null!=(o=null!=(s=u.id)?s:c?"function"==typeof String.prototype.replaceAll?c.replaceAll(".","_"):c.replace(/\./g,"_"):void 0)?o:"string"==typeof u.header?u.header:void 0;if(u.accessorFn?l=u.accessorFn:c&&(l=c.includes(".")?e=>{let t=e;for(let e of c.split(".")){var n;t=null==(n=t)?void 0:n[e]}return t}:e=>e[u.accessorKey]),!d)throw Error();let h={id:"".concat(String(d)),accessorFn:l,parent:r,depth:n,columnDef:u,columns:[],getFlatColumns:i(()=>[!0],()=>{var e;return[h,...null==(e=h.columns)?void 0:e.flatMap(e=>e.getFlatColumns())]},a(e.options,"debugColumns","column.getFlatColumns")),getLeafColumns:i(()=>[e._getOrderColumnsFn()],e=>{var t;return null!=(t=h.columns)&&t.length?e(h.columns.flatMap(e=>e.getLeafColumns())):[h]},a(e.options,"debugColumns","column.getLeafColumns"))};for(let t of e._features)null==t.createColumn||t.createColumn(h,e);return h}(s,e,r,n);return o.columns=e.columns?t(e.columns,o,r+1):[],o})};return t(e)},a(e,"debugColumns","getAllColumns")),getAllFlatColumns:i(()=>[s.getAllColumns()],e=>e.flatMap(e=>e.getFlatColumns()),a(e,"debugColumns","getAllFlatColumns")),_getAllFlatColumnsById:i(()=>[s.getAllFlatColumns()],e=>e.reduce((e,t)=>(e[t.id]=t,e),{}),a(e,"debugColumns","getAllFlatColumnsById")),getAllLeafColumns:i(()=>[s.getAllColumns(),s._getOrderColumnsFn()],(e,t)=>t(e.flatMap(e=>e.getLeafColumns())),a(e,"debugColumns","getAllLeafColumns")),getColumn:e=>s._getAllFlatColumnsById()[e]};Object.assign(s,h);for(let e=0;e<s._features.length;e++){let t=s._features[e];null==t||null==t.createTable||t.createTable(s)}return s}function W(){return e=>i(()=>[e.options.data],t=>{let n={rows:[],flatRows:[],rowsById:{}},r=function(t,i,a){void 0===i&&(i=0);let o=[];for(let l=0;l<t.length;l++){let c=u(e,e._getRowId(t[l],l,a),t[l],l,i,void 0,null==a?void 0:a.id);if(n.flatRows.push(c),n.rowsById[c.id]=c,o.push(c),e.options.getSubRows){var s;c.originalSubRows=e.options.getSubRows(t[l],l),null!=(s=c.originalSubRows)&&s.length&&(c.subRows=r(c.originalSubRows,i+1,c))}}return o};return n.rows=r(t),n},a(e.options,"debugTable","getRowModel",()=>e._autoResetPageIndex()))}function V(){return e=>i(()=>[e.getState().expanded,e.getPreExpandedRowModel(),e.options.paginateExpandedRows],(e,t,n)=>t.rows.length&&(!0===e||Object.keys(null!=e?e:{}).length)&&n?function(e){let t=[],n=e=>{var r;t.push(e),null!=(r=e.subRows)&&r.length&&e.getIsExpanded()&&e.subRows.forEach(n)};return e.rows.forEach(n),{rows:t,flatRows:e.flatRows,rowsById:e.rowsById}}(t):t,a(e.options,"debugTable","getExpandedRowModel"))}function q(){return(e,t)=>i(()=>{var n;return[null==(n=e.getColumn(t))?void 0:n.getFacetedRowModel()]},e=>{if(!e)return;let n=e.flatRows.flatMap(e=>{var n;return null!=(n=e.getUniqueValues(t))?n:[]}).map(Number).filter(e=>!Number.isNaN(e));if(!n.length)return;let r=n[0],i=n[n.length-1];for(let e of n)e<r?r=e:e>i&&(i=e);return[r,i]},a(e.options,"debugTable","getFacetedMinMaxValues"))}function G(e,t,n){return n.options.filterFromLeafRows?function(e,t,n){var r;let i=[],a={},o=null!=(r=n.options.maxLeafRowFilterDepth)?r:100,s=function(e,r){void 0===r&&(r=0);let l=[];for(let d=0;d<e.length;d++){var c;let h=e[d],p=u(n,h.id,h.original,h.index,h.depth,void 0,h.parentId);if(p.columnFilters=h.columnFilters,null!=(c=h.subRows)&&c.length&&r<o){if(p.subRows=s(h.subRows,r+1),t(h=p)&&!p.subRows.length||t(h)||p.subRows.length){l.push(h),a[h.id]=h,i.push(h);continue}}else t(h=p)&&(l.push(h),a[h.id]=h,i.push(h))}return l};return{rows:s(e),flatRows:i,rowsById:a}}(e,t,n):function(e,t,n){var r;let i=[],a={},o=null!=(r=n.options.maxLeafRowFilterDepth)?r:100,s=function(e,r){void 0===r&&(r=0);let l=[];for(let d=0;d<e.length;d++){let h=e[d];if(t(h)){var c;if(null!=(c=h.subRows)&&c.length&&r<o){let e=u(n,h.id,h.original,h.index,h.depth,void 0,h.parentId);e.subRows=s(h.subRows,r+1),h=e}l.push(h),i.push(h),a[h.id]=h}}return l};return{rows:s(e),flatRows:i,rowsById:a}}(e,t,n)}function $(){return(e,t)=>i(()=>[e.getPreFilteredRowModel(),e.getState().columnFilters,e.getState().globalFilter,e.getFilteredRowModel()],(n,r,i)=>{if(!n.rows.length||!(null!=r&&r.length)&&!i)return n;let a=[...r.map(e=>e.id).filter(e=>e!==t),i?"__global__":void 0].filter(Boolean);return G(n.rows,e=>{for(let t=0;t<a.length;t++)if(!1===e.columnFilters[a[t]])return!1;return!0},e)},a(e.options,"debugTable","getFacetedRowModel"))}function K(){return(e,t)=>i(()=>{var n;return[null==(n=e.getColumn(t))?void 0:n.getFacetedRowModel()]},e=>{if(!e)return new Map;let n=new Map;for(let i=0;i<e.flatRows.length;i++){let a=e.flatRows[i].getUniqueValues(t);for(let e=0;e<a.length;e++){let t=a[e];if(n.has(t)){var r;n.set(t,(null!=(r=n.get(t))?r:0)+1)}else n.set(t,1)}}return n},a(e.options,"debugTable","getFacetedUniqueValues_".concat(t)))}function Y(){return e=>i(()=>[e.getPreFilteredRowModel(),e.getState().columnFilters,e.getState().globalFilter],(t,n,r)=>{let i,a;if(!t.rows.length||!(null!=n&&n.length)&&!r){for(let e=0;e<t.flatRows.length;e++)t.flatRows[e].columnFilters={},t.flatRows[e].columnFiltersMeta={};return t}let o=[],s=[];(null!=n?n:[]).forEach(t=>{var n;let r=e.getColumn(t.id);if(!r)return;let i=r.getFilterFn();i&&o.push({id:t.id,filterFn:i,resolvedValue:null!=(n=null==i.resolveFilterValue?void 0:i.resolveFilterValue(t.value))?n:t.value})});let l=(null!=n?n:[]).map(e=>e.id),u=e.getGlobalFilterFn(),c=e.getAllLeafColumns().filter(e=>e.getCanGlobalFilter());r&&u&&c.length&&(l.push("__global__"),c.forEach(e=>{var t;s.push({id:e.id,filterFn:u,resolvedValue:null!=(t=null==u.resolveFilterValue?void 0:u.resolveFilterValue(r))?t:r})}));for(let e=0;e<t.flatRows.length;e++){let n=t.flatRows[e];if(n.columnFilters={},o.length)for(let e=0;e<o.length;e++){let t=(i=o[e]).id;n.columnFilters[t]=i.filterFn(n,t,i.resolvedValue,e=>{n.columnFiltersMeta[t]=e})}if(s.length){for(let e=0;e<s.length;e++){let t=(a=s[e]).id;if(a.filterFn(n,t,a.resolvedValue,e=>{n.columnFiltersMeta[t]=e})){n.columnFilters.__global__=!0;break}}!0!==n.columnFilters.__global__&&(n.columnFilters.__global__=!1)}}return G(t.rows,e=>{for(let t=0;t<l.length;t++)if(!1===e.columnFilters[l[t]])return!1;return!0},e)},a(e.options,"debugTable","getFilteredRowModel",()=>e._autoResetPageIndex()))}function X(){return e=>i(()=>[e.getState().sorting,e.getPreSortedRowModel()],(t,n)=>{if(!n.rows.length||!(null!=t&&t.length))return n;let r=e.getState().sorting,i=[],a=r.filter(t=>{var n;return null==(n=e.getColumn(t.id))?void 0:n.getCanSort()}),o={};a.forEach(t=>{let n=e.getColumn(t.id);n&&(o[t.id]={sortUndefined:n.columnDef.sortUndefined,invertSorting:n.columnDef.invertSorting,sortingFn:n.getSortingFn()})});let s=e=>{let t=e.map(e=>({...e}));return t.sort((e,t)=>{for(let r=0;r<a.length;r+=1){var n;let i=a[r],s=o[i.id],l=s.sortUndefined,u=null!=(n=null==i?void 0:i.desc)&&n,c=0;if(l){let n=e.getValue(i.id),r=t.getValue(i.id),a=void 0===n,o=void 0===r;if(a||o){if("first"===l)return a?-1:1;if("last"===l)return a?1:-1;c=a&&o?0:a?l:-l}}if(0===c&&(c=s.sortingFn(e,t,i.id)),0!==c)return u&&(c*=-1),s.invertSorting&&(c*=-1),c}return e.index-t.index}),t.forEach(e=>{var t;i.push(e),null!=(t=e.subRows)&&t.length&&(e.subRows=s(e.subRows))}),t};return{rows:s(n.rows),flatRows:i,rowsById:n.rowsById}},a(e.options,"debugTable","getSortedRowModel",()=>e._autoResetPageIndex()))}},878969:e=>{"use strict";e.s({flexRender:()=>r,useReactTable:()=>i});var t=e.i(373150),n=e.i(78015);function r(e,n){var r,i,a;return e?"function"==typeof(i=r=e)&&(()=>{let e=Object.getPrototypeOf(i);return e.prototype&&e.prototype.isReactComponent})()||"function"==typeof r||"object"==typeof(a=r)&&"symbol"==typeof a.$$typeof&&["react.memo","react.forward_ref"].includes(a.$$typeof.description)?t.createElement(e,n):e:null}function i(e){let r={state:{},onStateChange:()=>{},renderFallbackValue:null,...e},[i]=t.useState(()=>({current:(0,n.createTable)(r)})),[a,o]=t.useState(()=>i.current.initialState);return i.current.setOptions(t=>({...t,...e,state:{...a,...e.state},onStateChange:t=>{o(t),null==e.onStateChange||e.onStateChange(t)}})),i.current}},820799:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},334232:e=>{"use strict";e.s({CalendarIcon:()=>t.default});var t=e.i(820799)},778231:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("sliders-horizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]])},611988:e=>{"use strict";e.s({SlidersHorizontal:()=>t.default});var t=e.i(778231)},472302:e=>{"use strict";e.s({}),Symbol.for("constructDateFrom")},980648:e=>{"use strict";e.s({tzOffset:()=>r});let t={},n={};function r(e,r){try{let i=(t[e]||(t[e]=new Intl.DateTimeFormat("en-GB",{timeZone:e,hour:"numeric",timeZoneName:"longOffset"}).format))(r).split("GMT")[1]||"";if(i in n)return n[i];return a(i,i.split(":"))}catch(r){if(e in n)return n[e];let t=null==e?void 0:e.match(i);if(t)return a(e,t.slice(1));return NaN}}let i=/([+-]\d\d):?(\d\d)?/;function a(e,t){let r=+t[0],i=+(t[1]||0);return n[e]=r>0?60*r+i:60*r-i}},116145:e=>{"use strict";e.s({TZDateMini:()=>n});var t=e.i(980648);class n extends Date{static tz(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return r.length?new n(...r,e):new n(Date.now(),e)}withTimeZone(e){return new n(+this,e)}getTimezoneOffset(){return-(0,t.tzOffset)(this.timeZone,this)}setTime(e){return Date.prototype.setTime.apply(this,arguments),i(this),+this}[Symbol.for("constructDateFrom")](e){return new n(+new Date(e),this.timeZone)}constructor(...e){super(),e.length>1&&"string"==typeof e[e.length-1]&&(this.timeZone=e.pop()),this.internal=new Date,isNaN((0,t.tzOffset)(this.timeZone,this))?this.setTime(NaN):e.length?"number"==typeof e[0]&&(1===e.length||2===e.length&&"number"!=typeof e[1])?this.setTime(e[0]):"string"==typeof e[0]?this.setTime(+new Date(e[0])):e[0]instanceof Date?this.setTime(+e[0]):(this.setTime(+new Date(...e)),a(this,NaN),i(this)):this.setTime(Date.now())}}let r=/^(get|set)(?!UTC)/;function i(e){e.internal.setTime(+e),e.internal.setUTCMinutes(e.internal.getUTCMinutes()-e.getTimezoneOffset())}function a(e){let n=(0,t.tzOffset)(e.timeZone,e),r=new Date(+e);r.setUTCHours(r.getUTCHours()-1);let i=-new Date(+e).getTimezoneOffset(),a=i- -new Date(+r).getTimezoneOffset(),o=Date.prototype.getHours.apply(e)!==e.internal.getUTCHours();a&&o&&e.internal.setUTCMinutes(e.internal.getUTCMinutes()+a);let s=i-n;s&&Date.prototype.setUTCMinutes.call(e,Date.prototype.getUTCMinutes.call(e)+s);let l=(0,t.tzOffset)(e.timeZone,e),u=-new Date(+e).getTimezoneOffset()-l-s;if(l!==n&&u){Date.prototype.setUTCMinutes.call(e,Date.prototype.getUTCMinutes.call(e)+u);let n=l-(0,t.tzOffset)(e.timeZone,e);n&&(e.internal.setUTCMinutes(e.internal.getUTCMinutes()+n),Date.prototype.setUTCMinutes.call(e,Date.prototype.getUTCMinutes.call(e)+n))}}Object.getOwnPropertyNames(Date.prototype).forEach(e=>{if(!r.test(e))return;let t=e.replace(r,"$1UTC");n.prototype[t]&&(e.startsWith("get")?n.prototype[e]=function(){return this.internal[t]()}:(n.prototype[e]=function(){var e;return Date.prototype[t].apply(this.internal,arguments),e=this,Date.prototype.setFullYear.call(e,e.internal.getUTCFullYear(),e.internal.getUTCMonth(),e.internal.getUTCDate()),Date.prototype.setHours.call(e,e.internal.getUTCHours(),e.internal.getUTCMinutes(),e.internal.getUTCSeconds(),e.internal.getUTCMilliseconds()),a(e),+this},n.prototype[t]=function(){return Date.prototype[t].apply(this,arguments),i(this),+this}))})},64651:e=>{"use strict";e.s({TZDate:()=>n});var t=e.i(116145);class n extends t.TZDateMini{static tz(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return r.length?new n(...r,e):new n(Date.now(),e)}toISOString(){let[e,t,n]=this.tzComponents(),r="".concat(e).concat(t,":").concat(n);return this.internal.toISOString().slice(0,-1)+r}toString(){return"".concat(this.toDateString()," ").concat(this.toTimeString())}toDateString(){let[e,t,n,r]=this.internal.toUTCString().split(" ");return"".concat(null==e?void 0:e.slice(0,-1)," ").concat(n," ").concat(t," ").concat(r)}toTimeString(){var e,t;let n=this.internal.toUTCString().split(" ")[4],[r,i,a]=this.tzComponents();return"".concat(n," GMT").concat(r).concat(i).concat(a," (").concat((e=this.timeZone,t=this,new Intl.DateTimeFormat("en-GB",{timeZone:e,timeZoneName:"long"}).format(t).slice(12)),")")}toLocaleString(e,t){return Date.prototype.toLocaleString.call(this,e,{...t,timeZone:(null==t?void 0:t.timeZone)||this.timeZone})}toLocaleDateString(e,t){return Date.prototype.toLocaleDateString.call(this,e,{...t,timeZone:(null==t?void 0:t.timeZone)||this.timeZone})}toLocaleTimeString(e,t){return Date.prototype.toLocaleTimeString.call(this,e,{...t,timeZone:(null==t?void 0:t.timeZone)||this.timeZone})}tzComponents(){let e=this.getTimezoneOffset(),t=String(Math.floor(Math.abs(e)/60)).padStart(2,"0"),n=String(Math.abs(e)%60).padStart(2,"0");return[e>0?"-":"+",t,n]}withTimeZone(e){return new n(+this,e)}[Symbol.for("constructDateFrom")](e){return new n(+new Date(e),this.timeZone)}}},301776:e=>{"use strict";e.s({}),e.i(64651)},152322:e=>{"use strict";e.s({}),e.i(980648)},980682:e=>{"use strict";e.s({}),e.i(472302),e.i(64651),e.i(116145),e.i(301776),e.i(980648),e.i(152322)},223161:e=>{"use strict";e.s({}),e.i(472302),e.i(64651),e.i(116145),e.i(301776),e.i(980648),e.i(152322),e.i(980682)},943940:e=>{"use strict";var t,n,r,i;e.s({Animation:()=>i,DayFlag:()=>n,SelectionState:()=>r,UI:()=>t}),function(e){e.Root="root",e.Chevron="chevron",e.Day="day",e.DayButton="day_button",e.CaptionLabel="caption_label",e.Dropdowns="dropdowns",e.Dropdown="dropdown",e.DropdownRoot="dropdown_root",e.Footer="footer",e.MonthGrid="month_grid",e.MonthCaption="month_caption",e.MonthsDropdown="months_dropdown",e.Month="month",e.Months="months",e.Nav="nav",e.NextMonthButton="button_next",e.PreviousMonthButton="button_previous",e.Week="week",e.Weeks="weeks",e.Weekday="weekday",e.Weekdays="weekdays",e.WeekNumber="week_number",e.WeekNumberHeader="week_number_header",e.YearsDropdown="years_dropdown"}(t||(t={})),function(e){e.disabled="disabled",e.hidden="hidden",e.outside="outside",e.focused="focused",e.today="today"}(n||(n={})),function(e){e.range_end="range_end",e.range_middle="range_middle",e.range_start="range_start",e.selected="selected"}(r||(r={})),function(e){e.weeks_before_enter="weeks_before_enter",e.weeks_before_exit="weeks_before_exit",e.weeks_after_enter="weeks_after_enter",e.weeks_after_exit="weeks_after_exit",e.caption_after_enter="caption_after_enter",e.caption_after_exit="caption_after_exit",e.caption_before_enter="caption_before_enter",e.caption_before_exit="caption_before_exit"}(i||(i={}))},701118:e=>{"use strict";e.s({constructFromSymbol:()=>r,millisecondsInDay:()=>n,millisecondsInWeek:()=>t});let t=6048e5,n=864e5,r=Symbol.for("constructDateFrom")},52850:e=>{"use strict";e.s({constructFrom:()=>n});var t=e.i(701118);function n(e,n){return"function"==typeof e?e(n):e&&"object"==typeof e&&t.constructFromSymbol in e?e[t.constructFromSymbol](n):e instanceof Date?new e.constructor(n):new Date(n)}},831155:e=>{"use strict";e.s({toDate:()=>n});var t=e.i(52850);function n(e,n){return(0,t.constructFrom)(n||e,e)}},112807:e=>{"use strict";e.s({addDays:()=>r});var t=e.i(52850),n=e.i(831155);function r(e,r,i){let a=(0,n.toDate)(e,null==i?void 0:i.in);return isNaN(r)?(0,t.constructFrom)((null==i?void 0:i.in)||e,NaN):(r&&a.setDate(a.getDate()+r),a)}},693874:e=>{"use strict";e.s({addMonths:()=>r});var t=e.i(52850),n=e.i(831155);function r(e,r,i){let a=(0,n.toDate)(e,null==i?void 0:i.in);if(isNaN(r))return(0,t.constructFrom)((null==i?void 0:i.in)||e,NaN);if(!r)return a;let o=a.getDate(),s=(0,t.constructFrom)((null==i?void 0:i.in)||e,a.getTime());return(s.setMonth(a.getMonth()+r+1,0),o>=s.getDate())?s:(a.setFullYear(s.getFullYear(),s.getMonth(),o),a)}},212425:e=>{"use strict";e.s({addWeeks:()=>n});var t=e.i(112807);function n(e,n,r){return(0,t.addDays)(e,7*n,r)}},730540:e=>{"use strict";e.s({addYears:()=>n});var t=e.i(693874);function n(e,n,r){return(0,t.addMonths)(e,12*n,r)}},457136:e=>{"use strict";e.s({getTimezoneOffsetInMilliseconds:()=>n});var t=e.i(831155);function n(e){let n=(0,t.toDate)(e),r=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return r.setUTCFullYear(n.getFullYear()),e-r}},283680:e=>{"use strict";e.s({normalizeDates:()=>n});var t=e.i(52850);function n(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];let a=t.constructFrom.bind(null,e||r.find(e=>"object"==typeof e));return r.map(a)}},503120:e=>{"use strict";e.s({startOfDay:()=>n});var t=e.i(831155);function n(e,n){let r=(0,t.toDate)(e,null==n?void 0:n.in);return r.setHours(0,0,0,0),r}},662845:e=>{"use strict";e.s({differenceInCalendarDays:()=>a});var t=e.i(457136),n=e.i(283680),r=e.i(701118),i=e.i(503120);function a(e,a,o){let[s,l]=(0,n.normalizeDates)(null==o?void 0:o.in,e,a),u=(0,i.startOfDay)(s),c=(0,i.startOfDay)(l);return Math.round((u-(0,t.getTimezoneOffsetInMilliseconds)(u)-(c-(0,t.getTimezoneOffsetInMilliseconds)(c)))/r.millisecondsInDay)}},106005:e=>{"use strict";e.s({differenceInCalendarMonths:()=>n});var t=e.i(283680);function n(e,n,r){let[i,a]=(0,t.normalizeDates)(null==r?void 0:r.in,e,n);return 12*(i.getFullYear()-a.getFullYear())+(i.getMonth()-a.getMonth())}},304761:e=>{"use strict";e.s({normalizeInterval:()=>n});var t=e.i(283680);function n(e,n){let[r,i]=(0,t.normalizeDates)(e,n.start,n.end);return{start:r,end:i}}},536942:e=>{"use strict";e.s({eachMonthOfInterval:()=>r});var t=e.i(304761),n=e.i(52850);function r(e,r){var i;let{start:a,end:o}=(0,t.normalizeInterval)(null==r?void 0:r.in,e),s=+a>+o,l=s?+a:+o,u=s?o:a;u.setHours(0,0,0,0),u.setDate(1);let c=null!=(i=null==r?void 0:r.step)?i:1;if(!c)return[];c<0&&(c=-c,s=!s);let d=[];for(;+u<=l;)d.push((0,n.constructFrom)(a,u)),u.setMonth(u.getMonth()+c);return s?d.reverse():d}},465861:e=>{"use strict";e.s({getDefaultOptions:()=>n});let t={};function n(){return t}},460281:e=>{"use strict";e.s({endOfWeek:()=>r});var t=e.i(465861),n=e.i(831155);function r(e,r){var i,a,o,s,l,u,c,d;let h=(0,t.getDefaultOptions)(),p=null!=(d=null!=(c=null!=(u=null!=(l=null==r?void 0:r.weekStartsOn)?l:null==r||null==(a=r.locale)||null==(i=a.options)?void 0:i.weekStartsOn)?u:h.weekStartsOn)?c:null==(s=h.locale)||null==(o=s.options)?void 0:o.weekStartsOn)?d:0,f=(0,n.toDate)(e,null==r?void 0:r.in),m=f.getDay();return f.setDate(f.getDate()+((m<p?-7:0)+6-(m-p))),f.setHours(23,59,59,999),f}},899138:e=>{"use strict";e.s({endOfISOWeek:()=>n});var t=e.i(460281);function n(e,n){return(0,t.endOfWeek)(e,{...n,weekStartsOn:1})}},990461:e=>{"use strict";e.s({endOfMonth:()=>n});var t=e.i(831155);function n(e,n){let r=(0,t.toDate)(e,null==n?void 0:n.in),i=r.getMonth();return r.setFullYear(r.getFullYear(),i+1,0),r.setHours(23,59,59,999),r}},250652:e=>{"use strict";e.s({endOfYear:()=>n});var t=e.i(831155);function n(e,n){let r=(0,t.toDate)(e,null==n?void 0:n.in),i=r.getFullYear();return r.setFullYear(i+1,0,0),r.setHours(23,59,59,999),r}},844075:e=>{"use strict";e.s({formatDistance:()=>n});let t={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},n=(e,n,r)=>{let i,a=t[e];if(i="string"==typeof a?a:1===n?a.one:a.other.replace("{{count}}",n.toString()),null==r?void 0:r.addSuffix)if(r.comparison&&r.comparison>0)return"in "+i;else return i+" ago";return i}},908018:e=>{"use strict";function t(e){return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}e.s({buildFormatLongFn:()=>t})},124244:e=>{"use strict";e.s({formatLong:()=>n});var t=e.i(908018);let n={date:(0,t.buildFormatLongFn)({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:(0,t.buildFormatLongFn)({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:(0,t.buildFormatLongFn)({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})}},382679:e=>{"use strict";e.s({formatRelative:()=>n});let t={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},n=(e,n,r,i)=>t[e]},163682:e=>{"use strict";function t(e){return(t,n)=>{let r;if("formatting"===((null==n?void 0:n.context)?String(n.context):"standalone")&&e.formattingValues){let t=e.defaultFormattingWidth||e.defaultWidth,i=(null==n?void 0:n.width)?String(n.width):t;r=e.formattingValues[i]||e.formattingValues[t]}else{let t=e.defaultWidth,i=(null==n?void 0:n.width)?String(n.width):e.defaultWidth;r=e.values[i]||e.values[t]}return r[e.argumentCallback?e.argumentCallback(t):t]}}e.s({buildLocalizeFn:()=>t})},321339:e=>{"use strict";e.s({localize:()=>n});var t=e.i(163682);let n={ordinalNumber:(e,t)=>{let n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:(0,t.buildLocalizeFn)({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:(0,t.buildLocalizeFn)({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:(0,t.buildLocalizeFn)({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:(0,t.buildLocalizeFn)({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:(0,t.buildLocalizeFn)({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})}},116804:e=>{"use strict";function t(e){return function(t){let n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.width,a=i&&e.matchPatterns[i]||e.matchPatterns[e.defaultMatchWidth],o=t.match(a);if(!o)return null;let s=o[0],l=i&&e.parsePatterns[i]||e.parsePatterns[e.defaultParseWidth],u=Array.isArray(l)?function(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}(l,e=>e.test(s)):function(e,t){for(let n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}(l,e=>e.test(s));return n=e.valueCallback?e.valueCallback(u):u,{value:n=r.valueCallback?r.valueCallback(n):n,rest:t.slice(s.length)}}}e.s({buildMatchFn:()=>t})},484823:e=>{"use strict";function t(e){return function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.match(e.matchPattern);if(!r)return null;let i=r[0],a=t.match(e.parsePattern);if(!a)return null;let o=e.valueCallback?e.valueCallback(a[0]):a[0];return{value:o=n.valueCallback?n.valueCallback(o):o,rest:t.slice(i.length)}}}e.s({buildMatchPatternFn:()=>t})},430959:e=>{"use strict";e.s({match:()=>n});var t=e.i(116804);let n={ordinalNumber:(0,e.i(484823).buildMatchPatternFn)({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)}),era:(0,t.buildMatchFn)({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:(0,t.buildMatchFn)({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:(0,t.buildMatchFn)({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:(0,t.buildMatchFn)({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:(0,t.buildMatchFn)({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})}},974282:e=>{"use strict";e.s({enUS:()=>o});var t=e.i(844075),n=e.i(124244),r=e.i(382679),i=e.i(321339),a=e.i(430959);let o={code:"en-US",formatDistance:t.formatDistance,formatLong:n.formatLong,formatRelative:r.formatRelative,localize:i.localize,match:a.match,options:{weekStartsOn:0,firstWeekContainsDate:1}}},689206:e=>{"use strict";e.s({defaultLocale:()=>t.enUS});var t=e.i(974282)},288679:e=>{"use strict";e.s({startOfYear:()=>n});var t=e.i(831155);function n(e,n){let r=(0,t.toDate)(e,null==n?void 0:n.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}},564550:e=>{"use strict";e.s({getDayOfYear:()=>i});var t=e.i(662845),n=e.i(288679),r=e.i(831155);function i(e,i){let a=(0,r.toDate)(e,null==i?void 0:i.in);return(0,t.differenceInCalendarDays)(a,(0,n.startOfYear)(a))+1}},824499:e=>{"use strict";e.s({startOfWeek:()=>r});var t=e.i(465861),n=e.i(831155);function r(e,r){var i,a,o,s,l,u,c,d;let h=(0,t.getDefaultOptions)(),p=null!=(d=null!=(c=null!=(u=null!=(l=null==r?void 0:r.weekStartsOn)?l:null==r||null==(a=r.locale)||null==(i=a.options)?void 0:i.weekStartsOn)?u:h.weekStartsOn)?c:null==(s=h.locale)||null==(o=s.options)?void 0:o.weekStartsOn)?d:0,f=(0,n.toDate)(e,null==r?void 0:r.in),m=f.getDay();return f.setDate(f.getDate()-(7*(m<p)+m-p)),f.setHours(0,0,0,0),f}},858099:e=>{"use strict";e.s({startOfISOWeek:()=>n});var t=e.i(824499);function n(e,n){return(0,t.startOfWeek)(e,{...n,weekStartsOn:1})}},461910:e=>{"use strict";e.s({getISOWeekYear:()=>i});var t=e.i(52850),n=e.i(858099),r=e.i(831155);function i(e,i){let a=(0,r.toDate)(e,null==i?void 0:i.in),o=a.getFullYear(),s=(0,t.constructFrom)(a,0);s.setFullYear(o+1,0,4),s.setHours(0,0,0,0);let l=(0,n.startOfISOWeek)(s),u=(0,t.constructFrom)(a,0);u.setFullYear(o,0,4),u.setHours(0,0,0,0);let c=(0,n.startOfISOWeek)(u);return a.getTime()>=l.getTime()?o+1:a.getTime()>=c.getTime()?o:o-1}},214606:e=>{"use strict";e.s({startOfISOWeekYear:()=>i});var t=e.i(52850),n=e.i(461910),r=e.i(858099);function i(e,i){let a=(0,n.getISOWeekYear)(e,i),o=(0,t.constructFrom)((null==i?void 0:i.in)||e,0);return o.setFullYear(a,0,4),o.setHours(0,0,0,0),(0,r.startOfISOWeek)(o)}},680616:e=>{"use strict";e.s({getISOWeek:()=>a});var t=e.i(701118),n=e.i(858099),r=e.i(214606),i=e.i(831155);function a(e,a){let o=(0,i.toDate)(e,null==a?void 0:a.in);return Math.round(((0,n.startOfISOWeek)(o)-(0,r.startOfISOWeekYear)(o))/t.millisecondsInWeek)+1}},5576:e=>{"use strict";e.s({getWeekYear:()=>a});var t=e.i(465861),n=e.i(52850),r=e.i(824499),i=e.i(831155);function a(e,a){var o,s,l,u,c,d,h,p;let f=(0,i.toDate)(e,null==a?void 0:a.in),m=f.getFullYear(),g=(0,t.getDefaultOptions)(),y=null!=(p=null!=(h=null!=(d=null!=(c=null==a?void 0:a.firstWeekContainsDate)?c:null==a||null==(s=a.locale)||null==(o=s.options)?void 0:o.firstWeekContainsDate)?d:g.firstWeekContainsDate)?h:null==(u=g.locale)||null==(l=u.options)?void 0:l.firstWeekContainsDate)?p:1,b=(0,n.constructFrom)((null==a?void 0:a.in)||e,0);b.setFullYear(m+1,0,y),b.setHours(0,0,0,0);let x=(0,r.startOfWeek)(b,a),w=(0,n.constructFrom)((null==a?void 0:a.in)||e,0);w.setFullYear(m,0,y),w.setHours(0,0,0,0);let k=(0,r.startOfWeek)(w,a);return+f>=+x?m+1:+f>=+k?m:m-1}},146757:e=>{"use strict";e.s({startOfWeekYear:()=>a});var t=e.i(465861),n=e.i(52850),r=e.i(5576),i=e.i(824499);function a(e,a){var o,s,l,u,c,d,h,p;let f=(0,t.getDefaultOptions)(),m=null!=(p=null!=(h=null!=(d=null!=(c=null==a?void 0:a.firstWeekContainsDate)?c:null==a||null==(s=a.locale)||null==(o=s.options)?void 0:o.firstWeekContainsDate)?d:f.firstWeekContainsDate)?h:null==(u=f.locale)||null==(l=u.options)?void 0:l.firstWeekContainsDate)?p:1,g=(0,r.getWeekYear)(e,a),y=(0,n.constructFrom)((null==a?void 0:a.in)||e,0);return y.setFullYear(g,0,m),y.setHours(0,0,0,0),(0,i.startOfWeek)(y,a)}},66846:e=>{"use strict";e.s({getWeek:()=>a});var t=e.i(701118),n=e.i(824499),r=e.i(146757),i=e.i(831155);function a(e,a){let o=(0,i.toDate)(e,null==a?void 0:a.in);return Math.round(((0,n.startOfWeek)(o,a)-(0,r.startOfWeekYear)(o,a))/t.millisecondsInWeek)+1}},613171:e=>{"use strict";function t(e,t){let n=Math.abs(e).toString().padStart(t,"0");return(e<0?"-":"")+n}e.s({addLeadingZeros:()=>t})},61119:e=>{"use strict";e.s({lightFormatters:()=>n});var t=e.i(613171);let n={y(e,n){let r=e.getFullYear(),i=r>0?r:1-r;return(0,t.addLeadingZeros)("yy"===n?i%100:i,n.length)},M(e,n){let r=e.getMonth();return"M"===n?String(r+1):(0,t.addLeadingZeros)(r+1,2)},d:(e,n)=>(0,t.addLeadingZeros)(e.getDate(),n.length),a(e,t){let n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:(e,n)=>(0,t.addLeadingZeros)(e.getHours()%12||12,n.length),H:(e,n)=>(0,t.addLeadingZeros)(e.getHours(),n.length),m:(e,n)=>(0,t.addLeadingZeros)(e.getMinutes(),n.length),s:(e,n)=>(0,t.addLeadingZeros)(e.getSeconds(),n.length),S(e,n){let r=n.length,i=Math.trunc(e.getMilliseconds()*Math.pow(10,r-3));return(0,t.addLeadingZeros)(i,n.length)}}},433e3:e=>{"use strict";e.s({formatters:()=>u});var t=e.i(564550),n=e.i(680616),r=e.i(461910),i=e.i(66846),a=e.i(5576),o=e.i(613171),s=e.i(61119);let l={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},u={G:function(e,t,n){let r=+(e.getFullYear()>0);switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){let t=e.getFullYear();return n.ordinalNumber(t>0?t:1-t,{unit:"year"})}return s.lightFormatters.y(e,t)},Y:function(e,t,n,r){let i=(0,a.getWeekYear)(e,r),s=i>0?i:1-i;if("YY"===t){let e=s%100;return(0,o.addLeadingZeros)(e,2)}return"Yo"===t?n.ordinalNumber(s,{unit:"year"}):(0,o.addLeadingZeros)(s,t.length)},R:function(e,t){let n=(0,r.getISOWeekYear)(e);return(0,o.addLeadingZeros)(n,t.length)},u:function(e,t){let n=e.getFullYear();return(0,o.addLeadingZeros)(n,t.length)},Q:function(e,t,n){let r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return(0,o.addLeadingZeros)(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){let r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return(0,o.addLeadingZeros)(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){let r=e.getMonth();switch(t){case"M":case"MM":return s.lightFormatters.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){let r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return(0,o.addLeadingZeros)(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){let a=(0,i.getWeek)(e,r);return"wo"===t?n.ordinalNumber(a,{unit:"week"}):(0,o.addLeadingZeros)(a,t.length)},I:function(e,t,r){let i=(0,n.getISOWeek)(e);return"Io"===t?r.ordinalNumber(i,{unit:"week"}):(0,o.addLeadingZeros)(i,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getDate(),{unit:"date"}):s.lightFormatters.d(e,t)},D:function(e,n,r){let i=(0,t.getDayOfYear)(e);return"Do"===n?r.ordinalNumber(i,{unit:"dayOfYear"}):(0,o.addLeadingZeros)(i,n.length)},E:function(e,t,n){let r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){let i=e.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return(0,o.addLeadingZeros)(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){let i=e.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return(0,o.addLeadingZeros)(a,t.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){let r=e.getDay(),i=0===r?7:r;switch(t){case"i":return String(i);case"ii":return(0,o.addLeadingZeros)(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){let r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){let r,i=e.getHours();switch(r=12===i?l.noon:0===i?l.midnight:i/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,n){let r,i=e.getHours();switch(r=i>=17?l.evening:i>=12?l.afternoon:i>=4?l.morning:l.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),n.ordinalNumber(t,{unit:"hour"})}return s.lightFormatters.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getHours(),{unit:"hour"}):s.lightFormatters.H(e,t)},K:function(e,t,n){let r=e.getHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):(0,o.addLeadingZeros)(r,t.length)},k:function(e,t,n){let r=e.getHours();return(0===r&&(r=24),"ko"===t)?n.ordinalNumber(r,{unit:"hour"}):(0,o.addLeadingZeros)(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):s.lightFormatters.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getSeconds(),{unit:"second"}):s.lightFormatters.s(e,t)},S:function(e,t){return s.lightFormatters.S(e,t)},X:function(e,t,n){let r=e.getTimezoneOffset();if(0===r)return"Z";switch(t){case"X":return d(r);case"XXXX":case"XX":return h(r);default:return h(r,":")}},x:function(e,t,n){let r=e.getTimezoneOffset();switch(t){case"x":return d(r);case"xxxx":case"xx":return h(r);default:return h(r,":")}},O:function(e,t,n){let r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+c(r,":");default:return"GMT"+h(r,":")}},z:function(e,t,n){let r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+c(r,":");default:return"GMT"+h(r,":")}},t:function(e,t,n){let r=Math.trunc(e/1e3);return(0,o.addLeadingZeros)(r,t.length)},T:function(e,t,n){return(0,o.addLeadingZeros)(+e,t.length)}};function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=e>0?"-":"+",r=Math.abs(e),i=Math.trunc(r/60),a=r%60;return 0===a?n+String(i):n+String(i)+t+(0,o.addLeadingZeros)(a,2)}function d(e,t){return e%60==0?(e>0?"-":"+")+(0,o.addLeadingZeros)(Math.abs(e)/60,2):h(e,t)}function h(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=Math.abs(e);return(e>0?"-":"+")+(0,o.addLeadingZeros)(Math.trunc(n/60),2)+t+(0,o.addLeadingZeros)(n%60,2)}},625209:e=>{"use strict";e.s({longFormatters:()=>r});let t=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},n=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},r={p:n,P:(e,r)=>{let i,a=e.match(/(P+)(p+)?/)||[],o=a[1],s=a[2];if(!s)return t(e,r);switch(o){case"P":i=r.dateTime({width:"short"});break;case"PP":i=r.dateTime({width:"medium"});break;case"PPP":i=r.dateTime({width:"long"});break;default:i=r.dateTime({width:"full"})}return i.replace("{{date}}",t(o,r)).replace("{{time}}",n(s,r))}}},553199:e=>{"use strict";e.s({isProtectedDayOfYearToken:()=>i,isProtectedWeekYearToken:()=>a,warnOrThrowProtectedError:()=>o});let t=/^D+$/,n=/^Y+$/,r=["D","DD","YY","YYYY"];function i(e){return t.test(e)}function a(e){return n.test(e)}function o(e,t,n){let i=function(e,t,n){let r="Y"===e[0]?"years":"days of the month";return"Use `".concat(e.toLowerCase(),"` instead of `").concat(e,"` (in `").concat(t,"`) for formatting ").concat(r," to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md")}(e,t,n);if(console.warn(i),r.includes(e))throw RangeError(i)}},552673:e=>{"use strict";function t(e){return e instanceof Date||"object"==typeof e&&"[object Date]"===Object.prototype.toString.call(e)}e.s({isDate:()=>t})},908825:e=>{"use strict";e.s({isValid:()=>r});var t=e.i(552673),n=e.i(831155);function r(e){return!(!(0,t.isDate)(e)&&"number"!=typeof e||isNaN(+(0,n.toDate)(e)))}},41174:e=>{"use strict";e.s({format:()=>p});var t=e.i(689206),n=e.i(465861),r=e.i(433e3),i=e.i(625209),a=e.i(553199),o=e.i(908825),s=e.i(831155);let l=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,u=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,c=/^'([^]*?)'?$/,d=/''/g,h=/[a-zA-Z]/;function p(e,p,f){var m,g,y,b,x,w,k,S,_,C,A,E,T,M,I,N,D,P;let R=(0,n.getDefaultOptions)(),O=null!=(C=null!=(_=null==f?void 0:f.locale)?_:R.locale)?C:t.defaultLocale,j=null!=(M=null!=(T=null!=(E=null!=(A=null==f?void 0:f.firstWeekContainsDate)?A:null==f||null==(g=f.locale)||null==(m=g.options)?void 0:m.firstWeekContainsDate)?E:R.firstWeekContainsDate)?T:null==(b=R.locale)||null==(y=b.options)?void 0:y.firstWeekContainsDate)?M:1,F=null!=(P=null!=(D=null!=(N=null!=(I=null==f?void 0:f.weekStartsOn)?I:null==f||null==(w=f.locale)||null==(x=w.options)?void 0:x.weekStartsOn)?N:R.weekStartsOn)?D:null==(S=R.locale)||null==(k=S.options)?void 0:k.weekStartsOn)?P:0,L=(0,s.toDate)(e,null==f?void 0:f.in);if(!(0,o.isValid)(L))throw RangeError("Invalid time value");let z=p.match(u).map(e=>{let t=e[0];return"p"===t||"P"===t?(0,i.longFormatters[t])(e,O.formatLong):e}).join("").match(l).map(e=>{if("''"===e)return{isToken:!1,value:"'"};let t=e[0];if("'"===t)return{isToken:!1,value:function(e){let t=e.match(c);return t?t[1].replace(d,"'"):e}(e)};if(r.formatters[t])return{isToken:!0,value:e};if(t.match(h))throw RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}});O.localize.preprocessor&&(z=O.localize.preprocessor(L,z));let B={firstWeekContainsDate:j,weekStartsOn:F,locale:O};return z.map(t=>{if(!t.isToken)return t.value;let n=t.value;return(!(null==f?void 0:f.useAdditionalWeekYearTokens)&&(0,a.isProtectedWeekYearToken)(n)||!(null==f?void 0:f.useAdditionalDayOfYearTokens)&&(0,a.isProtectedDayOfYearToken)(n))&&(0,a.warnOrThrowProtectedError)(n,p,String(e)),(0,r.formatters[n[0]])(L,n,O.localize,B)}).join("")}},97573:e=>{"use strict";e.s({getMonth:()=>n});var t=e.i(831155);function n(e,n){return(0,t.toDate)(e,null==n?void 0:n.in).getMonth()}},476481:e=>{"use strict";e.s({getYear:()=>n});var t=e.i(831155);function n(e,n){return(0,t.toDate)(e,null==n?void 0:n.in).getFullYear()}},572182:e=>{"use strict";e.s({isAfter:()=>n});var t=e.i(831155);function n(e,n){return+(0,t.toDate)(e)>+(0,t.toDate)(n)}},81150:e=>{"use strict";e.s({isBefore:()=>n});var t=e.i(831155);function n(e,n){return+(0,t.toDate)(e)<+(0,t.toDate)(n)}},361866:e=>{"use strict";e.s({isSameDay:()=>r});var t=e.i(283680),n=e.i(503120);function r(e,r,i){let[a,o]=(0,t.normalizeDates)(null==i?void 0:i.in,e,r);return+(0,n.startOfDay)(a)==+(0,n.startOfDay)(o)}},509433:e=>{"use strict";e.s({isSameMonth:()=>n});var t=e.i(283680);function n(e,n,r){let[i,a]=(0,t.normalizeDates)(null==r?void 0:r.in,e,n);return i.getFullYear()===a.getFullYear()&&i.getMonth()===a.getMonth()}},817720:e=>{"use strict";e.s({isSameYear:()=>n});var t=e.i(283680);function n(e,n,r){let[i,a]=(0,t.normalizeDates)(null==r?void 0:r.in,e,n);return i.getFullYear()===a.getFullYear()}},468440:e=>{"use strict";e.s({max:()=>r});var t=e.i(52850),n=e.i(831155);function r(e,r){let i,a=null==r?void 0:r.in;return e.forEach(e=>{a||"object"!=typeof e||(a=t.constructFrom.bind(null,e));let r=(0,n.toDate)(e,a);(!i||i<r||isNaN(+r))&&(i=r)}),(0,t.constructFrom)(a,i||NaN)}},496061:e=>{"use strict";e.s({min:()=>r});var t=e.i(52850),n=e.i(831155);function r(e,r){let i,a=null==r?void 0:r.in;return e.forEach(e=>{a||"object"!=typeof e||(a=t.constructFrom.bind(null,e));let r=(0,n.toDate)(e,a);(!i||i>r||isNaN(+r))&&(i=r)}),(0,t.constructFrom)(a,i||NaN)}},633933:e=>{"use strict";e.s({getDaysInMonth:()=>r});var t=e.i(52850),n=e.i(831155);function r(e,r){let i=(0,n.toDate)(e,null==r?void 0:r.in),a=i.getFullYear(),o=i.getMonth(),s=(0,t.constructFrom)(i,0);return s.setFullYear(a,o+1,0),s.setHours(0,0,0,0),s.getDate()}},139316:e=>{"use strict";e.s({setMonth:()=>i});var t=e.i(52850),n=e.i(633933),r=e.i(831155);function i(e,i,a){let o=(0,r.toDate)(e,null==a?void 0:a.in),s=o.getFullYear(),l=o.getDate(),u=(0,t.constructFrom)((null==a?void 0:a.in)||e,0);u.setFullYear(s,i,15),u.setHours(0,0,0,0);let c=(0,n.getDaysInMonth)(u);return o.setMonth(i,Math.min(l,c)),o}},302723:e=>{"use strict";e.s({setYear:()=>r});var t=e.i(52850),n=e.i(831155);function r(e,r,i){let a=(0,n.toDate)(e,null==i?void 0:i.in);return isNaN(+a)?(0,t.constructFrom)((null==i?void 0:i.in)||e,NaN):(a.setFullYear(r),a)}},266398:e=>{"use strict";e.s({startOfMonth:()=>n});var t=e.i(831155);function n(e,n){let r=(0,t.toDate)(e,null==n?void 0:n.in);return r.setDate(1),r.setHours(0,0,0,0),r}},874890:e=>{"use strict";function t(e,t){let n=t.startOfMonth(e),r=n.getDay()>0?n.getDay():7,i=t.addDays(e,-r+1),a=t.addDays(i,34);return t.getMonth(e)===t.getMonth(a)?5:4}e.s({getBroadcastWeeksInMonth:()=>t})},764340:e=>{"use strict";function t(e,t){let n=t.startOfMonth(e),r=n.getDay();return 1===r?n:0===r?t.addDays(n,-6):t.addDays(n,-1*(r-1))}e.s({startOfBroadcastWeek:()=>t})},578832:e=>{"use strict";e.s({endOfBroadcastWeek:()=>r});var t=e.i(874890),n=e.i(764340);function r(e,r){let i=(0,n.startOfBroadcastWeek)(e,r),a=(0,t.getBroadcastWeeksInMonth)(e,r);return r.addDays(i,7*a-1)}},28754:e=>{"use strict";e.s({DateLib:()=>F,defaultDateLib:()=>L}),e.i(223161);var t=e.i(64651),n=e.i(112807),r=e.i(693874),i=e.i(212425),a=e.i(730540),o=e.i(662845),s=e.i(106005),l=e.i(536942),u=e.i(899138),c=e.i(990461),d=e.i(460281),h=e.i(250652),p=e.i(41174),f=e.i(680616),m=e.i(97573),g=e.i(66846),y=e.i(476481),b=e.i(572182),x=e.i(81150),w=e.i(552673),k=e.i(361866),S=e.i(509433),_=e.i(817720),C=e.i(468440),A=e.i(496061),E=e.i(139316),T=e.i(302723),M=e.i(503120),I=e.i(858099),N=e.i(266398),D=e.i(824499),P=e.i(288679),R=e.i(974282),O=e.i(578832),j=e.i(764340);class F{getDigitMap(){let{numerals:e="latn"}=this.options,t=new Intl.NumberFormat("en-US",{numberingSystem:e}),n={};for(let e=0;e<10;e++)n[e.toString()]=t.format(e);return n}replaceDigits(e){let t=this.getDigitMap();return e.replace(/\d/g,e=>t[e]||e)}formatNumber(e){return this.replaceDigits(e.toString())}constructor(e,F){this.Date=Date,this.today=()=>{var e;return(null==(e=this.overrides)?void 0:e.today)?this.overrides.today():this.options.timeZone?t.TZDate.tz(this.options.timeZone):new this.Date},this.newDate=(e,n,r)=>{var i;return(null==(i=this.overrides)?void 0:i.newDate)?this.overrides.newDate(e,n,r):this.options.timeZone?new t.TZDate(e,n,r,this.options.timeZone):new Date(e,n,r)},this.addDays=(e,t)=>{var r;return(null==(r=this.overrides)?void 0:r.addDays)?this.overrides.addDays(e,t):(0,n.addDays)(e,t)},this.addMonths=(e,t)=>{var n;return(null==(n=this.overrides)?void 0:n.addMonths)?this.overrides.addMonths(e,t):(0,r.addMonths)(e,t)},this.addWeeks=(e,t)=>{var n;return(null==(n=this.overrides)?void 0:n.addWeeks)?this.overrides.addWeeks(e,t):(0,i.addWeeks)(e,t)},this.addYears=(e,t)=>{var n;return(null==(n=this.overrides)?void 0:n.addYears)?this.overrides.addYears(e,t):(0,a.addYears)(e,t)},this.differenceInCalendarDays=(e,t)=>{var n;return(null==(n=this.overrides)?void 0:n.differenceInCalendarDays)?this.overrides.differenceInCalendarDays(e,t):(0,o.differenceInCalendarDays)(e,t)},this.differenceInCalendarMonths=(e,t)=>{var n;return(null==(n=this.overrides)?void 0:n.differenceInCalendarMonths)?this.overrides.differenceInCalendarMonths(e,t):(0,s.differenceInCalendarMonths)(e,t)},this.eachMonthOfInterval=e=>{var t;return(null==(t=this.overrides)?void 0:t.eachMonthOfInterval)?this.overrides.eachMonthOfInterval(e):(0,l.eachMonthOfInterval)(e)},this.endOfBroadcastWeek=e=>{var t;return(null==(t=this.overrides)?void 0:t.endOfBroadcastWeek)?this.overrides.endOfBroadcastWeek(e):(0,O.endOfBroadcastWeek)(e,this)},this.endOfISOWeek=e=>{var t;return(null==(t=this.overrides)?void 0:t.endOfISOWeek)?this.overrides.endOfISOWeek(e):(0,u.endOfISOWeek)(e)},this.endOfMonth=e=>{var t;return(null==(t=this.overrides)?void 0:t.endOfMonth)?this.overrides.endOfMonth(e):(0,c.endOfMonth)(e)},this.endOfWeek=(e,t)=>{var n;return(null==(n=this.overrides)?void 0:n.endOfWeek)?this.overrides.endOfWeek(e,t):(0,d.endOfWeek)(e,this.options)},this.endOfYear=e=>{var t;return(null==(t=this.overrides)?void 0:t.endOfYear)?this.overrides.endOfYear(e):(0,h.endOfYear)(e)},this.format=(e,t,n)=>{var r;let i=(null==(r=this.overrides)?void 0:r.format)?this.overrides.format(e,t,this.options):(0,p.format)(e,t,this.options);return this.options.numerals&&"latn"!==this.options.numerals?this.replaceDigits(i):i},this.getISOWeek=e=>{var t;return(null==(t=this.overrides)?void 0:t.getISOWeek)?this.overrides.getISOWeek(e):(0,f.getISOWeek)(e)},this.getMonth=(e,t)=>{var n;return(null==(n=this.overrides)?void 0:n.getMonth)?this.overrides.getMonth(e,this.options):(0,m.getMonth)(e,this.options)},this.getYear=(e,t)=>{var n;return(null==(n=this.overrides)?void 0:n.getYear)?this.overrides.getYear(e,this.options):(0,y.getYear)(e,this.options)},this.getWeek=(e,t)=>{var n;return(null==(n=this.overrides)?void 0:n.getWeek)?this.overrides.getWeek(e,this.options):(0,g.getWeek)(e,this.options)},this.isAfter=(e,t)=>{var n;return(null==(n=this.overrides)?void 0:n.isAfter)?this.overrides.isAfter(e,t):(0,b.isAfter)(e,t)},this.isBefore=(e,t)=>{var n;return(null==(n=this.overrides)?void 0:n.isBefore)?this.overrides.isBefore(e,t):(0,x.isBefore)(e,t)},this.isDate=e=>{var t;return(null==(t=this.overrides)?void 0:t.isDate)?this.overrides.isDate(e):(0,w.isDate)(e)},this.isSameDay=(e,t)=>{var n;return(null==(n=this.overrides)?void 0:n.isSameDay)?this.overrides.isSameDay(e,t):(0,k.isSameDay)(e,t)},this.isSameMonth=(e,t)=>{var n;return(null==(n=this.overrides)?void 0:n.isSameMonth)?this.overrides.isSameMonth(e,t):(0,S.isSameMonth)(e,t)},this.isSameYear=(e,t)=>{var n;return(null==(n=this.overrides)?void 0:n.isSameYear)?this.overrides.isSameYear(e,t):(0,_.isSameYear)(e,t)},this.max=e=>{var t;return(null==(t=this.overrides)?void 0:t.max)?this.overrides.max(e):(0,C.max)(e)},this.min=e=>{var t;return(null==(t=this.overrides)?void 0:t.min)?this.overrides.min(e):(0,A.min)(e)},this.setMonth=(e,t)=>{var n;return(null==(n=this.overrides)?void 0:n.setMonth)?this.overrides.setMonth(e,t):(0,E.setMonth)(e,t)},this.setYear=(e,t)=>{var n;return(null==(n=this.overrides)?void 0:n.setYear)?this.overrides.setYear(e,t):(0,T.setYear)(e,t)},this.startOfBroadcastWeek=(e,t)=>{var n;return(null==(n=this.overrides)?void 0:n.startOfBroadcastWeek)?this.overrides.startOfBroadcastWeek(e,this):(0,j.startOfBroadcastWeek)(e,this)},this.startOfDay=e=>{var t;return(null==(t=this.overrides)?void 0:t.startOfDay)?this.overrides.startOfDay(e):(0,M.startOfDay)(e)},this.startOfISOWeek=e=>{var t;return(null==(t=this.overrides)?void 0:t.startOfISOWeek)?this.overrides.startOfISOWeek(e):(0,I.startOfISOWeek)(e)},this.startOfMonth=e=>{var t;return(null==(t=this.overrides)?void 0:t.startOfMonth)?this.overrides.startOfMonth(e):(0,N.startOfMonth)(e)},this.startOfWeek=(e,t)=>{var n;return(null==(n=this.overrides)?void 0:n.startOfWeek)?this.overrides.startOfWeek(e,this.options):(0,D.startOfWeek)(e,this.options)},this.startOfYear=e=>{var t;return(null==(t=this.overrides)?void 0:t.startOfYear)?this.overrides.startOfYear(e):(0,P.startOfYear)(e)},this.options={locale:R.enUS,...e},this.overrides=F}}let L=new F},722448:e=>{"use strict";e.s({rangeIncludesDate:()=>n});var t=e.i(28754);function n(e,n){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.defaultDateLib,{from:a,to:o}=e,{differenceInCalendarDays:s,isSameDay:l}=i;return a&&o?(0>s(o,a)&&([a,o]=[o,a]),s(n,a)>=+!!r&&s(o,n)>=+!!r):!r&&o?l(o,n):!r&&!!a&&l(a,n)}},778116:e=>{"use strict";function t(e){return!!(e&&"object"==typeof e&&"before"in e&&"after"in e)}function n(e){return!!(e&&"object"==typeof e&&"from"in e)}function r(e){return!!(e&&"object"==typeof e&&"after"in e)}function i(e){return!!(e&&"object"==typeof e&&"before"in e)}function a(e){return!!(e&&"object"==typeof e&&"dayOfWeek"in e)}function o(e,t){return Array.isArray(e)&&e.every(t.isDate)}e.s({isDateAfterType:()=>r,isDateBeforeType:()=>i,isDateInterval:()=>t,isDateRange:()=>n,isDatesArray:()=>o,isDayOfWeekType:()=>a})},959344:e=>{"use strict";e.s({dateMatchModifiers:()=>i});var t=e.i(28754),n=e.i(722448),r=e.i(778116);function i(e,i){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.defaultDateLib,o=Array.isArray(i)?i:[i],{isSameDay:s,differenceInCalendarDays:l,isAfter:u}=a;return o.some(t=>{if("boolean"==typeof t)return t;if(a.isDate(t))return s(e,t);if((0,r.isDatesArray)(t,a))return t.includes(e);if((0,r.isDateRange)(t))return(0,n.rangeIncludesDate)(t,e,!1,a);if((0,r.isDayOfWeekType)(t))return Array.isArray(t.dayOfWeek)?t.dayOfWeek.includes(e.getDay()):t.dayOfWeek===e.getDay();if((0,r.isDateInterval)(t)){let n=l(t.before,e),r=l(t.after,e),i=n>0,a=r<0;return u(t.before,t.after)?a&&i:i||a}return(0,r.isDateAfterType)(t)?l(e,t.after)>0:(0,r.isDateBeforeType)(t)?l(t.before,e)>0:"function"==typeof t&&t(e)})}},79924:e=>{"use strict";e.s({createGetModifiers:()=>r});var t=e.i(943940),n=e.i(959344);function r(e,r,i,a,o){let{disabled:s,hidden:l,modifiers:u,showOutsideDays:c,broadcastCalendar:d,today:h}=r,{isSameDay:p,isSameMonth:f,startOfMonth:m,isBefore:g,endOfMonth:y,isAfter:b}=o,x=i&&m(i),w=a&&y(a),k={[t.DayFlag.focused]:[],[t.DayFlag.outside]:[],[t.DayFlag.disabled]:[],[t.DayFlag.hidden]:[],[t.DayFlag.today]:[]},S={};for(let t of e){let{date:e,displayMonth:r}=t,i=!!(r&&!f(e,r)),a=!!(x&&g(e,x)),m=!!(w&&b(e,w)),y=!!(s&&(0,n.dateMatchModifiers)(e,s,o)),_=!!(l&&(0,n.dateMatchModifiers)(e,l,o))||a||m||!d&&!c&&i||d&&!1===c&&i,C=p(e,null!=h?h:o.today());i&&k.outside.push(t),y&&k.disabled.push(t),_&&k.hidden.push(t),C&&k.today.push(t),u&&Object.keys(u).forEach(r=>{let i=null==u?void 0:u[r];i&&(0,n.dateMatchModifiers)(e,i,o)&&(S[r]?S[r].push(t):S[r]=[t])})}return e=>{let n={[t.DayFlag.focused]:!1,[t.DayFlag.disabled]:!1,[t.DayFlag.hidden]:!1,[t.DayFlag.outside]:!1,[t.DayFlag.today]:!1},r={};for(let t in k){let r=k[t];n[t]=r.some(t=>t===e)}for(let t in S)r[t]=S[t].some(t=>t===e);return{...n,...r}}}},236707:e=>{"use strict";e.s({getClassNamesForModifiers:()=>n});var t=e.i(943940);function n(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object.entries(e).filter(e=>{let[,t]=e;return!0===t}).reduce((e,i)=>{let[a]=i;return r[a]?e.push(r[a]):n[t.DayFlag[a]]?e.push(n[t.DayFlag[a]]):n[t.SelectionState[a]]&&e.push(n[t.SelectionState[a]]),e},[n[t.UI.Day]])}},537221:e=>{"use strict";e.s({})},144540:e=>{"use strict";e.s({}),e.i(537221)},942697:e=>{"use strict";e.s({Button:()=>n});var t=e.i(373150);function n(e){return t.default.createElement("button",{...e})}},760837:e=>{"use strict";e.s({CaptionLabel:()=>n});var t=e.i(373150);function n(e){return t.default.createElement("span",{...e})}},407483:e=>{"use strict";e.s({Chevron:()=>n});var t=e.i(373150);function n(e){let{size:n=24,orientation:r="left",className:i}=e;return t.default.createElement("svg",{className:i,width:n,height:n,viewBox:"0 0 24 24"},"up"===r&&t.default.createElement("polygon",{points:"6.77 17 12.5 11.43 18.24 17 20 15.28 12.5 8 5 15.28"}),"down"===r&&t.default.createElement("polygon",{points:"6.77 8 12.5 13.57 18.24 8 20 9.72 12.5 17 5 9.72"}),"left"===r&&t.default.createElement("polygon",{points:"16 18.112 9.81111111 12 16 5.87733333 14.0888889 4 6 12 14.0888889 20"}),"right"===r&&t.default.createElement("polygon",{points:"8 18.112 14.18888889 12 8 5.87733333 9.91111111 4 18 12 9.91111111 20"}))}},630037:e=>{"use strict";e.s({Day:()=>n});var t=e.i(373150);function n(e){let{day:n,modifiers:r,...i}=e;return t.default.createElement("td",{...i})}},813957:e=>{"use strict";e.s({DayButton:()=>n});var t=e.i(373150);function n(e){let{day:n,modifiers:r,...i}=e,a=t.default.useRef(null);return t.default.useEffect(()=>{var e;r.focused&&(null==(e=a.current)||e.focus())},[r.focused]),t.default.createElement("button",{ref:a,...i})}},254745:e=>{"use strict";e.s({Dropdown:()=>r});var t=e.i(373150),n=e.i(943940);function r(e){let{options:r,className:i,components:a,classNames:o,...s}=e,l=[o[n.UI.Dropdown],i].join(" "),u=null==r?void 0:r.find(e=>{let{value:t}=e;return t===s.value});return t.default.createElement("span",{"data-disabled":s.disabled,className:o[n.UI.DropdownRoot]},t.default.createElement(a.Select,{className:l,...s},null==r?void 0:r.map(e=>{let{value:n,label:r,disabled:i}=e;return t.default.createElement(a.Option,{key:n,value:n,disabled:i},r)})),t.default.createElement("span",{className:o[n.UI.CaptionLabel],"aria-hidden":!0},null==u?void 0:u.label,t.default.createElement(a.Chevron,{orientation:"down",size:18,className:o[n.UI.Chevron]})))}},879639:e=>{"use strict";e.s({DropdownNav:()=>n});var t=e.i(373150);function n(e){return t.default.createElement("div",{...e})}},393142:e=>{"use strict";e.s({Footer:()=>n});var t=e.i(373150);function n(e){return t.default.createElement("div",{...e})}},294246:e=>{"use strict";e.s({Month:()=>n});var t=e.i(373150);function n(e){let{calendarMonth:n,displayIndex:r,...i}=e;return t.default.createElement("div",{...i},e.children)}},992780:e=>{"use strict";e.s({MonthCaption:()=>n});var t=e.i(373150);function n(e){let{calendarMonth:n,displayIndex:r,...i}=e;return t.default.createElement("div",{...i})}},295608:e=>{"use strict";e.s({MonthGrid:()=>n});var t=e.i(373150);function n(e){return t.default.createElement("table",{...e})}},971977:e=>{"use strict";e.s({Months:()=>n});var t=e.i(373150);function n(e){return t.default.createElement("div",{...e})}},953854:e=>{"use strict";e.s({dayPickerContext:()=>n,useDayPicker:()=>r});var t=e.i(373150);let n=(0,t.createContext)(void 0);function r(){let e=(0,t.useContext)(n);if(void 0===e)throw Error("useDayPicker() must be used within a custom component.");return e}},1895:e=>{"use strict";e.s({MonthsDropdown:()=>r});var t=e.i(373150),n=e.i(953854);function r(e){let{components:r}=(0,n.useDayPicker)();return t.default.createElement(r.Dropdown,{...e})}},963576:e=>{"use strict";e.s({Nav:()=>i});var t=e.i(373150),n=e.i(943940),r=e.i(953854);function i(e){let{onPreviousClick:i,onNextClick:a,previousMonth:o,nextMonth:s,...l}=e,{components:u,classNames:c,labels:{labelPrevious:d,labelNext:h}}=(0,r.useDayPicker)(),p=(0,t.useCallback)(e=>{s&&(null==a||a(e))},[s,a]),f=(0,t.useCallback)(e=>{o&&(null==i||i(e))},[o,i]);return t.default.createElement("nav",{...l},t.default.createElement(u.PreviousMonthButton,{type:"button",className:c[n.UI.PreviousMonthButton],tabIndex:o?void 0:-1,"aria-disabled":!o||void 0,"aria-label":d(o),onClick:f},t.default.createElement(u.Chevron,{disabled:!o||void 0,className:c[n.UI.Chevron],orientation:"left"})),t.default.createElement(u.NextMonthButton,{type:"button",className:c[n.UI.NextMonthButton],tabIndex:s?void 0:-1,"aria-disabled":!s||void 0,"aria-label":h(s),onClick:p},t.default.createElement(u.Chevron,{disabled:!s||void 0,orientation:"right",className:c[n.UI.Chevron]})))}},103429:e=>{"use strict";e.s({NextMonthButton:()=>r});var t=e.i(373150),n=e.i(953854);function r(e){let{components:r}=(0,n.useDayPicker)();return t.default.createElement(r.Button,{...e})}},326821:e=>{"use strict";e.s({Option:()=>n});var t=e.i(373150);function n(e){return t.default.createElement("option",{...e})}},418309:e=>{"use strict";e.s({PreviousMonthButton:()=>r});var t=e.i(373150),n=e.i(953854);function r(e){let{components:r}=(0,n.useDayPicker)();return t.default.createElement(r.Button,{...e})}},497940:e=>{"use strict";e.s({Root:()=>n});var t=e.i(373150);function n(e){let{rootRef:n,...r}=e;return t.default.createElement("div",{...r,ref:n})}},466521:e=>{"use strict";e.s({Select:()=>n});var t=e.i(373150);function n(e){return t.default.createElement("select",{...e})}},492140:e=>{"use strict";e.s({Week:()=>n});var t=e.i(373150);function n(e){let{week:n,...r}=e;return t.default.createElement("tr",{...r})}},669319:e=>{"use strict";e.s({Weekday:()=>n});var t=e.i(373150);function n(e){return t.default.createElement("th",{...e})}},43487:e=>{"use strict";e.s({Weekdays:()=>n});var t=e.i(373150);function n(e){return t.default.createElement("thead",{"aria-hidden":!0},t.default.createElement("tr",{...e}))}},303174:e=>{"use strict";e.s({WeekNumber:()=>n});var t=e.i(373150);function n(e){let{week:n,...r}=e;return t.default.createElement("th",{...r})}},446433:e=>{"use strict";e.s({WeekNumberHeader:()=>n});var t=e.i(373150);function n(e){return t.default.createElement("th",{...e})}},544467:e=>{"use strict";e.s({Weeks:()=>n});var t=e.i(373150);function n(e){return t.default.createElement("tbody",{...e})}},550840:e=>{"use strict";e.s({YearsDropdown:()=>r});var t=e.i(373150),n=e.i(953854);function r(e){let{components:r}=(0,n.useDayPicker)();return t.default.createElement(r.Dropdown,{...e})}},628818:e=>{"use strict";e.s({Button:()=>t.Button,CaptionLabel:()=>n.CaptionLabel,Chevron:()=>r.Chevron,Day:()=>i.Day,DayButton:()=>a.DayButton,Dropdown:()=>o.Dropdown,DropdownNav:()=>s.DropdownNav,Footer:()=>l.Footer,Month:()=>u.Month,MonthCaption:()=>c.MonthCaption,MonthGrid:()=>d.MonthGrid,Months:()=>h.Months,MonthsDropdown:()=>p.MonthsDropdown,Nav:()=>f.Nav,NextMonthButton:()=>m.NextMonthButton,Option:()=>g.Option,PreviousMonthButton:()=>y.PreviousMonthButton,Root:()=>b.Root,Select:()=>x.Select,Week:()=>w.Week,WeekNumber:()=>_.WeekNumber,WeekNumberHeader:()=>C.WeekNumberHeader,Weekday:()=>k.Weekday,Weekdays:()=>S.Weekdays,Weeks:()=>A.Weeks,YearsDropdown:()=>E.YearsDropdown});var t=e.i(942697),n=e.i(760837),r=e.i(407483),i=e.i(630037),a=e.i(813957),o=e.i(254745),s=e.i(879639),l=e.i(393142),u=e.i(294246),c=e.i(992780),d=e.i(295608),h=e.i(971977),p=e.i(1895),f=e.i(963576),m=e.i(103429),g=e.i(326821),y=e.i(418309),b=e.i(497940),x=e.i(466521),w=e.i(492140),k=e.i(669319),S=e.i(43487),_=e.i(303174),C=e.i(446433),A=e.i(544467),E=e.i(550840);e.i(537221)},804075:e=>{"use strict";e.s({Button:()=>t.Button,CaptionLabel:()=>t.CaptionLabel,Chevron:()=>t.Chevron,Day:()=>t.Day,DayButton:()=>t.DayButton,Dropdown:()=>t.Dropdown,DropdownNav:()=>t.DropdownNav,Footer:()=>t.Footer,Month:()=>t.Month,MonthCaption:()=>t.MonthCaption,MonthGrid:()=>t.MonthGrid,Months:()=>t.Months,MonthsDropdown:()=>t.MonthsDropdown,Nav:()=>t.Nav,NextMonthButton:()=>t.NextMonthButton,Option:()=>t.Option,PreviousMonthButton:()=>t.PreviousMonthButton,Root:()=>t.Root,Select:()=>t.Select,Week:()=>t.Week,WeekNumber:()=>t.WeekNumber,WeekNumberHeader:()=>t.WeekNumberHeader,Weekday:()=>t.Weekday,Weekdays:()=>t.Weekdays,Weeks:()=>t.Weeks,YearsDropdown:()=>t.YearsDropdown}),e.i(144540);var t=e.i(628818)},390288:e=>{"use strict";e.s({getComponents:()=>n});var t=e.i(804075);function n(e){return{...t,...e}}},50216:e=>{"use strict";function t(e){var t;let n={"data-mode":null!=(t=e.mode)?t:void 0,"data-required":"required"in e?e.required:void 0,"data-multiple-months":e.numberOfMonths&&e.numberOfMonths>1||void 0,"data-week-numbers":e.showWeekNumber||void 0,"data-broadcast-calendar":e.broadcastCalendar||void 0,"data-nav-layout":e.navLayout||void 0};return Object.entries(e).forEach(e=>{let[t,r]=e;t.startsWith("data-")&&(n[t]=r)}),n}e.s({getDataAttributes:()=>t})},376535:e=>{"use strict";e.s({getDefaultClassNames:()=>n});var t=e.i(943940);function n(){let e={};for(let n in t.UI)e[t.UI[n]]="rdp-".concat(t.UI[n]);for(let n in t.DayFlag)e[t.DayFlag[n]]="rdp-".concat(t.DayFlag[n]);for(let n in t.SelectionState)e[t.SelectionState[n]]="rdp-".concat(t.SelectionState[n]);for(let n in t.Animation)e[t.Animation[n]]="rdp-".concat(t.Animation[n]);return e}},747267:e=>{"use strict";e.s({})},229684:e=>{"use strict";e.s({}),e.i(747267)},185891:e=>{"use strict";e.s({formatCaption:()=>n,formatMonthCaption:()=>r});var t=e.i(28754);function n(e,n,r){return(null!=r?r:new t.DateLib(n)).format(e,"LLLL y")}let r=n},651722:e=>{"use strict";e.s({formatDay:()=>n});var t=e.i(28754);function n(e,n,r){return(null!=r?r:new t.DateLib(n)).format(e,"d")}},447087:e=>{"use strict";e.s({formatMonthDropdown:()=>n});var t=e.i(28754);function n(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.defaultDateLib;return n.format(e,"LLLL")}},348480:e=>{"use strict";e.s({formatWeekNumber:()=>n});var t=e.i(28754);function n(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.defaultDateLib;return e<10?n.formatNumber("0".concat(e.toLocaleString())):n.formatNumber("".concat(e.toLocaleString()))}},964938:e=>{"use strict";function t(){return""}e.s({formatWeekNumberHeader:()=>t})},194902:e=>{"use strict";e.s({formatWeekdayName:()=>n});var t=e.i(28754);function n(e,n,r){return(null!=r?r:new t.DateLib(n)).format(e,"cccccc")}},419297:e=>{"use strict";e.s({formatYearCaption:()=>r,formatYearDropdown:()=>n});var t=e.i(28754);function n(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.defaultDateLib;return n.format(e,"yyyy")}let r=n},512319:e=>{"use strict";e.s({formatCaption:()=>t.formatCaption,formatDay:()=>n.formatDay,formatMonthCaption:()=>t.formatMonthCaption,formatMonthDropdown:()=>r.formatMonthDropdown,formatWeekNumber:()=>i.formatWeekNumber,formatWeekNumberHeader:()=>a.formatWeekNumberHeader,formatWeekdayName:()=>o.formatWeekdayName,formatYearCaption:()=>s.formatYearCaption,formatYearDropdown:()=>s.formatYearDropdown});var t=e.i(185891),n=e.i(651722),r=e.i(447087),i=e.i(348480),a=e.i(964938),o=e.i(194902),s=e.i(419297);e.i(747267)},791156:e=>{"use strict";e.s({formatCaption:()=>t.formatCaption,formatDay:()=>t.formatDay,formatMonthCaption:()=>t.formatMonthCaption,formatMonthDropdown:()=>t.formatMonthDropdown,formatWeekNumber:()=>t.formatWeekNumber,formatWeekNumberHeader:()=>t.formatWeekNumberHeader,formatWeekdayName:()=>t.formatWeekdayName,formatYearCaption:()=>t.formatYearCaption,formatYearDropdown:()=>t.formatYearDropdown}),e.i(229684);var t=e.i(512319)},366440:e=>{"use strict";e.s({getFormatters:()=>n});var t=e.i(791156);function n(e){return(null==e?void 0:e.formatMonthCaption)&&!e.formatCaption&&(e.formatCaption=e.formatMonthCaption),(null==e?void 0:e.formatYearCaption)&&!e.formatYearDropdown&&(e.formatYearDropdown=e.formatYearCaption),{...t,...e}}},70718:e=>{"use strict";function t(e,t,n,r,i){let{startOfMonth:a,startOfYear:o,endOfYear:s,eachMonthOfInterval:l,getMonth:u}=i;return l({start:o(e),end:s(e)}).map(e=>{let o=r.formatMonthDropdown(e,i);return{value:u(e),label:o,disabled:t&&e<a(t)||n&&e>a(n)||!1}})}e.s({getMonthOptions:()=>t})},804517:e=>{"use strict";e.s({getStyleForModifiers:()=>n});var t=e.i(943940);function n(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={...null==n?void 0:n[t.UI.Day]};return Object.entries(e).filter(e=>{let[,t]=e;return!0===t}).forEach(e=>{let[t]=e;i={...i,...null==r?void 0:r[t]}}),i}},390027:e=>{"use strict";function t(e,t,n){let r=e.today(),i=n?e.startOfBroadcastWeek(r,e):t?e.startOfISOWeek(r):e.startOfWeek(r),a=[];for(let t=0;t<7;t++){let n=e.addDays(i,t);a.push(n)}return a}e.s({getWeekdays:()=>t})},584279:e=>{"use strict";function t(e,t,n,r){if(!e||!t)return;let{startOfYear:i,endOfYear:a,addYears:o,getYear:s,isBefore:l,isSameYear:u}=r,c=i(e),d=a(t),h=[],p=c;for(;l(p,d)||u(p,d);)h.push(p),p=o(p,1);return h.map(e=>{let t=n.formatYearDropdown(e,r);return{value:s(e),label:t,disabled:!1}})}e.s({getYearOptions:()=>t})},135118:e=>{"use strict";e.s({})},223167:e=>{"use strict";e.s({}),e.i(135118)},294283:e=>{"use strict";e.s({labelCaption:()=>r,labelGrid:()=>n});var t=e.i(28754);function n(e,n,r){return(null!=r?r:new t.DateLib(n)).format(e,"LLLL y")}let r=n},142767:e=>{"use strict";e.s({labelGridcell:()=>n});var t=e.i(28754);function n(e,n,r,i){let a=(null!=i?i:new t.DateLib(r)).format(e,"PPPP");return(null==n?void 0:n.today)&&(a="Today, ".concat(a)),a}},791574:e=>{"use strict";e.s({labelDay:()=>r,labelDayButton:()=>n});var t=e.i(28754);function n(e,n,r,i){let a=(null!=i?i:new t.DateLib(r)).format(e,"PPPP");return n.today&&(a="Today, ".concat(a)),n.selected&&(a="".concat(a,", selected")),a}let r=n},994309:e=>{"use strict";function t(){return""}e.s({labelNav:()=>t})},852417:e=>{"use strict";function t(e){return"Choose the Month"}e.s({labelMonthDropdown:()=>t})},281517:e=>{"use strict";function t(e){return"Go to the Next Month"}e.s({labelNext:()=>t})},919990:e=>{"use strict";function t(e){return"Go to the Previous Month"}e.s({labelPrevious:()=>t})},355444:e=>{"use strict";e.s({labelWeekday:()=>n});var t=e.i(28754);function n(e,n,r){return(null!=r?r:new t.DateLib(n)).format(e,"cccc")}},526721:e=>{"use strict";function t(e,t){return"Week ".concat(e)}e.s({labelWeekNumber:()=>t})},644767:e=>{"use strict";function t(e){return"Week Number"}e.s({labelWeekNumberHeader:()=>t})},976254:e=>{"use strict";function t(e){return"Choose the Year"}e.s({labelYearDropdown:()=>t})},813390:e=>{"use strict";e.s({labelCaption:()=>t.labelCaption,labelDay:()=>r.labelDay,labelDayButton:()=>r.labelDayButton,labelGrid:()=>t.labelGrid,labelGridcell:()=>n.labelGridcell,labelMonthDropdown:()=>a.labelMonthDropdown,labelNav:()=>i.labelNav,labelNext:()=>o.labelNext,labelPrevious:()=>s.labelPrevious,labelWeekNumber:()=>u.labelWeekNumber,labelWeekNumberHeader:()=>c.labelWeekNumberHeader,labelWeekday:()=>l.labelWeekday,labelYearDropdown:()=>d.labelYearDropdown});var t=e.i(294283),n=e.i(142767),r=e.i(791574),i=e.i(994309),a=e.i(852417),o=e.i(281517),s=e.i(919990),l=e.i(355444),u=e.i(526721),c=e.i(644767),d=e.i(976254);e.i(135118)},833565:e=>{"use strict";e.s({labelCaption:()=>t.labelCaption,labelDay:()=>t.labelDay,labelDayButton:()=>t.labelDayButton,labelGrid:()=>t.labelGrid,labelGridcell:()=>t.labelGridcell,labelMonthDropdown:()=>t.labelMonthDropdown,labelNav:()=>t.labelNav,labelNext:()=>t.labelNext,labelPrevious:()=>t.labelPrevious,labelWeekNumber:()=>t.labelWeekNumber,labelWeekNumberHeader:()=>t.labelWeekNumberHeader,labelWeekday:()=>t.labelWeekday,labelYearDropdown:()=>t.labelYearDropdown}),e.i(223167);var t=e.i(813390)},321190:e=>{"use strict";e.s({useAnimation:()=>s});var t=e.i(373150),n=e.i(943940);let r=e=>e instanceof HTMLElement?e:null,i=e=>{var t;return[...null!=(t=e.querySelectorAll("[data-animated-month]"))?t:[]]},a=e=>r(e.querySelector("[data-animated-caption]")),o=e=>r(e.querySelector("[data-animated-weeks]"));function s(e,s,l){let{classNames:u,months:c,focused:d,dateLib:h}=l,p=(0,t.useRef)(null),f=(0,t.useRef)(c),m=(0,t.useRef)(!1);(0,t.useLayoutEffect)(()=>{let t=f.current;if(f.current=c,!s||!e.current||!(e.current instanceof HTMLElement)||0===c.length||0===t.length||c.length!==t.length)return;let l=h.isSameMonth(c[0].date,t[0].date),g=h.isAfter(c[0].date,t[0].date),y=g?u[n.Animation.caption_after_enter]:u[n.Animation.caption_before_enter],b=g?u[n.Animation.weeks_after_enter]:u[n.Animation.weeks_before_enter],x=p.current,w=e.current.cloneNode(!0);if(w instanceof HTMLElement?(i(w).forEach(e=>{if(!(e instanceof HTMLElement))return;let t=r(e.querySelector("[data-animated-month]"));t&&e.contains(t)&&e.removeChild(t);let n=a(e);n&&n.classList.remove(y);let i=o(e);i&&i.classList.remove(b)}),p.current=w):p.current=null,m.current||l||d)return;let k=x instanceof HTMLElement?i(x):[],S=i(e.current);if(S&&S.every(e=>e instanceof HTMLElement)&&k&&k.every(e=>e instanceof HTMLElement)){m.current=!0;let t=[];e.current.style.isolation="isolate";let i=r(e.current.querySelector("[data-animated-nav]"));i&&(i.style.zIndex="1"),S.forEach((s,l)=>{let c=k[l];if(!c)return;s.style.position="relative",s.style.overflow="hidden";let d=a(s);d&&d.classList.add(y);let h=o(s);h&&h.classList.add(b);let p=()=>{m.current=!1,e.current&&(e.current.style.isolation=""),i&&(i.style.zIndex=""),d&&d.classList.remove(y),h&&h.classList.remove(b),s.style.position="",s.style.overflow="",s.contains(c)&&s.removeChild(c)};t.push(p),c.style.pointerEvents="none",c.style.position="absolute",c.style.overflow="hidden",c.setAttribute("aria-hidden","true");let f=r(c.querySelector("[data-animated-weekdays]"));f&&(f.style.opacity="0");let x=a(c);x&&(x.classList.add(g?u[n.Animation.caption_before_exit]:u[n.Animation.caption_after_exit]),x.addEventListener("animationend",p));let w=o(c);w&&w.classList.add(g?u[n.Animation.weeks_before_exit]:u[n.Animation.weeks_after_exit]),s.insertBefore(c,s.firstChild)})}})}},85891:e=>{"use strict";function t(e,t,n,r){let i=e[0],a=e[e.length-1],{ISOWeek:o,fixedWeeks:s,broadcastCalendar:l}=null!=n?n:{},{addDays:u,differenceInCalendarDays:c,differenceInCalendarMonths:d,endOfBroadcastWeek:h,endOfISOWeek:p,endOfMonth:f,endOfWeek:m,isAfter:g,startOfBroadcastWeek:y,startOfISOWeek:b,startOfWeek:x}=r,w=l?y(i,r):o?b(i):x(i),k=c(l?h(a):o?p(f(a)):m(f(a)),w),S=d(a,i)+1,_=[];for(let e=0;e<=k;e++){let n=u(w,e);if(t&&g(n,t))break;_.push(n)}let C=(l?35:42)*S;if(s&&_.length<C){let e=C-_.length;for(let t=0;t<e;t++){let e=u(_[_.length-1],1);_.push(e)}}return _}e.s({getDates:()=>t})},221056:e=>{"use strict";function t(e){let t=[];return e.reduce((e,n)=>[...e,...n.weeks.reduce((e,t)=>[...e,...t.days],t)],t)}e.s({getDays:()=>t})},9e5:e=>{"use strict";function t(e,t,n,r){let{numberOfMonths:i=1}=n,a=[];for(let n=0;n<i;n++){let i=r.addMonths(e,n);if(t&&i>t)break;a.push(i)}return a}e.s({getDisplayMonths:()=>t})},40506:e=>{"use strict";function t(e,t,n,r){let{month:i,defaultMonth:a,today:o=r.today(),numberOfMonths:s=1}=e,l=i||a||o,{differenceInCalendarMonths:u,addMonths:c,startOfMonth:d}=r;return n&&u(n,l)<s-1&&(l=c(n,-1*(s-1))),t&&0>u(l,t)&&(l=t),d(l)}e.s({getInitialMonth:()=>t})},451148:e=>{"use strict";e.s({CalendarWeek:()=>t});class t{constructor(e,t){this.days=t,this.weekNumber=e}}},512130:e=>{"use strict";e.s({CalendarDay:()=>n});var t=e.i(28754);class n{isEqualTo(e){return this.dateLib.isSameDay(e.date,this.date)&&this.dateLib.isSameMonth(e.displayMonth,this.displayMonth)}constructor(e,n,r=t.defaultDateLib){this.date=e,this.displayMonth=n,this.outside=!!(n&&!r.isSameMonth(e,n)),this.dateLib=r}}},776059:e=>{"use strict";e.s({CalendarMonth:()=>t});class t{constructor(e,t){this.date=e,this.weeks=t}}},745228:e=>{"use strict";e.s({getMonths:()=>i});var t=e.i(451148),n=e.i(512130),r=e.i(776059);function i(e,i,a,o){let{addDays:s,endOfBroadcastWeek:l,endOfISOWeek:u,endOfMonth:c,endOfWeek:d,getISOWeek:h,getWeek:p,startOfBroadcastWeek:f,startOfISOWeek:m,startOfWeek:g}=o,y=e.reduce((e,y)=>{let b=a.broadcastCalendar?f(y,o):a.ISOWeek?m(y):g(y),x=a.broadcastCalendar?l(y):a.ISOWeek?u(c(y)):d(c(y)),w=i.filter(e=>e>=b&&e<=x),k=a.broadcastCalendar?35:42;if(a.fixedWeeks&&w.length<k){let e=i.filter(e=>{let t=k-w.length;return e>x&&e<=s(x,t)});w.push(...e)}let S=w.reduce((e,r)=>{let i=a.ISOWeek?h(r):p(r),s=e.find(e=>e.weekNumber===i),l=new n.CalendarDay(r,y,o);return s?s.days.push(l):e.push(new t.CalendarWeek(i,[l])),e},[]),_=new r.CalendarMonth(y,S);return e.push(_),e},[]);return a.reverseMonths?y.reverse():y}},926062:e=>{"use strict";function t(e,t){var n,r;let{startMonth:i,endMonth:a}=e,{startOfYear:o,startOfDay:s,startOfMonth:l,endOfMonth:u,addYears:c,endOfYear:d,newDate:h,today:p}=t,{fromYear:f,toYear:m,fromMonth:g,toMonth:y}=e;!i&&g&&(i=g),!i&&f&&(i=t.newDate(f,0,1)),!a&&y&&(a=y),!a&&m&&(a=h(m,11,31));let b="dropdown"===e.captionLayout||"dropdown-years"===e.captionLayout;return i?i=l(i):f?i=h(f,0,1):!i&&b&&(i=o(c(null!=(n=e.today)?n:p(),-100))),a?a=u(a):m?a=h(m,11,31):!a&&b&&(a=d(null!=(r=e.today)?r:p())),[i?s(i):i,a?s(a):a]}e.s({getNavMonths:()=>t})},24576:e=>{"use strict";function t(e,t,n,r){if(n.disableNavigation)return;let{pagedNavigation:i,numberOfMonths:a=1}=n,{startOfMonth:o,addMonths:s,differenceInCalendarMonths:l}=r,u=o(e);if(!t||!(l(t,e)<a))return s(u,i?a:1)}e.s({getNextMonth:()=>t})},343271:e=>{"use strict";function t(e,t,n,r){if(n.disableNavigation)return;let{pagedNavigation:i,numberOfMonths:a}=n,{startOfMonth:o,addMonths:s,differenceInCalendarMonths:l}=r,u=o(e);if(!t||!(0>=l(u,t)))return s(u,-(i&&null!=a?a:1))}e.s({getPreviousMonth:()=>t})},361325:e=>{"use strict";function t(e){return e.reduce((e,t)=>[...e,...t.weeks],[])}e.s({getWeeks:()=>t})},96796:e=>{"use strict";e.s({useControlledValue:()=>n});var t=e.i(373150);function n(e,n){let[r,i]=(0,t.useState)(e);return[void 0===n?r:n,i]}},874026:e=>{"use strict";e.s({useCalendar:()=>h});var t=e.i(373150),n=e.i(85891),r=e.i(221056),i=e.i(9e5),a=e.i(40506),o=e.i(745228),s=e.i(926062),l=e.i(24576),u=e.i(343271),c=e.i(361325),d=e.i(96796);function h(e,h){let[p,f]=(0,s.getNavMonths)(e,h),{startOfMonth:m,endOfMonth:g}=h,y=(0,a.getInitialMonth)(e,p,f,h),[b,x]=(0,d.useControlledValue)(y,e.month?y:void 0);(0,t.useEffect)(()=>{x((0,a.getInitialMonth)(e,p,f,h))},[e.timeZone]);let w=(0,i.getDisplayMonths)(b,f,e,h),k=(0,n.getDates)(w,e.endMonth?g(e.endMonth):void 0,e,h),S=(0,o.getMonths)(w,k,e,h),_=(0,c.getWeeks)(S),C=(0,r.getDays)(S),A=(0,u.getPreviousMonth)(b,p,e,h),E=(0,l.getNextMonth)(b,f,e,h),{disableNavigation:T,onMonthChange:M}=e,I=e=>{if(T)return;let t=m(e);p&&t<m(p)&&(t=m(p)),f&&t>m(f)&&(t=m(f)),x(t),null==M||M(t)};return{months:S,weeks:_,days:C,navStart:p,navEnd:f,previousMonth:A,nextMonth:E,goToMonth:I,goToDay:e=>{_.some(t=>t.days.some(t=>t.isEqualTo(e)))||I(e.date)}}}},914739:e=>{"use strict";e.s({calculateFocusTarget:()=>i});var t,n=e.i(943940);function r(e){return!e[n.DayFlag.disabled]&&!e[n.DayFlag.hidden]&&!e[n.DayFlag.outside]}function i(e,i,a,o){let s,l=-1;for(let u of e){let e=i(u);r(e)&&(e[n.DayFlag.focused]&&l<t.FocusedModifier?(s=u,l=t.FocusedModifier):(null==o?void 0:o.isEqualTo(u))&&l<t.LastFocused?(s=u,l=t.LastFocused):a(u.date)&&l<t.Selected?(s=u,l=t.Selected):e[n.DayFlag.today]&&l<t.Today&&(s=u,l=t.Today))}return s||(s=e.find(e=>r(i(e)))),s}!function(e){e[e.Today=0]="Today",e[e.Selected=1]="Selected",e[e.LastFocused=2]="LastFocused",e[e.FocusedModifier=3]="FocusedModifier"}(t||(t={}))},593606:e=>{"use strict";function t(e,t,n,r,i,a,o){let{ISOWeek:s,broadcastCalendar:l}=a,{addDays:u,addMonths:c,addWeeks:d,addYears:h,endOfBroadcastWeek:p,endOfISOWeek:f,endOfWeek:m,max:g,min:y,startOfBroadcastWeek:b,startOfISOWeek:x,startOfWeek:w}=o,k=({day:u,week:d,month:c,year:h,startOfWeek:e=>l?b(e,o):s?x(e):w(e),endOfWeek:e=>l?p(e):s?f(e):m(e)})[e](n,"after"===t?1:-1);return"before"===t&&r?k=g([r,k]):"after"===t&&i&&(k=y([i,k])),k}e.s({getFocusableDate:()=>t})},375371:e=>{"use strict";e.s({getNextFocus:()=>function e(i,a,o,s,l,u,c){let d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;if(d>365)return;let h=(0,r.getFocusableDate)(i,a,o.date,s,l,u,c),p=!!(u.disabled&&(0,n.dateMatchModifiers)(h,u.disabled,c)),f=!!(u.hidden&&(0,n.dateMatchModifiers)(h,u.hidden,c)),m=new t.CalendarDay(h,h,c);return p||f?e(i,a,m,s,l,u,c,d+1):m}});var t=e.i(512130),n=e.i(959344),r=e.i(593606)},9559:e=>{"use strict";e.s({useFocus:()=>i});var t=e.i(373150),n=e.i(914739),r=e.i(375371);function i(e,i,a,o,s){let{autoFocus:l}=e,[u,c]=(0,t.useState)(),d=(0,n.calculateFocusTarget)(i.days,a,o||(()=>!1),u),[h,p]=(0,t.useState)(l?d:void 0);return{isFocusTarget:e=>!!(null==d?void 0:d.isEqualTo(e)),setFocused:p,focused:h,blur:()=>{c(h),p(void 0)},moveFocus:(t,n)=>{if(!h)return;let a=(0,r.getNextFocus)(t,n,h,i.navStart,i.navEnd,e,s);a&&(i.goToDay(a),p(a))}}}},260075:e=>{"use strict";e.s({useMulti:()=>n});var t=e.i(96796);function n(e,n){let{selected:r,required:i,onSelect:a}=e,[o,s]=(0,t.useControlledValue)(r,a?r:void 0),l=a?r:o,{isSameDay:u}=n,c=e=>{var t;return null!=(t=null==l?void 0:l.some(t=>u(t,e)))&&t},{min:d,max:h}=e;return{selected:l,select:(e,t,n)=>{let r=[...null!=l?l:[]];if(c(e)){if((null==l?void 0:l.length)===d||i&&(null==l?void 0:l.length)===1)return;r=null==l?void 0:l.filter(t=>!u(t,e))}else r=(null==l?void 0:l.length)===h?[e]:[...r,e];return a||s(r),null==a||a(r,e,t,n),r},isSelected:c}}},825546:e=>{"use strict";e.s({addToRange:()=>n});var t=e.i(28754);function n(e,n){let r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:t.defaultDateLib,{from:l,to:u}=n||{},{isSameDay:c,isAfter:d,isBefore:h}=s;if(l||u){if(l&&!u)r=c(l,e)?o?{from:l,to:void 0}:void 0:h(e,l)?{from:e,to:l}:{from:l,to:e};else if(l&&u)if(c(l,e)&&c(u,e))r=o?{from:l,to:u}:void 0;else if(c(l,e))r={from:l,to:i>0?void 0:e};else if(c(u,e))r={from:e,to:i>0?void 0:e};else if(h(e,l))r={from:e,to:u};else if(d(e,l))r={from:l,to:e};else if(d(e,u))r={from:l,to:e};else throw Error("Invalid range")}else r={from:e,to:i>0?void 0:e};if((null==r?void 0:r.from)&&(null==r?void 0:r.to)){let t=s.differenceInCalendarDays(r.to,r.from);a>0&&t>a?r={from:e,to:void 0}:i>1&&t<i&&(r={from:e,to:void 0})}return r}},413683:e=>{"use strict";e.s({rangeContainsDayOfWeek:()=>n});var t=e.i(28754);function n(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.defaultDateLib,i=Array.isArray(n)?n:[n],a=e.from,o=Math.min(r.differenceInCalendarDays(e.to,e.from),6);for(let e=0;e<=o;e++){if(i.includes(a.getDay()))return!0;a=r.addDays(a,1)}return!1}},954288:e=>{"use strict";e.s({rangeOverlaps:()=>r});var t=e.i(28754),n=e.i(722448);function r(e,r){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.defaultDateLib;return(0,n.rangeIncludesDate)(e,r.from,!1,i)||(0,n.rangeIncludesDate)(e,r.to,!1,i)||(0,n.rangeIncludesDate)(r,e.from,!1,i)||(0,n.rangeIncludesDate)(r,e.to,!1,i)}},316409:e=>{"use strict";e.s({rangeContainsModifiers:()=>s});var t=e.i(28754),n=e.i(959344),r=e.i(413683),i=e.i(722448),a=e.i(954288),o=e.i(778116);function s(e,s){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.defaultDateLib,u=Array.isArray(s)?s:[s];if(u.filter(e=>"function"!=typeof e).some(t=>"boolean"==typeof t?t:l.isDate(t)?(0,i.rangeIncludesDate)(e,t,!1,l):(0,o.isDatesArray)(t,l)?t.some(t=>(0,i.rangeIncludesDate)(e,t,!1,l)):(0,o.isDateRange)(t)?!!t.from&&!!t.to&&(0,a.rangeOverlaps)(e,{from:t.from,to:t.to},l):(0,o.isDayOfWeekType)(t)?(0,r.rangeContainsDayOfWeek)(e,t.dayOfWeek,l):(0,o.isDateInterval)(t)?l.isAfter(t.before,t.after)?(0,a.rangeOverlaps)(e,{from:l.addDays(t.after,1),to:l.addDays(t.before,-1)},l):(0,n.dateMatchModifiers)(e.from,t,l)||(0,n.dateMatchModifiers)(e.to,t,l):!!((0,o.isDateAfterType)(t)||(0,o.isDateBeforeType)(t))&&((0,n.dateMatchModifiers)(e.from,t,l)||(0,n.dateMatchModifiers)(e.to,t,l))))return!0;let c=u.filter(e=>"function"==typeof e);if(c.length){let t=e.from,n=l.differenceInCalendarDays(e.to,e.from);for(let e=0;e<=n;e++){if(c.some(e=>e(t)))return!0;t=l.addDays(t,1)}}return!1}},958585:e=>{"use strict";e.s({useRange:()=>a});var t=e.i(96796),n=e.i(825546),r=e.i(316409),i=e.i(722448);function a(e,a){let{disabled:o,excludeDisabled:s,selected:l,required:u,onSelect:c}=e,[d,h]=(0,t.useControlledValue)(l,c?l:void 0),p=c?l:d;return{selected:p,select:(t,i,l)=>{let{min:d,max:f}=e,m=t?(0,n.addToRange)(t,p,d,f,u,a):void 0;return s&&o&&(null==m?void 0:m.from)&&m.to&&(0,r.rangeContainsModifiers)({from:m.from,to:m.to},o,a)&&(m.from=t,m.to=void 0),c||h(m),null==c||c(m,t,i,l),m},isSelected:e=>p&&(0,i.rangeIncludesDate)(p,e,!1,a)}}},126405:e=>{"use strict";e.s({useSingle:()=>n});var t=e.i(96796);function n(e,n){let{selected:r,required:i,onSelect:a}=e,[o,s]=(0,t.useControlledValue)(r,a?r:void 0),l=a?r:o,{isSameDay:u}=n;return{selected:l,select:(e,t,n)=>{let r=e;return!i&&l&&l&&u(e,l)&&(r=void 0),a||s(r),null==a||a(r,e,t,n),r},isSelected:e=>!!l&&u(l,e)}}},403049:e=>{"use strict";e.s({useSelection:()=>i});var t=e.i(260075),n=e.i(958585),r=e.i(126405);function i(e,i){let a=(0,r.useSingle)(e,i),o=(0,t.useMulti)(e,i),s=(0,n.useRange)(e,i);switch(e.mode){case"single":return a;case"multiple":return o;case"range":return s;default:return}}},819720:e=>{"use strict";e.s({DayPicker:()=>C});var t=e.i(373150);e.i(223161);var n=e.i(64651),r=e.i(943940),i=e.i(28754),a=e.i(689206),o=e.i(79924),s=e.i(236707),l=e.i(390288),u=e.i(50216),c=e.i(376535),d=e.i(366440),h=e.i(70718),p=e.i(804517),f=e.i(390027),m=e.i(584279),g=e.i(833565),y=e.i(321190),b=e.i(874026),x=e.i(953854),w=e.i(9559),k=e.i(403049),S=e.i(722448),_=e.i(778116);function C(e){var C,A;let E=e;E.timeZone&&((E={...e}).today&&(E.today=new n.TZDate(E.today,E.timeZone)),E.month&&(E.month=new n.TZDate(E.month,E.timeZone)),E.defaultMonth&&(E.defaultMonth=new n.TZDate(E.defaultMonth,E.timeZone)),E.startMonth&&(E.startMonth=new n.TZDate(E.startMonth,E.timeZone)),E.endMonth&&(E.endMonth=new n.TZDate(E.endMonth,E.timeZone)),"single"===E.mode&&E.selected?E.selected=new n.TZDate(E.selected,E.timeZone):"multiple"===E.mode&&E.selected?E.selected=null==(C=E.selected)?void 0:C.map(e=>new n.TZDate(e,E.timeZone)):"range"===E.mode&&E.selected&&(E.selected={from:E.selected.from?new n.TZDate(E.selected.from,E.timeZone):void 0,to:E.selected.to?new n.TZDate(E.selected.to,E.timeZone):void 0}));let{components:T,formatters:M,labels:I,dateLib:N,locale:D,classNames:P}=(0,t.useMemo)(()=>{let e={...a.defaultLocale,...E.locale};return{dateLib:new i.DateLib({locale:e,weekStartsOn:E.broadcastCalendar?1:E.weekStartsOn,firstWeekContainsDate:E.firstWeekContainsDate,useAdditionalWeekYearTokens:E.useAdditionalWeekYearTokens,useAdditionalDayOfYearTokens:E.useAdditionalDayOfYearTokens,timeZone:E.timeZone,numerals:E.numerals},E.dateLib),components:(0,l.getComponents)(E.components),formatters:(0,d.getFormatters)(E.formatters),labels:{...g,...E.labels},locale:e,classNames:{...(0,c.getDefaultClassNames)(),...E.classNames}}},[E.locale,E.broadcastCalendar,E.weekStartsOn,E.firstWeekContainsDate,E.useAdditionalWeekYearTokens,E.useAdditionalDayOfYearTokens,E.timeZone,E.numerals,E.dateLib,E.components,E.formatters,E.labels,E.classNames]),{captionLayout:R,mode:O,navLayout:j,numberOfMonths:F=1,onDayBlur:L,onDayClick:z,onDayFocus:B,onDayKeyDown:U,onDayMouseEnter:H,onDayMouseLeave:W,onNextClick:V,onPrevClick:q,showWeekNumber:G,styles:$}=E,{formatCaption:K,formatDay:Y,formatMonthDropdown:X,formatWeekNumber:Z,formatWeekNumberHeader:J,formatWeekdayName:Q,formatYearDropdown:ee}=M,et=(0,b.useCalendar)(E,N),{days:en,months:er,navStart:ei,navEnd:ea,previousMonth:eo,nextMonth:es,goToMonth:el}=et,eu=(0,o.createGetModifiers)(en,E,ei,ea,N),{isSelected:ec,select:ed,selected:eh}=null!=(A=(0,k.useSelection)(E,N))?A:{},{blur:ep,focused:ef,isFocusTarget:em,moveFocus:eg,setFocused:ev}=(0,w.useFocus)(E,et,eu,null!=ec?ec:()=>!1,N),{labelDayButton:ey,labelGridcell:eb,labelGrid:ex,labelMonthDropdown:ew,labelNav:ek,labelPrevious:eS,labelNext:e_,labelWeekday:eC,labelWeekNumber:eA,labelWeekNumberHeader:eE,labelYearDropdown:eT}=I,eM=(0,t.useMemo)(()=>(0,f.getWeekdays)(N,E.ISOWeek),[N,E.ISOWeek]),eI=void 0!==O||void 0!==z,eN=(0,t.useCallback)(()=>{eo&&(el(eo),null==q||q(eo))},[eo,el,q]),eD=(0,t.useCallback)(()=>{es&&(el(es),null==V||V(es))},[el,es,V]),eP=(0,t.useCallback)((e,t)=>n=>{n.preventDefault(),n.stopPropagation(),ev(e),null==ed||ed(e.date,t,n),null==z||z(e.date,t,n)},[ed,z,ev]),eR=(0,t.useCallback)((e,t)=>n=>{ev(e),null==B||B(e.date,t,n)},[B,ev]),eO=(0,t.useCallback)((e,t)=>n=>{ep(),null==L||L(e.date,t,n)},[ep,L]),ej=(0,t.useCallback)((e,t)=>n=>{let r={ArrowLeft:[n.shiftKey?"month":"day","rtl"===E.dir?"after":"before"],ArrowRight:[n.shiftKey?"month":"day","rtl"===E.dir?"before":"after"],ArrowDown:[n.shiftKey?"year":"week","after"],ArrowUp:[n.shiftKey?"year":"week","before"],PageUp:[n.shiftKey?"year":"month","before"],PageDown:[n.shiftKey?"year":"month","after"],Home:["startOfWeek","before"],End:["endOfWeek","after"]};if(r[n.key]){n.preventDefault(),n.stopPropagation();let[e,t]=r[n.key];eg(e,t)}null==U||U(e.date,t,n)},[eg,U,E.dir]),eF=(0,t.useCallback)((e,t)=>n=>{null==H||H(e.date,t,n)},[H]),eL=(0,t.useCallback)((e,t)=>n=>{null==W||W(e.date,t,n)},[W]),ez=(0,t.useCallback)(e=>t=>{let n=Number(t.target.value);el(N.setMonth(N.startOfMonth(e),n))},[N,el]),eB=(0,t.useCallback)(e=>t=>{let n=Number(t.target.value);el(N.setYear(N.startOfMonth(e),n))},[N,el]),{className:eU,style:eH}=(0,t.useMemo)(()=>({className:[P[r.UI.Root],E.className].filter(Boolean).join(" "),style:{...null==$?void 0:$[r.UI.Root],...E.style}}),[P,E.className,E.style,$]),eW=(0,u.getDataAttributes)(E),eV=(0,t.useRef)(null);(0,y.useAnimation)(eV,!!E.animate,{classNames:P,months:er,focused:ef,dateLib:N});let eq={dayPickerProps:E,selected:eh,select:ed,isSelected:ec,months:er,nextMonth:es,previousMonth:eo,goToMonth:el,getModifiers:eu,components:T,classNames:P,styles:$,labels:I,formatters:M};return t.default.createElement(x.dayPickerContext.Provider,{value:eq},t.default.createElement(T.Root,{rootRef:E.animate?eV:void 0,className:eU,style:eH,dir:E.dir,id:E.id,lang:E.lang,nonce:E.nonce,title:E.title,role:E.role,"aria-label":E["aria-label"],...eW},t.default.createElement(T.Months,{className:P[r.UI.Months],style:null==$?void 0:$[r.UI.Months]},!E.hideNavigation&&!j&&t.default.createElement(T.Nav,{"data-animated-nav":E.animate?"true":void 0,className:P[r.UI.Nav],style:null==$?void 0:$[r.UI.Nav],"aria-label":ek(),onPreviousClick:eN,onNextClick:eD,previousMonth:eo,nextMonth:es}),er.map((e,n)=>{let i=(0,h.getMonthOptions)(e.date,ei,ea,M,N),a=(0,m.getYearOptions)(ei,ea,M,N);return t.default.createElement(T.Month,{"data-animated-month":E.animate?"true":void 0,className:P[r.UI.Month],style:null==$?void 0:$[r.UI.Month],key:n,displayIndex:n,calendarMonth:e},"around"===j&&!E.hideNavigation&&0===n&&t.default.createElement(T.PreviousMonthButton,{type:"button",className:P[r.UI.PreviousMonthButton],tabIndex:eo?void 0:-1,"aria-disabled":!eo||void 0,"aria-label":eS(eo),onClick:eN,"data-animated-button":E.animate?"true":void 0},t.default.createElement(T.Chevron,{disabled:!eo||void 0,className:P[r.UI.Chevron],orientation:"rtl"===E.dir?"right":"left"})),t.default.createElement(T.MonthCaption,{"data-animated-caption":E.animate?"true":void 0,className:P[r.UI.MonthCaption],style:null==$?void 0:$[r.UI.MonthCaption],calendarMonth:e,displayIndex:n},(null==R?void 0:R.startsWith("dropdown"))?t.default.createElement(T.DropdownNav,{className:P[r.UI.Dropdowns],style:null==$?void 0:$[r.UI.Dropdowns]},"dropdown"===R||"dropdown-months"===R?t.default.createElement(T.MonthsDropdown,{className:P[r.UI.MonthsDropdown],"aria-label":ew(),classNames:P,components:T,disabled:!!E.disableNavigation,onChange:ez(e.date),options:i,style:null==$?void 0:$[r.UI.Dropdown],value:N.getMonth(e.date)}):t.default.createElement("span",null,X(e.date,N)),"dropdown"===R||"dropdown-years"===R?t.default.createElement(T.YearsDropdown,{className:P[r.UI.YearsDropdown],"aria-label":eT(N.options),classNames:P,components:T,disabled:!!E.disableNavigation,onChange:eB(e.date),options:a,style:null==$?void 0:$[r.UI.Dropdown],value:N.getYear(e.date)}):t.default.createElement("span",null,ee(e.date,N)),t.default.createElement("span",{role:"status","aria-live":"polite",style:{border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap",wordWrap:"normal"}},K(e.date,N.options,N))):t.default.createElement(T.CaptionLabel,{className:P[r.UI.CaptionLabel],role:"status","aria-live":"polite"},K(e.date,N.options,N))),"around"===j&&!E.hideNavigation&&n===F-1&&t.default.createElement(T.NextMonthButton,{type:"button",className:P[r.UI.NextMonthButton],tabIndex:es?void 0:-1,"aria-disabled":!es||void 0,"aria-label":e_(es),onClick:eD,"data-animated-button":E.animate?"true":void 0},t.default.createElement(T.Chevron,{disabled:!es||void 0,className:P[r.UI.Chevron],orientation:"rtl"===E.dir?"left":"right"})),n===F-1&&"after"===j&&!E.hideNavigation&&t.default.createElement(T.Nav,{"data-animated-nav":E.animate?"true":void 0,className:P[r.UI.Nav],style:null==$?void 0:$[r.UI.Nav],"aria-label":ek(),onPreviousClick:eN,onNextClick:eD,previousMonth:eo,nextMonth:es}),t.default.createElement(T.MonthGrid,{role:"grid","aria-multiselectable":"multiple"===O||"range"===O,"aria-label":ex(e.date,N.options,N)||void 0,className:P[r.UI.MonthGrid],style:null==$?void 0:$[r.UI.MonthGrid]},!E.hideWeekdays&&t.default.createElement(T.Weekdays,{"data-animated-weekdays":E.animate?"true":void 0,className:P[r.UI.Weekdays],style:null==$?void 0:$[r.UI.Weekdays]},G&&t.default.createElement(T.WeekNumberHeader,{"aria-label":eE(N.options),className:P[r.UI.WeekNumberHeader],style:null==$?void 0:$[r.UI.WeekNumberHeader],scope:"col"},J()),eM.map((e,n)=>t.default.createElement(T.Weekday,{"aria-label":eC(e,N.options,N),className:P[r.UI.Weekday],key:n,style:null==$?void 0:$[r.UI.Weekday],scope:"col"},Q(e,N.options,N)))),t.default.createElement(T.Weeks,{"data-animated-weeks":E.animate?"true":void 0,className:P[r.UI.Weeks],style:null==$?void 0:$[r.UI.Weeks]},e.weeks.map((e,n)=>t.default.createElement(T.Week,{className:P[r.UI.Week],key:e.weekNumber,style:null==$?void 0:$[r.UI.Week],week:e},G&&t.default.createElement(T.WeekNumber,{week:e,style:null==$?void 0:$[r.UI.WeekNumber],"aria-label":eA(e.weekNumber,{locale:D}),className:P[r.UI.WeekNumber],scope:"row",role:"rowheader"},Z(e.weekNumber,N)),e.days.map(e=>{let{date:n}=e,i=eu(e);if(i[r.DayFlag.focused]=!i.hidden&&!!(null==ef?void 0:ef.isEqualTo(e)),i[r.SelectionState.selected]=(null==ec?void 0:ec(n))||i.selected,(0,_.isDateRange)(eh)){let{from:e,to:t}=eh;i[r.SelectionState.range_start]=!!(e&&t&&N.isSameDay(n,e)),i[r.SelectionState.range_end]=!!(e&&t&&N.isSameDay(n,t)),i[r.SelectionState.range_middle]=(0,S.rangeIncludesDate)(eh,n,!0,N)}let a=(0,p.getStyleForModifiers)(i,$,E.modifiersStyles),o=(0,s.getClassNamesForModifiers)(i,P,E.modifiersClassNames),l=eI||i.hidden?void 0:eb(n,i,N.options,N);return t.default.createElement(T.Day,{key:"".concat(N.format(n,"yyyy-MM-dd"),"_").concat(N.format(e.displayMonth,"yyyy-MM")),day:e,modifiers:i,className:o.join(" "),style:a,role:"gridcell","aria-selected":i.selected||void 0,"aria-label":l,"data-day":N.format(n,"yyyy-MM-dd"),"data-month":e.outside?N.format(n,"yyyy-MM"):void 0,"data-selected":i.selected||void 0,"data-disabled":i.disabled||void 0,"data-hidden":i.hidden||void 0,"data-outside":e.outside||void 0,"data-focused":i.focused||void 0,"data-today":i.today||void 0},!i.hidden&&eI?t.default.createElement(T.DayButton,{className:P[r.UI.DayButton],style:null==$?void 0:$[r.UI.DayButton],type:"button",day:e,modifiers:i,disabled:i.disabled||void 0,tabIndex:em(e)?0:-1,"aria-label":ey(n,i,N.options,N),onClick:eP(e,i),onBlur:eO(e,i),onFocus:eR(e,i),onKeyDown:ej(e,i),onMouseEnter:eF(e,i),onMouseLeave:eL(e,i)},Y(n,N.options,N)):!i.hidden&&Y(e.date,N.options,N))}))))))})),E.footer&&t.default.createElement(T.Footer,{className:P[r.UI.Footer],style:null==$?void 0:$[r.UI.Footer],role:"status","aria-live":"polite"},E.footer)))}},230277:e=>{"use strict";e.s({Calendar:()=>p});var t=e.i(290479),n=e.i(874133),r=e.i(381612),i=e.i(373150),a=e.i(819720),o=e.i(376535),s=e.i(940455),l=e.i(289702),u=e.i(704255),c=e.i(303652);let d=["January","February","March","April","May","June","July","August","September","October","November","December"];function h(e){let{displayMonth:a,goToMonth:o}=e,[h,p]=(0,i.useState)(!1),f=(0,i.useRef)(null),m=new Date().getFullYear(),g=Array.from({length:m-1900+1},(e,t)=>1900+t);return(0,i.useEffect)(()=>{if(h){let e=()=>{if(f.current){let e=g.indexOf(m);-1!==e&&f.current.scrollToIndex(e,{align:"end"})}else setTimeout(e,50)};setTimeout(e,0)}},[h,g,m]),(0,t.jsx)("div",{className:"relative mx-13 flex h-11 items-center justify-center",children:(0,t.jsxs)(c.Popover,{open:h,onOpenChange:p,children:[(0,t.jsx)(c.PopoverTrigger,{asChild:!0,children:(0,t.jsxs)("button",{className:"flex items-center gap-2 text-sm font-semibold text-muted-foreground hover:text-text-primary transition-colors rounded-4 px-2 py-1 hover:bg-accent/20",type:"button",children:[d[a.getMonth()]," ",a.getFullYear(),(0,t.jsx)(r.ChevronDown,{className:"h-7 w-7 text-text-secondary"})]})}),(0,t.jsx)(c.PopoverContent,{className:"w-[256px] p-1",align:"center",children:(0,t.jsxs)("div",{className:"flex h-80 p-2 pb-0",children:[(0,t.jsx)("div",{className:"flex-1 border-r border-border-muted",children:(0,t.jsx)("div",{className:"max-h-80 overflow-y-auto scrollbar-overlay mr-2",children:d.map((e,r)=>(0,t.jsx)(u.Button,{variant:"ghost",size:"medium",onClick:e=>{e.preventDefault(),e.stopPropagation(),o(new Date(a.getFullYear(),r,1))},className:(0,l.cn)("last:mb-4","w-full justify-start text-left",r===a.getMonth()&&"bg-accent/30 text-accent-foreground font-medium"),trailingIcon:r===a.getMonth()&&(0,t.jsx)(n.Check,{className:"h-7 w-7 text-blue"}),children:(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsx)("span",{children:e})})},e))})}),(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsx)("div",{className:"h-80 p-2 pb-0 ml-2",children:(0,t.jsx)(s.VList,{ref:f,className:"h-full scrollbar-overlay",itemSize:32,children:g.map((e,r)=>(0,t.jsx)(u.Button,{variant:"ghost",size:"medium",onClick:t=>{t.preventDefault(),t.stopPropagation(),o(new Date(e,a.getMonth(),1))},className:(0,l.cn)(r===g.length-1&&"mb-4","w-full justify-start text-left",e===a.getFullYear()&&"bg-accent/30 text-accent-foreground font-medium"),trailingIcon:e===a.getFullYear()&&(0,t.jsx)(n.Check,{className:"h-7 w-7 text-blue"}),children:(0,t.jsx)("span",{children:e})},e))})})})]})})]})})}function p(e){let{className:n,classNames:r,showOutsideDays:s=!0,...c}=e,d=(0,o.getDefaultClassNames)(),[p,f]=(0,i.useState)(c.month||new Date);(0,i.useEffect)(()=>{c.month&&f(c.month)},[c.month]);let m=(0,i.useMemo)(()=>({CaptionLabel:()=>(0,t.jsx)(h,{displayMonth:p||new Date,goToMonth:f})}),[p]);return(0,t.jsx)(a.DayPicker,{showOutsideDays:s,className:(0,l.cn)("p-4",n),month:p,onMonthChange:f,components:m,defaultMonth:p,classNames:{months:"relative flex ".concat(d.month),month_caption:"relative flex h-11 items-center justify-center ".concat(d.month_caption),weekdays:(0,l.cn)("flex flex-row",null==r?void 0:r.weekdays),weekday:(0,l.cn)("w-10 text-sm font-normal text-text-secondary",null==r?void 0:r.weekday),month:(0,l.cn)("w-full",null==r?void 0:r.month),caption_label:(0,l.cn)("truncate text-sm font-semibold text-muted-foreground",null==r?void 0:r.caption_label),button_next:(0,l.cn)((0,u.buttonVariants)({variant:"outline",size:"icon"}),"h-[28px] w-[28px] bg-transparent p-0 opacity-50 hover:opacity-100 absolute right-2 [&_svg]:w-7 [&_svg]:h-7 [&_svg]:stroke-[1.5] z-50 [&_svg]:fill-text-primary",null==r?void 0:r.button_next),button_previous:(0,l.cn)((0,u.buttonVariants)({variant:"outline",size:"icon"}),"h-[28px] w-[28px] bg-transparent p-0 opacity-50 hover:opacity-100 absolute left-2 [&_svg]:w-7 [&_svg]:h-7 [&_svg]:stroke-[1.5] z-50 [&_svg]:fill-text-primary",null==r?void 0:r.button_previous),nav:(0,l.cn)("flex items-start",null==r?void 0:r.nav),month_grid:(0,l.cn)("mx-auto mt-7",null==r?void 0:r.month_grid),week:(0,l.cn)("mt-4 flex w-max items-start",null==r?void 0:r.week),day:(0,l.cn)("flex size-10 flex-1 items-center justify-center p-0 text-sm",null==r?void 0:r.day),day_button:(0,l.cn)("size-10 rounded-4 p-0 font-normal transition-colors hover:bg-accent/40 aria-selected:opacity-100",null==r?void 0:r.day_button),range_start:(0,l.cn)("bg-accent [&>button]:bg-primary bg-red [&>button]:text-text-primary-foreground [&>button]:hover:bg-primary [&>button]:hover:text-text-primary-foreground day-range-start rounded-s-md",null==r?void 0:r.range_start),range_middle:(0,l.cn)("bg-accent !text-text-primary [&>button]:bg-transparent [&>button]:!text-text-primary [&>button]:hover:bg-transparent [&>button]:hover:!text-text-primary",null==r?void 0:r.range_middle),range_end:(0,l.cn)("bg-accent [&>button]:bg-primary [&>button]:text-text-primary-foreground [&>button]:hover:bg-primary [&>button]:hover:text-text-primary-foreground day-range-end rounded-e-md",null==r?void 0:r.range_end),selected:(0,l.cn)("[&>button]:bg-control-primary [&>button]:text-text-primary [&>button]:hover:bg-control-primary/50 [&>button]:hover:text-text-primary-inverse",null==r?void 0:r.selected),today:(0,l.cn)("[&>button]:bg-accent/30 [&>button]:text-accent-foreground",null==r?void 0:r.today),outside:(0,l.cn)("day-outside text-text-secondary opacity-50 aria-selected:bg-accent/50 aria-selected:text-text-secondary aria-selected:opacity-30",null==r?void 0:r.outside),disabled:(0,l.cn)("text-text-secondary opacity-50",null==r?void 0:r.disabled),hidden:(0,l.cn)("invisible flex-1",null==r?void 0:r.hidden),...r},...c})}p.displayName="Calendar"},718905:e=>{"use strict";e.s({DataTableRangeFilter:()=>a});var t=e.i(290479),n=e.i(373150),r=e.i(571227),i=e.i(289702);function a(e){let{filter:a,column:o,inputId:s,onFilterUpdate:l,className:u,...c}=e,d=o.columnDef.meta,[h,p]=n.useMemo(()=>{var e;let t=null==(e=o.columnDef.meta)?void 0:e.range;if(t)return t;let n=o.getFacetedMinMaxValues();return n?[n[0],n[1]]:[0,100]},[o]),f=n.useCallback(e=>{if(void 0===e||""===e)return"";let t=Number(e);return Number.isNaN(t)?"":t.toLocaleString(void 0,{maximumFractionDigits:0})},[]),m=n.useMemo(()=>Array.isArray(a.value)?a.value.map(f):[f(a.value),""],[a.value,f]),g=n.useCallback((e,t)=>{var n,r;let i=Number(e),o=Array.isArray(a.value)?a.value:["",""],s=t?null!=(n=o[1])?n:"":null!=(r=o[0])?r:"";(""===e||!Number.isNaN(i)&&(t?i>=h&&i<=(Number(s)||p):i<=p&&i>=(Number(s)||h)))&&l(a.filterId,{value:t?[e,s]:[s,e]})},[a.filterId,a.value,h,p,l]);return(0,t.jsxs)("div",{"data-slot":"range",className:(0,i.cn)("flex w-full items-center gap-4",u),...c,children:[(0,t.jsx)(r.Input,{id:"".concat(s,"-min"),type:"number","aria-label":"".concat(null==d?void 0:d.label," minimum value"),"aria-valuemin":h,"aria-valuemax":p,"data-slot":"range-min",inputMode:"numeric",placeholder:h.toString(),min:h,max:p,className:"h-10 w-full rounded",defaultValue:m[0],onChange:e=>g(e.target.value,!0)}),(0,t.jsx)("span",{className:"sr-only shrink-0 text-text-secondary",children:"to"}),(0,t.jsx)(r.Input,{id:"".concat(s,"-max"),type:"number","aria-label":"".concat(null==d?void 0:d.label," maximum value"),"aria-valuemin":h,"aria-valuemax":p,"data-slot":"range-max",inputMode:"numeric",placeholder:p.toString(),min:h,max:p,className:"h-10 w-full rounded",defaultValue:m[1],onChange:e=>g(e.target.value)})]})}},182133:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]])},115174:e=>{"use strict";e.s({Filter:()=>t.default});var t=e.i(182133)},443834:e=>{"use strict";e.s({Faceted:()=>p,FacetedBadgeList:()=>m,FacetedContent:()=>g,FacetedEmpty:()=>x,FacetedGroup:()=>w,FacetedInput:()=>y,FacetedItem:()=>k,FacetedList:()=>b,FacetedTrigger:()=>f});var t=e.i(290479),n=e.i(874133),r=e.i(115174),i=e.i(373150),a=e.i(704255),o=e.i(436531);e.i(567349);var s=e.i(111367),l=e.i(303652),u=e.i(289702),c=e.i(972899);let d=i.createContext(null);function h(e){let t=i.useContext(d);if(!t)throw Error("`".concat(e,"` must be within Faceted"));return t}function p(e){let{open:n,onOpenChange:r,value:a,onValueChange:o,children:s,multiple:u=!1,...c}=e,[h,p]=i.useState(!1),f=void 0!==n,m=f?n:h,g=i.useCallback(e=>{f||p(e),null==r||r(e)},[f,r]),y=i.useCallback(e=>{if(o)if(u){let t=Array.isArray(a)?a:[];o(t.includes(e)?t.filter(t=>t!==e):[...t,e])}else a===e?o(void 0):o(e),requestAnimationFrame(()=>g(!1))},[u,a,o,g]),b=i.useMemo(()=>({value:a,onItemSelect:y,multiple:u}),[a,y,u]);return(0,t.jsx)(d.Provider,{value:b,children:(0,t.jsx)(l.Popover,{open:m,onOpenChange:g,...c,children:s})})}function f(e){let{className:n,children:r,...i}=e;return(0,t.jsx)(l.PopoverTrigger,{...i,className:(0,u.cn)("justify-between text-left",n),children:r})}function m(e){let{options:n=[],max:r=2,placeholder:a="Select options...",className:s,badgeClassName:l,...c}=e,d=h("FacetedBadgeList"),p=Array.isArray(d.value)?d.value:[d.value].filter(Boolean),f=i.useCallback(e=>{var t;let r=n.find(t=>t.value===e);return null!=(t=null==r?void 0:r.label)?t:e},[n]);return p&&0!==p.length?(0,t.jsx)("div",{...c,className:(0,u.cn)("flex flex-wrap items-center gap-2",s),children:p.length>r?(0,t.jsxs)(o.Badge,{variant:"secondary",className:(0,u.cn)("rounded-2 px-2 font-normal",l),children:[p.length," selected"]}):p.map(e=>(0,t.jsx)(o.Badge,{variant:"secondary",className:(0,u.cn)("rounded-2 px-2 font-normal",l),children:(0,t.jsx)("span",{className:"truncate",children:f(e)})},e))}):(0,t.jsx)("div",{...c,className:"flex w-full items-center gap-2 text-text-secondary",children:a})}function g(e){let{className:n,children:r,...i}=e;return(0,t.jsx)(l.PopoverContent,{...i,align:"start",className:(0,u.cn)("w-[200px] origin-(--radix-popover-content-transform-origin) p-0",n),children:(0,t.jsx)(s.Command,{children:r})})}let y=s.CommandInput,b=s.CommandList,x=s.CommandEmpty,w=s.CommandGroup;function k(e){let{value:o,onSelect:l,className:d,children:p,...f}=e,m=h("FacetedItem"),g=m.multiple?Array.isArray(m.value)&&m.value.includes(o):m.value===o,y=i.useCallback(e=>{l?l(e):m.onItemSelect&&m.onItemSelect(e)},[l,m.onItemSelect]),b=i.Children.toArray(p),x=(0,t.jsx)(c.Icon,{size:"sm",as:r.Filter}),w="",k=null;return b.forEach(e=>{if(i.isValidElement(e)){if(e.type===c.Icon)x=e;else if("span"===e.type){var t;let n=e.props;(null==(t=n.className)?void 0:t.includes("font-semibold"))?k=e:w="string"==typeof n.children?n.children:""}}}),(0,t.jsx)(s.CommandItem,{"aria-selected":g,"data-selected":g,className:(0,u.cn)("p-0",d),onSelect:()=>y(o),...f,children:(0,t.jsxs)(a.Button,{variant:"ghost",size:"medium",className:"flex w-full flex-row justify-start items-center h-auto",leadingIcon:x,trailingIcon:g?(0,t.jsx)(c.Icon,{as:n.Check,size:"md",className:"text-blue"}):void 0,children:[(0,t.jsx)("span",{className:"flex-1 text-left mr-1",children:w}),k]})})}s.CommandSeparator},310178:e=>{"use strict";e.s({useFilterFocus:()=>a});var t=e.i(647968),n=e.i(608294),r=e.i(373150);let i=(0,t.atom)({filterId:null,timestamp:0}),a=()=>{let[e,t]=(0,n.useAtom)(i),a=(0,r.useCallback)((e,n,r)=>{t({filterId:e,timestamp:Date.now()}),requestAnimationFrame(()=>{let t=n?"".concat(n,"-filter-").concat(e):"filter-".concat(e),i=document.getElementById(t);if(!i&&n&&(i=document.getElementById("filter-".concat(e))),i||(i=document.getElementById("".concat(e,"-operator-trigger"))),i){var a;i.scrollIntoView({behavior:null!=(a=null==r?void 0:r.scrollBehavior)?a:"smooth",block:"center"}),i.focus()}})},[t]),o=(0,r.useCallback)(()=>{t({filterId:null,timestamp:0})},[t]),s=(0,r.useCallback)(t=>e.filterId===t,[e.filterId]);return(0,r.useEffect)(()=>{if(e.filterId&&e.timestamp>0){let e=setTimeout(()=>{o()},3e3);return()=>clearTimeout(e)}},[e.timestamp,e.filterId,o]),{focusFilter:a,clearFocus:o,isFilterFocused:s,currentlyFocusedFilter:e.filterId}}},864181:e=>{"use strict";e.s({dataTableConfig:()=>n});var t=e.i(555168);let n={textOperators:[{label:"Contains",value:"like"},{label:"Does not contain",value:"notLike"},{label:"Is",value:"eq"},{label:"Is not",value:"ne"},{label:"Is empty",value:"isEmpty"},{label:"Is not empty",value:"isNotEmpty"}],numericOperators:[{label:"Is",value:"eq"},{label:"Is not",value:"ne"},{label:"Is less than",value:"lt"},{label:"Is less than or equal to",value:"lte"},{label:"Is greater than",value:"gt"},{label:"Is greater than or equal to",value:"gte"},{label:"Is between",value:"isBetween"},{label:"Is empty",value:"isEmpty"},{label:"Is not empty",value:"isNotEmpty"}],dateOperators:[{label:"Is",value:"eq"},{label:"Is not",value:"ne"},{label:"Is before",value:"lt"},{label:"Is after",value:"gt"},{label:"Is on or before",value:"lte"},{label:"Is on or after",value:"gte"},{label:"Is between",value:"isBetween"},{label:"Is relative to today",value:"isRelativeToToday"},{label:"Is empty",value:"isEmpty"},{label:"Is not empty",value:"isNotEmpty"}],selectOperators:[{label:"Is",value:"eq"},{label:"Is not",value:"ne"},{label:"Is empty",value:"isEmpty"},{label:"Is not empty",value:"isNotEmpty"}],multiSelectOperators:[{label:"Has any of",value:"inArray"},{label:"Has none of",value:"notInArray"},{label:"Is empty",value:"isEmpty"},{label:"Is not empty",value:"isNotEmpty"}],booleanOperators:[{label:"Is",value:"eq"},{label:"Is not",value:"ne"}],sortOrders:[{label:"Asc",value:"asc"},{label:"Desc",value:"desc"}],filterVariants:["text","number","range","date","dateRange","boolean","select","multiSelect"],operators:["like","notLike","eq","ne","inArray","notInArray","isEmpty","isNotEmpty","lt","lte","gt","gte","isBetween","isRelativeToToday"],joinOperators:["and","or"]};t.z.object({id:t.z.string(),value:t.z.union([t.z.string(),t.z.array(t.z.string())]),variant:t.z.enum(n.filterVariants),operator:t.z.enum(n.operators),filterId:t.z.string()})},824368:e=>{"use strict";e.s({getCommonPinningStyles:()=>n,getDefaultFilterOperator:()=>i,getFilterOperators:()=>r});var t=e.i(864181);function n(e){let{column:t,withBorder:n=!1,ovewriteWidth:r}=e,i=t.getIsPinned(),a="left"===i&&t.getIsLastColumn("left"),o="right"===i&&t.getIsFirstColumn("right");return{boxShadow:n?a?"-4px 0 4px -4px var(--border) inset":o?"4px 0 4px -4px var(--border) inset":void 0:void 0,left:"left"===i?"".concat(t.getStart("left"),"px"):void 0,right:"right"===i?"".concat(t.getAfter("right"),"px"):void 0,opacity:i?.97:1,position:i?"sticky":"relative",width:null!=r?r:t.getSize(),zIndex:+!!i}}function r(e){var n;return null!=(n=({text:t.dataTableConfig.textOperators,number:t.dataTableConfig.numericOperators,range:t.dataTableConfig.numericOperators,date:t.dataTableConfig.dateOperators,dateRange:t.dataTableConfig.dateOperators,boolean:t.dataTableConfig.booleanOperators,select:t.dataTableConfig.selectOperators,multiSelect:t.dataTableConfig.multiSelectOperators})[e])?n:t.dataTableConfig.textOperators}function i(e){var t,n;return null!=(n=null==(t=r(e)[0])?void 0:t.value)?n:"text"===e?"like":"eq"}},703496:e=>{"use strict";function t(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return"";try{var n,r,i;return new Intl.DateTimeFormat("en-US",{month:null!=(n=t.month)?n:"long",day:null!=(r=t.day)?r:"numeric",year:null!=(i=t.year)?i:"numeric",...t}).format(new Date(e))}catch(e){return""}}e.s({formatDate:()=>t})},508697:e=>{"use strict";e.s({generateId:()=>r});var t=e.i(257140);let n={};function r(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i="object"==typeof e?void 0:e,{length:a=12,separator:o="_"}="object"==typeof e?e:r,s=(0,t.customAlphabet)("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",a)();return i?"".concat(n[i]).concat(o).concat(s):s}},12560:e=>{"use strict";e.s({DataTableFilterList:()=>A});var t=e.i(290479),n=e.i(149404),r=e.i(334232),i=e.i(874133),a=e.i(611988),o=e.i(749248),s=e.i(373150),l=e.i(704255),u=e.i(230277),c=e.i(718905),d=e.i(436531);e.i(567349);var h=e.i(111367),p=e.i(443834),f=e.i(571227),m=e.i(303652),g=e.i(365918),y=e.i(310178),b=e.i(252390),x=e.i(824368),w=e.i(703496),k=e.i(508697),S=e.i(289702),_=e.i(972899);let C=["backspace","delete"];function A(e){let{table:r,onFiltersChange:i,filters:o,...u}=e,c=s.useId(),p=s.useId(),f=s.useId(),[g,w]=s.useState(!1),[S,C]=s.useState(null),[A,T]=s.useState(null),M=r.getAllColumns().filter(e=>e.columnDef.enableColumnFilter),{track:I}=(0,b.default)(),{focusFilter:N,isFilterFocused:D}=(0,y.useFilterFocus)();s.useEffect(()=>{let e=!1,t=null,n=n=>{var r,i,a,o;let s=n.target;s&&(s instanceof HTMLInputElement||s instanceof HTMLTextAreaElement)&&((null==(r=s.id)?void 0:r.includes("-filter-search"))||(null==(i=s.id)?void 0:i.includes("-input"))||(null==(a=s.id)?void 0:a.includes("-search"))||(null==(o=s.id)?void 0:o.includes("-field-search")))&&(e=!0,t=s)},r=n=>{var r,i,a,o;if(!e)return;let s=n.relatedTarget;s&&!(s instanceof HTMLInputElement||s instanceof HTMLTextAreaElement)&&!((null==(r=s.id)?void 0:r.includes("-filter-search"))||(null==(i=s.id)?void 0:i.includes("-input"))||(null==(a=s.id)?void 0:a.includes("-search"))||(null==(o=s.id)?void 0:o.includes("-field-search"))||s.closest('[role="listitem"]')||s.closest('[data-filter-list="true"]'))&&t&&(n.preventDefault(),setTimeout(()=>{if(t&&document.contains(t)){t.focus();let e=t.value.length;t.setSelectionRange(e,e)}},0))},i=HTMLElement.prototype.focus;return HTMLElement.prototype.focus=function(){for(var n,r,a,o,s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];if(!e||!t||this===t||this instanceof HTMLInputElement||this instanceof HTMLTextAreaElement||(null==(n=this.id)?void 0:n.includes("-filter-search"))||(null==(r=this.id)?void 0:r.includes("-input"))||(null==(a=this.id)?void 0:a.includes("-search"))||(null==(o=this.id)?void 0:o.includes("-field-search"))||this.closest('[role="listitem"]')||this.closest('[data-filter-list="true"]'))return i.apply(this,l)},document.addEventListener("focusin",n,!0),document.addEventListener("focusout",r,!0),()=>{document.removeEventListener("focusin",n,!0),document.removeEventListener("focusout",r,!0),HTMLElement.prototype.focus=i}},[]),s.useEffect(()=>{let e=o.filter(e=>M.some(t=>t.id===e.id));e.length!==o.length&&i(e)},[M,o,i]);let P=s.useCallback(e=>{var t,n;if(!e)return;let r=o.find(t=>t.id===e.id);if(r){w(!1),N(r.filterId,c);return}let a=(0,k.generateId)({length:8}),s=null!=(n=null==(t=e.columnDef.meta)?void 0:t.variant)?n:"text";i(t=>[...t,{id:e.id,value:"",variant:s,operator:(0,x.getDefaultFilterOperator)(s),filterId:a}]),I("library_filter_added",{columnId:e.id}),w(!1),C("".concat(a,"-operator-trigger")),T(a)},[i,w,I,o]),R=s.useCallback((e,t)=>{i(n=>n.map(n=>n.filterId===e?{...n,...t}:n))},[i]),O=s.useCallback(e=>{i(o.filter(t=>t.filterId!==e))},[o,i]);return s.useEffect(()=>{if(S){let e=setTimeout(()=>{let e=document.getElementById(S);e&&e.focus(),C(null),T(null)},0);return()=>clearTimeout(e)}},[S,o]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(m.Popover,{open:g,onOpenChange:w,children:[(0,t.jsx)(m.PopoverTrigger,{asChild:!0,children:(0,t.jsx)(l.Button,{className:"font-medium border-dashed pr-2 pl-3",variant:"outline",size:"medium",leadingIcon:(0,t.jsx)(_.Icon,{as:a.SlidersHorizontal}),trailingIcon:o.length>1?(0,t.jsxs)(d.Badge,{variant:"secondary",className:" rounded-3 px-[5px] font-mono font-medium text-xxs text-text-secondary hover:bg-background-primary",children:["+",o.length-1]}):void 0,children:o.length>0?"Filtered":"Filter"})}),(0,t.jsx)(m.PopoverContent,{align:"start","aria-describedby":f,"aria-labelledby":p,className:"flex w-full p-0 max-w-[var(--radix-popover-content-available-width)] overflow-hidden origin-[var(--radix-popover-content-transform-origin)] flex-col min-w-[200px]",...u,children:(0,t.jsxs)(h.Command,{className:"gap-0",children:[(0,t.jsx)(n.CommandInput,{id:"".concat(c,"-filter-search"),className:"text-sm w-full px-4 py-4 border-b placeholder:text-text-secondary bg-transparent focus-visible:outline-none font-medium text-text-primary",placeholder:"Search attributes..."}),(0,t.jsxs)(h.CommandList,{className:"scrollbar-overlay",children:[(0,t.jsx)(h.CommandEmpty,{children:"No columns found."}),(0,t.jsx)(h.CommandGroup,{className:"p-2",children:M.map(e=>{var n;return(0,t.jsx)(h.CommandItem,{asChild:!0,children:(0,t.jsx)(l.Button,{variant:"ghost",size:"medium",className:"w-full justify-start",onClick:()=>P(e),children:(0,t.jsx)("span",{className:"truncate",children:null==(n=e.columnDef.meta)?void 0:n.label})})},e.id)})})]})]})})]}),(0,t.jsx)("div",{"data-filter-list":"true",className:"contents",children:o.map((e,n)=>(0,t.jsx)(E,{filter:e,index:n,filterItemId:"".concat(c,"-filter-").concat(e.filterId),columns:M,onFilterUpdate:R,onFilterRemove:O,initiallyOpenOperatorSelect:e.filterId===A,isHighlighted:D(e.filterId)},e.filterId))})]})}function E(e){var a,d,y;let{filter:b,filterItemId:k,columns:A,onFilterUpdate:E,onFilterRemove:T,initiallyOpenOperatorSelect:M,isHighlighted:I=!1}=e,[N,D]=s.useState(!1),[P,R]=s.useState(!1),[O,j]=s.useState(!1);s.useEffect(()=>{M&&R(!0)},[M,R]);let F=A.find(e=>e.id===b.id),L=s.useCallback(e=>{!(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement)&&(N||P||O||C.includes(e.key.toLowerCase())&&(e.preventDefault(),T(b.filterId)))},[b.filterId,N,P,O,T]);if(!F)return null;let z="".concat(k,"-field-listbox"),B="".concat(k,"-operator-listbox"),U="".concat(k,"-input"),H=F.columnDef.meta,W=(0,x.getFilterOperators)(b.variant);return(0,t.jsxs)("div",{role:"listitem",id:k,tabIndex:-1,className:(0,S.cn)("flex items-center h-11 border divide-x divide-border overflow-hidden rounded-4 transition-colors",I&&"bg-accent"),onKeyDown:L,children:[(0,t.jsxs)(m.Popover,{open:N,onOpenChange:D,children:[(0,t.jsx)(m.PopoverTrigger,{asChild:!0,children:(0,t.jsx)(l.Button,{role:"combobox","aria-controls":z,variant:"ghost",className:"!rounded-none",size:"smaller",label:null!=(y=null==(d=A.find(e=>e.id===b.id))||null==(a=d.columnDef.meta)?void 0:a.label)?y:"Select field"})}),(0,t.jsx)(m.PopoverContent,{id:z,align:"start",className:"w-40 origin-[var(--radix-popover-content-transform-origin)] p-0 overflow-hidden",children:(0,t.jsxs)(h.Command,{className:"gap-0",children:[(0,t.jsx)(n.CommandInput,{id:"".concat(k,"-field-search"),className:"text-sm w-full px-4 py-4 border-b placeholder:text-text-secondary bg-transparent focus-visible:outline-none font-medium text-text-primary",placeholder:"Search fields..."}),(0,t.jsxs)(h.CommandList,{className:"scrollbar-overlay",children:[(0,t.jsx)(h.CommandEmpty,{children:"No fields found."}),(0,t.jsx)(h.CommandGroup,{className:"p-2",children:A.map(e=>{var n;return(0,t.jsx)(h.CommandItem,{value:e.id,asChild:!0,children:(0,t.jsx)(l.Button,{variant:"ghost",size:"medium",className:"w-full justify-start",onClick:()=>{var t,n,r,i;E(b.filterId,{id:e.id,variant:null!=(r=null==(t=e.columnDef.meta)?void 0:t.variant)?r:"text",operator:(0,x.getDefaultFilterOperator)(null!=(i=null==(n=e.columnDef.meta)?void 0:n.variant)?i:"text"),value:""}),D(!1)},trailingIcon:(0,t.jsx)(_.Icon,{as:i.Check,className:(0,S.cn)("size-7 shrink-0 text-blue",e.id===b.id?"opacity-100":"opacity-0")}),children:(0,t.jsx)("span",{className:"truncate",children:null==(n=e.columnDef.meta)?void 0:n.label})})},e.id)})})]})]})})]}),(0,t.jsxs)(g.Select,{open:P,onOpenChange:R,value:b.operator,onValueChange:e=>E(b.filterId,{operator:e,value:"isEmpty"===e||"isNotEmpty"===e?"":b.value}),children:[(0,t.jsx)(g.SelectTrigger,{id:"".concat(b.filterId,"-operator-trigger"),className:"!h-11 !rounded-none bg-transparent hover:bg-accent",hideIcon:!0,"aria-controls":B,children:(0,t.jsx)("div",{className:"truncate",children:(0,t.jsx)(g.SelectValue,{placeholder:b.operator})})}),(0,t.jsx)(g.SelectContent,{id:B,className:"origin-[var(--radix-select-content-transform-origin)] w-[200px] p-1",children:W.map(e=>(0,t.jsx)(g.SelectItem,{value:e.value,children:e.label},e.value))})]}),"isEmpty"!==b.operator&&"isNotEmpty"!==b.operator&&(0,t.jsx)("div",{className:"min-w-24 sm:min-w-36 flex-1",children:function(e){var n,i,a,o;let{filter:s,inputId:d,column:h,columnMeta:y,onFilterUpdate:b,showValueSelector:x,setShowValueSelector:k}=e;if("isEmpty"===s.operator||"isNotEmpty"===s.operator)return(0,t.jsx)("div",{id:d,role:"status","aria-label":"".concat(null==y?void 0:y.label," filter is ").concat("isEmpty"===s.operator?"empty":"not empty"),"aria-live":"polite",className:"h-11 w-full rounded border bg-transparent dark:bg-input/30"});switch(s.variant){case"text":case"number":case"range":{if("range"===s.variant&&"isBetween"===s.operator||"isBetween"===s.operator)return(0,t.jsx)(c.DataTableRangeFilter,{filter:s,column:h,inputId:d,onFilterUpdate:b});let e="number"===s.variant||"range"===s.variant;return(0,t.jsx)(f.Input,{id:d,type:e?"number":s.variant,"aria-label":"".concat(null==y?void 0:y.label," filter value"),"aria-describedby":"".concat(d,"-description"),inputMode:e?"numeric":void 0,placeholder:null!=(n=null==y?void 0:y.placeholder)?n:"Enter a value...",className:"h-11 w-full rounded border-none focus-visible:ring-0 focus-visible:ring-offset-0",defaultValue:"string"==typeof s.value?s.value:void 0,onChange:e=>b(s.filterId,{value:e.target.value})})}case"boolean":{if(Array.isArray(s.value))return null;let e="".concat(d,"-listbox");return(0,t.jsxs)(g.Select,{open:x,onOpenChange:k,value:s.value,onValueChange:e=>b(s.filterId,{value:e}),children:[(0,t.jsx)(g.SelectTrigger,{id:d,"aria-controls":e,"aria-label":"".concat(null==y?void 0:y.label," boolean filter"),className:"h-11 w-full rounded [&[data-size]]:h-7",children:(0,t.jsx)(g.SelectValue,{placeholder:s.value?"True":"False"})}),(0,t.jsxs)(g.SelectContent,{id:e,children:[(0,t.jsx)(g.SelectItem,{value:"true",children:"True"}),(0,t.jsx)(g.SelectItem,{value:"false",children:"False"})]})]})}case"select":case"multiSelect":{let e="".concat(d,"-listbox"),n="multiSelect"===s.variant,r=n?Array.isArray(s.value)?s.value:[]:"string"==typeof s.value?s.value:void 0;return(0,t.jsxs)(p.Faceted,{open:x,onOpenChange:k,value:r,onValueChange:e=>{b(s.filterId,{value:e})},multiple:n,children:[(0,t.jsx)(p.FacetedTrigger,{asChild:!0,children:(0,t.jsx)(l.Button,{id:d,"aria-controls":e,"aria-label":"".concat(null==y?void 0:y.label," filter value").concat(n?"s":""),variant:"ghost",size:"sm",className:"w-full rounded font-normal",children:(0,t.jsx)(p.FacetedBadgeList,{options:null==y?void 0:y.options,placeholder:null!=(a=null==y?void 0:y.placeholder)?a:"Select option".concat(n?"s":"","...")})})}),(0,t.jsxs)(p.FacetedContent,{id:e,className:"w-[200px] origin-[var(--radix-popover-content-transform-origin)]",children:[(0,t.jsx)(p.FacetedInput,{id:"".concat(d,"-search"),className:"placeholder:text-text-secondary","aria-label":"Search ".concat(null==y?void 0:y.label," options"),placeholder:null!=(o=null==y?void 0:y.placeholder)?o:"Search options..."}),(0,t.jsxs)(p.FacetedList,{children:[(0,t.jsx)(p.FacetedEmpty,{children:"No options found."}),(0,t.jsx)(p.FacetedGroup,{children:null==y||null==(i=y.options)?void 0:i.map(e=>(0,t.jsxs)(p.FacetedItem,{value:e.value,children:[e.icon&&(0,t.jsx)(_.Icon,{as:e.icon}),(0,t.jsx)("span",{children:e.label}),void 0!==e.count&&(0,t.jsx)("span",{className:"font-semibold text-xs bg-secondary text-text-secondary rounded-2 px-2 ",children:e.count})]},e.value))})]})]})]})}case"date":case"dateRange":{let e="".concat(d,"-listbox"),n=Array.isArray(s.value)?s.value.filter(Boolean):[s.value,s.value].filter(Boolean),i="isBetween"===s.operator&&2===n.length?"".concat((0,w.formatDate)(new Date(Number(n[0])))," - ").concat((0,w.formatDate)(new Date(Number(n[1])))):n[0]?(0,w.formatDate)(new Date(Number(n[0]))):"Pick a date";return(0,t.jsxs)(m.Popover,{open:x,onOpenChange:k,children:[(0,t.jsx)(m.PopoverTrigger,{asChild:!0,children:(0,t.jsx)(l.Button,{id:d,"aria-controls":e,"aria-label":"".concat(null==y?void 0:y.label," date filter"),variant:"ghost",size:"sm",className:(0,S.cn)("w-full justify-start rounded text-left",!s.value&&"text-text-secondary"),leadingIcon:(0,t.jsx)(_.Icon,{as:r.CalendarIcon}),children:(0,t.jsx)("span",{className:"truncate",children:i})})}),(0,t.jsx)(m.PopoverContent,{id:e,align:"start",className:"w-auto origin-[var(--radix-popover-content-transform-origin)] p-0",children:"isBetween"===s.operator?(0,t.jsx)(u.Calendar,{"aria-label":"Select ".concat(null==y?void 0:y.label," date range"),mode:"range",autoFocus:!0,selected:2===n.length?{from:new Date(Number(n[0])),to:new Date(Number(n[1]))}:{from:new Date,to:new Date},onSelect:e=>{var t,n,r,i;b(s.filterId,{value:e?[(null!=(r=null==(t=e.from)?void 0:t.getTime())?r:"").toString(),(null!=(i=null==(n=e.to)?void 0:n.getTime())?i:"").toString()]:[]})}}):(0,t.jsx)(u.Calendar,{"aria-label":"Select ".concat(null==y?void 0:y.label," date"),mode:"single",initialFocus:!0,selected:n[0]?new Date(Number(n[0])):void 0,onSelect:e=>{var t;b(s.filterId,{value:(null!=(t=null==e?void 0:e.getTime())?t:"").toString()})}})})]})}default:return null}}({filter:b,inputId:U,column:F,columnMeta:H,onFilterUpdate:E,showValueSelector:O,setShowValueSelector:j})}),(0,t.jsx)(l.Button,{"aria-controls":k,variant:"ghost",size:"icon",className:"size-10 rounded-none",leadingIcon:(0,t.jsx)(_.Icon,{as:o.Trash}),"aria-label":"Delete filter",onClick:()=>T(b.filterId)})]})}},903823:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("arrow-down-up",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"m21 8-4-4-4 4",key:"1c9v7m"}],["path",{d:"M17 4v16",key:"7dpous"}]])},443180:e=>{"use strict";e.s({ArrowDownUp:()=>t.default});var t=e.i(903823)},959509:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("grip-horizontal",[["circle",{cx:"12",cy:"9",r:"1",key:"124mty"}],["circle",{cx:"19",cy:"9",r:"1",key:"1ruzo2"}],["circle",{cx:"5",cy:"9",r:"1",key:"1a8b28"}],["circle",{cx:"12",cy:"15",r:"1",key:"1e56xg"}],["circle",{cx:"19",cy:"15",r:"1",key:"1a92ep"}],["circle",{cx:"5",cy:"15",r:"1",key:"5r1jwy"}]])},945941:e=>{"use strict";e.s({GripHorizontal:()=>t.default});var t=e.i(959509)},230613:e=>{"use strict";e.s({CSS:()=>A,add:()=>k,canUseDOM:()=>r,findFirstFocusableNode:()=>T,getEventCoordinates:()=>C,getOwnerDocument:()=>c,getWindow:()=>o,isDocument:()=>s,isHTMLElement:()=>l,isKeyboardEvent:()=>_,isNode:()=>a,isSVGElement:()=>u,isWindow:()=>i,subtract:()=>S,useCombinedRefs:()=>n,useEvent:()=>h,useInterval:()=>p,useIsomorphicLayoutEffect:()=>d,useLatestValue:()=>f,useLazyMemo:()=>m,useNodeRef:()=>g,usePrevious:()=>y,useUniqueId:()=>x});var t=e.i(373150);function n(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return(0,t.useMemo)(()=>e=>{n.forEach(t=>t(e))},n)}let r="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;function i(e){let t=Object.prototype.toString.call(e);return"[object Window]"===t||"[object global]"===t}function a(e){return"nodeType"in e}function o(e){var t,n;return e?i(e)?e:a(e)&&null!=(t=null==(n=e.ownerDocument)?void 0:n.defaultView)?t:window:window}function s(e){let{Document:t}=o(e);return e instanceof t}function l(e){return!i(e)&&e instanceof o(e).HTMLElement}function u(e){return e instanceof o(e).SVGElement}function c(e){return e?i(e)?e.document:a(e)?s(e)?e:l(e)||u(e)?e.ownerDocument:document:document:document}let d=r?t.useLayoutEffect:t.useEffect;function h(e){let n=(0,t.useRef)(e);return d(()=>{n.current=e}),(0,t.useCallback)(function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return null==n.current?void 0:n.current(...t)},[])}function p(){let e=(0,t.useRef)(null);return[(0,t.useCallback)((t,n)=>{e.current=setInterval(t,n)},[]),(0,t.useCallback)(()=>{null!==e.current&&(clearInterval(e.current),e.current=null)},[])]}function f(e,n){void 0===n&&(n=[e]);let r=(0,t.useRef)(e);return d(()=>{r.current!==e&&(r.current=e)},n),r}function m(e,n){let r=(0,t.useRef)();return(0,t.useMemo)(()=>{let t=e(r.current);return r.current=t,t},[...n])}function g(e){let n=h(e),r=(0,t.useRef)(null),i=(0,t.useCallback)(e=>{e!==r.current&&(null==n||n(e,r.current)),r.current=e},[]);return[r,i]}function y(e){let n=(0,t.useRef)();return(0,t.useEffect)(()=>{n.current=e},[e]),n.current}let b={};function x(e,n){return(0,t.useMemo)(()=>{if(n)return n;let t=null==b[e]?0:b[e]+1;return b[e]=t,e+"-"+t},[e,n])}function w(e){return function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((t,n)=>{for(let[r,i]of Object.entries(n)){let n=t[r];null!=n&&(t[r]=n+e*i)}return t},{...t})}}let k=w(1),S=w(-1);function _(e){if(!e)return!1;let{KeyboardEvent:t}=o(e.target);return t&&e instanceof t}function C(e){if(function(e){if(!e)return!1;let{TouchEvent:t}=o(e.target);return t&&e instanceof t}(e)){if(e.touches&&e.touches.length){let{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){let{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return"clientX"in e&&"clientY"in e?{x:e.clientX,y:e.clientY}:null}let A=Object.freeze({Translate:{toString(e){if(!e)return;let{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;let{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[A.Translate.toString(e),A.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),E="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function T(e){return e.matches(E)?e:e.querySelector(E)}},207783:e=>{"use strict";e.s({HiddenText:()=>r,LiveRegion:()=>i,useAnnouncement:()=>a});var t=e.i(373150);let n={display:"none"};function r(e){let{id:r,value:i}=e;return t.default.createElement("div",{id:r,style:n},i)}function i(e){let{id:n,announcement:r,ariaLiveType:i="assertive"}=e;return t.default.createElement("div",{id:n,style:{position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":i,"aria-atomic":!0},r)}function a(){let[e,n]=(0,t.useState)("");return{announce:(0,t.useCallback)(e=>{null!=e&&n(e)},[]),announcement:e}}},691208:e=>{"use strict";e.s({DndContext:()=>eL,DragOverlay:()=>e0,KeyboardCode:()=>i,KeyboardSensor:()=>ei,MeasuringStrategy:()=>l,MouseSensor:()=>ed,TouchSensor:()=>ep,closestCenter:()=>I,closestCorners:()=>N,defaultDropAnimation:()=>eJ,defaultDropAnimationSideEffects:()=>eZ,getClientRect:()=>F,getFirstCollision:()=>T,getScrollableAncestors:()=>z,useDndContext:()=>eH,useDraggable:()=>eU,useDroppable:()=>eV,useSensor:()=>w,useSensors:()=>k});var t,n,r,i,a,o,s,l,u,c,d=e.i(373150),h=e.i(784445),p=e.i(230613),f=e.i(207783);let m=(0,d.createContext)(null),g={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},y={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function b(e){let{announcements:t=y,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=g}=e,{announce:a,announcement:o}=(0,f.useAnnouncement)(),s=(0,p.useUniqueId)("DndLiveRegion"),[l,u]=(0,d.useState)(!1);(0,d.useEffect)(()=>{u(!0)},[]);var c=(0,d.useMemo)(()=>({onDragStart(e){let{active:n}=e;a(t.onDragStart({active:n}))},onDragMove(e){let{active:n,over:r}=e;t.onDragMove&&a(t.onDragMove({active:n,over:r}))},onDragOver(e){let{active:n,over:r}=e;a(t.onDragOver({active:n,over:r}))},onDragEnd(e){let{active:n,over:r}=e;a(t.onDragEnd({active:n,over:r}))},onDragCancel(e){let{active:n,over:r}=e;a(t.onDragCancel({active:n,over:r}))}}),[a,t]);let b=(0,d.useContext)(m);if((0,d.useEffect)(()=>{if(!b)throw Error("useDndMonitor must be used within a children of <DndContext>");return b(c)},[c,b]),!l)return null;let x=d.default.createElement(d.default.Fragment,null,d.default.createElement(f.HiddenText,{id:r,value:i.draggable}),d.default.createElement(f.LiveRegion,{id:s,announcement:o}));return n?(0,h.createPortal)(x,n):x}function x(){}function w(e,t){return(0,d.useMemo)(()=>({sensor:e,options:null!=t?t:{}}),[e,t])}function k(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,d.useMemo)(()=>[...t].filter(e=>null!=e),[...t])}!function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"}(t||(t={}));let S=Object.freeze({x:0,y:0});function _(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function C(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function A(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function E(e){let{left:t,top:n,height:r,width:i}=e;return[{x:t,y:n},{x:t+i,y:n},{x:t,y:n+r},{x:t+i,y:n+r}]}function T(e,t){if(!e||0===e.length)return null;let[n]=e;return t?n[t]:n}function M(e,t,n){return void 0===t&&(t=e.left),void 0===n&&(n=e.top),{x:t+.5*e.width,y:n+.5*e.height}}let I=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e,i=M(t,t.left,t.top),a=[];for(let e of r){let{id:t}=e,r=n.get(t);if(r){let n=_(M(r),i);a.push({id:t,data:{droppableContainer:e,value:n}})}}return a.sort(C)},N=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e,i=E(t),a=[];for(let e of r){let{id:t}=e,r=n.get(t);if(r){let n=E(r),o=Number((i.reduce((e,t,r)=>e+_(n[r],t),0)/4).toFixed(4));a.push({id:t,data:{droppableContainer:e,value:o}})}}return a.sort(C)},D=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e,i=[];for(let e of r){let{id:r}=e,a=n.get(r);if(a){let n=function(e,t){let n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),i=Math.min(t.left+t.width,e.left+e.width),a=Math.min(t.top+t.height,e.top+e.height);if(r<i&&n<a){let o=t.width*t.height,s=e.width*e.height,l=(i-r)*(a-n);return Number((l/(o+s-l)).toFixed(4))}return 0}(a,t);n>0&&i.push({id:r,data:{droppableContainer:e,value:n}})}}return i.sort(A)};function P(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:S}let R=function(e){return function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((t,n)=>({...t,top:t.top+e*n.y,bottom:t.bottom+e*n.y,left:t.left+e*n.x,right:t.right+e*n.x}),{...t})}}(1);function O(e){if(e.startsWith("matrix3d(")){let t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}if(e.startsWith("matrix(")){let t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}let j={ignoreTransform:!1};function F(e,t){void 0===t&&(t=j);let n=e.getBoundingClientRect();if(t.ignoreTransform){let{transform:t,transformOrigin:r}=(0,p.getWindow)(e).getComputedStyle(e);t&&(n=function(e,t,n){let r=O(t);if(!r)return e;let{scaleX:i,scaleY:a,x:o,y:s}=r,l=e.left-o-(1-i)*parseFloat(n),u=e.top-s-(1-a)*parseFloat(n.slice(n.indexOf(" ")+1)),c=i?e.width/i:e.width,d=a?e.height/a:e.height;return{width:c,height:d,top:u,right:l+c,bottom:u+d,left:l}}(n,t,r))}let{top:r,left:i,width:a,height:o,bottom:s,right:l}=n;return{top:r,left:i,width:a,height:o,bottom:s,right:l}}function L(e){return F(e,{ignoreTransform:!0})}function z(e,t){let n=[];return e?function r(i){var a;if(null!=t&&n.length>=t||!i)return n;if((0,p.isDocument)(i)&&null!=i.scrollingElement&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!(0,p.isHTMLElement)(i)||(0,p.isSVGElement)(i)||n.includes(i))return n;let o=(0,p.getWindow)(e).getComputedStyle(i);return(i!==e&&function(e,t){void 0===t&&(t=(0,p.getWindow)(e).getComputedStyle(e));let n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(e=>{let r=t[e];return"string"==typeof r&&n.test(r)})}(i,o)&&n.push(i),void 0===(a=o)&&(a=(0,p.getWindow)(i).getComputedStyle(i)),"fixed"===a.position)?n:r(i.parentNode)}(e):n}function B(e){let[t]=z(e,1);return null!=t?t:null}function U(e){return p.canUseDOM&&e?(0,p.isWindow)(e)?e:(0,p.isNode)(e)?(0,p.isDocument)(e)||e===(0,p.getOwnerDocument)(e).scrollingElement?window:(0,p.isHTMLElement)(e)?e:null:null:null}function H(e){return(0,p.isWindow)(e)?e.scrollX:e.scrollLeft}function W(e){return(0,p.isWindow)(e)?e.scrollY:e.scrollTop}function V(e){return{x:H(e),y:W(e)}}function q(e){return!!p.canUseDOM&&!!e&&e===document.scrollingElement}function G(e){let t={x:0,y:0},n=q(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},i=e.scrollTop<=t.y,a=e.scrollLeft<=t.x;return{isTop:i,isLeft:a,isBottom:e.scrollTop>=r.y,isRight:e.scrollLeft>=r.x,maxScroll:r,minScroll:t}}!function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"}(n||(n={}));let $={x:.2,y:.2};function K(e){return e.reduce((e,t)=>(0,p.add)(e,V(t)),S)}function Y(e,t){if(void 0===t&&(t=F),!e)return;let{top:n,left:r,bottom:i,right:a}=t(e);B(e)&&(i<=0||a<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}let X=[["x",["left","right"],function(e){return e.reduce((e,t)=>e+H(t),0)}],["y",["top","bottom"],function(e){return e.reduce((e,t)=>e+W(t),0)}]];class Z{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;let n=z(t),r=K(n);for(let[t,i,a]of(this.rect={...e},this.width=e.width,this.height=e.height,X))for(let e of i)Object.defineProperty(this,e,{get:()=>{let i=a(n),o=r[t]-i;return this.rect[e]+o},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class J{add(e,t,n){var r;null==(r=this.target)||r.addEventListener(e,t,n),this.listeners.push([e,t,n])}constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(e=>{var t;return null==(t=this.target)?void 0:t.removeEventListener(...e)})},this.target=e}}function Q(e,t){let n=Math.abs(e.x),r=Math.abs(e.y);return"number"==typeof t?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t&&r>t.y}function ee(e){e.preventDefault()}function et(e){e.stopPropagation()}!function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"}(r||(r={})),function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"}(i||(i={}));let en={start:[i.Space,i.Enter],cancel:[i.Esc],end:[i.Space,i.Enter,i.Tab]},er=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case i.Right:return{...n,x:n.x+25};case i.Left:return{...n,x:n.x-25};case i.Down:return{...n,y:n.y+25};case i.Up:return{...n,y:n.y-25}}};class ei{attach(){this.handleStart(),this.windowListeners.add(r.Resize,this.handleCancel),this.windowListeners.add(r.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(r.Keydown,this.handleKeyDown))}handleStart(){let{activeNode:e,onStart:t}=this.props,n=e.node.current;n&&Y(n),t(S)}handleKeyDown(e){if((0,p.isKeyboardEvent)(e)){let{active:t,context:n,options:r}=this.props,{keyboardCodes:a=en,coordinateGetter:o=er,scrollBehavior:s="smooth"}=r,{code:l}=e;if(a.end.includes(l))return void this.handleEnd(e);if(a.cancel.includes(l))return void this.handleCancel(e);let{collisionRect:u}=n.current,c=u?{x:u.left,y:u.top}:S;this.referenceCoordinates||(this.referenceCoordinates=c);let d=o(e,{active:t,context:n.current,currentCoordinates:c});if(d){let t=(0,p.subtract)(d,c),r={x:0,y:0},{scrollableAncestors:a}=n.current;for(let n of a){let a=e.code,{isTop:o,isRight:l,isLeft:u,isBottom:c,maxScroll:h,minScroll:p}=G(n),f=function(e){if(e===document.scrollingElement){let{innerWidth:e,innerHeight:t}=window;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}let{top:t,left:n,right:r,bottom:i}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:i,width:e.clientWidth,height:e.clientHeight}}(n),m={x:Math.min(a===i.Right?f.right-f.width/2:f.right,Math.max(a===i.Right?f.left:f.left+f.width/2,d.x)),y:Math.min(a===i.Down?f.bottom-f.height/2:f.bottom,Math.max(a===i.Down?f.top:f.top+f.height/2,d.y))},g=a===i.Right&&!l||a===i.Left&&!u,y=a===i.Down&&!c||a===i.Up&&!o;if(g&&m.x!==d.x){let e=n.scrollLeft+t.x,o=a===i.Right&&e<=h.x||a===i.Left&&e>=p.x;if(o&&!t.y)return void n.scrollTo({left:e,behavior:s});o?r.x=n.scrollLeft-e:r.x=a===i.Right?n.scrollLeft-h.x:n.scrollLeft-p.x,r.x&&n.scrollBy({left:-r.x,behavior:s});break}if(y&&m.y!==d.y){let e=n.scrollTop+t.y,o=a===i.Down&&e<=h.y||a===i.Up&&e>=p.y;if(o&&!t.x)return void n.scrollTo({top:e,behavior:s});o?r.y=n.scrollTop-e:r.y=a===i.Down?n.scrollTop-h.y:n.scrollTop-p.y,r.y&&n.scrollBy({top:-r.y,behavior:s});break}}this.handleMove(e,(0,p.add)((0,p.subtract)(d,this.referenceCoordinates),r))}}}handleMove(e,t){let{onMove:n}=this.props;e.preventDefault(),n(t)}handleEnd(e){let{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){let{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;let{event:{target:t}}=e;this.props=e,this.listeners=new J((0,p.getOwnerDocument)(t)),this.windowListeners=new J((0,p.getWindow)(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}}function ea(e){return!!(e&&"distance"in e)}function eo(e){return!!(e&&"delay"in e)}ei.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=en,onActivation:i}=t,{active:a}=n,{code:o}=e.nativeEvent;if(r.start.includes(o)){let t=a.activatorNode.current;return(!t||e.target===t)&&(e.preventDefault(),null==i||i({event:e.nativeEvent}),!0)}return!1}}];class es{attach(){let{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:n}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(r.Resize,this.handleCancel),this.windowListeners.add(r.DragStart,ee),this.windowListeners.add(r.VisibilityChange,this.handleCancel),this.windowListeners.add(r.ContextMenu,ee),this.documentListeners.add(r.Keydown,this.handleKeydown),t){if(null!=n&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(eo(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(ea(t))return void this.handlePending(t)}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){let{active:n,onPending:r}=this.props;r(n,e,this.initialCoordinates,t)}handleStart(){let{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(r.Click,et,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(r.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;let{activated:n,initialCoordinates:r,props:i}=this,{onMove:a,options:{activationConstraint:o}}=i;if(!r)return;let s=null!=(t=(0,p.getEventCoordinates)(e))?t:S,l=(0,p.subtract)(r,s);if(!n&&o){if(ea(o)){if(null!=o.tolerance&&Q(l,o.tolerance))return this.handleCancel();if(Q(l,o.distance))return this.handleStart()}return eo(o)&&Q(l,o.tolerance)?this.handleCancel():void this.handlePending(o,l)}e.cancelable&&e.preventDefault(),a(s)}handleEnd(){let{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){let{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===i.Esc&&this.handleCancel()}removeTextSelection(){var e;null==(e=this.document.getSelection())||e.removeAllRanges()}constructor(e,t,n){var r;void 0===n&&(n=function(e){let{EventTarget:t}=(0,p.getWindow)(e);return e instanceof t?e:(0,p.getOwnerDocument)(e)}(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;let{event:i}=e,{target:a}=i;this.props=e,this.events=t,this.document=(0,p.getOwnerDocument)(a),this.documentListeners=new J(this.document),this.listeners=new J(n),this.windowListeners=new J((0,p.getWindow)(a)),this.initialCoordinates=null!=(r=(0,p.getEventCoordinates)(i))?r:S,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}}let el={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class eu extends es{constructor(e){let{event:t}=e;super(e,el,(0,p.getOwnerDocument)(t.target))}}eu.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!!n.isPrimary&&0===n.button&&(null==r||r({event:n}),!0)}}];let ec={move:{name:"mousemove"},end:{name:"mouseup"}};!function(e){e[e.RightClick=2]="RightClick"}(a||(a={}));class ed extends es{constructor(e){super(e,ec,(0,p.getOwnerDocument)(e.event.target))}}ed.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button!==a.RightClick&&(null==r||r({event:n}),!0)}}];let eh={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class ep extends es{static setup(){return window.addEventListener(eh.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(eh.move.name,e)};function e(){}}constructor(e){super(e,eh)}}ep.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t,{touches:i}=n;return!(i.length>1)&&(null==r||r({event:n}),!0)}}],function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"}(o||(o={})),function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"}(s||(s={}));let ef={x:{[n.Backward]:!1,[n.Forward]:!1},y:{[n.Backward]:!1,[n.Forward]:!1}};!function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"}(l||(l={})),(u||(u={})).Optimized="optimized";let em=new Map;function eg(e,t){return(0,p.useLazyMemo)(n=>e?n||("function"==typeof t?t(e):e):null,[t,e])}function ev(e){let{callback:t,disabled:n}=e,r=(0,p.useEvent)(t),i=(0,d.useMemo)(()=>{if(n||"undefined"==typeof window||void 0===window.ResizeObserver)return;let{ResizeObserver:e}=window;return new e(r)},[n]);return(0,d.useEffect)(()=>()=>null==i?void 0:i.disconnect(),[i]),i}function ey(e){return new Z(F(e),e)}function eb(e,t,n){void 0===t&&(t=ey);let[r,i]=(0,d.useState)(null);function a(){i(r=>{if(!e)return null;if(!1===e.isConnected){var i;return null!=(i=null!=r?r:n)?i:null}let a=t(e);return JSON.stringify(r)===JSON.stringify(a)?r:a})}let o=function(e){let{callback:t,disabled:n}=e,r=(0,p.useEvent)(t),i=(0,d.useMemo)(()=>{if(n||"undefined"==typeof window||void 0===window.MutationObserver)return;let{MutationObserver:e}=window;return new e(r)},[r,n]);return(0,d.useEffect)(()=>()=>null==i?void 0:i.disconnect(),[i]),i}({callback(t){if(e)for(let n of t){let{type:t,target:r}=n;if("childList"===t&&r instanceof HTMLElement&&r.contains(e)){a();break}}}}),s=ev({callback:a});return(0,p.useIsomorphicLayoutEffect)(()=>{a(),e?(null==s||s.observe(e),null==o||o.observe(document.body,{childList:!0,subtree:!0})):(null==s||s.disconnect(),null==o||o.disconnect())},[e]),r}let ex=[];function ew(e,t){void 0===t&&(t=[]);let n=(0,d.useRef)(null);return(0,d.useEffect)(()=>{n.current=null},t),(0,d.useEffect)(()=>{let t=e!==S;t&&!n.current&&(n.current=e),!t&&n.current&&(n.current=null)},[e]),n.current?(0,p.subtract)(e,n.current):S}function ek(e){return(0,d.useMemo)(()=>e?function(e){let t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}(e):null,[e])}let eS=[];function e_(e){if(!e)return null;if(e.children.length>1)return e;let t=e.children[0];return(0,p.isHTMLElement)(t)?t:e}let eC=[{sensor:eu,options:{}},{sensor:ei,options:{}}],eA={current:{}},eE={draggable:{measure:L},droppable:{measure:L,strategy:l.WhileDragging,frequency:u.Optimized},dragOverlay:{measure:F}};class eT extends Map{get(e){var t;return null!=e&&null!=(t=super.get(e))?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,n;return null!=(t=null==(n=this.get(e))?void 0:n.node.current)?t:void 0}}let eM={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new eT,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:x},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:eE,measureDroppableContainers:x,windowRect:null,measuringScheduled:!1},eI={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:x,draggableNodes:new Map,over:null,measureDroppableContainers:x},eN=(0,d.createContext)(eI),eD=(0,d.createContext)(eM);function eP(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new eT}}}function eR(e,n){switch(n.type){case t.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:n.initialCoordinates,active:n.active}};case t.DragMove:if(null==e.draggable.active)return e;return{...e,draggable:{...e.draggable,translate:{x:n.coordinates.x-e.draggable.initialCoordinates.x,y:n.coordinates.y-e.draggable.initialCoordinates.y}}};case t.DragEnd:case t.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case t.RegisterDroppable:{let{element:t}=n,{id:r}=t,i=new eT(e.droppable.containers);return i.set(r,t),{...e,droppable:{...e.droppable,containers:i}}}case t.SetDroppableDisabled:{let{id:t,key:r,disabled:i}=n,a=e.droppable.containers.get(t);if(!a||r!==a.key)return e;let o=new eT(e.droppable.containers);return o.set(t,{...a,disabled:i}),{...e,droppable:{...e.droppable,containers:o}}}case t.UnregisterDroppable:{let{id:t,key:r}=n,i=e.droppable.containers.get(t);if(!i||r!==i.key)return e;let a=new eT(e.droppable.containers);return a.delete(t),{...e,droppable:{...e.droppable,containers:a}}}default:return e}}function eO(e){let{disabled:t}=e,{active:n,activatorEvent:r,draggableNodes:i}=(0,d.useContext)(eN),a=(0,p.usePrevious)(r),o=(0,p.usePrevious)(null==n?void 0:n.id);return(0,d.useEffect)(()=>{if(!t&&!r&&a&&null!=o){if(!(0,p.isKeyboardEvent)(a)||document.activeElement===a.target)return;let e=i.get(o);if(!e)return;let{activatorNode:t,node:n}=e;(t.current||n.current)&&requestAnimationFrame(()=>{for(let e of[t.current,n.current]){if(!e)continue;let t=(0,p.findFirstFocusableNode)(e);if(t){t.focus();break}}})}},[r,t,i,o,a]),null}function ej(e,t){let{transform:n,...r}=t;return null!=e&&e.length?e.reduce((e,t)=>t({transform:e,...r}),n):n}let eF=(0,d.createContext)({...S,scaleX:1,scaleY:1});!function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"}(c||(c={}));let eL=(0,d.memo)(function(e){var r,i,a,u,f,g;let{id:y,accessibility:x,autoScroll:w=!0,children:k,sensors:_=eC,collisionDetection:C=D,measuring:A,modifiers:E,...M}=e,[I,N]=(0,d.useReducer)(eR,void 0,eP),[O,j]=function(){let[e]=(0,d.useState)(()=>new Set),t=(0,d.useCallback)(t=>(e.add(t),()=>e.delete(t)),[e]);return[(0,d.useCallback)(t=>{let{type:n,event:r}=t;e.forEach(e=>{var t;return null==(t=e[n])?void 0:t.call(e,r)})},[e]),t]}(),[L,H]=(0,d.useState)(c.Uninitialized),W=L===c.Initialized,{draggable:{active:Y,nodes:X,translate:J},droppable:{containers:Q}}=I,ee=null!=Y?X.get(Y):null,et=(0,d.useRef)({initial:null,translated:null}),en=(0,d.useMemo)(()=>{var e;return null!=Y?{id:Y,data:null!=(e=null==ee?void 0:ee.data)?e:eA,rect:et}:null},[Y,ee]),er=(0,d.useRef)(null),[ei,ea]=(0,d.useState)(null),[eo,es]=(0,d.useState)(null),el=(0,p.useLatestValue)(M,Object.values(M)),eu=(0,p.useUniqueId)("DndDescribedBy",y),ec=(0,d.useMemo)(()=>Q.getEnabled(),[Q]),ed=(0,d.useMemo)(()=>({draggable:{...eE.draggable,...null==A?void 0:A.draggable},droppable:{...eE.droppable,...null==A?void 0:A.droppable},dragOverlay:{...eE.dragOverlay,...null==A?void 0:A.dragOverlay}}),[null==A?void 0:A.draggable,null==A?void 0:A.droppable,null==A?void 0:A.dragOverlay]),{droppableRects:eh,measureDroppableContainers:ep,measuringScheduled:ey}=function(e,t){let{dragging:n,dependencies:r,config:i}=t,[a,o]=(0,d.useState)(null),{frequency:s,measure:u,strategy:c}=i,h=(0,d.useRef)(e),f=function(){switch(c){case l.Always:return!1;case l.BeforeDragging:return n;default:return!n}}(),m=(0,p.useLatestValue)(f),g=(0,d.useCallback)(function(e){void 0===e&&(e=[]),m.current||o(t=>null===t?e:t.concat(e.filter(e=>!t.includes(e))))},[m]),y=(0,d.useRef)(null),b=(0,p.useLazyMemo)(t=>{if(f&&!n)return em;if(!t||t===em||h.current!==e||null!=a){let t=new Map;for(let n of e){if(!n)continue;if(a&&a.length>0&&!a.includes(n.id)&&n.rect.current){t.set(n.id,n.rect.current);continue}let e=n.node.current,r=e?new Z(u(e),e):null;n.rect.current=r,r&&t.set(n.id,r)}return t}return t},[e,a,n,f,u]);return(0,d.useEffect)(()=>{h.current=e},[e]),(0,d.useEffect)(()=>{f||g()},[n,f]),(0,d.useEffect)(()=>{a&&a.length>0&&o(null)},[JSON.stringify(a)]),(0,d.useEffect)(()=>{f||"number"!=typeof s||null!==y.current||(y.current=setTimeout(()=>{g(),y.current=null},s))},[s,f,g,...r]),{droppableRects:b,measureDroppableContainers:g,measuringScheduled:null!=a}}(ec,{dragging:W,dependencies:[J.x,J.y],config:ed.droppable}),eT=function(e,t){let n=null!=t?e.get(t):void 0,r=n?n.node.current:null;return(0,p.useLazyMemo)(e=>{var n;return null==t?null:null!=(n=null!=r?r:e)?n:null},[r,t])}(X,Y),eM=(0,d.useMemo)(()=>eo?(0,p.getEventCoordinates)(eo):null,[eo]),eI=function(){let e=(null==ei?void 0:ei.autoScrollEnabled)===!1,t="object"==typeof w?!1===w.enabled:!1===w,n=W&&!e&&!t;return"object"==typeof w?{...w,enabled:n}:{enabled:n}}(),eL=eg(eT,ed.draggable.measure);!function(e){let{activeNode:t,measure:n,initialRect:r,config:i=!0}=e,a=(0,d.useRef)(!1),{x:o,y:s}="boolean"==typeof i?{x:i,y:i}:i;(0,p.useIsomorphicLayoutEffect)(()=>{if(!o&&!s||!t){a.current=!1;return}if(a.current||!r)return;let e=null==t?void 0:t.node.current;if(!e||!1===e.isConnected)return;let i=P(n(e),r);if(o||(i.x=0),s||(i.y=0),a.current=!0,Math.abs(i.x)>0||Math.abs(i.y)>0){let t=B(e);t&&t.scrollBy({top:i.y,left:i.x})}},[t,o,s,r,n])}({activeNode:null!=Y?X.get(Y):null,config:eI.layoutShiftCompensation,initialRect:eL,measure:ed.draggable.measure});let ez=eb(eT,ed.draggable.measure,eL),eB=eb(eT?eT.parentElement:null),eU=(0,d.useRef)({activatorEvent:null,active:null,activeNode:eT,collisionRect:null,collisions:null,droppableRects:eh,draggableNodes:X,draggingNode:null,draggingNodeRect:null,droppableContainers:Q,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),eH=Q.getNodeFor(null==(r=eU.current.over)?void 0:r.id),eW=function(e){let{measure:t}=e,[n,r]=(0,d.useState)(null),i=ev({callback:(0,d.useCallback)(e=>{for(let{target:n}of e)if((0,p.isHTMLElement)(n)){r(e=>{let r=t(n);return e?{...e,width:r.width,height:r.height}:r});break}},[t])}),a=(0,d.useCallback)(e=>{let n=e_(e);null==i||i.disconnect(),n&&(null==i||i.observe(n)),r(n?t(n):null)},[t,i]),[o,s]=(0,p.useNodeRef)(a);return(0,d.useMemo)(()=>({nodeRef:o,rect:n,setRef:s}),[n,o,s])}({measure:ed.dragOverlay.measure}),eV=null!=(i=eW.nodeRef.current)?i:eT,eq=W?null!=(a=eW.rect)?a:ez:null,eG=!!(eW.nodeRef.current&&eW.rect),e$=function(e){let t=eg(e);return P(e,t)}(eG?null:ez),eK=ek(eV?(0,p.getWindow)(eV):null),eY=function(e){let t=(0,d.useRef)(e),n=(0,p.useLazyMemo)(n=>e?n&&n!==ex&&e&&t.current&&e.parentNode===t.current.parentNode?n:z(e):ex,[e]);return(0,d.useEffect)(()=>{t.current=e},[e]),n}(W?null!=eH?eH:eT:null),eX=function(e,t){void 0===t&&(t=F);let[n]=e,r=ek(n?(0,p.getWindow)(n):null),[i,a]=(0,d.useState)(eS);function o(){a(()=>e.length?e.map(e=>q(e)?r:new Z(t(e),e)):eS)}let s=ev({callback:o});return(0,p.useIsomorphicLayoutEffect)(()=>{null==s||s.disconnect(),o(),e.forEach(e=>null==s?void 0:s.observe(e))},[e]),i}(eY),eZ=ej(E,{transform:{x:J.x-e$.x,y:J.y-e$.y,scaleX:1,scaleY:1},activatorEvent:eo,active:en,activeNodeRect:ez,containerNodeRect:eB,draggingNodeRect:eq,over:eU.current.over,overlayNodeRect:eW.rect,scrollableAncestors:eY,scrollableAncestorRects:eX,windowRect:eK}),eJ=eM?(0,p.add)(eM,J):null,eQ=function(e){let[t,n]=(0,d.useState)(null),r=(0,d.useRef)(e),i=(0,d.useCallback)(e=>{let t=U(e.target);t&&n(e=>e?(e.set(t,V(t)),new Map(e)):null)},[]);return(0,d.useEffect)(()=>{let t=r.current;if(e!==t){a(t);let o=e.map(e=>{let t=U(e);return t?(t.addEventListener("scroll",i,{passive:!0}),[t,V(t)]):null}).filter(e=>null!=e);n(o.length?new Map(o):null),r.current=e}return()=>{a(e),a(t)};function a(e){e.forEach(e=>{let t=U(e);null==t||t.removeEventListener("scroll",i)})}},[i,e]),(0,d.useMemo)(()=>e.length?t?Array.from(t.values()).reduce((e,t)=>(0,p.add)(e,t),S):K(e):S,[e,t])}(eY),e0=ew(eQ),e1=ew(eQ,[ez]),e2=(0,p.add)(eZ,e0),e3=eq?R(eq,eZ):null,e5=en&&e3?C({active:en,collisionRect:e3,droppableRects:eh,droppableContainers:ec,pointerCoordinates:eJ}):null,e4=T(e5,"id"),[e9,e8]=(0,d.useState)(null),e6=(f=eG?eZ:(0,p.add)(eZ,e1),g=null!=(u=null==e9?void 0:e9.rect)?u:null,{...f,scaleX:g&&ez?g.width/ez.width:1,scaleY:g&&ez?g.height/ez.height:1}),e7=(0,d.useRef)(null),te=(0,d.useCallback)((e,n)=>{let{sensor:r,options:i}=n;if(null==er.current)return;let a=X.get(er.current);if(!a)return;let o=e.nativeEvent,s=new r({active:er.current,activeNode:a,event:o,options:i,context:eU,onAbort(e){if(!X.get(e))return;let{onDragAbort:t}=el.current,n={id:e};null==t||t(n),O({type:"onDragAbort",event:n})},onPending(e,t,n,r){if(!X.get(e))return;let{onDragPending:i}=el.current,a={id:e,constraint:t,initialCoordinates:n,offset:r};null==i||i(a),O({type:"onDragPending",event:a})},onStart(e){let n=er.current;if(null==n)return;let r=X.get(n);if(!r)return;let{onDragStart:i}=el.current,a={activatorEvent:o,active:{id:n,data:r.data,rect:et}};(0,h.unstable_batchedUpdates)(()=>{null==i||i(a),H(c.Initializing),N({type:t.DragStart,initialCoordinates:e,active:n}),O({type:"onDragStart",event:a}),ea(e7.current),es(o)})},onMove(e){N({type:t.DragMove,coordinates:e})},onEnd:l(t.DragEnd),onCancel:l(t.DragCancel)});function l(e){return async function(){let{active:n,collisions:r,over:i,scrollAdjustedTranslate:a}=eU.current,s=null;if(n&&a){let{cancelDrop:l}=el.current;s={activatorEvent:o,active:n,collisions:r,delta:a,over:i},e===t.DragEnd&&"function"==typeof l&&await Promise.resolve(l(s))&&(e=t.DragCancel)}er.current=null,(0,h.unstable_batchedUpdates)(()=>{N({type:e}),H(c.Uninitialized),e8(null),ea(null),es(null),e7.current=null;let n=e===t.DragEnd?"onDragEnd":"onDragCancel";if(s){let e=el.current[n];null==e||e(s),O({type:n,event:s})}})}}e7.current=s},[X]),tt=(0,d.useCallback)((e,t)=>(n,r)=>{let i=n.nativeEvent,a=X.get(r);null!==er.current||!a||i.dndKit||i.defaultPrevented||!0===e(n,t.options,{active:a})&&(i.dndKit={capturedBy:t.sensor},er.current=r,te(n,t))},[X,te]),tn=(0,d.useMemo)(()=>_.reduce((e,t)=>{let{sensor:n}=t;return[...e,...n.activators.map(e=>({eventName:e.eventName,handler:tt(e.handler,t)}))]},[]),[_,tt]);(0,d.useEffect)(()=>{if(!p.canUseDOM)return;let e=_.map(e=>{let{sensor:t}=e;return null==t.setup?void 0:t.setup()});return()=>{for(let t of e)null==t||t()}},_.map(e=>{let{sensor:t}=e;return t})),(0,p.useIsomorphicLayoutEffect)(()=>{ez&&L===c.Initializing&&H(c.Initialized)},[ez,L]),(0,d.useEffect)(()=>{let{onDragMove:e}=el.current,{active:t,activatorEvent:n,collisions:r,over:i}=eU.current;if(!t||!n)return;let a={active:t,activatorEvent:n,collisions:r,delta:{x:e2.x,y:e2.y},over:i};(0,h.unstable_batchedUpdates)(()=>{null==e||e(a),O({type:"onDragMove",event:a})})},[e2.x,e2.y]),(0,d.useEffect)(()=>{let{active:e,activatorEvent:t,collisions:n,droppableContainers:r,scrollAdjustedTranslate:i}=eU.current;if(!e||null==er.current||!t||!i)return;let{onDragOver:a}=el.current,o=r.get(e4),s=o&&o.rect.current?{id:o.id,rect:o.rect.current,data:o.data,disabled:o.disabled}:null,l={active:e,activatorEvent:t,collisions:n,delta:{x:i.x,y:i.y},over:s};(0,h.unstable_batchedUpdates)(()=>{e8(s),null==a||a(l),O({type:"onDragOver",event:l})})},[e4]),(0,p.useIsomorphicLayoutEffect)(()=>{eU.current={activatorEvent:eo,active:en,activeNode:eT,collisionRect:e3,collisions:e5,droppableRects:eh,draggableNodes:X,draggingNode:eV,draggingNodeRect:eq,droppableContainers:Q,over:e9,scrollableAncestors:eY,scrollAdjustedTranslate:e2},et.current={initial:eq,translated:e3}},[en,eT,e5,e3,X,eV,eq,eh,Q,e9,eY,e2]),function(e){let{acceleration:t,activator:r=o.Pointer,canScroll:i,draggingRect:a,enabled:l,interval:u=5,order:c=s.TreeOrder,pointerCoordinates:h,scrollableAncestors:f,scrollableAncestorRects:m,delta:g,threshold:y}=e,b=function(e){let{delta:t,disabled:r}=e,i=(0,p.usePrevious)(t);return(0,p.useLazyMemo)(e=>{if(r||!i||!e)return ef;let a={x:Math.sign(t.x-i.x),y:Math.sign(t.y-i.y)};return{x:{[n.Backward]:e.x[n.Backward]||-1===a.x,[n.Forward]:e.x[n.Forward]||1===a.x},y:{[n.Backward]:e.y[n.Backward]||-1===a.y,[n.Forward]:e.y[n.Forward]||1===a.y}}},[r,t,i])}({delta:g,disabled:!l}),[x,w]=(0,p.useInterval)(),k=(0,d.useRef)({x:0,y:0}),S=(0,d.useRef)({x:0,y:0}),_=(0,d.useMemo)(()=>{switch(r){case o.Pointer:return h?{top:h.y,bottom:h.y,left:h.x,right:h.x}:null;case o.DraggableRect:return a}},[r,a,h]),C=(0,d.useRef)(null),A=(0,d.useCallback)(()=>{let e=C.current;if(!e)return;let t=k.current.x*S.current.x,n=k.current.y*S.current.y;e.scrollBy(t,n)},[]),E=(0,d.useMemo)(()=>c===s.TreeOrder?[...f].reverse():f,[c,f]);(0,d.useEffect)(()=>{if(!l||!f.length||!_)return void w();for(let e of E){if((null==i?void 0:i(e))===!1)continue;let r=m[f.indexOf(e)];if(!r)continue;let{direction:a,speed:o}=function(e,t,r,i,a){let{top:o,left:s,right:l,bottom:u}=r;void 0===i&&(i=10),void 0===a&&(a=$);let{isTop:c,isBottom:d,isLeft:h,isRight:p}=G(e),f={x:0,y:0},m={x:0,y:0},g={height:t.height*a.y,width:t.width*a.x};return!c&&o<=t.top+g.height?(f.y=n.Backward,m.y=i*Math.abs((t.top+g.height-o)/g.height)):!d&&u>=t.bottom-g.height&&(f.y=n.Forward,m.y=i*Math.abs((t.bottom-g.height-u)/g.height)),!p&&l>=t.right-g.width?(f.x=n.Forward,m.x=i*Math.abs((t.right-g.width-l)/g.width)):!h&&s<=t.left+g.width&&(f.x=n.Backward,m.x=i*Math.abs((t.left+g.width-s)/g.width)),{direction:f,speed:m}}(e,r,_,t,y);for(let e of["x","y"])b[e][a[e]]||(o[e]=0,a[e]=0);if(o.x>0||o.y>0){w(),C.current=e,x(A,u),k.current=o,S.current=a;return}}k.current={x:0,y:0},S.current={x:0,y:0},w()},[t,A,i,w,l,u,JSON.stringify(_),JSON.stringify(b),x,f,E,m,JSON.stringify(y)])}({...eI,delta:J,draggingRect:e3,pointerCoordinates:eJ,scrollableAncestors:eY,scrollableAncestorRects:eX});let tr=(0,d.useMemo)(()=>({active:en,activeNode:eT,activeNodeRect:ez,activatorEvent:eo,collisions:e5,containerNodeRect:eB,dragOverlay:eW,draggableNodes:X,droppableContainers:Q,droppableRects:eh,over:e9,measureDroppableContainers:ep,scrollableAncestors:eY,scrollableAncestorRects:eX,measuringConfiguration:ed,measuringScheduled:ey,windowRect:eK}),[en,eT,ez,eo,e5,eB,eW,X,Q,eh,e9,ep,eY,eX,ed,ey,eK]),ti=(0,d.useMemo)(()=>({activatorEvent:eo,activators:tn,active:en,activeNodeRect:ez,ariaDescribedById:{draggable:eu},dispatch:N,draggableNodes:X,over:e9,measureDroppableContainers:ep}),[eo,tn,en,ez,N,eu,X,e9,ep]);return d.default.createElement(m.Provider,{value:j},d.default.createElement(eN.Provider,{value:ti},d.default.createElement(eD.Provider,{value:tr},d.default.createElement(eF.Provider,{value:e6},k)),d.default.createElement(eO,{disabled:(null==x?void 0:x.restoreFocus)===!1})),d.default.createElement(b,{...x,hiddenTextDescribedById:eu}))}),ez=(0,d.createContext)(null),eB="button";function eU(e){let{id:t,data:n,disabled:r=!1,attributes:i}=e,a=(0,p.useUniqueId)("Draggable"),{activators:o,activatorEvent:s,active:l,activeNodeRect:u,ariaDescribedById:c,draggableNodes:h,over:f}=(0,d.useContext)(eN),{role:m=eB,roleDescription:g="draggable",tabIndex:y=0}=null!=i?i:{},b=(null==l?void 0:l.id)===t,x=(0,d.useContext)(b?eF:ez),[w,k]=(0,p.useNodeRef)(),[S,_]=(0,p.useNodeRef)(),C=(0,d.useMemo)(()=>o.reduce((e,n)=>{let{eventName:r,handler:i}=n;return e[r]=e=>{i(e,t)},e},{}),[o,t]),A=(0,p.useLatestValue)(n);return(0,p.useIsomorphicLayoutEffect)(()=>(h.set(t,{id:t,key:a,node:w,activatorNode:S,data:A}),()=>{let e=h.get(t);e&&e.key===a&&h.delete(t)}),[h,t]),{active:l,activatorEvent:s,activeNodeRect:u,attributes:(0,d.useMemo)(()=>({role:m,tabIndex:y,"aria-disabled":r,"aria-pressed":!!b&&m===eB||void 0,"aria-roledescription":g,"aria-describedby":c.draggable}),[r,m,y,b,g,c.draggable]),isDragging:b,listeners:r?void 0:C,node:w,over:f,setNodeRef:k,setActivatorNodeRef:_,transform:x}}function eH(){return(0,d.useContext)(eD)}let eW={timeout:25};function eV(e){let{data:n,disabled:r=!1,id:i,resizeObserverConfig:a}=e,o=(0,p.useUniqueId)("Droppable"),{active:s,dispatch:l,over:u,measureDroppableContainers:c}=(0,d.useContext)(eN),h=(0,d.useRef)({disabled:r}),f=(0,d.useRef)(!1),m=(0,d.useRef)(null),g=(0,d.useRef)(null),{disabled:y,updateMeasurementsFor:b,timeout:x}={...eW,...a},w=(0,p.useLatestValue)(null!=b?b:i),k=ev({callback:(0,d.useCallback)(()=>{if(!f.current){f.current=!0;return}null!=g.current&&clearTimeout(g.current),g.current=setTimeout(()=>{c(Array.isArray(w.current)?w.current:[w.current]),g.current=null},x)},[x]),disabled:y||!s}),S=(0,d.useCallback)((e,t)=>{k&&(t&&(k.unobserve(t),f.current=!1),e&&k.observe(e))},[k]),[_,C]=(0,p.useNodeRef)(S),A=(0,p.useLatestValue)(n);return(0,d.useEffect)(()=>{k&&_.current&&(k.disconnect(),f.current=!1,k.observe(_.current))},[_,k]),(0,d.useEffect)(()=>(l({type:t.RegisterDroppable,element:{id:i,key:o,disabled:r,node:_,rect:m,data:A}}),()=>l({type:t.UnregisterDroppable,key:o,id:i})),[i]),(0,d.useEffect)(()=>{r!==h.current.disabled&&(l({type:t.SetDroppableDisabled,id:i,key:o,disabled:r}),h.current.disabled=r)},[i,o,r,l]),{active:s,rect:m,isOver:(null==u?void 0:u.id)===i,node:_,over:u,setNodeRef:C}}function eq(e){let{animation:t,children:n}=e,[r,i]=(0,d.useState)(null),[a,o]=(0,d.useState)(null),s=(0,p.usePrevious)(n);return n||r||!s||i(s),(0,p.useIsomorphicLayoutEffect)(()=>{if(!a)return;let e=null==r?void 0:r.key,n=null==r?void 0:r.props.id;if(null==e||null==n)return void i(null);Promise.resolve(t(n,a)).then(()=>{i(null)})},[t,r,a]),d.default.createElement(d.default.Fragment,null,n,r?(0,d.cloneElement)(r,{ref:o}):null)}let eG={x:0,y:0,scaleX:1,scaleY:1};function e$(e){let{children:t}=e;return d.default.createElement(eN.Provider,{value:eI},d.default.createElement(eF.Provider,{value:eG},t))}let eK={position:"fixed",touchAction:"none"},eY=e=>(0,p.isKeyboardEvent)(e)?"transform 250ms ease":void 0,eX=(0,d.forwardRef)((e,t)=>{let{as:n,activatorEvent:r,adjustScale:i,children:a,className:o,rect:s,style:l,transform:u,transition:c=eY}=e;if(!s)return null;let h=i?u:{...u,scaleX:1,scaleY:1},f={...eK,width:s.width,height:s.height,top:s.top,left:s.left,transform:p.CSS.Transform.toString(h),transformOrigin:i&&r?function(e,t){let n=(0,p.getEventCoordinates)(e);if(!n)return"0 0";let r={x:(n.x-t.left)/t.width*100,y:(n.y-t.top)/t.height*100};return r.x+"% "+r.y+"%"}(r,s):void 0,transition:"function"==typeof c?c(r):c,...l};return d.default.createElement(n,{className:o,style:f,ref:t},a)}),eZ=e=>t=>{let{active:n,dragOverlay:r}=t,i={},{styles:a,className:o}=e;if(null!=a&&a.active)for(let[e,t]of Object.entries(a.active))void 0!==t&&(i[e]=n.node.style.getPropertyValue(e),n.node.style.setProperty(e,t));if(null!=a&&a.dragOverlay)for(let[e,t]of Object.entries(a.dragOverlay))void 0!==t&&r.node.style.setProperty(e,t);return null!=o&&o.active&&n.node.classList.add(o.active),null!=o&&o.dragOverlay&&r.node.classList.add(o.dragOverlay),function(){for(let[e,t]of Object.entries(i))n.node.style.setProperty(e,t);null!=o&&o.active&&n.node.classList.remove(o.active)}},eJ={duration:250,easing:"ease",keyframes:e=>{let{transform:{initial:t,final:n}}=e;return[{transform:p.CSS.Transform.toString(t)},{transform:p.CSS.Transform.toString(n)}]},sideEffects:eZ({styles:{active:{opacity:"0"}}})},eQ=0,e0=d.default.memo(e=>{let{adjustScale:t=!1,children:n,dropAnimation:r,style:i,transition:a,modifiers:o,wrapperElement:s="div",className:l,zIndex:u=999}=e,{activatorEvent:c,active:h,activeNodeRect:f,containerNodeRect:m,draggableNodes:g,droppableContainers:y,dragOverlay:b,over:x,measuringConfiguration:w,scrollableAncestors:k,scrollableAncestorRects:S,windowRect:_}=eH(),C=(0,d.useContext)(eF),A=function(e){return(0,d.useMemo)(()=>{if(null!=e)return++eQ},[e])}(null==h?void 0:h.id),E=ej(o,{activatorEvent:c,active:h,activeNodeRect:f,containerNodeRect:m,draggingNodeRect:b.rect,over:x,overlayNodeRect:b.rect,scrollableAncestors:k,scrollableAncestorRects:S,transform:C,windowRect:_}),T=eg(f),M=function(e){let{config:t,draggableNodes:n,droppableContainers:r,measuringConfiguration:i}=e;return(0,p.useEvent)((e,a)=>{if(null===t)return;let o=n.get(e);if(!o)return;let s=o.node.current;if(!s)return;let l=e_(a);if(!l)return;let{transform:u}=(0,p.getWindow)(a).getComputedStyle(a),c=O(u);if(!c)return;let d="function"==typeof t?t:function(e){let{duration:t,easing:n,sideEffects:r,keyframes:i}={...eJ,...e};return e=>{let{active:a,dragOverlay:o,transform:s,...l}=e;if(!t)return;let u={x:o.rect.left-a.rect.left,y:o.rect.top-a.rect.top},c={scaleX:1!==s.scaleX?a.rect.width*s.scaleX/o.rect.width:1,scaleY:1!==s.scaleY?a.rect.height*s.scaleY/o.rect.height:1},d={x:s.x-u.x,y:s.y-u.y,...c},h=i({...l,active:a,dragOverlay:o,transform:{initial:s,final:d}}),[p]=h,f=h[h.length-1];if(JSON.stringify(p)===JSON.stringify(f))return;let m=null==r?void 0:r({active:a,dragOverlay:o,...l}),g=o.node.animate(h,{duration:t,easing:n,fill:"forwards"});return new Promise(e=>{g.onfinish=()=>{null==m||m(),e()}})}}(t);return Y(s,i.draggable.measure),d({active:{id:e,data:o.data,node:s,rect:i.draggable.measure(s)},draggableNodes:n,dragOverlay:{node:a,rect:i.dragOverlay.measure(l)},droppableContainers:r,measuringConfiguration:i,transform:c})})}({config:r,draggableNodes:g,droppableContainers:y,measuringConfiguration:w}),I=T?b.setRef:void 0;return d.default.createElement(e$,null,d.default.createElement(eq,{animation:M},h&&A?d.default.createElement(eX,{key:A,id:h.id,ref:I,as:s,activatorEvent:c,adjustScale:t,className:l,transition:a,rect:T,style:{zIndex:u,...i},transform:E},n):null))})},493240:e=>{"use strict";e.s({restrictToHorizontalAxis:()=>n,restrictToParentElement:()=>r,restrictToVerticalAxis:()=>i,snapCenterToCursor:()=>a});var t=e.i(230613);let n=e=>{let{transform:t}=e;return{...t,y:0}},r=e=>{let{containerNodeRect:t,draggingNodeRect:n,transform:r}=e;return n&&t?function(e,t,n){let r={...e};return t.top+e.y<=n.top?r.y=n.top-t.top:t.bottom+e.y>=n.top+n.height&&(r.y=n.top+n.height-t.bottom),t.left+e.x<=n.left?r.x=n.left-t.left:t.right+e.x>=n.left+n.width&&(r.x=n.left+n.width-t.right),r}(r,n,t):r},i=e=>{let{transform:t}=e;return{...t,x:0}},a=e=>{let{activatorEvent:n,draggingNodeRect:r,transform:i}=e;if(r&&n){let e=(0,t.getEventCoordinates)(n);if(!e)return i;let a=e.x-r.left,o=e.y-r.top;return{...i,x:i.x+a-r.width/2,y:i.y+o-r.height/2}}return i}},913756:e=>{"use strict";e.s({SortableContext:()=>p,arrayMove:()=>i,horizontalListSortingStrategy:()=>s,sortableKeyboardCoordinates:()=>_,useSortable:()=>w,verticalListSortingStrategy:()=>c});var t=e.i(373150),n=e.i(691208),r=e.i(230613);function i(e,t,n){let r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function a(e){return null!==e&&e>=0}let o={scaleX:1,scaleY:1},s=e=>{var t;let{rects:n,activeNodeRect:r,activeIndex:i,overIndex:a,index:s}=e,l=null!=(t=n[i])?t:r;if(!l)return null;let u=function(e,t,n){let r=e[t],i=e[t-1],a=e[t+1];return r&&(i||a)?n<t?i?r.left-(i.left+i.width):a.left-(r.left+r.width):a?a.left-(r.left+r.width):r.left-(i.left+i.width):0}(n,s,i);if(s===i){let e=n[a];return e?{x:i<a?e.left+e.width-(l.left+l.width):e.left-l.left,y:0,...o}:null}return s>i&&s<=a?{x:-l.width-u,y:0,...o}:s<i&&s>=a?{x:l.width+u,y:0,...o}:{x:0,y:0,...o}},l=e=>{let{rects:t,activeIndex:n,overIndex:r,index:a}=e,o=i(t,r,n),s=t[a],l=o[a];return l&&s?{x:l.left-s.left,y:l.top-s.top,scaleX:l.width/s.width,scaleY:l.height/s.height}:null},u={scaleX:1,scaleY:1},c=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:i,rects:a,overIndex:o}=e,s=null!=(t=a[n])?t:r;if(!s)return null;if(i===n){let e=a[o];return e?{x:0,y:n<o?e.top+e.height-(s.top+s.height):e.top-s.top,...u}:null}let l=function(e,t,n){let r=e[t],i=e[t-1],a=e[t+1];return r?n<t?i?r.top-(i.top+i.height):a?a.top-(r.top+r.height):0:a?a.top-(r.top+r.height):i?r.top-(i.top+i.height):0:0}(a,i,n);return i>n&&i<=o?{x:0,y:-s.height-l,...u}:i<n&&i>=o?{x:0,y:s.height+l,...u}:{x:0,y:0,...u}},d="Sortable",h=t.default.createContext({activeIndex:-1,containerId:d,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:l,disabled:{draggable:!1,droppable:!1}});function p(e){let{children:i,id:a,items:o,strategy:s=l,disabled:u=!1}=e,{active:c,dragOverlay:p,droppableRects:f,over:m,measureDroppableContainers:g}=(0,n.useDndContext)(),y=(0,r.useUniqueId)(d,a),b=null!==p.rect,x=(0,t.useMemo)(()=>o.map(e=>"object"==typeof e&&"id"in e?e.id:e),[o]),w=null!=c,k=c?x.indexOf(c.id):-1,S=m?x.indexOf(m.id):-1,_=(0,t.useRef)(x),C=!function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(x,_.current),A=-1!==S&&-1===k||C,E="boolean"==typeof u?{draggable:u,droppable:u}:u;(0,r.useIsomorphicLayoutEffect)(()=>{C&&w&&g(x)},[C,x,w,g]),(0,t.useEffect)(()=>{_.current=x},[x]);let T=(0,t.useMemo)(()=>({activeIndex:k,containerId:y,disabled:E,disableTransforms:A,items:x,overIndex:S,useDragOverlay:b,sortedRects:x.reduce((e,t,n)=>{let r=f.get(t);return r&&(e[n]=r),e},Array(x.length)),strategy:s}),[k,y,E.draggable,E.droppable,A,x,S,f,b,s]);return t.default.createElement(h.Provider,{value:T},i)}let f=e=>{let{id:t,items:n,activeIndex:r,overIndex:a}=e;return i(n,r,a).indexOf(t)},m=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:i,items:a,newIndex:o,previousItems:s,previousContainerId:l,transition:u}=e;return!!u&&!!r&&(s===a||i!==o)&&(!!n||o!==i&&t===l)},g={duration:200,easing:"ease"},y="transform",b=r.CSS.Transition.toString({property:y,duration:0,easing:"linear"}),x={roleDescription:"sortable"};function w(e){var i,o,s,l;let{animateLayoutChanges:u=m,attributes:c,disabled:d,data:p,getNewIndex:w=f,id:k,strategy:S,resizeObserverConfig:_,transition:C=g}=e,{items:A,containerId:E,activeIndex:T,disabled:M,disableTransforms:I,sortedRects:N,overIndex:D,useDragOverlay:P,strategy:R}=(0,t.useContext)(h),O=(i=d,o=M,"boolean"==typeof i?{draggable:i,droppable:!1}:{draggable:null!=(s=null==i?void 0:i.draggable)?s:o.draggable,droppable:null!=(l=null==i?void 0:i.droppable)?l:o.droppable}),j=A.indexOf(k),F=(0,t.useMemo)(()=>({sortable:{containerId:E,index:j,items:A},...p}),[E,p,j,A]),L=(0,t.useMemo)(()=>A.slice(A.indexOf(k)),[A,k]),{rect:z,node:B,isOver:U,setNodeRef:H}=(0,n.useDroppable)({id:k,data:F,disabled:O.droppable,resizeObserverConfig:{updateMeasurementsFor:L,..._}}),{active:W,activatorEvent:V,activeNodeRect:q,attributes:G,setNodeRef:$,listeners:K,isDragging:Y,over:X,setActivatorNodeRef:Z,transform:J}=(0,n.useDraggable)({id:k,data:F,attributes:{...x,...c},disabled:O.draggable}),Q=(0,r.useCombinedRefs)(H,$),ee=!!W,et=ee&&!I&&a(T)&&a(D),en=!P&&Y,er=en&&et?J:null,ei=et?null!=er?er:(null!=S?S:R)({rects:N,activeNodeRect:q,activeIndex:T,overIndex:D,index:j}):null,ea=a(T)&&a(D)?w({id:k,items:A,activeIndex:T,overIndex:D}):j,eo=null==W?void 0:W.id,es=(0,t.useRef)({activeId:eo,items:A,newIndex:ea,containerId:E}),el=A!==es.current.items,eu=u({active:W,containerId:E,isDragging:Y,isSorting:ee,id:k,index:j,items:A,newIndex:es.current.newIndex,previousItems:es.current.items,previousContainerId:es.current.containerId,transition:C,wasDragging:null!=es.current.activeId}),ec=function(e){let{disabled:i,index:a,node:o,rect:s}=e,[l,u]=(0,t.useState)(null),c=(0,t.useRef)(a);return(0,r.useIsomorphicLayoutEffect)(()=>{if(!i&&a!==c.current&&o.current){let e=s.current;if(e){let t=(0,n.getClientRect)(o.current,{ignoreTransform:!0}),r={x:e.left-t.left,y:e.top-t.top,scaleX:e.width/t.width,scaleY:e.height/t.height};(r.x||r.y)&&u(r)}}a!==c.current&&(c.current=a)},[i,a,o,s]),(0,t.useEffect)(()=>{l&&u(null)},[l]),l}({disabled:!eu,index:j,node:B,rect:z});return(0,t.useEffect)(()=>{ee&&es.current.newIndex!==ea&&(es.current.newIndex=ea),E!==es.current.containerId&&(es.current.containerId=E),A!==es.current.items&&(es.current.items=A)},[ee,ea,E,A]),(0,t.useEffect)(()=>{if(eo===es.current.activeId)return;if(eo&&!es.current.activeId){es.current.activeId=eo;return}let e=setTimeout(()=>{es.current.activeId=eo},50);return()=>clearTimeout(e)},[eo]),{active:W,activeIndex:T,attributes:G,data:F,rect:z,index:j,newIndex:ea,items:A,isOver:U,isSorting:ee,isDragging:Y,listeners:K,node:B,overIndex:D,over:X,setNodeRef:Q,setActivatorNodeRef:Z,setDroppableNodeRef:H,setDraggableNodeRef:$,transform:null!=ec?ec:ei,transition:ec||el&&es.current.newIndex===j?b:(!en||(0,r.isKeyboardEvent)(V))&&C&&(ee||eu)?r.CSS.Transition.toString({...C,property:y}):void 0}}function k(e){if(!e)return!1;let t=e.data.current;return!!t&&"sortable"in t&&"object"==typeof t.sortable&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable}let S=[n.KeyboardCode.Down,n.KeyboardCode.Right,n.KeyboardCode.Up,n.KeyboardCode.Left],_=(e,t)=>{let{context:{active:i,collisionRect:a,droppableRects:o,droppableContainers:s,over:l,scrollableAncestors:u}}=t;if(S.includes(e.code)){if(e.preventDefault(),!i||!a)return;let t=[];s.getEnabled().forEach(r=>{if(!r||null!=r&&r.disabled)return;let i=o.get(r.id);if(i)switch(e.code){case n.KeyboardCode.Down:a.top<i.top&&t.push(r);break;case n.KeyboardCode.Up:a.top>i.top&&t.push(r);break;case n.KeyboardCode.Left:a.left>i.left&&t.push(r);break;case n.KeyboardCode.Right:a.left<i.left&&t.push(r)}});let c=(0,n.closestCorners)({active:i,collisionRect:a,droppableRects:o,droppableContainers:t,pointerCoordinates:null}),d=(0,n.getFirstCollision)(c,"id");if(d===(null==l?void 0:l.id)&&c.length>1&&(d=c[1].id),null!=d){let e=s.get(i.id),t=s.get(d),l=t?o.get(t.id):null,c=null==t?void 0:t.node.current;if(c&&l&&e&&t){let i=(0,n.getScrollableAncestors)(c).some((e,t)=>u[t]!==e),o=C(e,t),s=function(e,t){return!!k(e)&&!!k(t)&&!!C(e,t)&&e.data.current.sortable.index<t.data.current.sortable.index}(e,t),d=i||!o?{x:0,y:0}:{x:s?a.width-l.width:0,y:s?a.height-l.height:0},h={x:l.left,y:l.top};return d.x&&d.y?h:(0,r.subtract)(h,d)}}}};function C(e,t){return!!k(e)&&!!k(t)&&e.data.current.sortable.containerId===t.data.current.sortable.containerId}},793286:e=>{"use strict";e.s({composeEventHandlers:()=>n,useComposedRefs:()=>i});var t=e.i(373150);function n(e,t){let{checkForDefaultPrevented:n=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(r){if(null==e||e(r),!1===n||!r.defaultPrevented)return null==t?void 0:t(r)}}function r(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function i(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];return t.useCallback(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{let n=!1,i=t.map(t=>{let i=r(t,e);return n||"function"!=typeof i||(n=!0),i});if(n)return()=>{for(let e=0;e<i.length;e++){let n=i[e];"function"==typeof n?n():r(t[e],null)}}}}(...n),n)}},986110:e=>{"use strict";e.s({Sortable:()=>w,SortableContent:()=>S,SortableItem:()=>C,SortableItemHandle:()=>A,SortableOverlay:()=>M});var t=e.i(290479),n=e.i(691208),r=e.i(493240),i=e.i(913756),a=e.i(230613),o=e.i(774009),s=e.i(373150),l=e.i(793286),u=e.i(289702),c=e.i(784445);let d={vertical:{modifiers:[r.restrictToVerticalAxis,r.restrictToParentElement],strategy:i.verticalListSortingStrategy,collisionDetection:n.closestCenter},horizontal:{modifiers:[r.restrictToHorizontalAxis,r.restrictToParentElement],strategy:i.horizontalListSortingStrategy,collisionDetection:n.closestCenter},mixed:{modifiers:[r.restrictToParentElement],strategy:void 0,collisionDetection:n.closestCorners}},h="Sortable",p="SortableContent",f="SortableItem",m="SortableItemHandle",g="SortableOverlay",y={[h]:"`".concat(h,"` components must be within `").concat(h,"`"),[p]:"`".concat(p,"` must be within `").concat(h,"`"),[f]:"`".concat(f,"` must be within `").concat(p,"`"),[m]:"`".concat(m,"` must be within `").concat(f,"`"),[g]:"`".concat(g,"` must be within `").concat(h,"`")},b=s.createContext(null);function x(e){let t=s.useContext(b);if(!t)throw Error(y[e]);return t}function w(e){let{value:r,onValueChange:a,collisionDetection:o,modifiers:u,strategy:c,onMove:h,orientation:p="vertical",flatCursor:f=!1,getItemValue:m,accessibility:g,...y}=e,x=s.useId(),[w,k]=s.useState(null),S=(0,n.useSensors)((0,n.useSensor)(n.MouseSensor),(0,n.useSensor)(n.TouchSensor),(0,n.useSensor)(n.KeyboardSensor,{coordinateGetter:i.sortableKeyboardCoordinates})),_=s.useMemo(()=>d[p],[p]),C=s.useCallback(e=>{if("object"==typeof e&&!m)throw Error("getItemValue is required when using array of objects.");return m?m(e):e},[m]),A=s.useMemo(()=>r.map(e=>C(e)),[r,C]),E=s.useCallback(e=>{let{active:t,over:n}=e;if(n&&t.id!==(null==n?void 0:n.id)){let o=r.findIndex(e=>C(e)===t.id),s=r.findIndex(e=>C(e)===n.id);h?h({...e,activeIndex:o,overIndex:s}):null==a||a((0,i.arrayMove)(r,o,s))}k(null)},[r,a,h,C]),T=s.useMemo(()=>({onDragStart(e){var t;let{active:n}=e,i=n.id.toString();return'Grabbed sortable item "'.concat(i,'". Current position is ').concat((null==(t=n.data.current)?void 0:t.sortable.index)+1," of ").concat(r.length,". Use arrow keys to move, space to drop.")},onDragOver(e){let{active:t,over:n}=e;if(n){var i,a,o,s;let e=null!=(o=null==(i=n.data.current)?void 0:i.sortable.index)?o:0,l=null!=(s=null==(a=t.data.current)?void 0:a.sortable.index)?s:0,u=t.id.toString();return'Sortable item "'.concat(u,'" moved ').concat(e>l?"down":"up"," to position ").concat(e+1," of ").concat(r.length,".")}return"Sortable item is no longer over a droppable area. Press escape to cancel."},onDragEnd(e){let{active:t,over:n}=e,i=t.id.toString();if(n){var a,o;let e=null!=(o=null==(a=n.data.current)?void 0:a.sortable.index)?o:0;return'Sortable item "'.concat(i,'" dropped at position ').concat(e+1," of ").concat(r.length,".")}return'Sortable item "'.concat(i,'" dropped. No changes were made.')},onDragCancel(e){var t,n;let{active:i}=e,a=null!=(n=null==(t=i.data.current)?void 0:t.sortable.index)?n:0,o=i.id.toString();return'Sorting cancelled. Sortable item "'.concat(o,'" returned to position ').concat(a+1," of ").concat(r.length,".")},onDragMove(e){let{active:t,over:n}=e;if(n){var i,a,o,s;let e=null!=(o=null==(i=n.data.current)?void 0:i.sortable.index)?o:0,l=null!=(s=null==(a=t.data.current)?void 0:a.sortable.index)?s:0,u=t.id.toString();return'Sortable item "'.concat(u,'" is moving ').concat(e>l?"down":"up"," to position ").concat(e+1," of ").concat(r.length,".")}return"Sortable item is no longer over a droppable area. Press escape to cancel."}}),[r]),M=s.useMemo(()=>({draggable:"\n        To pick up a sortable item, press space or enter.\n        While dragging, use the ".concat("vertical"===p?"up and down":"horizontal"===p?"left and right":"arrow"," keys to move the item.\n        Press space or enter again to drop the item in its new position, or press escape to cancel.\n      ")}),[p]),I=s.useMemo(()=>({id:x,items:A,modifiers:null!=u?u:_.modifiers,strategy:null!=c?c:_.strategy,activeId:w,setActiveId:k,getItemValue:C,flatCursor:f}),[x,A,u,c,_.modifiers,_.strategy,w,C,f]);return(0,t.jsx)(b.Provider,{value:I,children:(0,t.jsx)(n.DndContext,{collisionDetection:null!=o?o:_.collisionDetection,modifiers:null!=u?u:_.modifiers,sensors:S,...y,id:x,onDragStart:(0,l.composeEventHandlers)(y.onDragStart,e=>{let{active:t}=e;return k(t.id)}),onDragEnd:(0,l.composeEventHandlers)(y.onDragEnd,E),onDragCancel:(0,l.composeEventHandlers)(y.onDragCancel,()=>k(null)),accessibility:{announcements:T,screenReaderInstructions:M,...g}})})}b.displayName=h;let k=s.createContext(!1);k.displayName=p;let S=s.forwardRef((e,n)=>{let{strategy:r,asChild:a,withoutSlot:s,children:l,...u}=e,c=x(p),d=a?o.Slot:"div";return(0,t.jsx)(k.Provider,{value:!0,children:(0,t.jsx)(i.SortableContext,{items:c.items,strategy:null!=r?r:c.strategy,children:s?l:(0,t.jsx)(d,{...u,ref:n,children:l})})})});S.displayName=p;let _=s.createContext(null);_.displayName=f;let C=s.forwardRef((e,n)=>{let{value:r,style:c,asHandle:d,asChild:h,disabled:p,className:m,...g}=e,b=s.useContext(k),w=s.useContext(E);if(!b&&!w)throw Error(y[f]);if(""===r)throw Error("`".concat(f,"` value cannot be an empty string"));let S=x(f),C=s.useId(),{attributes:A,listeners:T,setNodeRef:M,setActivatorNodeRef:I,transform:N,transition:D,isDragging:P}=(0,i.useSortable)({id:r,disabled:p}),R=(0,l.useComposedRefs)(n,e=>{!p&&(M(e),d&&I(e))}),O=s.useMemo(()=>({transform:a.CSS.Translate.toString(N),transition:D,...c}),[N,D,c]),j=s.useMemo(()=>({id:C,attributes:A,listeners:T,setActivatorNodeRef:I,isDragging:P,disabled:p}),[C,A,T,I,P,p]),F=h?o.Slot:"div";return(0,t.jsx)(_.Provider,{value:j,children:(0,t.jsx)(F,{id:C,"data-dragging":P?"":void 0,...g,...d?A:{},...d?T:{},tabIndex:p?void 0:0,ref:R,style:O,className:(0,u.cn)("focus-visible:outline-hidden focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1",{"touch-none select-none":d,"cursor-default":S.flatCursor,"data-dragging:cursor-grabbing":!S.flatCursor,"cursor-grab":!P&&d&&!S.flatCursor,"opacity-50":P,"pointer-events-none opacity-50":p},m)})})});C.displayName=f;let A=s.forwardRef((e,n)=>{let{asChild:r,disabled:i,className:a,...c}=e,d=s.useContext(_);if(!d)throw Error(y[m]);let h=x(m),p=null!=i?i:d.disabled,f=(0,l.useComposedRefs)(n,e=>{p&&d.setActivatorNodeRef(e)}),g=r?o.Slot:"button";return(0,t.jsx)(g,{type:"button","aria-controls":d.id,"data-dragging":d.isDragging?"":void 0,...c,...d.attributes,...d.listeners,ref:f,className:(0,u.cn)("select-none disabled:pointer-events-none disabled:opacity-50",h.flatCursor?"cursor-default":"cursor-grab data-dragging:cursor-grabbing",a),disabled:p})});A.displayName=m;let E=s.createContext(!1);E.displayName=g;let T={sideEffects:(0,n.defaultDropAnimationSideEffects)({styles:{active:{opacity:"0.4"}}})};function M(e){var r;let{container:i,children:a,...o}=e,l=x(g),[d,h]=s.useState(!1);s.useLayoutEffect(()=>h(!0),[]);let p=null!=i?i:d?null==(r=globalThis.document)?void 0:r.body:null;return p?c.createPortal((0,t.jsx)(n.DragOverlay,{dropAnimation:T,modifiers:l.modifiers,className:(0,u.cn)(!l.flatCursor&&"cursor-grabbing"),...o,children:(0,t.jsx)(E.Provider,{value:!0,children:l.activeId?"function"==typeof a?a({value:l.activeId}):a:null})}),p):null}},482698:e=>{"use strict";e.s({DataTableSortList:()=>w});var t=e.i(290479),n=e.i(864181),r=e.i(149404),i=e.i(443180),a=e.i(381612),o=e.i(945941),s=e.i(84324),l=e.i(334145),u=e.i(373150),c=e.i(704255),d=e.i(436531);e.i(567349);var h=e.i(111367),p=e.i(303652),f=e.i(365918),m=e.i(986110),g=e.i(252390),y=e.i(289702),b=e.i(972899);let x=["backspace","delete"];function w(e){var n;let{table:a,...o}=e,l=u.useId(),f=u.useId(),x=u.useId(),[w,S]=u.useState(!1),_=a.getState().sorting,{columnLabels:C,columns:A}=u.useMemo(()=>{let e=new Map,t=new Set(_.map(e=>e.id)),n=[];for(let o of a.getAllColumns()){var r,i;if(!o.getCanSort())continue;let a=null!=(i=null==(r=o.columnDef.meta)?void 0:r.label)?i:o.id;e.set(o.id,a),t.has(o.id)||n.push({id:o.id,label:a,raw:o})}return{columnLabels:e,columns:n}},[_,a]),{track:E}=(0,g.default)(),T=u.useCallback(e=>{var t;let n=null!=e?e:null==(t=A[0])?void 0:t.id,r=a.getColumn(n);r&&(E("library_sort_added",{columnId:n}),r.toggleSorting(!1,!0))},[a,A,E]),M=u.useCallback((e,t)=>{a.setSorting(n=>n?n.map(n=>n.id===e?{...n,...t}:n):n)},[a]),I=u.useCallback(e=>{let t=a.getColumn(e);t&&t.clearSorting()},[a]),N=C.get(null==(n=_[0])?void 0:n.id);return(0,t.jsxs)(m.Sortable,{value:_,onValueChange:a.setSorting,getItemValue:e=>e.id,children:[(0,t.jsxs)(p.Popover,{open:w,onOpenChange:S,children:[(0,t.jsx)(p.PopoverTrigger,{asChild:!0,children:(0,t.jsx)(c.Button,{className:"font-medium border-dashed",variant:"outline",size:"medium",leadingIcon:(0,t.jsx)(b.Icon,{as:i.ArrowDownUp}),secondaryLabel:N,trailingIcon:_.length>1?(0,t.jsxs)(d.Badge,{variant:"secondary",className:" rounded-3 px-[5px] font-mono font-normal text-xxs text-text-secondary hover:bg-background-primary",children:["+",_.length-1]}):void 0,children:N?"Sorted by":"Sort"})}),(0,t.jsxs)(p.PopoverContent,{align:"start","aria-labelledby":f,"aria-describedby":x,className:(0,y.cn)("flex w-full p-4 max-w-[var(--radix-popover-content-available-width)] overflow-hidden origin-[var(--radix-popover-content-transform-origin)] flex-col gap-4",0===_.length&&"p-0"),...o,children:[_.length>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m.SortableContent,{asChild:!0,children:(0,t.jsx)("div",{role:"list",className:"flex max-h-[300px] flex-col gap-4 overflow-y-auto ",children:_.map(e=>(0,t.jsx)(k,{sort:e,sortItemId:"".concat(l,"-sort-").concat(e.id),columns:A,columnLabels:C,onSortUpdate:M,onSortRemove:I},e.id))})}),(0,t.jsx)(c.Button,{size:"xs",variant:"ghost",className:"w-full justify-start hover:bg-accent",leadingIcon:(0,t.jsx)(b.Icon,{as:s.Plus}),label:"Add sort",onClick:()=>T(),disabled:0===A.length})]}),0===_.length&&(0,t.jsxs)(h.Command,{className:"gap-0 w-[200px]",children:[(0,t.jsx)(r.CommandInput,{className:"text-sm w-full px-4 py-4 border-b placeholder:text-text-secondary bg-transparent focus-visible:outline-none font-medium text-text-primary",placeholder:"Search attributes..."}),(0,t.jsxs)(h.CommandList,{className:"scrollbar-overlay",children:[(0,t.jsx)(h.CommandEmpty,{children:"No columns found."}),(0,t.jsx)(h.CommandGroup,{className:"p-2",children:A.map(e=>(0,t.jsx)(h.CommandItem,{asChild:!0,children:(0,t.jsx)(c.Button,{variant:"ghost",size:"medium",className:"w-full justify-start",onClick:()=>T(e.id),children:(0,t.jsx)("span",{className:"truncate",children:e.label})})},e.id))})]})]})]})]}),(0,t.jsx)(m.SortableOverlay,{children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"h-10 w-[180px] rounded-2 bg-primary/10"}),(0,t.jsx)("div",{className:"h-10 w-24 rounded-2 bg-primary/10"}),(0,t.jsx)("div",{className:"size-10 shrink-0 rounded-2 bg-primary/10"}),(0,t.jsx)("div",{className:"size-10 shrink-0 rounded-2 bg-primary/10"})]})})]})}function k(e){let{sort:i,sortItemId:s,columns:d,columnLabels:g,onSortUpdate:y,onSortRemove:w}=e,k="".concat(s,"-field-listbox"),S="".concat(s,"-field-trigger"),_="".concat(s,"-direction-listbox"),[C,A]=u.useState(!1),[E,T]=u.useState(!1),M=u.useCallback(e=>{!(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement)&&(C||E||x.includes(e.key.toLowerCase())&&(e.preventDefault(),w(i.id)))},[i.id,C,E,w]);return(0,t.jsx)(m.SortableItem,{value:i.id,asChild:!0,children:(0,t.jsxs)("div",{role:"listitem",id:s,tabIndex:-1,className:"flex items-center gap-4",onKeyDown:M,children:[(0,t.jsx)(m.SortableItemHandle,{asChild:!0,children:(0,t.jsx)(c.Button,{variant:"ghost",size:"xs",className:"h-[28px]",leadingIcon:(0,t.jsx)(b.Icon,{as:o.GripHorizontal}),"aria-label":"Drag to reorder"})}),(0,t.jsxs)(p.Popover,{open:C,onOpenChange:A,children:[(0,t.jsxs)(p.PopoverTrigger,{id:S,role:"combobox","aria-controls":k,className:"w-[200px] text-sm bg-background-primary font-medium py-4 px-6 h-[28px] rounded-4 flex flex-row row-reverse items-center justify-between border border-border-primary",children:[(0,t.jsx)("span",{className:"truncate",children:g.get(i.id)}),(0,t.jsx)(b.Icon,{as:a.ChevronDown,className:"text-text-primary ml-1"})]}),(0,t.jsx)(p.PopoverContent,{id:k,className:"w-[var(--radix-popover-trigger-width)] overflow-hidden origin-[var(--radix-popover-content-transform-origin)] p-0",children:(0,t.jsxs)(h.Command,{className:"gap-0",children:[(0,t.jsx)(r.CommandInput,{className:"text-sm w-full px-4 py-4 border-b placeholder:text-text-secondary bg-transparent focus-visible:outline-none font-medium text-text-primary",placeholder:"Search attributes..."}),(0,t.jsxs)(h.CommandList,{className:"scrollbar-overlay",children:[(0,t.jsx)(h.CommandEmpty,{children:"No columns found."}),(0,t.jsx)(h.CommandGroup,{className:"p-2",children:d.map(e=>(0,t.jsx)(h.CommandItem,{asChild:!0,children:(0,t.jsx)(c.Button,{variant:"ghost",size:"medium",className:"w-full justify-start",onClick:()=>y(i.id,{id:e.id}),children:(0,t.jsx)("span",{className:"truncate",children:e.label})})},e.id))})]})]})})]}),(0,t.jsxs)(f.Select,{open:E,onOpenChange:T,value:i.desc?"desc":"asc",onValueChange:e=>y(i.id,{desc:"desc"===e}),children:[(0,t.jsx)(f.SelectTrigger,{variant:"anara","aria-controls":_,className:"w-24 bg-background-primary",children:(0,t.jsx)(f.SelectValue,{})}),(0,t.jsx)(f.SelectContent,{id:_,className:"min-w-[var(--radix-select-trigger-width)] origin-[var(--radix-select-content-transform-origin)]",children:n.dataTableConfig.sortOrders.map(e=>(0,t.jsx)(f.SelectItem,{value:e.value,children:e.label},e.value))})]}),(0,t.jsx)(c.Button,{"aria-controls":s,variant:"ghost",size:"xs",className:"h-[28px]",leadingIcon:(0,t.jsx)(b.Icon,{as:l.X}),"aria-label":"Remove sort",onClick:()=>w(i.id)})]})})}},721303:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]])},420067:e=>{"use strict";e.s({Loader:()=>t.default});var t=e.i(721303)},488732:e=>{"use strict";e.s({DataTableActionBar:()=>o});var t=e.i(290479);e.i(420067);var n=e.i(330462),r=e.i(34818),i=e.i(373150);e.i(704255),e.i(457910);var a=e.i(289702);function o(e){let{table:o,visible:s,children:l,className:u,...c}=e,d=(0,i.useRef)(null);i.useEffect(()=>{function e(e){"Escape"===e.key&&o.toggleAllRowsSelected(!1)}return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[o]);let h=null!=s?s:o.getSelectedRowModel().flatRows.filter(e=>{var t;return(null==(t=e.original)?void 0:t.type)!=="PLACEHOLDER"}).length>0;return(0,t.jsx)(n.AnimatePresence,{children:h&&(0,t.jsx)(r.motion.div,{ref:d,role:"toolbar","aria-orientation":"horizontal",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{duration:.2,ease:"easeInOut"},className:(0,a.cn)("absolute inset-x-0 rounded-6 mx-auto bottom-9 z-50 max-w-[700px] w-full flex  flex-wrap items-center justify-center gap-4 shadow-feint border bg-background-primary overflow-hidden text-text-primary max-md:flex-row max-md:w-fit",u),...c,children:l})})}},824481:e=>{"use strict";e.s({useVirtualizer:()=>a});var t=e.i(373150),n=e.i(784445),r=e.i(567903);let i="undefined"!=typeof document?t.useLayoutEffect:t.useEffect;function a(e){return function(e){let a=t.useReducer(()=>({}),{})[1],o={...e,onChange:(t,r)=>{var i;r?(0,n.flushSync)(a):a(),null==(i=e.onChange)||i.call(e,t,r)}},[s]=t.useState(()=>new r.Virtualizer(o));return s.setOptions(o),i(()=>s._didMount(),[]),i(()=>s._willUpdate()),s}({observeElementRect:r.observeElementRect,observeElementOffset:r.observeElementOffset,scrollToFn:r.elementScroll,...e})}},991564:e=>{"use strict";e.s({Table:()=>i,TableBody:()=>o,TableCell:()=>u,TableHead:()=>l,TableHeader:()=>a,TableRow:()=>s});var t=e.i(290479),n=e.i(373150),r=e.i(289702);let i=n.forwardRef((e,n)=>{let{className:i,...a}=e;return(0,t.jsx)("table",{ref:n,"data-slot":"table",className:(0,r.cn)("min-w-max w-full caption-bottom text-sm",i),...a})});i.displayName="Table";let a=n.forwardRef((e,n)=>{let{className:i,...a}=e;return(0,t.jsx)("thead",{ref:n,"data-slot":"table-header",className:(0,r.cn)("[&_tr]:border-b border-border-muted",i),...a})});function o(e){let{className:n,...i}=e;return(0,t.jsx)("tbody",{"data-slot":"table-body",className:(0,r.cn)("[&_tr:last-child]:border-0",n),...i})}a.displayName="TableHeader";let s=n.forwardRef((e,n)=>{let{className:i,...a}=e;return(0,t.jsx)("tr",{ref:n,"data-slot":"table-row",className:(0,r.cn)("data-[state=selected]:bg-blue/10 focus-visible:outline-none dark:data-[state=selected]:bg-blue/10 border-b border-border-muted transition-colors",i),...a})});function l(e){let{className:n,...i}=e;return(0,t.jsx)("th",{"data-slot":"table-head",className:(0,r.cn)("text-text-primary h-13 px-4 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",n),...i})}function u(e){let{className:n,...i}=e;return(0,t.jsx)("td",{"data-slot":"table-cell",className:(0,r.cn)("p-2 px-5 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px] overflow-hidden","[&:has([data-tag-content])]:px-0 [&:has([data-tag-content])]:pl-5",n),...i})}s.displayName="TableRow"},369964:e=>{"use strict";e.s({useResizeColumns:()=>n});var t=e.i(373150);function n(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=!(arguments.length>4)||void 0===arguments[4]||arguments[4],[o,s]=(0,t.useState)([]);return(0,t.useLayoutEffect)(()=>{0===o.length&&e.getAllColumns().length>0&&s(e.getAllColumns().map(e=>({id:e.id,width:e.getSize(),minWidth:e.columnDef.minSize,maxWidth:e.columnDef.maxSize})))},[e,o.length]),(0,t.useLayoutEffect)(()=>{if(!a||0===o.length)return;let t=e.getVisibleFlatColumns();if(0===t.length)return;let s={},l=[],u=0;for(let e of t)if("select"===e.id){let t=o.find(t=>t.id===e.id);t&&(s[e.id]=t.width,u+=t.width)}else l.push(e);if(Object.keys(s).length>0&&e.setColumnSizing(e=>({...e,...s})),0===l.length)return;let c=Math.max(n-i-u,200*l.length),d=l.reduce((e,t)=>{let n=o.find(e=>e.id===t.id);return e+((null==n?void 0:n.width)||r)},0),h={};for(let e of l){let t=o.find(t=>t.id===e.id);if(!t)continue;let n=Math.floor(c*(t.width/d));t.minWidth&&n<t.minWidth&&(n=t.minWidth),t.maxWidth&&n>t.maxWidth&&(n=t.maxWidth),h[e.id]=n}e.setColumnSizing(e=>({...e,...h}))},[e.getState().columnVisibility,n,o,e,r,i,a]),{resetColumnSizes:()=>{let t={};for(let e of o)t[e.id]=e.width;e.setColumnSizing(t)}}}},797997:e=>{"use strict";e.s({TableUpdateCellSize:()=>r});var t=e.i(369964),n=e.i(373150);let r=e=>{let{headerRef:r,table:i}=e,[a,o]=(0,n.useState)(0),s=void 0!==i.options.columnResizeMode;return(0,n.useEffect)(()=>{let e;if(!r.current)return;let t=()=>{clearTimeout(e),e=setTimeout(()=>{if(r.current){let e=r.current.clientWidth;o(t=>t!==e?e:t)}},16)};t();let n=new ResizeObserver(t);return n.observe(r.current),()=>{clearTimeout(e),r.current&&n.unobserve(r.current),n.disconnect()}},[]),(0,t.useResizeColumns)(i,a,100,0,!s),null}},292536:e=>{"use strict";e.s({useShiftSelection:()=>o});var t=e.i(647968),n=e.i(608294),r=e.i(227348),i=e.i(373150);let a=(0,r.atomFamily)(e=>(0,t.atom)(null)),o=(e,t)=>{var r;let o=a((null==(r=null==e?void 0:e.options.meta)?void 0:r.tableId)||"default"),[s,l]=(0,n.useAtom)(o),u=(0,i.useCallback)((e,t,n,r)=>{let i=e[0],a=t.findIndex(e=>e.id===i.id);return -1!==a?(r(i.id),{startIndex:Math.min(n,a),endIndex:Math.max(n,a)}):{startIndex:0,endIndex:n}},[]);return{handleShiftClick:(0,i.useCallback)(n=>{if(!e||!t)return!1;if(n.shiftKey){n.preventDefault(),n.stopPropagation();let r=e.getSelectedRowModel().rows,i=e.getRowModel().rows,a=i.findIndex(e=>e.id===t.id);if(-1!==a){let t,n,o=-1;if(s&&(o=i.findIndex(e=>e.id===s)),-1!==o&&r.length>0)if(r.some(e=>e.id===s))t=Math.min(a,o),n=Math.max(a,o);else{let e=u(r,i,a,l);t=e.startIndex,n=e.endIndex}else if(r.length>0){let e=u(r,i,a,l);t=e.startIndex,n=e.endIndex}else l(null),t=0,n=a;let c={...e.getState().rowSelection};for(let e=t;e<=n;e++)i[e]&&(c[i[e].id]=!0);e.setRowSelection(c)}return!0}return!1},[e,t,s,l]),setAnchor:(0,i.useCallback)(()=>{t&&l(t.id)},[t,l])}}},362172:e=>{"use strict";e.s({DraggableRow:()=>o});var t=e.i(290479),n=e.i(691208),r=e.i(373150),i=e.i(991564),a=e.i(292536);let o=r.default.forwardRef((e,o)=>{let{children:s,id:l,table:u,row:c,...d}=e,{attributes:h,listeners:p,setNodeRef:f}=(0,n.useDraggable)({id:l}),{handleShiftClick:m,setAnchor:g}=(0,a.useShiftSelection)(u,c),y=e=>{m(e)||e.ctrlKey||e.metaKey||g()},b=(0,r.useCallback)(e=>{var t;y(e),e.metaKey||e.ctrlKey||e.shiftKey||null==p||null==(t=p.onPointerDown)||t.call(p,e)},[y,p]);return(0,t.jsx)(i.TableRow,{ref:e=>{f(e),"function"==typeof o?o(e):o&&(o.current=e)},...d,...h,...p,onPointerDown:b,children:s})});o.displayName="DraggableRow"},362858:e=>{"use strict";e.s({DataTableVirtualizer:()=>c});var t=e.i(290479),n=e.i(878969),r=e.i(824481),i=e.i(373150),a=e.i(991564),o=e.i(824368),s=e.i(289702),l=e.i(797997),u=e.i(362172);function c(e){let{table:c,children:d,className:h,emptyPlaceholder:p,tableContainerClassName:f,...m}=e,{rows:g}=c.getRowModel(),[y,b]=(0,i.useState)(null),x=(0,i.useCallback)((e,t,n)=>{["createdAt","lastViewedAt","type","includedSources"].includes(t)&&b(e)},[]);(0,i.useEffect)(()=>{let e=()=>b(null);if(y)return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[y]);let w=c.getHeaderGroups(),k=i.default.useRef(null),S=(0,i.useRef)(null);(0,i.useEffect)(()=>(c.getState().columnSizingInfo.isResizingColumn?document.body.classList.add("table-resizing"):document.body.classList.remove("table-resizing"),()=>{document.body.classList.remove("table-resizing")}),[c.getState().columnSizingInfo.isResizingColumn]);let _=(0,r.useVirtualizer)({count:g.length,estimateSize:()=>35,getScrollElement:()=>S.current,measureElement:-1===navigator.userAgent.indexOf("Firefox")?e=>null==e?void 0:e.getBoundingClientRect().height:void 0,overscan:5}),C=_.getVirtualItems();return(0,t.jsxs)("div",{ref:S,className:(0,s.cn)("relative flex w-full overflow-auto scrollbar-hide min-h-0 flex-col",h),...m,children:[d,g.length>0&&(0,t.jsxs)(a.Table,{className:(0,s.cn)("h-full",f),children:[(0,t.jsx)(a.TableHeader,{ref:k,className:" sticky top-0 bg-background-primary z-10",children:w.map(e=>(0,t.jsx)(a.TableRow,{className:"w-max flex",children:e.headers.map((r,i)=>(0,t.jsxs)(a.TableHead,{colSpan:r.colSpan,style:{...(0,o.getCommonPinningStyles)({column:r.column}),width:r.getSize(),zIndex:e.headers.length-i},className:"px-6 flex items-center relative group","data-state":r.column.getIsResizing()?"resizing":void 0,children:[r.isPlaceholder?null:(0,t.jsx)("div",{className:"sticky left-6 select-none outline-none ring-0 min-w-max focus:outline-none focus-visible:ring-2 focus-visible:ring-blue",children:(0,n.flexRender)(r.column.columnDef.header,r.getContext())}),!r.isPlaceholder&&i>=1&&(0,t.jsx)("div",{onMouseDown:r.getResizeHandler(),onTouchStart:r.getResizeHandler(),onDoubleClick:()=>r.column.resetSize(),className:(0,s.cn)("absolute top-0 -right-6 z-20 h-full w-9 cursor-col-resize select-none touch-none","flex items-center justify-center","group/resize"),children:(0,t.jsx)("div",{className:(0,s.cn)("h-full w-[1px] ml-[1px] transition-all","bg-borderSecondary group-hover/resize:bg-blue0",r.column.getIsResizing()&&"bg-blue w-[2px]")})})]},r.id))},e.id))}),(0,t.jsx)(a.TableBody,{className:"w-full",style:{display:"block",height:"".concat(_.getTotalSize(),"px"),position:"relative"},children:(null==C?void 0:C.length)?C.map(e=>{let r=g[e.index];return(0,t.jsx)(u.DraggableRow,{id:r.id,table:c,row:r,ref:e=>_.measureElement(e),"data-index":e.index,"data-state":r.getIsSelected()&&"selected",className:"w-full h-[35px] p-0 items-center",style:{position:"absolute",display:"flex",transform:"translateY(".concat(e.start,"px)")},children:r.getVisibleCells().map((e,i)=>{let l=["createdAt","lastViewedAt","type","includedSources"].includes(e.column.id),u=y===e.id;return(0,t.jsx)(a.TableCell,{style:{...(0,o.getCommonPinningStyles)({column:e.column}),width:e.column.getSize()},className:(0,s.cn)("flex-shrink-0",i>1&&"border-l h-full flex-shrink-0 flex items-center border-border-muted",l?"cursor-pointer":"cursor-default",u&&"border border-text-tertiary rounded-4"),onClick:t=>{l&&(t.stopPropagation(),x(e.id,e.column.id,r.original.type))},children:(0,n.flexRender)(e.column.columnDef.cell,e.getContext())},e.id)})},r.id)}):null})]}),p,(0,t.jsx)(l.TableUpdateCellSize,{table:c,headerRef:k})]})}},677959:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])},748445:e=>{"use strict";e.s({Download:()=>t.default});var t=e.i(677959)},994906:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("file-up",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]])},983769:e=>{"use strict";e.s({FileUp:()=>t.default});var t=e.i(994906)},144233:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("folder-up",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"m9 13 3-3 3 3",key:"1pxg3c"}]])},522091:e=>{"use strict";e.s({FolderUp:()=>t.default});var t=e.i(144233)},182822:e=>{"use strict";e.s({LinkIcon:()=>t.default});var t=e.i(198509)},46142:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("scan-barcode",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M8 7v10",key:"23sfjj"}],["path",{d:"M12 7v10",key:"jspqdw"}],["path",{d:"M17 7v10",key:"578dap"}]])},672659:e=>{"use strict";e.s({ScanBarcode:()=>t.default});var t=e.i(46142)},132904:e=>{"use strict";e.s({ARXIV_REGEX:()=>r,DOI_REGEX:()=>t,PMID_REGEX:()=>n});let t=/^10\.\d{4,}\/[^\s/]+$/i,n=/^\d+$/,r=/^(?:arxiv:)?(\d{4}\.\d{4,5}|\d+\/\d+)|.*arxiv\.(\d+\.\d+)$/i},79469:e=>{"use strict";e.s({isYoutubeUrl:()=>a,validateWebsiteUrl:()=>l,websiteUrlSchema:()=>o});var t=e.i(490076),n=e.i(130732),r=e.i(555168);let i=r.z.string().regex(/^(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/watch\?v=|youtu\.be\/)([a-zA-Z0-9_-]{11})(?:[?&][a-zA-Z0-9_-]+=[a-zA-Z0-9_-]*)*$/,{message:"Invalid YouTube URL. The URL must be in the format: https://www.youtube.com/watch?v=VIDEO_ID"});r.z.object({url:i});let a=e=>{try{let t=new URL(e);return i.parse(t.href),!0}catch(e){return!1}},o=r.z.string().url("Please enter a valid URL").refine(e=>!(0,t.isIgnoredDomain)(e),{message:"Due to copyright reasons we are not able process the website"}),s=r.z.object({url:o.refine(e=>!a(e),{message:"YouTube URLs are not allowed here. You can import them in Video/Youtube URL"})}),l=e=>{if(e.startsWith("/api"))return{valid:!0};try{return s.parse({url:e}),{valid:!0}}catch(r){let e="Please enter a valid URL";if(r instanceof n.ZodError){var t;return{message:(null==(t=r.issues[0])?void 0:t.message)||e,valid:!1}}return{message:e,valid:!1}}}},84080:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("circle-question-mark",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},523596:e=>{"use strict";e.s({CircleHelp:()=>t.default});var t=e.i(84080)},309135:e=>{"use strict";e.s({handlePdfUrlChecks:()=>n});let t=async e=>{try{if(e.endsWith(".pdf"))return!0;let t=new AbortController,n=(await fetch("/api/header-proxy?url=".concat(encodeURIComponent(e)),{method:"HEAD",signal:t.signal})).headers.get("content-type");return t.abort(),(null==n?void 0:n.includes("application/pdf"))||(null==n?void 0:n.includes("pdf"))}catch(e){return console.error("Error checking URL:",e),!1}},n=async e=>{if(!e||""===e.trim())return{isPdf:!1,url:e};try{if(e.includes("/api/zotero/get-file")||e.includes("/api/mendeley/get-file")){let t=await fetch(e,{method:"GET"});if(t.ok){let n=await t.arrayBuffer(),r=t.headers.get("Content-Type")||void 0;return{isPdf:!0,url:e,pdfData:n,contentType:r}}return{isPdf:!1,url:e}}}catch(t){return{isPdf:!1,url:e}}if(await t(e))return{isPdf:!0,url:e};let n=(e=>{if(!e||""===e.trim())return e;try{let t=e.match(/^https?:\/\/arxiv\.org\/(abs|pdf)\/(\d+\.\d+)/);if(t)return"https://arxiv.org/pdf/".concat(t[2]);if(e.match(/^https?:\/\/arxiv\.org\/pdf\/(\d+\.\d+)/i))return e;if(e.includes("biorxiv.org/content/")||e.includes("medrxiv.org/content/")){if(!e.endsWith(".full.pdf"))return"".concat(e,".full.pdf");return e}if(e.includes("journals.plos.org")&&e.includes("article?id=")){let t=e.split("?id=")[1];if(t){let n=e.split("article")[0];return"".concat(n,"article/file?id=").concat(t,"&type=printable")}}if(e.includes("sciencedirect.com/science/article")){let t=e.match(/\/pii\/([^/]+)/),n=e.match(/\/abs\/pii\/([^/]+)/),r=e.match(/\/article\/([^/]+)$/),i=(null==t?void 0:t[1])||(null==n?void 0:n[1])||(null==r?void 0:r[1]);if(i)return"https://www.sciencedirect.com/science/article/pii/".concat(i,"/pdfft")}if(e.includes("papers.ssrn.com/sol3/")||e.includes("ssrn.com/abstract="))try{let t=new URLSearchParams(new URL(e).search).get("abstract_id");if(t)return"https://papers.ssrn.com/sol3/Delivery.cfm/SSRN_ID".concat(t,".pdf")}catch(t){return e}if(e.includes("jstor.org/stable/")){let t=e.split("/"),n=t.indexOf("stable");if(-1!==n&&n<t.length-1){let e=t[n+1];return"https://www.jstor.org/stable/pdf/".concat(e,".pdf")}}if(e.includes("dl.acm.org/doi/")){let t=e.match(/\/doi\/([^/]+\/[^/]+)/),n=null==t?void 0:t[1];if(n)return"https://dl.acm.org/doi/pdf/".concat(n)}if(e.includes("ieeexplore.ieee.org/document/")||e.includes("ieeexplore.ieee.org/abstract/document/")){let t=e.match(/\/(?:abstract\/)?document\/(\d+)/),n=null==t?void 0:t[1];if(n)return"https://ieeexplore.ieee.org/stamp/stamp.jsp?tp=&arnumber=".concat(n)}if(e.includes("science.org/doi/")){let t=e.match(/\/doi\/([^/]+\/[^/]+)/),n=null==t?void 0:t[1];if(n)return"https://www.science.org/doi/pdf/".concat(n)}if(e.includes("onlinelibrary.wiley.com/doi/")){let t="";if(e.includes("/doi/full/")){let n=e.match(/\/doi\/full\/([^/?#]+(?:\/[^/?#]+)*)/);t=(null==n?void 0:n[1])||""}else{let n=e.match(/\/doi\/([^/]+\/[^/]+)/);t=(null==n?void 0:n[1])||""}if(t)return"https://onlinelibrary.wiley.com/doi/epdf/".concat(t)}if(e.includes("tandfonline.com")&&(e.includes("/doi/full/")||e.includes("/doi/abs/"))){let t=e.match(/\/doi\/(?:full|abs)\/([^/?#]+(?:\/[^/?#]+)*)/),n=(null==t?void 0:t[1])||"";if(n)return"https://www.tandfonline.com/doi/epdf/".concat(n)}return null}catch(e){return null}})(e);if(n)return{isPdf:!0,url:n};let r=e.includes("doi.org/")||/10\.\d{4,}\/[^\s/]+/i.test(e),i=e.includes("pubmed.ncbi.nlm.nih.gov/")||/^\d+$/.test(e);if(r){let t=e;if(e.includes("doi.org/"))t=e.split("doi.org/")[1];else{let n=e.match(/10\.\d{4,}\/[^\s/]+/i);n&&(t=n[0])}try{let n=await fetch("/api/check-doi?doi=".concat(encodeURIComponent(t)),{method:"GET"});if(n.ok){let t=n.headers.get("content-type");if(null==t?void 0:t.includes("application/pdf")){let t=await n.arrayBuffer();return{isPdf:!0,url:e,pdfData:t}}let r=await n.text();if(r&&"null"!==r)return{isPdf:!0,url:r}}}catch(e){console.error("Error checking DOI:",e)}}if(i){let t=e;if(e.includes("pubmed.ncbi.nlm.nih.gov/")){let n=e.match(/pubmed\.ncbi\.nlm\.nih\.gov\/(\d+)/);n&&(t=n[1])}try{let n=await fetch("/api/check-pmid?pmid=".concat(encodeURIComponent(t)),{method:"GET"});if(n.ok){let t=n.headers.get("content-type");if(null==t?void 0:t.includes("application/pdf")){let t=await n.arrayBuffer();return{isPdf:!0,url:e,pdfData:t}}let r=await n.text();if(r&&"null"!==r)return{isPdf:!0,url:r}}}catch(e){console.error("Error checking PMID:",e)}}return{isPdf:!1,url:e}}},413805:e=>{"use strict";e.s({sanitizeYoutubeUrl:()=>t});let t=e=>{let t=(e=>{let t=e.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/)([a-zA-Z0-9_-]{11})/);return t?t[1]:""})(e);return t?"https://www.youtube.com/watch?v=".concat(t):e}},650639:e=>{"use strict";e.s({useIngest:()=>k});var t=e.i(290479),n=e.i(490076),r=e.i(79469),i=e.i(608294),a=e.i(397711),o=e.i(373150),s=e.i(525094),l=e.i(980919),u=e.i(847934),c=e.i(382680),d=e.i(950347),h=e.i(252390),p=e.i(814733),f=e.i(985132),m=e.i(309135),g=e.i(289702),y=e.i(413805),b=e.i(91086),x=e.i(231512),w=e.i(594983);let k=()=>{let{checkImportLimit:e}=(0,c.useImportLimitCheck)(),{track:k}=(0,h.default)(),{optimisticIncreaseImportLimit:S,optimisticDecreaseImportLimit:_}=(0,d.default)(),C=(0,a.useRouter)(),[A,E]=(0,o.useState)(!1),T=(0,o.useRef)({}),M=(0,o.useRef)({}),{ingestFile:I}=(0,x.default)(),N=(0,i.useSetAtom)(f.addUploadingFilesAtom),D=(0,i.useSetAtom)(f.updateUploadingFileAtom),{createChatbot:P,isPending:R,error:O}=(0,b.useCreateChatbot)(),{mutateAsync:j,isPending:F,error:L}=p.api.file.ingestYoutubeVideo.useMutation({onError:e=>{_(),E(!1)},onSuccess:(e,t)=>{let{chatbotId:n}=t;C.push("/b/".concat(n))}}),{mutateAsync:z,error:B,isPending:U}=p.api.ingest.ingestWebsite.useMutation({onError:async(e,t)=>{_(),E(!1),M.current.chatbotId===t.chatbotId&&(M.current.shouldGoBack&&C.back(),M.current={}),H([{id:t.chatbotId}]),s.toast.error(e.message)},onSuccess:async(e,t)=>{let{chatbotId:n}=t;M.current.chatbotId===n&&M.current.shouldGoBack&&(k("websiteIngested"),C.push("/b/".concat(n)))}}),{mutateDelete:H}=(0,u.default)(),W=async t=>{let{url:n}=t;if(!e({shouldThrow:!1,includeUserId:!0}))return;let r=N([{name:"New Video"}]);Y();let i=await P({name:"New Video",type:"VIDEO",url:n});if(i){if(!i)return void D({id:r[0].id,status:"FAILED",errorMessage:"Failed to create chatbot."});D({id:r[0].id,status:"IN_PROGRESS",chatbotId:i.id,type:"VIDEO"}),S(),await j({chatbotId:i.id,url:n})}},{ingestGenerateMetadata:V}=(0,w.useIngestMetadata)(),{mutate:q,isPending:G}=p.api.file.uploadUrl.useMutation({onError:async(e,t)=>{_(),E(!1),T.current.chatbotId===t.chatbotId&&(T.current.shouldGoBack&&C.back(),T.current={}),H([{id:t.chatbotId}]),t.addedFileId&&D({id:t.addedFileId,status:"FAILED",errorMessage:"File could not be processed."}),s.toast.info("Please download the pdf and add it to your library manually.")},onSuccess:async(e,t)=>{await V(t.chatbotId,t.name),T.current.chatbotId===t.chatbotId&&T.current.shouldGoBack&&(k("websiteIngested"),C.push("/b/".concat(t.chatbotId)))}}),$=async(e,t,n)=>{let r=e.split("/"),i=r[r.length-1],a=(0,g.sanitizeName)(i),o=null!=n?n:N([{name:a}])[0],s=await P({name:a,type:"DOCUMENT",groupId:t});if(s)return s?(D({id:o.id,status:"IN_PROGRESS",chatbotId:s.id,type:"DOCUMENT"}),S(),q({name:a,chatbotId:s.id,url:e,type:"DOCUMENT",addedFileId:o.id}),s.id):void D({id:o.id,status:"FAILED",errorMessage:"Failed to create chatbot."})},K=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Website",r=N([{name:n}]);Y();let i=await P({name:n,type:"WEBSITE",url:e,groupId:t});if(i)return i?(D({id:r[0].id,status:"IN_PROGRESS",chatbotId:i.id,type:"WEBSITE"}),S(),await z({chatbotId:i.id,url:e}),i.id):void D({id:r[0].id,status:"FAILED",errorMessage:"Failed to create chatbot."})},Y=()=>{s.toast.custom(e=>(0,t.jsx)(l.FileUploadToastContent,{toastId:e}),{id:l.UPLOAD_TOAST_ID,duration:1/0,dismissible:!1,position:"bottom-left",className:"!px-0 !py-0 bg-popover border-border-primary !rounded-6"})},X=async t=>{let i,{url:a,groupId:o,fileName:l,fromUrlImport:u=!1}=t;if(!(0,r.validateWebsiteUrl)(a).valid||!e({shouldThrow:!1,includeUserId:!0}))return;if((0,n.isIgnoredDomain)(a)){s.toast.error("Due to copyright reasons we are not able to process the website."),E(!1);return}E(!0);let{isPdf:c,url:d,pdfData:h,contentType:p}=await (0,m.handlePdfUrlChecks)(a);if(c)if(h){let e=[];try{let t=a.split("/"),n=t[t.length-1],r=(0,g.sanitizeName)(n||"paper.pdf"),s=new File([h],l||r,{type:p||"application/pdf"});e=N([{name:s.name}]);let u=await I(s,o);if(u)i=u,D({id:e[0].id,status:"IN_PROGRESS",chatbotId:i});else{D({id:e[0].id,status:"FAILED",errorMessage:"File could not be processed."}),E(!1);return}E(!1)}catch(t){console.error("Error ingesting PDF data:",t),E(!1),e.length>0&&D({id:e[0].id,status:"FAILED",errorMessage:"File could not be processed."});return}}else{let e=[];if(l&&(e=N([{name:l}]),Y()),u){(i=await $(d,o,e.length>0?e[0]:void 0))&&(T.current={chatbotId:i,shouldGoBack:!1},await new Promise(e=>setTimeout(e,2e3)),T.current.chatbotId===i&&(T.current.shouldGoBack=!0)),E(!1);return}i=await $(d,o,e.length>0?e[0]:void 0),e.length>0&&(i?D({id:e[0].id,status:"IN_PROGRESS",chatbotId:i}):D({id:e[0].id,status:"FAILED",errorMessage:"File could not be processed."}))}else{if(i=await K(a,o,l),u&&i){M.current={chatbotId:i,shouldGoBack:!1},await new Promise(e=>setTimeout(e,2500)),M.current.chatbotId===i&&(M.current.shouldGoBack=!0),E(!1);return}E(!1)}i&&!u&&(k("websiteIngested"),C.push("/b/".concat(i)))},Z=async e=>{let t=e,n="https://",i=!t.startsWith("http://")&&!t.startsWith(n),a=t.startsWith("arxiv.org/")&&t.includes(".");return(i&&a&&(t="".concat(n).concat(t)),(0,r.isYoutubeUrl)(t))?void W({url:(0,y.sanitizeYoutubeUrl)(t)}):(0,r.validateWebsiteUrl)(t).valid?void X({url:t,fromUrlImport:!0}):void 0};return{isChatCreationLoading:R,isYTIngestLoading:F,onSubmitYTVideo:W,isWebsiteIngestLoading:U,isPdfIngestLoading:G,isGenerating:A,chatError:O,yTError:L,websiteIngestError:B,onWebsiteUrlSubmit:X,onExternalSourceSubmit:Z}}},1181:e=>{"use strict";e.s({default:()=>a});var t=e.i(290479),n=e.i(436531),r=e.i(972899),i=e.i(289702);let a=e=>{let{label:a,icon:o,isNew:s,className:l}=e;return(0,t.jsxs)("div",{className:(0,i.cn)("flex flex-col relative items-start justify-between p-7 gap-4 rounded-6 border cursor-pointer duration-150 ease-in transition-border border-border-primary hover:bg-popover-hover/40 dark:hover:bg-popover-hover shadow-shadowLow bg-popover",l),children:[(0,t.jsx)(r.Icon,{size:"sm",as:o}),(0,t.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,t.jsx)("p",{className:"text-sm font-medium leading-[17px]",children:a}),s&&(0,t.jsx)(n.Badge,{variant:"new",children:"NEW"})]})]})}},204046:e=>{"use strict";e.s({IdImportForm:()=>y,UrlImportForm:()=>g});var t=e.i(290479),n=e.i(132904),r=e.i(79469);e.i(996481);var i=e.i(523596);e.i(182822),e.i(672659),e.i(373150);var a=e.i(555168),o=e.i(704255),s=e.i(650639),l=e.i(663018);e.i(448068);var u=e.i(959757),c=e.i(972899);e.i(303652);var d=e.i(476440);e.i(846580);var h=e.i(252390),p=e.i(413805);e.i(1181);let f=a.z.string().refine(e=>{if(r.websiteUrlSchema.safeParse(e).success||n.DOI_REGEX.test(e)||n.PMID_REGEX.test(e))return!0;try{let t="https://doi.org/".concat(e);if(r.websiteUrlSchema.safeParse(t).success)return/^https:\/\/doi\.org\/10\.\d{4,}\/[^\s/]+$/i.test(t)}catch(e){}return!1},{message:"Please enter a valid website URL, DOI, or PMID identifier"}),m=a.z.string().refine(e=>n.DOI_REGEX.test(e)||n.PMID_REGEX.test(e)||n.ARXIV_REGEX.test(e),{message:"Please enter a valid DOI, PMID, or arXiv ID"}),g=e=>{let{setOpenMenu:m,landingPage:g=!1}=e,y=(0,u.useForm)({schema:a.z.object({url:f}),defaultValues:{url:""}}),{onWebsiteUrlSubmit:b,onSubmitYTVideo:x,isWebsiteIngestLoading:w,isChatCreationLoading:k,isPdfIngestLoading:S,websiteIngestError:_,isGenerating:C,isYTIngestLoading:A}=(0,s.useIngest)(),{track:E}=(0,h.default)(),T=w||S||k||C||A,M=async e=>{E(g?"landing_button_clicked":"plus_menu_button_clicked",{button:"import_url"});let t=e.url.trim();if(n.DOI_REGEX.test(t)&&(t="https://doi.org/".concat(t)),n.PMID_REGEX.test(t)&&(t="https://pubmed.ncbi.nlm.nih.gov/".concat(t,"/")),t.includes("doi.org")&&t.includes("arXiv")){let e=t.match(/arXiv[.:](\d{4}\.\d{4,5}(?:v\d+)?)/i);(null==e?void 0:e[1])&&(t="https://arxiv.org/pdf/".concat(e[1]))}if((0,r.isYoutubeUrl)(t)){let e=(0,p.sanitizeYoutubeUrl)(t);await x({url:e})}else await b({url:t,fromUrlImport:!0});T||(m(!1),y.reset())};return(0,t.jsxs)("form",{onSubmit:y.handleSubmit(M),className:"flex flex-col p-4",children:[(0,t.jsxs)("div",{className:"w-full flex flex-col items-start",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4 pl-4 pt-4",children:[(0,t.jsx)("label",{className:"text-base font-semibold text-text-primary",children:"URL"}),(0,t.jsx)(d.ReusableTooltip,{content:"Website, PDF or YouTube URL",className:"z-[100]",children:(0,t.jsx)("div",{children:(0,t.jsx)(c.Icon,{as:i.CircleHelp,className:"text-text-primary",size:"sm"})})})]}),(0,t.jsx)("input",{type:"text",...y.register("url"),className:"bg-popover flex flex-row items-center justify-between px-6 h-12 rounded-5 border  text-text-primary border-border-primary focus:outline-none w-full text-sm leading-[100%] tracking-[-0.32px]",placeholder:"Website, PDF or YouTube URL",disabled:T,autoFocus:!0}),y.formState.errors.url&&(0,t.jsx)("p",{className:"text-red mt-4 text-xs",children:y.formState.errors.url.message}),_&&(0,t.jsx)("p",{className:"text-red mt-4 text-xs",children:"Error: Please try another link"})]}),(0,t.jsxs)("div",{className:"mt-4 flex flex-row gap-4 justify-end",children:[(0,t.jsx)(o.Button,{variant:"secondary",type:"button",size:"xs",onClick:()=>{m(!1),y.reset()},className:"h-10 px-5 text-sm",disabled:T,children:"Cancel"}),(0,t.jsx)(o.Button,{variant:"default",className:"px-5 h-10 !text-sm",disabled:T,children:T?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.LoadingSpinner,{variant:"small",color:"gray"}),(0,t.jsx)("span",{className:"text-sm",children:"Generating"})]}):"Import"})]})]})},y=e=>{let{setOpenMenu:r,landingPage:p=!1}=e,f=(0,u.useForm)({schema:a.z.object({sourcesId:m}),defaultValues:{sourcesId:""}}),{onWebsiteUrlSubmit:g,isWebsiteIngestLoading:y,isChatCreationLoading:b,isPdfIngestLoading:x,websiteIngestError:w,isGenerating:k,isYTIngestLoading:S}=(0,s.useIngest)(),{track:_}=(0,h.default)(),C=y||x||b||k||S,A=async e=>{_(p?"landing_button_clicked":"plus_menu_button_clicked",{button:"import_id"});let t=e.sourcesId.trim();if(n.ARXIV_REGEX.test(t)){let e=null==t?void 0:t.match(n.ARXIV_REGEX);if((null==e?void 0:e[1])||(null==e?void 0:e[2])){let n=e[2]||e[1];t="https://arxiv.org/pdf/".concat(n)}}else n.PMID_REGEX.test(t)?t="https://pubmed.ncbi.nlm.nih.gov/".concat(t,"/"):n.DOI_REGEX.test(t)&&(t="https://doi.org/".concat(t));await g({url:t,fromUrlImport:!0}),C||(r(!1),f.reset())};return(0,t.jsxs)("form",{onSubmit:f.handleSubmit(A),className:"flex flex-col p-4",children:[(0,t.jsxs)("div",{className:"w-full flex flex-col items-start",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4 pl-4 pt-4",children:[(0,t.jsx)("label",{className:"text-base font-semibold text-text-primary",children:"ID"}),(0,t.jsx)(d.ReusableTooltip,{content:"DOI, PMID, arXiv",className:"z-[100]",children:(0,t.jsx)("div",{children:(0,t.jsx)(c.Icon,{as:i.CircleHelp,className:"text-text-primary",size:"sm"})})})]}),(0,t.jsx)("input",{type:"text",...f.register("sourcesId"),className:"bg-popover flex flex-row items-center justify-between px-6 h-12 rounded-5 border  text-text-primary border-border-primary focus:outline-none w-full text-sm leading-[100%] placeholder:text-text-secondary tracking-[-0.32px]",placeholder:"DOI, PMID, arXiv",disabled:C,autoFocus:!0}),f.formState.errors.sourcesId&&(0,t.jsx)("p",{className:"text-red mt-4 text-xs",children:f.formState.errors.sourcesId.message}),w&&(0,t.jsx)("p",{className:"text-red mt-4 text-xs",children:"Error: Please try another link"})]}),(0,t.jsxs)("div",{className:"mt-4 flex flex-row gap-4 justify-end",children:[(0,t.jsx)(o.Button,{variant:"secondary",type:"button",size:"xs",onClick:()=>{r(!1),f.reset()},className:"h-10 px-5 text-sm",disabled:C,children:"Cancel"}),(0,t.jsx)(o.Button,{variant:"default",className:"px-5 h-10 !text-sm",disabled:C,children:C?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.LoadingSpinner,{variant:"small",color:"gray"}),(0,t.jsx)("span",{className:"text-sm",children:"Generating"})]}):"Import"})]})]})}},100711:e=>{"use strict";e.s({useConnectedIntegrations:()=>i});var t=e.i(373150),n=e.i(368436),r=e.i(888305);let i=()=>{let e=(0,n.useIntegrations)(),i=(0,t.useMemo)(()=>{let t={"google-drive":e.googleDriveStatus,mendeley:e.mendeleyStatus,notion:e.notionStatus,onedrive:e.oneDriveStatus,sharepoint:e.sharePointStatus,zotero:e.zoteroStatus};return r.INTEGRATION_ORDER.map(e=>{let n=(0,r.getIntegrationConfig)(e),i=t[e];return{...n,status:i||"DISCONNECTED"}}).filter(t=>"CONNECTED"===t.status&&!e.getIntegrationError(t.id))},[e.googleDriveStatus,e.mendeleyStatus,e.notionStatus,e.oneDriveStatus,e.sharePointStatus,e.zoteroStatus,e.getIntegrationError]),a=(0,t.useMemo)(()=>{let t={"google-drive":e.googleDriveStatus,mendeley:e.mendeleyStatus,notion:e.notionStatus,onedrive:e.oneDriveStatus,sharepoint:e.sharePointStatus,zotero:e.zoteroStatus};return r.INTEGRATION_ORDER.map(e=>{let n=(0,r.getIntegrationConfig)(e),i=t[e];return{...n,status:i||"DISCONNECTED"}})},[e.googleDriveStatus,e.mendeleyStatus,e.notionStatus,e.oneDriveStatus,e.sharePointStatus,e.zoteroStatus]);return{connectedIntegrations:i,allIntegrations:a,hasConnectedIntegrations:i.length>0,hasAvailableIntegrations:a.length-i.length>0}}},825474:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("file-x-2",[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4",key:"1pf5j1"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m8 12.5-5 5",key:"b853mi"}],["path",{d:"m3 12.5 5 5",key:"1qls4r"}]])},654706:e=>{"use strict";e.s({FileX2:()=>t.default});var t=e.i(825474)},833866:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},909210:e=>{"use strict";e.s({RefreshCw:()=>t.default});var t=e.i(833866)},36148:e=>{"use strict";e.s({Indicator:()=>k,Root:()=>x});var t=e.i(373150),n=e.i(28537),r=e.i(215836),i=e.i(777787),a=e.i(698644),o=e.i(344916),s=e.i(730287),l=e.i(629103),u=e.i(421349),c=e.i(290479),d="Checkbox",[h,p]=(0,r.createContextScope)(d),[f,m]=h(d);function g(e){let{__scopeCheckbox:n,checked:r,children:i,defaultChecked:o,disabled:s,form:l,name:u,onCheckedChange:h,required:p,value:m="on",internal_do_not_use_render:g}=e,[y,b]=(0,a.useControllableState)({prop:r,defaultProp:null!=o&&o,onChange:h,caller:d}),[x,w]=t.useState(null),[k,S]=t.useState(null),_=t.useRef(!1),A=!x||!!l||!!x.closest("form"),E={checked:y,disabled:s,setChecked:b,control:x,setControl:w,name:u,form:l,value:m,hasConsumerStoppedPropagationRef:_,required:p,defaultChecked:!C(o)&&o,isFormControl:A,bubbleInput:k,setBubbleInput:S};return(0,c.jsx)(f,{scope:n,...E,children:"function"==typeof g?g(E):i})}var y="CheckboxTrigger",b=t.forwardRef((e,r)=>{let{__scopeCheckbox:a,onKeyDown:o,onClick:s,...l}=e,{control:d,value:h,disabled:p,checked:f,required:g,setControl:b,setChecked:x,hasConsumerStoppedPropagationRef:w,isFormControl:k,bubbleInput:S}=m(y,a),_=(0,n.useComposedRefs)(r,b),E=t.useRef(f);return t.useEffect(()=>{let e=null==d?void 0:d.form;if(e){let t=()=>x(E.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[d,x]),(0,c.jsx)(u.Primitive.button,{type:"button",role:"checkbox","aria-checked":C(f)?"mixed":f,"aria-required":g,"data-state":A(f),"data-disabled":p?"":void 0,disabled:p,value:h,...l,ref:_,onKeyDown:(0,i.composeEventHandlers)(o,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,i.composeEventHandlers)(s,e=>{x(e=>!!C(e)||!e),S&&k&&(w.current=e.isPropagationStopped(),w.current||e.stopPropagation())})})});b.displayName=y;var x=t.forwardRef((e,t)=>{let{__scopeCheckbox:n,name:r,checked:i,defaultChecked:a,required:o,disabled:s,value:l,onCheckedChange:u,form:d,...h}=e;return(0,c.jsx)(g,{__scopeCheckbox:n,checked:i,defaultChecked:a,disabled:s,required:o,onCheckedChange:u,name:r,form:d,value:l,internal_do_not_use_render:e=>{let{isFormControl:r}=e;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(b,{...h,ref:t,__scopeCheckbox:n}),r&&(0,c.jsx)(_,{__scopeCheckbox:n})]})}})});x.displayName=d;var w="CheckboxIndicator",k=t.forwardRef((e,t)=>{let{__scopeCheckbox:n,forceMount:r,...i}=e,a=m(w,n);return(0,c.jsx)(l.Presence,{present:r||C(a.checked)||!0===a.checked,children:(0,c.jsx)(u.Primitive.span,{"data-state":A(a.checked),"data-disabled":a.disabled?"":void 0,...i,ref:t,style:{pointerEvents:"none",...e.style}})})});k.displayName=w;var S="CheckboxBubbleInput",_=t.forwardRef((e,r)=>{let{__scopeCheckbox:i,...a}=e,{control:l,hasConsumerStoppedPropagationRef:d,checked:h,defaultChecked:p,required:f,disabled:g,name:y,value:b,form:x,bubbleInput:w,setBubbleInput:k}=m(S,i),_=(0,n.useComposedRefs)(r,k),A=(0,o.usePrevious)(h),E=(0,s.useSize)(l);t.useEffect(()=>{if(!w)return;let e=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,t=!d.current;if(A!==h&&e){let n=new Event("click",{bubbles:t});w.indeterminate=C(h),e.call(w,!C(h)&&h),w.dispatchEvent(n)}},[w,A,h,d]);let T=t.useRef(!C(h)&&h);return(0,c.jsx)(u.Primitive.input,{type:"checkbox","aria-hidden":!0,defaultChecked:null!=p?p:T.current,required:f,disabled:g,name:y,value:b,form:x,...a,tabIndex:-1,ref:_,style:{...a.style,...E,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function C(e){return"indeterminate"===e}function A(e){return C(e)?"indeterminate":e?"checked":"unchecked"}_.displayName=S},278101:e=>{"use strict";e.s({Checkbox:()=>s});var t=e.i(290479),n=e.i(36148),r=e.i(874133),i=e.i(373150),a=e.i(289702),o=e.i(972899);let s=i.forwardRef((e,i)=>{let{className:s,...l}=e;return(0,t.jsx)(n.Root,{ref:i,className:(0,a.cn)("grid place-content-center peer h-7 w-7 shrink-0 rounded-2 border border-border-primary focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-blue data-[state=checked]:text-text-primary data-[state=checked]:border-blue",s),...l,children:(0,t.jsx)(n.Indicator,{className:(0,a.cn)("grid place-content-center"),children:(0,t.jsx)(o.Icon,{as:r.Check,size:"xxs",className:"text-white",strokeWidth:2.5})})})});s.displayName=n.Root.displayName},477347:e=>{"use strict";e.s({UnifiedSelectionModal:()=>b});var t=e.i(290479),n=e.i(870007),r=e.i(381612),i=e.i(654706),a=e.i(997313),o=e.i(909210),s=e.i(353745),l=e.i(373150),u=e.i(704255),c=e.i(663018),d=e.i(278101),h=e.i(457443),p=e.i(571227),f=e.i(950347),m=e.i(998145),g=e.i(972899);let y=e=>{let{remaining:n,total:r}=e,i=2*Math.PI*8,a=i-(r>0?(r-n)/r*100:0)/100*i;return(0,t.jsx)("div",{className:"relative w-7 h-7",children:(0,t.jsxs)("svg",{className:"w-7 h-7 -rotate-90",viewBox:"0 0 20 20",children:[(0,t.jsx)("circle",{cx:"10",cy:"10",r:"8",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"text-blue/10"}),(0,t.jsx)("circle",{cx:"10",cy:"10",r:"8",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeDasharray:i,strokeDashoffset:a,className:"text-blue transition-all duration-300 ease-in-out",strokeLinecap:"round"})]})})};function b(e){let{open:b,headerIcon:x,onOpenChange:w,title:k,searchPlaceholder:S="Search files...",searchQuery:_,onSearchChange:C,items:A,isLoading:E,selectedItems:T,onToggleItem:M,onBatchToggle:I,onCancel:N,onConfirm:D,confirmText:P="Import",confirmingText:R="Importing...",isConfirming:O=!1,error:j,onRetry:F}=e,{isFreePlan:L,limits:z,usage:B}=(0,f.default)(),[U,H]=(0,l.useState)(new Set),W=e=>A?A.filter(t=>t.parentId===e):[],V=e=>{let t=[];for(let n of W(e))"file"===n.type?t.push(n.id):"folder"===n.type&&t.push(...V(n.id));return t},q=(0,l.useMemo)(()=>A?_?A.filter(e=>e.name.toLowerCase().includes(_.toLowerCase())):A:[],[A,_]),G=e=>{let t=new Set(U);t.has(e)?t.delete(e):t.add(e),H(t)},$=(e,t)=>{if("file"===t.type)(T.has(e)||en)&&M(e);else{let t=V(e);if(t.every(e=>T.has(e)))I(t.filter(e=>T.has(e)),!1);else{let e=t.filter(e=>!T.has(e)),n=L?e.slice(0,Math.max(0,et-Z)):e;n.length>0&&I(n,!0)}}},K=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=U.has(e.id),o=(e=>{if("file"===e.type)return T.has(e.id);{let t=V(e.id);return t.length>0&&t.every(e=>T.has(e))}})(e),s=(e=>{if("file"===e.type)return!1;let t=V(e.id);if(0===t.length)return!1;let n=t.filter(e=>T.has(e)).length;return n>0&&n<t.length})(e),l=W(e.id);return"file"===e.type?(0,t.jsx)("div",{className:"flex items-center gap-4 py-2 px-3 hover:bg-control-primary rounded-md group",children:(0,t.jsxs)("div",{style:{marginLeft:"".concat(38*n,"px")},className:"flex items-center gap-4 flex-1 min-w-0",children:[(0,t.jsx)("div",{onClick:e=>e.stopPropagation(),children:(0,t.jsx)(d.Checkbox,{checked:o,onCheckedChange:()=>$(e.id,e),className:"shrink-0 h-[14px] w-[14px]"})}),(0,t.jsxs)("div",{onClick:()=>$(e.id,e),className:"flex items-center gap-4 flex-1 min-w-0 cursor-pointer",children:[e.icon||(0,t.jsx)(g.Icon,{as:(0,m.default)({type:"DOCUMENT",fallback:void 0}),className:"w-8 h-7 text-text-secondary shrink-0"}),(0,t.jsx)("span",{className:"text-sm text-foreground truncate ",children:e.name})]})]})},e.id):(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{onClick:()=>$(e.id,e),className:"flex items-center gap-4 py-2 px-3 hover:bg-control-primary rounded-md group cursor-pointer",children:[(0,t.jsxs)("div",{style:{marginLeft:"".concat(38*n,"px")},className:"flex items-center gap-4 flex-1 min-w-0",children:[(0,t.jsx)("div",{onClick:e=>e.stopPropagation(),children:s?(0,t.jsx)("button",{onClick:()=>$(e.id,e),className:"w-[14px] h-[14px] flex items-center justify-center rounded-2 rounded bg-blue",children:(0,t.jsx)(a.Minus,{className:"w-[14px] h-[14px] text-white"})}):(0,t.jsx)(d.Checkbox,{checked:o,onCheckedChange:()=>$(e.id,e),className:"shrink-0 h-[14px] w-[14px]"})}),(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),G(e.id)},className:"flex items-center hover:bg-control-primary rounded p-0.5 -ml-0.5",children:e.icon||(0,t.jsx)(g.Icon,{as:(0,m.default)({type:"GROUP",collapsed:!i}),className:"ml-1 w-7 h-7 text-text-secondary"})}),(0,t.jsx)("span",{className:"text-sm text-foreground truncate",children:e.name}),e.badge&&(0,t.jsx)("span",{className:"text-sm text-text-tertiary font-normal shrink-0",children:e.badge.text})]}),(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),G(e.id)},children:(0,t.jsx)(r.ChevronDown,{className:"w-7 h-7 text-text-secondary group-hover:text-text-foreground"})})]}),i&&(0,t.jsx)("div",{className:"ml-4",children:l.map(e=>K(e,n+1))})]},e.id)},Y=()=>A?A.filter(e=>"file"===e.type).map(e=>e.id):[],X=()=>{let e=Y(),t=e.length>0&&e.every(e=>T.has(e));if(I)if(t)I(e.filter(e=>T.has(e)),!1);else{let t=e.filter(e=>!T.has(e)),n=L?t.slice(0,Math.max(0,et-Z)):t;n.length>0&&I(n,!0)}else if(t)e.forEach(e=>{T.has(e)&&M(e)});else{let t=Z;e.forEach(e=>{!T.has(e)&&(!L||t<et)&&(M(e),t++)})}},Z=T.size,J=Y(),Q=J.length>0&&J.every(e=>T.has(e)),ee=T.size>0&&!Q,et=(null==z?void 0:z.legacyImportLimit)&&(null==B?void 0:B.legacyImportCount)!==void 0?Math.max(0,z.legacyImportLimit-B.legacyImportCount):1/0,en=!L||Z<et;return(0,t.jsx)(h.Dialog,{open:b,onOpenChange:w,children:(0,t.jsxs)(h.DialogContent,{className:"w-full max-w-2xl max-h-[620px] flex flex-col p-7 gap-6 h-full",hideCloseButton:!0,children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[x,(0,t.jsx)("h2",{className:"text-sm font-medium text-foreground",children:k})]}),(0,t.jsxs)("div",{className:"relative focus-within:ring-0 focus:ring-0",children:[(0,t.jsx)(s.Search,{className:"absolute left-5 top-1/2 transform -translate-y-1/2 w-7 h-7 text-text-tertiary"}),(0,t.jsx)(p.Input,{placeholder:S,value:_,onChange:e=>C(e.target.value),className:"pl-10 bg-control-primary border-0 text-sm text-foreground placeholder:text-text-tertiary font-medium focus-within:ring-0 focus:ring-0"})]}),(0,t.jsx)("div",{className:"flex-1 overflow-hidden relative h-full",children:(0,t.jsx)("div",{className:"h-full overflow-y-auto  scrollbar-hide",children:j?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center h-full gap-6 px-8",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-destructive-muted rounded-full flex items-center justify-center",children:(0,t.jsx)(n.AlertCircle,{className:"w-8 h-8 text-destructive-solid"})}),(0,t.jsxs)("div",{className:"text-center space-y-2",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-foreground",children:"SPO_LICENSE"===j.type?"Connection Issue":"Unable to load files"}),(0,t.jsx)("p",{className:"text-sm text-text-secondary max-w-sm",children:j.message})]})]}),j.canRetry&&F&&(0,t.jsxs)(u.Button,{onClick:F,size:"xs",variant:"secondary",className:"gap-2",children:[(0,t.jsx)(o.RefreshCw,{className:"w-4 h-4"}),"Try again"]})]}):E?(0,t.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,t.jsx)(c.LoadingSpinner,{variant:"screen"})}):J.length>0?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 py-2 px-3 hover:bg-control-primary rounded-md group cursor-pointer",onClick:X,children:[ee?(0,t.jsx)("button",{onClick:X,className:"w-[14px] h-[14px] flex items-center justify-center rounded-2 rounded bg-blue",children:(0,t.jsx)(a.Minus,{className:"w-[14px] h-[14px] text-white"})}):(0,t.jsx)(d.Checkbox,{checked:Q,className:"shrink-0 h-[14px] w-[14px]",onCheckedChange:X}),(0,t.jsx)("span",{className:"text-sm text-text-tertiary",children:"Select all"})]}),(0,t.jsx)("div",{className:"space-y-2",children:(()=>{let e=_?q:A;return e?e.filter(e=>null===e.parentId):[]})().map(e=>K(e))})]}):(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center h-full gap-2",children:[(0,t.jsx)(i.FileX2,{className:"w-7 h-7 text-text-tertiary"}),(0,t.jsx)("span",{className:"text-sm text-text-tertiary",children:"No files available"})]})})}),(0,t.jsxs)("div",{className:"relative flex items-center justify-between",children:[(0,t.jsx)(u.Button,{variant:"secondary",className:"px-6",size:"xs",onClick:N,children:"Cancel"}),(0,t.jsxs)("div",{className:"flex items-center gap-6",children:[L&&(null==z?void 0:z.legacyImportLimit)&&(null==B?void 0:B.legacyImportCount)?(0,t.jsxs)("div",{className:"flex items-center gap-4 pr-2",children:[(0,t.jsx)(y,{remaining:Math.max(0,z.legacyImportLimit-B.legacyImportCount),total:z.legacyImportLimit}),(0,t.jsxs)("span",{className:"text-sm text-text-tertiary font-medium",children:[Math.max(0,z.legacyImportLimit-B.legacyImportCount)," ","imports left"]})]}):Z>0&&(0,t.jsxs)("span",{className:"text-sm text-text-tertiary font-medium",children:[Z," files selected"]}),(0,t.jsx)(u.Button,{onClick:D,size:"xs",className:"px-6",children:O?R:P})]})]})]})})}},908945:e=>{"use strict";e.s({useIntegrationIngest:()=>p});var t=e.i(290479),n=e.i(608294),r=e.i(525094),i=e.i(430266),a=e.i(980919),o=e.i(594983),s=e.i(885905),l=e.i(412997),u=e.i(852951),c=e.i(814733),d=e.i(985132);let h=e=>{let{id:t,type:n,userId:r,name:i}=e;return{id:t,type:n,userId:r,name:i,displayOrder:null,groupCollapsed:!1,publicationDate:null,docMetadataurl:null,createdAt:new Date,documentUrl:null,isIndexed:!1,groupId:null,chats:[],includedSources:[],lastViewedAt:null,updatedAt:new Date,publication:null,volume:null,issue:null,pages:null,doi:null,issn:null,isbn:null,teamId:null,url:null,summary:null,authors:null,abstract:null,citationCount:0}},p=()=>{let{user:e}=(0,s.useAuth)(),{toggleSelectionModal:p}=(0,l.useIntegrationModals)(),{ingestGenerateMetadata:f}=(0,o.useIngestMetadata)(),m=(0,n.useSetAtom)(d.updateUploadingFileAtom),g=(0,n.useSetAtom)(d.addUploadingFilesAtom),{mutateAsync:y,isPending:b}=c.api.integrations.ingestFiles.useMutation({onMutate:e=>{let{provider:t}=e;(0,i.match)(t).with("google-drive",()=>p("google-drive",!1)).with("onedrive",()=>p("onedrive",!1)).with("sharepoint",()=>p("sharepoint",!1)).with("notion",()=>p("notion",!1)).with("mendeley",()=>p("mendeley",!1)).with("zotero",()=>p("zotero",!1)).exhaustive()}}),{addChatbot:x}=(0,u.useWorkspaceActions)();return{integrationIngest:async(n,o)=>{let s=null==e?void 0:e.id;if(!s)throw Error("User not found, this is not possible");if(0===n.length)return;let l=n.map(e=>e.id),u=await y({provider:o,ids:l});for await(let e of(g(n.map(e=>({name:e.name,id:e.id}))).length>0&&r.toast.custom(e=>(0,t.jsx)(a.FileUploadToastContent,{toastId:e}),{id:a.UPLOAD_TOAST_ID,duration:1/0,dismissible:!1,position:"bottom-left",className:"!px-0 !py-0 bg-popover border-border-primary !rounded-6"}),u))(0,i.match)(e).with({type:"folder-created"},e=>{let t=h({id:e.chatbotId,type:"GROUP",userId:s,name:e.folderName});e.parentId&&(t.groupId=e.parentId),t.displayOrder=-1,t.groupCollapsed=!0,x(t),m({id:e.fileId,status:"IN_PROGRESS",chatbotId:e.chatbotId})}).with({type:"folder-failed"},e=>{m({id:e.fileId,status:"FAILED",errorMessage:e.error})}).with({type:"upload-success"},e=>{m({id:e.fileId,status:"IN_PROGRESS",chatbotId:e.chatbotId});let t=h({id:e.chatbotId,type:e.chatbotType,userId:s,name:e.fileName});if(e.groupId&&(t.groupId=e.groupId),x(t),"IMAGE"!==e.chatbotType)try{f(e.chatbotId,e.fileName)}catch(e){console.error("Error generating metadata:",e)}}).with({type:"upload-failed"},e=>{m({id:e.fileId,status:"FAILED",errorMessage:e.error})}).run()},isPending:b}}},648622:e=>{"use strict";function t(e){if(!e)return"";let t=Math.floor(Math.log(e)/Math.log(1024));return"".concat(Math.round(e/1024**t*100)/100," ").concat(["B","KB","MB","GB"][t])}function n(e){return({"application/vnd.google-apps.document":"Google Doc","application/vnd.google-apps.spreadsheet":"Google Sheet","application/vnd.google-apps.presentation":"Google Slides","application/vnd.google-apps.folder":"Folder","application/vnd.microsoft.graph.folder":"Folder","application/msword":"Word Doc","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"Word Doc","application/vnd.ms-excel":"Excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"Excel","application/vnd.ms-powerpoint":"PowerPoint","application/vnd.openxmlformats-officedocument.presentationml.presentation":"PowerPoint","application/pdf":"PDF","text/plain":"Text"})[e]||"File"}e.s({formatFileSize:()=>t,getFileTypeLabel:()=>n})},126197:e=>{"use strict";e.s({useTransformFiles:()=>i});var t=e.i(648622),n=e.i(885905),r=e.i(814733);let i=(e,i,a)=>{var o;let{isLoggedIn:s}=(0,n.useAuth)(),{data:l,isLoading:u,isFetching:c,error:d}=r.api.integrations.getFilesForTree.useQuery({type:e,query:i.trim()?i:void 0},{enabled:a&&s,refetchOnMount:!0,refetchOnWindowFocus:!1});return{transformedFiles:null==l||null==(o=l.files)?void 0:o.filter(t=>{if("sharepoint"===e)return!0;if("folder"===t.type){var n,r,i;if("onedrive"===e){let e=null==(n=t.metadata)?void 0:n.childCount;return void 0===e||e>0}if("zotero"===e){let e=null==l||null==(r=l.files)?void 0:r.some(e=>"file"===e.type&&e.parentId===t.id),n=null==l||null==(i=l.files)?void 0:i.some(e=>"folder"===e.type&&e.parentId===t.id);return e||n}if(null==l?void 0:l.files)return l.files.filter(e=>e.parentId===t.id&&"file"===e.type).length>0}return!0}).map(n=>{var r,i,a,o,s,u,c;if("sharepoint"===e)return{id:n.id,name:n.name,type:n.type,parentId:n.parentId,icon:void 0,subtitle:n.subtitle,badge:n.badge,metadata:n.metadata};let d=(null==(r=n.metadata)?void 0:r.modifiedTime)||(null==(i=n.metadata)?void 0:i.lastModifiedDateTime)||(null==(a=n.metadata)?void 0:a.lastEditedTime)||(null==(o=n.metadata)?void 0:o.modified),h=0;return"folder"===n.type&&("onedrive"===e?h=(null==(s=n.metadata)?void 0:s.childCount)||0:"zotero"===e?h=((null==l||null==(u=l.files)?void 0:u.filter(e=>"file"===e.type&&e.parentId===n.id).length)||0)+((null==l||null==(c=l.files)?void 0:c.filter(e=>"folder"===e.type&&e.parentId===n.id).length)||0):(null==l?void 0:l.files)&&(h=l.files.filter(e=>e.parentId===n.id&&"file"===e.type).length)),{id:n.id,name:n.name,type:n.type,parentId:n.parentId,icon:void 0,subtitle:d?"Modified: ".concat(new Date(d).toLocaleDateString()):void 0,badge:{text:"folder"===n.type?"".concat(h," files"):n.size?(0,t.formatFileSize)(n.size):(0,t.getFileTypeLabel)(n.mimeType||"")},metadata:n.metadata}}),isLoading:u||c,error:(()=>{var t;if(!d)return null;let n=d.message||"",r=null==(t=d.data)?void 0:t.cause;return n.includes("SharePoint Online license required")||(null==r?void 0:r.type)==="SPO_LICENSE_REQUIRED"||n.includes("SPO_LICENSE_ERROR")||n.includes("Tenant does not have a SPO license")||n.includes("SPO license")?{type:"SPO_LICENSE",message:(null==r?void 0:r.details)||("sharepoint"===e?"Your Microsoft account requires a SharePoint Online license.":"Your Microsoft account encountered a SharePoint Online license requirement. Personal accounts may have limited search capabilities."),canRetry:!1}:n.includes("UNAUTHORIZED")||n.includes("integration not found")?{type:"UNAUTHORIZED",message:"Integration not found or expired. Please reconnect your account.",canRetry:!0}:{type:"GENERIC",message:n||"An error occurred while loading files",canRetry:!0}})()}}},151165:e=>{"use strict";e.s({default:()=>d,googleDriveModalAtom:()=>c});var t=e.i(290479),n=e.i(647968),r=e.i(608294),i=e.i(373150),a=e.i(888305),o=e.i(885905),s=e.i(477347),l=e.i(908945),u=e.i(126197);let c=(0,n.atom)(!1),d=()=>{let{user:e}=(0,o.useAuth)(),[n,d]=(0,r.useAtom)(c),[h,p]=(0,i.useState)(""),[f,m]=(0,i.useState)(new Set),{transformedFiles:g,isLoading:y}=(0,u.useTransformFiles)("google-drive","",n),{integrationIngest:b,isPending:x}=(0,l.useIntegrationIngest)(),w=()=>{d(!1),m(new Set),p("")};return(0,t.jsx)(s.UnifiedSelectionModal,{headerIcon:(0,a.getIntegrationModalIcon)("google-drive"),open:n&&!!e,onOpenChange:w,title:(0,a.getIntegrationModalTitle)("google-drive"),searchPlaceholder:"Search files...",searchQuery:h,onSearchChange:p,items:g,isLoading:y,selectedItems:f,onToggleItem:e=>{m(t=>{let n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n})},onBatchToggle:(e,t)=>{m(n=>{let r=new Set(n);return t?e.forEach(e=>{r.add(e)}):e.forEach(e=>{r.delete(e)}),r})},onCancel:w,onConfirm:()=>b(g?g.filter(e=>f.has(e.id)).map(e=>({id:e.id,name:e.name})):[],"google-drive"),confirmText:"Import",confirmingText:"Importing...",isConfirming:x})}},581967:e=>{"use strict";e.s({default:()=>d,mendeleyModalAtom:()=>c});var t=e.i(290479),n=e.i(647968),r=e.i(608294),i=e.i(373150),a=e.i(888305),o=e.i(885905),s=e.i(477347),l=e.i(908945),u=e.i(126197);let c=(0,n.atom)(!1),d=()=>{let{user:e}=(0,o.useAuth)(),[n,d]=(0,r.useAtom)(c),[h,p]=(0,i.useState)(""),[f,m]=(0,i.useState)(new Set),{transformedFiles:g,isLoading:y}=(0,u.useTransformFiles)("mendeley","",n),{integrationIngest:b,isPending:x}=(0,l.useIntegrationIngest)(),w=()=>{d(!1),m(new Set),p("")};return(0,t.jsx)(s.UnifiedSelectionModal,{headerIcon:(0,a.getIntegrationModalIcon)("mendeley",{width:16,height:16}),open:n&&!!e,onOpenChange:w,title:(0,a.getIntegrationModalTitle)("mendeley"),searchPlaceholder:"Search documents...",searchQuery:h,onSearchChange:p,items:g,isLoading:y,selectedItems:new Set(f),onToggleItem:e=>{m(t=>{let n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n})},onBatchToggle:(e,t)=>{m(n=>{let r=new Set(n);return t?e.forEach(e=>{r.add(e)}):e.forEach(e=>{r.delete(e)}),r})},onCancel:w,onConfirm:()=>b(g?g.filter(e=>f.has(e.id)).map(e=>({id:e.id,name:e.name})):[],"mendeley"),confirmText:"Import",confirmingText:"Importing...",isConfirming:x})}},133465:e=>{"use strict";e.s({default:()=>d,notionModalAtom:()=>c});var t=e.i(290479),n=e.i(647968),r=e.i(608294),i=e.i(373150),a=e.i(888305),o=e.i(885905),s=e.i(477347),l=e.i(908945),u=e.i(126197);let c=(0,n.atom)(!1),d=()=>{let{user:e}=(0,o.useAuth)(),[n,d]=(0,r.useAtom)(c),[h,p]=(0,i.useState)(""),[f,m]=(0,i.useState)(new Set),{transformedFiles:g,isLoading:y}=(0,u.useTransformFiles)("notion","",n),{integrationIngest:b,isPending:x}=(0,l.useIntegrationIngest)(),w=()=>{d(!1),m(new Set),p("")};return(0,t.jsx)(s.UnifiedSelectionModal,{headerIcon:(0,a.getIntegrationModalIcon)("notion"),open:n&&!!e,onOpenChange:w,title:(0,a.getIntegrationModalTitle)("notion"),searchPlaceholder:"Search pages and databases...",searchQuery:h,onSearchChange:p,items:g,isLoading:y,selectedItems:f,onToggleItem:e=>{m(t=>{let n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n})},onBatchToggle:(e,t)=>{m(n=>{let r=new Set(n);return t?e.forEach(e=>{r.add(e)}):e.forEach(e=>{r.delete(e)}),r})},onCancel:w,onConfirm:()=>b(g?g.filter(e=>f.has(e.id)).map(e=>({id:e.id,name:e.name})):[],"notion"),confirmText:"Import",confirmingText:"Importing...",isConfirming:x})}},109477:e=>{"use strict";e.s({default:()=>h,oneDriveModalAtom:()=>d});var t=e.i(290479),n=e.i(647968),r=e.i(608294),i=e.i(373150),a=e.i(888305),o=e.i(885905),s=e.i(814733),l=e.i(477347),u=e.i(908945),c=e.i(126197);let d=(0,n.atom)(!1),h=()=>{let{user:e}=(0,o.useAuth)(),[n,h]=(0,r.useAtom)(d),[p,f]=(0,i.useState)(""),[m,g]=(0,i.useState)(new Set),{transformedFiles:y,isLoading:b,error:x}=(0,c.useTransformFiles)("onedrive",p,n),{integrationIngest:w,isPending:k}=(0,u.useIntegrationIngest)(),S=s.api.useUtils(),_=()=>{h(!1),g(new Set),f("")};return(0,t.jsx)(l.UnifiedSelectionModal,{open:n&&!!e,onOpenChange:_,title:(0,a.getIntegrationModalTitle)("onedrive"),headerIcon:(0,a.getIntegrationModalIcon)("onedrive",{height:16,width:16}),searchPlaceholder:"Search files...",searchQuery:p,onSearchChange:f,items:y,isLoading:b,selectedItems:m,onToggleItem:e=>{g(t=>{let n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n})},onBatchToggle:(e,t)=>{g(n=>{let r=new Set(n);return t?e.forEach(e=>{r.add(e)}):e.forEach(e=>{r.delete(e)}),r})},onCancel:_,onConfirm:()=>w(y?y.filter(e=>m.has(e.id)).map(e=>({id:e.id,name:e.name})):[],"onedrive"),confirmText:"Import",confirmingText:"Importing...",isConfirming:k,error:x,onRetry:()=>{S.integrations.getFilesForTree.invalidate({type:"onedrive",query:p.trim()?p:void 0})}})}},363161:e=>{"use strict";e.s({default:()=>h,sharePointModalAtom:()=>d});var t=e.i(290479),n=e.i(647968),r=e.i(608294),i=e.i(373150),a=e.i(888305),o=e.i(885905),s=e.i(814733),l=e.i(477347),u=e.i(908945),c=e.i(126197);let d=(0,n.atom)(!1),h=()=>{let{user:e}=(0,o.useAuth)(),[n,h]=(0,r.useAtom)(d),[p,f]=(0,i.useState)(""),[m,g]=(0,i.useState)(new Set),{integrationIngest:y,isPending:b}=(0,u.useIntegrationIngest)(),{transformedFiles:x,isLoading:w,error:k}=(0,c.useTransformFiles)("sharepoint",p,n),S=s.api.useUtils(),_=()=>{h(!1),g(new Set),f("")};return(0,t.jsx)(l.UnifiedSelectionModal,{open:n&&!!e,onOpenChange:_,title:(0,a.getIntegrationModalTitle)("sharepoint"),headerIcon:(0,a.getIntegrationModalIcon)("sharepoint",{height:16,width:16}),searchPlaceholder:"Search files...",searchQuery:p,onSearchChange:f,items:x,isLoading:w,selectedItems:m,onToggleItem:e=>{g(t=>{let n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n})},onBatchToggle:(e,t)=>{g(n=>{let r=new Set(n);return t?e.forEach(e=>{r.add(e)}):e.forEach(e=>{r.delete(e)}),r})},onCancel:_,onConfirm:()=>y(x?x.filter(e=>m.has(e.id)).map(e=>({id:e.id,name:e.name})):[],"sharepoint"),confirmText:"Import",confirmingText:"Importing...",isConfirming:b,error:k,onRetry:()=>{S.integrations.getFilesForTree.invalidate({type:"sharepoint",query:void 0})}})}},412997:e=>{"use strict";e.s({useIntegrationModals:()=>u});var t=e.i(608294),n=e.i(858277),r=e.i(151165),i=e.i(581967),a=e.i(133465),o=e.i(109477),s=e.i(363161),l=e.i(814733);let u=()=>{let e=(0,t.useSetAtom)(r.googleDriveModalAtom),u=(0,t.useSetAtom)(o.oneDriveModalAtom),c=(0,t.useSetAtom)(s.sharePointModalAtom),d=(0,t.useSetAtom)(a.notionModalAtom),h=(0,t.useSetAtom)(i.mendeleyModalAtom),p=(0,t.useSetAtom)(n.zoteroModalAtom),f=l.api.useUtils();return{toggleSelectionModal:(t,n)=>{switch(n&&f.integrations.getFilesForTree.invalidate({type:t}),t){case"google-drive":e(n);break;case"onedrive":u(n);break;case"sharepoint":c(n);break;case"notion":d(n);break;case"mendeley":h(n);break;case"zotero":p(n);break;default:console.warn("Unknown integration modal: ".concat(t))}}}}},455257:e=>{"use strict";e.s({LearnFileTypesLink:()=>s});var t=e.i(290479),n=e.i(523596),r=e.i(704255),i=e.i(448068),a=e.i(972899),o=e.i(252390);let s=()=>{let{track:e}=(0,o.default)();return(0,t.jsx)(i.DropdownMenuItem,{asChild:!0,children:(0,t.jsx)(r.Button,{variant:"ghost",size:"medium",className:"w-full justify-start text-text-secondary",onClick:()=>{e("plus_menu_button_clicked",{button:"learn_file_types"})},href:"https://docs.anara.com/import/file-types",leadingIcon:(0,t.jsx)(a.Icon,{as:n.CircleHelp}),label:"Learn about file types"})})}},387012:e=>{"use strict";e.s({MenuSeparator:()=>n});var t=e.i(290479);let n=()=>(0,t.jsx)("div",{className:"h-[1px] bg-border"})},503438:e=>{"use strict";e.s({DesktopPlusMenuContent:()=>A});var t=e.i(290479),n=e.i(757589),r=e.i(996481),i=e.i(748445),a=e.i(578018),o=e.i(983769),s=e.i(490282),l=e.i(522091),u=e.i(182822),c=e.i(986046),d=e.i(672659),h=e.i(397711),p=e.i(340582),f=e.i(204046),m=e.i(704255),g=e.i(448068),y=e.i(972899),b=e.i(885905),x=e.i(100711),w=e.i(412997),k=e.i(46621),S=e.i(375199),_=e.i(455257),C=e.i(387012);let A=e=>{let{toggleSelectionModal:A}=(0,w.useIntegrationModals)(),{user:E}=(0,b.useAuth)(),{connectedIntegrations:T,allIntegrations:M}=(0,x.useConnectedIntegrations)(),{mutate:I}=(0,k.useMarkStepCompletedWithTracking)(),{trackFileSelectionModal:N,trackSettingsNavigation:D}=(0,p.useTrackIntegrationEvents)(),P=(0,h.useRouter)(),{handleFileOptionClick:R,handleFolderOptionClick:O,handleNewChatClick:j,handleNewNoteClick:F,handleNewFolderClick:L,handleMenuOpenChange:z}=e;return(0,t.jsxs)(g.DropdownMenuContent,{align:"start",className:"min-w-[200px] p-2",onCloseAutoFocus:e=>{e.preventDefault()},children:[(0,t.jsxs)("div",{className:"pb-2",children:[(0,t.jsx)(g.DropdownMenuItem,{onSelect:R,asChild:!0,children:(0,t.jsx)(m.Button,{variant:"ghost",size:"medium",className:"w-full justify-start",leadingIcon:(0,t.jsx)(y.Icon,{as:o.FileUp,size:"md"}),label:"File upload"})}),(0,t.jsx)(g.DropdownMenuItem,{onSelect:O,asChild:!0,children:(0,t.jsx)(m.Button,{variant:"ghost",size:"medium",className:"w-full justify-start",leadingIcon:(0,t.jsx)(y.Icon,{as:l.FolderUp,size:"md"}),label:"Folder upload"})}),(0,t.jsxs)(g.DropdownMenuSub,{children:[(0,t.jsx)(g.DropdownMenuSubTrigger,{asChild:!0,children:(0,t.jsx)(m.Button,{variant:"ghost",size:"medium",className:"w-full justify-start",leadingIcon:(0,t.jsx)(y.Icon,{as:i.Download,size:"md"}),label:"Import",trailingIcon:(0,t.jsx)(y.Icon,{as:r.ChevronRight,size:"md"})})}),(0,t.jsx)(g.DropdownMenuPortal,{children:(0,t.jsxs)(g.DropdownMenuSubContent,{sideOffset:0,className:"w-[200px] p-2",children:[(0,t.jsxs)(g.DropdownMenuSub,{children:[(0,t.jsx)(g.DropdownMenuSubTrigger,{asChild:!0,children:(0,t.jsx)(m.Button,{variant:"ghost",size:"medium",className:"w-full justify-start",leadingIcon:(0,t.jsx)(y.Icon,{as:d.ScanBarcode,size:"md"}),label:"ID",trailingIcon:(0,t.jsx)(y.Icon,{as:r.ChevronRight,size:"md"})})}),(0,t.jsx)(g.DropdownMenuPortal,{children:(0,t.jsx)(g.DropdownMenuSubContent,{sideOffset:0,className:"w-[272px] min-h-[122px] p-4",children:(0,t.jsx)(f.IdImportForm,{setOpenMenu:z,landingPage:!0})})})]}),(0,t.jsxs)(g.DropdownMenuSub,{children:[(0,t.jsx)(g.DropdownMenuSubTrigger,{asChild:!0,children:(0,t.jsx)(m.Button,{variant:"ghost",size:"medium",className:"w-full justify-start",leadingIcon:(0,t.jsx)(y.Icon,{as:u.LinkIcon,size:"md"}),label:"URL",trailingIcon:(0,t.jsx)(y.Icon,{as:r.ChevronRight,size:"md"})})}),(0,t.jsx)(g.DropdownMenuPortal,{children:(0,t.jsx)(g.DropdownMenuSubContent,{sideOffset:0,className:"w-[272px] min-h-[122px] p-4",children:(0,t.jsx)(f.UrlImportForm,{setOpenMenu:z,landingPage:!0})})})]}),(0,t.jsx)(g.DropdownMenuSeparator,{}),T.map(e=>(0,t.jsx)(g.DropdownMenuItem,{onSelect:()=>(e=>{N(e,"plus_menu"),A(e,!0),"zotero"===e&&I({workflowKey:"connect-zotero",stepKey:"import-from-zotero"})})(e.id),asChild:!0,children:(0,t.jsx)(m.Button,{variant:"ghost",size:"medium",className:"w-full justify-start",leadingIcon:(0,t.jsx)(e.icon,{className:"w-7 h-7"}),label:e.name})},e.id)),(null==M?void 0:M.length)-(null==T?void 0:T.length)>+!(0,S.isStaffEmail)(null==E?void 0:E.email)&&(0,t.jsx)(g.DropdownMenuItem,{onSelect:()=>{D("plus_menu"),P.push("/settings/integrations")},asChild:!0,children:(0,t.jsx)(m.Button,{variant:"ghost",size:"medium",className:"w-full justify-start",leadingIcon:(0,t.jsx)(y.Icon,{as:n.Cable,size:"md"}),label:"Connect your apps"})})]})})]})]}),(0,t.jsx)(C.MenuSeparator,{}),(0,t.jsxs)("div",{className:"py-2",children:[(0,t.jsx)(g.DropdownMenuItem,{onSelect:j,asChild:!0,children:(0,t.jsx)(m.Button,{variant:"ghost",size:"medium",className:"w-full justify-start",leadingIcon:(0,t.jsx)(y.Icon,{as:c.MessagesSquare,size:"md"}),label:"New chat"})}),(0,t.jsx)(g.DropdownMenuItem,{onSelect:F,asChild:!0,children:(0,t.jsx)(m.Button,{variant:"ghost",size:"medium",className:"w-full justify-start",leadingIcon:(0,t.jsx)(y.Icon,{as:a.FilePen,size:"md"}),label:"New note"})}),(0,t.jsx)(g.DropdownMenuItem,{onSelect:L,asChild:!0,children:(0,t.jsx)(m.Button,{variant:"ghost",size:"medium",className:"w-full justify-start",leadingIcon:(0,t.jsx)(y.Icon,{as:s.FolderOpen,size:"md"}),label:"New folder"})})]}),(0,t.jsx)(C.MenuSeparator,{}),(0,t.jsx)("div",{className:"pt-2",children:(0,t.jsx)(_.LearnFileTypesLink,{})})]})}},549293:e=>{"use strict";e.s({MobileImportSubmenu:()=>g});var t=e.i(290479),n=e.i(757589),r=e.i(996481),i=e.i(182822),a=e.i(672659),o=e.i(397711),s=e.i(373150),l=e.i(340582),u=e.i(204046),c=e.i(972899),d=e.i(885905),h=e.i(100711),p=e.i(412997),f=e.i(46621),m=e.i(375199);let g=e=>{let{closeAllMenus:g}=e,{toggleSelectionModal:y}=(0,p.useIntegrationModals)(),{user:b}=(0,d.useAuth)(),{connectedIntegrations:x,allIntegrations:w}=(0,h.useConnectedIntegrations)(),{mutate:k}=(0,f.useMarkStepCompletedWithTracking)(),{trackFileSelectionModal:S,trackSettingsNavigation:_}=(0,l.useTrackIntegrationEvents)(),C=(0,o.useRouter)(),[A,E]=(0,s.useState)(null);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("button",{onClick:()=>E("import"===A?null:"import"),className:"relative flex w-full cursor-default gap-4 select-none items-center rounded-[8px] px-3 py-2 text-sm outline-none transition-colors hover:bg-popover-hover",children:[(0,t.jsx)(c.Icon,{as:i.LinkIcon}),(0,t.jsx)("span",{className:"flex-1 text-left",children:"Import"}),(0,t.jsx)(c.Icon,{as:r.ChevronRight,className:"ml-auto h-7 w-7"})]}),"import"===A&&(0,t.jsxs)("div",{className:"ml-9 mt-2 space-y-2 border-l border-border-primary pl-4",children:[(0,t.jsxs)("button",{onClick:()=>E("id"),className:"relative flex w-full cursor-default gap-4 select-none items-center rounded-[8px] px-3 py-2 text-sm outline-none transition-colors hover:bg-popover-hover",children:[(0,t.jsx)(c.Icon,{as:a.ScanBarcode}),(0,t.jsx)("span",{className:"flex-1 text-left",children:"ID"}),(0,t.jsx)(c.Icon,{as:r.ChevronRight,className:"ml-auto h-7 w-7"})]}),(0,t.jsxs)("button",{onClick:()=>E("url"),className:"relative flex w-full cursor-default gap-4 select-none items-center rounded-[8px] px-3 py-2 text-sm outline-none transition-colors hover:bg-popover-hover",children:[(0,t.jsx)(c.Icon,{as:i.LinkIcon}),(0,t.jsx)("span",{className:"flex-1 text-left",children:"URL"}),(0,t.jsx)(c.Icon,{as:r.ChevronRight,className:"ml-auto h-7 w-7"})]}),x.map(e=>(0,t.jsxs)("button",{onClick:()=>(e=>{S(e,"plus_menu"),y(e,!0),"zotero"===e&&k({workflowKey:"connect-zotero",stepKey:"import-from-zotero"})})(e.id),className:"relative flex w-full cursor-default gap-4 select-none items-center rounded-[8px] px-3 py-2 text-sm outline-none transition-colors hover:bg-popover-hover",children:[(0,t.jsx)(e.icon,{className:"w-7 h-7"}),(0,t.jsx)("span",{className:"flex-1 text-left",children:e.name})]},e.id)),(null==w?void 0:w.length)-(null==x?void 0:x.length)>+!(0,m.isStaffEmail)(null==b?void 0:b.email)&&(0,t.jsxs)("button",{onClick:()=>{_("plus_menu"),C.push("/settings/integrations")},className:"relative flex w-full cursor-default gap-4 select-none items-center rounded-[8px] px-3 py-2 text-sm outline-none transition-colors hover:bg-popover-hover",children:[(0,t.jsx)(c.Icon,{as:n.Cable}),(0,t.jsx)("span",{className:"flex-1 text-left",children:"Connect your apps"})]})]}),"id"===A&&(0,t.jsx)("div",{className:"mt-4 p-4 border rounded-4 bg-popover",children:(0,t.jsx)(u.IdImportForm,{setOpenMenu:g})}),"url"===A&&(0,t.jsx)("div",{className:"mt-4 p-4 border rounded-4 bg-popover",children:(0,t.jsx)(u.UrlImportForm,{setOpenMenu:g})})]})}},59486:e=>{"use strict";e.s({MenuButton:()=>a});var t=e.i(290479),n=e.i(704255),r=e.i(972899),i=e.i(289702);let a=e=>{let{onClick:a,icon:o,children:s,className:l=""}=e;return(0,t.jsx)(n.Button,{onClick:a,variant:"ghost",size:"medium",className:(0,i.cn)(l,"w-full justify-start"),leadingIcon:(0,t.jsx)(r.Icon,{as:o}),children:(0,t.jsx)("span",{className:"flex-1 text-left",children:s})})}},973863:e=>{"use strict";e.s({MobilePlusMenuContent:()=>d});var t=e.i(290479),n=e.i(360911),r=e.i(490282),i=e.i(672330),a=e.i(765357),o=e.i(448068),s=e.i(549293),l=e.i(455257),u=e.i(59486),c=e.i(387012);let d=e=>{let{handleFileOptionClick:d,handleFolderOptionClick:h,handleNewChatClick:p,handleNewNoteClick:f,handleNewFolderClick:m,handleMenuOpenChange:g}=e;return(0,t.jsxs)(o.DropdownMenuContent,{align:"start",className:"min-w-[200px] p-2",onCloseAutoFocus:e=>{e.preventDefault()},children:[(0,t.jsxs)("div",{className:"pb-2 flex flex-col items-start",children:[(0,t.jsx)(u.MenuButton,{onClick:d,icon:n.FileText,children:"File upload"}),(0,t.jsx)(u.MenuButton,{onClick:h,icon:r.FolderOpen,children:"Folder upload"}),(0,t.jsx)(s.MobileImportSubmenu,{closeAllMenus:()=>{g(!1)}})]}),(0,t.jsx)(c.MenuSeparator,{}),(0,t.jsxs)("div",{className:"py-2 flex flex-col items-start",children:[(0,t.jsx)(u.MenuButton,{onClick:p,icon:i.MessageSquare,children:"New chat"}),(0,t.jsx)(u.MenuButton,{onClick:f,icon:a.PenLine,children:"New note"}),(0,t.jsx)(u.MenuButton,{onClick:m,icon:r.FolderOpen,children:"New folder"})]}),(0,t.jsx)(c.MenuSeparator,{}),(0,t.jsx)("div",{className:"pt-2",children:(0,t.jsx)(l.LearnFileTypesLink,{})})]})}},666873:e=>{"use strict";e.s({PlusMenuTrigger:()=>s});var t=e.i(290479),n=e.i(334248),r=e.i(704255),i=e.i(448068),a=e.i(972899),o=e.i(289702);let s=e=>{let{copyText:s,isLoading:l,disabled:u}=e;return(0,t.jsx)(i.DropdownMenuTrigger,{disabled:u||l,asChild:!0,children:(0,t.jsxs)(r.Button,{size:s?"smaller":"icon",isLoading:l,variant:s?"default":"secondary",className:(0,o.cn)(s&&"!bg-primary"),children:[(0,t.jsx)(a.Icon,{as:n.PlusIcon}),s]})})}},55579:e=>{"use strict";e.s({useCreateChat:()=>r});var t=e.i(852951),n=e.i(814733);let r=()=>{let{addChat:e}=(0,t.useAddChat)(),{mutateAsync:r}=n.api.chat.create.useMutation({onSuccess:t=>{e(t)}});return{createChat:r}}},487310:e=>{"use strict";e.s({usePlusMenuStore:()=>t});let t=(0,e.i(496438).create)(e=>({isOpen:!1,setIsOpen:t=>e({isOpen:t}),openMenu:()=>e({isOpen:!0})}))},274388:e=>{"use strict";e.s({usePlusMenuHandlers:()=>m});var t=e.i(224879),n=e.i(257140),r=e.i(397711),i=e.i(373150),a=e.i(55579),o=e.i(834799),s=e.i(885905),l=e.i(131303),u=e.i(846580),c=e.i(658503),d=e.i(461655),h=e.i(449097),p=e.i(252390),f=e.i(487310);let m=()=>{let e=(0,i.useRef)(null),m=(0,i.useRef)(null),{processFiles:g}=(0,o.default)(),{isOpen:y,setIsOpen:b}=(0,f.usePlusMenuStore)(),{track:x}=(0,p.default)(),w=(0,u.useIsMobile)(),{user:k}=(0,s.useAuth)(),S=(0,r.useRouter)(),{settings:_}=(0,h.useSettings)(),{setShowLeftSidebar:C}=(0,c.useLeftSidebar)(),{createChat:A}=(0,a.useCreateChat)(),{createNote:E}=(0,d.default)({onSuccess:e=>{e&&(S.push("/b/".concat(e.id)),x("newCreateNoteClicked"))}}),{createEmptyFolder:T}=(0,l.useCreateEmptyFolder)(),M=async()=>{if(!k)return;x("plus_menu_button_clicked",{button:"new_chat"});let{id:e}=await A({id:(0,n.nanoid)(),includedSources:[{type:"generalKnowledge"}]});S.push("/b/".concat(e,"?model=").concat(_.modelName,"&maxLength=").concat(_.maxLength)),x("chat_nothing_created",{chatbotId:e,model:_.modelName,maxLength:_.maxLength,context:"generalKnowledge"}),b(!1),w&&C(!1)};return{fileInputRef:e,folderInputRef:m,openMenu:y,isMobile:w,handleFileChange:e=>{let t=e.target.files;t&&t.length>0&&(g(Array.from(t)),e.target.value="")},handleFileOptionClick:()=>{e.current&&(setTimeout(()=>{var t;null==(t=e.current)||t.click()},50),x("plus_menu_button_clicked",{button:"upload_file"}),b(!1))},handleFolderOptionClick:()=>{m.current&&(setTimeout(()=>{var e;null==(e=m.current)||e.click()},50),x("plus_menu_button_clicked",{button:"upload_folder"}),b(!1))},handleMenuOpenChange:(e,t)=>{b(e),e&&t&&x("library_add_clicked")},handleNewChatClick:M,handleNewNoteClick:()=>{k&&(x("plus_menu_button_clicked",{button:"new_note"}),E(void 0),b(!1),w&&C(!1))},handleNewFolderClick:()=>{x("plus_menu_button_clicked",{button:"new_folder"}),T({id:(0,t.default)()}),b(!1)}}}},702255:e=>{"use strict";e.s({default:()=>u});var t=e.i(290479),n=e.i(373150),r=e.i(834799),i=e.i(448068),a=e.i(503438),o=e.i(973863),s=e.i(666873),l=e.i(274388);let u=e=>{let{copyText:u}=e,{fileInputRef:c,folderInputRef:d,openMenu:h,isMobile:p,handleFileChange:f,handleFileOptionClick:m,handleFolderOptionClick:g,handleMenuOpenChange:y,handleNewChatClick:b,handleNewNoteClick:x,handleNewFolderClick:w}=(0,l.usePlusMenuHandlers)(),[k,S]=(0,n.useState)(!1),_={handleFileOptionClick:m,handleFolderOptionClick:g,handleNewChatClick:b,handleNewNoteClick:x,handleNewFolderClick:w,openMenu:h,handleMenuOpenChange:e=>y(e,u),copyText:u};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("input",{id:"plus-menu-file-input",type:"file",ref:c,className:"hidden",multiple:!0,accept:r.SUPPORTED_EXTENSIONS.join(","),onChange:f}),(0,t.jsx)("input",{id:"plus-menu-folder-input",type:"file",ref:d,className:"hidden",multiple:!0,onChange:f,webkitdirectory:"",directory:""}),(0,t.jsxs)(i.DropdownMenu,{open:h,onOpenChange:e=>y(e,u),children:[(0,t.jsx)(s.PlusMenuTrigger,{copyText:u,isLoading:k,disabled:k}),p?(0,t.jsx)(o.MobilePlusMenuContent,{..._}):(0,t.jsx)(a.DesktopPlusMenuContent,{..._})]})]})}},524994:e=>{"use strict";e.s({Root:()=>s});var t=e.i(373150),n=e.i(421349),r=e.i(290479),i="horizontal",a=["horizontal","vertical"],o=t.forwardRef((e,t)=>{var o;let{decorative:s,orientation:l=i,...u}=e,c=(o=l,a.includes(o))?l:i;return(0,r.jsx)(n.Primitive.div,{"data-orientation":c,...s?{role:"none"}:{"aria-orientation":"vertical"===c?c:void 0,role:"separator"},...u,ref:t})});o.displayName="Separator";var s=o},186776:e=>{"use strict";e.s({Separator:()=>i});var t=e.i(290479),n=e.i(289702),r=e.i(524994);let i=e.i(373150).forwardRef((e,i)=>{let{className:a,orientation:o="horizontal",decorative:s=!0,...l}=e;return(0,t.jsx)(r.Root,{ref:i,decorative:s,orientation:o,className:(0,n.cn)("shrink-0 bg-border","horizontal"===o?"h-[1px] w-full":"min-h-full w-[1px]",a),...l})});i.displayName=r.Root.displayName},970900:e=>{"use strict";e.s({Folder:()=>t.default});var t=e.i(90935)},801649:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("folder-output",[["path",{d:"M2 7.5V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-1.5",key:"1yk7aj"}],["path",{d:"M2 13h10",key:"pgb2dq"}],["path",{d:"m5 10-3 3 3 3",key:"1r8ie0"}]])},545763:e=>{"use strict";e.s({FolderOutput:()=>t.default});var t=e.i(801649)},876626:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},239614:e=>{"use strict";e.s({Trash2:()=>t.default});var t=e.i(876626)},37e4:e=>{"use strict";e.s({useMoveToFolder:()=>r});var t=e.i(814733),n=e.i(525094);let r=()=>{let e=t.api.useUtils();return t.api.chatbot.moveToFolder.useMutation({onMutate:async t=>{let{ids:r,folderId:i,teamId:a}=t,o=e.workspace.all.getData(),s=r.length;if(i){let t=e.workspace.all.getData(),r=null==t?void 0:t.entities.find(e=>e.id===i),a=(null==r?void 0:r.name)||"Untitled",o=1===s?'Moved 1 item to "'.concat(a,'"'):"Moved ".concat(s,' items to "').concat(a,'"');n.toast.success(o)}else n.toast.success(1===s?"1 file removed from folder":"".concat(s," files removed from folder"));return e.workspace.all.setData(void 0,e=>e?{...e,entities:e.entities.map(e=>r.includes(e.id)?{...e,groupId:i,...void 0!==a&&{teamId:a}}:e)}:e),{prevData:o}},onError:(t,r,i)=>{let{ids:a}=r;(null==i?void 0:i.prevData)&&e.workspace.all.setData(void 0,i.prevData);let o=a.length;n.toast.error(1===o?"Failed to move item":"Failed to move items")}})}},683525:e=>{"use strict";e.s({FolderTableActions:()=>f});var t=e.i(290479),n=e.i(149404),r=e.i(84324),i=e.i(257140),a=e.i(373150),o=e.i(836826),s=e.i(52333),l=e.i(998145);e.i(567349);var u=e.i(111367),c=e.i(972899),d=e.i(131303),h=e.i(37e4),p=e.i(852951);let f=e=>{let{onClickOutside:f,selectedItems:m}=e,g=(0,a.useRef)(null),{data:y}=(0,p.useWorkspace)(),{mutate:b}=(0,h.useMoveToFolder)(),x=(0,s.useConfirmationStore)(e=>e.openConfirmation),{createEmptyFolder:w}=(0,d.useCreateEmptyFolder)(),k=null==y?void 0:y.entities.filter(e=>"GROUP"===e.type);return(0,o.useOnClickOutside)(g,f),(0,t.jsxs)(u.Command,{className:"gap-0 w-[200px]",ref:g,children:[(0,t.jsx)(n.CommandInput,{autoFocus:!0,className:"text-sm w-full px-4 py-4 border-b placeholder:text-text-secondary bg-transparent focus-visible:outline-none font-medium text-text-primary",placeholder:"Search attributes..."}),(0,t.jsxs)(u.CommandList,{className:"scrollbar-overlay",children:[(0,t.jsx)(u.CommandEmpty,{children:"No columns found."}),(0,t.jsxs)(u.CommandGroup,{className:"p-2",children:[null==k?void 0:k.map(e=>{var n;return(0,t.jsxs)(u.CommandItem,{value:e.id,keywords:[null!=(n=e.name)?n:"Untitled"],className:"py-2",onSelect:()=>{let t=e.teamId||null,n=(null==y?void 0:y.entities.filter(e=>m.includes(e.id)&&"CHAT"!==e.type))||[];if(0===n.length)return void f();let r=n.some(e=>{let n=e.groupId?null==y?void 0:y.entities.find(t=>t.id===e.groupId):null;return((null==n?void 0:n.teamId)||null)&&!t}),i=n.some(e=>{let n=e.groupId?null==y?void 0:y.entities.find(t=>t.id===e.groupId):null;return!(null==n?void 0:n.teamId)&&t}),a=()=>{b({ids:n.map(e=>e.id),folderId:e.id,teamId:t}),f()};r?x({title:"Make these items private?",description:"Only you will be able to access and edit these items and any nested content.",actionLabel:"Confirm",onAction:a,cancelLabel:"Cancel",onCancel:()=>{}}):i?x({title:"Share items with team?",description:"Anyone in your team will be able to access and edit these items and any nested content.",actionLabel:"Confirm",onAction:a,cancelLabel:"Cancel",onCancel:()=>{}}):a()},children:[(0,t.jsx)(c.Icon,{as:(0,l.default)({type:e.type})}),(0,t.jsx)("span",{className:"truncate",children:e.name||"Untitled"})]},e.id)}),(0,t.jsxs)(u.CommandItem,{forceMount:!0,className:"py-2",onSelect:async()=>{let e=(null==y?void 0:y.entities.filter(e=>m.includes(e.id)&&"CHAT"!==e.type))||[];if(0===e.length)return void f();let t=(0,i.nanoid)();await w({id:t,teamId:null,groupId:null}),b({ids:e.map(e=>e.id),folderId:t,teamId:null}),f()},children:[(0,t.jsx)(c.Icon,{as:r.Plus}),(0,t.jsx)("span",{className:"truncate",children:"Add a new folder..."})]})]})]})]})}},32359:e=>{"use strict";e.s({ChatbotTableActions:()=>p});var t=e.i(290479),n=e.i(970900),r=e.i(545763),i=e.i(239614),a=e.i(334145),o=e.i(373150),s=e.i(704255),l=e.i(972899),u=e.i(847934),c=e.i(37e4),d=e.i(227261),h=e.i(683525);let p=e=>{let{table:p,isHomepage:f}=e,[m,g]=(0,o.useState)(!1),[y,b]=(0,o.useState)(!1),[x,w]=(0,o.useState)(!1),{mutateDelete:k}=(0,u.default)(),{mutate:S}=(0,c.useMoveToFolder)(),_=(0,d.useChatbotStore)(e=>e.mode),C=(null==_?void 0:_.type)==="chatbot"&&"GROUP"===_.chatbotType,A=p.getSelectedRowModel().flatRows.filter(e=>"PLACEHOLDER"!==e.original.type),E=e=>{let t=[];for(let n of e.subRows||[])t.push(n),t.push(...E(n));return t},T=new Map;for(let e of A)if(T.set(e.id,e),0===e.depth)for(let t of E(e))T.set(t.id,t);let M=Array.from(T.values()),I=M.map(e=>e.original.id),N=M.filter(e=>"PLACEHOLDER"!==e.original.type&&("CHAT"!==e.original.type||0===e.depth)).length,D=M.some(e=>"CHAT"!==e.original.type),P=M.filter(e=>0===e.depth),R=P.filter(e=>"PLACEHOLDER"!==e.original.type).length,O=0;for(let e of P)e.getIsExpanded()||(O+=E(e).length);let j=O>0,F=M.filter(e=>null!==e.original.groupId).map(e=>e.original.id),L=F.length>0;return m?(0,t.jsx)(h.FolderTableActions,{selectedItems:I,onClickOutside:()=>{p.toggleAllRowsSelected(!1)}}):(0,t.jsx)("div",{className:"flex items-center gap-4 p-4 w-fit max-md:w-full max-md:justify-between",children:(0,t.jsxs)("div",{className:"flex items-center gap-4 max-md:flex-col min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between max-md:w-full min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 min-w-0 overflow-hidden",children:[(0,t.jsx)("span",{className:"flex items-center text-sm justify-center px-2 bg-blue text-white font-semibold rounded-2 flex-shrink-0",children:j?R:N}),(0,t.jsx)("span",{className:"text-sm font-medium whitespace-nowrap overflow-hidden text-ellipsis",children:"selected"})]}),(0,t.jsx)(s.Button,{onClick:()=>p.toggleAllRowsSelected(!1),variant:"ghost",size:"xs",className:"h-11 w-11 md:hidden",children:(0,t.jsx)(l.Icon,{as:a.X})})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4 max-md:flex-col max-md:w-56",children:[D&&(0,t.jsx)(s.Button,{variant:"outline",size:"medium",className:"h-11 flex items-center gap-4 max-md:w-full max-md:justify-start",onClick:()=>g(!0),leadingIcon:(0,t.jsx)(l.Icon,{as:n.Folder,size:"md"}),children:"Add to folder"}),L&&C&&(0,t.jsx)(s.Button,{onClick:()=>{if(x){S({ids:F,folderId:null,teamId:void 0}),p.toggleAllRowsSelected(!1);return}w(!0)},variant:x?"destructive":"outline",size:"medium",className:"h-11 flex items-center gap-4 max-md:w-full max-md:justify-start",leadingIcon:(0,t.jsx)(l.Icon,{as:r.FolderOutput,size:"md"}),children:x?"Confirm":"Remove from folder"}),(0,t.jsx)(s.Button,{onClick:()=>{if(y){k(I.map(e=>({id:e}))),p.toggleAllRowsSelected(!1);return}b(!0)},variant:y?"destructive":"outline",size:"medium",className:"h-11 flex items-center gap-4 max-md:w-full max-md:justify-start",leadingIcon:(0,t.jsx)(l.Icon,{as:i.Trash2,size:"md"}),children:y?"Confirm":"Delete selection"}),(0,t.jsx)(s.Button,{onClick:()=>p.toggleAllRowsSelected(!1),variant:"ghost",size:"medium",className:"h-11 w-11 max-md:hidden",leadingIcon:(0,t.jsx)(l.Icon,{as:a.X,size:"md"})})]})]})})}},710176:e=>{"use strict";e.s({default:()=>d,useSelectedItems:()=>c});var t=e.i(290479),n=e.i(847934),r=e.i(647968),i=e.i(608294),a=e.i(330462),o=e.i(34818),s=e.i(373150),l=e.i(704255);let u=(0,r.atom)([]),c=()=>{let[e,t]=(0,i.useAtom)(u);return(0,s.useEffect)(()=>{let e=e=>{"Escape"===e.key&&t([])};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[e]),{selectedItems:e,setSelectedItems:t,selectItem:n=>{if(e.some(e=>e.id===n.id))return void t(e.filter(e=>e.id!==n.id));t([...e,n])}}},d=()=>{let[e,r]=(0,s.useState)(!1),{selectedItems:i,setSelectedItems:u}=c(),{mutateDelete:d}=(0,n.default)({onMutate:()=>{r(!1),u([])}}),h=i.length>0,p=async()=>{if(e){d(i.map(e=>e.id).map(e=>({id:e}))),r(!1);return}r(!0)};return(0,s.useEffect)(()=>{(null==i?void 0:i.length)===0&&r(!1)},[i]),(0,t.jsx)(a.AnimatePresence,{children:h&&(0,t.jsx)(o.motion.div,{initial:"hidden",animate:"visible",exit:"exit",variants:{hidden:{opacity:0,y:30},visible:{opacity:1,y:0},exit:{opacity:0,y:30}},transition:{duration:.1},className:"pointer-events-none fixed bottom-0 w-screen left-0 right-0 flex justify-center p-10 z-[999]",children:(0,t.jsxs)("div",{className:"flex flex-row items-center justify-between pl-7 pr-4 py-4 min-w-[420px] max-w-full bg-popover rounded-4 card-shadow closer-shadow transition duration-300 ease-in-out translate-y-0 opacity-100 pointer-events-auto select-none",children:[(0,t.jsxs)("div",{className:"text-sm",children:[i.length," selected"]}),(0,t.jsxs)("div",{className:"flex flex-row gap-4",children:[(0,t.jsx)(l.Button,{variant:"secondary",size:"xs",onClick:function(){u([])},children:"Cancel"}),(0,t.jsx)(l.Button,{onClick:p,variant:"secondary",size:"xs",className:e?"bg-control-destructive text-destructive-solid hover:bg-control-destructive hover:text-destructive-solid":"hover:bg-control-primary",children:e?"Confirm":"Delete"})]})]})})})}},448611:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]])},246611:e=>{"use strict";e.s({Building:()=>t.default});var t=e.i(448611)},267096:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},953093:e=>{"use strict";e.s({EllipsisVertical:()=>t.default});var t=e.i(267096)},335683:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("split",[["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"M8 3H3v5",key:"15dfkv"}],["path",{d:"M12 22v-8.3a4 4 0 0 0-1.172-2.872L3 3",key:"1qrqzj"}],["path",{d:"m15 9 6-6",key:"ko1vev"}]])},318427:e=>{"use strict";e.s({SplitIcon:()=>t.default});var t=e.i(335683)},407120:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},715535:e=>{"use strict";e.s({SquarePen:()=>t.default});var t=e.i(407120)},943899:e=>{"use strict";e.s({TrashIcon:()=>t.default});var t=e.i(655507)},202436:e=>{"use strict";e.s({useSeparateGroup:()=>a});var t=e.i(252390),n=e.i(814733),r=e.i(397711),i=e.i(525094);let a=()=>{let e=n.api.useUtils(),{track:a}=(0,t.default)(),o=(0,r.useRouter)(),s=(0,r.useParams)(),l=null==s?void 0:s.id;return n.api.sidebar.separate.useMutation({onMutate:async t=>{let n=e.workspace.all.getData();if(l===t&&n){let e=n.entities.find(e=>e.id===t);e&&"GROUP"===e.type&&(e.groupId?o.push("/b/".concat(e.groupId)):o.push("/new"))}let r=null;if(n){let e=n.entities.find(e=>e.id===t);if(e&&"GROUP"===e.type){let i=n.entities.filter(e=>e.groupId===t),a="Library";if(e.groupId){let t=n.entities.find(t=>t.id===e.groupId);(null==t?void 0:t.name)&&(a=t.name)}r={count:i.length,destinationFolderName:a}}}if(a("group_separate"),r){let{count:e,destinationFolderName:t}=r;i.toast.success("".concat(e," ").concat(1===e?"file":"files"," moved to ").concat(t))}return e.workspace.all.setData(void 0,e=>{if(!e)return e;let n=e.entities.find(e=>e.id===t);if(!n||"GROUP"!==n.type)return e;let r=e.entities.map(e=>e.groupId===t?{...e,groupId:n.groupId}:e).filter(e=>e.id!==t);return{...e,entities:r}}),{prevData:n}},onError:(t,n,r)=>{(null==r?void 0:r.prevData)&&e.workspace.all.setData(void 0,r.prevData)},onSuccess:e=>{a("group_separate")}})}},812782:e=>{"use strict";e.s({useSidebarMenuState:()=>o});var t=e.i(647968),n=e.i(608294);let r=(0,t.atom)(!1),i=(0,t.atom)(!1),a=(0,t.atom)(!1);function o(){let[e,t]=(0,n.useAtom)(r),[o,s]=(0,n.useAtom)(i),[l,u]=(0,n.useAtom)(a);return{isAccountMenuOpen:e,setIsAccountMenuOpen:t,isSidebarDropdownOpen:o,setIsSidebarDropdownOpen:s,isChatDropdownOpen:l,setIsChatDropdownOpen:u,isAnyMenuOpen:e||o||l}}},147271:e=>{"use strict";e.s({useUpdateName:()=>o});var t=e.i(966882),n=e.i(252390),r=e.i(410601),i=e.i(814733),a=e.i(852951);function o(e){let o=i.api.useUtils(),{track:s}=(0,n.default)(),{mutate:l,isPending:u}=i.api.workspace.updateName.useMutation({onSuccess:(e,t)=>{s("update_name_navbar",{chatbotId:t.id}),e&&o.workspace.all.setData(void 0,n=>n?{...n,entities:n.entities.map(n=>n.id===t.id?{...n,name:e.name||n.name}:n)}:n)}}),c=(0,t.useDebouncedCallback)(e=>l(e),1e3),{editor:d}=(0,r.useGlobalEditor)(null!=e?e:""),{updateChatbot:h}=(0,a.useWorkspaceActions)();return{updateName:async e=>{var t;let n=null==(t=o.workspace.all.getData())?void 0:t.entities.find(t=>t.id===e.id),r=(null==n?void 0:n.type)==="NOTE",i=""===e.name.trim()?"Untitled":e.name;h(e.id,{name:i},e.type);let a="Untitled"===i?"":i;if(o.chatbot.byId.setData(e.id,e=>{if(!e)return e;if(r&&e.contents){let t=e.contents;if(t.content&&t.content.length>0){let e=t.content.find(e=>"title"===e.type);e&&(e.content=[{type:"text",text:a}])}return{...e,name:i,contents:t}}return{...e,name:i}}),r&&d&&!e.isEditorUpdate){let e=d.state.doc.firstChild;e&&"title"===e.type.name&&d.commands.command(t=>{let{tr:n}=t;return n.setNodeMarkup(0,void 0,e.attrs),n.insertText(a,1,e.nodeSize-1),!0})}c({id:e.id,name:i,type:e.type})},isRenaming:u}}},643943:e=>{"use strict";e.s({useShareFolderModalStore:()=>t});let t=(0,e.i(496438).create)(e=>({isOpen:!1,folderId:null,isInviteToggled:!1,isTeamToggled:!1,isOwner:!1,openModal:t=>{let{folderId:n,isInviteToggled:r=!1,isTeamToggled:i=!1,isOwner:a=!1}=t;return e({isOpen:!0,folderId:n,isInviteToggled:r,isTeamToggled:i,isOwner:a})},closeModal:()=>e({isOpen:!1,folderId:null,isInviteToggled:!1,isTeamToggled:!1,isOwner:!1}),updateToggles:t=>{let{isInviteToggled:n,isTeamToggled:r}=t;return e(e=>({isInviteToggled:null!=n?n:e.isInviteToggled,isTeamToggled:null!=r?r:e.isTeamToggled}))}}))},1246:e=>{"use strict";e.s({default:()=>d});var t=e.i(290479),n=e.i(874133),r=e.i(373150),i=e.i(966882),a=e.i(555168),o=e.i(704255),s=e.i(959757),l=e.i(972899),u=e.i(571227);let c=a.z.object({name:a.z.string()}),d=e=>{let{defaultValues:a,onSubmit:d,updateName:h}=e,p=(0,s.useForm)({schema:c,defaultValues:a}),f=(0,i.useDebouncedCallback)(h,300),m=(0,r.useCallback)(e=>{f(e.target.value)},[f]),g=(0,r.useCallback)(e=>{let t=""===e.name.trim()?"Untitled":e.name;h(t),d({...e,name:t})},[h,d]);return(0,t.jsx)(s.Form,{...p,children:(0,t.jsxs)("form",{className:"flex gap-4 items-center",onSubmit:e=>{e.preventDefault(),e.stopPropagation(),p.handleSubmit(g)(e)},children:[(0,t.jsx)(u.Input,{autoFocus:!0,className:"focus-visible:outline-none focus-visible:ring-0 text-text-primary",placeholder:"Untitled",autoComplete:"off","data-1p-ignore":"true","data-lpignore":"true","data-form-type":"other",...p.register("name",{onChange:m})}),(0,t.jsx)(o.Button,{type:"submit",size:"icon",variant:"secondary",className:"flex-shrink-0",onClick:e=>{e.stopPropagation()},children:(0,t.jsx)(l.Icon,{as:n.Check})})]})})}},75836:e=>{"use strict";e.s({default:()=>C});var t=e.i(290479),n=e.i(246611),r=e.i(953093),i=e.i(318427),a=e.i(715535),o=e.i(943899),s=e.i(156997),l=e.i(373150),u=e.i(885905),c=e.i(847934),d=e.i(163368),h=e.i(202436),p=e.i(812782),f=e.i(147271),m=e.i(852951),g=e.i(289702),y=e.i(704255),b=e.i(52333),x=e.i(643943),w=e.i(710176),k=e.i(448068),S=e.i(972899),_=e.i(1246);let C=e=>{var C,A;let{tree:E,isActive:T,onSidebarOpenChange:M}=e,[I,N]=(0,l.useState)(!1),[D,P]=(0,l.useState)(!1),{setIsSidebarDropdownOpen:R}=(0,p.useSidebarMenuState)(),{setSelectedItems:O,selectedItems:j}=(0,w.useSelectedItems)(),{groupIdToRename:F,setGroupIdToRename:L}=(0,d.useRenameGroup)(),{data:z}=(0,m.useWorkspace)(),{user:B}=(0,u.useAuth)(),{openModal:U}=(0,x.useShareFolderModalStore)(),{mutateDelete:H}=(0,c.default)({onMutate:()=>{P(!1)}});(0,m.useTeamId)();let{mutateAsync:W}=(0,h.useSeparateGroup)(),{updateName:V,isRenaming:q}=(0,f.useUpdateName)(E.id),G=(0,b.useConfirmationStore)(e=>e.openConfirmation),$="GROUP"===E.type,K=E.name;if((0,l.useEffect)(()=>{if(F!==E.id)return;let e=setTimeout(()=>{P(!0),N(!0),L(null)},100);return()=>clearTimeout(e)},[F,E.id,L]),"WORKSPACE"===E.type)return null;let Y=!!E.teamId||(null==(C=E.chatbot)?void 0:C.isInviteToggled),X=(null==(A=E.chatbot)?void 0:A.userId)===(null==B?void 0:B.id);return(0,t.jsxs)(k.DropdownMenu,{open:D,onOpenChange:e=>{P(e),R(e),null==M||M(e),setTimeout(()=>{N(!1)},100)},children:[(0,t.jsxs)("div",{className:(0,g.cn)("absolute top-1/2 right-1 -translate-y-1/2 z-[999] h-9 flex items-center overflow-hidden group",Y?"w-20":"w-10"),children:[Y&&(0,t.jsx)("div",{className:(0,g.cn)("absolute flex items-center justify-center size-9 flex-shrink-0 ease-out z-10",T||D?"right-9 ":"right-0 group-hover:right-9 group-hover:delay-0"),children:(0,t.jsx)(S.Icon,{as:E.teamId?n.Building:s.Users,className:"size-7"})}),(0,t.jsx)(k.DropdownMenuTrigger,{disabled:q,asChild:!0,children:(0,t.jsx)(y.Button,{isLoading:q,size:"icon",variant:"ghost",className:(0,g.cn)("absolute right-0 size-9 hover:bg-secondary focus:outline-none z-20",!q&&!Y&&!T&&"invisible group-hover:visible data-[state=open]:visible ",Y&&!T&&"translate-x-0 opacity-100 invisible group-hover:visible data-[state=open]:visible",T&&"visible"),children:(0,t.jsx)(S.Icon,{as:r.EllipsisVertical})})})]}),(0,t.jsxs)(k.DropdownMenuContent,{"data-state":D?"open":"closed",className:"min-w-[200px] p-2",align:"end",children:[I&&(0,t.jsx)(_.default,{defaultValues:{name:null!=K?K:E.name},updateName:e=>{V({id:E.id,name:e,type:"CHATBOT"})},onSubmit:()=>{P(!1)}}),!I&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(k.DropdownMenuItem,{asChild:!0,children:(0,t.jsx)(y.Button,{variant:"ghost",size:"medium",className:"w-full justify-start",onClick:e=>{e.preventDefault(),e.stopPropagation(),N(!0)},leadingIcon:(0,t.jsx)(S.Icon,{size:"sm",as:a.SquarePen}),label:"Rename"})}),$&&(0,t.jsx)(k.DropdownMenuItem,{asChild:!0,children:(0,t.jsx)(y.Button,{variant:"ghost",size:"medium",className:"w-full justify-start",onClick:e=>{e.preventDefault(),e.stopPropagation(),W(E.id)},leadingIcon:(0,t.jsx)(S.Icon,{size:"sm",as:i.SplitIcon}),label:"Separate"})}),(0,t.jsx)(k.DropdownMenuItem,{asChild:!0,children:(0,t.jsx)(y.Button,{variant:"ghost",size:"medium",className:"w-full justify-start",onClick:e=>{var t,n,r;e.preventDefault(),e.stopPropagation(),U({folderId:E.id,isInviteToggled:null!=(r=null==(t=E.chatbot)?void 0:t.isInviteToggled)&&r,isTeamToggled:!!(null==(n=E.chatbot)?void 0:n.teamId),isOwner:X})},leadingIcon:(0,t.jsx)(S.Icon,{as:s.Users}),label:"Share"})}),X&&(0,t.jsx)(k.DropdownMenuItem,{asChild:!0,children:(0,t.jsx)(y.Button,{variant:"ghost",size:"medium",className:"w-full justify-start text-red-600 hover:text-red-600 hover:bg-red/10",onClick:e=>{e.preventDefault(),e.stopPropagation(),(()=>{P(!1);let e=null==j?void 0:j.map(e=>({id:e.id})),t=null==e?void 0:e.find(e=>e.id===E.id),n=t?e:[{id:E.id}];if($&&z){let e=z.entities.filter(e=>e.groupId===E.id&&"GROUP"!==e.type).map(e=>({id:e.id}));n.push(...e)}G({title:"Delete folder?",description:"Files and chats inside this folder will be permanently  deleted. Nested subfolders will not be deleted. ",actionLabel:"Delete folder",actionButtonVariant:"destructive",onAction:()=>{H(n),t&&O([])},cancelLabel:"Cancel",onCancel:()=>{}})})()},leadingIcon:(0,t.jsx)(S.Icon,{size:"sm",as:o.TrashIcon}),label:"Delete"})})]})]})]})}},223099:e=>{"use strict";e.s({HoverPrefetchLink:()=>i});var t=e.i(290479),n=e.i(86386),r=e.i(373150);function i(e){let{href:i,children:a,onClick:o,className:s}=e,[l,u]=(0,r.useState)(!1);return(0,t.jsx)(n.default,{href:i,prefetch:!!l&&null,onMouseEnter:()=>u(!0),onClick:o,className:s,children:a})}},732946:e=>{"use strict";e.s({ALLOWED_FILE_TYPES:()=>t,hasValidChatDragItems:()=>o,hasValidDragItems:()=>a,isValidFile:()=>r});let t=["application/pdf","text/markdown","text/plain","image/jpeg","image/png","image/gif","image/jpg","image/tiff","image/bmp","image/heic","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.ms-powerpoint","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","video/mp4","audio/mpeg","audio/wav","audio/x-wav","application/epub+zip"],n=[".pdf",".md",".txt",".jpeg",".jpg",".png",".gif",".tiff",".bmp",".heic",".pptx",".ppt",".doc",".docx",".mp4",".mp3",".wav",".epub"],r=e=>{var r;if(t.includes(e.type))return!0;let i=".".concat(null==(r=e.name.split(".").pop())?void 0:r.toLowerCase());return n.includes(i)},i=e=>{var t;let r=".".concat(null==(t=e.split(".").pop())?void 0:t.toLowerCase());return n.includes(r)},a=e=>{if(!e.types.includes("Files"))return!1;if(e.items&&e.items.length>0)for(let r=0;r<e.items.length;r++){let a=e.items[r];if("file"===a.kind){var n;let e=null==(n=a.webkitGetAsEntry)?void 0:n.call(a);if((null==e?void 0:e.isDirectory)||a.type&&t.includes(a.type)||(null==e?void 0:e.isFile)&&e.name&&i(e.name))return!0;if(a.getAsFile){let e=a.getAsFile();if(e&&(t.includes(e.type)||i(e.name)))return!0}}}return!1},o=e=>e.types.includes("Files")},301367:e=>{e.v({Text:"TreeItem-module__UmvCcW__Text",TreeItem:"TreeItem-module__UmvCcW__TreeItem",Wrapper:"TreeItem-module__UmvCcW__Wrapper",clone:"TreeItem-module__UmvCcW__clone"})},957998:e=>{"use strict";e.s({getStatusClassnames:()=>n});var t=e.i(289702);let n=e=>{let{isOverFolder:n,isSelected:r,isDragging:i,clone:a}=e;return(0,t.cn)("w-full justify-start text-foreground focus-visible:!outline-none focus-visible:!ring-0 focus-visible:ring-offset-0 hover:bg-muted",i&&"h-1 py-0 block bg-blue/10 [&>*]:hidden relative z-20",r&&"bg-blue/10 hover:bg-blue/10 outline-2 outline-background outline",n&&"bg-blue/10",a&&"border border-border shadow-feint bg-background")}},27409:e=>{"use strict";e.s({SortableTreeItem:()=>I});var t=e.i(290479),n=e.i(913756),r=e.i(230613),i=e.i(608294),a=e.i(381612),o=e.i(996481),s=e.i(397711),l=e.i(373150),u=e.i(525094),c=e.i(704255),d=e.i(980919),h=e.i(724648),p=e.i(592316),f=e.i(231512),m=e.i(762802),g=e.i(710176),y=e.i(75836),b=e.i(998145),x=e.i(223099),w=e.i(972899),k=e.i(885905),S=e.i(846580),_=e.i(658503),C=e.i(985132),A=e.i(732946),E=e.i(289702),T=e.i(301367),M=e.i(957998);function I(e){let{tree:I,depth:N,indentationWidth:D,clone:P,childCount:R,onCollapse:O,collapsed:j,projectedParentId:F}=e,{handleMouseEnter:L,handleMouseLeave:z}=(0,m.useLastHoveredSidebarGroup)(),{selectedItems:B,selectItem:U}=(0,g.useSelectedItems)(),{attributes:H,isDragging:W,listeners:V,setDraggableNodeRef:q,setDroppableNodeRef:G,transform:$,transition:K,isSorting:Y}=(0,n.useSortable)({id:I.id,data:I}),[X,Z]=(0,l.useState)(!1),[J,Q]=(0,l.useState)(!1),ee=(0,l.useCallback)(()=>{Z(!0),L(I.id)},[L,I.id]),et=(0,l.useCallback)(()=>{Z(!1),z()},[z]),en=(0,l.useCallback)(e=>{var t;if(e.metaKey||e.ctrlKey)return;if(e.shiftKey)return void U(I);let n=e.target;n.closest("a")||n.closest("button")||null==V||null==(t=V.onPointerDown)||t.call(V,e)},[U,I,V]),er=(0,l.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),null==O||O()},[O]),ei=(0,l.useMemo)(()=>X&&!J?j?o.ChevronRight:a.ChevronDown:(0,b.default)({type:I.type,collapsed:j}),[X,J,j,I.type]),ea=(0,s.useParams)(),eo={transform:r.CSS.Translate.toString($),transition:K},es=N*D,el=I.id===F&&"GROUP"===I.type,eu=I.id===(null==ea?void 0:ea.id),ec=B.some(e=>e.id===I.id),ed=(0,S.useIsMobile)(),{setShowLeftSidebar:eh}=(0,_.useLeftSidebar)(),[ep,ef]=(0,l.useState)(!1),{user:em}=(0,k.useAuth)(),{ingestFile:eg}=(0,f.default)(),{ingestCustomVideo:ev}=(0,p.default)(),{ingestCustomAudio:ey}=(0,h.default)(),eb=(0,i.useSetAtom)(C.addUploadingFilesAtom),ex=(0,i.useSetAtom)(C.updateUploadingFileAtom),ew=(0,l.useRef)(0),ek=P&&R&&R>0,eS=(0,l.useCallback)(e=>{"GROUP"===I.type&&(e.preventDefault(),e.stopPropagation(),(0,A.hasValidDragItems)(e.dataTransfer)&&(ew.current++,1===ew.current&&ef(!0)))},[I.type]),e_=(0,l.useCallback)(e=>{"GROUP"===I.type&&(e.preventDefault(),e.stopPropagation())},[I.type]),eC=(0,l.useCallback)(e=>{"GROUP"===I.type&&(e.preventDefault(),e.stopPropagation(),ew.current--,0===ew.current&&ef(!1))},[I.type]),eA=async e=>{if("GROUP"!==I.type||(e.preventDefault(),e.stopPropagation(),ew.current=0,ef(!1),!em))return;let n=Array.from(e.dataTransfer.files);if(0===n.length)return void u.toast.info("No valid files found");let r=eb(n.map(e=>({name:e.name})));u.toast.custom(e=>(0,t.jsx)(d.FileUploadToastContent,{toastId:e}),{id:d.UPLOAD_TOAST_ID,duration:1/0,dismissible:!1,position:"bottom-left",className:"!px-0 !py-0 bg-popover border-border-primary !rounded-6"}),Promise.race(n.map(async(e,t)=>{let n=r[t];if(!n)return console.error("Mismatch between input files and state files"),null;try{let t=null;if(t="video/mp4"===e.type?await ev([e],!1):e.type.startsWith("audio/")?await ey([e],!1):await eg(e,I.id))return ex({id:n.id,status:"IN_PROGRESS",chatbotId:t}),t;return ex({id:n.id,status:"FAILED",errorMessage:"File could not be processed."}),null}catch(r){console.error("Error ingesting file:",e.name,r);let t=r instanceof Error?r.message:"Upload failed";return ex({id:n.id,status:"FAILED",errorMessage:t}),null}}).map(e=>e.catch(()=>null))).catch(()=>null)};return(0,t.jsx)("div",{onMouseEnter:ee,onMouseLeave:et,className:(0,E.cn)(T.default.Wrapper,"touch-manipulation","select-none","GROUP"===I.type&&"relative rounded-4",ep&&"GROUP"===I.type&&"bg-blue/10","GROUP"===I.type&&"before:absolute before:inset-0 before:rounded-4 before:border-2 before:border-dashed before:border-transparent before:pointer-events-none",ep&&"GROUP"===I.type&&"before:border-blue"),ref:"team"!==I.id?G:null,...H,onDragEnter:eS,onDragOver:e_,onDragLeave:eC,onDrop:eA,children:(0,t.jsxs)("div",{className:"flex flex-col",ref:q,style:eo,...V&&{...V,onPointerDown:en},children:[(0,t.jsx)("div",{style:{paddingLeft:P?"0px":"".concat(es,"px")},className:(0,E.cn)("relative",eu&&!Y&&"bg-control-primary rounded-4","hover:bg-control-primary rounded-4"),children:(0,t.jsx)(x.HoverPrefetchLink,{href:"/b/".concat(I.id),onClick:e=>{e.shiftKey&&(e.preventDefault(),e.stopPropagation()),ed&&eh(!1)},children:(0,t.jsxs)(c.Button,{as:"div",size:"xs",variant:"sidebar",className:(0,E.cn)((0,M.getStatusClassnames)({isOverFolder:el,isSelected:ec,isDragging:W,clone:P,tree:I}),"hover:pr-10",J&&"pr-10"),leadingIcon:(0,t.jsx)(w.Icon,{onClick:er,className:"flex-shrink-0 z-10 hover:bg-accent rounded-2",as:ei}),trailingIcon:(0,t.jsx)(y.default,{isActive:X,tree:I,onSidebarOpenChange:Q}),trailingIconClassName:"ml-4",children:[!X&&"WORKSPACE"===I.type&&(0,t.jsx)("div",{className:"w-[15px] flex items-center justify-center mr-2",children:(0,t.jsx)("span",{className:"size-[9px] rounded-full bg-text-tertiary"})}),(0,t.jsx)("span",{className:(0,E.cn)("text-ellipsis text-text-primary select-none whitespace-nowrap items-center overflow-hidden","pr-2"),children:""===I.name?"Untitled":I.name})]})})}),ek?(0,t.jsx)("span",{className:"absolute -top-4 -right-4  bg-blue rounded-[6px] flex items-center justify-center h-7 w-7 z-20 text-xs",children:R}):null,0===R&&!j&&!P&&!W&&(0,t.jsx)("span",{style:{paddingLeft:es+16},className:"text-text-secondary text-sm h-[28px] flex items-center  px-7 ",children:"No subfolders"})]})})}},762802:e=>{"use strict";e.s({DragSidebar:()=>k,useLastHoveredSidebarGroup:()=>f,useSelectedIds:()=>g});var t=e.i(11968),n=e.i(290479),r=e.i(52333),i=e.i(37e4),a=e.i(852951),o=e.i(27409),s=e.i(691208),l=e.i(493240),u=e.i(647968),c=e.i(608294),d=e.i(373150),h=e.i(784445);let p=(0,u.atom)(null),f=()=>{let e=(0,c.useSetAtom)(p);return{handleMouseEnter:(0,d.useCallback)(t=>{e(t)},[e]),handleMouseLeave:(0,d.useCallback)(()=>{e(null)},[e])}},m=(0,u.atom)([]),g=()=>({setSelectedIds:(0,c.useSetAtom)(m)}),y=e=>{let{children:t,activeId:r}=e,{data:i}=(0,a.useWorkspace)(),u=(0,d.useMemo)(()=>(null==i?void 0:i.entities)||[],[i]),c=(0,d.useMemo)(()=>{if(!r)return null;let e=e=>{var t;return{...e,children:null!=(t=e.children)?t:[],index:0,parentId:null,collapsed:!1}},t=u.find(e=>e.id===r);if(t)return e({...t,depth:0});for(let t of u)if(t.chats){let n=t.chats.find(e=>e.id===r);if(n)return e({...n,depth:1,type:"CHAT"})}return null},[r,u]);return(0,n.jsxs)(n.Fragment,{children:[t,(0,h.createPortal)((0,n.jsx)(s.DragOverlay,{modifiers:[l.snapCenterToCursor],className:"pointer-events-none",dropAnimation:null,children:c&&"WORKSPACE"!==c.type&&"CHAT"!==c.type?(0,n.jsx)("div",{className:"relative max-w-[200px]",children:(0,n.jsx)(o.SortableTreeItem,{tree:c,depth:c.depth||0,clone:!0,childCount:"chats"in c&&Array.isArray(c.chats)?c.chats.length:0,indentationWidth:16})}):null}),document.body)]})},b=e=>{let{nativeEvent:t}=e,n=t.target;for(;n;){var r;if(null==(r=n.dataset)?void 0:r.noDnd)return!1;n=n.parentElement}return!0};class x extends s.MouseSensor{}(0,t._)(x,"activators",[{eventName:"onMouseDown",handler:b}]);class w extends s.TouchSensor{}(0,t._)(w,"activators",[{eventName:"onTouchStart",handler:b}]);let k=e=>{let{children:t}=e,[o,l]=(0,d.useState)(null),u=(0,s.useSensor)(x,{activationConstraint:{distance:5}}),h=(0,s.useSensor)(w,{activationConstraint:{delay:500,tolerance:8}}),{mutate:f}=(0,i.useMoveToFolder)(),{data:g}=(0,a.useWorkspace)(),b=(0,r.useConfirmationStore)(e=>e.openConfirmation),k=(0,c.useAtomValue)(m),S=(0,c.useAtomValue)(p),_=(0,c.useSetAtom)(p),C=(0,s.useSensors)(u,h);return(0,n.jsx)(s.DndContext,{measuring:{draggable:{measure:e=>e.getBoundingClientRect()}},sensors:C,onDragStart:e=>{l(e.active.id)},onDragOver:e=>{if(e.over&&e.over.id!==e.active.id){let t=null==g?void 0:g.entities.find(t=>{var n;return t.id===(null==(n=e.over)?void 0:n.id)});t&&"GROUP"===t.type&&_(e.over.id)}else _(null)},onDragEnd:()=>{if(S&&g){let e=(k.length>0?k:o?[o]:[]).filter(e=>{let t=g.entities.find(t=>t.id===e);return t&&"CHAT"!==t.type});if(e.length>0){let t=g.entities.find(e=>e.id===S),n=g.entities.filter(t=>e.includes(t.id)),r=n.map(e=>e.groupId||null);if(r.every(e=>e===r[0])&&r[0]===S)return;let i=(null==t?void 0:t.teamId)||null,a=n.some(e=>{let t=e.groupId?g.entities.find(t=>t.id===e.groupId):null;return((null==t?void 0:t.teamId)||null)&&!i}),o=n.some(e=>{let t=e.groupId?g.entities.find(t=>t.id===e.groupId):null;return!(null==t?void 0:t.teamId)&&i}),s=()=>{f({ids:e,folderId:S,teamId:i})};a?b({title:"Make these items private?",description:"Only you will be able to access and edit these items and any nested content.",actionLabel:"Confirm",onAction:s,cancelLabel:"Cancel",onCancel:()=>{}}):o?b({title:"Share items with team?",description:"Anyone in your team will be able to access and edit these items and any nested content.",actionLabel:"Confirm",onAction:s,cancelLabel:"Cancel",onCancel:()=>{}}):s()}}l(null),_(null)},onDragCancel:()=>{l(null),_(null)},children:(0,n.jsx)(y,{activeId:o,children:t})})}},943965:e=>{"use strict";e.s({ChatbotTableSelectSync:()=>r});var t=e.i(762802),n=e.i(373150);let r=e=>{let{table:r}=e,{setSelectedIds:i}=(0,t.useSelectedIds)();return(0,n.useEffect)(()=>{i(r.getFilteredSelectedRowModel().rows.map(e=>e.original.id))},[r.getFilteredSelectedRowModel().rows]),null}},388470:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("rows-2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 12h18",key:"1i2n21"}]])},132925:e=>{"use strict";e.s({Rows2:()=>t.default});var t=e.i(388470)},212937:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("rows-3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M21 9H3",key:"1338ky"}],["path",{d:"M21 15H3",key:"9uk58r"}]])},361790:e=>{"use strict";e.s({Rows3:()=>t.default});var t=e.i(212937)},616134:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]])},670770:e=>{"use strict";e.s({Table:()=>t.default});var t=e.i(616134)},301669:e=>{"use strict";e.s({SortableList:()=>u});var t=e.i(290479),n=e.i(874133),r=e.i(945941),i=e.i(373150),a=e.i(704255),o=e.i(972899),s=e.i(986110),l=e.i(289702);function u(e){let{items:u,onReorder:c,onToggleVisibility:d,renderLabel:h,className:p}=e,[f,m]=i.useState(null),[g,y]=i.useState(!1),b=(e,t,n)=>{var r,i,a;let{key:o}=e;if(" "===o&&n){m(u[t].id),y(!0);return}if("ArrowUp"===o||"ArrowDown"===o){e.preventDefault();let i=t+("ArrowUp"===o?-1:1);if(i>=0&&i<u.length){let e=u[i],t=h?h(e):null!=(r=e.specialLabel)?r:e.label,a=document.querySelector(n?'button[aria-label="Drag '.concat(t,'"]'):'button[aria-label="Toggle visibility for '.concat(t,'"]'));a&&a.focus()}}else if("ArrowLeft"!==o||n){if("ArrowRight"===o&&n){e.preventDefault();let n=h?h(u[t]):null!=(a=u[t].specialLabel)?a:u[t].label,r=document.querySelector('button[aria-label="Toggle visibility for '.concat(n,'"]'));r&&r.focus()}}else{e.preventDefault();let n=h?h(u[t]):null!=(i=u[t].specialLabel)?i:u[t].label,r=document.querySelector('button[aria-label="Drag '.concat(n,'"]'));r&&r.focus()}},x=function(e){var i;let c=!(arguments.length>1)||void 0===arguments[1]||arguments[1],p=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,f=h?h(e):null!=(i=e.specialLabel)?i:e.label,m=void 0!==e.isVisible,g=u.filter(e=>e.isVisible),y=e.isVisible&&1===g.length;return(0,t.jsxs)("div",{className:"relative",tabIndex:-1,children:[c&&(0,t.jsx)(s.SortableItemHandle,{asChild:!0,children:(0,t.jsx)("button",{type:"button",className:"absolute rounded-2 left-2 top-0 bottom-0 w-8 flex items-center justify-center cursor-grab active:cursor-grabbing z-10 focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 rounded","aria-label":"Drag ".concat(f),onKeyDown:e=>b(e,p,!0),children:(0,t.jsx)(o.Icon,{as:r.GripHorizontal,className:"size-7 text-text-secondary"})})}),(0,t.jsx)(a.Button,{variant:"ghost",size:"medium",className:(0,l.cn)("w-full justify-start text-left font-medium py-2 !pl-10 flex items-center  flex-1",e.isSpecial&&"text-text-secondary",d&&!y&&"cursor-pointer hover:bg-accent rounded-4 px-2 py-1",d&&y&&"cursor-not-allowed rounded-4 px-2 py-1"),leadingIcon:c?void 0:(0,t.jsx)(o.Icon,{as:r.GripHorizontal,className:"size-7 text-text-secondary"}),trailingIcon:m?(0,t.jsx)(o.Icon,{as:n.Check,className:(0,l.cn)("size-7 shrink-0 text-blue",e.isVisible?"opacity-100":"opacity-0")}):void 0,onClick:()=>{d&&d(e)},disabled:!d,onKeyDown:e=>b(e,p,!1),"aria-label":"Toggle visibility for ".concat(f),children:f})]},e.id)};return(0,t.jsx)("div",{className:(0,l.cn)("flex flex-col",p),children:(0,t.jsx)(s.Sortable,{value:u,onValueChange:e=>{c(e),f&&g&&setTimeout(()=>{let t=e.find(e=>e.id===f);if(t){var n;let e=h?h(t):null!=(n=t.specialLabel)?n:t.label,r=document.querySelector('button[aria-label="Toggle visibility for '.concat(e,'"]'));r&&r.focus()}m(null),y(!1)},0)},getItemValue:e=>e.id,children:(0,t.jsx)(s.SortableContent,{asChild:!0,children:(0,t.jsx)("div",{className:"flex flex-col p-2",children:u.map((e,n)=>(0,t.jsx)(s.SortableItem,{value:e.id,asChild:!0,children:x(e,!0,n)},e.id))})})})})}},17522:e=>{"use strict";e.s({tableColumnOrderAtomFamily:()=>s,tableColumnSizingAtomFamily:()=>l,tableColumnVisibilityAtomFamily:()=>a,tableFiltersAtomFamily:()=>r,tableSortingAtomFamily:()=>i,tableViewTypeAtomFamily:()=>o});var t=e.i(227348);let n={filters:[],sorting:[],columnVisibility:{},viewType:"table"};(0,t.atomFamily)(e=>(0,t.atomWithStorage)("chatbot-table-state-".concat(e),n));let r=(0,t.atomFamily)(e=>(0,t.atomWithStorage)("chatbot-table-filters-".concat(e),[])),i=(0,t.atomFamily)(e=>(0,t.atomWithStorage)("chatbot-table-sorting-".concat(e),[])),a=(0,t.atomFamily)(e=>(0,t.atomWithStorage)("chatbot-table-visibility-v2-".concat(e),{published:!1,folder:!1,tags:!1,publication:!1,docMetadataurl:!1,volume:!1,issue:!1,pages:!1,doi:!1,issn:!1,isbn:!1,url:!1,abstract:!1,citationCount:!1})),o=(0,t.atomFamily)(e=>(0,t.atomWithStorage)("chatbot-table-view-".concat(e),"table")),s=(0,t.atomFamily)(e=>(0,t.atomWithStorage)("chatbot-table-column-order-".concat(e),[])),l=(0,t.atomFamily)(e=>(0,t.atomWithStorage)("chatbot-table-column-sizing-".concat(e),{}))},819403:e=>{"use strict";e.s({useTableState:()=>r});var t=e.i(608294),n=e.i(17522);let r=e=>{let r=(0,n.tableFiltersAtomFamily)(e),i=(0,n.tableSortingAtomFamily)(e),a=(0,n.tableColumnVisibilityAtomFamily)(e),o=(0,n.tableViewTypeAtomFamily)(e),s=(0,n.tableColumnOrderAtomFamily)(e),l=(0,n.tableColumnSizingAtomFamily)(e),[u,c]=(0,t.useAtom)(r),[d,h]=(0,t.useAtom)(i),[p,f]=(0,t.useAtom)(a),[m,g]=(0,t.useAtom)(o),[y,b]=(0,t.useAtom)(s),[x,w]=(0,t.useAtom)(l);return{filters:u,sorting:d,columnVisibility:p,viewType:m,columnOrder:y,columnSizing:x,setFilters:c,setSorting:h,setColumnVisibility:f,setViewType:g,setColumnOrder:b,setColumnSizing:w}}},816611:e=>{"use strict";e.s({HomepageViewSelect:()=>g});var t=e.i(290479),n=e.i(647968),r=e.i(608294),i=e.i(132925),a=e.i(361790),o=e.i(670770),s=e.i(373150),l=e.i(704255),u=e.i(972899),c=e.i(303652),d=e.i(301669),h=e.i(252390),p=e.i(289702),f=e.i(819403);let m=(0,n.atom)("split"),g=e=>{var n;let{table:g,tableId:y}=e,[b,x]=(0,s.useState)(!1),{track:w}=(0,h.default)(),{homepageViewType:k,setHomePageViewType:S}=(()=>{let[e,t]=(0,r.useAtom)(m);return{homepageViewType:e,setHomePageViewType:t}})(),{columnOrder:_,setColumnOrder:C}=(0,f.useTableState)(y),A=(0,s.useMemo)(()=>g?g.getAllColumns().filter(e=>void 0!==e.accessorFn&&e.getCanHide()):[],[g]),E=null!=(n=null==g?void 0:g.getState().columnVisibility)?n:{},T=(0,s.useMemo)(()=>{if(!A.length)return[];if(!_||0===_.length)return A;let e=[...A];return e.sort((e,t)=>{let n=_.indexOf(e.id),r=_.indexOf(t.id);return -1===n?1:-1===r?-1:n-r}),e},[A,_]),M=(0,s.useMemo)(()=>T.map(e=>{var t,n;return{id:e.id,label:null!=(n=null==(t=e.columnDef.meta)?void 0:t.label)?n:e.id,isVisible:e.getIsVisible(),column:e}}),[T,E]);return(0,t.jsxs)(c.Popover,{onOpenChange:x,open:b,children:[(0,t.jsxs)(c.PopoverTrigger,{className:(0,l.buttonVariants)({variant:"outline",size:"smaller",className:"!font-medium gap-2"}),children:[(0,t.jsx)(u.Icon,{as:a.Rows3}),(0,t.jsx)("span",{children:"View settings"})]}),(0,t.jsxs)(c.PopoverContent,{align:"start",side:"bottom",className:"p-[10px] [@media(max-height:850px)]:max-h-[300px] overflow-auto flex flex-col gap-7 max-h-[450px]",children:[(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsxs)("div",{onClick:()=>{S("table"),x(!1)},className:(0,p.cn)("flex flex-col min-h-16 gap-2 text-sm items-center justify-center hover:bg-accent cursor-pointer border rounded-4 w-full","table"===k&&"bg-accent"),children:[(0,t.jsx)(u.Icon,{as:o.Table}),(0,t.jsx)("span",{children:"Table"})]}),(0,t.jsxs)("div",{onClick:()=>{S("split"),x(!1)},className:(0,p.cn)("flex flex-col items-center gap-2 text-sm justify-center hover:bg-accent cursor-pointer border rounded-4 w-full","split"===k&&"bg-accent"),children:[(0,t.jsx)(u.Icon,{as:i.Rows2}),(0,t.jsx)("span",{children:"Split"})]})]}),("table"===k||"split"===k)&&M.length>0&&(0,t.jsxs)("div",{className:"flex flex-col gap-2 overflow-y-auto",children:[(0,t.jsx)("p",{className:"text-text-secondary text-sm",children:"Table options"}),(0,t.jsx)(d.SortableList,{items:M,onReorder:e=>{g&&C(e.map(e=>e.id))},onToggleVisibility:e=>{let t=M.filter(e=>e.isVisible);e.isVisible&&1===t.length||(e.column.toggleVisibility(!e.column.getIsVisible()),w("library_column_added",{columnId:e.column.id,visible:!e.column.getIsVisible()}))}})]})]})]})}},697827:e=>{"use strict";e.s({TablePlaceholder:()=>d});var t=e.i(290479),n=e.i(704255),r=e.i(972899),i=e.i(658503),a=e.i(487310),o=e.i(289702),s=e.i(884575),l=e.i(240824),u=e.i(906530),c=e.i(935989);let d=e=>{let{type:d="folder"}=e,{openMenu:h}=(0,a.usePlusMenuStore)(),{setShowLeftSidebar:p}=(0,i.useLeftSidebar)(),f=(()=>{switch(d){case"library":return{icon:s.FolderIcon,title:"Your library is empty",description:"Click to add files or drag\nand drop files here",showButton:!0};case"filtered":return{icon:l.SearchIcon,title:"Nothing found",description:"Try adjusting your search or filter criteria",showButton:!1};default:return{icon:s.FolderIcon,title:"This folder is empty",description:"Click to add files or drag\nand drop files here",showButton:!0}}})();return(0,t.jsxs)("div",{className:"relative w-full h-full overflow-hidden",children:[(0,t.jsx)("div",{className:"flex gap-4 w-full justify-between py-7",children:Array.from({length:5}).map((e,n)=>(0,t.jsxs)("div",{className:(0,o.cn)("flex flex-col gap-6 px-7",0===n&&"w-[40%]"),children:[(0,t.jsx)(c.Skeleton,{className:"h-8 w-36 rounded-4"}),Array.from({length:16}).map((e,r)=>n>0&&(r+n)%3==0?(0,t.jsx)("div",{className:"h-8"},r):0===n?(0,t.jsxs)("div",{className:(0,o.cn)("flex gap-7",r>2&&r<5&&"pl-9"),children:[(0,t.jsx)(c.Skeleton,{className:"h-8 w-8 rounded-4 flex-shrink-0"}),(0,t.jsx)(c.Skeleton,{className:(0,o.cn)("h-8  rounded-4"),style:{width:"calc(100% - ".concat(r%3*40,"%)")}})]},r):(0,t.jsx)(c.Skeleton,{style:{width:"calc(100% - ".concat((r+n)%3*20+10*n,"px)")},className:"h-8 rounded-4"},r))]},n))}),(0,t.jsx)("div",{className:"flex justify-center items-top absolute inset-0 z-10 w-full bg-gradient-to-b from-transparent via-background/50 to-background from-0% via-0% to-50% h-full",children:(0,t.jsxs)("div",{className:"flex flex-col items-center max-w-[200px] mt-24",children:[(0,t.jsx)(r.Icon,{as:f.icon,size:"xl",className:"mb-4"}),(0,t.jsx)("p",{children:f.title}),f.description&&(0,t.jsx)("p",{className:"text-text-secondary text-sm text-center mb-7",children:(0,t.jsx)(u.default,{children:f.description})}),f.showButton&&(0,t.jsx)(n.Button,{size:"xs",onClick:()=>{p(!0),setTimeout(()=>{h()},250)},children:"Create or import files"})]})})]})}},664537:e=>{"use strict";e.s({addDays:()=>r});var t=e.i(163015),n=e.i(21070);function r(e,r){let i=(0,t.toDate)(e);return isNaN(r)?(0,n.constructFrom)(e,NaN):(r&&i.setDate(i.getDate()+r),i)}},47535:e=>{"use strict";e.s({isWithinInterval:()=>n});var t=e.i(163015);function n(e,n){let r=+(0,t.toDate)(e),[i,a]=[+(0,t.toDate)(n.start),+(0,t.toDate)(n.end)].sort((e,t)=>e-t);return r>=i&&r<=a}},429478:e=>{"use strict";e.s({useClientSideFilters:()=>s});var t=e.i(664537),n=e.i(93744),r=e.i(47535),i=e.i(98935),a=e.i(373150),o=e.i(430266);let s=e=>{let{items:s,filters:l}=e;return{filteredItems:(0,a.useMemo)(()=>l&&0!==l.length?s.filter(e=>l.every(a=>((e,a)=>{let{id:s,operator:l,value:u,variant:c}=a,d=s.split(".").reduce((e,t)=>null==e?void 0:e[t],e);return("isEmpty"===l||"isNotEmpty"===l||null!=d)&&(0,o.match)(l).with("like",()=>Array.isArray(d)?"string"==typeof u&&d.join(" ").toLowerCase().includes(u.toLowerCase()):"text"===c&&"string"==typeof d&&"string"==typeof u&&d.toLowerCase().includes(u.toLowerCase())).with("notLike",()=>"text"===c&&"string"==typeof d&&"string"==typeof u&&!d.toLowerCase().includes(u.toLowerCase())).with("eq",()=>{if("boolean"==typeof d&&"string"==typeof u)return d===("true"===u);if("date"===c||"dateRange"===c){if(!d||!u)return!1;let e=new Date(d),t=(0,i.startOfDay)(new Date(Number(u))),a=(0,n.endOfDay)(new Date(Number(u)));return(0,r.isWithinInterval)(e,{start:t,end:a})}return d===u}).with("ne",()=>{if("boolean"==typeof d&&"string"==typeof u)return d!==("true"===u);if("date"===c||"dateRange"===c){if(!d||!u)return!0;let e=new Date(d),t=(0,i.startOfDay)(new Date(Number(u))),a=(0,n.endOfDay)(new Date(Number(u)));return!(0,r.isWithinInterval)(e,{start:t,end:a})}return d!==u}).with("inArray",()=>!!Array.isArray(u)&&0===u.length||(Array.isArray(d)?Array.isArray(u)&&d.some(e=>u.includes(e)):Array.isArray(u)&&u.includes(d))).with("notInArray",()=>Array.isArray(d)?Array.isArray(u)&&!d.some(e=>u.includes(e)):Array.isArray(u)&&!u.includes(d)).with("lt",()=>!!d&&null!=u&&("number"===c||"range"===c?Number(d)<Number(u):"date"===c&&new Date(d)<(0,n.endOfDay)(new Date(Number(u))))).with("lte",()=>!!d&&null!=u&&("number"===c||"range"===c?Number(d)<=Number(u):"date"===c&&new Date(d)<=(0,n.endOfDay)(new Date(Number(u))))).with("gt",()=>!!d&&null!=u&&("number"===c||"range"===c?Number(d)>Number(u):"date"===c&&new Date(d)>(0,i.startOfDay)(new Date(Number(u))))).with("gte",()=>!!d&&null!=u&&("number"===c||"range"===c?Number(d)>=Number(u):"date"===c&&new Date(d)>=(0,i.startOfDay)(new Date(Number(u))))).with("isBetween",()=>{if(!d||!Array.isArray(u)||2!==u.length)return!1;let[e,t]=u;if("date"===c||"dateRange"===c){let a=new Date(d),o=e?(0,i.startOfDay)(new Date(Number(e))):null,s=t?(0,n.endOfDay)(new Date(Number(t))):null;return o&&s?(0,r.isWithinInterval)(a,{start:o,end:s}):o?a>=o:!s||a<=s}if("number"===c||"range"===c){let n=Number(d),r=null!==e&&""!==e?Number(e):null,i=null!==t&&""!==t?Number(t):null;return null!==r&&null!==i?n>=r&&n<=i:null!==r?n>=r:null===i||n<=i}return!1}).with("isRelativeToToday",()=>{if(("date"===c||"dateRange"===c)&&"string"==typeof u&&d){var e;let a,s,l=new Date(d),c=new Date,[h,p]=null!=(e=u.split(" "))?e:[],f=Number.parseInt(h);return!Number.isNaN(f)&&!!p&&(0,o.match)(p).with("days",()=>(a=(0,i.startOfDay)((0,t.addDays)(c,f)),s=(0,n.endOfDay)(a),(0,r.isWithinInterval)(l,{start:a,end:s}))).with("weeks",()=>(a=(0,i.startOfDay)((0,t.addDays)(c,7*f)),s=(0,n.endOfDay)((0,t.addDays)(a,6)),(0,r.isWithinInterval)(l,{start:a,end:s}))).with("months",()=>(a=(0,i.startOfDay)((0,t.addDays)(c,30*f)),s=(0,n.endOfDay)((0,t.addDays)(a,29)),(0,r.isWithinInterval)(l,{start:a,end:s}))).otherwise(()=>!1)}return!1}).with("isEmpty",()=>!!(null==d||""===d||Array.isArray(d)&&0===d.length)||"object"==typeof d&&0===Object.keys(d).length).with("isNotEmpty",()=>!(null==d||""===d||Array.isArray(d)&&0===d.length)&&("object"!=typeof d||null===d||0!==Object.keys(d).length)).otherwise(()=>!0)})(e,a))):s,[s,l])}}},977751:e=>{"use strict";e.s({isSameDay:()=>n});var t=e.i(98935);function n(e,n){return+(0,t.startOfDay)(e)==+(0,t.startOfDay)(n)}},777772:e=>{"use strict";e.s({isToday:()=>r});var t=e.i(350684),n=e.i(977751);function r(e){return(0,n.isSameDay)(e,(0,t.constructNow)(e))}},914233:e=>{"use strict";e.s({subDays:()=>n});var t=e.i(664537);function n(e,n){return(0,t.addDays)(e,-n)}},216897:e=>{"use strict";e.s({isYesterday:()=>i});var t=e.i(350684),n=e.i(977751),r=e.i(914233);function i(e){return(0,n.isSameDay)(e,(0,r.subDays)((0,t.constructNow)(e),1))}},534104:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("text",[["path",{d:"M15 18H3",key:"olowqp"}],["path",{d:"M17 6H3",key:"16j9eg"}],["path",{d:"M21 12H3",key:"2avoz0"}]])},605284:e=>{"use strict";e.s({Text:()=>t.default});var t=e.i(534104)},480988:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},796629:e=>{"use strict";e.s({EyeOff:()=>t.default});var t=e.i(480988)},701495:e=>{"use strict";e.s({authorsDisplayModeAtom:()=>t});let t=(0,e.i(227348).atomWithStorage)("authors-display-mode","et-al",{getItem:e=>{try{let t=localStorage.getItem(e);if(!t)return"et-al";let n=JSON.parse(t);return"all-authors"===n?"all-authors":"et-al"}catch(e){return"et-al"}},setItem:(e,t)=>{try{localStorage.setItem(e,JSON.stringify(t))}catch(e){}},removeItem:e=>{try{localStorage.removeItem(e)}catch(e){}}})},122714:e=>{"use strict";e.s({DataTableColumnHeader:()=>p});var t=e.i(290479),n=e.i(608294),r=e.i(381612),i=e.i(688862),a=e.i(116142),o=e.i(796629),s=e.i(448068),l=e.i(457910),u=e.i(701495),c=e.i(289702),d=e.i(704255),h=e.i(972899);function p(e){let{column:p,title:f,className:m,...g}=e,[y,b]=(0,n.useAtom)(u.authorsDisplayModeAtom);return p.getCanSort()||p.getCanHide()?(0,t.jsxs)(s.DropdownMenu,{children:[(0,t.jsx)(s.DropdownMenuTrigger,{className:(0,c.cn)(m),asChild:!0,...g,children:(0,t.jsx)(d.Button,{variant:"ghost",className:"text-sm w-fit font-semibold truncate -ml-2 gap-1  h-11 text-text-secondary",loadingClassName:"flex flex-col items-start",size:"xs",children:f})}),(0,t.jsxs)(s.DropdownMenuContent,{align:"start",className:"w-[264px] text-text-primary",children:[p.getCanSort()&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(s.DropdownMenuCheckboxItem,{checked:"asc"===p.getIsSorted(),onClick:()=>p.toggleSorting(!1),children:[(0,t.jsx)(h.Icon,{as:i.ChevronUp}),"Sort Ascending"]}),(0,t.jsxs)(s.DropdownMenuCheckboxItem,{checked:"desc"===p.getIsSorted(),onClick:()=>p.toggleSorting(!0),children:[(0,t.jsx)(h.Icon,{as:r.ChevronDown}),"Sort Descending"]})]}),"Authors"===f&&(0,t.jsxs)(s.DropdownMenuSub,{children:[(0,t.jsxs)(s.DropdownMenuSubTrigger,{children:[(0,t.jsx)(h.Icon,{as:a.Eye}),"Display"]}),(0,t.jsxs)(s.DropdownMenuSubContent,{children:[(0,t.jsx)(s.DropdownMenuCheckboxItem,{checked:"all-authors"===y,onClick:()=>b("all-authors"),className:"text-text-primary",children:"All authors"}),(0,t.jsxs)(l.Tooltip,{children:[(0,t.jsx)(l.TooltipTrigger,{asChild:!0,children:(0,t.jsx)(s.DropdownMenuCheckboxItem,{checked:"et-al"===y,onClick:()=>b("et-al"),className:"text-text-primary",children:"Et al."})}),(0,t.jsxs)(l.TooltipContent,{side:"right",children:[(0,t.jsx)("div",{children:"Et al. is a latin abbreviation"}),(0,t.jsx)("div",{children:'meaning "and others".'})]})]})]})]}),p.getCanHide()&&(0,t.jsxs)(s.DropdownMenuCheckboxItem,{checked:!p.getIsVisible(),onClick:()=>p.toggleVisibility(!1),children:[(0,t.jsx)(h.Icon,{as:o.EyeOff}),"Hide"]})]})]}):(0,t.jsx)("div",{className:(0,c.cn)(m),children:f})}},128758:e=>{"use strict";e.s({Corner:()=>K,Root:()=>G,ScrollAreaScrollbar:()=>k,ScrollAreaThumb:()=>P,Viewport:()=>$});var t=e.i(373150),n=e.i(421349),r=e.i(629103),i=e.i(215836),a=e.i(28537),o=e.i(281897),s=e.i(553955),l=e.i(291327),u=e.i(244299),c=e.i(777787),d=e.i(290479),h="ScrollArea",[p,f]=(0,i.createContextScope)(h),[m,g]=p(h),y=t.forwardRef((e,r)=>{let{__scopeScrollArea:i,type:o="hover",dir:l,scrollHideDelay:u=600,...c}=e,[h,p]=t.useState(null),[f,g]=t.useState(null),[y,b]=t.useState(null),[x,w]=t.useState(null),[k,S]=t.useState(null),[_,C]=t.useState(0),[A,E]=t.useState(0),[T,M]=t.useState(!1),[I,N]=t.useState(!1),D=(0,a.useComposedRefs)(r,e=>p(e)),P=(0,s.useDirection)(l);return(0,d.jsx)(m,{scope:i,type:o,dir:P,scrollHideDelay:u,scrollArea:h,viewport:f,onViewportChange:g,content:y,onContentChange:b,scrollbarX:x,onScrollbarXChange:w,scrollbarXEnabled:T,onScrollbarXEnabledChange:M,scrollbarY:k,onScrollbarYChange:S,scrollbarYEnabled:I,onScrollbarYEnabledChange:N,onCornerWidthChange:C,onCornerHeightChange:E,children:(0,d.jsx)(n.Primitive.div,{dir:P,...c,ref:D,style:{position:"relative","--radix-scroll-area-corner-width":_+"px","--radix-scroll-area-corner-height":A+"px",...e.style}})})});y.displayName=h;var b="ScrollAreaViewport",x=t.forwardRef((e,r)=>{let{__scopeScrollArea:i,children:o,nonce:s,...l}=e,u=g(b,i),c=t.useRef(null),h=(0,a.useComposedRefs)(r,c,u.onViewportChange);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),(0,d.jsx)(n.Primitive.div,{"data-radix-scroll-area-viewport":"",...l,ref:h,style:{overflowX:u.scrollbarXEnabled?"scroll":"hidden",overflowY:u.scrollbarYEnabled?"scroll":"hidden",...e.style},children:(0,d.jsx)("div",{ref:u.onContentChange,style:{minWidth:"100%",display:"table"},children:o})})]})});x.displayName=b;var w="ScrollAreaScrollbar",k=t.forwardRef((e,n)=>{let{forceMount:r,...i}=e,a=g(w,e.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:s}=a,l="horizontal"===e.orientation;return t.useEffect(()=>(l?o(!0):s(!0),()=>{l?o(!1):s(!1)}),[l,o,s]),"hover"===a.type?(0,d.jsx)(S,{...i,ref:n,forceMount:r}):"scroll"===a.type?(0,d.jsx)(_,{...i,ref:n,forceMount:r}):"auto"===a.type?(0,d.jsx)(C,{...i,ref:n,forceMount:r}):"always"===a.type?(0,d.jsx)(A,{...i,ref:n}):null});k.displayName=w;var S=t.forwardRef((e,n)=>{let{forceMount:i,...a}=e,o=g(w,e.__scopeScrollArea),[s,l]=t.useState(!1);return t.useEffect(()=>{let e=o.scrollArea,t=0;if(e){let n=()=>{window.clearTimeout(t),l(!0)},r=()=>{t=window.setTimeout(()=>l(!1),o.scrollHideDelay)};return e.addEventListener("pointerenter",n),e.addEventListener("pointerleave",r),()=>{window.clearTimeout(t),e.removeEventListener("pointerenter",n),e.removeEventListener("pointerleave",r)}}},[o.scrollArea,o.scrollHideDelay]),(0,d.jsx)(r.Presence,{present:i||s,children:(0,d.jsx)(C,{"data-state":s?"visible":"hidden",...a,ref:n})})}),_=t.forwardRef((e,n)=>{var i;let{forceMount:a,...o}=e,s=g(w,e.__scopeScrollArea),l="horizontal"===e.orientation,u=V(()=>p("SCROLL_END"),100),[h,p]=(i={hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}},t.useReducer((e,t)=>{let n=i[e][t];return null!=n?n:e},"hidden"));return t.useEffect(()=>{if("idle"===h){let e=window.setTimeout(()=>p("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(e)}},[h,s.scrollHideDelay,p]),t.useEffect(()=>{let e=s.viewport,t=l?"scrollLeft":"scrollTop";if(e){let n=e[t],r=()=>{let r=e[t];n!==r&&(p("SCROLL"),u()),n=r};return e.addEventListener("scroll",r),()=>e.removeEventListener("scroll",r)}},[s.viewport,l,p,u]),(0,d.jsx)(r.Presence,{present:a||"hidden"!==h,children:(0,d.jsx)(A,{"data-state":"hidden"===h?"hidden":"visible",...o,ref:n,onPointerEnter:(0,c.composeEventHandlers)(e.onPointerEnter,()=>p("POINTER_ENTER")),onPointerLeave:(0,c.composeEventHandlers)(e.onPointerLeave,()=>p("POINTER_LEAVE"))})})}),C=t.forwardRef((e,n)=>{let i=g(w,e.__scopeScrollArea),{forceMount:a,...o}=e,[s,l]=t.useState(!1),u="horizontal"===e.orientation,c=V(()=>{if(i.viewport){let e=i.viewport.offsetWidth<i.viewport.scrollWidth,t=i.viewport.offsetHeight<i.viewport.scrollHeight;l(u?e:t)}},10);return q(i.viewport,c),q(i.content,c),(0,d.jsx)(r.Presence,{present:a||s,children:(0,d.jsx)(A,{"data-state":s?"visible":"hidden",...o,ref:n})})}),A=t.forwardRef((e,n)=>{let{orientation:r="vertical",...i}=e,a=g(w,e.__scopeScrollArea),o=t.useRef(null),s=t.useRef(0),[l,u]=t.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=z(l.viewport,l.content),h={...i,sizes:l,onSizesChange:u,hasThumb:!!(c>0&&c<1),onThumbChange:e=>o.current=e,onThumbPointerUp:()=>s.current=0,onThumbPointerDown:e=>s.current=e};function p(e,t){return function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"ltr",i=B(n),a=t||i/2,o=n.scrollbar.paddingStart+a,s=n.scrollbar.size-n.scrollbar.paddingEnd-(i-a),l=n.content-n.viewport;return H([o,s],"ltr"===r?[0,l]:[-1*l,0])(e)}(e,s.current,l,t)}return"horizontal"===r?(0,d.jsx)(E,{...h,ref:n,onThumbPositionChange:()=>{if(a.viewport&&o.current){let e=U(a.viewport.scrollLeft,l,a.dir);o.current.style.transform="translate3d(".concat(e,"px, 0, 0)")}},onWheelScroll:e=>{a.viewport&&(a.viewport.scrollLeft=e)},onDragScroll:e=>{a.viewport&&(a.viewport.scrollLeft=p(e,a.dir))}}):"vertical"===r?(0,d.jsx)(T,{...h,ref:n,onThumbPositionChange:()=>{if(a.viewport&&o.current){let e=U(a.viewport.scrollTop,l);o.current.style.transform="translate3d(0, ".concat(e,"px, 0)")}},onWheelScroll:e=>{a.viewport&&(a.viewport.scrollTop=e)},onDragScroll:e=>{a.viewport&&(a.viewport.scrollTop=p(e))}}):null}),E=t.forwardRef((e,n)=>{let{sizes:r,onSizesChange:i,...o}=e,s=g(w,e.__scopeScrollArea),[l,u]=t.useState(),c=t.useRef(null),h=(0,a.useComposedRefs)(n,c,s.onScrollbarXChange);return t.useEffect(()=>{c.current&&u(getComputedStyle(c.current))},[c]),(0,d.jsx)(N,{"data-orientation":"horizontal",...o,ref:h,sizes:r,style:{bottom:0,left:"rtl"===s.dir?"var(--radix-scroll-area-corner-width)":0,right:"ltr"===s.dir?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":B(r)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.x),onDragScroll:t=>e.onDragScroll(t.x),onWheelScroll:(t,n)=>{if(s.viewport){let r=s.viewport.scrollLeft+t.deltaX;e.onWheelScroll(r),function(e,t){return e>0&&e<t}(r,n)&&t.preventDefault()}},onResize:()=>{c.current&&s.viewport&&l&&i({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:L(l.paddingLeft),paddingEnd:L(l.paddingRight)}})}})}),T=t.forwardRef((e,n)=>{let{sizes:r,onSizesChange:i,...o}=e,s=g(w,e.__scopeScrollArea),[l,u]=t.useState(),c=t.useRef(null),h=(0,a.useComposedRefs)(n,c,s.onScrollbarYChange);return t.useEffect(()=>{c.current&&u(getComputedStyle(c.current))},[c]),(0,d.jsx)(N,{"data-orientation":"vertical",...o,ref:h,sizes:r,style:{top:0,right:"ltr"===s.dir?0:void 0,left:"rtl"===s.dir?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":B(r)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.y),onDragScroll:t=>e.onDragScroll(t.y),onWheelScroll:(t,n)=>{if(s.viewport){let r=s.viewport.scrollTop+t.deltaY;e.onWheelScroll(r),function(e,t){return e>0&&e<t}(r,n)&&t.preventDefault()}},onResize:()=>{c.current&&s.viewport&&l&&i({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:L(l.paddingTop),paddingEnd:L(l.paddingBottom)}})}})}),[M,I]=p(w),N=t.forwardRef((e,r)=>{let{__scopeScrollArea:i,sizes:s,hasThumb:l,onThumbChange:u,onThumbPointerUp:h,onThumbPointerDown:p,onThumbPositionChange:f,onDragScroll:m,onWheelScroll:y,onResize:b,...x}=e,k=g(w,i),[S,_]=t.useState(null),C=(0,a.useComposedRefs)(r,e=>_(e)),A=t.useRef(null),E=t.useRef(""),T=k.viewport,I=s.content-s.viewport,N=(0,o.useCallbackRef)(y),D=(0,o.useCallbackRef)(f),P=V(b,10);function R(e){A.current&&m({x:e.clientX-A.current.left,y:e.clientY-A.current.top})}return t.useEffect(()=>{let e=e=>{let t=e.target;(null==S?void 0:S.contains(t))&&N(e,I)};return document.addEventListener("wheel",e,{passive:!1}),()=>document.removeEventListener("wheel",e,{passive:!1})},[T,S,I,N]),t.useEffect(D,[s,D]),q(S,P),q(k.content,P),(0,d.jsx)(M,{scope:i,scrollbar:S,hasThumb:l,onThumbChange:(0,o.useCallbackRef)(u),onThumbPointerUp:(0,o.useCallbackRef)(h),onThumbPositionChange:D,onThumbPointerDown:(0,o.useCallbackRef)(p),children:(0,d.jsx)(n.Primitive.div,{...x,ref:C,style:{position:"absolute",...x.style},onPointerDown:(0,c.composeEventHandlers)(e.onPointerDown,e=>{0===e.button&&(e.target.setPointerCapture(e.pointerId),A.current=S.getBoundingClientRect(),E.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",k.viewport&&(k.viewport.style.scrollBehavior="auto"),R(e))}),onPointerMove:(0,c.composeEventHandlers)(e.onPointerMove,R),onPointerUp:(0,c.composeEventHandlers)(e.onPointerUp,e=>{let t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),document.body.style.webkitUserSelect=E.current,k.viewport&&(k.viewport.style.scrollBehavior=""),A.current=null})})})}),D="ScrollAreaThumb",P=t.forwardRef((e,t)=>{let{forceMount:n,...i}=e,a=I(D,e.__scopeScrollArea);return(0,d.jsx)(r.Presence,{present:n||a.hasThumb,children:(0,d.jsx)(R,{ref:t,...i})})}),R=t.forwardRef((e,r)=>{let{__scopeScrollArea:i,style:o,...s}=e,l=g(D,i),u=I(D,i),{onThumbPositionChange:h}=u,p=(0,a.useComposedRefs)(r,e=>u.onThumbChange(e)),f=t.useRef(void 0),m=V(()=>{f.current&&(f.current(),f.current=void 0)},100);return t.useEffect(()=>{let e=l.viewport;if(e){let t=()=>{m(),f.current||(f.current=W(e,h),h())};return h(),e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)}},[l.viewport,m,h]),(0,d.jsx)(n.Primitive.div,{"data-state":u.hasThumb?"visible":"hidden",...s,ref:p,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...o},onPointerDownCapture:(0,c.composeEventHandlers)(e.onPointerDownCapture,e=>{let t=e.target.getBoundingClientRect(),n=e.clientX-t.left,r=e.clientY-t.top;u.onThumbPointerDown({x:n,y:r})}),onPointerUp:(0,c.composeEventHandlers)(e.onPointerUp,u.onThumbPointerUp)})});P.displayName=D;var O="ScrollAreaCorner",j=t.forwardRef((e,t)=>{let n=g(O,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return"scroll"!==n.type&&r?(0,d.jsx)(F,{...e,ref:t}):null});j.displayName=O;var F=t.forwardRef((e,r)=>{let{__scopeScrollArea:i,...a}=e,o=g(O,i),[s,l]=t.useState(0),[u,c]=t.useState(0),h=!!(s&&u);return q(o.scrollbarX,()=>{var e;let t=(null==(e=o.scrollbarX)?void 0:e.offsetHeight)||0;o.onCornerHeightChange(t),c(t)}),q(o.scrollbarY,()=>{var e;let t=(null==(e=o.scrollbarY)?void 0:e.offsetWidth)||0;o.onCornerWidthChange(t),l(t)}),h?(0,d.jsx)(n.Primitive.div,{...a,ref:r,style:{width:s,height:u,position:"absolute",right:"ltr"===o.dir?0:void 0,left:"rtl"===o.dir?0:void 0,bottom:0,...e.style}}):null});function L(e){return e?parseInt(e,10):0}function z(e,t){let n=e/t;return isNaN(n)?0:n}function B(e){let t=z(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd;return Math.max((e.scrollbar.size-n)*t,18)}function U(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ltr",r=B(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,a=t.scrollbar.size-i,o=t.content-t.viewport,s=(0,u.clamp)(e,"ltr"===n?[0,o]:[-1*o,0]);return H([0,o],[0,a-r])(s)}function H(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];let r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}var W=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{},n={left:e.scrollLeft,top:e.scrollTop},r=0;return!function i(){let a={left:e.scrollLeft,top:e.scrollTop},o=n.left!==a.left,s=n.top!==a.top;(o||s)&&t(),n=a,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)};function V(e,n){let r=(0,o.useCallbackRef)(e),i=t.useRef(0);return t.useEffect(()=>()=>window.clearTimeout(i.current),[]),t.useCallback(()=>{window.clearTimeout(i.current),i.current=window.setTimeout(r,n)},[r,n])}function q(e,t){let n=(0,o.useCallbackRef)(t);(0,l.useLayoutEffect)(()=>{let t=0;if(e){let r=new ResizeObserver(()=>{cancelAnimationFrame(t),t=window.requestAnimationFrame(n)});return r.observe(e),()=>{window.cancelAnimationFrame(t),r.unobserve(e)}}},[e,n])}var G=y,$=x,K=j},987065:e=>{"use strict";e.s({ScrollArea:()=>a});var t=e.i(290479),n=e.i(289702),r=e.i(128758),i=e.i(373150);let a=i.forwardRef((e,i)=>{let{className:a,children:s,scrollbarClassName:l,...u}=e;return(0,t.jsxs)(r.Root,{ref:i,type:"always",className:(0,n.cn)("relative overflow-hidden",a),...u,children:[(0,t.jsx)(r.Viewport,{className:"w-full h-full [&>div]:!block rounded-[inherit]",children:s}),(0,t.jsx)(o,{className:l}),(0,t.jsx)(r.Corner,{})]})});a.displayName=r.Root.displayName;let o=i.forwardRef((e,i)=>{let{className:a,orientation:o="vertical",...s}=e;return(0,t.jsx)(r.ScrollAreaScrollbar,{ref:i,orientation:o,className:(0,n.cn)("flex touch-none select-none transition-colors","vertical"===o&&"h-full w-5 border-l border-l-transparent p-px","horizontal"===o&&"h-5 flex-col border-t border-t-transparent p-px",a),...s,children:(0,t.jsx)(r.ScrollAreaThumb,{className:"relative flex-1 rounded-full bg-border"})})});o.displayName=r.ScrollAreaScrollbar.displayName},688693:e=>{"use strict";e.s({TableCellPopover:()=>a});var t=e.i(290479),n=e.i(303652),r=e.i(987065),i=e.i(289702);let a=e=>{let{children:a,textContent:o,scrollClassName:s}=e;return(0,t.jsxs)(n.Popover,{children:[(0,t.jsx)(n.PopoverTrigger,{asChild:!0,children:a}),(0,t.jsx)(n.PopoverContent,{"data-no-dnd":"true",sideOffset:-28,alignOffset:-12,align:"start",className:"text-sm py-4 px-6 w-[400px]",children:(0,t.jsx)(r.ScrollArea,{className:(0,i.cn)("h-40",s),children:o})})]})}},53837:e=>{"use strict";e.s({useIsMutating:()=>a});var t=e.i(373150),n=e.i(354757),r=e.i(375768),i=e.i(720672);function a(e,a){let s=(0,i.useQueryClient)(a);return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0,s=(0,i.useQueryClient)(a).getMutationCache(),l=t.useRef(e),u=t.useRef(null);return u.current||(u.current=o(s,e)),t.useEffect(()=>{l.current=e}),t.useSyncExternalStore(t.useCallback(e=>s.subscribe(()=>{let t=(0,r.replaceEqualDeep)(u.current,o(s,l.current));u.current!==t&&(u.current=t,n.notifyManager.schedule(e))}),[s]),()=>u.current,()=>u.current)}({filters:{...e,status:"pending"}},s).length}function o(e,t){return e.findAll(t.filters).map(e=>t.select?t.select(e):e.state)}},821825:e=>{"use strict";e.s({useMetadataStatus:()=>i});var t=e.i(53837);e.i(570283);var n=e.i(591666),r=e.i(814733);let i=e=>{let i=(0,n.getMutationKey)(r.api.documentMetadata.generate);return(0,t.useIsMutating)({mutationKey:i,predicate:t=>{var n;return(null==(n=t.state.variables)?void 0:n.chatbotId)===e}})}},514914:e=>{"use strict";e.s({formatAuthors:()=>t}),e.i(290479),e.i(608294),e.i(663018),e.i(701495),e.i(688693),e.i(821825);let t=function(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"et-al";if(!e||0===e.length)return"";if("all-authors"===n)t=e.join(", ");else{let n=e[0],r=n.trim().split(" ").pop()||n;t=e.length>1?"".concat(r,", et al."):r}return{displayText:t,authors:e}}},362881:e=>{"use strict";e.s({EditableTableCell:()=>p});var t=e.i(290479),n=e.i(281127),r=e.i(608294),i=e.i(874133),a=e.i(84324),o=e.i(373150),s=e.i(303652),l=e.i(514914),u=e.i(688693),c=e.i(701495),d=e.i(289702),h=e.i(230277);function p(e){let{getValue:p,row:{index:f},column:{id:m},table:g,cellType:y,disabled:b=!1,readOnly:x=!1,tagsEditable:w=!1,onLinkClick:k}=e,S=p(),[_,C]=(0,o.useState)(S),A=(0,r.useAtomValue)(c.authorsDisplayModeAtom),[E,T]=(0,o.useState)(!1),[M,I]=(0,o.useState)(""),[N,D]=(0,o.useState)([]),[P,R]=(0,o.useState)([]),[O,j]=(0,o.useState)(""),[F,L]=(0,o.useState)(320),[z,B]=(0,o.useState)(!0),[U,H]=(0,o.useState)(null),W=(0,o.useRef)(null),V=(0,o.useRef)(null),q=(0,o.useRef)(null),G=(0,o.useRef)(null),$=(0,o.useRef)(S);$.current=p();let K=(0,o.useCallback)((e,t)=>e===t||(null==e||null==t?e===t:!!(Array.isArray(e)&&Array.isArray(t))&&e.length===t.length&&e.every((e,n)=>e===t[n])),[]);(0,o.useEffect)(()=>{let e=$.current;K(_,e)||C(e)}),(0,o.useEffect)(()=>{if(E){if("authors"===y||"tags"===y){let e=Array.isArray(_)?_:[];D(e),R(e),I("")}else("summary"===y||"text"===y||"title"===y||"number"===y||"url"===y||"doi"===y||"isbn"===y||"issn"===y)&&(j(String(_||"")),H(X(String(_||""),y)));G.current&&L(Math.max(200,G.current.getBoundingClientRect().width+24)),setTimeout(()=>{if("authors"===y||"tags"===y){var e;null==(e=W.current)||e.focus()}else if("summary"===y){if(V.current){V.current.focus();let e=V.current.value.length;V.current.setSelectionRange(e,e)}}else if(("text"===y||"title"===y||"number"===y||"url"===y||"doi"===y||"isbn"===y||"issn"===y)&&q.current&&(q.current.focus(),"text"===y||"title"===y||"url"===y||"doi"===y||"isbn"===y||"issn"===y)){let e=q.current.value.length;q.current.setSelectionRange(e,e)}},100)}},[E,_,y]),(0,o.useEffect)(()=>{E||H(null)},[E]);let Y=(0,o.useCallback)(e=>{var t,n;null==(n=g.options.meta)||null==(t=n.updateData)||t.call(n,f,m,e),C(e)},[f,m,g.options.meta]),X=(0,o.useCallback)((e,t)=>{let n=e.trim();if(""===n)return null;if("number"===t){if(!/^-?\d*\.?\d*$/.test(n))return"Numbers only";if(Number.isNaN(Number(n)))return"Invalid number"}if("url"===t){if(!/^https?:\/\//i.test(n))return"URL must start with http:// or https://";if(!/^https?:\/\/[^/\s]+\.[^/\s]+/i.test(n))return"URL must contain a valid domain";try{new URL(n)}catch(e){return"Invalid URL format"}}if("doi"===t){let e=/^10\.\d{4,9}\/[-._;()/:A-Z0-9]+$/i.test(n),t=/^https?:\/\/(doi\.org|dx\.doi\.org)\/10\.\d{4,9}\/[-._;()/:A-Z0-9]+$/i.test(n);if(!e&&!t)return"DOI must be 10.xxxx/suffix or https://doi.org/10.xxxx/suffix"}if("isbn"===t){if(!/^[\dXx\-\s]*$/.test(n))return"ISBN can only contain digits, X, hyphens, and spaces";let e=n.replace(/[-\s]/g,"");if(10===e.length){if(!/^\d{9}[\dXx]$/.test(e))return"ISBN-10 must be 10 digits, last digit can be X";let t=0;for(let n=0;n<9;n++)t+=Number.parseInt(e[n],10)*(10-n);let n=e[9].toUpperCase(),r=(11-t%11)%11;if(n!==(10===r?"X":r.toString()))return"Invalid ISBN-10 checksum"}else if(13===e.length){if(!/^\d{13}$/.test(e))return"ISBN-13 must be 13 digits";let t=0;for(let n=0;n<12;n++)t+=Number.parseInt(e[n],10)*(n%2==0?1:3);if(Number.parseInt(e[12],10)!==(10-t%10)%10)return"Invalid ISBN-13 checksum"}else if(e.length>0)return"ISBN must be 10 or 13 digits (hyphens allowed)"}if("issn"===t){if(!/^\d{4}-\d{3}[\dX]$/i.test(n))return"ISSN must be in format 1234-567X (8 digits with hyphen)";let e=n.replace("-","").slice(0,7),t=0;for(let n=0;n<7;n++)t+=Number.parseInt(e[n],10)*(8-n);let r=n[8].toUpperCase(),i=(11-t%11)%11;if(r!==(10===i?"X":11===i?"0":i.toString()))return"Invalid ISSN checksum"}return null},[]),Z=(0,o.useCallback)(()=>{z&&("authors"===y||"tags"===y?Y(N.length>0?N:null):"summary"===y||"text"===y||"title"===y?Y(O||null):"number"===y?X(O,y)||Y(O?Number(O):null):("url"===y||"doi"===y||"isbn"===y||"issn"===y)&&(X(O,y)||Y(O||null))),T(!1),B(!0),H(null)},[Y,N,O,y,z,X]),J=(0,o.useCallback)(()=>{if(!_)return"";if("authors"===y){let e=(0,l.formatAuthors)(_,A);return e?e.displayText:""}if("date"===y){let e=_ instanceof Date?_:new Date(_);return Number.isNaN(e.getTime())?"":(0,n.format)(e,"MMM d, yyyy")}return String(_)},[_,y,A]),Q=(0,o.useMemo)(()=>{let e=[...P];return M&&(e=e.filter(e=>e.toLowerCase().includes(M.toLowerCase()))),e.sort((e,t)=>{let n=N.includes(e),r=N.includes(t);return n&&!r?-1:!n&&r?1:0})},[P,M,N]),ee=(0,o.useCallback)(e=>{let t=e.trim();t&&(R(e=>e.includes(t)?e:[...e,t]),D(e=>e.includes(t)?e:[...e,t]))},[]),et=(0,o.useCallback)(e=>{N.includes(e)?D(t=>t.filter(t=>t!==e)):D(t=>[...t,e])},[N]),en=(0,d.cn)("h-full w-full flex items-center transition-all duration-200 overflow-hidden",{"cursor-pointer":!b&&!x&&("authors"===y||"tags"===y&&w||"date"===y||"summary"===y||"text"===y||"title"===y||"number"===y||"url"===y||"doi"===y||"isbn"===y||"issn"===y)||"tags"===y&&!w,"cursor-default opacity-60":b||x}),er=J(),ei="tags"===y&&Array.isArray(_)&&_.length>0?(0,t.jsx)("div",{className:"flex gap-1 overflow-hidden w-full","data-tag-content":!0,children:_.map(e=>(0,t.jsx)("span",{className:"flex-shrink-0 text-sm rounded-md px-1.5 py-0.5 border border-border bg-muted whitespace-nowrap text-muted-foreground",children:e},e))}):null;if(!b&&!x&&"date"===y)return(0,t.jsxs)(s.Popover,{open:E,onOpenChange:e=>{e?T(!0):Z()},children:[(0,t.jsx)(s.PopoverTrigger,{asChild:!0,children:(0,t.jsx)("div",{ref:G,className:en,children:(0,t.jsx)("span",{className:"text-sm truncate",children:er})})}),(0,t.jsx)(s.PopoverContent,{className:"w-auto p-0 -ml-[11px] !duration-0",align:"start",sideOffset:-31,onOpenAutoFocus:e=>e.preventDefault(),children:(0,t.jsx)(h.Calendar,{mode:"single",selected:_?new Date(_):void 0,onSelect:e=>{e?Y(e):Y(null),T(!1)}})})]});if(!b&&!x&&("text"===y||"title"===y||"number"===y||"url"===y||"doi"===y||"isbn"===y||"issn"===y))return(0,t.jsxs)(s.Popover,{open:E,onOpenChange:e=>{e?T(!0):Z()},children:[(0,t.jsx)(s.PopoverTrigger,{asChild:!0,children:(0,t.jsx)("div",{ref:G,className:en,children:"title"===y&&k?(0,t.jsx)("span",{onClick:e=>{e.stopPropagation(),k()},className:(0,d.cn)("truncate text-sm px-1 py-0.5 rounded-3 transition-colors duration-200 max-w-full inline-block","hover:bg-control-primary cursor-pointer"),children:er}):(0,t.jsx)("span",{className:"truncate text-sm",children:er})})}),(0,t.jsx)(s.PopoverContent,{className:(0,d.cn)("p-0 -ml-[11px] !rounded-4 !duration-0 !border",{"border-2 !border-destructive !bg-[#FFEAEE] dark:!bg-[#44010e]":U,"!border-blue":!U}),style:{width:"".concat(Math.max(F,300),"px")},align:"start",sideOffset:-32,onOpenAutoFocus:e=>e.preventDefault(),children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{ref:q,type:"text",value:O,onChange:e=>{let t=e.target.value;j(t),("number"===y||"url"===y||"doi"===y||"isbn"===y||"issn"===y)&&H(X(t,y))},onKeyDown:e=>{"Escape"===e.key?(e.preventDefault(),B(!1),T(!1)):"Enter"===e.key&&(e.preventDefault(),Z())},className:"w-full h-[36px] px-3 py-2 text-sm outline-none border-none bg-transparent placeholder:text-muted-foreground transition-all duration-200",placeholder:"Enter ".concat(y,"...")}),U&&(0,t.jsx)("div",{className:"absolute top-full left-0 mt-2 px-2 py-1 bg-destructive text-white text-xs rounded-3 shadow-shadowLow z-50 whitespace-nowrap",children:U})]})})]});if(!b&&!x&&"summary"===y)return(0,t.jsxs)(s.Popover,{open:E,onOpenChange:e=>{e?T(!0):Z()},children:[(0,t.jsx)(s.PopoverTrigger,{asChild:!0,children:(0,t.jsx)("div",{ref:G,className:en,children:(0,t.jsx)("span",{className:"truncate text-sm",children:er})})}),(0,t.jsx)(s.PopoverContent,{className:"p-0 -ml-6 !rounded-4 !duration-0 !border !border-blue",style:{width:"".concat(Math.max(F,400),"px"),minHeight:"200px"},align:"start",sideOffset:-30,onOpenAutoFocus:e=>e.preventDefault(),children:(0,t.jsx)("textarea",{ref:V,value:O,onChange:e=>j(e.target.value),className:"w-full h-full min-h-[200px] p-3 resize-none outline-none border-none bg-transparent text-sm placeholder:text-muted-foreground",placeholder:"Enter summary...",onKeyDown:e=>{"Escape"===e.key&&(e.preventDefault(),B(!1),T(!1))}})})]});if(!b&&!x&&"authors"===y||!b&&!x&&"tags"===y&&w)return(0,t.jsxs)(s.Popover,{open:E,onOpenChange:e=>{e?T(!0):Z()},children:[(0,t.jsx)(s.PopoverTrigger,{asChild:!0,children:(0,t.jsx)("div",{ref:G,className:en,children:ei||(0,t.jsx)("span",{className:"truncate text-sm",children:er})})}),(0,t.jsxs)(s.PopoverContent,{"data-popover-content":!0,className:"p-0 overflow-hidden -ml-6 !rounded-6 shadow-shadowMedium !duration-0",style:{width:"".concat(F+2,"px")},align:"start",sideOffset:-32,onOpenAutoFocus:e=>e.preventDefault(),children:[(0,t.jsx)("div",{className:"border-b",children:(0,t.jsx)("input",{ref:W,type:"text",placeholder:"Search or add ".concat(y,"..."),value:M,onChange:e=>I(e.target.value),className:"w-full px-6 h-[36px] text-sm outline-none  placeholder:text-muted-foreground",onKeyDown:e=>{"Escape"===e.key?(e.preventDefault(),B(!1),T(!1)):"Enter"===e.key&&(e.preventDefault(),M.trim()?(ee(M),I("")):Z())}})}),(0,t.jsx)("div",{className:"max-h-60 overflow-y-auto p-2 scrollbar-overlay",children:0===Q.length?(0,t.jsxs)("div",{className:"p-4 text-sm text-muted-foreground text-center",children:["No ",y," found"]}):Q.map(e=>{let n=N.includes(e);return(0,t.jsxs)("div",{className:(0,d.cn)("flex items-center justify-between px-2 gap-2 rounded-4 py-1.5 text-sm cursor-pointer hover:bg-popover-hover"),onClick:()=>et(e),children:[(0,t.jsx)("span",{className:"px-1.5 text-sm bg-muted border rounded-4 border-border text-muted-foreground select-none min-w-0 truncate",children:e}),n&&(0,t.jsx)(i.Check,{className:"w-7 h-7 text-blue flex-shrink-0"})]},e)})}),M&&!Q.some(e=>e.toLowerCase()===M.toLowerCase())&&(0,t.jsx)("div",{className:"p-2 border-t",children:(0,t.jsxs)("button",{onClick:()=>{ee(M),I("")},className:"w-full px-2 py-1.5 text-sm text-left  rounded-md flex items-center gap-2 hover:bg-popover-hover",children:[(0,t.jsx)(a.Plus,{className:"w-7 h-7 flex-shrink-0"}),(0,t.jsxs)("span",{className:"text-sm whitespace-nowrap overflow-hidden truncate",children:['Add "',M,'"']})]})})]})]});if("tags"===y&&!w)return(0,t.jsxs)(s.Popover,{open:E,onOpenChange:e=>{T(e)},children:[(0,t.jsx)(s.PopoverTrigger,{asChild:!0,children:(0,t.jsx)("div",{ref:G,className:en,children:ei||(0,t.jsx)("span",{className:"truncate text-sm",children:er})})}),(0,t.jsx)(s.PopoverContent,{className:"p-4 -ml-6 !rounded-6 shadow-shadowMedium !duration-0",style:{width:"".concat(Math.max(F+2,300),"px")},align:"start",sideOffset:-32,onOpenAutoFocus:e=>e.preventDefault(),children:Array.isArray(_)&&_.length>0?(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:_.map(e=>(0,t.jsx)("span",{className:"text-sm rounded-md px-2 py-1 border border-border bg-muted text-muted-foreground",children:e},e))}):(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"No tags"})})]});let ea=(0,t.jsx)("div",{className:en,children:ei||(0,t.jsx)("span",{className:"truncate text-sm",children:er})});if("authors"===y&&_&&(b||x)||"tags"===y&&_&&(b||x)){let e=Array.isArray(_)?_.join(", "):"";return(0,t.jsx)(u.TableCellPopover,{textContent:e,children:ea})}return ea}},785628:e=>{"use strict";e.s({FolderCell:()=>i});var t=e.i(290479),n=e.i(86386),r=e.i(688693);let i=e=>{let{folderId:i,folderName:a}=e;if(!i||null===a)return null;let o=a&&""!==a.trim()?a:"Untitled";return(0,t.jsx)(r.TableCellPopover,{scrollClassName:"h-fit",textContent:(0,t.jsx)("div",{className:"flex flex-col gap-2",children:(0,t.jsx)(n.default,{className:"line-clamp-1 decoration-dotted underline",href:"/b/".concat(i),children:o})}),children:(0,t.jsx)("span",{className:"truncate block max-w-[200px]",children:(0,t.jsx)("span",{className:"decoration-dotted underline",children:o})})})}},563791:e=>{"use strict";e.s({CheckboxCell:()=>a});var t=e.i(290479),n=e.i(292536),r=e.i(278101),i=e.i(373150);let a=e=>{var a;let{row:o,table:s}=e,{handleShiftClick:l,setAnchor:u}=(0,n.useShiftSelection)(s,o),c=(0,i.useRef)(!1),d=o.depth>0,h=o.getParentRow(),p=null!=(a=null==h?void 0:h.getIsSelected())&&a,f=d&&p;return(0,t.jsx)("div",{className:"h-full flex items-center",children:(0,t.jsx)(r.Checkbox,{disabled:f,onPointerDown:e=>{if(f){e.preventDefault(),e.stopPropagation();return}let t=l(e);c.current=t,t||e.stopPropagation()},checked:o.getIsSelected(),onCheckedChange:e=>{if(!f){if(c.current){c.current=!1;return}u(),o.toggleSelected(!!e)}},"aria-label":"Select row"})})}},271403:e=>{"use strict";e.s({IncludedSourcesCell:()=>s});var t=e.i(290479),n=e.i(852951),r=e.i(86386),i=e.i(373150),a=e.i(430266),o=e.i(688693);let s=e=>{let{linkedSources:s}=e,{data:l}=(0,n.useWorkspace)(),u=(0,i.useMemo)(()=>{let e=[];if(!s)return e;for(let t of s)(0,a.match)(t).with({type:"main"},t=>{var n;let r=null==l?void 0:l.entities.find(e=>e.id===t.chatbotId);r&&e.push({name:null!=(n=r.name)?n:null,type:"main",id:t.chatbotId})}).with({type:"chatbot"},t=>{var n;let r=null==l?void 0:l.entities.find(e=>e.id===t.chatbotId);r&&e.push({name:null!=(n=r.name)?n:null,type:"chatbot",id:t.chatbotId})}).otherwise(()=>{});return e},[s,l]);return(0,t.jsx)(o.TableCellPopover,{scrollClassName:"h-fit",textContent:(0,t.jsx)("div",{className:"flex flex-col gap-2",children:u.map(e=>(0,t.jsx)(r.default,{className:"line-clamp-1 decoration-dotted underline",href:"/b/".concat(e.id),children:e.name},e.id))}),children:(0,t.jsx)("span",{className:"truncate block max-w-[200px]",children:u.map(e=>e.name?(0,t.jsx)("span",{className:"decoration-dotted underline",children:e.name},e.id):null)})})}},173341:e=>{"use strict";e.s({METADATA_FETCH_VERSION:()=>r,documentMetadataSchema:()=>i});var t=e.i(38017),n=e.i(555168);let r=1,i=n.z.object({chatbotId:n.z.string(),title:n.z.string().nullish(),authors:n.z.any().nullish(),summary:n.z.string().nullish(),publication:n.z.string().nullish(),volume:n.z.string().nullish(),issue:n.z.string().nullish(),issue_date:n.z.date().nullish(),pages:n.z.string().nullish(),date:n.z.date().nullish(),doi:n.z.string().nullish(),url:n.z.string().url().nullish(),isbn:n.z.string().nullish(),arxivId:n.z.string().nullish(),abstract:n.z.string().nullish(),language:n.z.string().nullish(),publisher:n.z.string().nullish(),type:n.z.string().nullish(),categories:n.z.any().nullish(),primaryCategory:n.z.string().nullish(),subjects:n.z.any().nullish(),description:n.z.string().nullish(),edition:n.z.string().nullish(),series:n.z.string().nullish(),keywords:n.z.any().nullish(),issn:n.z.string().nullish(),updated:n.z.date().nullish(),citationCount:n.z.number().int().nullish().default(0),openAccess:n.z.boolean().nullish().default(!1),openAlexId:n.z.string().nullish(),publicationYear:n.z.string().nullish(),publicationDate:n.z.date().nullish(),relatedWorks:n.z.any().nullish(),citedByUrl:n.z.string().url().nullish(),referencesCount:n.z.number().int().nullish().default(0),isRetracted:n.z.boolean().nullish().default(!1),isParatext:n.z.boolean().nullish().default(!1),metadataFetchVersion:n.z.number().int().nullish(),metadataFetchAttempted:n.z.boolean().nullish().default(!1)});n.z.enum(t.CITATION_FORMATS)},351580:e=>{"use strict";e.s({default:()=>n});var t=e.i(373150);let n=e=>{let{text:n,duration:r=45,disabled:i,isEditMode:a=!1,isIndexed:o=!1}=e,[s,l]=(0,t.useState)(n),[u,c]=(0,t.useState)(0),d=(0,t.useRef)(o);(0,t.useEffect)(()=>{if(a){l(n),c(n.length);return}o&&!d.current&&s!==n?(l(""),c(0),d.current=o):(l(n),c(n.length))},[a,n,o]),(0,t.useEffect)(()=>{if(s===n||i||a)return;let e=setInterval(()=>{u<n.length?(l(n.substring(0,u+1)),c(u+1)):(u>n.length&&(l(n.substring(0,n.length)),c(n.length)),clearInterval(e))},r);return()=>{clearInterval(e)}},[r,u,n,i,a]);let h=!i&&s!==n&&!a;return{displayedText:i?n:s,isTyping:h}}},613441:e=>{"use strict";e.s({TableTitleCell:()=>x});var t=e.i(290479),n=e.i(173341),r=e.i(381612),i=e.i(996481),a=e.i(116075),o=e.i(165393),s=e.i(397711),l=e.i(373150),u=e.i(704255),c=e.i(362881),d=e.i(663018),h=e.i(998145),p=e.i(972899),f=e.i(476440),m=e.i(351580),g=e.i(147271),y=e.i(814733),b=e.i(289702);let x=e=>{var x;let{row:w}=e,[k,S]=(0,l.useState)(!1),{updateName:_}=(0,g.useUpdateName)(),{mutate:C}=y.api.documentMetadata.update.useMutation(),A=w.getCanExpand(),E=w.getIsExpanded(),T=(0,l.useCallback)(e=>{let t=(null==e?void 0:e.trim())||"",r=""===t?"Untitled":t;_({id:w.original.id,name:r,type:"CHATBOT"}),C({chatbotId:w.original.id,title:r,metadataFetchVersion:n.METADATA_FETCH_VERSION,metadataFetchAttempted:!0})},[_,C,w.original.id]),M=w.original.chats.filter(e=>"CHAT"===e.type).sort((e,t)=>{var n,r,i,a;return(null!=(i=null==(n=t.lastViewedAt)?void 0:n.getTime())?i:0)-(null!=(a=null==(r=e.lastViewedAt)?void 0:r.getTime())?a:0)})[0],I="CHAT"===w.original.type?"/b/".concat(w.original.parentChatbotId||w.original.id,"?chatId=").concat(w.original.id):"/b/".concat(null!=(x=w.original.parentChatbotId)?x:w.original.id).concat(M?"?chatId=".concat(M.id):""),N=E?r.ChevronDown:i.ChevronRight,D=w.original.isIndexed||"RECORDING"===w.original.type||"NOTE"===w.original.type||"CHAT"===w.original.type,P="FAILED"===w.original.ingestionStatus||"TIMEOUT"===w.original.ingestionStatus||!1===D&&w.original.createdAt&&Date.now()-new Date(w.original.createdAt).getTime()>18e5,R=w.original.name,{displayedText:O}=(0,m.default)({text:null!=R?R:"Untitled"}),j=(0,s.useRouter)();return"PLACEHOLDER"===w.original.type?(0,t.jsx)("div",{className:"flex items-center pl-7 h-[22px]",children:(0,t.jsx)("div",{className:"text-sm text-text-secondary",children:"No chats"})}):(0,t.jsxs)("div",{className:(0,b.cn)("flex items-center gap-1 w-full"),style:{paddingLeft:"".concat(1.25*w.depth,"rem")},onMouseEnter:()=>{A&&S(!0)},onMouseLeave:()=>{S(!1)},children:[P?(0,t.jsx)(f.ReusableTooltip,{content:"Import failed. Please try again.",align:"center",children:(0,t.jsx)(p.Icon,{as:a.CircleAlert,className:"size-7 flex-shrink-0 text-destructive-solid"})}):(0,t.jsx)(u.Button,{onClick:w.getToggleExpandedHandler(),variant:"ghost",size:"icon",className:"flex-shrink-0 size-7",children:D?(0,t.jsx)(p.Icon,{as:k?N:(0,h.default)({type:w.original.type,fallback:o.MessagesSquareIcon})}):(0,t.jsx)(d.LoadingSpinner,{variant:"small"})}),P?(0,t.jsx)("p",{className:"truncate cursor-pointer py-[1px] items-center px-3 hover:bg-control-destructive rounded-4 text-destructive-solid",children:O}):(0,t.jsx)(c.EditableTableCell,{getValue:()=>R||"Untitled",row:w,column:{id:"name"},table:{options:{meta:{updateData:(e,t,n)=>{T(null==n?"":String(n))}}}},cellType:"title",onLinkClick:()=>{j.push(I)}})]})}},824045:e=>{"use strict";e.s({useTableColumns:()=>S});var t=e.i(290479),n=e.i(281127),r=e.i(987041),i=e.i(777772),a=e.i(216897),o=e.i(334232),s=e.i(338403),l=e.i(605284),u=e.i(373150),c=e.i(122714),d=e.i(362881),h=e.i(663018),p=e.i(998145),f=e.i(278101),m=e.i(785628),g=e.i(563791),y=e.i(271403),b=e.i(613441),x=e.i(821825);let w=e=>{let{row:n,children:r}=e;return(0,x.useMetadataStatus)(n.original.id)>0?(0,t.jsxs)("div",{className:"w-full flex justify-between text-placeholder items-center",children:["Loading... ",(0,t.jsx)(h.LoadingSpinner,{className:"ml-4",variant:"small"})]}):(0,t.jsx)(t.Fragment,{children:r})},k=["DOCUMENT","IMAGE","AUDIO","VIDEO","WEBSITE","CHAT","RECORDING","NOTE","QUIZ"],S=e=>{let{data:h,isHomepage:x}=e,S=(0,u.useMemo)(()=>h.reduce((e,t)=>{var n;return e[t.type]=(null!=(n=e[t.type])?n:0)+1,e},{}),[h]),_=(0,u.useMemo)(()=>[...new Set(h.flatMap(e=>e.tags||[]))],[h]);return{columns:(0,u.useMemo)(()=>[{id:"select",header:e=>{let{table:n}=e;return(0,t.jsx)(f.Checkbox,{checked:n.getIsAllPageRowsSelected()||n.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:e=>n.toggleAllPageRowsSelected(!!e),"aria-label":"Select all"})},cell:e=>{let{row:n,table:r}=e;return(0,t.jsx)(g.CheckboxCell,{row:n,table:r})},size:30,enableSorting:!1,enableHiding:!1},{id:"name",accessorKey:"name",header:e=>{let{column:n}=e;return(0,t.jsx)(c.DataTableColumnHeader,{column:n,title:"Title"})},cell:e=>{let{row:n}=e;return(0,t.jsx)(b.TableTitleCell,{row:n})},meta:{label:"Title",placeholder:"Search titles...",variant:"text",icon:l.Text},enableColumnFilter:!0,minSize:128,size:400,sortUndefined:"last"},{id:"folder",accessorKey:"folder",header:e=>{let{column:n}=e;return(0,t.jsx)(c.DataTableColumnHeader,{column:n,title:"Folder"})},cell:e=>{let{row:n}=e;return(0,t.jsx)(m.FolderCell,{folderId:n.original.groupId,folderName:n.original.folder})},meta:{label:"Folder",placeholder:"Search folder..."},size:150,minSize:128,enableColumnFilter:!0},{id:"authors",accessorKey:"authors",header:e=>{let{column:n}=e;return(0,t.jsx)(c.DataTableColumnHeader,{column:n,title:"Authors"})},cell:e=>{let{getValue:n,row:r,column:i,table:a}=e;return(0,t.jsx)(d.EditableTableCell,{getValue:n,row:r,column:i,table:a,cellType:"authors",disabled:"CHAT"===r.original.type})},meta:{label:"Authors",placeholder:"Search authors..."},size:200,minSize:128,enableColumnFilter:!0,sortingFn:(e,t)=>{let n=e.original.authors,r=t.original.authors;if(!n||0===n.length)return r&&0!==r.length?1:0;if(!r||0===r.length)return -1;let i=n[0],a=r[0],o=i.trim().split(" ").pop()||i,s=a.trim().split(" ").pop()||a;return o.localeCompare(s)}},{id:"createdAt",accessorKey:"createdAt",header:e=>{let{column:n}=e;return(0,t.jsx)(c.DataTableColumnHeader,{column:n,title:"Added"})},cell:e=>{let r,{row:o}=e,s=o.getValue("createdAt");return(r=(0,i.isToday)(s)?"Today":(0,a.isYesterday)(s)?"Yesterday":(0,n.format)(s,"MMMM d, yyyy"),"PLACEHOLDER"===o.original.type)?null:(0,t.jsx)("span",{className:"truncate",children:r})},sortingFn:(e,t)=>{let n=e.original.createdAt,r=t.original.createdAt,i=new Date(n.getFullYear(),n.getMonth(),n.getDate()),a=new Date(r.getFullYear(),r.getMonth(),r.getDate());return i.getTime()-a.getTime()},meta:{label:"Added",variant:"date",icon:o.CalendarIcon},size:128,minSize:128,enableColumnFilter:!0},{id:"lastViewedAt",accessorKey:"lastViewedAt",header:e=>{let{column:n}=e;return(0,t.jsx)(c.DataTableColumnHeader,{column:n,title:"Viewed"})},cell:e=>{let{row:i}=e,a=i.original.lastViewedAt;return"PLACEHOLDER"!==i.original.type&&a?(0,t.jsx)("span",{className:"truncate",children:(e=>{let t=(0,r.formatDistanceToNowStrict)(e,{addSuffix:!1});return t.includes("second")?"Just now":t.includes("minute")||t.includes("hour")?"".concat(t," ago"):(0,n.format)(e,"MMM d, yyyy")})(a)}):null},meta:{label:"Viewed",placeholder:"Search last viewed..."},size:128,minSize:128},{id:"type",accessorKey:"type",header:e=>{let{column:n}=e;return(0,t.jsx)(c.DataTableColumnHeader,{column:n,title:"File type"})},cell:e=>{let{row:n}=e,r=n.original.type;if("PLACEHOLDER"===r)return null;let i="QUIZ"===r?"Cards":(null==r?void 0:r.charAt(0).toUpperCase())+(null==r?void 0:r.slice(1).toLowerCase());return(0,t.jsxs)("span",{className:"truncate",children:[i," "]})},meta:{label:"File type",variant:"multiSelect",options:k.map(e=>{var t;return{label:"QUIZ"===e?"Cards":e.charAt(0).toUpperCase()+e.slice(1).toLowerCase(),value:e,count:null!=(t=null==S?void 0:S[e])?t:0,icon:(0,p.default)({type:e})}}),icon:s.CircleDashed},size:128,minSize:128,enableColumnFilter:!0},{id:"published",accessorKey:"publicationDate",header:e=>{let{column:n}=e;return(0,t.jsx)(c.DataTableColumnHeader,{column:n,title:"Published"})},cell:e=>{let{getValue:n,row:r,column:i,table:a}=e;return(0,t.jsx)(d.EditableTableCell,{getValue:n,row:r,column:i,table:a,cellType:"date",disabled:"CHAT"===r.original.type})},meta:{label:"Published",placeholder:"Search published..."},size:128,minSize:128},{id:"tags",accessorKey:"tags",header:e=>{let{column:n}=e;return(0,t.jsx)(c.DataTableColumnHeader,{column:n,title:"Tags"})},cell:e=>{let{getValue:n,row:r,column:i,table:a}=e;return(0,t.jsx)(d.EditableTableCell,{getValue:n,row:r,column:i,table:a,cellType:"tags",disabled:"CHAT"===r.original.type})},enableColumnFilter:!0,meta:{label:"Tags",variant:"multiSelect",options:_.map(e=>({label:e,value:e}))},size:128,minSize:128},{id:"summary",accessorKey:"summary",header:e=>{let{column:n}=e;return(0,t.jsx)(c.DataTableColumnHeader,{column:n,title:"Summary"})},cell:e=>{let{getValue:n,row:r,column:i,table:a}=e;return(0,t.jsx)(d.EditableTableCell,{getValue:n,row:r,column:i,table:a,cellType:"summary",disabled:"CHAT"===r.original.type})},meta:{label:"Summary",placeholder:"Search summary...",variant:"text",icon:l.Text},enableColumnFilter:!0,minSize:128,size:400},{id:"includedSources",accessorKey:"includedSources",header:e=>{let{column:n}=e;return(0,t.jsx)(c.DataTableColumnHeader,{column:n,title:"Chat context"})},cell:e=>{let{row:n}=e;return(0,t.jsx)(y.IncludedSourcesCell,{linkedSources:n.original.includedSources})},meta:{label:"Chat context",placeholder:"Search chat context..."},enableColumnFilter:!0,size:200,minSize:128},{id:"publication",accessorKey:"publication",header:e=>{let{column:n}=e;return(0,t.jsx)(c.DataTableColumnHeader,{column:n,title:"Publication"})},cell:e=>{let{getValue:n,row:r,column:i,table:a}=e;return(0,t.jsx)(w,{row:r,children:(0,t.jsx)(d.EditableTableCell,{getValue:n,row:r,column:i,table:a,cellType:"text",disabled:"CHAT"===r.original.type})})},meta:{label:"Publication",placeholder:"Search publication...",icon:l.Text},size:150,minSize:128,enableColumnFilter:!0},{id:"volume",accessorKey:"volume",header:e=>{let{column:n}=e;return(0,t.jsx)(c.DataTableColumnHeader,{column:n,title:"Volume"})},cell:e=>{let{getValue:n,row:r,column:i,table:a}=e;return(0,t.jsx)(w,{row:r,children:(0,t.jsx)(d.EditableTableCell,{getValue:n,row:r,column:i,table:a,cellType:"text",disabled:"CHAT"===r.original.type})})},meta:{label:"Volume",placeholder:"Search volume...",icon:l.Text},size:128,minSize:128,enableColumnFilter:!0},{id:"issue",accessorKey:"issue",header:e=>{let{column:n}=e;return(0,t.jsx)(c.DataTableColumnHeader,{column:n,title:"Issue"})},cell:e=>{let{getValue:n,row:r,column:i,table:a}=e;return(0,t.jsx)(w,{row:r,children:(0,t.jsx)(d.EditableTableCell,{getValue:n,row:r,column:i,table:a,cellType:"text",disabled:"CHAT"===r.original.type})})},meta:{label:"Issue",placeholder:"Search issue...",icon:l.Text},size:128,minSize:128,enableColumnFilter:!0},{id:"pages",accessorKey:"pages",header:e=>{let{column:n}=e;return(0,t.jsx)(c.DataTableColumnHeader,{column:n,title:"Pages"})},cell:e=>{let{getValue:n,row:r,column:i,table:a}=e;return(0,t.jsx)(w,{row:r,children:(0,t.jsx)(d.EditableTableCell,{getValue:n,row:r,column:i,table:a,cellType:"text",disabled:"CHAT"===r.original.type})})},meta:{label:"Pages",placeholder:"Search pages...",icon:l.Text},size:128,minSize:128,enableColumnFilter:!0},{id:"doi",accessorKey:"doi",header:e=>{let{column:n}=e;return(0,t.jsx)(c.DataTableColumnHeader,{column:n,title:"DOI"})},cell:e=>{let{getValue:n,row:r,column:i,table:a}=e;return(0,t.jsx)(w,{row:r,children:(0,t.jsx)(d.EditableTableCell,{getValue:n,row:r,column:i,table:a,cellType:"doi",disabled:"CHAT"===r.original.type})})},meta:{label:"DOI",placeholder:"Search DOI...",icon:l.Text},size:150,minSize:128,enableColumnFilter:!0},{id:"issn",accessorKey:"issn",header:e=>{let{column:n}=e;return(0,t.jsx)(c.DataTableColumnHeader,{column:n,title:"ISSN"})},cell:e=>{let{getValue:n,row:r,column:i,table:a}=e;return(0,t.jsx)(w,{row:r,children:(0,t.jsx)(d.EditableTableCell,{getValue:n,row:r,column:i,table:a,cellType:"issn",disabled:"CHAT"===r.original.type})})},meta:{label:"ISSN",placeholder:"Search ISSN...",icon:l.Text},size:128,minSize:128,enableColumnFilter:!0},{id:"isbn",accessorKey:"isbn",header:e=>{let{column:n}=e;return(0,t.jsx)(c.DataTableColumnHeader,{column:n,title:"ISBN"})},cell:e=>{let{getValue:n,row:r,column:i,table:a}=e;return(0,t.jsx)(w,{row:r,children:(0,t.jsx)(d.EditableTableCell,{getValue:n,row:r,column:i,table:a,cellType:"isbn",disabled:"CHAT"===r.original.type})})},meta:{label:"ISBN",placeholder:"Search ISBN...",icon:l.Text},size:128,minSize:128,enableColumnFilter:!0},{id:"url",accessorKey:"docMetadataurl",header:e=>{let{column:n}=e;return(0,t.jsx)(c.DataTableColumnHeader,{column:n,title:"URL"})},cell:e=>{let{getValue:n,row:r,column:i,table:a}=e;return(0,t.jsx)(w,{row:r,children:(0,t.jsx)(d.EditableTableCell,{getValue:n,row:r,column:i,table:a,cellType:"url",disabled:"CHAT"===r.original.type})})},meta:{label:"URL",placeholder:"Search URL...",icon:l.Text},size:128,minSize:128,enableColumnFilter:!0},{id:"citationCount",accessorKey:"citationCount",header:e=>{let{column:n}=e;return(0,t.jsx)(c.DataTableColumnHeader,{column:n,title:"Citation count"})},cell:e=>{let{getValue:n,row:r,column:i,table:a}=e;return(0,t.jsx)(w,{row:r,children:(0,t.jsx)(d.EditableTableCell,{getValue:n,row:r,column:i,table:a,cellType:"number",disabled:"CHAT"===r.original.type})})},meta:{label:"Citation count",placeholder:"Search citation count...",variant:"number"},size:150,minSize:128,enableColumnFilter:!0,sortingFn:(e,t)=>{var n,r;let i=null!=(n=e.original.citationCount)?n:0;return(null!=(r=t.original.citationCount)?r:0)-i}},{id:"abstract",accessorKey:"abstract",header:e=>{let{column:n}=e;return(0,t.jsx)(c.DataTableColumnHeader,{column:n,title:"Abstract"})},cell:e=>{let{getValue:n,row:r,column:i,table:a}=e;return(0,t.jsx)(w,{row:r,children:(0,t.jsx)(d.EditableTableCell,{getValue:n,row:r,column:i,table:a,cellType:"summary"})})},meta:{label:"Abstract",placeholder:"Search abstract...",icon:l.Text},size:400,minSize:128,enableColumnFilter:!0}],[S,_])}}},897325:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("columns-3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]])},356547:e=>{"use strict";e.s({Columns3:()=>t.default});var t=e.i(897325)},342245:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("panel-top",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}]])},899403:e=>{"use strict";e.s({PanelTop:()=>t.default});var t=e.i(342245)},161349:e=>{"use strict";e.s({usePersistedViewType:()=>n});var t=e.i(819403);let n=e=>{let{viewType:n,setViewType:r}=(0,t.useTableState)(e);return{viewType:n,setViewType:r}}},808277:e=>{"use strict";e.s({ViewSettingsSelect:()=>g});var t=e.i(290479),n=e.i(356547),r=e.i(899403),i=e.i(670770),a=e.i(118246),o=e.i(373150),s=e.i(704255),l=e.i(885493),u=e.i(972899),c=e.i(303652),d=e.i(301669),h=e.i(252390),p=e.i(289702),f=e.i(161349),m=e.i(819403);let g=e=>{var g;let{table:y,items:b,isHomepage:x=!1,tableId:w}=e,[k,S]=(0,o.useState)(!1),{viewType:_,setViewType:C}=(0,f.usePersistedViewType)(w),{columnOrder:A,setColumnOrder:E}=(0,m.useTableState)(w),[T,M]=(0,a.useQueryState)("itemId",a.parseAsString),{track:I}=(0,h.default)(),N=(0,o.useMemo)(()=>y?y.getAllColumns().filter(e=>void 0!==e.accessorFn&&e.getCanHide()):[],[y]),D=null!=(g=null==y?void 0:y.getState().columnVisibility)?g:{},P=(0,o.useMemo)(()=>{if(!N.length)return[];if(!A||0===A.length)return N;let e=[...N];return e.sort((e,t)=>{let n=A.indexOf(e.id),r=A.indexOf(t.id);return -1===n?1:-1===r?-1:n-r}),e},[N,A]),R=(0,o.useMemo)(()=>P.map(e=>{var t,n;return{id:e.id,label:null!=(n=null==(t=e.columnDef.meta)?void 0:t.label)?n:e.id,isVisible:e.getIsVisible(),column:e}}),[P,D]),O=(0,o.useMemo)(()=>!!x||!!b&&0===(0,l.filterOnlyAllowedGroup)(b).length,[b,x]);return(0,t.jsxs)(c.Popover,{open:k,onOpenChange:S,children:[(0,t.jsxs)(c.PopoverTrigger,{className:(0,s.buttonVariants)({variant:"outline",size:"medium",className:"!font-medium border-dashed pr-2 pl-3"}),children:[(0,t.jsx)(u.Icon,{as:n.Columns3}),(0,t.jsx)("span",{children:"Display"}),(0,t.jsx)("span",{className:"text-text-secondary",children:"table"===_?"Table":"Tabs"})]}),(0,t.jsxs)(c.PopoverContent,{align:"start",className:"flex p-0 flex-col gap-7 w-[256px] max-h-[min(60vh,400px)] overflow-y-auto scrollbar-overlay",children:[(0,t.jsxs)("div",{className:"flex gap-4 p-4",children:[(0,t.jsxs)("div",{onClick:()=>{C("table"),M(null),S(!1)},className:(0,p.cn)("flex flex-col min-h-16 gap-2 text-sm items-center justify-center hover:bg-accent cursor-pointer border rounded-4 w-full","table"===_&&"bg-accent"),children:[(0,t.jsx)(u.Icon,{as:i.Table}),(0,t.jsx)("span",{children:"Table"})]}),(0,t.jsxs)("div",{onClick:()=>{O||(C("tabs"),S(!1))},className:(0,p.cn)("flex flex-col items-center gap-2 text-sm justify-center hover:bg-accent cursor-pointer border rounded-4 w-full","tabs"===_&&"bg-accent",O&&"opacity-50"),children:[(0,t.jsx)(u.Icon,{as:r.PanelTop}),(0,t.jsx)("span",{children:"Tabs"})]})]}),"table"===_&&R.length>0&&(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("p",{className:"text-text-secondary text-sm px-4",children:"Table options"}),(0,t.jsx)(d.SortableList,{items:R,onReorder:e=>{y&&E(e.map(e=>e.id))},onToggleVisibility:e=>{let t=R.filter(e=>e.isVisible);e.isVisible&&1===t.length||(e.column.toggleVisibility(!e.column.getIsVisible()),I("library_column_added",{columnId:e.column.id,visible:!e.column.getIsVisible()}))}})]})]})]})}},348296:e=>{"use strict";e.s({ChatbotTable:()=>A});var t=e.i(290479),n=e.i(78015),r=e.i(878969),i=e.i(608294),a=e.i(257140),o=e.i(373150),s=e.i(488732),l=e.i(12560),u=e.i(482698),c=e.i(362858),d=e.i(702255),h=e.i(186776),p=e.i(252390),f=e.i(814733),m=e.i(289702),g=e.i(32359),y=e.i(943965),b=e.i(816611),x=e.i(697827),w=e.i(17522),k=e.i(429478),S=e.i(824045),_=e.i(819403),C=e.i(808277);let A=e=>{let{tableId:A,data:E,isHomepage:T,hideControls:M=!1}=e,{filters:I,sorting:N,columnVisibility:D,columnOrder:P,columnSizing:R,setFilters:O,setSorting:j,setColumnVisibility:F,setColumnOrder:L,setColumnSizing:z}=(0,_.useTableState)(A),B=(0,i.useSetAtom)((0,w.tableFiltersAtomFamily)(A)),U=(0,o.useMemo)(()=>E.filter(e=>"GROUP"!==e.type&&"WORKSPACE"!==e.type&&"CHAT"!==e.type).length,[E]),H=(0,o.useMemo)(()=>E.filter(e=>"GROUP"!==e.type&&"NOTHING"!==e.type&&"WORKSPACE"!==e.type).sort((e,t)=>t.createdAt.getTime()-e.createdAt.getTime()).map(e=>{var t,n;return"CHAT"!==e.type&&(null!=(n=null==(t=e.chats)?void 0:t.length)?n:0)===0?{...e,chats:[{id:(0,a.nanoid)(),type:"PLACEHOLDER",name:"No chats",createdAt:new Date,authors:null,publicationDate:null,isIndexed:!1,displayOrder:null,documentUrl:null,groupId:null,teamId:null,userId:"",summary:null,groupCollapsed:!1,url:null,docMetadataurl:null,chats:[],lastViewedAt:null,publication:null,volume:null,issue:null,pages:null,doi:null,issn:null,isbn:null,abstract:null,citationCount:0}]}:e}),[E]),W=(0,o.useRef)(U);(0,o.useEffect)(()=>{U>W.current&&B([]),W.current=U},[U,B]);let{columns:V}=(0,S.useTableColumns)({data:H,isHomepage:T}),{filteredItems:q}=(0,k.useClientSideFilters)({items:H,filters:I}),G=f.api.useUtils(),{track:$}=(0,p.default)(),{mutate:K}=f.api.documentMetadata.update.useMutation({onMutate:e=>{e.chatbotId&&G.workspace.all.setData(void 0,t=>t?{...t,entities:t.entities.map(t=>t.id===e.chatbotId?{...t,...Object.fromEntries(Object.entries(e).map(e=>{let[t,n]=e;return"keywords"===t?["tags",null===n?[]:n]:"publicationDate"===t?["publicationDate",n]:[t,n]}))}:t)}:t)},onSuccess:(e,t)=>{if(e&&t.chatbotId&&void 0!==e.keywords){let n=null===e.keywords?[]:e.keywords;G.tags.tags.setData(void 0,e=>e?{...e,[t.chatbotId]:n}:e),G.related.tags.setData(t.chatbotId,n)}}}),Y=(0,o.useMemo)(()=>["select",...P],[P]),X=(0,r.useReactTable)({meta:{tableId:A,updateData:(e,t,n)=>{let r=q[e];if(!r)return;$("tableCellEdited",{columnType:t,documentType:r.type,hasValue:null!=n&&""!==n,valueLength:"string"==typeof n||Array.isArray(n)?n.length:+(null!=n)});let i=(e=>"tags"===e?"keywords":"published"===e?"publicationDate":e)(t);K({chatbotId:r.id,[i]:n})}},columns:V,data:q,enableRowSelection:!0,columnResizeMode:"onChange",getRowId:e=>e.id,getSubRows:e=>e.chats,state:{sorting:N,columnVisibility:D,columnOrder:Y,columnSizing:R},onSortingChange:j,onColumnVisibilityChange:F,onColumnOrderChange:L,onColumnSizingChange:z,getExpandedRowModel:(0,n.getExpandedRowModel)(),getCoreRowModel:(0,n.getCoreRowModel)(),getFilteredRowModel:(0,n.getFilteredRowModel)(),getSortedRowModel:(0,n.getSortedRowModel)(),getFacetedRowModel:(0,n.getFacetedRowModel)(),getFacetedUniqueValues:(0,n.getFacetedUniqueValues)(),getFacetedMinMaxValues:(0,n.getFacetedMinMaxValues)(),manualPagination:!0}),Z=0===q.length;return(0,t.jsxs)("div",{className:(0,m.cn)("relative h-full min-h-0 flex flex-col"),children:[(0,t.jsx)(y.ChatbotTableSelectSync,{table:X}),(0,t.jsx)(s.DataTableActionBar,{table:X,className:T?"w-fit justify-start max-w-none":"justify-start w-fit max-w-none",children:(0,t.jsx)(g.ChatbotTableActions,{table:X,isHomepage:T})}),!M&&(0,t.jsxs)("div",{className:"flex flex-col top-0 bg-background-primary z-10",children:[(0,t.jsxs)("div",{className:"flex py-[10px] border-b border-border-muted px-4 items-center justify-between ",children:[T?(0,t.jsx)(b.HomepageViewSelect,{table:X,tableId:A}):(0,t.jsx)(C.ViewSettingsSelect,{isHomepage:T,items:H,table:X,tableId:A}),(0,t.jsx)("div",{className:"flex items-center gap-4",children:(0,t.jsx)(d.default,{copyText:"Add or create"})})]}),(0,t.jsxs)("div",{className:"flex items-center flex-wrap gap-4 w-full px-4 z-10 py-4 border-b border-border-muted",children:[(0,t.jsx)(u.DataTableSortList,{table:X}),(0,t.jsx)(h.Separator,{orientation:"vertical",className:"h-8 min-h-8"}),(0,t.jsx)(l.DataTableFilterList,{table:X,onFiltersChange:O,filters:I})]})]}),(0,t.jsx)(c.DataTableVirtualizer,{table:X,emptyPlaceholder:Z?(0,t.jsx)(x.TablePlaceholder,{type:(()=>{let e=I.length>0,t=E.length>0,n=q.length>0;if(!T)return t&&e&&!n?"filtered":"folder";if(!t)return"library";if(e&&!n)return"filtered";return"library"})()}):void 0,tableContainerClassName:(0,m.cn)(E.length>0&&"border-b border-border-muted")})]})}},969029:e=>{"use strict";e.s({default:()=>i,getGroupMembers:()=>r});var t=e.i(373150),n=e.i(852951);function r(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Set;if(i.has(t))return[];let a=e.find(e=>e.id===t);return a&&"GROUP"===a.type?(i.add(t),e.filter(e=>e.groupId===a.id).filter(e=>"CHAT"!==e.type||n).flatMap(t=>"GROUP"===t.type?r(e,t.id,n,i):[t])):[]}function i(e){let i=!(arguments.length>1)||void 0===arguments[1]||arguments[1],{data:a}=(0,n.useWorkspace)(i);return{groupMembers:(0,t.useMemo)(()=>{var t;return e?r(null!=(t=null==a?void 0:a.entities)?t:[],e):[]},[e,a])}}},214994:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("share",[["path",{d:"M12 2v13",key:"1km8f5"}],["path",{d:"m16 6-4-4-4 4",key:"13yo43"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}]])},680974:e=>{"use strict";e.s({Share:()=>t.default});var t=e.i(214994)},73310:e=>{"use strict";e.s({useRecentWorkspaceItems:()=>i,useWorkspaceSearch:()=>r});var t=e.i(814733),n=e.i(373150);let r=e=>{let{query:r,limit:i=20,enabled:a=!0}=e,o=null==r?void 0:r.trim(),s=a&&!!(o&&o.length>0),{data:l,isLoading:u,error:c,fetchNextPage:d,hasNextPage:h,isFetchingNextPage:p,refetch:f}=t.api.workspace.search.useInfiniteQuery({query:o||void 0,limit:i,sortBy:"createdAt",sortOrder:"desc"},{enabled:s,refetchOnWindowFocus:!1,staleTime:3e5,gcTime:18e5,retry:(e,t)=>!(e>=3)&&(!t||!("status"in t)||"number"!=typeof t.status||t.status>=500),retryDelay:e=>Math.min(1e3*2**e,3e4),getNextPageParam:e=>{if(!(null==e?void 0:e.pagination))return;let{hasMore:t,offset:n,limit:r}=e.pagination,i=Array.isArray(e.items)?e.items.length:0;if(null!=t?t:i===r)return n+r}}),m=(0,n.useMemo)(()=>(null==l?void 0:l.pages)?l.pages.flatMap(e=>(null==e?void 0:e.items)||[]):[],[l]);return{results:m,totalCount:(0,n.useMemo)(()=>{var e,t;return(null==l||null==(t=l.pages)||null==(e=t[0])?void 0:e.pagination)?l.pages[0].pagination.total:0},[l]),isLoading:u,error:c,fetchNextPage:d,hasNextPage:h,isFetchingNextPage:p,refetch:f,isEmpty:!u&&0===m.length&&!c,isError:!!c,isSuccess:!u&&!c&&m.length>0}},i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,r=!(arguments.length>1)||void 0===arguments[1]||arguments[1],{data:i,isLoading:a,error:o,fetchNextPage:s,hasNextPage:l,isFetchingNextPage:u,refetch:c}=t.api.workspace.search.useInfiniteQuery({limit:e,sortBy:"createdAt",sortOrder:"desc"},{enabled:r,refetchOnWindowFocus:!1,staleTime:12e4,gcTime:9e5,retry:(e,t)=>!(e>=3)&&(!t||!("status"in t)||"number"!=typeof t.status||t.status>=500),retryDelay:e=>Math.min(1e3*2**e,3e4),getNextPageParam:e=>{if(!(null==e?void 0:e.pagination))return;let{hasMore:t,offset:n,limit:r}=e.pagination,i=Array.isArray(e.items)?e.items.length:0;if(null!=t?t:i===r)return n+r}}),d=(0,n.useMemo)(()=>(null==i?void 0:i.pages)?i.pages.flatMap(e=>(null==e?void 0:e.items)||[]):[],[i]);return{results:d,totalCount:(0,n.useMemo)(()=>{var e,t;return(null==i||null==(t=i.pages)||null==(e=t[0])?void 0:e.pagination)?i.pages[0].pagination.total:0},[i]),isLoading:a,error:o,fetchNextPage:s,hasNextPage:l,isFetchingNextPage:u,refetch:c,isEmpty:!a&&0===d.length&&!o,isError:!!o,isSuccess:!a&&!o&&d.length>0}}},279194:e=>{"use strict";e.s({useLibrarySearch:()=>i});var t=e.i(373150),n=e.i(966882),r=e.i(73310);let i=e=>{let{searchQuery:i,enabled:a=!0}=e,[o,s]=(0,t.useState)(""),l=(0,n.useDebouncedCallback)(s,350);(0,t.useEffect)(()=>{l(i)},[i,l]);let u=o.trim(),c=u.length>=1;(0,t.useEffect)(()=>{i.trim().length<1&&s("")},[i]);let{results:d,isLoading:h,fetchNextPage:p,hasNextPage:f,isFetchingNextPage:m,totalCount:g}=(0,r.useWorkspaceSearch)({query:u,limit:20,enabled:a&&c}),{results:y,isLoading:b,fetchNextPage:x,hasNextPage:w,isFetchingNextPage:k,totalCount:S}=(0,r.useRecentWorkspaceItems)(50),_=(0,t.useMemo)(()=>c?d||[]:y||[],[c,d,y]),C=c?h:b,A=c?f:w,E=c?m:k;return{results:_,isLoading:C,hasNextPage:A,isFetchingNextPage:E,fetchNextPage:c?p:x,totalCount:c?g:S,isSearching:c,isEmpty:!C&&0===_.length,hasSearchQuery:u.length>0}}},237950:e=>{"use strict";e.s({GroupChatbotSelector:()=>_});var t=e.i(290479),n=e.i(149404),r=e.i(874133),i=e.i(680974),a=e.i(397711),o=e.i(373150),s=e.i(663018),l=e.i(885905),u=e.i(279194),c=e.i(852951),d=e.i(814733),h=e.i(289702),p=e.i(704255),f=e.i(643943),m=e.i(958962),g=e.i(998145);e.i(567349);var y=e.i(111367),b=e.i(972899),x=e.i(303652),w=e.i(186776),k=e.i(457910);let S=e=>{let{folderId:n}=e,{data:r=[]}=d.api.folderShare.getFolderShares.useQuery(null!=n?n:"",{enabled:!!n}),i=r.filter(e=>"ACCEPTED"===e.status);return 0===i.length?null:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[i.slice(0,3).map(e=>(0,t.jsxs)(k.Tooltip,{children:[(0,t.jsx)(k.TooltipTrigger,{asChild:!0,children:(0,t.jsx)("div",{className:(0,h.cn)("w-8 h-8 rounded-full flex items-center justify-center text-xs font-medium border border-border text-text-tertiary"),children:((e,t)=>t?t.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2):e.split("@")[0].slice(0,1).toUpperCase())(e.email,e.userName)})}),(0,t.jsxs)(k.TooltipContent,{className:"z-[9999]",children:[(0,t.jsx)("p",{children:((e,t)=>t||e.split("@")[0])(e.email,e.userName)}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:e.email})]})]},e.id)),i.length>3&&(0,t.jsxs)(k.Tooltip,{children:[(0,t.jsx)(k.TooltipTrigger,{asChild:!0,children:(0,t.jsxs)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-xs font-medium border border-border text-text-tertiary",children:["+",i.length-3]})}),(0,t.jsx)(k.TooltipContent,{children:(0,t.jsxs)("p",{children:[i.length-3," more people"]})})]})]}),(0,t.jsx)(w.Separator,{orientation:"vertical",className:"h-8 min-h-8 ml-3"})]})},_=e=>{let{itemId:d,groupMembers:k,chatbotId:_,onSelect:C,isLibrary:A=!1}=e,E=(0,a.useRouter)(),{user:T}=(0,l.useAuth)(),{data:M}=(0,c.useWorkspace)(),[I,N]=(0,o.useState)(!1),[D,P]=(0,o.useState)(""),{openModal:R}=(0,f.useShareFolderModalStore)(),O=(0,o.useMemo)(()=>_&&M?M.entities.find(e=>e.id===_):null,[_,M]),j=(null==O?void 0:O.userId)===(null==T?void 0:T.id),F=k.filter(e=>"CHAT"!==e.type),L=F.length,{results:z,isLoading:B,hasNextPage:U,isFetchingNextPage:H,fetchNextPage:W,isSearching:V}=(0,u.useLibrarySearch)({searchQuery:D,enabled:A}),q=(e,t)=>{var n,r;let i=(null==e?void 0:e.createdAt)instanceof Date?e.createdAt.getTime():new Date(null!=(n=null==e?void 0:e.createdAt)?n:0).getTime()||0;return((null==t?void 0:t.createdAt)instanceof Date?t.createdAt.getTime():new Date(null!=(r=null==t?void 0:t.createdAt)?r:0).getTime()||0)-i},G=(0,o.useMemo)(()=>{if(!A){let e=e=>/^[A-Za-z]/.test(e)?0:/^[0-9]/.test(e)?2:1,t=D.trim().toLowerCase(),n=[...F];return(t?n.filter(e=>{var n;return(null!=(n=e.name)?n:"").toLowerCase().includes(t)||e.id.toLowerCase().includes(t)}):n).sort((t,n)=>((t,n)=>{let r=(null!=t?t:"").trim(),i=(null!=n?n:"").trim(),a=e(r)-e(i);return 0!==a?a:r.localeCompare(i,void 0,{sensitivity:"base"})})(t.name,n.name))}return[...(z||[]).filter(e=>"CHAT"!==e.type)].sort(q)},[A,F,z,D]),$=!!A&&B,K=!!A&&U,Y=!!A&&H,X=A?W:void 0,Z=(0,o.useRef)(null),J=(0,o.useRef)(null),Q=(0,o.useRef)(null);return(0,o.useEffect)(()=>{var e;if(A&&Q.current&&K&&!Y)return J.current&&J.current.disconnect(),J.current=new IntersectionObserver(e=>{let[t]=e;t.isIntersecting&&K&&!Y&&X&&X()},{root:null!=(e=Z.current)?e:null,rootMargin:"100px",threshold:.1}),J.current.observe(Q.current),()=>{J.current&&J.current.disconnect()}},[A,K,Y,X]),(0,o.useEffect)(()=>()=>{J.current&&J.current.disconnect()},[]),(0,o.useEffect)(()=>{I||P("")},[I]),(0,t.jsxs)("div",{className:"flex gap-4 items-center ml-auto",children:[(0,t.jsx)(S,{folderId:_}),(0,t.jsxs)("p",{className:"pl-1 text-sm text-text-primary",children:[L," ",A?"files in library":"files in the folder"]}),(0,t.jsxs)(x.Popover,{open:I,onOpenChange:N,children:[(0,t.jsx)(x.PopoverTrigger,{asChild:!0,children:(0,t.jsx)(p.Button,{className:"h-11 w-11 p-0",variant:"outline",size:"xs",leadingIcon:(0,t.jsx)(m.LibraryIcon,{size:16}),"aria-label":"Browse files"})}),(0,t.jsx)(x.PopoverContent,{align:"end",className:"overflow-hidden p-0 w-[200px]",children:(0,t.jsxs)(y.Command,{shouldFilter:!1,filter:()=>1,className:"gap-0",children:[(0,t.jsx)(n.CommandInput,{className:"text-sm w-full px-4 py-4 border-b placeholder:text-text-secondary bg-transparent focus-visible:outline-none font-medium text-text-primary",value:D,onValueChange:P,placeholder:"Search files..."}),(0,t.jsx)(y.CommandList,{ref:Z,className:"max-h-80 overflow-y-auto scrollbar-overlay",children:$&&0===G.length?(0,t.jsx)(y.CommandGroup,{children:(0,t.jsxs)("div",{className:"flex items-center justify-center p-6",children:[(0,t.jsx)(s.LoadingSpinner,{variant:"small"}),(0,t.jsx)("span",{className:"ml-4 text-sm text-text-secondary",children:V?"Searching...":"Loading..."})]})}):0===G.length?(0,t.jsx)(y.CommandGroup,{children:(0,t.jsx)("div",{className:"p-6 text-sm text-text-secondary",children:V?"No files found.":A?"No files in library":"No files in this folder."})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(y.CommandGroup,{className:"p-2",children:G.map(e=>{var n;return(0,t.jsxs)(y.CommandItem,{className:"py-2",value:"".concat(e.name,"-").concat(e.id),onSelect:()=>{A?E.push("/b/".concat(e.id)):C(e.id),N(!1)},children:[(0,t.jsx)(b.Icon,{className:"flex-shrink-0",as:(0,g.default)({type:e.type})}),(0,t.jsx)("span",{className:"truncate",children:null!=(n=e.name)?n:"Untitled"}),!A&&(0,t.jsx)(b.Icon,{as:r.Check,className:(0,h.cn)("ml-auto size-4 shrink-0 text-blue",d===e.id?"opacity-100":"opacity-0")})]},e.id)})}),K&&(0,t.jsx)("div",{ref:Q,className:"h-2 w-full","aria-hidden":"true"}),Y&&(0,t.jsx)(y.CommandGroup,{children:(0,t.jsxs)("div",{className:"flex items-center justify-center p-6",children:[(0,t.jsx)(s.LoadingSpinner,{variant:"small"}),(0,t.jsx)("span",{className:"ml-4 text-sm text-text-secondary",children:"Loading more..."})]})})]})})]})})]}),_&&O&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(w.Separator,{orientation:"vertical",className:"h-8 min-h-8"}),(0,t.jsx)(p.Button,{variant:"outline",size:"medium",className:"gap-2 h-[28px]",leadingIcon:(0,t.jsx)(b.Icon,{as:i.Share,size:"sm"}),label:"Share",onClick:()=>{var e;return R({folderId:_,isInviteToggled:null!=(e=O.isInviteToggled)&&e,isTeamToggled:!!O.teamId,isOwner:j})}})]})]})}},275325:e=>{"use strict";e.s({GroupChatbotTabs:()=>s});var t=e.i(290479),n=e.i(289702),r=e.i(116075),i=e.i(998145),a=e.i(972899),o=e.i(476440);let s=e=>{let{filteredGroupMembers:s,activeIndex:l,setItemId:u}=e;return(0,t.jsx)("div",{className:"flex",children:(0,t.jsxs)("div",{className:"flex overflow-x-auto scrollbar-hide pl-4 w-full bg-control-primary-background",children:[s.map((e,c)=>{var d;let h=l+1===c,p=e.isIndexed||"RECORDING"===e.type||"NOTE"===e.type||"CHAT"===e.type,f="FAILED"===e.ingestionStatus||"TIMEOUT"===e.ingestionStatus||!1===p&&e.createdAt&&new Date().getTime()-new Date(e.createdAt).getTime()>18e5;return(0,t.jsxs)("div",{className:(0,n.cn)("relative h-[36px] w-[180px] whitespace-nowrap  flex items-center -ml-[1px] cursor-pointer rounded-t-md bg-control-primary text-text-secondary gap-4 px-4 py-4 text-sm",l===c&&"bg-background-primary text-text-primary border-b-0",f&&"text-destructive-solid"),style:{zIndex:c},onClick:()=>{u(e.id)},children:[(0,t.jsx)("div",{className:(0,n.cn)("absolute top-0 left-0 h-[13px] w-full border-t border-r border-l rounded-t-md")}),0!==c&&(0,t.jsx)("div",{className:(0,n.cn)("absolute bottom-0 -left-0 border-l z-20 size-[23px] border-b",c===l&&"-left-[22px] border-l-0 border-r"),style:{boxShadow:h||c===l?"0 10px 0 0 hsl(var(--background))":"0 10px 0 0 hsl(var(--muted))",borderBottomLeftRadius:c===l?"0":"50%",borderBottomRightRadius:c===l?"50%":"0"}}),0===c&&(0,t.jsx)("div",{className:"absolute bottom-0 -left-[22px] border-r z-20 size-[23px] border-b",style:{boxShadow:c===l?"0 10px 0 0 hsl(var(--background))":"0 10px 0 0 hsl(var(--muted))",borderBottomRightRadius:"50%"}}),c===s.length-1&&(0,t.jsx)("div",{className:(0,n.cn)(c===l&&"z-40","absolute bottom-0 -right-[22px] border-l  size-[23px] border-b"),style:{boxShadow:c===l?"0 10px 0 0 hsl(var(--background))":"0 10px 0 0 hsl(var(--muted))",borderBottomLeftRadius:"50%"}}),(0,t.jsx)("div",{className:(0,n.cn)("absolute bottom-0 left-[23px] w-full z-30 h-px bg-border",l===c&&"bg-background-primary left-[11px]",0===c&&"-left-[22px] w-[calc(100%+23px)]")}),!h&&l!==c&&0!==c&&(0,t.jsx)("div",{className:(0,n.cn)("absolute bottom-0 left-0 w-[10px] z-30 h-px bg-border")}),f?(0,t.jsx)(o.ReusableTooltip,{content:"Import failed. Please try again.",align:"center",children:(0,t.jsx)(a.Icon,{as:r.CircleAlert,className:"size-4 flex-shrink-0 text-destructive-solid"})}):(0,t.jsx)(a.Icon,{className:"flex-shrink-0",as:(0,i.default)({type:e.type})}),(0,t.jsx)("span",{className:"truncate",children:null!=(d=e.name)?d:"Untitled"})]},e.id)}),(0,t.jsx)("div",{className:"flex-1 bg-border ml-[22px] h-px mt-auto"})]})})}},885493:e=>{"use strict";e.s({GroupChatbot:()=>N,filterOnlyAllowedGroup:()=>T,useCurrentGroupMembersIds:()=>I});var t=e.i(290479),n=e.i(78015),r=e.i(878969),i=e.i(647968),a=e.i(608294),o=e.i(884575),s=e.i(118246),l=e.i(373150),u=e.i(12560),c=e.i(482698),d=e.i(972899),h=e.i(348296),p=e.i(429478),f=e.i(161349),m=e.i(824045),g=e.i(819403),y=e.i(808277),b=e.i(969029),x=e.i(852951),w=e.i(227261),k=e.i(814733),S=e.i(289702),_=e.i(186776),C=e.i(418094),A=e.i(237950),E=e.i(275325);let T=e=>e.filter(e=>"NOTHING"!==e.type),M=(0,i.atom)([]),I=()=>{let[e,t]=(0,a.useAtom)(M);return{currentGroupMembersIds:e,setCurrentGroupMembersIds:t}},N=()=>{let[e,i]=(0,s.useQueryState)("itemId",s.parseAsString),a=(0,w.useChatbotStore)(e=>e.mode),M="chatbot"===a.type?a.chatbotId:"full-chat-library"===a.type?"library":"home",{viewType:N}=(0,f.usePersistedViewType)(M),{setCurrentGroupMembersIds:D}=I(),P=(0,x.useWorkspaceWithFolderNames)(),{data:R}=k.api.tags.tags.useQuery(void 0,{refetchOnWindowFocus:!1,enabled:"full-chat-library"===a.type}),O=(0,l.useMemo)(()=>"chatbot"===a.type&&P?P.find(e=>e.id===a.chatbotId):null,[P,a]),j=(null==O?void 0:O.isInviteToggled)===!0,F=(0,l.useMemo)(()=>"chatbot"===a.type?(0,b.getGroupMembers)(P||[],a.chatbotId,!0):"full-chat-library"===a.type&&P||[],[P,a]);(0,l.useEffect)(()=>{D(F.map(e=>e.id))},[F,D]);let L=(0,l.useMemo)(()=>{let e=F;return("full-chat-library"===a.type&&R&&(e=F.map(e=>({...e,tags:[...R[e.id]||[],...e.tags||[]].filter((e,t,n)=>n.indexOf(e)===t)})).filter(e=>"GROUP"!==e.type&&"WORKSPACE"!==e.type).sort((e,t)=>t.createdAt.getTime()-e.createdAt.getTime())),j&&"table"===N)?e.filter(e=>"CHAT"!==e.type).map(e=>({...e,chats:[]})):e},[F,R,a.type,j,N]),{columns:z}=(0,m.useTableColumns)({data:L,isHomepage:!1}),{filters:B,sorting:U,columnVisibility:H,columnOrder:W,columnSizing:V,setFilters:q,setSorting:G,setColumnVisibility:$,setColumnOrder:K,setColumnSizing:Y}=(0,g.useTableState)(M),{filteredItems:X}=(0,p.useClientSideFilters)({items:L,filters:B}),Z=(0,l.useMemo)(()=>U&&0!==U.length?[...X].sort((e,t)=>{for(let n of U){let{id:r,desc:i}=n,a=e[r],o=t[r];if(null!=a||null!=o){if(null==a)return i?-1:1;if(null==o||a<o)return i?1:-1;if(a>o)return i?-1:1}}return 0}):X,[X,U]),J=(0,l.useMemo)(()=>{let e="chatbot"===a.type?T((0,b.getGroupMembers)(P||[],a.chatbotId,!0)):T(Z);return"tabs"===N||j?e.filter(e=>"CHAT"!==e.type):e},[P,a,Z,N,j]),Q=e=>/^[A-Za-z]/.test(e)?0:/^[0-9]/.test(e)?2:1,ee=(e,t)=>{let n=(null!=e?e:"").trim(),r=(null!=t?t:"").trim(),i=Q(n)-Q(r);return 0!==i?i:n.localeCompare(r,void 0,{sensitivity:"base"})},et=(0,l.useMemo)(()=>{if("tabs"!==N)return J;let e=U&&U.length>0?U[0]:void 0;if((null==e?void 0:e.id)==="name"){let t=[...J];return t.sort((t,n)=>e.desc?-ee(t.name,n.name):ee(t.name,n.name)),t}return J},[J,N,U]),en=(0,l.useMemo)(()=>["select",...W],[W]),er=(0,r.useReactTable)({meta:{tableId:M},columns:z,data:X,enableRowSelection:!0,columnResizeMode:"onChange",getRowId:e=>e.id,getSubRows:e=>e.chats,state:{sorting:U,columnVisibility:H,columnOrder:en,columnSizing:V},onSortingChange:G,onColumnVisibilityChange:$,onColumnOrderChange:K,onColumnSizingChange:Y,getExpandedRowModel:(0,n.getExpandedRowModel)(),getCoreRowModel:(0,n.getCoreRowModel)(),getFacetedRowModel:(0,n.getFacetedRowModel)(),getSortedRowModel:(0,n.getSortedRowModel)(),getFacetedUniqueValues:(0,n.getFacetedUniqueValues)(),getFacetedMinMaxValues:(0,n.getFacetedMinMaxValues)(),manualPagination:!0}),ei=(0,l.useMemo)(()=>{let t="tabs"===N?et:J,n=e?t.findIndex(t=>t.id===e):0;return n>=0?n:0},[e,J,et,N]),ea=("tabs"===N?et:J)[ei];return(0,t.jsxs)("div",{className:"flex flex-col h-full min-h-0",children:[(0,t.jsxs)("div",{className:(0,S.cn)("flex items-center flex-wrap gap-4 w-full px-4 z-10 py-4 bg-background-primary","table"===N&&"border-b border-border-muted"),children:[(0,t.jsx)(y.ViewSettingsSelect,{table:er,items:J,tableId:M}),"table"===N&&(0,t.jsx)(c.DataTableSortList,{table:er}),(0,t.jsx)(_.Separator,{orientation:"vertical",className:"h-8 min-h-8"}),(0,t.jsx)(u.DataTableFilterList,{table:er,onFiltersChange:q,filters:B}),(0,t.jsx)(A.GroupChatbotSelector,{itemId:e,chatbotId:"chatbot"===a.type?a.chatbotId:null,groupMembers:J,onSelect:i,isLibrary:"full-chat-library"===a.type})]}),"tabs"===N?(0,t.jsx)(E.GroupChatbotTabs,{filteredGroupMembers:et,activeIndex:ei,setItemId:i}):(0,t.jsx)("div",{className:"flex flex-col h-full overflow-hidden",children:(0,t.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,t.jsx)(h.ChatbotTable,{data:L,tableId:M,hideControls:!0})})}),"tabs"===N&&(0===J.length?(0,t.jsxs)("div",{className:"flex flex-col h-full",children:[(0,t.jsx)("div",{className:"flex overflow-x-auto scrollbar-hide pl-4 w-full bg-control-primary-background h-[36px]",children:(0,t.jsx)("div",{className:"flex-1 bg-border ml-[22px] h-px mt-auto"})}),(0,t.jsx)("div",{className:"flex-1 flex justify-center items-center",children:(0,t.jsxs)("div",{className:"flex flex-col items-center max-w-[200px]",children:[(0,t.jsx)(d.Icon,{as:o.FolderIcon,size:"xl",className:"mb-4"}),(0,t.jsxs)("p",{children:["This"," ","full-chat-library"===a.type?"library is":"folder is"," ","empty"]}),(0,t.jsx)("p",{className:"text-text-secondary text-sm text-center",children:"full-chat-library"===a.type?"Add files to your library to get started":"Click 'Add or create' in the top right corner to add new files"})]})})]}):ea&&(0,t.jsx)(C.default,{chatbotId:ea.id,isChatOpen:!1}))]})}},67491:e=>{"use strict";e.s({useCitationColors:()=>o});var t=e.i(373150);class n{getStorageKey(e){return"citation-colors-".concat(e)}async getCitationColors(e){try{let t=localStorage.getItem(this.getStorageKey(e));return t?JSON.parse(t):{}}catch(e){return console.warn("Failed to load citation colors from localStorage:",e),{}}}async setCitationColor(e,t,n){try{let r={...await this.getCitationColors(e),[t]:n};localStorage.setItem(this.getStorageKey(e),JSON.stringify(r))}catch(e){console.warn("Failed to save citation color to localStorage:",e)}}async deleteCitationColor(e,t){try{let n={...await this.getCitationColors(e)};delete n[t],localStorage.setItem(this.getStorageKey(e),JSON.stringify(n))}catch(e){console.warn("Failed to delete citation color from localStorage:",e)}}}class r{async getCitationColors(e){return new n().getCitationColors(e)}async setCitationColor(e,t,r){return new n().setCitationColor(e,t,r)}async deleteCitationColor(e,t){return new n().deleteCitationColor(e,t)}}function i(e){return("document"!==e.data.type||e.data.originalElements)&&"text"!==e.data.type?"".concat(e.chatbotId,"-source-order-").concat(e.order):e.chatbotId}function a(e){return"external-".concat(e)}function o(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"localStorage",[s,l]=(0,t.useState)({}),[u,c]=(0,t.useState)(!0),d=(0,t.useMemo)(()=>(function(e){switch(e){case"localStorage":default:return new n;case"database":return new r}})(o),[o]);(0,t.useEffect)(()=>{let t=async()=>{c(!0);try{let t=await d.getCitationColors(e);l(t)}catch(e){console.warn("Failed to load citation colors:",e)}finally{c(!1)}};e&&t()},[e,d]);let h=(0,t.useCallback)(t=>{try{let n=localStorage.getItem("citation-colors-".concat(e));if(n)return JSON.parse(n)[t]||"blue"}catch(e){console.warn("Failed to read color from localStorage:",e)}return"blue"},[e]),p=(0,t.useCallback)(async(t,n)=>{try{await d.setCitationColor(e,t,n),l(e=>({...e,[t]:n}))}catch(e){console.warn("Failed to set citation color:",e)}},[d,e]),f=(0,t.useCallback)(async t=>{try{await d.deleteCitationColor(e,t),l(e=>{let n={...e};return delete n[t],n})}catch(e){console.warn("Failed to delete citation color:",e)}},[d,e]),m=(0,t.useCallback)(t=>{let n=i(t);try{let t=localStorage.getItem("citation-colors-".concat(e));if(t)return JSON.parse(t)[n]||"blue"}catch(e){console.warn("Failed to read color from localStorage:",e)}return"blue"},[e]),g=(0,t.useCallback)(async(e,t)=>p(i(e),t),[p]);return{citationColors:s,isLoading:u,getCitationColor:h,setCitationColor:p,deleteCitationColor:f,getSourceColor:m,setSourceColor:g,getCitationKey:i,getExternalCitationKey:a}}},389695:e=>{"use strict";e.s({useCitationExplanationStream:()=>a});var t=e.i(11968),n=e.i(373150),r=e.i(814733);let i=new class{getCacheKey(e,t,n){let r="".concat(e,":").concat(t.slice(0,100),":").concat(n.slice(0,200)),i=0;for(let e=0;e<r.length;e++)i=(i<<5)-i+r.charCodeAt(e),i&=i;return Math.abs(i).toString(36)}get(e,t,n){let r=this.getCacheKey(e,t,n),i=this.cache.get(r);return i?Date.now()-i.timestamp>this.ttl?(this.cache.delete(r),null):(this.cache.delete(r),this.cache.set(r,i),i):null}set(e,t,n,r){let i=this.getCacheKey(e,t,n);if(this.cache.size>=this.maxSize){let e=this.cache.keys().next().value;e&&this.cache.delete(e)}this.cache.set(i,{...r,timestamp:Date.now()})}clear(){this.cache.clear()}constructor(e=50,n=6e5){(0,t._)(this,"cache",void 0),(0,t._)(this,"maxSize",void 0),(0,t._)(this,"ttl",void 0),this.cache=new Map,this.maxSize=e,this.ttl=n}};function a(e,t,a){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{enabled:s=!1}=o,[l,u]=(0,n.useState)(""),[c,d]=(0,n.useState)(!1),[h,p]=(0,n.useState)(null),f="".concat(e.slice(0,100),":").concat(t.slice(0,200)),m=(0,n.useCallback)(()=>i.get(f,"",""),[f])(),g=s&&!m;return r.api.citations.explainStream.useSubscription({citationText:e,contextText:t,documentTitle:a},{enabled:g,onData:e=>{u(e.content),e.isComplete&&(d(!0),e.content.trim()&&i.set(f,"","",{explanation:e.content.trim(),documentTitle:e.documentTitle||"",documentSummary:""}))},onError:e=>{p(Error(e.message||"Stream error")),d(!0)}}),{data:m?{explanation:m.explanation,documentTitle:m.documentTitle,documentSummary:m.documentSummary}:l?{explanation:l,documentTitle:a||"",documentSummary:""}:null,isLoading:g&&!c&&!h,isComplete:c,error:h,hasTimedOut:!1,isFromCache:!!m}}},942957:e=>{"use strict";function t(e){let t=e;t=t.replace(/```latex\s*\n([\s\S]*?)\n```/g,(e,t)=>{let n=t.trim();return n.includes("&")||n.includes("\\\\")?n.includes("\\begin{")&&n.includes("\\end{")?n:"\\begin{align*}\n".concat(n,"\n\\end{align*}"):"$$".concat(n,"$$")});let n=[];t=t.replace(/(\\begin\{[^}]+\}[\s\S]*?\\end\{[^}]+\}|\$\$[\s\S]*?\$\$|\\\[[\s\S]*?\\\]|\\\(.*?\\\))/g,e=>(n.push(e),"<<LATEX_".concat(n.length-1,">>")));let r=[];return(t=(t=(t=(t=(t=(t=t.replace(/(```[\s\S]*?```|`[^`\n]+`)/g,(e,t)=>(r.push(t),"<<CODE_BLOCK_".concat(r.length-1,">>")))).replace(/\$(?=\d)/g,"\\$")).replace(/<<LATEX_(\d+)>>/g,(e,t)=>n[Number.parseInt(t)])).replace(/<<CODE_BLOCK_(\d+)>>/g,(e,t)=>r[Number.parseInt(t)])).replace(/(```[\S\s]*?```|`.*?`)|\\\[([\S\s]*?[^\\])\\]|\\\((.*?)\\\)/g,(e,t,n,r)=>null!=t?t:null!=n?"$$".concat(n,"$$"):null!=r?"$".concat(r,"$"):e)).replaceAll("$\\ce{","$\\\\ce{").replaceAll("$\\pu{","$\\\\pu{")).replace(/(\\begin\{[^}]+\}[\s\S]*?\\end\{[^}]+\}|\$\$[\s\S]*?\$\$|\\\[[\s\S]*?\\\]|\\\(.*?\\\))/g,e=>e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">"))}e.s({preprocessLaTeX:()=>t})},512109:e=>{"use strict";e.s({ChunkedChatMessageMarkdown:()=>y,default:()=>m});var t=e.i(290479),n=e.i(650429),r=e.i(448805),i=e.i(674666),a=e.i(373150),o=e.i(331237),s=e.i(852878),l=e.i(475096),u=e.i(280859),c=e.i(942957),d=e.i(289702),h=e.i(58372);let p=e=>e.replace(/(\*\*)[0-9#*]\u{FE0F}?\u{20E3}\s*/gu,"$1").replace(/(\*)[0-9#*]\u{FE0F}?\u{20E3}\s*/gu,"$1").replace(/(__)[0-9#*]\u{FE0F}?\u{20E3}\s*/gu,"$1").replace(/(_)[0-9#*]\u{FE0F}?\u{20E3}\s*/gu,"$1").replace(/[0-9#*]\u{FE0F}?\u{20E3}/gu,"").replace(/[0-9#*]\u{20E3}/gu,"").replace(/[\u{1F600}-\u{1F64F}]/gu,"").replace(/[\u{1F300}-\u{1F5FF}]/gu,"").replace(/[\u{1F680}-\u{1F6FF}]/gu,"").replace(/[\u{1F700}-\u{1F77F}]/gu,"").replace(/[\u{1F780}-\u{1F7FF}]/gu,"").replace(/[\u{1F800}-\u{1F8FF}]/gu,"").replace(/[\u{1F900}-\u{1F9FF}]/gu,"").replace(/[\u{1FA00}-\u{1FA6F}]/gu,"").replace(/[\u{1FA70}-\u{1FAFF}]/gu,"").replace(/[\u{2600}-\u{26FF}]/gu,"").replace(/[\u{2700}-\u{27BF}]/gu,"").replace(/[\u{1F1E6}-\u{1F1FF}]/gu,"").replace(/[\u{E0020}-\u{E007F}]/gu,"").replace(/[\u{1F000}-\u{1F02F}]/gu,"").replace(/[\u{1F0A0}-\u{1F0FF}]/gu,"").replace(/[\u{1F100}-\u{1F1FF}]/gu,"").replace(/[\u{2460}-\u{24FF}]/gu,"").replace(/[\u{2B50}-\u{2B55}]/gu,"").replace(/[\u{200D}]/gu,"").trim(),f=(0,a.memo)(e=>{let{markdownContent:n,type:r="DOCUMENT",className:i,sources:f,citationMap:m}=e,g=(0,a.useMemo)(()=>({h1:h.H1,h2:h.H2,h3:h.H3,h4:h.H4,h5:h.H5,h6:h.H6,blockquote:h.Blockquote,a:e=>{let{node:n,...r}=e,i=r.href,a=null==i?void 0:i.match(/^#(?:page-)?(\d+)$/);if(a){let e=a[1];return(0,t.jsx)(h.PageJump,{pageNumber:e})}return(0,t.jsx)("a",{...r,href:i,target:"_blank",rel:"noopener noreferrer",className:"px-2 rounded-[6px] bg-blue/10 !text-blue inline text-sm font-medium break-all max-w-full"})},ol:h.OrderedList,ul:h.UnorderedList,li:e=>{let{children:n,node:i,...a}=e;return(0,t.jsx)(h.ListItem,{type:r,sources:f,citationMap:m,...a,children:n})},code:h.CodeBlock,p:e=>{let{children:n,...i}=e;return(0,t.jsx)(h.Paragraph,{type:r,sources:f,citationMap:m,...i,children:n})},table:h.Table,tr:h.TableRow,td:e=>{let{children:n,...i}=e;return(0,t.jsx)(h.TableCell,{type:r,sources:f,citationMap:m,...i,children:n})},th:h.TableHead,strong:e=>{let{children:n,...i}=e;return(0,t.jsx)(h.Strong,{type:r,sources:f,citationMap:m,...i,children:n})},em:e=>{let{children:n,...i}=e;return(0,t.jsx)(h.Em,{type:r,sources:f,citationMap:m,...i,children:n})}}),[f,r,m]),y=(0,a.useMemo)(()=>{let e=p(n);return(0,c.preprocessLaTeX)(e)},[n]);return(0,t.jsx)(u.Streamdown,{className:(0,d.cn)(i),components:g,rehypePlugins:[[o.default,{output:"mathml"}]],remarkPlugins:[s.default,[l.default,{singleDollarTextMath:!0}]],children:y})},(e,t)=>e.markdownContent===t.markdownContent&&e.sources.length===t.sources.length&&e.type===t.type),m=(0,a.memo)(e=>{let{markdownContent:n,className:r,sources:o,type:s}=e,l=(0,a.useMemo)(()=>new Map,[]);return(0,a.useMemo)(()=>(function(e){return e?i.marked.lexer(e).map(e=>e.raw):[]})(p(n||"")),[n]).map((e,n)=>(0,t.jsx)(f,{markdownContent:e,className:r,sources:o,type:s,citationMap:l},"".concat(n)))},(e,t)=>e.markdownContent===t.markdownContent&&e.sources.length===t.sources.length&&e.type===t.type),g=(0,a.memo)(e=>{let{children:n,sources:r,type:i="DOCUMENT",citationMap:d}=e,f=(0,a.useMemo)(()=>({h1:h.H1,h2:h.H2,h3:h.H3,h4:h.H4,h5:h.H5,h6:h.H6,blockquote:h.Blockquote,a:e=>{let{node:n,...r}=e,i=r.href,a=null==i?void 0:i.match(/^#(?:page-)?(\d+)$/);if(a){let e=a[1];return(0,t.jsx)(h.PageJump,{pageNumber:e})}return(0,t.jsx)("a",{...r,href:i,target:"_blank",rel:"noopener noreferrer",className:"px-2 rounded-[6px] bg-blue/10 !text-blue inline text-sm font-medium break-all max-w-full"})},ol:h.OrderedList,ul:h.UnorderedList,li:e=>{let{children:n,node:a,...o}=e;return(0,t.jsx)(h.ListItem,{type:i,sources:r,citationMap:d,...o,children:n})},code:h.CodeBlock,p:e=>{let{children:n,...a}=e;return(0,t.jsx)(h.Paragraph,{type:i,sources:r,citationMap:d,...a,children:n})},table:h.Table,tr:h.TableRow,td:e=>{let{children:n,...a}=e;return(0,t.jsx)(h.TableCell,{type:i,sources:r,citationMap:d,...a,children:n})},th:h.TableHead,strong:e=>{let{children:n,...a}=e;return(0,t.jsx)(h.Strong,{type:i,sources:r,citationMap:d,...a,children:n})},em:e=>{let{children:n,...a}=e;return(0,t.jsx)(h.Em,{type:i,sources:r,citationMap:d,...a,children:n})}}),[r,i,d]),m=(0,a.useMemo)(()=>{let e=p(n);return(0,c.preprocessLaTeX)(e)},[n]);return(0,t.jsx)(u.Streamdown,{className:"whitespace-pre-wrap prose-pre:whitespace-pre-wrap",components:f,rehypePlugins:[[o.default,{output:"mathml"}]],remarkPlugins:[s.default,[l.default,{singleDollarTextMath:!0}]],children:m})},(e,t)=>e.children===t.children);g.displayName="MemoizedMarkdownChunk";let y=(0,a.memo)(e=>{let{markdownContent:i,className:o,sources:s,type:l="DOCUMENT"}=e,u=(0,a.useRef)(new Map),c=(0,a.useRef)(0),d=(0,a.useMemo)(()=>new Map,[]),h=(0,a.useMemo)(()=>(function(e){if(!e)return[];let t=[],n=e,r=(n=(n=n.replace(/(```[\s\S]*?```)/g,e=>(t.push(e),"<<PROTECTED_".concat(t.length-1,">>")))).replace(/(\\begin\{[^}]+\}[\s\S]*?\\end\{[^}]+\}|\$\$[\s\S]*?\$\$|\\\[[\s\S]*?\\\])/g,e=>(t.push(e),"<<PROTECTED_".concat(t.length-1,">>")))).split("\n\n");return 1===r.length?[r[0].replace(/<<PROTECTED_(\d+)>>/g,(e,n)=>t[Number.parseInt(n,10)])]:[...r.slice(0,-1).map(e=>"".concat(e,"\n\n")),r[r.length-1]].map(e=>e.replace(/<<PROTECTED_(\d+)>>/g,(e,n)=>t[Number.parseInt(n,10)]))})(p(i||"")),[i]),f=(null==i?void 0:i.length)||0,m=f>c.current;c.current=f;let y=(0,a.useMemo)(()=>(0,r.cx)("prose","prose-a:text-blue prose-a:no-underline","prose-a:cursor-pointer","prose-pre:my-0","prose-pre:py-3","prose-pre:pl-3","[&_pre.shiki]:py-3","[&_pre.shiki]:pl-6","[&_td]:pl-4","[&_td:first-child]:pl-4","[&_th]:pl-4","[&_th:first-child]:pl-4","prose-hr:invisible prose-hr:h-0 prose-hr:hidden","font-[450] prose-headings:font-[550] prose-strong:font-[550]","prose-li:my-0","whitespace-pre-wrap prose-pre:-pre-wrap","space-y-4","hyphens-auto",o),[o]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.default,{id:"92608fb86e5dd782",children:"@container chat-messages (width<=679px){.chat-markdown-wrapper.jsx-92608fb86e5dd782 .prose{max-width:100%!important;font-size:.875rem!important}.chat-markdown-wrapper.jsx-92608fb86e5dd782 .prose p,.chat-markdown-wrapper.jsx-92608fb86e5dd782 .prose li{font-size:.875rem!important;line-height:1.25rem!important}}"}),(0,t.jsx)("div",{className:"jsx-92608fb86e5dd782 chat-markdown-wrapper",children:(0,t.jsx)("div",{className:"jsx-92608fb86e5dd782 "+(y||""),children:h.map((e,n)=>{let r="".concat(e.slice(0,50),"-").concat(n,"-").concat(e.length),i=n===h.length-1&&m;if(!i&&u.current.has(r))return u.current.get(r);let a=(0,t.jsx)(g,{citationMap:d,sources:s,type:l,children:e},r);return i||u.current.set(r,a),a})})})]})},(e,t)=>e.markdownContent===t.markdownContent&&e.sources.length===t.sources.length&&e.type===t.type&&e.className===t.className);y.displayName="ChunkedChatMessageMarkdown"},221570:e=>{"use strict";e.s({default:()=>f});let t="KEYS",n="VALUES";class r{next(){let e=this.dive();return this.backtrack(),e}dive(){if(0===this._path.length)return{done:!0,value:void 0};let{node:e,keys:t}=i(this._path);if(""===i(t))return{done:!1,value:this.result()};let n=e.get(i(t));return this._path.push({node:n,keys:Array.from(n.keys())}),this.dive()}backtrack(){if(0===this._path.length)return;let e=i(this._path).keys;e.pop(),e.length>0||(this._path.pop(),this.backtrack())}key(){return this.set._prefix+this._path.map(e=>{let{keys:t}=e;return i(t)}).filter(e=>""!==e).join("")}value(){return i(this._path).node.get("")}result(){switch(this._type){case n:return this.value();case t:return this.key();default:return[this.key(),this.value()]}}[Symbol.iterator](){return this}constructor(e,t){let n=e._tree,r=Array.from(n.keys());this.set=e,this._type=t,this._path=r.length>0?[{node:n,keys:r}]:[]}}let i=e=>e[e.length-1],a=(e,t,n,r,i,o,s,l)=>{let u=o*s;u:for(let c of e.keys())if(""===c){let t=i[u-1];t<=n&&r.set(l,[e.get(c),t])}else{let u=o;for(let e=0;e<c.length;++e,++u){let r=c[e],a=s*u,o=a-s,l=i[a],d=Math.max(0,u-n-1),h=Math.min(s-1,u+n);for(let e=d;e<h;++e){let n=r!==t[e],s=i[o+e]+ +n,u=i[o+e+1]+1,c=i[a+e]+1,d=i[a+e+1]=Math.min(s,u,c);d<l&&(l=d)}if(l>n)continue u}a(e.get(c),t,n,r,i,u,s,l+c)}};class o{atPrefix(e){if(!e.startsWith(this._prefix))throw Error("Mismatched prefix");let[t,n]=s(this._tree,e.slice(this._prefix.length));if(void 0===t){let[t,r]=p(n);for(let n of t.keys())if(""!==n&&n.startsWith(r)){let i=new Map;return i.set(n.slice(r.length),t.get(n)),new o(i,e)}}return new o(t,e)}clear(){this._size=void 0,this._tree.clear()}delete(e){return this._size=void 0,c(this._tree,e)}entries(){return new r(this,"ENTRIES")}forEach(e){for(let[t,n]of this)e(t,n,this)}fuzzyGet(e,t){return((e,t,n)=>{let r=new Map;if(void 0===t)return r;let i=t.length+1,o=i+n,s=new Uint8Array(o*i).fill(n+1);for(let e=0;e<i;++e)s[e]=e;for(let e=1;e<o;++e)s[e*i]=e;return a(e,t,n,r,s,1,i,""),r})(this._tree,e,t)}get(e){let t=l(this._tree,e);return void 0!==t?t.get(""):void 0}has(e){let t=l(this._tree,e);return void 0!==t&&t.has("")}keys(){return new r(this,t)}set(e,t){if("string"!=typeof e)throw Error("key must be a string");return this._size=void 0,u(this._tree,e).set("",t),this}get size(){if(this._size)return this._size;this._size=0;let e=this.entries();for(;!e.next().done;)this._size+=1;return this._size}update(e,t){if("string"!=typeof e)throw Error("key must be a string");this._size=void 0;let n=u(this._tree,e);return n.set("",t(n.get(""))),this}fetch(e,t){if("string"!=typeof e)throw Error("key must be a string");this._size=void 0;let n=u(this._tree,e),r=n.get("");return void 0===r&&n.set("",r=t()),r}values(){return new r(this,n)}[Symbol.iterator](){return this.entries()}static from(e){let t=new o;for(let[n,r]of e)t.set(n,r);return t}static fromObject(e){return o.from(Object.entries(e))}constructor(e=new Map,t=""){this._size=void 0,this._tree=e,this._prefix=t}}let s=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(0===t.length||null==e)return[e,n];for(let r of e.keys())if(""!==r&&t.startsWith(r))return n.push([e,r]),s(e.get(r),t.slice(r.length),n);return n.push([e,t]),s(void 0,"",n)},l=(e,t)=>{if(0===t.length||null==e)return e;for(let n of e.keys())if(""!==n&&t.startsWith(n))return l(e.get(n),t.slice(n.length))},u=(e,t)=>{let n=t.length;n:for(let r=0;e&&r<n;){for(let i of e.keys())if(""!==i&&t[r]===i[0]){let a=Math.min(n-r,i.length),o=1;for(;o<a&&t[r+o]===i[o];)++o;let s=e.get(i);if(o===i.length)e=s;else{let n=new Map;n.set(i.slice(o),s),e.set(t.slice(r,r+o),n),e.delete(i),e=n}r+=o;continue n}let i=new Map;return e.set(t.slice(r),i),i}return e},c=(e,t)=>{let[n,r]=s(e,t);if(void 0!==n){if(n.delete(""),0===n.size)d(r);else if(1===n.size){let[e,t]=n.entries().next().value;h(r,e,t)}}},d=e=>{if(0===e.length)return;let[t,n]=p(e);if(t.delete(n),0===t.size)d(e.slice(0,-1));else if(1===t.size){let[n,r]=t.entries().next().value;""!==n&&h(e.slice(0,-1),n,r)}},h=(e,t,n)=>{if(0===e.length)return;let[r,i]=p(e);r.set(i+t,n),r.delete(i)},p=e=>e[e.length-1];class f{add(e){let{extractField:t,tokenize:n,processTerm:r,fields:i,idField:a}=this._options,o=t(e,a);if(null==o)throw Error('MiniSearch: document does not have ID field "'.concat(a,'"'));if(this._idToShortId.has(o))throw Error("MiniSearch: duplicate ID ".concat(o));let s=this.addDocumentId(o);for(let a of(this.saveStoredFields(s,e),i)){let i=t(e,a);if(null==i)continue;let o=n(i.toString(),a),l=this._fieldIds[a],u=new Set(o).size;for(let e of(this.addFieldLength(s,l,this._documentCount-1,u),o)){let t=r(e,a);if(Array.isArray(t))for(let e of t)this.addTerm(l,s,e);else t&&this.addTerm(l,s,t)}}}addAll(e){for(let t of e)this.add(t)}addAllAsync(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{chunkSize:n=10}=t,r={chunk:[],promise:Promise.resolve()},{chunk:i,promise:a}=e.reduce((e,t,r)=>{let{chunk:i,promise:a}=e;return(i.push(t),(r+1)%n==0)?{chunk:[],promise:a.then(()=>new Promise(e=>setTimeout(e,0))).then(()=>this.addAll(i))}:{chunk:i,promise:a}},r);return a.then(()=>this.addAll(i))}remove(e){let{tokenize:t,processTerm:n,extractField:r,fields:i,idField:a}=this._options,o=r(e,a);if(null==o)throw Error('MiniSearch: document does not have ID field "'.concat(a,'"'));let s=this._idToShortId.get(o);if(null==s)throw Error("MiniSearch: cannot remove document with ID ".concat(o,": it is not in the index"));for(let a of i){let i=r(e,a);if(null==i)continue;let o=t(i.toString(),a),l=this._fieldIds[a],u=new Set(o).size;for(let e of(this.removeFieldLength(s,l,this._documentCount,u),o)){let t=n(e,a);if(Array.isArray(t))for(let e of t)this.removeTerm(l,s,e);else t&&this.removeTerm(l,s,t)}}this._storedFields.delete(s),this._documentIds.delete(s),this._idToShortId.delete(o),this._fieldLength.delete(s),this._documentCount-=1}removeAll(e){if(e)for(let t of e)this.remove(t);else if(arguments.length>0)throw Error("Expected documents to be present. Omit the argument to remove all documents.");else this._index=new o,this._documentCount=0,this._documentIds=new Map,this._idToShortId=new Map,this._fieldLength=new Map,this._avgFieldLength=[],this._storedFields=new Map,this._nextId=0}discard(e){let t=this._idToShortId.get(e);if(null==t)throw Error("MiniSearch: cannot discard document with ID ".concat(e,": it is not in the index"));this._idToShortId.delete(e),this._documentIds.delete(t),this._storedFields.delete(t),(this._fieldLength.get(t)||[]).forEach((e,n)=>{this.removeFieldLength(t,n,this._documentCount,e)}),this._fieldLength.delete(t),this._documentCount-=1,this._dirtCount+=1,this.maybeAutoVacuum()}maybeAutoVacuum(){if(!1===this._options.autoVacuum)return;let{minDirtFactor:e,minDirtCount:t,batchSize:n,batchWait:r}=this._options.autoVacuum;this.conditionalVacuum({batchSize:n,batchWait:r},{minDirtCount:t,minDirtFactor:e})}discardAll(e){let t=this._options.autoVacuum;try{for(let t of(this._options.autoVacuum=!1,e))this.discard(t)}finally{this._options.autoVacuum=t}this.maybeAutoVacuum()}replace(e){let{idField:t,extractField:n}=this._options,r=n(e,t);this.discard(r),this.add(e)}vacuum(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.conditionalVacuum(e)}conditionalVacuum(e,t){return this._currentVacuum?(this._enqueuedVacuumConditions=this._enqueuedVacuumConditions&&t,null!=this._enqueuedVacuum||(this._enqueuedVacuum=this._currentVacuum.then(()=>{let t=this._enqueuedVacuumConditions;return this._enqueuedVacuumConditions=_,this.performVacuuming(e,t)})),this._enqueuedVacuum):!1===this.vacuumConditionsMet(t)?Promise.resolve():(this._currentVacuum=this.performVacuuming(e),this._currentVacuum)}async performVacuuming(e,t){let n=this._dirtCount;if(this.vacuumConditionsMet(t)){let t=e.batchSize||S.batchSize,r=e.batchWait||S.batchWait,i=1;for(let[e,n]of this._index){for(let[e,t]of n)for(let[r]of t)this._documentIds.has(r)||(t.size<=1?n.delete(e):t.delete(r));0===this._index.get(e).size&&this._index.delete(e),i%t==0&&await new Promise(e=>setTimeout(e,r)),i+=1}this._dirtCount-=n}await null,this._currentVacuum=this._enqueuedVacuum,this._enqueuedVacuum=null}vacuumConditionsMet(e){if(null==e)return!0;let{minDirtCount:t,minDirtFactor:n}=e;return t=t||C.minDirtCount,n=n||C.minDirtFactor,this.dirtCount>=t&&this.dirtFactor>=n}get isVacuuming(){return null!=this._currentVacuum}get dirtCount(){return this._dirtCount}get dirtFactor(){return this._dirtCount/(1+this._documentCount+this._dirtCount)}has(e){return this._idToShortId.has(e)}getStoredFields(e){let t=this._idToShortId.get(e);if(null!=t)return this._storedFields.get(t)}search(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{searchOptions:n}=this._options,r={...n,...t},i=this.executeQuery(e,t),a=[];for(let[e,{score:t,terms:n,match:o}]of i){let i=n.length||1,s={id:this._documentIds.get(e),score:t*i,terms:Object.keys(o),queryTerms:n,match:o};Object.assign(s,this._storedFields.get(e)),(null==r.filter||r.filter(s))&&a.push(s)}return e===f.wildcard&&null==r.boostDocument||a.sort(T),a}autoSuggest(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t={...this._options.autoSuggestOptions,...t};let n=new Map;for(let{score:r,terms:i}of this.search(e,t)){let e=i.join(" "),t=n.get(e);null!=t?(t.score+=r,t.count+=1):n.set(e,{score:r,terms:i,count:1})}let r=[];for(let[e,{score:t,terms:i,count:a}]of n)r.push({suggestion:e,terms:i,score:t/a});return r.sort(T),r}get documentCount(){return this._documentCount}get termCount(){return this._index.size}static loadJSON(e,t){if(null==t)throw Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return this.loadJS(JSON.parse(e),t)}static async loadJSONAsync(e,t){if(null==t)throw Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return this.loadJSAsync(JSON.parse(e),t)}static getDefault(e){if(x.hasOwnProperty(e))return m(x,e);throw Error('MiniSearch: unknown option "'.concat(e,'"'))}static loadJS(e,t){let{index:n,documentIds:r,fieldLength:i,storedFields:a,serializationVersion:o}=e,s=this.instantiateMiniSearch(e,t);for(let[e,t]of(s._documentIds=I(r),s._fieldLength=I(i),s._storedFields=I(a),s._documentIds))s._idToShortId.set(t,e);for(let[e,t]of n){let n=new Map;for(let e of Object.keys(t)){let r=t[e];1===o&&(r=r.ds),n.set(parseInt(e,10),I(r))}s._index.set(e,n)}return s}static async loadJSAsync(e,t){let{index:n,documentIds:r,fieldLength:i,storedFields:a,serializationVersion:o}=e,s=this.instantiateMiniSearch(e,t);for(let[e,t]of(s._documentIds=await N(r),s._fieldLength=await N(i),s._storedFields=await N(a),s._documentIds))s._idToShortId.set(t,e);let l=0;for(let[e,t]of n){let n=new Map;for(let e of Object.keys(t)){let r=t[e];1===o&&(r=r.ds),n.set(parseInt(e,10),await N(r))}++l%1e3==0&&await D(0),s._index.set(e,n)}return s}static instantiateMiniSearch(e,t){let{documentCount:n,nextId:r,fieldIds:i,averageFieldLength:a,dirtCount:s,serializationVersion:l}=e;if(1!==l&&2!==l)throw Error("MiniSearch: cannot deserialize an index created with an incompatible version");let u=new f(t);return u._documentCount=n,u._nextId=r,u._idToShortId=new Map,u._fieldIds=i,u._avgFieldLength=a,u._dirtCount=s||0,u._index=new o,u}executeQuery(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e===f.wildcard)return this.executeWildcardQuery(t);if("string"!=typeof e){let n={...t,...e,queries:void 0},r=e.queries.map(e=>this.executeQuery(e,n));return this.combineResults(r,n.combineWith)}let{tokenize:n,processTerm:r,searchOptions:i}=this._options,a={tokenize:n,processTerm:r,...i,...t},{tokenize:o,processTerm:s}=a,l=o(e).flatMap(e=>s(e)).filter(e=>!!e).map(b(a)).map(e=>this.executeQuerySpec(e,a));return this.combineResults(l,a.combineWith)}executeQuerySpec(e,t){let n,r,i={...this._options.searchOptions,...t},a=(i.fields||this._options.fields).reduce((e,t)=>({...e,[t]:m(i.boost,t)||1}),{}),{boostDocument:o,weights:s,maxFuzzy:l,bm25:u}=i,{fuzzy:c,prefix:d}={...w.weights,...s},h=this._index.get(e.term),p=this.termResults(e.term,e.term,1,e.termBoost,h,a,o,u);if(e.prefix&&(n=this._index.atPrefix(e.term)),e.fuzzy){let t=!0===e.fuzzy?.2:e.fuzzy,n=t<1?Math.min(l,Math.round(e.term.length*t)):t;n&&(r=this._index.fuzzyGet(e.term,n))}if(n)for(let[t,i]of n){let n=t.length-e.term.length;if(!n)continue;null==r||r.delete(t);let s=d*t.length/(t.length+.3*n);this.termResults(e.term,t,s,e.termBoost,i,a,o,u,p)}if(r)for(let t of r.keys()){let[n,i]=r.get(t);if(!i)continue;let s=c*t.length/(t.length+i);this.termResults(e.term,t,s,e.termBoost,n,a,o,u,p)}return p}executeWildcardQuery(e){let t=new Map,n={...this._options.searchOptions,...e};for(let[e,r]of this._documentIds){let i=n.boostDocument?n.boostDocument(r,"",this._storedFields.get(e)):1;t.set(e,{score:i,terms:[],match:{}})}return t}combineResults(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"or";if(0===e.length)return new Map;let n=g[t.toLowerCase()];if(!n)throw Error("Invalid combination operator: ".concat(t));return e.reduce(n)||new Map}toJSON(){let e=[];for(let[t,n]of this._index){let r={};for(let[e,t]of n)r[e]=Object.fromEntries(t);e.push([t,r])}return{documentCount:this._documentCount,nextId:this._nextId,documentIds:Object.fromEntries(this._documentIds),fieldIds:this._fieldIds,fieldLength:Object.fromEntries(this._fieldLength),averageFieldLength:this._avgFieldLength,storedFields:Object.fromEntries(this._storedFields),dirtCount:this._dirtCount,index:e,serializationVersion:2}}termResults(e,t,n,r,i,a,o,s){let l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:new Map;if(null==i)return l;for(let u of Object.keys(a)){let c=a[u],d=this._fieldIds[u],h=i.get(d);if(null==h)continue;let p=h.size,f=this._avgFieldLength[d];for(let i of h.keys()){if(!this._documentIds.has(i)){this.removeTerm(d,i,t),p-=1;continue}let a=o?o(this._documentIds.get(i),t,this._storedFields.get(i)):1;if(!a)continue;let g=h.get(i),b=this._fieldLength.get(i)[d],x=n*r*c*a*y(g,p,this._documentCount,b,f,s),w=l.get(i);if(w){w.score+=x,A(w.terms,e);let n=m(w.match,t);n?n.push(u):w.match[t]=[u]}else l.set(i,{score:x,terms:[e],match:{[t]:[u]}})}}return l}addTerm(e,t,n){let r=this._index.fetch(n,M),i=r.get(e);if(null==i)(i=new Map).set(t,1),r.set(e,i);else{let e=i.get(t);i.set(t,(e||0)+1)}}removeTerm(e,t,n){if(!this._index.has(n))return void this.warnDocumentChanged(t,e,n);let r=this._index.fetch(n,M),i=r.get(e);null==i||null==i.get(t)?this.warnDocumentChanged(t,e,n):1>=i.get(t)?i.size<=1?r.delete(e):i.delete(t):i.set(t,i.get(t)-1),0===this._index.get(n).size&&this._index.delete(n)}warnDocumentChanged(e,t,n){for(let r of Object.keys(this._fieldIds))if(this._fieldIds[r]===t)return void this._options.logger("warn","MiniSearch: document with ID ".concat(this._documentIds.get(e),' has changed before removal: term "').concat(n,'" was not present in field "').concat(r,'". Removing a document after it has changed can corrupt the index!'),"version_conflict")}addDocumentId(e){let t=this._nextId;return this._idToShortId.set(e,t),this._documentIds.set(t,e),this._documentCount+=1,this._nextId+=1,t}addFields(e){for(let t=0;t<e.length;t++)this._fieldIds[e[t]]=t}addFieldLength(e,t,n,r){let i=this._fieldLength.get(e);null==i&&this._fieldLength.set(e,i=[]),i[t]=r;let a=this._avgFieldLength[t]||0;this._avgFieldLength[t]=(a*n+r)/(n+1)}removeFieldLength(e,t,n,r){if(1===n){this._avgFieldLength[t]=0;return}let i=this._avgFieldLength[t]*n-r;this._avgFieldLength[t]=i/(n-1)}saveStoredFields(e,t){let{storeFields:n,extractField:r}=this._options;if(null==n||0===n.length)return;let i=this._storedFields.get(e);for(let a of(null==i&&this._storedFields.set(e,i={}),n)){let e=r(t,a);void 0!==e&&(i[a]=e)}}constructor(e){if((null==e?void 0:e.fields)==null)throw Error('MiniSearch: option "fields" must be provided');let t=null==e.autoVacuum||!0===e.autoVacuum?C:e.autoVacuum;this._options={...x,...e,autoVacuum:t,searchOptions:{...w,...e.searchOptions||{}},autoSuggestOptions:{...k,...e.autoSuggestOptions||{}}},this._index=new o,this._documentCount=0,this._documentIds=new Map,this._idToShortId=new Map,this._fieldIds={},this._fieldLength=new Map,this._avgFieldLength=[],this._nextId=0,this._storedFields=new Map,this._dirtCount=0,this._currentVacuum=null,this._enqueuedVacuum=null,this._enqueuedVacuumConditions=_,this.addFields(this._options.fields)}}f.wildcard=Symbol("*");let m=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0,g={or:(e,t)=>{for(let n of t.keys()){let r=e.get(n);if(null==r)e.set(n,t.get(n));else{let{score:e,terms:i,match:a}=t.get(n);r.score=r.score+e,r.match=Object.assign(r.match,a),E(r.terms,i)}}return e},and:(e,t)=>{let n=new Map;for(let r of t.keys()){let i=e.get(r);if(null==i)continue;let{score:a,terms:o,match:s}=t.get(r);E(i.terms,o),n.set(r,{score:i.score+a,terms:i.terms,match:Object.assign(i.match,s)})}return n},and_not:(e,t)=>{for(let n of t.keys())e.delete(n);return e}},y=(e,t,n,r,i,a)=>{let{k:o,b:s,d:l}=a;return Math.log(1+(n-t+.5)/(t+.5))*(l+e*(o+1)/(e+o*(1-s+s*r/i)))},b=e=>(t,n,r)=>{let i="function"==typeof e.fuzzy?e.fuzzy(t,n,r):e.fuzzy||!1,a="function"==typeof e.prefix?e.prefix(t,n,r):!0===e.prefix,o="function"==typeof e.boostTerm?e.boostTerm(t,n,r):1;return{term:t,fuzzy:i,prefix:a,termBoost:o}},x={idField:"id",extractField:(e,t)=>e[t],tokenize:e=>e.split(P),processTerm:e=>e.toLowerCase(),fields:void 0,searchOptions:void 0,storeFields:[],logger:(e,t)=>{"function"==typeof(null==console?void 0:console[e])&&console[e](t)},autoVacuum:!0},w={combineWith:"or",prefix:!1,fuzzy:!1,maxFuzzy:6,boost:{},weights:{fuzzy:.45,prefix:.375},bm25:{k:1.2,b:.7,d:.5}},k={combineWith:"and",prefix:(e,t,n)=>t===n.length-1},S={batchSize:1e3,batchWait:10},_={minDirtFactor:.1,minDirtCount:20},C={...S,..._},A=(e,t)=>{e.includes(t)||e.push(t)},E=(e,t)=>{for(let n of t)e.includes(n)||e.push(n)},T=(e,t)=>{let{score:n}=e,{score:r}=t;return r-n},M=()=>new Map,I=e=>{let t=new Map;for(let n of Object.keys(e))t.set(parseInt(n,10),e[n]);return t},N=async e=>{let t=new Map,n=0;for(let r of Object.keys(e))t.set(parseInt(r,10),e[r]),++n%1e3==0&&await D(0);return t},D=e=>new Promise(t=>setTimeout(t,e)),P=RegExp("[\\n\\r\\p{Z}\\p{P}]+","u")},921415:e=>{"use strict";e.s({makeHighlightSearchEngine:()=>n});var t=e.i(221570);function n(e){let n=new t.default({fields:["text"],storeFields:["text","id"],processTerm:(e,t)=>{let n=e.toLowerCase();return e.length<=2||r.has(n)?null:n}});return n.addAll(e),e=>(function(e){var t;if(0===e.length)return e;if(15>((null==(t=e[0])?void 0:t.score)||0))return[];let n=function(e){if(0===e.length)return e;let t=e.map(e=>e.score),n=Math.max(...t),r=Math.min(...t),i=n-r,a=e.map((e,t)=>{let n=i>0?(e.score-r)/i*100:100;return{...e,normalizedScore:n,originalIndex:t}}),o=a.filter(e=>e.normalizedScore>=60),s=a.filter(e=>e.normalizedScore>=15&&e.normalizedScore<60&&e.score>6),l=a.filter(e=>e.normalizedScore<15),u=o;if(u.length<3&&l.length>0){let e=s.slice(0,3-u.length);u=[...u,...e]}return u.sort((e,t)=>e.originalIndex-t.originalIndex).map(e=>{let{normalizedScore:t,originalIndex:n,...r}=e;return r})}(e);return n.length>0?n:[]})(n.search(e,{fuzzy:.5,prefix:!0,processTerm:(e,t)=>{let n=e.toLowerCase();return e.length<=2||r.has(n)?null:n}})).map(e=>e.id)}let r=new Set(["0o","0s","3a","3b","3d","6b","6o","a","a1","a2","a3","a4","ab","able","about","above","abst","ac","accordance","according","accordingly","across","act","actually","ad","added","adj","ae","af","affected","affecting","affects","after","afterwards","ag","again","against","ah","ain","ain't","aj","al","all","allow","allows","almost","alone","along","already","also","although","always","am","among","amongst","amoungst","amount","an","and","announce","another","any","anybody","anyhow","anymore","anyone","anything","anyway","anyways","anywhere","ao","ap","apart","apparently","appear","appreciate","appropriate","approximately","ar","are","aren","arent","aren't","arise","around","as","a's","aside","ask","asking","associated","at","au","auth","av","available","aw","away","awfully","ax","ay","az","b","b1","b2","b3","ba","back","bc","bd","be","became","because","become","becomes","becoming","been","before","beforehand","begin","beginning","beginnings","begins","behind","being","believe","below","beside","besides","best","better","between","beyond","bi","bill","biol","bj","bk","bl","bn","both","bottom","bp","br","brief","briefly","bs","bt","bu","but","bx","by","c","c1","c2","c3","ca","call","came","can","cannot","cant","can't","cause","causes","cc","cd","ce","certain","certainly","cf","cg","ch","changes","ci","cit","cj","cl","clearly","cm","c'mon","cn","co","com","come","comes","con","concerning","consequently","consider","considering","contain","containing","contains","corresponding","could","couldn","couldnt","couldn't","course","cp","cq","cr","cry","cs","c's","ct","cu","currently","cv","cx","cy","cz","d","d2","da","date","dc","dd","de","definitely","describe","described","despite","detail","df","di","did","didn","didn't","different","dj","dk","dl","do","does","doesn","doesn't","doing","don","done","don't","down","downwards","dp","dr","ds","dt","du","due","during","dx","dy","e","e2","e3","ea","each","ec","ed","edu","ee","ef","effect","eg","ei","eight","eighty","either","ej","el","eleven","else","elsewhere","em","empty","en","end","ending","enough","entirely","eo","ep","eq","er","es","especially","est","et","et-al","etc","eu","ev","even","ever","every","everybody","everyone","everything","everywhere","ex","exactly","example","except","ey","f","f2","fa","far","fc","few","ff","fi","fifteen","fifth","fify","fill","find","fire","first","five","fix","fj","fl","fn","fo","followed","following","follows","for","former","formerly","forth","forty","found","four","fr","from","front","fs","ft","fu","full","further","furthermore","fy","g","ga","gave","ge","get","gets","getting","gi","give","given","gives","giving","gj","gl","go","goes","going","gone","got","gotten","gr","greetings","gs","gy","h","h2","h3","had","hadn","hadn't","happens","hardly","has","hasn","hasnt","hasn't","have","haven","haven't","having","he","hed","he'd","he'll","hello","help","hence","her","here","hereafter","hereby","herein","heres","here's","hereupon","hers","herself","hes","he's","hh","hi","hid","him","himself","his","hither","hj","ho","home","hopefully","how","howbeit","however","how's","hr","hs","http","hu","hundred","hy","i","i2","i3","i4","i6","i7","i8","ia","ib","ibid","ic","id","i'd","ie","if","ig","ignored","ih","ii","ij","il","i'll","im","i'm","immediate","immediately","importance","important","in","inasmuch","inc","indeed","index","indicate","indicated","indicates","information","inner","insofar","instead","interest","into","invention","inward","io","ip","iq","ir","is","isn","isn't","it","itd","it'd","it'll","its","it's","itself","iv","i've","ix","iy","iz","j","jj","jr","js","jt","ju","just","k","ke","keep","keeps","kept","kg","kj","km","know","known","knows","ko","l","l2","la","largely","last","lately","later","latter","latterly","lb","lc","le","least","les","less","lest","let","lets","let's","lf","like","liked","likely","line","little","lj","ll","ll","ln","lo","look","looking","looks","los","lr","ls","lt","ltd","m","m2","ma","made","mainly","make","makes","many","may","maybe","me","mean","means","meantime","meanwhile","merely","mg","might","mightn","mightn't","mill","million","mine","miss","ml","mn","mo","more","moreover","most","mostly","move","mr","mrs","ms","mt","mu","much","mug","must","mustn","mustn't","my","myself","n","n2","na","name","namely","nay","nc","nd","ne","near","nearly","necessarily","necessary","need","needn","needn't","needs","neither","never","nevertheless","new","next","ng","ni","nine","ninety","nj","nl","nn","no","nobody","non","none","nonetheless","noone","nor","normally","nos","not","noted","nothing","novel","now","nowhere","nr","ns","nt","ny","o","oa","ob","obtain","obtained","obviously","oc","od","of","off","often","og","oh","oi","oj","ok","okay","ol","old","om","omitted","on","once","one","ones","only","onto","oo","op","oq","or","ord","os","ot","other","others","otherwise","ou","ought","our","ours","ourselves","out","outside","over","overall","ow","owing","own","ox","oz","p","p1","p2","p3","page","pagecount","pages","par","part","particular","particularly","pas","past","pc","pd","pe","per","perhaps","pf","ph","pi","pj","pk","pl","placed","please","plus","pm","pn","po","poorly","possible","possibly","potentially","pp","pq","pr","predominantly","present","presumably","previously","primarily","probably","promptly","proud","provides","ps","pt","pu","put","py","q","qj","qu","que","quickly","quite","qv","r","r2","ra","ran","rather","rc","rd","re","readily","really","reasonably","recent","recently","ref","refs","regarding","regardless","regards","related","relatively","research","research-articl","respectively","resulted","resulting","results","rf","rh","ri","right","rj","rl","rm","rn","ro","rq","rr","rs","rt","ru","run","rv","ry","s","s2","sa","said","same","saw","say","saying","says","sc","sd","se","sec","second","secondly","section","see","seeing","seem","seemed","seeming","seems","seen","self","selves","sensible","sent","serious","seriously","seven","several","sf","shall","shan","shan't","she","shed","she'd","she'll","shes","she's","should","shouldn","shouldn't","should've","show","showed","shown","showns","shows","si","side","significant","significantly","similar","similarly","since","sincere","six","sixty","sj","sl","slightly","sm","sn","so","some","somebody","somehow","someone","somethan","something","sometime","sometimes","somewhat","somewhere","soon","sorry","sp","specifically","specified","specify","specifying","sq","sr","ss","st","still","stop","strongly","sub","substantially","successfully","such","sufficiently","suggest","sup","sure","sy","system","sz","t","t1","t2","t3","take","taken","taking","tb","tc","td","te","tell","ten","tends","tf","th","than","thank","thanks","thanx","that","that'll","thats","that's","that've","the","their","theirs","them","themselves","then","thence","there","thereafter","thereby","thered","therefore","therein","there'll","thereof","therere","theres","there's","thereto","thereupon","there've","these","they","theyd","they'd","they'll","theyre","they're","they've","thickv","thin","think","third","this","thorough","thoroughly","those","thou","though","thoughh","thousand","three","throug","through","throughout","thru","thus","ti","til","tip","tj","tl","tm","tn","to","together","too","took","top","toward","towards","tp","tq","tr","tried","tries","truly","try","trying","ts","t's","tt","tv","twelve","twenty","twice","two","tx","u","u201d","ue","ui","uj","uk","um","un","under","unfortunately","unless","unlike","unlikely","until","unto","uo","up","upon","ups","ur","us","use","used","useful","usefully","usefulness","uses","using","usually","ut","v","va","value","various","vd","ve","ve","very","via","viz","vj","vo","vol","vols","volumtype","vq","vs","vt","vu","w","wa","want","wants","was","wasn","wasnt","wasn't","way","we","wed","we'd","welcome","well","we'll","well-b","went","were","we're","weren","werent","weren't","we've","what","whatever","what'll","whats","what's","when","whence","whenever","when's","where","whereafter","whereas","whereby","wherein","wheres","where's","whereupon","wherever","whether","which","while","whim","whither","who","whod","whoever","whole","who'll","whom","whomever","whos","who's","whose","why","why's","wi","widely","will","willing","wish","with","within","without","wo","won","wonder","wont","won't","words","world","would","wouldn","wouldnt","wouldn't","www","x","x1","x2","x3","xf","xi","xj","xk","xl","xn","xo","xs","xt","xv","xx","y","y2","yes","yet","yj","yl","you","youd","you'd","you'll","your","youre","you're","yours","yourself","yourselves","you've","yr","ys","yt","z","zero","zi","zz"])},507396:e=>{"use strict";e.s({default:()=>s});var t=e.i(921415),n=e.i(257140),r=e.i(252390),i=e.i(220642),a=e.i(234526);function o(e){if(0===e.length)return[];let t=e.map(e=>e.left),n=e.map(e=>e.top),r=e.map(e=>e.left+e.width),i=e.map(e=>e.top+e.height);return[{pageNumber:e[0].pageNumber,left:Math.min(...t),top:Math.min(...n),width:Math.max(...r)-Math.min(...t),height:Math.max(...i)-Math.min(...n),type:"percent"}]}let s=()=>{let{track:e}=(0,r.default)(),{jumpToHighlightArea:s,jumpToPage:l,jumpToDualHighlightAreas:u}=(0,a.useHighlightArea)();return{goToChunk:function(r,a){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",l=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=[],d=[],h=r.map(e=>({id:(0,n.nanoid)(),text:e.text})),p=(0,t.makeHighlightSearchEngine)(h)(s),f=h.filter(e=>p.includes(e.id)).map(e=>e.text);for(let e of r){let t=(0,i.convertCoordinatesToArea)(e.area,e.pageNumber-1);c.push(t),e.text&&f.includes(e.text)&&(t.style=e=>({opacity:.6,borderRadius:"4px"}),d.push(t))}let m=o(c),g=function(e){if(e.length<=1)return e;let t=[],n=new Set;for(let r=0;r<e.length;r++){if(n.has(r))continue;let i={...e[r]},a=!0;for(;a;){a=!1;for(let t=r+1;t<e.length;t++){if(n.has(t))continue;let r=e[t];(function(e,t){let n=e.left+e.width,r=e.top+e.height,i=t.left+t.width,a=t.top+t.height;return!(n<t.left||i<e.left||r<t.top||a<e.top)})(i,r)&&(i=function(e,t){let n=Math.min(e.left,t.left),r=Math.min(e.top,t.top),i=Math.max(e.left+e.width,t.left+t.width),a=Math.max(e.top+e.height,t.top+t.height);return{pageNumber:e.pageNumber,left:n,top:r,width:i-n,height:a-r,type:e.type,style:e.style||t.style}}(i,r),n.add(t),a=!0)}}n.add(r),t.push(i)}return t}(d);for(let e of m)e.width=e.width+1.6,e.height=e.height+1.6,e.top=e.top-.8,e.left=e.left-.8,e.style=e=>({opacity:document.documentElement.classList.contains("dark")?.5:.3});if(e("chunk_highlighted",{type:d.length>0?"granular":"full"}),l){let e=(e=>{let t={yellow:"255, 193, 7",orange:"255, 152, 0",green:"76, 175, 80",blue:"59, 130, 246",purple:"156, 39, 176",red:"244, 67, 54"};return t[e||"blue"]||t.blue})(a),t=m.map(t=>({...t,style:t=>({opacity:1,filter:"none",transition:"all 0.3s ease-out",transform:"scale(1.08)",boxShadow:"0 0 0 3px rgba(".concat(e,", 0.5), 0 0 20px rgba(").concat(e,", 0.3)"),borderRadius:"6px"})})),n=m.map(t=>({...t,style:t=>({opacity:1,filter:"none",transition:"all 0.3s ease-out",transform:"scale(1.00)",boxShadow:"0 0 0 3px rgba(".concat(e,", 0.5), 0 0 20px rgba(").concat(e,", 0.3)"),borderRadius:"6px"})}));u(g,t,"percent",a),setTimeout(()=>{u(g,n,"percent",a)},400),setTimeout(()=>{u(g,m,"percent",a)},700)}else u(g,m,"percent",a)},goToCitation:(t,n)=>{let r=[];for(let e of n)if(e.coordinates&&e.coordinates.length>0&&e.coordinates[0].area)for(let t of e.coordinates){let e=(0,i.convertCoordinatesToArea)(t.area,t.pageNumber-1);r.push(e)}if(r.length>0)return s([o(r).reduce((e,t)=>t.top<e.top?t:e)]);l(t-1),e("goToCitation")},goToOldDocChunk:e=>{let t=[];for(let n of e){let e=(0,i.convertCoordinatesToArea)(n.area,n.pageNumber-1);t.push(e)}s(o(t))}}}},533502:e=>{"use strict";e.s({default:()=>a,useRegisterNoteHighlight:()=>i});var t=e.i(373150),n=e.i(410601);let r=new Map,i=e=>{let{editor:i}=(0,n.useGlobalEditor)(e);(0,t.useEffect)(()=>{if(i&&e)return r.set(e,(e,t)=>{try{if(!("clearNoteHighlights"in i.commands)||!("highlightNoteText"in i.commands))return void console.warn("Note highlighting: Custom highlight commands not available");if(!e||"string"!=typeof e||!e.trim())return void console.warn("Note highlighting: Invalid or empty text provided");i.commands.clearNoteHighlights(),i.commands.highlightNoteText(e,t||"blue")||console.warn("Note highlighting: Failed to apply highlight - text may not be found in document")}catch(e){console.error("Note highlighting: Error during highlighting:",e)}}),()=>{r.delete(e)}},[i,e])},a=()=>({goToNoteChunk:(0,t.useCallback)((e,t,n)=>{if(!(null==e?void 0:e.trim()))return void console.warn("Note highlighting: No text provided");if(!t)return void console.warn("Note highlighting: No target chatbot ID provided");let i=r.get(t);i?i(e,n):console.warn("Note highlighting: No highlight function registered for chatbot ".concat(t))},[])})},134102:e=>{"use strict";e.s({default:()=>a});var t=e.i(373150),n=e.i(910173);let r=e=>{let t=(0,n.getHighlightColorByName)(e);return{backgroundColor:t.backgroundColor,borderColor:t.borderColor}},i=(e,t,n,i)=>{let a=n.length,o=t,s=null;for(let t of e){let{start:e,length:n,node:l}=t;if(e+n>o&&a>0){let t=l.textContent||"",u=Math.max(0,o-e),c=Math.min(n,u+a);if(c>u){let e=t.substring(0,u),n=t.substring(u,c),d=t.substring(c),h=l.parentNode;if(h&&n&&n.trim()){let t=document.createElement("span"),u=r(i);t.className="website-highlight",t.style.backgroundColor=u.backgroundColor,t.style.border="1px solid ".concat(u.borderColor),t.textContent=n,s||(s=t),e&&h.insertBefore(document.createTextNode(e),l),h.insertBefore(t,l),d&&h.insertBefore(document.createTextNode(d),l),h.removeChild(l);let c=n.length;a-=c,o+=c}}}if(a<=0)break}return s},a=()=>({goToWebsiteChunk:(0,t.useCallback)((e,t)=>{if(!(null==e?void 0:e.trim()))return void console.warn("No text provided for highlighting");let n=document.querySelector('[data-testid="reader-view"], .prose');if(!n)return void console.warn("ReaderView element not found for website highlighting");for(let e of n.querySelectorAll(".website-highlight")){let t=e.parentNode;t&&(t.replaceChild(document.createTextNode(e.textContent||""),e),t.normalize())}let r=document.createTreeWalker(n,NodeFilter.SHOW_TEXT,null),a=[],o=r.nextNode();for(;null!==o;)a.push(o),o=r.nextNode();let s=e.trim(),{combinedText:l,nodeOffsets:u}=(e=>{let t="",n=[];for(let r of e){let e=r.textContent||"";n.push({start:t.length,length:e.length,node:r}),t+=e;let i=r.parentNode,a=r.nextSibling;i&&("P"===i.nodeName||"DIV"===i.nodeName||"H1"===i.nodeName||"H2"===i.nodeName||"H3"===i.nodeName||"LI"===i.nodeName)&&!a?t+="\n":a&&a.nodeType===Node.ELEMENT_NODE&&(t+=" ")}return{combinedText:t,nodeOffsets:n}})(a),c=(e=>{let t=[e];if(e.length>100){let n=e.split(/[.!?]\s+/)[0];n&&n.length>10&&t.unshift(n.trim());let r=e.substring(0,50).trim();for(let n of(r.length>10&&t.unshift(r),e.split("\n"))){let e=n.trim();if(e.length>20&&!e.startsWith("**")&&!e.startsWith("#")&&!e.startsWith("---")&&!e.startsWith("[")){t.unshift(e.substring(0,80).trim());break}}let i=e.split("\n")[0].trim();i&&i.length>5&&(t.push(i),i.startsWith("###")&&t.push(i.substring(3).trim()),i.startsWith("**")&&i.endsWith("**")&&t.push(i.slice(2,-2).trim()),i.startsWith("> ")&&t.push(i.substring(2).trim()))}return t})(s);if(s){let e=-1;for(let t of c){let n=l.toLowerCase().indexOf(t.toLowerCase());if(-1!==n){e=n;break}}if(-1!==e){let n=l.substring(e),r=Math.min(s.length,n.length),a=l.substring(e,e+r),o=i(u,e,a,t);o&&o.scrollIntoView({behavior:"smooth",block:"center"});return}for(let e of(s.toLowerCase().match(/\w{4,}/g)||[]).slice(0,3)){let n=l.toLowerCase().indexOf(e);if(-1!==n){let e=l.substring(n,Math.min(l.length,n+200)),r=i(u,n,e,t);r&&r.scrollIntoView({behavior:"smooth",block:"center"});return}}}},[])})},971356:e=>{"use strict";e.s({getCitationText:()=>b,useMarkdownCitation:()=>y});var t=e.i(290479),n=e.i(127905),r=e.i(397711),i=e.i(118246),a=e.i(430266),o=e.i(507396),s=e.i(791020),l=e.i(998145),u=e.i(972899),c=e.i(483437),d=e.i(161349),h=e.i(227261),p=e.i(221297),f=e.i(238960),m=e.i(533502),g=e.i(134102);let y=()=>{let e=(0,r.useRouter)(),t=(0,r.useParams)(),l=null==t?void 0:t.id,[u,y]=(0,i.useQueryState)("itemId",i.parseAsString),b=(0,p.useChatV2Store)(e=>e.mode),x="chatbot"===b.type?b.chatbotType:null;(0,h.useChatbotStore)(e=>e.setViewerState);let w=(0,c.useVideoInstance)(),k=(0,n.useMediaRemote)(w),{setViewType:S}=(0,d.usePersistedViewType)(l||"default"),{controls:_}=(0,s.useAudioPlayer)(),{goToChunk:C}=(0,o.default)(),{goToWebsiteChunk:A}=(0,g.default)(),{goToNoteChunk:E}=(0,m.default)(),T=(e,t,n,r)=>{"external-source"!==e.type&&"external-database"!==e.type&&(0,a.match)(e.data).with({type:"document"},i=>((e,t,n,r,i)=>{let a=(0,f.getDocumentCoordinates)(e);if("GROUP"===x&&t&&u!==t&&y(t),a.length>0&&e.originalElements)return"GROUP"===x&&t&&u!==t?setTimeout(()=>C(a,n,r,i),500):C(a,n,r,i)})(i,e.chatbotId,t,n,r)).with({type:"video"},t=>((e,t)=>{if("GROUP"===x&&u!==t)return y(t),setTimeout(()=>{k.play(),k.seek(e)},500);k.play(),k.seek(e)})(t.start,e.chatbotId)).with({type:"audio"},t=>((e,t)=>{if("GROUP"===x&&u!==t)return y(t),setTimeout(()=>{null==_||_.seek(e)},500);null==_||_.seek(e)})(t.start,e.chatbotId)).with({type:"note"},()=>((e,t)=>"GROUP"===x&&e.chatbotId&&u!==e.chatbotId?(y(e.chatbotId),setTimeout(()=>E(e.text,e.chatbotId,t),500)):E(e.text,e.chatbotId,t))(e,t)).with({type:"website"},()=>((e,t)=>"GROUP"===x&&e.chatbotId&&u!==e.chatbotId?(y(e.chatbotId),setTimeout(()=>A(e.text,t),500)):A(e.text,t))(e,t)).otherwise(()=>null)};return{onSelect:(t,n,r,i)=>{"external-source"!==t.type&&"external-database"!==t.type&&setTimeout(()=>{if(S("tabs"),t.chatbotId!==l&&"GROUP"!==x){e.push("/b/".concat(t.chatbotId)),setTimeout(()=>T(t,n,r,i),100);return}T(t,n,r,i)},0)}}},b=(e,n)=>null!=n?n:(0,t.jsx)(u.Icon,{className:"inline  mb-1",size:"sm",as:(0,l.default)({type:"WEBSITE"})})},58372:e=>{"use strict";e.s({Blockquote:()=>eb,CodeBlock:()=>eE,Em:()=>ek,H1:()=>ep,H2:()=>ef,H3:()=>em,H4:()=>eg,H5:()=>ev,H6:()=>ey,ListItem:()=>eA,OrderedList:()=>eS,PageJump:()=>el,Paragraph:()=>ex,Strong:()=>ew,Table:()=>eT,TableCell:()=>eI,TableHead:()=>eN,TableRow:()=>eM,UnorderedList:()=>e_,buildCitationMapFromText:()=>Q,getCitationNumberFromMap:()=>ee});var t=e.i(290479),n=e.i(38017),r=e.i(645311),i=e.i(647968),a=e.i(608294),o=e.i(184901),s=e.i(882204),l=e.i(486137),u=e.i(45576),c=e.i(919807),d=e.i(65965),h=e.i(635934),p=e.i(88070),f=e.i(219821),m=e.i(86386),g=e.i(397711),y=e.i(625483),b=e.i(373150),x=e.i(168054),w=e.i(364869),k=e.i(704255),S=e.i(663018),_=e.i(998145),C=e.i(457443),A=e.i(993392),E=e.i(972899),T=e.i(303652),M=e.i(935989),I=e.i(457910),N=e.i(234526),D=e.i(702461),P=e.i(143928),R=e.i(252390),O=e.i(220642),j=e.i(910173),F=e.i(814733),L=e.i(289702),z=e.i(238960),B=e.i(885493),U=e.i(476440),H=e.i(67491),W=e.i(389695),V=e.i(221297),q=e.i(512109),G=e.i(507396),$=e.i(971356),K=e.i(533502),Y=e.i(134102);let X=(0,f.default)(()=>e.r(623697)(e.i).then(e=>({default:e.ScopedViewWindow})),{loadableGenerated:{modules:[53653]},ssr:!1,loading:()=>(0,t.jsx)("div",{className:"flex items-center justify-center h-[90vh] bg-background-primary rounded-4",children:(0,t.jsx)("div",{className:"text-sm text-text-secondary",children:"Loading document..."})})}),Z=(0,i.atom)(null),J=(0,b.createContext)({}),Q=(e,t)=>{let n=new Map;for(let r of e.split(/(@\d+|\[\[mention:[^:]+:[^\]]+\]\]|\[\d+\](?:\(#(?:page-)?\d+\)))/))if(r.match(/^@\d+$/)){let e=Number.parseInt(r.slice(1),10),i=t.find(t=>t.order===e);if(i)if("external-source"===i.type){let e=i.data.url;n.has(e)||n.set(e,n.size+1)}else"source"===i.type&&(("document"!==i.data.type||i.data.originalElements)&&"text"!==i.data.type?n.has(e)||"source"!==i.type||n.set(e,n.size+1):n.has(i.chatbotId)||n.set(i.chatbotId,n.size+1))}return n},ee=(e,t)=>{var n,r;return("document"!==e.data.type||e.data.originalElements)&&"text"!==e.data.type?null!=(r=t.get(e.order))?r:0:null!=(n=t.get(e.chatbotId))?n:0},et=e=>{let{source:n,onClose:r,onReady:o}=e,s=(0,b.useMemo)(()=>(0,i.atom)(null),[]);(0,a.useSetAtom)(s);let l=(0,g.useRouter)(),[c,h]=(0,b.useState)(!1),f=b.default.useRef(null),{goToWebsiteChunk:m}=(0,Y.default)(),{goToNoteChunk:y}=(0,K.default)(),{getSourceColor:x}=(0,H.useCitationColors)("citations-global"),w=x(n);b.default.useEffect(()=>{if(!f.current)return;let e=new IntersectionObserver(t=>{for(let n of t)n.isIntersecting&&n.intersectionRatio>0&&(setTimeout(()=>{h(!0),o()},100),e.disconnect())},{root:null,rootMargin:"0px",threshold:.1});e.observe(f.current);let t=setTimeout(()=>{h(!0),o(),e.disconnect()},3e3);return()=>{e.disconnect(),clearTimeout(t)}},[o]);let _=(0,b.useMemo)(()=>{if("document"===n.data.type&&n.data.originalElements){let e=(0,z.getDocumentCoordinates)(n.data);if(e.length>0){let t=[];for(let n of e){let e=(0,O.convertCoordinatesToArea)(n.area,n.pageNumber-1);t.push(e)}return{type:"chunk",rects:t,rectType:"percent",color:w}}}return null},[n,w]);((e,t,n)=>{let r=(0,a.useSetAtom)(e),[i]=(0,a.useAtom)(e),o=(0,b.useRef)(0),s=(0,b.useRef)(null),[l,u]=(0,b.useState)(!1);(0,b.useEffect)(()=>{o.current>0&&null===i&&!l&&(u(!0),s.current&&(clearTimeout(s.current),s.current=null))},[i,l]),(0,b.useEffect)(()=>{if(!n||!t||l)return;o.current=0,u(!1);let e=()=>{l||(r(t),o.current++,o.current<5&&!l&&(s.current=setTimeout(e,300)))},i=setTimeout(e,200);return()=>{clearTimeout(i),s.current&&(clearTimeout(s.current),s.current=null),o.current=0,u(!1)}},[n,t,r,l])})(s,_,c&&!!_),b.default.useEffect(()=>{c&&("website"===n.data.type&&setTimeout(()=>m(n.text,w),700),"note"===n.data.type&&setTimeout(()=>y(n.text,n.chatbotId,w),500))},[c,n,m,y,w]);let A=()=>{l.push("/b/".concat(n.chatbotId)),r()},T=()=>{window.open("/b/".concat(n.chatbotId),"_blank")};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(C.DialogTitle,{className:"sr-only",children:"Document Preview"}),(0,t.jsxs)("div",{className:"flex flex-row h-[90vh] gap-0 p-0 max-sm:flex-col max-sm:h-[92vh] max-sm:p-1",children:[(0,t.jsxs)("div",{className:"flex-1 overflow-hidden rounded-4 bg-background-primary border border-border-primary  relative min-w-0 max-w-full",children:[!c&&(0,t.jsx)("div",{className:"absolute inset-0 z-20 flex items-center justify-center bg-background-primary rounded-4",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-6",children:[(0,t.jsx)(S.LoadingSpinner,{variant:"small",color:"gray"}),(0,t.jsx)("div",{className:"text-sm text-text-secondary",children:"Loading document preview..."})]})}),(0,t.jsx)("div",{ref:f,className:"w-full h-full overflow-hidden max-w-full",style:{contain:"layout size style"},children:(0,t.jsx)("div",{className:"w-full h-full max-w-full overflow-auto",style:{maxWidth:"100%",width:"100%"},children:(0,t.jsx)("div",{className:"w-full h-full",children:(0,t.jsx)("div",{className:"w-full h-full max-sm:scale-[0.99] max-sm:flex max-sm:justify-center max-sm:items-start",children:(0,t.jsx)(X,{chatbotId:n.chatbotId,highlightAtom:s})})})})})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-6 ml-7 justify-start max-sm:hidden",children:[(0,t.jsx)(U.ReusableTooltip,{content:"Close preview",asChild:!0,children:(0,t.jsx)(k.Button,{variant:"outline",size:"sm",onClick:r,className:"!w-13 !h-13 p-0",tabIndex:-1,children:(0,t.jsx)(E.Icon,{as:p.XIcon,className:"w-7 h-7"})})}),(0,t.jsx)(U.ReusableTooltip,{content:"Open in full page",asChild:!0,children:(0,t.jsx)(k.Button,{variant:"outline",size:"sm",onClick:A,className:"!w-13 !h-13 p-0",tabIndex:-1,children:(0,t.jsx)(E.Icon,{as:d.MaximizeIcon,className:"w-7 h-7"})})}),(0,t.jsx)(U.ReusableTooltip,{content:"Open in new window",asChild:!0,children:(0,t.jsx)(k.Button,{variant:"outline",size:"sm",onClick:T,className:"!w-13 !h-13 p-0",tabIndex:-1,children:(0,t.jsx)(E.Icon,{as:u.ExternalLinkIcon,className:"w-7 h-7"})})})]}),(0,t.jsxs)("div",{className:"flex flex-row gap-3 mt-3 justify-center w-full sm:hidden",children:[(0,t.jsx)(U.ReusableTooltip,{content:"Close preview",asChild:!0,children:(0,t.jsx)(k.Button,{variant:"outline",size:"sm",onClick:r,className:"!w-13 !h-13 p-0",tabIndex:-1,children:(0,t.jsx)(E.Icon,{as:p.XIcon,className:"w-7 h-7"})})}),(0,t.jsx)(U.ReusableTooltip,{content:"Open in full page",asChild:!0,children:(0,t.jsx)(k.Button,{variant:"outline",size:"sm",onClick:A,className:"!w-13 !h-13 p-0",tabIndex:-1,children:(0,t.jsx)(E.Icon,{as:d.MaximizeIcon,className:"w-7 h-7"})})}),(0,t.jsx)(U.ReusableTooltip,{content:"Open in new window",asChild:!0,children:(0,t.jsx)(k.Button,{variant:"outline",size:"sm",onClick:T,className:"!w-13 !h-13 p-0",tabIndex:-1,children:(0,t.jsx)(E.Icon,{as:u.ExternalLinkIcon,className:"w-7 h-7"})})})]})]})]})},en=e=>{let{onColorSelect:n,selectedColor:r}=e,i=(0,j.getHighlightColorOptions)();return(0,t.jsx)("div",{className:"flex flex-col p-2",children:i.map(e=>(0,t.jsxs)("button",{onClick:t=>{t.stopPropagation(),n(e.value)},className:"flex flex-row items-center justify-between gap-2 w-full hover:bg-control-primary rounded-4 p-4 group",children:[(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,t.jsx)("span",{className:(0,L.cn)("w-[14px] h-[14px] rounded-full border-2 group-hover:scale-110 transition-transform",e.bgClass,e.borderClass)}),(0,t.jsx)("span",{className:"text-xs font-medium text-text-primary group-hover:text-text-primary/80",children:e.name})]}),r===e.value&&(0,t.jsx)(E.Icon,{as:s.CheckIcon,className:"w-7 h-7 text-blue"})]},e.name))})},er=e=>{let{source:n,index:r,type:i,citationNumber:a,sources:o=[],textBefore:s=""}=e,[l,u]=(0,b.useState)(!1),[c,d]=(0,b.useState)(!1),h=(0,P.useCurrentChatbotId)(),{track:p}=(0,R.default)(),{currentGroupMembersIds:f}=(0,B.useCurrentGroupMembersIds)(),m=(0,V.useChatV2Store)(e=>e.mode),g="chatbot"===m.type&&"GROUP"===m.chatbotType&&f.includes(n.chatbotId),y=!(n.chatbotId===h||g);return(0,t.jsxs)(C.Dialog,{open:l,onOpenChange:e=>{!e&&l?setTimeout(()=>{u(e),e||d(!1)},50):(u(e),e&&d(!1))},children:[(0,t.jsx)(C.DialogTrigger,{asChild:!0,children:(0,t.jsx)("span",{onClick:e=>{e.preventDefault(),e.stopPropagation(),n.chatbotId===h||g||(null==p||p("citation_dialog_opened",{chatbotId:n.chatbotId,chatbotType:i,sourceType:n.data.type,sourceTextLength:n.text.length,totalCitationsInMessage:o.length,internalCitationsCount:o.filter(e=>"source"===e.type).length,externalCitationsCount:o.filter(e=>"external-source"===e.type).length}),u(!0))},children:(0,t.jsx)(ea,{type:i,source:n,currentCitation:a,disableClick:y,sources:o,textBefore:s},"".concat(r,"-").concat(n.order))})}),(0,t.jsx)(C.DialogContent,{className:"bg-transparent border-none !shadow-none md:max-w-[60vw] max-w-[100vw] p-0 sm:p-0 rounded-4 !ring-0 !outline-none focus:!ring-0 focus:!outline-none",hideCloseButton:!0,onInteractOutside:e=>{var t;(null==(t=e.target)?void 0:t.closest("[data-citation-dialog]"))&&e.preventDefault()},onPointerDownOutside:e=>{var t;(null==(t=e.target)?void 0:t.closest("[data-citation-dialog]"))&&e.preventDefault()},children:(0,t.jsx)("div",{"data-citation-dialog":!0,className:"relative",children:(0,t.jsx)(et,{source:n,onClose:()=>u(!1),onReady:()=>{d(!0)}})})})]})},ei=e=>{let{content:n,children:r,chatbotId:i,type:s,className:l,onClick:d,source:p,isExternal:f=!1,externalUrl:m,externalTitle:g,textBefore:y=""}=e,[x,w]=(0,b.useState)(!1),[k,S]=(0,b.useState)(!1),[C,N]=(0,b.useState)(!1),[D,O]=(0,b.useState)(!1),B=(0,b.useRef)(null),U=(0,P.useCurrentChatbotId)(),{track:V}=(0,R.default)(),{goToChunk:$}=(0,G.default)(),{goToWebsiteChunk:X}=(0,Y.default)(),{goToNoteChunk:J}=(0,K.default)(),[Q]=(0,a.useAtom)(Z),{getSourceColor:ee,setSourceColor:et}=(0,H.useCitationColors)("citations-global"),er=p&&"external-source"!==p.type&&"external-database"!==p.type?ee(p):"blue",ei=!f&&!!i&&("GROUP"===s||"RECORDING"===s||"DOCUMENT"===s||"NOTE"===s||U!==i),{data:ea}=F.api.citations.preview.useQuery(null!=i?i:"",{enabled:ei&&x}),eo=(0,b.useCallback)(e=>{e.stopPropagation(),S(!0),V("citation_tooltip_expand_clicked",{isExternal:f,sourceType:null==p?void 0:p.type,sourceDataType:(null==p?void 0:p.type)==="source"?p.data.type:void 0,chatbotId:(null==p?void 0:p.type)==="source"?p.chatbotId:void 0})},[V,f,p]),es=(0,b.useCallback)(async e=>{if(p&&"external-source"!==p.type&&"external-database"!==p.type&&(await et(p,e),V("citation_color_changed",{color:e,sourceType:p.type,sourceDataType:p.data.type,chatbotId:p.chatbotId}),Q&&p&&Q.order===p.order&&Q.chatbotId===p.chatbotId)){if("document"===p.data.type&&p.data.originalElements){let t=(0,z.getDocumentCoordinates)(p.data);t.length>0&&setTimeout(()=>{$(t,e,y)},10)}"website"===p.data.type&&setTimeout(()=>{X(p.text,e)},10),"note"===p.data.type&&setTimeout(()=>{J(p.text,p.chatbotId,e)},10)}N(!1)},[p,et,V,Q,$,X,J,y]),el=(0,b.useCallback)(e=>{let t=(0,j.getHighlightColorByName)(e);return{bg:t.bgClass,border:t.borderClass}},[]),eu=!!(ei&&(null==ea?void 0:ea.summary)&&x||f&&x),{data:ec,isLoading:ed,error:eh,hasTimedOut:ep}=(0,W.useCitationExplanationStream)(n,f?"":(null==ea?void 0:ea.summary)||"",f?g:(null==ea?void 0:ea.title)||void 0,{enabled:eu});return"RECORDING"===s?r:(0,t.jsxs)(A.HoverCard,{openDelay:75,closeDelay:100,onOpenChange:e=>{C||D||w(e)},children:[(0,t.jsx)(A.HoverCardTrigger,{onClick:()=>{null==d||d()},className:(0,L.cn)(l,"data-[state=open]:rounded-[6px] data-[state=closed]:rounded-[6px] no-underline !text-blue cursor-pointer"),children:r}),(0,t.jsx)(A.HoverCardPortal,{children:(0,t.jsx)(A.HoverCardContent,{side:"top",align:"start",className:"bg-popover max-w-[300px] px-0 py-0 border border-border-primary rounded-4 shadow-feint text-xs -tracking-[0.32px]",children:(0,t.jsxs)("div",{onClick:e=>{e.stopPropagation()},children:[(0,t.jsxs)("div",{className:"p-5 flex flex-col gap-4",children:[(ei&&(null==ea?void 0:ea.title)||f&&g)&&(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[f?(0,t.jsx)(E.Icon,{as:o.ArrowUpRight,className:"flex-shrink-0 z-10 text-text-primary w-[14px] h-[14px]"}):(null==ea?void 0:ea.type)&&(0,t.jsx)(E.Icon,{className:"flex-shrink-0 z-10 text-text-primary",as:(0,_.default)({type:ea.type})}),f&&m&&(0,t.jsx)("a",{href:m,target:"_blank",rel:"noopener noreferrer",className:"ml-2 text-blue hover:text-blue/80",onClick:e=>e.stopPropagation(),children:(0,t.jsx)(E.Icon,{as:u.ExternalLinkIcon,className:"w-6 h-6"})}),(0,t.jsx)("div",{className:"text-xs font-medium text-text-primary line-clamp-1",children:f?g:null==ea?void 0:ea.title})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[k?(0,t.jsx)(E.Icon,{as:c.FoldVertical,className:"flex-shrink-0 w-[14px] h-[14px] text-text-secondary hover:text-text-primary cursor-pointer transition-colors",onClick:e=>{e.stopPropagation(),S(!1)}}):(0,t.jsx)(E.Icon,{as:h.UnfoldVertical,className:"flex-shrink-0 w-[14px] h-[14px] text-text-secondary hover:text-text-primary cursor-pointer transition-colors",onClick:e=>{e.stopPropagation(),eo(e)}}),!f&&(0,t.jsxs)(T.Popover,{onOpenChange:N,children:[(0,t.jsxs)(I.Tooltip,{children:[(0,t.jsx)(I.TooltipTrigger,{asChild:!0,children:(0,t.jsx)(T.PopoverTrigger,{asChild:!0,children:(0,t.jsx)("button",{className:(0,L.cn)("flex-shrink-0 w-[14px] h-[14px] rounded-full border cursor-pointer transition-transform hover:scale-110",el(er).bg,el(er).border),onMouseEnter:()=>O(!0),onMouseLeave:()=>O(!1),onClick:e=>e.stopPropagation()})})}),(0,t.jsx)(I.TooltipContent,{side:"bottom",sideOffset:4,children:(0,t.jsx)("p",{children:"Highlight color"})})]}),(0,t.jsx)(T.PopoverContent,{className:"w-[120px] p-0 border border-border-primary",align:"end",side:"bottom",sideOffset:4,avoidCollisions:!0,collisionPadding:8,onClick:e=>e.stopPropagation(),children:(0,t.jsx)(en,{onColorSelect:es,selectedColor:er})})]})]})]}),(0,t.jsx)("div",{ref:B,className:(0,L.cn)("text-text-primary",k?"max-h-[150px] overflow-y-auto scrollbar-hide":"line-clamp-[4]"),children:f?(0,t.jsx)("div",{className:"text-text-secondary",children:n}):(0,t.jsx)(q.default,{markdownContent:n,className:"",sources:[],type:s})})]}),(ei&&(null==ea?void 0:ea.summary)||f)&&(ed||ec)&&!ep&&!eh&&(0,t.jsxs)("div",{className:"bg-control-primary rounded-4 p-5 flex flex-col gap-2 m-2",children:[(0,t.jsx)("div",{className:"font-medium text-text-secondary text-xs",children:"Relevance:"}),ed?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex flex-row gap-3",children:[(0,t.jsx)(M.SkeletonLoader,{className:"w-15 h-7 bg-text-tertiary animate-pulse"}),(0,t.jsx)(M.SkeletonLoader,{className:"w-16 h-7 bg-text-tertiary animate-pulse delay-100"}),(0,t.jsx)(M.SkeletonLoader,{className:"w-10 h-7 bg-text-tertiary animate-pulse"}),(0,t.jsx)(M.SkeletonLoader,{className:"w-16 h-7 bg-text-tertiary animate-pulse delay-150"}),(0,t.jsx)(M.SkeletonLoader,{className:"w-13 h-7 bg-text-tertiary animate-pulse delay-200"})]}),(0,t.jsxs)("div",{className:"flex flex-row gap-3",children:[(0,t.jsx)(M.SkeletonLoader,{className:"w-20 h-7 bg-text-tertiary animate-pulse delay-100"}),(0,t.jsx)(M.SkeletonLoader,{className:"w-9 h-7 bg-text-tertiary animate-pulse delay-200"}),(0,t.jsx)(M.SkeletonLoader,{className:"w-16 h-7 bg-text-tertiary animate-pulse delay-300"}),(0,t.jsx)(M.SkeletonLoader,{className:"w-10 h-7 bg-text-tertiary animate-pulse delay-400"})]})]}):ec?(0,t.jsx)("div",{className:"text-xs text-text-secondary",children:(0,t.jsx)(q.default,{markdownContent:ec.explanation,className:"text-text-secondary",sources:[],type:s})}):null]})]})})})]})},ea=e=>{let{source:n,type:r,currentCitation:i,disableClick:o=!1,sources:s=[],textBefore:l=""}=e,{onSelect:u}=(0,$.useMarkdownCitation)(),{getCitationKey:c,getSourceColor:d}=(0,H.useCitationColors)("citations-global"),{track:h}=(0,R.default)(),[p]=(0,a.useAtom)(Z),f=(0,a.useSetAtom)(Z);if("external-source"===n.type)return null;let m=async()=>{if(o||"external-database"===n.type)return;let e=p&&"source"===n.type&&p.order===n.order&&p.chatbotId===n.chatbotId,t=c(n),i="blue";try{let e=localStorage.getItem("citation-colors-citations-global");e&&(i=JSON.parse(e)[t]||"blue")}catch(e){console.warn("Failed to read fresh color from localStorage:",e),i=d(n)}if("source"===n.type&&f(n),"source"===n.type&&h("citation_internal_clicked",{chatbotId:n.chatbotId,chatbotType:r,sourceType:n.data.type,sourceTextLength:n.text.length,totalCitationsInMessage:s.length,internalCitationsCount:s.filter(e=>"source"===e.type).length,externalCitationsCount:s.filter(e=>"external-source"===e.type).length,textWordCount:n.text.split(/\s+/).length}),e)return void u(n,i,l,!0);u(n,i,l,!1)};return(0,t.jsx)(ei,{onClick:m,content:n.text,chatbotId:"source"===n.type?n.chatbotId:void 0,type:r,source:n,textBefore:l,className:"peer  inline-flex items-center justify-center h-[20px]  rounded-[6px] bg-blue/10 hover:bg-blue/20 hover:text-blue/80 w-auto min-w-[20px] px-2  text-blue",children:(0,t.jsx)("span",{className:"text-sm font-medium",children:(0,$.getCitationText)(n,i)})})},eo=e=>{let{id:n,name:r,type:i}=e;return(0,t.jsx)(m.default,{href:"/b/".concat(n),className:"inline-block cursor-pointer",onClick:e=>{e.stopPropagation()},children:(0,t.jsxs)("span",{className:"inline-flex items-center gap-3 h-fit leading-[14px] p-2 rounded-4 bg-secondary text-text-secondary text-sm font-medium",children:[i&&(0,t.jsx)(E.Icon,{as:(0,_.default)({type:i}),className:"flex-shrink-0 w-[14px] h-[14px] block leading-none m-0 p-0",style:{lineHeight:"1"}}),r.length>32?"".concat(r.substring(0,32),"..."):r]})})},es=e=>{let{toolType:n,name:r}=e;return(0,t.jsxs)("span",{className:"tool-mention inline-flex items-center gap-2 h-[22px] p-2 rounded-4 bg-blue/10 text-blue text-sm font-medium align-text-top",children:[(0,t.jsx)(E.Icon,{as:(0,D.getToolIcon)(n),className:"flex-shrink-0 w-[14px] h-[14px]"}),r.length>32?"".concat(r.substring(0,32),"..."):r]})},el=e=>{let{pageNumber:n}=e,{jumpToPage:r}=(0,N.useHighlightArea)();return(0,t.jsx)("span",{onClick:()=>r(Number.parseInt(n,10)),className:"bg-control-primary mx-1 py-1 px-3 rounded-6 text-text-secondary font-medium text-xs cursor-pointer",children:n})},eu=e=>{let{source:n,type:r,url:i,title:a,citationNumber:s,index:l,sources:u,needsLeftMargin:c}=e,{track:d}=(0,R.default)();return(0,t.jsx)("span",{className:c?"ml-1":"",children:(0,t.jsxs)(ei,{content:n.text,type:r,source:n,isExternal:!0,externalUrl:i,externalTitle:a,className:"peer inline-flex items-baseline justify-center h-[20px] rounded-[6px] bg-blue/10 hover:bg-blue/20 hover:text-blue/80 w-auto px-2 min-w-[20px] text-blue gap-0.5",onClick:()=>{d("citation_external_clicked",{url:i,sourceType:n.data.type,sourceTextLength:n.text.length,citationNumber:s,title:a,domain:new URL(i).hostname,totalCitationsInMessage:u.length,externalCitationsCount:u.filter(e=>"external-source"===e.type).length,internalCitationsCount:u.filter(e=>"source"===e.type).length,chatbotType:r,isFirstCitationInMessage:1===s,citationPosition:l,sourceOrder:n.order,isPaper:"external-paper"===n.data.type,isYoutube:"external-youtube"===n.data.type,isWebsite:"external-website"===n.data.type,isGoogleDrive:"external-google-drive"===n.data.type,titleLength:(null==a?void 0:a.length)||0,hasHttps:i.startsWith("https://"),timestamp:Date.now(),userAgent:navigator.userAgent,viewport:"".concat(window.innerWidth,"x").concat(window.innerHeight)}),window.open(i,"_blank","noreferrer")},children:[(0,t.jsx)(E.Icon,{as:o.ArrowUpRight,className:"w-[14px] h-[14px] translate-y-0.5"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:(0,$.getCitationText)(n,s)})]})})},ec=function(e,r,i,a){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return s=>{if("string"!=typeof s)return s;let l=s.split(/(@\d+|\[\[mention:[^:]+:[^:]+:[^\]]+\]\]|\[\[tool:[^:]+:[^\]]+\]\]|\[\d+\](?:\(#(?:page-)?\d+\)))/);return l.map((s,u)=>{o||s.match(/^@\d+$/)||s.match(/^\[\[mention:[^:]+:.+:[^\]]+\]\]$/)||s.match(/^\[\[tool:[^:]+:[^\]]+\]\]$/)||s.match(/\[(\d+)\](?:\(#(?:page-)?(\d+)\))/)||!a||(a.current.accumulatedText+=s);let c=s.match(/\[(\d+)\](?:\(#(?:page-)?(\d+)\))/);if(c){let[e,n,r]=c;return(0,t.jsx)(el,{pageNumber:r},"page-".concat(u,"-").concat(r))}if(s.match(/^@\d+$/)){let n=(null==a?void 0:a.current.accumulatedText)||"",o=Number.parseInt(s.slice(1),10),c=e.find(e=>e.order===o);if(c){let a,s=(e=>{if(!e||0===e.trim().length)return"";let t=e.replace(/\*\*(.*?)\*\*/g,"$1").replace(/\*(.*?)\*/g,"$1").replace(/`(.*?)`/g,"$1").replace(/\s+/g," ").trim(),n=t.split(/[.!?]+(?:\s+|$)/).filter(e=>e.trim().length>0);return 0===n.length?t:n[n.length-1].trim()||t})(n);if("external-source"===c.type){let e=c.data.url;i.has(e)||i.set(e,i.size+1),a=i.get(e)}if("source"!==c.type||("document"!==c.data.type||c.data.originalElements)&&"text"!==c.data.type?(i.has(o)||"source"!==c.type||i.set(o,i.size+1),a=i.get(o)):(i.has(c.chatbotId)||i.set(c.chatbotId,i.size+1),a=i.get(c.chatbotId)),"external-database"===c.type)return null;if("external-source"===c.type){let n=c.data.url.startsWith("http://")||c.data.url.startsWith("https://")?c.data.url:"https://".concat(c.data.url),o="external-paper"===c.data.type?c.data.paperTitle:"external-youtube"===c.data.type?c.data.videoTitle:new URL(n).hostname;a=i.get(n);let s=u>0?l[u-1]:"",d=""===s||!s.endsWith(" ");return(0,t.jsx)(eu,{source:c,type:r,url:n,title:o,citationNumber:null!=a?a:0,index:u,sources:e,needsLeftMargin:d},"".concat(u,"-").concat(c.order))}return(0,t.jsx)(er,{source:c,index:u,type:r,citationNumber:null!=a?a:0,sources:e,textBefore:s},"dialog-".concat(u,"-").concat(c.order))}return""}if(s.match(/^\[\[mention:[^:]+:[\s\S]+:[^\]]+\]\]$/)){let e=s.match(/^\[\[mention:([^:]+):([\s\S]+):([^\]]+)\]\]$/);if(e){let[r,i,a,o]=e,s=a.lastIndexOf(":");if(-1!==s){let e=a.substring(0,s),r=a.substring(s+1);if(n.CHATBOT_TYPE_VALUES.includes(r))return(0,t.jsx)(eo,{id:i,name:e,type:r},"mention-".concat(u,"-").concat(i))}let l=n.CHATBOT_TYPE_VALUES.includes(o)?o:"DOCUMENT";return(0,t.jsx)(eo,{id:i,name:a,type:l},"mention-".concat(u,"-").concat(i))}}if(s.match(/^\[\[tool:[^:]+:[^\]]+\]\]$/)){let e=s.match(/^\[\[tool:([^:]+):([^\]]+)\]\]$/);if(e){let[n,r,i]=e;return(0,t.jsx)(es,{toolType:r,name:i},"tool-".concat(u,"-").concat(r))}}return s})}},ed=[{id:"javascript",name:"JavaScript",aliases:["js"]},{id:"typescript",name:"TypeScript",aliases:["ts"]},{id:"python",name:"Python",aliases:["py"]},{id:"java",name:"Java"},{id:"c",name:"C"},{id:"cpp",name:"C++",aliases:["c++"]},{id:"csharp",name:"C#",aliases:["cs"]},{id:"php",name:"PHP"},{id:"ruby",name:"Ruby",aliases:["rb"]},{id:"go",name:"Go",aliases:["golang"]},{id:"rust",name:"Rust",aliases:["rs"]},{id:"swift",name:"Swift"},{id:"kotlin",name:"Kotlin",aliases:["kt"]},{id:"scala",name:"Scala"},{id:"r",name:"R"},{id:"matlab",name:"MATLAB"},{id:"sql",name:"SQL"},{id:"html",name:"HTML"},{id:"css",name:"CSS"},{id:"scss",name:"SCSS"},{id:"sass",name:"Sass"},{id:"less",name:"Less"},{id:"json",name:"JSON"},{id:"xml",name:"XML"},{id:"yaml",name:"YAML",aliases:["yml"]},{id:"toml",name:"TOML"},{id:"markdown",name:"Markdown",aliases:["md"]},{id:"bash",name:"Bash",aliases:["shell","sh"]},{id:"powershell",name:"PowerShell",aliases:["ps1"]},{id:"dockerfile",name:"Dockerfile"},{id:"docker",name:"Docker"},{id:"nginx",name:"Nginx"},{id:"apache",name:"Apache"},{id:"graphql",name:"GraphQL",aliases:["gql"]},{id:"prisma",name:"Prisma"},{id:"vue",name:"Vue"},{id:"svelte",name:"Svelte"},{id:"jsx",name:"JSX"},{id:"tsx",name:"TSX"},{id:"handlebars",name:"Handlebars",aliases:["hbs"]},{id:"pug",name:"Pug"},{id:"stylus",name:"Stylus",aliases:["styl"]},{id:"coffeescript",name:"CoffeeScript",aliases:["coffee"]},{id:"dart",name:"Dart"},{id:"elixir",name:"Elixir",aliases:["ex"]},{id:"erlang",name:"Erlang",aliases:["erl"]},{id:"haskell",name:"Haskell",aliases:["hs"]},{id:"lua",name:"Lua"},{id:"perl",name:"Perl",aliases:["pl"]},{id:"clojure",name:"Clojure",aliases:["clj"]},{id:"fsharp",name:"F#",aliases:["fs"]},{id:"ocaml",name:"OCaml"},{id:"reason",name:"Reason"},{id:"elm",name:"Elm"},{id:"purescript",name:"PureScript",aliases:["purs"]},{id:"solidity",name:"Solidity",aliases:["sol"]},{id:"move",name:"Move"},{id:"zig",name:"Zig"},{id:"nim",name:"Nim"},{id:"crystal",name:"Crystal",aliases:["cr"]},{id:"julia",name:"Julia",aliases:["jl"]},{id:"tex",name:"LaTeX",aliases:["latex"]},{id:"bibtex",name:"BibTeX"},{id:"makefile",name:"Makefile"},{id:"cmake",name:"CMake"},{id:"ini",name:"INI"},{id:"properties",name:"Properties"},{id:"env",name:"Environment",aliases:[".env"]},{id:"gitignore",name:"Git Ignore"},{id:"diff",name:"Diff"},{id:"log",name:"Log"},{id:"plaintext",name:"Plain Text",aliases:["text","txt"]}];async function eh(e,n,i){try{if(!e||!e.trim())return null;let a=function(e){let t=e.toLowerCase().trim(),n=ed.find(e=>{var n;return e.id===t||(null==(n=e.aliases)?void 0:n.includes(t))});return(null==n?void 0:n.id)||"plaintext"}(n),o=void 0!==x.bundledLanguages[a],s=await (0,w.codeToHast)(e,{lang:o?a:"plaintext",theme:i?"github-dark":"github-light"});return(0,r.toJsxRuntime)(s,{Fragment:b.Fragment,jsx:t.jsx,jsxs:t.jsxs})}catch(t){return console.warn("Shiki highlighting failed:",t,{language:n,codeLength:e.length,darkTheme:i}),null}}let ep=e=>{let{children:n}=e;return(0,t.jsx)("h1",{className:"text-2xl font-semibold leading-[32px] mt-12 mb-4 text-text-primary",children:n})},ef=e=>{let{children:n}=e;return(0,t.jsx)("h2",{className:"text-xl font-semibold leading-[28px] mt-10 mb-3 text-text-primary",children:n})},em=e=>{let{children:n}=e;return(0,t.jsx)("h3",{className:"text-lg font-semibold leading-[24px] mt-8 mb-2 text-text-primary",children:n})},eg=e=>{let{children:n}=e;return(0,t.jsx)("h4",{className:"font-[550] mt-6 mb-2 text-text-primary",children:n})},ev=e=>{let{children:n}=e;return(0,t.jsx)("h5",{className:"font-[550] mt-6 mb-2 text-text-primary",children:n})},ey=e=>{let{children:n}=e;return(0,t.jsx)("h6",{className:"font-[550] mt-6 mb-2 text-text-primary",children:n})},eb=e=>{let{children:n}=e;return(0,t.jsx)("blockquote",{className:"text-secondary border-l-text-secondary border-l-4 pl-4 my-6 not-italic [&>*]:text-text-secondary [&>*]:not-italic h-fit",children:n})},ex=e=>{let{children:n,sources:r=[],type:i,citationMap:a}=e,o=b.default.useRef({accumulatedText:""});return(0,t.jsx)(J.Provider,{value:{contextRef:o},children:(0,t.jsx)("div",{className:"tracking-[-0.16px] break-words font-[450] whitespace-pre-wrap",children:b.default.Children.map(n,ec(r,i,a,o))})})},ew=e=>{let{children:n,sources:r=[],type:i,citationMap:a,contextRef:o}=e,s=b.default.useRef({accumulatedText:""}),l=(0,b.useContext)(J),u=o||l.contextRef||s;return(0,t.jsx)("strong",{className:"font-[550] text-text-primary [*[data-thinking]_&]:text-text-secondary",children:b.default.Children.map(n,ec(r,i,a,u,!0))})},ek=e=>{let{children:n,sources:r=[],type:i,citationMap:a,contextRef:o}=e,s=b.default.useRef({accumulatedText:""}),l=(0,b.useContext)(J),u=o||l.contextRef||s;return(0,t.jsx)("em",{className:"text-text-primary",children:b.default.Children.map(n,ec(r,i,a,u,!0))})},eS=e=>{let{children:n,...r}=e;return(0,t.jsx)("ol",{className:"list-decimal not-prose pl-6 my-6 marker:font-sans marker:normal-nums text-foreground [&_ol]:list-[lower-alpha] [&_ol_ol]:list-[lower-roman] [&_ol_ol_ol]:list-decimal [&_ol_ol_ol_ol]:list-[lower-alpha] [&_ol_ol_ol_ol_ol]:list-[lower-roman] [&_ol_ol_ol_ol_ol_ol]:list-decimal whitespace-normal",...r,children:n})},e_=e=>{let{children:n,...r}=e;return(0,t.jsx)("ul",{className:"list-disc not-prose pl-6 my-6 text-foreground [&_ul]:list-[circle] [&_ul_ul]:list-[square] [&_ul_ul_ul]:list-[disc] [&_ul_ul_ul_ul]:list-[circle] [&_ul_ul_ul_ul_ul]:list-[square] [&_ul_ul_ul_ul_ul_ul]:list-[disc] whitespace-normal",...r,children:n})},eC=e=>{if("string"==typeof e)return e;if("number"==typeof e)return e.toString();if(b.default.isValidElement(e)){let t=e.props;if(t.children)return b.default.Children.toArray(t.children).map(eC).join("")}return Array.isArray(e)?e.map(eC).join(""):""},eA=e=>{let{children:n,sources:r=[],type:i,citationMap:a,...o}=e,s=b.default.useRef({accumulatedText:""}),l=b.default.Children.toArray(n).map(eC).join("").replace(/(@\d+|\[\[mention:[^:]+:[^:]+:[^\]]+\]\]|\[\[tool:[^:]+:[^\]]+\]\]|\[\d+\](?:\(#(?:page-)?\d+\)))/g,"");return s.current.accumulatedText=l,(0,t.jsx)(J.Provider,{value:{contextRef:s},children:(0,t.jsx)("li",{className:"mb-4 ml-8 marker:text-secondary-foreground [&>ul]:my-1 [&>ol]:my-1 text-text-primary",...o,children:b.default.Children.map(n,ec(r,i,a,s,!0))})})},eE=e=>{let{children:n,className:r,...i}=e,a=/language-(\w+)/.exec(r||""),o=null==a?void 0:a[1],{resolvedTheme:s}=(0,y.useTheme)(),[u,c]=(0,b.useState)(),[d,h]=(0,b.useState)(!1);b.default.useEffect(()=>{n&&o?(c(void 0),eh(n,o,"dark"===s).then(e=>{e?c(e):c(void 0)}).catch(e=>{console.warn("Failed to highlight code:",e),c(void 0)})):n&&!o&&c(void 0)},[n,s,o]);let p=async()=>{try{await navigator.clipboard.writeText(n),console.log("Code copied to clipboard")}catch(e){console.error("Failed to copy code")}},f=(n||"").split("\n"),m=Array.from({length:""===f[f.length-1]?f.length-1:f.length},(e,t)=>t+1);return o?(0,t.jsxs)("div",{className:"relative group !my-6",onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),children:[(0,t.jsx)("div",{className:"absolute top-2 right-2 z-10 flex items-center gap-2 transition-opacity duration-200 ".concat(d?"opacity-100":"opacity-0 pointer-events-none"),children:(0,t.jsx)("button",{type:"button",onClick:p,className:"flex items-center justify-center w-8 h-8 text-text-secondary bg-secondary hover:bg-accent rounded-md transition-colors","aria-label":"Copy code to clipboard",tabIndex:d?0:-1,children:(0,t.jsx)(E.Icon,{as:l.Copy,className:"w-[14px] h-[14px]"})})}),(0,t.jsxs)("div",{className:"flex rounded-4 overflow-hidden border bg-control-primary",children:[(0,t.jsx)("div",{className:"flex flex-col text-right text-text-secondary bg-muted pr-3 py-3 text-sm font-mono select-none min-w-[3rem] leading-6 flex-shrink-0",children:m.map(e=>(0,t.jsx)("span",{className:"block leading-6",children:e},e))}),(0,t.jsx)("div",{className:"relative flex-1 h-full overflow-x-auto !code-block-scroll",children:u?(0,t.jsx)("div",{className:"whitespace-pre [&_pre]:whitespace-pre [&_code]:whitespace-pre [&_pre]:m-0 [&_pre]:p-0 [&_pre]:bg-transparent [&_code]:bg-transparent",children:u}):(0,t.jsx)("pre",{className:"py-3 pl-3 text-text-primary font-mono text-sm leading-6 whitespace-pre bg-transparent",children:n})})]})]}):(0,t.jsx)("code",{...i,className:(0,L.cn)(r,"rounded-3 bg-muted border border-border not-prose px-2 py-1 font-mono font-semibold text-orange text-sm"),children:n})},eT=e=>{let{children:n}=e,r=b.default.useRef(null),[i,a]=b.default.useState(0),[o,s]=b.default.useState(0);b.default.useEffect(()=>{if(r.current){let e=r.current.querySelector("tr");a(e?e.children.length:0)}},[n]),b.default.useEffect(()=>{let e,t=()=>{r.current&&(clearTimeout(e),e=setTimeout(()=>{if(r.current){let e=r.current.closest('[style*="container-type"]');e&&s(e.getBoundingClientRect().width)}},50))};t();let n=new ResizeObserver(t);if(r.current){let e=r.current.closest('[style*="container-type"]');e&&n.observe(e)}return()=>{clearTimeout(e),n.disconnect()}},[n]);let l=(e=>e<=2?"100px":3===e?"160px":4===e?"200px":e>=5?"250px":"120px")(i);return i>=4&&o>908?(0,t.jsx)("div",{className:"my-6 relative left-1/2 -translate-x-1/2 px-7 sm:px-10 md:px-16 lg:px-24",style:{width:"100cqw"},children:(0,t.jsx)("div",{className:"relative overflow-x-auto scrollbar-overlay",children:(0,t.jsx)("div",{className:"px-4 sm:px-7",children:(0,t.jsx)("table",{ref:r,className:"mx-auto table-auto border-collapse border text-sm rounded-6 not-prose [&_td]:max-w-[var(--max-col-width)] [&_th]:max-w-[var(--max-col-width)] [&_td]:break-words [&_th]:break-words [&_tr:nth-child(odd)_td]:bg-black/[0.02] dark:[&_tr:nth-child(odd)_td]:bg-white/[0.02] [&_tr:nth-child(even)_td]:bg-transparent",style:{"--max-col-width":l,minWidth:"680px"},children:n})})})}):(0,t.jsx)("div",{className:"my-6 max-w-[680px] mx-auto",children:(0,t.jsx)("div",{className:"relative overflow-x-auto",children:(0,t.jsx)("table",{ref:r,className:"table-auto border-collapse border text-sm rounded-6 mx-auto not-prose [&_tr:nth-child(odd)_td]:bg-black/[0.02] dark:[&_tr:nth-child(odd)_td]:bg-white/[0.02] [&_tr:nth-child(even)_td]:bg-transparent",children:n})})})},eM=e=>{let{children:n}=e;return(0,t.jsx)("tr",{className:"border-b",children:n})},eI=e=>{let{children:n,sources:r=[],type:i,citationMap:a}=e,o=b.default.Children.map(n,e=>{if("string"==typeof e){let n=e.split(/<br\s*\/?>/);return n.map((e,r)=>r<n.length-1?(0,t.jsxs)(b.default.Fragment,{children:[e,(0,t.jsx)("br",{})]},"".concat(e.slice(0,10),"-").concat(r)):e)}return e}),s=b.default.useRef({accumulatedText:""});return(0,t.jsx)(J.Provider,{value:{contextRef:s},children:(0,t.jsx)("td",{className:"border border-border-primary px-4 py-4 text-left text-text-primary",children:b.default.Children.map(o,ec(r,i,a,s))})})},eN=e=>{let{children:n}=e;return(0,t.jsx)("th",{className:"border bg-black/5 dark:bg-white/5 border-border-primary px-4 py-4 text-left font-bold text-text-primary",children:n})}},207362:e=>{"use strict";e.s({default:()=>u});var t=e.i(290479),n=e.i(373150),r=e.i(331237),i=e.i(852878),a=e.i(475096),o=e.i(280859),s=e.i(58372);let l={h1:s.H1,h2:s.H2,h3:s.H3,h4:e=>(0,t.jsx)("h4",{className:"text-sm font-bold text-text-primary",children:e.children}),a:e=>(0,t.jsx)("a",{href:e.href,className:"pointer-events-none text-text-primary",children:e.children}),ol:s.OrderedList,img:e=>{let{src:n,alt:r}=e;return(0,t.jsx)("img",{src:n,alt:r||"",className:"pointer-events-none max-w-full h-auto"})},ul:s.UnorderedList,li:e=>{let{children:n,...r}=e;return(0,t.jsx)("li",{className:"mb-4 ml-8",...r,children:n})},code:s.CodeBlock,p:e=>{let{children:n,...r}=e;return(0,t.jsx)("p",{className:"text-sm",...r,children:n})},table:s.Table,tr:s.TableRow,td:e=>{let{children:n,...r}=e;return(0,t.jsx)("td",{className:"border border-border-primary px-6 py-4 text-left",...r,children:n})},th:s.TableHead,strong:e=>(0,t.jsx)("strong",{className:"text-text-primary",children:e.children})},u=e=>{let{content:s}=e,u=(0,n.useMemo)(()=>s,[s]);return(0,t.jsx)("div",{className:"max-w-3xl mx-auto p-10 bg-background-primary  min-h-full",children:(0,t.jsx)("article",{className:"prose prose-slate text-text-primary max-w-none","data-testid":"reader-view",children:(0,t.jsx)(o.Streamdown,{className:"text-text-primary",components:l,rehypePlugins:[[r.default,{output:"mathml"}]],remarkPlugins:[i.default,[a.default,{singleDollarTextMath:!0}]],children:u})})})}},590374:e=>{"use strict";e.s({default:()=>l});var t=e.i(290479),n=e.i(663018),r=e.i(814733),i=e.i(281186),a=e.i(373150),o=e.i(842877),s=e.i(207362);let l=e=>{let{id:l,url:u}=e,[c,d]=(0,a.useState)(!1),[h,p]=(0,a.useState)(!0),f=(0,a.useRef)(null),[m,g]=(0,a.useState)(!0),{data:y}=r.api.chatbot.markdownWebsite.useQuery(l,{enabled:!!l,refetchOnMount:!0,refetchInterval:e=>{var t;return(null==e||null==(t=e.state)||!t.data)&&1e3}});return((0,a.useEffect)(()=>{if(u){let e="/api/proxy?url=".concat(encodeURIComponent(u));i.default.get(e).then(e=>{200===e.status?d(!1):d(!0),g(!1)}).catch(()=>{d(!0),g(!1)})}},[u]),(0,a.useEffect)(()=>{let e=setTimeout(()=>{p(!1)},3e3);return()=>clearTimeout(e)},[u]),m)?(0,t.jsx)("div",{className:"w-full flex justify-center bg-background-primary h-full items-center",children:(0,t.jsx)(n.LoadingSpinner,{color:"gray",variant:void 0})}):y?(0,t.jsx)("div",{className:"h-full",children:(0,t.jsx)("div",{className:"h-full overflow-y-auto bg-background-primary break-words",children:(0,t.jsx)(s.default,{content:y})})}):c?(0,t.jsx)("div",{className:"h-full",children:(0,t.jsx)("div",{className:"h-full overflow-y-auto bg-background-primary break-words",children:(0,t.jsx)(o.default,{isWebsite:!0,url:u})})}):(0,t.jsx)("iframe",{ref:f,style:h?{pointerEvents:"none"}:{},src:"/api/proxy?url=".concat(encodeURIComponent(u)),title:"website-viewer",onLoad:()=>{var e,t;if(null==f||null==(t=f.current)||null==(e=t.contentDocument)?void 0:e.head){let e=f.current.contentDocument.createElement("style");e.textContent="\n        a {\n          pointer-events: none !important;\n          cursor: default !important;\n        }\n      ",f.current.contentDocument.head.appendChild(e)}},width:"100%",height:"100%",loading:"lazy",className:"scrollbar-hide"})}},418094:e=>{"use strict";e.s({default:()=>k});var t=e.i(290479),n=e.i(116075),r=e.i(373150),i=e.i(430266),a=e.i(51785),o=e.i(440840),s=e.i(852951),l=e.i(605210),u=e.i(814733),c=e.i(155004),d=e.i(557250),h=e.i(597875),p=e.i(663018),f=e.i(348170),m=e.i(972899),g=e.i(483437),y=e.i(180555),b=e.i(234526),x=e.i(276442),w=e.i(590374);let k=e=>{var k,S;let{chatbotId:_,isChatOpen:C,onMinimize:A,enabled:E=!0}=e,{shareData:T}=(0,h.useIsSharedChat)(),{chatbot:M}=(0,a.default)({id:null==T?void 0:T.chatbotId,enabled:!!T}),{chatbot:I}=(0,s.useWorkspaceChatbot)(_,E),N=M||I,{isAdmin:D}=(0,o.useImpersonation)(),{updateChatbot:P}=(0,s.useWorkspaceActions)(),R=u.api.chatbot.updateLastViewed.useMutation({onMutate:e=>{P(e,{lastViewedAt:new Date})}});if((0,r.useEffect)(()=>{I&&_&&!D&&R.mutate(_)},[_]),!N)return(0,t.jsx)("div",{className:"h-full w-full flex justify-center items-center",children:(0,t.jsx)(p.LoadingSpinner,{variant:"screen",color:void 0})});let O=N.isIndexed||"RECORDING"===N.type||"NOTE"===N.type||"CHAT"===N.type;if("FAILED"===N.ingestionStatus||"TIMEOUT"===N.ingestionStatus||!1===O&&N.createdAt&&Date.now()-new Date(N.createdAt).getTime()>18e5)return(0,t.jsx)("div",{className:"flex flex-col grow bg-control-primary border-border-primary w-full h-full overflow-hidden",children:(0,t.jsx)("div",{className:"h-full w-full flex justify-center items-center",children:(0,t.jsxs)("div",{className:"flex flex-col items-center max-w-[300px] text-center",children:[(0,t.jsx)(m.Icon,{as:n.CircleAlert,size:"xl",className:"mb-7 text-destructive-solid"}),(0,t.jsx)("h3",{className:"text-lg font-medium mb-4 text-destructive-solid",children:"Import Failed"}),(0,t.jsx)("p",{className:"text-text-secondary",children:"There was an error processing the file. Try uploading it again."})]})})});if(null==(k=N.documentUrl)?void 0:k.startsWith("https://storage.googleapis.com"))return(0,t.jsx)("div",{className:"flex flex-col grow bg-control-primary border-border-primary w-full h-full overflow-hidden",children:(0,t.jsx)(y.default,{fileName:null!=(S=N.name)?S:"",chatbotId:N.id})});let j=(e=>{let{documentUrl:t,id:n}=e;return(null==t?void 0:t.startsWith("https://storage.googleapis.com"))?t:(null==t?void 0:t.includes("s3.amazonaws.com"))?"https://cdn.infra.unriddle.ai/documents/".concat(n):(null==t?void 0:t.startsWith("https://cdn.infra.unriddle.ai/documents/"))?t:null})(N);return(0,t.jsx)("div",{className:"flex flex-col grow bg-control-primary border-border-primary w-full h-full overflow-hidden",children:(0,i.match)(N).with({type:"VIDEO"},e=>(0,t.jsxs)("div",{className:"flex flex-grow overflow-y-auto flex-col grow-1",children:[(0,t.jsx)("div",{className:"flex justify-center items-center max-w-screen-lg mx-auto w-full",children:e.url&&(0,t.jsx)(g.default,{url:e.url},e.id)}),(0,t.jsx)(f.default,{id:e.id,isIngested:e.isIndexed})]})).with({type:"TEXT"},()=>(0,t.jsx)("div",{className:"bg-background-primary whitespace-pre-line text-sm p-7 overflow-y-auto h-[93vh]"})).with({type:"NOTE"},e=>(0,t.jsx)("div",{className:"bg-background-primary whitespace-pre-line text-sm overflow-y-auto h-full",children:(0,t.jsx)(l.default,{isChatOpen:C,chatbotId:e.id,tabView:!0},e.id)})).with({type:"QUIZ"},e=>(0,t.jsx)(x.default,{chatbotId:e.id})).with({type:"WEBSITE"},e=>e.url&&(0,t.jsx)("div",{className:"relative h-full scrollbar-hide",children:(0,t.jsx)(w.default,{id:e.id,url:e.url})})).with({type:i.P.union("DOCUMENT","IMAGE")},()=>j?(0,t.jsx)(b.default,{documentUrl:j,chatbotId:N.id,onMinimize:A}):null).with({type:"RECORDING"},()=>(0,t.jsx)(c.default,{chatbotId:N.id,isIndexed:N.isIndexed},N.id)).with({type:"AUDIO"},e=>e.url&&(0,t.jsx)(d.default,{isIndexed:e.isIndexed,chatbotId:N.id,url:e.url},N.id)).otherwise(()=>null)})}},643599:e=>{"use strict";e.s({MentionCitationTooltip:()=>X,ScopedViewWindow:()=>Y});var t=e.i(290479),n=e.i(769512),r=e.i(647968),i=e.i(608294),a=e.i(184901),o=e.i(882204),s=e.i(45576),l=e.i(919807),u=e.i(546074),c=e.i(65965),d=e.i(240824),h=e.i(635934),p=e.i(88070),f=e.i(330462),m=e.i(397711),g=e.i(373150),y=e.i(704255),b=e.i(238960),x=e.i(998145),w=e.i(457443),k=e.i(993392),S=e.i(972899),_=e.i(303652),C=e.i(935989),A=e.i(91410),E=e.i(457910),T=e.i(83874),M=e.i(967923),I=e.i(428625),N=e.i(132722),D=e.i(418094),P=e.i(51785),R=e.i(67491),O=e.i(220642),j=e.i(910173),F=e.i(814733),L=e.i(289702),z=e.i(625483),B=e.i(430266),U=e.i(512109),H=e.i(507396),W=e.i(389695),V=e.i(252390),q=e.i(23061);let G=()=>(0,t.jsx)("div",{className:"flex justify-center items-center h-full w-full ",children:(0,t.jsx)("div",{className:"loader-gray"})}),$=e=>{let{onColorSelect:n,selectedColor:r}=e,i=(0,j.getHighlightColorOptions)();return(0,t.jsx)("div",{className:"flex flex-col p-2",children:i.map(e=>(0,t.jsxs)("button",{onClick:t=>{t.stopPropagation(),n(e.value)},className:"flex flex-row items-center justify-between gap-2 w-full hover:bg-control-primary rounded-4 p-4 group",children:[(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,t.jsx)("span",{className:(0,L.cn)("w-[14px] h-[14px] rounded-full border-2 group-hover:scale-110 transition-transform",e.bgClass,e.borderClass)}),(0,t.jsx)("span",{className:"text-xs font-medium text-text-primary group-hover:text-text-primary/80",children:e.name})]}),r===e.value&&(0,t.jsx)(S.Icon,{as:o.CheckIcon,className:"w-7 h-7 text-blue"})]},e.name))})},K=e=>{let{documentUrl:r,chatbotId:i,highlightAtom:a}=e,[o,s]=(0,g.useState)(null),[l,c]=(0,g.useState)(!1),[h,p]=(0,g.useState)(!1),[m,b]=(0,g.useState)("thumbnails"),{resolvedTheme:x}=(0,z.useTheme)(),{data:w,isLoading:k}=F.api.documentAnnotation.all.useQuery(i),_=(0,g.useCallback)(async e=>{let{proxy:t,source:n}=e,r=await t.getOutline();s(n),(null==r?void 0:r.length)>0&&c(!0)},[]),C=(0,g.useMemo)(()=>({maxZoom:5,minZoom:.5}),[]);return(0,t.jsxs)(n.Root,{isZoomFitWidth:!0,onDocumentLoad:_,zoomOptions:C,source:r,className:(0,L.cn)("bg-background-primary overflow-hidden relative h-full",(0,q.isSafariOrFirefox)()&&"tracking-[initial]"),loader:(0,t.jsx)(G,{}),children:[(0,t.jsx)(T.HighlightManager,{documentUrl:r,currentLoadedUrl:o,highlightAtom:a}),(0,t.jsxs)("div",{className:"flex flex-col h-full",children:[(0,t.jsx)("div",{className:"px-4 py-3 bg-background-primary border-b border-border-primary flex flex-row items-center relative justify-between",children:(0,t.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,t.jsx)(y.Button,{size:"icon",variant:"ghost",className:"text-text-primary",onClick:()=>p(!h),children:(0,t.jsx)(S.Icon,{as:u.LayoutList})}),(0,t.jsx)(y.Button,{size:"icon",variant:"ghost",className:"text-text-primary",onClick:()=>{p(!0),b("search")},children:(0,t.jsx)(S.Icon,{as:d.SearchIcon})})]})}),(0,t.jsxs)("div",{className:"flex flex-grow overflow-hidden relative",children:[(0,t.jsx)(f.AnimatePresence,{children:h&&(0,t.jsxs)(M.PDFViewerSidebar,{children:[(0,t.jsx)("div",{className:"py-6",children:(0,t.jsxs)(A.ToggleGroup,{defaultValue:"thumbnails",type:"single",value:m,className:"px-6 justify-start",onValueChange:e=>{e&&e!==m&&b(e)},children:[(0,t.jsx)(A.ToggleGroupItem,{size:"sm",value:"thumbnails",children:"Thumbnails"}),(0,t.jsx)(A.ToggleGroupItem,{disabled:!l,size:"sm",value:"outline",children:"Outline"}),(0,t.jsx)(A.ToggleGroupItem,{size:"sm",value:"search",children:"Search"})]})}),(0,t.jsx)("div",{className:"h-full overflow-auto pb-16",children:(0,t.jsx)("div",{className:"overflow-y-auto h-full overflow-x-hidden",children:(0,t.jsx)("div",{className:"w-full h-full overflow-x-hidden px-6",children:(0,t.jsx)(n.Search,{loading:null,children:(0,B.match)(m).with("thumbnails",()=>(0,t.jsx)(n.Thumbnails,{className:"flex flex-col items-center ",children:(0,t.jsx)(n.Thumbnail,{className:(0,L.cn)("border-secondary border-4 outline-blue outline-4 rounded-4 m-2 transition-all duration-200 hover:!border-border-primary cursor-pointer shadow-none relative w-48","dark"===x&&"invert-[91%] hue-rotate-180 brightness-[80%] contrast-[228%] bg-background-primary !border-muted-foreground")})})).with("outline",()=>(0,t.jsx)(n.Outline,{className:"pl-4",children:(0,t.jsx)(n.OutlineItem,{className:"text-sm [&>a]:py-1 [&>a]:block [&>a:hover]:underline",children:(0,t.jsx)(n.OutlineChildItems,{className:"pl-7"})})})).with("search",()=>(0,t.jsx)(N.SearchMenu,{})).otherwise(()=>null)})})})})]})}),(0,t.jsx)("div",{className:"flex-1",onMouseUp:e=>{e.preventDefault(),e.stopPropagation()},children:!k&&(null==w?void 0:w.annotations)&&(0,t.jsx)(I.PdfContent,{chatbotId:i,isQuickHighlightMode:!0,defaultAnnotations:null==w?void 0:w.annotations})})]})]})]})},Y=e=>{let{chatbotId:n,highlightAtom:r}=e,{chatbot:i}=(0,P.default)({id:n});if(!i)return null;if("DOCUMENT"===i.type||"IMAGE"===i.type){let e=(e=>{let{documentUrl:t,id:n}=e;return(null==t?void 0:t.startsWith("https://storage.googleapis.com"))?t:(null==t?void 0:t.includes("s3.amazonaws.com"))?"https://cdn.infra.unriddle.ai/documents/".concat(n):(null==t?void 0:t.startsWith("https://cdn.infra.unriddle.ai/documents/"))?t:null})(i);if(e)return(0,t.jsx)("div",{className:"flex flex-col grow bg-control-primary border-border-primary w-full h-full overflow-hidden relative max-w-full min-w-0",children:(0,t.jsx)(K,{documentUrl:e,chatbotId:i.id,highlightAtom:r})})}return(0,t.jsx)(D.default,{chatbotId:n,isChatOpen:!0})},X=e=>{var n;let{content:o,children:u,citation:d,className:f}=e,[A,T]=(0,g.useState)(!1),[M,I]=(0,g.useState)(!1),[N,D]=(0,g.useState)(null),{track:P}=(0,V.default)(),{goToChunk:z}=(0,H.default)(),[B,q]=(0,g.useState)(!1),[G,K]=(0,g.useState)(!1),X=(0,m.useParams)(),Z=(0,m.useRouter)();null==X||X.id;let{getSourceColor:J,setSourceColor:Q}=(0,R.useCitationColors)("citations-global"),ee=(0,g.useMemo)(()=>{let e;if(!d.chatbotId||"external-source"===d.sourceType||"external-database"===d.sourceType)return null;let t=d.data;if(!t)return null;switch(t.type){case"document":e={type:"document",pageNumber:t.pageNumber||1,originalElements:t.originalElements||null};break;case"video":e={type:"video",start:t.start||0,end:t.end||0,seek:t.seek};break;case"audio":e={type:"audio",start:(null==t?void 0:t.start)||0,end:(null==t?void 0:t.end)||0,seek:null==t?void 0:t.seek,speaker:null==t?void 0:t.speaker};break;case"website":e={type:"website",url:(null==t?void 0:t.url)||d.url};break;case"internal-database":e={...t};break;case"text":e={type:"text"};break;case"note":e={type:"note"};break;default:e={type:"document",pageNumber:1,originalElements:null}}return{type:"source",chatbotId:d.chatbotId,order:d.order||1,data:e,text:o}},[d,o]),et=ee?J(ee):"blue",en=(0,g.useCallback)(async e=>{if(ee&&(await Q(ee,e),"document"===ee.data.type&&ee.data.originalElements)){let t=(0,b.getDocumentCoordinates)(ee.data);t.length>0&&setTimeout(()=>{z(t,e)},10)}q(!1)},[ee,Q,z]);(0,g.useCallback)(e=>{let t={yellow:"bg-yellow/10 hover:bg-yellow/20 hover:text-yellow/80 text-yellow",orange:"bg-orange/10 hover:bg-orange/20 hover:text-orange/80 text-orange",green:"bg-green/10 hover:bg-green/20 hover:text-green/80 text-green",blue:"bg-blue/10 hover:bg-blue/20 hover:text-blue/80 text-blue",purple:"bg-purple/10 hover:bg-purple/20 hover:text-purple/80 text-purple",red:"bg-red/10 hover:bg-red/20 hover:text-red/80 text-red"};return t[e]||t.blue},[]);let er=(0,g.useCallback)(e=>{let t=(0,j.getHighlightColorByName)(e);return{bg:t.bgClass,border:t.borderClass}},[]),ei=(0,g.useMemo)(()=>(0,r.atom)(null),[]),[,ea]=(0,i.useAtom)(ei),eo="external-source"===d.sourceType,es=!!d.chatbotId&&!eo;(0,g.useEffect)(()=>{if(A&&N&&N.length>0){let e=setTimeout(()=>{ea({type:"chunk",rects:N,rectType:"percent",color:et})},500);return()=>clearTimeout(e)}},[A,N,ea,et]);let{data:el,isPending:eu}=F.api.citations.preview.useQuery(null!=(n=d.chatbotId)?n:"",{enabled:es&&M}),ec=!!(es&&(null==el?void 0:el.summary)),{data:ed,isLoading:eh,error:ep,hasTimedOut:ef}=(0,W.useCitationExplanationStream)(o,(null==el?void 0:el.summary)||"",(null==el?void 0:el.title)||void 0,{enabled:ec}),{data:em,isLoading:eg,error:ev,hasTimedOut:ey}=(0,W.useCitationExplanationStream)(o,"",d.title||void 0,{enabled:!!eo}),[eb,ex]=(0,g.useState)(!1),ew=()=>{var e,t,n;if(eo){let e=d.url||(null==(n=d.data)?void 0:n.url);e&&window.open(e,"_blank","noopener,noreferrer");return}if((null==(e=d.data)?void 0:e.type)==="document"&&(null==(t=d.data)?void 0:t.originalElements))try{let e=(0,b.getDocumentCoordinates)({pageNumber:d.data.pageNumber||1,originalElements:d.data.originalElements,type:"document"});if(e.length>0){let t=[];for(let n of e){let e=(0,O.convertCoordinatesToArea)(n.area,n.pageNumber-1);t.push(e)}D(t)}}catch(e){D(null)}else D(null);T(!0)},ek=()=>{T(!1)},eS=(0,g.useCallback)(e=>{e.stopPropagation(),ex(!0)},[]),e_=()=>{d.chatbotId&&(Z.push("/b/".concat(d.chatbotId)),T(!1))},eC=()=>{d.chatbotId&&window.open("/b/".concat(d.chatbotId),"_blank")};return eo?(0,t.jsx)("span",{className:"inline-flex",children:(0,t.jsxs)(k.HoverCard,{openDelay:75,closeDelay:100,onOpenChange:e=>{B||G||I(e)},children:[(0,t.jsx)(k.HoverCardTrigger,{asChild:!0,children:(0,t.jsx)("span",{onClick:e=>{e.preventDefault(),ew()},className:(0,L.cn)(f,"data-[state=open]:rounded-[6px] data-[state=closed]:rounded-[6px] inline-flex items-center gap-2 no-underline !text-blue cursor-pointer -translate-y-[-2px]"),children:(0,t.jsxs)("span",{className:"inline-flex items-center gap-1",children:[(0,t.jsx)(S.Icon,{as:a.ArrowUpRight,className:"w-7 h-7"}),u]})})}),(0,t.jsx)(k.HoverCardPortal,{children:(0,t.jsx)(k.HoverCardContent,{side:"top",align:"start",className:"bg-popover max-w-[300px] px-0 py-0 border border-border-primary rounded-4 shadow-feint text-xs -tracking-[0.32px]",children:(0,t.jsxs)("div",{className:"group relative",children:[(0,t.jsxs)("div",{className:"p-5 flex flex-col gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[(0,t.jsx)(S.Icon,{className:"flex-shrink-0 z-10 text-text-primary",as:a.ArrowUpRight}),(0,t.jsx)("div",{className:"text-xs font-medium text-text-primary line-clamp-1",children:d.title||"External Link"}),d.url&&(0,t.jsx)("a",{href:d.url,target:"_blank",rel:"noopener noreferrer",className:"ml-2 text-blue hover:text-blue/80",onClick:e=>e.stopPropagation(),children:(0,t.jsx)(S.Icon,{as:s.ExternalLinkIcon,className:"w-6 h-6"})})]}),(0,t.jsx)("div",{className:"flex items-center gap-4",children:eb?(0,t.jsx)(S.Icon,{as:l.FoldVertical,className:"flex-shrink-0 w-[14px] h-[14px] text-text-secondary hover:text-text-primary cursor-pointer transition-colors",onClick:e=>{e.stopPropagation(),ex(!1)}}):(0,t.jsx)(S.Icon,{as:h.UnfoldVertical,className:"flex-shrink-0 w-[14px] h-[14px] text-text-secondary hover:text-text-primary cursor-pointer transition-colors",onClick:e=>{e.stopPropagation(),ex(!0),P("citation_tooltip_expand_clicked",{isExternal:!0,sourceType:"external-source",citationUrl:d.url,citationTitle:d.title})}})})]}),(0,t.jsx)("div",{className:(0,L.cn)("text-text-primary dark:text-text-secondary",eb?"max-h-[150px] overflow-y-auto scrollbar-hide":"line-clamp-[4]"),children:(0,t.jsx)("div",{className:"text-text-secondary",children:o})})]}),(eg||em)&&!ey&&!ev&&(0,t.jsxs)("div",{className:"bg-control-primary rounded-4 p-5 flex flex-col gap-2 m-2",children:[(0,t.jsx)("div",{className:"font-medium text-text-secondary text-xs",children:"Relevance:"}),eg?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex flex-row gap-3",children:[(0,t.jsx)(C.SkeletonLoader,{className:"w-15 h-7 bg-primary/10 animate-pulse"}),(0,t.jsx)(C.SkeletonLoader,{className:"w-16 h-7 bg-primary/10 animate-pulse delay-100"}),(0,t.jsx)(C.SkeletonLoader,{className:"w-10 h-7 bg-primary/10 animate-pulse"}),(0,t.jsx)(C.SkeletonLoader,{className:"w-16 h-7 bg-primary/10 animate-pulse delay-150"})]}),(0,t.jsxs)("div",{className:"flex flex-row gap-3",children:[(0,t.jsx)(C.SkeletonLoader,{className:"w-20 h-7 bg-primary/10 animate-pulse delay-100"}),(0,t.jsx)(C.SkeletonLoader,{className:"w-9 h-7 bg-primary/10 animate-pulse delay-200"}),(0,t.jsx)(C.SkeletonLoader,{className:"w-16 h-7 bg-primary/10 animate-pulse delay-300"})]})]}):em?(0,t.jsx)("div",{className:"text-xs text-text-secondary",children:(0,t.jsx)(U.default,{markdownContent:em.explanation,className:"text-text-secondary",sources:[],type:"DOCUMENT"})}):null]})]})})})]})}):(0,t.jsxs)(w.Dialog,{open:A,onOpenChange:T,children:[(0,t.jsx)(w.DialogTrigger,{asChild:!0,children:(0,t.jsx)("span",{className:"inline-flex",children:(0,t.jsxs)(k.HoverCard,{openDelay:150,closeDelay:100,onOpenChange:e=>{B||G||I(e)},children:[(0,t.jsx)(k.HoverCardTrigger,{asChild:!0,children:(0,t.jsx)("span",{onClick:e=>{e.preventDefault(),ew()},className:(0,L.cn)(f,"data-[state=open]:rounded-[6px] data-[state=closed]:rounded-[6px] no-underline !text-blue cursor-pointer"),children:u})}),(0,t.jsx)(k.HoverCardPortal,{children:(0,t.jsx)(k.HoverCardContent,{side:"top",align:"start",className:"bg-popover max-w-[300px] px-0 py-0 border border-border-primary rounded-4 shadow-feint text-xs -tracking-[0.32px]",children:(0,t.jsx)("div",{children:es&&eu?(0,t.jsxs)("div",{className:"flex items-start flex-col gap-5 w-72",children:[(0,t.jsxs)("div",{className:"flex flex-row gap-3",children:[(0,t.jsx)(C.SkeletonLoader,{className:"w-16 h-7"}),(0,t.jsx)(C.SkeletonLoader,{className:"w-12 h-7"}),(0,t.jsx)(C.SkeletonLoader,{className:"w-9 h-7"}),(0,t.jsx)(C.SkeletonLoader,{className:"w-13 h-7"}),(0,t.jsx)(C.SkeletonLoader,{className:"w-16 h-7"}),(0,t.jsx)(C.SkeletonLoader,{className:"w-9 h-7"})]}),(0,t.jsxs)("div",{className:"flex flex-row gap-4",children:[(0,t.jsx)(C.SkeletonLoader,{className:"w-9 h-7"}),(0,t.jsx)(C.SkeletonLoader,{className:"w-10 h-7"}),(0,t.jsx)(C.SkeletonLoader,{className:"w-8 h-7"}),(0,t.jsx)(C.SkeletonLoader,{className:"w-15 h-7"}),(0,t.jsx)(C.SkeletonLoader,{className:"w-16 h-7"}),(0,t.jsx)(C.SkeletonLoader,{className:"w-[60px] h-7"})]}),(0,t.jsxs)("div",{className:"flex flex-row gap-4",children:[(0,t.jsx)(C.SkeletonLoader,{className:"w-10 h-7"}),(0,t.jsx)(C.SkeletonLoader,{className:"w-16 h-7"}),(0,t.jsx)(C.SkeletonLoader,{className:"w-9 h-7"}),(0,t.jsx)(C.SkeletonLoader,{className:"w-16 h-7"}),(0,t.jsx)(C.SkeletonLoader,{className:"w-13 h-7"})]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"group relative",children:(0,t.jsxs)("div",{className:"p-5 flex flex-col gap-4",children:[es&&(null==el?void 0:el.title)&&(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[(null==el?void 0:el.type)&&(0,t.jsx)(S.Icon,{className:"flex-shrink-0 z-10 text-text-primary",as:(0,x.default)({type:el.type})}),(0,t.jsx)("div",{className:"text-xs font-medium text-text-primary line-clamp-1",children:null==el?void 0:el.title})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[eb?(0,t.jsx)(S.Icon,{as:l.FoldVertical,className:"flex-shrink-0 w-[14px] h-[14px] text-text-secondary hover:text-text-primary cursor-pointer transition-colors",onClick:e=>{e.stopPropagation(),ex(!1)}}):(0,t.jsx)(S.Icon,{as:h.UnfoldVertical,className:"flex-shrink-0 w-[14px] h-[14px] text-text-secondary hover:text-text-primary cursor-pointer transition-colors",onClick:e=>{e.stopPropagation(),eS(e)}}),(0,t.jsxs)(_.Popover,{onOpenChange:q,children:[(0,t.jsxs)(E.Tooltip,{children:[(0,t.jsx)(E.TooltipTrigger,{asChild:!0,children:(0,t.jsx)(_.PopoverTrigger,{asChild:!0,children:(0,t.jsx)("button",{className:(0,L.cn)("flex-shrink-0 w-[14px] h-[14px] rounded-full border cursor-pointer transition-transform hover:scale-110",er(et).bg,er(et).border),onClick:e=>{e.stopPropagation()},onMouseEnter:()=>K(!0),onMouseLeave:()=>K(!1)})})}),(0,t.jsx)(E.TooltipContent,{side:"bottom",sideOffset:4,children:(0,t.jsx)("p",{children:"Highlight color"})})]}),(0,t.jsx)(_.PopoverContent,{className:"w-[120px] p-0 border border-border-primary",align:"end",side:"bottom",sideOffset:4,avoidCollisions:!0,collisionPadding:8,children:(0,t.jsx)($,{onColorSelect:en,selectedColor:et})})]})]})]}),(0,t.jsx)("div",{className:(0,L.cn)("text-text-primary",eb?"max-h-[150px] overflow-y-auto scrollbar-hide":"line-clamp-[4]"),children:(0,t.jsx)(U.default,{markdownContent:es&&el?(null==el?void 0:el.summary)||"":o,className:"",sources:[],type:"GROUP"})})]})}),es&&(null==el?void 0:el.summary)&&(eh||ed)&&!ef&&!ep&&(0,t.jsxs)("div",{className:"bg-control-primary rounded-4 p-5 flex flex-col gap-2 m-2",children:[(0,t.jsx)("div",{className:"font-medium text-text-secondary text-xs",children:"Relevance:"}),eh?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex flex-row gap-3",children:[(0,t.jsx)(C.SkeletonLoader,{className:"w-15 h-7 bg-text-tertiary animate-pulse"}),(0,t.jsx)(C.SkeletonLoader,{className:"w-16 h-7 bg-text-tertiary animate-pulse delay-100"}),(0,t.jsx)(C.SkeletonLoader,{className:"w-10 h-7 bg-text-tertiary animate-pulse"}),(0,t.jsx)(C.SkeletonLoader,{className:"w-16 h-7 bg-text-tertiary animate-pulse delay-150"}),(0,t.jsx)(C.SkeletonLoader,{className:"w-13 h-7 bg-text-tertiary animate-pulse delay-200"})]}),(0,t.jsxs)("div",{className:"flex flex-row gap-3",children:[(0,t.jsx)(C.SkeletonLoader,{className:"w-20 h-7 bg-text-tertiary animate-pulse delay-100"}),(0,t.jsx)(C.SkeletonLoader,{className:"w-9 h-7 bg-text-tertiary animate-pulse delay-200"}),(0,t.jsx)(C.SkeletonLoader,{className:"w-16 h-7 bg-text-tertiary animate-pulse delay-300"}),(0,t.jsx)(C.SkeletonLoader,{className:"w-10 h-7 bg-text-tertiary animate-pulse delay-400"})]})]}):ed?(0,t.jsx)("div",{className:"text-xs text-text-secondary",children:(0,t.jsx)(U.default,{markdownContent:ed.explanation,className:"text-text-secondary",sources:[],type:"GROUP"})}):null]})]})})})})]})})}),(0,t.jsxs)(w.DialogContent,{className:"bg-transparent border-none shadow-none md:max-w-[60vw] max-w-[100vw] p-0",hideCloseButton:!0,children:[(0,t.jsx)(w.DialogTitle,{className:"sr-only",children:(null==el?void 0:el.title)||d.title||"Document Preview"}),(0,t.jsxs)("div",{className:"flex flex-row h-[90vh] max-w-7xl gap-0 p-0 max-sm:flex-col max-sm:h-[92vh] max-sm:p-1",children:[(0,t.jsx)("div",{className:"flex-1 overflow-hidden rounded-4 min-w-0 max-w-full",children:(0,t.jsx)("div",{className:"w-full h-full overflow-hidden max-w-full",style:{contain:"layout size style"},children:(0,t.jsx)("div",{className:"w-full h-full max-w-full overflow-auto",style:{maxWidth:"100%",width:"100%"},children:(0,t.jsx)("div",{className:"w-full h-full",children:(0,t.jsx)("div",{className:"w-full h-full max-sm:scale-90 max-sm:flex max-sm:justify-center max-sm:items-start",children:d.chatbotId?(0,t.jsx)(Y,{chatbotId:d.chatbotId,highlightAtom:ei}):(0,t.jsx)("div",{className:"flex items-center justify-center h-full bg-background-primary rounded-4",children:(0,t.jsx)("p",{children:"No preview available"})})})})})})}),(0,t.jsxs)("div",{className:"flex flex-col gap-6 ml-7 justify-start max-sm:hidden",children:[(0,t.jsx)(y.Button,{variant:"outline",size:"sm",onClick:ek,className:"w-13 h-13 p-0 max-sm:w-10 max-sm:h-10",children:(0,t.jsx)(S.Icon,{as:p.XIcon,className:"w-7 h-7 max-sm:w-5 max-sm:h-5"})}),(0,t.jsx)(y.Button,{variant:"outline",size:"sm",onClick:e_,className:"w-13 h-13 p-0 max-sm:w-10 max-sm:h-10",children:(0,t.jsx)(S.Icon,{as:c.MaximizeIcon,className:"w-7 h-7 max-sm:w-5 max-sm:h-5"})}),(0,t.jsx)(y.Button,{variant:"outline",size:"sm",onClick:eC,className:"w-13 h-13 p-0 max-sm:w-10 max-sm:h-10",children:(0,t.jsx)(S.Icon,{as:s.ExternalLinkIcon,className:"w-7 h-7 max-sm:w-5 max-sm:h-5"})})]}),(0,t.jsxs)("div",{className:"flex flex-row gap-3 mt-3 justify-center w-full sm:hidden",children:[(0,t.jsx)(y.Button,{variant:"outline",size:"sm",onClick:ek,className:"w-10 h-10 p-0",children:(0,t.jsx)(S.Icon,{as:p.XIcon,className:"w-5 h-5"})}),(0,t.jsx)(y.Button,{variant:"outline",size:"sm",onClick:e_,className:"w-10 h-10 p-0",children:(0,t.jsx)(S.Icon,{as:c.MaximizeIcon,className:"w-5 h-5"})}),(0,t.jsx)(y.Button,{variant:"outline",size:"sm",onClick:eC,className:"w-10 h-10 p-0",children:(0,t.jsx)(S.Icon,{as:s.ExternalLinkIcon,className:"w-5 h-5"})})]})]})]})]})}},79212:e=>{"use strict";e.s({default:()=>a});var t=e.i(290479),n=e.i(691283),r=e.i(184782),i=e.i(643599);let a=n.Node.create({name:"mentionCitation",group:"inline",inline:!0,selectable:!0,addAttributes:()=>({citation:{default:{id:"",url:"",title:"",order:0,text:"",chatbotId:"",data:void 0,sourceType:"source"},parseHTML:e=>{let t=e.getAttribute("data-mention-citation");if(!t)return null;try{return JSON.parse(t)}catch(e){return console.warn("Failed to parse mention citation data:",e),{id:"",url:"",title:"",order:0,text:"",chatbotId:"",data:void 0,sourceType:"source"}}},renderHTML:e=>({"data-mention-citation":JSON.stringify(e.citation)})}}),parseHTML:()=>[{tag:"mention-citation"}],addCommands:()=>({addMentionCitation:e=>t=>{let{commands:n,state:r}=t,{from:i}=r.selection;return n.insertContentAt(i,{type:"mentionCitation",attrs:e})}}),renderHTML(e){let{HTMLAttributes:t}=e;return["mention-citation",(0,n.mergeAttributes)(t)]},addNodeView:()=>(0,r.ReactNodeViewRenderer)(o)}),o=e=>{let{node:n}=e,{citation:a}=n.attrs,o=void 0!==a.citationNumber?"".concat(a.citationNumber):void 0!==a.order?"".concat(a.order+1):"?",s=a.text||"Source ".concat(o);return(0,t.jsx)(r.NodeViewWrapper,{as:"span",className:"text-inherit no-underline",children:(0,t.jsx)(i.MentionCitationTooltip,{content:s,citation:a,className:"peer first-of-type:ml-0.5 inline-flex items-center justify-center h-[20px]  rounded-[6px] bg-blue/10 hover:bg-blue/20 hover:text-blue/80  p-2 text-sm min-w-[20px] text-blue",children:o})})}},712334:e=>{"use strict";e.s({CleverReplacements:()=>n});var t=e.i(691283);let n=t.Extension.create({name:"cleverReplacements",addInputRules:()=>[(0,t.textInputRule)({find:/-> $/,replace:" "}),(0,t.textInputRule)({find:/<- $/,replace:" "}),(0,t.textInputRule)({find:/=> $/,replace:" "}),(0,t.textInputRule)({find:/<=> $/,replace:" "}),(0,t.textInputRule)({find:/!= $/,replace:" "}),(0,t.textInputRule)({find:/>= $/,replace:" "}),(0,t.textInputRule)({find:/<= $/,replace:" "}),(0,t.textInputRule)({find:/\+- $/,replace:" "}),(0,t.textInputRule)({find:/\.\.\. $/,replace:" "}),(0,t.textInputRule)({find:/-- $/,replace:" "}),(0,t.textInputRule)({find:/\(c\) $/,replace:" "}),(0,t.textInputRule)({find:/\(r\) $/,replace:" "}),(0,t.textInputRule)({find:/\(tm\) $/,replace:" "}),(0,t.textInputRule)({find:/1\/2 $/,replace:" "}),(0,t.textInputRule)({find:/1\/4 $/,replace:" "}),(0,t.textInputRule)({find:/3\/4 $/,replace:" "})]})},319040:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("sigma",[["path",{d:"M18 7V5a1 1 0 0 0-1-1H6.5a.5.5 0 0 0-.4.8l4.5 6a2 2 0 0 1 0 2.4l-4.5 6a.5.5 0 0 0 .4.8H17a1 1 0 0 0 1-1v-2",key:"wuwx1p"}]])},815600:e=>{"use strict";e.s({Sigma:()=>t.default});var t=e.i(319040)},624404:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("code",[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]])},492162:e=>{"use strict";e.s({Code:()=>t.default});var t=e.i(624404)},785971:e=>{"use strict";e.s({CodeBlockLanguageSelector:()=>u});var t=e.i(290479),n=e.i(874133),r=e.i(381612),i=e.i(492162),a=e.i(373150);e.i(567349);var o=e.i(111367),s=e.i(303652);let l=[{id:"javascript",name:"JavaScript",aliases:["js"]},{id:"typescript",name:"TypeScript",aliases:["ts"]},{id:"python",name:"Python",aliases:["py"]},{id:"java",name:"Java"},{id:"c",name:"C"},{id:"cpp",name:"C++",aliases:["c++"]},{id:"csharp",name:"C#",aliases:["cs"]},{id:"php",name:"PHP"},{id:"ruby",name:"Ruby",aliases:["rb"]},{id:"go",name:"Go",aliases:["golang"]},{id:"rust",name:"Rust",aliases:["rs"]},{id:"swift",name:"Swift"},{id:"kotlin",name:"Kotlin",aliases:["kt"]},{id:"scala",name:"Scala"},{id:"r",name:"R"},{id:"matlab",name:"MATLAB"},{id:"sql",name:"SQL"},{id:"html",name:"HTML"},{id:"css",name:"CSS"},{id:"scss",name:"SCSS"},{id:"sass",name:"Sass"},{id:"less",name:"Less"},{id:"json",name:"JSON"},{id:"xml",name:"XML"},{id:"yaml",name:"YAML",aliases:["yml"]},{id:"toml",name:"TOML"},{id:"markdown",name:"Markdown",aliases:["md"]},{id:"bash",name:"Bash",aliases:["shell","sh"]},{id:"powershell",name:"PowerShell",aliases:["ps1"]},{id:"dockerfile",name:"Dockerfile"},{id:"docker",name:"Docker"},{id:"nginx",name:"Nginx"},{id:"apache",name:"Apache"},{id:"graphql",name:"GraphQL",aliases:["gql"]},{id:"prisma",name:"Prisma"},{id:"vue",name:"Vue"},{id:"svelte",name:"Svelte"},{id:"jsx",name:"JSX"},{id:"tsx",name:"TSX"},{id:"handlebars",name:"Handlebars",aliases:["hbs"]},{id:"pug",name:"Pug"},{id:"stylus",name:"Stylus",aliases:["styl"]},{id:"coffeescript",name:"CoffeeScript",aliases:["coffee"]},{id:"dart",name:"Dart"},{id:"elixir",name:"Elixir",aliases:["ex"]},{id:"erlang",name:"Erlang",aliases:["erl"]},{id:"haskell",name:"Haskell",aliases:["hs"]},{id:"lua",name:"Lua"},{id:"perl",name:"Perl",aliases:["pl"]},{id:"clojure",name:"Clojure",aliases:["clj"]},{id:"fsharp",name:"F#",aliases:["fs"]},{id:"ocaml",name:"OCaml"},{id:"reason",name:"Reason"},{id:"elm",name:"Elm"},{id:"purescript",name:"PureScript",aliases:["purs"]},{id:"solidity",name:"Solidity",aliases:["sol"]},{id:"move",name:"Move"},{id:"zig",name:"Zig"},{id:"nim",name:"Nim"},{id:"crystal",name:"Crystal",aliases:["cr"]},{id:"julia",name:"Julia",aliases:["jl"]},{id:"tex",name:"LaTeX",aliases:["latex"]},{id:"bibtex",name:"BibTeX"},{id:"makefile",name:"Makefile"},{id:"cmake",name:"CMake"},{id:"ini",name:"INI"},{id:"properties",name:"Properties"},{id:"env",name:"Environment",aliases:[".env"]},{id:"gitignore",name:"Git Ignore"},{id:"diff",name:"Diff"},{id:"log",name:"Log"},{id:"plaintext",name:"Plain Text",aliases:["text","txt"]}].sort((e,t)=>e.name.localeCompare(t.name));function u(e){let{currentLanguage:u,onLanguageChange:c}=e,[d,h]=(0,a.useState)(!1),p=l.find(e=>{var t;return e.id===u||(null==(t=e.aliases)?void 0:t.includes(u||""))}),f=(null==p?void 0:p.name)||u||"Plain Text";return(0,t.jsxs)(s.Popover,{open:d,onOpenChange:h,children:[(0,t.jsx)(s.PopoverTrigger,{asChild:!0,children:(0,t.jsxs)("button",{type:"button",className:"flex items-center gap-1 px-2 py-1 text-xs font-medium text-text-secondary bg-secondary hover:bg-accent rounded-md transition-colors","aria-expanded":d,"aria-label":"Current language: ".concat(f,". Click to change."),children:[(0,t.jsx)(i.Code,{size:12}),(0,t.jsx)("span",{children:f}),(0,t.jsx)(r.ChevronDown,{size:12})]})}),(0,t.jsx)(s.PopoverContent,{className:"w-64 p-0",align:"start",children:(0,t.jsxs)(o.Command,{children:[(0,t.jsx)(o.CommandInput,{placeholder:"Search languages..."}),(0,t.jsx)(o.CommandEmpty,{children:"No language found."}),(0,t.jsx)(o.CommandList,{className:"max-h-64",children:(0,t.jsx)(o.CommandGroup,{children:l.map(e=>{var r,i;return(0,t.jsxs)(o.CommandItem,{value:"".concat(e.name," ").concat((null==(r=e.aliases)?void 0:r.join(" "))||""),onSelect:()=>{c(e.id),h(!1)},className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"text-sm",children:e.name}),e.aliases&&(0,t.jsx)("span",{className:"text-xs text-text-secondary",children:e.aliases.join(", ")})]}),(u===e.id||(null==(i=e.aliases)?void 0:i.includes(u||"")))&&(0,t.jsx)(n.Check,{size:16})]},e.id)})})})]})})]})}},107633:e=>{"use strict";e.s({CodeBlockWithSelector:()=>l});var t=e.i(290479),n=e.i(184782),r=e.i(486137),i=e.i(815600),a=e.i(373150),o=e.i(525094),s=e.i(785971);let l=(0,n.ReactNodeViewRenderer)(function(e){let{node:l,updateAttributes:u,editor:c}=e,[d,h]=(0,a.useState)(!1),p=(0,a.useRef)(null),[f,m]=(0,a.useState)(!1),g=(0,a.useRef)(!1),y=async()=>{try{await navigator.clipboard.writeText(l.textContent),o.toast.success("Code copied to clipboard")}catch(e){o.toast.error("Failed to copy code")}},b=Array.from({length:(l.textContent||"").split("\n").length},(e,t)=>t+1),x="tex"===l.attrs.language||"latex"===l.attrs.language;return(0,a.useEffect)(()=>{if(!x||!p.current)return;let e=()=>{m(!0)},t=e=>{if(g.current)return;let t=e.relatedTarget,n=e.currentTarget;t&&n.contains(t)||(m(!1),setTimeout(()=>{if(g.current)return;let e=l.textContent||"",{state:t}=c,{tr:n}=t,{from:r,to:i}=c.state.selection,a=null,o=null;if(t.doc.nodesBetween(r,i,(e,t)=>{if("codeBlock"===e.type.name)return a=t,o=e,!1}),null!==a&&null!==o){let r=t.schema.nodes.blockMath.create({latex:e}),i=n.replaceWith(a,a+(null==o?void 0:o.nodeSize),r);c.view.dispatch(i)}else c.chain().focus().deleteNode("codeBlock").setBlockMath({latex:e}).run()},100))},n=p.current;return n.addEventListener("focusin",e),n.addEventListener("focusout",t),()=>{n.removeEventListener("focusin",e),n.removeEventListener("focusout",t)}},[x,l.textContent,c]),(0,t.jsxs)(n.NodeViewWrapper,{ref:p,className:"relative group my-6",onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),children:[(0,t.jsxs)("div",{className:"absolute top-2 right-2 z-10 flex items-center gap-2 transition-opacity duration-200 ".concat(d?"opacity-100":"opacity-0 pointer-events-none"),children:[(0,t.jsx)("button",{type:"button",onClick:y,className:"flex items-center justify-center w-8 h-8 text-text-secondary bg-secondary hover:bg-accent rounded-md transition-colors","aria-label":"Copy code to clipboard",tabIndex:d?0:-1,children:(0,t.jsx)(r.Copy,{size:14})}),x&&(0,t.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),(e=>{e&&(e.preventDefault(),e.stopPropagation());let t=l.textContent||"";g.current=!0;let{state:n}=c,{tr:r}=n,{from:i,to:a}=c.state.selection,o=null,s=null;if(n.doc.nodesBetween(i,a,(e,t)=>{if("codeBlock"===e.type.name)return o=t,s=e,!1}),null!==o&&null!==s){let e=n.schema.nodes.blockMath.create({latex:t}),i=r.replaceWith(o,o+(null==s?void 0:s.nodeSize),e);c.view.dispatch(i)}else c.chain().focus().deleteNode("codeBlock").setBlockMath({latex:t}).run();setTimeout(()=>{g.current=!1},200)})(e)},className:"flex items-center justify-center w-8 h-8 text-text-secondary bg-secondary hover:bg-accent rounded-md transition-colors","aria-label":"Convert to math equation",tabIndex:d?0:-1,children:(0,t.jsx)(i.Sigma,{size:14})}),(0,t.jsx)(s.CodeBlockLanguageSelector,{currentLanguage:l.attrs.language,onLanguageChange:e=>{u({language:e})}})]}),(0,t.jsxs)("div",{className:"flex rounded-4 overflow-hidden border bg-control-primary",children:[(0,t.jsx)("div",{className:"flex flex-col text-right text-text-secondary bg-muted pr-3 py-3 text-sm font-mono select-none min-w-[3rem] leading-6 flex-shrink-0",children:b.map(e=>(0,t.jsx)("span",{className:"block leading-6",children:e},e))}),(0,t.jsx)("div",{className:"relative flex-1 h-full overflow-x-auto !code-block-scroll",children:(0,t.jsx)("pre",{className:"m-0 bg-transparent whitespace-pre overflow-visible",children:(0,t.jsx)("code",{className:"focus:outline-none block whitespace-pre bg-transparent [&_*]:whitespace-pre",children:(0,t.jsx)(n.NodeViewContent,{className:"whitespace-pre [&_*]:whitespace-pre"})})})})]})]})})},653504:e=>{"use strict";e.s({CustomLink:()=>n});var t=e.i(691283);let n=e.i(913022).default.extend({renderHTML(e){let{HTMLAttributes:n}=e;return["a",(0,t.mergeAttributes)(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){var e;return{...null==(e=this.parent)?void 0:e.call(this),Backspace:e=>{let{editor:t}=e,{state:n}=t,{selection:r}=n;if(!r.empty)return!1;let i=r.$from;if(i.marks().find(e=>"link"===e.type.name)&&1===i.parent.textContent.length){t.commands.deleteRange({from:r.from-1,to:r.from}),t.commands.unsetLink();let e=t.state.tr;return e.setStoredMarks([]),t.view.dispatch(e),!0}return!1}}}})},431153:e=>{"use strict";e.s({NoteHighlightExtension:()=>s});var t=e.i(691283);e.i(131841);var n=e.i(968617);e.i(125492);var r=e.i(954647),i=e.i(910173);let a=new n.PluginKey("noteHighlight"),o=e=>{let t=(0,i.getHighlightColorByName)(e||"blue");return"".concat(t.bgClass," border ").concat(t.borderClass)},s=t.Extension.create({name:"noteHighlight",addCommands:()=>({highlightNoteText:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"blue";return n=>{let{state:r,dispatch:i}=n;try{let n=r.doc,o=[],s=e.replace(/^\["?/,"").replace(/"?\]$/,"").replace(/\\n/g,"\n").replace(/\\t/g,"	").replace(/\\r/g,"\r").replace(/\\"/g,'"').replace(/\\\\/g,"\\").replace(/^\n+/,"").replace(/\n+$/,"").trim(),l=s.toLowerCase(),u="",c=[];n.descendants((e,t)=>{e.isText&&e.text&&(c.push({start:u.length,length:e.text.length,pos:t}),u+=e.text)});let d=u.toLowerCase().indexOf(l);if(-1!==d){let e=s.length,n=d,i=e;for(let e of c){if(i<=0)break;if(e.start+e.length>n&&n<e.start+e.length){let a=Math.max(0,n-e.start),l=Math.min(e.length,a+i);if(l>a){let u=e.pos+a,c=e.pos+l;u>=0&&c>u&&c<=r.doc.content.size&&o.push({from:u,to:c,color:t,text:s.substring(0,50)});let d=l-a;i-=d,n+=d}}}}if(0===o.length){let e=(e=>{let t=[e];if(e.length>100){let n=e.split(/[.!?]\s+/)[0];for(let r of(n&&n.length>10&&n!==e&&t.unshift(n.trim()),[80,60,40,25]))if(r<e.length){let n=e.substring(0,r).trim();n.length>10&&!t.includes(n)&&t.push(n)}let r=e.split(/\s+/);if(r.length>3){let e=r.slice(0,5).join(" ");e.length>10&&!t.includes(e)&&t.push(e);let n=r.slice(0,3).join(" ");n.length>8&&!t.includes(n)&&t.push(n)}for(let n of e.split("\n")){let e=n.trim();if(e.length>15&&!e.startsWith("**")&&!e.startsWith("#")&&!e.startsWith("---")&&!e.startsWith("[")&&!t.includes(e)){t.push(e.substring(0,60).trim());break}}for(let n of[...new Set(e.toLowerCase().match(/\b[a-z]{4,}\b/g)||[])].slice(0,3))n.length>=5&&!t.some(e=>e.toLowerCase().includes(n))&&t.push(n);let i=e.split("\n")[0].trim();if(i&&i.length>5){if(t.includes(i)||t.push(i),i.startsWith("###")){let e=i.substring(3).trim();t.includes(e)||t.push(e)}if(i.startsWith("**")&&i.endsWith("**")){let e=i.slice(2,-2).trim();t.includes(e)||t.push(e)}if(i.startsWith("> ")){let e=i.substring(2).trim();t.includes(e)||t.push(e)}}}return t})(s),n=0;for(let i=0;i<e.length;i++){let a=e[i];if(a.length<10)continue;let l=u.toLowerCase().indexOf(a.toLowerCase());if(-1!==l){if(i>0){let t=e.slice(0,i).reduce((e,t)=>e+t.length,0);n=Math.min(t,.3*s.length)}let d=Math.max(0,l-200),h=Math.min(u.length,l+a.length+200),p=u.substring(d,h).toLowerCase().indexOf(s.toLowerCase()),f=l,m=s.length-n;if(-1!==p)f=d+p,m=s.length;else{let e=s.length-n;m=Math.min(e,u.length-l)}let g=f,y=m;for(let e of c){if(y<=0)break;if(e.start+e.length>g&&g<e.start+e.length){let n=Math.max(0,g-e.start),i=Math.min(e.length,n+y);if(i>n){let s=e.pos+n,l=e.pos+i;s>=0&&l>s&&l<=r.doc.content.size&&o.push({from:s,to:l,color:t,text:a.substring(0,50)});let u=i-n;y-=u,g+=u}}}if(o.length>0)break}}}if(0===o.length)return!1;if(i){let e=r.tr.setMeta(a,{ranges:o});i(e);let t=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;if(!o[0])return;let r=document.querySelectorAll(".ProseMirror"),i=null,a=null;for(let e=0;e<r.length;e++){let t=r[e],n=t.querySelectorAll(".note-highlight-active");if(n.length>0){i=t,a=n[0];break}}if(i&&a)return void a.scrollIntoView({behavior:"smooth",block:"center"});e<n&&setTimeout(()=>t(e+1,n),100)};setTimeout(()=>t(),100)}return!0}catch(e){return console.error("Note highlighting: Error in highlightNoteText command:",e),!1}}},clearNoteHighlights:()=>e=>{let{state:t,dispatch:n}=e;return n&&n(t.tr.setMeta(a,{ranges:[]})),!0}}),addProseMirrorPlugins:()=>[new n.Plugin({key:a,state:{init:()=>({ranges:[]}),apply(e,t){let n=e.getMeta(a);return n?{ranges:n.ranges||[]}:t}},props:{decorations(e){let t=a.getState(e);if(!t||0===t.ranges.length)return r.DecorationSet.empty;let n=[];for(let i of t.ranges){let t=o(i.color),a="note-highlight-active rounded px-0.5 ".concat(t),s=e.doc.content.size;if(i.from<0||i.to>s||i.from>=i.to){console.warn("Invalid highlight range: from=".concat(i.from,", to=").concat(i.to,", docSize=").concat(s));continue}try{if(i.from>=i.to){console.warn("Skipping invalid range: from=".concat(i.from," >= to=").concat(i.to));continue}n.push(r.Decoration.inline(i.from,i.to,{class:a,style:"border-radius: 2px; padding: 0 1px;"}))}catch(e){console.error("Error creating decoration:",e,i)}}return r.DecorationSet.create(e.doc,n)}}})]})},867097:e=>{"use strict";e.s({getCellsInColumn:()=>s,getCellsInRow:()=>l,isColumnSelected:()=>a,isRowSelected:()=>o,selectColumn:()=>c,selectRow:()=>d});var t=e.i(691283);e.i(963544);var n=e.i(207307);let r=e=>t=>{let r=n.TableMap.get(t.$anchorCell.node(-1)),i=t.$anchorCell.start(-1),a=r.cellsInRect(e),o=r.cellsInRect(r.rectBetween(t.$anchorCell.pos-i,t.$headCell.pos-i));for(let e=0,t=a.length;e<t;e+=1)if(-1===o.indexOf(a[e]))return!1;return!0},i=e=>(0,t.findParentNode)(e=>e.type.spec.tableRole&&"table"===e.type.spec.tableRole)(e),a=e=>t=>t instanceof n.CellSelection&&r({left:e,right:e+1,top:0,bottom:n.TableMap.get(t.$anchorCell.node(-1)).height})(t),o=e=>t=>t instanceof n.CellSelection&&r({left:0,right:n.TableMap.get(t.$anchorCell.node(-1)).width,top:e,bottom:e+1})(t),s=e=>t=>{let r=i(t);if(r){let t=n.TableMap.get(r.node);return(Array.isArray(e)?e:Array.from([e])).reduce((e,n)=>{if(n>=0&&n<=t.width-1){let i=t.cellsInRect({left:n,right:n+1,top:0,bottom:t.height});return e.concat(i.map(e=>{let t=r.node.nodeAt(e),n=e+r.start;return{pos:n,start:n+1,node:t}}))}return e},[])}return null},l=e=>t=>{let r=i(t);if(r){let t=n.TableMap.get(r.node);return(Array.isArray(e)?e:Array.from([e])).reduce((e,n)=>{if(n>=0&&n<=t.height-1){let i=t.cellsInRect({left:0,right:t.width,top:n,bottom:n+1});return e.concat(i.map(e=>{let t=r.node.nodeAt(e),n=e+r.start;return{pos:n,start:n+1,node:t}}))}return e},[])}return null},u=e=>t=>r=>{let a=i(r.selection),o="row"===e;if(a){let e=n.TableMap.get(a.node);if(t>=0&&t<(o?e.height:e.width)){let i=o?0:t,s=o?t:0,l=o?e.width:t+1,u=o?t+1:e.height,c=e.cellsInRect({left:i,top:s,right:o?l:i+1,bottom:o?s+1:u}),d=u-s==1?c:e.cellsInRect({left:o?i:l-1,top:o?u-1:s,right:l,bottom:u}),h=a.start+c[0],p=a.start+d[d.length-1],f=r.doc.resolve(h),m=r.doc.resolve(p);return r.setSelection(new n.CellSelection(m,f))}}return r},c=u("column"),d=u("row")},915431:e=>{"use strict";e.s({TableCell:()=>a});var t=e.i(691283);e.i(131841);var n=e.i(968617);e.i(125492);var r=e.i(954647),i=e.i(867097);let a=t.Node.create({name:"tableCell",content:"block+",tableRole:"cell",isolating:!0,addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"td"}],renderHTML(e){let{HTMLAttributes:n}=e;return["td",(0,t.mergeAttributes)(this.options.HTMLAttributes,n),0]},addAttributes:()=>({colspan:{default:1,parseHTML:e=>{let t=e.getAttribute("colspan");return t?parseInt(t,10):1}},rowspan:{default:1,parseHTML:e=>{let t=e.getAttribute("rowspan");return t?parseInt(t,10):1}},colwidth:{default:null,parseHTML:e=>{let t=e.getAttribute("colwidth");return t?[parseInt(t,10)]:null}},style:{default:null}}),addProseMirrorPlugins(){return[new n.Plugin({props:{decorations:e=>{let{isEditable:t}=this.editor;if(!t)return r.DecorationSet.empty;let{doc:n,selection:a}=e,o=[],s=(0,i.getCellsInColumn)(0)(a);return s&&s.forEach((e,t)=>{let{pos:n}=e;o.push(r.Decoration.widget(n+1,()=>{let e=(0,i.isRowSelected)(t)(a),n="grip-row";e&&(n+=" selected"),0===t&&(n+=" first"),t===s.length-1&&(n+=" last");let r=document.createElement("a");return r.className=n,r.addEventListener("mousedown",e=>{e.preventDefault(),e.stopImmediatePropagation(),this.editor.view.dispatch((0,i.selectRow)(t)(this.editor.state.tr))}),r}))}),r.DecorationSet.create(n,o)}}})]}}).configure({HTMLAttributes:{class:"border border-black/10 dark:border-white/20 min-w-[100px] p-2 relative text-left align-top"}})},387535:e=>{"use strict";e.s({Table:()=>h,TableHeader:()=>a,TableRow:()=>o});var t=e.i(691283);e.i(131841);var n=e.i(968617);e.i(963544);var r=e.i(207307),i=t.Node.create({name:"tableCell",addOptions:()=>({HTMLAttributes:{}}),content:"block+",addAttributes:()=>({colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:e=>{let t=e.getAttribute("colwidth");return t?t.split(",").map(e=>parseInt(e,10)):null}}}),tableRole:"cell",isolating:!0,parseHTML:()=>[{tag:"td"}],renderHTML(e){let{HTMLAttributes:n}=e;return["td",(0,t.mergeAttributes)(this.options.HTMLAttributes,n),0]}}),a=t.Node.create({name:"tableHeader",addOptions:()=>({HTMLAttributes:{}}),content:"block+",addAttributes:()=>({colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:e=>{let t=e.getAttribute("colwidth");return t?t.split(",").map(e=>parseInt(e,10)):null}}}),tableRole:"header_cell",isolating:!0,parseHTML:()=>[{tag:"th"}],renderHTML(e){let{HTMLAttributes:n}=e;return["th",(0,t.mergeAttributes)(this.options.HTMLAttributes,n),0]}}),o=t.Node.create({name:"tableRow",addOptions:()=>({HTMLAttributes:{}}),content:"(tableCell | tableHeader)*",tableRole:"row",parseHTML:()=>[{tag:"tr"}],renderHTML(e){let{HTMLAttributes:n}=e;return["tr",(0,t.mergeAttributes)(this.options.HTMLAttributes,n),0]}});function s(e,t){return t?["width","".concat(Math.max(t,e),"px")]:["min-width","".concat(e,"px")]}function l(e,t,n,r,i,a){var o;let l=0,u=!0,c=t.firstChild,d=e.firstChild;if(null!==d)for(let e=0,n=0;e<d.childCount;e+=1){let{colspan:o,colwidth:h}=d.child(e).attrs;for(let e=0;e<o;e+=1,n+=1){let o=i===n?a:h&&h[e],d=o?"".concat(o,"px"):"";if(l+=o||r,o||(u=!1),c){if(c.style.width!==d){let[e,t]=s(r,o);c.style.setProperty(e,t)}c=c.nextSibling}else{let e=document.createElement("col"),[n,i]=s(r,o);e.style.setProperty(n,i),t.appendChild(e)}}}for(;c;){let e=c.nextSibling;null==(o=c.parentNode)||o.removeChild(c),c=e}u?(n.style.width="".concat(l,"px"),n.style.minWidth=""):(n.style.width="",n.style.minWidth="".concat(l,"px"))}var u=class{update(e){return e.type===this.node.type&&(this.node=e,l(e,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(e){return"attributes"===e.type&&(e.target===this.table||this.colgroup.contains(e.target))}constructor(e,t){this.node=e,this.cellMinWidth=t,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),l(e,this.colgroup,this.table,t),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}};function c(e,t){return t?e.createChecked(null,t):e.createAndFill()}var d=e=>{let{editor:n}=e,{selection:i}=n.state;if(!(i instanceof r.CellSelection))return!1;let a=0,o=(0,t.findParentNodeClosestToPos)(i.ranges[0].$from,e=>"table"===e.type.name);return null==o||o.node.descendants(e=>{if("table"===e.type.name)return!1;["tableCell","tableHeader"].includes(e.type.name)&&(a+=1)}),a===i.ranges.length&&(n.commands.deleteTable(),!0)},h=t.Node.create({name:"table",addOptions:()=>({HTMLAttributes:{},resizable:!1,handleWidth:5,cellMinWidth:25,View:u,lastColumnResizable:!0,allowTableNodeSelection:!1}),content:"tableRow+",tableRole:"table",isolating:!0,group:"block",parseHTML:()=>[{tag:"table"}],renderHTML(e){let{node:n,HTMLAttributes:r}=e,{colgroup:i,tableWidth:a,tableMinWidth:o}=function(e,t,n,r){let i=0,a=!0,o=[],l=e.firstChild;if(!l)return{};for(let e=0,n=0;e<l.childCount;e+=1){let{colspan:r,colwidth:u}=l.child(e).attrs;for(let e=0;e<r;e+=1,n+=1){let r=void 0===n?void 0:u&&u[e];i+=r||t,r||(a=!1);let[l,c]=s(t,r);o.push(["col",{style:"".concat(l,": ").concat(c)}])}}let u=a?"".concat(i,"px"):"";return{colgroup:["colgroup",{},...o],tableWidth:u,tableMinWidth:a?"":"".concat(i,"px")}}(n,this.options.cellMinWidth);return["table",(0,t.mergeAttributes)(this.options.HTMLAttributes,r,{style:a?"width: ".concat(a):"min-width: ".concat(o)}),i,["tbody",0]]},addCommands:()=>({insertTable:function(){let{rows:e=3,cols:t=3,withHeaderRow:r=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i=>{let{tr:a,dispatch:o,editor:s}=i,l=function(e,t,n,r,i){let a=function(e){if(e.cached.tableNodeTypes)return e.cached.tableNodeTypes;let t={};return Object.keys(e.nodes).forEach(n=>{let r=e.nodes[n];r.spec.tableRole&&(t[r.spec.tableRole]=r)}),e.cached.tableNodeTypes=t,t}(e),o=[],s=[];for(let e=0;e<n;e+=1){let e=c(a.cell,void 0);if(e&&s.push(e),r){let e=c(a.header_cell,void 0);e&&o.push(e)}}let l=[];for(let e=0;e<t;e+=1)l.push(a.row.createChecked(null,r&&0===e?o:s));return a.table.createChecked(null,l)}(s.schema,e,t,r);if(o){let e=a.selection.from+1;a.replaceSelectionWith(l).scrollIntoView().setSelection(n.TextSelection.near(a.doc.resolve(e)))}return!0}},addColumnBefore:()=>e=>{let{state:t,dispatch:n}=e;return(0,r.addColumnBefore)(t,n)},addColumnAfter:()=>e=>{let{state:t,dispatch:n}=e;return(0,r.addColumnAfter)(t,n)},deleteColumn:()=>e=>{let{state:t,dispatch:n}=e;return(0,r.deleteColumn)(t,n)},addRowBefore:()=>e=>{let{state:t,dispatch:n}=e;return(0,r.addRowBefore)(t,n)},addRowAfter:()=>e=>{let{state:t,dispatch:n}=e;return(0,r.addRowAfter)(t,n)},deleteRow:()=>e=>{let{state:t,dispatch:n}=e;return(0,r.deleteRow)(t,n)},deleteTable:()=>e=>{let{state:t,dispatch:n}=e;return(0,r.deleteTable)(t,n)},mergeCells:()=>e=>{let{state:t,dispatch:n}=e;return(0,r.mergeCells)(t,n)},splitCell:()=>e=>{let{state:t,dispatch:n}=e;return(0,r.splitCell)(t,n)},toggleHeaderColumn:()=>e=>{let{state:t,dispatch:n}=e;return(0,r.toggleHeader)("column")(t,n)},toggleHeaderRow:()=>e=>{let{state:t,dispatch:n}=e;return(0,r.toggleHeader)("row")(t,n)},toggleHeaderCell:()=>e=>{let{state:t,dispatch:n}=e;return(0,r.toggleHeaderCell)(t,n)},mergeOrSplit:()=>e=>{let{state:t,dispatch:n}=e;return!!(0,r.mergeCells)(t,n)||(0,r.splitCell)(t,n)},setCellAttribute:(e,t)=>n=>{let{state:i,dispatch:a}=n;return(0,r.setCellAttr)(e,t)(i,a)},goToNextCell:()=>e=>{let{state:t,dispatch:n}=e;return(0,r.goToNextCell)(1)(t,n)},goToPreviousCell:()=>e=>{let{state:t,dispatch:n}=e;return(0,r.goToNextCell)(-1)(t,n)},fixTables:()=>e=>{let{state:t,dispatch:n}=e;return n&&(0,r.fixTables)(t),!0},setCellSelection:e=>t=>{let{tr:n,dispatch:i}=t;if(i){let t=r.CellSelection.create(n.doc,e.anchorCell,e.headCell);n.setSelection(t)}return!0}}),addKeyboardShortcuts(){return{Tab:()=>!!this.editor.commands.goToNextCell()||!!this.editor.can().addRowAfter()&&this.editor.chain().addRowAfter().goToNextCell().run(),"Shift-Tab":()=>this.editor.commands.goToPreviousCell(),Backspace:d,"Mod-Backspace":d,Delete:d,"Mod-Delete":d}},addProseMirrorPlugins(){return[...this.options.resizable&&this.editor.isEditable?[(0,r.columnResizing)({handleWidth:this.options.handleWidth,cellMinWidth:this.options.cellMinWidth,defaultCellMinWidth:this.options.cellMinWidth,View:this.options.View,lastColumnResizable:this.options.lastColumnResizable})]:[],(0,r.tableEditing)({allowTableNodeSelection:this.options.allowTableNodeSelection})]},extendNodeSchema(e){let n={name:e.name,options:e.options,storage:e.storage};return{tableRole:(0,t.callOrReturn)((0,t.getExtensionField)(e,"tableRole",n))}}});t.Extension.create({name:"tableKit",addExtensions(){let e=[];return!1!==this.options.table&&e.push(h.configure(this.options.table)),!1!==this.options.tableCell&&e.push(i.configure(this.options.tableCell)),!1!==this.options.tableHeader&&e.push(a.configure(this.options.tableHeader)),!1!==this.options.tableRow&&e.push(o.configure(this.options.tableRow)),e}})},967562:e=>{"use strict";e.s({default:()=>t});var t=e.i(387535).TableHeader},953356:e=>{"use strict";e.s({}),e.i(387535),e.i(967562)},106052:e=>{"use strict";e.s({TableHeader:()=>a}),e.i(953356);var t=e.i(967562);e.i(131841);var n=e.i(968617);e.i(125492);var r=e.i(954647),i=e.i(867097);let a=t.default.extend({addAttributes:()=>({colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:e=>{let t=e.getAttribute("colwidth");return t?t.split(",").map(e=>parseInt(e,10)):null}},style:{default:null}}),addProseMirrorPlugins(){return[new n.Plugin({props:{decorations:e=>{let{isEditable:t}=this.editor;if(!t)return r.DecorationSet.empty;let{doc:n,selection:a}=e,o=[],s=(0,i.getCellsInRow)(0)(a);return s&&s.forEach((e,t)=>{let{pos:n}=e;o.push(r.Decoration.widget(n+1,()=>{let e=(0,i.isColumnSelected)(t)(a),n="grip-column";e&&(n+=" selected"),0===t&&(n+=" first"),t===s.length-1&&(n+=" last");let r=document.createElement("a");return r.className=n,r.addEventListener("mousedown",e=>{e.preventDefault(),e.stopImmediatePropagation(),this.editor.view.dispatch((0,i.selectColumn)(t)(this.editor.state.tr))}),r}))}),r.DecorationSet.create(n,o)}}})]}}).configure({HTMLAttributes:{class:"border border-black/10 dark:border-white/20 min-w-[100px] p-2 relative text-left align-top font-bold"}})},137584:e=>{"use strict";e.s({TableRow:()=>t});let t=e.i(387535).TableRow.configure({HTMLAttributes:{class:""}})},338313:e=>{"use strict";e.s({Table:()=>t});let t=e.i(387535).Table.configure({resizable:!0,lastColumnResizable:!1,HTMLAttributes:{class:"not-prose !my-4 border-collapse table-fixed min-w-full"}})},728279:e=>{"use strict";e.s({}),e.i(915431),e.i(106052),e.i(137584),e.i(338313)},342552:e=>{"use strict";e.s({}),e.i(915431),e.i(106052),e.i(137584),e.i(338313),e.i(728279)},565524:e=>{"use strict";e.s({TableOfContentsView:()=>i});var t=e.i(290479),n=e.i(184782),r=e.i(373150);let i=(0,n.ReactNodeViewRenderer)(function(e){let{editor:i}=e,[a,o]=(0,r.useState)([]);return(0,r.useEffect)(()=>{let e=()=>{let e=[];i.state.doc.descendants((t,n)=>{if("heading"===t.type.name){let r="heading-".concat(t.textContent.toLowerCase().replace(/\s+/g,"-"),"-").concat(n);e.push({id:r,level:t.attrs.level,text:t.textContent})}}),o(e)};e();let t=()=>{e()};return i.on("update",t),()=>{i.off("update",t)}},[i]),(0,t.jsx)(n.NodeViewWrapper,{className:"table-of-contents not-prose my-4 select-none",contentEditable:!1,"data-type":"table-of-contents",children:(0,t.jsx)("div",{className:"text-sm",children:0===a.length?(0,t.jsx)("p",{className:"text-text-secondary",children:"No headings found"}):(0,t.jsx)("ul",{className:"space-y-1",children:a.map((e,n)=>(0,t.jsx)("li",{className:"hover:text-primary cursor-pointer transition-colors text-text-secondary underline",style:{paddingLeft:e.level>1?"".concat((e.level-1)*1,"rem"):void 0},onClick:t=>((e,t)=>{t.preventDefault(),t.stopPropagation();let n=Array.from(document.querySelectorAll(".ProseMirror h1, .ProseMirror h2, .ProseMirror h3, .ProseMirror h4, .ProseMirror h5, .ProseMirror h6")).find(t=>{var n;return(null==(n=t.textContent)?void 0:n.trim())===e.trim()});n&&(i.commands.blur(),setTimeout(()=>{n.scrollIntoView({behavior:"smooth",block:"start"})},50))})(e.text,t),children:e.text||"Untitled"},"".concat(e.id,"-").concat(n)))})})})})},399217:e=>{"use strict";e.s({Toggle:()=>r,ToggleContent:()=>a,ToggleSummary:()=>i});var t=e.i(691283);e.i(131841);var n=e.i(968617);let r=t.Node.create({name:"toggle",addOptions:()=>({HTMLAttributes:{}}),group:"block",content:"toggleSummary toggleContent",addAttributes:()=>({isOpen:{default:!0,parseHTML:e=>"true"===e.getAttribute("data-is-open"),renderHTML:e=>e.isOpen?{"data-is-open":e.isOpen}:{}}}),parseHTML:()=>[{tag:'div[data-type="toggle"]'}],renderHTML(e){let{HTMLAttributes:n,node:r}=e;return["div",(0,t.mergeAttributes)(this.options.HTMLAttributes,n,{"data-type":"toggle","data-is-open":r.attrs.isOpen}),0]},addCommands(){return{setToggle:()=>e=>{let{state:t,dispatch:r}=e,{selection:i}=t,{from:a}=i,o={type:this.name,attrs:{isOpen:!0},content:[{type:"toggleSummary",content:[{type:"text",text:"Toggle title"}]},{type:"toggleContent",content:[{type:"paragraph",content:[{type:"text",text:"Toggle content"}]}]}]};if(r){let e=t.tr.insert(a,t.schema.nodeFromJSON(o)),i=a+1;return e.setSelection(n.TextSelection.create(e.doc,i+1)),r(e),!0}return!1},toggleToggle:()=>e=>{let{tr:t,state:n,dispatch:r}=e,{selection:i}=n,{$from:a}=i,o=null,s=null;for(let e=a.depth;e>0;e--){let t=a.node(e);if("toggle"===t.type.name){o=a.start(e)-1,s=t;break}}if(null!==o&&s){let e={...s.attrs,isOpen:!s.attrs.isOpen};return r&&(t.setNodeMarkup(o,void 0,e),r(t)),!0}return!1}}},addProseMirrorPlugins:()=>[new n.Plugin({key:new n.PluginKey("toggleHandler"),props:{handleDOMEvents:{click:(e,t)=>{let n=t.target.closest('[data-type="toggleSummary"]');if(n){let r=n.getBoundingClientRect();if(t.clientX-r.left<=28){t.preventDefault(),t.stopPropagation();let r=e.posAtDOM(n,0);if(r<0)return!0;let{state:i,dispatch:a}=e,o=i.doc.resolve(r);for(let e=o.depth;e>0;e--){let t=o.node(e);if("toggle"===t.type.name){let n=o.start(e)-1,r={...t.attrs,isOpen:!t.attrs.isOpen};return a(i.tr.setNodeMarkup(n,void 0,r)),!0}}}}return!1}},handleKeyDown:(e,t)=>{if("Enter"===t.key){let{state:t,dispatch:r}=e,{selection:i}=t,{$from:a}=i,o=a.parent;if(o&&"toggleSummary"===o.type.name)for(let e=a.depth;e>0;e--){let i=a.node(e);if("toggle"===i.type.name){let o=a.start(e)-1+i.nodeSize,s=t.tr.insert(o,t.schema.nodes.paragraph.create());return s.setSelection(n.TextSelection.near(s.doc.resolve(o+1))),r(s),!0}}}if("Backspace"===t.key||"Delete"===t.key){let{state:r,dispatch:i}=e,{selection:a}=r,{$from:o}=a,s=o.parent;if(s&&"toggleSummary"===s.type.name){let e=0===s.content.size,a=0===o.parentOffset;if(e&&a&&"Backspace"===t.key)for(let e=o.depth;e>0;e--){let t=o.node(e);if("toggle"===t.type.name){let a=o.start(e)-1,s=[];t.forEach((e,t,n)=>{if("toggleSummary"===e.type.name&&e.content.size>0){let t=r.schema.nodes.paragraph.create({},e.content);s.push(t)}else"toggleContent"===e.type.name&&e.forEach(e=>{s.push(e)})});let l=r.tr.delete(a,a+t.nodeSize);return s.length>0?s.forEach((e,t)=>{l.insert(a+t,e)}):l.insert(a,r.schema.nodes.paragraph.create()),l.setSelection(n.TextSelection.near(l.doc.resolve(a+1))),i(l),!0}}}if(s&&"paragraph"===s.type.name){for(let e=o.depth;e>0;e--)if("toggleContent"===o.node(e).type.name){let a=0===o.parentOffset,l=0===o.index(e),u=0===s.content.size;if(a&&l&&u&&"Backspace"===t.key)for(let t=e;t>0;t--){let e=o.node(t);if("toggle"===e.type.name){let a=e.firstChild;if(a&&"toggleSummary"===a.type.name){let e=o.start(t)+1+a.content.size;return i(r.tr.setSelection(n.TextSelection.create(r.doc,e))),!0}}}break}}}return!1}}})]}),i=t.Node.create({name:"toggleSummary",content:"inline*",group:"block",parseHTML:()=>[{tag:'div[data-type="toggleSummary"]'}],renderHTML(e){let{HTMLAttributes:n}=e;return["div",(0,t.mergeAttributes)(n,{"data-type":"toggleSummary",class:"toggle-summary w-full"}),0]}}),a=t.Node.create({name:"toggleContent",content:"block+",group:"block",parseHTML:()=>[{tag:'div[data-type="toggleContent"]'}],renderHTML(e){let{HTMLAttributes:n}=e;return["div",(0,t.mergeAttributes)(n,{"data-type":"toggleContent",class:"toggle-content"}),0]}})},139476:e=>{"use strict";e.s({Edit3:()=>t.default});var t=e.i(460478)},810180:e=>{"use strict";e.s({MathEditor:()=>l});var t=e.i(290479),n=e.i(184782),r=e.i(629906),i=e.i(486137),a=e.i(139476),o=e.i(373150),s=e.i(525094);let l=(0,n.ReactNodeViewRenderer)(function(e){let{node:l,updateAttributes:u,editor:c}=e,[d,h]=(0,o.useState)(!1),p=(0,o.useRef)(null);(0,o.useEffect)(()=>{if(p.current){let e=l.attrs.latex||"";if(e.trim())try{r.default.render(e,p.current,{displayMode:!0,throwOnError:!1})}catch(t){p.current.textContent="Error: ".concat(e),p.current.className="text-red-500"}else p.current.textContent="Click to add equation",p.current.className="text-muted-foreground"}},[l.attrs.latex]);let f=()=>{let e=l.attrs.latex||"";c.commands.insertContent({type:"codeBlock",attrs:{language:"tex"},content:e?[{type:"text",text:e}]:[]})},m=async()=>{try{await navigator.clipboard.writeText(l.attrs.latex||""),s.toast.success("LaTeX copied to clipboard")}catch(e){s.toast.error("Failed to copy LaTeX")}};return(0,t.jsxs)(n.NodeViewWrapper,{className:"relative group my-4 cursor-pointer",onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),onClick:f,children:[(0,t.jsxs)("div",{className:"absolute top-2 right-2 z-10 flex items-center gap-2 transition-opacity duration-200 ".concat(d?"opacity-100":"opacity-0 pointer-events-none"),children:[(0,t.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),m()},className:"flex items-center justify-center w-8 h-8 text-text-secondary bg-secondary hover:bg-accent rounded-md transition-colors","aria-label":"Copy LaTeX to clipboard",tabIndex:d?0:-1,children:(0,t.jsx)(i.Copy,{size:14})}),(0,t.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),f()},className:"flex items-center justify-center w-8 h-8 text-text-secondary bg-secondary hover:bg-accent rounded-md transition-colors","aria-label":"Edit LaTeX in code editor",tabIndex:d?0:-1,children:(0,t.jsx)(a.Edit3,{size:14})})]}),(0,t.jsx)("div",{className:"p-6 bg-muted/30 rounded-lg border border-border text-center",children:(0,t.jsx)("div",{ref:p})})]})})},203272:e=>{"use strict";e.s({BlockMath:()=>s,InlineMath:()=>o,MathHandler:()=>l});var t=e.i(691283);e.i(471089);var n=e.i(991654);e.i(131841);var r=e.i(968617),i=e.i(629906),a=e.i(810180);let o=t.Node.create({name:"inlineMath",priority:1e3,addOptions:()=>({HTMLAttributes:{class:"inline-math"},katexOptions:{throwOnError:!1,displayMode:!1}}),group:"inline",content:"",inline:!0,atom:!0,addAttributes:()=>({latex:{default:"",parseHTML:e=>e.getAttribute("data-latex"),renderHTML:e=>({"data-latex":e.latex})}}),parseHTML:()=>[{tag:'span[data-type="inline-math"]'}],renderHTML(e){let{HTMLAttributes:n,node:r}=e,i=r.attrs.latex||"";return["span",(0,t.mergeAttributes)({"data-type":"inline-math","data-latex":i},this.options.HTMLAttributes,n),0]},addNodeView(){return e=>{let{node:t,getPos:n,editor:a}=e,o=document.createElement("span");o.setAttribute("data-type","inline-math"),o.setAttribute("data-latex",t.attrs.latex),o.className=this.options.HTMLAttributes.class||"";let s=!1,l=()=>{o.innerHTML="";try{let e=t.attrs.latex||"";i.default.render(e,o,{...this.options.katexOptions,displayMode:!1}),o.style.cursor="pointer",o.title="Click to edit LaTeX"}catch(e){o.textContent="$".concat(t.attrs.latex,"$"),o.classList.add("math-error")}},u=()=>{if(s)return;s=!0;let e=n();if(void 0===e)return;let i=t.attrs.latex||"",o=t.nodeSize,l=a.state.tr;l.replaceWith(e,e+o,a.schema.text("$".concat(i,"$"))),l.setSelection(r.TextSelection.create(l.doc,e+1,e+i.length+1)),a.view.dispatch(l),a.view.focus()};return o.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),u()}),o.__startEditing=u,l(),{dom:o,selectNode:()=>{o.classList.add("ProseMirror-selectednode"),u()},deselectNode:()=>{o.classList.remove("ProseMirror-selectednode")}}}}}),s=t.Node.create({name:"blockMath",priority:1e3,addOptions:()=>({HTMLAttributes:{class:"block-math"},katexOptions:{throwOnError:!1,displayMode:!0}}),group:"block",content:"",defining:!0,addAttributes:()=>({latex:{default:"",parseHTML:e=>e.getAttribute("data-latex"),renderHTML:e=>({"data-latex":e.latex})}}),parseHTML:()=>[{tag:'div[data-type="block-math"]'}],renderHTML(e){let{HTMLAttributes:n,node:r}=e,i=r.attrs.latex||"";return["div",(0,t.mergeAttributes)({"data-type":"block-math","data-latex":i},this.options.HTMLAttributes,n),0]},addNodeView:()=>a.MathEditor}),l=t.Extension.create({name:"mathHandler",addProseMirrorPlugins(){let e={checked:!1,isOpen:!1},t=()=>{if(!e.checked){let t=document.querySelector("[cmdk-root]");e.isOpen=!!(t&&"closed"!==t.getAttribute("data-state")),e.checked=!0}return e.isOpen};return[(0,n.keymap)({ArrowUp:e=>{if(!t())return!1;let{$from:n}=e.selection;if(n.parentOffset<=1&&n.depth>0){let e=n.node(-1),t=n.index(-1);if(t>0){let n=e.child(t-1);if((null==n?void 0:n.type.name)==="blockMath")return!0}}if("paragraph"===n.parent.type.name&&n.parentOffset>0){let e=n.nodeBefore;if((null==e?void 0:e.type.name)==="inlineMath")return!0;if(n.parent.childCount>1){let e=0;for(let t=0;t<n.parent.childCount;t++){let r=n.parent.child(t),i=e+r.nodeSize;if(i>=n.parentOffset)break;if("inlineMath"===r.type.name)return!0;e=i}}}return!1},ArrowDown:e=>{if(!t())return!1;let{$from:n}=e.selection,r=n.parentOffset===n.parent.content.size;if(r&&n.depth>0){let e=n.node(-1),t=n.index(-1);if(t<e.childCount-1){let n=e.child(t+1);if((null==n?void 0:n.type.name)==="blockMath")return!0}}if("paragraph"===n.parent.type.name){let e=n.nodeAfter;if((null==e?void 0:e.type.name)==="inlineMath")return!0;if(!r&&n.parent.childCount>1){let e=0;for(let t=0;t<n.parent.childCount;t++){let r=n.parent.child(t);if(e>n.parentOffset&&"inlineMath"===r.type.name)return!0;e+=r.nodeSize}}}return!1}}),new r.Plugin({key:new r.PluginKey("slashMenuCacheReset"),props:{handleKeyDown:(t,n)=>("ArrowUp"!==n.key&&"ArrowDown"!==n.key&&(e.checked=!1),!1)}}),new r.Plugin({key:new r.PluginKey("mathNavigation"),props:{handleKeyDown:(e,t)=>{let n=document.querySelector("[cmdk-root]");if(n&&"closed"!==n.getAttribute("data-state"))return!1;if("ArrowRight"===t.key||"ArrowLeft"===t.key){let{state:n}=e,{selection:i}=n,{$from:a}=i,o=null,s=null,l=null;if("ArrowRight"===t.key){let e=a.nodeAfter;e&&"inlineMath"===e.type.name&&(o=e,l=(s=a.pos)+1)}else if("ArrowLeft"===t.key){let e=a.nodeBefore;e&&"inlineMath"===e.type.name&&(o=e,l=(s=a.pos-e.nodeSize)+(e.attrs.latex||"").length+1)}if(o&&null!==s&&null!==l){t.preventDefault();let i=o.attrs.latex||"",a=n.tr;return a.replaceWith(s,s+o.nodeSize,n.schema.text("$".concat(i,"$"))),a.setSelection(r.TextSelection.create(a.doc,l)),e.dispatch(a),!0}}if("Enter"===t.key){let{state:n}=e,{selection:i}=n;i instanceof r.NodeSelection&&("inlineMath"===i.node.type.name||"blockMath"===i.node.type.name)&&t.preventDefault()}return!1}}}),new r.Plugin({key:new r.PluginKey("mathTextConversion"),appendTransaction:(e,t,n)=>{let r=n.tr,i=!1;return e.some(e=>e.selectionSet)?(n.doc.descendants((e,t)=>{if(e.isText&&e.text){let a=e.text,o=a.match(RegExp("(?<!\\$)\\$([^$\\n]+)\\$(?!\\$)","g"));if(o){let{selection:e}=n,{from:s,to:l}=e,u=0;for(let e of o){let o=a.indexOf(e,u),c=o+e.length,d=t+o,h=t+c;if(!(s>=d&&l<=h)){let t=e.slice(1,-1);t.trim()&&(r.replaceWith(d,h,n.schema.nodes.inlineMath.create({latex:t.trim()})),i=!0)}u=c}}}}),i?r:null):null}})]},addCommands:()=>({setInlineMath:e=>t=>{let{commands:n}=t;return n.insertContent({type:"inlineMath",attrs:e})},setBlockMath:e=>t=>{let{commands:n}=t;return n.insertContent({type:"blockMath",attrs:e})}}),addKeyboardShortcuts:()=>({$:e=>{let{editor:t}=e;return setTimeout(()=>{let{state:e}=t,{selection:n}=e,{$from:r}=n;if("blockMath"===r.parent.type.name||"inlineMath"===r.parent.type.name)return;let i=r.parent.textBetween(0,r.parentOffset,void 0," "),a=i.match(/\$\$([^$]+)\$\$$/);if(a){let e=a[1];if(e.trim()){let n=r.pos-a[0].length,i=r.pos;t.chain().deleteRange({from:n,to:i}).setBlockMath({latex:e.trim()}).run();return}}let o=i.match(RegExp("(?<!\\$)\\$([^$\\n]+)\\$$"));if(o){let e=o[1];if(e.trim()){let n=r.pos-o[0].length,i=r.pos;t.chain().deleteRange({from:n,to:i}).setInlineMath({latex:e.trim()}).run()}}},10),!1},")":e=>{let{editor:t}=e;return setTimeout(()=>{let{state:e}=t,{selection:n}=e,{$from:r}=n;if("blockMath"===r.parent.type.name||"inlineMath"===r.parent.type.name)return;let i=r.parent.textBetween(0,r.parentOffset,void 0," ").match(/\\\(([^)]+)\\\)$/);if(i){let e=i[1];if(e.trim()){let n=r.pos-i[0].length,a=r.pos;t.chain().deleteRange({from:n,to:a}).setInlineMath({latex:e.trim()}).run()}}},10),!1},"]":e=>{let{editor:t}=e;return setTimeout(()=>{let{state:e}=t,{selection:n}=e,{$from:r}=n;if("blockMath"===r.parent.type.name||"inlineMath"===r.parent.type.name)return;let i=r.parent.textBetween(0,r.parentOffset,void 0," ").match(/\\\[([^\]]+)\\\]$/);if(i){let e=i[1];if(e.trim()){let n=r.pos-i[0].length,a=r.pos;t.chain().deleteRange({from:n,to:a}).setBlockMath({latex:e.trim()}).run()}}},10),!1}})})},459793:e=>{"use strict";e.s({createCodeBlockShikiExtension:()=>Z,defaultExtensions:()=>Q,starterKit:()=>J});var t=e.i(114159),n=e.i(691283),r=e.i(947450),i=e.i(672614);e.i(73657);var a=e.i(310872),o=e.i(246358),s=e.i(655879);e.i(987617);var l=e.i(56077);e.i(559609);var u=e.i(947592);e.i(221876);var c=e.i(194572),d=e.i(51896),h=e.i(604663);e.i(131841);var p=e.i(968617);e.i(125492);var f=e.i(954647),m=e.i(28275),g=e.i(227348),y=e.i(730769),b=e.i(636655),x=e.i(751746),w=e.i(564620),k=e.i(289702),S=e.i(167710),_=e.i(225611),C=e.i(145912),A=e.i(79212),E=e.i(712334),T=e.i(107633),M=e.i(653504),I=e.i(431153);e.i(342552);var N=e.i(338313),D=e.i(915431),P=e.i(106052),R=e.i(137584),O=e.i(565524),j=e.i(399217),F=e.i(203272);let L=n.Node.create({name:"callout",group:"block",content:"block+",addAttributes:()=>({}),parseHTML:()=>[{tag:'div[data-type="callout"]'}],renderHTML(e){let{HTMLAttributes:t}=e;return["div",{...t,"data-type":"callout",class:"callout"},0]},addCommands(){return{setCallout:()=>e=>{let{chain:t}=e;return t().insertContent({type:this.name,content:[{type:"paragraph",content:[{type:"text",text:"This is a callout"}]}]}).run()},toggleCallout:()=>e=>{let{commands:t,state:n,dispatch:r}=e,{selection:i}=n,{$from:a,$to:o}=i,s=a.node(a.depth);if("callout"===s.type.name){let e=s.content;return t.setNode("paragraph",e)}return!!(r&&a.blockRange(o))&&t.wrapIn(this.name)}}},addKeyboardShortcuts(){return{"Mod-Shift-C":()=>this.editor.commands.setCallout()}}}),z=n.Node.create({name:"tableOfContents",group:"block",atom:!0,addAttributes:()=>({}),parseHTML:()=>[{tag:'div[data-type="table-of-contents"]'}],renderHTML(e){let{HTMLAttributes:t}=e;return["div",{...t,"data-type":"table-of-contents"}]},addNodeView:()=>O.TableOfContentsView,addCommands(){return{setTableOfContents:()=>e=>{let{chain:t}=e;return t().insertContent({type:this.name}).run()}}}}),B=(0,g.atomWithStorage)("ai-autocomplete-enabled",!0),U=n.Node.create({name:"title",content:"inline*",group:"block",marks:"",parseHTML:()=>[{tag:"h1:first-child"}],renderHTML(e){let{HTMLAttributes:t}=e;return["h1",{...t,class:"!text-[2.5rem] !leading-[1.1] !tracking-[-0.075rem] !mt-0 !mb-8"},0]},addKeyboardShortcuts:()=>({"Shift-Enter":e=>{let{editor:t}=e;return"title"===t.state.selection.$anchor.parent.type.name},Tab:e=>{let{editor:t}=e,{state:n}=t,{selection:r}=n,{$anchor:i}=r;if("title"===i.parent.type.name){let e=i.parent,r=i.start()-1+e.nodeSize;if(r<n.doc.content.size){let e=n.doc.resolve(r),i=n.tr.setSelection((n.schema.nodes.paragraph,p.Selection.near(e)));return t.view.dispatch(i),!0}}return!1}})}),H=new p.Plugin({key:new p.PluginKey("backspaceFix"),props:{handleKeyDown(e,t){if("Backspace"!==t.key)return!1;let{state:n}=e,{selection:r}=n,{empty:i,$head:a}=r;if(!i||a.pos!==a.start())return!1;let o=0===a.parent.content.size,s=a.parent;if(1!==a.index(a.depth-1)||"paragraph"!==s.type.name)return!1;let l=a.depth-2;for(;l>=0;){let e=a.node(l);if("bulletList"===e.type.name||"orderedList"===e.type.name||"taskList"===e.type.name)return!1;l--}if(o){let t=n.doc.firstChild;if(t&&"title"===t.type.name){let r=n.tr;r.delete(a.before(),a.after());let i=1+t.content.size;return r.setSelection(p.TextSelection.create(r.doc,i)),e.dispatch(r),!0}}return!1}}}),W=n.Node.create({name:"backspaceHandler",priority:1e3,addProseMirrorPlugins:()=>[H]}),V=i.default.extend({content:"title block+"}),q=l.default.configure({showOnlyCurrent:!1,emptyNodeClass:"is-title-empty",placeholder:e=>{let{node:t}=e;return"title"===t.type.name?"Give it a title...":"paragraph"===t.type.name?"Start writing...":"toggleSummary"===t.type.name?"Toggle title...":"toggleContent"===t.type.name?"Toggle content...":""},includeChildren:!1}),G=l.default.extend({addOptions(){var e;return{...null==(e=this.parent)?void 0:e.call(this),emptyNodeClass:"is-content-empty",showOnlyCurrent:!1,showOnlyWhenEditable:!0,placeholder:e=>{let{node:t}=e;return"title"===t.type.name?"Give it a title...":"toggleSummary"===t.type.name?"Toggle title...":"toggleContent"===t.type.name?"Toggle content...":(w.globalStore.get(B),"Start writing...")}}},addProseMirrorPlugins(){return[new p.Plugin({key:new p.PluginKey("content-placeholder"),props:{decorations:e=>{let{doc:t,selection:r}=e,i=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:a}=r,o=[];if(!i)return null;let s=!1;t.descendants((e,n,r,i)=>(r!==t||0!==i)&&(!(e.content.size>0)||(s=!0,!1)));let l=!1;t.descendants((e,t)=>{if("title"===e.type.name)return!1;let r=a>=t&&a<=t+e.nodeSize,i=!e.isLeaf&&(0,n.isNodeEmpty)(e);return!r||!i||(l=!0,!1)});let u=!1,c=!1;return t.descendants((e,t)=>{if("title"===e.type.name)return!1;let r=a>=t&&a<=t+e.nodeSize;if(!(!e.isLeaf&&(0,n.isNodeEmpty)(e)))return u||(u=!0),this.options.includeChildren;if(c)return this.options.includeChildren;if(l){if(r){let n=[this.options.emptyNodeClass],i=f.Decoration.node(t,t+e.nodeSize,{class:n.join(" "),"data-placeholder":"function"==typeof this.options.placeholder?this.options.placeholder({editor:this.editor,node:e,pos:t,hasAnchor:r}):this.options.placeholder});o.push(i),c=!0}}else if(u||s)u||(u=!0);else{u=!0;let n=[this.options.emptyNodeClass],i=f.Decoration.node(t,t+e.nodeSize,{class:n.join(" "),"data-placeholder":"function"==typeof this.options.placeholder?this.options.placeholder({editor:this.editor,node:e,pos:t,hasAnchor:r}):this.options.placeholder});o.push(i),c=!0}return this.options.includeChildren}),f.DecorationSet.create(t,o)}}})]}}).configure(),$=s.default.extend({addAttributes(){var e;return{...null==(e=this.parent)?void 0:e.call(this),fullWidth:{default:!1},allowBase64:{default:!0}}},renderHTML(e){let{HTMLAttributes:t}=e,n=t.fullWidth?"my-4 w-[80vw]":"my-4 w-full border border-border";return["img",{...t,class:n}]}}),K=c.default.configure({HTMLAttributes:{class:(0,k.cn)("not-prose pl-4 my-4")}}),Y=u.default.configure({HTMLAttributes:{class:(0,k.cn)("flex gap-1 items-start")},nested:!0}),X=b.Markdown.configure({transformPastedText:!1}),Z=e=>{let t=!1,n=(t=e?"dark"===e||"system"===e&&window.matchMedia("(prefers-color-scheme: dark)").matches:document.documentElement.classList.contains("dark"))?"github-dark":"github-light";return y.default.extend({addNodeView:()=>T.CodeBlockWithSelector,addKeyboardShortcuts:()=>({Tab:e=>{let{editor:t}=e,{state:n,dispatch:r}=t.view,{selection:i}=n,{$from:a}=i;return"codeBlock"===a.parent.type.name&&(r(n.tr.insertText("  ",i.from,i.to)),!0)},"Shift-Tab":e=>{let{editor:t}=e,{state:n,dispatch:r}=t.view,{selection:i}=n,{$from:a}=i;if("codeBlock"===a.parent.type.name){let e=a.start(),t=i.from,o=a.parent.textContent.substring(0,t-e).split("\n"),s=o[o.length-1];if(s.startsWith("  ")){let e=t-s.length;return r(n.tr.delete(e,e+2)),!0}}return!1},"Mod-a":e=>{let{editor:t}=e,{state:n}=t.view,{selection:r}=n,{$from:i}=r;if("codeBlock"===i.parent.type.name){let e=i.start(),r=i.end(),a=n.tr.setSelection(p.TextSelection.create(n.doc,e,r));return t.view.dispatch(a),!0}return!1},Enter:e=>{let{editor:t}=e,{state:n,dispatch:r}=t.view,{selection:i}=n,{$from:a}=i;if("codeBlock"===a.parent.type.name){let e=a.start(),t=i.from,o=a.parent.textContent.substring(0,t-e).split("\n"),s=o[o.length-1].match(/^(\s*)/),l=s?s[1]:"";return r(n.tr.insertText("\n".concat(l),i.from,i.to)),!0}return!1}})}).configure({defaultLanguage:null,defaultTheme:n})},J=e=>m.default.configure({...e&&{history:!1},document:!1,codeBlock:!1,link:!1,heading:{HTMLAttributes:{class:"scroll-mt-20"}},strike:{HTMLAttributes:{class:(0,k.cn)("text-text-secondary")}},bulletList:{HTMLAttributes:{class:"list-disc not-prose pl-9 my-6  [&_ul]:list-[circle] [&_ul_ul]:list-[square] [&_ul_ul_ul]:list-[disc] [&_ul_ul_ul_ul]:list-[circle] [&_ul_ul_ul_ul_ul]:list-[square] [&_ul_ul_ul_ul_ul_ul]:list-[disc]"}},orderedList:{HTMLAttributes:{class:"list-decimal not-prose pl-9 my-6 marker:font-sans marker:normal-nums [&_ol]:list-[lower-alpha] [&_ol_ol]:list-[lower-roman] [&_ol_ol_ol]:list-decimal [&_ol_ol_ol_ol]:list-[lower-alpha] [&_ol_ol_ol_ol_ol]:list-[lower-roman] [&_ol_ol_ol_ol_ol_ol]:list-decimal"}},listItem:{HTMLAttributes:{class:"my-1 marker:text-secondary-foreground [&>ul]:my-0 [&>ol]:my-0"}},blockquote:{HTMLAttributes:{class:'border-l-4 not-prose border-border text-text-secondary pl-3 my-6 [&_li]:text-text-secondary [&_li::marker]:text-text-secondary [&_ul]:text-text-secondary [&_ol]:text-text-secondary [&_pre]:py-3 [&_[data-type="toggle"]]:text-text-secondary [&_[data-type="toggleSummary"]]:text-text-secondary [&_[data-type="toggleContent"]]:text-text-secondary'}},code:{HTMLAttributes:{class:"rounded-3 bg-muted border border-border not-prose px-2 py-1 font-mono font-semibold text-orange text-sm",spellcheck:"false"}},horizontalRule:{HTMLAttributes:{class:"border-none h-px my-6 bg-border text-foreground"}}}),Q=[U,V,q,G,$,K,Y,r.default,E.CleverReplacements,d.TextStyle,h.TrailingNode,t.default,M.CustomLink.configure({openOnClick:!0,autolink:!0,HTMLAttributes:{target:"_blank",rel:"noopener noreferrer"}}),F.InlineMath.configure({HTMLAttributes:{class:"inline-math text-foreground rounded px-1 hover:bg-accent cursor-pointer"},katexOptions:{throwOnError:!1,displayMode:!1}}),F.BlockMath.configure({HTMLAttributes:{class:"block-math text-foreground rounded p-4 my-4 hover:bg-accent cursor-pointer"},katexOptions:{throwOnError:!1,displayMode:!0}}),F.MathHandler,X,j.Toggle,j.ToggleSummary,j.ToggleContent,L,o.default.extend({addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight({color:"bg-yellow/10 text-yellow"})}},addAttributes:()=>({color:{default:null,parseHTML:e=>e.getAttribute("data-color"),renderHTML:e=>e.color?{"data-color":e.color}:{}}}),renderHTML(e){let{HTMLAttributes:t}=e,n=t["data-color"]||"",{"data-color":r,class:i,...a}=t,o=[i,n,"rounded-2 px-0.5"].filter(Boolean).join(" ");return["mark",{...a,class:o},0]}}).configure({multicolor:!0}),n.Extension.create({name:"customKeymap",addKeyboardShortcuts:()=>({"Shift-Enter":()=>!1})}),S.default.configure({searchResultClass:"search-result",caseSensitive:!1,disableRegex:!1}),C.default,A.default,(0,x.createMentionExtension)({isDocumentEditor:!0}),W,_.OnBlurHighlight,I.NoteHighlightExtension,a.default.configure({color:"hsl(var(--primary))",width:2,class:"drop-cursor"}),N.Table,R.TableRow,P.TableHeader,D.TableCell,z]},403446:e=>{"use strict";e.s({default:()=>l});var t=e.i(290479),n=e.i(672330),r=e.i(704255),i=e.i(972899),a=e.i(982152),o=e.i(252390),s=e.i(227261);let l=e=>{let{chatbotId:l,editor:u}=e,{track:c}=(0,o.default)(),{addAttachments:d}=(0,a.useAddAttachment)(),h=(0,s.useChatbotStore)(e=>e.toggle);return u?(0,t.jsx)(r.Button,{className:"gap-2 hover:bg-popover-hover",variant:"ghost",size:"small",onClick:()=>{h("chat",!0);let{from:e,to:t}=u.state.selection,n=u.state.doc.textBetween(e,t," ");d([(0,a.mapTextToAttachment)(l,n,"DOCUMENT")],l),c("attachment_added",{type:"selection"})},leadingIcon:(0,t.jsx)(i.Icon,{as:n.MessageSquare}),label:"Chat"}):null}},47968:e=>{"use strict";let t;e.s({Panel:()=>d,PanelGroup:()=>ev,PanelResizeHandle:()=>ex,disableGlobalCursorStyles:()=>g});var n=e.i(373150);let r=(0,n.createContext)(null);r.displayName="PanelGroupContext";let i={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},a=n.useLayoutEffect,o=n["useId".toString()],s="function"==typeof o?o:()=>null,l=0;function u(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=s(),r=(0,n.useRef)(e||t||null);return null===r.current&&(r.current=""+l++),null!=e?e:r.current}function c(e){let{children:t,className:o="",collapsedSize:s,collapsible:l,defaultSize:c,forwardedRef:d,id:h,maxSize:p,minSize:f,onCollapse:m,onExpand:g,onResize:y,order:b,style:x,tagName:w="div",...k}=e,S=(0,n.useContext)(r);if(null===S)throw Error("Panel components must be rendered within a PanelGroup container");let{collapsePanel:_,expandPanel:C,getPanelSize:A,getPanelStyle:E,groupId:T,isPanelCollapsed:M,reevaluatePanelConstraints:I,registerPanel:N,resizePanel:D,unregisterPanel:P}=S,R=u(h),O=(0,n.useRef)({callbacks:{onCollapse:m,onExpand:g,onResize:y},constraints:{collapsedSize:s,collapsible:l,defaultSize:c,maxSize:p,minSize:f},id:R,idIsFromProps:void 0!==h,order:b});(0,n.useRef)({didLogMissingDefaultSizeWarning:!1}),a(()=>{let{callbacks:e,constraints:t}=O.current,n={...t};O.current.id=R,O.current.idIsFromProps=void 0!==h,O.current.order=b,e.onCollapse=m,e.onExpand=g,e.onResize=y,t.collapsedSize=s,t.collapsible=l,t.defaultSize=c,t.maxSize=p,t.minSize=f,(n.collapsedSize!==t.collapsedSize||n.collapsible!==t.collapsible||n.maxSize!==t.maxSize||n.minSize!==t.minSize)&&I(O.current,n)}),a(()=>{let e=O.current;return N(e),()=>{P(e)}},[b,R,N,P]),(0,n.useImperativeHandle)(d,()=>({collapse:()=>{_(O.current)},expand:e=>{C(O.current,e)},getId:()=>R,getSize:()=>A(O.current),isCollapsed:()=>M(O.current),isExpanded:()=>!M(O.current),resize:e=>{D(O.current,e)}}),[_,C,A,M,R,D]);let j=E(O.current,c);return(0,n.createElement)(w,{...k,children:t,className:o,id:R,style:{...j,...x},[i.groupId]:T,[i.panel]:"",[i.panelCollapsible]:l||void 0,[i.panelId]:R,[i.panelSize]:parseFloat(""+j.flexGrow).toFixed(1)})}let d=(0,n.forwardRef)((e,t)=>(0,n.createElement)(c,{...e,forwardedRef:t}));c.displayName="Panel",d.displayName="forwardRef(Panel)";let h=null,p=!0,f=-1,m=null;function g(){p=!1}function y(e,n){var r,i,a;if(!p)return;let o=function(e,t){if(t){let e=(t&T)!=0,n=(t&M)!=0,r=(t&I)!=0,i=(t&N)!=0;if(e)if(r)return"se-resize";else if(i)return"ne-resize";else return"e-resize";if(n)if(r)return"sw-resize";else if(i)return"nw-resize";else return"w-resize";if(r)return"s-resize";else if(i)return"n-resize"}switch(e){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}(e,n);h!==o&&(h=o,null===m&&(m=document.createElement("style"),t&&m.setAttribute("nonce",t),document.head.appendChild(m)),f>=0&&(null==(a=m.sheet)||a.removeRule(f)),f=null!=(r=null==(i=m.sheet)?void 0:i.insertRule("*{cursor: ".concat(o," !important;}")))?r:-1)}function b(e){return"keydown"===e.type}function x(e){return e.type.startsWith("pointer")}function w(e){return e.type.startsWith("mouse")}function k(e){if(x(e)){if(e.isPrimary)return{x:e.clientX,y:e.clientY}}else if(w(e))return{x:e.clientX,y:e.clientY};return{x:1/0,y:1/0}}let S=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function _(e){let t=e.length;for(;t--;){let n=e[t];if($(n,"Missing node"),function(e){let t=getComputedStyle(e);return!!("fixed"===t.position||"auto"!==t.zIndex&&("static"!==t.position||function(e){var t;let n=getComputedStyle(null!=(t=E(e))?t:e).display;return"flex"===n||"inline-flex"===n}(e))||1>+t.opacity||"transform"in t&&"none"!==t.transform||"webkitTransform"in t&&"none"!==t.webkitTransform||"mixBlendMode"in t&&"normal"!==t.mixBlendMode||"filter"in t&&"none"!==t.filter||"webkitFilter"in t&&"none"!==t.webkitFilter||"isolation"in t&&"isolate"===t.isolation||S.test(t.willChange))||"touch"===t.webkitOverflowScrolling}(n))return n}return null}function C(e){return e&&Number(getComputedStyle(e).zIndex)||0}function A(e){let t=[];for(;e;)t.push(e),e=E(e);return t}function E(e){let{parentNode:t}=e;return t&&t instanceof ShadowRoot?t.host:t}let T=1,M=2,I=4,N=8,D="coarse"===function(){if("function"==typeof matchMedia)return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}(),P=[],R=!1,O=new Map,j=new Map,F=new Set;function L(e){let{target:t}=e,{x:n,y:r}=k(e);R=!0,H({target:t,x:n,y:r}),q(),P.length>0&&(G("down",e),e.preventDefault(),U(t)||e.stopImmediatePropagation())}function z(e){let{x:t,y:n}=k(e);if(R&&0===e.buttons&&(R=!1,G("up",e)),!R){let{target:r}=e;H({target:r,x:t,y:n})}G("move",e),W(),P.length>0&&e.preventDefault()}function B(e){let{target:t}=e,{x:n,y:r}=k(e);j.clear(),R=!1,P.length>0&&(e.preventDefault(),U(t)||e.stopImmediatePropagation()),G("up",e),H({target:t,x:n,y:r}),W(),q()}function U(e){let t=e;for(;t;){if(t.hasAttribute(i.resizeHandle))return!0;t=t.parentElement}return!1}function H(e){let{target:t,x:n,y:r}=e;P.splice(0);let i=null;(t instanceof HTMLElement||t instanceof SVGElement)&&(i=t),F.forEach(e=>{let{element:t,hitAreaMargins:a}=e,o=t.getBoundingClientRect(),{bottom:s,left:l,right:u,top:c}=o,d=D?a.coarse:a.fine;if(n>=l-d&&n<=u+d&&r>=c-d&&r<=s+d){if(null!==i&&document.contains(i)&&t!==i&&!t.contains(i)&&!i.contains(t)&&function(e,t){let n;if(e===t)throw Error("Cannot compare node with itself");let r={a:A(e),b:A(t)};for(;r.a.at(-1)===r.b.at(-1);)e=r.a.pop(),t=r.b.pop(),n=e;$(n,"Stacking order can only be calculated for elements with a common ancestor");let i={a:C(_(r.a)),b:C(_(r.b))};if(i.a===i.b){let e=n.childNodes,t={a:r.a.at(-1),b:r.b.at(-1)},i=e.length;for(;i--;){let n=e[i];if(n===t.a)return 1;if(n===t.b)return -1}}return Math.sign(i.a-i.b)}(i,t)>0){let e=i,n=!1;for(;e;){var h;if(e.contains(t))break;if(h=e.getBoundingClientRect(),h.x<o.x+o.width&&h.x+h.width>o.x&&h.y<o.y+o.height&&h.y+h.height>o.y){n=!0;break}e=e.parentElement}if(n)return}P.push(e)}})}function W(){let e=!1,t=!1;P.forEach(n=>{let{direction:r}=n;"horizontal"===r?e=!0:t=!0});let n=0;j.forEach(e=>{n|=e}),e&&t?y("intersection",n):e?y("horizontal",n):t?y("vertical",n):null!==m&&(document.head.removeChild(m),h=null,m=null,f=-1)}let V=new AbortController;function q(){V.abort();let e={capture:!0,signal:(V=new AbortController).signal};F.size&&(R?(P.length>0&&O.forEach((t,n)=>{let{body:r}=n;t>0&&(r.addEventListener("contextmenu",B,e),r.addEventListener("pointerleave",z,e),r.addEventListener("pointermove",z,e))}),window.addEventListener("pointerup",B,e),window.addEventListener("pointercancel",B,e)):O.forEach((t,n)=>{let{body:r}=n;t>0&&(r.addEventListener("pointerdown",L,e),r.addEventListener("pointermove",z,e))}))}function G(e,t){F.forEach(n=>{let{setResizeHandlerState:r}=n;r(e,P.includes(n),t)})}function $(e,t){if(!e)throw console.error(t),Error(t)}function K(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return e.toFixed(n)===t.toFixed(n)?0:e>t?1:-1}function Y(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return 0===K(e,t,n)}function X(e,t,n){return 0===K(e,t,n)}function Z(e){let{panelConstraints:t,panelIndex:n,size:r}=e,i=t[n];$(null!=i,"Panel constraints not found for index ".concat(n));let{collapsedSize:a=0,collapsible:o,maxSize:s=100,minSize:l=0}=i;return 0>K(r,l)&&(r=o&&0>K(r,(a+l)/2)?a:l),r=parseFloat((r=Math.min(s,r)).toFixed(10))}function J(e){let{delta:t,initialLayout:n,panelConstraints:r,pivotIndices:i,prevLayout:a,trigger:o}=e;if(X(t,0))return n;let s=[...n],[l,u]=i;$(null!=l,"Invalid first pivot index"),$(null!=u,"Invalid second pivot index");let c=0;if("keyboard"===o){{let e=t<0?u:l,i=r[e];$(i,"Panel constraints not found for index ".concat(e));let{collapsedSize:a=0,collapsible:o,minSize:s=0}=i;if(o){let r=n[e];if($(null!=r,"Previous layout not found for panel index ".concat(e)),X(r,a)){let e=s-r;K(e,Math.abs(t))>0&&(t=t<0?0-e:e)}}}{let e=t<0?l:u,i=r[e];$(i,"No panel constraints found for index ".concat(e));let{collapsedSize:a=0,collapsible:o,minSize:s=0}=i;if(o){let r=n[e];if($(null!=r,"Previous layout not found for panel index ".concat(e)),X(r,s)){let e=r-a;K(e,Math.abs(t))>0&&(t=t<0?0-e:e)}}}}{let e=t<0?1:-1,i=t<0?u:l,a=0;for(;;){let t=n[i];if($(null!=t,"Previous layout not found for panel index ".concat(i)),a+=Z({panelConstraints:r,panelIndex:i,size:100})-t,(i+=e)<0||i>=r.length)break}let o=Math.min(Math.abs(t),Math.abs(a));t=t<0?0-o:o}{let e=t<0?l:u;for(;e>=0&&e<r.length;){let i=Math.abs(t)-Math.abs(c),a=n[e];$(null!=a,"Previous layout not found for panel index ".concat(e));let o=Z({panelConstraints:r,panelIndex:e,size:a-i});if(!X(a,o)&&(c+=a-o,s[e]=o,c.toPrecision(3).localeCompare(Math.abs(t).toPrecision(3),void 0,{numeric:!0})>=0))break;t<0?e--:e++}}if(function(e,t,n){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!X(e[n],t[n],void 0))return!1;return!0}(a,s))return a;{let e=t<0?u:l,i=n[e];$(null!=i,"Previous layout not found for panel index ".concat(e));let a=i+c,o=Z({panelConstraints:r,panelIndex:e,size:a});if(s[e]=o,!X(o,a)){let e=a-o,n=t<0?u:l;for(;n>=0&&n<r.length;){let i=s[n];$(null!=i,"Previous layout not found for panel index ".concat(n));let a=Z({panelConstraints:r,panelIndex:n,size:i+e});if(X(i,a)||(e-=a-i,s[n]=a),X(e,0))break;t>0?n--:n++}}}return X(s.reduce((e,t)=>t+e,0),100)?s:a}function Q(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return Array.from(t.querySelectorAll("[".concat(i.resizeHandleId,'][data-panel-group-id="').concat(e,'"]')))}function ee(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document,r=Q(e,n).findIndex(e=>e.getAttribute(i.resizeHandleId)===t);return null!=r?r:null}function et(e,t,n){let r=ee(e,t,n);return null!=r?[r,r+1]:[-1,-1]}function en(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;if(n instanceof HTMLElement&&(null==n||null==(t=n.dataset)?void 0:t.panelGroupId)==e)return n;let r=n.querySelector('[data-panel-group][data-panel-group-id="'.concat(e,'"]'));return r||null}function er(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,n=t.querySelector("[".concat(i.resizeHandleId,'="').concat(e,'"]'));return n||null}function ei(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function ea(e,t){let{x:n,y:r}=k(t);return"horizontal"===e?n:r}function eo(e,t,n){t.forEach((t,r)=>{let i=e[r];$(i,"Panel data not found for index ".concat(r));let{callbacks:a,constraints:o,id:s}=i,{collapsedSize:l=0,collapsible:u}=o,c=n[s];if(null==c||t!==c){n[s]=t;let{onCollapse:e,onExpand:r,onResize:i}=a;i&&i(t,c),u&&(e||r)&&(r&&(null==c||Y(c,l))&&!Y(t,l)&&r(),e&&(null==c||!Y(c,l))&&Y(t,l)&&e())}})}function es(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function el(e){try{if("undefined"!=typeof localStorage)e.getItem=e=>localStorage.getItem(e),e.setItem=(e,t)=>{localStorage.setItem(e,t)};else throw Error("localStorage not supported in this environment")}catch(t){console.error(t),e.getItem=()=>null,e.setItem=()=>{}}}function eu(e){return"react-resizable-panels:".concat(e)}function ec(e){return e.map(e=>{let{constraints:t,id:n,idIsFromProps:r,order:i}=e;return r?n:i?"".concat(i,":").concat(JSON.stringify(t)):JSON.stringify(t)}).sort((e,t)=>e.localeCompare(t)).join(",")}function ed(e,t){try{let n=eu(e),r=t.getItem(n);if(r){let e=JSON.parse(r);if("object"==typeof e&&null!=e)return e}}catch(e){}return null}function eh(e,t,n,r,i){var a;let o=eu(e),s=ec(t),l=null!=(a=ed(e,i))?a:{};l[s]={expandToSizes:Object.fromEntries(n.entries()),layout:r};try{i.setItem(o,JSON.stringify(l))}catch(e){console.error(e)}}function ep(e){let{layout:t,panelConstraints:n}=e,r=[...t],i=r.reduce((e,t)=>e+t,0);if(r.length!==n.length)throw Error("Invalid ".concat(n.length," panel layout: ").concat(r.map(e=>"".concat(e,"%")).join(", ")));if(!X(i,100)&&r.length>0)for(let e=0;e<n.length;e++){let t=r[e];$(null!=t,"No layout data found for index ".concat(e));let n=100/i*t;r[e]=n}let a=0;for(let e=0;e<n.length;e++){let t=r[e];$(null!=t,"No layout data found for index ".concat(e));let i=Z({panelConstraints:n,panelIndex:e,size:t});t!=i&&(a+=t-i,r[e]=i)}if(!X(a,0))for(let e=0;e<n.length;e++){let t=r[e];$(null!=t,"No layout data found for index ".concat(e));let i=Z({panelConstraints:n,panelIndex:e,size:t+a});if(t!==i&&(a-=i-t,r[e]=i,X(a,0)))break}return r}let ef={getItem:e=>(el(ef),ef.getItem(e)),setItem:(e,t)=>{el(ef),ef.setItem(e,t)}},em={};function eg(e){let{autoSaveId:t=null,children:o,className:s="",direction:l,forwardedRef:c,id:d=null,onLayout:h=null,keyboardResizeBy:p=null,storage:f=ef,style:m,tagName:g="div",...y}=e,k=u(d),S=(0,n.useRef)(null),[_,C]=(0,n.useState)(null),[A,E]=(0,n.useState)([]),D=function(){let[e,t]=(0,n.useState)(0);return(0,n.useCallback)(()=>t(e=>e+1),[])}(),P=(0,n.useRef)({}),R=(0,n.useRef)(new Map),O=(0,n.useRef)(0),F=(0,n.useRef)({autoSaveId:t,direction:l,dragState:_,id:k,keyboardResizeBy:p,onLayout:h,storage:f}),L=(0,n.useRef)({layout:A,panelDataArray:[],panelDataArrayChanged:!1});(0,n.useRef)({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),(0,n.useImperativeHandle)(c,()=>({getId:()=>F.current.id,getLayout:()=>{let{layout:e}=L.current;return e},setLayout:e=>{let{onLayout:t}=F.current,{layout:n,panelDataArray:r}=L.current,i=ep({layout:e,panelConstraints:r.map(e=>e.constraints)});ei(n,i)||(E(i),L.current.layout=i,t&&t(i),eo(r,i,P.current))}}),[]),a(()=>{F.current.autoSaveId=t,F.current.direction=l,F.current.dragState=_,F.current.id=k,F.current.onLayout=h,F.current.storage=f}),function(e){let{committedValuesRef:t,eagerValuesRef:r,groupId:o,layout:s,panelDataArray:l,panelGroupElement:u,setLayout:c}=e;(0,n.useRef)({didWarnAboutMissingResizeHandle:!1}),a(()=>{if(!u)return;let e=Q(o,u);for(let t=0;t<l.length-1;t++){let{valueMax:n,valueMin:r,valueNow:i}=function(e){let{layout:t,panelsArray:n,pivotIndices:r}=e,i=0,a=100,o=0,s=0,l=r[0];return $(null!=l,"No pivot index found"),n.forEach((e,t)=>{let{constraints:n}=e,{maxSize:r=100,minSize:u=0}=n;t===l?(i=u,a=r):(o+=u,s+=r)}),{valueMax:Math.min(a,100-o),valueMin:Math.max(i,100-s),valueNow:t[l]}}({layout:s,panelsArray:l,pivotIndices:[t,t+1]}),a=e[t];if(null==a);else{let e=l[t];$(e,'No panel data found for index "'.concat(t,'"')),a.setAttribute("aria-controls",e.id),a.setAttribute("aria-valuemax",""+Math.round(n)),a.setAttribute("aria-valuemin",""+Math.round(r)),a.setAttribute("aria-valuenow",null!=i?""+Math.round(i):"")}}return()=>{e.forEach((e,t)=>{e.removeAttribute("aria-controls"),e.removeAttribute("aria-valuemax"),e.removeAttribute("aria-valuemin"),e.removeAttribute("aria-valuenow")})}},[o,s,l,u]),(0,n.useEffect)(()=>{if(!u)return;let e=r.current;$(e,"Eager values not found");let{panelDataArray:t}=e;$(null!=en(o,u),'No group found for id "'.concat(o,'"'));let n=Q(o,u);$(n,'No resize handles found for group id "'.concat(o,'"'));let a=n.map(e=>{let n=e.getAttribute(i.resizeHandleId);$(n,"Resize handle element has no handle id attribute");let[r,a]=function(e,t,n){var r,i,a,o;let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:document,l=er(t,s),u=Q(e,s),c=l?u.indexOf(l):-1;return[null!=(r=null==(i=n[c])?void 0:i.id)?r:null,null!=(a=null==(o=n[c+1])?void 0:o.id)?a:null]}(o,n,t,u);if(null==r||null==a)return()=>{};let l=e=>{if(!e.defaultPrevented&&"Enter"===e.key){e.preventDefault();let i=t.findIndex(e=>e.id===r);if(i>=0){let e=t[i];$(e,"No panel data found for index ".concat(i));let r=s[i],{collapsedSize:a=0,collapsible:l,minSize:d=0}=e.constraints;if(null!=r&&l){let e=J({delta:X(r,a)?d-a:a-r,initialLayout:s,panelConstraints:t.map(e=>e.constraints),pivotIndices:et(o,n,u),prevLayout:s,trigger:"keyboard"});s!==e&&c(e)}}}};return e.addEventListener("keydown",l),()=>{e.removeEventListener("keydown",l)}});return()=>{a.forEach(e=>e())}},[u,t,r,o,s,l,c])}({committedValuesRef:F,eagerValuesRef:L,groupId:k,layout:A,panelDataArray:L.current.panelDataArray,setLayout:E,panelGroupElement:S.current}),(0,n.useEffect)(()=>{let{panelDataArray:e}=L.current;if(t){if(0===A.length||A.length!==e.length)return;let n=em[t];null==n&&(n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=null;return function(){for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];null!==n&&clearTimeout(n),n=setTimeout(()=>{e(...i)},t)}}(eh,100),em[t]=n),n(t,[...e],new Map(R.current),A,f)}},[t,A,f]),(0,n.useEffect)(()=>{});let z=(0,n.useCallback)(e=>{let{onLayout:t}=F.current,{layout:n,panelDataArray:r}=L.current;if(e.constraints.collapsible){let i=r.map(e=>e.constraints),{collapsedSize:a=0,panelSize:o,pivotIndices:s}=eb(r,e,n);if($(null!=o,'Panel size not found for panel "'.concat(e.id,'"')),!Y(o,a)){R.current.set(e.id,o);let l=J({delta:ey(r,e)===r.length-1?o-a:a-o,initialLayout:n,panelConstraints:i,pivotIndices:s,prevLayout:n,trigger:"imperative-api"});es(n,l)||(E(l),L.current.layout=l,t&&t(l),eo(r,l,P.current))}}},[]),B=(0,n.useCallback)((e,t)=>{let{onLayout:n}=F.current,{layout:r,panelDataArray:i}=L.current;if(e.constraints.collapsible){let a=i.map(e=>e.constraints),{collapsedSize:o=0,panelSize:s=0,minSize:l=0,pivotIndices:u}=eb(i,e,r),c=null!=t?t:l;if(Y(s,o)){let t=R.current.get(e.id),o=null!=t&&t>=c?t:c,l=J({delta:ey(i,e)===i.length-1?s-o:o-s,initialLayout:r,panelConstraints:a,pivotIndices:u,prevLayout:r,trigger:"imperative-api"});es(r,l)||(E(l),L.current.layout=l,n&&n(l),eo(i,l,P.current))}}},[]),U=(0,n.useCallback)(e=>{let{layout:t,panelDataArray:n}=L.current,{panelSize:r}=eb(n,e,t);return $(null!=r,'Panel size not found for panel "'.concat(e.id,'"')),r},[]),H=(0,n.useCallback)((e,t)=>{let{panelDataArray:n}=L.current,r=ey(n,e);return function(e){let{defaultSize:t,dragState:n,layout:r,panelData:i,panelIndex:a,precision:o=3}=e,s=r[a];return{flexBasis:0,flexGrow:null==s?void 0!=t?t.toPrecision(o):"1":1===i.length?"1":s.toPrecision(o),flexShrink:1,overflow:"hidden",pointerEvents:null!==n?"none":void 0}}({defaultSize:t,dragState:_,layout:A,panelData:n,panelIndex:r})},[_,A]),W=(0,n.useCallback)(e=>{let{layout:t,panelDataArray:n}=L.current,{collapsedSize:r=0,collapsible:i,panelSize:a}=eb(n,e,t);return $(null!=a,'Panel size not found for panel "'.concat(e.id,'"')),!0===i&&Y(a,r)},[]),V=(0,n.useCallback)(e=>{let{layout:t,panelDataArray:n}=L.current,{collapsedSize:r=0,collapsible:i,panelSize:a}=eb(n,e,t);return $(null!=a,'Panel size not found for panel "'.concat(e.id,'"')),!i||K(a,r)>0},[]),q=(0,n.useCallback)(e=>{let{panelDataArray:t}=L.current;t.push(e),t.sort((e,t)=>{let n=e.order,r=t.order;return null==n&&null==r?0:null==n?-1:null==r?1:n-r}),L.current.panelDataArrayChanged=!0,D()},[D]);a(()=>{if(L.current.panelDataArrayChanged){L.current.panelDataArrayChanged=!1;let{autoSaveId:i,onLayout:a,storage:o}=F.current,{layout:s,panelDataArray:l}=L.current,u=null;if(i){var e,t,n,r;let a=(e=i,t=l,null!=(r=(null!=(n=ed(e,o))?n:{})[ec(t)])?r:null);a&&(R.current=new Map(Object.entries(a.expandToSizes)),u=a.layout)}null==u&&(u=function(e){let{panelDataArray:t}=e,n=Array(t.length),r=t.map(e=>e.constraints),i=0,a=100;for(let e=0;e<t.length;e++){let t=r[e];$(t,"Panel constraints not found for index ".concat(e));let{defaultSize:o}=t;null!=o&&(i++,n[e]=o,a-=o)}for(let e=0;e<t.length;e++){let o=r[e];$(o,"Panel constraints not found for index ".concat(e));let{defaultSize:s}=o;if(null!=s)continue;let l=a/(t.length-i);i++,n[e]=l,a-=l}return n}({panelDataArray:l}));let c=ep({layout:u,panelConstraints:l.map(e=>e.constraints)});ei(s,c)||(E(c),L.current.layout=c,a&&a(c),eo(l,c,P.current))}}),a(()=>{let e=L.current;return()=>{e.layout=[]}},[]);let G=(0,n.useCallback)(e=>{let t=!1,n=S.current;return n&&"rtl"===window.getComputedStyle(n,null).getPropertyValue("direction")&&(t=!0),function(n){var r,a;n.preventDefault();let o=S.current;if(!o)return()=>null;let{direction:s,dragState:l,id:u,keyboardResizeBy:c,onLayout:d}=F.current,{layout:h,panelDataArray:p}=L.current,{initialLayout:f}=null!=l?l:{},m=et(u,e,o),g=function(e,t,n,r,a,o){if(!b(e))return null==r?0:function(e,t,n,r,a){let o="horizontal"===n,s=er(t,a);$(s,'No resize handle element found for id "'.concat(t,'"'));let l=s.getAttribute(i.groupId);$(l,"Resize handle element has no group id attribute");let{initialCursorPosition:u}=r,c=ea(n,e),d=en(l,a);$(d,'No group element found for id "'.concat(l,'"'));let h=d.getBoundingClientRect();return(c-u)/(o?h.width:h.height)*100}(e,t,n,r,o);{let t="horizontal"===n,r=0;r=e.shiftKey?100:null!=a?a:10;let i=0;switch(e.key){case"ArrowDown":i=t?0:r;break;case"ArrowLeft":i=t?-r:0;break;case"ArrowRight":i=t?r:0;break;case"ArrowUp":i=t?0:-r;break;case"End":i=100;break;case"Home":i=-100}return i}}(n,e,s,l,c,o),y="horizontal"===s;y&&t&&(g=-g);let k=J({delta:g,initialLayout:null!=f?f:h,panelConstraints:p.map(e=>e.constraints),pivotIndices:m,prevLayout:h,trigger:b(n)?"keyboard":"mouse-or-touch"}),_=!es(h,k);(x(n)||w(n))&&O.current!=g&&((O.current=g,_||0===g)?j.set(e,0):y?(r=g<0?T:M,j.set(e,r)):(a=g<0?I:N,j.set(e,a))),_&&(E(k),L.current.layout=k,d&&d(k),eo(p,k,P.current))}},[]),Z=(0,n.useCallback)((e,t)=>{let{onLayout:n}=F.current,{layout:r,panelDataArray:i}=L.current,a=i.map(e=>e.constraints),{panelSize:o,pivotIndices:s}=eb(i,e,r);$(null!=o,'Panel size not found for panel "'.concat(e.id,'"'));let l=J({delta:ey(i,e)===i.length-1?o-t:t-o,initialLayout:r,panelConstraints:a,pivotIndices:s,prevLayout:r,trigger:"imperative-api"});es(r,l)||(E(l),L.current.layout=l,n&&n(l),eo(i,l,P.current))},[]),ee=(0,n.useCallback)((e,t)=>{let{layout:n,panelDataArray:r}=L.current,{collapsedSize:i=0,collapsible:a}=t,{collapsedSize:o=0,collapsible:s,maxSize:l=100,minSize:u=0}=e.constraints,{panelSize:c}=eb(r,e,n);null!=c&&(a&&s&&Y(c,i)?Y(i,o)||Z(e,o):c<u?Z(e,u):c>l&&Z(e,l))},[Z]),el=(0,n.useCallback)((e,t)=>{let{direction:n}=F.current,{layout:r}=L.current;if(!S.current)return;let i=er(e,S.current);$(i,'Drag handle element not found for id "'.concat(e,'"'));let a=ea(n,t);C({dragHandleId:e,dragHandleRect:i.getBoundingClientRect(),initialCursorPosition:a,initialLayout:r})},[]),eu=(0,n.useCallback)(()=>{C(null)},[]),eg=(0,n.useCallback)(e=>{let{panelDataArray:t}=L.current,n=ey(t,e);n>=0&&(t.splice(n,1),delete P.current[e.id],L.current.panelDataArrayChanged=!0,D())},[D]),ev=(0,n.useMemo)(()=>({collapsePanel:z,direction:l,dragState:_,expandPanel:B,getPanelSize:U,getPanelStyle:H,groupId:k,isPanelCollapsed:W,isPanelExpanded:V,reevaluatePanelConstraints:ee,registerPanel:q,registerResizeHandle:G,resizePanel:Z,startDragging:el,stopDragging:eu,unregisterPanel:eg,panelGroupElement:S.current}),[z,_,l,B,U,H,k,W,V,ee,q,G,Z,el,eu,eg]);return(0,n.createElement)(r.Provider,{value:ev},(0,n.createElement)(g,{...y,children:o,className:s,id:d,ref:S,style:{display:"flex",flexDirection:"horizontal"===l?"row":"column",height:"100%",overflow:"hidden",width:"100%",...m},[i.group]:"",[i.groupDirection]:l,[i.groupId]:k}))}let ev=(0,n.forwardRef)((e,t)=>(0,n.createElement)(eg,{...e,forwardedRef:t}));function ey(e,t){return e.findIndex(e=>e===t||e.id===t.id)}function eb(e,t,n){let r=ey(e,t),i=r===e.length-1,a=n[r];return{...t.constraints,panelSize:a,pivotIndices:i?[r-1,r]:[r,r+1]}}function ex(e){var t,o;let{children:s=null,className:l="",disabled:c=!1,hitAreaMargins:d,id:h,onBlur:p,onClick:f,onDragging:m,onFocus:g,onPointerDown:y,onPointerUp:b,style:x={},tabIndex:w=0,tagName:k="div",...S}=e,_=(0,n.useRef)(null),C=(0,n.useRef)({onClick:f,onDragging:m,onPointerDown:y,onPointerUp:b});(0,n.useEffect)(()=>{C.current.onClick=f,C.current.onDragging=m,C.current.onPointerDown=y,C.current.onPointerUp=b});let A=(0,n.useContext)(r);if(null===A)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");let{direction:E,groupId:T,registerResizeHandle:M,startDragging:I,stopDragging:N,panelGroupElement:D}=A,R=u(h),[L,z]=(0,n.useState)("inactive"),[B,U]=(0,n.useState)(!1),[H,V]=(0,n.useState)(null),G=(0,n.useRef)({state:L});a(()=>{G.current.state=L}),(0,n.useEffect)(()=>{if(c)V(null);else{let e=M(R);V(()=>e)}},[c,R,M]);let K=null!=(t=null==d?void 0:d.coarse)?t:15,Y=null!=(o=null==d?void 0:d.fine)?o:5;return(0,n.useEffect)(()=>{if(c||null==H)return;let e=_.current;$(e,"Element ref not attached");let t=!1;return function(e,t,n,r,i){var a;let{ownerDocument:o}=t,s={direction:n,element:t,hitAreaMargins:r,setResizeHandlerState:i},l=null!=(a=O.get(o))?a:0;return O.set(o,l+1),F.add(s),q(),function(){var t;j.delete(e),F.delete(s);let n=null!=(t=O.get(o))?t:1;if(O.set(o,n-1),q(),1===n&&O.delete(o),P.includes(s)){let e=P.indexOf(s);e>=0&&P.splice(e,1),W(),i("up",!0,null)}}}(R,e,E,{coarse:K,fine:Y},(e,n,r)=>{if(!n)return void z("inactive");switch(e){case"down":{z("drag"),t=!1,$(r,'Expected event to be defined for "down" action'),I(R,r);let{onDragging:e,onPointerDown:n}=C.current;null==e||e(!0),null==n||n();break}case"move":{let{state:e}=G.current;t=!0,"drag"!==e&&z("hover"),$(r,'Expected event to be defined for "move" action'),H(r);break}case"up":{z("hover"),N();let{onClick:e,onDragging:n,onPointerUp:r}=C.current;null==n||n(!1),null==r||r(),t||null==e||e()}}})},[K,E,c,Y,M,R,H,I,N]),!function(e){let{disabled:t,handleId:r,resizeHandler:a,panelGroupElement:o}=e;(0,n.useEffect)(()=>{if(t||null==a||null==o)return;let e=er(r,o);if(null==e)return;let n=t=>{if(!t.defaultPrevented)switch(t.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":t.preventDefault(),a(t);break;case"F6":{t.preventDefault();let n=e.getAttribute(i.groupId);$(n,'No group element found for id "'.concat(n,'"'));let a=Q(n,o),s=ee(n,r,o);$(null!==s,'No resize element found for id "'.concat(r,'"'));let l=t.shiftKey?s>0?s-1:a.length-1:s+1<a.length?s+1:0;a[l].focus()}}};return e.addEventListener("keydown",n),()=>{e.removeEventListener("keydown",n)}},[o,t,r,a])}({disabled:c,handleId:R,resizeHandler:H,panelGroupElement:D}),(0,n.createElement)(k,{...S,children:s,className:l,id:h,onBlur:()=>{U(!1),null==p||p()},onFocus:()=>{U(!0),null==g||g()},ref:_,role:"separator",style:{touchAction:"none",userSelect:"none",...x},tabIndex:w,[i.groupDirection]:E,[i.groupId]:T,[i.resizeHandle]:"",[i.resizeHandleActive]:"drag"===L?"pointer":B?"keyboard":void 0,[i.resizeHandleEnabled]:!c,[i.resizeHandleId]:R,[i.resizeHandleState]:L})}eg.displayName="PanelGroup",ev.displayName="forwardRef(PanelGroup)",ex.displayName="PanelResizeHandle"},608087:e=>{"use strict";e.s({ResizableHandle:()=>d,ResizablePanel:()=>c,ResizablePanelGroup:()=>u,useIsResizing:()=>l});var t=e.i(290479),n=e.i(289702),r=e.i(647968),i=e.i(608294),a=e.i(373150),o=e.i(47968);o.disableGlobalCursorStyles();let s=(0,r.atom)(!1),l=()=>{let[e,t]=(0,i.useAtom)(s);return{isResizing:e,setIsResizing:t}},u=(0,a.forwardRef)((e,r)=>{let{className:i,...a}=e;return(0,t.jsx)(o.PanelGroup,{ref:r,className:(0,n.cn)("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",i),...a})});u.displayName="ResizablePanelGroup";let c=o.Panel,d=e=>{let{withHandle:r,className:a,...l}=e,u=(0,i.useSetAtom)(s);return(0,t.jsx)(o.PanelResizeHandle,{className:(0,n.cn)('relative flex w-px items-center cursor-col-resize [&[data-resize-handle-state="drag"]]:bg-blue  justify-center bg-borderSecondary after:absolute after:inset-y-0 after:left-1/2 after:w-2 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90',a,"transition-transform duration-150 ease-in-out hover:scale-x-[3] active:scale-x-[3] [&[data-resize-handle-active]]:scale-x-[3]"),...l,onDragging:e=>{var t;null==(t=l.onDragging)||t.call(l,e),u(e)}})}},279314:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]])},841742:e=>{"use strict";e.s({Pin:()=>t.default});var t=e.i(279314)},948476:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("pin-off",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M15 9.34V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H7.89",key:"znwnzq"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v1.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h11",key:"c9qhm2"}]])},180927:e=>{"use strict";e.s({PinOff:()=>t.default});var t=e.i(948476)},168234:e=>{"use strict";e.s({compareDesc:()=>n});var t=e.i(163015);function n(e,n){let r=(0,t.toDate)(e),i=(0,t.toDate)(n),a=r.getTime()-i.getTime();return a>0?-1:a<0?1:a}},695056:e=>{"use strict";e.s({default:()=>r});var t=e.i(373150),n=e.i(814733);let r=e=>{let{debouncedInput:r,type:i}=e,{data:a,isLoading:o}=n.api.exa.query.useQuery(r,{enabled:r.trim().length>2&&("exa"===i||"all"===i)}),{data:s,isLoading:l}=n.api.openAlex.query.useQuery(r,{enabled:r.trim().length>2&&("openalex"===i||"all"===i)});return{sources:(0,t.useMemo)(()=>("exa"===i||"all"===i)&&a?a:("openalex"===i||"all"===i)&&s?s:[],[a,s,i]),isLoading:o||l}}},467231:e=>{"use strict";e.s({getYear:()=>n});var t=e.i(163015);function n(e){return(0,t.toDate)(e).getFullYear()}},793956:e=>{"use strict";e.s({useUploadUrl:()=>l});var t=e.i(91086),n=e.i(814733),r=e.i(289702),i=e.i(525094),a=e.i(847934),o=e.i(950347),s=e.i(382680);let l=()=>{let{mutateDelete:e}=(0,a.default)(),{optimisticIncreaseImportLimit:l}=(0,o.default)(),{checkImportLimit:u}=(0,s.useImportLimitCheck)(),{createChatbot:c,isPending:d}=(0,t.useCreateChatbot)(),{mutate:h,isPending:p}=n.api.file.uploadUrl.useMutation({onError:async(t,n)=>{e([{id:n.chatbotId}]),i.toast.error("Add to library failed."),await (0,r.wait)(1e3),i.toast.info("Please download the pdf and add it to your library manually.")}});return{triggerUpload:async e=>{let{title:t,pdfUrl:n,onTrigger:r}=e;if(!u({shouldThrow:!1}))return;l(),null==r||r();let i=await c({name:t,type:"DOCUMENT"});i&&h({name:t,chatbotId:i.id,url:n,type:"DOCUMENT"})},isPendingUpload:p,isPendingChatbot:d}}},205194:e=>{"use strict";e.s({default:()=>l});var t=e.i(290479),n=e.i(467231),r=e.i(704255);e.i(567349);var i=e.i(111367),a=e.i(793956),o=e.i(252390),s=e.i(46621);let l=e=>{let{item:{title:l,author:u,citedByCount:c,publishedDate:d,publishedYear:h,doiUrl:p,id:f,pdfUrl:m,summary:g},editor:y}=e,{track:b}=(0,o.default)(),{mutate:x}=(0,s.useMarkStepCompletedWithTracking)(),{triggerUpload:w,isPendingUpload:k,isPendingChatbot:S}=(0,a.useUploadUrl)(),_=e=>{b(e,{id:f,doi:p,title:l,citedByCount:c})},C=k||S;return(0,t.jsxs)(i.CommandItem,{className:"p-4 flex flex-col gap-2 items-start",value:f,children:[(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("p",{className:"line-clamp-2",children:l}),(0,t.jsx)("p",{className:"text-[#666666] line-clamp-3",children:(null==u?void 0:u[0])||""})]}),g&&(0,t.jsx)("p",{className:"line-clamp-4 text-[#666666] text-xs border-l-4 pl-4",children:g}),(0,t.jsxs)("div",{className:"flex items-center w-full mt-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-6 text-xs text-text-primary",children:[(0,t.jsxs)("div",{className:"flex gap-2 items-center",children:[d&&(0,t.jsx)("p",{children:(0,n.getYear)(d)}),(0,t.jsx)("p",{children:""}),null!==c&&(0,t.jsxs)("p",{children:[c," citations"]})]}),m&&(0,t.jsxs)("a",{href:m,target:"_blank",className:" hover:text-text-primary",children:[(0,t.jsx)("span",{className:"underline",children:"PDF"}),""]}),p&&(0,t.jsxs)("a",{href:p,target:"_blank",className:" hover:text-text-primary",children:[(0,t.jsx)("span",{className:"underline",children:"DOI"}),""]})]}),(0,t.jsxs)("div",{className:"flex gap-2 ml-auto",children:[m&&(0,t.jsx)(r.Button,{isLoading:C,disabled:C,className:"text-xs",size:"xs",variant:"outline",onClick:async()=>{w({title:l,pdfUrl:m,onTrigger:()=>{_("citationAddedLibrary")}})},label:"Add to library"}),(0,t.jsx)(r.Button,{size:"xs",className:"text-xs",variant:"inverse",onClick:()=>{if(m||p){var e;_("citationAddedDocument"),x({workflowKey:"search-citation-in-note",stepKey:"insert-citation"}),y.commands.addCitation({citation:{id:f,url:null!=m?m:p,title:l,version:"v1",authors:u,summary:(null==g?void 0:g.trim())||void 0,publishedDate:d,publishedYear:null!=(e=null==h?void 0:h.toString())?e:void 0}})}},label:"Cite"})]})]})]})}},142797:e=>{"use strict";e.s({default:()=>u});var t=e.i(290479),n=e.i(168234),r=e.i(373150),i=e.i(430266),a=e.i(663018),o=e.i(252390),s=e.i(695056),l=e.i(205194);let u=e=>{let{engine:u,debouncedInput:c,editor:d,sort:h}=e,{track:p}=(0,o.default)(),{sources:f,isLoading:m}=(0,s.default)({debouncedInput:c,type:u}),g=(0,r.useMemo)(()=>f?(p("citation_menu_online_search",{query:c}),(0,i.match)(h).with("relevance",()=>f).with("descending_date",()=>f.sort((e,t)=>e.publishedDate&&t.publishedDate?(0,n.compareDesc)(new Date(e.publishedDate),new Date(t.publishedDate)):0)).with("ascending_date",()=>f.sort((e,t)=>e.publishedDate&&t.publishedDate?(0,n.compareDesc)(new Date(t.publishedDate),new Date(e.publishedDate)):0)).otherwise(()=>f)):[],[f,h]);return 0===c.trim().length?(0,t.jsx)("div",{className:"w-full flex justify-center h-[200px] items-center",children:(0,t.jsx)("p",{className:"text-text-secondary text-sm",children:"Start typing to search for citations"})}):c.trim().length<=2?(0,t.jsx)("div",{className:"w-full flex justify-center h-[200px] items-center",children:(0,t.jsx)("p",{className:"text-text-secondary text-sm",children:"Type at least 3 characters to search"})}):m?(0,t.jsx)("div",{className:"w-full flex justify-center h-[200px] items-center",children:(0,t.jsx)(a.LoadingSpinner,{variant:void 0,color:"gray"})}):c.trim().length>2&&0===g.length?(0,t.jsx)("div",{className:"w-full flex justify-center h-[200px] items-center",children:(0,t.jsx)("p",{className:"text-text-secondary text-sm",children:"No citations found"})}):g.map(e=>(0,t.jsx)(l.default,{editor:d,item:e},e.id))}},879538:e=>{"use strict";e.s({default:()=>m});var t=e.i(290479),n=e.i(238635),r=e.i(343741),i=e.i(269456),a=e.i(578018),o=e.i(360911),s=e.i(502753),l=e.i(430266),u=e.i(663018);e.i(567349);var c=e.i(111367),d=e.i(972899),h=e.i(449097),p=e.i(852951),f=e.i(814733);let m=e=>{var m,g,y;let{chatbotId:b,debouncedInput:x,editor:w}=e,{settings:k}=(0,h.useSettings)(),{data:S,isLoading:_}=f.api.library.query.useQuery({text:x,chatbotId:b,includeNotesInSearch:null!=(y=k.includeNotesInSearch)&&y},{enabled:x.trim().length>2}),{mutateAsync:C}=f.api.citations.individual.useMutation(),{data:A}=(0,p.useWorkspace)(),E=e=>{var t,n,r,i;let a=null==e?void 0:e.documentMetadata;if(!(null==a?void 0:a.doi)&&!(null==a?void 0:a.url)||!(null==a?void 0:a.authors)||!Array.isArray(null==a?void 0:a.authors))return void T(e.id);let o=null==a?void 0:a.authors,s=null!=(t=null==a?void 0:a.summary)?t:void 0;w.commands.addCitation({citation:{id:e.id,url:a.url||"https://doi.org/".concat(null==a?void 0:a.doi),title:null!=(n=null==a?void 0:a.title)?n:e.name,version:"v1",authors:o,summary:(null==s?void 0:s.trim())||void 0,publishedDate:null!=(r=null==a?void 0:a.publicationDate)?r:void 0,publishedYear:null!=(i=null==a?void 0:a.publicationYear)?i:void 0}})},T=e=>{let{from:t,to:n}=w.state.selection,r=w.state.doc.textBetween(t,n," ").search(/(\.|\?|!)(?!.*[.?!])/),i=-1!==r?t+r:n;w.commands.insertContentAt(i,[{type:"text",text:" ["},{type:"text",text:"",marks:[{type:"link",attrs:{href:"/b/".concat(e),target:"_self"}}]},{type:"text",text:"]"}])};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(c.CommandGroup,{heading:"Similar",children:[0===x.trim().length&&(0,t.jsx)("div",{className:"w-full flex justify-center py-8 items-center",children:(0,t.jsx)("p",{className:"text-text-secondary text-sm",children:"Start typing to search for citations"})}),x.trim().length>0&&x.trim().length<=2&&(0,t.jsx)("div",{className:"w-full flex justify-center py-8 items-center",children:(0,t.jsx)("p",{className:"text-text-secondary text-sm",children:"Type at least 3 characters to search"})}),_&&x.trim().length>2&&(0,t.jsx)("div",{className:"w-full flex justify-center  items-center",children:(0,t.jsx)(u.LoadingSpinner,{variant:void 0,color:"gray"})}),!_&&x.trim().length>2&&(!S||0===S.length)&&(0,t.jsx)("div",{className:"w-full flex justify-center py-8 items-center",children:(0,t.jsx)("p",{className:"text-text-secondary text-sm",children:"No citations found"})}),null==S?void 0:S.map(e=>(0,t.jsxs)(c.CommandItem,{onSelect:()=>{E(e)},className:"p-4 flex items-center gap-4",value:"".concat(e.name,"-").concat(e.id),children:[(0,t.jsx)(d.Icon,{className:"flex-shrink-0 z-10",as:(0,l.match)(e.type).with("DOCUMENT",()=>o.FileText).with("NOTE",()=>a.FilePen).with("WEBSITE",()=>s.Globe).with("IMAGE",()=>i.FileImage).with("TEXT",()=>r.ClipboardIcon).otherwise(()=>null)}),(0,t.jsx)("p",{children:e.name})]},e.id))]}),(0,t.jsx)(c.CommandGroup,{heading:"All",children:null==A||null==(g=A.entities)||null==(m=g.filter(e=>"GROUP"!==e.type&&(k.includeNotesInSearch||"NOTE"!==e.type)))?void 0:m.map(e=>{var u;return(0,t.jsxs)(c.CommandItem,{onSelect:async()=>{try{let t=await C(e.id);if(!t)return void T(e.id);E(t)}catch(t){n.captureException(t,{tags:{chatbotId:e.id}}),T(e.id)}},value:"".concat(e.name,"-").concat(e.id),className:"p-4 flex items-center gap-4",children:[(0,t.jsx)(d.Icon,{className:"flex-shrink-0 z-10",as:(0,l.match)(e.type).with("DOCUMENT",()=>o.FileText).with("NOTE",()=>a.FilePen).with("WEBSITE",()=>s.Globe).with("IMAGE",()=>i.FileImage).with("TEXT",()=>r.ClipboardIcon).otherwise(()=>null)}),(0,t.jsx)("p",{children:null!=(u=e.name)?u:"Untitled"})]},e.id)})})]})}},954615:e=>{"use strict";e.s({default:()=>y});var t=e.i(290479),n=e.i(608294),r=e.i(841742),i=e.i(180927),a=e.i(373150),o=e.i(966882),s=e.i(704255);e.i(567349);var l=e.i(111367),u=e.i(972899),c=e.i(365918),d=e.i(564620),h=e.i(46621),p=e.i(289702),f=e.i(169685),m=e.i(142797),g=e.i(879538);let y=e=>{let{chatbotId:y,editor:b}=e,{mutate:x}=(0,h.useMarkStepCompletedWithTracking)(),[w,k]=(0,a.useState)("relevance"),[S,_]=(0,a.useState)("online"),[C,A]=(0,a.useState)("exa"),[E,T]=(0,n.useAtom)(f.showCitationExtensionAtom,{store:d.globalStore}),[M,I]=(0,a.useState)(()=>{let{from:e,to:t}=b.state.selection,n=b.state.doc.textBetween(e,t," ");return null!=n?n:""}),[N]=(0,o.useDebounce)(M,400);return(0,a.useEffect)(()=>{x({workflowKey:"search-citation-in-note",stepKey:"search-citation"})},[x]),(0,a.useEffect)(()=>{let e=e=>{"Escape"===e.key&&E.pinned&&T(e=>({...e,pinned:!1}))};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[E.pinned,T]),(0,t.jsxs)("div",{className:"flex flex-col gap-1 h-[300px] w-full max-w-[44rem] mx-auto p-4 pb-0 border border-border-primary rounded-6 bg-popover shadow-shadowMedium",children:[(0,t.jsxs)("div",{className:"flex gap-4 items-center pb-3 pl-3",children:[(0,t.jsx)("p",{className:"w-fit text-sm",children:"Find citations"}),(0,t.jsxs)("div",{className:"flex items-center gap-2 ml-auto",children:[(0,t.jsxs)(c.Select,{value:S,defaultValue:"online",onValueChange:e=>_(e),children:[(0,t.jsx)(c.SelectTrigger,{className:"h-9 w-fit",children:(0,t.jsx)(c.SelectValue,{})}),(0,t.jsxs)(c.SelectContent,{className:"p-1",children:[(0,t.jsx)(c.SelectItem,{value:"library",className:"!rounded-4",children:"Library"}),(0,t.jsx)(c.SelectItem,{value:"online",className:"!rounded-4",children:"Online"})]})]}),(0,t.jsxs)(c.Select,{value:w,onValueChange:e=>k(e),children:[(0,t.jsx)(c.SelectTrigger,{className:"h-9 w-fit",children:(0,t.jsx)(c.SelectValue,{})}),(0,t.jsxs)(c.SelectContent,{className:"min-w-40 p-1",children:[(0,t.jsx)(c.SelectItem,{value:"relevance",children:"Relevance"}),(0,t.jsx)(c.SelectItem,{value:"ascending_date",children:"Oldest"}),(0,t.jsx)(c.SelectItem,{value:"descending_date",children:"Recent"})]})]}),(0,t.jsx)(s.Button,{size:"icon",variant:"ghost",className:(0,p.cn)("h-9 w-9",E.pinned&&"bg-accent text-accent-foreground"),onClick:()=>{T(e=>({...e,pinned:!e.pinned}))},children:(0,t.jsx)(u.Icon,{as:E.pinned?i.PinOff:r.Pin,className:"h-7 w-7"})})]})]}),(0,t.jsxs)(l.Command,{shouldFilter:!1,children:[(0,t.jsx)(l.CommandInput,{autoFocus:!0,value:M,onValueChange:I,placeholder:"Search"}),(0,t.jsxs)(l.CommandList,{children:["online"===S&&(0,t.jsx)(m.default,{sort:w,engine:C,debouncedInput:N,editor:b}),"library"===S&&(0,t.jsx)(g.default,{editor:b,chatbotId:y,debouncedInput:N})]})]})]})}},463186:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("corner-down-right",[["path",{d:"m15 10 5 5-5 5",key:"qqa56n"}],["path",{d:"M4 4v7a4 4 0 0 0 4 4h12",key:"z08zvw"}]])},888472:e=>{"use strict";e.s({CornerDownRight:()=>t.default});var t=e.i(463186)},425371:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("maximize-2",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]])},425683:e=>{"use strict";e.s({Maximize2:()=>t.default});var t=e.i(425371)},740375:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("pencil-line",[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]])},519927:e=>{"use strict";e.s({PencilLine:()=>t.default});var t=e.i(740375)},728205:e=>{"use strict";e.s({animationControls:()=>a});var t=e.i(777743),n=e.i(238594),r=e.i(323087);function i(e,t){[...t].reverse().forEach(r=>{let a=e.getVariant(r);a&&(0,n.setTarget)(e,a),e.variantChildren&&e.variantChildren.forEach(e=>{i(e,t)})})}function a(){let e=!1,a=new Set,o={subscribe:e=>(a.add(e),()=>void a.delete(e)),start(n,i){(0,t.invariant)(e,"controls.start() should only be called after a component has mounted. Consider calling within a useEffect hook.");let o=[];return a.forEach(e=>{o.push((0,r.animateVisualElement)(e,n,{transitionOverride:i}))}),Promise.all(o)},set:r=>((0,t.invariant)(e,"controls.set() should only be called after a component has mounted. Consider calling within a useEffect hook."),a.forEach(e=>{var t,a;t=e,Array.isArray(a=r)?i(t,a):"string"==typeof a?i(t,[a]):(0,n.setTarget)(t,a)})),stop(){a.forEach(e=>{e.values.forEach(e=>e.stop())})},mount:()=>(e=!0,()=>{e=!1,o.stop()})};return o}},772476:e=>{"use strict";e.s({useAnimationControls:()=>i});var t=e.i(881352),n=e.i(875854),r=e.i(728205);function i(){let e=(0,t.useConstant)(r.animationControls);return(0,n.useIsomorphicLayoutEffect)(e.mount,[]),e}},152831:e=>{"use strict";function t(){return(t=Object.assign.bind()).apply(null,arguments)}e.s({default:()=>t})},282528:e=>{"use strict";function t(e,t){if(null==e)return{};var n={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}e.s({default:()=>t})},53196:e=>{"use strict";e.s({default:()=>t});var t=e.i(373150).useLayoutEffect},877148:e=>{"use strict";e.s({default:()=>r});var t=e.i(373150),n=e.i(53196),r=function(e){var r=t.default.useRef(e);return(0,n.default)(function(){r.current=e}),r}},71743:e=>{"use strict";e.s({default:()=>r});var t=e.i(373150),n=function(e,t){if("function"==typeof e)return void e(t);e.current=t},r=function(e,r){var i=t.default.useRef();return t.default.useCallback(function(t){e.current=t,i.current&&n(i.current,null),i.current=r,r&&n(r,t)},[r])}},286738:e=>{"use strict";e.s({default:()=>x});var t=e.i(152831),n=e.i(282528),r=e.i(373150),i=e.i(877148),a=e.i(71743),o={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},s=function(e){Object.keys(o).forEach(function(t){e.style.setProperty(t,o[t],"important")})},l=null,u=function(e,t){var n=e.scrollHeight;return"border-box"===t.sizingStyle.boxSizing?n+t.borderSize:n-t.paddingSize},c=function(){},d=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],h=!!document.documentElement.currentStyle,p=function(e){var t=window.getComputedStyle(e);if(null===t)return null;var n=d.reduce(function(e,n){return e[n]=t[n],e},{}),r=n.boxSizing;if(""===r)return null;h&&"border-box"===r&&(n.width=parseFloat(n.width)+parseFloat(n.borderRightWidth)+parseFloat(n.borderLeftWidth)+parseFloat(n.paddingRight)+parseFloat(n.paddingLeft)+"px");var i=parseFloat(n.paddingBottom)+parseFloat(n.paddingTop),a=parseFloat(n.borderBottomWidth)+parseFloat(n.borderTopWidth);return{sizingStyle:n,paddingSize:i,borderSize:a}};function f(e,t,n){var a=(0,i.default)(n);r.useLayoutEffect(function(){var n=function(e){return a.current(e)};if(e)return e.addEventListener(t,n),function(){return e.removeEventListener(t,n)}},[])}var m=function(e,t){f(document.body,"reset",function(n){e.current.form===n.target&&t(n)})},g=function(e){f(window,"resize",e)},y=function(e){f(document.fonts,"loadingdone",e)},b=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],x=r.forwardRef(function(e,i){var o=e.cacheMeasurements,d=e.maxRows,h=e.minRows,f=e.onChange,x=void 0===f?c:f,w=e.onHeightChange,k=void 0===w?c:w,S=(0,n.default)(e,b),_=void 0!==S.value,C=r.useRef(null),A=(0,a.default)(C,i),E=r.useRef(0),T=r.useRef(),M=function(){var e=C.current,t=o&&T.current?T.current:p(e);if(t){T.current=t;var n,r,i,a,c,f,m,g,y,b,x,w=(n=e.value||e.placeholder||"x",void 0===(r=h)&&(r=1),void 0===(i=d)&&(i=1/0),l||((l=document.createElement("textarea")).setAttribute("tabindex","-1"),l.setAttribute("aria-hidden","true"),s(l)),null===l.parentNode&&document.body.appendChild(l),a=t.paddingSize,c=t.borderSize,m=(f=t.sizingStyle).boxSizing,Object.keys(f).forEach(function(e){l.style[e]=f[e]}),s(l),l.value=n,g=u(l,t),l.value=n,g=u(l,t),l.value="x",b=(y=l.scrollHeight-a)*r,"border-box"===m&&(b=b+a+c),g=Math.max(b,g),x=y*i,"border-box"===m&&(x=x+a+c),[g=Math.min(x,g),y]),S=w[0],_=w[1];E.current!==S&&(E.current=S,e.style.setProperty("height",S+"px","important"),k(S,{rowHeight:_}))}};return r.useLayoutEffect(M),m(C,function(){if(!_){var e=C.current.value;requestAnimationFrame(function(){var t=C.current;t&&e!==t.value&&M()})}}),g(M),y(M),r.createElement("textarea",(0,t.default)({},S,{onChange:function(e){_||M(),x(e)},ref:A}))})},410622:e=>{"use strict";e.s({default:()=>r});var t=e.i(290479),n=e.i(34818);let r=()=>(0,t.jsx)(n.motion.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2,ease:"easeOut"},className:"px-6 py-2",children:(0,t.jsxs)("p",{className:"text-sm text-destructive-solid flex items-center leading-5 gap-3",children:[(0,t.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.86134 2.43572C8.47216 1.78682 7.53117 1.78852 7.14433 2.43883L1.16602 12.4887C0.7695 13.1553 1.24985 14 2.02546 14H14.0314C14.8086 14 15.2887 13.1522 14.889 12.4856L8.86134 2.43572ZM7.00021 5C7.00021 4.44772 7.44793 4 8.00021 4C8.5525 4 9.00021 4.44772 9.00021 5V8C9.00021 8.55228 8.5525 9 8.00021 9C7.44793 9 7.00021 8.55228 7.00021 8V5ZM7.00021 11C7.00021 10.4477 7.44793 10 8.00021 10C8.5525 10 9.00021 10.4477 9.00021 11V12C9.00021 12.5523 8.5525 13 8.00021 13C7.44793 13 7.00021 12.5523 7.00021 12V11Z",fill:"currentColor"})}),"Chat unavailable. Well be back soon!"]})})},32055:e=>{"use strict";e.s({default:()=>f});var t=e.i(290479),n=e.i(743305),r=e.i(874133),i=e.i(243747),a=e.i(118246),o=e.i(373150),s=e.i(450807),l=e.i(476440),u=e.i(365918),c=e.i(885905),d=e.i(950347),h=e.i(449097),p=e.i(252390);let f=e=>{var f;let{mode:m}=e,{user:g}=(0,c.useAuth)(),{settings:y,updateSettings:b}=(0,h.useSettings)(),{isFreePlan:x}=(0,d.default)(),[w,k]=(0,o.useState)(!1),[S,_]=(0,a.useQueryState)("model",a.parseAsString),C="editor"===m?h.editorModels:h.allModels;(0,o.useEffect)(()=>{var e;let t=null==(e=C.find(e=>e.name===S))?void 0:e.name;t&&t!==y.modelName&&(b({...y,modelName:t}),_(null))},[S]);let A="chat"===m?y.modelName:y.editorModelName,{track:E}=(0,p.default)(),{showUpgrade:T}=(0,s.useUpgrade)(),M=(null==(f=C.find(e=>e.name===A))?void 0:f.label)||C[3].label;return(0,t.jsxs)(u.Select,{value:M,onValueChange:e=>{if(!g)return;let t=C.find(t=>t.label===e);if(t){if(!(0,n.isDefaultModel)(t.name)&&x){T("modelChange"),E("modelChangeAttemptByFree",{userId:null==g?void 0:g.id}),E("Paywall Shown",{reason:"Model Change"});return}E("chat"===m?"chat_model_change":"editor_model_change",{userId:null==g?void 0:g.id,model:e}),t&&b({...y,..."chat"===m&&{modelName:t.name},..."editor"===m&&{editorModelName:t.name}})}},onOpenChange:k,children:[(0,t.jsx)(l.ReusableTooltip,{content:"AI model",disabled:w,asChild:!0,children:(0,t.jsx)(u.SelectTrigger,{className:"flex bg-transparent focus-visible:outline-none text-start text-sm font-medium rounded-4 text-text-primary px-0",hideIcon:!0,children:"editor"===m?(0,t.jsx)(i.Settings2,{className:"h-[14px] w-[14px] rotate-90 text-text-primary"}):(0,t.jsx)(u.SelectValue,{})})}),(0,t.jsx)(u.SelectContent,{className:"w-[250px]",children:C.map((e,n)=>(0,t.jsx)(u.SelectItem,{className:"flex flex-col items-start justify-center",customIndicator:e.label===M&&(0,t.jsx)(r.Check,{className:"h-7 w-7 text-blue",strokeWidth:3}),textIndicator:(0,t.jsxs)(t.Fragment,{children:["Pro"===e.tier&&x&&(0,t.jsx)("span",{className:"text-xs text-blue ml-3 !font-semibold",children:"Pro"}),"Basic"===e.tier&&x&&(0,t.jsx)("span",{className:"text-xs text-blue ml-3 !font-semibold",children:"Basic"})]}),value:e.label,disabled:"Pro"===e.tier&&x,children:e.label},"".concat(n,"-").concat(e.label)))})]})}},872967:e=>{"use strict";e.s({default:()=>n});var t=e.i(623053);let n=()=>{let e=(0,t.useFeatureFlagEnabled)("downtime-ingest");return{isDowntime:null!=e&&e}}},514151:e=>{"use strict";e.s({AISDKError:()=>m,APICallError:()=>x,EmptyResponseBodyError:()=>_,InvalidArgumentError:()=>M,InvalidPromptError:()=>P,JSONParseError:()=>F,LoadAPIKeyError:()=>U,LoadSettingError:()=>q,NoSuchModelError:()=>Y,TypeValidationError:()=>ee,UnsupportedFunctionalityError:()=>ei,getErrorMessage:()=>C,isJSONArray:()=>eo,isJSONObject:()=>es});var t,n,r,i,a,o,s,l,u,c,d,h="vercel.ai.error",p=Symbol.for(h),f=class e extends Error{static isInstance(t){return e.hasMarker(t,h)}static hasMarker(e,t){let n=Symbol.for(t);return null!=e&&"object"==typeof e&&n in e&&"boolean"==typeof e[n]&&!0===e[n]}constructor({name:e,message:n,cause:r}){super(n),this[t]=!0,this.name=e,this.cause=r}};t=p;var m=f,g="AI_APICallError",y="vercel.ai.error.".concat(g),b=Symbol.for(y),x=class extends m{static isInstance(e){return m.hasMarker(e,y)}constructor({message:e,url:t,requestBodyValues:r,statusCode:i,responseHeaders:a,responseBody:o,cause:s,isRetryable:l=null!=i&&(408===i||409===i||429===i||i>=500),data:u}){super({name:g,message:e,cause:s}),this[n]=!0,this.url=t,this.requestBodyValues=r,this.statusCode=i,this.responseHeaders=a,this.responseBody=o,this.isRetryable=l,this.data=u}};n=b;var w="AI_EmptyResponseBodyError",k="vercel.ai.error.".concat(w),S=Symbol.for(k),_=class extends m{static isInstance(e){return m.hasMarker(e,k)}constructor({message:e="Empty response body"}={}){super({name:w,message:e}),this[r]=!0}};function C(e){return null==e?"unknown error":"string"==typeof e?e:e instanceof Error?e.message:JSON.stringify(e)}r=S;var A="AI_InvalidArgumentError",E="vercel.ai.error.".concat(A),T=Symbol.for(E),M=class extends m{static isInstance(e){return m.hasMarker(e,E)}constructor({message:e,cause:t,argument:n}){super({name:A,message:e,cause:t}),this[i]=!0,this.argument=n}};i=T;var I="AI_InvalidPromptError",N="vercel.ai.error.".concat(I),D=Symbol.for(N),P=class extends m{static isInstance(e){return m.hasMarker(e,N)}constructor({prompt:e,message:t,cause:n}){super({name:I,message:"Invalid prompt: ".concat(t),cause:n}),this[a]=!0,this.prompt=e}};a=D,Symbol.for("vercel.ai.error.".concat("AI_InvalidResponseDataError"));var R="AI_JSONParseError",O="vercel.ai.error.".concat(R),j=Symbol.for(O),F=class extends m{static isInstance(e){return m.hasMarker(e,O)}constructor({text:e,cause:t}){super({name:R,message:"JSON parsing failed: Text: ".concat(e,".\nError message: ").concat(C(t)),cause:t}),this[o]=!0,this.text=e}};o=j;var L="AI_LoadAPIKeyError",z="vercel.ai.error.".concat(L),B=Symbol.for(z),U=class extends m{static isInstance(e){return m.hasMarker(e,z)}constructor({message:e}){super({name:L,message:e}),this[s]=!0}};s=B;var H="AI_LoadSettingError",W="vercel.ai.error.".concat(H),V=Symbol.for(W),q=class extends m{static isInstance(e){return m.hasMarker(e,W)}constructor({message:e}){super({name:H,message:e}),this[l]=!0}};l=V,Symbol.for("vercel.ai.error.".concat("AI_NoContentGeneratedError"));var G="AI_NoSuchModelError",$="vercel.ai.error.".concat(G),K=Symbol.for($),Y=class extends m{static isInstance(e){return m.hasMarker(e,$)}constructor({errorName:e=G,modelId:t,modelType:n,message:r="No such ".concat(n,": ").concat(t)}){super({name:e,message:r}),this[u]=!0,this.modelId=t,this.modelType=n}};u=K,Symbol.for("vercel.ai.error.".concat("AI_TooManyEmbeddingValuesForCallError"));var X="AI_TypeValidationError",Z="vercel.ai.error.".concat(X),J=Symbol.for(Z),Q=class e extends m{static isInstance(e){return m.hasMarker(e,Z)}static wrap(t){let{value:n,cause:r}=t;return e.isInstance(r)&&r.value===n?r:new e({value:n,cause:r})}constructor({value:e,cause:t}){super({name:X,message:"Type validation failed: Value: ".concat(JSON.stringify(e),".\nError message: ").concat(C(t)),cause:t}),this[c]=!0,this.value=e}};c=J;var ee=Q,et="AI_UnsupportedFunctionalityError",en="vercel.ai.error.".concat(et),er=Symbol.for(en),ei=class extends m{static isInstance(e){return m.hasMarker(e,en)}constructor({functionality:e,message:t="'".concat(e,"' functionality not supported.")}){super({name:et,message:t}),this[d]=!0,this.functionality=e}};function ea(e){return null===e||"string"==typeof e||"number"==typeof e||"boolean"==typeof e||(Array.isArray(e)?e.every(ea):"object"==typeof e&&Object.entries(e).every(e=>{let[t,n]=e;return"string"==typeof t&&ea(n)}))}function eo(e){return Array.isArray(e)&&e.every(ea)}function es(e){return null!=e&&"object"==typeof e&&Object.entries(e).every(e=>{let[t,n]=e;return"string"==typeof t&&ea(n)})}d=er},438654:e=>{"use strict";e.s({createParser:()=>r});class t extends Error{constructor(e,t){super(e),this.name="ParseError",this.type=t.type,this.field=t.field,this.value=t.value,this.line=t.line}}function n(e){}function r(e){if("function"==typeof e)throw TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");let{onEvent:r=n,onError:i=n,onRetry:a=n,onComment:o}=e,s="",l=!0,u,c="",d="";function h(e){if(""===e)return void(c.length>0&&r({id:u,event:d||void 0,data:c.endsWith("\n")?c.slice(0,-1):c}),u=void 0,c="",d="");if(e.startsWith(":")){o&&o(e.slice(e.startsWith(": ")?2:1));return}let t=e.indexOf(":");if(-1!==t){let n=e.slice(0,t),r=" "===e[t+1]?2:1;p(n,e.slice(t+r),e);return}p(e,"",e)}function p(e,n,r){switch(e){case"event":d=n;break;case"data":c="".concat(c).concat(n,"\n");break;case"id":u=n.includes("\0")?void 0:n;break;case"retry":/^\d+$/.test(n)?a(parseInt(n,10)):i(new t('Invalid `retry` value: "'.concat(n,'"'),{type:"invalid-retry",value:n,line:r}));break;default:i(new t('Unknown field "'.concat(e.length>20?"".concat(e.slice(0,20),""):e,'"'),{type:"unknown-field",field:e,value:n,line:r}))}}return{feed:function(e){let t=l?e.replace(/^\xEF\xBB\xBF/,""):e,[n,r]=function(e){let t=[],n="",r=0;for(;r<e.length;){let i=e.indexOf("\r",r),a=e.indexOf("\n",r),o=-1;if(-1!==i&&-1!==a?o=Math.min(i,a):-1!==i?o=i:-1!==a&&(o=a),-1===o){n=e.slice(r);break}{let n=e.slice(r,o);t.push(n),"\r"===e[(r=o+1)-1]&&"\n"===e[r]&&r++}}return[t,n]}("".concat(s).concat(t));for(let e of n)h(e);s=r,l=!1},reset:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s&&e.consume&&h(s),l=!0,u=void 0,c="",d="",s=""}}}},703953:e=>{"use strict";e.s({EventSourceParserStream:()=>n});var t=e.i(438654);class n extends TransformStream{constructor({onError:e,onRetry:n,onComment:r}={}){let i;super({start(a){i=(0,t.createParser)({onEvent:e=>{a.enqueue(e)},onError(t){"terminate"===e?a.error(t):"function"==typeof e&&e(t)},onRetry:n,onComment:r})},transform(e){i.feed(e)}})}}},168812:e=>{"use strict";e.s({getDefaultOptions:()=>r,ignoreOverride:()=>t});let t=Symbol("Let zodToJsonSchema decide on which parser to use"),n={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref",openAiAnyTypeName:"OpenAiAnyType"},r=e=>"string"==typeof e?{...n,name:e}:{...n,...e}},563130:e=>{"use strict";e.s({getRefs:()=>n});var t=e.i(168812);let n=e=>{let n=(0,t.getDefaultOptions)(e),r=void 0!==n.name?[...n.basePath,n.definitionPath,n.name]:n.basePath;return{...n,flags:{hasReferencedOpenAiAnyType:!1},currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(n.definitions).map(e=>{let[t,r]=e;return[r._def,{def:r._def,path:[...n.basePath,n.definitionPath,t],jsonSchema:void 0}]}))}}},702014:e=>{"use strict";function t(e,t,n,r){(null==r?void 0:r.errorMessages)&&n&&(e.errorMessage={...e.errorMessage,[t]:n})}function n(e,n,r,i,a){e[n]=r,t(e,n,i,a)}e.s({addErrorMessage:()=>t,setResponseValueAndErrors:()=>n})},576993:e=>{"use strict";e.s({getRelativePath:()=>t});let t=(e,t)=>{let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];n++);return[(e.length-n).toString(),...t.slice(n)].join("/")}},682833:e=>{"use strict";e.s({parseAnyDef:()=>n});var t=e.i(576993);function n(e){if("openAi"!==e.target)return{};let n=[...e.basePath,e.definitionPath,e.openAiAnyTypeName];return e.flags.hasReferencedOpenAiAnyType=!0,{$ref:"relative"===e.$refStrategy?(0,t.getRelativePath)(n,e.currentPath):n.join("/")}}},441269:e=>{"use strict";e.s({parseArrayDef:()=>i});var t=e.i(562667),n=e.i(702014),r=e.i(649601);function i(e,i){var a,o,s;let l={type:"array"};return(null==(a=e.type)?void 0:a._def)&&(null==(s=e.type)||null==(o=s._def)?void 0:o.typeName)!==t.ZodFirstPartyTypeKind.ZodAny&&(l.items=(0,r.parseDef)(e.type._def,{...i,currentPath:[...i.currentPath,"items"]})),e.minLength&&(0,n.setResponseValueAndErrors)(l,"minItems",e.minLength.value,e.minLength.message,i),e.maxLength&&(0,n.setResponseValueAndErrors)(l,"maxItems",e.maxLength.value,e.maxLength.message,i),e.exactLength&&((0,n.setResponseValueAndErrors)(l,"minItems",e.exactLength.value,e.exactLength.message,i),(0,n.setResponseValueAndErrors)(l,"maxItems",e.exactLength.value,e.exactLength.message,i)),l}},606981:e=>{"use strict";e.s({parseBigintDef:()=>n});var t=e.i(702014);function n(e,n){let r={type:"integer",format:"int64"};if(!e.checks)return r;for(let i of e.checks)switch(i.kind){case"min":"jsonSchema7"===n.target?i.inclusive?(0,t.setResponseValueAndErrors)(r,"minimum",i.value,i.message,n):(0,t.setResponseValueAndErrors)(r,"exclusiveMinimum",i.value,i.message,n):(i.inclusive||(r.exclusiveMinimum=!0),(0,t.setResponseValueAndErrors)(r,"minimum",i.value,i.message,n));break;case"max":"jsonSchema7"===n.target?i.inclusive?(0,t.setResponseValueAndErrors)(r,"maximum",i.value,i.message,n):(0,t.setResponseValueAndErrors)(r,"exclusiveMaximum",i.value,i.message,n):(i.inclusive||(r.exclusiveMaximum=!0),(0,t.setResponseValueAndErrors)(r,"maximum",i.value,i.message,n));break;case"multipleOf":(0,t.setResponseValueAndErrors)(r,"multipleOf",i.value,i.message,n)}return r}},586294:e=>{"use strict";function t(){return{type:"boolean"}}e.s({parseBooleanDef:()=>t})},140871:e=>{"use strict";e.s({parseBrandedDef:()=>n});var t=e.i(649601);function n(e,n){return(0,t.parseDef)(e.type._def,n)}},298438:e=>{"use strict";e.s({parseCatchDef:()=>n});var t=e.i(649601);let n=(e,n)=>(0,t.parseDef)(e.innerType._def,n)},203705:e=>{"use strict";e.s({parseDateDef:()=>function e(t,r,i){let a=null!=i?i:r.dateStrategy;if(Array.isArray(a))return{anyOf:a.map((n,i)=>e(t,r,n))};switch(a){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return n(t,r)}}});var t=e.i(702014);let n=(e,n)=>{let r={type:"integer",format:"unix-time"};if("openApi3"===n.target)return r;for(let i of e.checks)switch(i.kind){case"min":(0,t.setResponseValueAndErrors)(r,"minimum",i.value,i.message,n);break;case"max":(0,t.setResponseValueAndErrors)(r,"maximum",i.value,i.message,n)}return r}},862932:e=>{"use strict";e.s({parseDefaultDef:()=>n});var t=e.i(649601);function n(e,n){return{...(0,t.parseDef)(e.innerType._def,n),default:e.defaultValue()}}},20325:e=>{"use strict";e.s({parseEffectsDef:()=>r});var t=e.i(649601),n=e.i(682833);function r(e,r){return"input"===r.effectStrategy?(0,t.parseDef)(e.schema._def,r):(0,n.parseAnyDef)(r)}},695589:e=>{"use strict";function t(e){return{type:"string",enum:Array.from(e.values)}}e.s({parseEnumDef:()=>t})},236562:e=>{"use strict";e.s({parseIntersectionDef:()=>n});var t=e.i(649601);function n(e,n){let r=[(0,t.parseDef)(e.left._def,{...n,currentPath:[...n.currentPath,"allOf","0"]}),(0,t.parseDef)(e.right._def,{...n,currentPath:[...n.currentPath,"allOf","1"]})].filter(e=>!!e),i="jsonSchema2019-09"===n.target?{unevaluatedProperties:!1}:void 0,a=[];return r.forEach(e=>{if((!("type"in e)||"string"!==e.type)&&"allOf"in e)a.push(...e.allOf),void 0===e.unevaluatedProperties&&(i=void 0);else{let t=e;if("additionalProperties"in e&&!1===e.additionalProperties){let{additionalProperties:n,...r}=e;t=r}else i=void 0;a.push(t)}}),a.length?{allOf:a,...i}:void 0}},76205:e=>{"use strict";function t(e,t){let n=typeof e.value;return"bigint"!==n&&"number"!==n&&"boolean"!==n&&"string"!==n?{type:Array.isArray(e.value)?"array":"object"}:"openApi3"===t.target?{type:"bigint"===n?"integer":n,enum:[e.value]}:{type:"bigint"===n?"integer":n,const:e.value}}e.s({parseLiteralDef:()=>t})},229559:e=>{"use strict";let t;e.s({parseStringDef:()=>i});var n=e.i(702014);let r={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(void 0===t&&(t=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),t),ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function i(e,t){let i={type:"string"};if(e.checks)for(let o of e.checks)switch(o.kind){case"min":(0,n.setResponseValueAndErrors)(i,"minLength","number"==typeof i.minLength?Math.max(i.minLength,o.value):o.value,o.message,t);break;case"max":(0,n.setResponseValueAndErrors)(i,"maxLength","number"==typeof i.maxLength?Math.min(i.maxLength,o.value):o.value,o.message,t);break;case"email":switch(t.emailStrategy){case"format:email":s(i,"email",o.message,t);break;case"format:idn-email":s(i,"idn-email",o.message,t);break;case"pattern:zod":l(i,r.email,o.message,t)}break;case"url":s(i,"uri",o.message,t);break;case"uuid":s(i,"uuid",o.message,t);break;case"regex":l(i,o.regex,o.message,t);break;case"cuid":l(i,r.cuid,o.message,t);break;case"cuid2":l(i,r.cuid2,o.message,t);break;case"startsWith":l(i,RegExp("^".concat(a(o.value,t))),o.message,t);break;case"endsWith":l(i,RegExp("".concat(a(o.value,t),"$")),o.message,t);break;case"datetime":s(i,"date-time",o.message,t);break;case"date":s(i,"date",o.message,t);break;case"time":s(i,"time",o.message,t);break;case"duration":s(i,"duration",o.message,t);break;case"length":(0,n.setResponseValueAndErrors)(i,"minLength","number"==typeof i.minLength?Math.max(i.minLength,o.value):o.value,o.message,t),(0,n.setResponseValueAndErrors)(i,"maxLength","number"==typeof i.maxLength?Math.min(i.maxLength,o.value):o.value,o.message,t);break;case"includes":l(i,RegExp(a(o.value,t)),o.message,t);break;case"ip":"v6"!==o.version&&s(i,"ipv4",o.message,t),"v4"!==o.version&&s(i,"ipv6",o.message,t);break;case"base64url":l(i,r.base64url,o.message,t);break;case"jwt":l(i,r.jwt,o.message,t);break;case"cidr":"v6"!==o.version&&l(i,r.ipv4Cidr,o.message,t),"v4"!==o.version&&l(i,r.ipv6Cidr,o.message,t);break;case"emoji":l(i,r.emoji(),o.message,t);break;case"ulid":l(i,r.ulid,o.message,t);break;case"base64":switch(t.base64Strategy){case"format:binary":s(i,"binary",o.message,t);break;case"contentEncoding:base64":(0,n.setResponseValueAndErrors)(i,"contentEncoding","base64",o.message,t);break;case"pattern:zod":l(i,r.base64,o.message,t)}break;case"nanoid":l(i,r.nanoid,o.message,t)}return i}function a(e,t){return"escape"===t.patternStrategy?function(e){let t="";for(let n=0;n<e.length;n++)o.has(e[n])||(t+="\\"),t+=e[n];return t}(e):e}let o=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function s(e,t,r,i){var a;e.format||(null==(a=e.anyOf)?void 0:a.some(e=>e.format))?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&i.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,0===Object.keys(e.errorMessage).length&&delete e.errorMessage)),e.anyOf.push({format:t,...r&&i.errorMessages&&{errorMessage:{format:r}}})):(0,n.setResponseValueAndErrors)(e,"format",t,r,i)}function l(e,t,r,i){var a;e.pattern||(null==(a=e.allOf)?void 0:a.some(e=>e.pattern))?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&i.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,0===Object.keys(e.errorMessage).length&&delete e.errorMessage)),e.allOf.push({pattern:u(t,i),...r&&i.errorMessages&&{errorMessage:{pattern:r}}})):(0,n.setResponseValueAndErrors)(e,"pattern",u(t,i),r,i)}function u(e,t){if(!t.applyRegexFlags||!e.flags)return e.source;let n={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},r=n.i?e.source.toLowerCase():e.source,i="",a=!1,o=!1,s=!1;for(let e=0;e<r.length;e++){if(a){i+=r[e],a=!1;continue}if(n.i){if(o){if(r[e].match(/[a-z]/)){var l;s?(i+=r[e],i+="".concat(r[e-2],"-").concat(r[e]).toUpperCase(),s=!1):"-"===r[e+1]&&(null==(l=r[e+2])?void 0:l.match(/[a-z]/))?(i+=r[e],s=!0):i+="".concat(r[e]).concat(r[e].toUpperCase());continue}}else if(r[e].match(/[a-z]/)){i+="[".concat(r[e]).concat(r[e].toUpperCase(),"]");continue}}if(n.m){if("^"===r[e]){i+="(^|(?<=[\r\n]))";continue}else if("$"===r[e]){i+="($|(?=[\r\n]))";continue}}if(n.s&&"."===r[e]){i+=o?"".concat(r[e],"\r\n"):"[".concat(r[e],"\r\n]");continue}i+=r[e],"\\"===r[e]?a=!0:o&&"]"===r[e]?o=!1:o||"["!==r[e]||(o=!0)}try{new RegExp(i)}catch(n){return console.warn("Could not convert regex pattern at ".concat(t.currentPath.join("/")," to a flag-independent form! Falling back to the flag-ignorant source")),e.source}return i}},330140:e=>{"use strict";e.s({parseRecordDef:()=>o});var t=e.i(562667),n=e.i(649601),r=e.i(229559),i=e.i(140871),a=e.i(682833);function o(e,o){var s,l,u,c,d,h,p;if("openAi"===o.target&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),"openApi3"===o.target&&(null==(s=e.keyType)?void 0:s._def.typeName)===t.ZodFirstPartyTypeKind.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((t,r)=>{var i;return{...t,[r]:null!=(i=(0,n.parseDef)(e.valueType._def,{...o,currentPath:[...o.currentPath,"properties",r]}))?i:(0,a.parseAnyDef)(o)}},{}),additionalProperties:o.rejectedAdditionalProperties};let f={type:"object",additionalProperties:null!=(p=(0,n.parseDef)(e.valueType._def,{...o,currentPath:[...o.currentPath,"additionalProperties"]}))?p:o.allowedAdditionalProperties};if("openApi3"===o.target)return f;if((null==(l=e.keyType)?void 0:l._def.typeName)===t.ZodFirstPartyTypeKind.ZodString&&(null==(u=e.keyType._def.checks)?void 0:u.length)){let{type:t,...n}=(0,r.parseStringDef)(e.keyType._def,o);return{...f,propertyNames:n}}if((null==(c=e.keyType)?void 0:c._def.typeName)===t.ZodFirstPartyTypeKind.ZodEnum)return{...f,propertyNames:{enum:e.keyType._def.values}};if((null==(d=e.keyType)?void 0:d._def.typeName)===t.ZodFirstPartyTypeKind.ZodBranded&&e.keyType._def.type._def.typeName===t.ZodFirstPartyTypeKind.ZodString&&(null==(h=e.keyType._def.type._def.checks)?void 0:h.length)){let{type:t,...n}=(0,i.parseBrandedDef)(e.keyType._def,o);return{...f,propertyNames:n}}return f}},459175:e=>{"use strict";e.s({parseMapDef:()=>i});var t=e.i(649601),n=e.i(330140),r=e.i(682833);function i(e,i){return"record"===i.mapStrategy?(0,n.parseRecordDef)(e,i):{type:"array",maxItems:125,items:{type:"array",items:[(0,t.parseDef)(e.keyType._def,{...i,currentPath:[...i.currentPath,"items","items","0"]})||(0,r.parseAnyDef)(i),(0,t.parseDef)(e.valueType._def,{...i,currentPath:[...i.currentPath,"items","items","1"]})||(0,r.parseAnyDef)(i)],minItems:2,maxItems:2}}}},730814:e=>{"use strict";function t(e){let t=e.values,n=Object.keys(e.values).filter(e=>"number"!=typeof t[t[e]]).map(e=>t[e]),r=Array.from(new Set(n.map(e=>typeof e)));return{type:1===r.length?"string"===r[0]?"string":"number":["string","number"],enum:n}}e.s({parseNativeEnumDef:()=>t})},140144:e=>{"use strict";e.s({parseNeverDef:()=>n});var t=e.i(682833);function n(e){return"openAi"===e.target?void 0:{not:(0,t.parseAnyDef)({...e,currentPath:[...e.currentPath,"not"]})}}},478387:e=>{"use strict";function t(e){return"openApi3"===e.target?{enum:["null"],nullable:!0}:{type:"null"}}e.s({parseNullDef:()=>t})},623610:e=>{"use strict";e.s({parseUnionDef:()=>r,primitiveMappings:()=>n});var t=e.i(649601);let n={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function r(e,t){if("openApi3"===t.target)return i(e,t);let r=e.options instanceof Map?Array.from(e.options.values()):e.options;if(r.every(e=>e._def.typeName in n&&(!e._def.checks||!e._def.checks.length))){let e=r.reduce((e,t)=>{let r=n[t._def.typeName];return r&&!e.includes(r)?[...e,r]:e},[]);return{type:e.length>1?e:e[0]}}if(r.every(e=>"ZodLiteral"===e._def.typeName&&!e.description)){let e=r.reduce((e,t)=>{let n=typeof t._def.value;switch(n){case"string":case"number":case"boolean":return[...e,n];case"bigint":return[...e,"integer"];case"object":if(null===t._def.value)return[...e,"null"];default:return e}},[]);if(e.length===r.length){let t=e.filter((e,t,n)=>n.indexOf(e)===t);return{type:t.length>1?t:t[0],enum:r.reduce((e,t)=>e.includes(t._def.value)?e:[...e,t._def.value],[])}}}else if(r.every(e=>"ZodEnum"===e._def.typeName))return{type:"string",enum:r.reduce((e,t)=>[...e,...t._def.values.filter(t=>!e.includes(t))],[])};return i(e,t)}let i=(e,n)=>{let r=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((e,r)=>(0,t.parseDef)(e._def,{...n,currentPath:[...n.currentPath,"anyOf","".concat(r)]})).filter(e=>!!e&&(!n.strictUnions||"object"==typeof e&&Object.keys(e).length>0));return r.length?{anyOf:r}:void 0}},73635:e=>{"use strict";e.s({parseNullableDef:()=>r});var t=e.i(649601),n=e.i(623610);function r(e,r){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return"openApi3"===r.target?{type:n.primitiveMappings[e.innerType._def.typeName],nullable:!0}:{type:[n.primitiveMappings[e.innerType._def.typeName],"null"]};if("openApi3"===r.target){let n=(0,t.parseDef)(e.innerType._def,{...r,currentPath:[...r.currentPath]});return n&&"$ref"in n?{allOf:[n],nullable:!0}:n&&{...n,nullable:!0}}let i=(0,t.parseDef)(e.innerType._def,{...r,currentPath:[...r.currentPath,"anyOf","0"]});return i&&{anyOf:[i,{type:"null"}]}}},538034:e=>{"use strict";e.s({parseNumberDef:()=>n});var t=e.i(702014);function n(e,n){let r={type:"number"};if(!e.checks)return r;for(let i of e.checks)switch(i.kind){case"int":r.type="integer",(0,t.addErrorMessage)(r,"type",i.message,n);break;case"min":"jsonSchema7"===n.target?i.inclusive?(0,t.setResponseValueAndErrors)(r,"minimum",i.value,i.message,n):(0,t.setResponseValueAndErrors)(r,"exclusiveMinimum",i.value,i.message,n):(i.inclusive||(r.exclusiveMinimum=!0),(0,t.setResponseValueAndErrors)(r,"minimum",i.value,i.message,n));break;case"max":"jsonSchema7"===n.target?i.inclusive?(0,t.setResponseValueAndErrors)(r,"maximum",i.value,i.message,n):(0,t.setResponseValueAndErrors)(r,"exclusiveMaximum",i.value,i.message,n):(i.inclusive||(r.exclusiveMaximum=!0),(0,t.setResponseValueAndErrors)(r,"maximum",i.value,i.message,n));break;case"multipleOf":(0,t.setResponseValueAndErrors)(r,"multipleOf",i.value,i.message,n)}return r}},239150:e=>{"use strict";e.s({parseObjectDef:()=>n});var t=e.i(649601);function n(e,n){let r="openAi"===n.target,i={type:"object",properties:{}},a=[],o=e.shape();for(let e in o){let s=o[e];if(void 0===s||void 0===s._def)continue;let l=function(e){try{return e.isOptional()}catch(e){return!0}}(s);l&&r&&("ZodOptional"===s._def.typeName&&(s=s._def.innerType),s.isNullable()||(s=s.nullable()),l=!1);let u=(0,t.parseDef)(s._def,{...n,currentPath:[...n.currentPath,"properties",e],propertyPath:[...n.currentPath,"properties",e]});void 0!==u&&(i.properties[e]=u,l||a.push(e))}a.length&&(i.required=a);let s=function(e,n){if("ZodNever"!==e.catchall._def.typeName)return(0,t.parseDef)(e.catchall._def,{...n,currentPath:[...n.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return n.allowedAdditionalProperties;case"strict":return n.rejectedAdditionalProperties;case"strip":return"strict"===n.removeAdditionalStrategy?n.allowedAdditionalProperties:n.rejectedAdditionalProperties}}(e,n);return void 0!==s&&(i.additionalProperties=s),i}},253121:e=>{"use strict";e.s({parseOptionalDef:()=>r});var t=e.i(649601),n=e.i(682833);let r=(e,r)=>{var i;if(r.currentPath.toString()===(null==(i=r.propertyPath)?void 0:i.toString()))return(0,t.parseDef)(e.innerType._def,r);let a=(0,t.parseDef)(e.innerType._def,{...r,currentPath:[...r.currentPath,"anyOf","1"]});return a?{anyOf:[{not:(0,n.parseAnyDef)(r)},a]}:(0,n.parseAnyDef)(r)}},716926:e=>{"use strict";e.s({parsePipelineDef:()=>n});var t=e.i(649601);let n=(e,n)=>{if("input"===n.pipeStrategy)return(0,t.parseDef)(e.in._def,n);if("output"===n.pipeStrategy)return(0,t.parseDef)(e.out._def,n);let r=(0,t.parseDef)(e.in._def,{...n,currentPath:[...n.currentPath,"allOf","0"]}),i=(0,t.parseDef)(e.out._def,{...n,currentPath:[...n.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,i].filter(e=>void 0!==e)}}},347583:e=>{"use strict";e.s({parsePromiseDef:()=>n});var t=e.i(649601);function n(e,n){return(0,t.parseDef)(e.type._def,n)}},336787:e=>{"use strict";e.s({parseSetDef:()=>r});var t=e.i(702014),n=e.i(649601);function r(e,r){let i={type:"array",uniqueItems:!0,items:(0,n.parseDef)(e.valueType._def,{...r,currentPath:[...r.currentPath,"items"]})};return e.minSize&&(0,t.setResponseValueAndErrors)(i,"minItems",e.minSize.value,e.minSize.message,r),e.maxSize&&(0,t.setResponseValueAndErrors)(i,"maxItems",e.maxSize.value,e.maxSize.message,r),i}},347288:e=>{"use strict";e.s({parseTupleDef:()=>n});var t=e.i(649601);function n(e,n){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((e,r)=>(0,t.parseDef)(e._def,{...n,currentPath:[...n.currentPath,"items","".concat(r)]})).reduce((e,t)=>void 0===t?e:[...e,t],[]),additionalItems:(0,t.parseDef)(e.rest._def,{...n,currentPath:[...n.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((e,r)=>(0,t.parseDef)(e._def,{...n,currentPath:[...n.currentPath,"items","".concat(r)]})).reduce((e,t)=>void 0===t?e:[...e,t],[])}}},94340:e=>{"use strict";e.s({parseUndefinedDef:()=>n});var t=e.i(682833);function n(e){return{not:(0,t.parseAnyDef)(e)}}},899058:e=>{"use strict";e.s({parseUnknownDef:()=>n});var t=e.i(682833);function n(e){return(0,t.parseAnyDef)(e)}},3:e=>{"use strict";e.s({parseReadonlyDef:()=>n});var t=e.i(649601);let n=(e,n)=>(0,t.parseDef)(e.innerType._def,n)},688151:e=>{"use strict";e.s({selectParser:()=>P});var t=e.i(562667),n=e.i(682833),r=e.i(441269),i=e.i(606981),a=e.i(586294),o=e.i(140871),s=e.i(298438),l=e.i(203705),u=e.i(862932),c=e.i(20325),d=e.i(695589),h=e.i(236562),p=e.i(76205),f=e.i(459175),m=e.i(730814),g=e.i(140144),y=e.i(478387),b=e.i(73635),x=e.i(538034),w=e.i(239150),k=e.i(253121),S=e.i(716926),_=e.i(347583),C=e.i(330140),A=e.i(336787),E=e.i(229559),T=e.i(347288),M=e.i(94340),I=e.i(623610),N=e.i(899058),D=e.i(3);let P=(e,P,R)=>{switch(P){case t.ZodFirstPartyTypeKind.ZodString:return(0,E.parseStringDef)(e,R);case t.ZodFirstPartyTypeKind.ZodNumber:return(0,x.parseNumberDef)(e,R);case t.ZodFirstPartyTypeKind.ZodObject:return(0,w.parseObjectDef)(e,R);case t.ZodFirstPartyTypeKind.ZodBigInt:return(0,i.parseBigintDef)(e,R);case t.ZodFirstPartyTypeKind.ZodBoolean:return(0,a.parseBooleanDef)();case t.ZodFirstPartyTypeKind.ZodDate:return(0,l.parseDateDef)(e,R);case t.ZodFirstPartyTypeKind.ZodUndefined:return(0,M.parseUndefinedDef)(R);case t.ZodFirstPartyTypeKind.ZodNull:return(0,y.parseNullDef)(R);case t.ZodFirstPartyTypeKind.ZodArray:return(0,r.parseArrayDef)(e,R);case t.ZodFirstPartyTypeKind.ZodUnion:case t.ZodFirstPartyTypeKind.ZodDiscriminatedUnion:return(0,I.parseUnionDef)(e,R);case t.ZodFirstPartyTypeKind.ZodIntersection:return(0,h.parseIntersectionDef)(e,R);case t.ZodFirstPartyTypeKind.ZodTuple:return(0,T.parseTupleDef)(e,R);case t.ZodFirstPartyTypeKind.ZodRecord:return(0,C.parseRecordDef)(e,R);case t.ZodFirstPartyTypeKind.ZodLiteral:return(0,p.parseLiteralDef)(e,R);case t.ZodFirstPartyTypeKind.ZodEnum:return(0,d.parseEnumDef)(e);case t.ZodFirstPartyTypeKind.ZodNativeEnum:return(0,m.parseNativeEnumDef)(e);case t.ZodFirstPartyTypeKind.ZodNullable:return(0,b.parseNullableDef)(e,R);case t.ZodFirstPartyTypeKind.ZodOptional:return(0,k.parseOptionalDef)(e,R);case t.ZodFirstPartyTypeKind.ZodMap:return(0,f.parseMapDef)(e,R);case t.ZodFirstPartyTypeKind.ZodSet:return(0,A.parseSetDef)(e,R);case t.ZodFirstPartyTypeKind.ZodLazy:return()=>e.getter()._def;case t.ZodFirstPartyTypeKind.ZodPromise:return(0,_.parsePromiseDef)(e,R);case t.ZodFirstPartyTypeKind.ZodNaN:case t.ZodFirstPartyTypeKind.ZodNever:return(0,g.parseNeverDef)(R);case t.ZodFirstPartyTypeKind.ZodEffects:return(0,c.parseEffectsDef)(e,R);case t.ZodFirstPartyTypeKind.ZodAny:return(0,n.parseAnyDef)(R);case t.ZodFirstPartyTypeKind.ZodUnknown:return(0,N.parseUnknownDef)(R);case t.ZodFirstPartyTypeKind.ZodDefault:return(0,u.parseDefaultDef)(e,R);case t.ZodFirstPartyTypeKind.ZodBranded:return(0,o.parseBrandedDef)(e,R);case t.ZodFirstPartyTypeKind.ZodReadonly:return(0,D.parseReadonlyDef)(e,R);case t.ZodFirstPartyTypeKind.ZodCatch:return(0,s.parseCatchDef)(e,R);case t.ZodFirstPartyTypeKind.ZodPipeline:return(0,S.parsePipelineDef)(e,R);case t.ZodFirstPartyTypeKind.ZodFunction:case t.ZodFirstPartyTypeKind.ZodVoid:case t.ZodFirstPartyTypeKind.ZodSymbol:default:return}}},649601:e=>{"use strict";e.s({parseDef:()=>function e(r,i){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],l=i.seen.get(r);if(i.override){var u;let e=null==(u=i.override)?void 0:u.call(i,r,i,l,s);if(e!==t.ignoreOverride)return e}if(l&&!s){let e=a(l,i);if(void 0!==e)return e}let c={def:r,path:i.currentPath,jsonSchema:void 0};i.seen.set(r,c);let d=(0,n.selectParser)(r,r.typeName,i),h="function"==typeof d?e(d(),i):d;if(h&&o(r,i,h),i.postProcess){let e=i.postProcess(h,r,i);return c.jsonSchema=h,e}return c.jsonSchema=h,h}});var t=e.i(168812),n=e.i(688151),r=e.i(576993),i=e.i(682833);let a=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:(0,r.getRelativePath)(t.currentPath,e.path)};case"none":case"seen":if(e.path.length<t.currentPath.length&&e.path.every((e,n)=>t.currentPath[n]===e))return console.warn("Recursive reference detected at ".concat(t.currentPath.join("/"),"! Defaulting to any")),(0,i.parseAnyDef)(t);return"seen"===t.$refStrategy?(0,i.parseAnyDef)(t):void 0}},o=(e,t,n)=>(e.description&&(n.description=e.description,t.markdownDescription&&(n.markdownDescription=e.description)),n)},222864:e=>{"use strict";e.s({})},311243:e=>{"use strict";e.s({zodToJsonSchema:()=>i});var t=e.i(649601),n=e.i(563130),r=e.i(682833);let i=(e,i)=>{var a;let o=(0,n.getRefs)(i),s="object"==typeof i&&i.definitions?Object.entries(i.definitions).reduce((e,n)=>{var i;let[a,s]=n;return{...e,[a]:null!=(i=(0,t.parseDef)(s._def,{...o,currentPath:[...o.basePath,o.definitionPath,a]},!0))?i:(0,r.parseAnyDef)(o)}},{}):void 0,l="string"==typeof i?i:(null==i?void 0:i.nameStrategy)==="title"||null==i?void 0:i.name,u=null!=(a=(0,t.parseDef)(e._def,void 0===l?o:{...o,currentPath:[...o.basePath,o.definitionPath,l]},!1))?a:(0,r.parseAnyDef)(o),c="object"==typeof i&&void 0!==i.name&&"title"===i.nameStrategy?i.name:void 0;void 0!==c&&(u.title=c),o.flags.hasReferencedOpenAiAnyType&&(s||(s={}),s[o.openAiAnyTypeName]||(s[o.openAiAnyTypeName]={type:["string","number","integer","boolean","array","null"],items:{$ref:"relative"===o.$refStrategy?"1":[...o.basePath,o.definitionPath,o.openAiAnyTypeName].join("/")}}));let d=void 0===l?s?{...u,[o.definitionPath]:s}:u:{$ref:[..."relative"===o.$refStrategy?[]:o.basePath,o.definitionPath,l].join("/"),[o.definitionPath]:{...s,[l]:u}};return"jsonSchema7"===o.target?d.$schema="http://json-schema.org/draft-07/schema#":("jsonSchema2019-09"===o.target||"openAi"===o.target)&&(d.$schema="https://json-schema.org/draft/2019-09/schema#"),"openAi"===o.target&&("anyOf"in d||"oneOf"in d||"allOf"in d||"type"in d&&Array.isArray(d.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),d}},805663:e=>{"use strict";e.s({default:()=>t}),e.i(168812),e.i(563130),e.i(702014),e.i(576993),e.i(649601),e.i(222864),e.i(682833),e.i(441269),e.i(606981),e.i(586294),e.i(140871),e.i(298438),e.i(203705),e.i(862932),e.i(20325),e.i(695589),e.i(236562),e.i(76205),e.i(459175),e.i(730814),e.i(140144),e.i(478387),e.i(73635),e.i(538034),e.i(239150),e.i(253121),e.i(716926),e.i(347583),e.i(3),e.i(330140),e.i(336787),e.i(229559),e.i(347288),e.i(94340),e.i(623610),e.i(899058),e.i(688151);let t=e.i(311243).zodToJsonSchema},943861:e=>{"use strict";e.s({}),e.i(168812),e.i(563130),e.i(702014),e.i(576993),e.i(649601),e.i(222864),e.i(682833),e.i(441269),e.i(606981),e.i(586294),e.i(140871),e.i(298438),e.i(203705),e.i(862932),e.i(20325),e.i(695589),e.i(236562),e.i(76205),e.i(459175),e.i(730814),e.i(140144),e.i(478387),e.i(73635),e.i(538034),e.i(239150),e.i(253121),e.i(716926),e.i(347583),e.i(3),e.i(330140),e.i(336787),e.i(229559),e.i(347288),e.i(94340),e.i(623610),e.i(899058),e.i(688151),e.i(311243),e.i(805663)},279085:e=>{"use strict";e.s({asSchema:()=>U,combineHeaders:()=>s,convertBase64ToUint8Array:()=>V,convertUint8ArrayToBase64:()=>q,createEventSourceResponseHandler:()=>F,createIdGenerator:()=>d,createJsonErrorResponseHandler:()=>j,createJsonResponseHandler:()=>L,delay:()=>l,dynamicTool:()=>R,generateId:()=>h,getErrorMessage:()=>p,getFromApi:()=>b,isAbortError:()=>f,isUrlSupported:()=>x,jsonSchema:()=>B,loadOptionalSetting:()=>w,parseJsonEventStream:()=>I,postJsonToApi:()=>N,resolve:()=>O,safeParseJSON:()=>M,safeValidateTypes:()=>E,tool:()=>P,validateTypes:()=>A,withoutTrailingSlash:()=>G});var t=e.i(227541),n=e.i(514151),r=e.i(703953),i=e.i(152450),a=e.i(297526);e.i(943861);var o=e.i(805663);function s(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((e,t)=>({...e,...null!=t?t:{}}),{})}async function l(e,t){if(null==e)return Promise.resolve();let n=null==t?void 0:t.abortSignal;return new Promise((t,r)=>{if(null==n?void 0:n.aborted)return void r(u());let i=setTimeout(()=>{a(),t()},e),a=()=>{clearTimeout(i),null==n||n.removeEventListener("abort",o)},o=()=>{a(),r(u())};null==n||n.addEventListener("abort",o)})}function u(){return new DOMException("Delay was aborted","AbortError")}function c(e){return Object.fromEntries([...e.headers])}var d=function(){let{prefix:e,size:t=16,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:i="-"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=()=>{let e=r.length,n=Array(t);for(let i=0;i<t;i++)n[i]=r[Math.random()*e|0];return n.join("")};if(null==e)return a;if(r.includes(i))throw new n.InvalidArgumentError({argument:"separator",message:'The separator "'.concat(i,'" must not be part of the alphabet "').concat(r,'".')});return()=>"".concat(e).concat(i).concat(a())},h=d();function p(e){return null==e?"unknown error":"string"==typeof e?e:e instanceof Error?e.message:JSON.stringify(e)}function f(e){return(e instanceof Error||e instanceof DOMException)&&("AbortError"===e.name||"ResponseAborted"===e.name||"TimeoutError"===e.name)}var m=["fetch failed","failed to fetch"];function g(e){let{error:t,url:r,requestBodyValues:i}=e;if(f(t))return t;if(t instanceof TypeError&&m.includes(t.message.toLowerCase())){let e=t.cause;if(null!=e)return new n.APICallError({message:"Cannot connect to API: ".concat(e.message),cause:e,url:r,requestBodyValues:i,isRetryable:!0})}return t}function y(e){return Object.fromEntries(Object.entries(e).filter(e=>{let[t,n]=e;return null!=n}))}var b=async e=>{let{url:t,headers:r={},successfulResponseHandler:i,failedResponseHandler:a,abortSignal:o,fetch:s=globalThis.fetch}=e;try{let e=await s(t,{method:"GET",headers:y(r),signal:o}),l=c(e);if(!e.ok){let r;try{r=await a({response:e,url:t,requestBodyValues:{}})}catch(r){if(f(r)||n.APICallError.isInstance(r))throw r;throw new n.APICallError({message:"Failed to process error response",cause:r,statusCode:e.status,url:t,responseHeaders:l,requestBodyValues:{}})}throw r.value}try{return await i({response:e,url:t,requestBodyValues:{}})}catch(r){if(r instanceof Error&&(f(r)||n.APICallError.isInstance(r)))throw r;throw new n.APICallError({message:"Failed to process successful response",cause:r,statusCode:e.status,url:t,responseHeaders:l,requestBodyValues:{}})}}catch(e){throw g({error:e,url:t,requestBodyValues:{}})}};function x(e){let{mediaType:t,url:n,supportedUrls:r}=e;return n=n.toLowerCase(),t=t.toLowerCase(),Object.entries(r).map(e=>{let[t,n]=e,r=t.toLowerCase();return"*"===r||"*/*"===r?{mediaTypePrefix:"",regexes:n}:{mediaTypePrefix:r.replace(/\*/,""),regexes:n}}).filter(e=>{let{mediaTypePrefix:n}=e;return t.startsWith(n)}).flatMap(e=>{let{regexes:t}=e;return t}).some(e=>e.test(n))}function w(e){let{settingValue:n,environmentVariableName:r}=e;return"string"==typeof n?n:null!=n||void 0===t.default?void 0:null!=(n=t.default.env[r])&&"string"==typeof n?n:void 0}var k=/"__proto__"\s*:/,S=/"constructor"\s*:/;function _(e){let{stackTraceLimit:t}=Error;Error.stackTraceLimit=0;try{let t=JSON.parse(e);return null===t||"object"!=typeof t||!1===k.test(e)&&!1===S.test(e)?t:function(e){let t=[e];for(;t.length;){let e=t;for(let n of(t=[],e)){if(Object.prototype.hasOwnProperty.call(n,"__proto__")||Object.prototype.hasOwnProperty.call(n,"constructor")&&Object.prototype.hasOwnProperty.call(n.constructor,"prototype"))throw SyntaxError("Object contains forbidden prototype property");for(let e in n){let r=n[e];r&&"object"==typeof r&&t.push(r)}}}return e}(t)}finally{Error.stackTraceLimit=t}}var C=Symbol.for("vercel.ai.validator");async function A(e){let{value:t,schema:r}=e,i=await E({value:t,schema:r});if(!i.success)throw n.TypeValidationError.wrap({value:t,cause:i.error});return i.value}async function E(e){var t;let{value:r,schema:i}=e,a="object"==typeof i&&null!==i&&C in i&&!0===i[C]&&"validate"in i?i:(t=i,{[C]:!0,validate:async e=>{let r=await t["~standard"].validate(e);return null==r.issues?{success:!0,value:r.value}:{success:!1,error:new n.TypeValidationError({value:e,cause:r.issues})}}});try{if(null==a.validate)return{success:!0,value:r,rawValue:r};let e=await a.validate(r);if(e.success)return{success:!0,value:e.value,rawValue:r};return{success:!1,error:n.TypeValidationError.wrap({value:r,cause:e.error}),rawValue:r}}catch(e){return{success:!1,error:n.TypeValidationError.wrap({value:r,cause:e}),rawValue:r}}}async function T(e){let{text:t,schema:r}=e;try{let e=_(t);if(null==r)return e;return A({value:e,schema:r})}catch(e){if(n.JSONParseError.isInstance(e)||n.TypeValidationError.isInstance(e))throw e;throw new n.JSONParseError({text:t,cause:e})}}async function M(e){let{text:t,schema:r}=e;try{let e=_(t);if(null==r)return{success:!0,value:e,rawValue:e};return await E({value:e,schema:r})}catch(e){return{success:!1,error:n.JSONParseError.isInstance(e)?e:new n.JSONParseError({text:t,cause:e}),rawValue:void 0}}}function I(e){let{stream:t,schema:n}=e;return t.pipeThrough(new TextDecoderStream).pipeThrough(new r.EventSourceParserStream).pipeThrough(new TransformStream({async transform(e,t){let{data:r}=e;"[DONE]"!==r&&t.enqueue(await M({text:r,schema:n}))}}))}var N=async e=>{let{url:t,headers:n,body:r,failedResponseHandler:i,successfulResponseHandler:a,abortSignal:o,fetch:s}=e;return D({url:t,headers:{"Content-Type":"application/json",...n},body:{content:JSON.stringify(r),values:r},failedResponseHandler:i,successfulResponseHandler:a,abortSignal:o,fetch:s})},D=async e=>{let{url:t,headers:r={},body:i,successfulResponseHandler:a,failedResponseHandler:o,abortSignal:s,fetch:l=globalThis.fetch}=e;try{let e=await l(t,{method:"POST",headers:y(r),body:i.content,signal:s}),u=c(e);if(!e.ok){let r;try{r=await o({response:e,url:t,requestBodyValues:i.values})}catch(r){if(f(r)||n.APICallError.isInstance(r))throw r;throw new n.APICallError({message:"Failed to process error response",cause:r,statusCode:e.status,url:t,responseHeaders:u,requestBodyValues:i.values})}throw r.value}try{return await a({response:e,url:t,requestBodyValues:i.values})}catch(r){if(r instanceof Error&&(f(r)||n.APICallError.isInstance(r)))throw r;throw new n.APICallError({message:"Failed to process successful response",cause:r,statusCode:e.status,url:t,responseHeaders:u,requestBodyValues:i.values})}}catch(e){throw g({error:e,url:t,requestBodyValues:i.values})}};function P(e){return e}function R(e){return{...e,type:"dynamic"}}async function O(e){return"function"==typeof e&&(e=e()),Promise.resolve(e)}var j=e=>{let{errorSchema:t,errorToMessage:r,isRetryable:i}=e;return async e=>{let{response:a,url:o,requestBodyValues:s}=e,l=await a.text(),u=c(a);if(""===l.trim())return{responseHeaders:u,value:new n.APICallError({message:a.statusText,url:o,requestBodyValues:s,statusCode:a.status,responseHeaders:u,responseBody:l,isRetryable:null==i?void 0:i(a)})};try{let e=await T({text:l,schema:t});return{responseHeaders:u,value:new n.APICallError({message:r(e),url:o,requestBodyValues:s,statusCode:a.status,responseHeaders:u,responseBody:l,data:e,isRetryable:null==i?void 0:i(a,e)})}}catch(e){return{responseHeaders:u,value:new n.APICallError({message:a.statusText,url:o,requestBodyValues:s,statusCode:a.status,responseHeaders:u,responseBody:l,isRetryable:null==i?void 0:i(a)})}}}},F=e=>async t=>{let{response:r}=t,i=c(r);if(null==r.body)throw new n.EmptyResponseBodyError({});return{responseHeaders:i,value:I({stream:r.body,schema:e})}},L=e=>async t=>{let{response:r,url:i,requestBodyValues:a}=t,o=await r.text(),s=await M({text:o,schema:e}),l=c(r);if(!s.success)throw new n.APICallError({message:"Invalid JSON response",cause:s.error,statusCode:r.status,responseHeaders:l,responseBody:o,url:i,requestBodyValues:a});return{responseHeaders:l,value:s.value,rawValue:s.rawValue}},z=Symbol.for("vercel.ai.schema");function B(e){let{validate:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{[z]:!0,_type:void 0,[C]:!0,jsonSchema:e,validate:t}}function U(e){return null==e?B({properties:{},additionalProperties:!1}):"object"==typeof e&&null!==e&&z in e&&!0===e[z]&&"jsonSchema"in e&&"validate"in e?e:function(e,t){if("_zod"in e){var n,r,s=void 0;let t=null!=(r=null==s?void 0:s.useReferences)&&r;return B(i.toJSONSchema(e,{target:"draft-7",io:"output",reused:t?"ref":"inline"}),{validate:async t=>{let n=await a.safeParseAsync(e,t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}}})}let l=(n=void 0,false);return B((0,o.default)(e,{$refStrategy:l?"root":"none",target:"jsonSchema7"}),{validate:async t=>{let n=await e.safeParseAsync(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}}})}(e)}var{btoa:H,atob:W}=globalThis;function V(e){let t=W(e.replace(/-/g,"+").replace(/_/g,"/"));return Uint8Array.from(t,e=>e.codePointAt(0))}function q(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return H(t)}function G(e){return null==e?void 0:e.replace(/\/$/,"")}},359006:e=>{"use strict";e.s({GatewayAuthenticationError:()=>C,GatewayModelNotFoundError:()=>O,gateway:()=>eo});var t,n,r,i,a,o,s,l,u,c,d,h,p,f,m=e.i(781635),g=e.i(227541),y=e.i(514151),b=e.i(279085),x=e.i(555168),w=Symbol.for("vercel.ai.gateway.error"),k=class e extends(n=Error,t=w,n){static isInstance(t){return e.hasMarker(t)}static hasMarker(e){return"object"==typeof e&&null!==e&&w in e&&!0===e[w]}constructor({message:e,statusCode:n=500,cause:r}){super(e),this[t]=!0,this.statusCode=n,this.cause=r}},S="GatewayAuthenticationError",_=Symbol.for("vercel.ai.gateway.error.".concat(S)),C=class e extends(i=k,r=_,i){static isInstance(e){return k.hasMarker(e)&&_ in e}static createContextualError(t){let{apiKeyProvided:n,oidcTokenProvided:r,message:i="Authentication failed",statusCode:a=401,cause:o}=t;return new e({message:n?"AI Gateway authentication failed: Invalid API key provided.\n\nThe token is expected to be provided via the 'apiKey' option or 'AI_GATEWAY_API_KEY' environment variable.":r?"AI Gateway authentication failed: Invalid OIDC token provided.\n\nThe token is expected to be provided via the 'VERCEL_OIDC_TOKEN' environment variable. It expires every 12 hours.\n- make sure your Vercel project settings have OIDC enabled\n- if running locally with 'vercel dev', the token is automatically obtained and refreshed\n- if running locally with your own dev server, run 'vercel env pull' to fetch the token\n- in production/preview, the token is automatically obtained and refreshed\n\nAlternative: Provide an API key via 'apiKey' option or 'AI_GATEWAY_API_KEY' environment variable.":"AI Gateway authentication failed: No authentication provided.\n\nProvide either an API key or OIDC token.\n\nAPI key instructions:\n\nThe token is expected to be provided via the 'apiKey' option or 'AI_GATEWAY_API_KEY' environment variable.\n\nOIDC token instructions:\n\nThe token is expected to be provided via the 'VERCEL_OIDC_TOKEN' environment variable. It expires every 12 hours.\n- make sure your Vercel project settings have OIDC enabled\n- if running locally with 'vercel dev', the token is automatically obtained and refreshed\n- if running locally with your own dev server, run 'vercel env pull' to fetch the token\n- in production/preview, the token is automatically obtained and refreshed",statusCode:a,cause:o})}constructor({message:e="Authentication failed",statusCode:t=401,cause:n}={}){super({message:e,statusCode:t,cause:n}),this[r]=!0,this.name=S,this.type="authentication_error"}},A="GatewayInvalidRequestError",E=Symbol.for("vercel.ai.gateway.error.".concat(A)),T=class extends(o=k,a=E,o){static isInstance(e){return k.hasMarker(e)&&E in e}constructor({message:e="Invalid request",statusCode:t=400,cause:n}={}){super({message:e,statusCode:t,cause:n}),this[a]=!0,this.name=A,this.type="invalid_request_error"}},M="GatewayRateLimitError",I=Symbol.for("vercel.ai.gateway.error.".concat(M)),N=class extends(l=k,s=I,l){static isInstance(e){return k.hasMarker(e)&&I in e}constructor({message:e="Rate limit exceeded",statusCode:t=429,cause:n}={}){super({message:e,statusCode:t,cause:n}),this[s]=!0,this.name=M,this.type="rate_limit_exceeded"}},D="GatewayModelNotFoundError",P=Symbol.for("vercel.ai.gateway.error.".concat(D)),R=x.z.object({modelId:x.z.string()}),O=class extends(c=k,u=P,c){static isInstance(e){return k.hasMarker(e)&&P in e}constructor({message:e="Model not found",statusCode:t=404,modelId:n,cause:r}={}){super({message:e,statusCode:t,cause:r}),this[u]=!0,this.name=D,this.type="model_not_found",this.modelId=n}},j="GatewayInternalServerError",F=Symbol.for("vercel.ai.gateway.error.".concat(j)),L=class extends(h=k,d=F,h){static isInstance(e){return k.hasMarker(e)&&F in e}constructor({message:e="Internal server error",statusCode:t=500,cause:n}={}){super({message:e,statusCode:t,cause:n}),this[d]=!0,this.name=j,this.type="internal_server_error"}},z="GatewayResponseError",B=Symbol.for("vercel.ai.gateway.error.".concat(z)),U=class extends(f=k,p=B,f){static isInstance(e){return k.hasMarker(e)&&B in e}constructor({message:e="Invalid response from Gateway",statusCode:t=502,response:n,validationError:r,cause:i}={}){super({message:e,statusCode:t,cause:i}),this[p]=!0,this.name=z,this.type="response_error",this.response=n,this.validationError=r}};function H(e){let{response:t,statusCode:n,defaultMessage:r="Gateway request failed",cause:i,authMethod:a}=e,o=W.safeParse(t);if(!o.success)return new U({message:"Invalid error response format: ".concat(r),statusCode:n,response:t,validationError:o.error,cause:i});let s=o.data,l=s.error.type,u=s.error.message;switch(l){case"authentication_error":return C.createContextualError({apiKeyProvided:"api-key"===a,oidcTokenProvided:"oidc"===a,statusCode:n,cause:i});case"invalid_request_error":return new T({message:u,statusCode:n,cause:i});case"rate_limit_exceeded":return new N({message:u,statusCode:n,cause:i});case"model_not_found":{let e=R.safeParse(s.error.param);return new O({message:u,statusCode:n,modelId:e.success?e.data.modelId:void 0,cause:i})}default:return new L({message:u,statusCode:n,cause:i})}}var W=x.z.object({error:x.z.object({message:x.z.string(),type:x.z.string().nullish(),param:x.z.unknown().nullish(),code:x.z.union([x.z.string(),x.z.number()]).nullish()})});function V(e,t){var n;return k.isInstance(e)?e:y.APICallError.isInstance(e)?H({response:function(e){if(void 0!==e.data)return e.data;if(null!=e.responseBody)try{return JSON.parse(e.responseBody)}catch(t){return e.responseBody}return{}}(e),statusCode:null!=(n=e.statusCode)?n:500,defaultMessage:"Gateway request failed",cause:e,authMethod:t}):H({response:{},statusCode:500,defaultMessage:e instanceof Error?"Gateway request failed: ".concat(e.message):"Unknown Gateway error",cause:e,authMethod:t})}var q="ai-gateway-auth-method";function G(e){let t=$.safeParse(e[q]);return t.success?t.data:void 0}var $=x.z.union([x.z.literal("api-key"),x.z.literal("oidc")]),K=class{async getAvailableModels(){try{let{value:e}=await (0,b.getFromApi)({url:"".concat(this.config.baseURL,"/config"),headers:await (0,b.resolve)(this.config.headers()),successfulResponseHandler:(0,b.createJsonResponseHandler)(J),failedResponseHandler:(0,b.createJsonErrorResponseHandler)({errorSchema:x.z.any(),errorToMessage:e=>e}),fetch:this.config.fetch});return e}catch(e){throw V(e)}}constructor(e){this.config=e}},Y=x.z.object({specificationVersion:x.z.literal("v2"),provider:x.z.string(),modelId:x.z.string()}),X=x.z.object({input:x.z.string(),output:x.z.string()}),Z=x.z.object({id:x.z.string(),name:x.z.string(),description:x.z.string().nullish(),pricing:X.nullish(),specification:Y}),J=x.z.object({models:x.z.array(Z)}),Q=class{get provider(){return this.config.provider}async getArgs(e){let{abortSignal:t,...n}=e;return{args:this.maybeEncodeFileParts(n),warnings:[]}}async doGenerate(e){let{args:t,warnings:n}=await this.getArgs(e),{abortSignal:r}=e,i=await (0,b.resolve)(this.config.headers());try{let{responseHeaders:a,value:o,rawValue:s}=await (0,b.postJsonToApi)({url:this.getUrl(),headers:(0,b.combineHeaders)(i,e.headers,this.getModelConfigHeaders(this.modelId,!1),await (0,b.resolve)(this.config.o11yHeaders)),body:t,successfulResponseHandler:(0,b.createJsonResponseHandler)(x.z.any()),failedResponseHandler:(0,b.createJsonErrorResponseHandler)({errorSchema:x.z.any(),errorToMessage:e=>e}),...r&&{abortSignal:r},fetch:this.config.fetch});return{...o,request:{body:t},response:{headers:a,body:s},warnings:n}}catch(e){throw V(e,G(i))}}async doStream(e){let{args:t,warnings:n}=await this.getArgs(e),{abortSignal:r}=e,i=await (0,b.resolve)(this.config.headers());try{let{value:a,responseHeaders:o}=await (0,b.postJsonToApi)({url:this.getUrl(),headers:(0,b.combineHeaders)(i,e.headers,this.getModelConfigHeaders(this.modelId,!0),await (0,b.resolve)(this.config.o11yHeaders)),body:t,successfulResponseHandler:(0,b.createEventSourceResponseHandler)(x.z.any()),failedResponseHandler:(0,b.createJsonErrorResponseHandler)({errorSchema:x.z.any(),errorToMessage:e=>e}),...r&&{abortSignal:r},fetch:this.config.fetch});return{stream:a.pipeThrough(new TransformStream({start(e){n.length>0&&e.enqueue({type:"stream-start",warnings:n})},transform(t,n){if(t.success){let r=t.value;("raw"!==r.type||e.includeRawChunks)&&("response-metadata"===r.type&&r.timestamp&&"string"==typeof r.timestamp&&(r.timestamp=new Date(r.timestamp)),n.enqueue(r))}else n.error(t.error)}})),request:{body:t},response:{headers:o}}}catch(e){throw V(e,G(i))}}isFilePart(e){return e&&"object"==typeof e&&"type"in e&&"file"===e.type}maybeEncodeFileParts(e){for(let t of e.prompt)for(let e of t.content)if(this.isFilePart(e)&&e.data instanceof Uint8Array){let t=Uint8Array.from(e.data),n=m.Buffer.from(t).toString("base64");e.data=new URL("data:".concat(e.mediaType||"application/octet-stream",";base64,").concat(n))}return e}getUrl(){return"".concat(this.config.baseURL,"/language-model")}getModelConfigHeaders(e,t){return{"ai-language-model-specification-version":"2","ai-language-model-id":e,"ai-language-model-streaming":String(t)}}constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v2",this.supportedUrls={"*/*":[/.*/]}}},ee=class{get provider(){return this.config.provider}async doEmbed(e){var t;let{values:n,headers:r,abortSignal:i,providerOptions:a}=e,o=await (0,b.resolve)(this.config.headers());try{let{responseHeaders:e,value:s,rawValue:l}=await (0,b.postJsonToApi)({url:this.getUrl(),headers:(0,b.combineHeaders)(o,null!=r?r:{},this.getModelConfigHeaders(),await (0,b.resolve)(this.config.o11yHeaders)),body:{input:1===n.length?n[0]:n,...null!=a?a:{}},successfulResponseHandler:(0,b.createJsonResponseHandler)(et),failedResponseHandler:(0,b.createJsonErrorResponseHandler)({errorSchema:x.z.any(),errorToMessage:e=>e}),...i&&{abortSignal:i},fetch:this.config.fetch});return{embeddings:s.embeddings,usage:null!=(t=s.usage)?t:void 0,providerMetadata:s.providerMetadata,response:{headers:e,body:l}}}catch(e){throw V(e,G(o))}}getUrl(){return"".concat(this.config.baseURL,"/embedding-model")}getModelConfigHeaders(){return{"ai-embedding-model-specification-version":"2","ai-model-id":this.modelId}}constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v2",this.maxEmbeddingsPerCall=2048,this.supportsParallelCalls=!0}},et=x.z.object({embeddings:x.z.array(x.z.array(x.z.number())),usage:x.z.object({tokens:x.z.number()}).nullish(),providerMetadata:x.z.record(x.z.string(),x.z.record(x.z.string(),x.z.unknown())).optional()});async function en(){var e,t;let n=null!=(t=null==(e=ea().headers)?void 0:e["x-vercel-oidc-token"])?t:g.default.env.VERCEL_OIDC_TOKEN;if(!n)throw new C({message:"OIDC token not available",statusCode:401});return n}async function er(){var e;return null==(e=ea().headers)?void 0:e["x-vercel-id"]}var ei=Symbol.for("@vercel/request-context");function ea(){var e,t,n;return null!=(n=null==(t=null==(e=globalThis[ei])?void 0:e.get)?void 0:t.call(e))?n:{}}var eo=function(){var e,t;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=null,i=null,a=null!=(e=n.metadataCacheRefreshMillis)?e:3e5,o=0,s=null!=(t=(0,b.withoutTrailingSlash)(n.baseURL))?t:"https://ai-gateway.vercel.sh/v1/ai",l=async()=>{let e=await es(n);if(e)return{Authorization:"Bearer ".concat(e.token),"ai-gateway-protocol-version":"0.0.1",[q]:e.authMethod,...n.headers};throw C.createContextualError({apiKeyProvided:!1,oidcTokenProvided:!1,statusCode:401})},u=()=>{let e=(0,b.loadOptionalSetting)({settingValue:void 0,environmentVariableName:"VERCEL_DEPLOYMENT_ID"}),t=(0,b.loadOptionalSetting)({settingValue:void 0,environmentVariableName:"VERCEL_ENV"}),n=(0,b.loadOptionalSetting)({settingValue:void 0,environmentVariableName:"VERCEL_REGION"});return async()=>{let r=await er();return{...e&&{"ai-o11y-deployment-id":e},...t&&{"ai-o11y-environment":t},...n&&{"ai-o11y-region":n},...r&&{"ai-o11y-request-id":r}}}},c=e=>new Q(e,{provider:"gateway",baseURL:s,headers:l,fetch:n.fetch,o11yHeaders:u()}),d=function(e){if(new.target)throw Error("The Gateway Provider model function cannot be called with the new keyword.");return c(e)};return d.getAvailableModels=async()=>{var e,t,u;let c=null!=(u=null==(t=null==(e=n._internal)?void 0:e.currentDate)?void 0:t.call(e).getTime())?u:Date.now();return(!r||c-o>a)&&(o=c,r=new K({baseURL:s,headers:l,fetch:n.fetch}).getAvailableModels().then(e=>(i=e,e)).catch(async e=>{throw V(e,G(await l()))})),i?Promise.resolve(i):r},d.imageModel=e=>{throw new y.NoSuchModelError({modelId:e,modelType:"imageModel"})},d.languageModel=c,d.textEmbeddingModel=e=>new ee(e,{provider:"gateway",baseURL:s,headers:l,fetch:n.fetch,o11yHeaders:u()}),d}();async function es(e){let t=(0,b.loadOptionalSetting)({settingValue:e.apiKey,environmentVariableName:"AI_GATEWAY_API_KEY"});if(t)return{token:t,authMethod:"api-key"};try{return{token:await en(),authMethod:"oidc"}}catch(e){return null}}},807363:e=>{"use strict";e.s({_globalThis:()=>t});var t="object"==typeof globalThis?globalThis:"object"==typeof self?self:"object"==typeof window?window:globalThis},513693:e=>{"use strict";e.s({VERSION:()=>t});var t="1.9.0"},470143:e=>{"use strict";e.s({isCompatible:()=>r});var t=e.i(513693),n=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/,r=function(e){var t=new Set([e]),r=new Set,i=e.match(n);if(!i)return function(){return!1};var a={major:+i[1],minor:+i[2],patch:+i[3],prerelease:i[4]};if(null!=a.prerelease)return function(t){return t===e};function o(e){return r.add(e),!1}return function(e){if(t.has(e))return!0;if(r.has(e))return!1;var i=e.match(n);if(!i)return o(e);var s={major:+i[1],minor:+i[2],patch:+i[3],prerelease:i[4]};if(null!=s.prerelease||a.major!==s.major)return o(e);if(0===a.major)return a.minor===s.minor&&a.patch<=s.patch?(t.add(e),!0):o(e);return a.minor<=s.minor?(t.add(e),!0):o(e)}}(t.VERSION)},41956:e=>{"use strict";e.s({getGlobal:()=>s,registerGlobal:()=>o,unregisterGlobal:()=>l});var t=e.i(807363),n=e.i(513693),r=e.i(470143),i=Symbol.for("opentelemetry.js.api."+n.VERSION.split(".")[0]),a=t._globalThis;function o(e,t,r,o){void 0===o&&(o=!1);var s,l=a[i]=null!=(s=a[i])?s:{version:n.VERSION};if(!o&&l[e]){var u=Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return r.error(u.stack||u.message),!1}if(l.version!==n.VERSION){var u=Error("@opentelemetry/api: Registration of version v"+l.version+" for "+e+" does not match previously registered API v"+n.VERSION);return r.error(u.stack||u.message),!1}return l[e]=t,r.debug("@opentelemetry/api: Registered a global for "+e+" v"+n.VERSION+"."),!0}function s(e){var t,n,o=null==(t=a[i])?void 0:t.version;if(o&&(0,r.isCompatible)(o))return null==(n=a[i])?void 0:n[e]}function l(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+n.VERSION+".");var r=a[i];r&&delete r[e]}},960633:e=>{"use strict";function t(e){return Symbol.for(e)}e.s({ROOT_CONTEXT:()=>n,createContextKey:()=>t});var n=new function e(t){var n=this;n._currentContext=t?new Map(t):new Map,n.getValue=function(e){return n._currentContext.get(e)},n.setValue=function(t,r){var i=new e(n._currentContext);return i._currentContext.set(t,r),i},n.deleteValue=function(t){var r=new e(n._currentContext);return r._currentContext.delete(t),r}}},771692:e=>{"use strict";e.s({NoopContextManager:()=>i});var t=e.i(960633),n=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},r=function(e,t,n){if(n||2==arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},i=function(){function e(){}return e.prototype.active=function(){return t.ROOT_CONTEXT},e.prototype.with=function(e,t,i){for(var a=[],o=3;o<arguments.length;o++)a[o-3]=arguments[o];return t.call.apply(t,r([i],n(a),!1))},e.prototype.bind=function(e,t){return t},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}()},613351:e=>{"use strict";e.s({DiagComponentLogger:()=>i});var t=e.i(41956),n=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},r=function(e,t,n){if(n||2==arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},i=function(){function e(e){this._namespace=e.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a("debug",this._namespace,e)},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a("error",this._namespace,e)},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a("info",this._namespace,e)},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a("warn",this._namespace,e)},e.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a("verbose",this._namespace,e)},e}();function a(e,i,a){var o=(0,t.getGlobal)("diag");if(o)return a.unshift(i),o[e].apply(o,r([],n(a),!1))}},811775:e=>{"use strict";var t;e.s({DiagLogLevel:()=>t}),function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"}(t||(t={}))},397990:e=>{"use strict";e.s({createLogLevelDiagLogger:()=>n});var t=e.i(811775);function n(e,n){function r(t,r){var i=n[t];return"function"==typeof i&&e>=r?i.bind(n):function(){}}return e<t.DiagLogLevel.NONE?e=t.DiagLogLevel.NONE:e>t.DiagLogLevel.ALL&&(e=t.DiagLogLevel.ALL),n=n||{},{error:r("error",t.DiagLogLevel.ERROR),warn:r("warn",t.DiagLogLevel.WARN),info:r("info",t.DiagLogLevel.INFO),debug:r("debug",t.DiagLogLevel.DEBUG),verbose:r("verbose",t.DiagLogLevel.VERBOSE)}}},458010:e=>{"use strict";e.s({DiagAPI:()=>s});var t=e.i(613351),n=e.i(397990),r=e.i(811775),i=e.i(41956),a=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},o=function(e,t,n){if(n||2==arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},s=function(){function e(){function e(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(0,i.getGlobal)("diag");if(r)return r[e].apply(r,o([],a(t),!1))}}var s=this;s.setLogger=function(e,t){if(void 0===t&&(t={logLevel:r.DiagLogLevel.INFO}),e===s){var a,o,l,u=Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return s.error(null!=(a=u.stack)?a:u.message),!1}"number"==typeof t&&(t={logLevel:t});var c=(0,i.getGlobal)("diag"),d=(0,n.createLogLevelDiagLogger)(null!=(o=t.logLevel)?o:r.DiagLogLevel.INFO,e);if(c&&!t.suppressOverrideMessage){var h=null!=(l=Error().stack)?l:"<failed to generate stacktrace>";c.warn("Current logger will be overwritten from "+h),d.warn("Current logger will overwrite one already registered from "+h)}return(0,i.registerGlobal)("diag",d,s,!0)},s.disable=function(){(0,i.unregisterGlobal)("diag",s)},s.createComponentLogger=function(e){return new t.DiagComponentLogger(e)},s.verbose=e("verbose"),s.debug=e("debug"),s.info=e("info"),s.warn=e("warn"),s.error=e("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}()},248955:e=>{"use strict";e.s({ContextAPI:()=>l});var t=e.i(771692),n=e.i(41956),r=e.i(458010),i=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},a=function(e,t,n){if(n||2==arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},o="context",s=new t.NoopContextManager,l=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(e){return(0,n.registerGlobal)(o,e,r.DiagAPI.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(e,t,n){for(var r,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return(r=this._getContextManager()).with.apply(r,a([e,t,n],i(o),!1))},e.prototype.bind=function(e,t){return this._getContextManager().bind(e,t)},e.prototype._getContextManager=function(){return(0,n.getGlobal)(o)||s},e.prototype.disable=function(){this._getContextManager().disable(),(0,n.unregisterGlobal)(o,r.DiagAPI.instance())},e}()},675648:e=>{"use strict";var t;e.s({TraceFlags:()=>t}),function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"}(t||(t={}))},718599:e=>{"use strict";e.s({INVALID_SPANID:()=>n,INVALID_SPAN_CONTEXT:()=>i,INVALID_TRACEID:()=>r});var t=e.i(675648),n="0000000000000000",r="00000000000000000000000000000000",i={traceId:r,spanId:n,traceFlags:t.TraceFlags.NONE}},322902:e=>{"use strict";e.s({NonRecordingSpan:()=>n});var t=e.i(718599),n=function(){function e(e){void 0===e&&(e=t.INVALID_SPAN_CONTEXT),this._spanContext=e}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(e,t){return this},e.prototype.setAttributes=function(e){return this},e.prototype.addEvent=function(e,t){return this},e.prototype.addLink=function(e){return this},e.prototype.addLinks=function(e){return this},e.prototype.setStatus=function(e){return this},e.prototype.updateName=function(e){return this},e.prototype.end=function(e){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(e,t){},e}()},243058:e=>{"use strict";e.s({deleteSpan:()=>l,getActiveSpan:()=>o,getSpan:()=>a,getSpanContext:()=>c,setSpan:()=>s,setSpanContext:()=>u});var t=e.i(960633),n=e.i(322902),r=e.i(248955),i=(0,t.createContextKey)("OpenTelemetry Context Key SPAN");function a(e){return e.getValue(i)||void 0}function o(){return a(r.ContextAPI.getInstance().active())}function s(e,t){return e.setValue(i,t)}function l(e){return e.deleteValue(i)}function u(e,t){return s(e,new n.NonRecordingSpan(t))}function c(e){var t;return null==(t=a(e))?void 0:t.spanContext()}},829578:e=>{"use strict";e.s({isSpanContextValid:()=>a,wrapSpanContext:()=>o});var t=e.i(718599),n=e.i(322902),r=/^([0-9a-f]{32})$/i,i=/^[0-9a-f]{16}$/i;function a(e){var n,a;return n=e.traceId,r.test(n)&&n!==t.INVALID_TRACEID&&(a=e.spanId,i.test(a)&&a!==t.INVALID_SPANID)}function o(e){return new n.NonRecordingSpan(e)}},221736:e=>{"use strict";e.s({NoopTracer:()=>o});var t=e.i(248955),n=e.i(243058),r=e.i(322902),i=e.i(829578),a=t.ContextAPI.getInstance(),o=function(){function e(){}return e.prototype.startSpan=function(e,t,o){if(void 0===o&&(o=a.active()),null==t?void 0:t.root)return new r.NonRecordingSpan;var s,l=o&&(0,n.getSpanContext)(o);return"object"==typeof(s=l)&&"string"==typeof s.spanId&&"string"==typeof s.traceId&&"number"==typeof s.traceFlags&&(0,i.isSpanContextValid)(l)?new r.NonRecordingSpan(l):new r.NonRecordingSpan},e.prototype.startActiveSpan=function(e,t,r,i){if(!(arguments.length<2)){2==arguments.length?l=t:3==arguments.length?(o=t,l=r):(o=t,s=r,l=i);var o,s,l,u=null!=s?s:a.active(),c=this.startSpan(e,o,u),d=(0,n.setSpan)(u,c);return a.with(d,l,void 0,c)}},e}()},761561:e=>{"use strict";e.s({ProxyTracer:()=>n});var t=new(e.i(221736)).NoopTracer,n=function(){function e(e,t,n,r){this._provider=e,this.name=t,this.version=n,this.options=r}return e.prototype.startSpan=function(e,t,n){return this._getTracer().startSpan(e,t,n)},e.prototype.startActiveSpan=function(e,t,n,r){var i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):t},e}()},226090:e=>{"use strict";e.s({NoopTracerProvider:()=>n});var t=e.i(221736),n=function(){function e(){}return e.prototype.getTracer=function(e,n,r){return new t.NoopTracer},e}()},323741:e=>{"use strict";e.s({ProxyTracerProvider:()=>r});var t=e.i(761561),n=new(e.i(226090)).NoopTracerProvider,r=function(){function e(){}return e.prototype.getTracer=function(e,n,r){var i;return null!=(i=this.getDelegateTracer(e,n,r))?i:new t.ProxyTracer(this,e,n,r)},e.prototype.getDelegate=function(){var e;return null!=(e=this._delegate)?e:n},e.prototype.setDelegate=function(e){this._delegate=e},e.prototype.getDelegateTracer=function(e,t,n){var r;return null==(r=this._delegate)?void 0:r.getTracer(e,t,n)},e}()},421685:e=>{"use strict";e.s({TraceAPI:()=>s});var t=e.i(41956),n=e.i(323741),r=e.i(829578),i=e.i(243058),a=e.i(458010),o="trace",s=function(){function e(){this._proxyTracerProvider=new n.ProxyTracerProvider,this.wrapSpanContext=r.wrapSpanContext,this.isSpanContextValid=r.isSpanContextValid,this.deleteSpan=i.deleteSpan,this.getSpan=i.getSpan,this.getActiveSpan=i.getActiveSpan,this.getSpanContext=i.getSpanContext,this.setSpan=i.setSpan,this.setSpanContext=i.setSpanContext}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(e){var n=(0,t.registerGlobal)(o,this._proxyTracerProvider,a.DiagAPI.instance());return n&&this._proxyTracerProvider.setDelegate(e),n},e.prototype.getTracerProvider=function(){return(0,t.getGlobal)(o)||this._proxyTracerProvider},e.prototype.getTracer=function(e,t){return this.getTracerProvider().getTracer(e,t)},e.prototype.disable=function(){(0,t.unregisterGlobal)(o,a.DiagAPI.instance()),this._proxyTracerProvider=new n.ProxyTracerProvider},e}()},891405:e=>{"use strict";e.s({trace:()=>t});var t=e.i(421685).TraceAPI.getInstance()},879100:e=>{"use strict";var t;e.s({SpanStatusCode:()=>t}),function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"}(t||(t={}))},987739:e=>{"use strict";e.s({AbstractChat:()=>er,callCompletionApi:()=>Q,isDeepEqualData:()=>function e(t,n){if(t===n)return!0;if(null==t||null==n)return!1;if("object"!=typeof t&&"object"!=typeof n)return t===n;if(t.constructor!==n.constructor)return!1;if(t instanceof Date&&n instanceof Date)return t.getTime()===n.getTime();if(Array.isArray(t)){if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(!e(t[r],n[r]))return!1;return!0}let r=Object.keys(t),i=Object.keys(n);if(r.length!==i.length)return!1;for(let a of r)if(!i.includes(a)||!e(t[a],n[a]))return!1;return!0},parsePartialJson:()=>T});var t,n=e.i(279085),r=e.i(514151),i=e.i(555168);e.i(359006),e.i(891405),e.i(879100),e.i(703953);var a=Object.defineProperty,o=Symbol.for("vercel.ai.error.".concat("AI_NoOutputSpecifiedError"));r.AISDKError;Symbol.for("vercel.ai.error.".concat("AI_InvalidArgumentError"));r.AISDKError;Symbol.for("vercel.ai.error.".concat("AI_RetryError"));r.AISDKError;Symbol.for("vercel.ai.error.".concat("AI_DownloadError"));r.AISDKError;Symbol.for("vercel.ai.error.".concat("AI_InvalidDataContentError"));r.AISDKError;var s=i.z.union([i.z.string(),i.z.instanceof(Uint8Array),i.z.instanceof(ArrayBuffer),i.z.custom(e=>{var t,n;return null!=(n=null==(t=globalThis.Buffer)?void 0:t.isBuffer(e))&&n},{message:"Must be a Buffer"})]),l=Symbol.for("vercel.ai.error.".concat("AI_InvalidMessageRoleError"));r.AISDKError;Symbol.for("vercel.ai.error.".concat("AI_InvalidStreamPartError"));r.AISDKError;Symbol.for("vercel.ai.error.".concat("AI_InvalidToolInputError"));r.AISDKError;Symbol.for("vercel.ai.error.".concat("AI_MCPClientError"));r.AISDKError;Symbol.for("vercel.ai.error.".concat("AI_NoImageGeneratedError"));r.AISDKError;var u="AI_NoObjectGeneratedError",c="vercel.ai.error.".concat(u),d=Symbol.for(c),h=class extends r.AISDKError{static isInstance(e){return r.AISDKError.hasMarker(e,c)}constructor({message:e="No object generated.",cause:n,text:r,response:i,usage:a,finishReason:o}){super({name:u,message:e,cause:n}),this[t]=!0,this.text=r,this.response=i,this.usage=a,this.finishReason=o}};t=d;Symbol.for("vercel.ai.error.".concat("AI_NoSuchToolError"));r.AISDKError;Symbol.for("vercel.ai.error.".concat("AI_ToolCallRepairError"));r.AISDKError,r.AISDKError;Symbol.for("vercel.ai.error.".concat("AI_MessageConversionError"));r.AISDKError;var p=i.z.lazy(()=>i.z.union([i.z.null(),i.z.string(),i.z.number(),i.z.boolean(),i.z.record(i.z.string(),p),i.z.array(p)])),f=i.z.record(i.z.string(),i.z.record(i.z.string(),p)),m=i.z.object({type:i.z.literal("text"),text:i.z.string(),providerOptions:f.optional()}),g=i.z.object({type:i.z.literal("image"),image:i.z.union([s,i.z.instanceof(URL)]),mediaType:i.z.string().optional(),providerOptions:f.optional()}),y=i.z.object({type:i.z.literal("file"),data:i.z.union([s,i.z.instanceof(URL)]),filename:i.z.string().optional(),mediaType:i.z.string(),providerOptions:f.optional()}),b=i.z.object({type:i.z.literal("reasoning"),text:i.z.string(),providerOptions:f.optional()}),x=i.z.object({type:i.z.literal("tool-call"),toolCallId:i.z.string(),toolName:i.z.string(),input:i.z.unknown(),providerOptions:f.optional(),providerExecuted:i.z.boolean().optional()}),w=i.z.discriminatedUnion("type",[i.z.object({type:i.z.literal("text"),value:i.z.string()}),i.z.object({type:i.z.literal("json"),value:p}),i.z.object({type:i.z.literal("error-text"),value:i.z.string()}),i.z.object({type:i.z.literal("error-json"),value:p}),i.z.object({type:i.z.literal("content"),value:i.z.array(i.z.union([i.z.object({type:i.z.literal("text"),text:i.z.string()}),i.z.object({type:i.z.literal("media"),data:i.z.string(),mediaType:i.z.string()})]))})]),k=i.z.object({type:i.z.literal("tool-result"),toolCallId:i.z.string(),toolName:i.z.string(),output:w,providerOptions:f.optional()}),S=i.z.object({role:i.z.literal("system"),content:i.z.string(),providerOptions:f.optional()}),_=i.z.object({role:i.z.literal("user"),content:i.z.union([i.z.string(),i.z.array(i.z.union([m,g,y]))]),providerOptions:f.optional()}),C=i.z.object({role:i.z.literal("assistant"),content:i.z.union([i.z.string(),i.z.array(i.z.union([m,y,b,x,k]))]),providerOptions:f.optional()}),A=i.z.object({role:i.z.literal("tool"),content:i.z.array(k),providerOptions:f.optional()});i.z.union([S,_,C,A]),(0,n.createIdGenerator)({prefix:"aitxt",size:24}),TransformStream;var E=i.z.union([i.z.strictObject({type:i.z.literal("text-start"),id:i.z.string(),providerMetadata:f.optional()}),i.z.strictObject({type:i.z.literal("text-delta"),id:i.z.string(),delta:i.z.string(),providerMetadata:f.optional()}),i.z.strictObject({type:i.z.literal("text-end"),id:i.z.string(),providerMetadata:f.optional()}),i.z.strictObject({type:i.z.literal("error"),errorText:i.z.string()}),i.z.strictObject({type:i.z.literal("tool-input-start"),toolCallId:i.z.string(),toolName:i.z.string(),providerExecuted:i.z.boolean().optional(),dynamic:i.z.boolean().optional()}),i.z.strictObject({type:i.z.literal("tool-input-delta"),toolCallId:i.z.string(),inputTextDelta:i.z.string()}),i.z.strictObject({type:i.z.literal("tool-input-available"),toolCallId:i.z.string(),toolName:i.z.string(),input:i.z.unknown(),providerExecuted:i.z.boolean().optional(),providerMetadata:f.optional(),dynamic:i.z.boolean().optional()}),i.z.strictObject({type:i.z.literal("tool-output-available"),toolCallId:i.z.string(),output:i.z.unknown(),providerExecuted:i.z.boolean().optional(),dynamic:i.z.boolean().optional()}),i.z.strictObject({type:i.z.literal("tool-output-error"),toolCallId:i.z.string(),errorText:i.z.string(),providerExecuted:i.z.boolean().optional(),dynamic:i.z.boolean().optional()}),i.z.strictObject({type:i.z.literal("reasoning"),text:i.z.string(),providerMetadata:f.optional()}),i.z.strictObject({type:i.z.literal("reasoning-start"),id:i.z.string(),providerMetadata:f.optional()}),i.z.strictObject({type:i.z.literal("reasoning-delta"),id:i.z.string(),delta:i.z.string(),providerMetadata:f.optional()}),i.z.strictObject({type:i.z.literal("reasoning-end"),id:i.z.string(),providerMetadata:f.optional()}),i.z.strictObject({type:i.z.literal("reasoning-part-finish")}),i.z.strictObject({type:i.z.literal("source-url"),sourceId:i.z.string(),url:i.z.string(),title:i.z.string().optional(),providerMetadata:f.optional()}),i.z.strictObject({type:i.z.literal("source-document"),sourceId:i.z.string(),mediaType:i.z.string(),title:i.z.string(),filename:i.z.string().optional(),providerMetadata:f.optional()}),i.z.strictObject({type:i.z.literal("file"),url:i.z.string(),mediaType:i.z.string(),providerMetadata:f.optional()}),i.z.strictObject({type:i.z.string().startsWith("data-"),id:i.z.string().optional(),data:i.z.unknown(),transient:i.z.boolean().optional()}),i.z.strictObject({type:i.z.literal("start-step")}),i.z.strictObject({type:i.z.literal("finish-step")}),i.z.strictObject({type:i.z.literal("start"),messageId:i.z.string().optional(),messageMetadata:i.z.unknown().optional()}),i.z.strictObject({type:i.z.literal("finish"),messageMetadata:i.z.unknown().optional()}),i.z.strictObject({type:i.z.literal("abort")}),i.z.strictObject({type:i.z.literal("message-metadata"),messageMetadata:i.z.unknown()})]);async function T(e){if(void 0===e)return{value:void 0,state:"undefined-input"};let t=await (0,n.safeParseJSON)({text:e});return t.success?{value:t.value,state:"successful-parse"}:(t=await (0,n.safeParseJSON)({text:function(e){let t=["ROOT"],n=-1,r=null;function i(e,i,a){switch(e){case'"':n=i,t.pop(),t.push(a),t.push("INSIDE_STRING");break;case"f":case"t":case"n":n=i,r=i,t.pop(),t.push(a),t.push("INSIDE_LITERAL");break;case"-":t.pop(),t.push(a),t.push("INSIDE_NUMBER");break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n=i,t.pop(),t.push(a),t.push("INSIDE_NUMBER");break;case"{":n=i,t.pop(),t.push(a),t.push("INSIDE_OBJECT_START");break;case"[":n=i,t.pop(),t.push(a),t.push("INSIDE_ARRAY_START")}}function a(e,r){switch(e){case",":t.pop(),t.push("INSIDE_OBJECT_AFTER_COMMA");break;case"}":n=r,t.pop()}}function o(e,r){switch(e){case",":t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break;case"]":n=r,t.pop()}}for(let s=0;s<e.length;s++){let l=e[s];switch(t[t.length-1]){case"ROOT":i(l,s,"FINISH");break;case"INSIDE_OBJECT_START":switch(l){case'"':t.pop(),t.push("INSIDE_OBJECT_KEY");break;case"}":n=s,t.pop()}break;case"INSIDE_OBJECT_AFTER_COMMA":'"'===l&&(t.pop(),t.push("INSIDE_OBJECT_KEY"));break;case"INSIDE_OBJECT_KEY":'"'===l&&(t.pop(),t.push("INSIDE_OBJECT_AFTER_KEY"));break;case"INSIDE_OBJECT_AFTER_KEY":":"===l&&(t.pop(),t.push("INSIDE_OBJECT_BEFORE_VALUE"));break;case"INSIDE_OBJECT_BEFORE_VALUE":i(l,s,"INSIDE_OBJECT_AFTER_VALUE");break;case"INSIDE_OBJECT_AFTER_VALUE":a(l,s);break;case"INSIDE_STRING":switch(l){case'"':t.pop(),n=s;break;case"\\":t.push("INSIDE_STRING_ESCAPE");break;default:n=s}break;case"INSIDE_ARRAY_START":"]"===l?(n=s,t.pop()):(n=s,i(l,s,"INSIDE_ARRAY_AFTER_VALUE"));break;case"INSIDE_ARRAY_AFTER_VALUE":switch(l){case",":t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break;case"]":n=s,t.pop();break;default:n=s}break;case"INSIDE_ARRAY_AFTER_COMMA":i(l,s,"INSIDE_ARRAY_AFTER_VALUE");break;case"INSIDE_STRING_ESCAPE":t.pop(),n=s;break;case"INSIDE_NUMBER":switch(l){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n=s;break;case"e":case"E":case"-":case".":break;case",":t.pop(),"INSIDE_ARRAY_AFTER_VALUE"===t[t.length-1]&&o(l,s),"INSIDE_OBJECT_AFTER_VALUE"===t[t.length-1]&&a(l,s);break;case"}":t.pop(),"INSIDE_OBJECT_AFTER_VALUE"===t[t.length-1]&&a(l,s);break;case"]":t.pop(),"INSIDE_ARRAY_AFTER_VALUE"===t[t.length-1]&&o(l,s);break;default:t.pop()}break;case"INSIDE_LITERAL":{let i=e.substring(r,s+1);"false".startsWith(i)||"true".startsWith(i)||"null".startsWith(i)?n=s:(t.pop(),"INSIDE_OBJECT_AFTER_VALUE"===t[t.length-1]?a(l,s):"INSIDE_ARRAY_AFTER_VALUE"===t[t.length-1]&&o(l,s))}}}let s=e.slice(0,n+1);for(let n=t.length-1;n>=0;n--)switch(t[n]){case"INSIDE_STRING":s+='"';break;case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":s+="}";break;case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":s+="]";break;case"INSIDE_LITERAL":{let t=e.substring(r,e.length);"true".startsWith(t)?s+="true".slice(t.length):"false".startsWith(t)?s+="false".slice(t.length):"null".startsWith(t)&&(s+="null".slice(t.length))}}return s}(e)})).success?{value:t.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"}}function M(e){return e.type.startsWith("tool-")}function I(e){return e.type.split("-").slice(1).join("-")}async function N(e){let{stream:t,onError:n}=e,r=t.getReader();try{for(;;){let{done:e}=await r.read();if(e)break}}catch(e){null==n||n(e)}finally{r.releaseLock()}}(0,n.createIdGenerator)({prefix:"aitxt",size:24}),(0,n.createIdGenerator)({prefix:"aiobj",size:24});var D=class{async processQueue(){if(!this.isProcessing){for(this.isProcessing=!0;this.queue.length>0;)await this.queue[0](),this.queue.shift();this.isProcessing=!1}}async run(e){return new Promise((t,n)=>{this.queue.push(async()=>{try{await e(),t()}catch(e){n(e)}}),this.processQueue()})}constructor(){this.queue=[],this.isProcessing=!1}};(0,n.createIdGenerator)({prefix:"aiobj",size:24}),r.AISDKError,((e,t)=>{for(var n in t)a(e,n,{get:t[n],enumerable:!0})})({},{object:()=>R,text:()=>P});var P=()=>({type:"text",responseFormat:{type:"text"},async parsePartial(e){let{text:t}=e;return{partial:t}},async parseOutput(e){let{text:t}=e;return t}}),R=e=>{let{schema:t}=e,r=(0,n.asSchema)(t);return{type:"object",responseFormat:{type:"json",schema:r.jsonSchema},async parsePartial(e){let{text:t}=e,n=await T(t);switch(n.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:n.value};default:{let e=n.state;throw Error("Unsupported parse state: ".concat(e))}}},async parseOutput(e,t){let{text:i}=e,a=await (0,n.safeParseJSON)({text:i});if(!a.success)throw new h({message:"No object generated: could not parse the response.",cause:a.error,text:i,response:t.response,usage:t.usage,finishReason:t.finishReason});let o=await (0,n.safeValidateTypes)({value:a.value,schema:r});if(!o.success)throw new h({message:"No object generated: response did not match schema.",cause:o.error,text:i,response:t.response,usage:t.usage,finishReason:t.finishReason});return o.value}}},O=Symbol.for("vercel.ai.error.".concat("AI_NoSuchProviderError"));r.NoSuchModelError;var j=i.z.looseObject({name:i.z.string(),version:i.z.string()}),F=i.z.looseObject({_meta:i.z.optional(i.z.object({}).loose())}),L=i.z.object({method:i.z.string(),params:i.z.optional(F)}),z=i.z.looseObject({experimental:i.z.optional(i.z.object({}).loose()),logging:i.z.optional(i.z.object({}).loose()),prompts:i.z.optional(i.z.looseObject({listChanged:i.z.optional(i.z.boolean())})),resources:i.z.optional(i.z.looseObject({subscribe:i.z.optional(i.z.boolean()),listChanged:i.z.optional(i.z.boolean())})),tools:i.z.optional(i.z.looseObject({listChanged:i.z.optional(i.z.boolean())}))});F.extend({protocolVersion:i.z.string(),capabilities:z,serverInfo:j,instructions:i.z.optional(i.z.string())});var B=F.extend({nextCursor:i.z.optional(i.z.string())}),U=i.z.object({name:i.z.string(),description:i.z.optional(i.z.string()),inputSchema:i.z.object({type:i.z.literal("object"),properties:i.z.optional(i.z.object({}).loose())}).loose()}).loose();B.extend({tools:i.z.array(U)});var H=i.z.object({type:i.z.literal("text"),text:i.z.string()}).loose(),W=i.z.object({type:i.z.literal("image"),data:i.z.base64(),mimeType:i.z.string()}).loose(),V=i.z.object({uri:i.z.string(),mimeType:i.z.optional(i.z.string())}).loose(),q=V.extend({text:i.z.string()}),G=V.extend({blob:i.z.base64()}),$=i.z.object({type:i.z.literal("resource"),resource:i.z.union([q,G])}).loose();F.extend({content:i.z.array(i.z.union([H,W,$])),isError:i.z.boolean().default(!1).optional()}).or(F.extend({toolResult:i.z.unknown()}));var K=i.z.object({jsonrpc:i.z.literal("2.0"),id:i.z.union([i.z.string(),i.z.number().int()])}).merge(L).strict(),Y=i.z.object({jsonrpc:i.z.literal("2.0"),id:i.z.union([i.z.string(),i.z.number().int()]),result:F}).strict(),X=i.z.object({jsonrpc:i.z.literal("2.0"),id:i.z.union([i.z.string(),i.z.number().int()]),error:i.z.object({code:i.z.number().int(),message:i.z.string(),data:i.z.optional(i.z.unknown())})}).strict(),Z=i.z.object({jsonrpc:i.z.literal("2.0")}).merge(i.z.object({method:i.z.string(),params:i.z.optional(F)})).strict();async function J(e){let{stream:t,onTextPart:n}=e,r=t.pipeThrough(new TextDecoderStream).getReader();for(;;){let{done:e,value:t}=await r.read();if(e)break;await n(t)}}async function Q(e){var t;let{api:r,prompt:i,credentials:a,headers:o,body:s,streamProtocol:l="data",setCompletion:u,setLoading:c,setError:d,setAbortController:h,onFinish:p,onError:f,fetch:m=fetch}=e;try{c(!0),d(void 0);let e=new AbortController;h(e),u("");let f=await m(r,{method:"POST",body:JSON.stringify({prompt:i,...s}),credentials:a,headers:{"Content-Type":"application/json",...o},signal:e.signal}).catch(e=>{throw e});if(!f.ok)throw Error(null!=(t=await f.text())?t:"Failed to fetch the chat response.");if(!f.body)throw Error("The response body is empty.");let g="";switch(l){case"text":await J({stream:f.body,onTextPart:e=>{g+=e,u(g)}});break;case"data":await N({stream:(0,n.parseJsonEventStream)({stream:f.body,schema:E}).pipeThrough(new TransformStream({async transform(e){if(!e.success)throw e.error;let t=e.value;if("text-delta"===t.type)g+=t.delta,u(g);else if("error"===t.type)throw Error(t.errorText)}})),onError:e=>{throw e}});break;default:throw Error("Unknown stream protocol: ".concat(l))}return p&&p(i,g),h(null),g}catch(e){if("AbortError"===e.name)return h(null),null;e instanceof Error&&f&&f(e),d(e)}finally{c(!1)}}async function ee(e){if(null==e)return[];if(!globalThis.FileList||!(e instanceof globalThis.FileList))throw Error("FileList is not supported in the current environment");return Promise.all(Array.from(e).map(async e=>{let{name:t,type:n}=e;return{type:"file",mediaType:n,filename:t,url:await new Promise((t,n)=>{let r=new FileReader;r.onload=e=>{var n;t(null==(n=e.target)?void 0:n.result)},r.onerror=e=>n(e),r.readAsDataURL(e)})}}))}i.z.union([K,Z,Y,X]),r.AISDKError;var et=class{async sendMessages(e){var t,r,i,a,o;let{abortSignal:s,...l}=e,u=await (0,n.resolve)(this.body),c=await (0,n.resolve)(this.headers),d=await (0,n.resolve)(this.credentials),h=await (null==(t=this.prepareSendMessagesRequest)?void 0:t.call(this,{api:this.api,id:l.chatId,messages:l.messages,body:{...u,...l.body},headers:{...c,...l.headers},credentials:d,requestMetadata:l.metadata,trigger:l.trigger,messageId:l.messageId})),p=null!=(r=null==h?void 0:h.api)?r:this.api,f=(null==h?void 0:h.headers)!==void 0?h.headers:{...c,...l.headers},m=(null==h?void 0:h.body)!==void 0?h.body:{...u,...l.body,id:l.chatId,messages:l.messages,trigger:l.trigger,messageId:l.messageId},g=null!=(i=null==h?void 0:h.credentials)?i:d,y=null!=(a=this.fetch)?a:globalThis.fetch,b=await y(p,{method:"POST",headers:{"Content-Type":"application/json",...f},body:JSON.stringify(m),credentials:g,signal:s});if(!b.ok)throw Error(null!=(o=await b.text())?o:"Failed to fetch the chat response.");if(!b.body)throw Error("The response body is empty.");return this.processResponseStream(b.body)}async reconnectToStream(e){var t,r,i,a,o;let s=await (0,n.resolve)(this.body),l=await (0,n.resolve)(this.headers),u=await (0,n.resolve)(this.credentials),c=await (null==(t=this.prepareReconnectToStreamRequest)?void 0:t.call(this,{api:this.api,id:e.chatId,body:{...s,...e.body},headers:{...l,...e.headers},credentials:u,requestMetadata:e.metadata})),d=null!=(r=null==c?void 0:c.api)?r:"".concat(this.api,"/").concat(e.chatId,"/stream"),h=(null==c?void 0:c.headers)!==void 0?c.headers:{...l,...e.headers},p=null!=(i=null==c?void 0:c.credentials)?i:u,f=null!=(a=this.fetch)?a:globalThis.fetch,m=await f(d,{method:"GET",headers:h,credentials:p});if(204===m.status)return null;if(!m.ok)throw Error(null!=(o=await m.text())?o:"Failed to fetch the chat response.");if(!m.body)throw Error("The response body is empty.");return this.processResponseStream(m.body)}constructor({api:e="/api/chat",credentials:t,headers:n,body:r,fetch:i,prepareSendMessagesRequest:a,prepareReconnectToStreamRequest:o}){this.api=e,this.credentials=t,this.headers=n,this.body=r,this.fetch=i,this.prepareSendMessagesRequest=a,this.prepareReconnectToStreamRequest=o}},en=class extends et{processResponseStream(e){return(0,n.parseJsonEventStream)({stream:e,schema:E}).pipeThrough(new TransformStream({async transform(e,t){if(!e.success)throw e.error;t.enqueue(e.value)}}))}constructor(e={}){super(e)}},er=class{get status(){return this.state.status}setStatus(e){let{status:t,error:n}=e;this.status!==t&&(this.state.status=t,this.state.error=n)}get error(){return this.state.error}get messages(){return this.state.messages}get lastMessage(){return this.state.messages[this.state.messages.length-1]}set messages(e){this.state.messages=e}async makeRequest(e){var t,r,i;let{trigger:a,metadata:o,headers:s,body:l,messageId:u}=e;this.setStatus({status:"submitted",error:void 0});let c=this.lastMessage;try{let e,r={state:function(e){let{lastMessage:t,messageId:n}=e;return{message:(null==t?void 0:t.role)==="assistant"?t:{id:n,metadata:void 0,role:"assistant",parts:[]},activeTextParts:{},activeReasoningParts:{},partialToolCalls:{}}}({lastMessage:this.state.snapshot(c),messageId:this.generateId()}),abortController:new AbortController};if(this.activeResponse=r,"resume-stream"===a){let t=await this.transport.reconnectToStream({chatId:this.id,metadata:o,headers:s,body:l});if(null==t)return;e=t}else e=await this.transport.sendMessages({chatId:this.id,messages:this.state.messages,abortSignal:r.abortController.signal,metadata:o,headers:s,body:l,trigger:a,messageId:u});let i=e=>this.jobExecutor.run(()=>e({state:r.state,write:()=>{var e;this.setStatus({status:"streaming"}),r.state.message.id===(null==(e=this.lastMessage)?void 0:e.id)?this.state.replaceMessage(this.state.messages.length-1,r.state.message):this.state.pushMessage(r.state.message)}}));await N({stream:function(e){let{stream:t,messageMetadataSchema:r,dataPartSchemas:i,runUpdateMessageJob:a,onError:o,onToolCall:s,onData:l}=e;return t.pipeThrough(new TransformStream({async transform(e,t){await a(async a=>{var u,c,d,h;let{state:p,write:f}=a;function m(e){let t=p.message.parts.filter(M).find(t=>t.toolCallId===e);if(null==t)throw Error("tool-output-error must be preceded by a tool-input-available");return t}function g(e){let t=p.message.parts.filter(e=>"dynamic-tool"===e.type).find(t=>t.toolCallId===e);if(null==t)throw Error("tool-output-error must be preceded by a tool-input-available");return t}function y(e){var t;let n=p.message.parts.find(t=>M(t)&&t.toolCallId===e.toolCallId);null!=n?(n.state=e.state,n.input=e.input,n.output=e.output,n.errorText=e.errorText,n.providerExecuted=null!=(t=e.providerExecuted)?t:n.providerExecuted,null!=e.providerMetadata&&"input-available"===n.state&&(n.callProviderMetadata=e.providerMetadata)):p.message.parts.push({type:"tool-".concat(e.toolName),toolCallId:e.toolCallId,state:e.state,input:e.input,output:e.output,errorText:e.errorText,providerExecuted:e.providerExecuted,...null!=e.providerMetadata?{callProviderMetadata:e.providerMetadata}:{}})}function b(e){let t=p.message.parts.find(t=>"dynamic-tool"===t.type&&t.toolCallId===e.toolCallId);null!=t?(t.state=e.state,t.toolName=e.toolName,t.input=e.input,t.output=e.output,t.errorText=e.errorText,null!=e.providerMetadata&&"input-available"===t.state&&(t.callProviderMetadata=e.providerMetadata)):p.message.parts.push({type:"dynamic-tool",toolName:e.toolName,toolCallId:e.toolCallId,state:e.state,input:e.input,output:e.output,errorText:e.errorText,...null!=e.providerMetadata?{callProviderMetadata:e.providerMetadata}:{}})}async function x(e){if(null!=e){let t=null!=p.message.metadata?function e(t,n){if(void 0===t&&void 0===n)return;if(void 0===t)return n;if(void 0===n)return t;let r={...t};for(let i in n)if(Object.prototype.hasOwnProperty.call(n,i)){let a=n[i];if(void 0===a)continue;let o=i in t?t[i]:void 0,s=null!==a&&"object"==typeof a&&!Array.isArray(a)&&!(a instanceof Date)&&!(a instanceof RegExp),l=null!=o&&"object"==typeof o&&!Array.isArray(o)&&!(o instanceof Date)&&!(o instanceof RegExp);s&&l?r[i]=e(o,a):r[i]=a}return r}(p.message.metadata,e):e;null!=r&&await (0,n.validateTypes)({value:t,schema:r}),p.message.metadata=t}}switch(e.type){case"text-start":{let t={type:"text",text:"",providerMetadata:e.providerMetadata,state:"streaming"};p.activeTextParts[e.id]=t,p.message.parts.push(t),f();break}case"text-delta":{let t=p.activeTextParts[e.id];t.text+=e.delta,t.providerMetadata=null!=(u=e.providerMetadata)?u:t.providerMetadata,f();break}case"text-end":{let t=p.activeTextParts[e.id];t.state="done",t.providerMetadata=null!=(c=e.providerMetadata)?c:t.providerMetadata,delete p.activeTextParts[e.id],f();break}case"reasoning-start":{let t={type:"reasoning",text:"",providerMetadata:e.providerMetadata,state:"streaming"};p.activeReasoningParts[e.id]=t,p.message.parts.push(t),f();break}case"reasoning-delta":{let t=p.activeReasoningParts[e.id];t.text+=e.delta,t.providerMetadata=null!=(d=e.providerMetadata)?d:t.providerMetadata,f();break}case"reasoning-end":{let t=p.activeReasoningParts[e.id];t.providerMetadata=null!=(h=e.providerMetadata)?h:t.providerMetadata,t.state="done",delete p.activeReasoningParts[e.id],f();break}case"file":p.message.parts.push({type:"file",mediaType:e.mediaType,url:e.url}),f();break;case"source-url":p.message.parts.push({type:"source-url",sourceId:e.sourceId,url:e.url,title:e.title,providerMetadata:e.providerMetadata}),f();break;case"source-document":p.message.parts.push({type:"source-document",sourceId:e.sourceId,mediaType:e.mediaType,title:e.title,filename:e.filename,providerMetadata:e.providerMetadata}),f();break;case"tool-input-start":{let t=p.message.parts.filter(M);p.partialToolCalls[e.toolCallId]={text:"",toolName:e.toolName,index:t.length,dynamic:e.dynamic},e.dynamic?b({toolCallId:e.toolCallId,toolName:e.toolName,state:"input-streaming",input:void 0}):y({toolCallId:e.toolCallId,toolName:e.toolName,state:"input-streaming",input:void 0,providerExecuted:e.providerExecuted}),f();break}case"tool-input-delta":{let t=p.partialToolCalls[e.toolCallId];t.text+=e.inputTextDelta;let{value:n}=await T(t.text);t.dynamic?b({toolCallId:e.toolCallId,toolName:t.toolName,state:"input-streaming",input:n}):y({toolCallId:e.toolCallId,toolName:t.toolName,state:"input-streaming",input:n}),f();break}case"tool-input-available":e.dynamic?b({toolCallId:e.toolCallId,toolName:e.toolName,state:"input-available",input:e.input,providerMetadata:e.providerMetadata}):y({toolCallId:e.toolCallId,toolName:e.toolName,state:"input-available",input:e.input,providerExecuted:e.providerExecuted,providerMetadata:e.providerMetadata}),f(),s&&!e.providerExecuted&&await s({toolCall:e});break;case"tool-output-available":if(e.dynamic){let t=g(e.toolCallId);b({toolCallId:e.toolCallId,toolName:t.toolName,state:"output-available",input:t.input,output:e.output})}else{let t=m(e.toolCallId);y({toolCallId:e.toolCallId,toolName:I(t),state:"output-available",input:t.input,output:e.output,providerExecuted:e.providerExecuted})}f();break;case"tool-output-error":if(e.dynamic){let t=g(e.toolCallId);b({toolCallId:e.toolCallId,toolName:t.toolName,state:"output-error",input:t.input,errorText:e.errorText})}else{let t=m(e.toolCallId);y({toolCallId:e.toolCallId,toolName:I(t),state:"output-error",input:t.input,errorText:e.errorText})}f();break;case"start-step":p.message.parts.push({type:"step-start"});break;case"finish-step":p.activeTextParts={},p.activeReasoningParts={};break;case"start":null!=e.messageId&&(p.message.id=e.messageId),await x(e.messageMetadata),(null!=e.messageId||null!=e.messageMetadata)&&f();break;case"finish":case"message-metadata":await x(e.messageMetadata),null!=e.messageMetadata&&f();break;case"error":null==o||o(Error(e.errorText));break;default:if(e.type.startsWith("data-")){if((null==i?void 0:i[e.type])!=null&&await (0,n.validateTypes)({value:e.data,schema:i[e.type]}),e.transient){null==l||l(e);break}let t=null!=e.id?p.message.parts.find(t=>e.type===t.type&&e.id===t.id):void 0;null!=t?t.data=e.data:p.message.parts.push(e),null==l||l(e),f()}}t.enqueue(e)})}}))}({stream:e,onToolCall:this.onToolCall,onData:this.onData,messageMetadataSchema:this.messageMetadataSchema,dataPartSchemas:this.dataPartSchemas,runUpdateMessageJob:i,onError:e=>{throw e}}),onError:e=>{throw e}}),null==(t=this.onFinish)||t.call(this,{message:r.state.message}),this.setStatus({status:"ready"})}catch(e){if("AbortError"===e.name)return this.setStatus({status:"ready"}),null;this.onError&&e instanceof Error&&this.onError(e),this.setStatus({status:"error",error:e})}finally{this.activeResponse=void 0}(null==(r=this.sendAutomaticallyWhen)?void 0:r.call(this,{messages:this.state.messages}))&&await this.makeRequest({trigger:"submit-message",messageId:null==(i=this.lastMessage)?void 0:i.id,metadata:o,headers:s,body:l})}constructor({generateId:e=n.generateId,id:t=e(),transport:r=new en,messageMetadataSchema:i,dataPartSchemas:a,state:o,onError:s,onToolCall:l,onFinish:u,onData:c,sendAutomaticallyWhen:d}){var h=this;this.activeResponse=void 0,this.jobExecutor=new D,this.sendMessage=async(e,t)=>{var n,r,i,a;let o;if(null==e)return void await this.makeRequest({trigger:"submit-message",messageId:null==(n=this.lastMessage)?void 0:n.id,...t});if(o="text"in e||"files"in e?{parts:[...Array.isArray(e.files)?e.files:await ee(e.files),..."text"in e&&null!=e.text?[{type:"text",text:e.text}]:[]]}:e,null!=e.messageId){let t=this.state.messages.findIndex(t=>t.id===e.messageId);if(-1===t)throw Error("message with id ".concat(e.messageId," not found"));if("user"!==this.state.messages[t].role)throw Error("message with id ".concat(e.messageId," is not a user message"));this.state.messages=this.state.messages.slice(0,t+1),this.state.replaceMessage(t,{...o,id:e.messageId,role:null!=(r=o.role)?r:"user",metadata:e.metadata})}else this.state.pushMessage({...o,id:null!=(i=o.id)?i:this.generateId(),role:null!=(a=o.role)?a:"user",metadata:e.metadata});await this.makeRequest({trigger:"submit-message",messageId:e.messageId,...t})},this.regenerate=async function(){let{messageId:e,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=null==e?h.state.messages.length-1:h.state.messages.findIndex(t=>t.id===e);if(-1===n)throw Error("message ".concat(e," not found"));h.state.messages=h.state.messages.slice(0,"assistant"===h.messages[n].role?n:n+1),await h.makeRequest({trigger:"regenerate-message",messageId:e,...t})},this.resumeStream=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};await h.makeRequest({trigger:"resume-stream",...e})},this.clearError=()=>{"error"===this.status&&(this.state.error=void 0,this.setStatus({status:"ready"}))},this.addToolResult=async e=>{let{tool:t,toolCallId:n,output:r}=e;return this.jobExecutor.run(async()=>{var e,t;let i=this.state.messages,a=i[i.length-1];this.state.replaceMessage(i.length-1,{...a,parts:a.parts.map(e=>M(e)&&e.toolCallId===n?{...e,state:"output-available",output:r}:e)}),this.activeResponse&&(this.activeResponse.state.message.parts=this.activeResponse.state.message.parts.map(e=>M(e)&&e.toolCallId===n?{...e,state:"output-available",output:r,errorText:void 0}:e)),"streaming"!==this.status&&"submitted"!==this.status&&(null==(e=this.sendAutomaticallyWhen)?void 0:e.call(this,{messages:this.state.messages}))&&this.makeRequest({trigger:"submit-message",messageId:null==(t=this.lastMessage)?void 0:t.id})})},this.stop=async()=>{var e;("streaming"===this.status||"submitted"===this.status)&&(null==(e=this.activeResponse)?void 0:e.abortController)&&this.activeResponse.abortController.abort()},this.id=t,this.transport=r,this.generateId=e,this.messageMetadataSchema=i,this.dataPartSchemas=a,this.state=o,this.onError=s,this.onToolCall=l,this.onFinish=u,this.onData=c,this.sendAutomaticallyWhen=d}}},489862:e=>{var{m:t,e:n}=e;t.exports=function(e,t){let n;if("function"!=typeof e)throw TypeError("Expected the first argument to be a `function`, got `".concat(typeof e,"`."));let r=0;return function(){for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];clearTimeout(n);let s=Date.now(),l=t-(s-r);l<=0?(r=s,e.apply(this,a)):n=setTimeout(()=>{r=Date.now(),e.apply(this,a)},l)}}},410574:e=>{"use strict";e.s({ERROR_REVALIDATE_EVENT:()=>i,FOCUS_EVENT:()=>t,MUTATE_EVENT:()=>r,RECONNECT_EVENT:()=>n});let t=0,n=1,r=2,i=3},657442:e=>{"use strict";e.s({dequal:()=>function e(n,r){var i,a;if(n===r)return!0;if(n&&r&&(i=n.constructor)===r.constructor){if(i===Date)return n.getTime()===r.getTime();if(i===RegExp)return n.toString()===r.toString();if(i===Array){if((a=n.length)===r.length)for(;a--&&e(n[a],r[a]););return -1===a}if(!i||"object"==typeof n){for(i in a=0,n)if(t.call(n,i)&&++a&&!t.call(r,i)||!(i in r)||!e(n[i],r[i]))return!1;return Object.keys(r).length===a}}return n!=n&&r!=r}});var t=Object.prototype.hasOwnProperty},644398:e=>{"use strict";e.s({B:()=>d,I:()=>_,O:()=>s,S:()=>q,U:()=>o,a:()=>u,b:()=>i,c:()=>U,d:()=>W,e:()=>l,f:()=>V,g:()=>G,i:()=>m,m:()=>c,n:()=>F,o:()=>j,r:()=>C,s:()=>R,t:()=>A,u:()=>E,z:()=>b});var t=e.i(373150),n=e.i(410574),r=e.i(657442);let i=new WeakMap,a=()=>{},o=a(),s=Object,l=e=>e===o,u=e=>"function"==typeof e,c=(e,t)=>({...e,...t}),d=e=>u(e.then),h={},p={},f="undefined",m=typeof window!=f,g=typeof document!=f,y=m&&"Deno"in window,b=(e,t)=>{let n=i.get(e);return[()=>!l(t)&&e.get(t)||h,r=>{if(!l(t)){let i=e.get(t);t in p||(p[t]=i),n[5](t,c(i,r),i||h)}},n[6],()=>!l(t)&&t in p?p[t]:!l(t)&&e.get(t)||h]},x=!0,[w,k]=m&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[a,a],S={initFocus:e=>(g&&document.addEventListener("visibilitychange",e),w("focus",e),()=>{g&&document.removeEventListener("visibilitychange",e),k("focus",e)}),initReconnect:e=>{let t=()=>{x=!0,e()},n=()=>{x=!1};return w("online",t),w("offline",n),()=>{k("online",t),k("offline",n)}}},_=!t.default.useId,C=!m||y,A=e=>m&&typeof window.requestAnimationFrame!=f?window.requestAnimationFrame(e):setTimeout(e,1),E=C?t.useEffect:t.useLayoutEffect,T="undefined"!=typeof navigator&&navigator.connection,M=!C&&T&&(["slow-2g","2g"].includes(T.effectiveType)||T.saveData),I=new WeakMap,N=(e,t)=>e==="[object ".concat(t,"]"),D=0,P=e=>{let t,n,r=typeof e,i=s.prototype.toString.call(e),a=N(i,"Date"),o=N(i,"RegExp"),u=N(i,"Object");if(s(e)!==e||a||o)t=a?e.toJSON():"symbol"==r?e.toString():"string"==r?JSON.stringify(e):""+e;else{if(t=I.get(e))return t;if(t=++D+"~",I.set(e,t),Array.isArray(e)){for(n=0,t="@";n<e.length;n++)t+=P(e[n])+",";I.set(e,t)}if(u){t="#";let r=s.keys(e).sort();for(;!l(n=r.pop());)l(e[n])||(t+=n+":"+P(e[n])+",");I.set(e,t)}}return t},R=e=>{if(u(e))try{e=e()}catch(t){e=""}let t=e;return[e="string"==typeof e?e:(Array.isArray(e)?e.length:e)?P(e):"",t]},O=0,j=()=>++O;async function F(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let[a,s,h,p]=t,f=c({populateCache:!0,throwOnError:!0},"boolean"==typeof p?{revalidate:p}:p||{}),m=f.populateCache,g=f.rollbackOnError,y=f.optimisticData,x=f.throwOnError;if(u(s)){let e=[];for(let t of a.keys())!/^\$(inf|sub)\$/.test(t)&&s(a.get(t)._k)&&e.push(t);return Promise.all(e.map(w))}return w(s);async function w(e){let r,[s]=R(e);if(!s)return;let[c,p]=b(a,s),[w,k,S,_]=i.get(a),C=()=>{let t=w[s];return(u(f.revalidate)?f.revalidate(c().data,e):!1!==f.revalidate)&&(delete S[s],delete _[s],t&&t[0])?t[0](n.MUTATE_EVENT).then(()=>c().data):c().data};if(t.length<3)return C();let A=h,E=!1,T=j();k[s]=[T,0];let M=!l(y),I=c(),N=I.data,D=I._c,P=l(D)?N:D;if(M&&p({data:y=u(y)?y(P,N):y,_c:P}),u(A))try{A=A(P)}catch(e){r=e,E=!0}if(A&&d(A)){let e;if(A=await A.catch(e=>{r=e,E=!0}),T!==k[s][0]){if(E)throw r;return A}E&&M&&(e=r,"function"==typeof g?g(e):!1!==g)&&(m=!0,p({data:P,_c:o}))}if(m&&!E&&(u(m)?p({data:m(A,P),error:o,_c:o}):p({data:A,error:o,_c:o})),k[s][1]=j(),Promise.resolve(C()).then(()=>{p({_c:o})}),E){if(x)throw r;return}return A}}let L=(e,t)=>{for(let n in e)e[n][0]&&e[n][0](t)},z=(e,t)=>{if(!i.has(e)){let r=c(S,t),s=Object.create(null),l=F.bind(o,e),u=a,d=Object.create(null),h=(e,t)=>{let n=d[e]||[];return d[e]=n,n.push(t),()=>n.splice(n.indexOf(t),1)},p=(t,n,r)=>{e.set(t,n);let i=d[t];if(i)for(let e of i)e(n,r)},f=()=>{if(!i.has(e)&&(i.set(e,[s,Object.create(null),Object.create(null),Object.create(null),l,p,h]),!C)){let t=r.initFocus(setTimeout.bind(o,L.bind(o,s,n.FOCUS_EVENT))),a=r.initReconnect(setTimeout.bind(o,L.bind(o,s,n.RECONNECT_EVENT)));u=()=>{t&&t(),a&&a(),i.delete(e)}}};return f(),[e,l,f,u]}return[e,i.get(e)[4]]},B=r.dequal,[U,H]=z(new Map),W=c({onLoadingSlow:a,onSuccess:a,onError:a,onErrorRetry:(e,t,n,r,i)=>{let a=n.errorRetryCount,o=i.retryCount,s=~~((Math.random()+.5)*(1<<(o<8?o:8)))*n.errorRetryInterval;(l(a)||!(o>a))&&setTimeout(r,s,i)},onDiscarded:a,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:M?1e4:5e3,focusThrottleInterval:5e3,dedupingInterval:2e3,loadingTimeout:M?5e3:3e3,compare:B,isPaused:()=>!1,cache:U,mutate:H,fallback:{}},{isOnline:()=>x,isVisible:()=>{let e=g&&document.visibilityState;return l(e)||"hidden"!==e}}),V=(e,t)=>{let n=c(e,t);if(t){let{use:r,fallback:i}=e,{use:a,fallback:o}=t;r&&a&&(n.use=r.concat(a)),i&&o&&(n.fallback=c(i,o))}return n},q=(0,t.createContext)({}),G=e=>{let{value:n}=e,r=(0,t.useContext)(q),i=u(n),a=(0,t.useMemo)(()=>i?n(r):n,[i,r,n]),s=(0,t.useMemo)(()=>i?a:V(r,a),[i,r,a]),l=a&&a.provider,d=(0,t.useRef)(o);l&&!d.current&&(d.current=z(l(s.cache||U),a));let h=d.current;return h&&(s.cache=h[0],s.mutate=h[1]),E(()=>{if(h)return h[2]&&h[2](),h[3]},[]),(0,t.createElement)(q.Provider,c(e,{value:s}))}},285181:e=>{"use strict";e.s({OBJECT:()=>t.O});var t=e.i(644398)},328704:e=>{"use strict";e.s({SWRConfig:()=>t.g});var t=e.i(644398)},846693:e=>{"use strict";e.s({defaultConfig:()=>t.d});var t=e.i(644398)},879634:e=>{"use strict";e.s({INFINITE_PREFIX:()=>t});let t="$inf$"},710133:e=>{"use strict";e.s({subscribeCallback:()=>s,withArgs:()=>o});var t=e.i(644398),n=e.i(879634),r=e.i(373150);let i=t.i&&window.__SWR_DEVTOOLS_USE__,a=(i?window.__SWR_DEVTOOLS_USE__:[]).concat(e=>(r,i,a)=>{let o=i&&function(){for(var e=arguments.length,a=Array(e),o=0;o<e;o++)a[o]=arguments[o];let[s]=(0,t.s)(r),[,,,l]=t.b.get(t.c);if(s.startsWith(n.INFINITE_PREFIX))return i(...a);let u=l[s];return(0,t.e)(u)?i(...a):(delete l[s],u)};return e(r,o,a)}),o=e=>function(){for(var n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];let s=(0,t.m)(t.d,(0,r.useContext)(t.S)),[l,u,c]=(0,t.a)(i[1])?[i[0],i[1],i[2]||{}]:[i[0],null,(null===i[1]?i[2]:i[1])||{}],d=(0,t.f)(s,c),h=e,{use:p}=d,f=(p||[]).concat(a);for(let e=f.length;e--;)h=f[e](h);return h(l,u||d.fetcher||null,d)},s=(e,t,n)=>{let r=t[e]||(t[e]=[]);return r.push(n),()=>{let e=r.indexOf(n);e>=0&&(r[e]=r[r.length-1],r.pop())}};i&&(window.__SWR_DEVTOOLS_REACT__=r.default)},791772:e=>{"use strict";e.s({SWRGlobalState:()=>t.b});var t=e.i(644398)},702176:e=>{"use strict";e.s({serialize:()=>t.s});var t=e.i(644398)},610664:e=>{"use strict";e.s({createCacheHelper:()=>t.z});var t=e.i(644398)},482553:e=>{"use strict";e.s({isUndefined:()=>t.e});var t=e.i(644398)},561527:e=>{"use strict";e.s({UNDEFINED:()=>t.U});var t=e.i(644398)},247705:e=>{"use strict";e.s({isPromiseLike:()=>t.B});var t=e.i(644398)},383471:e=>{"use strict";e.s({getTimestamp:()=>t.o});var t=e.i(644398)},910830:e=>{"use strict";e.s({isFunction:()=>t.a});var t=e.i(644398)},895698:e=>{"use strict";e.s({revalidateEvents:()=>t});var t=e.i(410574)},375290:e=>{"use strict";e.s({internalMutate:()=>t.n});var t=e.i(644398)},954105:e=>{"use strict";e.s({useIsomorphicLayoutEffect:()=>t.u});var t=e.i(644398)},641632:e=>{"use strict";e.s({IS_SERVER:()=>t.r});var t=e.i(644398)},206004:e=>{"use strict";e.s({rAF:()=>t.t});var t=e.i(644398)},417814:e=>{"use strict";e.s({IS_REACT_LEGACY:()=>t.I});var t=e.i(644398)},267902:e=>{"use strict";e.s({mergeObjects:()=>t.m});var t=e.i(644398)},678404:e=>{"use strict";e.s({default:()=>E});var t=e.i(373150),n=e.i(709035),r=e.i(285181),i=e.i(328704),a=e.i(846693),o=e.i(710133),s=e.i(791772),l=e.i(702176),u=e.i(610664),c=e.i(482553),d=e.i(561527),h=e.i(247705),p=e.i(383471),f=e.i(910830),m=e.i(895698),g=e.i(375290),y=e.i(954105),b=e.i(641632),x=e.i(206004),w=e.i(417814),k=e.i(267902);let S=()=>{},_=S();new WeakMap;let C=t.default.use||(e=>{switch(e.status){case"pending":throw e;case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e}}),A={dedupe:!0};r.OBJECT.defineProperty(i.SWRConfig,"defaultValue",{value:a.defaultConfig});let E=(0,o.withArgs)((e,r,i)=>{let{cache:a,compare:S,suspense:_,fallbackData:E,revalidateOnMount:T,revalidateIfStale:M,refreshInterval:I,refreshWhenHidden:N,refreshWhenOffline:D,keepPreviousData:P}=i,[R,O,j,F]=s.SWRGlobalState.get(a),[L,z]=(0,l.serialize)(e),B=(0,t.useRef)(!1),U=(0,t.useRef)(!1),H=(0,t.useRef)(L),W=(0,t.useRef)(r),V=(0,t.useRef)(i),q=()=>V.current.isVisible()&&V.current.isOnline(),[G,$,K,Y]=(0,u.createCacheHelper)(a,L),X=(0,t.useRef)({}).current,Z=(0,c.isUndefined)(E)?(0,c.isUndefined)(i.fallback)?d.UNDEFINED:i.fallback[L]:E,J=(e,t)=>{for(let n in X)if("data"===n){if(!S(e[n],t[n])&&(!(0,c.isUndefined)(e[n])||!S(es,t[n])))return!1}else if(t[n]!==e[n])return!1;return!0},Q=(0,t.useMemo)(()=>{let e=!!L&&!!r&&((0,c.isUndefined)(T)?!V.current.isPaused()&&!_&&!1!==M:T),t=t=>{let n=(0,k.mergeObjects)(t);return(delete n._k,e)?{isValidating:!0,isLoading:!0,...n}:n},n=G(),i=Y(),a=t(n),o=n===i?a:t(i),s=a;return[()=>{let e=t(G());return J(e,s)?(s.data=e.data,s.isLoading=e.isLoading,s.isValidating=e.isValidating,s.error=e.error,s):(s=e,e)},()=>o]},[a,L]),ee=(0,n.useSyncExternalStore)((0,t.useCallback)(e=>K(L,(t,n)=>{J(n,t)||e()}),[a,L]),Q[0],Q[1]),et=!B.current,en=R[L]&&R[L].length>0,er=ee.data,ei=(0,c.isUndefined)(er)?Z&&(0,h.isPromiseLike)(Z)?C(Z):Z:er,ea=ee.error,eo=(0,t.useRef)(ei),es=P?(0,c.isUndefined)(er)?(0,c.isUndefined)(eo.current)?ei:eo.current:er:ei,el=(!en||!!(0,c.isUndefined)(ea))&&(et&&!(0,c.isUndefined)(T)?T:!V.current.isPaused()&&(_?!(0,c.isUndefined)(ei)&&M:(0,c.isUndefined)(ei)||M)),eu=!!(L&&r&&et&&el),ec=(0,c.isUndefined)(ee.isValidating)?eu:ee.isValidating,ed=(0,c.isUndefined)(ee.isLoading)?eu:ee.isLoading,eh=(0,t.useCallback)(async e=>{let t,n,r=W.current;if(!L||!r||U.current||V.current.isPaused())return!1;let a=!0,o=e||{},s=!j[L]||!o.dedupe,l=()=>w.IS_REACT_LEGACY?!U.current&&L===H.current&&B.current:L===H.current,u={isValidating:!1,isLoading:!1},h=()=>{$(u)},g=()=>{let e=j[L];e&&e[1]===n&&delete j[L]},y={isValidating:!0};(0,c.isUndefined)(G().data)&&(y.isLoading=!0);try{if(s&&($(y),i.loadingTimeout&&(0,c.isUndefined)(G().data)&&setTimeout(()=>{a&&l()&&V.current.onLoadingSlow(L,i)},i.loadingTimeout),j[L]=[r(z),(0,p.getTimestamp)()]),[t,n]=j[L],t=await t,s&&setTimeout(g,i.dedupingInterval),!j[L]||j[L][1]!==n)return s&&l()&&V.current.onDiscarded(L),!1;u.error=d.UNDEFINED;let e=O[L];if(!(0,c.isUndefined)(e)&&(n<=e[0]||n<=e[1]||0===e[1]))return h(),s&&l()&&V.current.onDiscarded(L),!1;let o=G().data;u.data=S(o,t)?o:t,s&&l()&&V.current.onSuccess(t,L,i)}catch(n){g();let e=V.current,{shouldRetryOnError:t}=e;!e.isPaused()&&(u.error=n,s&&l()&&(e.onError(n,L,e),(!0===t||(0,f.isFunction)(t)&&t(n))&&(!V.current.revalidateOnFocus||!V.current.revalidateOnReconnect||q())&&e.onErrorRetry(n,L,e,e=>{let t=R[L];t&&t[0]&&t[0](m.revalidateEvents.ERROR_REVALIDATE_EVENT,e)},{retryCount:(o.retryCount||0)+1,dedupe:!0})))}return a=!1,h(),!0},[L,a]),ep=(0,t.useCallback)(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,g.internalMutate)(a,H.current,...t)},[]);if((0,y.useIsomorphicLayoutEffect)(()=>{W.current=r,V.current=i,(0,c.isUndefined)(er)||(eo.current=er)}),(0,y.useIsomorphicLayoutEffect)(()=>{if(!L)return;let e=eh.bind(d.UNDEFINED,A),t=0;V.current.revalidateOnFocus&&(t=Date.now()+V.current.focusThrottleInterval);let n=(0,o.subscribeCallback)(L,R,function(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n==m.revalidateEvents.FOCUS_EVENT){let n=Date.now();V.current.revalidateOnFocus&&n>t&&q()&&(t=n+V.current.focusThrottleInterval,e())}else if(n==m.revalidateEvents.RECONNECT_EVENT)V.current.revalidateOnReconnect&&q()&&e();else if(n==m.revalidateEvents.MUTATE_EVENT)return eh();else if(n==m.revalidateEvents.ERROR_REVALIDATE_EVENT)return eh(r)});return U.current=!1,H.current=L,B.current=!0,$({_k:z}),el&&!j[L]&&((0,c.isUndefined)(ei)||b.IS_SERVER?e():(0,x.rAF)(e)),()=>{U.current=!0,n()}},[L]),(0,y.useIsomorphicLayoutEffect)(()=>{let e;function t(){let t=(0,f.isFunction)(I)?I(G().data):I;t&&-1!==e&&(e=setTimeout(n,t))}function n(){!G().error&&(N||V.current.isVisible())&&(D||V.current.isOnline())?eh(A).then(t):t()}return t(),()=>{e&&(clearTimeout(e),e=-1)}},[I,N,D,L]),(0,t.useDebugValue)(es),_&&(0,c.isUndefined)(ei)&&L){if(!w.IS_REACT_LEGACY&&b.IS_SERVER)throw Error("Fallback data is required when using Suspense in SSR.");W.current=r,V.current=i,U.current=!1;let e=F[L];if((0,c.isUndefined)(e)||C(ep(e)),(0,c.isUndefined)(ea)){let e=eh(A);(0,c.isUndefined)(es)||(e.status="fulfilled",e.value=!0),C(e)}else throw ea}return{mutate:ep,get data(){return X.data=!0,es},get error(){return X.error=!0,ea},get isValidating(){return X.isValidating=!0,ec},get isLoading(){return X.isLoading=!0,ed}}})},149620:e=>{"use strict";e.s({useCompletion:()=>m});var t,n,r,i,a,o,s,l,u,c=e.i(373150),d=e.i(987739),h=e.i(489862),p=e.i(678404);e.i(279085);(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)};function f(e,t){return null!=t?(0,h.default)(e,t):e}function m(){let{api:e="/api/completion",id:t,initialCompletion:n="",initialInput:r="",credentials:i,headers:a,body:o,streamProtocol:s="data",fetch:l,onFinish:u,onError:h,experimental_throttle:m}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},g=(0,c.useId)(),y=t||g,{data:b,mutate:x}=(0,p.default)([e,y],null,{fallbackData:n}),{data:w=!1,mutate:k}=(0,p.default)([y,"loading"],null),[S,_]=(0,c.useState)(void 0),[C,A]=(0,c.useState)(null),E=(0,c.useRef)({credentials:i,headers:a,body:o});(0,c.useEffect)(()=>{E.current={credentials:i,headers:a,body:o}},[i,a,o]);let T=(0,c.useCallback)(async(t,n)=>(0,d.callCompletionApi)({api:e,prompt:t,credentials:E.current.credentials,headers:{...E.current.headers,...null==n?void 0:n.headers},body:{...E.current.body,...null==n?void 0:n.body},streamProtocol:s,fetch:l,setCompletion:f(e=>x(e,!1),m),setLoading:k,setError:_,setAbortController:A,onFinish:u,onError:h}),[x,k,e,E,A,u,h,_,s,l,m]),M=(0,c.useCallback)(()=>{C&&(C.abort(),A(null))},[C]),I=(0,c.useCallback)(e=>{x(e,!1)},[x]),N=(0,c.useCallback)(async(e,t)=>T(e,t),[T]),[D,P]=(0,c.useState)(r),R=(0,c.useCallback)(e=>{var t;return null==(t=null==e?void 0:e.preventDefault)||t.call(e),D?N(D):void 0},[D,N]),O=(0,c.useCallback)(e=>{P(e.target.value)},[P]);return{completion:b,complete:N,error:S,setCompletion:I,stop:M,input:D,setInput:P,handleInputChange:O,handleSubmit:R,isLoading:w}}t=new WeakMap,n=new WeakMap,r=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakMap,s=new WeakMap,l=new WeakMap,u=new WeakMap,d.AbstractChat,new WeakMap},947529:e=>{"use strict";e.s({createCompletionHandler:()=>r}),e.i(131841);var t=e.i(968617),n=e.i(225611);let r=e=>{let r=null,i=t=>{let n=e.state.schema,r=[];return t.split("\n").forEach((e,t)=>{if(e.trim())if(0===t){let t=n.text(e);r.push(t)}else{let t=n.text(e),i=n.nodes.paragraph.create({},t);r.push(i)}}),r},a=e=>e.reduce((e,t)=>e+t.nodeSize,0);return{handleCompletion:o=>{if(!o||!r)return;let{initial:s,currentNodes:l}=r,{state:u}=e,{tr:c}=u;if(0===l.length){let{from:e,to:t}=s,n=i(o),a=Math.min(c.doc.content.size,t);c.replaceWith(e,a,n),r.currentNodes=n,c.setMeta("addToHistory",!0)}else{let e=i(o),t=s.from,n=t+a(l),u=Math.min(c.doc.content.size,n);c.replaceWith(t,u,e),r.currentNodes=e,c.setMeta("addToHistory",!1)}let d=s.from,h=s.from+a(r.currentNodes);c.setSelection(t.TextSelection.create(c.doc,d,h)),c.setMeta(n.DECO_NAME,{from:d,to:h,action:"replace"}),e.dispatch(c)},clearState:t=>{var n,i;let{state:a}=e,{selection:o}=a,s=null!=(n=null==t?void 0:t.from)?n:o.from,l=null!=(i=null==t?void 0:t.to)?i:o.to,u=[];a.doc.nodesBetween(s,l,(e,t)=>!(t>=s)||!(t<l)||(u.push(e.copy(e.content)),!1)),r={initial:{from:s,to:l},currentNodes:[],originalContent:u}},acceptCompletion:()=>{r&&e&&(r=null)},rejectCompletion:()=>{if(!r||!e)return;let{initial:t,originalContent:n}=r,{state:i}=e,{tr:o}=i,s=t.from,l=s+a(r.currentNodes),u=Math.min(o.doc.content.size,l);n&&n.length>0?o.replaceWith(s,u,n):o.delete(s,u),o.setMeta("addToHistory",!1),e.dispatch(o),r=null}}}},146172:e=>{"use strict";e.s({default:()=>o});var t=e.i(449097),n=e.i(814733),r=e.i(149620),i=e.i(373150),a=e.i(947529);let o=e=>{let{editor:o}=e,{complete:s,completion:l,stop:u,setCompletion:c,...d}=(0,r.useCompletion)({api:"/api/generate-completion"}),h=e=>{f.user.limits.setData(void 0,t=>t?{...t,wordCount:(null==t?void 0:t.utilityCount)+e.trim().split(/[^\w'']+/).filter(e=>e.length>0).length}:t)},p=(0,i.useRef)({current:null}),f=n.api.useUtils(),[m,g]=(0,i.useState)(""),{settings:y}=(0,t.useSettings)();(0,i.useEffect)(()=>{if(!o){p.current={current:null};return}p.current.current=(0,a.createCompletionHandler)(o.view)},[o]);let b=async(e,t)=>{let n,r=p.current.current;if(r&&(null==y?void 0:y.editorModelName)){h(l),n&&clearTimeout(n),n=setTimeout(()=>{f.user.limits.invalidate()},400),r.clearState(t),g(""),c("");try{return await s(e.prompt,{body:{text:e.text,customPrompt:e.customPrompt,sourceChatbotId:null}})}catch(e){throw console.error("Error calling complete():",e),e}}};(0,i.useEffect)(()=>{let e;if(o&&l&&p.current.current&&(null==y?void 0:y.editorModelName))return g(l),h(l),e&&clearTimeout(e),e=setTimeout(()=>{f.user.limits.invalidate()},400),p.current.current.handleCompletion(l),()=>{clearTimeout(e)}},[l,o]);let x=d.isLoading||l&&l.length>0;return{completeFn:b,completion:m,rawCompletion:l,stop:u,acceptCompletion:()=>{let e=p.current.current;e&&(e.acceptCompletion(),u(),g(""),c(""))},rejectCompletion:()=>{let e=p.current.current;e&&(e.rejectCompletion(),u(),g(""),setTimeout(()=>{c("")},0))},isCompleting:x,...d}}},644798:e=>{"use strict";e.s({default:()=>M});var t=e.i(290479),n=e.i(592103),r=e.i(874133),i=e.i(888472),a=e.i(425683),o=e.i(441729),s=e.i(519927),l=e.i(909210),u=e.i(334145),c=e.i(34818),d=e.i(772476),h=e.i(373150),p=e.i(286738),f=e.i(704255),m=e.i(410622),g=e.i(32055),y=e.i(450807),b=e.i(958962),x=e.i(476440),w=e.i(872967),k=e.i(950347),S=e.i(252390),_=e.i(289702),C=e.i(146172);let A=[{title:"Improve",tooltip:"Enhance clarity and quality",loadingText:"Improving...",icon:s.PencilLine,prompt:"improve"},{title:"Paraphrase",tooltip:"Rewrite in different words",loadingText:"Paraphrasing...",icon:l.RefreshCw,prompt:"explain"},{title:"Expand",tooltip:"Add more detail and context",loadingText:"Expanding...",icon:a.Maximize2,prompt:"expand"},{title:"Shorten",tooltip:"Make more concise",loadingText:"Shortening...",icon:o.Minimize2,prompt:"shorten"}],E=e=>{let{action:n,onClick:r}=e;return(0,t.jsx)(x.ReusableTooltip,{content:n.tooltip,asChild:!0,children:(0,t.jsx)(f.Button,{type:"button",variant:"ghost",onClick:r,className:(0,_.cn)("group inline-flex items-center gap-2 px-5 py-2 rounded-4 text-sm font-medium transition-all duration-200 cursor-pointer","bg-secondary hover:bg-secondary-hover text-text-primary","focus-visible:ring-0 focus-visible:ring-offset-0","w-fit min-w-0 max-w-full"),size:"icon",leadingIcon:n.icon&&(0,t.jsx)(n.icon,{size:14,className:"flex-shrink-0"}),children:(0,t.jsx)("span",{className:"text-sm font-medium truncate min-w-0",children:n.title})})})},T=e=>{let{onAccept:n,onReject:a,onTryAgain:o,onInsertBelow:s}=e;return(0,h.useEffect)(()=>{let e=e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),n())};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[n,a]),(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,t.jsx)(x.ReusableTooltip,{content:"Replace selected text with AI suggestion",asChild:!0,children:(0,t.jsx)(f.Button,{type:"button",variant:"ghost",onClick:n,className:(0,_.cn)("group inline-flex items-center gap-2 px-5 py-2 rounded-4 text-sm font-medium transition-all duration-200 cursor-pointer","bg-secondary hover:bg-secondary-hover text-text-primary","focus-visible:ring-0 focus-visible:ring-offset-0","w-fit min-w-0 max-w-full"),size:"icon",leadingIcon:(0,t.jsx)(r.Check,{size:14,className:"flex-shrink-0"}),secondaryLabel:"ENTER",children:(0,t.jsx)("span",{className:"text-sm font-medium truncate min-w-0",children:"Accept"})})}),(0,t.jsx)(x.ReusableTooltip,{content:"Keep original text unchanged",asChild:!0,children:(0,t.jsx)(f.Button,{type:"button",variant:"ghost",onClick:a,className:(0,_.cn)("group inline-flex items-center gap-2 px-5 py-2 rounded-4 text-sm font-medium transition-all duration-200 cursor-pointer","bg-secondary hover:bg-secondary-hover text-text-primary","focus-visible:ring-0 focus-visible:ring-offset-0","w-fit min-w-0 max-w-full"),size:"icon",leadingIcon:(0,t.jsx)(u.X,{size:14,className:"flex-shrink-0"}),children:(0,t.jsx)("span",{className:"text-sm font-medium truncate min-w-0",children:"Discard"})})}),(0,t.jsx)(x.ReusableTooltip,{content:"Generate a new AI suggestion",asChild:!0,children:(0,t.jsx)(f.Button,{type:"button",variant:"ghost",onClick:o,className:(0,_.cn)("group inline-flex items-center gap-2 px-5 py-2 rounded-4 text-sm font-medium transition-all duration-200 cursor-pointer","bg-secondary hover:bg-secondary-hover text-text-primary","focus-visible:ring-0 focus-visible:ring-offset-0","w-fit min-w-0 max-w-full"),size:"icon",leadingIcon:(0,t.jsx)(l.RefreshCw,{size:14,className:"flex-shrink-0"}),children:(0,t.jsx)("span",{className:"text-sm font-medium truncate min-w-0",children:"Try Again"})})}),(0,t.jsx)(x.ReusableTooltip,{content:"Add suggestion as new paragraph",asChild:!0,children:(0,t.jsx)(f.Button,{type:"button",variant:"ghost",onClick:s,className:(0,_.cn)("group inline-flex items-center gap-2 px-5 py-2 rounded-4 text-sm font-medium transition-all duration-200 cursor-pointer","bg-secondary hover:bg-secondary-hover text-text-primary","focus-visible:ring-0 focus-visible:ring-offset-0","w-fit min-w-0 max-w-full"),size:"icon",leadingIcon:(0,t.jsx)(i.CornerDownRight,{size:14,className:"flex-shrink-0"}),children:(0,t.jsx)("span",{className:"text-sm font-medium truncate min-w-0",children:"Insert Below"})})})]})},M=e=>{let{onInputChange:r,editor:i,onBlur:a,chatbotId:o,disabledInput:s,setEditMode:l}=e,u=(0,d.useAnimationControls)(),{isDowntime:f}=(0,w.default)(),{exceededLimits:x}=(0,k.default)(),{track:M}=(0,S.default)(),{showUpgrade:I}=(0,y.useUpgrade)(),[N,D]=(0,h.useState)(""),[P,R]=(0,h.useState)(!1),[O,j]=(0,h.useState)("Generating..."),[F,L]=(0,h.useState)(null),[z,B]=(0,h.useState)(0),U=(0,h.useRef)(""),H=(0,h.useRef)(!0),W=(0,h.useRef)(null),{completeFn:V,completion:q,rawCompletion:G,isLoading:$,stop:K,acceptCompletion:Y,rejectCompletion:X}=(0,C.default)({editor:i,noteChatbotId:o}),Z=!$&&!!G;(0,h.useEffect)(()=>{let e=[];for(let t of[0,50,150,300]){let n=setTimeout(()=>{W.current&&W.current.focus()},t);e.push(n)}return()=>{for(let t of e)clearTimeout(t)}},[z]),(0,h.useEffect)(()=>{if(Z){let e=setTimeout(()=>{W.current&&W.current.focus()},50);return()=>clearTimeout(e)}},[Z]),(0,h.useEffect)(()=>{B(e=>e+1)},[]),(0,h.useEffect)(()=>{if(!P)return;let e=()=>{R(!1)};return window.addEventListener("focus",e),()=>window.removeEventListener("focus",e)},[P]);let J=()=>{N.trim()&&(Q({prompt:"rewrite",loadingText:N,customPrompt:N,title:"Rewrite",tooltip:"Rewrite with custom prompt"}),D(""))},Q=e=>{let{from:t,to:n}=i.state.selection,r=i.state.doc.textBetween(t,n," ");if(H.current&&(U.current=r,H.current=!1),null==x?void 0:x.isWordCountLimitExceeded){M("wordCountLimitHit"),I("messageLimit"),M("Paywall Shown",{reason:"Word Count Limit Hit",type:"Complete Text"});return}L(e),V({prompt:e.prompt,text:r,...e.customPrompt&&{customPrompt:e.customPrompt}}),j(e.loadingText),M("actionMenuItemSelected",{item:e.title})},ee=()=>{H.current=!0,U.current=""};return(0,t.jsxs)("div",{className:"relative mb-6 flex flex-col text-sm z-10 bg-none bg-transparent",children:[f&&(0,t.jsx)(m.default,{}),(0,t.jsx)(c.motion.div,{animate:u,className:(0,_.cn)("flex z-0 flex-col justify-between gap-2 rounded-8 shadow-feint p-[1px] bg-popover-hover-solid overflow-hidden"),children:(0,t.jsxs)("div",{onClick:()=>{W.current&&W.current.focus(),B(e=>e+1)},className:"relative flex flex-col justify-between  rounded-8 p-6 bg-popover max-h-[24rem] min-h-[76px]  z-10 gap-7",children:[(0,t.jsx)("div",{className:"flex-1 min-h-0 overflow-y-auto pl-1",children:(0,t.jsx)(p.default,{ref:W,value:N,onChange:e=>{let t=e.target.value;D(t),t&&r&&r()},maxRows:10,className:"w-full leading-[22px] text-sm resize-none bg-transparent disabled:text-text-secondary focus:outline-none placeholder:text-text-secondary scrollbar-hide",placeholder:Z?"Follow up":"Ask AI...",disabled:s,onKeyDown:e=>{"Enter"===e.key&&!e.shiftKey&&(e.preventDefault(),s||J())},onBlur:a})}),(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsxs)("div",{className:"flex flex-row items-center justify-between w-full gap-2",children:[(0,t.jsxs)("div",{className:"flex flex-row gap-2 items-center min-w-0 flex-1",children:[!$&&!Z&&(0,t.jsxs)(t.Fragment,{children:[A.map(e=>(0,t.jsx)(E,{action:e,onClick:()=>Q(e)},e.prompt)),(0,t.jsx)("div",{className:"ml-4",children:(0,t.jsx)(g.default,{mode:"editor"})})]}),Z&&(0,t.jsx)(T,{onAccept:()=>{Y(),l(!1),ee(),M("actionMenuItemSelected",{item:"Accept Completion"}),i.commands.setTextSelection({from:i.state.selection.to,to:i.state.selection.to})},onReject:()=>{U.current?(X(),setTimeout(()=>{let{state:e}=i,{selection:t}=e,n=e.tr;n.insertText(U.current,t.from,t.to),i.view.dispatch(n),ee()},50)):X(),l(!1),M("actionMenuItemSelected",{item:"Reject Completion"})},onTryAgain:()=>{if(!F)return;if(null==x?void 0:x.isWordCountLimitExceeded){M("wordCountLimitHit"),I("messageLimit"),M("Paywall Shown",{reason:"Word Count Limit Hit",type:"Complete Text"});return}X();let{from:e,to:t}=i.state.selection,n=i.state.doc.textBetween(e,t," ");V({prompt:F.prompt,text:n}),j(F.loadingText),M("actionMenuItemSelected",{item:"Try Again - ".concat(F.title)})},onInsertBelow:()=>{q&&(X(),setTimeout(()=>{let{state:e}=i,{selection:t}=e,n=e.doc.resolve(t.to).end(),r=e.tr;r.insert(n,e.schema.text("\n\n".concat(q,"\n"))),i.view.dispatch(r),l(!1),M("actionMenuItemSelected",{item:"Insert Below"})},50))}}),$&&(0,t.jsx)("div",{className:"flex flex-row items-center gap-2",children:(0,t.jsx)("p",{className:"text-sm text-text-secondary",children:O})})]}),(0,t.jsx)("div",{className:"flex flex-row gap-2 flex-shrink-0",children:(0,t.jsx)("button",{disabled:!$&&!N.trim(),className:(0,_.cn)("disabled:opacity-50 disabled:cursor-not-allowed","flex justify-center items-center  rounded-full p-3 ease-in transition-all duration-150 cursor-pointer bg-blue text-white",N.trim()||$?"":"bg-secondary dark:bg-secondary text-text-secondary"),onClick:e=>{if(e.preventDefault(),$)return void K();J()},children:$?(0,t.jsx)(b.StopIcon,{className:"h-7 w-7 p-1"}):(0,t.jsx)(n.ArrowUp,{className:"h-7 w-7",strokeWidth:2.5})})})]})})]})})]})}},169685:e=>{"use strict";e.s({default:()=>h,showCitationExtensionAtom:()=>d,showEditExtensionAtom:()=>c});var t=e.i(290479),n=e.i(647968),r=e.i(608294),i=e.i(373150),a=e.i(608087),o=e.i(564620),s=e.i(289702),l=e.i(954615),u=e.i(644798);let c=(0,n.atom)(!1),d=(0,n.atom)({pinned:!1,open:!1}),h=e=>{let{editorRef:n,editor:h,selectedText:p,setSelectedText:f,chatbotId:m,editable:g}=e,y=(0,i.useRef)(null),[b,x]=(0,i.useState)({top:0,left:0}),[w,k]=(0,i.useState)(!1),[S,_]=(0,i.useState)(!1),[C,A]=(0,r.useAtom)(c,{store:o.globalStore}),[E,T]=(0,r.useAtom)(d,{store:o.globalStore}),{isResizing:M}=(0,a.useIsResizing)(),I=(0,i.useCallback)(()=>{if(!y.current||!n.current)return;let e=n.current.closest(".overflow-y-scroll");if(!e)return;let t=e.getBoundingClientRect(),r=y.current.getBoundingClientRect(),i=.1*t.height,a=t.top+i,o=t.bottom-i,s=r.top<a,l=r.bottom>o;if((r.top>t.bottom||r.bottom<t.top)&&h){let{view:n,state:r}=h,{selection:i}=r;if(!i.empty){let r=n.coordsAtPos(i.from).top-t.top-t.height/2;e.scrollTo({top:e.scrollTop+r,behavior:"auto"}),setTimeout(()=>{I()},10);return}}if(s){let t=r.top-a-20;e.scrollBy({top:t,behavior:"smooth"})}else if(l){let t=r.bottom-o+20;e.scrollBy({top:t,behavior:"smooth"})}},[y,n,h]),N=(0,i.useCallback)(()=>{if(!h)return;let{view:e,state:t}=h,{selection:r}=t;if(r.empty&&!w||!n.current)return;let i=n.current.getBoundingClientRect();x({top:e.coordsAtPos(r.to).bottom-i.top+(E.open&&!E.pinned?50:10),left:i.width/2}),_(!0),f(t.doc.textBetween(r.from,r.to))},[h,n,f,w,E.open,E.pinned]);return((0,i.useEffect)(()=>{if(!h||!C&&!(E.open&&!E.pinned))return;let e=()=>{if(C||E.open&&!E.pinned){if(!w){let{state:e}=h,{selection:t}=e;if(t.empty){A(!1),_(!1),T(e=>({...e,open:!1}));return}}N(),requestAnimationFrame(()=>{I()})}};return h.on("selectionUpdate",e),()=>{h.off("selectionUpdate",e)}},[h,C,E,p,N,A,T,w,I]),(0,i.useEffect)(()=>{if(C||E.open&&!E.pinned){let e;return N(),requestAnimationFrame(()=>{I()}),window.addEventListener("scroll",N),window.addEventListener("resize",N),n.current&&"undefined"!=typeof ResizeObserver&&(e=new ResizeObserver(()=>{N()})).observe(n.current),()=>{window.removeEventListener("scroll",N),window.removeEventListener("resize",N),null==e||e.disconnect()}}},[C,E.open,E.pinned,N,I]),(0,i.useEffect)(()=>{if(!M&&(C||E.open)){let e=setTimeout(()=>{N(),requestAnimationFrame(()=>{I()})},100);return()=>clearTimeout(e)}},[M,C,E.open,N,I]),(0,i.useEffect)(()=>{(C||E.open&&!E.pinned)&&y.current&&requestAnimationFrame(()=>{I(),setTimeout(()=>{I()},150)})},[C,E.open,E.pinned,I]),(C||E.open&&!E.pinned)&&h&&g&&S)?(0,t.jsxs)("div",{ref:y,className:(0,s.cn)("absolute z-50 bg-popover border-2 border-border-primary rounded-4 shadow-shadowMedium max-w-[44rem] w-full",E.open&&!E.pinned||C?"animate-in fade-in-0 zoom-in-95 bg-transparent border-none !shadow-none rounded-none":"animate-out fade-out-0 zoom-out-95"),style:{top:"".concat(b.top,"px"),left:"".concat(b.left,"px"),transform:"translateX(-50%)"},children:[E.open&&!E.pinned&&(0,t.jsx)(l.default,{chatbotId:m,editor:h}),C&&(0,t.jsx)(u.default,{editor:h,chatbotId:m,setEditMode:e=>{A(e),e||(k(!1),_(!1))}})]}):null}},181097:e=>{"use strict";e.s({default:()=>l});var t=e.i(290479),n=e.i(608294),r=e.i(123695),i=e.i(704255),a=e.i(972899),o=e.i(564620),s=e.i(169685);let l=e=>{let{setSelectedText:l,editor:u}=e,c=(0,n.useSetAtom)(s.showCitationExtensionAtom,{store:o.globalStore});return u?(0,t.jsx)(i.Button,{className:"gap-2 hover:bg-popover-hover",variant:"ghost",size:"small",onClick:()=>{let e=u.state.selection;e.empty||(l(u.state.doc.textBetween(e.from,e.to)),c(e=>({...e,open:!0})),setTimeout(()=>{(null==u?void 0:u.view)&&!u.isDestroyed&&u.commands.focus()},10))},leadingIcon:(0,t.jsx)(a.Icon,{as:r.FileSearch}),label:"Cite"}):null}},215377:e=>{"use strict";e.s({default:()=>u});var t=e.i(290479),n=e.i(608294),r=e.i(765357),i=e.i(373150),a=e.i(704255),o=e.i(972899),s=e.i(564620),l=e.i(169685);let u=e=>{let{setSelectedText:u,editor:c}=e,d=(0,n.useSetAtom)(l.showEditExtensionAtom,{store:s.globalStore}),h=()=>{if(!c)return;let e=c.state.selection;e.empty||(u(c.state.doc.textBetween(e.from,e.to)),d(!0),setTimeout(()=>{(null==c?void 0:c.view)&&!c.isDestroyed&&c.commands.focus()},10))};return((0,i.useEffect)(()=>{let e=e=>{"j"===e.key&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),h())};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[c]),c)?(0,t.jsx)(a.Button,{className:"gap-2 hover:bg-popover-hover",variant:"ghost",size:"small",onClick:h,leadingIcon:(0,t.jsx)(o.Icon,{as:r.PenLine}),label:"Edit"}):null}},446653:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("case-sensitive",[["path",{d:"m2 16 4.039-9.69a.5.5 0 0 1 .923 0L11 16",key:"d5nyq2"}],["path",{d:"M22 9v7",key:"pvm9v3"}],["path",{d:"M3.304 13h6.392",key:"1q3zxz"}],["circle",{cx:"18.5",cy:"12.5",r:"3.5",key:"z97x68"}]])},38111:e=>{"use strict";e.s({CaseSensitiveIcon:()=>t.default});var t=e.i(446653)},220390:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("heading-1",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]])},325933:e=>{"use strict";e.s({Heading1Icon:()=>t.default});var t=e.i(220390)},857357:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("heading-2",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]])},672728:e=>{"use strict";e.s({Heading2Icon:()=>t.default});var t=e.i(857357)},445264:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("heading-3",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2",key:"68ncm8"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2",key:"1ejuhz"}]])},561115:e=>{"use strict";e.s({Heading3Icon:()=>t.default});var t=e.i(445264)},732645:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},143129:e=>{"use strict";e.s({InfoIcon:()=>t.default});var t=e.i(732645)},403140:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("list",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]])},995850:e=>{"use strict";e.s({ListIcon:()=>t.default});var t=e.i(403140)},444808:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("list-ordered",[["path",{d:"M10 12h11",key:"6m4ad9"}],["path",{d:"M10 18h11",key:"11hvi2"}],["path",{d:"M10 6h11",key:"c7qv1k"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]])},987784:e=>{"use strict";e.s({ListOrdered:()=>t.default});var t=e.i(444808)},842002:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("list-tree",[["path",{d:"M21 12h-8",key:"1bmf0i"}],["path",{d:"M21 6H8",key:"1pqkrb"}],["path",{d:"M21 18h-8",key:"1tm79t"}],["path",{d:"M3 6v4c0 1.1.9 2 2 2h3",key:"1ywdgy"}],["path",{d:"M3 10v6c0 1.1.9 2 2 2h3",key:"2wc746"}]])},243753:e=>{"use strict";e.s({ListTreeIcon:()=>t.default});var t=e.i(842002)},733796:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("table-2",[["path",{d:"M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18",key:"gugj83"}]])},921986:e=>{"use strict";e.s({Table2:()=>t.default});var t=e.i(733796)},613914:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("text-quote",[["path",{d:"M17 6H3",key:"16j9eg"}],["path",{d:"M21 12H8",key:"scolzb"}],["path",{d:"M21 18H8",key:"1wfozv"}],["path",{d:"M3 12v6",key:"fv4c87"}]])},502190:e=>{"use strict";e.s({TextQuote:()=>t.default});var t=e.i(613914)},552725:e=>{"use strict";e.s({Command:()=>p,createSuggestionItems:()=>d,renderItems:()=>h});var t=e.i(290479),n=e.i(691283),r=e.i(184782),i=e.i(565842),a=e.i(874133),o=e.i(373150),s=e.i(291495),l=e.i(704255),u=e.i(289702);let c=o.default.forwardRef((e,n)=>{let{items:r,editor:i,range:s}=e,[c,d]=(0,o.useState)(0),h=o.default.useRef(null),p=(0,o.useCallback)(e=>{let t=r[e];t&&"separator"!==t.title&&t.command({editor:i,range:s})},[r,i,s]),f=(0,o.useCallback)((e,t)=>{var n;let i=e;do i="down"===t?(i+1)%r.length:(i-1+r.length)%r.length;while((null==(n=r[i])?void 0:n.title)==="separator"&&i!==e)return i},[r]),m=(0,o.useCallback)(e=>{let t=h.current;if(!t)return;let n=t.children[e];if(!n)return;let r=t.getBoundingClientRect(),i=n.getBoundingClientRect();i.top<r.top?t.scrollTop=n.offsetTop:i.bottom>r.bottom&&(t.scrollTop=n.offsetTop-t.clientHeight+n.clientHeight)},[]);return((0,o.useEffect)(()=>{let e=["ArrowUp","ArrowDown","Enter"],t=t=>{if(e.includes(t.key)){if(t.preventDefault(),"ArrowUp"===t.key){let e=f(c,"up");return d(e),m(e),!0}if("ArrowDown"===t.key){let e=f(c,"down");return d(e),m(e),!0}if("Enter"===t.key)return p(c),!0}return!1};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[r,c,p,m]),(0,o.useEffect)(()=>{let e=r.findIndex(e=>"separator"!==e.title);d(e>=0?e:0)},[r]),0===r.length)?null:(0,t.jsx)("div",{ref:n,className:"bg-background-primary border border-border-primary p-2 pb-0 rounded-6 shadow-shadowMedium focus:outline-none","data-state":"open","cmdk-root":"",children:(0,t.jsx)("div",{ref:h,className:"max-h-[300px] overflow-y-auto scrollbar-overlay",children:r.map((e,n)=>{var r;if("separator"===e.title)return(0,t.jsx)("div",{className:"my-2 h-[1px] bg-border"},"separator-".concat(n+1));let o=(null==(r=e.isActive)?void 0:r.call(e,i))||!1;return(0,t.jsx)(l.Button,{variant:"ghost",size:"medium",className:(0,u.cn)("flex gap-6 w-full py-2 px-4 justify-start cursor-pointer rounded-4 hover:bg-accent relative focus:outline-none",n===c&&"bg-accent"),onClick:()=>p(n),onMouseEnter:()=>d(n),"cmdk-item":"","aria-selected":n===c,label:e.title,leadingIcon:e.icon,trailingIcon:o?(0,t.jsx)(a.Check,{className:"h-7 w-7 text-blue"}):void 0},e.title)})})})});c.displayName="CommandList";let d=e=>e,h=()=>{let e=null,t=null;return{onStart:n=>{e=new r.ReactRenderer(c,{props:{...n,command:e=>{n.command(e)}},editor:n.editor});let{$from:i}=n.editor.state.selection;t=(0,s.default)(document.body,{getReferenceClientRect:()=>{if(n.clientRect){let e=n.clientRect();if(e)return e}let e=n.editor.view.coordsAtPos(i.pos);return new DOMRect(e.left,e.top,0,0)},appendTo:()=>document.body,content:null==e?void 0:e.element,showOnCreate:!0,interactive:!0,trigger:"manual",placement:"bottom-start"})},onUpdate(n){null==e||e.updateProps({...n,command:e=>{n.command(e)}}),n.clientRect&&(null==t||t.setProps({getReferenceClientRect:()=>{if(n.clientRect){let e=n.clientRect();if(e)return e}let e=n.editor.view.coordsAtPos(n.editor.state.selection.$from.pos);return new DOMRect(e.left,e.top,0,0)}}))},onKeyDown:e=>"Escape"===e.event.key&&(null==t||t.hide(),!0),onExit(){null==t||t.destroy(),null==e||e.destroy()}}},p=n.Extension.create({name:"slash-command",addOptions:()=>({suggestion:{char:"/",startOfLine:!1}}),addProseMirrorPlugins(){return[(0,i.default)({editor:this.editor,...this.options.suggestion})]}})},919160:e=>{"use strict";e.s({slashCommand:()=>b});var t=e.i(290479),n=e.i(38111),r=e.i(996481),i=e.i(492162),a=e.i(325933),o=e.i(672728),s=e.i(561115),l=e.i(143129),u=e.i(182822),c=e.i(995850),d=e.i(987784),h=e.i(243753),p=e.i(921986),f=e.i(502190),m=e.i(958962),g=e.i(552725);let y=(0,g.createSuggestionItems)([{title:"Regular text",description:"Just normal text.",searchTerms:["text","paragraph","normal"],icon:(0,t.jsx)(n.CaseSensitiveIcon,{className:"text-text-secondary",size:18}),command:e=>{let{editor:t,range:n}=e;t.chain().focus().deleteRange(n).clearNodes().run()},isActive:e=>e.isActive("paragraph")&&!e.isActive("bulletList")&&!e.isActive("orderedList")},{title:"Heading 1",description:"Big section heading.",searchTerms:["title","big","large"],icon:(0,t.jsx)(a.Heading1Icon,{className:"text-text-secondary",size:18}),command:e=>{let{editor:t,range:n}=e;t.chain().focus().deleteRange(n).setNode("heading",{level:1}).run()},isActive:e=>e.isActive("heading",{level:1})},{title:"Heading 2",description:"Medium section heading.",searchTerms:["subtitle","medium"],icon:(0,t.jsx)(o.Heading2Icon,{className:"text-text-secondary",size:18}),command:e=>{let{editor:t,range:n}=e;t.chain().focus().deleteRange(n).setNode("heading",{level:2}).run()},isActive:e=>e.isActive("heading",{level:2})},{title:"Heading 3",description:"Small section heading.",searchTerms:["subtitle","small"],icon:(0,t.jsx)(s.Heading3Icon,{className:"text-text-secondary",size:18}),command:e=>{let{editor:t,range:n}=e;t.chain().focus().deleteRange(n).setNode("heading",{level:3}).run()},isActive:e=>e.isActive("heading",{level:3})},{title:"separator",description:"",searchTerms:[],icon:null,command:()=>{}},{title:"Link",description:"Add a link to text.",searchTerms:["link","url","href"],icon:(0,t.jsx)(u.LinkIcon,{className:"text-text-secondary",size:18}),command:e=>{let{editor:t,range:n}=e;t.chain().focus().deleteRange(n).run();let{from:r,to:i}=t.state.selection,a=t.state.doc.textBetween(r,i," "),o=window.prompt("Enter URL:");o&&(a&&""!==a.trim()?t.chain().focus().extendMarkRange("link").setLink({href:o}).run():t.chain().focus().insertContent({type:"text",text:"Link",marks:[{type:"link",attrs:{href:o,target:"_blank"}}]}).run())},isActive:e=>e.isActive("link")},{title:"Toggle",description:"Create a collapsible details section.",searchTerms:["toggle","details","collapse","expand","accordion"],icon:(0,t.jsx)(r.ChevronRight,{className:"text-text-secondary",size:18}),command:e=>{let{editor:t,range:n}=e;t.chain().focus().deleteRange(n).setToggle().run()},isActive:e=>e.isActive("toggle")},{title:"Callout",description:"Add a highlighted callout block.",searchTerms:["callout","highlight","note","info","warning","tip"],icon:(0,t.jsx)(l.InfoIcon,{className:"text-text-secondary",size:18}),command:e=>{let{editor:t,range:n}=e;t.chain().focus().deleteRange(n).setCallout().run()},isActive:e=>e.isActive("callout")},{title:"Table",description:"Insert a table with rows and columns.",searchTerms:["table","grid","rows","columns","cells"],icon:(0,t.jsx)(p.Table2,{className:"text-text-secondary",size:18}),command:e=>{let{editor:t,range:n}=e;t.chain().focus().deleteRange(n).insertTable({rows:3,cols:3,withHeaderRow:!0}).run()},isActive:e=>e.isActive("table")},{title:"Table of Contents",description:"Insert a table of contents for headings.",searchTerms:["toc","contents","index","outline","navigation"],icon:(0,t.jsx)(h.ListTreeIcon,{className:"text-text-secondary",size:18}),command:e=>{let{editor:t,range:n}=e;t.chain().focus().deleteRange(n).insertContent({type:"tableOfContents"}).run()},isActive:e=>e.isActive("tableOfContents")},{title:"Quote",description:"Highlight a quote.",searchTerms:["quote","blockquote","highlight"],icon:(0,t.jsx)(f.TextQuote,{className:"text-text-secondary",size:18}),command:e=>{let{editor:t,range:n}=e;t.chain().focus().deleteRange(n).toggleBlockquote().run()},isActive:e=>e.isActive("blockquote")},{title:"Code block",description:"Display code with syntax highlighting.",searchTerms:["code","codeblock","syntax","programming"],icon:(0,t.jsx)(i.Code,{className:"text-text-secondary",size:18}),command:e=>{let{editor:t,range:n}=e;t.chain().focus().deleteRange(n).setCodeBlock().run()},isActive:e=>e.isActive("codeBlock")},{title:"Bulleted list",description:"Create a simple bullet list.",searchTerms:["unordered","point","bullet","list"],icon:(0,t.jsx)(c.ListIcon,{className:"text-text-secondary",size:18}),command:e=>{let{editor:t,range:n}=e;t.chain().focus().deleteRange(n).toggleBulletList().run()},isActive:e=>e.isActive("bulletList")},{title:"Numbered list",description:"Create a list with numbering.",searchTerms:["ordered","number","list"],icon:(0,t.jsx)(d.ListOrdered,{className:"text-text-secondary",size:18}),command:e=>{let{editor:t,range:n}=e;t.chain().focus().deleteRange(n).toggleOrderedList().run()},isActive:e=>e.isActive("orderedList")},{title:"To-do list",description:"Track tasks with a to-do list.",searchTerms:["todo","task","list","check","checkbox"],icon:(0,t.jsx)(m.TaskListIcon,{className:"text-text-secondary",size:18}),command:e=>{let{editor:t,range:n}=e;t.chain().focus().deleteRange(n).toggleTaskList().run()},isActive:e=>e.isActive("taskList")}]),b=g.Command.configure({suggestion:{items:e=>{let{query:t}=e;if(!t||""===t.trim())return y;let n=t.toLowerCase().trim(),r=y.filter(e=>{var t,r;return"separator"!==e.title&&(!!(e.title.toLowerCase().startsWith(n)||e.title.toLowerCase().includes(n)||e.title.toLowerCase().split(" ").some(e=>e.startsWith(n)))||null!=(r=null==(t=e.searchTerms)?void 0:t.some(e=>e.toLowerCase().includes(n)))&&r)});return r.length>0?r:[]},render:g.renderItems}})},222878:e=>{"use strict";e.s({default:()=>a});var t=e.i(290479);e.i(963544);var n=e.i(207307),r=e.i(332581),i=e.i(373150);let a=e=>{let{editor:a}=e,o=(0,i.useCallback)(e=>{let{editor:t,view:r,state:i,from:a}=e,{selection:o}=i;if(!(o instanceof n.CellSelection)||!(t.isActive("table")||t.isActive("tableCell")||t.isActive("tableHeader")))return!1;let{$anchorCell:s,$headCell:l}=o;if(!s||!l)return!1;let u=s.pos,c=l.pos,d=s.node(-1);if(!d)return!1;let h=-1,p=-1,f=0,m=s.start(-1);return d.forEach((e,t)=>{let n=m+t+1,r=n+e.nodeSize;u>=n&&u<r&&(h=f),c>=n&&c<r&&(p=f),"tableRow"===e.type.name&&f++}),h!==p},[]);return(0,t.jsx)(r.BubbleMenu,{editor:a,shouldShow:o,className:"z-[70] min-w-[180px] overflow-hidden rounded-6 border border-border bg-popover p-1 shadow-shadowMedium",options:{placement:"top",offset:8},children:(0,t.jsxs)("div",{className:"flex flex-col gap-0",children:[(0,t.jsx)("button",{type:"button",onClick:()=>a.chain().focus().addColumnBefore().run(),className:"flex w-full items-center gap-2 rounded-6 px-2 py-1.5 text-left text-sm text-text-primary hover:bg-control-primary",children:"Add column before"}),(0,t.jsx)("button",{type:"button",onClick:()=>a.chain().focus().addColumnAfter().run(),className:"flex w-full items-center gap-2 rounded-6 px-2 py-1.5 text-left text-sm text-text-primary hover:bg-control-primary",children:"Add column after"}),(0,t.jsx)("div",{className:"my-1 h-px bg-border"}),(0,t.jsx)("button",{type:"button",onClick:()=>a.chain().focus().deleteColumn().run(),className:"flex w-full items-center gap-2 rounded-6 px-2 py-1.5 text-left text-sm text-destructive hover:bg-control-primary",children:"Delete column"})]})},"table-column-menu")}},633492:e=>{"use strict";e.s({default:()=>o});var t=e.i(290479);e.i(963544);var n=e.i(207307),r=e.i(332581),i=e.i(373150),a=e.i(704255);let o=e=>{let{editor:o}=e,s=(0,i.useCallback)(e=>{let{editor:t,view:r,state:i,from:a}=e,{selection:o}=i;if(!(o instanceof n.CellSelection)||!(t.isActive("table")||t.isActive("tableCell")||t.isActive("tableHeader")))return!1;let{$anchorCell:s,$headCell:l}=o;if(!s||!l)return!1;let u=s.pos,c=l.pos,d=s.node(-1);if(!d)return!1;let h=-1,p=-1,f=0,m=s.start(-1);return d.forEach((e,t)=>{let n=m+t+1,r=n+e.nodeSize;u>=n&&u<r&&(h=f),c>=n&&c<r&&(p=f),"tableRow"===e.type.name&&f++}),h===p},[]);return(0,t.jsxs)(r.BubbleMenu,{editor:o,shouldShow:s,className:"flex items-center gap-1 p-2 bg-popover border border-border-primary rounded-4 shadow-feint z-[60]",options:{placement:"left",offset:8},children:[(0,t.jsx)(a.Button,{variant:"ghost",size:"xs",onClick:()=>o.chain().focus().addRowBefore().run(),className:"hover:bg-popover-hover",children:"Add row before"}),(0,t.jsx)(a.Button,{variant:"ghost",size:"xs",onClick:()=>o.chain().focus().addRowAfter().run(),className:"hover:bg-popover-hover",children:"Add row after"}),(0,t.jsx)("div",{className:"bg-border h-6 w-[1px]"}),(0,t.jsx)(a.Button,{variant:"ghost",size:"xs",onClick:()=>o.chain().focus().deleteRow().run(),className:"hover:bg-popover-hover text-destructive",children:"Delete row"})]},"table-row-menu")}},143423:e=>{"use strict";e.s({}),e.i(222878),e.i(633492)},430163:e=>{"use strict";e.s({}),e.i(222878),e.i(633492),e.i(143423)},793840:e=>{"use strict";e.s({TableColumnMenu:()=>t.default});var t=e.i(222878)},656864:e=>{"use strict";e.s({TableRowMenu:()=>t.default});var t=e.i(633492)},598357:e=>{"use strict";e.s({createImageUpload:()=>t,handleImageDrop:()=>n,handleImagePaste:()=>r});let t=e=>{let{onUpload:t,validateFn:n}=e;return async e=>n&&!n(e)?null:await t(e)},n=(e,t,n,r)=>{if(!n&&t.dataTransfer&&t.dataTransfer.files&&t.dataTransfer.files[0]){t.preventDefault();let n=t.dataTransfer.files[0],i=e.posAtCoords({left:t.clientX,top:t.clientY});if(!i)return!1;let a=e.state.schema.nodes.image;return!!a&&(r(n).then(t=>{if(t){let n=e.state.tr.insert(i.pos,a.create({src:t}));e.dispatch(n)}}),!0)}return!1},r=(e,t,n)=>{var r,i;if(null==(i=t.clipboardData)||null==(r=i.files)?void 0:r[0]){t.preventDefault();let r=t.clipboardData.files[0],i=e.state.schema.nodes.image;return!!i&&(n(r).then(t=>{if(t){let n=e.state.tr.replaceSelectionWith(i.create({src:t}));e.dispatch(n)}}),!0)}return!1}},719857:e=>{"use strict";e.s({default:()=>N});var t=e.i(290479),n=e.i(22556);e.i(963544);var r=e.i(207307),i=e.i(184782),a=e.i(332581),o=e.i(448805),s=e.i(224879),l=e.i(608294),u=e.i(625483),c=e.i(373150),d=e.i(525094),h=e.i(449097),p=e.i(252390),f=e.i(564620),m=e.i(814733),g=e.i(232648),y=e.i(289702),b=e.i(459793),x=e.i(403446),w=e.i(181097),k=e.i(215377),S=e.i(919160);e.i(430163);var _=e.i(793840),C=e.i(656864),A=e.i(169685),E=e.i(598357);let T=(0,o.cx)("prose","prose-headings:text-text-primary","prose-p:text-text-primary","prose-strong:text-text-primary","prose-em:text-text-primary","prose-li:text-text-primary","prose-code:text-text-primary","prose-pre:bg-control-primary","prose-pre:text-text-secondary","prose-a:text-blue prose-a:no-underline","prose-a:cursor-pointer","prose-blockquote:text-text-secondary prose-blockquote:border-text-secondary","prose-h1:text-2xl prose-h1:font-semibold leading-[32px] prose-h1:mb-0 prose-h1:mt-10","prose-h2:text-xl prose-h2:font-semibold leading-[28px] prose-h2:mb-2 prose-h2:mt-10","prose-h3:text-lg prose-h3:font-semibold leading-[24px] prose-h3:mt-8 prose-h3:mb-2","prose-h4:mt-8 prose-h4:mb-2","prose-h5:mt-8 prose-h5:mb-2","prose-h6:mt-8 prose-h6:mb-2","prose-p:my-6","prose-blockquote:my-8","prose-ul:my-6 prose-ol:my-6","prose-li:my-1","prose-hr:my-6","prose-img:my-6","prose-table:my-6","[&_li>ul]:my-0 [&_li>ol]:my-0","[&_ul_ul]:ml-6 [&_ol_ol]:ml-6 [&_ul_ol]:ml-6 [&_ol_ul]:ml-6","[&_:not(pre)>code]:my-0","[&_>*:last-child]:mb-0","max-w-full","prose-pre:my-0","prose-pre:py-3","prose-pre:pl-3","[&_pre.shiki]:py-3","[&_pre.shiki]:pl-6"),M=c.default.memo(e=>{let{editor:n,chatbotId:i,setSelectedText:o,showCitationExtension:s}=e;return(0,t.jsxs)(a.BubbleMenu,{editor:n,className:"flex w-fit overflow-x-auto scrollbar-hide  items-center gap-2 overflow-hidden p-2 rounded-6 border border-border-primary bg-popover shadow-feint",options:{placement:"bottom",offset:8},shouldShow:e=>{let{editor:t,state:n}=e,i=t.isActive("table")||t.isActive("tableCell")||t.isActive("tableHeader"),a=n.selection instanceof r.CellSelection;if(i||a)return!1;let{selection:o}=n;return!o.empty},children:[(0,t.jsx)(x.default,{chatbotId:i,editor:n}),(0,t.jsx)("div",{className:"bg-border h-6 w-[1px]"}),(0,t.jsx)(k.default,{setSelectedText:o,editor:n}),!s.pinned&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"bg-border h-6 w-[1px]"}),(0,t.jsx)(w.default,{setSelectedText:o,editor:n})]})]})});M.displayName="EditorBubbleMenu";let I=c.default.memo(e=>{let{defaultContent:r,onCreate:a,onContentChange:o,disableBubbleMenu:x=!1,editable:w=!0,doc:k,provider:I,userInfo:N,chatbotId:D,rejectCompletion:P,isCompleting:R}=e,{resolvedTheme:O}=(0,u.useTheme)(),[j,F]=(0,l.useAtom)(A.showEditExtensionAtom,{store:f.globalStore}),[L,z]=(0,l.useAtom)(A.showCitationExtensionAtom,{store:f.globalStore}),[B,U]=(0,c.useState)("");(0,c.useCallback)(e=>{U(e)},[]);let H=(0,c.useRef)(null),W=(0,c.useRef)(null),{mutateAsync:V}=m.api.file.generateImageLink.useMutation(),{spellcheckEnabled:q}=(0,h.useSettings)(),{track:G}=(0,p.default)();(0,c.useEffect)(()=>()=>{F(!1),z({pinned:!1,open:!1})},[F,z]);let $=(0,c.useCallback)(e=>{W.current=e,k&&r&&e.isEmpty&&e.commands.setContent(r),a(e)},[k,r,a]),K=(0,c.useMemo)(()=>{let e=async e=>{let t=(0,s.default)(),n=await V(t);return await (0,g.uploadBucketGoogle)({...n,file:e,fileName:t,bucket:"notes-images-unriddle"})};return(0,E.createImageUpload)({onUpload:e,validateFn:e=>e.type.includes("image/")?!(e.size/1024/1024>20)||(d.toast.error("File size too big (max 20MB)."),!1):(d.toast.error("File type not supported."),!1)})},[V]),Y=(0,c.useMemo)(()=>{let e=[S.slashCommand,(0,b.starterKit)(!!k),...b.defaultExtensions,(0,b.createCodeBlockShikiExtension)(O)];return k&&I&&N&&e.push(n.default.configure({document:k})),e},[I,k,N,O,G]),X=(0,i.useEditor)({extensions:Y,content:null!=r?r:void 0,editable:w,autofocus:!0,immediatelyRender:!0,shouldRerenderOnTransaction:!1,editorProps:{handleDOMEvents:{keydown:(e,t)=>{if(t.metaKey&&"z"===t.key&&R)return t.preventDefault(),null==P||P(),!0;if("Enter"===t.key&&!t.shiftKey){let e=document.querySelector("[cmdk-root]");if(e&&"closed"!==e.getAttribute("data-state")){let n=e.querySelector('[cmdk-item][aria-selected="true"]');if(n)return t.preventDefault(),t.stopPropagation(),n.click(),!0}}return!1}},handlePaste:(e,t)=>(0,E.handleImagePaste)(e,t,K),handleDrop:(e,t,n,r)=>(0,E.handleImageDrop)(e,t,r,K),attributes:{class:(0,y.cn)("focus:outline-none",T),"data-editor":"document",spellcheck:q?"true":"false"}},onUpdate:(0,c.useCallback)(e=>{let{editor:t}=e;o(t.getJSON(),t.getText())},[o]),onCreate:(0,c.useCallback)(e=>{let{editor:t}=e;W.current=t,$(t)},[$])},[O]);return(0,c.useEffect)(()=>{var e,t;(null==(t=W.current)||null==(e=t.view)?void 0:e.dom)&&W.current.view.dom.setAttribute("spellcheck",q?"true":"false")},[q]),(0,t.jsxs)("div",{ref:H,className:"relative",children:[(0,t.jsx)(i.EditorContent,{editor:X}),!x&&!j&&(!L.open||L.pinned)&&X&&(0,t.jsx)(M,{editor:X,chatbotId:D,setSelectedText:U,showCitationExtension:L}),(0,t.jsx)(A.default,{editorRef:H,editor:X,editable:w,selectedText:B,setSelectedText:U,chatbotId:D}),X&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(_.TableColumnMenu,{editor:X}),(0,t.jsx)(C.TableRowMenu,{editor:X})]})]})});I.displayName="TailwindAdvancedEditor";let N=I},280694:e=>{"use strict";e.s({default:()=>l});var t=e.i(238635),n=e.i(224879),r=e.i(373150),i=e.i(51785),a=e.i(227261),o=e.i(814733),s=e.i(410601);let l=function(e){let l=(0,a.useChatbotStore)(e=>e.isHistorySidebarOpen),u=(0,a.useChatbotStore)(e=>e.isPreviewingVersion),c=(0,a.useChatbotStore)(e=>e.selectedVersion),d=(0,a.useChatbotStore)(e=>e.selectVersion),h=(0,a.useChatbotStore)(e=>e.closeVersionPreview),{editor:p}=(0,s.useGlobalEditor)(e),{chatbot:f}=(0,i.default)({id:e}),m=o.api.useUtils(),g=o.api.chatbot.saveNote.useMutation(),y=o.api.chatbot.indexNote.useMutation(),b=o.api.noteVersion.upsertVersion.useMutation();(0,r.useEffect)(()=>{!l&&u&&h()},[l,u,h]);let x=(0,r.useCallback)(e=>{e&&(m.noteVersion.getVersions.invalidate({noteId:e}),m.chatbot.byId.invalidate(e),console.log("Invalidated version history cache for note",e))},[m.noteVersion.getVersions,m.chatbot.byId]),w=(0,r.useCallback)(async(e,r)=>{if(!p||!e.contents||!(null==f?void 0:f.id))return!1;try{var i,a,o;console.log("Restoring version content to editor",e.id);let s="object"==typeof e.contents?e.contents:{type:"doc",content:[]};if(r&&e.noteId){let a=p.getJSON(),o=f.name||"Untitled";if(a.content){let e=a.content.find(e=>"title"===e.type);(null==e||null==(i=e.content)?void 0:i[0])&&"text"in e.content[0]&&e.content[0].text&&(o=e.content[0].text)}try{await b.mutateAsync({noteId:e.noteId,contents:a,name:r||"Before restoring (".concat(o,")"),sessionId:(0,n.default)()})}catch(e){t.captureException(e)}}null==p||p.commands.setContent(s),"function"==typeof(null==p?void 0:p.setEditorContent)&&(null==p||p.setEditorContent(s));let l=f.name||"Untitled";if(s.content){let e=s.content.find(e=>"title"===e.type);(null==e||null==(o=e.content)||null==(a=o[0])?void 0:a.text)&&(l=e.content[0].text)}if(f.id){m.chatbot.byId.cancel(f.id);let e=m.chatbot.byId.getData(f.id);e&&m.chatbot.byId.setData(f.id,{...e,contents:s,name:l,updatedAt:new Date(Date.now()-6e4).toISOString()}),m.workspace.all.setData(void 0,e=>e?{...e,entities:e.entities.map(e=>e.id===f.id?{...e,name:l||"Untitled"}:e)}:e)}return g.mutate({id:f.id,contents:s,name:l},{onSuccess:()=>{e.noteId&&x(e.noteId)}}),h(),!0}catch(e){return t.captureException(e),!1}},[p,h,f,g,y,m.chatbot.byId,x,b]);return{isHistorySidebarOpen:l,isPreviewingVersion:u,selectedVersion:c,selectVersion:d,closeVersionPreview:h,restoreVersion:w,refreshVersionHistory:x}}},718693:e=>{"use strict";e.s({default:()=>d});var t=e.i(290479),n=e.i(227261),r=e.i(410601),i=e.i(719857),a=e.i(280694),o=e.i(238635),s=e.i(373150),l=e.i(525094),u=e.i(704255),c=e.i(663018);let d=e=>{let{noteId:d}=e,{editor:h}=(0,r.useGlobalEditor)(d),{restoreVersion:p}=(0,a.default)(d),[f,m]=(0,s.useState)(!1),g=(0,n.useChatbotStore)(e=>e.selectedVersion),y=(0,n.getNoteSessionId)(),b=async()=>{if(g){if(!h)return void l.toast.error("Editor not available. Please try again.");m(!0);try{if(!await p(g,"Before reversion"))throw Error("Failed to restore version")}catch(e){o.captureException(e),l.toast.error("Failed to restore version. Please try again."),m(!1)}}},x=(null==g?void 0:g._timestamp)||Date.now(),w=(0,s.useMemo)(()=>{if(!g)return null;let e=g.contents&&"object"==typeof g.contents?{...g.contents}:{type:"doc",content:[]};if(e.content){var t,n,r;let i=e.content.find(e=>"title"===e.type);!i||(null==(t=i.content)?void 0:t.length)&&(null==(n=i.content[0])?void 0:n.text)||((null==(r=i.content)?void 0:r.length)?i.content[0].text="Untitled":i.content=[{type:"text",text:"Untitled"}])}return e},[g,x]);if(!g||!w)return(0,t.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,t.jsx)(c.LoadingSpinner,{color:"gray",variant:"small"})});let k=g.id!==y;return(0,t.jsxs)("div",{className:"relative h-full flex flex-col",children:[(0,t.jsx)("div",{className:"flex h-13 items-center justify-end px-3 pt-3",children:k&&(0,t.jsx)(u.Button,{variant:"secondary",size:"xs",onClick:b,disabled:f||!h,children:f?(0,t.jsx)(c.LoadingSpinner,{color:"white",variant:"small"}):(0,t.jsx)(t.Fragment,{children:"Restore"})})}),(0,t.jsx)("div",{className:"overflow-y-scroll h-full overflow-x-hidden p-0",children:(0,t.jsx)("div",{className:"px-8 pt-[14px] pb-13 mb-32 w-full mx-auto flex flex-col justify-center items-center",children:(0,t.jsx)("div",{className:"relative mx-auto z-10 mt-7 w-full max-w-[44rem] px-[1rem]",children:(0,t.jsx)(i.default,{chatbotId:"",disableBubbleMenu:!0,editable:!1,enableHistoryExtension:!1,defaultContent:w,onContentChange:()=>{},onCreate:()=>{}},"".concat(g.id,"-").concat(x))})})})]})}},19105:e=>{"use strict";e.s({useRoom:()=>t._useRoom});var t=e.i(208955)},819563:e=>{"use strict";e.s({useSelf:()=>t._useSelf});var t=e.i(208955)},839544:e=>{"use strict";e.s({Base64:()=>F});var t=e.i(781635);let n="3.7.7",r="function"==typeof t.Buffer,i="function"==typeof TextDecoder?new TextDecoder:void 0,a="function"==typeof TextEncoder?new TextEncoder:void 0,o=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),s=(e=>{let t={};return e.forEach((e,n)=>t[e]=n),t})(o),l=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,u=String.fromCharCode.bind(String),c="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),d=e=>e.replace(/=/g,"").replace(/[+\/]/g,e=>"+"==e?"-":"_"),h=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),p=e=>{let t,n,r,i,a="",s=e.length%3;for(let s=0;s<e.length;){if((n=e.charCodeAt(s++))>255||(r=e.charCodeAt(s++))>255||(i=e.charCodeAt(s++))>255)throw TypeError("invalid character found");a+=o[(t=n<<16|r<<8|i)>>18&63]+o[t>>12&63]+o[t>>6&63]+o[63&t]}return s?a.slice(0,s-3)+"===".substring(s):a},f="function"==typeof btoa?e=>btoa(e):r?e=>t.Buffer.from(e,"binary").toString("base64"):p,m=r?e=>t.Buffer.from(e).toString("base64"):e=>{let t=[];for(let n=0,r=e.length;n<r;n+=4096)t.push(u.apply(null,e.subarray(n,n+4096)));return f(t.join(""))},g=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?d(m(e)):m(e)},y=e=>{if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?u(192|t>>>6)+u(128|63&t):u(224|t>>>12&15)+u(128|t>>>6&63)+u(128|63&t)}var t=65536+(e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320);return u(240|t>>>18&7)+u(128|t>>>12&63)+u(128|t>>>6&63)+u(128|63&t)},b=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,x=e=>e.replace(b,y),w=r?e=>t.Buffer.from(e,"utf8").toString("base64"):a?e=>m(a.encode(e)):e=>f(x(e)),k=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?d(w(e)):w(e)},S=e=>k(e,!0),_=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,C=e=>{switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return u((t>>>10)+55296)+u((1023&t)+56320);case 3:return u((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return u((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},A=e=>e.replace(_,C),E=e=>{if(e=e.replace(/\s+/g,""),!l.test(e))throw TypeError("malformed base64.");e+="==".slice(2-(3&e.length));let t,n="",r,i;for(let a=0;a<e.length;)t=s[e.charAt(a++)]<<18|s[e.charAt(a++)]<<12|(r=s[e.charAt(a++)])<<6|(i=s[e.charAt(a++)]),n+=64===r?u(t>>16&255):64===i?u(t>>16&255,t>>8&255):u(t>>16&255,t>>8&255,255&t);return n},T="function"==typeof atob?e=>atob(h(e)):r?e=>t.Buffer.from(e,"base64").toString("binary"):E,M=r?e=>c(t.Buffer.from(e,"base64")):e=>c(T(e).split("").map(e=>e.charCodeAt(0))),I=e=>M(D(e)),N=r?e=>t.Buffer.from(e,"base64").toString("utf8"):i?e=>i.decode(M(e)):e=>A(T(e)),D=e=>h(e.replace(/[-_]/g,e=>"-"==e?"+":"/")),P=e=>N(D(e)),R=e=>({value:e,enumerable:!1,writable:!0,configurable:!0}),O=function(){let e=(e,t)=>Object.defineProperty(String.prototype,e,R(t));e("fromBase64",function(){return P(this)}),e("toBase64",function(e){return k(this,e)}),e("toBase64URI",function(){return k(this,!0)}),e("toBase64URL",function(){return k(this,!0)}),e("toUint8Array",function(){return I(this)})},j=function(){let e=(e,t)=>Object.defineProperty(Uint8Array.prototype,e,R(t));e("toBase64",function(e){return g(this,e)}),e("toBase64URI",function(){return g(this,!0)}),e("toBase64URL",function(){return g(this,!0)})},F={version:n,VERSION:n,atob:T,atobPolyfill:E,btoa:f,btoaPolyfill:p,fromBase64:P,toBase64:k,encode:k,encodeURI:S,encodeURL:S,utob:x,btou:A,decode:P,isValid:e=>{if("string"!=typeof e)return!1;let t=e.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},fromUint8Array:g,toUint8Array:I,extendString:O,extendUint8Array:j,extendBuiltins:()=>{O(),j()}}},839847:e=>{"use strict";e.s({addAutoKey:()=>h,count:()=>l,createIDBKeyRangeLowerBound:()=>b,createIDBKeyRangeUpperBound:()=>y,createStores:()=>o,del:()=>c,deleteDB:()=>a,get:()=>u,getAll:()=>p,getLastKey:()=>f,openDB:()=>i,put:()=>d,transact:()=>s});var t=e.i(557932),n=e.i(921520);let r=e=>t.create((t,n)=>{e.onerror=e=>n(Error(e.target.error)),e.onsuccess=e=>t(e.target.result)}),i=(e,r)=>t.create((t,i)=>{let a=indexedDB.open(e);a.onupgradeneeded=e=>r(e.target.result),a.onerror=e=>i(n.create(e.target.error)),a.onsuccess=e=>{let n=e.target.result;n.onversionchange=()=>{n.close()},t(n)}}),a=e=>r(indexedDB.deleteDatabase(e)),o=(e,t)=>t.forEach(t=>e.createObjectStore.apply(e,t)),s=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"readwrite",r=e.transaction(t,n);return t.map(e=>g(r,e))},l=(e,t)=>r(e.count(t)),u=(e,t)=>r(e.get(t)),c=(e,t)=>r(e.delete(t)),d=(e,t,n)=>r(e.put(t,n)),h=(e,t)=>r(e.add(t)),p=(e,t,n)=>r(e.getAll(t,n)),f=function(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t=null,m(e,n,e=>(t=e,!1),"prev").then(()=>t)},m=function(e,n,r){let i,a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"next";return i=e.openKeyCursor(n,o),a=e=>r(e.key),t.create((e,t)=>{i.onerror=t,i.onsuccess=async t=>{let n=t.target.result;if(null===n||await a(n)===!1)return e();n.continue()}})},g=(e,t)=>e.objectStore(t),y=(e,t)=>IDBKeyRange.upperBound(e,t),b=(e,t)=>IDBKeyRange.lowerBound(e,t)},466268:e=>{"use strict";e.s({IndexeddbPersistence:()=>u});var t=e.i(144304),n=e.i(839847),r=e.i(557932),i=e.i(741240);let a="custom",o="updates",s=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{},[a]=n.transact(e.db,[o]);return n.getAll(a,n.createIDBKeyRangeLowerBound(e._dbref,!1)).then(n=>{e._destroyed||(r(a),t.transact(e.doc,()=>{n.forEach(n=>t.applyUpdate(e.doc,n))},e,!1),i(a))}).then(()=>n.getLastKey(a).then(t=>{e._dbref=t+1})).then(()=>n.count(a).then(t=>{e._dbsize=t})).then(()=>a)},l=function(e){let r=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return s(e).then(i=>{(r||e._dbsize>=500)&&n.addAutoKey(i,t.encodeStateAsUpdate(e.doc)).then(()=>n.del(i,n.createIDBKeyRangeUpperBound(e._dbref,!0))).then(()=>n.count(i).then(t=>{e._dbsize=t}))})};class u extends i.Observable{destroy(){return this._storeTimeoutId&&clearTimeout(this._storeTimeoutId),this.doc.off("update",this._storeUpdate),this.doc.off("destroy",this.destroy),this._destroyed=!0,this._db.then(e=>{e.close()})}clearData(){return this.destroy().then(()=>{n.deleteDB(this.name)})}get(e){return this._db.then(t=>{let[r]=n.transact(t,[a],"readonly");return n.get(r,e)})}set(e,t){return this._db.then(r=>{let[i]=n.transact(r,[a]);return n.put(i,t,e)})}del(e){return this._db.then(t=>{let[r]=n.transact(t,[a]);return n.del(r,e)})}constructor(e,i){super(),this.doc=i,this.name=e,this._dbref=0,this._dbsize=0,this._destroyed=!1,this.db=null,this.synced=!1,this._db=n.openDB(e,e=>n.createStores(e,[["updates",{autoIncrement:!0}],["custom"]])),this.whenSynced=r.create(e=>this.on("synced",()=>e(this))),this._db.then(e=>{this.db=e,s(this,e=>n.addAutoKey(e,t.encodeStateAsUpdate(i)),()=>{if(this._destroyed)return this;this.synced=!0,this.emit("synced",[this])})}),this._storeTimeout=1e3,this._storeTimeoutId=null,this._storeUpdate=(e,t)=>{if(this.db&&t!==this){let[t]=n.transact(this.db,[o]);n.addAutoKey(t,e),++this._dbsize>=500&&(null!==this._storeTimeoutId&&clearTimeout(this._storeTimeoutId),this._storeTimeoutId=setTimeout(()=>{l(this,!1),this._storeTimeoutId=null},this._storeTimeout))}},i.on("update",this._storeUpdate),this.destroy=this.destroy.bind(this),i.on("destroy",this.destroy)}}},774686:e=>{"use strict";e.s({LiveblocksYjsProvider:()=>f});var t=e.i(11968),n=e.i(356356),r=e.i(839544),i=e.i(466268),a=e.i(144304),o=()=>new Map,s=()=>new Set,l=Array.from,u=class{on(e,t){var n;let r;(n=this._observers,void 0===(r=n.get(e))&&n.set(e,r=s()),r).add(t)}once(e,t){var n=this;let r=function(){for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];n.off(e,r),t(...a)};this.on(e,r)}off(e,t){let n=this._observers.get(e);void 0!==n&&(n.delete(t),0===n.size&&this._observers.delete(e))}emit(e,t){return l((this._observers.get(e)||o()).values()).forEach(e=>e(...t))}destroy(){this._observers=o()}constructor(){this._observers=o()}},c="__yjs",d="__yjs_clientid",h=class extends u{rebuildActorToClientMap(e){this.actorToClientMap.clear(),e.forEach(e=>{void 0!==e.presence[d]&&this.actorToClientMap.set(e.connectionId,e.presence[d])})}destroy(){this.emit("destroy",[this]),this.othersUnsub(),this.setLocalState(null),super.destroy()}getLocalState(){let e=this.room.getPresence();return 0===Object.keys(e).length||void 0===e[c]?null:e[c]}setLocalState(e){var t;let n=null==(t=this.room.getSelf())?void 0:t.presence;if(null===e){if(void 0===n)return;this.room.updatePresence({...n,[c]:null}),this.emit("update",[{added:[],updated:[],removed:[this.doc.clientID]},"local"]);return}let r=null==n?void 0:n[c],i=void 0===r?[this.doc.clientID]:[],a=void 0===r?[]:[this.doc.clientID];this.room.updatePresence({[c]:{...r||{},...e||{}}}),this.emit("update",[{added:i,updated:a,removed:[]},"local"])}setLocalStateField(e,t){var n;let r=null==(n=this.room.getSelf())?void 0:n.presence[c];this.room.updatePresence({[c]:{...r||{},...{[e]:t}}})}getStates(){var e;let t=this.room.getOthers().reduce((e,t)=>{let n=t.presence[c],r=t.presence[d];return void 0!==n&&void 0!==r&&e.set(r,n||{}),e},new Map),n=null==(e=this.room.getSelf())?void 0:e.presence[c];return void 0!==n&&t.set(this.doc.clientID,n),t}constructor(e,n){super(),(0,t._)(this,"room",void 0),(0,t._)(this,"doc",void 0),(0,t._)(this,"states",new Map),(0,t._)(this,"actorToClientMap",new Map),(0,t._)(this,"meta",new Map),(0,t._)(this,"_checkInterval",0),(0,t._)(this,"othersUnsub",void 0),this.doc=e,this.room=n,this.room.updatePresence({[d]:this.doc.clientID}),this.othersUnsub=this.room.events.others.subscribe(e=>{let t;if("leave"===e.type){let n=this.actorToClientMap.get(e.user.connectionId);void 0!==n&&(t={added:[],updated:[],removed:[n]}),this.rebuildActorToClientMap(e.others)}if("enter"===e.type||"update"===e.type){this.rebuildActorToClientMap(e.others);let n=this.actorToClientMap.get(e.user.connectionId);void 0!==n&&(t={added:"enter"===e.type?[n]:[],updated:"update"===e.type?[n]:[],removed:[]})}"reset"===e.type&&this.rebuildActorToClientMap(e.others),void 0!==t&&(this.emit("change",[t,"presence"]),this.emit("update",[t,"presence"]))})}},p=class extends u{get synced(){return this._synced}set synced(e){this._synced!==e&&(this._synced=e,this.emit("synced",[e]),this.emit("sync",[e]))}destroy(){this.doc.off("update",this.updateHandler),this.unsubscribers.forEach(e=>e()),this._observers=new Map,this.doc.destroy()}constructor({doc:e,isRoot:n,updateDoc:o,fetchDoc:s,useV2Encoding:l}){super(),(0,t._)(this,"unsubscribers",[]),(0,t._)(this,"_synced",!1),(0,t._)(this,"doc",void 0),(0,t._)(this,"updateRoomDoc",void 0),(0,t._)(this,"fetchRoomDoc",void 0),(0,t._)(this,"useV2Encoding",void 0),(0,t._)(this,"handleServerUpdate",e=>{let{update:t,stateVector:n,readOnly:i,v2:o}=e;if((o?a.applyUpdateV2:a.applyUpdate)(this.doc,t,"backend"),n){if(!i)try{let e=(this.useV2Encoding?a.encodeStateAsUpdateV2:a.encodeStateAsUpdate)(this.doc,r.Base64.toUint8Array(n));this.updateRoomDoc(e)}catch(e){console.warn(e)}this.synced=!0}}),(0,t._)(this,"syncDoc",()=>{this.synced=!1;let e=r.Base64.fromUint8Array(a.encodeStateVector(this.doc));this.fetchRoomDoc(e)}),(0,t._)(this,"updateHandler",(e,t)=>{let n=t instanceof i.IndexeddbPersistence;"backend"===t||n||this.updateRoomDoc(e)}),this.doc=e,this.useV2Encoding=l,this.doc.on(l?"updateV2":"update",this.updateHandler),this.updateRoomDoc=e=>{o(e,n?void 0:this.doc.guid)},this.fetchRoomDoc=e=>{s(e,n?void 0:this.doc.guid)},this.syncDoc()}},f=class extends u{get useV2Encoding(){var e;return null!=(e=this.options.useV2Encoding_experimental)&&e}get synced(){return this.rootDocHandler.synced}async pause(){var e;await (null==(e=this.indexeddbProvider)?void 0:e.destroy()),this.indexeddbProvider=null,this.isPaused=!0}unpause(){this.isPaused=!1,this.options.offlineSupport_experimental&&this.setupOfflineSupport(),this.rootDocHandler.syncDoc()}getStatus(){return this.synced?0===this.pending.length?"synchronized":"synchronizing":"loading"}destroy(){for(let[e,t]of(this.unsubscribers.forEach(e=>e()),this.awareness.destroy(),this.rootDocHandler.destroy(),this._observers=new Map,this.subdocHandlers))t.destroy();this.subdocHandlers.clear(),super.destroy()}async clearOfflineData(){if(this.indexeddbProvider)return this.indexeddbProvider.clearData()}getYDoc(){return this.rootDoc}disconnect(){}connect(){}constructor(e,o,s={}){var l;super(),(0,t._)(this,"room",void 0),(0,t._)(this,"rootDoc",void 0),(0,t._)(this,"options",void 0),(0,t._)(this,"indexeddbProvider",null),(0,t._)(this,"isPaused",!1),(0,t._)(this,"unsubscribers",[]),(0,t._)(this,"awareness",void 0),(0,t._)(this,"rootDocHandler",void 0),(0,t._)(this,"subdocHandlers",new Map),(0,t._)(this,"permanentUserData",void 0),(0,t._)(this,"pending",[]),(0,t._)(this,"setupOfflineSupport",()=>{this.indexeddbProvider=new i.IndexeddbPersistence(this.room.id,this.rootDoc);let e=()=>{this.rootDocHandler.synced=!0};this.indexeddbProvider.on("synced",e),this.unsubscribers.push(()=>{var t;null==(t=this.indexeddbProvider)||t.off("synced",e)})}),(0,t._)(this,"handleSubdocs",e=>{let{loaded:t,removed:n,added:r}=e;if(t.forEach(this.createSubdocHandler),this.options.autoloadSubdocs)for(let e of r)this.subdocHandlers.has(e.guid)||e.load();for(let e of n)if(this.subdocHandlers.has(e.guid)){var i;null==(i=this.subdocHandlers.get(e.guid))||i.destroy(),this.subdocHandlers.delete(e.guid)}}),(0,t._)(this,"getUniqueUpdateId",e=>{var t;let n=null!=(t=(0,a.parseUpdateMeta)(e).to.get(this.rootDoc.clientID))?t:"-1";return this.rootDoc.clientID+":"+n}),(0,t._)(this,"updateDoc",(e,t)=>{var n,i;if((null==(i=null==(n=this.room.getSelf())?void 0:n.canWrite)||i)&&!this.isPaused){let n=this.getUniqueUpdateId(e);this.pending.push(n),this.room.updateYDoc(r.Base64.fromUint8Array(e),t,this.useV2Encoding),this.emit("status",[this.getStatus()])}}),(0,t._)(this,"fetchDoc",(e,t)=>{this.room.fetchYDoc(e,t,this.useV2Encoding)}),(0,t._)(this,"createSubdocHandler",e=>{var t,n;if(this.subdocHandlers.has(e.guid)){null==(t=this.subdocHandlers.get(e.guid))||t.syncDoc();return}let r=new p({doc:e,isRoot:!1,updateDoc:this.updateDoc,fetchDoc:this.fetchDoc,useV2Encoding:null!=(n=this.options.useV2Encoding_experimental)&&n});this.subdocHandlers.set(e.guid,r)}),(0,t._)(this,"loadSubdoc",e=>{for(let t of this.rootDoc.subdocs)if(t.guid===e)return t.load(),!0;return!1}),(0,t._)(this,"syncDoc",()=>{for(let[e,t]of(this.rootDocHandler.syncDoc(),this.subdocHandlers))t.syncDoc()}),this.rootDoc=o,this.room=e,this.options=s,this.rootDocHandler=new p({doc:o,isRoot:!0,updateDoc:this.updateDoc,fetchDoc:this.fetchDoc,useV2Encoding:null!=(l=this.options.useV2Encoding_experimental)&&l}),this.options.enablePermanentUserData&&(this.permanentUserData=new a.PermanentUserData(o)),e[n.kInternal].setYjsProvider(this),this.awareness=new h(this.rootDoc,this.room),this.unsubscribers.push(this.room.events.status.subscribe(e=>{"connected"===e?this.rootDocHandler.syncDoc():this.rootDocHandler.synced=!1,this.emit("status",[this.getStatus()])})),this.unsubscribers.push(this.room.events.ydoc.subscribe(e=>{var t,i,a;let{type:o}=e;if(o===n.ClientMsgCode.UPDATE_YDOC)return;let{stateVector:s,update:l,guid:u,v2:c}=e,d=null==(i=null==(t=this.room.getSelf())?void 0:t.canWrite)||i,h=r.Base64.toUint8Array(l),p=this.getUniqueUpdateId(h);this.pending=this.pending.filter(e=>e!==p),void 0!==u?null==(a=this.subdocHandlers.get(u))||a.handleServerUpdate({update:h,stateVector:s,readOnly:!d,v2:c}):this.rootDocHandler.handleServerUpdate({update:h,stateVector:s,readOnly:!d,v2:c}),this.emit("status",[this.getStatus()])})),s.offlineSupport_experimental&&this.setupOfflineSupport(),this.rootDocHandler.on("synced",()=>{let e=this.rootDocHandler.synced;for(let[e,t]of this.subdocHandlers)t.syncDoc();this.emit("synced",[e]),this.emit("sync",[e]),this.emit("status",[this.getStatus()])}),this.rootDoc.on("subdocs",this.handleSubdocs),this.syncDoc()}};(0,n.detectDupes)("@liveblocks/yjs","2.24.3","esm")},213007:e=>{"use strict";var{m:t,e:n}=e,r=Object.prototype.toString;t.exports=function(e){var t=r.call(e),n="[object Arguments]"===t;return n||(n="[object Array]"!==t&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===r.call(e.callee)),n}},307103:e=>{"use strict";var t,{m:n,e:r}=e;if(!Object.keys){var i=Object.prototype.hasOwnProperty,a=Object.prototype.toString,o=e.r(213007),s=Object.prototype.propertyIsEnumerable,l=!s.call({toString:null},"toString"),u=s.call(function(){},"prototype"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=function(e){var t=e.constructor;return t&&t.prototype===e},h={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},p=function(){if("undefined"==typeof window)return!1;for(var e in window)try{if(!h["$"+e]&&i.call(window,e)&&null!==window[e]&&"object"==typeof window[e])try{d(window[e])}catch(e){return!0}}catch(e){return!0}return!1}(),f=function(e){if("undefined"==typeof window||!p)return d(e);try{return d(e)}catch(e){return!1}};t=function(e){var t=null!==e&&"object"==typeof e,n="[object Function]"===a.call(e),r=o(e),s=t&&"[object String]"===a.call(e),d=[];if(!t&&!n&&!r)throw TypeError("Object.keys called on a non-object");var h=u&&n;if(s&&e.length>0&&!i.call(e,0))for(var p=0;p<e.length;++p)d.push(String(p));if(r&&e.length>0)for(var m=0;m<e.length;++m)d.push(String(m));else for(var g in e)!(h&&"prototype"===g)&&i.call(e,g)&&d.push(String(g));if(l)for(var y=f(e),b=0;b<c.length;++b)!(y&&"constructor"===c[b])&&i.call(e,c[b])&&d.push(c[b]);return d}}n.exports=t},97709:e=>{"use strict";var{m:t,e:n}=e,r=Array.prototype.slice,i=e.r(213007),a=Object.keys,o=a?function(e){return a(e)}:e.r(307103),s=Object.keys;o.shim=function(){return Object.keys?!function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2)&&(Object.keys=function(e){return i(e)?s(r.call(e)):s(e)}):Object.keys=o,Object.keys||o},t.exports=o},174090:e=>{"use strict";var{m:t,e:n}=e,r=e.r(97709),i="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),a=Object.prototype.toString,o=Array.prototype.concat,s=e.r(734717),l=e.r(88987)(),u=function(e,t,n,r){if(t in e){if(!0===r){if(e[t]===n)return}else if("function"!=typeof r||"[object Function]"!==a.call(r)||!r())return}l?s(e,t,n,!0):s(e,t,n)},c=function(e,t){var n=arguments.length>2?arguments[2]:{},a=r(t);i&&(a=o.call(a,Object.getOwnPropertySymbols(t)));for(var s=0;s<a.length;s+=1)u(e,a[s],t[a[s]],n[a[s]])};c.supportsDescriptors=!!l,t.exports=c},899272:e=>{"use strict";var{m:t,e:n}=e,r=e.r(97709),i=e.r(391868)(),a=e.r(95753),o=e.r(133662),s=a("Array.prototype.push"),l=a("Object.prototype.propertyIsEnumerable"),u=i?o.getOwnPropertySymbols:null;t.exports=function(e,t){if(null==e)throw TypeError("target must be an object");var n=o(e);if(1==arguments.length)return n;for(var a=1;a<arguments.length;++a){var c=o(arguments[a]),d=r(c),h=i&&(o.getOwnPropertySymbols||u);if(h)for(var p=h(c),f=0;f<p.length;++f){var m=p[f];l(c,m)&&s(d,m)}for(var g=0;g<d.length;++g){var y=d[g];if(l(c,y)){var b=c[y];n[y]=b}}}return n}},652173:e=>{"use strict";var{m:t,e:n}=e,r=e.r(899272),i=function(){for(var e="abcdefghijklmnopqrst",t=e.split(""),n={},r=0;r<t.length;++r)n[t[r]]=t[r];var i=Object.assign({},n),a="";for(var o in i)a+=o;return e!==a},a=function(){if(!Object.assign||!Object.preventExtensions)return!1;var e=Object.preventExtensions({1:2});try{Object.assign(e,"xy")}catch(t){return"y"===e[1]}return!1};t.exports=function(){return i()||a()?r:Object.assign}},212381:e=>{"use strict";var{m:t,e:n}=e,r=e.r(174090),i=e.r(652173);t.exports=function(){var e=i();return r(Object,{assign:e},{assign:function(){return Object.assign!==e}}),e}},340220:e=>{"use strict";var{m:t,e:n}=e,r=e.r(174090),i=e.r(32390),a=e.r(899272),o=e.r(652173),s=e.r(212381),l=i.apply(o()),u=function(e,t){return l(Object,arguments)};r(u,{getPolyfill:o,implementation:a,shim:s}),t.exports=u},582368:e=>{"use strict";var{m:t,e:n}=e,r=e.r(703889),i=e.r(32390),a=i(r("String.prototype.indexOf"));t.exports=function(e,t){var n=r(e,!!t);return"function"==typeof n&&a(e,".prototype.")>-1?i(n):n}},256831:e=>{"use strict";var{m:t,e:n}=e,r=function(){return"string"==typeof(function(){}).name},i=Object.getOwnPropertyDescriptor;if(i)try{i([],"length")}catch(e){i=null}r.functionsHaveConfigurableNames=function(){if(!r()||!i)return!1;var e=i(function(){},"name");return!!e&&!!e.configurable};var a=Function.prototype.bind;r.boundFunctionsHaveNames=function(){return r()&&"function"==typeof a&&""!==(function(){}).bind().name},t.exports=r},157343:e=>{"use strict";var{m:t,e:n}=e,r=e.r(734717),i=e.r(88987)(),a=e.r(256831).functionsHaveConfigurableNames(),o=e.r(270705);t.exports=function(e,t){if("function"!=typeof e)throw new o("`fn` is not a function");var n=arguments.length>2&&!!arguments[2];return(!n||a)&&(i?r(e,"name",t,!0,!0):r(e,"name",t)),e}},555519:e=>{"use strict";var{m:t,e:n}=e,r=e.r(157343),i=e.r(270705),a=Object;t.exports=r(function(){if(this==null||this!==a(this))throw new i("RegExp.prototype.flags getter called on non-object");var e="";return this.hasIndices&&(e+="d"),this.global&&(e+="g"),this.ignoreCase&&(e+="i"),this.multiline&&(e+="m"),this.dotAll&&(e+="s"),this.unicode&&(e+="u"),this.unicodeSets&&(e+="v"),this.sticky&&(e+="y"),e},"get flags",!0)},121558:e=>{"use strict";var{m:t,e:n}=e,r=e.r(555519),i=e.r(174090).supportsDescriptors,a=Object.getOwnPropertyDescriptor;t.exports=function(){if(i&&"gim"===/a/mig.flags){var e=a(RegExp.prototype,"flags");if(e&&"function"==typeof e.get&&"dotAll"in RegExp.prototype&&"hasIndices"in RegExp.prototype){var t="",n={};if(Object.defineProperty(n,"hasIndices",{get:function(){t+="d"}}),Object.defineProperty(n,"sticky",{get:function(){t+="y"}}),e.get.call(n),"dy"===t)return e.get}}return r}},579130:e=>{"use strict";var{m:t,e:n}=e,r=e.r(174090).supportsDescriptors,i=e.r(121558),a=e.r(524129),o=Object.defineProperty,s=e.r(959883),l=e.r(992139),u=/a/;t.exports=function(){if(!r||!l)throw new s("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var e=i(),t=l(u),n=a(t,"flags");return n&&n.get===e||o(t,"flags",{configurable:!0,enumerable:!1,get:e}),e}},712227:e=>{"use strict";var{m:t,e:n}=e,r=e.r(174090),i=e.r(32390),a=e.r(555519),o=e.r(121558),s=e.r(579130),l=i(o());r(l,{getPolyfill:o,implementation:a,shim:s}),t.exports=l},537453:e=>{var{m:t,e:n}=e,r="function"==typeof Map&&Map.prototype,i=Object.getOwnPropertyDescriptor&&r?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,a=r&&i&&"function"==typeof i.get?i.get:null,o=r&&Map.prototype.forEach,s="function"==typeof Set&&Set.prototype,l=Object.getOwnPropertyDescriptor&&s?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,u=s&&l&&"function"==typeof l.get?l.get:null,c=s&&Set.prototype.forEach,d="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,h="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,p="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,f=Boolean.prototype.valueOf,m=Object.prototype.toString,g=Function.prototype.toString,y=String.prototype.match,b=String.prototype.slice,x=String.prototype.replace,w=String.prototype.toUpperCase,k=String.prototype.toLowerCase,S=RegExp.prototype.test,_=Array.prototype.concat,C=Array.prototype.join,A=Array.prototype.slice,E=Math.floor,T="function"==typeof BigInt?BigInt.prototype.valueOf:null,M=Object.getOwnPropertySymbols,I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,N="function"==typeof Symbol&&"object"==typeof Symbol.iterator,D="function"==typeof Symbol&&Symbol.toStringTag&&(typeof Symbol.toStringTag===N?"object":"symbol")?Symbol.toStringTag:null,P=Object.prototype.propertyIsEnumerable,R=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function O(e,t){if(e===1/0||e===-1/0||e!=e||e&&e>-1e3&&e<1e3||S.call(/e/,t))return t;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof e){var r=e<0?-E(-e):E(e);if(r!==e){var i=String(r),a=b.call(t,i.length+1);return x.call(i,n,"$&_")+"."+x.call(x.call(a,/([0-9]{3})/g,"$&_"),/_$/,"")}}return x.call(t,n,"$&_")}var j={},F=j.custom,L=q(F)?F:null,z={__proto__:null,double:'"',single:"'"},B={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};function U(e,t,n){var r=z[n.quoteStyle||t];return r+e+r}function H(e){return!D||!("object"==typeof e&&(D in e||void 0!==e[D]))}function W(e){return"[object Array]"===K(e)&&H(e)}function V(e){return"[object RegExp]"===K(e)&&H(e)}function q(e){if(N)return e&&"object"==typeof e&&e instanceof Symbol;if("symbol"==typeof e)return!0;if(!e||"object"!=typeof e||!I)return!1;try{return I.call(e),!0}catch(e){}return!1}t.exports=function e(t,n,r,i){var s,l,m,w,S,E=n||{};if($(E,"quoteStyle")&&!$(z,E.quoteStyle))throw TypeError('option "quoteStyle" must be "single" or "double"');if($(E,"maxStringLength")&&("number"==typeof E.maxStringLength?E.maxStringLength<0&&E.maxStringLength!==1/0:null!==E.maxStringLength))throw TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var M=!$(E,"customInspect")||E.customInspect;if("boolean"!=typeof M&&"symbol"!==M)throw TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if($(E,"indent")&&null!==E.indent&&"	"!==E.indent&&!(parseInt(E.indent,10)===E.indent&&E.indent>0))throw TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if($(E,"numericSeparator")&&"boolean"!=typeof E.numericSeparator)throw TypeError('option "numericSeparator", if provided, must be `true` or `false`');var F=E.numericSeparator;if(void 0===t)return"undefined";if(null===t)return"null";if("boolean"==typeof t)return t?"true":"false";if("string"==typeof t)return function e(t,n){if(t.length>n.maxStringLength){var r=t.length-n.maxStringLength;return e(b.call(t,0,n.maxStringLength),n)+("... "+r)+" more character"+(r>1?"s":"")}var i=B[n.quoteStyle||"single"];return i.lastIndex=0,U(x.call(x.call(t,i,"\\$1"),/[\x00-\x1f]/g,X),"single",n)}(t,E);if("number"==typeof t){if(0===t)return 1/0/t>0?"0":"-0";var G=String(t);return F?O(t,G):G}if("bigint"==typeof t){var en=String(t)+"n";return F?O(t,en):en}var er=void 0===E.depth?5:E.depth;if(void 0===r&&(r=0),r>=er&&er>0&&"object"==typeof t)return W(t)?"[Array]":"[Object]";var ei=function(e,t){var n;if("	"===e.indent)n="	";else{if("number"!=typeof e.indent||!(e.indent>0))return null;n=C.call(Array(e.indent+1)," ")}return{base:n,prev:C.call(Array(t+1),n)}}(E,r);if(void 0===i)i=[];else if(Y(i,t)>=0)return"[Circular]";function ea(t,n,a){if(n&&(i=A.call(i)).push(n),a){var o={depth:E.depth};return $(E,"quoteStyle")&&(o.quoteStyle=E.quoteStyle),e(t,o,r+1,i)}return e(t,E,r+1,i)}if("function"==typeof t&&!V(t)){var eo=function(e){if(e.name)return e.name;var t=y.call(g.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}(t),es=et(t,ea);return"[Function"+(eo?": "+eo:" (anonymous)")+"]"+(es.length>0?" { "+C.call(es,", ")+" }":"")}if(q(t)){var el=N?x.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):I.call(t);return"object"!=typeof t||N?el:Z(el)}if((eu=t)&&"object"==typeof eu&&("undefined"!=typeof HTMLElement&&eu instanceof HTMLElement||"string"==typeof eu.nodeName&&"function"==typeof eu.getAttribute)){for(var eu,ec,ed="<"+k.call(String(t.nodeName)),eh=t.attributes||[],ep=0;ep<eh.length;ep++){ed+=" "+eh[ep].name+"="+U((ec=eh[ep].value,x.call(String(ec),/"/g,"&quot;")),"double",E)}return ed+=">",t.childNodes&&t.childNodes.length&&(ed+="..."),ed+="</"+k.call(String(t.nodeName))+">"}if(W(t)){if(0===t.length)return"[]";var ef=et(t,ea);return ei&&!function(e){for(var t=0;t<e.length;t++)if(Y(e[t],"\n")>=0)return!1;return!0}(ef)?"["+ee(ef,ei)+"]":"[ "+C.call(ef,", ")+" ]"}if("[object Error]"===K(s=t)&&H(s)){var em=et(t,ea);return"cause"in Error.prototype||!("cause"in t)||P.call(t,"cause")?0===em.length?"["+String(t)+"]":"{ ["+String(t)+"] "+C.call(em,", ")+" }":"{ ["+String(t)+"] "+C.call(_.call("[cause]: "+ea(t.cause),em),", ")+" }"}if("object"==typeof t&&M){if(L&&"function"==typeof t[L]&&j)return j(t,{depth:er-r});else if("symbol"!==M&&"function"==typeof t.inspect)return t.inspect()}if(function(e){if(!a||!e||"object"!=typeof e)return!1;try{a.call(e);try{u.call(e)}catch(e){return!0}return e instanceof Map}catch(e){}return!1}(t)){var eg=[];return o&&o.call(t,function(e,n){eg.push(ea(n,t,!0)+" => "+ea(e,t))}),Q("Map",a.call(t),eg,ei)}if(function(e){if(!u||!e||"object"!=typeof e)return!1;try{u.call(e);try{a.call(e)}catch(e){return!0}return e instanceof Set}catch(e){}return!1}(t)){var ev=[];return c&&c.call(t,function(e){ev.push(ea(e,t))}),Q("Set",u.call(t),ev,ei)}if(function(e){if(!d||!e||"object"!=typeof e)return!1;try{d.call(e,d);try{h.call(e,h)}catch(e){return!0}return e instanceof WeakMap}catch(e){}return!1}(t))return J("WeakMap");if(function(e){if(!h||!e||"object"!=typeof e)return!1;try{h.call(e,h);try{d.call(e,d)}catch(e){return!0}return e instanceof WeakSet}catch(e){}return!1}(t))return J("WeakSet");if(function(e){if(!p||!e||"object"!=typeof e)return!1;try{return p.call(e),!0}catch(e){}return!1}(t))return J("WeakRef");if("[object Number]"===K(l=t)&&H(l))return Z(ea(Number(t)));if(function(e){if(!e||"object"!=typeof e||!T)return!1;try{return T.call(e),!0}catch(e){}return!1}(t))return Z(ea(T.call(t)));if("[object Boolean]"===K(m=t)&&H(m))return Z(f.call(t));if("[object String]"===K(w=t)&&H(w))return Z(ea(String(t)));if("undefined"!=typeof window&&t===window)return"{ [object Window] }";if("undefined"!=typeof globalThis&&t===globalThis||t===globalThis)return"{ [object globalThis] }";if(!("[object Date]"===K(S=t)&&H(S))&&!V(t)){var ey=et(t,ea),eb=R?R(t)===Object.prototype:t instanceof Object||t.constructor===Object,ex=t instanceof Object?"":"null prototype",ew=!eb&&D&&Object(t)===t&&D in t?b.call(K(t),8,-1):ex?"Object":"",ek=(eb||"function"!=typeof t.constructor?"":t.constructor.name?t.constructor.name+" ":"")+(ew||ex?"["+C.call(_.call([],ew||[],ex||[]),": ")+"] ":"");return 0===ey.length?ek+"{}":ei?ek+"{"+ee(ey,ei)+"}":ek+"{ "+C.call(ey,", ")+" }"}return String(t)};var G=Object.prototype.hasOwnProperty||function(e){return e in this};function $(e,t){return G.call(e,t)}function K(e){return m.call(e)}function Y(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return -1}function X(e){var t=e.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return n?"\\"+n:"\\x"+(t<16?"0":"")+w.call(t.toString(16))}function Z(e){return"Object("+e+")"}function J(e){return e+" { ? }"}function Q(e,t,n,r){return e+" ("+t+") {"+(r?ee(n,r):C.call(n,", "))+"}"}function ee(e,t){if(0===e.length)return"";var n="\n"+t.prev+t.base;return n+C.call(e,","+n)+"\n"+t.prev}function et(e,t){var n,r=W(e),i=[];if(r){i.length=e.length;for(var a=0;a<e.length;a++)i[a]=$(e,a)?t(e[a],e):""}var o="function"==typeof M?M(e):[];if(N){n={};for(var s=0;s<o.length;s++)n["$"+o[s]]=o[s]}for(var l in e)if($(e,l)&&(!r||String(Number(l))!==l||!(l<e.length)))if(N&&n["$"+l]instanceof Symbol)continue;else S.call(/[^\w$]/,l)?i.push(t(l,e)+": "+t(e[l],e)):i.push(l+": "+t(e[l],e));if("function"==typeof M)for(var u=0;u<o.length;u++)P.call(e,o[u])&&i.push("["+t(o[u])+"]: "+t(e[o[u]],e));return i}},63086:e=>{"use strict";var{m:t,e:n}=e,r=e.r(537453),i=e.r(270705),a=function(e,t,n){for(var r,i=e;null!=(r=i.next);i=r)if(r.key===t)return i.next=r.next,n||(r.next=e.next,e.next=r),r},o=function(e,t){if(e){var n=a(e,t);return n&&n.value}},s=function(e,t,n){var r=a(e,t);r?r.value=n:e.next={key:t,next:e.next,value:n}},l=function(e,t){if(e)return a(e,t,!0)};t.exports=function(){var e,t={assert:function(e){if(!t.has(e))throw new i("Side channel does not contain "+r(e))},delete:function(t){var n=e&&e.next,r=l(e,t);return r&&n&&n===r&&(e=void 0),!!r},get:function(t){return o(e,t)},has:function(t){var n;return!!(n=e)&&!!a(n,t)},set:function(t,n){e||(e={next:void 0}),s(e,t,n)}};return t}},597235:e=>{"use strict";var{m:t,e:n}=e,r=e.r(703889),i=e.r(95753),a=e.r(537453),o=e.r(270705),s=r("%Map%",!0),l=i("Map.prototype.get",!0),u=i("Map.prototype.set",!0),c=i("Map.prototype.has",!0),d=i("Map.prototype.delete",!0),h=i("Map.prototype.size",!0);t.exports=!!s&&function(){var e,t={assert:function(e){if(!t.has(e))throw new o("Side channel does not contain "+a(e))},delete:function(t){if(e){var n=d(e,t);return 0===h(e)&&(e=void 0),n}return!1},get:function(t){if(e)return l(e,t)},has:function(t){return!!e&&c(e,t)},set:function(t,n){e||(e=new s),u(e,t,n)}};return t}},758722:e=>{"use strict";var{m:t,e:n}=e,r=e.r(703889),i=e.r(95753),a=e.r(537453),o=e.r(597235),s=e.r(270705),l=r("%WeakMap%",!0),u=i("WeakMap.prototype.get",!0),c=i("WeakMap.prototype.set",!0),d=i("WeakMap.prototype.has",!0),h=i("WeakMap.prototype.delete",!0);t.exports=l?function(){var e,t,n={assert:function(e){if(!n.has(e))throw new s("Side channel does not contain "+a(e))},delete:function(n){if(l&&n&&("object"==typeof n||"function"==typeof n)){if(e)return h(e,n)}else if(o&&t)return t.delete(n);return!1},get:function(n){return l&&n&&("object"==typeof n||"function"==typeof n)&&e?u(e,n):t&&t.get(n)},has:function(n){return l&&n&&("object"==typeof n||"function"==typeof n)&&e?d(e,n):!!t&&t.has(n)},set:function(n,r){l&&n&&("object"==typeof n||"function"==typeof n)?(e||(e=new l),c(e,n,r)):o&&(t||(t=o()),t.set(n,r))}};return n}:o},952347:e=>{"use strict";var{m:t,e:n}=e,r=e.r(270705),i=e.r(537453),a=e.r(63086),o=e.r(597235),s=e.r(758722)||o||a;t.exports=function(){var e,t={assert:function(e){if(!t.has(e))throw new r("Side channel does not contain "+i(e))},delete:function(t){return!!e&&e.delete(t)},get:function(t){return e&&e.get(t)},has:function(t){return!!e&&e.has(t)},set:function(t,n){e||(e=s()),e.set(t,n)}};return t}},639608:e=>{"use strict";var{m:t,e:n}=e,r=e.r(768642),i=e.r(952347)(),a=e.r(270705),o={assert:function(e,t){if(!e||"object"!=typeof e&&"function"!=typeof e)throw new a("`O` is not an object");if("string"!=typeof t)throw new a("`slot` must be a string");if(i.assert(e),!o.has(e,t))throw new a("`"+t+"` is not present on `O`")},get:function(e,t){if(!e||"object"!=typeof e&&"function"!=typeof e)throw new a("`O` is not an object");if("string"!=typeof t)throw new a("`slot` must be a string");var n=i.get(e);return n&&n["$"+t]},has:function(e,t){if(!e||"object"!=typeof e&&"function"!=typeof e)throw new a("`O` is not an object");if("string"!=typeof t)throw new a("`slot` must be a string");var n=i.get(e);return!!n&&r(n,"$"+t)},set:function(e,t,n){if(!e||"object"!=typeof e&&"function"!=typeof e)throw new a("`O` is not an object");if("string"!=typeof t)throw new a("`slot` must be a string");var r=i.get(e);r||(r={},i.set(e,r)),r["$"+t]=n}};Object.freeze&&Object.freeze(o),t.exports=o},70828:e=>{"use strict";var{m:t,e:n}=e,r=e.r(639608),i=e.r(108457),a="object"==typeof StopIteration?StopIteration:null;t.exports=function(e){if(!a)throw new i("this environment lacks StopIteration");r.set(e,"[[Done]]",!1);var t={next:function(){var e=r.get(this,"[[Iterator]]"),t=!!r.get(e,"[[Done]]");try{return{done:t,value:t?void 0:e.next()}}catch(t){if(r.set(e,"[[Done]]",!0),t!==a)throw t;return{done:!0,value:void 0}}}};return r.set(t,"[[Iterator]]",e),t}},755645:e=>{var{m:t,e:n}=e,r={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},453727:e=>{"use strict";var{m:t,e:n}=e,r=e.r(95753),i=r("String.prototype.valueOf"),a=function(e){try{return i(e),!0}catch(e){return!1}},o=r("Object.prototype.toString"),s=e.r(119523)();t.exports=function(e){return"string"==typeof e||!!e&&"object"==typeof e&&(s?a(e):"[object String]"===o(e))}},134759:e=>{"use strict";var t,{m:n,e:r}=e,i="function"==typeof Map&&Map.prototype?Map:null,a="function"==typeof Set&&Set.prototype?Set:null;i||(t=function(e){return!1});var o=i?Map.prototype.has:null,s=a?Set.prototype.has:null;t||o||(t=function(e){return!1}),n.exports=t||function(e){if(!e||"object"!=typeof e)return!1;try{if(o.call(e),s)try{s.call(e)}catch(e){return!0}return e instanceof i}catch(e){}return!1}},317784:e=>{"use strict";var t,{m:n,e:r}=e,i="function"==typeof Map&&Map.prototype?Map:null,a="function"==typeof Set&&Set.prototype?Set:null;a||(t=function(e){return!1});var o=i?Map.prototype.has:null,s=a?Set.prototype.has:null;t||s||(t=function(e){return!1}),n.exports=t||function(e){if(!e||"object"!=typeof e)return!1;try{if(s.call(e),o)try{o.call(e)}catch(e){return!0}return e instanceof a}catch(e){}return!1}},110771:e=>{"use strict";var{m:t,e:n}=e,r=e.i(227541),i=e.r(905135),a=e.r(70828);if(e.r(166632)()||e.r(391868)()){var o=Symbol.iterator;t.exports=function(e){return null!=e&&void 0!==e[o]?e[o]():i(e)?Array.prototype[o].call(e):void 0}}else{var s=e.r(755645),l=e.r(453727),u=e.r(703889),c=u("%Map%",!0),d=u("%Set%",!0),h=e.r(582368),p=h("Array.prototype.push"),f=h("String.prototype.charCodeAt"),m=h("String.prototype.slice"),g=function(e,t){if(t+1>=e.length)return t+1;var n=f(e,t);if(n<55296||n>56319)return t+1;var r=f(e,t+1);return r<56320||r>57343?t+1:t+2},y=function(e){var t=0;return{next:function(){var n,r=t>=e.length;return r||(n=e[t],t+=1),{done:r,value:n}}}},b=function(e,t){if(s(e)||i(e))return y(e);if(l(e)){var n=0;return{next:function(){var t=g(e,n),r=m(e,n,t);return n=t,{done:t>e.length,value:r}}}}if(t&&void 0!==e["_es6-shim iterator_"])return e["_es6-shim iterator_"]()};if(c||d){var x=e.r(134759),w=e.r(317784),k=h("Map.prototype.forEach",!0),S=h("Set.prototype.forEach",!0);if(void 0===r.default||!r.default.versions||!r.default.versions.node)var _=h("Map.prototype.iterator",!0),C=h("Set.prototype.iterator",!0);var A=h("Map.prototype.@@iterator",!0)||h("Map.prototype._es6-shim iterator_",!0),E=h("Set.prototype.@@iterator",!0)||h("Set.prototype._es6-shim iterator_",!0),T=function(e){if(x(e)){if(_)return a(_(e));if(A)return A(e);if(k){var t=[];return k(e,function(e,n){p(t,[n,e])}),y(t)}}if(w(e)){if(C)return a(C(e));if(E)return E(e);if(S){var n=[];return S(e,function(e){p(n,e)}),y(n)}}};t.exports=function(e){return T(e)||b(e)}}else t.exports=function(e){if(null!=e)return b(e,!0)}}},674155:e=>{"use strict";var{m:t,e:n}=e,r=function(e){return e!=e};t.exports=function(e,t){return 0===e&&0===t?1/e==1/t:!!(e===t||r(e)&&r(t))}},868776:e=>{"use strict";var{m:t,e:n}=e,r=e.r(674155);t.exports=function(){return"function"==typeof Object.is?Object.is:r}},354852:e=>{"use strict";var{m:t,e:n}=e,r=e.r(868776),i=e.r(174090);t.exports=function(){var e=r();return i(Object,{is:e},{is:function(){return Object.is!==e}}),e}},865914:e=>{"use strict";var{m:t,e:n}=e,r=e.r(174090),i=e.r(32390),a=e.r(674155),o=e.r(868776),s=e.r(354852),l=i(o(),Object);r(l,{getPolyfill:o,implementation:a,shim:s}),t.exports=l},584466:e=>{"use strict";var{m:t,e:n}=e,r=e.r(32390),i=e.r(95753),a=e.r(703889)("%ArrayBuffer%",!0),o=i("ArrayBuffer.prototype.byteLength",!0),s=i("Object.prototype.toString"),l=!!a&&!o&&new a(0).slice,u=!!l&&r(l);t.exports=o||u?function(e){if(!e||"object"!=typeof e)return!1;try{return o?o(e):u(e,0),!0}catch(e){return!1}}:a?function(e){return"[object ArrayBuffer]"===s(e)}:function(e){return!1}},720892:e=>{"use strict";var{m:t,e:n}=e,r=e.r(95753),i=r("Date.prototype.getDay"),a=function(e){try{return i(e),!0}catch(e){return!1}},o=r("Object.prototype.toString"),s=e.r(119523)();t.exports=function(e){return"object"==typeof e&&null!==e&&(s?a(e):"[object Date]"===o(e))}},594220:e=>{"use strict";var{m:t,e:n}=e,r=e.r(95753)("SharedArrayBuffer.prototype.byteLength",!0);t.exports=r?function(e){if(!e||"object"!=typeof e)return!1;try{return r(e),!0}catch(e){return!1}}:function(e){return!1}},80609:e=>{"use strict";var{m:t,e:n}=e,r=e.r(95753),i=r("Number.prototype.toString"),a=function(e){try{return i(e),!0}catch(e){return!1}},o=r("Object.prototype.toString"),s=e.r(119523)();t.exports=function(e){return"number"==typeof e||!!e&&"object"==typeof e&&(s?a(e):"[object Number]"===o(e))}},344472:e=>{"use strict";var{m:t,e:n}=e,r=e.r(95753),i=r("Boolean.prototype.toString"),a=r("Object.prototype.toString"),o=function(e){try{return i(e),!0}catch(e){return!1}},s=e.r(119523)();t.exports=function(e){return"boolean"==typeof e||null!==e&&"object"==typeof e&&(s?o(e):"[object Boolean]"===a(e))}},996961:e=>{"use strict";var{m:t,e:n}=e,r=e.r(95753),i=r("Object.prototype.toString"),a=e.r(166632)(),o=e.r(105493);if(a){var s=r("Symbol.prototype.toString"),l=o(/^Symbol\(.*\)$/);t.exports=function(e){if("symbol"==typeof e)return!0;if(!e||"object"!=typeof e||"[object Symbol]"!==i(e))return!1;try{return"symbol"==typeof e.valueOf()&&l(s(e))}catch(e){return!1}}}else t.exports=function(e){return!1}},536299:e=>{"use strict";var{m:t,e:n}=e,r="undefined"!=typeof BigInt&&BigInt;t.exports=function(){return"function"==typeof r&&"function"==typeof BigInt&&"bigint"==typeof r(42)&&"bigint"==typeof BigInt(42)}},40420:e=>{"use strict";var{m:t,e:n}=e;if(e.r(536299)()){var r=BigInt.prototype.valueOf,i=function(e){try{return r.call(e),!0}catch(e){}return!1};t.exports=function(e){return null!=e&&"boolean"!=typeof e&&"string"!=typeof e&&"number"!=typeof e&&"symbol"!=typeof e&&"function"!=typeof e&&("bigint"==typeof e||i(e))}}else t.exports=function(e){return!1}},367647:e=>{"use strict";var{m:t,e:n}=e,r=e.r(453727),i=e.r(80609),a=e.r(344472),o=e.r(996961),s=e.r(40420);t.exports=function(e){return null==e||"object"!=typeof e&&"function"!=typeof e?null:r(e)?"String":i(e)?"Number":a(e)?"Boolean":o(e)?"Symbol":s(e)?"BigInt":void 0}},260776:e=>{"use strict";var t,{m:n,e:r}=e,i="function"==typeof WeakMap&&WeakMap.prototype?WeakMap:null,a="function"==typeof WeakSet&&WeakSet.prototype?WeakSet:null;i||(t=function(e){return!1});var o=i?i.prototype.has:null,s=a?a.prototype.has:null;t||o||(t=function(e){return!1}),n.exports=t||function(e){if(!e||"object"!=typeof e)return!1;try{if(o.call(e,o),s)try{s.call(e,s)}catch(e){return!0}return e instanceof i}catch(e){}return!1}},845373:e=>{"use strict";var{m:t,e:n}=e,r=e.r(703889),i=e.r(95753),a=r("%WeakSet%",!0),o=i("WeakSet.prototype.has",!0);if(o){var s=i("WeakMap.prototype.has",!0);t.exports=function(e){if(!e||"object"!=typeof e)return!1;try{if(o(e,o),s)try{s(e,s)}catch(e){return!0}return e instanceof a}catch(e){}return!1}}else t.exports=function(e){return!1}},383348:e=>{"use strict";var{m:t,e:n}=e,r=e.r(134759),i=e.r(317784),a=e.r(260776),o=e.r(845373);t.exports=function(e){if(e&&"object"==typeof e){if(r(e))return"Map";if(i(e))return"Set";if(a(e))return"WeakMap";if(o(e))return"WeakSet"}return!1}},670733:e=>{"use strict";var{m:t,e:n}=e,r=e.r(95753)("ArrayBuffer.prototype.byteLength",!0),i=e.r(584466);t.exports=function(e){return i(e)?r?r(e):e.byteLength:NaN}},585876:e=>{"use strict";var{m:t,e:n}=e,r=e.r(340220),i=e.r(582368),a=e.r(712227),o=e.r(703889),s=e.r(110771),l=e.r(952347),u=e.r(865914),c=e.r(905135),d=e.r(755645),h=e.r(584466),p=e.r(720892),f=e.r(972753),m=e.r(594220),g=e.r(97709),y=e.r(367647),b=e.r(383348),x=e.r(401125),w=e.r(670733),k=i("SharedArrayBuffer.prototype.byteLength",!0),S=i("Date.prototype.getTime"),_=Object.getPrototypeOf,C=i("Object.prototype.toString"),A=o("%Set%",!0),E=i("Map.prototype.has",!0),T=i("Map.prototype.get",!0),M=i("Map.prototype.size",!0),I=i("Set.prototype.add",!0),N=i("Set.prototype.delete",!0),D=i("Set.prototype.has",!0),P=i("Set.prototype.size",!0);function R(e,t,n,r){for(var i,a=s(e);(i=a.next())&&!i.done;)if(F(t,i.value,n,r))return N(e,i.value),!0;return!1}function O(e){return void 0===e?null:"object"!=typeof e?"symbol"!=typeof e&&("string"!=typeof e&&"number"!=typeof e||+e==+e):void 0}function j(e,t,n,r,i,a){for(var o,l,u=s(e);(o=u.next())&&!o.done;)if(F(n,l=o.value,i,a)&&F(r,T(t,l),i,a))return N(e,l),!0;return!1}function F(e,t,n,i){var o,l=n||{};if(l.strict?u(e,t):e===t)return!0;if(y(e)!==y(t))return!1;if(!e||!t||"object"!=typeof e&&"object"!=typeof t)return l.strict?u(e,t):e==t;var N=i.has(e),z=i.has(t);if(N&&z){if(i.get(e)===i.get(t))return!0}else o={};return N||i.set(e,o),z||i.set(t,o),function(e,t,n,i){if(typeof e!=typeof t||null==e||null==t||C(e)!==C(t)||c(e)!==c(t)||d(e)!==d(t))return!1;var o,l,u=e instanceof Error,y=t instanceof Error;if(u!==y||(u||y)&&(e.name!==t.name||e.message!==t.message))return!1;var N=f(e),z=f(t);if(N!==z||(N||z)&&(e.source!==t.source||a(e)!==a(t)))return!1;var B=p(e),U=p(t);if(B!==U||(B||U)&&S(e)!==S(t)||n.strict&&_&&_(e)!==_(t))return!1;var H=x(e),W=x(t);if(H!==W)return!1;if(H||W){if(e.length!==t.length)return!1;for(o=0;o<e.length;o++)if(e[o]!==t[o])return!1;return!0}var V=L(e),q=L(t);if(V!==q)return!1;if(V||q){if(e.length!==t.length)return!1;for(o=0;o<e.length;o++)if(e[o]!==t[o])return!1;return!0}var G=h(e),$=h(t);if(G!==$)return!1;if(G||$)return w(e)===w(t)&&"function"==typeof Uint8Array&&F(new Uint8Array(e),new Uint8Array(t),n,i);var K=m(e),Y=m(t);if(K!==Y)return!1;if(K||Y)return k(e)===k(t)&&"function"==typeof Uint8Array&&F(new Uint8Array(e),new Uint8Array(t),n,i);if(typeof e!=typeof t)return!1;var X=g(e),Z=g(t);if(X.length!==Z.length)return!1;for(X.sort(),Z.sort(),o=X.length-1;o>=0;o--)if(X[o]!=Z[o])return!1;for(o=X.length-1;o>=0;o--)if(!F(e[l=X[o]],t[l],n,i))return!1;var J=b(e),Q=b(t);return J===Q&&("Set"===J||"Set"===Q?function(e,t,n,r){if(P(e)!==P(t))return!1;for(var i,a,o,l=s(e),u=s(t);(i=l.next())&&!i.done;)if(i.value&&"object"==typeof i.value)o||(o=new A),I(o,i.value);else if(!D(t,i.value)){if(n.strict||!function(e,t,n){var r=O(n);return null!=r?r:D(t,r)&&!D(e,r)}(e,t,i.value))return!1;o||(o=new A),I(o,i.value)}if(o){for(;(a=u.next())&&!a.done;)if(a.value&&"object"==typeof a.value){if(!R(o,a.value,n.strict,r))return!1}else if(!n.strict&&!D(e,a.value)&&!R(o,a.value,n.strict,r))return!1;return 0===P(o)}return!0}(e,t,n,i):"Map"!==J||function(e,t,n,i){if(M(e)!==M(t))return!1;for(var a,o,l,u,c,d,h=s(e),p=s(t);(a=h.next())&&!a.done;)if(u=a.value[0],c=a.value[1],u&&"object"==typeof u)l||(l=new A),I(l,u);else if(void 0===(d=T(t,u))&&!E(t,u)||!F(c,d,n,i)){if(n.strict||!function(e,t,n,i,a,o){var s=O(n);if(null!=s)return s;var l=T(t,s),u=r({},a,{strict:!1});return(void 0!==l||!!E(t,s))&&!!F(i,l,u,o)&&!E(e,s)&&F(i,l,u,o)}(e,t,u,c,n,i))return!1;l||(l=new A),I(l,u)}if(l){for(;(o=p.next())&&!o.done;)if(u=o.value[0],d=o.value[1],u&&"object"==typeof u){if(!j(l,e,u,d,n,i))return!1}else if(!n.strict&&(!e.has(u)||!F(T(e,u),d,n,i))&&!j(l,e,u,d,r({},n,{strict:!1}),i))return!1;return 0===P(l)}return!0}(e,t,n,i))}(e,t,l,i)}function L(e){return!!e&&"object"==typeof e&&"number"==typeof e.length&&"function"==typeof e.copy&&"function"==typeof e.slice&&(!(e.length>0)||"number"==typeof e[0])&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}t.exports=function(e,t,n){return F(e,t,n,l())}},265603:e=>{"use strict";e.s({SubLayout:()=>n});var t=e.i(290479);function n(e){let{children:n,bgColor:r,className:i}=e;return(0,t.jsx)("div",{className:"w-full h-full relative ".concat(r?"bg-".concat(r):""," ").concat(i),children:n})}},762121:e=>{"use strict";e.s({ArrowLeft:()=>t.default});var t=e.i(805547)},400436:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]])},920976:e=>{"use strict";e.s({Redo:()=>t.default});var t=e.i(400436)},942482:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]])},128165:e=>{"use strict";e.s({Undo:()=>t.default});var t=e.i(942482)},64157:e=>{"use strict";e.s({default:()=>f});var t=e.i(290479),n=e.i(762121),r=e.i(920976),i=e.i(128165),a=e.i(252390),o=e.i(704255),s=e.i(663018),l=e.i(219821),u=e.i(846580),c=e.i(972899),d=e.i(986216);let h=(0,l.default)(()=>e.r(617590)(e.i),{ssr:!1,loading:()=>null}),p=(0,l.default)(()=>e.r(302915)(e.i),{ssr:!1,loading:()=>null}),f=e=>{let{editor:l,title:f,isSaving:m,isSideView:g,chatbotId:y}=e,{setSideViewItem:b,sideViewItem:x}=(0,d.useSideView)(),w=(0,u.useIsMobile)(),{track:k}=(0,a.default)();return(0,t.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[w&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.Button,{variant:"ghost",size:"icon",onClick:()=>{k("editor_toolbar_undo"),l.chain().focus().undo().run()},disabled:!l.can().undo(),"aria-label":"Undo",children:(0,t.jsx)(i.Undo,{className:"h-7 w-7"})}),(0,t.jsx)(o.Button,{variant:"ghost",size:"icon",onClick:()=>{k("editor_toolbar_redo"),l.chain().focus().redo().run()},disabled:!l.can().redo(),"aria-label":"Redo",children:(0,t.jsx)(r.Redo,{className:"h-7 w-7"})})]}),x&&g?(0,t.jsx)("div",{className:"flex flex-row items-center gap-2",children:(0,t.jsx)(o.Button,{size:"icon",variant:"ghost",onClick:()=>{k("editor_toolbar_back_navigation"),null==b||b(null)},children:(0,t.jsx)(c.Icon,{as:n.ArrowLeft})})}):null]}),(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[m&&(0,t.jsx)("div",{className:"flex flex-row items-center justify-center px-4 rounded-4 opacity-70",children:(0,t.jsx)(s.LoadingSpinner,{variant:"small",color:"gray"})}),(0,t.jsx)(p,{isSideview:!0,editor:l,title:f,id:g?null!=x?x:"":null!=y?y:""}),(0,t.jsx)(h,{showHistory:!g,isSideview:g,editor:l,title:f,id:g?null!=x?x:"":null!=y?y:""})]})]})}},309381:e=>{"use strict";e.s({List:()=>t.default});var t=e.i(403140)},843121:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("list-checks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]])},699325:e=>{"use strict";e.s({ListChecks:()=>t.default});var t=e.i(843121)},109398:e=>{"use strict";e.s({MoreHorizontal:()=>t.default});var t=e.i(89872)},430468:e=>{"use strict";e.s({LinkSelector:()=>h});var t=e.i(290479),n=e.i(704255),r=e.i(972899),i=e.i(303652),a=e.i(476440),o=e.i(252390),s=e.i(991571),l=e.i(182822),u=e.i(874133),c=e.i(749248),d=e.i(373150);let h=e=>{let{editor:h}=e,[p,f]=(0,d.useState)(!1),m=(0,d.useRef)(null),{track:g}=(0,o.default)();return((0,d.useEffect)(()=>{var e;null==(e=m.current)||e.focus()}),h)?(0,t.jsxs)(s.Popover,{modal:!0,open:p,onOpenChange:f,children:[(0,t.jsx)(a.ReusableTooltip,{content:"Add link",asChild:!0,children:(0,t.jsx)(s.PopoverTrigger,{asChild:!0,className:"hover:bg-popover-hover",children:(0,t.jsx)(n.Button,{size:"xs",className:"gap-2 !h-11 !w-11 p-3",variant:"ghost",children:(0,t.jsx)(l.LinkIcon,{size:16})})})}),(0,t.jsx)(i.PopoverContent,{align:"start",className:"w-60 p-0",sideOffset:8,children:(0,t.jsxs)("form",{onSubmit:e=>{let t=e.currentTarget;e.preventDefault();let n=function(e){if(function(e){try{return new URL(e),!0}catch(e){return!1}}(e))return e;try{if(e.includes(".")&&!e.includes(" "))return new URL("https://".concat(e)).toString()}catch(e){return null}}(t[0].value);n&&(g("editor_link_added"),h.chain().focus().setLink({href:n}).run()),f(!1)},className:"flex  p-2 ",children:[(0,t.jsx)("input",{ref:m,type:"text",placeholder:"Paste link",className:"flex-1 bg-popover px-4 placeholder:text-text-secondary font-medium text-sm outline-none",defaultValue:h.getAttributes("link").href||""}),h.getAttributes("link").href?(0,t.jsx)(n.Button,{size:"icon",variant:"secondary",type:"button",className:"h-9 w-9",onClick:()=>{g("editor_link_removed"),h.chain().focus().unsetLink().run(),m.current&&(m.current.value=""),f(!1)},children:(0,t.jsx)(r.Icon,{as:c.Trash})}):(0,t.jsx)(n.Button,{variant:"secondary",size:"icon",className:"h-9 w-9",children:(0,t.jsx)(r.Icon,{as:u.Check})})]})})]}):null}},837530:e=>{"use strict";e.s({NodeSelector:()=>b});var t=e.i(290479),n=e.i(991571),r=e.i(38111),i=e.i(874133),a=e.i(381612),o=e.i(325933),s=e.i(672728),l=e.i(561115),u=e.i(330462),c=e.i(34818),d=e.i(373150),h=e.i(704255),p=e.i(303652),f=e.i(476440),m=e.i(252390),g=e.i(289702);let y=[{name:"Regular text",icon:r.CaseSensitiveIcon,command:e=>e.chain().focus().clearNodes().run(),isActive:e=>e.isActive("paragraph")&&!e.isActive("bulletList")&&!e.isActive("orderedList")},{name:"Heading 1",icon:o.Heading1Icon,command:e=>e.chain().focus().clearNodes().toggleHeading({level:1}).run(),isActive:e=>e.isActive("heading",{level:1})},{name:"Heading 2",icon:s.Heading2Icon,command:e=>e.chain().focus().clearNodes().toggleHeading({level:2}).run(),isActive:e=>e.isActive("heading",{level:2})},{name:"Heading 3",icon:l.Heading3Icon,command:e=>e.chain().focus().clearNodes().toggleHeading({level:3}).run(),isActive:e=>e.isActive("heading",{level:3})}],b=e=>{var o;let{editor:s,expanded:l=!0}=e,[b,x]=(0,d.useState)(!1),[w,k]=(0,d.useState)(!1),{track:S}=(0,m.default)();if((0,d.useEffect)(()=>{if(!s)return;let e=()=>{k("title"===s.state.selection.$anchor.parent.type.name)};e();let t=()=>{e()};return s.on("selectionUpdate",t),()=>{s.off("selectionUpdate",t)}},[s]),!s)return null;let _=null!=(o=y.filter(e=>e.isActive(s)).pop())?o:{name:"Multiple",icon:r.CaseSensitiveIcon};return(0,t.jsxs)(n.Popover,{modal:!0,open:b&&!w,onOpenChange:x,children:[(0,t.jsx)(f.ReusableTooltip,{content:w?"Formatting disabled in title":"Change text formatting",asChild:!0,children:(0,t.jsx)(p.PopoverTrigger,{asChild:!0,disabled:w,className:(0,g.cn)("gap-4 border-none hover:bg-popover-hover focus:ring-0",l?"w-40":"w-20",w&&"opacity-50 cursor-not-allowed hover:bg-transparent"),children:(0,t.jsx)(h.Button,{size:"xs",variant:"ghost",className:"gap-4",disabled:w,leadingIcon:_.icon&&(0,t.jsx)(_.icon,{size:18,className:"h-[20px] w-[20px] text-text-secondary"}),trailingIcon:(0,t.jsx)(a.ChevronDown,{className:"h-7 w-7"}),children:(0,t.jsx)(u.AnimatePresence,{mode:"popLayout",initial:!1,children:l&&(0,t.jsx)(c.motion.span,{initial:{opacity:0,filter:"blur(2px)"},animate:{opacity:1,filter:"blur(0px)",transition:{type:"spring",stiffness:350,damping:55}},exit:{opacity:0,filter:"blur(2px)",transition:{duration:.01}},className:"whitespace-nowrap font-medium text-sm",children:_.name})})})})}),(0,t.jsx)(p.PopoverContent,{align:"start",className:"p-2 rounded-6 w-40",sideOffset:8,onCloseAutoFocus:e=>e.preventDefault(),children:y.map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-4 px-3 py-2 hover:bg-accent cursor-pointer  rounded-4",onClick:()=>{w||(S("editor_node_selector_changed",{nodeType:e.name}),e.command(s),x(!1))},children:[(0,t.jsx)(e.icon,{size:18,className:"h-[20px] w-[20px] text-text-secondary"}),(0,t.jsx)("span",{className:"text-sm",children:e.name}),_.name===e.name&&(0,t.jsx)(i.Check,{className:"h-7 w-7 ml-auto text-blue"})]},e.name))})]})}},55373:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]])},977012:e=>{"use strict";e.s({BoldIcon:()=>t.default});var t=e.i(55373)},85161:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]])},118536:e=>{"use strict";e.s({ItalicIcon:()=>t.default});var t=e.i(85161)},662280:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]])},833664:e=>{"use strict";e.s({UnderlineIcon:()=>t.default});var t=e.i(662280)},839428:e=>{"use strict";e.s({TextButtons:()=>d});var t=e.i(290479),n=e.i(704255),r=e.i(958962),i=e.i(476440),a=e.i(252390),o=e.i(289702),s=e.i(977012),l=e.i(118536),u=e.i(833664),c=e.i(373150);let d=e=>{let{editor:d}=e,[,h]=(0,c.useState)(0),{track:p}=(0,a.default)();if((0,c.useEffect)(()=>{if(!d)return;let e=()=>{h(e=>e+1)};return d.on("transaction",e),()=>{d.off("transaction",e)}},[d]),!d)return null;let f=[{name:"bold",isActive:e=>e.isActive("bold"),command:e=>e.chain().focus().toggleBold().run(),icon:s.BoldIcon},{name:"italic",isActive:e=>e.isActive("italic"),command:e=>e.chain().focus().toggleItalic().run(),icon:l.ItalicIcon},{name:"underline",isActive:e=>e.isActive("underline"),command:e=>e.chain().focus().toggleUnderline().run(),icon:u.UnderlineIcon},{name:"strike",isActive:e=>e.isActive("strike"),command:e=>e.chain().focus().toggleStrike().run(),icon:r.StrikethroughIcon}];return(0,t.jsx)("div",{className:"flex items-center gap-2",children:f.map(e=>(0,t.jsx)(i.ReusableTooltip,{content:"".concat(e.name.charAt(0).toUpperCase()+e.name.slice(1)," formatting"),asChild:!0,children:(0,t.jsx)("div",{onClick:()=>{p("editor_text_formatting_".concat(e.name)),e.command(d)},className:(0,o.cn)(e.isActive(d)&&"bg-popover-hover outline outline-blue rounded-4"),children:(0,t.jsx)(n.Button,{size:"xs",variant:"ghost",className:"!h-11 !w-11 p-3",children:(0,t.jsx)(e.icon,{className:(0,o.cn)("h-7 w-7"),"data-active-editor":e.isActive(d),size:16})})},e.name)},e.name))})}},945855:e=>{"use strict";e.s({EditorFormatToolbar:()=>A});var t=e.i(290479),n=e.i(991571),r=e.i(492162),i=e.i(182822),a=e.i(309381),o=e.i(699325),s=e.i(987784),l=e.i(109398),u=e.i(502190),c=e.i(330462),d=e.i(34818),h=e.i(373150),p=e.i(704255),f=e.i(185296),m=e.i(303652),g=e.i(476440),y=e.i(252390),b=e.i(814733),x=e.i(739087),w=e.i(289702),k=e.i(315566),S=e.i(430468),_=e.i(837530),C=e.i(839428);function A(e){let{editor:A,width:E}=e,T=(0,h.useRef)(null),M=function(e){let[t,n]=(0,h.useState)(0);return(0,h.useEffect)(()=>{let t=e.current;if(!t)return;let r=new ResizeObserver(()=>{let{width:e}=t.getBoundingClientRect();n(e)});return r.observe(t),()=>r.disconnect()},[e]),t}(T),I=E>640,{startTour:N,activeTour:D,tourQueue:P}=(0,f.useTour)(),{data:R,isLoading:O}=b.api.tours.byUser.useQuery(),{track:j}=(0,y.default)();return((0,h.useEffect)(()=>{let e;return!(!O&&Array.isArray(R))||P.some(e=>e===x.TourType.TOOLBAR_MENU_MOVED)||D===x.TourType.TOOLBAR_MENU_MOVED||(null==R?void 0:R.some(e=>e.type===x.TourType.TOOLBAR_MENU_MOVED&&e.completed))||(e=setTimeout(()=>{N(x.TourType.TOOLBAR_MENU_MOVED)},2e3)),()=>clearTimeout(e)},[O,R,N,D,P]),A)?(0,t.jsx)("div",{className:"w-full mx-auto flex justify-center",children:(0,t.jsx)(d.motion.div,{animate:{width:M?M+10:"auto"},transition:{type:"spring",stiffness:350,damping:55},className:"flex bg-background-primary border border-border shadow-shadowMedium rounded-6 p-2 z-20 overflow-clip",style:{transformOrigin:"center"},children:(0,t.jsx)("div",{ref:T,className:"flex flex-row items-center justify-start gap-4",id:"format-toolbar-container",children:E<360?(0,t.jsxs)(n.Popover,{children:[(0,t.jsx)(n.PopoverTrigger,{asChild:!0,children:(0,t.jsx)(p.Button,{variant:"ghost",size:"xs",className:"!h-11 !w-11 p-3",leadingIcon:(0,t.jsx)(l.MoreHorizontal,{className:"h-7 w-7"}),"aria-label":"All options",id:"format-toolbar-more-button"})}),(0,t.jsx)(m.PopoverContent,{className:"w-auto p-2",align:"start",onCloseAutoFocus:e=>e.preventDefault(),children:(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)(p.Button,{variant:"ghost",size:"xs",onClick:()=>{j("editor_text_formatting_bold"),A.chain().focus().toggleBold().run()},className:(0,w.cn)(A.isActive("bold")?"bg-popover-hover":"","!h-11 justify-start gap-2 px-3"),leadingIcon:(0,t.jsx)("strong",{children:"B"}),label:"Bold","aria-label":"Bold"}),(0,t.jsx)(p.Button,{variant:"ghost",size:"xs",onClick:()=>{j("editor_text_formatting_italic"),A.chain().focus().toggleItalic().run()},className:(0,w.cn)(A.isActive("italic")?"bg-popover-hover":"","!h-11 justify-start gap-2 px-3"),leadingIcon:(0,t.jsx)("em",{children:"I"}),label:"Italic","aria-label":"Italic"}),(0,t.jsx)(p.Button,{variant:"ghost",size:"xs",onClick:()=>{if(A.getAttributes("link").href)j("editor_link_removed"),A.chain().focus().unsetLink().run();else{j("editor_link_added");let e=window.prompt("Enter URL:");e&&A.chain().focus().setLink({href:e}).run()}},className:(0,w.cn)(A.isActive("link")?"bg-popover-hover":"","!h-11 justify-start gap-2 px-3"),leadingIcon:(0,t.jsx)(i.LinkIcon,{className:"h-7 w-7"}),label:"Link","aria-label":"Link"}),(0,t.jsx)(p.Button,{variant:"ghost",size:"xs",onClick:()=>{j("editor_blockquote_toggled"),A.chain().focus().toggleBlockquote().run()},className:(0,w.cn)(A.isActive("blockquote")?"bg-popover-hover":"","!h-11 justify-start gap-2 px-3"),leadingIcon:(0,t.jsx)(u.TextQuote,{className:"h-7 w-7"}),label:"Quote","aria-label":"Quote"}),(0,t.jsx)(p.Button,{variant:"ghost",size:"xs",onClick:()=>{j("editor_code_block_toggled"),A.chain().focus().toggleCode().run()},className:(0,w.cn)(A.isActive("code")?"bg-popover-hover":"","!h-11 justify-start gap-2 px-3"),leadingIcon:(0,t.jsx)(r.Code,{className:"h-7 w-7"}),label:"Code block","aria-label":"Code block"}),(0,t.jsx)(p.Button,{variant:"ghost",size:"xs",onClick:()=>{j("editor_bullet_list_toggled"),A.chain().focus().toggleBulletList().run()},className:(0,w.cn)(A.isActive("bulletList")?"bg-popover-hover":"","!h-11 justify-start gap-2 px-3"),leadingIcon:(0,t.jsx)(a.List,{className:"h-7 w-7"}),label:"Bulleted list","aria-label":"Bulleted list"}),(0,t.jsx)(p.Button,{variant:"ghost",size:"xs",onClick:()=>{j("editor_numbered_list_toggled"),A.chain().focus().toggleOrderedList().run()},className:(0,w.cn)(A.isActive("orderedList")?"bg-popover-hover":"","!h-11 justify-start gap-2 px-3"),leadingIcon:(0,t.jsx)(s.ListOrdered,{className:"h-7 w-7"}),label:"Numbered list","aria-label":"Numbered list"}),(0,t.jsx)(p.Button,{variant:"ghost",size:"xs",onClick:()=>{j("editor_todo_list_toggled"),A.chain().focus().toggleTaskList().run()},className:(0,w.cn)(A.isActive("taskList")?"bg-popover-hover":"","!h-11 justify-start gap-2 px-3"),leadingIcon:(0,t.jsx)(o.ListChecks,{className:"h-7 w-7"}),label:"To-do list","aria-label":"To-do list"})]})})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(_.NodeSelector,{editor:A,expanded:I}),(0,t.jsx)("div",{className:"bg-border h-6 w-[1px] rounded-full"}),(0,t.jsx)(C.TextButtons,{editor:A}),(0,t.jsx)("div",{className:"bg-border h-6 w-[1px] rounded-full"}),(0,t.jsx)(k.ColorSelector,{editor:A}),(0,t.jsx)("div",{className:"bg-border h-6 w-[1px] rounded-full"}),(0,t.jsx)(c.AnimatePresence,{mode:"popLayout",initial:!1,children:I?[(0,t.jsx)(S.LinkSelector,{editor:A},"link"),(0,t.jsx)(g.ReusableTooltip,{content:"Add quote",asChild:!0,children:(0,t.jsx)(p.Button,{variant:"ghost",size:"xs",onClick:()=>{j("editor_blockquote_toggled"),A.chain().focus().toggleBlockquote().run()},className:(0,w.cn)(A.isActive("blockquote")?"bg-popover-hover outline outline-blue":"","!h-11 !w-11 p-3"),leadingIcon:(0,t.jsx)(u.TextQuote,{className:"h-7 w-7"}),"aria-label":"Blockquote"},"blockquote")},"blockquote"),(0,t.jsx)(g.ReusableTooltip,{content:"Add code block",asChild:!0,children:(0,t.jsx)(p.Button,{variant:"ghost",size:"xs",onClick:()=>{j("editor_code_block_toggled"),A.chain().focus().toggleCode().run()},className:(0,w.cn)(A.isActive("code")?"bg-popover-hover outline outline-blue":"","!h-11 !w-11 p-3"),leadingIcon:(0,t.jsx)(r.Code,{className:"h-7 w-7"}),"aria-label":"Code"},"code")},"code"),(0,t.jsx)(g.ReusableTooltip,{content:"Add bullet list",asChild:!0,children:(0,t.jsx)(p.Button,{variant:"ghost",size:"xs",onClick:()=>{j("editor_bullet_list_toggled"),A.chain().focus().toggleBulletList().run()},className:(0,w.cn)(A.isActive("bulletList")?"bg-popover-hover outline outline-blue":"","!h-11 !w-11 p-3"),leadingIcon:(0,t.jsx)(a.List,{className:"h-7 w-7"}),"aria-label":"Bullet List"},"bulletList")},"bulletList"),(0,t.jsx)(g.ReusableTooltip,{content:"Add numbered list",asChild:!0,children:(0,t.jsx)(p.Button,{size:"xs",variant:"ghost",onClick:()=>{j("editor_numbered_list_toggled"),A.chain().focus().toggleOrderedList().run()},className:(0,w.cn)(A.isActive("orderedList")?"bg-popover-hover outline outline-blue":"","!h-11 !w-11 p-3"),leadingIcon:(0,t.jsx)(s.ListOrdered,{className:"h-7 w-7"}),"aria-label":"Ordered List"},"orderedList")},"orderedList"),(0,t.jsx)(g.ReusableTooltip,{content:"Add to-do list",asChild:!0,children:(0,t.jsx)(p.Button,{size:"xs",variant:"ghost",onClick:()=>{j("editor_todo_list_toggled"),A.chain().focus().toggleTaskList().run()},className:(0,w.cn)(A.isActive("taskList")?"bg-popover-hover outline outline-blue":"","!h-11 !w-11 p-3"),leadingIcon:(0,t.jsx)(o.ListChecks,{className:"h-7 w-7"}),"aria-label":"Task List"},"taskList")},"taskList")].map((e,n)=>(0,t.jsx)(d.motion.div,{initial:{opacity:0,filter:"blur(2px)"},animate:{opacity:1,filter:"blur(0px)",transition:{type:"spring",stiffness:350,damping:55,delay:.05*n}},exit:{opacity:0,filter:"blur(2px)",transition:{duration:.01}},className:"inline-block",children:e},e.key)):(0,t.jsx)(d.motion.div,{initial:{opacity:0,filter:"blur(2px)"},animate:{opacity:1,filter:"blur(0px)",transition:{type:"spring",stiffness:350,damping:55}},exit:{opacity:0,filter:"blur(2px)",transition:{duration:.01}},className:"inline-block",children:(0,t.jsxs)(n.Popover,{children:[(0,t.jsx)(n.PopoverTrigger,{asChild:!0,children:(0,t.jsx)(p.Button,{variant:"ghost",size:"xs",className:"!h-11 !w-11 p-3",leadingIcon:(0,t.jsx)(l.MoreHorizontal,{className:"h-7 w-7"}),"aria-label":"More options",id:"format-toolbar-more-button"})}),(0,t.jsx)(m.PopoverContent,{className:"w-auto p-2",align:"start",children:(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)(p.Button,{variant:"ghost",size:"xs",onClick:()=>{if(A.getAttributes("link").href)j("editor_link_removed"),A.chain().focus().unsetLink().run();else{j("editor_link_added");let e=window.prompt("Enter URL:");e&&A.chain().focus().setLink({href:e}).run()}},className:(0,w.cn)(A.isActive("link")?"bg-popover-hover":"","!h-11 justify-start gap-2 px-3"),leadingIcon:(0,t.jsx)(i.LinkIcon,{className:"h-7 w-7"}),label:"Link","aria-label":"Link"}),(0,t.jsx)(p.Button,{variant:"ghost",size:"xs",onClick:()=>{j("editor_blockquote_toggled"),A.chain().focus().toggleBlockquote().run()},className:(0,w.cn)(A.isActive("blockquote")?"bg-popover-hover":"","!h-11 justify-start gap-2 px-3"),leadingIcon:(0,t.jsx)(u.TextQuote,{className:"h-7 w-7"}),label:"Quote","aria-label":"Quote"}),(0,t.jsx)(p.Button,{variant:"ghost",size:"xs",onClick:()=>{j("editor_code_block_toggled"),A.chain().focus().toggleCode().run()},className:(0,w.cn)(A.isActive("code")?"bg-popover-hover":"","!h-11 justify-start gap-2 px-3"),leadingIcon:(0,t.jsx)(r.Code,{className:"h-7 w-7"}),label:"Code block","aria-label":"Code block"}),(0,t.jsx)(p.Button,{variant:"ghost",size:"xs",onClick:()=>{j("editor_bullet_list_toggled"),A.chain().focus().toggleBulletList().run()},className:(0,w.cn)(A.isActive("bulletList")?"bg-popover-hover":"","!h-11 justify-start gap-2 px-3"),leadingIcon:(0,t.jsx)(a.List,{className:"h-7 w-7"}),label:"Bulleted list","aria-label":"Bulleted list"}),(0,t.jsx)(p.Button,{variant:"ghost",size:"xs",onClick:()=>{j("editor_numbered_list_toggled"),A.chain().focus().toggleOrderedList().run()},className:(0,w.cn)(A.isActive("orderedList")?"bg-popover-hover":"","!h-11 justify-start gap-2 px-3"),leadingIcon:(0,t.jsx)(s.ListOrdered,{className:"h-7 w-7"}),label:"Numbered list","aria-label":"Numbered list"}),(0,t.jsx)(p.Button,{variant:"ghost",size:"xs",onClick:()=>{j("editor_todo_list_toggled"),A.chain().focus().toggleTaskList().run()},className:(0,w.cn)(A.isActive("taskList")?"bg-popover-hover":"","!h-11 justify-start gap-2 px-3"),leadingIcon:(0,t.jsx)(o.ListChecks,{className:"h-7 w-7"}),label:"To-do list","aria-label":"To-do list"})]})})]})})})]})})})}):null}},621383:e=>{"use strict";e.s({default:()=>i});var t=e.i(290479),n=e.i(945855),r=e.i(455578);let i=e=>{let{editor:i}=e,[a,{width:o}]=(0,r.default)();return(0,t.jsx)("div",{ref:a,className:"flex flex-row items-center w-full gap-2  absolute bottom-4",children:i&&(0,t.jsx)(n.EditorFormatToolbar,{editor:i,width:o})})}},63639:e=>{"use strict";e.s({useMarkdownStreaming:()=>n});var t=e.i(410601);let n=e=>{let{editor:n}=(0,t.useGlobalEditor)(e);return{markdownParse:async e=>{n&&(null==n||n.commands.setContent(e))}}}},298583:e=>{"use strict";e.s({useIndexNote:()=>r});var t=e.i(852951),n=e.i(814733);let r=()=>{let{updateChatbot:e}=(0,t.useWorkspaceActions)(),{mutate:r}=n.api.chatbot.indexNote.useMutation({onSuccess:(t,n)=>{let{id:r}=n;e(r,{isIndexed:!0})}});return{indexNote:r}}},169993:e=>{"use strict";e.s({default:()=>u});var t=e.i(852951),n=e.i(373150),r=e.i(966882),i=e.i(252390),a=e.i(227261),o=e.i(814733),s=e.i(181112),l=e.i(298583);let u=e=>{let{track:u}=(0,i.default)(),c=o.api.useUtils(),{updateChatbot:d}=(0,t.useWorkspaceActions)(),{indexNote:h}=(0,l.useIndexNote)(),{editModeContent:p}=(0,s.useEditModeContent)(e),{mutate:f,isPending:m}=o.api.chatbot.saveNote.useMutation({onMutate:e=>{let{id:t,name:n,contents:r}=e;d(t,{name:n});let i=c.chatbot.byId.getData(t);return c.chatbot.byId.setData(t,e=>e?{...e,contents:r,name:n}:void 0),{prevData:i}},onError(e,t,n){n&&c.chatbot.byId.setData(t.id,n.prevData)},onSuccess:()=>{u("noteContentsUpdated")}}),{mutate:g}=o.api.noteVersion.upsertVersion.useMutation({onSuccess:e=>{var t;if(null==(t=e.version)?void 0:t.noteId){let t=e.version;c.noteVersion.getVersions.setData({noteId:t.noteId},e=>e?e.map(e=>e.id===t.id?t:e):[t])}},onError:e=>{console.error("Error creating/updating version:",e)}}),y=(0,n.useRef)(void 0),b=(0,n.useRef)(!1),x=(0,r.useDebouncedCallback)(e=>{let{value:t,name:n,plainTextValue:r,chatbotId:i,isChatOpen:o}=e;p||f({id:i,contents:t,name:n||"Untitled"},{onSettled:e=>{if(e){o?h({id:e.id,content:r,isIndexed:e.isIndexed}):(e=>{y.current=e,b.current||(e.isIndexed||h(e),b.current=!0,setTimeout(()=>{y.current&&h(y.current),b.current=!1},12e4))})({id:e.id,content:r,isIndexed:e.isIndexed});let n=(0,a.getNoteSessionId)();n&&g({noteId:e.id,contents:t,sessionId:n}),c.chatbot.byId.invalidate(e.id)}}})},1e3);return{saveNote:f,isPending:m,debouncedUpdate:x}}},181112:e=>{"use strict";e.s({EditModeDialog:()=>g,useEditModeContent:()=>m});var t=e.i(290479),n=e.i(647968),r=e.i(608294),i=e.i(227348),a=e.i(874133),o=e.i(334145),s=e.i(373150),l=e.i(704255),u=e.i(972899),c=e.i(147271),d=e.i(410601),h=e.i(63639),p=e.i(169993);let f=(0,i.atomFamily)(e=>(0,n.atom)(null)),m=e=>{let[t,n]=(0,r.useAtom)(f(e));return{editModeContent:t,setEditModeContent:n}},g=e=>{let{chatbotId:n,isChatOpen:r}=e,{editor:i}=(0,d.useGlobalEditor)(n),{editModeContent:f,setEditModeContent:g}=m(n),y=(0,s.useRef)(null),{markdownParse:b}=(0,h.useMarkdownStreaming)(n),{debouncedUpdate:x}=(0,p.default)(n);(0,s.useEffect)(()=>{f&&i&&(y.current||(y.current=i.state.doc.toJSON()),b(f))},[f,i]);let{updateName:w}=(0,c.useUpdateName)(n);(0,s.useEffect)(()=>{if(!f)return;let e=e=>{"Enter"!==e.key||e.shiftKey?"Escape"===e.key&&(e.preventDefault(),S()):(e.preventDefault(),k())};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[f]);let k=()=>{var e,t,a,o;if(!f||!i)return;let s=i.state.doc.toJSON(),l=i.state.doc.textContent,u=(null==(o=s.content)||null==(a=o.find(e=>"title"===e.type))||null==(t=a.content)||null==(e=t[0])?void 0:e.text)||"Untitled";w({id:n,name:u,type:"CHATBOT"}),x({value:s,name:u,plainTextValue:l,chatbotId:n,isChatOpen:r}),g(null)},S=()=>{i&&(i.commands.setContent(y.current),g(null))};return f?(0,t.jsxs)("div",{className:"absolute bottom-16 z-50 flex justify-between items-center -translate-x-1/2 left-1/2 w-full max-w-lg p-4 bg-background-primary rounded-4 shadow-feint border",children:[(0,t.jsx)("span",{className:"text-xs text-text-secondary ml-4",children:"Review changes"}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)(l.Button,{onClick:k,size:"xs",className:"h-[28px] px-5 flex items-center text-sm",leadingIcon:(0,t.jsx)(u.Icon,{as:a.Check,className:"w-[14px] h-[14px]"}),trailingIcon:(0,t.jsx)("span",{className:"text-xs text-text-secondary",children:"ENTER"}),label:"Accept"}),(0,t.jsx)(l.Button,{onClick:S,variant:"secondary",size:"xs",className:"h-[28px] px-5 flex items-center text-sm",leadingIcon:(0,t.jsx)(u.Icon,{as:o.X,className:"w-[14px] h-[14px]"}),trailingIcon:(0,t.jsx)("span",{className:"text-xs text-text-secondary",children:"ESC"}),label:"Discard"})]})]}):null}},232519:e=>{"use strict";e.s({default:()=>u});var t=e.i(885905),n=e.i(373150),r=e.i(450807),i=e.i(950347),a=e.i(449097),o=e.i(252390),s=e.i(146172),l=e.i(842951);let u=e=>{let{editor:u,chatbot:c}=e,{exceededLimits:d,isFreePlan:h}=(0,i.default)(),{showUpgrade:p}=(0,r.useUpgrade)(),{user:f}=(0,t.useAuth)(),[m,g]=(0,n.useState)({x:0,y:0}),{completeFn:y,isLoading:b,rejectCompletion:x,completion:w,isCompleting:k,acceptCompletion:S}=(0,s.default)({editor:u,noteChatbotId:c.id}),{settings:_,aiAutocompleteEnabled:C}=(0,a.useSettings)(),{track:A}=(0,o.default)(),E=(0,n.useRef)(!1);(0,n.useEffect)(()=>{E.current&&!b&&w&&(S(),E.current=!1)},[b,w,S]);let T=async e=>{if(!c||!u||!(null==_?void 0:_.editorModelName))return;if((null==d?void 0:d.isWordCountLimitExceeded)&&h){A("autocompleteUsed",{userId:null==f?void 0:f.id}),A("wordCountLimitHit"),p("messageLimit"),A("Paywall Shown",{reason:"Word Count Limit Hit",type:"Complete Text"});return}let t=u.state.selection,n=t.from-3,r=t.from,i=u.state.tr;i.delete(n,r),i.setMeta("addToHistory",!1),u.view.dispatch(i),u.state.selection,E.current=!0;let a=await y({prompt:"plus",text:e},{from:n,to:n});if(A("autocompleteUsed",{userId:null==f?void 0:f.id}),!a){console.error("Something went wrong with text completion",{text:e,response:a}),E.current=!1;return}};return{triggerCompletion:async()=>{if(u&&C&&"+++"===(0,l.getPrevText)(u,{chars:3})&&!k){var e;let t=window.getSelection(),n=null==t?void 0:t.getRangeAt(0).getBoundingClientRect(),r=null==(e=document.querySelector(".ProseMirror"))?void 0:e.getBoundingClientRect();if(n&&r){let e=n.top-r.top;g({x:n.left-r.left,y:e})}await T((0,l.getPrevText)(u,{chars:5e3}))}},initialPosition:m,isLoading:b,rejectCompletion:x,acceptCompletion:S,isCompleting:k}}},575680:e=>{"use strict";e.s({default:()=>n});var t=e.i(373150);let n=()=>{let e=t.default.useRef(null);return(0,t.useEffect)(()=>{let t=e=>{e.stopPropagation()},n=e.current;return n&&(n.addEventListener("dragover",t),n.addEventListener("drop",t)),()=>{n&&(n.removeEventListener("dragover",t),n.addEventListener("drop",t))}},[]),{editorContainerRef:e}}},712197:e=>{"use strict";e.s({default:()=>i});var t=e.i(290479),n=e.i(663018),r=e.i(34818);let i=e=>{let{x:i,y:a}=e;return(0,t.jsx)(r.motion.div,{className:"absolute top-0 left-0  z-50  w-9 h-8 items-center flex justify-center -ml-4 bg-background-primary",style:{x:i,y:a},children:(0,t.jsx)(n.LoadingSpinner,{variant:"small",color:"gray"})})}},161188:e=>{"use strict";function t(e){var n,r;let i={...e};return(null==(n=i.marks)?void 0:n.length)&&(i.marks=i.marks.filter(e=>"ai-highlight"!==e.type),0===i.marks.length&&(i.marks=void 0)),(null==(r=i.content)?void 0:r.length)&&(i.content=i.content.map(t)),i}e.s({removeAiHighlightMark:()=>t})},990385:e=>{"use strict";e.s({default:()=>A});var t=e.i(290479),n=e.i(585876),r=e.i(608294),i=e.i(373150),a=e.i(265603),o=e.i(64157),s=e.i(621383),l=e.i(885905),u=e.i(449097),c=e.i(147271),d=e.i(533502),h=e.i(564620),p=e.i(899925),f=e.i(181112),m=e.i(232519),g=e.i(410601),y=e.i(575680),b=e.i(719857),x=e.i(712197),w=e.i(749461),k=e.i(954615),S=e.i(161188),_=e.i(169685),C=e.i(169993);let A=e=>{var A,E;let{chatbot:T,defaultContent:M,sideView:I,doc:N,provider:D,userInfo:P,isChatOpen:R}=e,{editor:O,setEditor:j}=(0,g.useGlobalEditor)(T.id),{user:F}=(0,l.useAuth)(),[L,z]=(0,i.useState)(null!=(E=T.name)?E:"Untitled"),{aiAutocompleteEnabled:B}=(0,u.useSettings)();(0,d.useRegisterNoteHighlight)(T.id);let U=(null==T?void 0:T.userId)===(null==F?void 0:F.id)||(null==F||null==(A=F.teamsMemberOf)?void 0:A.some(e=>e.teamId===(null==T?void 0:T.teamId))),{triggerCompletion:H,initialPosition:W,isLoading:V,rejectCompletion:q,isCompleting:G}=(0,m.default)({editor:O,chatbot:T}),$=T.id,{isPending:K,debouncedUpdate:Y}=(0,C.default)($),{editorContainerRef:X}=(0,y.default)(),Z=(0,r.useAtomValue)(_.showCitationExtensionAtom,{store:h.globalStore}),{updateName:J}=(0,c.useUpdateName)($),Q=(0,i.useMemo)(()=>(0,S.removeAiHighlightMark)(M),[M]);return(0,i.useEffect)(()=>{if(O){let e=O.state.tr;O.view.dispatch(e)}},[B,O]),(0,t.jsxs)(a.SubLayout,{className:"flex flex-col relative editor-shell-prosemirror",children:[(0,t.jsx)(f.EditModeDialog,{chatbotId:T.id,isChatOpen:R}),(0,t.jsx)(p.QuizEditDialog,{chatbotId:T.id}),(0,t.jsx)("div",{className:"flex items-center px-4 py-3",children:O&&(0,t.jsx)(o.default,{editor:O,isSaving:K,title:L,isSideView:!!U&&!!I,chatbotId:$})}),O&&(0,t.jsx)(s.default,{editor:O}),(0,t.jsxs)("div",{className:"relative min-h-0 h-full flex flex-col",children:[(0,t.jsx)("div",{ref:X,className:"overflow-y-scroll h-full overflow-x-hidden pt-11 px-6 relative",children:(0,t.jsx)("div",{className:"w-full min-h-full",children:(0,t.jsxs)("div",{className:"relative z-10 group",children:[V&&(0,t.jsx)(x.default,{x:W.x,y:W.y}),(0,t.jsx)(b.default,{chatbotId:T.id,doc:N,provider:D,userInfo:P,disableBubbleMenu:!1,editable:U,onCreate:j,defaultContent:Q,rejectCompletion:q,isCompleting:!!G,"data-editor":"document",onContentChange:(e,t)=>{var r,i,a,o;G||H();let s=(null==(o=e.content)||null==(a=o.find(e=>"title"===e.type))||null==(i=a.content)||null==(r=i[0])?void 0:r.text)||"Untitled";z(s),J({id:$,name:s,isEditorUpdate:!0,type:"CHATBOT"}),N&&(0,n.default)(e,Q)||Y({value:e,name:s,plainTextValue:t,chatbotId:$,isChatOpen:R})}}),O&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"w-full h-24 cursor-text",onClick:()=>{O&&O.commands.focus("end")}}),(0,t.jsxs)("div",{className:"flex items-stretch ",children:[(0,t.jsx)("div",{className:"flex-1 min-w-0 cursor-text ",onClick:()=>{O&&O.commands.focus("end")}}),(0,t.jsx)("div",{className:"max-w-[44rem] w-full",children:(0,t.jsx)(w.default,{defaultContent:Q,editor:O})}),(0,t.jsx)("div",{className:"flex-1 min-w-0 cursor-text ",onClick:()=>{O&&O.commands.focus("end")}})]}),(0,t.jsx)("div",{className:"w-full h-28 cursor-text",onClick:()=>{O&&O.commands.focus("end")}})]})]})})},$),U&&Z.pinned&&O&&(0,t.jsx)("div",{className:"flex flex-col absolute left-1/2 z-[10] -translate-x-1/2 bottom-12 sm:bottom-16 justify-start bg-popover max-w-[44rem] border border-border-primary rounded-4 shadow-shadowMedium",children:(0,t.jsx)(k.default,{chatbotId:T.id,editor:O})})]})]})}},610302:e=>{"use strict";e.s({default:()=>u});var t=e.i(290479),n=e.i(19105),r=e.i(819563),i=e.i(774686),a=e.i(373150),o=e.i(144304),s=e.i(663018),l=e.i(990385);let u=e=>{let u=(0,n.useRoom)(),c=(0,r.useSelf)(e=>e.info),[d,h]=(0,a.useState)(),[p,f]=(0,a.useState)(),[m,g]=(0,a.useState)(!1);return((0,a.useEffect)(()=>{let e=new o.Doc,t=new i.LiveblocksYjsProvider(u,e);return h(e),t.on("synced",()=>{g(!0)}),f(t),()=>{null==e||e.destroy(),null==t||t.destroy()}},[u]),d&&p&&m)?(0,t.jsx)(l.default,{...e,doc:d,provider:p,userInfo:c}):(0,t.jsx)("div",{className:"h-full w-full flex items-center justify-center",children:(0,t.jsx)(s.LoadingSpinner,{color:"gray",variant:void 0})})}},605210:e=>{"use strict";e.s({default:()=>f});var t=e.i(290479),n=e.i(328885),r=e.i(103447),i=e.i(373150),a=e.i(663018),o=e.i(684175),s=e.i(718693),l=e.i(885905),u=e.i(51785),c=e.i(610302),d=e.i(990385),h=e.i(280694),p=e.i(842951);let f=e=>{let{chatbotId:f,sideView:m=!1,tabView:g,isChatOpen:y}=e,{user:b}=(0,l.useAuth)(),{chatbot:x}=(0,u.default)({id:f}),{currentPath:w}=(0,o.useActiveSidebarLibrary)(),{isHistorySidebarOpen:k,isPreviewingVersion:S,selectedVersion:_}=(0,h.default)(f),C=(0,i.useMemo)(()=>(0,p.backwardsCompatibilityContent)(x),[x]);return C&&x?b?k&&S&&(null==_?void 0:_.noteId)===f?(0,t.jsx)(s.default,{noteId:f}):(null==w?void 0:w.teamId)?(0,t.jsx)(r.RoomProvider,{id:"".concat(w.teamId,":").concat(x.id,":editor"),initialPresence:{isLoading:!1,isTyping:!1,recentPrompts:null,cursor:null},children:(0,t.jsx)(n.ClientSideSuspense,{fallback:(0,t.jsx)("div",{className:"h-full w-full flex items-center justify-center",children:(0,t.jsx)(a.LoadingSpinner,{color:"gray",variant:void 0})}),children:(0,t.jsx)(c.default,{defaultContent:C,chatbot:x,sideView:m,tabView:g},x.id)})}):(0,t.jsx)(d.default,{defaultContent:C,chatbot:x,sideView:m,tabView:g,isChatOpen:y},f):null:(0,t.jsx)("div",{className:"w-full flex justify-center h-full items-center",children:(0,t.jsx)(a.LoadingSpinner,{color:"gray",variant:void 0})})}},765595:e=>{"use strict";e.s({default:()=>l});var t=e.i(290479),n=e.i(397711),r=e.i(373150),i=e.i(289702),a=e.i(704255),o=e.i(223099),s=e.i(972899);let l=(0,r.forwardRef)((e,r)=>{let{icon:l,children:u,href:c,onClick:d,className:h,id:p,...f}=e,m=(0,n.usePathname)();return c?(0,t.jsx)(o.HoverPrefetchLink,{href:c,onClick:d,children:(0,t.jsx)(a.Button,{...f,ref:r,id:p,className:(0,i.cn)(m===c?"bg-control-primary":"",h||"","duration-0"),size:"xs",variant:"sidebar",leadingIcon:(0,t.jsx)(s.Icon,{className:"flex-shrink-0 text-text-primary",as:l,size:"md"}),label:u})}):(0,t.jsx)(a.Button,{ref:r,onClick:d,size:"xs",variant:"sidebar",className:(0,i.cn)(h,"duration-0"),leadingIcon:(0,t.jsx)(s.Icon,{className:"flex-shrink-0 text-text-primary",as:l,size:"md"}),label:u,...f})})},986216:e=>{"use strict";e.s({default:()=>f,useSideView:()=>p});var t=e.i(290479),n=e.i(461655),r=e.i(852951),i=e.i(605210),a=e.i(647968),o=e.i(608294),s=e.i(578018),l=e.i(334248),u=e.i(704255),c=e.i(765595),d=e.i(972899);let h=(0,a.atom)(null),p=()=>{let[e,t]=(0,o.useAtom)(h);return{sideViewItem:e,setSideViewItem:t}},f=()=>{let{sideViewItem:e,setSideViewItem:a}=p(),{data:o}=(0,r.useWorkspace)(),{createNote:h,isPending:f}=(0,n.default)({onSuccess:e=>{e&&a(e.id)}});return e?(0,t.jsx)(i.default,{chatbotId:e,sideView:!0}):(0,t.jsxs)("div",{className:"w-full h-full bg-background-primary flex flex-col",children:[(0,t.jsxs)("div",{className:"flex-shrink-0 flex pl-4 pr-4 py-3 flex-row justify-between w-full items-center",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold",children:"Notes"}),(0,t.jsx)(u.Button,{isLoading:f,size:"icon",variant:"ghost",onClick:()=>h(),children:(0,t.jsx)(d.Icon,{as:l.PlusIcon})})]}),(0,t.jsx)("div",{className:"flex-1 min-h-0 overflow-y-scroll px-4 space-y-1 select-none scrollbar-overlay",children:null==o?void 0:o.entities.filter(e=>"NOTE"===e.type).sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()).map(e=>{var n;return(0,t.jsx)(c.default,{icon:s.FilePen,onClick:()=>a(e.id),children:(0,t.jsxs)("span",{className:"text-ellipsis whitespace-nowrap overflow-hidden",children:[null!=(n=e.name)?n:"Untitled"," "]})},e.id)})})]})}},847934:e=>{"use strict";e.s({default:()=>i});var t=e.i(397711),n=e.i(986216),r=e.i(814733);let i=function(){let{onMutate:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.api.useUtils(),a=(0,t.useRouter)(),o=(0,t.useParams)(),s=null==o?void 0:o.id,{sideViewItem:l,setSideViewItem:u}=(0,n.useSideView)(),{mutate:c,isPending:d}=r.api.chatbot.newDelete.useMutation({onMutate:async t=>{null==e||e();let n=t.map(e=>e.id),r=i.workspace.all.getData();return n.includes(s)&&a.push("/new"),l&&n.includes(l)&&u(null),i.workspace.all.setData(void 0,e=>{if(!e)return e;let t=new Map,r=new Set;for(let i of e.entities)if(n.includes(i.id)&&"GROUP"===i.type&&t.set(i.id,i.groupId),n.includes(i.id)&&"CHAT"===i.type&&r.add(i.id),i.chats&&i.chats.length>0)for(let e of i.chats)n.includes(e.id)&&r.add(e.id);let i=e.entities.map(e=>{if(e.groupId&&t.has(e.groupId)&&!n.includes(e.id)){var i;let n=null!=(i=t.get(e.groupId))?i:null;return{...e,groupId:n}}if(e.chats&&e.chats.length>0&&r.size>0){let t=e.chats.filter(e=>!r.has(e.id));if(t.length!==e.chats.length)return{...e,chats:t}}return e}).filter(e=>!n.includes(e.id));return{...e,entities:i}}),{prevData:r}},onError(e,t,n){i.workspace.all.setData(void 0,null==n?void 0:n.prevData)}});return{mutateDelete:c,isDeleting:d}}},809885:e=>{"use strict";e.s({useNewSummary:()=>r});var t=e.i(852951),n=e.i(814733);let r=()=>{let{updateChatbot:e}=(0,t.useWorkspaceActions)(),r=n.api.useUtils(),{mutateAsync:i}=n.api.documentMetadata.indexedSummary.useMutation();return{updateSummary:async t=>{let n=await i(t),a=null==n?void 0:n.summary;a&&(r.documentMetadata.byId.setData({chatbotId:t},e=>e&&{...e,summary:a}),e(t,{summary:null==n?void 0:n.summary}))}}}},980919:e=>{"use strict";e.s({FileUploadToastContent:()=>_,UPLOAD_TOAST_ID:()=>S});var t=e.i(290479),n=e.i(608294),r=e.i(874133),i=e.i(381612),a=e.i(688862),o=e.i(116075),s=e.i(338403),l=e.i(334145),u=e.i(397711),c=e.i(373150),d=e.i(525094),h=e.i(998145),p=e.i(847934),f=e.i(852951),m=e.i(814733),g=e.i(985132),y=e.i(289702),b=e.i(704255),x=e.i(972899),w=e.i(809885);let k=e=>{let{status:n}=e;switch(n){case"IN_PROGRESS":return(0,t.jsx)("div",{className:"h-7 w-7 loader-small-gray text-text-secondary"});case"SUCCESS_PENDING_IMAGES":case"SUCCESS":return(0,t.jsx)(r.Check,{className:"h-7 w-7 text-blue",strokeWidth:3});case"FAILED":case"TIMEOUT":return(0,t.jsx)(o.CircleAlert,{className:"h-7 w-7 text-red-500 text-destructive-solid"});default:return(0,t.jsx)(s.CircleDashed,{className:"h-7 w-7 text-text-secondary"})}},S="file-upload-progress-toast";function _(e){let{toastId:r}=e,[o,s]=(0,c.useState)(!0),[S]=(0,n.useAtom)(g.uploadingFilesAtom),_=(0,n.useAtomValue)(g.isUploadingAtom),C=(0,n.useSetAtom)(g.updateUploadingFileAtom),A=(0,n.useSetAtom)(g.clearUploadingFilesAtom),{mutateDelete:E}=(0,p.default)(),{updateSummary:T}=(0,w.useNewSummary)(),M=(0,u.useRouter)(),{updateChatbot:I}=(0,f.useWorkspaceActions)(),N=(0,c.useRef)(new Set),{mutate:D}=m.api.file.generateImageTitle.useMutation({onSuccess:(e,t)=>{if(e){let n=S.find(e=>e.chatbotId===t.chatbotId);n&&C({id:n.id,name:e,status:n.status}),I(t.chatbotId,{name:e})}}});(0,c.useEffect)(()=>{0===_&&S.length>0&&S.every(e=>"SUCCESS"===e.status||"SUCCESS_PENDING_IMAGES"===e.status)&&setTimeout(()=>{A(),N.current.clear(),d.toast.dismiss(r)},5e3)},[_,S,r]);let P=S.filter(e=>"SUCCESS"!==e.status&&"SUCCESS_PENDING_IMAGES"!==e.status&&e.chatbotId).map(e=>e.chatbotId),R=S.filter(e=>"SUCCESS"===e.status||"SUCCESS_PENDING_IMAGES"===e.status).length,O=_>0?"Uploading ".concat(_," ").concat(1===_?"file":"files"):"".concat(R," ").concat(1===R?"file":"files"," uploaded"),{data:j}=m.api.chatbot.ingestionStatuses.useQuery(P,{enabled:!!P.length,refetchInterval:e=>{let t=e.state.data;if(!t)return 2e3;if(!t.some(e=>{var t;return!e.isIndexed||(null==(t=e.ingestionStatus)?void 0:t.status)==="IN_PROGRESS"}))return!1;let n=e.state.dataUpdateCount;return!(n>15)&&(n>10?1e4:n>5?6e3:2e3)}});(0,c.useEffect)(()=>{if(j)for(let n of j){var e,t;let r=S.find(e=>e.chatbotId===n.id);if(r&&(n.ingestionStatus||n.isIndexed)){let e=n.ingestionStatus,i={id:null==r?void 0:r.id,status:null==e?void 0:e.status,errorMessage:null!=(t=null==e?void 0:e.failureReason)?t:void 0};n.name&&n.name!==r.name&&(i.name=n.name),n.isIndexed&&(i.status="SUCCESS"),"SUCCESS"===i.status&&(T(n.id),"IMAGE"!==n.type||N.current.has(n.id)||(N.current.add(n.id),D({chatbotId:n.id}))),n.type&&n.type!==r.type&&(i.type=n.type),C(i)}I(n.id,{isIndexed:n.isIndexed,ingestionStatus:null==(e=n.ingestionStatus)?void 0:e.status,documentUrl:n.documentUrl,...!("IMAGE"===n.type&&N.current.has(n.id))&&{name:n.name},type:n.type,url:n.url})}},[j]);let F=()=>{let e=S.filter(e=>"IN_PROGRESS"===e.status&&e.chatbotId).map(e=>({id:e.chatbotId}));e.length&&E(e),A(),N.current.clear(),d.toast.dismiss(r)};return(0,t.jsxs)("div",{className:"w-full max-w-md rounded-4 bg-popover shadow-feint overflow-hidden text-text-primary border border-border-primary",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4",children:[(0,t.jsx)("span",{className:"text-base leading-[100%] font-semibold pl-4",children:O}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:_>0?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(b.Button,{variant:"outline",size:"xs",className:"h-11",onClick:F,children:"Cancel"}),(0,t.jsx)(b.Button,{variant:"ghost",size:"icon",className:"h-11 w-11",onClick:()=>s(e=>!e),children:o?(0,t.jsx)(i.ChevronDown,{className:"h-7 w-7"}):(0,t.jsx)(a.ChevronUp,{className:"h-7 w-7"})})]}):(0,t.jsx)(b.Button,{variant:"ghost",size:"icon",className:"h-11 w-11",onClick:F,children:(0,t.jsx)(l.X,{className:"h-7 w-7"})})})]}),(0,t.jsx)("div",{className:"\n          overflow-y-auto\n          transition-all\n          duration-300\n          ease-in-out\n          ".concat(o&&S.length>0?"max-h-72 opacity-100":"max-h-0 opacity-0","\n        "),children:(0,t.jsx)("div",{className:"\n          py-4\n          mx-4\n          overflow-y-auto\n          transition-transform\n          duration-300\n          ease-in-out\n          ".concat(o&&S.length>0?"translate-y-0":"-translate-y-2","\n        "),children:(0,t.jsx)("ul",{children:S.map(e=>(0,t.jsxs)("li",{className:(0,y.cn)("flex items-center justify-between gap-4 px-4 py-2 rounded-4",("FAILED"===e.status||"TIMEOUT"===e.status)&&"text-destructive-solid",("SUCCESS"===e.status||"SUCCESS_PENDING_IMAGES"===e.status)&&"hover:bg-control-primary hover:cursor-pointer"),onClick:()=>{("SUCCESS"===e.status||"SUCCESS_PENDING_IMAGES"===e.status)&&M.push("/b/".concat(e.chatbotId))},children:[(0,t.jsxs)("div",{className:"flex min-w-0 items-center gap-4",children:[(0,t.jsx)(x.Icon,{as:(0,h.default)({type:e.type||"DOCUMENT"})}),(0,t.jsx)("span",{className:"flex-1 truncate text-sm font-medium",children:e.name})]}),(0,t.jsx)("div",{className:"flex flex-shrink-0 items-center gap-4",children:(0,t.jsx)(k,{status:e.status})})]},e.id))})})})]})}},430036:e=>{"use strict";e.s({useUploadToast:()=>l});var t=e.i(290479),n=e.i(980919),r=e.i(885905),i=e.i(985132),a=e.i(608294),o=e.i(373150),s=e.i(525094);function l(){let e=(0,a.useAtomValue)(i.uploadingFilesAtom),{userLoading:l,user:u}=(0,r.useAuth)(),c=null==e?void 0:e.some(e=>("IN_PROGRESS"===e.status||"TIMEOUT"===e.status||"FAILED"===e.status)&&e.chatbotId);(0,o.useEffect)(()=>{void 0!==e&&!l&&u&&c&&s.toast.custom(e=>(0,t.jsx)(n.FileUploadToastContent,{toastId:e}),{id:n.UPLOAD_TOAST_ID,duration:1/0,dismissible:!1,position:"bottom-left",className:"!px-0 !py-0 bg-popover border-border-primary !rounded-6"})},[e,l,u])}},186006:e=>{"use strict";e.s({default:()=>y});var t=e.i(290479),n=e.i(457443),r=e.i(885905),i=e.i(252390),a=e.i(814733),o=e.i(719421),s=e.i(266199),l=e.i(647968),u=e.i(608294),c=e.i(227348),d=e.i(373150),h=e.i(525094),p=e.i(704255);let f=e=>{let{onSelect:n,selectedNumber:r}=e,i=Array.from({length:10},(e,t)=>t+1);return(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("div",{className:"flex w-full border justify-center rounded-4 border-border-primary",children:i.map(e=>(0,t.jsx)("button",{className:"w-11 md:w-14 h-10 flex items-center justify-center focus:outline-none border-border-primary ".concat(1!==e?"border-l":""," ").concat(r===e?"bg-popover-foreground text-text-primary":""," ").concat(1===e?"rounded-l-md":10===e?"rounded-r-md":""),onClick:()=>(e=>{n(r===e?null:e)})(e),children:e},e))}),(0,t.jsxs)("div",{className:"flex justify-between w-full mt-4 text-sm text-text-secondary",children:[(0,t.jsx)("span",{children:"Very unlikely"}),(0,t.jsx)("span",{children:"Very likely"})]})]})},m=(0,l.atom)(!1),g=(0,c.atomWithStorage)("visitCount",1),y=()=>{let[e,l]=(0,u.useAtom)(m),[c,y]=(0,u.useAtom)(g),{user:b}=(0,r.useAuth)(),[x,w]=(0,d.useState)(null),[k,S]=(0,d.useState)(""),[_,C]=(0,d.useState)(!1),{track:A}=(0,i.default)(),{mutateAsync:E}=a.api.slack.message.useMutation(),{mutateAsync:T}=a.api.user.createNPSResponse.useMutation(),M=async()=>{var e;if(!x)return;C(!0),l(!1),h.toast.success("Feedback submitted!"),A("NPS Submit",{score:x,feedback:k,method:"Submit"});let t=null==b||null==(e=b.onboardingResponse)?void 0:e[0],n=["New NPS submission:","- From: ".concat(b?b.email:"visitor"),"- Score: ".concat(x,"/10"),k?"- Feedback: ".concat(k):null,(null==t?void 0:t.hearAboutUs)?"- Source: ".concat(null==t?void 0:t.hearAboutUs):null,(null==t?void 0:t.purpose)?"- Purpose: ".concat(null==t?void 0:t.purpose):null,(null==t?void 0:t.educationLevel)?"- Education Level: ".concat(null==t?void 0:t.educationLevel):null,(null==b?void 0:b.createdAt)?"- Account created: ".concat((0,o.formatTimeAgo)(new Date(null==b?void 0:b.createdAt))):null].filter(Boolean).join("\n");try{await T({score:x,feedback:k}),await E({type:"nps",message:n})}catch(e){console.error("Error submitting NPS feedback:",e)}finally{C(!1)}},I=async()=>{if(l(!1),A("NPS Submit",{score:x,feedback:k,method:"Close"}),null!==x){var e;let t=null==b||null==(e=b.onboardingResponse)?void 0:e[0],n=["New NPS submission:","- From: ".concat(b?b.email:"visitor"),"- Score: ".concat(x,"/10"),k?"- Feedback: ".concat(k):null,(null==t?void 0:t.hearAboutUs)?"- Source: ".concat(null==t?void 0:t.hearAboutUs):null,(null==t?void 0:t.purpose)?"- Purpose: ".concat(null==t?void 0:t.purpose):null,(null==t?void 0:t.educationLevel)?"- Education Level: ".concat(null==t?void 0:t.educationLevel):null,(null==b?void 0:b.createdAt)?"- Account created: ".concat((0,o.formatTimeAgo)(new Date(null==b?void 0:b.createdAt))):null].filter(Boolean).join("\n");try{await T({score:x,feedback:k}),await E({type:"nps",message:n})}catch(e){console.error("Error submitting NPS feedback:",e)}}else localStorage.setItem("npsModalClosed","true")};return(0,d.useEffect)(()=>{var e;if(b&&!(null==(e=b.npsResponse)?void 0:e.length)&&!localStorage.getItem("npsModalClosed")){let e=(0,s.default)(b.createdAt);(0,s.default)().diff(e,"day")>3&&.2>Math.random()&&c>=4&&setTimeout(()=>{l(!0)},8e3),y(e=>e+1)}},[b]),(0,t.jsx)(n.Dialog,{modal:!1,open:e,onOpenChange:()=>{I()},children:(0,t.jsxs)(n.DialogContent,{onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),hideOverlay:!0,side:"bottom",className:"w-fit",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-7",children:[(0,t.jsx)("span",{className:" text-sm md:text-base font-semibold pr-9 text-text-primary",children:"How likely are you to recommend us to a friend?"}),(0,t.jsx)(f,{onSelect:w,selectedNumber:x})]}),null!==x&&(0,t.jsxs)("div",{className:"flex flex-col gap-7",children:[(0,t.jsxs)("span",{className:"text-sm font-medium text-text-primary",children:["We read every single response. Why did you rate Anara a"," ",x,"?"]}),(0,t.jsx)("textarea",{rows:4,value:k,name:"feedback",onChange:e=>S(e.target.value),placeholder:"We'd love to know!",className:"w-full p-4 text-sm mb-4 h-full focus:outline-none placeholder:text-[#999999] resize-none bg-popover rounded-4 border border-border-primary",onClick:e=>{e.stopPropagation()}})]}),null!==x&&(0,t.jsx)(n.DialogFooter,{children:(0,t.jsx)(p.Button,{size:"sm",onClick:M,isLoading:_,disabled:_,children:"Submit"})})]})})}},859339:e=>{"use strict";e.s({LockIcon:()=>t.default});var t=e.i(600267)},122654:e=>{"use strict";e.s({default:()=>s});var t=e.i(290479),n=e.i(859339),r=e.i(34818);let i={hidden:{opacity:0},visible:{opacity:1,transition:{ease:"easeInOut",duration:.2}}},a={hidden:{translateY:10},visible:{translateY:0,transition:{ease:"easeInOut",duration:.2}}},o=()=>(0,t.jsx)("div",{className:"flex flex-col bg-[#ffffff] w-[24rem] h-[18rem] rounded-6 justify-center",children:(0,t.jsxs)("div",{className:"flex flex-col py-8 px-7 gap-7 items-center",children:[(0,t.jsx)("div",{className:"rounded-full w-16 h-16 bg-elementGray flex flex-col items-center justify-center",children:(0,t.jsx)(n.LockIcon,{color:"#666666",size:24})}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h2",{className:"text-2xl",children:"Access Revoked"}),(0,t.jsx)("p",{children:"Please contact your system admin."})]})]})}),s=()=>(0,t.jsx)(r.motion.div,{className:"w-screen h-dvh flex items-center justify-center backdrop-blur-sm bg-[#00000010] fixed z-[999]",initial:"hidden",animate:"visible",variants:i,children:(0,t.jsx)(r.motion.div,{initial:"hidden",animate:"visible",variants:a,children:(0,t.jsx)(o,{})})})},173455:e=>{"use strict";e.s({Action:()=>O,Cancel:()=>j,Content:()=>R,Description:()=>L,Overlay:()=>P,Portal:()=>D,Root:()=>I,Title:()=>F,Trigger:()=>N});var t=e.i(373150),n=e.i(215836),r=e.i(28537),i=e.i(975267),a=e.i(777787),o=e.i(774009),s=e.i(290479),l="AlertDialog",[u,c]=(0,n.createContextScope)(l,[i.createDialogScope]),d=(0,i.createDialogScope)(),h=e=>{let{__scopeAlertDialog:t,...n}=e,r=d(t);return(0,s.jsx)(i.Root,{...r,...n,modal:!0})};h.displayName=l;var p=t.forwardRef((e,t)=>{let{__scopeAlertDialog:n,...r}=e,a=d(n);return(0,s.jsx)(i.Trigger,{...a,...r,ref:t})});p.displayName="AlertDialogTrigger";var f=e=>{let{__scopeAlertDialog:t,...n}=e,r=d(t);return(0,s.jsx)(i.Portal,{...r,...n})};f.displayName="AlertDialogPortal";var m=t.forwardRef((e,t)=>{let{__scopeAlertDialog:n,...r}=e,a=d(n);return(0,s.jsx)(i.Overlay,{...a,...r,ref:t})});m.displayName="AlertDialogOverlay";var g="AlertDialogContent",[y,b]=u(g),x=(0,o.createSlottable)("AlertDialogContent"),w=t.forwardRef((e,n)=>{let{__scopeAlertDialog:o,children:l,...u}=e,c=d(o),h=t.useRef(null),p=(0,r.useComposedRefs)(n,h),f=t.useRef(null);return(0,s.jsx)(i.WarningProvider,{contentName:g,titleName:k,docsSlug:"alert-dialog",children:(0,s.jsx)(y,{scope:o,cancelRef:f,children:(0,s.jsxs)(i.Content,{role:"alertdialog",...c,...u,ref:p,onOpenAutoFocus:(0,a.composeEventHandlers)(u.onOpenAutoFocus,e=>{var t;e.preventDefault(),null==(t=f.current)||t.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,s.jsx)(x,{children:l}),(0,s.jsx)(M,{contentRef:h})]})})})});w.displayName=g;var k="AlertDialogTitle",S=t.forwardRef((e,t)=>{let{__scopeAlertDialog:n,...r}=e,a=d(n);return(0,s.jsx)(i.Title,{...a,...r,ref:t})});S.displayName=k;var _="AlertDialogDescription",C=t.forwardRef((e,t)=>{let{__scopeAlertDialog:n,...r}=e,a=d(n);return(0,s.jsx)(i.Description,{...a,...r,ref:t})});C.displayName=_;var A=t.forwardRef((e,t)=>{let{__scopeAlertDialog:n,...r}=e,a=d(n);return(0,s.jsx)(i.Close,{...a,...r,ref:t})});A.displayName="AlertDialogAction";var E="AlertDialogCancel",T=t.forwardRef((e,t)=>{let{__scopeAlertDialog:n,...a}=e,{cancelRef:o}=b(E,n),l=d(n),u=(0,r.useComposedRefs)(t,o);return(0,s.jsx)(i.Close,{...l,...a,ref:u})});T.displayName=E;var M=e=>{let{contentRef:n}=e,r="`".concat(g,"` requires a description for the component to be accessible for screen reader users.\n\nYou can add a description to the `").concat(g,"` by passing a `").concat(_,"` component as a child, which also benefits sighted users by adding visible context to the dialog.\n\nAlternatively, you can use your own component as a description by assigning it an `id` and passing the same value to the `aria-describedby` prop in `").concat(g,"`. If the description is confusing or duplicative for sighted users, you can use the `@radix-ui/react-visually-hidden` primitive as a wrapper around your description component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/alert-dialog");return t.useEffect(()=>{var e;document.getElementById(null==(e=n.current)?void 0:e.getAttribute("aria-describedby"))||console.warn(r)},[r,n]),null},I=h,N=p,D=f,P=m,R=w,O=A,j=T,F=S,L=C},217313:e=>{"use strict";e.s({AlertDialog:()=>o,AlertDialogAction:()=>f,AlertDialogCancel:()=>m,AlertDialogContent:()=>u,AlertDialogDescription:()=>p,AlertDialogFooter:()=>d,AlertDialogHeader:()=>c,AlertDialogTitle:()=>h});var t=e.i(290479),n=e.i(289702),r=e.i(173455),i=e.i(373150),a=e.i(704255);let o=r.Root;r.Trigger;let s=r.Portal,l=i.forwardRef((e,i)=>{let{className:a,...o}=e;return(0,t.jsx)(r.Overlay,{className:(0,n.cn)("fixed inset-0 z-50 bg-black/40 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...o,ref:i})});l.displayName=r.Overlay.displayName;let u=i.forwardRef((e,i)=>{let{className:a,...o}=e;return(0,t.jsxs)(s,{children:[(0,t.jsx)(l,{}),(0,t.jsx)(r.Content,{ref:i,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-md translate-x-[-50%] translate-y-[-50%] gap-10 border bg-background-primary p-9 shadow-shadowHigh duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-4",a),...o})]})});u.displayName=r.Content.displayName;let c=e=>{let{className:r,...i}=e;return(0,t.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-4 sm:text-left",r),...i})};c.displayName="AlertDialogHeader";let d=e=>{let{className:r,...i}=e;return(0,t.jsx)("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-4",r),...i})};d.displayName="AlertDialogFooter";let h=i.forwardRef((e,i)=>{let{className:a,...o}=e;return(0,t.jsx)(r.Title,{ref:i,className:(0,n.cn)("text-lg font-semibold",a),...o})});h.displayName=r.Title.displayName;let p=i.forwardRef((e,i)=>{let{className:a,...o}=e;return(0,t.jsx)(r.Description,{ref:i,className:(0,n.cn)("text-sm text-text-primary",a),...o})});p.displayName=r.Description.displayName;let f=i.forwardRef((e,i)=>{let{className:o,variant:s,...l}=e;return(0,t.jsx)(r.Action,{ref:i,className:(0,n.cn)((0,a.buttonVariants)({size:"xs",variant:s}),o),...l})});f.displayName=r.Action.displayName;let m=i.forwardRef((e,i)=>{let{className:o,...s}=e;return(0,t.jsx)(r.Cancel,{ref:i,className:(0,n.cn)((0,a.buttonVariants)({variant:"secondary",size:"xs"}),"mt-4 sm:mt-0",o),...s})});m.displayName=r.Cancel.displayName},876525:e=>{"use strict";e.s({default:()=>i});var t=e.i(290479),n=e.i(217313),r=e.i(52333);let i=()=>{let{open:e,title:i,description:a,cancelLabel:o,actionLabel:s,onAction:l,closeConfirmation:u,actionButtonVariant:c}=(0,r.useConfirmationStore)(e=>e);return(0,t.jsx)(n.AlertDialog,{open:e,onOpenChange:u,children:(0,t.jsxs)(n.AlertDialogContent,{children:[(0,t.jsxs)(n.AlertDialogHeader,{children:[(0,t.jsx)(n.AlertDialogTitle,{children:i}),(0,t.jsx)(n.AlertDialogDescription,{children:a})]}),(0,t.jsxs)(n.AlertDialogFooter,{children:[(0,t.jsx)(n.AlertDialogCancel,{autoFocus:!1,children:o}),(0,t.jsx)(n.AlertDialogAction,{variant:null!=c?c:"default",onClick:l,children:s})]})]})})}},706083:e=>{"use strict";e.s({useMakeFolderTeam:()=>r});var t=e.i(814733),n=e.i(852951);let r=()=>{let{updateChatbot:e}=(0,n.useWorkspaceActions)(),r=t.api.useUtils(),i=(0,n.useTeamId)();return t.api.sidebar.makeFolderTeam.useMutation({onMutate:async t=>{var n;let{id:a,teamId:o}=t,s=r.workspace.all.getData();return e(a,{teamId:null!=(n=null!=o?o:i)?n:null,groupId:null,isInviteToggled:!1}),{prevData:s}},onError:(e,t,n)=>{(null==n?void 0:n.prevData)&&r.workspace.all.setData(void 0,n.prevData)}})}},802809:e=>{"use strict";e.s({useEmailAutocomplete:()=>n});var t=e.i(373150);let n=()=>{let[e,n]=(0,t.useState)(!1),[r,i]=(0,t.useState)(-1),[a,o]=(0,t.useState)({top:0,left:0,width:340}),s=(0,t.useRef)(null),l=(0,t.useRef)(null),u=()=>{if(s.current){let e=s.current.getBoundingClientRect();o({top:e.bottom+window.scrollY+4,left:e.left+window.scrollX,width:340})}};return(0,t.useEffect)(()=>{let t=e=>{var t,r;let a=e.target;(null==(t=l.current)?void 0:t.contains(a))||(null==(r=s.current)?void 0:r.contains(a))||a.closest("[data-email-suggestions-dropdown]")||(n(!1),i(-1))},r=()=>{e&&u()},a=()=>{e&&u()};return document.addEventListener("mousedown",t),window.addEventListener("scroll",r,!0),window.addEventListener("resize",a),()=>{document.removeEventListener("mousedown",t),window.removeEventListener("scroll",r,!0),window.removeEventListener("resize",a)}},[e]),{showSuggestions:e,setShowSuggestions:n,selectedSuggestionIndex:r,setSelectedSuggestionIndex:i,dropdownPosition:a,inputRef:s,suggestionsRef:l,updateDropdownPosition:u,handleKeyboardNavigation:(t,a,o)=>{if(e&&a.length>0){if("ArrowDown"===t.key)return t.preventDefault(),i(e=>e<a.length-1?e+1:0),!0;if("ArrowUp"===t.key)return t.preventDefault(),i(e=>e>0?e-1:a.length-1),!0;if("Enter"===t.key&&r>=0){t.preventDefault();let e=a[r];return e&&o(e.email),!0}if("Escape"===t.key)return t.preventDefault(),n(!1),i(-1),!0}return!1},selectSuggestion:(e,t)=>{t(e),n(!1),i(-1)}}}},591333:e=>{"use strict";e.s({useEmailSuggestions:()=>r});var t=e.i(814733),n=e.i(373150);let r=(e,r)=>{let{data:i=[],isLoading:a}=t.api.folderShare.getEmailSuggestions.useQuery(void 0,{staleTime:3e5});return{filteredSuggestions:(0,n.useMemo)(()=>e.trim()?((e,t)=>{if(!e.trim())return[];let n=e.toLowerCase();return t.filter(e=>{var t;let r=e.email.toLowerCase(),i=(null==(t=e.displayName)?void 0:t.toLowerCase())||"";if(r.includes(n)||i.includes(n))return!0;let a=n.split(""),o=a.every(e=>r.includes(e)),s=i&&a.every(e=>i.includes(e));return o||s}).slice(0,8)})(e,i).filter(e=>!r.includes(e.email)):[],[e,i,r]),isLoadingSuggestions:a}}},450419:e=>{"use strict";e.s({EmailInput:()=>c});var t=e.i(290479),n=e.i(289702),r=e.i(334145),i=e.i(373150),a=e.i(784445),o=e.i(704255),s=e.i(802809),l=e.i(591333);let u=e=>/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e),c=(0,i.forwardRef)((e,c)=>{let{placeholder:d="Add people",handleSendInvites:h}=e,[p,f]=(0,i.useState)(""),[m,g]=(0,i.useState)([]),{filteredSuggestions:y,isLoadingSuggestions:b}=(0,l.useEmailSuggestions)(p,m),{showSuggestions:x,setShowSuggestions:w,selectedSuggestionIndex:k,setSelectedSuggestionIndex:S,dropdownPosition:_,inputRef:C,suggestionsRef:A,updateDropdownPosition:E,handleKeyboardNavigation:T,selectSuggestion:M}=(0,s.useEmailAutocomplete)(),I=e=>{e&&u(e)&&!m.includes(e)&&(g([...m,e]),f(""))},N=e=>{g(m.filter(t=>t!==e))},D=()=>{let e=[...m],t=p.trim();return t&&u(t)&&!e.includes(t)&&e.push(t),e},P=()=>{g([]),f("")};return(0,i.useImperativeHandle)(c,()=>({getCurrentEmails:D,clearEmails:P}),[p,m]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{ref:C,className:(0,n.cn)("flex flex-wrap items-center gap-2 p-2 border rounded-[10px] max-w-full",m.length&&"pt-2"),children:[m.map(e=>(0,t.jsxs)("div",{className:"inline-flex items-center gap-1 bg-blue/10 text-blue pl-3 pr-1 py-1 rounded-md text-xs max-w-full",children:[(0,t.jsx)("span",{className:"truncate font-medium max-w-[200px]",children:e}),(0,t.jsx)("button",{onClick:()=>N(e),className:"hover:bg-blue-200 rounded-3 p-0.5 flex-shrink-0",children:(0,t.jsx)(r.X,{className:"h-6 w-6",strokeWidth:2.5})})]},e)),(0,t.jsx)("input",{placeholder:0===m.length?d:"",value:p,onChange:e=>{let t=e.target.value;f(t),t.trim().length>0?(w(!0),S(-1),E()):(w(!1),S(-1))},onKeyDown:e=>{if(!T(e,y,e=>M(e,I)))if("Enter"===e.key||","===e.key||" "===e.key){e.preventDefault();let t=p.trim();t&&u(t)&&!m.includes(t)&&I(t)}else"Backspace"===e.key&&""===p&&m.length>0&&(e.preventDefault(),N(m[m.length-1]))},onFocus:()=>{p.length>0&&(w(!0),E())},className:"flex-1 pl-3 outline-none font-normal bg-transparent min-w-[120px] max-w-full h-[30px] text-sm pr-[64px]"}),(0,t.jsx)(o.Button,{onClick:h,className:"absolute right-2 top-2 px-4 py-2 h-10 text-sm font-medium tracking-[-0.32px] rounded-[6px]",children:"Send"})]}),x&&!b&&y.length>0&&(0,a.createPortal)((0,t.jsx)("div",{ref:A,className:"fixed bg-popover border border-border rounded-lg shadow-md max-h-48 overflow-y-auto z-[9999] pointer-events-auto select-none py-2","data-radix-popper-content-wrapper":"","data-email-suggestions-dropdown":"",style:{top:_.top,left:_.left,width:_.width,pointerEvents:"auto"},onMouseDown:e=>{e.stopPropagation()},children:y.map((e,r)=>{let i=(e.displayName||e.email).split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2);return(0,t.jsx)("div",{className:(0,n.cn)("mx-2 rounded-md px-2 py-3 cursor-pointer hover:bg-muted transition-colors duration-150 ",k===r&&"bg-muted/70"),onMouseDown:t=>{t.preventDefault(),t.stopPropagation(),M(e.email,I)},onClick:e=>{e.preventDefault(),e.stopPropagation()},children:(0,t.jsxs)("div",{className:"flex flex-row items-center gap-4",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-full border-border border flex items-center justify-center flex-shrink-0",children:(0,t.jsx)("span",{className:"text-xs font-semibold text-text-primary",children:i})}),(0,t.jsx)("div",{className:"text-sm font-medium text-text-primary truncate",children:e.displayName||e.email}),e.displayName&&(0,t.jsx)("div",{className:"text-sm text-text-secondary truncate",children:e.email})]})},e.email)})}),document.body)]})});c.displayName="EmailInput"},285325:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("octagon-minus",[["path",{d:"M2.586 16.726A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2h6.624a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586z",key:"2d38gg"}],["path",{d:"M8 12h8",key:"1wcyev"}]])},400847:e=>{"use strict";e.s({OctagonMinus:()=>t.default});var t=e.i(285325)},285400:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("user-pen",[["path",{d:"M11.5 15H7a4 4 0 0 0-4 4v2",key:"15lzij"}],["path",{d:"M21.378 16.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1817ys"}],["circle",{cx:"10",cy:"7",r:"4",key:"e45bow"}]])},230185:e=>{"use strict";e.s({UserPen:()=>t.default});var t=e.i(285400)},232786:e=>{"use strict";e.s({ShareUserItem:()=>s});var t=e.i(290479),n=e.i(400847),r=e.i(230185),i=e.i(289702),a=e.i(972899),o=e.i(365918);let s=e=>{let{share:s,onUpdateRole:l,onRemove:u,isCurrentUser:c,isOwner:d,isPending:h=!1}=e,p="OWNER"===s.role;return(0,t.jsxs)("div",{className:"flex items-center justify-between pl-0 pr-2 py-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:(0,i.cn)("w-8 h-8 rounded-full flex items-center justify-center text-xs font-medium border border-border text-text-tertiary"),children:((e,t)=>t?t.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2):e.split("@")[0].slice(0,1).toUpperCase())(s.email,s.userName)}),(0,t.jsx)("div",{className:"flex flex-col min-w-0",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("span",{className:(0,i.cn)("text-sm font-medium text-text-primary truncate ",h?"max-w-[110px]":"max-w-[190px]"),children:[((e,t)=>t||e)(s.email,s.userName),c&&" (you)"]}),h&&(0,t.jsx)("span",{className:"ml-2 text-xs tracking-[-1%] font-medium text-text-tertiary bg-muted px-3 py-1 rounded-3",children:"Invite sent"})]})})]}),(0,t.jsx)("div",{className:"flex items-center",children:(0,t.jsxs)(o.Select,{value:"FULL_ACCESS"===s.role?"FULL_ACCESS":void 0,onValueChange:e=>{"remove"===e?u():l(e)},disabled:p||!d,children:[(0,t.jsx)(o.SelectTrigger,{className:"w-auto h-auto p-0 border-0 bg-transparent hover:bg-transparent text-sm text-text-secondary",children:p?"Owner":"Full access"}),(0,t.jsxs)(o.SelectContent,{align:"end",className:"w-[140px]",children:[(0,t.jsx)(o.SelectItem,{value:"FULL_ACCESS",className:"gap-4 text-sm",iconStyle:"text-blue w-6 h-6 stroke-[3px]",prefixIcon:(0,t.jsx)(a.Icon,{as:r.UserPen,size:"sm"}),children:"Full access"}),(0,t.jsx)(o.SelectItem,{value:"remove",iconStyle:"text-blue",prefixIcon:(0,t.jsx)(a.Icon,{as:n.OctagonMinus,size:"sm"}),className:"gap-4 text-sm text-destructive-foreground focus:bg-control-destructive focus:text-destructive-foreground",children:"Remove"})]})]})})]})}},732986:e=>{"use strict";e.s({useShareFolder:()=>a});var t=e.i(525094),n=e.i(885905),r=e.i(852951),i=e.i(814733);let a=(e,a,o,s)=>{let{user:l}=(0,n.useAuth)(),u=i.api.useUtils(),{updateChatbot:c}=(0,r.useWorkspaceActions)(),{mutate:d,isPending:h}=i.api.folderShare.shareFolder.useMutation({onMutate:async t=>{let{emails:n}=t;await u.folderShare.getFolderShares.cancel(e);let r=u.folderShare.getFolderShares.getData(e);return u.folderShare.getFolderShares.setData(e,e=>{if(!e)return e;let t=n.map(e=>({id:"temp-".concat(e,"-").concat(Date.now()),userId:"",email:e,role:"FULL_ACCESS",status:"PENDING",createdAt:new Date().toISOString(),invitedBy:(null==l?void 0:l.id)||"",userName:null})),r=e.some(e=>e.userId===(null==l?void 0:l.id)),i=[...e,...t];return!r&&l&&(i=[{id:"temp-owner-".concat(Date.now()),userId:l.id,email:l.email,role:"OWNER",status:"ACCEPTED",createdAt:new Date().toISOString(),invitedBy:l.id,userName:l.displayName||null},...i]),i}),a||(c(e,{isInviteToggled:!0}),null==s||s({isInviteToggled:!0,isTeamToggled:!1})),null==o||o(),{previousShares:r,wasPrivateMode:!a}},onError:(n,r,i)=>{u.folderShare.getFolderShares.setData(e,null==i?void 0:i.previousShares),(null==i?void 0:i.wasPrivateMode)&&(null==s||s({isInviteToggled:!1,isTeamToggled:!1})),t.toast.error("Failed to send invites. Please try again.")},onSuccess:()=>{u.folderShare.getFolderShares.invalidate(e)}});return{shareFolder:d,isSharing:h}}},809334:e=>{"use strict";e.s({ShareFolderModal:()=>C});var t=e.i(290479),n=e.i(246611),r=e.i(736067),i=e.i(452511),a=e.i(156997),o=e.i(373150),s=e.i(525094),l=e.i(885905),u=e.i(706083),c=e.i(852951),d=e.i(252390),h=e.i(814733),p=e.i(289702),f=e.i(704255),m=e.i(457443),g=e.i(972899),y=e.i(365918),b=e.i(935989),x=e.i(450419),w=e.i(232786),k=e.i(732986),S=e.i(643943);let _=e=>{let{folderId:n,isOwner:r}=e,{data:i=[],isLoading:a}=h.api.folderShare.getFolderShares.useQuery(n),{user:o}=(0,l.useAuth)(),{track:s}=(0,d.default)(),u=i.filter(e=>"ACCEPTED"===e.status),c=i.filter(e=>"PENDING"===e.status),f=h.api.useUtils(),{mutateAsync:m}=h.api.folderShare.updateFolderShareRole.useMutation({onSuccess:()=>{f.folderShare.getFolderShares.invalidate(n)}}),{mutateAsync:g}=h.api.folderShare.removeFolderShare.useMutation({onMutate:e=>{let t=f.folderShare.getFolderShares.getData(n);return f.folderShare.getFolderShares.setData(n,t=>null==t?void 0:t.filter(t=>t.id!==e)),{oldShares:t}},onError:(e,t,r)=>{f.folderShare.getFolderShares.setData(n,null==r?void 0:r.oldShares)}});return a?(0,t.jsxs)("div",{className:"space-y-2 px-5 pb-6",children:[(0,t.jsx)(b.SkeletonLoader,{className:"h-7 w-full bg-text-tertiary animate-pulse"}),(0,t.jsx)(b.SkeletonLoader,{className:"h-7 w-4/6 bg-text-tertiary animate-pulse"}),(0,t.jsx)(b.SkeletonLoader,{className:"h-7 w-4/5 bg-text-tertiary animate-pulse"})]}):(0,t.jsxs)("div",{className:(0,p.cn)("space-y-2 px-5 pb-6 max-h-[260px] overflow-y-auto",!i.length&&"pb-0"),children:[u.map(e=>(0,t.jsx)(w.ShareUserItem,{share:e,onUpdateRole:t=>{s("folder_share_role_updated",{folderId:n,role:t,shareId:e.id}),m({shareId:e.id,role:t})},onRemove:()=>{s("folder_share_removed",{folderId:n,shareId:e.id}),g(e.id)},isCurrentUser:e.userId===(null==o?void 0:o.id),isOwner:r},e.id)),c.map(e=>(0,t.jsx)(w.ShareUserItem,{share:e,onUpdateRole:t=>{s("folder_share_role_updated",{folderId:n,role:t,shareId:e.id,isPending:!0}),m({shareId:e.id,role:t})},onRemove:()=>{s("folder_share_removed",{folderId:n,shareId:e.id,isPending:!0}),g(e.id)},isCurrentUser:e.userId===(null==o?void 0:o.id),isOwner:r,isPending:!0},e.id))]})},C=()=>{let{isOpen:e,folderId:l,isInviteToggled:b,isTeamToggled:w,isOwner:C,closeModal:A,updateToggles:E}=(0,S.useShareFolderModalStore)(),[T,M]=(0,o.useState)(!1),I=(0,o.useRef)(null),N=h.api.useUtils(),D=(0,c.useTeamId)(),{updateChatbot:P}=(0,c.useWorkspaceActions)(),{track:R}=(0,d.default)(),O=w?"workspace":b?"invite":"private",{shareFolder:j,isSharing:F}=(0,k.useShareFolder)(l||"",b,()=>{var e;return null==(e=I.current)?void 0:e.clearEmails()},E),{mutateAsync:L,isPending:z}=(0,u.useMakeFolderTeam)(),{mutateAsync:B,isPending:U}=h.api.folderShare.updateFolderSharingMode.useMutation({onMutate:async e=>{let{mode:t}=e;l&&(await N.workspace.all.cancel(),P(l,{isInviteToggled:"invite"===t,...("invite"===t||"private"===t)&&{teamId:null}}))},onSuccess:()=>{l&&(N.folderShare.getFolderShares.invalidate(l),N.workspace.all.invalidate())}});if(!e||!l)return null;let H=async()=>{var e;if(F)return void s.toast.error("Please wait for the previous request to complete");let t=(null==(e=I.current)?void 0:e.getCurrentEmails())||[];if(0===t.length)return void s.toast.error("Please enter at least one email");R("folder_share_invites_sent",{folderId:l,emailCount:t.length,role:"FULL_ACCESS"}),j({folderId:l,emails:t,role:"FULL_ACCESS"})},W=async()=>{if(!l)return;let e="".concat(window.location.origin,"/b/").concat(l);R("folder_share_link_copied",{folderId:l,shareMode:O}),await navigator.clipboard.writeText(e),M(!0),setTimeout(()=>M(!1),2e3)},V=async e=>{if(l&&("workspace"!==e||D)&&e!==O){E({isInviteToggled:"invite"===e,isTeamToggled:"workspace"===e}),R("folder_share_mode_changed",{folderId:l,previousMode:O,newMode:e,teamId:D||void 0});try{"workspace"===e&&D?(await L({id:l,teamId:D}),N.workspace.all.invalidate()):await B({folderId:l,mode:e})}catch(e){throw E({isInviteToggled:b,isTeamToggled:w}),s.toast.error("Failed to update sharing mode. Please try again."),e}}};return(0,t.jsx)(m.Dialog,{open:e,onOpenChange:A,children:(0,t.jsx)(m.DialogContent,{className:"w-[360px] p-0",hideCloseButton:!0,children:(0,t.jsxs)("div",{className:"w-[360px] py-5",children:[(0,t.jsxs)("div",{className:(0,p.cn)("pb-6 px-5"),children:[(0,t.jsx)("h2",{className:"pb-3 text-xs font-medium tracking-[-0.32px] text-muted-foreground",children:"Share Insights"}),(0,t.jsx)("div",{className:"relative",children:(0,t.jsx)("div",{className:"",children:(0,t.jsx)(x.EmailInput,{ref:I,placeholder:"Add people",handleSendInvites:H})})})]}),(0,t.jsx)(_,{folderId:l,isOwner:C}),(0,t.jsx)("div",{className:"h-px bg-border"}),(0,t.jsxs)("div",{className:"flex items-center justify-between pt-4 px-5",children:[(0,t.jsxs)(y.Select,{value:O,onValueChange:e=>V(e),disabled:U||z||!C,children:[(0,t.jsx)(y.SelectTrigger,{className:"w-fit hover:bg-muted py-2 px-4 gap-3 border-none bg-transparent text-text-primary h-auto text-sm",children:(0,t.jsx)(y.SelectValue,{className:"text-sm font-medium"})}),(0,t.jsxs)(y.SelectContent,{className:"w-[210px]",children:[(0,t.jsx)(y.SelectItem,{value:"private",className:"gap-2 text-foreground",iconStyle:"text-blue w-6 h-6 stroke-[3px]",prefixIcon:(0,t.jsx)(g.Icon,{as:i.Lock,size:"sm"}),children:"Private"}),(0,t.jsx)(y.SelectItem,{value:"invite",className:"gap-2 text-foreground",iconStyle:"text-blue w-6 h-6 stroke-[3px]",prefixIcon:(0,t.jsx)(g.Icon,{as:a.Users,size:"sm"}),children:"Only people invited"}),!(!D&&C)&&(0,t.jsx)(y.SelectItem,{value:"workspace",className:"gap-2 text-foreground",iconStyle:"text-blue w-6 h-6 stroke-[3px]",prefixIcon:(0,t.jsx)(g.Icon,{as:n.Building,size:"sm"}),children:"Anyone in workspace"})]})]}),(0,t.jsx)(f.Button,{variant:"ghost",size:"sm",onClick:W,className:"flex items-center hover:bg-muted gap-2 px-4 py-2 flex-shrink-0 text-sm font-medium text-text-primary",leadingIcon:(0,t.jsx)(g.Icon,{as:r.Link,className:"h-7 w-7"}),label:T?"Copied":"Copy link"})]})]})})})}},911233:e=>{"use strict";e.s({UploadIcon:()=>t.default});var t=e.i(101362)},894504:e=>{"use strict";e.s({default:()=>b});var t=e.i(290479),n=e.i(608294),r=e.i(911233),i=e.i(34818),a=e.i(397711),o=e.i(373150),s=e.i(525094),l=e.i(885905),u=e.i(872967),c=e.i(382680),d=e.i(950347),h=e.i(985132),p=e.i(732946),f=e.i(980919),m=e.i(724648),g=e.i(592316),y=e.i(231512);let b=e=>{let{children:b}=e,{user:x}=(0,l.useAuth)(),{ingestFile:w}=(0,y.default)(),{ingestCustomVideo:k}=(0,g.default)(),{ingestCustomAudio:S}=(0,m.default)(),{limits:_,usage:C}=(0,d.default)(),{checkImportLimit:A}=(0,c.useImportLimitCheck)(),[E,T]=(0,o.useState)(!1),{isDowntime:M}=(0,u.default)(),I=(0,n.useSetAtom)(h.addUploadingFilesAtom),N=(0,n.useSetAtom)(h.updateUploadingFileAtom),D=(0,o.useRef)(0),P=(0,a.usePathname)();(0,o.useEffect)(()=>{let e=e=>{"Escape"===e.key&&E&&(D.current=0,T(!1))};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[E]),(0,o.useEffect)(()=>{let e=()=>{E&&(D.current=0,T(!1))},t=e=>{e.relatedTarget||(D.current=0,T(!1))};return window.addEventListener("dragend",e),window.addEventListener("dragleave",t),()=>{window.removeEventListener("dragend",e),window.removeEventListener("dragleave",t)}},[E]),(0,o.useEffect)(()=>{if(!E)return;let e=new MutationObserver(()=>{document.querySelector('[data-hovering="true"]')&&T(!1)});return e.observe(document.body,{attributes:!0,attributeFilter:["data-hovering"],subtree:!0}),()=>e.disconnect()},[E]);let R=(0,o.useMemo)(()=>"/new"===P,[P]),O=e=>{let t=e.closest('[id="left-sidebar"]'),n=e.closest("[data-hovering]")||e.closest(".ChatV2InputContainer")||e.closest('[class*="ChatV2Input"]')||e.closest("[data-chat-input]"),r=e.closest(".editor-shell-prosemirror");return!!(n||t||r)},j=async e=>{let t=[],n=[];for(let i=0;i<e.length;i++){var r;let a=e[i],o=null==(r=a.webkitGetAsEntry)?void 0:r.call(a);(null==o?void 0:o.isDirectory)?n.push(F(o,t)):(null==o?void 0:o.isFile)&&n.push(new Promise(e=>{var n;null==(n=o.file)||n.call(o,n=>{(0,p.isValidFile)(n)&&(t.push(n),console.log("Added file:",n.name,n.type)),e()},()=>e())}))}return await Promise.all(n),t},F=async(e,t)=>new Promise(n=>{let r=e.createReader(),i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];r.readEntries(async r=>{if(0===r.length)try{let r=[];for(let n of e)n.isFile?r.push(new Promise(e=>{var r;null==(r=n.file)||r.call(n,n=>{(0,p.isValidFile)(n)&&(t.push(n),console.log("Added file from directory:",n.name,n.type)),e()},()=>e())})):n.isDirectory&&r.push(F(n,t));await Promise.all(r),n()}catch(e){console.error("Error processing directory entries:",e),n()}else e.push(...r),i(e)},e=>{console.error("Error reading directory entries:",e),n()})};i()}),L=async e=>{if(e.preventDefault(),e.stopPropagation(),D.current=0,T(!1),O(e.target))return;if(M)return void s.toast.error("Import unavailable. We'll be back online soon!");if(!x)return;let n=[];if(e.dataTransfer.items&&e.dataTransfer.items.length>0)try{n=await j(e.dataTransfer.items)}catch(t){n=Array.from(e.dataTransfer.files).filter(e=>(0,p.isValidFile)(e))}else n=Array.from(e.dataTransfer.files).filter(e=>(0,p.isValidFile)(e));if(0===n.length)return void console.info("No valid files found");if((null==_?void 0:_.legacyImportLimit)&&C&&A({shouldThrow:!1})){let e=_.legacyImportLimit-C.legacyImportCount;n.length>e&&(n=n.slice(0,e),s.toast.info("We will only process ".concat(e," files because of import limits.")))}let r=I(n.map(e=>({name:e.name})));s.toast.custom(e=>(0,t.jsx)(f.FileUploadToastContent,{toastId:e}),{id:f.UPLOAD_TOAST_ID,duration:1/0,dismissible:!1,position:"bottom-left",className:"!px-0 !py-0 bg-popover border-border-primary !rounded-6"}),Promise.race(n.map(async(e,t)=>{let n=r[t];if(!n)return console.error("Mismatch between input files and state files"),null;try{let t=null;if(t="video/mp4"===e.type?await k([e],!1):e.type.startsWith("audio/")?await S([e],!1):await w(e))return N({id:n.id,status:"IN_PROGRESS",chatbotId:t}),t;return N({id:n.id,status:"FAILED",errorMessage:"File could not be processed."}),null}catch(r){console.error("Error ingesting file:",e.name,r);let t=r instanceof Error?r.message:"Upload failed";return N({id:n.id,status:"FAILED",errorMessage:t}),null}}).map(e=>e.catch(()=>null))).catch(()=>null)};return(0,t.jsxs)("div",{className:"relative w-full h-full ".concat(E?"bg-opacity-50":""),onDragEnter:R?void 0:e=>{e.preventDefault(),e.stopPropagation(),!O(e.target)&&(0,p.hasValidDragItems)(e.dataTransfer)&&(D.current++,1===D.current&&T(!0))},onDragOver:R?void 0:e=>{if(e.preventDefault(),e.stopPropagation(),O(e.target)){E&&T(!1);return}!E&&D.current>0&&(0,p.hasValidDragItems)(e.dataTransfer)&&T(!0),!E&&e.dataTransfer&&e.dataTransfer.types.length>0&&(0,p.hasValidDragItems)(e.dataTransfer)&&(D.current=Math.max(D.current,1),T(!0))},onDragLeave:R?void 0:e=>{e.preventDefault(),e.stopPropagation();let t=e.relatedTarget;null!=t&&t.closest('[id="left-sidebar"]')||(D.current--,0===D.current&&T(!1))},onDragEnd:R?void 0:e=>{e.preventDefault(),e.stopPropagation(),D.current=0,T(!1)},onDrop:R?void 0:L,onMouseLeave:R?void 0:e=>{E&&!e.relatedTarget&&(D.current=0,T(!1))},children:[E&&!R&&(0,t.jsxs)(i.motion.div,{className:"absolute pointer-events-none inset-0 bg-control-primary/80 z-20 flex flex-col justify-center items-center gap-7",initial:"hidden",animate:"visible",exit:"hidden",variants:{hidden:{opacity:0},visible:{opacity:1}},transition:{duration:.1},children:[(0,t.jsx)(r.UploadIcon,{className:"text-text-secondary",size:28}),(0,t.jsxs)("div",{className:"flex flex-col gap-2 items-center",children:[(0,t.jsx)("h2",{className:"text-text-primary text-base font-medium",children:"Upload files"}),(0,t.jsx)("p",{className:"text-text-primary text-sm opacity-80",children:"Drop here"})]})]}),b]})}},719757:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("chevrons-left",[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]])},206989:e=>{"use strict";e.s({ChevronsLeft:()=>t.default});var t=e.i(719757)},550341:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("chrome",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["line",{x1:"21.17",x2:"12",y1:"8",y2:"8",key:"a0cw5f"}],["line",{x1:"3.95",x2:"8.54",y1:"6.06",y2:"14",key:"1kftof"}],["line",{x1:"10.88",x2:"15.46",y1:"21.94",y2:"14",key:"1ymyh8"}]])},28750:e=>{"use strict";e.s({Chrome:()=>t.default});var t=e.i(550341)},389621:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("laptop",[["path",{d:"M18 5a2 2 0 0 1 2 2v8.526a2 2 0 0 0 .212.897l1.068 2.127a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45l1.068-2.127A2 2 0 0 0 4 15.526V7a2 2 0 0 1 2-2z",key:"1pdavp"}],["path",{d:"M20.054 15.987H3.946",key:"14rxg9"}]])},133908:e=>{"use strict";e.s({LaptopIcon:()=>t.default});var t=e.i(389621)},267433:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]])},382814:e=>{"use strict";e.s({LogOut:()=>t.default});var t=e.i(267433)},216936:e=>{"use strict";e.s({MoonIcon:()=>t.default});var t=e.i(919965)},866069:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},476082:e=>{"use strict";e.s({SettingsIcon:()=>t.default});var t=e.i(866069)},866925:e=>{"use strict";e.s({SunIcon:()=>t.default});var t=e.i(402095)},60934:e=>{"use strict";e.s({TriangleAlert:()=>t.default});var t=e.i(656908)},218028:e=>{"use strict";e.s({default:()=>M});var t=e.i(290479),n=e.i(874133),r=e.i(381612),i=e.i(996481),a=e.i(28750),o=e.i(133908),s=e.i(382814),l=e.i(216936),u=e.i(476082),c=e.i(866925),d=e.i(60934),h=e.i(397711),p=e.i(625483),f=e.i(373150),m=e.i(885905),g=e.i(469326),y=e.i(846580),b=e.i(658503),x=e.i(449097),w=e.i(812782),k=e.i(252390),S=e.i(814733),_=e.i(289702),C=e.i(704255),A=e.i(663018),E=e.i(448068),T=e.i(972899);let M=()=>{let[e,M]=f.default.useState(!1),{setIsAccountMenuOpen:I}=(0,w.useSidebarMenuState)(),N=(0,h.usePathname)(),D=(0,h.useSearchParams)(),P=(0,h.useRouter)(),{user:R,userPlanDetails:O}=(0,m.useAuth)(),{signOut:j}=(0,g.default)(),{setReturnPage:F}=(0,x.useSettings)(),[L,z]=f.default.useState(!1),{mutateAsync:B,isPending:U}=S.api.churnkey.portal.useMutation(),H=(0,y.useIsMobile)(),{setShowLeftSidebar:W}=(0,b.useLeftSidebar)(),{setTheme:V,theme:q}=(0,p.useTheme)(),{track:G}=(0,k.default)(),$=(null==R?void 0:R.workspaceName)||(null==R?void 0:R.displayName)||"Library",K=$.length>15?"".concat($.substring(0,15),"..."):$;return(0,t.jsxs)(E.DropdownMenu,{open:e,onOpenChange:e=>{M(e),I(e)},children:[(0,t.jsx)(E.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(C.Button,{isLoading:L,variant:"ghost",className:"text-sm w-fit font-semibold gap-1 h-11",loadingClassName:"flex flex-col items-start",size:"xs",trailingIcon:(0,t.jsx)(T.Icon,{as:r.ChevronDown,size:"sm",strokeWidth:2.5}),children:(0,t.jsx)("span",{className:"truncate",children:K})})}),R&&(0,t.jsxs)(E.DropdownMenuContent,{align:"start",className:"min-w-[200px] p-2",children:[(0,t.jsx)(E.DropdownMenuLabel,{className:"flex flex-col py-2 px-4",children:(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex flex-row w-full gap-4 items-center",children:[(0,t.jsx)("p",{className:"text-sm font-semibold text-text-primary",children:R.displayName&&R.displayName.length>24?"".concat(R.displayName.substring(0,24),"..."):R.displayName}),(0,t.jsx)("div",{className:(0,_.cn)("text-xs font-semibold text-blue bg-blue/10 py-1 px-2 rounded-2",(null==O?void 0:O.status)==="PAST_DUE"&&"text-text-secondary bg-popover-hover"),children:(null==O?void 0:O.status)==="PAST_DUE"?"PAST DUE":null==O?void 0:O.planName})]}),(0,t.jsx)("p",{className:"text-sm font-medium text-text-secondary",children:null==R?void 0:R.email})]})}),(0,t.jsx)(E.DropdownMenuSeparator,{}),(null==O?void 0:O.status)==="PAST_DUE"&&(0,t.jsx)(E.DropdownMenuItem,{onSelect:async e=>{if(U)return;e.preventDefault(),G("update_billing_info_clicked");let t=await B();P.push(t)},asChild:!0,children:(0,t.jsx)(C.Button,{variant:"ghost",size:"medium",className:"flex w-full flex-row justify-start items-center",leadingIcon:U?(0,t.jsx)(A.LoadingSpinner,{variant:"small",className:"flex-shrink-0"}):(0,t.jsx)(T.Icon,{size:"sm",as:d.TriangleAlert}),label:"Update billing info"})}),(0,t.jsx)(E.DropdownMenuItem,{onSelect:()=>{F("".concat(N,"?").concat((null==D?void 0:D.toString())||"")),P.push("/settings/account"),H&&W(!1)},asChild:!0,children:(0,t.jsx)(C.Button,{variant:"ghost",size:"medium",className:"flex w-full flex-row justify-start items-center",leadingIcon:(0,t.jsx)(T.Icon,{size:"sm",as:u.SettingsIcon}),label:"Settings"})}),(0,t.jsxs)(E.DropdownMenuSub,{children:[(0,t.jsx)(E.DropdownMenuSubTrigger,{asChild:!0,children:(0,t.jsx)(C.Button,{variant:"ghost",size:"medium",className:"flex w-full flex-row justify-start items-center",leadingIcon:(0,t.jsx)(T.Icon,{size:"sm",as:c.SunIcon}),label:"Theme",trailingIcon:(0,t.jsx)(T.Icon,{as:i.ChevronRight,size:"md"})})}),(0,t.jsx)(E.DropdownMenuPortal,{children:(0,t.jsxs)(E.DropdownMenuSubContent,{className:"w-36 p-2",children:[(0,t.jsx)(E.DropdownMenuItem,{onSelect:()=>{V("light"),G("theme_changed",{theme:"light"})},asChild:!0,children:(0,t.jsx)(C.Button,{variant:"ghost",size:"medium",className:"flex w-full flex-row justify-start items-center",leadingIcon:(0,t.jsx)(T.Icon,{size:"sm",as:c.SunIcon}),label:"Light",trailingIcon:"light"===q?(0,t.jsx)(T.Icon,{as:n.Check,size:"md",className:"text-blue"}):void 0})}),(0,t.jsx)(E.DropdownMenuItem,{onSelect:()=>{V("dark"),G("theme_changed",{theme:"dark"})},asChild:!0,children:(0,t.jsx)(C.Button,{variant:"ghost",size:"medium",className:"flex w-full flex-row justify-start items-center",leadingIcon:(0,t.jsx)(T.Icon,{size:"sm",as:l.MoonIcon}),label:"Dark",trailingIcon:"dark"===q?(0,t.jsx)(T.Icon,{as:n.Check,size:"md",className:"text-blue"}):void 0})}),(0,t.jsx)(E.DropdownMenuItem,{onSelect:()=>{V("system"),G("theme_changed",{theme:"system"})},asChild:!0,children:(0,t.jsx)(C.Button,{variant:"ghost",size:"medium",className:"flex w-full flex-row justify-start items-center",leadingIcon:(0,t.jsx)(T.Icon,{size:"sm",as:o.LaptopIcon}),label:"System",trailingIcon:"system"===q?(0,t.jsx)(T.Icon,{as:n.Check,size:"md",className:"text-blue"}):void 0})})]})})]}),(0,t.jsx)(E.DropdownMenuItem,{onSelect:()=>{window.open("https://chromewebstore.google.com/detail/unriddle-ai-generated-sum/iinmigjlcpeckfihbbfajpkiilfmakff?authuser=0","_blank")},asChild:!0,children:(0,t.jsx)(C.Button,{variant:"ghost",size:"medium",className:"flex w-full flex-row justify-start items-center",leadingIcon:(0,t.jsx)(T.Icon,{size:"sm",as:a.Chrome}),label:"Chrome extension"})}),(0,t.jsx)(E.DropdownMenuItem,{onSelect:async()=>{M(!1),z(!0),await j().catch(()=>{z(!1)})},asChild:!0,children:(0,t.jsx)(C.Button,{variant:"ghost",size:"medium",className:"flex w-full flex-row justify-start items-center",leadingIcon:(0,t.jsx)(T.Icon,{size:"sm",as:s.LogOut}),label:"Logout"})})]})]})}},208103:e=>{"use strict";e.s({default:()=>y,notificationAtom:()=>d});var t=e.i(290479),n=e.i(628405),r=e.i(289702),i=e.i(448805),a=e.i(608294),o=e.i(227348),s=e.i(88070),l=e.i(34818),u=e.i(906530),c=e.i(972899);let d=(0,o.atomWithStorage)("notificationState".concat(2),!0),h=(0,i.cva)("flex flex-col items-left w-full border bg-popover rounded-5 group",{variants:{variant:{subtle:"",loud:""}},defaultVariants:{variant:"subtle"}}),p=(0,i.cva)("gap-3 items-center relative overflow-hidden pl-6 pr-5 py-4",{variants:{variant:{subtle:"",loud:"before:absolute before:inset-0 before:bg-gradient-to-t before:from-blue/10 before:to-transparent"}},defaultVariants:{variant:"subtle"}}),f=(0,i.cva)("w-full",{variants:{variant:{subtle:"text-sm font-medium leading-5 tracking-[-0.14px]",loud:"text-blue font-semibold"}},defaultVariants:{variant:"subtle"}}),m=(0,i.cva)("flex flex-row justify-center items-center rounded-2 bg-blue/10 mb-auto",{variants:{variant:{subtle:"leading-[16px]",loud:"border border-blue/25 leading-[18px]"}},defaultVariants:{variant:"subtle"}}),g=(0,i.cva)("relative z-10",{variants:{variant:{subtle:"text-sm font-medium leading-5 tracking-[-0.14px] text-text-secondary",loud:"text-blue"}},defaultVariants:{variant:"subtle"}}),y=e=>{let{variant:i,title:o,subtitle:y,showNew:b,showClose:x,underlinedText:w,onClick:k,onClose:S,show:_,isCompact:C=!1}=e,[A,E]=(0,a.useAtom)(d),T=(0,n.default)();if(!(void 0!==_?_:A)||!T)return null;let M=()=>{S?S():E(!1)};return C?(0,t.jsxs)(l.motion.div,{className:(0,r.cn)("flex items-center gap-4 p-4 border bg-popover rounded-5 min-w-0",k&&"hover:cursor-pointer"),onClick:k,children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 min-w-0",children:[(0,t.jsx)("h2",{className:"text-xs font-medium text-text-primary/75 truncate",children:o}),b&&(0,t.jsx)("div",{className:"px-2 bg-blue/10 rounded-2",children:(0,t.jsx)("p",{className:"font-body text-xs font-semibold text-blue tracking-[0.25%]",children:"NEW"})})]}),x&&(0,t.jsx)(c.Icon,{as:s.XIcon,className:"w-7 h-7 p-2 text-text-secondary hover:cursor-pointer hover:bg-popover-hover rounded-4 flex-shrink-0",onClick:e=>{e.stopPropagation(),M()}})]}):(0,t.jsx)(l.motion.div,{className:(0,r.cn)(h({variant:i}),k&&"hover:cursor-pointer"),onClick:k,children:(0,t.jsxs)("div",{className:p({variant:i}),children:[(0,t.jsxs)("div",{className:"flex flex-row justify-between items-center pb-4 relative z-10",children:[(0,t.jsx)("h2",{className:f({variant:i}),style:"subtle"===i?{color:"var(--Feint-Foreground, #9A9A9A)"}:void 0,children:(0,t.jsx)(u.default,{children:o})}),b&&(0,t.jsx)("div",{className:(0,r.cn)(m({variant:i}),x&&"group-hover:hidden"),children:(0,t.jsx)("p",{className:"font-body text-xs  font-semibold text-blue px-2 tracking-[0.25%]",children:"NEW"})}),x&&(0,t.jsx)(s.XIcon,{className:"w-8 h-8 p-1 text-text-secondary group-hover:block hidden hover:cursor-pointer hover:bg-popover-hover rounded-2 -mr-2 mb-auto",onClick:e=>{e.stopPropagation(),M()}})]}),(0,t.jsx)("p",{className:g({variant:i}),style:"subtle"===i?{color:"var(--Muted-Foreground, #666)"}:void 0,children:(0,t.jsxs)(u.default,{children:[y," ",w&&(0,t.jsx)("span",{className:"underline",children:w})]})})]})})}},807263:e=>{"use strict";e.s({default:()=>u});var t=e.i(290479),n=e.i(885905),r=e.i(252390),i=e.i(814733),a=e.i(608294),o=e.i(227348),s=e.i(373150),l=e.i(208103);let u=e=>{let{isCompact:u=!1}=e,{track:c}=(0,r.default)(),{user:d}=(0,n.useAuth)(),[h,p]=(0,s.useState)(!0),f=(0,s.useMemo)(()=>(0,o.atomWithStorage)((e=>e?"dismissed-changelog-ids-".concat(e):"dismissed-changelog-ids")(null==d?void 0:d.id),[]),[null==d?void 0:d.id]),[m,g]=(0,a.useAtom)(f),{data:y=[],isLoading:b,isFetching:x}=i.api.changelog.announced.useQuery(),w=(0,s.useMemo)(()=>(null==y?void 0:y.length)?y.find(e=>!m.includes(e._id)):null,[y,m]),k=(0,s.useMemo)(()=>!w||m.includes(w._id),[w,m]),S=(0,s.useMemo)(()=>{if(!w||!d)return!1;let e="changelog-seen-".concat(d.id,"-").concat(w._id);return"true"===localStorage.getItem(e)},[w,d]);(0,s.useEffect)(()=>{if(w&&d&&!k&&!S){let e=setTimeout(()=>{let e="changelog-seen-".concat(d.id,"-").concat(w._id);localStorage.setItem(e,"true")},3e3);return()=>clearTimeout(e)}},[w,d,k,S]);let _=k||S||!h;if(b||x||!w||!d||_)return null;let C=w.title&&w.title.length>50?"".concat(w.title.slice(0,50),"..."):w.title||"No title";return(0,t.jsx)(l.default,{variant:"subtle",title:"What's new",subtitle:C,showClose:!0,show:!0,onClick:()=>{if((null==w?void 0:w.slug)&&d){g(e=>Array.from(new Set([...e||[],w._id])));let e="changelog-seen-".concat(d.id,"-").concat(w._id);localStorage.setItem(e,"true");let t="/changelog/".concat(w.slug);window.open(t,"_blank"),c("changelog_notification_clicked",{changelogId:w._id,changelogTitle:w.title,changelogSlug:w.slug})}},onClose:()=>{if(w&&d){g(e=>Array.from(new Set([...e||[],w._id])));let e="changelog-seen-".concat(d.id,"-").concat(w._id);localStorage.setItem(e,"true"),c("changelog_notification_dismissed",{changelogId:w._id,changelogTitle:w.title})}},isCompact:u})}},511792:e=>{"use strict";e.s({default:()=>n});var t=e.i(290479);let n=e=>{let{label:n,color:r,size:i}=e;return"green"===r?(0,t.jsx)("div",{className:"flex flex-row justify-center items-center bg-greenLight gap-2 px-2 py-2 rounded-2",children:(0,t.jsx)("p",{className:"font-body leading-none text-xs font-semibold text-green",children:n})}):"orange"===r?(0,t.jsx)("div",{className:"flex flex-row justify-center items-center bg-orangeLight gap-2 px-2 py-1 rounded-2",children:(0,t.jsx)("p",{className:"font-body leading-none text-xs font-semibold text-orange",children:n})}):"blue"===r?(0,t.jsx)("div",{className:"flex flex-row justify-center items-center bg-blue/10 gap-2 px-2 py-1 rounded-2",children:(0,t.jsx)("p",{className:"font-body leading-none text-xs font-medium text-blue",children:n})}):"gray"===r?(0,t.jsx)("div",{className:"flex flex-row justify-center items-center bg-gray gap-2 px-2 py-1 rounded-2",children:(0,t.jsx)("p",{className:"font-body leading-none text-xs font-semibold text-text-secondary",children:n})}):"lg"===i?(0,t.jsx)("div",{className:"flex flex-row justify-center items-center  gap-2 px-4 h-11 rounded-4 my-auto",children:(0,t.jsx)("p",{className:"font-body leading-none text-sm font-medium text-[#ababab]",children:n})}):void 0}},3548:e=>{"use strict";e.s({default:()=>s});var t=e.i(290479),n=e.i(289702),r=e.i(523596),i=e.i(34818),a=e.i(704255),o=e.i(476440);let s=e=>{let{count:s,maxCount:l,label:u,tooltipLabel:c}=e,d=s>0?s/l*100:0;return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"w-full flex flex-row justify-between items-center mb-2",children:[(0,t.jsxs)("label",{className:" text-text-primary flex flex-row items-center leading-[20px]",htmlFor:"monthlyCredits",children:[(0,t.jsx)("p",{className:"text-xs leading-[20px] tracking-[1%] font-medium text-text-primary font-interDisplay",children:u}),(0,t.jsx)(o.ReusableTooltip,{position:"top",content:c,asChild:!0,children:(0,t.jsx)(a.Button,{size:"xs",variant:"ghost",className:"hover:bg-transparent h-6 pl-3",tabIndex:-1,children:(0,t.jsx)(r.CircleHelp,{className:"text-text-secondary",size:12})})})]}),(0,t.jsxs)("div",{className:"text-2xs leading-4 tracking-[1%] text-text-secondary font-medium font-mono",children:[(0,t.jsx)("span",{children:s&&s>l?l:s||0}),(0,t.jsxs)("span",{className:"text-text-primary/50",children:["/",l]})]})]}),(0,t.jsxs)("div",{className:(0,n.cn)("flex flex-row overflow-hidden h-2 cursor-default justify-between",d<100&&d>0&&"gap-2"),children:[(0,t.jsx)(i.motion.div,{className:(0,n.cn)("h-full rounded-[1px]",{"bg-progressBar-foregroundGreen":d<75,"bg-progressBar-foregroundOrange":d>=75,"bg-progressBar-foregroundRed":d>=100}),initial:{width:0},animate:{width:"".concat(d,"%")},transition:{duration:.4,ease:"easeOut",delay:.2}}),(0,t.jsx)(i.motion.div,{className:(0,n.cn)("h-full rounded-[1px]",{"bg-progressBar-backgroundGreen":d<75,"bg-progressBar-backgroundOrange":d>=75,"bg-progressBar-foregroundRed":d>=100}),initial:{width:"100%"},animate:{width:"".concat(100-d,"%")},transition:{duration:.4,ease:"easeOut",delay:.2}})]})]})}},928187:e=>{"use strict";e.s({default:()=>m});var t=e.i(290479),n=e.i(688862),r=e.i(330462),i=e.i(34818),a=e.i(373150),o=e.i(885905),s=e.i(950347);e.i(610273);var l=e.i(116867),u=e.i(289702),c=e.i(704255),d=e.i(450807),h=e.i(511792),p=e.i(303652),f=e.i(3548);let m=e=>{var m,g,y,b;let{isCompact:x}=e,{userPlanDetails:w}=(0,o.useAuth)(),{showUpgrade:k}=(0,d.useUpgrade)(),[S,_]=(0,a.useState)(!1),[C,A]=a.default.useState(!0),{limits:E,usage:T}=(0,s.default)();return E&&T?x?(0,t.jsxs)(p.Popover,{open:S,onOpenChange:_,children:[(0,t.jsx)(p.PopoverTrigger,{asChild:!0,children:(0,t.jsxs)(i.motion.div,{className:"flex items-center gap-4 p-4 border bg-popover rounded-5 min-w-0 justify-between cursor-pointer",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 min-w-0",children:[(0,t.jsx)("h2",{className:"text-xs font-medium text-text-text-primary/75 truncate",children:"Check plan usage"}),(0,t.jsx)(h.default,{label:(null==w?void 0:w.planName)||"",color:"blue",size:"sm"})]}),(0,t.jsx)(c.Button,{variant:"default",className:"tracking-normal font-medium select-none leading-4 rounded-4 flex-shrink-0",size:"xs",label:"Upgrade",onClick:e=>{e.stopPropagation(),k("generic")}})]})}),(0,t.jsx)(p.PopoverContent,{align:"start",className:"w-80",children:(0,t.jsxs)("div",{className:"flex flex-col items-left w-full gap-4 p-2",children:[(0,t.jsxs)("div",{className:"flex flex-row gap-3 items-center",children:[(0,t.jsx)("h2",{className:"text-xs leading-5 tracking-[1%] font-semibold text-text-text-primary font-interDisplay",children:"Plan usage"}),(0,t.jsx)(h.default,{label:(null==w?void 0:w.planName)||"",color:"blue",size:"lg"})]}),E.wordLimit&&(0,t.jsx)(f.default,{maxCount:null!=(m=E.wordLimit)?m:0,count:T.wordCount,label:"AI words/day",tooltipLabel:"Any word generated by an AI feature",tooltipId:"wordsTooltip"}),E.legacyImportLimit&&(0,t.jsx)(f.default,{maxCount:null!=(g=E.legacyImportLimit)?g:0,count:T.legacyImportCount,label:"Imports/day",tooltipLabel:"An import is any time you import a website or document",tooltipId:"importsTooltip"})]})})]}):(0,t.jsxs)(i.motion.div,{className:"bg-popover rounded-4 p-6 border border-border-primary shadow-shadowLow space-y-6",children:[(0,t.jsxs)("div",{className:(0,u.cn)("flex items-center justify-between cursor-pointer",l.interDisplayFont.variable),onClick:()=>A(!C),children:[(0,t.jsxs)("div",{className:"flex flex-row gap-4 items-center",children:[(0,t.jsx)("h2",{className:"text-xs leading-5 tracking-[1%] font-semibold text-text-text-primary font-interDisplay",children:"Plan usage"}),(0,t.jsx)(h.default,{label:(null==w?void 0:w.planName)||"",color:"blue",size:"lg"})]}),(0,t.jsx)(i.motion.div,{animate:{rotate:180*!!C},transition:{duration:.2,ease:"easeInOut"},children:(0,t.jsx)(n.ChevronUp,{className:"w-7 h-7 text-text-secondary"})})]}),(0,t.jsx)(r.AnimatePresence,{initial:!1,children:C&&(0,t.jsxs)(i.motion.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3,ease:"easeInOut"},style:{overflow:"hidden"},className:"space-y-5",children:[E.wordLimit&&(0,t.jsx)(f.default,{maxCount:null!=(y=E.wordLimit)?y:0,count:T.wordCount,label:"AI words/day",tooltipLabel:"Any word generated by an AI feature",tooltipId:"wordsTooltip"}),E.legacyImportLimit&&(0,t.jsx)(f.default,{maxCount:null!=(b=E.legacyImportLimit)?b:0,count:T.legacyImportCount,label:"Imports/day",tooltipLabel:"An import is any time you import a website or document",tooltipId:"importsTooltip"})]})}),(0,t.jsx)(c.Button,{variant:"default",className:"w-full tracking-normal font-medium leading-5 rounded-4 bg-text-primary text-text-inverse hover:bg-text-primary/90",size:"smaller",label:"Get unlimited",onClick:()=>k("generic")})]}):null}},591510:e=>{"use strict";e.s({useUpdateGroupCollapsed:()=>r});var t=e.i(814733),n=e.i(852951);let r=()=>{let{updateChatbot:e}=(0,n.useWorkspaceActions)(),{mutate:r}=t.api.sidebar.updateGroupCollapsed.useMutation({onMutate:async t=>{let{id:n,collapsed:r}=t;return e(n,{groupCollapsed:r}),{prevData:{id:n,collapsed:r}}},onError:(t,n,r)=>{(null==r?void 0:r.prevData)&&e(r.prevData.id,{groupCollapsed:!r.prevData.collapsed}),console.error("Error updating group collapsed state:",t)}});return{groupCollapsedMutate:r}}},358459:e=>{"use strict";e.s({buildTree:()=>i,findTopLevelParent:()=>s,flattenTree:()=>r,getChildCount:()=>a,getProjection:()=>n,removeChildrenOf:()=>o,setProperty:()=>function e(t,n,r,i){for(let a of t){if(a.id===n){a[r]=i(a[r]);continue}a.children.length&&(a.children=e(a.children,n,r,i))}return[...t]}});var t=e.i(913756);function n(e,n,r,a,o){let l=e.findIndex(e=>{let{id:t}=e;return t===r}),u=e.findIndex(e=>{let{id:t}=e;return t===n}),c=e[u],d=(0,t.arrayMove)(e,u,l),h=d[l-1],p=d[l+1],f=Math.round(a/o),m=c.depth+f,g=function(e){let{previousItem:t}=e;return t?t.depth+1:0}({previousItem:h}),y=function(e){let{nextItem:t}=e;return t?t.depth:0}({nextItem:p}),b=m;m>=g?b=g:m<y&&(b=y);let x=function(){var e;if(0===b||!h)return null;if(b===h.depth)return h.parentId;if(b>h.depth)return h.id;let t=null==(e=d.slice(0,l).reverse().find(e=>e.depth===b))?void 0:e.parentId;return null!=t?t:null}(),w=function(){if(0===b||!x)return c.teamId;let e=s(i(d),x);return null==e?void 0:e.teamId}();return{depth:b,maxDepth:g,minDepth:y,parentId:x,projectedTeamId:w}}function r(e){return function e(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return t.reduce((t,i,a)=>[...t,{...i,parentId:n,depth:r,index:a},...e(i.children,i.id,r+1)],[])}(e)}function i(e){let t={id:"root",children:[]},n={[t.id]:t},r=e.map(e=>({...e,children:[]}));for(let e of r){var i,a;let{id:o,children:s}=e,l=null!=(i=e.parentId)?i:t.id,u=null!=(a=n[l])?a:function(e,t){return e.find(e=>{let{id:n}=e;return n===t})}(r,l);n[o]={id:o,children:s,name:e.name,type:e.type,collapsed:e.collapsed,parentId:e.parentId,teamId:e.teamId,chatbot:e.chatbot},u.children.push(e)}return t.children}function a(e,t){let n=function e(t,n){for(let r of t){let{id:t,children:i}=r;if(t===n)return r;if(i.length){let t=e(i,n);if(t)return t}}}(e,t);return n?function e(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.reduce((t,n)=>{let{children:r}=n;return r.length?e(r,t+1):t+1},n)}(n.children):0}function o(e,t){let n=[...t];return e.filter(e=>!(e.parentId&&n.includes(e.parentId))||(e.children.length&&n.push(e.id),!1))}function s(e,t){let n=(e,t)=>{for(let r of e){if(r.id===t)return r;let e=n(r.children,t);if(e)return e}},r=n(e,t);if(r)return r.parentId?s(e,r.parentId):r}},394838:e=>{"use strict";e.s({SortableTree:()=>b});var t=e.i(290479),n=e.i(691208),r=e.i(493240),i=e.i(913756),a=e.i(373150),o=e.i(784445),s=e.i(704255),l=e.i(52333),u=e.i(998145),c=e.i(972899),d=e.i(591510),h=e.i(230613),p=e.i(27409),f=e.i(358459);let m={droppable:{strategy:n.MeasuringStrategy.Always}},g={keyframes(e){let{transform:t}=e;return[{opacity:1,transform:h.CSS.Transform.toString(t.initial)},{opacity:0,transform:h.CSS.Transform.toString({...t.final,x:t.final.x+5,y:t.final.y+5})}]},easing:"ease-out",sideEffects(e){let{active:t}=e;t.node.animate([{opacity:0},{opacity:1}],{duration:n.defaultDropAnimation.duration,easing:n.defaultDropAnimation.easing})}},y=e=>{let{item:n}=e;return(0,t.jsx)("div",{className:"bg-background-primary border border-border-primary rounded-4 shadow-shadowHigh p-2 opacity-90",children:(0,t.jsxs)(s.Button,{size:"xs",variant:"sidebar",className:"pointer-events-none",children:[(0,t.jsx)(c.Icon,{as:(0,u.default)({type:n.type,collapsed:!1})}),(0,t.jsx)("span",{className:"text-ellipsis text-text-primary whitespace-nowrap overflow-hidden",children:""===n.name?"Untitled":n.name})]})})};function b(e){let{value:s,onValueChange:u,indentationWidth:c=16}=e,[h,b]=(0,a.useState)(s);(0,a.useEffect)(()=>{b(s)},[s]);let[x,w]=(0,a.useState)(null),[k,S]=(0,a.useState)(null),[_,C]=(0,a.useState)(0),[A,E]=(0,a.useState)(null),T=(0,a.useMemo)(()=>{let e=(0,f.flattenTree)(h),t=e.reduce((e,t)=>{let{children:n,collapsed:r,id:i}=t;return r&&n.length?[...e,i]:e},[]),n=x?[x,...t]:t;return(0,f.removeChildrenOf)(e,n)},[x,h]),M=x&&k?(0,f.getProjection)(T,x,k,_,c):null,{groupCollapsedMutate:I}=(0,d.useUpdateGroupCollapsed)(),N=(0,l.useConfirmationStore)(e=>e.openConfirmation),D=(0,n.useSensors)((0,n.useSensor)(n.MouseSensor,{activationConstraint:{distance:4}}),(0,n.useSensor)(n.TouchSensor,{activationConstraint:{delay:250,tolerance:5}})),P=(0,a.useMemo)(()=>T.map(e=>{let{id:t}=e;return t}),[T]),R=x?T.find(e=>{let{id:t}=e;return t===x}):null;return(0,t.jsxs)(n.DndContext,{accessibility:{announcements:{onDragStart(e){let{active:t}=e;return"Picked up ".concat(t.id,".")},onDragMove(e){let{active:t,over:n}=e;return j("onDragMove",t.id,null==n?void 0:n.id)},onDragOver(e){let{active:t,over:n}=e;return j("onDragOver",t.id,null==n?void 0:n.id)},onDragEnd(e){let{active:t,over:n}=e;return j("onDragEnd",t.id,null==n?void 0:n.id)},onDragCancel(e){let{active:t}=e;return"Moving was cancelled. ".concat(t.id," was dropped in its original position.")}}},sensors:D,collisionDetection:n.closestCenter,measuring:m,onDragStart:function(e){let{active:{id:t}}=e;w(t),S(t);let n=T.find(e=>{let{id:n}=e;return n===t});n&&E({parentId:n.parentId,overId:t}),document.body.style.setProperty("cursor","grabbing")},onDragMove:function(e){let{delta:t}=e;C(t.x)},onDragOver:function(e){var t;let{over:n}=e;S(null!=(t=null==n?void 0:n.id)?t:null)},onDragEnd:function(e){let{active:t,over:n}=e;if(O(),M&&n){let{depth:e,parentId:r,projectedTeamId:a}=M,o=JSON.parse(JSON.stringify((0,f.flattenTree)(h)));if(function(e,t,n){if(null===n)return!1;if(t===n)return!0;let r=n,i=new Set;for(;r;){var a;if(i.has(r)||r===t)return!0;i.add(r);let n=e.find(e=>e.id===r);r=null!=(a=null==n?void 0:n.parentId)?a:null}return!1}(o,t.id,r))return;let s=o.findIndex(e=>{let{id:t}=e;return t===n.id}),l=o.findIndex(e=>{let{id:n}=e;return n===t.id}),c=o[l],d=null==c?void 0:c.teamId,p=d&&!a,m=!d&&a,g=()=>{c&&(o[l]={...c,depth:e,parentId:r,teamId:a});let t=(0,i.arrayMove)(o,l,s),n=(0,f.buildTree)(t);u(n),b(n)};p?N({title:"Make this folder private?",description:"Only you will be able to access and edit the contents of this folder and all nested subfolders.",actionLabel:"Confirm",onAction:g,cancelLabel:"Cancel",onCancel:()=>{}}):m?N({title:"Share folder with team?",description:"Anyone in your team will be able to access and edit the contents of this folder and all nested subfolders.",actionLabel:"Confirm",onAction:g,cancelLabel:"Cancel",onCancel:()=>{}}):g()}},onDragCancel:function(){O()},children:[(0,t.jsx)(i.SortableContext,{items:P,strategy:i.verticalListSortingStrategy,children:(0,t.jsx)("div",{className:"select-none space-y-1",children:T.map(e=>(0,t.jsx)(p.SortableTreeItem,{tree:e,childCount:(0,f.getChildCount)(h,e.id),projectedParentId:null==M?void 0:M.parentId,depth:e.id===x&&M?M.depth:e.depth,indentationWidth:c,collapsed:!!e.collapsed,onCollapse:()=>{var t;return t=e.id,void b(e=>(0,f.setProperty)(e,t,"collapsed",e=>{let n=!e;return I({id:t,collapsed:n}),n}))}},e.id))})}),(0,o.createPortal)((0,t.jsx)(n.DragOverlay,{dropAnimation:g,modifiers:[r.snapCenterToCursor],children:x&&R&&"WORKSPACE"!==R.type?(0,t.jsx)(y,{item:R}):null}),document.body)]});function O(){S(null),w(null),C(0),E(null),document.body.style.setProperty("cursor","")}function j(e,t,n){if(n&&M){if("onDragEnd"!==e){if(A&&M.parentId===A.parentId&&n===A.overId)return;E({parentId:M.parentId,overId:n})}let r=JSON.parse(JSON.stringify((0,f.flattenTree)(h))),a=r.findIndex(e=>{let{id:t}=e;return t===n}),o=r.findIndex(e=>{let{id:n}=e;return n===t}),s=(0,i.arrayMove)(r,o,a),l=s[a-1],u="",c="onDragEnd"===e?"dropped":"moved";if(l)if(M.depth>l.depth)u="".concat(t," was ").concat("onDragEnd"===e?"dropped":"nested"," under ").concat(l.id,".");else{let e=l;for(;e&&M.depth<e.depth;){let t=e.parentId;e=s.find(e=>{let{id:n}=e;return n===t})}e&&(u="".concat(t," was ").concat(c," after ").concat(e.id,"."))}else{let e=s[a+1];u="".concat(t," was ").concat(c," before ").concat(null==e?void 0:e.id,".")}return u}}}},277856:e=>{"use strict";e.s({SidebarEmptyPlaceholder:()=>o});var t=e.i(290479),n=e.i(224879),r=e.i(906530),i=e.i(131303),a=e.i(704255);let o=()=>{let{createEmptyFolder:e}=(0,i.useCreateEmptyFolder)();return(0,t.jsxs)("div",{className:"w-full rounded-6 gap-6 bg-secondary flex items-center justify-between py-8 flex-col",children:[(0,t.jsx)("p",{className:"text-text-secondary font-semibold text-center w-full text-sm",children:(0,t.jsx)(r.default,{children:"Use folders to organize and chat with groups of files"})}),(0,t.jsx)(a.Button,{size:"xs",className:"h-11",label:"New folder",onClick:()=>e({id:(0,n.default)()})})]})}},422476:e=>{"use strict";e.s({Info:()=>t.default});var t=e.i(732645)},932402:e=>{"use strict";e.s({useTourTarget:()=>r});var t=e.i(185296),n=e.i(955288);let r=e=>{let{activeTour:r,currentStep:i,nextStep:a,completeTour:o}=(0,t.useTour)(),s=r?n.tourConfig[r]:null,l=!!s&&i===s.steps.length-1;return{onClick:()=>{if(!r||!s)return;let t=s.steps[i];(null==t?void 0:t.target)==="#".concat(e)&&(l?o():a())}}}},718733:e=>{"use strict";e.s({FolderSelector:()=>y});var t=e.i(290479),n=e.i(224879),r=e.i(490282),i=e.i(422476),a=e.i(84324),o=e.i(156997),s=e.i(373150),l=e.i(131303),u=e.i(852951),c=e.i(289702),d=e.i(704255),h=e.i(450807),p=e.i(932402),f=e.i(448068),m=e.i(972899),g=e.i(476440);let y=()=>{let{createEmptyFolder:e}=(0,l.useCreateEmptyFolder)(),y=(0,u.useTeamId)(),{onClick:b}=(0,p.useTourTarget)("create-button"),{showUpgrade:x}=(0,h.useUpgrade)(),[w,k]=(0,s.useState)(!1);return(0,t.jsxs)(f.DropdownMenu,{open:w,onOpenChange:e=>{k(e),e&&b()},children:[(0,t.jsx)(g.ReusableTooltip,{content:"Create a new folder",asChild:!0,children:(0,t.jsx)(f.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(d.Button,{id:"create-button",size:"icon",variant:"ghost",className:(0,c.cn)("group-hover/sidebar-chatbots:visible group-hover/chats:visible group-focus-within/chat-header:visible group-focus-within/chats:visible group-hover/folder-header:visible group-focus-within/folder-header:visible size-9 hover:bg-secondary focus:outline-none invisible absolute right-1 top-1/2 -translate-y-1/2",w&&"visible"),leadingIcon:(0,t.jsx)(m.Icon,{as:a.Plus,size:"md"}),"aria-label":"Create a new folder",onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&e.stopPropagation()}})})}),(0,t.jsxs)(f.DropdownMenuContent,{align:"start",className:"w-52 p-2",onCloseAutoFocus:e=>e.preventDefault(),children:[(0,t.jsx)(f.DropdownMenuItem,{asChild:!0,children:(0,t.jsx)(d.Button,{variant:"ghost",size:"medium",className:"w-full justify-start",onClick:t=>{t.preventDefault(),t.stopPropagation(),e({id:(0,n.default)()}),k(!1)},leadingIcon:(0,t.jsx)(m.Icon,{size:"sm",as:r.FolderOpen}),trailingIcon:(0,t.jsx)(g.ReusableTooltip,{content:"Visible to you",position:"right",asChild:!0,children:(0,t.jsx)(m.Icon,{size:"sm",as:i.Info,className:"text-text-secondary hover:text-text-primary"})}),label:"New private folder"})}),(0,t.jsx)(f.DropdownMenuItem,{asChild:!0,children:(0,t.jsx)(d.Button,{variant:"ghost",size:"medium",className:"w-full justify-start",onClick:t=>{if(t.preventDefault(),t.stopPropagation(),!y){x("teamsFeature"),k(!1);return}e({id:(0,n.default)(),teamId:y}),k(!1)},leadingIcon:(0,t.jsx)(m.Icon,{size:"sm",as:o.Users}),trailingIcon:(0,t.jsx)(g.ReusableTooltip,{content:"Visible to everyone in your team",position:"right",asChild:!0,children:(0,t.jsx)(m.Icon,{size:"sm",className:"text-text-secondary hover:text-text-primary",as:i.Info})}),label:"New team folder"})})]})]})}},654374:e=>{"use strict";e.s({SidebarLibraries:()=>s});var t=e.i(290479),n=e.i(996481),r=e.i(289702),i=e.i(704255),a=e.i(972899),o=e.i(718733);let s=e=>{let{onToggleCollapse:s,isCollapsed:l=!1}=e,u=e=>{e&&(e.preventDefault(),e.stopPropagation()),null==s||s(!l)};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.Button,{as:"div",size:"xs",variant:"sidebar",className:(0,r.cn)("duration-0 group/folder-header h-9.5 text-text-secondary font-semibold text-[13px]"),onClick:u,onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&u(e)},tabIndex:0,role:"button","aria-expanded":!l,"aria-controls":"folders-content",leadingIcon:(0,t.jsx)(a.Icon,{as:n.ChevronRight,size:"sm",className:(0,r.cn)("text-text-secondary flex-shrink-0 transition-transform duration-200 ease-out",{"rotate-90":!l})}),label:"Folders",trailingIcon:(0,t.jsx)(o.FolderSelector,{}),trailingIconClassName:"ml-auto"}),(0,t.jsx)("div",{className:"absolute right-0 top-12 w-4 h-4",id:"open-folder"})]})}},522434:e=>{"use strict";e.s({default:()=>a});var t=e.i(358459),n=e.i(814733),r=e.i(373150),i=e.i(966882);let a=()=>{let e=n.api.useUtils(),{mutate:a}=n.api.chatbot.sort.useMutation({onError:e=>{console.error("Error sorting sidebar:",e)}}),o=(0,r.useCallback)(n=>{var r;let i=null==(r=e.workspace.all.getData())?void 0:r.entities;if(!i)return;let o=((e,n)=>{let r=n.filter(e=>"WORKSPACE"!==e.type),i=n=>{let r=[];for(let s of n){var a,o;r.push({...s,teamId:null!=(o=null==(a=(0,t.findTopLevelParent)(e,s.id))?void 0:a.teamId)?o:null}),s.children&&s.children.length>0&&r.push(...i(s.children))}return r};return i(e).filter(e=>"WORKSPACE"!==e.type).map((e,t)=>{var n,r,i;return{id:String(e.id),displayOrder:t,groupId:null!=(n=e.parentId)?n:null,teamId:null!=(r=e.teamId)?r:null,groupCollapsed:null!=(i=e.collapsed)&&i}}).filter(e=>{let t=r.find(t=>t.id===e.id);return!t||e.displayOrder!==t.displayOrder||e.teamId!==t.teamId||e.groupId!==t.groupId})})(n,i);0!==o.length&&(e.workspace.all.setData(void 0,e=>{if(!e)return e;let t=e.entities.map(e=>{let t=o.find(t=>t.id===e.id);return t?{...e,...t}:e});return{...e,entities:t}}),a(o))},[e.workspace.all,a]),s=(0,i.useDebouncedCallback)(o,500);return(0,r.useMemo)(()=>({debouncedUpdateSort:s}),[s])}},740316:e=>{"use strict";e.s({default:()=>h});var t=e.i(290479),n=e.i(330462),r=e.i(34818),i=e.i(373150),a=e.i(605238),o=e.i(394838),s=e.i(277856),l=e.i(654374),u=e.i(757180),c=e.i(522434);let d=(0,i.memo)(()=>{let{sidebarOptions:e}=(0,u.default)("sidebar"),{isChatbotsCollapsed:d,setIsChatbotsCollapsed:h}=(0,a.useSidebarCollapse)(),{debouncedUpdateSort:p}=(0,c.default)(),f=(0,i.useMemo)(()=>(null==e?void 0:e.tree)||[],[null==e?void 0:e.tree]);return e?(0,t.jsxs)("div",{className:"flex flex-col min-h-0 gap-1 group/sidebar-chatbots",children:[(0,t.jsx)(l.SidebarLibraries,{onToggleCollapse:h,isCollapsed:d}),(0,t.jsx)(n.AnimatePresence,{children:!d&&(0,t.jsxs)(r.motion.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1,transition:{type:"spring",stiffness:600,damping:35,mass:.6,when:"beforeChildren",staggerChildren:.008}},exit:{height:0,opacity:0,transition:{type:"spring",stiffness:700,damping:40,mass:.5}},className:"overflow-hidden flex flex-col",children:[e.empty&&(0,t.jsx)(r.motion.div,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},children:(0,t.jsx)(s.SidebarEmptyPlaceholder,{})}),(0,t.jsx)(r.motion.div,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},className:"",children:(0,t.jsx)(o.SortableTree,{value:f,onValueChange:p})})]})})]}):null});d.displayName="SidebarChatbots";let h=d},25931:e=>{"use strict";e.s({useCallbackRef:()=>n});var t=e.i(373150);function n(e){let n=t.useRef(e);return t.useEffect(()=>{n.current=e}),t.useMemo(()=>function(){for(var e,t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];return null==(e=n.current)?void 0:e.call(n,...r)},[])}},574650:e=>{"use strict";e.s({useDebouncedCallback:()=>r});var t=e.i(373150),n=e.i(25931);function r(e,r){let i=(0,n.useCallbackRef)(e),a=t.useRef(0);return t.useEffect(()=>()=>window.clearTimeout(a.current),[]),t.useCallback(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];window.clearTimeout(a.current),a.current=window.setTimeout(()=>i(...t),r)},[i,r])}},549971:e=>{"use strict";e.s({useChatsSidebar:()=>r});var t=e.i(608294);let n=(0,e.i(647968).atom)(!1);function r(){let[e,r]=(0,t.useAtom)(n);return{showChatsSidebar:e,setShowChatsSidebar:r}}},60145:e=>{"use strict";e.s({usePendingMessageStore:()=>t});let t=(0,e.i(496438).create)((e,t)=>({messages:new Map,set:(n,r)=>{let i="".concat(n,"-").concat(Date.now()),a={...r,id:i,timestamp:Date.now()};return e(e=>{let t=new Map(e.messages);return t.set(n,a),{messages:t}}),setTimeout(()=>{t().delete(n)},6e4),i},get:e=>t().messages.get(e),delete:n=>{let r=t().messages.has(n);return r&&e(e=>{let t=new Map(e.messages);return t.delete(n),{messages:t}}),r},consume:e=>{let n=t().get(e);return n&&t().delete(e),n},clear:()=>{e({messages:new Map})}}))},476741:e=>{"use strict";e.s({default:()=>y});var t=e.i(290479),n=e.i(953093),r=e.i(715535),i=e.i(943899),a=e.i(397711),o=e.i(373150),s=e.i(847934),l=e.i(812782),u=e.i(147271),c=e.i(289702),d=e.i(704255),h=e.i(341664),p=e.i(52333),f=e.i(448068),m=e.i(972899),g=e.i(1246);let y=e=>{var y;let{chat:b,isActive:x,onDropdownOpenChange:w}=e,[k,S]=(0,o.useState)(!1),[_,C]=(0,o.useState)(!1),{setIsChatDropdownOpen:A}=(0,l.useSidebarMenuState)(),E=(0,a.useRouter)(),{chatId:T}=(0,h.useChatId)(),{mutateDelete:M}=(0,s.default)({onMutate:()=>{C(!1)}}),{updateName:I,isRenaming:N}=(0,u.useUpdateName)(),D=(0,p.useConfirmationStore)(e=>e.openConfirmation);return(0,t.jsxs)(f.DropdownMenu,{modal:!0,open:_,onOpenChange:e=>{C(e),A(e),null==w||w(e),setTimeout(()=>{S(!1)},100)},children:[(0,t.jsx)(f.DropdownMenuTrigger,{disabled:N,asChild:!0,children:(0,t.jsx)(d.Button,{isLoading:N,size:"icon",variant:"ghost",className:(0,c.cn)("absolute top-1/2 right-1 -translate-y-1/2 z-20 hover:bg-secondary duration-0 animate-none size-9 focus:outline-none",!N&&"invisible group-hover:visible data-[state=open]:visible",x&&"visible"),leadingIcon:(0,t.jsx)(m.Icon,{as:n.EllipsisVertical,size:"md"}),"aria-label":"Chat options",onClick:e=>{e.preventDefault(),e.stopPropagation()}})}),(0,t.jsxs)(f.DropdownMenuContent,{id:"sidebar-chat-dropdown",className:"min-w-[200px] p-2",align:"end",children:[k&&(0,t.jsx)(g.default,{defaultValues:{name:null!=(y=b.name)?y:""},updateName:e=>{I({id:b.id,name:e,type:"CHAT"})},onSubmit:()=>{C(!1)}}),!k&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(f.DropdownMenuItem,{asChild:!0,children:(0,t.jsx)(d.Button,{variant:"ghost",size:"medium",className:"w-full justify-start",onClick:e=>{e.preventDefault(),e.stopPropagation(),S(!0)},leadingIcon:(0,t.jsx)(m.Icon,{size:"sm",as:r.SquarePen}),label:"Rename"})}),(0,t.jsx)(f.DropdownMenuItem,{asChild:!0,children:(0,t.jsx)(d.Button,{variant:"ghost",size:"medium",className:"w-full justify-start text-red-600 hover:text-red-600 hover:bg-red/10",onClick:e=>{e.preventDefault(),e.stopPropagation(),C(!1),D({title:"Delete chat?",description:"This chat and all its messages will be permanently deleted.",actionLabel:"Delete chat",actionButtonVariant:"destructive",onAction:()=>{M([{id:b.id}]),T===b.id&&E.push("/new")},cancelLabel:"Cancel",onCancel:()=>{}})},leadingIcon:(0,t.jsx)(m.Icon,{size:"sm",as:i.TrashIcon}),label:"Delete"})})]})]})]})}},575531:e=>{"use strict";e.s({SidebarChats:()=>P});var t=e.i(290479),n=e.i(996481),r=e.i(165393),i=e.i(109398),a=e.i(84324),o=e.i(330462),s=e.i(34818),l=e.i(257140),u=e.i(397711),c=e.i(373150),d=e.i(55579),h=e.i(450807),p=e.i(885905),f=e.i(574650),m=e.i(549971),g=e.i(846580),y=e.i(658503),b=e.i(950347),x=e.i(449097),w=e.i(605238),k=e.i(852951),S=e.i(252390),_=e.i(60145),C=e.i(814733),A=e.i(289702),E=e.i(704255),T=e.i(663018),M=e.i(223099),I=e.i(972899),N=e.i(476440),D=e.i(476741);let P=e=>{let{onToggleCollapse:P}=e,{isChatsCollapsed:R,setIsChatsCollapsed:O}=(0,w.useSidebarCollapse)(),[j,F]=(0,c.useState)(!1),{showChatsSidebar:L,setShowChatsSidebar:z}=(0,m.useChatsSidebar)(),{setShowLeftSidebar:B}=(0,y.useLeftSidebar)(),U=(0,g.useIsMobile)(),{data:H}=(0,k.useWorkspace)(),W=(0,u.usePathname)(),V=(0,u.useRouter)(),{createChat:q}=(0,d.useCreateChat)(),{settings:G}=(0,x.useSettings)(),{showUpgrade:$}=(0,h.useUpgrade)(),{exceededLimits:K,isFreePlan:Y}=(0,b.default)(),{user:X,isLoggedIn:Z}=(0,p.useAuth)(),{track:J}=(0,S.default)(),{data:Q}=C.api.message.getActiveStreams.useQuery(void 0,{enabled:Z,refetchInterval:e=>{var t;return!!((null==e||null==(t=e.state)?void 0:t.data)&&Array.isArray(e.state.data))&&e.state.data.length>0&&6e3}}),ee=(0,c.useMemo)(()=>{if(!W)return null;let e=W.match(/\/b\/([^/?]+)/);return(null==e?void 0:e[1])||null},[W]),et=(0,c.useCallback)(e=>{e&&(e.preventDefault(),e.stopPropagation());let t=!R;O(t),null==P||P(t)},[R,P]),en=(0,f.useDebouncedCallback)(et,120),er=(0,c.useCallback)(e=>{("Enter"===e.key||" "===e.key)&&en(e)},[en]),ei=(0,_.usePendingMessageStore)(),ea=(0,c.useMemo)(()=>{var e;if(!H)return[];let t=[];for(let n of null!=(e=H.entities)?e:[])"CHAT"===n.type&&t.push(n),n.chats&&t.push(...n.chats.filter(e=>"CHAT"===e.type));return t.sort((e,t)=>{let n=e.updatedAt?new Date(e.updatedAt).getTime():new Date(e.createdAt).getTime();return(t.updatedAt?new Date(t.updatedAt).getTime():new Date(t.createdAt).getTime())-n})},[H]),eo=ea.slice(0,5),es=ea.length>5,el=async()=>{if((null==K?void 0:K.isWordCountLimitExceeded)&&Y){$("messageLimit"),J("wordCountLimitHit",{userId:null==X?void 0:X.id,modelName:G.modelName}),J("Paywall Shown",{reason:"Word Count Limit Hit",type:"Message"});return}try{F(!0);let{id:e}=await q({id:(0,l.nanoid)(),includedSources:[{type:"library"}]});V.push("/b/".concat(e,"?model=").concat(G.modelName,"&maxLength=").concat(G.maxLength)),ei.set(e,{text:""}),J("chat_nothing_created",{chatbotId:e,query:"",model:G.modelName,maxLength:G.maxLength,context:"library",source:"sidebar_plus_button"}),U&&B(!1)}catch(e){console.error("Failed to create new chat:",e)}finally{F(!1)}},eu=async e=>{e.stopPropagation(),await el()},ec=()=>{U&&B(!1)};return(0,t.jsxs)("div",{className:"flex flex-col group/chats gap-1",children:[(0,t.jsx)(E.Button,{as:"div",size:"xs",variant:"sidebar",className:(0,A.cn)("duration-0 group/chat-header h-9.5 text-text-secondary font-semibold text-[13px]"),onClick:en,onKeyDown:er,tabIndex:0,role:"button","aria-expanded":!R,"aria-controls":"chats-content",leadingIcon:(0,t.jsx)(I.Icon,{as:n.ChevronRight,size:"sm",className:(0,A.cn)("text-text-secondary flex-shrink-0 transition-transform duration-200 ease-out",{"rotate-90":!R})}),label:"Chats",trailingIcon:(0,t.jsx)(N.PersistentTooltip,{content:"Create a new chat",asChild:!0,children:(0,t.jsx)(E.Button,{disabled:j,size:"icon",variant:"ghost",className:"group-hover/chat-header:visible group-hover/chats:visible group-focus-within/chat-header:visible group-focus-within/chats:visible size-9 hover:bg-secondary focus:outline-none invisible absolute right-1 top-1/2 -translate-y-1/2","aria-label":"Create a new chat",onClick:e=>{e.stopPropagation(),e.preventDefault(),eu(e)},onKeyDown:async e=>{("Enter"===e.key||" "===e.key)&&(e.stopPropagation(),e.preventDefault(),await el())},children:(0,t.jsx)(I.Icon,{as:a.Plus,className:(0,A.cn)(j&&"animate-spin"),size:"md"})})}),trailingIconClassName:"ml-auto"}),(0,t.jsx)(o.AnimatePresence,{children:!R&&(0,t.jsx)(s.motion.div,{id:"chats-content",initial:{height:0,opacity:0},animate:{height:"auto",opacity:1,transition:{type:"spring",stiffness:600,damping:35,mass:.6,when:"beforeChildren",staggerChildren:.008}},exit:{height:0,opacity:0,transition:{type:"spring",stiffness:700,damping:40,mass:.5}},className:"overflow-hidden",children:(0,t.jsx)(s.motion.div,{initial:{opacity:0},animate:{opacity:1,transition:{staggerChildren:.006,delayChildren:.01,ease:[.19,1,.22,1]}},className:"space-y-1 select-none",children:eo.length>0?(0,t.jsxs)(t.Fragment,{children:[eo.map(e=>{var n;let i=ee===e.id,a=null==Q?void 0:Q.some(t=>t.chatId===e.id);return(0,t.jsx)(s.motion.div,{initial:{opacity:0,y:-8},animate:{opacity:1,y:0,transition:{ease:[.19,1,.22,1]}},exit:{opacity:0,y:-4},className:"relative group",children:(0,t.jsx)(M.HoverPrefetchLink,{onClick:ec,href:"/b/".concat(null!=(n=e.parentChatbotId)?n:e.id,"?chatId=").concat(e.id,"&referrer=sidebar"),children:(0,t.jsx)(E.Button,{as:"div",size:"xs",variant:"sidebar",className:(0,A.cn)(i&&"bg-control-primary","duration-0 truncate"),leadingIcon:a?(0,t.jsx)(T.LoadingSpinner,{className:"flex-shrink-0",variant:"small"}):(0,t.jsx)(I.Icon,{className:"flex-shrink-0",as:r.MessagesSquareIcon,size:"md"}),label:e.name?e.name.charAt(0).toUpperCase()+e.name.slice(1).toLowerCase():"",trailingIcon:(0,t.jsx)(D.default,{chat:e}),trailingIconClassName:"ml-4"})})},e.id)}),es&&(0,t.jsx)(s.motion.div,{initial:{opacity:0,y:-8},animate:{opacity:1,y:0,transition:{type:"spring",stiffness:600,damping:25,mass:.5}},exit:{opacity:0,y:-4},children:(0,t.jsx)(E.Button,{size:"xs",variant:"sidebar",onClick:e=>{e.stopPropagation(),e.preventDefault(),z(!L)},id:"sidebar-chats-button",className:(0,A.cn)("pl-4 text-text-secondary hover:text-text-primary mb-3",L&&"text-text-primary bg-control-primary"),leadingIcon:(0,t.jsx)(I.Icon,{as:i.MoreHorizontal,size:"md"}),label:"More"})})]}):(0,t.jsx)(s.motion.div,{initial:{opacity:0,y:-8},animate:{opacity:1,y:0,transition:{type:"spring",stiffness:600,damping:25,mass:.5}},exit:{opacity:0,y:-4,transition:{type:"spring",stiffness:700,damping:30,mass:.4}},children:(0,t.jsx)("p",{className:"text-text-secondary py-3 pl-4 text-sm",children:"No chats available"})})})})})]})}},420536:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]])},37929:e=>{"use strict";e.s({HomeIcon:()=>t.default});var t=e.i(420536)},626388:e=>{"use strict";e.s({useSearchMenu:()=>i});var t=e.i(647968),n=e.i(608294);let r=(0,t.atom)(!1),i=()=>(0,n.useAtom)(r)},147570:e=>{"use strict";e.s({default:()=>u});var t=e.i(290479),n=e.i(846580),r=e.i(658503),i=e.i(37929),a=e.i(361790),o=e.i(240824),s=e.i(626388),l=e.i(765595);let u=()=>{let[e,u]=(0,s.useSearchMenu)(),{setShowLeftSidebar:c}=(0,r.useLeftSidebar)(),d=(0,n.useIsMobile)();return(0,t.jsxs)("div",{className:"flex flex-col gap-1 px-4",children:[(0,t.jsx)(l.default,{onClick:()=>{d&&c(!1)},icon:i.HomeIcon,href:"/new",children:"Home"}),(0,t.jsx)(l.default,{id:"library-button",onClick:()=>{d&&c(!1)},icon:a.Rows3,href:"/library",children:"Library"}),(0,t.jsx)(l.default,{onClick:()=>{d&&c(!1),u(!0)},icon:o.SearchIcon,children:"Search"})]})}},304941:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("thumbs-up",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]])},752161:e=>{"use strict";e.s({ThumbsUp:()=>t.default});var t=e.i(304941)},925890:e=>{"use strict";e.s({default:()=>b});var t=e.i(290479),n=e.i(991571),r=e.i(719421),i=e.i(752161),a=e.i(373150),o=e.i(525094),s=e.i(555168),l=e.i(885905),u=e.i(252390),c=e.i(814733),d=e.i(289702),h=e.i(704255),p=e.i(765595),f=e.i(959757),m=e.i(303652),g=e.i(476440);let y=s.z.object({feedback:s.z.string().min(3)}),b=e=>{let{isCompact:s=!1}=e,{user:b}=(0,l.useAuth)(),{mutate:x}=c.api.googleSpreadsheets.append.useMutation(),[w,k]=a.default.useState(!1),{track:S}=(0,u.default)(),_=(0,f.usePersistedForm)({schema:y,storageKey:"feedback-form",...{storage:localStorage}}),C=async e=>{var t;let{feedback:n}=e;_.setValue("feedback","");let i=new Date,a={Timestamp:(0,d.formatDateUK)(i),Feedback:n},s=window.location.href,l=null==b||null==(t=b.onboardingResponse)?void 0:t[0],u=["New feedback submission:","- From: ".concat(b?b.email:"visitor"),"- URL: ".concat(s),(null==l?void 0:l.hearAboutUs)?"- Source: ".concat(null==l?void 0:l.hearAboutUs):null,(null==l?void 0:l.purpose)?"- Purpose: ".concat(null==l?void 0:l.purpose):null,(null==l?void 0:l.educationLevel)?"- Education Level: ".concat(null==l?void 0:l.educationLevel):null,(null==b?void 0:b.createdAt)?"- Account created: ".concat((0,r.formatTimeAgo)(new Date(null==b?void 0:b.createdAt))):null,n?"- Feedback: ".concat(n):null].filter(Boolean).join("\n");S("feedback_submit",{feedback:n,url:s}),x({feedback:a,slackMessage:u}),o.toast.success("Feedback submitted. Thanks!"),k(!1)};return(0,t.jsxs)(m.Popover,{open:w,onOpenChange:k,children:[(0,t.jsx)(g.ReusableTooltip,{content:"Send us feedback",disabled:!s,asChild:!0,children:(0,t.jsx)(m.PopoverTrigger,{asChild:!0,children:(0,t.jsx)(p.default,{icon:i.ThumbsUp,children:s?(0,t.jsx)("span",{className:"sr-only hidden",children:"Feedback"}):"Feedback"})})}),(0,t.jsx)(m.PopoverContent,{align:"start",children:(0,t.jsx)(f.Form,{..._,children:(0,t.jsxs)("form",{id:"feedback-form",onSubmit:_.handleSubmit(C),children:[(0,t.jsx)(f.FormField,{name:"feedback",control:_.control,render:e=>{let{field:n}=e;return(0,t.jsx)("textarea",{...n,rows:4,placeholder:"How can we improve Anara?",className:"w-full p-4 text-sm mb-4 h-full focus:outline-none placeholder:text-text-secondary bg-popover resize-none",onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),_.handleSubmit(C)())}})}}),(0,t.jsxs)("div",{className:"flex flex-row justify-between p-2",children:[(0,t.jsx)(n.PopoverClose,{asChild:!0,children:(0,t.jsx)(h.Button,{size:"xs",variant:"secondary",type:"button",label:"Cancel"})}),(0,t.jsx)(h.Button,{type:"submit",size:"xs",label:"Submit",variant:"inverse"})]})]})})})]})}},608365:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]])},243418:e=>{"use strict";e.s({BookIcon:()=>t.default});var t=e.i(608365)},335769:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("git-commit-vertical",[["path",{d:"M12 3v6",key:"1holv5"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["path",{d:"M12 15v6",key:"a9ows0"}]])},612680:e=>{"use strict";e.s({GitCommitVertical:()=>t.default});var t=e.i(335769)},610607:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},210901:e=>{"use strict";e.s({Mail:()=>t.default});var t=e.i(610607)},152291:e=>{"use strict";e.s({default:()=>g});var t=e.i(290479),n=e.i(184901),r=e.i(243418),i=e.i(523596),a=e.i(612680),o=e.i(210901),s=e.i(672330),l=e.i(373150),u=e.i(252390),c=e.i(814733),d=e.i(704255),h=e.i(765595),p=e.i(448068),f=e.i(972899),m=e.i(476440);let g=e=>{let{isCompact:g=!1}=e,{track:y}=(0,u.default)(),{data:b=[]}=c.api.changelog.recent.useQuery(),x=[{label:"User guide",header:"No Link",link:"https://docs.anara.com",isExternal:!0,icon:r.BookIcon},{label:"Talk to a person",id:"intercom_support",link:"#",icon:s.MessageSquare},{label:"Email support",link:"mailto:support@anara.com",icon:o.Mail}];return(0,t.jsxs)(p.DropdownMenu,{children:[(0,t.jsx)(m.ReusableTooltip,{content:"Get help and support",disabled:!g,asChild:!0,children:(0,t.jsx)(p.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(h.default,{icon:i.CircleHelp,children:g?(0,t.jsx)("span",{className:"sr-only hidden",children:"Support"}):"Support"})})}),(0,t.jsxs)(p.DropdownMenuContent,{align:"start",className:"min-w-[244px] p-2",children:[x.map((e,n)=>(0,t.jsxs)(l.Fragment,{children:[(0,t.jsx)(p.DropdownMenuItem,{..."Talk to a person"===e.label&&{id:"intercom_support"},asChild:!0,children:(0,t.jsx)(d.Button,{variant:"ghost",size:"medium",className:"w-full justify-start",onClick:()=>(e=>{e&&(e.isExternal?window.open(e.link,"_blank"):"string"==typeof e.link?window.location.href=e.link:console.error("Invalid link:",e.link),y("supportLinkClicked",{variant:e.label}))})(e),leadingIcon:(0,t.jsx)(f.Icon,{as:e.icon,size:"sm"}),label:e.label})}),2===n&&(0,t.jsx)(p.DropdownMenuSeparator,{})]},n)),(0,t.jsx)("div",{className:" pl-4 px-2 py-2 text-text-secondary text-xs font-medium",style:{letterSpacing:"0px",fontFamily:"inherit"},children:"What's new"}),b.map(e=>(0,t.jsx)(p.DropdownMenuItem,{asChild:!0,children:(0,t.jsx)(d.Button,{variant:"ghost",size:"medium",className:"w-full justify-start",onClick:()=>{e.slug&&(window.open("/changelog/".concat(e.slug),"_blank"),y("changelog_helpmenu_recent_clicked",{changelogId:e._id,changelogTitle:e.title,changelogSlug:e.slug}))},leadingIcon:(0,t.jsx)(f.Icon,{as:a.GitCommitVertical,size:"sm"}),children:(0,t.jsx)("div",{className:"w-[207px] shrink-0 overflow-hidden text-ellipsis text-text-primary font-inter text-sm font-[450] leading-5 tracking-[-0.14px] line-clamp-1",children:e.title})})},e._id)),(0,t.jsx)(p.DropdownMenuItem,{asChild:!0,children:(0,t.jsx)(d.Button,{variant:"ghost",size:"medium",className:"w-full justify-start",onClick:()=>{window.open("/changelog","_blank"),y("changelog_helpmenu_full_clicked")},leadingIcon:(0,t.jsx)(f.Icon,{as:n.ArrowUpRight,size:"sm"}),children:(0,t.jsx)("div",{className:" shrink-0 overflow-hidden text-ellipsis text-text-primary font-inter text-sm font-[450] leading-5 tracking-[-0.14px] line-clamp-1",children:"Full changelog"})})})]})]})}},691612:e=>{"use strict";e.s({default:()=>c});var t=e.i(290479),n=e.i(449097),r=e.i(252390),i=e.i(561208),a=e.i(397711),o=e.i(925890),s=e.i(152291),l=e.i(476440),u=e.i(765595);let c=e=>{let{isCompact:c=!1}=e,d=(0,a.useRouter)(),h=(0,a.usePathname)(),{track:p}=(0,r.default)(),{setReturnPage:f}=(0,n.useSettings)(),m=(0,t.jsx)(l.ReusableTooltip,{content:"Invite friends and earn rewards",disabled:!c,asChild:!0,children:(0,t.jsx)(u.default,{icon:i.Award,onClick:()=>{p("Invite and Earn Clicked",{source:"Sidebar"}),f(null!=h?h:"/new"),d.push("/settings/referrals")},children:c?(0,t.jsx)("span",{className:"sr-only hidden",children:"Invite and earn"}):"Invite and earn"})}),g=(0,t.jsx)(o.default,{isCompact:c}),y=(0,t.jsx)(s.default,{isCompact:c});return c?(0,t.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:[m,g]}),(0,t.jsx)("div",{className:"flex-shrink-0",children:y})]}):(0,t.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[m,g,y]})}},509800:e=>{"use strict";e.s({default:()=>A});var t=e.i(290479),n=e.i(608294),r=e.i(206989),i=e.i(219821),a=e.i(373150),o=e.i(885905),s=e.i(628405),l=e.i(846580),u=e.i(658503),c=e.i(605238),d=e.i(852951),h=e.i(289702),p=e.i(704255),f=e.i(972899),m=e.i(186776),g=e.i(218028),y=e.i(807263),b=e.i(208103),x=e.i(928187),w=e.i(740316),k=e.i(575531),S=e.i(147570),_=e.i(691612);let C=(0,i.default)(()=>e.r(11851)(e.i),{loadableGenerated:{modules:[873484]},ssr:!1}),A=(0,a.memo)(()=>{let{user:e,userPlanDetails:i}=(0,o.useAuth)(),{showLeftSidebar:A,setShowLeftSidebar:E}=(0,u.useLeftSidebar)(),T=(0,n.useAtomValue)(b.notificationAtom),M=(0,l.useIsMobile)(),I=(0,s.default)(),N=0;if(I&&1){let e=document.getElementById("banner-main");e&&(N+=36),document.getElementById("banner-reward")&&(N+=36)}let{isChatsCollapsed:D,isChatbotsCollapsed:P}=(0,c.useSidebarCollapse)(),{data:R,isLoading:O}=(0,d.useWorkspace)(),j=(0,a.useRef)(null),F=(0,a.useRef)(null),[L,z]=(0,a.useState)(!1),[B,U]=(0,a.useState)(!1),[H,W]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let e=e=>{"\\"===e.key&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),E(e=>!e))};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[]);let V=(0,a.useCallback)(()=>{let e=j.current,t=F.current;if(!e||!t)return;let{scrollTop:n,scrollHeight:r,clientHeight:i}=e,a=n>1,o=n+i<r-1,s=t.clientHeight<600;z(e=>e!==a?a:e),U(e=>e!==o?o:e),W(e=>e!==s?s:e)},[]);(0,a.useEffect)(()=>{let e=null,t=null,n=()=>{e||(e=setTimeout(()=>{V(),e=null},16))},r=()=>{t&&clearTimeout(t),t=setTimeout(()=>{V()},100)},i=j.current;if(i)return i.addEventListener("scroll",n,{passive:!0}),window.addEventListener("resize",r,{passive:!0}),V(),()=>{i.removeEventListener("scroll",n),window.removeEventListener("resize",r),e&&clearTimeout(e),t&&clearTimeout(t)}},[V]),(0,a.useEffect)(()=>{let e=setTimeout(()=>{V()},100);return()=>clearTimeout(e)},[D,P,A,R,O,V]),(0,a.useEffect)(()=>{let e,t,n=j.current;if(n)return"undefined"!=typeof ResizeObserver&&(e=new ResizeObserver(()=>{setTimeout(()=>{V()},50)})).observe(n),(t=new MutationObserver(()=>{setTimeout(()=>{V()},50)})).observe(n,{childList:!0,subtree:!0}),()=>{null==e||e.disconnect(),null==t||t.disconnect()}},[V]),(0,a.useEffect)(()=>{let e=setTimeout(V,0);return()=>clearTimeout(e)},[V]);let q=M&&N>0?{height:"calc(100vh - ".concat(N,"px)")}:{},G=e&&((null==i?void 0:i.planName)==="Free"||(null==i?void 0:i.status)!=="ACTIVE");return(0,t.jsxs)("div",{ref:F,className:(0,h.cn)("bg-background-primary overflow-hidden group/sidebar h-full min-h-0 pt-4 flex flex-col w-full z-50"),style:q,children:[(0,t.jsxs)("div",{className:"flex flex-col min-h-0 h-full",children:[(0,t.jsxs)("div",{className:"flex items-center mb-5 px-4",children:[(0,t.jsx)(g.default,{}),(0,t.jsxs)("div",{className:"ml-auto flex items-center gap-2",children:[(0,t.jsx)(p.Button,{size:"icon",variant:"ghost",id:"upload-button",className:"hover:bg-control-primary md:group-hover/sidebar:opacity-100 md:opacity-0 transition-all duration-200 ease-in-out",leadingIcon:(0,t.jsx)(f.Icon,{as:r.ChevronsLeft,className:(0,h.cn)("transition-transform duration-200",I?A?"rotate-0":"rotate-180":"rotate-0","group-data-[peeking=true]/leftnav:rotate-180")}),"aria-label":"Toggle sidebar",onClick:()=>{E(e=>!e)}}),(0,t.jsx)(C,{})]})]}),(0,t.jsx)(S.default,{}),(0,t.jsx)(m.Separator,{className:(0,h.cn)("bg-borderSecondary mt-5 transition-opacity duration-200 ease-in-out",L?"opacity-100":"opacity-0")}),(0,t.jsxs)("div",{ref:j,className:"flex-1 min-h-0 overflow-y-scroll px-4 space-y-1 select-none scrollbar-overlay",children:[(0,t.jsx)(k.SidebarChats,{}),(0,t.jsx)(w.default,{})]}),(0,t.jsx)(m.Separator,{className:(0,h.cn)("bg-borderSecondary transition-opacity duration-200 ease-in-out",B?"opacity-100":"opacity-0")})]}),!G&&!T&&(0,t.jsx)(m.Separator,{className:"bg-borderSecondary"}),(0,t.jsxs)("div",{className:(0,h.cn)("flex flex-shrink-0 z-10","flex-col p-4 gap-5"),children:[(0,t.jsx)(y.default,{isCompact:H}),G&&(0,t.jsx)(x.default,{isCompact:H}),(0,t.jsx)(_.default,{isCompact:H})]})]})})},290344:e=>{"use strict";e.s({default:()=>y});var t=e.i(290479),n=e.i(762121),r=e.i(165393),i=e.i(373150),a=e.i(836826),o=e.i(940455),s=e.i(549971),l=e.i(846580),u=e.i(658503),c=e.i(812782),d=e.i(852951),h=e.i(289702),p=e.i(704255),f=e.i(223099),m=e.i(972899),g=e.i(476741);let y=e=>{let{isPeeking:y=!1,sidebarWidth:b=280}=e,{showChatsSidebar:x,setShowChatsSidebar:w}=(0,s.useChatsSidebar)(),{showLeftSidebar:k,setShowLeftSidebar:S}=(0,u.useLeftSidebar)(),{isChatDropdownOpen:_}=(0,c.useSidebarMenuState)(),C=(0,l.useIsMobile)(),{data:A}=(0,d.useWorkspace)(),[E,T]=(0,i.useState)(!1),[M,I]=(0,i.useState)(!1),N=(0,i.useRef)(!1);(0,i.useEffect)(()=>{k||y||!x||w(!1)},[k,y,x,w]),(0,i.useEffect)(()=>{if(x){T(!0);let e=setTimeout(()=>{I(!0)},10);return()=>clearTimeout(e)}{I(!1);let e=setTimeout(()=>{T(!1)},200);return()=>clearTimeout(e)}},[x]);let D=(0,i.useRef)(null);(0,a.useOnClickOutside)(D,e=>{if(!x)return;let t=e.target,n=(null==t?void 0:t.closest("#sidebar-chats-button"))!==null,r=(null==t?void 0:t.closest("#sidebar-chat-dropdown"))!==null;n||r||setTimeout(()=>{N.current||w(!1)},50)}),(0,i.useEffect)(()=>{if(_)N.current=!0;else{let e=setTimeout(()=>{N.current=!1},100);return()=>clearTimeout(e)}},[_]);let P=(0,i.useMemo)(()=>{var e;if(!A)return[];let t=[];for(let n of null!=(e=A.entities)?e:[])"CHAT"===n.type&&t.push(n),n.chats&&t.push(...n.chats.filter(e=>"CHAT"===e.type));return t.sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime())},[A]),R=(0,i.useMemo)(()=>{if(0===P.length)return[];let e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),n=new Date(t);n.setDate(n.getDate()-1);let r=new Date(t);r.setDate(r.getDate()-7);let i=new Date(t);i.setMonth(i.getMonth()-1);let a=new Date(t);a.setMonth(a.getMonth()-6);let o=new Date(t);o.setFullYear(o.getFullYear()-1);let s=[],l="";for(let e of P){let u=new Date(e.createdAt),c="";(c=u>=t?"Today":u>=n?"Yesterday":u>=r?"Last week":u>=i?"Last month":u>=a?"Last 6 months":u>=o?"Last year":"Older")!==l&&(s.push({type:"separator",label:c}),l=c),s.push({type:"chat",chat:e})}return s},[P]);return k||y?E||x?(0,t.jsx)("div",{ref:D,"data-keep-peek-open":!0,className:(0,h.cn)("absolute bg-background-primary border-r border-borderSecondary max-sm:z-[99] max-sm:fixed z-40 transition-transform duration-200 ease-in-out",C?"w-full":"w-[240px]",M?"translate-x-0 shadow-feint":"-translate-x-full",y?"rounded-r-4 border-t border-b":"rounded-r-none"),style:{left:C?0:b,top:y?"60px":"0",height:y?"calc(100vh - 120px)":"100%"},children:(0,t.jsxs)("div",{className:"flex flex-col h-full p-4",children:[(0,t.jsxs)("div",{className:"flex items-center px-4 py-4",children:[C&&(0,t.jsx)(p.Button,{size:"icon",variant:"ghost",className:"mr-2 h-10 w-10 -ml-4",leadingIcon:(0,t.jsx)(m.Icon,{as:n.ArrowLeft,size:"sm"}),"aria-label":"Close chats sidebar",onClick:()=>w(!1)}),(0,t.jsx)("p",{className:"text-sm font-semibold text-text-secondary",children:"Previous chats"})]}),(0,t.jsx)(o.VList,{id:"sidebar-chats-list",className:"scrollbar-hide h-full flex flex-col gap-1",overscan:8,children:R.length>0?R.map(e=>{var n;return"separator"===e.type?(0,t.jsx)("div",{className:"px-4 py-2",children:(0,t.jsx)("p",{className:"text-sm text-text-secondary font-medium",children:e.label})},"separator-".concat(e.label)):(0,t.jsxs)("div",{className:"relative group",children:[(0,t.jsx)(f.HoverPrefetchLink,{onClick:()=>{C&&S(!1),w(!1)},href:"/b/".concat(null!=(n=e.chat.parentChatbotId)?n:e.chat.id,"?chatId=").concat(e.chat.id,"&referrer=sidebar"),children:(0,t.jsx)(p.Button,{size:"xs",variant:"sidebar",leadingIcon:(0,t.jsx)(m.Icon,{className:"flex-shrink-0",as:r.MessagesSquareIcon,size:"md"}),label:e.chat.name?e.chat.name.charAt(0).toUpperCase()+e.chat.name.slice(1).toLowerCase():"",className:"truncate pr-8"})}),(0,t.jsx)(g.default,{chat:e.chat})]},e.chat.id)}):(0,t.jsx)("p",{className:"text-text-primary py-3 pl-4 text-sm",children:"No chats available"})})]})}):null:null}},317875:e=>{"use strict";e.s({TourOverlay:()=>s});var t=e.i(290479),n=e.i(334145),r=e.i(373150),i=e.i(289702),a=e.i(185296),o=e.i(955288);let s=(0,r.memo)(e=>{var s,l;let{step:u,onNext:c,tourId:d,onPrev:h,onSkip:p}=e,[f,m]=(0,r.useState)(null),[g,y]=(0,r.useState)(null),[b,x]=(0,r.useState)(!1),[w,k]=(0,r.useState)(!1),S=(0,r.useRef)(!1),_=(0,r.useRef)(""),C=(0,r.useRef)(null),{currentStep:A,checkTourVisibility:E}=(0,a.useTour)(),T=o.tourConfig[d],M=null!=(s=null==T?void 0:T.steps.length)?s:0,I=null==(l=null==T?void 0:T.required)||l,N=(0,r.useCallback)(e=>{let t=window.innerHeight,n=window.innerWidth;return e.top<t+50&&e.bottom>-50&&e.left<n+50&&e.right>-50},[]),D=(0,r.useCallback)((e,t)=>{var n,r,i,a,o,s;let l=e.getBoundingClientRect(),c=window.pageYOffset||document.documentElement.scrollTop,d=window.pageXOffset||document.documentElement.scrollLeft,h=window.innerWidth,p=window.innerHeight,f={top:l.top+c,left:l.left+d,width:l.width,height:l.height,bottom:l.bottom+c,right:l.right+d},m=null!=(i=u.targetAnchorPosition)?i:.5,g=null!=(a=u.tooltipAnchorPosition)?a:.5,y=null!=(o=null==(n=u.tooltipOffset)?void 0:n.x)?o:0,b=null!=(s=null==(r=u.tooltipOffset)?void 0:r.y)?s:0;if("bottom"===u.placement){let e=f.left+f.width*m-t*g;return(e+=y)+t>d+h-12&&(e=d+h-t-12),e<d+12&&(e=d+12),{top:f.bottom+12+b,left:e}}if("top"===u.placement){let e=f.left+f.width*m-t*g;return(e+=y)+t>d+h-12&&(e=d+h-t-12),e<d+12&&(e=d+12),{top:f.top-180-12+b,left:e}}if("right"===u.placement){let e=f.top+f.height/2-180*g,t=f.right+12+y;return e<c+12&&(e=c+12),e+180>c+p-12&&(e=c+p-180-12),{top:e,left:t}}return{top:f.bottom+12+b,left:f.left+y}},[u.placement,u.targetAnchorPosition,u.tooltipAnchorPosition,u.tooltipOffset]),P=(0,r.useCallback)(()=>{let e=document.querySelector(u.target),t=!!e;if(t!==S.current&&(S.current=t,E()),!e){m(null),y(null),x(!1);return}let n=e.getBoundingClientRect(),r=N(n);if(x(r),!r)return;let i=D(e,280);m(n),y(i)},[u.target,D,N,E]);if((0,r.useEffect)(()=>{let e="".concat(d,"-").concat(u.id);if(_.current!==e){_.current=e,m(null),y(null),x(!1),k(!0),S.current=!1;let t=setTimeout(()=>{x(!0),k(!1),P()},50);return()=>clearTimeout(t)}P()},[d,u.id,P]),(0,r.useEffect)(()=>{let e,t,n=null,r=()=>{clearTimeout(e),cancelAnimationFrame(t),t=requestAnimationFrame(()=>{e=setTimeout(()=>{P()},16)})},i=document.querySelector(u.target);if(i){(n=new ResizeObserver(r)).observe(i);let e=i.parentElement;e&&n.observe(e)}let a=new MutationObserver(r);return a.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class","style","width","height"]}),window.addEventListener("scroll",r,{passive:!0}),window.addEventListener("resize",r),P(),()=>{clearTimeout(e),cancelAnimationFrame(t),n&&n.disconnect(),a.disconnect(),window.removeEventListener("scroll",r),window.removeEventListener("resize",r)}},[P,u.target]),!f||!g||!b)return null;let R=(()=>{var e,t,n;let r=null!=(t=u.targetAnchorPosition)?t:.5,i=null!=(n=null==(e=C.current)?void 0:e.offsetHeight)?n:180,a=window.pageYOffset||document.documentElement.scrollTop,o=window.pageXOffset||document.documentElement.scrollLeft;if("bottom"===u.placement){let e=f.left+f.width*r;return{targetX:e,targetY:f.bottom-2,tooltipX:e,tooltipY:g.top-a}}if("top"===u.placement){let e=f.left+f.width*r;return{targetX:e,targetY:f.top+2,tooltipX:e,tooltipY:g.top-a+i}}if("right"===u.placement){let e=f.top+f.height*r;return{targetX:f.right,targetY:e,tooltipX:g.left-o,tooltipY:e}}if("left"===u.placement){let e=f.top+f.height*r;return{targetX:f.left,targetY:e,tooltipX:g.left+280-o,tooltipY:e}}let s=f.left+f.width*r,l=g.left+280*r-o;return{targetX:s,targetY:f.bottom,tooltipX:l,tooltipY:g.top-a}})();return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("svg",{className:"fixed inset-0 pointer-events-none z-50 transition-all duration-300 ease-out text-text-tertiary ".concat(w?"hidden":"block"),style:{width:"100vw",height:"100vh"},children:[(0,t.jsx)("path",{d:"M ".concat(R.targetX," ").concat(R.targetY," L ").concat(R.tooltipX," ").concat(R.tooltipY),stroke:"currentColor",strokeWidth:"2",fill:"none"}),(0,t.jsx)("circle",{cx:R.targetX,cy:R.targetY,r:"4",fill:"currentColor"})]}),(0,t.jsxs)("div",{ref:C,className:"fixed z-50 bg-black rounded-6 p-7 shadow-shadowMedium pointer-events-auto transition-all duration-300 ease-out transform ".concat(w?"scale-95 translate-y-2":"scale-100 translate-y-0"),style:{top:g.top,left:g.left,width:"280px"},children:[!I&&(0,t.jsx)("button",{onClick:p,className:"absolute top-4 right-4 w-8 h-8 flex items-center justify-center rounded-[6px] hover:bg-control-primary/20 dark:hover:bg-control-primary/70 transition-colors",children:(0,t.jsx)(n.X,{className:"w-7 h-7 text-text-secondary"})}),(0,t.jsxs)("div",{className:"space-y-9",children:[(0,t.jsxs)("div",{className:"space-y-5",children:[(0,t.jsx)("h3",{className:"text-sm leading-[100%] dark:text-text-primary text-background font-semibold",children:u.title}),(0,t.jsx)("p",{className:"dark:text-text-primary text-background text-sm font-medium",children:u.content})]}),I&&(0,t.jsxs)("div",{className:(0,i.cn)("flex flex-row justify-between items-center",M<2&&"justify-end"),children:[M>1&&(0,t.jsx)("div",{className:"flex justify-center gap-[5px]",children:null==T?void 0:T.steps.map((e,n)=>(0,t.jsx)("div",{className:"w-[5px] h-[5px] rounded-full transition-colors duration-200 ".concat(n===A?"bg-background-primary dark:bg-foreground":"bg-text-tertiary")},"".concat(d,"-").concat(e.id,"-dot")))}),(0,t.jsxs)("div",{className:"flex justify-end items-center gap-6",children:[A>0&&(0,t.jsx)("button",{className:"text-sm font-semibold text-text-secondary",onClick:h,children:"Back"}),(0,t.jsx)("button",{className:"text-sm font-semibold text-white",onClick:c,children:A===M-1?"Close":"Next"})]})]})]})]})]})})},404181:e=>{"use strict";e.s({TourWrapper:()=>o});var t=e.i(290479),n=e.i(373150),r=e.i(185296),i=e.i(317875),a=e.i(955288);let o=(0,n.memo)(e=>{let{children:n,onComplete:o,onStepComplete:s}=e,{activeTour:l,currentStep:u,nextStep:c,prevStep:d,skipTour:h,completeTour:p}=(0,r.useTour)(),f=l?a.tourConfig[l]:null,m=null==f?void 0:f.steps[u],g=!!f&&u===f.steps.length-1;return l&&f&&m?(0,t.jsxs)(t.Fragment,{children:[n,(0,t.jsx)(i.TourOverlay,{step:m,onNext:()=>{l&&(g?(p(),null==o||o(l)):(c(),m&&(null==s||s(l,u))))},onPrev:d,onSkip:()=>{l&&(h(),null==o||o(l))},tourId:l})]}):(0,t.jsx)(t.Fragment,{children:n})})},297270:e=>{"use strict";e.s({AppPanels:()=>d});var t=e.i(290479),n=e.i(373150),r=e.i(628405),i=e.i(658503),a=e.i(812782),o=e.i(487310),s=e.i(289702),l=e.i(710176),u=e.i(509800),c=e.i(290344);let d=e=>{let{children:d}=e,{showLeftSidebar:h,setShowLeftSidebar:p}=(0,i.useLeftSidebar)(),f=(0,r.default)(),{isAnyMenuOpen:m}=(0,a.useSidebarMenuState)(),{isOpen:g}=(0,o.usePlusMenuStore)(),[y,b]=(0,n.useState)(280),[x,w]=(0,n.useState)(!1),[k,S]=(0,n.useState)(!1),[_,C]=(0,n.useState)(!1),[A,E]=(0,n.useState)(!1),[T,M]=(0,n.useState)(!1),[I,N]=(0,n.useState)(!1),D=(0,n.useRef)(y),P=(0,n.useRef)(0),R=(0,n.useRef)(null),O=(0,n.useRef)(null),j=(0,n.useRef)(h),F=(0,n.useRef)(null),L=(0,n.useRef)({isAnyMenuOpen:m,isPlusMenuOpen:g});(0,n.useEffect)(()=>{if(!f)return;let e=setTimeout(()=>N(!0),350);return()=>clearTimeout(e)},[f]);let z=(0,n.useCallback)(e=>{e.preventDefault();let{ownerDocument:t}=e.currentTarget;D.current=y,P.current=e.clientX;let n=k&&!h,r=!1;function i(e){Math.abs(e.clientX-P.current)>6&&(r=!0),n||(e.clientX<50?p(!1):p(!0)),b(Math.floor(Math.min(Math.max(D.current+e.clientX-P.current,240),400)))}w(!0),t.addEventListener("pointermove",i),t.addEventListener("pointerup",function(e){t.removeEventListener("pointermove",i),w(!1),!r&&6>Math.abs(e.clientX-P.current)&&p(e=>!e)},{once:!0})},[y,p,k,h]),B=(0,n.useCallback)(e=>{if(x)return;if(e.clientX<8){h||A||T||!I||(S(!0),E(!0),R.current&&clearTimeout(R.current),R.current=setTimeout(()=>{E(!1)},300));return}let t=e.target,n=!1;for(;null!=t&&t!==e.currentTarget;){if(t.getAttribute("data-keep-peek-open")){n=!0;break}t=t.parentElement}n||!k||h||m||g||F.current||(E(!0),C(!0),S(!1),R.current&&clearTimeout(R.current),R.current=setTimeout(()=>{C(!1),E(!1)},300))},[x,h,A,T,I,k,m,g]),U=(0,n.useCallback)(()=>{!k||h||m||g||F.current||(E(!0),C(!0),S(!1),R.current&&clearTimeout(R.current),R.current=setTimeout(()=>{C(!1),E(!1)},300))},[k,h,m,g]),H=!!f&&(h||k);return(0,n.useEffect)(()=>(j.current&&!h&&(S(!1),C(!1),E(!0),M(!0),R.current&&clearTimeout(R.current),O.current&&clearTimeout(O.current),R.current=setTimeout(()=>{E(!1)},300),O.current=setTimeout(()=>{M(!1)},320)),j.current=h,()=>{}),[h]),(0,n.useEffect)(()=>{let e=L.current,t={isAnyMenuOpen:m,isPlusMenuOpen:g};(e.isAnyMenuOpen&&!t.isAnyMenuOpen||e.isPlusMenuOpen&&!t.isPlusMenuOpen)&&k&&!h&&(F.current&&clearTimeout(F.current),F.current=setTimeout(()=>{F.current=null},500)),L.current=t},[m,g,k,h]),(0,t.jsxs)("div",{className:"flex w-screen justify-start items-start h-full overflow-hidden",onPointerMove:B,onPointerLeave:U,children:[(0,t.jsxs)("nav",{"data-keep-peek-open":!0,className:(0,s.cn)("fixed left-0 flex-shrink-0 bg-background-primary transition-transform ease-[cubic-bezier(0.165,0.84,0.44,1)] duration-300 z-50 group/leftnav",{"cursor-col-resize":x},x?"shadow-[rgba(0,0,0,0.2)_-2px_0px_0px_0px_inset]":"shadow-[rgba(0,0,0,0.04)_-2px_0px_0px_0px_inset]",H?"translate-x-0":"-translate-x-full",k&&!h||_&&!h?"shadow-shadowLow rounded-r-lg border-r border-t border-b border-borderSecondary overflow-hidden":"",k&&!h||_&&!h?"top-[50px] bottom-[50px] h-auto":"top-0 bottom-0 h-screen max-h-screen"),style:{width:y},"data-peeking":!h&&k?"true":"false","aria-labelledby":"nav-heading",children:[(0,t.jsx)(u.default,{}),(0,t.jsx)("div",{className:"absolute z-[60] right-0 top-0 bottom-0",children:(0,t.jsx)("div",{"data-keep-peek-open":!0,onPointerDown:z,"data-resize-handle-state":x?"drag":"idle",className:(0,s.cn)("w-2 h-full cursor-col-resize shrink-0 flex items-center justify-center transition-all duration-150 ease-in-out group",f&&(h||k||A)?"block":"hidden"),children:(0,t.jsx)("div",{className:(0,s.cn)('ml-2 w-[1px] h-full shrink-0 [&[data-resize-handle-state="drag"]]:bg-blue bg-borderSecondary group-hover:scale-x-[2] group-active:scale-x-[2.5] [&[data-resize-handle-active]]:scale-x-[2] transition-all duration-150 ease-in-out'),"data-resize-handle-state":x?"drag":"idle"})})})]}),(0,t.jsxs)("main",{style:{paddingLeft:f&&h?y:0},className:(0,s.cn)("flex flex-grow max-h-screen h-full min-w-0 w-full overflow-x-hidden",x?"transition-none":"transition-all ease-[cubic-bezier(0.165,0.84,0.44,1)] duration-300"),children:[d,(0,t.jsx)(c.default,{isPeeking:k&&!h,sidebarWidth:y})]}),(0,t.jsx)(l.default,{})]})}},536356:e=>{"use strict";e.s({ChurnekyLoader:()=>a});var t=e.i(369587),n=e.i(373150),r=e.i(885905),i=e.i(814733);let a=()=>{let{user:e}=(0,r.useAuth)();(0,n.useEffect)(()=>{(null==e?void 0:e.stripeId)&&a()},[e]);let{mutate:a}=i.api.churnkey.hashMutation.useMutation({onSuccess:n=>{n&&window.churnkey&&"function"==typeof window.churnkey.check&&(null==e?void 0:e.stripeId)&&window.churnkey.check("pause",{customerId:e.stripeId,authHash:n,appId:"rj4lblz7e",mode:"development"===t.env.NODE_ENV?"test":"live",provider:"stripe",softWall:!1,forceCheck:!1})}});return null}},858277:e=>{"use strict";e.s({SiteLayout:()=>U,zoteroModalAtom:()=>B});var t=e.i(290479),n=e.i(219821),r=e.i(785663),i=e.i(885905),a=e.i(250928),o=e.i(647753),s=e.i(430036),l=e.i(495105),u=e.i(699808),c=e.i(987395),d=e.i(450807),h=e.i(186006),p=e.i(647968),f=e.i(608294),m=e.i(397711),g=e.i(373150),y=e.i(525094),b=e.i(846580),x=e.i(658503),w=e.i(814733),k=e.i(289702),S=e.i(122654),_=e.i(876525),C=e.i(809334),A=e.i(894504),E=e.i(509800),T=e.i(290344),M=e.i(404181),I=e.i(297270),N=e.i(536356),D=e.i(762802);let P=(0,n.default)(()=>e.r(548241)(e.i),{loadableGenerated:{modules:[236414]},ssr:!1}),R=(0,n.default)(()=>e.r(87252)(e.i),{loadableGenerated:{modules:[718103]},ssr:!1}),O=(0,n.default)(()=>e.r(619580)(e.i),{loadableGenerated:{modules:[392476]},ssr:!1}),j=(0,n.default)(()=>e.r(386620)(e.i),{loadableGenerated:{modules:[731888]},ssr:!1}),F=(0,n.default)(()=>e.r(745837)(e.i),{loadableGenerated:{modules:[322242]},ssr:!1}),L=(0,n.default)(()=>e.r(720299)(e.i),{loadableGenerated:{modules:[565100]},ssr:!1}),z=(0,n.default)(()=>e.r(85333)(e.i),{loadableGenerated:{modules:[233935]},ssr:!1}),B=(0,p.atom)(!1);function U(e){let{children:n}=e,{user:p}=(0,i.useAuth)(),U=(0,m.useSearchParams)(),H=null==U?void 0:U.get("zotero"),W=null==U?void 0:U.get("notion"),V=w.api.useUtils(),[q,G]=(0,f.useAtom)(B);(0,g.useEffect)(()=>{"success"===H&&(y.toast.success("Successfully connected to Zotero"),V.user.byEmail.invalidate(),G(!0)),"error"===H&&y.toast.error("Failed to connect to Zotero"),"existing"===H&&y.toast.info("Zotero already connected")},[H]),(0,g.useEffect)(()=>{"connected"===W&&(y.toast.success("Successfully connected to Notion"),V.integrations.all.invalidate()),"error"===W&&y.toast.error("Failed to connect to Notion"),"existing"===W&&y.toast.info("Notion already connected")},[W,V.integrations.all]);let{showAccessRevokedModal:$}=(0,a.useUnriddle)(),K=(0,b.useIsMobile)(),{showLeftSidebar:Y,setShowLeftSidebar:X}=(0,x.useLeftSidebar)(),[Z,J]=(0,g.useState)(!1);return(0,s.useUploadToast)(),(0,o.useIntercomSupport)(),(0,g.useEffect)(()=>{if(K)if(Y)J(!0);else{let e=setTimeout(()=>{J(!1)},300);return()=>clearTimeout(e)}},[K,Y]),(0,t.jsxs)(A.default,{children:[(0,t.jsx)(N.ChurnekyLoader,{}),(0,t.jsx)(P,{type:"dialog"}),(0,t.jsx)(d.default,{}),$&&(0,t.jsx)(S.default,{}),(0,t.jsx)(h.default,{}),(0,t.jsxs)("div",{className:"relative flex flex-col w-full h-screen items-end bg-background-primary",children:[(0,t.jsx)(u.default,{}),(0,t.jsx)(c.default,{}),(0,t.jsx)(l.default,{}),q&&(0,t.jsx)(R,{}),(0,t.jsx)(O,{}),(0,t.jsx)(j,{}),(0,t.jsx)(F,{}),(0,t.jsx)(L,{}),(0,t.jsx)(z,{}),(null==p?void 0:p.isOnboarded)===!1&&(0,t.jsx)(r.default,{}),(0,t.jsx)(_.default,{}),(0,t.jsx)(C.ShareFolderModal,{}),(0,t.jsx)(D.DragSidebar,{children:(0,t.jsx)("div",{className:"flex w-full h-full min-h-0",children:K?(0,t.jsxs)(t.Fragment,{children:[n,(Y||Z)&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:(0,k.cn)("fixed inset-0 bg-[#0C0C0C]/80 z-[29] transition-opacity duration-300",Y?"opacity-100":"opacity-0"),onClick:()=>X(!1)}),(0,t.jsx)("div",{className:(0,k.cn)("fixed top-0 h-full w-80 z-30 transform transition-transform duration-300 ease-in-out",Y?"translate-x-0":"-translate-x-full"),children:(0,t.jsx)(E.default,{})}),(0,t.jsx)("div",{className:(0,k.cn)("fixed top-0 h-full w-80 z-40 transform transition-transform duration-300 ease-in-out pointer-events-none",Y?"translate-x-0":"-translate-x-full"),children:(0,t.jsx)("div",{className:"pointer-events-auto",children:(0,t.jsx)(T.default,{})})})]})]}):(0,t.jsx)(I.AppPanels,{children:(0,t.jsx)(M.TourWrapper,{children:n})})})})]})]})}}}]);

//# sourceMappingURL=789f7b5e64fe7278.js.map