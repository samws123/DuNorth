(globalThis.TURBOPACK=globalThis.TURBOPACK||[]).push(["object"==typeof document?document.currentScript:void 0,{83755:e=>{"use strict";e.s({isSupportedDocumentType:()=>a});var t=e.i(544625);let n=[...t.CONVERT_EXTENSIONS,...t.IMAGES_EXTENSIONS,"pdf","txt","md"].filter((e,t,n)=>n.indexOf(e)===t),a=e=>{let a=(0,t.getFileExtension)(e.type);return!!a&&n.includes(a)}},198057:e=>{"use strict";e.s({useFileChange:()=>i});var t=e.i(83755),n=e.i(525094);let a={maxFiles:15,maxImageSize:5242880,maxDocumentSize:0x3200000,allowedImageTypes:["image/png","image/jpeg","image/webp","image/gif"]},i=()=>({handleFileChange:async function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{maxFiles:s=a.maxFiles,maxImageSize:l=a.maxImageSize,maxDocumentSize:o=a.maxDocumentSize,allowedImageTypes:r=a.allowedImageTypes,onImageFiles:c,onDocumentFiles:d,currentAttachmentCount:u=0}=i;if(e.length>s)return void n.toast.error("You can only upload up to ".concat(s," files at once."));if(u+e.length>s)return void n.toast.error("You can only have ".concat(s," files in total. You currently have ").concat(u," files."));let p=[],m=[];for(let a of e){if(0===a.size){n.toast.error('File "'.concat(a.name,'" is empty'));continue}if(r.includes(a.type)){if(a.size>l){n.toast.error('Image "'.concat(a.name,'" exceeds ').concat(Math.round(l/1048576),"MB limit"));continue}p.push(a)}else if((0,t.isSupportedDocumentType)(a)){if(a.size>o){n.toast.error('Document "'.concat(a.name,'" exceeds ').concat(Math.round(o/1048576),"MB limit"));continue}m.push(a)}else n.toast.error('File "'.concat(a.name,'" is not an allowed file type. Please use supported formats.'))}let h=[];if(p.length>0&&c&&h.push(Promise.resolve(c(p))),m.length>0&&d&&h.push(Promise.resolve(d(m))),h.length>0)try{return(await Promise.all(h))[0]}catch(e){throw console.error("File upload error:",e),e}}})},45973:e=>{"use strict";e.s({useDocumentAttachmentUpload:()=>d});var t=e.i(719772),n=e.i(221297),a=e.i(681299),i=e.i(231512),s=e.i(252390),l=e.i(83755),o=e.i(238635),r=e.i(373150),c=e.i(525094);let d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[d,u]=(0,r.useState)(new Set),{ingestFile:p}=(0,i.default)(),{track:m}=(0,s.default)(),{uniqueSaveId:h}=(0,a.useChatUniqueId)(),{editor:g}=(0,t.useChatEditorTiptap)(),x=(0,n.useChatV2Store)(e=>e.setIsPasteUploading),f=(0,r.useCallback)(async t=>{if(!h||!g)return;let n=t.filter(l.isSupportedDocumentType);if(0!==n.length)try{for(let t of(u(new Set(n.map(e=>e.name))),x(!0),n)){var a,i,s;try{let n=(null==(a=t.name.split(".").pop())?void 0:a.toLowerCase())||"";m("chatbotCreated",{chatbotId:"pending",fileExtension:n,type:"DOCUMENT"});let s=await p(t);if(s){let a=t.name.replace(RegExp("\\.".concat(n,"$"),"i"),"");g.commands.insertContent({type:"mention",attrs:{id:s,label:a,type:"DOCUMENT"}}),g.commands.insertContent(" "),m("attachment_added",{type:t.type||"application/".concat(n)}),null==(i=e.onSuccess)||i.call(e,s,a)}else throw Error("Failed to ingest document")}catch(n){console.error("Failed to process document ".concat(t.name,":"),n),o.captureException(n),m("fileUploadFailed",{reason:n instanceof Error?n.message:"Unknown error"}),c.toast.error('Failed to upload "'.concat(t.name,'"')),null==(s=e.onError)||s.call(e,n instanceof Error?n:Error("Upload failed"))}}}finally{u(new Set),x(!1)}},[h,g,p,m,e,x]);return{handleFileChange:(0,r.useCallback)(async e=>{if(e.length>5)return void c.toast.error("You can only upload up to ".concat(5," document files at once."));let t=e.filter(e=>0===e.size?(c.toast.error('File "'.concat(e.name,'" is empty')),!1):e.size>0x3200000?(c.toast.error('File "'.concat(e.name,'" exceeds 50MB limit')),!1):!!(0,l.isSupportedDocumentType)(e));0!==t.length&&await f(t)},[f]),handleDocumentUpload:f,isUploading:d.size>0}}},161106:e=>{"use strict";e.s({useAttachmentUpload:()=>m});var t=e.i(341664),n=e.i(221297),a=e.i(681299),i=e.i(252390),s=e.i(227261),l=e.i(814733),o=e.i(490076),r=e.i(257140),c=e.i(373150),d=e.i(982152),u=e.i(198057),p=e.i(45973);let m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[m,h]=(0,c.useState)(new Set),{addAttachments:g}=(0,d.useAddAttachment)(),x=(0,n.useChatV2Store)(e=>e.mode),{setOptimisticLibraryChatId:f}=(0,t.useOptimisticLibraryChatId)(),{attachments:v}=(0,d.useSavedChatbotInput)(),{mutateAsync:y}=l.api.aws.getSignedUploadUrl.useMutation(),{track:w}=(0,i.default)(),{handleDocumentUpload:j}=(0,p.useDocumentAttachmentUpload)(),b=async(t,n)=>{try{h(new Set(t.map(e=>e.name)));let e=(await Promise.all(t.map(async e=>{try{let{signedUrl:t,url:a}=await y({fileName:e.name,fileType:e.type,type:"attachment",chatbotId:n}),i=await fetch(t,{method:"PUT",body:e,headers:{"Content-Type":e.type}});if(w("attachment_added",{type:e.type}),!i.ok)throw Error("Upload failed: ".concat(i.statusText));return{url:a,name:e.name,type:e.type}}catch(t){return console.error("Failed to upload ".concat(e.name,":"),t),null}}))).filter(e=>null!==e);if(e.length>0){let t=e.map(e=>{let t=e.name.split(".").slice(0,-1).join("."),a=e.name.split(".").pop();return{id:(0,r.nanoid)(),type:"input-attachment",data:{type:"image",name:t,chatbotId:n,extension:a,url:(0,o.getAttachmentCdnUrl)(e.url,n)}}});g(t,n)}return e}catch(t){var a;console.error(t),null==(a=e.onError)||a.call(e,t)}finally{h(new Set)}},{uniqueSaveId:C}=(0,a.useChatUniqueId)(),{handleFileChange:N}=(0,u.useFileChange)();return{handleFileChange:async e=>{let t=C;if(!t)if(!(0,s.isLibraryView)(x))return;else{let e=(0,r.nanoid)();f(e),t=e}return N(e,{currentAttachmentCount:v.length,onImageFiles:e=>b(e,t),onDocumentFiles:async e=>{await j(e)}})},isUploading:m.size>0}}},950721:e=>{"use strict";e.s({AttachmentPopover:()=>v});var t=e.i(290479),n=e.i(757589),a=e.i(684709),i=e.i(84324),s=e.i(397711),l=e.i(340582),o=e.i(704255),r=e.i(663018),c=e.i(972899),d=e.i(303652),u=e.i(186776),p=e.i(885905),m=e.i(100711),h=e.i(872967),g=e.i(412997),x=e.i(375199),f=e.i(289702);let v=e=>{let{isUploading:v,isPasteUploading:y=!1,onFileInputClick:w,children:j,className:b,location:C="chat"}=e,N=(0,s.useRouter)(),{isDowntime:S}=(0,h.default)(),{user:k}=(0,p.useAuth)(),{toggleSelectionModal:I}=(0,g.useIntegrationModals)(),{connectedIntegrations:D,allIntegrations:P}=(0,m.useConnectedIntegrations)(),{trackFileSelectionModal:A,trackSettingsNavigation:M}=(0,l.useTrackIntegrationEvents)(),T=()=>"landing"===C?"attachment_popover_landing":"attachment_popover_chat",F=v||y||S;return(0,t.jsxs)(d.Popover,{children:[(0,t.jsx)(d.PopoverTrigger,{asChild:!0,children:j||(0,t.jsx)(o.Button,{type:"button",variant:"ghost",className:(0,f.cn)("hover:bg-popover-hover",b),size:"icon",disabled:F,children:v||y?(0,t.jsx)(r.LoadingSpinner,{variant:"small",color:"gray"}):(0,t.jsx)(i.Plus,{className:"h-[14px] w-[14px] text-text-primary"})})}),(0,t.jsx)(d.PopoverContent,{className:"w-[200px] p-2",align:"start",side:"bottom",sideOffset:8,children:(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("button",{onClick:e=>{e.stopPropagation(),w()},disabled:F,className:"w-full flex items-center gap-3 px-3 py-2 text-sm rounded-md hover:bg-accent hover:text-accent-foreground transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-left",children:[(0,t.jsx)(c.Icon,{as:a.Files,className:"h-7 w-7 flex-shrink-0"}),(0,t.jsx)("span",{children:"Upload file"})]}),D.length>0&&D.map(e=>(0,t.jsxs)("button",{onClick:()=>(e=>{A(e,T()),I(e,!0)})(e.id),className:"w-full flex items-center gap-3 px-3 py-2 text-sm rounded-md hover:bg-accent hover:text-accent-foreground transition-colors text-left",children:[(0,t.jsx)(e.icon,{className:"h-7 w-7 flex-shrink-0"}),(0,t.jsxs)("span",{children:["Add from ",e.name]})]},e.id)),(null==P?void 0:P.length)-(null==D?void 0:D.length)>+!(0,x.isStaffEmail)(null==k?void 0:k.email)?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.Separator,{className:"my-2"}),(0,t.jsxs)("button",{onClick:()=>{M(T()),N.push("/settings/integrations")},className:"w-full flex items-center gap-3 px-3 py-2 text-sm rounded-md hover:bg-accent hover:text-accent-foreground transition-colors text-left",children:[(0,t.jsx)(c.Icon,{as:n.Cable,className:"h-7 w-7 flex-shrink-0"}),(0,t.jsx)("span",{children:"Connect more apps"})]})]}):null]})})]})}},174527:e=>{"use strict";e.s({useChatSources:()=>a});var t=e.i(608294);let n=(0,e.i(227348).atomWithStorage)("chat-sources",{workspace:!0,internet:!0,modelKnowledge:!0}),a=()=>{let[e,a]=(0,t.useAtom)(n);return{chatSources:e,setChatSources:a,toggleTool:e=>{a(t=>{let n={...t,[e]:!t[e]};return Object.values(n).every(e=>!e)&&(n.modelKnowledge=!0),n})}}}},917067:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("at-sign",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]])},982635:e=>{"use strict";e.s({AtSign:()=>t.default});var t=e.i(917067)},656154:e=>{"use strict";e.s({MentionDropdown:()=>p});var t=e.i(290479),n=e.i(982635),a=e.i(373150),i=e.i(972899),s=e.i(476440),l=e.i(252390),o=e.i(289702),r=e.i(704255),c=e.i(448068),d=e.i(139729),u=e.i(719772);let p=(0,a.memo)(function(){let{editor:e,landingPage:p}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[m,h]=(0,a.useState)(!1),{editor:g}=(0,u.useChatEditorTiptap)(),{track:x}=(0,l.default)(),f=(0,a.useRef)(null),v=e||g,y=(0,a.useCallback)(e=>{let{id:t,label:n,type:a,toolType:i}=e;v&&("TOOL"===a&&i?v.chain().focus().insertContent({type:"mention",attrs:{id:t,label:n,type:a,toolType:i}}).run():v.chain().focus().insertContent({type:"mention",attrs:{id:t,label:n,type:a}}).run(),h(!1))},[v]);return(0,a.useEffect)(()=>{if(!m)return;let e=e=>{var t;null!=(t=f.current)&&t.onKeyDown({event:e})||"Escape"===e.key&&(h(!1),null==v||v.commands.focus())};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[m,v]),(0,t.jsxs)(c.DropdownMenu,{open:m,onOpenChange:h,children:[(0,t.jsx)(s.PersistentTooltip,{content:"Add mentions",persistent:!1,asChild:!0,disabled:!1,children:(0,t.jsx)(c.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(r.Button,{id:p?"agent-mention-button":void 0,type:"button",variant:"accent-muted",className:(0,o.cn)("group inline-flex gap-2 items-center px-5 py-2 rounded-4 text-sm font-medium transition-all duration-200 cursor-pointer","w-fit","focus-visible:ring-0 focus-visible:ring-offset-0"),size:"icon",disabled:!1,leadingIcon:(0,t.jsx)(i.Icon,{as:n.AtSign,size:"sm"}),label:"Mention",onClick:()=>{x("mention_menu_clicked")}})})}),(0,t.jsx)(c.DropdownMenuContent,{align:"start",className:"w-fit p-0 m-0 bg-transparent border-none shadow-none",onCloseAutoFocus:e=>{e.preventDefault(),setTimeout(()=>{null==v||v.commands.focus()},0)},children:(0,t.jsx)(d.default,{ref:f,items:[],command:y,query:"",editor:v||void 0,isMentionButton:!0,onClose:()=>h(!1)})})]})})},353964:e=>{"use strict";e.s({ModelSelectionDropdown:()=>y});var t=e.i(290479),n=e.i(743305),a=e.i(874133),i=e.i(381612),s=e.i(373150),l=e.i(958962),o=e.i(972899),r=e.i(476440),c=e.i(885905),d=e.i(950347),u=e.i(449097),p=e.i(252390),m=e.i(375199),h=e.i(289702),g=e.i(704255),x=e.i(450807),f=e.i(448068);let v=e=>e.includes("claude")||e.includes("anthropic")?l.AnthropicIcon:e.includes("gpt")||e.includes("o4")?l.OpenAIIcon:e.includes("gemini")?l.GoogleIcon:l.OpenAIIcon,y=(0,s.memo)(()=>{let{settings:e,updateSettings:l}=(0,u.useSettings)(),{user:y}=(0,c.useAuth)(),{isFreePlan:w}=(0,d.default)(),j=(0,s.useMemo)(()=>(0,m.isStaffEmail)(null==y?void 0:y.email),[null==y?void 0:y.email]),b=(0,s.useMemo)(()=>j?u.allModels:u.models,[j]),{track:C}=(0,p.default)(),{showUpgrade:N}=(0,x.useUpgrade)(),[S,k]=(0,s.useState)(!1),I=(0,s.useMemo)(()=>b.find(t=>t.name===e.modelName),[b,e.modelName]),D=(0,s.useMemo)(()=>I?v(I.name):null,[I]),P=(0,s.useCallback)(t=>{if(!y)return;let a=b.find(e=>e.name===t);if(a){if(!(0,n.isDefaultModel)(a.name)&&w){N("modelChange"),C("modelChangeAttemptByFree",{userId:null==y?void 0:y.id}),C("Paywall Shown",{reason:"Model Change"}),k(!1);return}C("chat_model_change",{userId:null==y?void 0:y.id,model:a.label}),l({...e,modelName:a.name}),k(!1)}},[y,w,N,C,b,e,l]);return(0,t.jsxs)(f.DropdownMenu,{open:S,onOpenChange:k,children:[(0,t.jsx)(r.PersistentTooltip,{content:"Model",persistent:!1,asChild:!0,disabled:!1,children:(0,t.jsx)(f.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(g.Button,{type:"button",variant:"ghost",className:(0,h.cn)("group inline-flex items-center gap-2 px-5 py-2 rounded-4 text-sm font-medium transition-all duration-200 cursor-pointer","bg-secondary hover:bg-secondary-hover text-text-primary","focus-visible:ring-0 focus-visible:ring-offset-0","w-fit min-w-0 max-w-full"),size:"icon",disabled:!1,leadingIcon:D?(0,t.jsx)(D,{size:14}):void 0,leadingIconSize:"sm",label:(null==I?void 0:I.label)||"Select model",trailingIcon:(0,t.jsx)(o.Icon,{as:i.ChevronDown,size:"sm"}),trailingIconSize:"sm",trailingIconClassName:"flex-shrink-0 transition-transform duration-200 group-aria-expanded:rotate-180"})})}),(0,t.jsx)(f.DropdownMenuContent,{align:"start",className:"w-64 p-2",onCloseAutoFocus:e=>e.preventDefault(),children:(()=>{let n=b.filter(e=>"Basic"===e.tier),i=b.filter(e=>"Pro"===e.tier);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"px-2 py-2 text-xs font-medium text-text-secondary",children:"Basic"}),n.map((n,i)=>{let s=v(n.name);return(0,t.jsx)(f.DropdownMenuItem,{asChild:!0,children:(0,t.jsx)(g.Button,{variant:"ghost",size:"medium",className:"w-full justify-start h-auto py-2",onClick:e=>{e.preventDefault(),e.stopPropagation(),P(n.name)},onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),e.stopPropagation(),P(n.name))},leadingIcon:(0,t.jsx)(s,{size:14}),trailingIcon:n.name===e.modelName?(0,t.jsx)(o.Icon,{as:a.Check,className:"h-7 w-7 text-blue"}):void 0,children:(0,t.jsx)("div",{className:"flex flex-col gap-1 w-full",children:(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{className:"font-medium",children:n.label}),"gpt-5"===n.name&&(0,t.jsx)("span",{className:"bg-blue/10 text-blue px-3 py-1 rounded-2 font-medium text-xs",children:"Beta"}),"Pro"===n.tier&&(0,t.jsx)("span",{className:"text-xs text-text-secondary",children:"Pro"})]})})})})},"normal-".concat(i,"-").concat(n.label))}),n.length>0&&i.length>0&&(0,t.jsx)("div",{className:"my-6"}),i.length>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"px-2 py-2 text-xs font-medium text-text-secondary",children:"Pro"}),i.map((n,i)=>{let s=v(n.name);return(0,t.jsx)(f.DropdownMenuItem,{asChild:!0,children:(0,t.jsx)(g.Button,{variant:"ghost",size:"medium",className:"w-full justify-start h-auto py-2",onClick:e=>{e.preventDefault(),e.stopPropagation(),P(n.name)},onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),e.stopPropagation(),P(n.name))},leadingIcon:(0,t.jsx)(s,{size:14}),trailingIcon:n.name===e.modelName?(0,t.jsx)(o.Icon,{as:a.Check,className:"h-7 w-7"}):void 0,children:(0,t.jsx)("div",{className:"flex flex-col gap-1 w-full",children:(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{className:"font-medium",children:n.label}),"gpt-5"===n.name&&(0,t.jsx)("span",{className:"bg-blue/10 text-blue px-3 py-1 rounded-2 font-medium text-xs",children:"Beta"})]})})})})},"reasoning-".concat(i,"-").concat(n.label))})]})]})})()})]})})},236715:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]])},453304:e=>{"use strict";e.s({Lightbulb:()=>t.default});var t=e.i(236715)},855399:e=>{"use strict";e.s({SettingsDropdown:()=>k});var t=e.i(290479),n=e.i(874133),a=e.i(996481),i=e.i(59938),s=e.i(502753),l=e.i(453304),o=e.i(243747),r=e.i(397711),c=e.i(373150);e.i(567349);var d=e.i(111367),u=e.i(972899),p=e.i(476440),m=e.i(186776),h=e.i(463002),g=e.i(627053),x=e.i(885905),f=e.i(527941),v=e.i(449097),y=e.i(252390),w=e.i(289702),j=e.i(704255),b=e.i(303652),C=e.i(221297),N=e.i(174527);let S=e=>{let{icon:n,label:a,checked:i,onCheckedChange:s,disabled:l=!1}=e;return(0,t.jsxs)("div",{className:(0,w.cn)("flex items-center justify-between cursor-pointer hover:bg-secondary rounded-4 px-4 py-2",l?"opacity-50":""),children:[(0,t.jsxs)("div",{onClick:()=>{s(!i)},className:"flex items-center gap-4 w-full",children:[(0,t.jsx)(n,{className:"h-7 w-7 text-text-secondary"}),(0,t.jsx)("span",{className:"text-sm",children:a})]}),(0,t.jsx)(h.Switch,{checked:i,onCheckedChange:s,disabled:l})]})},k=(0,c.memo)(e=>{let{canControlChatSources:h}=e,{settings:k,updateSettings:I}=(0,v.useSettings)(),[D,P]=(0,c.useState)(!1),[A,M]=(0,c.useState)(!1),{user:T,userPlanDetails:F}=(0,x.useAuth)(),{track:E}=(0,y.default)(),{updateUser:U}=(0,f.default)(),O=(0,r.usePathname)(),z=(0,C.useChatV2Store)(e=>e.mode),L=(0,c.useMemo)(()=>{var e;return(null==(e=g.languages.find(e=>e.name===k.language))?void 0:e.name)||"English (US)"},[k.language]),B=(0,c.useCallback)(e=>{E("languageInputChanged",{language:e}),I({...k,language:e}),M(!1)},[E,k,I]),{chatSources:_,toggleTool:q}=(0,N.useChatSources)(),K=(0,c.useMemo)(()=>{if("/new"!==O&&"full-chat-library"!==z.type)return!1;let e=(null==F?void 0:F.planName)!=="Free"?9999:250,t=k.maxLength!==e,n=_&&(!_.workspace||!_.internet||!_.modelKnowledge);return t||n},[O,k.maxLength,_]);return(0,t.jsxs)(b.Popover,{open:D,onOpenChange:e=>{e&&E("settings_menu_opened"),P(e)},children:[(0,t.jsx)(p.PersistentTooltip,{content:"Settings",persistent:!1,asChild:!0,disabled:!1,children:(0,t.jsx)(b.PopoverTrigger,{asChild:!0,children:(0,t.jsx)(j.Button,{variant:"ghost",size:"icon",className:"hover:bg-popover-hover relative",leadingIcon:(0,t.jsx)(o.Settings2,{className:"h-[14px] w-[14px] rotate-90 text-text-primary"}),"aria-label":"Settings",children:K&&(0,t.jsx)("span",{className:"absolute top-2 right-1 h-[5px] w-[5px] rounded-full bg-blue"})})})}),(0,t.jsxs)(b.PopoverContent,{align:"start",className:"p-2 flex flex-col w-64",onCloseAutoFocus:e=>e.preventDefault(),children:[h&&_&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(S,{icon:i.FolderSearch,label:"Workspace",checked:_.workspace,onCheckedChange:()=>q("workspace")}),(0,t.jsx)(S,{icon:s.Globe,label:"Internet",checked:_.internet,onCheckedChange:()=>q("internet")}),(0,t.jsx)(S,{icon:l.Lightbulb,label:"Model knowledge",checked:_.modelKnowledge,onCheckedChange:()=>q("modelKnowledge")}),(0,t.jsx)(m.Separator,{orientation:"horizontal",className:"my-2"})]}),(0,t.jsxs)(b.Popover,{open:A,onOpenChange:e=>{e&&E("language_menu_opened"),M(e)},modal:!0,children:[(0,t.jsx)(b.PopoverTrigger,{asChild:!0,children:(0,t.jsx)(j.Button,{variant:"ghost",className:"w-full hover:bg-secondary justify-between px-4 py-2 h-auto rounded-4",trailingIcon:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:L}),(0,t.jsx)(u.Icon,{as:a.ChevronRight,className:"h-6 w-6"})]}),children:(0,t.jsx)("span",{className:"text-sm text-text-secondary",children:"Language"})})}),(0,t.jsx)(b.PopoverContent,{side:"right",sideOffset:0,onOpenAutoFocus:e=>e.preventDefault(),onCloseAutoFocus:e=>e.preventDefault(),onWheel:e=>{e.stopPropagation()},onTouchMove:e=>{e.stopPropagation()},align:"start",className:"p-1 w-[200px]",children:(0,t.jsxs)(d.Command,{defaultValue:L,children:[(0,t.jsx)(d.CommandInput,{placeholder:"Search languages...",autoFocus:!0}),(0,t.jsxs)(d.CommandList,{className:"scrollbar-overlay",children:[(0,t.jsx)(d.CommandEmpty,{children:"No language found."}),(0,t.jsx)(d.CommandGroup,{className:"p-0",children:g.languages.map(e=>{let{name:a}=e;return(0,t.jsxs)(d.CommandItem,{value:a,onSelect:()=>{B(a),P(!1)},children:[a,(0,t.jsx)(u.Icon,{className:(0,w.cn)("ml-auto h-7 w-7",a===L?"opacity-100":"opacity-0"),as:n.Check})]},a)})})]})]})})]})]})]})})},475292:e=>{"use strict";e.s({TextLengthDropdown:()=>h});var t=e.i(290479),n=e.i(874133),a=e.i(381612),i=e.i(373150),s=e.i(972899),l=e.i(476440),o=e.i(885905),r=e.i(449097),c=e.i(252390),d=e.i(289702),u=e.i(704255),p=e.i(450807),m=e.i(448068);let h=(0,i.memo)(()=>{let{settings:e,updateSettings:h}=(0,r.useSettings)(),{user:g,userPlanDetails:x}=(0,o.useAuth)(),{track:f}=(0,c.default)(),{showUpgrade:v}=(0,p.useUpgrade)(),[y,w]=(0,i.useState)(!1),j=(0,i.useMemo)(()=>{var t;return null!=(t=r.responseTypeOptions.find(t=>t.value===e.maxLength))?t:r.responseTypeOptions[0]},[e.maxLength]),b=(0,i.useCallback)(t=>{if(!g)return;let n=r.responseTypeOptions.find(e=>e.value===Number.parseInt(t,10));if(n){if(("Pro"===n.tier||"Premium"===n.tier)&&((null==x?void 0:x.planName)==="Free"||"Premium"===n.tier&&(null==x?void 0:x.planName)==="Pro")){v("maxLengthChange"),f("maxLengthChangeAttemptByFree",{userId:null==g?void 0:g.id}),f("Paywall Shown",{reason:"Max Length Change"}),w(!1);return}f("maxLengthChanged",{userId:null==g?void 0:g.id,maxLength:n.value}),h({...e,maxLength:n.value}),w(!1)}},[g,null==x?void 0:x.planName,v,f,e,h]);return(0,t.jsxs)(m.DropdownMenu,{open:y,onOpenChange:w,children:[(0,t.jsx)(l.PersistentTooltip,{content:"Response length",persistent:!1,asChild:!0,disabled:!1,children:(0,t.jsx)(m.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(u.Button,{type:"button",variant:"ghost",className:(0,d.cn)("group inline-flex items-center gap-2 px-5 py-2 rounded-4 text-sm font-medium transition-all duration-200 cursor-pointer","bg-secondary hover:bg-secondary-hover text-text-primary","focus-visible:ring-0 focus-visible:ring-offset-0","w-fit min-w-0 max-w-full"),size:"icon",disabled:!1,label:(null==j?void 0:j.label)||"Select length",trailingIcon:(0,t.jsx)(s.Icon,{as:a.ChevronDown,size:"sm"}),trailingIconSize:"sm",trailingIconClassName:"flex-shrink-0 transition-transform duration-200 group-aria-expanded:rotate-180"})})}),(0,t.jsx)(m.DropdownMenuContent,{align:"start",className:"w-[200px] p-2",onCloseAutoFocus:e=>e.preventDefault(),children:r.responseTypeOptions.map((a,i)=>(0,t.jsx)(m.DropdownMenuItem,{asChild:!0,children:(0,t.jsx)(u.Button,{variant:"ghost",size:"medium",className:"w-full justify-start h-auto py-2",onClick:e=>{e.preventDefault(),e.stopPropagation(),b(a.value.toString())},onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),e.stopPropagation(),b(a.value.toString()))},trailingIcon:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[a.value===e.maxLength&&(0,t.jsx)(s.Icon,{as:n.Check,className:"h-7 w-7 text-blue"}),a.tier&&(null==x?void 0:x.planName)==="Free"&&(0,t.jsx)("span",{className:"text-xs text-blue bg-blue/10 px-3 py-1 rounded-2 font-medium",children:a.tier})]}),children:(0,t.jsx)("div",{className:"flex flex-col gap-1 w-full",children:(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsx)("div",{className:"flex items-center gap-3",children:(0,t.jsx)("span",{className:"font-medium",children:a.label})})})})})},"text-length-".concat(i,"-").concat(a.label)))})]})})},906250:e=>{"use strict";e.s({default:()=>t});var t=e.i(604663).UndoRedo},788606:e=>{"use strict";e.s({}),e.i(604663),e.i(906250)},853985:e=>{"use strict";e.s({usePasteFileHandlerGeneric:()=>l,usePasteImageHandler:()=>s});var t=e.i(221297),n=e.i(83755),a=e.i(161106),i=e.i(45973);let s=()=>{(0,t.useChatV2Store)(e=>e.mode),(0,t.useChatV2Store)(e=>e.isPasteUploading);let e=(0,t.useChatV2Store)(e=>e.setIsPasteUploading),{handleFileChange:s,isUploading:l}=(0,a.useAttachmentUpload)(),{handleFileChange:o}=(0,i.useDocumentAttachmentUpload)(),r=async t=>{let a=t.filter(e=>["image/png","image/jpg","image/jpeg","image/webp","image/gif"].includes(e.type)),i=t.filter(n.isSupportedDocumentType);if(0!==a.length||0!==i.length)try{e(!0);let t=[];a.length>0&&t.push(s(a)),i.length>0&&t.push(o(i)),t.length>0&&await Promise.all(t)}catch(e){console.error("Failed to upload pasted files:",e)}finally{e(!1)}};return{handlePastedFiles:r,createPasteHandler:()=>async e=>{var t;let n=null==(t=e.clipboardData)?void 0:t.items;if(!n)return;let a=[];for(let e=0;e<n.length;e++){let t=n[e];if("file"===t.kind&&(t.type.startsWith("image/")||"application/pdf"===t.type)){let e=t.getAsFile();e&&a.push(e)}}a.length>0&&(e.preventDefault(),await r(a))},isUploading:l}},l=e=>{let t=async t=>{let a=t.filter(e=>["image/png","image/jpg","image/jpeg","image/webp","image/gif"].includes(e.type)||(0,n.isSupportedDocumentType)(e));if(0!==a.length)try{await e(a)}catch(e){console.error("Failed to upload pasted files:",e)}};return{handlePastedFiles:t,createPasteHandler:()=>async e=>{var n;let a=null==(n=e.clipboardData)?void 0:n.items;if(!a)return;let i=[];for(let e=0;e<a.length;e++){let t=a[e];if("file"===t.kind&&["image/","application/pdf","text/plain","text/markdown"].some(e=>t.type.startsWith(e)||t.type.startsWith("application/")&&["epub","ppt","pptx","doc","docx","tiff","bmp","heic"].some(e=>t.type.includes(e)))){let e=t.getAsFile();e&&i.push(e)}}i.length>0&&(e.preventDefault(),await t(i))}}}},483699:e=>{"use strict";e.s({getPlaceholderText:()=>i,useChatPlaceholder:()=>s}),e.i(987617);var t=e.i(56077),n=e.i(373150),a=e.i(430266);let i=e=>(0,a.match)(e).with({type:"chatbot"},e=>(0,a.match)(e.chatbotType).with("GROUP",()=>"Ask this folder a question...").with("WORKSPACE",()=>"Ask your library a question...").with("DOCUMENT",()=>"Ask this file a question...").with("AUDIO",()=>"Ask this audio a question...").with("WEBSITE",()=>"Ask this website a question...").with("VIDEO",()=>"Ask this video a question...").with("IMAGE",()=>"Ask this recording a question...").with("NOTE",()=>"Ask this note a question...").otherwise(()=>"Ask this file a question...")).with({type:"full-chat-library"},()=>"Understand, research and write about anything").otherwise(()=>"Ask this file a question..."),s=(e,a)=>{let s=i(e);return(0,n.useEffect)(()=>{if(!a)return;let e=a.isFocused;for(let e of a.extensionManager.extensions)e.name===t.default.name&&(e.options.placeholder=s);a.setOptions(),e&&a.commands.focus()},[a,s,e]),s}},599198:e=>{"use strict";e.s({attachSpring:()=>i}),e.i(349305);var t=e.i(997841),n=e.i(73145),a=e.i(515496);function i(e,i,l){let o,r=e.get(),c=null,d=r,u="string"==typeof r?r.replace(/[\d.-]/g,""):void 0,p=()=>{c&&(c.stop(),c=null)},m=()=>{p(),c=new t.JSAnimation({keyframes:[s(e.get()),s(d)],velocity:e.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...l,onUpdate:o})};if(e.attach((t,n)=>(d=t,o=e=>{var t,a;return n((t=e,(a=u)?t+a:t))},a.frame.postRender(m),e.get()),p),(0,n.isMotionValue)(i)){let t=i.on("change",t=>{var n,a;return e.set((n=t,(a=u)?n+a:n))}),n=e.on("destroy",t);return()=>{t(),n()}}return p}function s(e){return"number"==typeof e?e:parseFloat(e)}}}]);

//# sourceMappingURL=add5ec9c109c1822.js.map