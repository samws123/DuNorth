(globalThis.TURBOPACK=globalThis.TURBOPACK||[]).push(["object"==typeof document?document.currentScript:void 0,{719664:e=>{"use strict";e.s({subscribeWithSelector:()=>t});let t=e=>(t,s,r)=>{let n=r.subscribe;return r.subscribe=(e,t,s)=>{let i=e;if(t){let n=(null==s?void 0:s.equalityFn)||Object.is,a=e(r.getState());i=s=>{let r=e(s);if(!n(a,r)){let e=a;t(a=r,e)}},(null==s?void 0:s.fireImmediately)&&t(a,a)}return n(i)},e(t,s,r)}},224706:e=>{"use strict";e.s({useGlobalStreamStore:()=>r});var t=e.i(496438),s=e.i(719664);let r=(0,t.create)()((0,s.subscribeWithSelector)((e,t)=>({activeStreams:new Map,registerListener:(s,r)=>{let n=t().activeStreams.get(s);!n||n.listeners.has(r)||e(e=>{let t=new Map(e.activeStreams),n=t.get(s);if(n){let e=new Set(n.listeners);e.add(r),t.set(s,{...n,listeners:e})}return{activeStreams:t}})},unregisterListener:(s,r)=>{let n=t().activeStreams.get(s);n&&n.listeners.has(r)&&e(e=>{let t=new Map(e.activeStreams),n=t.get(s);if(n){let e=new Set(n.listeners);e.delete(r),t.set(s,{...n,listeners:e})}return{activeStreams:t}})},startStream:(s,r,n,i)=>{let a=t().activeStreams.get(s);if(a&&("streaming"===a.status||"connecting"===a.status))return;a&&("completed"===a.status||"error"===a.status)&&t().forceStopStream(s);let o={chatId:s,streamId:r.streamId,messageId:n,status:"connecting",subscriptionParams:r,listeners:(null==a?void 0:a.listeners)||new Set,createdAt:Date.now(),frontendStreaming:!1};e(e=>{let t=new Map(e.activeStreams);return t.set(s,o),{activeStreams:t}})},stopStream:s=>{let r=t().activeStreams.get(s);r&&0===r.listeners.size&&e(e=>{let t=new Map(e.activeStreams);return t.delete(s),{activeStreams:t}})},forceStopStream:t=>{e(e=>{let s=new Map(e.activeStreams);return s.delete(t),{activeStreams:s}})},getStreamInfo:e=>t().activeStreams.get(e),updateStreamStatus:(s,r)=>{let n=t().activeStreams.get(s);if(n||r.subscriptionParams){if(n&&!Object.keys(r).some(e=>"listeners"!==e&&"subscriptionParams"!==e&&n[e]!==r[e]))return;e(e=>{let t=new Map(e.activeStreams),n=t.get(s);if(n){let e={...n,...r,listeners:n.listeners};t.set(s,e)}else if(r.subscriptionParams){let e={chatId:s,streamId:r.streamId||"",messageId:r.messageId||null,lastEventId:r.lastEventId,status:r.status||"connecting",error:r.error,subscriptionParams:r.subscriptionParams,listeners:new Set,createdAt:Date.now(),frontendStreaming:r.frontendStreaming||!1};t.set(s,e)}return{activeStreams:t}})}},isStreamActive:e=>{let s=t().activeStreams.get(e);return(null==s?void 0:s.status)==="streaming"||(null==s?void 0:s.status)==="connecting"},cleanupStreams:()=>{e(e=>{let t=new Map(e.activeStreams);for(let[e,s]of(Date.now(),t))"completed"===s.status&&s.createdAt;return{activeStreams:t}})},setFrontendStreaming:(e,s)=>{t().updateStreamStatus(e,{frontendStreaming:s})}})))},256271:e=>{"use strict";e.s({globalStreamSubscriptions:()=>s});let t=(0,e.i(496438).create)((e,t)=>({subscriptions:new Map,globalHandlers:new Map,createSubscription:(s,r,n)=>{let{subscriptions:i}=t(),a=i.get(s);if(a){a.params=r,a.streamId=r.streamId,a.messageId=n||null,a.isActive=!0,a.processedEventIds.clear(),e({subscriptions:new Map(i)});return}let o=new Map(i);o.set(s,{chatId:s,streamId:r.streamId,params:r,handler:null,handlerId:null,messageId:n||null,isActive:!0,processedEventIds:new Set}),e({subscriptions:o})},addHandler:(s,r)=>{let{subscriptions:n,createSubscription:i}=t();n.get(s)||i(s,{streamId:""},null);let a=t().subscriptions.get(s);if(a){let n="handler-".concat(Date.now(),"-").concat(Math.random());return a.handler=r,a.handlerId=n,a.isActive||(a.isActive=!0,a.processedEventIds.clear()),e({subscriptions:new Map(t().subscriptions)}),()=>{let r=t().subscriptions,i=r.get(s);i&&i.handlerId===n&&(i.handler=null,i.handlerId=null,e({subscriptions:new Map(r)}))}}return()=>{}},addGlobalHandler:(s,r)=>{let{globalHandlers:n}=t(),i=new Map(n);return i.set(s,r),e({globalHandlers:i}),()=>{let r=new Map(t().globalHandlers);r.delete(s),e({globalHandlers:r})}},getSubscription:e=>t().subscriptions.get(e),updateMessageId:(s,r)=>{let{subscriptions:n}=t(),i=n.get(s);i&&(i.messageId=r,e({subscriptions:new Map(n)}))},emitEvent:(s,r)=>{let{subscriptions:n,globalHandlers:i}=t(),a=n.get(s);if(!(!a||a.processedEventIds.has(r.id))&&(a.isActive||a.handler)){if(a.processedEventIds.add(r.id),a.lastEventId=r.id,a.handler)try{a.handler(r,s,a.messageId||"")}catch(e){}for(let[e,t]of i)try{t(r,s,a.messageId||"")}catch(e){}e({subscriptions:new Map(n)})}},markCompleted:s=>{let{subscriptions:r}=t(),n=r.get(s);n&&(n.isActive=!1,n.processedEventIds.clear(),e({subscriptions:new Map(r)}))},removeSubscription:s=>{let{subscriptions:r}=t(),n=r.get(s);n&&(n.handler=null,n.handlerId=null,n.processedEventIds.clear());let i=new Map(r);i.delete(s),e({subscriptions:i})},hasActiveSubscription:e=>{let s=t().subscriptions.get(e);return(null==s?void 0:s.isActive)||!1},getActiveSubscriptions:()=>{let e=new Map;for(let[s,r]of t().subscriptions)r.isActive&&e.set(s,r);return e}})),s={createSubscription:(e,s,r)=>t.getState().createSubscription(e,s,r),addHandler:(e,s)=>t.getState().addHandler(e,s),addGlobalHandler:(e,s)=>t.getState().addGlobalHandler(e,s),getSubscription:e=>t.getState().getSubscription(e),updateMessageId:(e,s)=>t.getState().updateMessageId(e,s),emitEvent:(e,s)=>t.getState().emitEvent(e,s),markCompleted:e=>t.getState().markCompleted(e),removeSubscription:e=>t.getState().removeSubscription(e),hasActiveSubscription:e=>t.getState().hasActiveSubscription(e),getActiveSubscriptions:()=>t.getState().getActiveSubscriptions()}},966641:e=>{"use strict";e.s({WindowProvider:()=>n,useWindowWidth:()=>i});var t=e.i(290479),s=e.i(373150);let r=(0,s.createContext)({windowWidth:1280,breakpoints:{"2xs":375,xs:480,sm:640,md:768,lg:1024,xl:1280,"2xl":1536}});function n(e){let{children:n}=e,[i,a]=(0,s.useState)(1280);return(0,s.useEffect)(()=>{a(window.innerWidth);let e=()=>a(window.innerWidth);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,t.jsx)(r.Provider,{value:{windowWidth:i,breakpoints:{"2xs":375,xs:480,sm:640,md:768,lg:1024,xl:1280,"2xl":1536}},children:n})}function i(){let e=(0,s.useContext)(r);if(void 0===e)throw Error("useWindowWidth must be used within a WindowProvider");return e}},587870:e=>{"use strict";e.s({ViewTransitions:()=>l,useTransitionRouter:()=>u});var t=e.i(290479);e.i(86386);var s=e.i(397711),r=e.i(373150);function n(){return window.location.hash}function i(){return""}function a(e){return window.addEventListener("hashchange",e),()=>window.removeEventListener("hashchange",e)}let o=(0,r.createContext)(()=>()=>{});function l(e){let{children:l}=e,[c,d]=(0,r.useState)(null);return(0,r.useEffect)(()=>{c&&(c(),d(null))},[c]),!function(){let e=(0,s.usePathname)(),t=(0,r.useRef)(e),[o,l]=(0,r.useState)(null);(0,r.useEffect)(()=>{if(!("startViewTransition"in document))return()=>{};let e=()=>{let e,t=new Promise(t=>{e=t});l([new Promise(e=>{document.startViewTransition(()=>(e(),t))}),e])};return window.addEventListener("popstate",e),()=>{window.removeEventListener("popstate",e)}},[]),o&&t.current!==e&&(0,r.use)(o[0]);let c=(0,r.useRef)(o);(0,r.useEffect)(()=>{c.current=o},[o]);let d=(0,r.useSyncExternalStore)(a,n,i);(0,r.useEffect)(()=>{t.current=e,c.current&&(c.current[1](),c.current=null)},[d,e])}(),(0,t.jsx)(o.Provider,{value:d,children:l})}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e}).apply(this,arguments)}function d(e,t){if(null==e)return{};var s,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)s=i[r],t.indexOf(s)>=0||(n[s]=e[s]);return n}function u(){let e=(0,s.useRouter)(),t=(0,r.use)(o),n=(0,r.useCallback)(function(e){let{onTransitionReady:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!("startViewTransition"in document))return e();{let n=document.startViewTransition(()=>new Promise(s=>{(0,r.startTransition)(()=>{e(),t(()=>s)})}));s&&n.ready.then(s)}},[]),i=(0,r.useCallback)(function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var{onTransitionReady:r}=s,i=d(s,["onTransitionReady"]);n(()=>e.push(t,i),{onTransitionReady:r})},[n,e]),a=(0,r.useCallback)(function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var{onTransitionReady:r}=s,i=d(s,["onTransitionReady"]);n(()=>e.replace(t,i),{onTransitionReady:r})},[n,e]);return(0,r.useMemo)(()=>c({},e,{push:i,replace:a}),[i,a,e])}},983152:e=>{"use strict";e.s({Analytics:()=>n,useAnalytics:()=>r});var t=e.i(373150);function s(){return"undefined"!=typeof window&&window.dubAnalytics}function r(){let[e,r]=(0,t.useState)({partner:null,discount:null}),n=(0,t.useCallback)(()=>{s()&&window.dubAnalytics("ready",()=>{let{partner:e=null,discount:t=null}=window.DubAnalytics||{};r({partner:e,discount:t})})},[]),i=(0,t.useCallback)(e=>{s()&&window.dubAnalytics.trackClick(e)},[]);return(0,t.useEffect)(()=>{n()},[n]),{...e,trackClick:i}}function n(e){return(0,t.useEffect)(()=>{!function(e){var t,s,r,n,i,a,o;if("undefined"==typeof window)return;o="dubAnalytics",(a=window)[o]=a[o]||function(){(a[o].q=a[o].q||[]).push(arguments)},["trackClick"].forEach(function(e){a[o][e]=function(){a[o](e,...Array.from(arguments))}});let l="https://www.dubcdn.com/analytics/script",c=[];(null==(t=e.domainsConfig)?void 0:t.site)&&c.push("site-visit"),(null==(s=e.domainsConfig)?void 0:s.outbound)&&c.push("outbound-domains");let d=(null==(r=e.scriptProps)?void 0:r.src)||(c.length>0?"".concat(l,".").concat(c.join("."),".js"):"".concat(l,".js"));if(document.head.querySelector('script[src*="'.concat(d,'"]')))return;let u=document.createElement("script");if(u.src=d,u.defer=null==(i=null==(n=e.scriptProps)?void 0:n.defer)||i,u.setAttribute("data-sdkn","@dub/analytics"),u.setAttribute("data-sdkv","0.0.29"),e.apiHost&&u.setAttribute("data-api-host",e.apiHost),e.domainsConfig&&u.setAttribute("data-domains",JSON.stringify(e.domainsConfig)),e.shortDomain&&u.setAttribute("data-short-domain",e.shortDomain),e.attributionModel&&u.setAttribute("data-attribution-model",e.attributionModel),e.cookieOptions&&Object.keys(e.cookieOptions).length>0&&u.setAttribute("data-cookie-options",JSON.stringify(e.cookieOptions)),e.queryParam&&u.setAttribute("data-query-param",e.queryParam),e.scriptProps){let{src:t,...s}=e.scriptProps;Object.assign(u,s)}u.onerror=()=>{console.log("[Dub Web Analytics] failed to load script from ".concat(d,"."))},document.head.appendChild(u)}(e)},[e]),null}},766580:e=>{"use strict";e.s({FingerprintJSPro:()=>t});var t=e.i(268639)},671150:e=>{"use strict";e.s({useNuqsNextAppRouterAdapter:()=>n});var t=e.i(573949),s=e.i(397711),r=e.i(373150);function n(){let e=(0,s.useRouter)(),n=(0,s.useSearchParams)(),[i,a]=(0,r.useOptimistic)(n);return{searchParams:i,updateUrl:(0,r.useCallback)((s,n)=>{(0,r.startTransition)(()=>{n.shallow||a(s);let r=function(e,s){var r;let n=null!=(r=e.split("#")[0])?r:"";return n+(0,t.renderQueryString)(s)+location.hash}(location.origin+location.pathname,s);(0,t.debug)("[nuqs queue (app)] Updating url: %s",r),("push"===n.history?history.pushState:history.replaceState).call(history,null,"",r),n.scroll&&window.scrollTo(0,0),n.shallow||e.replace(r,{scroll:!1})})},[]),rateLimitFactor:3}}},524119:e=>{"use strict";e.s({NuqsAdapter:()=>s});var t=e.i(671150),s=(0,e.i(573949).createAdapterProvider)(t.useNuqsNextAppRouterAdapter)},518190:e=>{"use strict";e.s({PersistentStreamManager:()=>a});var t=e.i(290479),s=e.i(373150),r=e.i(814733),n=e.i(224706),i=e.i(256271);function a(){let e=(0,n.useGlobalStreamStore)(e=>e.activeStreams),r=(0,s.useMemo)(()=>Array.from(e.entries()).filter(e=>{let[t,s]=e;return"connecting"===s.status||"streaming"===s.status}),[e]);return(0,t.jsx)(t.Fragment,{children:r.map(e=>{let[s,r]=e;return(0,t.jsx)(o,{chatId:s,streamInfo:r},s)})})}let o=(0,s.memo)(e=>{let{chatId:t,streamInfo:a}=e,o=(0,s.useRef)(null),l=(0,s.useRef)(null),c=(0,n.useGlobalStreamStore)(e=>e.updateStreamStatus),d=r.api.useUtils();return r.api.message.streamEvents.useSubscription(a.subscriptionParams,{onData:e=>{l.current!==e.id&&(l.current=e.id,"messageId"===e.data.type?(o.current=e.data.messageId,i.globalStreamSubscriptions.updateMessageId(t,e.data.messageId),c(t,{messageId:e.data.messageId,lastEventId:e.id,status:"streaming"}),d.message.getActiveStreams.setData(void 0,s=>s?s.map(s=>s.chatId===t?{...s,messageId:e.data.messageId}:s):[{chatId:t,streamId:a.streamId,messageId:e.data.messageId,createdAt:new Date().toISOString()}])):c(t,{lastEventId:e.id,..."streaming"!==a.status&&{status:"streaming"}}),i.globalStreamSubscriptions.emitEvent(t,e))},onStarted:()=>{c(t,{status:"streaming"}),i.globalStreamSubscriptions.getSubscription(t)||i.globalStreamSubscriptions.createSubscription(t,a.subscriptionParams),d.message.getActiveStreams.setData(void 0,e=>{let s={chatId:t,streamId:a.streamId,messageId:void 0,createdAt:new Date().toISOString()};return e?e.some(e=>e.chatId===t)?e:[...e,s]:[s]})},onError:e=>{c(t,{status:"error",error:Error(e.message||"Stream error")}),d.message.getActiveStreams.setData(void 0,e=>e?e.filter(e=>e.chatId!==t):[])},onComplete:()=>{i.globalStreamSubscriptions.markCompleted(t),c(t,{status:"completed"}),d.message.getActiveStreams.setData(void 0,e=>e?e.filter(e=>e.chatId!==t):[])}}),null});o.displayName="StreamSubscription"},117284:e=>{"use strict";e.s({PostHogPageView:()=>n});var t=e.i(397711),s=e.i(892065),r=e.i(373150);function n(){let e=(0,t.usePathname)(),n=(0,t.useSearchParams)();return(0,r.useEffect)(()=>{if(e){try{var t,r,i,a;null==(t=(r=window).fbq)||t.call(r,"track","PageView"),null==(i=(a=window).rdt)||i.call(a,"track","PageVisit")}catch(e){console.error("Error tracking page view",e)}let o=e;(null==n?void 0:n.toString())&&(o="".concat(e,"?").concat(n.toString())),s.default.capture("$pageview",{$current_url:o})}},[e,n]),null}},764303:e=>{"use strict";e.s({default:()=>l});var t=e.i(290479),s=e.i(870007),r=e.i(373150),n=e.i(704255),i=e.i(457443),a=e.i(289702),o=e.i(340582);let l=e=>{let{open:l,onOpenChange:c,integration:d,status:u,updatedAt:m,onConnect:p,onDisconnect:g,isConnecting:h=!1,isDisconnecting:v=!1,errorMessage:f}=e,[b,S]=(0,r.useState)(!1),[x,w]=(0,r.useState)("main"),{trackConnectDialog:y}=(0,o.useTrackIntegrationEvents)(),P=async()=>{S(!0);try{await p()}finally{S(!1)}},I=async()=>{w("main"),S(!0);try{g()}finally{S(!1)}},j="CONNECTED"===u,E=!!f,A="PENDING"===u||h||v||b;return(0,t.jsx)(i.Dialog,{open:l,onOpenChange:e=>{y(d.name.toLowerCase().replace(/\s+/g,"-"),"integration_dialog",e),e&&w("main"),c(e)},children:(0,t.jsx)(i.DialogContent,{className:"p-7 w-[448px] gap-0 border-0",hideCloseButton:!0,preventEscapePropagation:!0,onEscapeKeyDown:e=>{e.stopPropagation(),"disconnect-confirm"===x&&(e.preventDefault(),w("main"))},children:"main"===x?(0,t.jsxs)(t.Fragment,{children:[E&&(0,t.jsxs)("div",{className:"mb-6 p-3 bg-destructive/10 rounded-md flex flex-row gap-3",children:[(0,t.jsx)(s.AlertCircle,{className:"w-7 h-7 text-destructive-solid shrink-0"}),(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsx)("p",{className:"text-body-xs-bold text-destructive",children:f})})]}),(0,t.jsxs)("div",{className:"flex flex-row items-center",children:[(0,t.jsx)("div",{className:"w-[40px] h-[40px] flex items-center justify-center shrink-0 border border-border rounded-md p-3",children:d.logo}),(0,t.jsx)(i.DialogTitle,{className:"ml-6 text-base font-semibold text-foreground text-body-sm-bold",children:d.name}),j&&(0,t.jsxs)("div",{className:"ml-auto flex items-center gap-6 text-body-xs-bold text-text-tertiary",children:[(0,t.jsx)("span",{children:(e=>{if(!e)return"Recently";let t=new Date(e);return"Connected ".concat(t.toLocaleDateString("en-US",{day:"numeric",month:"long",year:"numeric"}))})(m)}),(0,t.jsx)("div",{className:(0,a.cn)("w-6 h-6 bg-progressBar-backgroundGreen rounded-full flex items-center justify-center",E&&"bg-destructive/10"),children:(0,t.jsx)("div",{className:"w-5 h-5 bg-popover rounded-full flex items-center justify-center",children:(0,t.jsx)("div",{className:(0,a.cn)("w-3 h-3 bg-progressBar-foregroundGreen rounded-full",E&&"bg-destructive")})})})]})]}),(0,t.jsx)("p",{className:"text-body-sm-bold text-text-secondary tracking-[-0.32px] text-balance mt-4 mb-9",children:d.detailedDescription||d.description}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)(n.Button,{size:"xs",variant:"secondary",onClick:()=>c(!1),disabled:A,children:"Cancel"}),j?(0,t.jsxs)(n.Button,{variant:"connection",size:"xs",className:"px-6 group",onClick:()=>{w("disconnect-confirm")},disabled:A,children:[(0,t.jsx)("span",{className:"group-hover:hidden",children:v||A?"Disconnecting...":"Connected"}),(0,t.jsx)("span",{className:"hidden group-hover:inline",children:v||A?"Disconnecting...":"Disconnect"})]}):(0,t.jsx)(n.Button,{onClick:P,size:"xs",className:"px-6",disabled:A,children:h||A?"Connecting...":"Connect"})]})]}):(0,t.jsxs)("div",{className:"flex flex-col gap-[24px]",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsxs)(i.DialogTitle,{className:"text-heading-xs",children:["Disconnect ",d.name,"?"]}),(0,t.jsx)("p",{className:"text-body-sm !mt-0 text-text-secondary",children:"Files will no longer be synced to our platform."})]}),(0,t.jsxs)("div",{className:"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-4",children:[(0,t.jsx)(n.Button,{size:"xs",variant:"secondary",onClick:()=>{w("main")},disabled:A,children:"Cancel"}),(0,t.jsx)(n.Button,{variant:"destructive",size:"xs",className:"px-6",onClick:I,disabled:A,children:v||b?"Disconnecting...":"Disconnect"})]})]})})})}},359428:e=>{"use strict";e.s({IntegrationDialogProvider:()=>m});var t=e.i(290479),s=e.i(219821),r=e.i(397711),n=e.i(373150),i=e.i(764303),a=e.i(368436),o=e.i(340582),l=e.i(888305),c=e.i(885905),d=e.i(147740);let u=(0,s.default)(()=>e.r(677973)(e.i).then(e=>e.GoogleDrivePicker),{loadableGenerated:{modules:[141988]},ssr:!1}),m=()=>{var e;let{user:s}=(0,c.useAuth)(),m=(0,r.useRouter)(),p=(0,r.useSearchParams)(),{trackConnectStartedEvent:g}=(0,o.useTrackIntegrationEvents)(),{isOpen:h,integrationId:v,closeIntegrationDialog:f,openIntegrationDialog:b}=(0,d.useIntegrationDialogStore)(),[S,x]=(0,n.useState)(!1),[w,y]=(0,n.useState)(!1),{googleDriveStatus:P,oneDriveStatus:I,sharePointStatus:j,notionStatus:E,mendeleyStatus:A,zoteroStatus:N,disconnectIntegration:C,isDisconnecting:D,getIntegrationUpdatedAt:T,getIntegrationError:k}=(0,a.useIntegrations)(),M=(0,n.useMemo)(()=>{if(!(null==s?void 0:s.id))return{};let e={"google-drive":P,mendeley:A,notion:E,onedrive:I,sharepoint:j,zotero:N},r={};for(let n of l.INTEGRATION_ORDER){let i=l.INTEGRATION_CONFIG[n],a=i.icon;r[n]={id:i.id,logo:(0,t.jsx)(a,{className:"w-9 h-9"}),name:i.name,description:i.description,detailedDescription:i.detailedDescription,status:e[n],updatedAt:T(n),errorMessage:k(n),onConnect:()=>{let e="notion"===n?"settings":"plus_menu";if(g(n,e),"google-drive"===n)return void y(!0);if(n&&(null==p?void 0:p.has(n))){let e=new URLSearchParams(p);e.delete(n);let t="".concat(window.location.pathname).concat(e.toString()?"?".concat(e.toString()):"");window.history.replaceState(null,"",t)}if("onedrive"===n||"sharepoint"===n){let e=k(n)?"&reconnect=true":"";x(!0),m.push("/api/".concat(n,"/connect?userId=").concat(s.id).concat(e))}else"mendeley"===n||"zotero"===n?(x(!0),m.push("/api/".concat(n,"/connect?userId=").concat(s.id,"&step=init"))):(x(!0),m.push("/api/".concat(n,"/connect?userId=").concat(s.id)))},onDisconnect:()=>{C(n)}}}return r},[null==s?void 0:s.id,P,I,j,E,A,N,m,g,C,T,k]),O=v?M[v]:null;return((0,n.useEffect)(()=>{(null==O?void 0:O.status)&&"PENDING"!==O.status&&S&&x(!1)},[null==O?void 0:O.status,S]),(0,n.useEffect)(()=>{if(S&&v&&p){let e=p.get(v);("connected"===e||"error"===e||"existing"===e||"unauthorized"===e)&&x(!1)}},[p,v,S]),(0,n.useEffect)(()=>{if(!h&&p)for(let e of["google-drive","onedrive","sharepoint","notion","mendeley","zotero"]){let t=p.get(e);if("error"===t||"unauthorized"===t||"existing"===t){let t=setTimeout(()=>{b(e)},100);return()=>clearTimeout(t)}}},[h,p,b]),(0,n.useEffect)(()=>{"google-drive"===v&&h||y(!1)},[v,h]),O)?(0,t.jsxs)(t.Fragment,{children:[w&&"google-drive"===v&&(0,t.jsx)(u,{onCancel:()=>y(!1),onSuccess:()=>{y(!1)}}),(0,t.jsx)(i.default,{open:h,onOpenChange:e=>{if(!e&&(f(),x(!1),y(!1),v&&(null==p?void 0:p.has(v)))){let e=new URLSearchParams(p);e.delete(v);let t="".concat(window.location.pathname).concat(e.toString()?"?".concat(e.toString()):"");window.history.replaceState(null,"",t)}},integration:O,status:O.status,updatedAt:"string"==typeof O.updatedAt?O.updatedAt:null==(e=O.updatedAt)?void 0:e.toISOString(),onConnect:O.onConnect,onDisconnect:O.onDisconnect,isConnecting:S,isDisconnecting:D,errorMessage:(()=>{if(!v||!p||!O)return null;let e=p.get(v);if(!e)return null;let t=O.name;switch(e){case"error":return"Anara could not connect to ".concat(t,". Try again to sync your files.");case"unauthorized":return"You are not authorized to connect to ".concat(t,".");case"existing":return"".concat(t," is already connected to your account.");default:return null}})()||O.errorMessage||void 0})]}):null}},298526:e=>{"use strict";e.s({Toaster:()=>n});var t=e.i(290479),s=e.i(625483),r=e.i(525094);let n=e=>{let{...n}=e,{theme:i="system"}=(0,s.useTheme)();return(0,t.jsx)(r.Toaster,{theme:i,gap:10,offset:20,position:"bottom-left",className:"toaster group",toastOptions:{style:{width:300},classNames:{toast:"group toast group-[.toaster]:rounded-4 group-[.toaster]:text-sm group-[.toaster]:px-3 group-[.toaster]:py-2 group-[.toaster]:bg-control-primary group-[.toaster]:text-text-primary group-[.toaster]:border group-[.toaster]:border-border-primary group-[.toaster]:shadow-shadowHigh ![height:auto]",description:"group-[.toast]:text-text-secondary",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-text-primary-foreground",cancelButton:"group-[.toast]:bg-control-primary group-[.toast]:text-text-secondary",content:"![height:auto]"}},...n})}},923830:e=>{"use strict";e.s({ThemeProvider:()=>r});var t=e.i(290479),s=e.i(625483);function r(e){let{children:r,...n}=e;return(0,t.jsx)(s.ThemeProvider,{...n,children:r})}},811152:e=>{"use strict";e.s({ModelFallback:()=>a});var t=e.i(950347),s=e.i(449097),r=e.i(743305),n=e.i(373150),i=e.i(885905);let a=()=>{let{userPlanDetails:e}=(0,i.useAuth)(),{settings:a,updateSettings:o}=(0,s.useSettings)(),{usage:l,limits:c,isFreePlan:d}=(0,t.default)();return(0,n.useEffect)(()=>{e&&(d&&!(0,r.isDefaultModel)(a.modelName)&&o({...a,modelName:r.DEFAULT_AI_MODELS[0],maxLength:250}),d||(0,r.isExistingModel)(a.modelName)||o({...a,modelName:r.PRO_AI_MODELS[0],maxLength:250}))},[a,o,e,l,c]),null}},965199:e=>{"use strict";e.s({PHProvider:()=>i});var t=e.i(290479),s=e.i(369587),r=e.i(892065),n=e.i(623053);function i(e){let{children:i}=e;return"production"!==s.env.NODE_ENV?i:(r.default.init(s.env.NEXT_PUBLIC_POSTHOG_KEY,{api_host:s.env.NEXT_PUBLIC_POSTHOG_HOST||"https://us.i.posthog.com",autocapture:!1,person_profiles:"identified_only",loaded:e=>{"development"===s.env.NODE_ENV&&e.debug()}}),(0,t.jsx)(n.PostHogProvider,{client:r.default,children:i}))}},696593:e=>{"use strict";e.s({Providers:()=>N});var t=e.i(290479);e.i(923328);var s=e.i(766580),r=e.i(444042),n=e.i(208955),i=e.i(369587),a=e.i(608294),o=e.i(397711),l=e.i(587870),c=e.i(524119),d=e.i(373150),u=e.i(52333),m=e.i(518190),p=e.i(117284),g=e.i(359428),h=e.i(298526),v=e.i(923830),f=e.i(185296),b=e.i(457910),S=e.i(885905),x=e.i(811152),w=e.i(250928),y=e.i(966641),P=e.i(814733),I=e.i(965199);let j=i.env.NEXT_PUBLIC_FPJS_PUBLIC_API_KEY,E=["/pricing","/login","/signup","/","/changelog","/no-emails","/discount-checkout","/faqs","/payment","/summarize","/affiliate","/blog","/homepage","/researchers","/students","/teams","/accept-discount","/subprocessors"];function A(e){let{children:i}=e,A=(0,o.usePathname)(),N=E.includes(A||"")||(A||"").startsWith("/blog")||(A||"").startsWith("/authors")||(A||"").startsWith("/papers")||(A||"").startsWith("/changelog")?"light":void 0,C="/"===A||"/pricing"===A||"/changelog"===A||(A||"").startsWith("/changelog/")||"/faqs"===A||"/login"===A||"/checkout"===A||"/no-emails"===A||"/discount-checkout"===A||"/researchers"===A||"/students"===A||"/teams"===A||"/accept-discount"===A||(A||"").startsWith("/blog")||(A||"").startsWith("/authors")||(A||"").startsWith("/papers")||(A||"").startsWith("/chat-paper")||"/404"===A;return"/auth/error"===A||"/auth/email"===A?(0,t.jsx)(l.ViewTransitions,{children:(0,t.jsx)(v.ThemeProvider,{attribute:"class",defaultTheme:"light",enableSystem:!0,disableTransitionOnChange:!0,storageKey:"unriddle-theme",children:i})}):(0,t.jsx)(P.TRPCReactProvider,{children:(0,t.jsx)(l.ViewTransitions,{children:(0,t.jsx)(v.ThemeProvider,{attribute:"class",defaultTheme:"light",enableSystem:!0,disableTransitionOnChange:!0,storageKey:"unriddle-theme",forcedTheme:N,children:(0,t.jsx)(r.FpjsProvider,{loadOptions:{apiKey:j,endpoint:["https://metrics.anara.com",s.FingerprintJSPro.defaultEndpoint],scriptUrlPattern:["https://metrics.anara.com/web/v<version>/<apiKey>/loader_v<loaderVersion>.js",s.FingerprintJSPro.defaultScriptUrlPattern]},children:(0,t.jsx)(c.NuqsAdapter,{children:(0,t.jsx)(a.Provider,{children:(0,t.jsx)(I.PHProvider,{children:(0,t.jsx)(n.LiveblocksProvider,{authEndpoint:"/api/liveblocks-auth",children:(0,t.jsx)(u.default.Provider,{initialValue:null,children:(0,t.jsxs)(S.AuthContextProvider,{isLandingPage:C,children:[(0,t.jsx)(x.ModelFallback,{}),(0,t.jsx)(w.UnriddleContextProvider,{children:(0,t.jsx)(y.WindowProvider,{children:(0,t.jsx)(b.TooltipProvider,{delayDuration:700,skipDelayDuration:300,children:(0,t.jsxs)(f.TourProvider,{children:[(0,t.jsx)(m.PersistentStreamManager,{}),(0,t.jsx)(d.Suspense,{fallback:null,children:(0,t.jsx)(p.PostHogPageView,{})}),(0,t.jsx)(d.Suspense,{fallback:null,children:(0,t.jsx)(g.IntegrationDialogProvider,{})}),(0,t.jsx)(h.Toaster,{}),i]})})})})]})})})})})})})})})})}function N(e){let{children:s,session:r}=e;return(0,t.jsx)(A,{session:r,children:s})}},677973:e=>{e.v(t=>Promise.all(["static/chunks/547dad920b8e5ee3.js"].map(t=>e.l(t))).then(()=>t(141988)))}}]);

//# sourceMappingURL=d5f053d82d51588d.js.map