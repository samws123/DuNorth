(globalThis.TURBOPACK=globalThis.TURBOPACK||[]).push(["object"==typeof document?document.currentScript:void 0,{325900:e=>{"use strict";e.s({createFetch:()=>E});var t=Object.defineProperty,r=Object.defineProperties,n=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,a=(e,r,n)=>r in e?t(e,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[r]=n,l=(e,t)=>{for(var r in t||(t={}))o.call(t,r)&&a(e,r,t[r]);if(i)for(var r of i(t))s.call(t,r)&&a(e,r,t[r]);return e},u=(e,t)=>r(e,n(t)),c=class extends Error{constructor(e,t,r){super(t||e.toString(),{cause:r}),this.status=e,this.statusText=t,this.error=r}},d=async(e,t)=>{var r,n,i,o,s,a;let l=t||{},u={onRequest:[null==t?void 0:t.onRequest],onResponse:[null==t?void 0:t.onResponse],onSuccess:[null==t?void 0:t.onSuccess],onError:[null==t?void 0:t.onError],onRetry:[null==t?void 0:t.onRetry]};if(!t||!(null==t?void 0:t.plugins))return{url:e,options:l,hooks:u};for(let c of(null==t?void 0:t.plugins)||[]){if(c.init){let n=await (null==(r=c.init)?void 0:r.call(c,e.toString(),t));l=n.options||l,e=n.url}u.onRequest.push(null==(n=c.hooks)?void 0:n.onRequest),u.onResponse.push(null==(i=c.hooks)?void 0:i.onResponse),u.onSuccess.push(null==(o=c.hooks)?void 0:o.onSuccess),u.onError.push(null==(s=c.hooks)?void 0:s.onError),u.onRetry.push(null==(a=c.hooks)?void 0:a.onRetry)}return{url:e,options:l,hooks:u}},f=class{shouldAttemptRetry(e,t){return this.options.shouldRetry?Promise.resolve(e<this.options.attempts&&this.options.shouldRetry(t)):Promise.resolve(e<this.options.attempts)}getDelay(){return this.options.delay}constructor(e){this.options=e}},p=class{shouldAttemptRetry(e,t){return this.options.shouldRetry?Promise.resolve(e<this.options.attempts&&this.options.shouldRetry(t)):Promise.resolve(e<this.options.attempts)}getDelay(e){return Math.min(this.options.maxDelay,this.options.baseDelay*2**e)}constructor(e){this.options=e}},h=async e=>{let t={},r=async e=>"function"==typeof e?await e():e;if(null==e?void 0:e.auth){if("Bearer"===e.auth.type){let n=await r(e.auth.token);if(!n)return t;t.authorization="Bearer ".concat(n)}else if("Basic"===e.auth.type){let n=r(e.auth.username),i=r(e.auth.password);if(!n||!i)return t;t.authorization="Basic ".concat(btoa("".concat(n,":").concat(i)))}else if("Custom"===e.auth.type){let n=r(e.auth.value);if(!n)return t;t.authorization="".concat(r(e.auth.prefix)," ").concat(n)}}return t},g=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function v(e){if(void 0===e)return!1;let t=typeof e;return"string"===t||"number"===t||"boolean"===t||null===t||"object"===t&&(!!Array.isArray(e)||!e.buffer&&(e.constructor&&"Object"===e.constructor.name||"function"==typeof e.toJSON))}function b(e){try{return JSON.parse(e)}catch(t){return e}}function m(e){return"function"==typeof e}async function y(e){let t=new Headers(null==e?void 0:e.headers);for(let[r,n]of Object.entries(await h(e)||{}))t.set(r,n);if(!t.has("content-type")){let r=v(null==e?void 0:e.body)?"application/json":null;r&&t.set("content-type",r)}return t}var R=class e extends Error{constructor(t,r){super(r||JSON.stringify(t,null,2)),this.issues=t,Object.setPrototypeOf(this,e.prototype)}};async function w(e,t){let r=await e["~standard"].validate(t);if(r.issues)throw new R(r.issues);return r.value}var A=["get","post","put","patch","delete"],E=e=>async function(t,r){let n,i=u(l(l({},e),r),{plugins:[...(null==e?void 0:e.plugins)||[],(n=e||{},{id:"apply-schema",name:"Apply Schema",version:"1.0.0",async init(e,t){var r,i,o,s;let a=(null==(i=null==(r=n.plugins)?void 0:r.find(t=>{var r;return null!=(r=t.schema)&&!!r.config&&(e.startsWith(t.schema.config.baseURL||"")||e.startsWith(t.schema.config.prefix||""))}))?void 0:i.schema)||n.schema;if(a){let r=e;(null==(o=a.config)?void 0:o.prefix)&&r.startsWith(a.config.prefix)&&(r=r.replace(a.config.prefix,""),a.config.baseURL&&(e=e.replace(a.config.prefix,a.config.baseURL))),(null==(s=a.config)?void 0:s.baseURL)&&r.startsWith(a.config.baseURL)&&(r=r.replace(a.config.baseURL,""));let n=a.schema[r];if(n){let r=u(l({},t),{method:n.method,output:n.output});return(null==t?void 0:t.disableValidation)||(r=u(l({},r),{body:n.input?await w(n.input,null==t?void 0:t.body):null==t?void 0:t.body,params:n.params?await w(n.params,null==t?void 0:t.params):null==t?void 0:t.params,query:n.query?await w(n.query,null==t?void 0:t.query):null==t?void 0:t.query})),{url:e,options:r}}}return{url:e,options:t}}})]});if(null==e?void 0:e.catchAllError)try{return await T(t,i)}catch(e){return{data:null,error:{status:500,statusText:"Fetch Error",message:"Fetch related error. Captured by catchAllError option. See error property for more details.",error:e}}}return await T(t,i)},T=async(e,t)=>{var r,n,i,o,s,a,h,R;let{hooks:E,url:S,options:O}=await d(e,t),P=function(e){if(null==e?void 0:e.customFetchImpl)return e.customFetchImpl;if("undefined"!=typeof globalThis&&m(globalThis.fetch))return globalThis.fetch;if("undefined"!=typeof window&&m(window.fetch))return window.fetch;throw Error("No fetch implementation found")}(O),_=new AbortController,U=null!=(r=O.signal)?r:_.signal,I=function(e,t){let{baseURL:r,params:n,query:i}=t||{query:{},params:{},baseURL:""},o=e.startsWith("http")?e.split("/").slice(0,3).join("/"):r||"";if(e.startsWith("@")){let t=e.toString().split("@")[1].split("/")[0];A.includes(t)&&(e=e.replace("@".concat(t,"/"),"/"))}o.endsWith("/")||(o+="/");let[s,a]=e.replace(o,"").split("?"),l=new URLSearchParams(a);for(let[e,t]of Object.entries(i||{}))null!=t&&l.set(e,String(t));if(n)if(Array.isArray(n))for(let[e,t]of s.split("/").filter(e=>e.startsWith(":")).entries()){let r=n[e];s=s.replace(t,r)}else for(let[e,t]of Object.entries(n))s=s.replace(":".concat(e),String(t));(s=s.split("/").map(encodeURIComponent).join("/")).startsWith("/")&&(s=s.slice(1));let u=l.toString();return(u=u.length>0?"?".concat(u).replace(/\+/g,"%20"):"",o.startsWith("http"))?new URL("".concat(s).concat(u),o):"".concat(o).concat(s).concat(u)}(S,O),C=function(e){if(!(null==e?void 0:e.body))return null;let t=new Headers(null==e?void 0:e.headers);if(v(e.body)&&!t.has("content-type")){for(let[t,r]of Object.entries(null==e?void 0:e.body))r instanceof Date&&(e.body[t]=r.toISOString());return JSON.stringify(e.body)}return e.body}(O),L=await y(O),N=function(e,t){var r;if(null==t?void 0:t.method)return t.method.toUpperCase();if(e.startsWith("@")){let n=null==(r=e.split("@")[1])?void 0:r.split("/")[0];return A.includes(n)?n.toUpperCase():(null==t?void 0:t.body)?"POST":"GET"}return(null==t?void 0:t.body)?"POST":"GET"}(S,O),D=u(l({},O),{url:I,headers:L,body:C,method:N,signal:U});for(let e of E.onRequest)if(e){let t=await e(D);t instanceof Object&&(D=t)}("pipeTo"in D&&"function"==typeof D.pipeTo||"function"==typeof(null==(n=null==t?void 0:t.body)?void 0:n.pipe))&&!("duplex"in D)&&(D.duplex="half");let{clearTimeout:x}=function(e,t){let r;return!(null==e?void 0:e.signal)&&(null==e?void 0:e.timeout)&&(r=setTimeout(()=>null==t?void 0:t.abort(),null==e?void 0:e.timeout)),{abortTimeout:r,clearTimeout:()=>{r&&clearTimeout(r)}}}(O,_),j=await P(D.url,D);x();let W={response:j,request:D};for(let e of E.onResponse)if(e){let r=await e(u(l({},W),{response:(null==(i=null==t?void 0:t.hookOptions)?void 0:i.cloneResponse)?j.clone():j}));r instanceof Response?j=r:r instanceof Object&&(j=r.response)}if(j.ok){if("HEAD"===D.method)return{data:"",error:null};let e=function(e){let t=e.headers.get("content-type"),r=new Set(["image/svg","application/xml","application/xhtml","application/html"]);if(!t)return"json";let n=t.split(";").shift()||"";return g.test(n)?"json":r.has(n)||n.startsWith("text/")?"text":"blob"}(j),r={data:"",response:j,request:D};if("json"===e||"text"===e){let e=await j.text(),t=null!=(o=D.jsonParser)?o:b;r.data=await t(e)}else r.data=await j[e]();for(let e of((null==D?void 0:D.output)&&D.output&&!D.disableValidation&&(r.data=await w(D.output,r.data)),E.onSuccess))e&&await e(u(l({},r),{response:(null==(s=null==t?void 0:t.hookOptions)?void 0:s.cloneResponse)?j.clone():j}));return(null==t?void 0:t.throw)?r.data:{data:r.data,error:null}}let B=null!=(a=null==t?void 0:t.jsonParser)?a:b,k=await j.text(),q=function(e){try{return JSON.parse(e),!0}catch(e){return!1}}(k),K=q?await B(k):null,M={response:j,responseText:k,request:D,error:u(l({},K),{status:j.status,statusText:j.statusText})};for(let e of E.onError)e&&await e(u(l({},M),{response:(null==(h=null==t?void 0:t.hookOptions)?void 0:h.cloneResponse)?j.clone():j}));if(null==t?void 0:t.retry){let r=function(e){if("number"==typeof e)return new f({type:"linear",attempts:e,delay:1e3});switch(e.type){case"linear":return new f(e);case"exponential":return new p(e);default:throw Error("Invalid retry strategy")}}(t.retry),n=null!=(R=t.retryAttempt)?R:0;if(await r.shouldAttemptRetry(n,j)){for(let e of E.onRetry)e&&await e(W);let i=r.getDelay(n);return await new Promise(e=>setTimeout(e,i)),await T(e,u(l({},t),{retryAttempt:n+1}))}}if(null==t?void 0:t.throw)throw new c(j.status,j.statusText,q?K:k);return{data:null,error:u(l({},K),{status:j.status,statusText:j.statusText})}}},427479:e=>{"use strict";e.s({e:()=>o});var t,r=e.i(227541);let n=Object.create(null),i=e=>{var t,r;return(null==(t=globalThis.process)?void 0:t.env)||(null==(r=globalThis.Deno)?void 0:r.env.toObject())||globalThis.__env__||(e?n:globalThis)},o=new Proxy(n,{get(e,t){var r;return null!=(r=i()[t])?r:n[t]},has:(e,t)=>t in i()||t in n,set:(e,t,r)=>(i(!0)[t]=r,!0),deleteProperty(e,t){if(!t)return!1;let r=i(!0);return delete r[t],!0},ownKeys:()=>Object.keys(i(!0))});"test"===(void 0!==r.default&&r.default.env&&"production"||"")||(t=o.TEST)},945506:e=>{"use strict";e.s({atom:()=>i});let t=[],r=0,n=0,i=e=>{let i=[],o={get:()=>(o.lc||o.listen(()=>{})(),o.value),lc:0,listen:e=>(o.lc=i.push(e),()=>{for(let n=r+4;n<t.length;)t[n]===e?t.splice(n,4):n+=4;let n=i.indexOf(e);~n&&(i.splice(n,1),--o.lc||o.off())}),notify(e,s){n++;let a=!t.length;for(let r of i)t.push(r,o.value,e,s);if(a){for(r=0;r<t.length;r+=4)t[r](t[r+1],t[r+2],t[r+3]);t.length=0}},off(){},set(e){let t=o.value;t!==e&&(o.value=e,o.notify(t))},subscribe(e){let t=o.listen(e);return e(o.value),t},value:e};return o}},790973:e=>{"use strict";e.s({onMount:()=>t});let t=(e,t)=>((e,t,r,n)=>(e.events=e.events||{},e.events[r+10]||(e.events[r+10]=n(t=>{e.events[r].reduceRight((e,t)=>(t(e),e),{shared:{},...t})})),e.events[r]=e.events[r]||[],e.events[r].push(t),()=>{let n=e.events[r],i=n.indexOf(t);n.splice(i,1),n.length||(delete e.events[r],e.events[r+10](),delete e.events[r+10])}))(e,r=>{let n=t(r);n&&e.events[6].push(n)},5,t=>{let r=e.listen;e.listen=function(){for(var n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];return e.lc||e.active||(e.active=!0,t()),r(...i)};let n=e.off;return e.events[6]=[],e.off=()=>{n(),setTimeout(()=>{if(e.active&&!e.lc){for(let t of(e.active=!1,e.events[6]))t();e.events[6]=[]}},1e3)},()=>{e.listen=r,e.off=n}})},509697:e=>{"use strict";e.s({u:()=>i});var t=e.i(945506),r=e.i(790973);let n="undefined"==typeof window,i=(e,i,o,s)=>{let a=(0,t.atom)({data:null,error:null,isPending:!0,isRefetching:!1,refetch:()=>l()}),l=()=>{let e="function"==typeof s?s({data:a.get().data,error:a.get().error,isPending:a.get().isPending}):s;return o(i,{...e,async onSuccess(t){var r;a.set({data:t.data,error:null,isPending:!1,isRefetching:!1,refetch:a.value.refetch}),await (null==e||null==(r=e.onSuccess)?void 0:r.call(e,t))},async onError(t){var r,n;let{request:i}=t,o="number"==typeof i.retry?i.retry:null==(r=i.retry)?void 0:r.attempts,s=i.retryAttempt||0;o&&s<o||(a.set({error:t.error,data:null,isPending:!1,isRefetching:!1,refetch:a.value.refetch}),await (null==e||null==(n=e.onError)?void 0:n.call(e,t)))},async onRequest(t){var r;let n=a.get();a.set({isPending:null===n.data,data:n.data,error:null,isRefetching:!0,refetch:a.value.refetch}),await (null==e||null==(r=e.onRequest)?void 0:r.call(e,t))}})};e=Array.isArray(e)?e:[e];let u=!1;for(let t of e)t.subscribe(()=>{n||(u?l():(0,r.onMount)(a,()=>(setTimeout(()=>{l()},0),u=!0,()=>{a.off(),t.off()})))});return a}},887130:e=>{"use strict";e.s({B:()=>t});class t extends Error{constructor(e,t){super(e),this.name="BetterAuthError",this.message=e,this.cause=t,this.stack=""}}},884532:e=>{"use strict";e.s({createAccessControl:()=>r});var t=e.i(887130);function r(e){return{newRole:e=>{var r;return{authorize(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"AND",i=!1;for(let[o,s]of Object.entries(e)){let e=r[o];if(!e)return{success:!1,error:"You are not allowed to access resource: ".concat(o)};if(Array.isArray(s))i=s.every(t=>e.includes(t));else if("object"==typeof s)i="OR"===s.connector?s.actions.some(t=>e.includes(t)):s.actions.every(t=>e.includes(t));else throw new t.B("Invalid access control request");if(i&&"OR"===n)return{success:i};if(!i&&"AND"===n)return{success:!1,error:'unauthorized to access resource "'.concat(o,'"')}}return i?{success:i}:{success:!1,error:"Not authorized"}},statements:r=e}},statements:e}}},325466:e=>{"use strict";e.s({adminAc:()=>n,defaultRoles:()=>s,memberAc:()=>o,ownerAc:()=>i});var t=e.i(884532);e.i(887130);let r=(0,t.createAccessControl)({organization:["update","delete"],member:["create","update","delete"],invitation:["create","cancel"],team:["create","update","delete"]}),n=r.newRole({organization:["update"],invitation:["create","cancel"],member:["create","update","delete"],team:["create","update","delete"]}),i=r.newRole({organization:["update","delete"],member:["create","update","delete"],invitation:["create","cancel"],team:["create","update","delete"]}),o=r.newRole({organization:[],member:[],invitation:[],team:[]}),s={admin:n,owner:i,member:o}},321594:e=>{"use strict";e.s({h:()=>r});var t=e.i(325466);let r=e=>{if(!e.permissions&&!e.permission)return!1;let r=e.role.split(","),n=e.options.roles||t.defaultRoles,i=e.options.creatorRole||"owner",o=r.includes(i),s=e.allowCreatorAllPermissions||!1;if(o&&s)return!0;for(let t of r){var a;let r=n[t],i=null==r?void 0:r.authorize(null!=(a=e.permissions)?a:e.permission);if(null==i?void 0:i.success)return!0}return!1}},241230:e=>{"use strict";function t(e){let t=new Uint8Array(e),r="";for(let e of t)r+=String.fromCharCode(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}e.s({bufferToBase64URLString:()=>t})},483713:e=>{"use strict";function t(e){let t=e.replace(/-/g,"+").replace(/_/g,"/"),r=(4-t.length%4)%4,n=atob(t.padEnd(t.length+r,"=")),i=new ArrayBuffer(n.length),o=new Uint8Array(i);for(let e=0;e<n.length;e++)o[e]=n.charCodeAt(e);return i}e.s({base64URLStringToBuffer:()=>t})},795571:e=>{"use strict";function t(){var e;return r.stubThis((null==(e=globalThis)?void 0:e.PublicKeyCredential)!==void 0&&"function"==typeof globalThis.PublicKeyCredential)}e.s({browserSupportsWebAuthn:()=>t});let r={stubThis:e=>e}},707065:e=>{"use strict";e.s({toPublicKeyCredentialDescriptor:()=>r});var t=e.i(483713);function r(e){let{id:r}=e;return{...e,id:(0,t.base64URLStringToBuffer)(r),transports:e.transports}}},362943:e=>{"use strict";function t(e){return"localhost"===e||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}e.s({isValidDomain:()=>t})},457317:e=>{"use strict";e.s({WebAuthnError:()=>t});class t extends Error{constructor({message:e,code:t,cause:r,name:n}){super(e,{cause:r}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=null!=n?n:r.name,this.code=t}}},550398:e=>{"use strict";e.s({identifyRegistrationError:()=>n});var t=e.i(362943),r=e.i(457317);function n(e){let{error:n,options:i}=e,{publicKey:o}=i;if(!o)throw Error("options was missing required publicKey property");if("AbortError"===n.name){if(i.signal instanceof AbortSignal)return new r.WebAuthnError({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if("ConstraintError"===n.name){var s,a,l;if((null==(s=o.authenticatorSelection)?void 0:s.requireResidentKey)===!0)return new r.WebAuthnError({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if("conditional"===i.mediation&&(null==(a=o.authenticatorSelection)?void 0:a.userVerification)==="required")return new r.WebAuthnError({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if((null==(l=o.authenticatorSelection)?void 0:l.userVerification)==="required")return new r.WebAuthnError({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else if("InvalidStateError"===n.name)return new r.WebAuthnError({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});else if("NotAllowedError"===n.name)return new r.WebAuthnError({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});else if("NotSupportedError"===n.name)return new r.WebAuthnError(0===o.pubKeyCredParams.filter(e=>"public-key"===e.type).length?{message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}:{message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});else if("SecurityError"===n.name){let e=globalThis.location.hostname;if(!(0,t.isValidDomain)(e))return new r.WebAuthnError({message:"".concat(globalThis.location.hostname," is an invalid domain"),code:"ERROR_INVALID_DOMAIN",cause:n});if(o.rp.id!==e)return new r.WebAuthnError({message:'The RP ID "'.concat(o.rp.id,'" is invalid for this domain'),code:"ERROR_INVALID_RP_ID",cause:n})}else if("TypeError"===n.name){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new r.WebAuthnError({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if("UnknownError"===n.name)return new r.WebAuthnError({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n});return n}},368372:e=>{"use strict";e.s({WebAuthnAbortService:()=>t});let t=new class{createNewAbortSignal(){if(this.controller){let e=Error("Cancelling existing WebAuthn API call for new one");e.name="AbortError",this.controller.abort(e)}let e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){let e=Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}constructor(){Object.defineProperty(this,"controller",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}}},932382:e=>{"use strict";e.s({toAuthenticatorAttachment:()=>r});let t=["cross-platform","platform"];function r(e){if(e&&!(0>t.indexOf(e)))return e}},831242:e=>{"use strict";e.s({startRegistration:()=>l});var t=e.i(241230),r=e.i(483713),n=e.i(795571),i=e.i(707065),o=e.i(550398),s=e.i(368372),a=e.i(932382);async function l(e){var l;let c,d,f,p,h;!e.optionsJSON&&e.challenge&&(console.warn("startRegistration() was not called correctly. It will try to continue with the provided options, but this call should be refactored to use the expected call structure instead. See https://simplewebauthn.dev/docs/packages/browser#typeerror-cannot-read-properties-of-undefined-reading-challenge for more information."),e={optionsJSON:e});let{optionsJSON:g,useAutoRegister:v=!1}=e;if(!(0,n.browserSupportsWebAuthn)())throw Error("WebAuthn is not supported in this browser");let b={...g,challenge:(0,r.base64URLStringToBuffer)(g.challenge),user:{...g.user,id:(0,r.base64URLStringToBuffer)(g.user.id)},excludeCredentials:null==(l=g.excludeCredentials)?void 0:l.map(i.toPublicKeyCredentialDescriptor)},m={};v&&(m.mediation="conditional"),m.publicKey=b,m.signal=s.WebAuthnAbortService.createNewAbortSignal();try{c=await navigator.credentials.create(m)}catch(e){throw(0,o.identifyRegistrationError)({error:e,options:m})}if(!c)throw Error("Registration was not completed");let{id:y,rawId:R,response:w,type:A}=c;if("function"==typeof w.getTransports&&(f=w.getTransports()),"function"==typeof w.getPublicKeyAlgorithm)try{p=w.getPublicKeyAlgorithm()}catch(e){u("getPublicKeyAlgorithm()",e)}if("function"==typeof w.getPublicKey)try{let e=w.getPublicKey();null!==e&&(h=(0,t.bufferToBase64URLString)(e))}catch(e){u("getPublicKey()",e)}if("function"==typeof w.getAuthenticatorData)try{d=(0,t.bufferToBase64URLString)(w.getAuthenticatorData())}catch(e){u("getAuthenticatorData()",e)}return{id:y,rawId:(0,t.bufferToBase64URLString)(R),response:{attestationObject:(0,t.bufferToBase64URLString)(w.attestationObject),clientDataJSON:(0,t.bufferToBase64URLString)(w.clientDataJSON),transports:f,publicKeyAlgorithm:p,publicKey:h,authenticatorData:d},type:A,clientExtensionResults:c.getClientExtensionResults(),authenticatorAttachment:(0,a.toAuthenticatorAttachment)(c.authenticatorAttachment)}}function u(e,t){console.warn("The browser extension that intercepted this WebAuthn API call incorrectly implemented ".concat(e,". You should report this error to them.\n"),t)}},456535:e=>{"use strict";e.s({browserSupportsWebAuthnAutofill:()=>r});var t=e.i(795571);function r(){if(!(0,t.browserSupportsWebAuthn)())return n.stubThis(new Promise(e=>e(!1)));let e=globalThis.PublicKeyCredential;return(null==e?void 0:e.isConditionalMediationAvailable)===void 0?n.stubThis(new Promise(e=>e(!1))):n.stubThis(e.isConditionalMediationAvailable())}let n={stubThis:e=>e}},7131:e=>{"use strict";e.s({identifyAuthenticationError:()=>n});var t=e.i(362943),r=e.i(457317);function n(e){let{error:n,options:i}=e,{publicKey:o}=i;if(!o)throw Error("options was missing required publicKey property");if("AbortError"===n.name){if(i.signal instanceof AbortSignal)return new r.WebAuthnError({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if("NotAllowedError"===n.name)return new r.WebAuthnError({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});else if("SecurityError"===n.name){let e=globalThis.location.hostname;if(!(0,t.isValidDomain)(e))return new r.WebAuthnError({message:"".concat(globalThis.location.hostname," is an invalid domain"),code:"ERROR_INVALID_DOMAIN",cause:n});if(o.rpId!==e)return new r.WebAuthnError({message:'The RP ID "'.concat(o.rpId,'" is invalid for this domain'),code:"ERROR_INVALID_RP_ID",cause:n})}else if("UnknownError"===n.name)return new r.WebAuthnError({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n});return n}},562058:e=>{"use strict";e.s({startAuthentication:()=>u});var t=e.i(241230),r=e.i(483713),n=e.i(795571),i=e.i(456535),o=e.i(707065),s=e.i(7131),a=e.i(368372),l=e.i(932382);async function u(e){var u,c;let d,f,p;!e.optionsJSON&&e.challenge&&(console.warn("startAuthentication() was not called correctly. It will try to continue with the provided options, but this call should be refactored to use the expected call structure instead. See https://simplewebauthn.dev/docs/packages/browser#typeerror-cannot-read-properties-of-undefined-reading-challenge for more information."),e={optionsJSON:e});let{optionsJSON:h,useBrowserAutofill:g=!1,verifyBrowserAutofillInput:v=!0}=e;if(!(0,n.browserSupportsWebAuthn)())throw Error("WebAuthn is not supported in this browser");(null==(u=h.allowCredentials)?void 0:u.length)!==0&&(d=null==(c=h.allowCredentials)?void 0:c.map(o.toPublicKeyCredentialDescriptor));let b={...h,challenge:(0,r.base64URLStringToBuffer)(h.challenge),allowCredentials:d},m={};if(g){if(!await (0,i.browserSupportsWebAuthnAutofill)())throw Error("Browser does not support WebAuthn autofill");if(document.querySelectorAll("input[autocomplete$='webauthn']").length<1&&v)throw Error('No <input> with "webauthn" as the only or last value in its `autocomplete` attribute was detected');m.mediation="conditional",b.allowCredentials=[]}m.publicKey=b,m.signal=a.WebAuthnAbortService.createNewAbortSignal();try{f=await navigator.credentials.get(m)}catch(e){throw(0,s.identifyAuthenticationError)({error:e,options:m})}if(!f)throw Error("Authentication was not completed");let{id:y,rawId:R,response:w,type:A}=f;return w.userHandle&&(p=(0,t.bufferToBase64URLString)(w.userHandle)),{id:y,rawId:(0,t.bufferToBase64URLString)(R),response:{authenticatorData:(0,t.bufferToBase64URLString)(w.authenticatorData),clientDataJSON:(0,t.bufferToBase64URLString)(w.clientDataJSON),signature:(0,t.bufferToBase64URLString)(w.signature),userHandle:p},type:A,clientExtensionResults:f.getClientExtensionResults(),authenticatorAttachment:(0,l.toAuthenticatorAttachment)(f.authenticatorAttachment)}}},657406:e=>{"use strict";e.s({}),e.i(795571)},265695:e=>{"use strict";e.s({})},304166:e=>{"use strict";e.s({}),e.i(831242),e.i(562058),e.i(795571),e.i(657406),e.i(456535),e.i(483713),e.i(241230),e.i(368372),e.i(457317),e.i(265695)},572583:e=>{"use strict";e.s({}),e.i(831242),e.i(562058),e.i(795571),e.i(657406),e.i(456535),e.i(483713),e.i(241230),e.i(368372),e.i(457317),e.i(265695),e.i(304166)},599949:e=>{"use strict";e.s({})},990248:e=>{"use strict";e.s({adminAc:()=>n,defaultRoles:()=>o,userAc:()=>i});var t=e.i(884532);e.i(887130);let r=(0,t.createAccessControl)({user:["create","list","set-role","ban","impersonate","delete","set-password","update"],session:["list","revoke","delete"]}),n=r.newRole({user:["create","list","set-role","ban","impersonate","delete","set-password","update"],session:["list","revoke","delete"]}),i=r.newRole({user:[],session:[]}),o={admin:n,user:i}},583333:e=>{"use strict";e.s({h:()=>r});var t=e.i(990248);let r=e=>{var r,n,i,o,s;if(e.userId&&(null==(n=e.options)||null==(r=n.adminUserIds)?void 0:r.includes(e.userId)))return!0;if(!e.permissions&&!e.permission)return!1;let a=(e.role||(null==(i=e.options)?void 0:i.defaultRole)||"user").split(","),l=(null==(o=e.options)?void 0:o.roles)||t.defaultRoles;for(let t of a){let r=l[t],n=null==r?void 0:r.authorize(null!=(s=e.permission)?s:e.permissions);if(null==n?void 0:n.success)return!0}return!1}},749154:e=>{"use strict";e.s({adminClient:()=>i,emailOTPClient:()=>o,magicLinkClient:()=>n}),e.i(945506),e.i(325900),e.i(427479),e.i(509697),e.i(325466),e.i(321594),e.i(572583),e.i(831242),e.i(457317),e.i(562058),e.i(599949);var t=e.i(990248),r=e.i(583333);e.i(884532),e.i(887130);let n=()=>({id:"magic-link",$InferServerPlugin:{}}),i=e=>{let n={admin:t.adminAc,user:t.userAc,...null==e?void 0:e.roles};return{id:"admin-client",$InferServerPlugin:{},getActions:()=>({admin:{checkRolePermission:t=>{var i;return(0,r.h)({role:t.role,options:{ac:null==e?void 0:e.ac,roles:n},permissions:null!=(i=t.permissions)?i:t.permission})}}}),pathMethods:{"/admin/list-users":"GET","/admin/stop-impersonating":"POST"}}},o=()=>({id:"email-otp",$InferServerPlugin:{}})},271874:e=>{"use strict";e.s({}),e.i(325900),e.i(427479),e.i(509697),e.i(325466),e.i(321594),e.i(572583),e.i(599949),e.i(990248),e.i(583333),e.i(884532),e.i(887130),e.i(749154)},773287:e=>{"use strict";e.s({a:()=>i});var t=e.i(427479),r=e.i(887130);function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/api/auth";return!function(e){try{let t=new URL(e);return"/"!==t.pathname}catch(t){throw new r.B("Invalid base URL: ".concat(e,". Please provide a valid base URL."))}}(e)?(t=t.startsWith("/")?t:"/".concat(t),"".concat(e.replace(/\/+$/,"")).concat(t)):e}function i(e,i,o){if(e)return n(e,i);let s=t.e.BETTER_AUTH_URL||t.e.NEXT_PUBLIC_BETTER_AUTH_URL||t.e.PUBLIC_BETTER_AUTH_URL||t.e.NUXT_PUBLIC_BETTER_AUTH_URL||t.e.NUXT_PUBLIC_AUTH_URL||("/"!==t.e.BASE_URL?t.e.BASE_URL:void 0);if(s)return n(s,i);let a=null==o?void 0:o.headers.get("x-forwarded-host"),l=null==o?void 0:o.headers.get("x-forwarded-proto");if(a&&l)return n("".concat(l,"://").concat(a),i);if(o){let e=function(e){try{return new URL(e).origin}catch(e){return null}}(o.url);if(!e)throw new r.B("Could not get origin from request. Please provide a valid base URL.");return n(e,i)}if("undefined"!=typeof window&&window.location)return n(window.location.origin,i)}},643235:e=>{"use strict";e.s({p:()=>o});let t={proto:/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,constructor:/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,protoShort:/"__proto__"\s*:/,constructorShort:/"constructor"\s*:/},r=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/,n={true:!0,false:!1,null:null,undefined:void 0,nan:NaN,infinity:1/0,"-infinity":-1/0},i=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d{1,7}))?(?:Z|([+-])(\d{2}):(\d{2}))$/;function o(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{strict:!0};return function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{strict:s=!1,warnings:a=!1,reviver:l,parseDates:u=!0}=o;if("string"!=typeof e)return e;let c=e.trim();if('"'===c[0]&&c.endsWith('"')&&!c.slice(1,-1).includes('"'))return c.slice(1,-1);let d=c.toLowerCase();if(d.length<=9&&d in n)return n[d];if(!r.test(c)){if(s)throw SyntaxError("[better-json] Invalid JSON");return e}if(Object.entries(t).some(e=>{let[t,r]=e,n=r.test(c);return n&&a&&console.warn("[better-json] Detected potential prototype pollution attempt using ".concat(t," pattern")),n})&&s)throw Error("[better-json] Potential prototype pollution attempt detected");try{return JSON.parse(c,(e,t)=>{if("__proto__"===e||"constructor"===e&&t&&"object"==typeof t&&"prototype"in t){a&&console.warn('[better-json] Dropping "'.concat(e,'" key to prevent prototype pollution'));return}if(u&&"string"==typeof t){let e=function(e){let t=i.exec(e);if(!t)return null;let[,r,n,o,s,a,l,u,c,d,f]=t,p=new Date(Date.UTC(parseInt(r,10),parseInt(n,10)-1,parseInt(o,10),parseInt(s,10),parseInt(a,10),parseInt(l,10),u?parseInt(u.padEnd(3,"0"),10):0));if(c){let e=(60*parseInt(d,10)+parseInt(f,10))*("+"===c?-1:1);p.setUTCMinutes(p.getUTCMinutes()+e)}return p instanceof Date&&!isNaN(p.getTime())?p:null}(t);if(e)return e}return l?l(e,t):t})}catch(t){if(s)throw t;return e}}(e,o)}},668798:e=>{"use strict";e.s({c:()=>l,g:()=>a});var t=e.i(325900),r=e.i(773287),n=e.i(945506),i=e.i(509697),o=e.i(643235);let s={id:"redirect",name:"Redirect",hooks:{onSuccess(e){var t,r;if((null==(t=e.data)?void 0:t.url)&&(null==(r=e.data)?void 0:r.redirect)&&"undefined"!=typeof window&&window.location&&window.location)try{window.location.href=e.data.url}catch(e){}}}},a=e=>{var a,l,u,c,d,f,p;let h="credentials"in Request.prototype,g=(0,r.a)(null==e?void 0:e.baseURL,null==e?void 0:e.basePath),v=(null==e||null==(a=e.plugins)?void 0:a.flatMap(e=>e.fetchPlugins).filter(e=>void 0!==e))||[],b={id:"lifecycle-hooks",name:"lifecycle-hooks",hooks:{onSuccess:null==e||null==(l=e.fetchOptions)?void 0:l.onSuccess,onError:null==e||null==(u=e.fetchOptions)?void 0:u.onError,onRequest:null==e||null==(c=e.fetchOptions)?void 0:c.onRequest,onResponse:null==e||null==(d=e.fetchOptions)?void 0:d.onResponse}},{onSuccess:m,onError:y,onRequest:R,onResponse:w,...A}=(null==e?void 0:e.fetchOptions)||{},E=(0,t.createFetch)({baseURL:g,...h?{credentials:"include"}:{},method:"GET",jsonParser:e=>e?(0,o.p)(e,{strict:!1}):null,customFetchImpl:async(e,t)=>{try{return await fetch(e,t)}catch(e){return Response.error()}},...A,plugins:[b,...A.plugins||[],...(null==e?void 0:e.disableDefaultFetchPlugins)?[]:[s],...v]}),{$sessionSignal:T,session:S}=function(e){let t=(0,n.atom)(!1);return{session:(0,i.u)(t,"/get-session",e,{method:"GET"}),$sessionSignal:t}}(E),O=(null==e?void 0:e.plugins)||[],P={},_={$sessionSignal:T,session:S},U={"/sign-out":"POST","/revoke-sessions":"POST","/revoke-other-sessions":"POST","/delete-user":"POST"},I=[{signal:"$sessionSignal",matcher:e=>"/sign-out"===e||"/update-user"===e||e.startsWith("/sign-in")||e.startsWith("/sign-up")||"/delete-user"===e||"/verify-email"===e}];for(let e of O)e.getAtoms&&Object.assign(_,null==(f=e.getAtoms)?void 0:f.call(e,E)),e.pathMethods&&Object.assign(U,e.pathMethods),e.atomListeners&&I.push(...e.atomListeners);let C={notify:e=>{_[e].set(!_[e].get())},listen:(e,t)=>{_[e].subscribe(t)},atoms:_};for(let t of O)t.getActions&&Object.assign(P,null==(p=t.getActions)?void 0:p.call(t,E,C,e));return{pluginsActions:P,pluginsAtoms:_,pluginPathMethods:U,atomListeners:I,$fetch:E,$store:C}};function l(e,t,r,n,i){return function o(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return new Proxy(function(){},{get(t,r){let n=[...s,r],i=e;for(let e of n)if(i&&"object"==typeof i&&e in i)i=i[e];else{i=void 0;break}return"function"==typeof i?i:o(n)},apply:async(e,o,a)=>{let l="/"+s.map(e=>e.replace(/[A-Z]/g,e=>"-".concat(e.toLowerCase()))).join("/"),u=a[0]||{},c=a[1]||{},{query:d,fetchOptions:f,...p}=u,h={...c,...f},g=function(e,t,r){let n=t[e],{fetchOptions:i,query:o,...s}=r||{};return n||((null==i?void 0:i.method)?i.method:s&&Object.keys(s).length>0?"POST":"GET")}(l,r,u);return await t(l,{...h,body:"GET"===g?void 0:{...p,...(null==h?void 0:h.body)||{}},query:d||(null==h?void 0:h.query),method:g,async onSuccess(e){var t;await (null==h||null==(t=h.onSuccess)?void 0:t.call(h,e));let r=null==i?void 0:i.find(e=>e.matcher(l));if(!r)return;let o=n[r.signal];if(!o)return;let s=o.get();setTimeout(()=>{o.set(!s)},10)}})}})}()}},253349:e=>{"use strict";function t(e,t,r){let n=new Set(t).add(void 0);return e.listen((e,t,i)=>{n.has(i)&&r(e,t,i)})}e.s({listenKeys:()=>t})},54742:e=>{"use strict";e.s({createAuthClient:()=>i});var t=e.i(668798),r=e.i(253349),n=e.i(373150);function i(e){let{pluginPathMethods:i,pluginsActions:o,pluginsAtoms:s,$fetch:a,$store:l,atomListeners:u}=(0,t.g)(e),c={};for(let[e,t]of Object.entries(s)){var d;c["use".concat((d=e).charAt(0).toUpperCase()+d.slice(1))]=()=>(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=(0,n.useRef)(e.get()),{keys:o,deps:s=[e,o]}=t,a=(0,n.useCallback)(t=>{let n=e=>{i.current!==e&&(i.current=e,t())};return(n(e.value),null==o?void 0:o.length)?(0,r.listenKeys)(e,o,n):e.listen(n)},s),l=()=>i.current;return(0,n.useSyncExternalStore)(a,l,l)})(t)}let f={...o,...c,$fetch:a,$store:l};return(0,t.c)(f,a,i,s,u)}e.i(325900),e.i(773287),e.i(427479),e.i(887130),e.i(509697),e.i(643235)},547946:e=>{"use strict";e.s({authClient:()=>r,emailOtp:()=>d,signIn:()=>n,signOut:()=>i,useSession:()=>s}),e.i(271874);var t=e.i(749154);let r=(0,e.i(54742).createAuthClient)({plugins:[(0,t.adminClient)(),(0,t.magicLinkClient)(),(0,t.emailOTPClient)()],basePath:"/api/better-auth"}),{signIn:n,signOut:i,signUp:o,useSession:s,getSession:a,sendVerificationEmail:l,verifyEmail:u,magicLink:c,emailOtp:d}=r},97436:e=>{"use strict";e.s({}),e.i(547946)},396133:e=>{"use strict";e.s({}),e.i(547946),e.i(97436)}}]);

//# sourceMappingURL=356e50955f9496f0.js.map