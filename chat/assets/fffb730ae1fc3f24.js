(globalThis.TURBOPACK=globalThis.TURBOPACK||[]).push(["object"==typeof document?document.currentScript:void 0,{913659:e=>{"use strict";e.s({usePersistedSidebar:()=>c});var t=e.i(647968),n=e.i(608294);let i=(e,t)=>{try{let n=window.localStorage.getItem(e);return n?JSON.parse(n):t}catch(e){return t}},a=i("metadata-sidebar-state","none"),s=i("chat-sidebar-state","none"),r=(0,t.atom)(a),o=(0,t.atom)(s),l=(e,t)=>{try{window.localStorage.setItem(e,JSON.stringify(t))}catch(e){console.error("Failed to sync with localStorage:",e)}},c=()=>{let[e,t]=(0,n.useAtom)(r),[i,a]=(0,n.useAtom)(o);return{ismetadataPersisted:e,setIsMetadataPersisted:e=>{t(e),l("metadata-sidebar-state",e)},isChatPersisted:i,setIsChatPersisted:e=>{a(e),l("chat-sidebar-state",e)}}}},394421:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("paperclip",[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]])},770587:e=>{"use strict";e.s({Paperclip:()=>t.default});var t=e.i(394421)},180560:e=>{"use strict";e.s({default:()=>u});var t=e.i(290479),n=e.i(770587),i=e.i(34818),a=e.i(373150),s=e.i(525094),r=e.i(885905),o=e.i(161106),l=e.i(872967),c=e.i(732946);let u=e=>{let{children:u}=e,{user:d}=(0,r.useAuth)(),[h,p]=(0,a.useState)(!1),{isDowntime:m}=(0,l.default)(),[f,T]=(0,a.useState)(!1),g=(0,a.useRef)(0),{handleFileChange:E,isUploading:A}=(0,o.useAttachmentUpload)();return(0,t.jsxs)("div",{className:"relative w-full h-full ".concat(h?"bg-opacity-50":""),onDragOver:e=>{e.preventDefault(),e.stopPropagation()},onDragEnter:e=>{e.preventDefault(),e.stopPropagation(),g.current++,1===g.current&&(0,c.hasValidChatDragItems)(e.dataTransfer)&&(p(!0),T(!0))},onDragLeave:e=>{e.preventDefault(),e.stopPropagation(),g.current--,0===g.current&&(p(!1),T(!1))},onDrop:e=>(e.preventDefault(),e.stopPropagation(),g.current=0,p(!1),T(!1),m)?void s.toast.error("Import unavailable. We'll be back online soon!"):d?A?void s.toast.error("Please wait for the upload to complete."):void E(Array.from(e.dataTransfer.files)):void 0,"data-hovering":f,children:[h&&(0,t.jsxs)(i.motion.div,{className:"absolute inset-0 bg-control-primary/80 z-50 flex flex-col justify-center items-center gap-7",initial:"hidden",animate:"visible",exit:"hidden",variants:{hidden:{opacity:0},visible:{opacity:1}},transition:{duration:.1},children:[(0,t.jsx)(n.Paperclip,{className:"text-text-secondary",size:28}),(0,t.jsxs)("div",{className:"flex flex-col gap-2 items-center",children:[(0,t.jsx)("h2",{className:"text-text-primary text-base font-medium",children:"Attach file"}),(0,t.jsx)("p",{className:"text-text-primary text-sm opacity-80",children:"Drop files here to attach them to your message"})]})]}),u]})}},1195:e=>{"use strict";e.s({ChatEmptyPlaceholder:()=>n});var t=e.i(290479);let n=()=>(0,t.jsx)("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 pb-32",children:(0,t.jsx)("svg",{width:"56",height:"56",viewBox:"0 0 300 300",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"text-muted",children:(0,t.jsx)("path",{d:"M29.265 297.109C12.0956 307.48 -7.47986 287.904 2.89082 270.735L101.425 136.516C105.114 130.409 105.114 122.76 101.425 116.653L44.2646 29.265C33.8939 12.0956 53.4694 -7.47989 70.6388 2.89081L158.027 60.0513C164.134 63.7403 171.783 63.7403 177.89 60.0513L270.735 2.8908C287.904 -7.4799 307.48 12.0957 297.109 29.2651L239.949 122.11C236.26 128.217 236.26 135.866 239.949 141.973L297.109 229.361C307.48 246.531 287.904 266.106 270.735 255.735L183.347 198.575C177.24 194.886 169.591 194.886 163.484 198.575L29.265 297.109Z",fill:"currentColor"})})})},328191:e=>{"use strict";e.s({default:()=>o});var t=e.i(290479),n=e.i(852951),i=e.i(252390),a=e.i(814733),s=e.i(397711),r=e.i(704255);let o=e=>{let{shareId:o}=e,{track:l}=(0,i.default)(),c=(0,s.useRouter)(),{addChatbot:u}=(0,n.useWorkspaceActions)(),{isPending:d,mutate:h}=a.api.share.addChatbot.useMutation({onSuccess:e=>{var t;let{chat:i,...a}=e;u({...a,authors:a.authors,isIndexed:a.isIndexed,ingestionStatus:null==(t=a.ingestionStatus)?void 0:t.status,publicationDate:null,chats:i?[(0,n.formatChatAsItem)(i,a.userId)]:[],updatedAt:new Date,publication:null,volume:null,issue:null,pages:null,doi:null,issn:null,isbn:null,docMetadataurl:null,abstract:null,citationCount:0}),l("share_chatbot_continue",{shareId:o}),c.push("/b/".concat(a.id).concat(i?"?chatId=".concat(null==i?void 0:i.id):""))}});return o?(0,t.jsx)("div",{className:"flex flex-row justify-center py-8 px-4",children:(0,t.jsx)(r.Button,{isLoading:d,onClick:()=>h(o),className:"rounded-4",size:"sm",children:"Continue this conversation"})}):null}},431714:e=>{"use strict";e.s({default:()=>c});var t=e.i(290479),n=e.i(704255),i=e.i(998145),a=e.i(972899),s=e.i(289702),r=e.i(334145),o=e.i(194415),l=e.i(530739);let c=e=>{let{attachment:c,onDelete:u,onClick:d}=e;return"image"===c.data.type?(0,t.jsxs)("div",{className:(0,s.cn)("inline-flex w-15 h-15 relative group transition-all duration-200 overflow-visible","bg-control-primary hover:bg-text-tertiary/10 rounded-4",d&&"cursor-pointer"),onClick:d,style:{marginRight:"2px",marginTop:"2px"},children:[u&&(0,t.jsx)("div",{className:"absolute -top-2 -right-2 z-10 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:(0,t.jsx)(n.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 text-text-secondary hover:text-text-primary bg-control-primary hover:bg-text-tertiary/10 border-2 border-popover rounded-full shadow-shadowLow",onClick:e=>{e.stopPropagation(),u(c.id)},"aria-label":"Remove attachment",children:(0,t.jsx)(r.X,{className:"h-6 w-6"})})}),(0,t.jsx)("div",{className:"relative w-full h-full",children:(0,t.jsx)(o.default,{src:c.data.url||"/placeholder.svg",alt:c.data.name||"Attachment",fill:!0,className:"object-cover rounded-4"})})]}):(0,t.jsxs)("div",{className:(0,s.cn)("inline-flex max-w-[240px] min-w-[120px] h-[44px] items-center px-5  rounded-4 text-sm font-medium relative group transition-all duration-200 overflow-visible","bg-secondary",d&&"cursor-pointer hover:bg-popover-hover"),onClick:d,style:{marginRight:"2px",marginTop:"2px"},children:[u&&"source"!==c.data.type&&"quiz-context"!==c.data.type&&(0,t.jsx)("div",{className:"absolute -top-2 -right-2 z-10 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:(0,t.jsx)(n.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 text-text-secondary hover:text-text-primary bg-control-primary hover:bg-text-tertiary/10 border-2 border-popover rounded-full shadow-shadowLow",onClick:e=>{e.stopPropagation(),u(c.id)},"aria-label":"Remove attachment",children:(0,t.jsx)(r.X,{className:"h-6 w-6"})})}),("mention"===c.data.type||"source"===c.data.type||"text"===c.data.type)&&(0,t.jsx)("div",{className:"w-[18px] h-[18px] mr-6 flex items-center justify-center flex-shrink-0",children:(0,t.jsx)(a.Icon,{size:"md",as:(0,i.default)({type:c.data.chatbotType||"DOCUMENT"})})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0 flex flex-col justify-center leading-tight",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-text-primary truncate",children:(0,l.getAttachmentName)(c)}),(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsx)("span",{className:"text-xs text-text-secondary font-medium",children:(()=>{switch(c.data.type){case"image":var e;return"".concat((null==(e=c.data.extension)?void 0:e.toUpperCase())||"Image");case"text":return"Selection";case"mention":return"Chatbot";case"source":return"Source";case"quiz-context":return"Quiz Context";default:return"File"}})()})})]})]})}},530739:e=>{"use strict";e.s({default:()=>f,getAttachmentName:()=>m});var t=e.i(290479),n=e.i(34818),i=e.i(194415),a=e.i(397711),s=e.i(373150),r=e.i(430266),o=e.i(457910),l=e.i(234526),c=e.i(161349),u=e.i(227261),d=e.i(289702),h=e.i(431714),p=e.i(681299);let m=e=>(0,r.match)(e.data).with({type:"image"},e=>e.name).with({type:"text"},e=>e.text).with({type:"mention"},e=>e.chatbotName).with({type:"source"},e=>e.chatbotName).with({type:"quiz-context"},()=>"Quiz Context").otherwise(()=>"Attachment"),f=e=>{let{attachments:r,onDelete:m,disableAnimations:f,isHovered:T,isEditor:g=!1}=e,E=(0,s.useRef)(null),[A,x]=(0,s.useState)(!1),[I,_]=(0,s.useState)(!1),{jumpToHighlightArea:C}=(0,l.useHighlightArea)(),v=(0,a.useRouter)(),S=(0,u.useChatbotStore)(e=>e.setViewerState),{uniqueSaveId:D}=(0,p.useChatUniqueId)(),{setViewType:y}=(0,c.usePersistedViewType)(D||"default"),N=(0,a.useParams)(),b=()=>{if(E.current){let{scrollLeft:e,scrollWidth:t,clientWidth:n}=E.current;x(e>0),_(e<t-n-1)}};(0,s.useEffect)(()=>{b()},[]);let O=r.filter(e=>"quiz-context"!==e.data.type);return 0===O.length?null:(0,t.jsxs)(n.motion.div,{...!f&&{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2,ease:"easeOut"}},className:"relative rounded-4 overflow-hidden w-0 min-w-full",children:[A&&(0,t.jsx)("div",{className:(0,d.cn)("absolute left-0 top-0 bottom-0 w-15 bg-gradient-to-r z-[1] from-popover to-transparent pointer-events-none rounded-4 overflow-hidden",g&&"from-popover-hover-solid")}),(0,t.jsx)("div",{ref:E,className:"overflow-x-auto scrollbar-hide whitespace-nowrap rounded-4 w-0 min-w-full",onScroll:b,children:(0,t.jsx)("div",{className:(0,d.cn)("flex gap-2"),children:(0,t.jsx)("div",{className:(0,d.cn)("contents"),children:O.map(e=>{let n="text"===e.data.type&&e.data.highlights?()=>{if("text"!==e.data.type||!e.data.highlights)return;let t=e.data.highlights;y("tabs"),D!==e.data.chatbotId&&v.push("/b/".concat(e.data.chatbotId)),setTimeout(()=>{C(t,"pixels")},1700*((null==N?void 0:N.id)!==e.data.chatbotId))}:"text"!==e.data.type||e.data.highlights?void 0:()=>{"text"===e.data.type&&D!==e.data.chatbotId&&(y("tabs"),v.push("/b/".concat(e.data.chatbotId)))};return(0,t.jsxs)(o.Tooltip,{delayDuration:200,children:[(0,t.jsx)(o.TooltipTrigger,{asChild:!0,children:(0,t.jsx)("div",{className:"h-15",children:(0,t.jsx)(h.default,{attachment:e,onDelete:m,onClick:n})})}),(0,t.jsx)(o.TooltipPortal,{children:(0,t.jsx)(o.TooltipContent,{side:"top",sideOffset:8,className:(0,d.cn)("w-[240px] p-4 !bg-popover border border-border-primary","source"===e.data.type&&"hidden"),children:(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:["image"===e.data.type&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"relative aspect-square w-full",children:(0,t.jsx)(i.default,{src:e.data.url||"/placeholder.svg",alt:e.data.name||"Attachment",fill:!0,className:"object-cover rounded-4"})}),(0,t.jsx)("div",{className:"w-full text-text-secondary p-2  text-xs leading-5 font-medium cursor-pointer rounded-b-md",onClick:()=>"image"===e.data.type&&window.open(e.data.url,"_blank"),children:e.data.name})]}),"text"===e.data.type&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("p",{className:"w-full  text-text-secondary p-2  text-xs leading-5 font-medium rounded-b-md break-words whitespace-pre-wrap max-h-[200px] overflow-y-auto scrollbar-overlay",children:['"',e.data.text.replace(/\\n/g,"\n"),'"']}),e.data.highlights?(0,t.jsx)("div",{className:"w-full text-text-secondary p-2  text-xs leading-5 font-medium cursor-pointer rounded-b-md hover:bg-popover-hover",onClick:()=>{if("text"!==e.data.type||!e.data.highlights)return;let t=e.data.highlights;y("tabs"),S("maximized"),D!==e.data.chatbotId&&v.push("/b/".concat(e.data.chatbotId)),setTimeout(()=>{C(t,"pixels")},1700*((null==N?void 0:N.id)!==e.data.chatbotId))},children:"Scroll to selection"}):(0,t.jsx)("div",{className:"w-full text-text-secondary p-2  text-xs leading-5 font-medium rounded-b-md",children:"Chat text selection"})]}),"mention"===e.data.type&&(0,t.jsx)("div",{className:"w-full text-text-secondary p-2  text-xs leading-5 font-medium cursor-pointer rounded-b-md",children:e.data.chatbotName})]})})})]},"thread-attachment-".concat(e.id))})})})}),I&&(0,t.jsx)("div",{className:(0,d.cn)("absolute right-0 top-0 bottom-0 w-15 bg-gradient-to-l from-popover to-transparent  pointer-events-none",T&&"from-secondary-hoverSolid",g&&"from-popover-hover-solid")})]})}},44925:e=>{"use strict";e.s({useStreamLoading:()=>i});var t=e.i(341664),n=e.i(224706);function i(){let{chatId:e}=(0,t.useChatId)(),i=(0,n.useGlobalStreamStore)(t=>e?t.getStreamInfo(e):void 0);return{isLoading:(null==i?void 0:i.status)==="streaming"||(null==i?void 0:i.status)==="connecting"||(null==i?void 0:i.frontendStreaming)===!0,streamStatus:null==i?void 0:i.status,streamId:null==i?void 0:i.streamId}}},658766:e=>{"use strict";e.s({forceScrollToBottomAtom:()=>i,useScrollToBottom:()=>a});var t=e.i(647968),n=e.i(608294);let i=(0,t.atom)(!1),a=()=>{let[e,t]=(0,n.useAtom)(i);return{scrollToBottom:()=>{t(!0)}}}},801236:e=>{"use strict";e.s({createBotMessage:()=>i,createUserMessage:()=>n});var t=e.i(257140);let n=(e,n,i,a)=>({id:(0,t.nanoid)(),role:"USER",parts:[{id:(0,t.nanoid)(),type:"text",text:e}],sources:[],attachments:i,createdAt:new Date().toISOString(),chatId:n,metadata:a}),i=(e,t,n)=>({id:e,role:"ASSISTANT",parts:t,sources:[],attachments:[],createdAt:new Date().toISOString(),chatId:n,metadata:{}})},486672:e=>{"use strict";e.s({useUpdatePendingParts:()=>a});var t=e.i(814733),n=e.i(209110),i=e.i(221297);let a=()=>{let e=(0,i.useChatV2Store)(e=>e.isTeam),a=t.api.useUtils(),s=function(t,i){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;a.message.get.setInfiniteData({chatId:t,type:e?"team":"individual",limit:n.MESSAGE_PAGINATION_LIMIT},e=>{if(!e)return e;let n=0,a={...e,pages:e.pages.map(e=>-1===e.items.findIndex(e=>e.id===i)?e:{...e,items:e.items.map(e=>{if(e.id===i){var t;let i=(null!=(t=e.parts)?t:[]).map(e=>"pending"===e.status?(n++,{...e,status:"success"}):e);return{...e,parts:i}}return e})})};return n>0&&r<3&&setTimeout(()=>{s(t,i,r+1)},200),a})};return{updateAllPendingPartsToSuccess:s}}},865836:e=>{"use strict";e.s({useMessageStream:()=>l});var t=e.i(257140),n=e.i(373150),i=e.i(221297),a=e.i(252390),s=e.i(814733),r=e.i(224706),o=e.i(256271);let l=e=>{let{chatId:l,onStreamEvent:c,onComplete:u,tryReconnect:d=!1}=e,h=(0,n.useRef)(null),p=(0,n.useRef)(null),m=(0,n.useRef)(!1),f=(0,i.useChatV2Store)(e=>e.setIsLoading),T=(0,i.useChatV2Store)(e=>e.contentGenerationComplete),{track:g}=(0,a.default)(),E=(0,i.useChatV2Store)(e=>e.setContentGenerationComplete),A=s.api.useUtils(),x=(0,n.useRef)("listener-".concat((0,t.nanoid)())).current,I=(0,n.useRef)(c),_=(0,r.useGlobalStreamStore)(e=>e.registerListener),C=(0,r.useGlobalStreamStore)(e=>e.unregisterListener),v=(0,r.useGlobalStreamStore)(e=>e.updateStreamStatus),S=(0,r.useGlobalStreamStore)(e=>e.forceStopStream),D=(0,r.useGlobalStreamStore)(e=>l?e.activeStreams.get(l):void 0),y=(null==D?void 0:D.status)||"idle",[N,b]=(0,n.useState)({status:y,streamId:null==D?void 0:D.streamId,messageId:(null==D?void 0:D.messageId)||void 0,lastEventId:(null==D?void 0:D.lastEventId)||void 0});(0,n.useEffect)(()=>{I.current=c},[c]);let O=(0,n.useCallback)((e,t,n)=>{I.current(e,t,n)},[]);(0,n.useEffect)(()=>{if(!l||c.toString().includes("() => {}")||c.toString().includes("()=>{}"))return;_(l,x);let e=o.globalStreamSubscriptions.addHandler(l,O);return()=>{C(l,x),e&&e()}},[l,x,O,_,C]),(0,n.useEffect)(()=>{D?(b({status:D.status,error:D.error,streamId:D.streamId,lastEventId:D.lastEventId||void 0,messageId:D.messageId||void 0}),h.current=D.streamId,p.current=D.messageId,"streaming"===D.status||"connecting"===D.status?T||f(!0):f(!1)):(b({status:"idle"}),E(!1),h.current=null,p.current=null,f(!1))},[l,D,f,T]);let{data:R}=s.api.message.checkRecentMessage.useQuery({chatId:l},{enabled:!!l&&"idle"===N.status&&d&&!m.current,refetchInterval:!1,refetchOnWindowFocus:!1}),{mutateAsync:P}=s.api.message.prepareStream.useMutation(),k=(0,n.useCallback)(()=>{b({status:"completed"}),f(!1);let e=h.current;e&&(A.message.getActiveStreams.setData(void 0,t=>t?t.filter(t=>t.streamId!==e):[]),v(l,{status:"completed"})),h.current=null,p.current=null,null==u||u()},[u,f,A,l,v]),M=(0,n.useCallback)(async e=>{E(!1),b({status:"connecting"});let n=e.chatId,i="".concat(n,"-").concat((0,t.nanoid)());h.current=i,b({status:"connecting",streamId:i});let a=Date.now();return await P({...e,streamId:i},{onError:()=>{b({status:"error",error:Error("An error occurred while sending the message")})},onSuccess:()=>{let t=(Date.now()-a)/1e3;g("prepare_stream",{inputs:{...e,streamId:i},inputsSize:JSON.stringify(e).length,latency:t})}}),o.globalStreamSubscriptions.createSubscription(n,{streamId:i},e.messageId),n===l&&O&&o.globalStreamSubscriptions.addHandler(n,O),v(n,{status:"connecting",streamId:i,messageId:e.messageId,subscriptionParams:{streamId:i}}),A.message.getActiveStreams.setData(void 0,t=>{let a={chatId:n,streamId:i,createdAt:new Date().toISOString(),messageId:e.messageId};return t?[...t,a]:[a]}),n!==l&&await new Promise(e=>setTimeout(e,100)),{streamId:i}},[l,A,v,O,E]);return(0,n.useEffect)(()=>{l&&"idle"===N.status&&d&&R&&!m.current&&R.shouldRestore&&R.message&&(m.current=!0,c({id:"0",data:{type:"restore-message",message:R.message}},l,R.messageId||""),R.canResume&&R.streamId&&"string"==typeof R.streamId&&R.messageId&&(h.current=R.streamId,p.current=R.messageId,o.globalStreamSubscriptions.hasActiveSubscription(l)||o.globalStreamSubscriptions.createSubscription(l,{streamId:R.streamId},R.messageId),v(l,{status:"connecting",streamId:R.streamId,messageId:R.messageId,subscriptionParams:{streamId:R.streamId,resume:!0}}),b({status:"connecting",streamId:R.streamId,messageId:R.messageId})))},[R,l,d,c,v]),{streamState:N,startStream:M,stopStream:(0,n.useCallback)(()=>{o.globalStreamSubscriptions.markCompleted(l),v(l,{status:"completed"}),E(!1),k(),setTimeout(()=>{S(l)},50)},[k,l,S,v,E]),resetStream:(0,n.useCallback)(()=>{b({status:"idle"}),E(!1),h.current=null,p.current=null},[E]),isStreaming:"streaming"===N.status||"connecting"===N.status,hasError:"error"===N.status,currentMessageId:N.messageId}}},295862:e=>{"use strict";e.s({useCheckLimits:()=>s});var t=e.i(450807),n=e.i(885905),i=e.i(950347),a=e.i(252390);let s=()=>{let{exceededLimits:e,isFreePlan:s}=(0,i.default)(),{showUpgrade:r}=(0,t.useUpgrade)(),{track:o}=(0,a.default)(),{user:l}=(0,n.useAuth)();return{checkLimits:()=>null!=e&&!!e.isWordCountLimitExceeded&&!!s&&(r("messageLimit"),o("wordCountLimitHit",{userId:null==l?void 0:l.id}),o("Paywall Shown",{reason:"Word Count Limit Hit",type:"Message"}),!0)}}},145812:e=>{"use strict";e.s({useUpdateChatLimits:()=>i});var t=e.i(885905),n=e.i(814733);let i=()=>{let e=n.api.useUtils(),{userPlanDetails:i}=(0,t.useAuth)();return{updateWordLimit:t=>{(null==i?void 0:i.planName)==="Free"&&e.user.limits.setData(void 0,e=>{if(!e)return e;let n=e.wordCount+t.trim().split(/[^\w'']+/).filter(e=>e.length>0).length;return{...e,utilityCount:n,wordCount:n}})}}}},187439:e=>{"use strict";e.s({useUpdateMessage:()=>r});var t=e.i(814733),n=e.i(209110),i=e.i(221297),a=e.i(801236),s=e.i(145812);let r=()=>{let e=(0,i.useChatV2Store)(e=>e.isTeam),r=t.api.useUtils(),{updateWordLimit:o}=(0,s.useUpdateChatLimits)();return{updateMessage:(t,i,s)=>{r.message.get.setInfiniteData({chatId:t,type:e?"team":"individual",limit:n.MESSAGE_PAGINATION_LIMIT},e=>e?{...e,pages:e.pages.map(n=>{let r=n.items.findIndex(e=>e.id===i);return -1===r&&n===e.pages[0]?{...n,items:[...n.items,(0,a.createBotMessage)(i,[s],t)]}:-1!==r?{...n,items:n.items.map(e=>{if(e.id===i){let t=[];return Array.isArray(e.parts)&&((t=e.parts.map(e=>e.id===s.id?"text"===s.type&&"text"===e.type?(o(s.text),{...s,text:e.text+s.text}):"thinking"===s.type&&"thinking"===e.type||"edit-note"===s.type&&"edit-note"===e.type?{...s,text:e.text+s.text}:("edit-quiz"===s.type&&e.type,s):e)).some(e=>e.id===s.id)||t.push(s)),{...e,parts:t}}return e})}:n})}:e)}}}},794836:e=>{"use strict";e.s({useUpdatePartMessageStatus:()=>a});var t=e.i(814733),n=e.i(209110),i=e.i(221297);let a=()=>{let e=(0,i.useChatV2Store)(e=>e.isTeam),a=t.api.useUtils();return{updatePartMessageStatus:(t,i,s,r)=>{a.message.get.setInfiniteData({chatId:t,type:e?"team":"individual",limit:n.MESSAGE_PAGINATION_LIMIT},e=>e?{...e,pages:e.pages.map(e=>-1===e.items.findIndex(e=>e.id===i)?e:{...e,items:e.items.map(e=>{if(e.id===i){var t;let n=(null!=(t=e.parts)?t:[]).map(e=>e.id===s?{...e,status:r}:e);return{...e,parts:n}}return e})})}:e)}}}},466380:e=>{"use strict";e.s({}),e.i(814733),e.i(209110),e.i(221297)},200836:e=>{"use strict";e.s({useCreateMessage:()=>s});var t=e.i(814733),n=e.i(209110),i=e.i(221297),a=e.i(801236);let s=()=>{let e=(0,i.useChatV2Store)(e=>e.isTeam),s=t.api.useUtils();return{createMessage:(t,i)=>{s.message.get.setInfiniteData({chatId:t,type:e?"team":"individual",limit:n.MESSAGE_PAGINATION_LIMIT},e=>{var n,s;if(!e)return e;let r=e.pages[0];return{...e,pages:[{nextCursor:null!=(n=null==r?void 0:r.nextCursor)?n:null,items:[...null!=(s=null==r?void 0:r.items)?s:[],(0,a.createBotMessage)(i,[],t)]},...e.pages.slice(1)]}})}}}},224764:e=>{"use strict";e.s({useUpdateSource:()=>a});var t=e.i(814733),n=e.i(209110),i=e.i(221297);let a=()=>{let e=(0,i.useChatV2Store)(e=>e.isTeam),a=t.api.useUtils();return{updateSource:(t,i,s)=>{a.message.get.setInfiniteData({chatId:t,type:e?"team":"individual",limit:n.MESSAGE_PAGINATION_LIMIT},e=>e?{...e,pages:e.pages.map(e=>({...e,items:e.items.map(e=>e.id===i?{...e,sources:s}:e)}))}:e)},addNewSources:(t,i,s)=>{a.message.get.setInfiniteData({chatId:t,type:e?"team":"individual",limit:n.MESSAGE_PAGINATION_LIMIT},e=>e?{...e,pages:e.pages.map(e=>({...e,items:e.items.map(e=>{if(e.id===i){var t;return{...e,sources:[...null!=(t=e.sources)?t:[],...s]}}return e})}))}:e)}}}},993925:e=>{"use strict";e.s({useUpdateChatTitle:()=>n});var t=e.i(814733);let n=()=>{let e=t.api.useUtils();return{updateChatTitle:(t,n)=>{e.workspace.all.setData(void 0,e=>e?{...e,entities:e.entities.map(e=>e.id===t?{...e,name:n}:e.chats.length>0?{...e,chats:e.chats.map(e=>e.id===t?{...e,name:n}:e)}:e)}:e)}}}},222057:e=>{"use strict";e.s({}),e.i(187439),e.i(794836),e.i(466380),e.i(200836),e.i(224764),e.i(993925)},89733:e=>{"use strict";e.s({}),e.i(187439),e.i(794836),e.i(466380),e.i(200836),e.i(224764),e.i(993925),e.i(222057)},529133:e=>{"use strict";e.s({useHandleStream:()=>l});var t=e.i(430266),n=e.i(221297);e.i(89733);var i=e.i(200836),a=e.i(993925),s=e.i(187439),r=e.i(794836),o=e.i(224764);let l=()=>{let e=(0,n.useChatV2Store)(e=>e.setIsLoading),l=(0,n.useChatV2Store)(e=>e.setContentGenerationComplete),c=(0,n.useChatV2Store)(e=>e.abortRef),{updateMessage:u}=(0,s.useUpdateMessage)(),{updatePartMessageStatus:d}=(0,r.useUpdatePartMessageStatus)(),{createMessage:h}=(0,i.useCreateMessage)(),{updateSource:p,addNewSources:m}=(0,o.useUpdateSource)(),{updateChatTitle:f}=(0,a.useUpdateChatTitle)(),T=(0,n.useChatV2Store)(e=>e.messageIdRef);return{handleStreamEvent:async(n,i,a)=>{if(c.current){c.current=!1;return}(0,t.match)(n.data).with({type:"messageId"},e=>{h(i,e.messageId),T.current=e.messageId}).with({type:"chatTitle"},e=>{f(e.chatId,e.value)}).with({type:"source"},e=>{a&&p(i,a,e.value)}).with({type:"streaming-sources"},e=>{a&&m(i,a,e.value)}).with({type:"part-finish"},e=>{a&&d(i,a,e.partId,e.value)}).with({type:"restore-message"},e=>{T.current=e.message.id}).with({type:"content-generation-complete"},t=>{e(!1),l(!0)}).otherwise(e=>{e.value.type,a&&u(i,a,e.value)})}}}},380252:e=>{"use strict";e.s({useV2GetMentionGroupMembers:()=>i});var t=e.i(969029),n=e.i(852951);let i=()=>{let{data:e}=(0,n.useWorkspace)();return{getMembersFromAttachments:n=>{let i=[],a=[];for(let e of n)i.push(e);for(let n of i){var s,r;let i=null==e||null==(s=e.entities)?void 0:s.find(e=>e.id===n);if((null==i?void 0:i.type)==="GROUP"){let i=(0,t.getGroupMembers)(null!=(r=null==e?void 0:e.entities)?r:[],n);i.length>0&&a.push(...i.map(e=>e.id))}(null==i?void 0:i.type)!=="WORKSPACE"&&(null==i?void 0:i.type)!=="GROUP"&&(null==i?void 0:i.type)!=="NOTHING"&&a.push(n)}return a}}}},346148:e=>{"use strict";e.s({useAppendMessage:()=>D});var t=e.i(209110),n=e.i(257140),i=e.i(373150),a=e.i(525094),s=e.i(982152),r=e.i(969029),o=e.i(449097),l=e.i(852951),c=e.i(252390),u=e.i(227261),d=e.i(814733),h=e.i(46621),p=e.i(701187),m=e.i(221297),f=e.i(681299),T=e.i(658766),g=e.i(801236),E=e.i(486672),A=e.i(865836),x=e.i(341664),I=e.i(719772),_=e.i(295862),C=e.i(55579),v=e.i(529133),S=e.i(380252);let D=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],{checkLimits:D}=(0,_.useCheckLimits)(),{updateChatbot:y}=(0,l.useWorkspaceActions)(),N=(0,u.useChatbotStore)(e=>e.mode),b=(0,m.useChatV2Store)(e=>e.abortRef),O=(0,m.useChatV2Store)(e=>e.setIsLoading),{getCurrentQuestionContext:R}=(0,p.useQuizContextStore)(),P=(0,m.useChatV2Store)(e=>e.isLoading),{setTextValue:k}=(0,I.useEditorContent)(),{getMembersFromAttachments:M}=(0,S.useV2GetMentionGroupMembers)(),{groupMembers:L}=(0,r.default)("chatbot"===N.type?N.chatbotId:void 0),{resetAttachments:w}=(0,s.useChatbotInput)(),{scrollToBottom:G}=(0,T.useScrollToBottom)(),{track:j}=(0,c.default)(),{settings:B}=(0,o.useSettings)(),{mutate:F}=(0,h.useMarkStepCompletedWithTracking)(),{chatId:U,setChatId:H}=(0,x.useChatId)(),{uniqueSaveId:V,isOptimisticLibraryChat:Y}=(0,f.useChatUniqueId)(),z=U||(Y?V:null),W=(0,m.useChatV2Store)(e=>e.currentStreamIdRef),q=(0,m.useChatV2Store)(e=>e.messageIdRef),{handleStreamEvent:K}=(0,v.useHandleStream)(),Q=d.api.useUtils(),X=(0,m.useChatV2Store)(e=>e.isTeam),{updateAllPendingPartsToSuccess:J}=(0,E.useUpdatePendingParts)(),Z=(0,i.useCallback)(()=>{O(!1),W.current=null},[O]),{startStream:$,isStreaming:ee,stopStream:et}=(0,A.useMessageStream)({chatId:z||"",onStreamEvent:K,onComplete:Z,tryReconnect:e}),{createChat:en}=(0,C.useCreateChat)();return{append:async function(e,i,s){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(P||ee)return;if(0===e.length)return void a.toast.error("Input cannot be empty");if(!B.maxLength)return void a.toast.error("Response length cannot be empty");if(!o.allModels.some(e=>e.name===B.modelName))return void a.toast.error("Please select a model first");let l=r&&B.modelName.includes("gemini-2.5-flash-lite")?"gemini-2.0-flash":B.modelName;if(D())return;w(),G();let c=new Set([...L.map(e=>e.id)]),u=/\[\[tool:(research):[^\]]+\]\]/.test(e),d=i.map(e=>"mention"===e.data.type?e.data.chatbotId:null).filter(e=>null!==e);u&&"chatbot"===N.type&&d.push(N.chatbotId);let h=M(d),p=[...i];if("chatbot"===N.type&&"QUIZ"===N.chatbotType){let e=R(N.chatbotId);e&&(p=[{type:"input-attachment",id:(0,n.nanoid)(),data:{type:"quiz-context",activeQuestionIndex:e.activeQuestionIndex,currentQuestion:e.currentQuestion,totalQuestions:e.totalQuestions}},...i])}O(!0),k("");let m=z;if(!m||Y){m||(m=(0,n.nanoid)());let e="chatbot"===N.type?{type:"main",chatbotId:N.chatbotId}:{type:"library"};await en({id:m,includedSources:[e]})}if(!m){a.toast.error("Failed to create chat"),O(!1);return}let f=(0,n.nanoid)();Q.message.get.setInfiniteData({chatId:m,type:X?"team":"individual",limit:t.MESSAGE_PAGINATION_LIMIT},t=>{let n={...(0,g.createUserMessage)(e,m,p,{maxLength:B.maxLength||250,modelName:l,chatSources:s}),id:f};return t?{...t,pages:[{...t.pages[0],items:[...t.pages[0].items,n]},...t.pages.slice(1)]}:{pages:[{items:[n],nextCursor:null}],pageParams:[]}}),U||H(m),y(m,{updatedAt:new Date},"CHAT"),"chatbot"===N.type&&("DOCUMENT"===N.chatbotType?F({workflowKey:"import-and-chat-document",stepKey:"chat-with-document"}):"GROUP"===N.chatbotType&&F({workflowKey:"add-files-to-folder",stepKey:"chat-with-folder"})),/\[\[tool:[^\]]+\]\]/.test(e)&&F({workflowKey:"mention-agent-in-chat",stepKey:"mention-agent"});try{var T;let{streamId:t}=await $({input:e,attachments:p,modelName:l,groupMemberIds:Array.from(c),maxLength:B.maxLength||250,includeNotesInSearch:null!=(T=B.includeNotesInSearch)&&T,mode:N,language:B.language,messageId:f,chatId:m,chatSources:s,mentionIds:h});if(!t)throw Error("Failed to start stream");W.current=t,j("messageStreamStarted",{userPrompt:e,model:B.modelName,attachments:null==p?void 0:p.map(e=>e.data),chatId:m,language:B.language,maxLength:B.maxLength,mode:N,modelName:B.modelName,streamId:t})}catch(e){O(!1),W.current=null,a.toast.error("Failed to send message. Please try again.")}},stopGeneration:(0,i.useCallback)(()=>{b.current=!0,O(!1),et(),W.current=null,setTimeout(()=>{z&&q.current&&J(z,q.current)},100),j("messageGenerationStopped")},[b,O,et,j,z,q,J])}}},731455:e=>{"use strict";e.s({useInputDisabled:()=>a});var t=e.i(852951),n=e.i(373150),i=e.i(221297);let a=()=>{let e=(0,i.useChatV2Store)(e=>e.mode),{data:a}=(0,t.useWorkspace)();return{isInputDisabled:(0,n.useMemo)(()=>{if("chatbot"!==e.type)return!1;let t=null==a?void 0:a.entities.find(t=>t.id===e.chatbotId);if(!t)return!1;if(!t.isIndexed&&"RECORDING"===t.type)return!0;if("GROUP"===t.type){let e=null==a?void 0:a.entities.filter(e=>e.groupId===t.id);return!(e&&e.length>0)}return!1},[a,e])}}},98631:e=>{"use strict";e.s({useFileAttachments:()=>i});var t=e.i(161106),n=e.i(373150);let i=()=>{let e=(0,n.useRef)(null),[i,a]=(0,n.useState)(!1),{handleFileChange:s,isUploading:r}=(0,t.useAttachmentUpload)(),o=async e=>{let t=e.target.files;t&&await s(Array.from(t))};return(0,n.useEffect)(()=>{let e=()=>{i&&a(!1)};return window.addEventListener("focus",e),()=>window.removeEventListener("focus",e)},[i]),{fileInputRef:e,isFileInputOpen:i,setIsFileInputOpen:a,isUploading:r,handleFileChangeFn:o,openFileInput:()=>{var t;a(!0),null==(t=e.current)||t.click()}}}},865602:e=>{"use strict";e.s({default:()=>_});var t=e.i(290479),n=e.i(224879),i=e.i(592103),a=e.i(373150),s=e.i(958962),r=e.i(476440),o=e.i(982152),l=e.i(872967),c=e.i(44925),u=e.i(289702),d=e.i(221297),h=e.i(950721),p=e.i(174527),m=e.i(346148),f=e.i(719772),T=e.i(731455),g=e.i(98631),E=e.i(656154),A=e.i(353964),x=e.i(855399),I=e.i(475292);let _=()=>{let e=(0,d.useChatV2Store)(e=>e.mode),_=(0,d.useChatV2Store)(e=>e.isPasteUploading),{isLoading:C}=(0,c.useStreamLoading)(),{isDowntime:v}=(0,l.default)(),{isInputDisabled:S}=(0,T.useInputDisabled)(),{fileInputRef:D,setIsFileInputOpen:y,handleFileChangeFn:N,isUploading:b,openFileInput:O}=(0,g.useFileAttachments)(),{attachments:R}=(0,o.useSavedChatbotInput)(),{append:P,stopGeneration:k}=(0,m.useAppendMessage)(),{text:M}=(0,f.useEditorContent)(),L=(0,a.useMemo)(()=>{if("chatbot"!==e.type)return R;let{chatbotType:t,chatbotName:i}=e;return[{id:(0,n.default)(),type:"input-attachment",data:{type:"source",chatbotType:t,chatbotName:i||"Untitled"}},...R]},[e,R]),{chatSources:w}=(0,p.useChatSources)();return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex flex-row items-center justify-between w-full gap-4",children:[(0,t.jsxs)("div",{className:"flex flex-row gap-2 items-center min-w-0 flex-1",children:[(0,t.jsx)(E.MentionDropdown,{}),(0,t.jsx)(A.ModelSelectionDropdown,{}),(0,t.jsx)(I.TextLengthDropdown,{}),(0,t.jsx)(x.SettingsDropdown,{canControlChatSources:"full-chat-library"===e.type})]}),(0,t.jsxs)("div",{className:"flex flex-row gap-2 flex-shrink-0",children:[(0,t.jsx)(r.PersistentTooltip,{content:"Add attachments",persistent:!1,asChild:!0,children:(0,t.jsx)(h.AttachmentPopover,{isUploading:b,isPasteUploading:_,onFileInputClick:()=>{O()},location:"chat"})}),(0,t.jsx)("button",{disabled:!C&&(v||S||!M.length),onClick:()=>{if(C)return void k();P(M,L,w)},className:(0,u.cn)("disabled:opacity-50 disabled:cursor-not-allowed","flex justify-center items-center  rounded-full p-3 ease-in transition-all duration-150 cursor-pointer bg-blue text-white",(M.length||C)&&!S?"":"bg-secondary dark:bg-secondary text-text-secondary"),children:C?(0,t.jsx)(s.StopIcon,{className:"h-7 w-7 p-1"}):(0,t.jsx)(i.ArrowUp,{className:"h-7 w-7",strokeWidth:2.5})})]})]}),(0,t.jsx)("input",{type:"file",ref:D,onChange:e=>{N(e),y(!1)},onClick:()=>y(!0),className:"hidden",multiple:!0,accept:".png,.jpg,.jpeg,.webp,.gif,.pdf"})]})}},90074:e=>{"use strict";e.s({useChatInitialInput:()=>a});var t=e.i(982152),n=e.i(373150),i=e.i(681299);let a=e=>{let{editor:a}=e,s=(0,n.useRef)(!1),{input:r,isLoading:o}=(0,t.useSavedChatbotInput)(),{uniqueSaveId:l}=(0,i.useChatUniqueId)();return(0,n.useEffect)(()=>{!1!==o||r||(s.current=!0),a&&r&&r&&!s.current&&(s.current=!0,a.commands.setContent(r))},[r,a,l]),{isSavedInputLoading:o}}},907641:e=>{"use strict";e.s({default:()=>v});var t=e.i(290479),n=e.i(672614),i=e.i(309643);e.i(788606);var a=e.i(906250),s=e.i(606982);e.i(987617);var r=e.i(56077),o=e.i(737137),l=e.i(184782),c=e.i(224879),u=e.i(373150),d=e.i(982152),h=e.i(853985),p=e.i(227261),m=e.i(653504),f=e.i(39888),T=e.i(483699),g=e.i(681299),E=e.i(90074),A=e.i(174527),x=e.i(346148),I=e.i(719772),_=e.i(731455),C=e.i(751746);let v=e=>{let{onBlur:v}=e,[S,D]=(0,u.useState)(!1),[y,N]=(0,u.useState)(!1),[b,O]=(0,u.useState)(!1),R=(0,u.useRef)(null),P=(0,p.useChatbotStore)(e=>e.mode),{saveChat:k}=(0,d.useChatbotInput)(),{setEditor:M,setEntityId:L}=(0,I.useChatEditorTiptap)(),{setEditorContent:w}=(0,I.useEditorContent)(),{isInputDisabled:G}=(0,_.useInputDisabled)(),{uniqueSaveId:j}=(0,g.useChatUniqueId)(),B=(0,u.useCallback)(()=>{if(R.current){let{scrollTop:e,scrollHeight:t,clientHeight:n}=R.current,i=t>n;N(i&&e>2),O(i&&e<t-n-2)}},[]),F=(0,u.useCallback)(()=>{requestAnimationFrame(()=>{R.current&&B()})},[B]);(0,u.useEffect)(()=>{let e=new MutationObserver(e=>{for(let t of e)"childList"===t.type&&D(!!document.querySelector(".tippy-box"))});return e.observe(document.body,{childList:!0,subtree:!0}),()=>e.disconnect()},[]),(0,u.useEffect)(()=>{B()},[]);let U=(0,u.useMemo)(()=>(0,C.createMentionExtension)(),[]),H=(0,u.useMemo)(()=>[n.default,s.default,o.default,U,a.default,i.default,m.CustomLink.configure({HTMLAttributes:{class:"px-2 rounded-[6px] bg-blue/10 !text-blue inline text-sm font-medium break-all max-w-full"},openOnClick:!1,autolink:!0}),r.default.configure({placeholder:(0,T.getPlaceholderText)(P),emptyEditorClass:"is-editor-empty"})],[U]),{append:V}=(0,x.useAppendMessage)(),{attachments:Y}=(0,d.useSavedChatbotInput)(),{chatSources:z}=(0,A.useChatSources)(),{createPasteHandler:W}=(0,h.usePasteImageHandler)(),q=(0,u.useMemo)(()=>{if("chatbot"!==P.type)return Y;let e=P.chatbotType,t=P.chatbotName;return[{id:(0,c.default)(),type:"input-attachment",data:{type:"source",chatbotType:e,chatbotName:t||"Untitled"}},...Y]},[P,Y]),K=(0,l.useEditor)({extensions:H,immediatelyRender:!1,shouldRerenderOnTransaction:!1,onUpdate:e=>{let{editor:t}=e,n=t.getJSON(),{mentionAttachments:i,tools:a}=(0,f.extractEditorContent)(t);j&&(k(n,i,j),a.length>0&&w(n)),w(n),F()},onCreate:e=>{let{editor:t}=e;M(t),L(j)},editorProps:{handleKeyDown:(e,t)=>{if("Enter"===t.key&&!t.shiftKey){if(S||!K)return!1;t.preventDefault();let{text:e,mentionAttachments:n}=(0,f.extractEditorContent)(K),{latestAttachments:i}=(0,f.ensureLatestAttachmentsExists)(q,n);return!!G||(V(e,i,z),!0)}return!1},handlePaste:(e,t)=>(W()(t),!1)},onBlur:()=>{null==v||v()}}),{isSavedInputLoading:Q}=(0,E.useChatInitialInput)({editor:K});return((0,T.useChatPlaceholder)(P,K),K)?(0,t.jsxs)("div",{className:"relative",children:[y&&(0,t.jsx)("div",{className:"absolute top-0 left-0 right-0 h-8 bg-gradient-to-b from-popover to-transparent z-40 pointer-events-none scrollbar-overlay"}),(0,t.jsx)("div",{ref:R,className:"focus-within:outline-none overflow-auto max-h-48 leading-[22px]",onScroll:B,children:(0,t.jsx)(l.EditorContent,{disabled:Q||G,editor:K})}),b&&(0,t.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-8 bg-gradient-to-t from-popover to-transparent z-40 pointer-events-none"})]}):null}},436774:e=>{"use strict";e.s({default:()=>a});var t=e.i(290479),n=e.i(663018),i=e.i(34818);let a=()=>(0,t.jsx)(i.motion.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2,ease:"easeOut"},className:"px-6 bg-transparent mb-2",children:(0,t.jsxs)("p",{className:"text-sm flex items-center leading-5 gap-3 text-text-primary bg-transparent",children:[(0,t.jsx)(n.LoadingSpinner,{color:"#9a9a9a",variant:"small"}),"Images are still processing"]})})},901613:e=>{"use strict";e.s({ChatV2InputStatus:()=>o});var t=e.i(290479),n=e.i(852951),i=e.i(34818),a=e.i(373150),s=e.i(221297),r=e.i(436774);let o=()=>{let e=(0,s.useChatV2Store)(e=>e.mode),{data:o}=(0,n.useWorkspace)(),l=(0,a.useMemo)(()=>{if("chatbot"!==e.type)return null;let t=e.chatbotId;return null==o?void 0:o.entities.find(e=>e.id===t)},[o,e]);if(!l)return null;if(!l.isIndexed&&"RECORDING"===l.type)return(0,t.jsx)(i.motion.div,{initial:{opacity:0,y:10,scale:.95,filter:"blur(10px)"},animate:{opacity:1,y:0,scale:1,filter:"blur(0px)"},exit:{opacity:0,y:10,scale:.95,filter:"blur(10px)"},transition:{duration:.15,ease:"easeOut"},className:"px-4 py-9 relative",children:(0,t.jsxs)("p",{className:"text-sm text-text-secondary flex items-center leading-5 gap-3 pl-6",children:[(0,t.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 2C4.13401 2 1 5.13401 1 9C1 12.866 4.13401 16 8 16C11.866 16 15 12.866 15 9C15 5.13401 11.866 2 8 2ZM8 4C8.55228 4 9 4.44772 9 5V8C9 8.55228 8.55228 9 8 9C7.44772 9 7 8.55228 7 8V5C7 4.44772 7.44772 4 8 4ZM8 10C8.55228 10 9 10.4477 9 11C9 11.5523 8.55228 12 8 12C7.44772 12 7 11.5523 7 11C7 10.4477 7.44772 10 8 10Z",fill:"currentColor"})}),"Chat enabled when recording completes"]})});if("SUCCESS_PENDING_IMAGES"===l.ingestionStatus)return(0,t.jsx)(r.default,{});if("GROUP"===l.type){let e=null==o?void 0:o.entities.filter(e=>e.groupId===l.id);if(!(e&&e.length>0))return(0,t.jsx)(i.motion.div,{initial:{opacity:0,y:10,scale:.95,filter:"blur(10px)"},animate:{opacity:1,y:0,scale:1,filter:"blur(0px)"},exit:{opacity:0,y:10,scale:.95,filter:"blur(10px)"},transition:{duration:.15,ease:"easeOut"},className:"px-4 py-9 w-full",children:(0,t.jsx)("p",{className:"text-sm text-text-secondary  items-center truncate",children:"Add files to this folder to enable the chat"})})}return null}},639480:e=>{"use strict";e.s({default:()=>i});var t=e.i(290479),n=e.i(34818);let i=()=>(0,t.jsx)(n.motion.div,{initial:{opacity:0,y:10,scale:.95,filter:"blur(10px)"},animate:{opacity:1,y:0,scale:1,filter:"blur(0px)"},exit:{opacity:0,y:10,scale:.95,filter:"blur(10px)"},transition:{duration:.15,ease:"easeOut"},className:"px-4 py-9 relative",children:(0,t.jsxs)("p",{className:"text-sm text-destructive-solid flex items-center leading-5 gap-3 pl-6",children:[(0,t.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.86134 2.43572C8.47216 1.78682 7.53117 1.78852 7.14433 2.43883L1.16602 12.4887C0.7695 13.1553 1.24985 14 2.02546 14H14.0314C14.8086 14 15.2887 13.1522 14.889 12.4856L8.86134 2.43572ZM7.00021 5C7.00021 4.44772 7.44793 4 8.00021 4C8.5525 4 9.00021 4.44772 9.00021 5V8C9.00021 8.55228 8.5525 9 8.00021 9C7.44793 9 7.00021 8.55228 7.00021 8V5ZM7.00021 11C7.00021 10.4477 7.44793 10 8.00021 10C8.5525 10 9.00021 10.4477 9.00021 11V12C9.00021 12.5523 8.5525 13 8.00021 13C7.44793 13 7.00021 12.5523 7.00021 12V11Z",fill:"currentColor"})}),"Chat unavailable. We’ll be back soon!"]})})},895138:e=>{"use strict";e.s({default:()=>c});var t=e.i(290479),n=e.i(330462),i=e.i(34818),a=e.i(373150),s=e.i(704255),r=e.i(450807),o=e.i(950347),l=e.i(252390);let c=()=>{let{track:e}=(0,l.default)(),{showUpgrade:c}=(0,r.useUpgrade)(),{exceededLimits:u}=(0,o.default)(),d=async()=>{e("upsell_banner_purchase_clicked"),c("messageLimit")},[h,p]=(0,a.useState)(!1),m=(0,a.useRef)(null),[f,T]=(0,a.useState)(!1),g=(null==u?void 0:u.isWordCountLimitExceeded)?"You ran out of AI words. Upgrade for unlimited or check back tomorrow.":null,E=h?"".concat(null==g?void 0:g.split(".")[0],"."):g;return(0,a.useLayoutEffect)(()=>{let e,t=new ResizeObserver(t=>{clearTimeout(e),e=setTimeout(()=>{let e=t[0];if(e){let t=e.contentRect.width<550;p(e=>e!==t?t:e)}},16)});if((null==m?void 0:m.current)&&f){var n;t.observe(m.current),p((null==(n=m.current.getBoundingClientRect())?void 0:n.width)<550)}return()=>{clearTimeout(e),t.disconnect()}},[f]),(0,t.jsx)(n.AnimatePresence,{children:g&&(0,t.jsx)(i.motion.div,{initial:{opacity:0,y:10,scale:.95,filter:"blur(10px)"},animate:{opacity:1,y:0,scale:1,filter:"blur(0px)"},exit:{opacity:0,y:10,scale:.95,filter:"blur(10px)"},transition:{duration:.15,ease:"easeOut"},className:"overflow-hidden z-0 relative px-4",onAnimationComplete:()=>{T(!0)},children:(0,t.jsxs)("div",{ref:m,className:"w-full line-[14px] flex items-center h-full justify-between rounded-t-lg",children:[(0,t.jsx)("p",{className:"pl-6 py-9 text-sm text-text-secondary leading-4 tracking-[-0.14px]",children:E}),(0,t.jsx)("div",{className:"flex items-center",children:(0,t.jsx)(s.Button,{size:"small",variant:"accent-muted",onClick:d,children:"Upgrade"})})]})})})}},786701:e=>{"use strict";e.s({default:()=>_});var t=e.i(290479),n=e.i(34818),i=e.i(772476),a=e.i(373150),s=e.i(998145),r=e.i(972899),o=e.i(885905),l=e.i(982152),c=e.i(872967),u=e.i(969029),d=e.i(852951),h=e.i(289702),p=e.i(530739),m=e.i(221297),f=e.i(681299),T=e.i(865602),g=e.i(907641),E=e.i(901613),A=e.i(639480),x=e.i(895138),I=e.i(719772);let _=()=>{let e=(0,i.useAnimationControls)(),{isDowntime:_}=(0,c.default)(),{userPlanDetails:C}=(0,o.useAuth)(),v=(0,m.useChatV2Store)(e=>e.mode),{removeAttachment:S}=(0,l.useChatbotInput)(),{attachments:D}=(0,l.useSavedChatbotInput)(),{editor:y}=(0,I.useChatEditorTiptap)(),{groupMembers:N}=(0,u.default)("chatbot"===v.type&&"GROUP"===v.chatbotType?v.chatbotId:null),{chatbot:b}=(0,d.useWorkspaceChatbot)("chatbot"===v.type?v.chatbotId:""),O=(0,a.useMemo)(()=>"full-chat-library"===v.type?"Library":"chatbot"!==v.type?null:(null==b?void 0:b.name)||v.chatbotName||"Untitled",[v,b]);(0,a.useEffect)(()=>{let e;return(null==y?void 0:y.view)&&!y.isDestroyed&&(e=setTimeout(()=>{(null==y?void 0:y.view)&&!y.isDestroyed&&y.commands.focus()},0)),()=>{e&&clearTimeout(e)}},[y]);let{uniqueSaveId:R}=(0,f.useChatUniqueId)();return(0,t.jsxs)("div",{className:"relative mb-6 flex flex-col text-sm z-10 bg-none bg-transparent",children:[(0,t.jsx)(E.ChatV2InputStatus,{}),_&&(0,t.jsx)(A.default,{}),!_&&(null==C?void 0:C.planName.toLowerCase())==="free"&&(0,t.jsx)(x.default,{}),(0,t.jsxs)(n.motion.div,{animate:e,className:(0,h.cn)("flex z-0 flex-col justify-between gap-2 rounded-8 shadow-feint p-[1px] bg-popover-hover-solid overflow-hidden"),style:{viewTransitionName:"chat-input-container"},children:[("chatbot"===v.type&&O||"full-chat-library"!==v.type)&&(0,t.jsxs)(n.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},transition:{duration:.1,ease:"easeOut"},className:"flex flex-row items-center gap-4 px-6 pt-4 pb-2 text-text-secondary flex-nowrap min-w-0",children:[(0,t.jsx)(r.Icon,{size:"md",className:"flex-shrink-0",as:(0,s.default)({type:"chatbot"===v.type?v.chatbotType:"CHAT"})}),(0,t.jsx)("div",{className:"text-sm font-medium truncate min-w-0",children:O}),"chatbot"===v.type&&"GROUP"===v.chatbotType&&(0,t.jsxs)("div",{className:"text-xs text-feint-foreground flex-shrink-0",children:[N.length," ",1===N.length?"file":"files"]})]}),(0,t.jsxs)("div",{onClick:e=>{let t=e.target;e.currentTarget.contains(t)&&e.isTrusted&&(t.closest("button, a, input, select, textarea")||null==y||y.commands.focus())},className:"relative flex flex-col justify-between  rounded-8 p-6 bg-popover max-h-[24rem] min-h-[76px]  z-10 gap-7",children:[D.length>0&&(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)(p.default,{attachments:D,onDelete:e=>S(e,R)})}),(0,t.jsx)("div",{className:"flex-1 min-h-0 overflow-y-auto pl-1",children:(0,t.jsx)(g.default,{})}),(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)(T.default,{})})]})]})]})}},175745:e=>{"use strict";e.s({ChatV2Bottom:()=>s});var t=e.i(290479),n=e.i(328191),i=e.i(597875),a=e.i(786701);let s=()=>{let{isSharedChat:e,shareId:s}=(0,i.useIsSharedChat)();return e?(0,t.jsx)(n.default,{shareId:s}):(0,t.jsx)(a.default,{})}},453349:e=>{"use strict";e.s({ChatV2InitialQuery:()=>r});var t=e.i(118246),n=e.i(373150),i=e.i(60145),a=e.i(346148),s=e.i(681299);let r=()=>{let e=(0,n.useRef)({}),r=(0,i.usePendingMessageStore)(),[o,l]=(0,t.useQueryState)("query",t.parseAsString),[c,u]=(0,t.useQueryState)("attachments",t.parseAsString),[d,h]=(0,t.useQueryState)("chatSources",t.parseAsString),[p,m]=(0,t.useQueryState)("pendingMessage",t.parseAsString),{append:f}=(0,a.useAppendMessage)(!0),{uniqueSaveId:T}=(0,s.useChatUniqueId)();return(0,n.useEffect)(()=>{if(T&&!e.current[T]){if("true"===p){let n=r.consume(T);if(n){var t;m(null),f(n.text,null!=(t=n.attachments)?t:[],n.chatSources),e.current[T]=!0;return}}if(o&&""!==o){let t,n=[];if(c)try{let e=atob(decodeURIComponent(c));n=JSON.parse(e)}catch(e){console.error("Failed to parse attachments from URL:",e)}if(d)try{t=JSON.parse(d)}catch(e){console.error("Failed to parse chatSources from URL:",e)}l(null),u(null),h(null),f(o,n,t),e.current[T]=!0}}},[o,c,d,p,T,f,l,u,h,m]),null}},308332:e=>{"use strict";e.s({ChatV2LastViewed:()=>l});var t=e.i(440840),n=e.i(852951),i=e.i(814733),a=e.i(373150),s=e.i(341664),r=e.i(221297),o=e.i(681299);let l=()=>{let{chatId:e}=(0,s.useChatId)(),{isAdmin:l}=(0,t.useImpersonation)(),{uniqueSaveId:c}=(0,o.useChatUniqueId)(),{updateChatbot:u}=(0,n.useWorkspaceActions)(),d=i.api.chat.updateLastViewed.useMutation({onMutate:e=>{u(e,{lastViewedAt:new Date})}}),h=(0,r.useChatV2Store)(e=>e.mode);return(0,a.useEffect)(()=>{if(l)return;let t=e;"chatbot"!==h.type&&c&&(t=c),t&&d.mutate(t)},[h]),null}},581732:e=>{"use strict";e.s({ChatV2MessageLoader:()=>i});var t=e.i(290479),n=e.i(289702);let i=e=>{let{containerClassName:i,children:a}=e;return(0,t.jsxs)("div",{className:(0,n.cn)("items-center flex gap-[4px] h-[20px] text-text-secondary",i),children:[(0,t.jsx)("div",{className:"blinking-cursor w-[8px] h-[16px] bg-current rounded-[2px]"}),a]})}},470891:e=>{"use strict";e.s({default:()=>l});var t=e.i(290479),n=e.i(608294),i=e.i(373150),a=e.i(289702),s=e.i(221297),r=e.i(658766);let o=(0,i.forwardRef)((e,o)=>{let{children:l}=e,c=(0,i.useRef)(null),u=(0,s.useChatV2Store)(e=>e.mode),d=(0,i.useRef)(null),h=(0,i.useRef)(null),[p,m]=(0,n.useAtom)(r.forceScrollToBottomAtom),[f,T]=(0,i.useState)(!1),[g,E]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{T(!0)},[]),(0,i.useEffect)(()=>{if(f&&!g&&d.current&&l){let e=d.current;setTimeout(()=>{e&&e.scrollHeight>e.clientHeight&&(e.scrollTo({top:e.scrollHeight,behavior:"instant"}),m(!1),E(!0))},100)}},[f,g,l,m]),(0,t.jsx)("div",{ref:e=>{c.current=e,d.current=e,"function"==typeof o?o(e):o&&(o.current=e)},className:"relative p-7 pb-56 flex flex-col h-full overflow-x-hidden overflow-y-scroll scrollbar-overlay",style:{..."chatbot"!==u.type&&{scrollbarGutter:"stable both-edges"}},children:(0,t.jsx)("div",{className:(0,a.cn)("flex flex-col gap-7 max-w-[680px] mx-auto w-full chat-content"),style:{containerType:"inline-size",containerName:"chat-messages",contain:"layout style"},ref:h,children:l})})});o.displayName="ChatV2Messages";let l=o},901162:e=>{"use strict";e.s({ExternalSourceItem:()=>l});var t=e.i(290479),n=e.i(252390),i=e.i(289702),a=e.i(184901),s=e.i(373150),r=e.i(650639),o=e.i(972899);let l=e=>{let{source:l}=e,[c,u]=(0,s.useState)(!1),{track:d}=(0,n.default)(),h=l.data.url,p="external-paper"===l.data.type?l.data.paperTitle:l.text||new URL(h).hostname,{onExternalSourceSubmit:m}=(0,r.useIngest)(),f=(e=>{try{return new URL(e).hostname}catch(t){return e}})(h);return(0,t.jsxs)("div",{className:"flex justify-end gap-4 items-center py-2 px-3 hover:bg-accent rounded-4 whitespace-nowrap overflow-hidden",onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),children:[(0,t.jsxs)("a",{onClick:()=>d("source_list_item_external_clicked",{sourceUrl:h,sourceName:p,externalSourceType:l.data.type}),href:h,target:"_blank",rel:"noopener noreferrer",className:"text-sm flex items-center w-full gap-4 min-w-0 overflow-hidden",children:[(0,t.jsx)(o.Icon,{as:a.ArrowUpRight,className:"flex-shrink-0 "}),(0,t.jsx)("span",{className:"truncate max-w-[40ch]",children:p}),(0,t.jsx)("span",{className:(0,i.cn)("text-xs text-text-secondary ml-4 flex-shrink-0 max-w-32 truncate",c&&"truncate"),children:f})]},h)," ",c&&(0,t.jsx)("p",{className:"text-feint-foreground text-xs flex-shrink-0 hover:underline cursor-pointer whitespace-nowrap",onClick:()=>m(h),children:"Add to library"})]})}},807429:e=>{"use strict";e.s({ReferenceTooltip:()=>o});var t=e.i(290479),n=e.i(814733),i=e.i(373150),a=e.i(998145),s=e.i(993392),r=e.i(972899);let o=e=>{var o;let{content:l,children:c,chatbotId:u,type:d,align:h,delay:p=300}=e,[m,f]=(0,i.useState)(!1),{data:T}=n.api.citations.preview.useQuery(null!=u?u:"",{});return"RECORDING"===d?c:(0,t.jsxs)(s.HoverCard,{openDelay:75,closeDelay:100,onOpenChange:e=>f(e),children:[(0,t.jsx)(s.HoverCardTrigger,{asChild:!0,onClick:e=>{"NOTHING"!==d&&e.preventDefault()},children:c}),(0,t.jsx)(s.HoverCardPortal,{children:(0,t.jsxs)(s.HoverCardContent,{side:"top",align:h,className:"bg-popover max-w-[300px] border border-border-primary px-6 py-5 shadow-feint text-xs leading-[19.5px] -tracking-[0.32px] rounded-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 pb-5",children:[(null==T?void 0:T.type)&&(0,t.jsx)(r.Icon,{className:"flex-shrink-0 z-10 text-text-primary ",as:(0,a.default)({type:T.type})}),(0,t.jsx)("div",{className:"text-sm font-medium text-text-primary line-clamp-1",children:null==T?void 0:T.title})]}),(0,t.jsx)("div",{className:"line-clamp-[7] text-text-primary",children:(0,t.jsx)("p",{children:null!=(o=null==T?void 0:T.summary)?o:l})})]})})]})}},302571:e=>{"use strict";e.s({default:()=>u});var t=e.i(290479),n=e.i(852951),i=e.i(252390),a=e.i(397711),s=e.i(998145),r=e.i(972899),o=e.i(901162),l=e.i(807429);let c=e=>{let{linkedChatbot:n}=e,o=(0,a.useRouter)(),{track:l}=(0,i.default)();return(0,t.jsxs)("div",{className:"text-sm flex items-center py-2 hover:bg-accent rounded-4 px-3 gap-4",onClick:()=>{l("source_list_item_internal_clicked",{sourceId:n.id,sourceName:n.name,chatbotType:n.type}),o.push("/b/".concat(n.id))},children:[(0,t.jsx)(r.Icon,{onClick:e=>{e.preventDefault()},className:"flex-shrink-0",as:(0,s.default)({type:n.type})}),(0,t.jsx)("p",{className:"truncate max-w-full",children:n.name||"Untitled"})]})},u=e=>{let{sources:i,showAll:a}=e,{data:s}=(0,n.useWorkspace)();if(!a)return null;let r=new Map,u=new Map;for(let e of i)if("source"===e.type)r.set(e.chatbotId,e);else if("external-source"===e.type){let t=e.data;"external-google-drive"===t.type?u.set(t.fileId,e):u.set(t.url,e)}return(0,t.jsxs)("div",{className:"flex flex-col w-full border rounded-6 p-4",children:[Array.from(r.values()).map(e=>{var n,i,a;if("source"!==e.type)return null;let r=null==s||null==(n=s.entities)?void 0:n.find(t=>t.id===e.chatbotId);return r&&"PLACEHOLDER"!==r.type&&"CHAT"!==r.type?(0,t.jsx)(l.ReferenceTooltip,{content:null!=(i=r.name)?i:"",type:r.type,chatbotId:r.id,align:"start",delay:1e3,children:(0,t.jsx)("div",{children:(0,t.jsx)(c,{linkedChatbot:{id:r.id,name:null!=(a=r.name)?a:null,type:r.type}})})},e.chatbotId):null}),Array.from(u.values()).map(e=>{if("external-source"!==e.type)return null;let n=e.data;return"external-google-drive"===n.type?(0,t.jsx)(o.ExternalSourceItem,{source:e},n.fileId):(0,t.jsx)(o.ExternalSourceItem,{source:e},n.url)})]})}},282246:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("git-branch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]])},596392:e=>{"use strict";e.s({GitBranch:()=>t.default});var t=e.i(282246)},626367:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("refresh-ccw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]])},394600:e=>{"use strict";e.s({RefreshCcw:()=>t.default});var t=e.i(626367)},154469:e=>{"use strict";e.s({useCreateQuiz:()=>n});var t=e.i(814733);let n=()=>{let e=t.api.chatbot.createQuiz.useMutation();return{createQuizFromCards:async(t,n,i,a,s)=>{let r=t.map(e=>({...e,id:e.id||crypto.randomUUID()})),o={title:n,description:"Cards created from chat with ".concat(r.length," cards"),cards:r,metadata:{totalCards:r.length,cardTypes:[...new Set(r.map(e=>e.type))],createdFrom:"chat",sourceMessageId:i}};return await e.mutateAsync({name:n,contents:o,teamId:a,groupId:s})},isLoading:e.isPending,error:e.error}}},506674:e=>{"use strict";function t(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:70;if(!(null==e?void 0:e.content)||!Array.isArray(e.content))return e;let n=e.content.find(e=>{var t;return"title"===e.type||"heading"===e.type&&(null==(t=e.attrs)?void 0:t.level)===1});if((null==n?void 0:n.content)&&Array.isArray(n.content)){for(let i of n.content.filter(e=>"text"===e.type))if("string"==typeof i.text&&i.text.length>t){let n=i.text;i.text=n.slice(0,t);let a={type:"paragraph",content:[{type:"text",text:n}]},s=e.content.findIndex(e=>{var t;return"title"===e.type||"heading"===e.type&&(null==(t=e.attrs)?void 0:t.level)===1});-1!==s&&e.content.splice(s+1,0,a)}}return e}e.s({processLongTitles:()=>t})},46796:e=>{"use strict";e.s({DownloadImageButton:()=>l});var t=e.i(290479),n=e.i(748445),i=e.i(337188),a=e.i(252390),s=e.i(704255),r=e.i(972899),o=e.i(476440);let l=e=>{let{imageData:l,filename:c="generated-image",promptId:u}=e,{track:d}=(0,a.default)(),h=async()=>{u&&(0,i.trackButtonAction)(d,"download_image",u,{filename:c});try{let e;if(l.startsWith("http://")||l.startsWith("https://")){let t=await fetch(l);e=await t.blob()}else{let t=l.includes("base64,")?l.split(",")[1]:l,n=atob(t),i=Array(n.length);for(let e=0;e<n.length;e++)i[e]=n.charCodeAt(e);let a=new Uint8Array(i);e=new Blob([a],{type:"image/png"})}let t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download="".concat(c,".png"),document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(t),d("download_image_banana",{imageUrl:l})}catch(e){console.error("Failed to download image:",e)}};return l?(0,t.jsx)(o.ReusableTooltip,{content:"Download Image",asChild:!0,children:(0,t.jsx)("div",{className:"h-[22px]",children:(0,t.jsx)(s.Button,{variant:"ghost",size:"xxs",className:"!h-[22px]",onClick:h,children:(0,t.jsx)(r.Icon,{as:n.Download})})})}):null}},675725:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("thumbs-down",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]])},126074:e=>{"use strict";e.s({ThumbsDown:()=>t.default});var t=e.i(675725)},616337:e=>{"use strict";e.s({CopyButton:()=>P,OpenAsNoteButton:()=>k,SaveAsQuizButton:()=>L,ThumbButton:()=>M});var t=e.i(290479),n=e.i(650429),i=e.i(691283),a=e.i(874133),s=e.i(486137),r=e.i(425683);e.i(394600);var o=e.i(126074),l=e.i(752161),c=e.i(674666),u=e.i(373150),d=e.i(525094),h=e.i(58372),p=e.i(337188),m=e.i(341664),f=e.i(221297),T=e.i(663018),g=e.i(986216),E=e.i(154469),A=e.i(846580),x=e.i(461655),I=e.i(852951),_=e.i(252390),C=e.i(227261),v=e.i(459793),S=e.i(298583),D=e.i(506674),y=e.i(704255),N=e.i(972899);e.i(46796);let b=(e,t)=>{var n,i;return"external-source"===e.type?null!=(n=t.get(e.data.url))?n:0:"external-database"===e.type?null!=(i=t.get(e.order))?i:0:(0,h.getCitationNumberFromMap)(e,t)},O=e=>{if("external-database"!==e.type)return"external-source"===e.type?e.data.url.startsWith("http://")||e.data.url.startsWith("https://")?e.data.url:"https://".concat(e.data.url):"/b/".concat(e.chatbotId)},R=e=>"external-source"===e.type||"external-database"===e.type?e.order.toString():e.chatbotId,P=e=>{let{text:n,promptId:i,flashcardParts:r}=e,{track:o}=(0,_.default)(),[l,d]=(0,u.useState)(!1);return(0,t.jsx)(y.Button,{variant:"ghost",size:"xxs",onClick:()=>{let e="",t="";r&&r.length>0?(e=(e=>{let t="";return e.forEach((e,n)=>{if("flashcards"===e.type)t+="FLASHCARD SET ".concat(n+1,"\n"),t+="".concat("=".repeat(50),"\n\n"),e.flashcards.forEach((e,n)=>{t+="Card ".concat(n+1,":\n"),t+="---------\n",t+="Q: ".concat(e.question,"\n"),t+="A: ".concat(e.answer,"\n"),e.explanation&&(t+="Explanation: ".concat(e.explanation,"\n")),e.hint&&(t+="Hint: ".concat(e.hint,"\n")),t+="\n"});else if("generate-flashcards"===e.type){var i;t+="FLASHCARD SET ".concat(n+1,"\n"),t+="".concat("=".repeat(50),"\n\n"),(e.data.flashcards||(null==(i=e.data.flashcardData)?void 0:i.flashcards)||[]).forEach((e,n)=>{t+="Card ".concat(n+1,":\n"),t+="---------\n","options"in e&&Array.isArray(e.options)?(t+="Q: ".concat(e.question,"\n"),t+="Options:\n",e.options.forEach((n,i)=>{let a=i===e.correctAnswer?"✓":" ";t+="  ".concat(String.fromCharCode(65+i),") ").concat(n," ").concat(a,"\n")})):"statement"in e?(t+="Statement: ".concat(e.statement,"\n"),t+="Answer: ".concat(e.correctAnswer?"TRUE":"FALSE","\n")):"text"in e&&"correctAnswer"in e?(t+="Complete: ".concat(e.text,"\n"),t+="Answer: ".concat(e.correctAnswer,"\n")):"question"in e&&"answer"in e&&(t+="Q: ".concat(e.question,"\n"),t+="A: ".concat(e.answer,"\n")),e.explanation&&(t+="Explanation: ".concat(e.explanation,"\n")),e.hint&&(t+="Hint: ".concat(e.hint,"\n")),t+="\n"})}}),t})(r),t="<pre>".concat(e,"</pre>")):e=(t=(t=c.marked.parse(n,{async:!1,breaks:!0,gfm:!0})).replace(/\s*@\d+([.,!?;])?/g,"$1").replace(/,\./g,".")).replace(/<[^>]+>/g,"");let a=new DataTransfer;a.setData("text/html",t),a.setData("text/plain",e),navigator.clipboard.write([new ClipboardItem({"text/html":new Blob([t],{type:"text/html"}),"text/plain":new Blob([e],{type:"text/plain"})})]),o("chat_feedback_copied",{promptId:i,contentType:r?"flashcards":"text"}),(0,p.trackButtonAction)(o,"copy",i,{contentType:r?"flashcards":"text"}),d(!0),setTimeout(()=>d(!1),2e3)},children:(0,t.jsx)(N.Icon,{as:l?a.Check:s.Copy})})},k=e=>{let{text:a,promptId:s,sources:o}=e,{indexNote:l}=(0,S.useIndexNote)(),{createNote:u,isPending:d}=(0,x.default)({onSuccess:(e,t)=>{G("chat_add_to_library",{header:null==t?void 0:t.name,promptId:s}),e&&l({id:e.id,content:a}),!w&&e&&(E("notes",!0),L(null==e?void 0:e.id))}}),E=(0,C.useChatbotStore)(e=>e.toggle),P=(0,f.useChatV2Store)(e=>e.mode),{chatId:k}=(0,m.useChatId)(),M=(0,I.useWorkspaceChats)(P),{setSideViewItem:L}=(0,g.useSideView)(),w=(0,A.useIsMobile)(),{track:G}=(0,_.default)(),j=(e,t)=>{if(!e||"object"!=typeof e)return e;if(Array.isArray(e)){let n=[];for(let i=0;i<e.length;i++){let a=e[i];if((null==a?void 0:a.type)==="text"&&(null==a?void 0:a.text)){let e=!1,i=a.text;for(let[s,{language:r,content:o}]of t.entries())if(i.includes(s)){e=!0;let t=i.split(s);t[0]&&n.push({type:"text",text:t[0],...a.marks&&{marks:a.marks}}),n.push({type:"codeBlock",attrs:{language:r},content:[{type:"text",text:o}]}),i=t.slice(1).join(s)}e?i&&n.push({type:"text",text:i,...a.marks&&{marks:a.marks}}):n.push(j(a,t))}else n.push(j(a,t))}return n}return e.content&&Array.isArray(e.content)?{...e,content:j(e.content,t)}:e},B=async e=>{var t,n;let a=M.find(e=>e.id===k),s=e.replace(/(\*\*)[0-9#*]\u{FE0F}?\u{20E3}\s*/gu,"$1").replace(/(\*)[0-9#*]\u{FE0F}?\u{20E3}\s*/gu,"$1").replace(/(__)[0-9#*]\u{FE0F}?\u{20E3}\s*/gu,"$1").replace(/(_)[0-9#*]\u{FE0F}?\u{20E3}\s*/gu,"$1").replace(/[0-9#*]\u{FE0F}?\u{20E3}/gu,"").replace(/[0-9#*]\u{20E3}/gu,"").replace(/[\u{1F600}-\u{1F64F}]/gu,"").replace(/[\u{1F300}-\u{1F5FF}]/gu,"").replace(/[\u{1F680}-\u{1F6FF}]/gu,"").replace(/[\u{1F700}-\u{1F77F}]/gu,"").replace(/[\u{1F780}-\u{1F7FF}]/gu,"").replace(/[\u{1F800}-\u{1F8FF}]/gu,"").replace(/[\u{1F900}-\u{1F9FF}]/gu,"").replace(/[\u{1FA00}-\u{1FA6F}]/gu,"").replace(/[\u{1FA70}-\u{1FAFF}]/gu,"").replace(/[\u{2600}-\u{26FF}]/gu,"").replace(/[\u{2700}-\u{27BF}]/gu,"").replace(/[\u{1F1E6}-\u{1F1FF}]/gu,"").replace(/[\u{E0020}-\u{E007F}]/gu,"").replace(/[\u{1F000}-\u{1F02F}]/gu,"").replace(/[\u{1F0A0}-\u{1F0FF}]/gu,"").replace(/[\u{1F100}-\u{1F1FF}]/gu,"").replace(/[\u{2460}-\u{24FF}]/gu,"").replace(/[\u{2B50}-\u{2B55}]/gu,"").replace(/[\u{200D}]/gu,"").trim(),r=new Map,l=0,d=new Map,p=0,m=s.replace(/```(?:(\w+)\n)?([\s\S]*?)\n\s*```/g,(e,t,n)=>{if("latex"===t)return e;let i="CODEBLOCKPLACEHOLDER".concat(p++,"CODEBLOCKPLACEHOLDER");return d.set(i,{language:t||"",content:n.trim()}),i}).replace(/```latex\n([\s\S]*?)\n\s*```/g,(e,t)=>{let n=t.trim(),i=[...n.matchAll(/\\\[([\s\S]*?)\\\]/g)];if(i.length>1){let e="",t=0;for(let a of i){let i=n.slice(t,a.index).trim();i&&(e+="".concat(i,"\n\n"));let s="MATHPLACEHOLDER".concat(l++,"MATHPLACEHOLDER");r.set(s,{type:"block",latex:a[1].trim()}),e+="".concat(s,"\n\n"),t=a.index+a[0].length}let a=n.slice(t).trim();return a&&(e+="".concat(a)),"\n\n".concat(e.trim(),"\n\n")}if(1===i.length){let e="MATHPLACEHOLDER".concat(l++,"MATHPLACEHOLDER");return r.set(e,{type:"block",latex:i[0][1].trim()}),"\n\n".concat(e,"\n\n")}return"\n\n```\n".concat(n,"\n```\n\n")}).replace(/\$\$([\s\S]*?)\$\$/g,(e,t)=>{let n="MATHPLACEHOLDER".concat(l++,"MATHPLACEHOLDER");return r.set(n,{type:"block",latex:t.trim()}),n}).replace(/\\\[([\s\S]*?)\\\]/g,(e,t)=>{let n="MATHPLACEHOLDER".concat(l++,"MATHPLACEHOLDER");return r.set(n,{type:"block",latex:t.trim()}),n}).replace(RegExp("(?<!\\$)\\$([^$\\n]+)\\$(?!\\$)","g"),(e,t)=>{let n="MATHPLACEHOLDER".concat(l++,"MATHPLACEHOLDER");return r.set(n,{type:"inline",latex:t.trim()}),n}).replace(/\\\(([\s\S]*?)\\\)/g,(e,t)=>{let n="MATHPLACEHOLDER".concat(l++,"MATHPLACEHOLDER");return r.set(n,{type:"inline",latex:t.trim()}),n}),f="# ".concat(null!=(t=null==a?void 0:a.name)?t:"New Note","\n\n").concat(m),T=c.marked.parse(f,{async:!1,breaks:!0,gfm:!0});for(let[e,{type:t,latex:n}]of r.entries()){let i=n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;");T="block"===t?(T=T.replace(RegExp("<p>".concat(e,"</p>"),"g"),'<div data-type="block-math" data-latex="'.concat(i,'"></div>'))).replace(RegExp(e,"g"),'<div data-type="block-math" data-latex="'.concat(i,'"></div>')):T.replace(RegExp(e,"g"),'<span data-type="inline-math" data-latex="'.concat(i,'"></span>'))}let g=F(j((0,i.generateJSON)(T,[(0,v.starterKit)(!1),...v.defaultExtensions]),d),(0,h.buildCitationMapFromText)(e,o)),E=(0,D.processLongTitles)(g);await u({name:null!=(n=null==a?void 0:a.name)?n:"New Note",contents:E})},F=(e,t)=>{if(!e||"object"!=typeof e)return e;if(Array.isArray(e)){let r=[];for(let l=0;l<e.length;l++){var n,i,a,s;let c=e[l];if((null==c?void 0:c.type)==="text"&&(null==c?void 0:c.text)){let e=/@(\d+)/g,n=0,i=[...c.text.matchAll(e)];if(i.length>0){for(let e of i){let[i,a]=e,s=o.find(e=>e.order===Number(a));if(s&&void 0!==e.index){if(e.index>n){let t=c.text.slice(n,e.index);t&&r.push({type:"text",text:t,...c.marks&&{marks:c.marks}})}let a=b(s,t);r.push({type:"mentionCitation",attrs:{citation:{id:R(s),url:O(s),title:s.text.slice(0,100)+(s.text.length>100?"...":""),order:s.order,citationNumber:a,text:s.text,chatbotId:"source"===s.type?s.chatbotId:void 0,data:s.data,sourceType:s.type}}}),n=e.index+i.length}}if(n<c.text.length){let e=c.text.slice(n);e&&r.push({type:"text",text:e,...c.marks&&{marks:c.marks}})}}else r.push(F(c,t))}else if((null==c?void 0:c.type)==="link"&&(null==c||null==(i=c.attrs)||null==(n=i.href)?void 0:n.startsWith("/b/"))){let e=c.attrs.href.replace("/b/",""),n=(null==(s=c.content)||null==(a=s[0])?void 0:a.text)||"",i=o.findIndex(t=>"source"===t.type&&t.chatbotId===e);-1===i&&/^\d+$/.test(n)&&(i=Number.parseInt(n,10)-1);let l=o.find(t=>"source"===t.type&&t.chatbotId===e)||o.find(e=>e.order===i);if(l){let e=b(l,t);r.push({type:"mentionCitation",attrs:{citation:{id:R(l),url:O(l),title:l.text.slice(0,100)+(l.text.length>100?"...":""),order:l.order,citationNumber:e,text:l.text,chatbotId:"source"===l.type?l.chatbotId:void 0,data:l.data,sourceType:l.type}}})}else r.push(c)}else r.push(F(c,t))}return r}return e.content&&Array.isArray(e.content)?{...e,content:F(e.content,t)}:e};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.default,{id:"755eb430ec3ae035",children:"@container chat-messages (width<=679px){.open-note-text.jsx-755eb430ec3ae035{display:none!important}}"}),(0,t.jsx)(y.Button,{onClick:()=>{d||((0,p.trackButtonAction)(G,"open_as_note",s,{hasText:!0}),B(a))},variant:"secondary",className:"text-text-secondary/80 leading-[14px] gap-2 !h-[22px] font-medium rounded-[6px] transition-all duration-150",size:"xs",children:(0,t.jsx)("div",{className:"jsx-755eb430ec3ae035 flex flex-row items-center gap-2",children:d?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(T.LoadingSpinner,{variant:"small"}),(0,t.jsx)("span",{className:"jsx-755eb430ec3ae035",children:"Opening..."})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(N.Icon,{as:r.Maximize2,className:"w-[14px] h-[14px]"}),(0,t.jsx)("span",{className:"jsx-755eb430ec3ae035 open-note-text",children:"Open as Note"})]})})})]})},M=e=>{let{isPositive:n,currentReaction:i,onFeedback:a,id:s,track:r}=e;return(0,t.jsx)(y.Button,{variant:"ghost",size:"xxs",onClick:()=>{(0,p.trackButtonAction)(r,"feedback",s,{isPositive:n}),a(n)},children:(0,t.jsx)(N.Icon,{className:i===n?"fill-current":"",as:n?l.ThumbsUp:o.ThumbsDown})})},L=e=>{let{flashcardParts:i,promptId:a,track:s}=e,{createQuizFromCards:o,isLoading:l}=(0,E.useCreateQuiz)(),c=()=>{let e=[];for(let a of i){var t,n;"generate-flashcards"===a.type&&(null==(n=a.data)||null==(t=n.flashcardData)?void 0:t.flashcards)&&e.push(...a.data.flashcardData.flashcards)}return e},u=async()=>{if(l)return;(0,p.trackButtonAction)(s,"save_as_quiz",a,{flashcardCount:c().length});let e=document.createElement("a");e.target="_blank",e.rel="noopener noreferrer",e.style.display="none",document.body.appendChild(e);try{let t=c();if(0===t.length)return;let n=t[0]?"question"in t[0]?t[0].question:"statement"in t[0]?t[0].statement:"text"in t[0]?t[0].text:"Flashcard":"",i=n?"".concat(n.slice(0,50)).concat(n.length>50?"...":""):"Flashcard Cards - ".concat(new Date().toLocaleDateString()),s=await o(t,i,a);s&&e&&(e.href="/b/".concat(s.id),e.click(),document.body.removeChild(e)),d.toast.success("Cards saved successfully")}catch(e){d.toast.error("Failed to save cards")}};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.default,{id:"24caee6422a21738",children:"@container chat-messages (width<=679px){.save-cards-text.jsx-24caee6422a21738{display:none!important}}"}),(0,t.jsx)(y.Button,{onClick:u,disabled:l,variant:"secondary",className:"text-text-secondary/80 leading-[14px] gap-2 !h-[22px] font-medium rounded-[6px] transition-all duration-150",size:"xs",children:(0,t.jsx)("div",{className:"jsx-24caee6422a21738 flex flex-row items-center gap-2",children:l?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(T.LoadingSpinner,{variant:"small"}),(0,t.jsx)("span",{className:"jsx-24caee6422a21738",children:"Saving..."})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(N.Icon,{as:r.Maximize2,className:"w-[14px] h-[14px]"}),(0,t.jsx)("span",{className:"jsx-24caee6422a21738 save-cards-text",children:"Open as Cards"})]})})})]})}},795493:e=>{"use strict";e.s({}),e.i(290479),e.i(650429),e.i(674666),e.i(373150),e.i(525094),e.i(58372),e.i(337188),e.i(341664),e.i(221297),e.i(663018),e.i(986216),e.i(154469),e.i(846580),e.i(461655),e.i(852951),e.i(252390),e.i(227261),e.i(459793),e.i(298583),e.i(506674),e.i(704255),e.i(972899),e.i(46796),e.i(616337)},337188:e=>{"use strict";e.s({default:()=>C,trackButtonAction:()=>I});var t=e.i(290479),n=e.i(608294),i=e.i(227348),a=e.i(596392),s=e.i(109398),r=e.i(394600),o=e.i(330462),l=e.i(34818),c=e.i(373150),u=e.i(846580),d=e.i(252390),h=e.i(814733),p=e.i(704255);e.i(795493);var m=e.i(616337),f=e.i(46796),T=e.i(972899),g=e.i(303652),E=e.i(476440),A=e.i(346148),x=e.i(341664);let I=(e,t,n,i,a)=>{e("feedback_buttons_pressed",{promptId:n,modelName:a||"unknown",action:t,...i})},_=(0,i.atomWithStorage)("chat_reactions",{}),C=e=>{let{id:i,userParts:C,userAttachments:v,parts:S,sources:D,active:y=!1,modelName:N}=e,{track:b}=(0,d.default)(),[O,R]=(0,n.useAtom)(_),[P,k]=(0,c.useState)(!1),{append:M}=(0,A.useAppendMessage)(),{chatId:L}=(0,x.useChatId)(),w=O[i],{mutate:G}=h.api.feedback.addFeedback.useMutation({onMutate:e=>{R({...O,[i]:e.isPositive})},onSuccess:(e,t)=>{b("chat_feedback",{isPositive:t.isPositive,promptId:t.promptId,modelName:N}),I(b,"feedback",i,{isPositive:t.isPositive,promptId:t.promptId,modelName:N},N)}}),j=e=>{G({isPositive:e,promptId:i})},{mutateAsync:B}=h.api.chat.branch.useMutation(),F="";for(let e of S)if("text"===e.type)F+=e.text;else if("citation-generation"===e.type){var U;if((null==(U=e.data)?void 0:U.citations)&&e.data.citations.length>0)for(let t of(F+="\n\n## Citations\n\n",e.data.citations))F+="".concat(t.citation,"\n\n")}let H=S.some(e=>"flashcards"===e.type||"generate-flashcards"===e.type),V=S.filter(e=>"flashcards"===e.type||"generate-flashcards"===e.type),Y=(0,u.useIsMobile)(),z=C.filter(e=>"text"===e.type).map(e=>e.text).join(""),W=async()=>{if(!L)return;let e=window.open("about:blank","_blank");try{let t=await B({sourceChatId:L,upToMessageId:i}),n=new URL(window.location.href);n.searchParams.delete("chatId"),n.searchParams.set("chatId",t.id),e&&(e.location.href=n.toString()),I(b,"branch_conversation",i,{},N),k(!1)}catch(t){e&&e.close()}},q=S[S.length-1],K=q&&"generate-image"===q.type&&q.imageUrl&&"success"===q.status;return(0,t.jsx)(o.AnimatePresence,{children:(y||Y)&&(0,t.jsxs)(l.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.1},className:"flex flex-wrap gap-1 text-text-secondary px-2 min-h-[22px]",children:[F&&!H&&(0,t.jsx)("div",{children:(0,t.jsx)(m.OpenAsNoteButton,{promptId:i,text:F,sources:D})}),H&&V.length>0&&(0,t.jsx)(E.ReusableTooltip,{content:"Save as Cards",asChild:!0,children:(0,t.jsx)("div",{className:"h-[22px]",children:(0,t.jsx)(m.SaveAsQuizButton,{flashcardParts:V,promptId:i,track:b})})}),(0,t.jsx)(E.ReusableTooltip,{content:"Copy",asChild:!0,children:(0,t.jsx)("div",{className:"h-[22px]",children:(0,t.jsx)(m.CopyButton,{promptId:i,text:F,flashcardParts:H?V:void 0})})}),K&&"generate-image"===q.type&&(0,t.jsx)(f.DownloadImageButton,{imageData:q.imageUrl||"",filename:"generated-image",promptId:i}),(0,t.jsx)(E.ReusableTooltip,{content:"Positive feedback",asChild:!0,children:(0,t.jsx)("div",{className:"h-[22px]",children:(0,t.jsx)(m.ThumbButton,{isPositive:!0,currentReaction:w,onFeedback:j,id:i,track:b})})}),(0,t.jsx)(E.ReusableTooltip,{content:"Negative feedback",asChild:!0,children:(0,t.jsx)("div",{className:"h-[22px]",children:(0,t.jsx)(m.ThumbButton,{isPositive:!1,currentReaction:w,onFeedback:j,id:i,track:b})})}),(0,t.jsxs)(g.Popover,{open:P,onOpenChange:k,children:[(0,t.jsx)(g.PopoverTrigger,{asChild:!0,children:(0,t.jsx)("div",{className:"h-[22px]",children:(0,t.jsx)(p.Button,{variant:"ghost",size:"xxs",className:"!h-[22px]",title:"More actions",children:(0,t.jsx)(T.Icon,{as:s.MoreHorizontal})})})}),(0,t.jsx)(g.PopoverContent,{className:"w-48 p-2",align:"start",children:(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)(p.Button,{variant:"ghost",size:"medium",className:"justify-start gap-4 h-9 px-4 font-medium",onClick:()=>{M(z,v),I(b,"retry",i,{},N),k(!1)},leadingIcon:(0,t.jsx)(r.RefreshCcw,{className:"w-6 h-6"}),label:"Retry"}),(0,t.jsx)(p.Button,{variant:"ghost",size:"medium",className:"justify-start gap-4 h-9 px-4 font-medium",onClick:W,label:"Branch conversation",leadingIcon:(0,t.jsx)(a.GitBranch,{className:"w-6 h-6"})})]})})]})]})})}},179722:e=>{"use strict";e.s({ChatMessageParts:()=>a});var t=e.i(290479),n=e.i(430266),i=e.i(512109);let a=e=>{let{parts:a}=e;return a.map((e,a)=>(0,n.match)(e).with({type:"text"},e=>(0,t.jsx)(i.default,{sources:[],markdownContent:e.text,className:"flex flex-col"},a)).otherwise(()=>null))}},984630:e=>{"use strict";e.s({ChatRetry:()=>c});var t=e.i(290479),n=e.i(394600),i=e.i(252390),a=e.i(704255),s=e.i(972899),r=e.i(174527),o=e.i(346148),l=e.i(341664);let c=e=>{let{userParts:c,userAttachments:u}=e,{append:d}=(0,o.useAppendMessage)(),h=c.filter(e=>"text"===e.type).map(e=>e.text).join(""),{chatId:p}=(0,l.useChatId)(),{track:m}=(0,i.default)(),{chatSources:f}=(0,r.useChatSources)();return(0,t.jsx)(a.Button,{size:"xs",className:"w-fit",variant:"secondary",onClick:()=>{m("message_error_retry_clicked",{chatId:p,input:h}),d(h,u,f,!0)},label:"Retry",leadingIcon:(0,t.jsx)(s.Icon,{as:n.RefreshCcw})})}},309429:e=>{"use strict";e.s({GroupAnimation:()=>t});class t{get finished(){return Promise.all(this.animations.map(e=>e.finished))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let n=0;n<this.animations.length;n++)this.animations[n][e]=t}attachTimeline(e){let t=this.animations.map(t=>t.attachTimeline(e));return()=>{t.forEach((e,t)=>{e&&e(),this.animations[t].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get state(){return this.getAll("state")}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}}},547058:e=>{"use strict";e.s({GroupAnimationWithThen:()=>n});var t=e.i(309429);class n extends t.GroupAnimation{then(e,t){return this.finished.finally(e).then(()=>{})}}},940244:e=>{"use strict";e.s({wrap:()=>t});let t=(e,t,n)=>{let i=t-e;return((n-e)%i+i)%i+e}},576693:e=>{"use strict";e.s({getEasingForSegment:()=>i});var t=e.i(940244),n=e.i(546793);function i(e,i){return(0,n.isEasingArray)(e)?e[(0,t.wrap)(0,e.length,i)]:e}},305845:e=>{"use strict";function t(e){return"object"==typeof e&&!Array.isArray(e)}e.s({isDOMKeyframes:()=>t})},602340:e=>{"use strict";e.s({resolveSubjects:()=>i});var t=e.i(839241),n=e.i(305845);function i(e,i,a,s){return"string"==typeof e&&(0,n.isDOMKeyframes)(i)?(0,t.resolveElements)(e,a,s):e instanceof NodeList?Array.from(e):Array.isArray(e)?e:[e]}},406720:e=>{"use strict";function t(e,t,n){return e*(t+1)}e.s({calculateRepeatDuration:()=>t})},78523:e=>{"use strict";function t(e,t,n,i){var a;return"number"==typeof t?t:t.startsWith("-")||t.startsWith("+")?Math.max(0,e+parseFloat(t)):"<"===t?n:t.startsWith("<")?Math.max(0,n+parseFloat(t.slice(1))):null!=(a=i.get(t))?a:e}e.s({calcNextTime:()=>t})},601142:e=>{"use strict";e.s({addKeyframes:()=>a});var t=e.i(869514),n=e.i(576693),i=e.i(104839);function a(e,a,s,r,o,l){for(let t=0;t<e.length;t++){let n=e[t];n.at>o&&n.at<l&&((0,i.removeItem)(e,n),t--)}for(let i=0;i<a.length;i++)e.push({value:a[i],at:(0,t.mixNumber)(o,l,r[i]),easing:(0,n.getEasingForSegment)(s,i)})}},991029:e=>{"use strict";function t(e,t){for(let n=0;n<e.length;n++)e[n]=e[n]/(t+1)}e.s({normalizeTimes:()=>t})},448183:e=>{"use strict";function t(e,t){return e.at!==t.at?e.at-t.at:null===e.value?1:null===t.value?-1:0}e.s({compareByTime:()=>t})},996800:e=>{"use strict";e.s({createAnimationsFromSequence:()=>T});var t=e.i(73145),n=e.i(93084),i=e.i(52196),a=e.i(831802),s=e.i(391422),r=e.i(219130),o=e.i(619344),l=e.i(777743),c=e.i(576693),u=e.i(602340),d=e.i(406720),h=e.i(78523),p=e.i(601142),m=e.i(991029),f=e.i(448183);function T(e){let{defaultTransition:T={},...A}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},I=arguments.length>2?arguments[2]:void 0,_=arguments.length>3?arguments[3]:void 0,C=T.duration||.3,v=new Map,S=new Map,D={},y=new Map,N=0,b=0,O=0;for(let r=0;r<e.length;r++){let f=e[r];if("string"==typeof f){y.set(f,b);continue}if(!Array.isArray(f)){y.set(f.name,(0,h.calcNextTime)(b,f.at,N,y));continue}let[A,v,k={}]=f;void 0!==k.at&&(b=(0,h.calcNextTime)(b,k.at,N,y));let M=0,L=function(e,t,r){var u;let h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,f=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,g=Array.isArray(u=e)?u:[u],{delay:E=0,times:A=(0,n.defaultOffset)(g),type:I="keyframes",repeat:v,repeatType:S,repeatDelay:D=0,...y}=t,{ease:N=T.ease||"easeOut",duration:R}=t,P="function"==typeof E?E(h,f):E,k=g.length,L=(0,i.isGenerator)(I)?I:null==_?void 0:_[I||"keyframes"];if(k<=2&&L){let e=100;2===k&&x(g)&&(e=Math.abs(g[1]-g[0]));let t={...y};void 0!==R&&(t.duration=(0,o.secondsToMilliseconds)(R));let n=(0,a.createGeneratorEasing)(t,e,L);N=n.ease,R=n.duration}null!=R||(R=C);let w=b+P;1===A.length&&0===A[0]&&(A[1]=1);let G=A.length-g.length;if(G>0&&(0,s.fillOffset)(A,G),1===g.length&&g.unshift(null),v){(0,l.invariant)(v<20,"Repeat count too high, must be less than 20","repeat-count-high"),R=(0,d.calculateRepeatDuration)(R,v);let e=[...g],t=[...A],n=[...N=Array.isArray(N)?[...N]:[N]];for(let i=0;i<v;i++){g.push(...e);for(let a=0;a<e.length;a++)A.push(t[a]+(i+1)),N.push(0===a?"linear":(0,c.getEasingForSegment)(n,a-1))}(0,m.normalizeTimes)(A,v)}let j=w+R;(0,p.addKeyframes)(r,g,N,A,w,j),M=Math.max(P+R,M),O=Math.max(j,O)};if((0,t.isMotionValue)(A))L(v,k,E("default",g(A,S)));else{let e=(0,u.resolveSubjects)(A,v,I,D),t=e.length;for(let n=0;n<t;n++){let i=g(e[n],S);for(let e in v){var R,P;L(v[e],(R=k,P=e,R&&R[P]?{...R,...R[P]}:{...R}),E(e,i),n,t)}}}N=b,b+=M}return S.forEach((e,t)=>{for(let n in e){let i=e[n];i.sort(f.compareByTime);let a=[],s=[],o=[];for(let e=0;e<i.length;e++){let{at:t,value:n,easing:l}=i[e];a.push(n),s.push((0,r.progress)(0,O,t)),o.push(l||"easeOut")}0!==s[0]&&(s.unshift(0),a.unshift(a[0]),o.unshift("easeInOut")),1!==s[s.length-1]&&(s.push(1),a.push(null)),v.has(t)||v.set(t,{keyframes:{},transition:{}});let l=v.get(t);l.keyframes[n]=a,l.transition[n]={...T,duration:O,ease:o,times:s,...A}}}),v}function g(e,t){return t.has(e)||t.set(e,{}),t.get(e)}function E(e,t){return t[e]||(t[e]=[]),t[e]}let A=e=>"number"==typeof e,x=e=>e.every(A)},870671:e=>{"use strict";e.s({ObjectVisualElement:()=>i});var t=e.i(585205),n=e.i(192048);class i extends n.VisualElement{readValueFromInstance(e,t){if(t in e){let n=e[t];if("string"==typeof n||"number"==typeof n)return n}}getBaseTargetFromProps(){}removeValueFromRenderState(e,t){delete t.output[e]}measureInstanceViewportBox(){return(0,t.createBox)()}build(e,t){Object.assign(e.output,t)}renderInstance(e,t){let{output:n}=t;Object.assign(e,n)}sortInstanceNodePosition(){return 0}constructor(){super(...arguments),this.type="object"}}},564058:e=>{"use strict";e.s({createDOMVisualElement:()=>o,createObjectVisualElement:()=>l});var t=e.i(322730),n=e.i(224151),i=e.i(70006),a=e.i(870671),s=e.i(586307),r=e.i(909121);function o(e){let a={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},o=(0,t.isSVGElement)(e)&&!(0,n.isSVGSVGElement)(e)?new r.SVGVisualElement(a):new i.HTMLVisualElement(a);o.mount(e),s.visualElementStore.set(e,o)}function l(e){let t=new a.ObjectVisualElement({presenceContext:null,props:{},visualState:{renderState:{output:{}},latestValues:{}}});t.mount(e),s.visualElementStore.set(e,t)}},584393:e=>{"use strict";e.s({animateSubject:()=>c});var t=e.i(73145),n=e.i(777743),i=e.i(586307),a=e.i(30069),s=e.i(564058),r=e.i(305845),o=e.i(602340),l=e.i(796371);function c(e,c,u,d){let h=[];if((0,t.isMotionValue)(e)||"number"==typeof e||"string"==typeof e&&!(0,r.isDOMKeyframes)(c))h.push((0,l.animateSingleValue)(e,(0,r.isDOMKeyframes)(c)&&c.default||c,u&&u.default||u));else{let t=(0,o.resolveSubjects)(e,c,d),r=t.length;(0,n.invariant)(!!r,"No valid elements provided.","no-valid-elements");for(let e=0;e<r;e++){let o=t[e];(0,n.invariant)(null!==o,"You're trying to perform an animation on null. Ensure that selectors are correctly finding elements and refs are correctly hydrated.","animate-null");let l=o instanceof Element?s.createDOMVisualElement:s.createObjectVisualElement;i.visualElementStore.has(o)||l(o);let d=i.visualElementStore.get(o),p={...u};"delay"in p&&"function"==typeof p.delay&&(p.delay=p.delay(e,r)),h.push(...(0,a.animateTarget)(d,{...c,transition:p},{}))}}return h}},279482:e=>{"use strict";e.s({animateSequence:()=>a});var t=e.i(471439),n=e.i(996800),i=e.i(584393);function a(e,a,s){let r=[];return(0,n.createAnimationsFromSequence)(e,a,s,{spring:t.spring}).forEach((e,t)=>{let{keyframes:n,transition:a}=e;r.push(...(0,i.animateSubject)(t,n,a))}),r}},157297:e=>{"use strict";e.s({animate:()=>s});var t=e.i(547058),n=e.i(104839),i=e.i(279482),a=e.i(584393);let s=function(e){return function(s,r,o){let l=[];l=Array.isArray(s)&&s.some(Array.isArray)?(0,i.animateSequence)(s,r,void 0):(0,a.animateSubject)(s,r,o,void 0);let c=new t.GroupAnimationWithThen(l);return e&&(e.animations.push(c),c.finished.then(()=>{(0,n.removeItem)(e.animations,c)})),c}}()},248720:e=>{"use strict";e.s({useAnimatedText:()=>i});var t=e.i(157297),n=e.i(373150);function i(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{duration:a=2,ease:s="easeOut",segmentBy:r="word",enableStreaming:o=!0,isContentGenerationComplete:l=!1}=i,[c,u]=(0,n.useState)(0),[d,h]=(0,n.useState)(0),[p,m]=(0,n.useState)(e),[f,T]=(0,n.useState)(!1),g=(0,n.useRef)(null),E=(0,n.useMemo)(()=>{if(!e)return[];try{let t=new Intl.Segmenter("en",{granularity:r});return Array.from(t.segment(e)).map(e=>e.segment)}catch(t){if("word"===r)return e.split(/(\s+)/);return Array.from(e)}},[e,r]);p!==e&&(m(e),h(e.startsWith(p)?c:0));let A=(0,n.useMemo)(()=>{if(!o)return 0;let e=E.length-d;return l&&e>0?Math.min(2,Math.max(.3,.015*e)):Math.max(a,.008*e)},[a,E.length,d,o,l]),x=(0,n.useCallback)(()=>{if(g.current&&g.current.stop(),!o||0===E.length){u(E.length),T(!1);return}T(!0),g.current=(0,t.animate)(d,E.length,{duration:A,ease:e=>e<.8?(e/.8)**.3*.85:.85+.15*((e-.8)/.2)**3,onUpdate(e){u(Math.floor(e))},onComplete(){u(E.length),T(!1)}})},[d,E.length,A,o]);return(0,n.useEffect)(()=>(x(),()=>{g.current&&g.current.stop()}),[x]),{displayedText:(0,n.useMemo)(()=>E.slice(0,c).join(""),[E,c]),isAnimating:f,progress:E.length>0?c/E.length:1,totalSegments:E.length,currentSegment:c}}},750766:e=>{"use strict";e.s({AnimatedStreamingText:()=>s});var t=e.i(290479),n=e.i(248720),i=e.i(224706),a=e.i(373150);let s=(0,a.memo)(e=>{let{text:s,enableStreaming:r=!1,duration:o=2,chatId:l,isContentGenerationComplete:c=!1,children:u}=e,d=(0,a.useMemo)(()=>({duration:o,ease:"easeOut",segmentBy:"word",enableStreaming:r,isContentGenerationComplete:c}),[o,r,c]),{displayedText:h,isAnimating:p}=(0,n.useAnimatedText)(s,d),m=(0,i.useGlobalStreamStore)(e=>e.setFrontendStreaming);(0,a.useEffect)(()=>{},[r,s]),(0,a.useEffect)(()=>{l&&m(l,p)},[l,p,m]);let f=r||p?h:s;return(0,t.jsx)(t.Fragment,{children:u(f,p)})},(e,t)=>e.text===t.text&&e.enableStreaming===t.enableStreaming&&e.duration===t.duration&&e.chatId===t.chatId&&e.isContentGenerationComplete===t.isContentGenerationComplete);s.displayName="AnimatedStreamingText"},389938:e=>{"use strict";e.s({Collapsible:()=>s,CollapsibleContent:()=>o,CollapsibleTrigger:()=>r});var t=e.i(290479),n=e.i(289702),i=e.i(599500),a=e.i(373150);let s=i.Root,r=i.CollapsibleTrigger,o=a.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(i.CollapsibleContent,{ref:a,className:(0,n.cn)("overflow-hidden data-[state=open]:animate-collapsible-down data-[state=closed]:animate-collapsible-up",s),...r})})},394505:e=>{"use strict";e.s({ChatMessageEditMode:()=>h});var t=e.i(290479),n=e.i(381612),i=e.i(578018),a=e.i(373150),s=e.i(181112),r=e.i(704255),o=e.i(663018),l=e.i(389938),c=e.i(972899),u=e.i(512109),d=e.i(221297);let h=e=>{let{isPartLoading:h,text:p}=e,m=(0,d.useChatV2Store)(e=>e.mode),f="chatbot"===m.type?m.chatbotId:null;if(!f)throw Error("Chatbot ID is required, this should never happen");let{setEditModeContent:T}=(0,s.useEditModeContent)(f),g=(e=>{let t=e.trim();return t.startsWith("```markdown")&&(t=t.substring(11).trimStart()),t.endsWith("```")&&(t=t.substring(0,t.length-3).trimEnd()),t})(p),E=(e=>{let t=e.split("\n")[0].trim();if(t.startsWith("# ")){let e=t.substring(2).trim();return e.length>30?"".concat(e.substring(0,30),"..."):e}return e.length>30?"".concat(e.substring(0,30),"..."):e})(g);return(0,a.useEffect)(()=>{h&&T(g)},[g,h,T]),(0,t.jsxs)(l.Collapsible,{children:[(0,t.jsx)("div",{className:"flex gap-4",children:(0,t.jsx)(l.CollapsibleTrigger,{asChild:!0,children:(0,t.jsx)(r.Button,{variant:"secondary",size:"xs",leadingIcon:(0,t.jsx)(c.Icon,{as:i.FilePen}),trailingIcon:h?(0,t.jsx)(o.LoadingSpinner,{color:"gray",className:"mt-0",variant:void 0}):!h&&(0,t.jsx)(c.Icon,{as:n.ChevronDown}),label:h?"Generating note...":E})})}),(0,t.jsx)(l.CollapsibleContent,{className:"bg-control-primary p-4 mt-4 rounded-4 ",children:(0,t.jsx)("div",{className:"flex flex-col gap-4",children:(0,t.jsx)(u.default,{markdownContent:g,sources:[]})})})]})}},375786:e=>{"use strict";e.s({ChatMessageQuizEditMode:()=>h});var t=e.i(290479),n=e.i(381612),i=e.i(684709),a=e.i(373150),s=e.i(704255),r=e.i(663018),o=e.i(389938),l=e.i(972899),c=e.i(143928),u=e.i(899925),d=e.i(289702);let h=e=>{let{isPartLoading:h,data:p,messageId:m}=e,f=(0,c.useCurrentChatbotId)(),{setQuizEditContent:T,setShowPreview:g,setIsQuizReady:E}=(0,u.useQuizEditContent)(f||""),A="error"===p.status;return(0,a.useEffect)(()=>{if(f){if(null==p?void 0:p.processed){E(!1),g(!1);return}p&&("processing"===p.status||"ai-processing"===p.status)&&(E(!1),g(!1)),p&&("processing"===p.status||"ai-processing"===p.status||p.updatedQuiz)&&T({...p,messageId:m}),!h&&"processing"!==p.status&&"ai-processing"!==p.status&&p.updatedQuiz?(E(!0),g(!0)):(E(!1),g(!1))}},[h,p,f,m,T,g,E]),(0,t.jsxs)(o.Collapsible,{children:[(0,t.jsx)("div",{className:"flex gap-4",children:(0,t.jsx)(o.CollapsibleTrigger,{asChild:!0,children:(0,t.jsxs)(s.Button,{variant:"secondary",size:"xs",leadingIcon:(0,t.jsx)(l.Icon,{as:i.Files}),trailingIcon:h?void 0:(0,t.jsx)(l.Icon,{as:n.ChevronDown}),children:[h?"Editing quiz...":"Quiz Edit Result",h&&(0,t.jsx)(r.LoadingSpinner,{color:"gray",className:"mt-0",variant:void 0})]})})}),(0,t.jsx)(o.CollapsibleContent,{className:"bg-control-primary p-4 mt-4 rounded-4",children:(0,t.jsx)("div",{className:"flex flex-col gap-4",children:(0,t.jsxs)("div",{className:"space-y-7",children:[p.message&&(0,t.jsx)("div",{className:(0,d.cn)("text-sm p-6 rounded-4",A?"bg-red-50 text-red-800 border border-red-200":"bg-blue-50 text-blue-800 border border-blue-200"),children:p.message}),p.updatedQuiz&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-sm mb-4",children:"Changes Made:"}),(0,t.jsxs)("div",{className:"text-sm text-text-secondary space-y-2",children:[(0,t.jsxs)("div",{children:["Title: ",p.updatedQuiz.title]}),(0,t.jsxs)("div",{children:["Total Cards: ",p.updatedQuiz.metadata.totalCards]}),(0,t.jsxs)("div",{children:["Card Types:"," ",p.updatedQuiz.metadata.cardTypes.join(", ")]}),p.transformationType&&(0,t.jsxs)("div",{children:["Transformation: ",p.transformationType]})]})]}),p.updatedQuiz.cards.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-sm mb-4",children:"Sample Questions:"}),(0,t.jsxs)("div",{className:"space-y-4 max-h-48 overflow-y-auto",children:[p.updatedQuiz.cards.slice(0,3).map((e,n)=>(0,t.jsxs)("div",{className:"p-4 bg-background-primary rounded border text-xs",children:[(0,t.jsxs)("div",{className:"font-medium text-text-secondary mb-2",children:[e.type," - Question ",n+1]}),(0,t.jsx)("div",{className:"text-text-primary",children:e.question||e.statement||e.text||"Question content"})]},e.id||n)),p.updatedQuiz.cards.length>3&&(0,t.jsxs)("div",{className:"text-xs text-text-secondary italic",children:["...and ",p.updatedQuiz.cards.length-3," more questions"]})]})]})]})]})})})]})}},745628:e=>{"use strict";e.s({ChatTextSelectionMenu:()=>u});var t=e.i(290479),n=e.i(986046),i=e.i(373150),a=e.i(784445),s=e.i(704255),r=e.i(972899),o=e.i(982152),l=e.i(252390),c=e.i(227261);let u=e=>{let{selectedText:u,selectionRect:d,onClose:h,chatbotId:p,scrollContainerRef:m}=e,[f,T]=(0,i.useState)({top:0,left:0}),{addAttachments:g}=(0,o.useAddAttachment)(),E=(0,c.useChatbotStore)(e=>e.toggle),{track:A}=(0,l.default)();(0,i.useEffect)(()=>{var e,t,n,i;let a=(null==m||null==(e=m.current)?void 0:e.scrollTop)||0,s=null==m||null==(t=m.current)?void 0:t.getBoundingClientRect(),r=d.left-((null==s?void 0:s.left)||0);d.top,null==s||s.top;let o=d.bottom-((null==s?void 0:s.top)||0)+a+4,l=r+d.width/2-60,c=(null==m||null==(n=m.current)?void 0:n.clientHeight)||800;d.bottom+40+8>c&&(o=d.top+a-40-2);let u=(null==m||null==(i=m.current)?void 0:i.clientWidth)||800;l<8?l=8:l+120>u-8&&(l=u-120-8),T({top:o,left:l})},[d,m]);let x=(0,i.useCallback)(e=>{e.preventDefault(),e.stopPropagation();let t=(0,o.mapTextToAttachment)(p,u,"NOTE");E("chat",!0),A("attachment_added",{type:"chat_text_selection"}),g([t],p),h()},[u,p,g,E,A,h]);return(0,i.useEffect)(()=>{let e=e=>{"Escape"===e.key&&h()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[h]),(0,i.useEffect)(()=>{let e=e=>{e.target.closest("[data-chat-selection-menu]")||h()},t=setTimeout(()=>{document.addEventListener("mousedown",e)},100);return()=>{clearTimeout(t),document.removeEventListener("mousedown",e)}},[h]),(0,a.createPortal)((0,t.jsx)("div",{"data-chat-selection-menu":!0,className:"absolute bg-popover rounded-6 shadow-feint border flex flex-row p-[1px] items-center gap-[1px]",style:{top:f.top,left:f.left},onMouseDown:e=>{e.preventDefault(),e.stopPropagation()},children:(0,t.jsx)(s.Button,{size:"xs",className:"py-[5px] font-medium hover:bg-popover-hover",variant:"ghost",onClick:x,leadingIcon:(0,t.jsx)(r.Icon,{as:n.MessagesSquare}),children:"Chat"})}),(null==m?void 0:m.current)||document.body)}},403522:e=>{"use strict";e.s({default:()=>c});var t=e.i(290479),n=e.i(762121),i=e.i(94371),a=e.i(996481),s=e.i(373150),r=e.i(252390),o=e.i(704255),l=e.i(972899);let c=e=>{let{flashcards:c}=e,[u,d]=(0,s.useState)(0),[h,p]=(0,s.useState)("initial"),[m,f]=(0,s.useState)(!1),{track:T}=(0,r.default)(),[g,E]=(0,s.useState)(c);(0,s.useEffect)(()=>{E(c)},[c]);let A=g[u];return(0,t.jsxs)("div",{className:"relative max-w-sm bg-control-primary rounded-4 flex flex-col",children:[(0,t.jsxs)("div",{className:"p-4 min-h-[240px] gap-6 flex flex-col h-full justify-center items-center relative",children:[("answer"===h||"explanation"===h)&&(0,t.jsx)(o.Button,{size:"xs",variant:"ghost",onClick:()=>p("answer"===h?"initial":"answer"),className:"absolute top-4 left-4",children:(0,t.jsx)(l.Icon,{as:n.ArrowLeft})}),(0,t.jsxs)("div",{className:"flex gap-2 flex-col items-center max-w-xs",children:["initial"!==h&&(0,t.jsx)("p",{className:"text-xs text-text-secondary",children:"answer"===h?"Answer":"Explanation"}),(0,t.jsx)("p",{className:"text-center text-sm text-balance",children:"initial"===h?null==A?void 0:A.question:"answer"===h?A.answer:A.explanation}),m&&"initial"===h&&(0,t.jsx)("p",{className:"text-text-secondary text-xs text-center text-balance",children:A.hint})]}),"initial"===h&&(0,t.jsx)(o.Button,{size:"xs",variant:"secondary",onClick:()=>{T("flashcard_show_answer",{index:u}),p("answer")},children:"Show answer"}),"answer"===h&&(0,t.jsx)(o.Button,{size:"xs",variant:"secondary",onClick:()=>{T("flashcard_show_explanation",{index:u}),p("explanation")},children:"Show explanation"})]}),(0,t.jsxs)("div",{className:"bottom-0 absolute flex w-full justify-between items-center p-2",children:[(0,t.jsx)(o.Button,{variant:"ghost",size:"xs",disabled:"initial"!==h,onClick:()=>{T("flashcard_toggle_hint",{index:u,show:!m}),f(!m)},children:"Hint"}),(0,t.jsx)(o.Button,{variant:"ghost",size:"xs",onClick:()=>{T("flashcard_shuffle",{total:c.length}),E((e=>{let t=[...e];for(let e=t.length-1;e>0;e--){let n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}return t})(g)),d(0),p("initial"),f(!1)},children:"Shuffle"}),(0,t.jsx)("div",{className:"absolute inset-0 flex justify-center pointer-events-none",children:(0,t.jsxs)("div",{className:"flex items-center gap-4 pointer-events-auto",children:[(0,t.jsx)(o.Button,{variant:"ghost",size:"icon",onClick:()=>{u>0&&(T("flashcard_previous",{index:u-1,total:g.length}),d(u-1),p("initial"),f(!1))},disabled:0===u,children:(0,t.jsx)(l.Icon,{as:i.ChevronLeft})}),(0,t.jsxs)("span",{className:"text-sm tracking-[-0.16px]",children:[u+1," of ",g.length]}),(0,t.jsx)(o.Button,{variant:"ghost",size:"icon",onClick:()=>{u<g.length-1&&(T("flashcard_next",{index:u+1,total:g.length}),d(u+1),p("initial"),f(!1))},disabled:u===g.length-1,children:(0,t.jsx)(l.Icon,{as:a.ChevronRight})})]})})]})]})}},925111:e=>{"use strict";e.s({useChatTextSelection:()=>n});var t=e.i(373150);let n=e=>{let[n,i]=(0,t.useState)(null),a=(0,t.useCallback)(()=>{let t=window.getSelection();if(!t||0===t.rangeCount)return void i(null);let n=t.getRangeAt(0),a=t.toString().trim();if(!a)return void i(null);let s=e.current;if(!s||!s.contains(n.commonAncestorContainer))return void i(null);i({text:a,rect:n.getBoundingClientRect(),containerElement:s})},[e]),s=(0,t.useCallback)(()=>{var e;null==(e=window.getSelection())||e.removeAllRanges(),i(null)},[]);return(0,t.useEffect)(()=>{let t=()=>{setTimeout(a,10)},n=()=>{t()},s=e=>{e.shiftKey&&t()};document.addEventListener("selectionchange",t),document.addEventListener("mouseup",n),document.addEventListener("keyup",s);let r=t=>{let n=e.current;n&&!n.contains(t.target)&&i(null)};return document.addEventListener("mousedown",r),()=>{document.removeEventListener("selectionchange",t),document.removeEventListener("mouseup",n),document.removeEventListener("keyup",s),document.removeEventListener("mousedown",r)}},[a,e]),{selectionData:n,clearSelection:s}}},665578:e=>{"use strict";function t(e){let t=String(e),i=[];return{toOffset:function(e){if(e&&"number"==typeof e.line&&"number"==typeof e.column&&!Number.isNaN(e.line)&&!Number.isNaN(e.column)){for(;i.length<e.line;){let e=i[i.length-1],a=n(t,e),s=-1===a?t.length+1:a+1;if(e===s)break;i.push(s)}let a=(e.line>1?i[e.line-2]:0)+e.column-1;if(a<i[e.line-1])return a}},toPoint:function(e){if("number"==typeof e&&e>-1&&e<=t.length){let a=0;for(;;){let s=i[a];if(void 0===s){let e=n(t,i[a-1]);s=-1===e?t.length+1:e+1,i[a]=s}if(s>e)return{line:a+1,column:e-(a>0?i[a-1]:0)+1,offset:e};a++}}}}}function n(e,t){let n=e.indexOf("\r",t),i=e.indexOf("\n",t);return -1===i?n:-1===n||n+1===i?i:n<i?n:i}e.s({location:()=>t})},444982:e=>{"use strict";e.s({fromParse5:()=>c});var t=e.i(366506),n=e.i(319707),i=e.i(753448),a=e.i(254158),s=e.i(665578),r=e.i(871336);let o={}.hasOwnProperty,l=Object.prototype;function c(e,t){let n=t||{};return u({file:n.file||void 0,location:!1,schema:"svg"===n.space?a.svg:a.html,verbose:n.verbose||!1},e)}function u(e,i){let c;switch(i.nodeName){case"#comment":return c={type:"comment",value:i.data},h(e,i,c),c;case"#document":case"#document-fragment":{let n="mode"in i&&("quirks"===i.mode||"limited-quirks"===i.mode);if(c={type:"root",children:d(e,i.childNodes),data:{quirksMode:n}},e.file&&e.location){let n=String(e.file),i=(0,s.location)(n),a=i.toPoint(0),r=i.toPoint(n.length);(0,t.ok)(a,"expected `start`"),(0,t.ok)(r,"expected `end`"),c.position={start:a,end:r}}return c}case"#documentType":return h(e,i,c={type:"doctype"}),c;case"#text":return c={type:"text",value:i.value},h(e,i,c),c;default:return function(e,t){let i=e.schema;e.schema=t.namespaceURI===r.webNamespaces.svg?a.svg:a.html;let s=-1,c={};for(;++s<t.attrs.length;){let e=t.attrs[s],n=(e.prefix?e.prefix+":":"")+e.name;o.call(l,n)||(c[n]=e.value)}let m=("svg"===e.schema.space?n.s:n.h)(t.tagName,c,d(e,t.childNodes));if(h(e,t,m),"template"===m.tagName){let n=t.sourceCodeLocation,i=n&&n.startTag&&p(n.startTag),a=n&&n.endTag&&p(n.endTag),s=u(e,t.content);i&&a&&e.file&&(s.position={start:i.end,end:a.start}),m.content=s}return e.schema=i,m}(e,i)}}function d(e,t){let n=-1,i=[];for(;++n<t.length;){let a=u(e,t[n]);i.push(a)}return i}function h(e,n,a){if("sourceCodeLocation"in n&&n.sourceCodeLocation&&e.file){let s=function(e,n,a){let s=p(a);if("element"===n.type){let r=n.children[n.children.length-1];if(s&&!a.endTag&&r&&r.position&&r.position.end&&(s.end=Object.assign({},r.position.end)),e.verbose){let s,r={};if(a.attrs)for(s in a.attrs)o.call(a.attrs,s)&&(r[(0,i.find)(e.schema,s).property]=p(a.attrs[s]));(0,t.ok)(a.startTag,"a start tag should exist");let l=p(a.startTag),c=a.endTag?p(a.endTag):void 0,u={opening:l};c&&(u.closing=c),u.properties=r,n.data={position:u}}}return s}(e,a,n.sourceCodeLocation);s&&(e.location=!0,a.position=s)}}function p(e){let t=m({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=m({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function m(e){return e.line&&e.column?e:void 0}},362053:e=>{"use strict";function t(e){return e.toLowerCase()}e.s({normalize:()=>t})},20142:e=>{"use strict";e.s({Info:()=>t});class t{constructor(e,t){this.property=e,this.attribute=t}}t.prototype.space=null,t.prototype.boolean=!1,t.prototype.booleanish=!1,t.prototype.overloadedBoolean=!1,t.prototype.number=!1,t.prototype.commaSeparated=!1,t.prototype.spaceSeparated=!1,t.prototype.commaOrSpaceSeparated=!1,t.prototype.mustUseProperty=!1,t.prototype.defined=!1},60557:e=>{"use strict";e.s({boolean:()=>n,booleanish:()=>i,commaOrSpaceSeparated:()=>l,commaSeparated:()=>o,number:()=>s,overloadedBoolean:()=>a,spaceSeparated:()=>r});let t=0,n=c(),i=c(),a=c(),s=c(),r=c(),o=c(),l=c();function c(){return 2**++t}},928746:e=>{"use strict";e.s({DefinedInfo:()=>a});var t=e.i(20142),n=e.i(60557);let i=Object.keys(n);class a extends t.Info{constructor(e,t,a,s){let r=-1;if(super(e,t),function(e,t,n){n&&(e[t]=n)}(this,"space",s),"number"==typeof a)for(;++r<i.length;){let e=i[r];!function(e,t,n){n&&(e[t]=n)}(this,i[r],(a&n[e])===n[e])}}}a.prototype.defined=!0},37484:e=>{"use strict";e.s({find:()=>o});var t=e.i(362053),n=e.i(928746),i=e.i(20142);let a=/^data[-\w.:]+$/i,s=/-[a-z]/g,r=/[A-Z]/g;function o(e,o){let u=(0,t.normalize)(o),d=o,h=i.Info;if(u in e.normal)return e.property[e.normal[u]];if(u.length>4&&"data"===u.slice(0,4)&&a.test(o)){if("-"===o.charAt(4)){let e=o.slice(5).replace(s,c);d="data"+e.charAt(0).toUpperCase()+e.slice(1)}else{let e=o.slice(4);if(!s.test(e)){let t=e.replace(r,l);"-"!==t.charAt(0)&&(t="-"+t),o="data"+t}}h=n.DefinedInfo}return new h(d,o)}function l(e){return"-"+e.toLowerCase()}function c(e){return e.charAt(1).toUpperCase()}},74373:e=>{"use strict";e.s({Schema:()=>t});class t{constructor(e,t,n){this.property=e,this.normal=t,n&&(this.space=n)}}t.prototype.property={},t.prototype.normal={},t.prototype.space=null},151806:e=>{"use strict";e.s({merge:()=>n});var t=e.i(74373);function n(e,n){let i={},a={},s=-1;for(;++s<e.length;)Object.assign(i,e[s].property),Object.assign(a,e[s].normal);return new t.Schema(i,a,n)}},285187:e=>{"use strict";e.s({create:()=>s});var t=e.i(362053),n=e.i(74373),i=e.i(928746);let a={}.hasOwnProperty;function s(e){let s,r={},o={};for(s in e.properties)if(a.call(e.properties,s)){let n=e.properties[s],a=new i.DefinedInfo(s,e.transform(e.attributes||{},s),n,e.space);e.mustUseProperty&&e.mustUseProperty.includes(s)&&(a.mustUseProperty=!0),r[s]=a,o[(0,t.normalize)(s)]=s,o[(0,t.normalize)(a.attribute)]=s}return new n.Schema(r,o,e.space)}},997875:e=>{"use strict";e.s({xlink:()=>t});let t=(0,e.i(285187).create)({space:"xlink",transform:(e,t)=>"xlink:"+t.slice(5).toLowerCase(),properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}})},85401:e=>{"use strict";e.s({xml:()=>t});let t=(0,e.i(285187).create)({space:"xml",transform:(e,t)=>"xml:"+t.slice(3).toLowerCase(),properties:{xmlLang:null,xmlBase:null,xmlSpace:null}})},591755:e=>{"use strict";function t(e,t){return t in e?e[t]:t}e.s({caseSensitiveTransform:()=>t})},360904:e=>{"use strict";e.s({caseInsensitiveTransform:()=>n});var t=e.i(591755);function n(e,n){return(0,t.caseSensitiveTransform)(e,n.toLowerCase())}},799380:e=>{"use strict";e.s({xmlns:()=>i});var t=e.i(285187),n=e.i(360904);let i=(0,t.create)({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:n.caseInsensitiveTransform,properties:{xmlns:null,xmlnsXLink:null}})},838492:e=>{"use strict";e.s({aria:()=>n});var t=e.i(60557);let n=(0,e.i(285187).create)({transform:(e,t)=>"role"===t?t:"aria-"+t.slice(4).toLowerCase(),properties:{ariaActiveDescendant:null,ariaAtomic:t.booleanish,ariaAutoComplete:null,ariaBusy:t.booleanish,ariaChecked:t.booleanish,ariaColCount:t.number,ariaColIndex:t.number,ariaColSpan:t.number,ariaControls:t.spaceSeparated,ariaCurrent:null,ariaDescribedBy:t.spaceSeparated,ariaDetails:null,ariaDisabled:t.booleanish,ariaDropEffect:t.spaceSeparated,ariaErrorMessage:null,ariaExpanded:t.booleanish,ariaFlowTo:t.spaceSeparated,ariaGrabbed:t.booleanish,ariaHasPopup:null,ariaHidden:t.booleanish,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:t.spaceSeparated,ariaLevel:t.number,ariaLive:null,ariaModal:t.booleanish,ariaMultiLine:t.booleanish,ariaMultiSelectable:t.booleanish,ariaOrientation:null,ariaOwns:t.spaceSeparated,ariaPlaceholder:null,ariaPosInSet:t.number,ariaPressed:t.booleanish,ariaReadOnly:t.booleanish,ariaRelevant:null,ariaRequired:t.booleanish,ariaRoleDescription:t.spaceSeparated,ariaRowCount:t.number,ariaRowIndex:t.number,ariaRowSpan:t.number,ariaSelected:t.booleanish,ariaSetSize:t.number,ariaSort:null,ariaValueMax:t.number,ariaValueMin:t.number,ariaValueNow:t.number,ariaValueText:null,role:null}})},210725:e=>{"use strict";e.s({html:()=>a});var t=e.i(60557),n=e.i(285187),i=e.i(360904);let a=(0,n.create)({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:i.caseInsensitiveTransform,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:t.commaSeparated,acceptCharset:t.spaceSeparated,accessKey:t.spaceSeparated,action:null,allow:null,allowFullScreen:t.boolean,allowPaymentRequest:t.boolean,allowUserMedia:t.boolean,alt:null,as:null,async:t.boolean,autoCapitalize:null,autoComplete:t.spaceSeparated,autoFocus:t.boolean,autoPlay:t.boolean,blocking:t.spaceSeparated,capture:null,charSet:null,checked:t.boolean,cite:null,className:t.spaceSeparated,cols:t.number,colSpan:null,content:null,contentEditable:t.booleanish,controls:t.boolean,controlsList:t.spaceSeparated,coords:t.number|t.commaSeparated,crossOrigin:null,data:null,dateTime:null,decoding:null,default:t.boolean,defer:t.boolean,dir:null,dirName:null,disabled:t.boolean,download:t.overloadedBoolean,draggable:t.booleanish,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:t.boolean,formTarget:null,headers:t.spaceSeparated,height:t.number,hidden:t.boolean,high:t.number,href:null,hrefLang:null,htmlFor:t.spaceSeparated,httpEquiv:t.spaceSeparated,id:null,imageSizes:null,imageSrcSet:null,inert:t.boolean,inputMode:null,integrity:null,is:null,isMap:t.boolean,itemId:null,itemProp:t.spaceSeparated,itemRef:t.spaceSeparated,itemScope:t.boolean,itemType:t.spaceSeparated,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:t.boolean,low:t.number,manifest:null,max:null,maxLength:t.number,media:null,method:null,min:null,minLength:t.number,multiple:t.boolean,muted:t.boolean,name:null,nonce:null,noModule:t.boolean,noValidate:t.boolean,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:t.boolean,optimum:t.number,pattern:null,ping:t.spaceSeparated,placeholder:null,playsInline:t.boolean,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:t.boolean,referrerPolicy:null,rel:t.spaceSeparated,required:t.boolean,reversed:t.boolean,rows:t.number,rowSpan:t.number,sandbox:t.spaceSeparated,scope:null,scoped:t.boolean,seamless:t.boolean,selected:t.boolean,shadowRootClonable:t.boolean,shadowRootDelegatesFocus:t.boolean,shadowRootMode:null,shape:null,size:t.number,sizes:null,slot:null,span:t.number,spellCheck:t.booleanish,src:null,srcDoc:null,srcLang:null,srcSet:null,start:t.number,step:null,style:null,tabIndex:t.number,target:null,title:null,translate:null,type:null,typeMustMatch:t.boolean,useMap:null,value:t.booleanish,width:t.number,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:t.spaceSeparated,axis:null,background:null,bgColor:null,border:t.number,borderColor:null,bottomMargin:t.number,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:t.boolean,declare:t.boolean,event:null,face:null,frame:null,frameBorder:null,hSpace:t.number,leftMargin:t.number,link:null,longDesc:null,lowSrc:null,marginHeight:t.number,marginWidth:t.number,noResize:t.boolean,noHref:t.boolean,noShade:t.boolean,noWrap:t.boolean,object:null,profile:null,prompt:null,rev:null,rightMargin:t.number,rules:null,scheme:null,scrolling:t.booleanish,standby:null,summary:null,text:null,topMargin:t.number,valueType:null,version:null,vAlign:null,vLink:null,vSpace:t.number,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:t.boolean,disableRemotePlayback:t.boolean,prefix:null,property:null,results:t.number,security:null,unselectable:null}})},519366:e=>{"use strict";e.s({svg:()=>a});var t=e.i(60557),n=e.i(285187),i=e.i(591755);let a=(0,n.create)({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:i.caseSensitiveTransform,properties:{about:t.commaOrSpaceSeparated,accentHeight:t.number,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:t.number,amplitude:t.number,arabicForm:null,ascent:t.number,attributeName:null,attributeType:null,azimuth:t.number,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:t.number,by:null,calcMode:null,capHeight:t.number,className:t.spaceSeparated,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:t.number,diffuseConstant:t.number,direction:null,display:null,dur:null,divisor:t.number,dominantBaseline:null,download:t.boolean,dx:null,dy:null,edgeMode:null,editable:null,elevation:t.number,enableBackground:null,end:null,event:null,exponent:t.number,externalResourcesRequired:null,fill:null,fillOpacity:t.number,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:t.commaSeparated,g2:t.commaSeparated,glyphName:t.commaSeparated,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:t.number,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:t.number,horizOriginX:t.number,horizOriginY:t.number,id:null,ideographic:t.number,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:t.number,k:t.number,k1:t.number,k2:t.number,k3:t.number,k4:t.number,kernelMatrix:t.commaOrSpaceSeparated,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:t.number,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:t.number,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:t.number,overlineThickness:t.number,paintOrder:null,panose1:null,path:null,pathLength:t.number,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:t.spaceSeparated,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:t.number,pointsAtY:t.number,pointsAtZ:t.number,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:t.commaOrSpaceSeparated,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:t.commaOrSpaceSeparated,rev:t.commaOrSpaceSeparated,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:t.commaOrSpaceSeparated,requiredFeatures:t.commaOrSpaceSeparated,requiredFonts:t.commaOrSpaceSeparated,requiredFormats:t.commaOrSpaceSeparated,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:t.number,specularExponent:t.number,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:t.number,strikethroughThickness:t.number,string:null,stroke:null,strokeDashArray:t.commaOrSpaceSeparated,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:t.number,strokeOpacity:t.number,strokeWidth:null,style:null,surfaceScale:t.number,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:t.commaOrSpaceSeparated,tabIndex:t.number,tableValues:null,target:null,targetX:t.number,targetY:t.number,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:t.commaOrSpaceSeparated,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:t.number,underlineThickness:t.number,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:t.number,values:null,vAlphabetic:t.number,vMathematical:t.number,vectorEffect:null,vHanging:t.number,vIdeographic:t.number,version:null,vertAdvY:t.number,vertOriginX:t.number,vertOriginY:t.number,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:t.number,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}})},58033:e=>{"use strict";e.s({html:()=>l,svg:()=>c});var t=e.i(151806),n=e.i(997875),i=e.i(85401),a=e.i(799380),s=e.i(838492),r=e.i(210725),o=e.i(519366);let l=(0,t.merge)([i.xml,n.xlink,a.xmlns,s.aria,r.html],"html"),c=(0,t.merge)([i.xml,n.xlink,a.xmlns,s.aria,o.svg],"svg")},625778:e=>{"use strict";e.s({toParse5:()=>d});var t=e.i(152980),n=e.i(366506),i=e.i(37484),a=e.i(58033),s=e.i(384779),r=e.i(871336),o=e.i(521390);let l={},c={}.hasOwnProperty,u=(0,o.zwitch)("type",{handlers:{root:function(e,t){let n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=h(e.children,n,t),p(e,n),n},element:function(e,o){let l,u=o;"element"===e.type&&"svg"===e.tagName.toLowerCase()&&"html"===o.space&&(u=a.svg);let d=[];if(e.properties){for(l in e.properties)if("children"!==l&&c.call(e.properties,l)){let n=function(e,n,a){let o=(0,i.find)(e,n);if(!1===a||null==a||"number"==typeof a&&Number.isNaN(a)||!a&&o.boolean)return;Array.isArray(a)&&(a=o.commaSeparated?(0,t.stringify)(a):(0,s.stringify)(a));let l={name:o.attribute,value:!0===a?"":String(a)};if(o.space&&"html"!==o.space&&"svg"!==o.space){let e=l.name.indexOf(":");e<0?l.prefix="":(l.name=l.name.slice(e+1),l.prefix=o.attribute.slice(0,e)),l.namespace=r.webNamespaces[o.space]}return l}(u,l,e.properties[l]);n&&d.push(n)}}let m=u.space;(0,n.ok)(m);let f={nodeName:e.tagName,tagName:e.tagName,attrs:d,namespaceURI:r.webNamespaces[m],childNodes:[],parentNode:null};return f.childNodes=h(e.children,f,u),p(e,f),"template"===e.tagName&&e.content&&(f.content=function(e,t){let n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=h(e.children,n,t),p(e,n),n}(e.content,u)),f},text:function(e){let t={nodeName:"#text",value:e.value,parentNode:null};return p(e,t),t},comment:function(e){let t={nodeName:"#comment",data:e.value,parentNode:null};return p(e,t),t},doctype:function(e){let t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return p(e,t),t}}});function d(e,t){return u(e,"svg"===(t||l).space?a.svg:a.html)}function h(e,t,n){let i=-1,a=[];if(e)for(;++i<e.length;){let s=u(e[i],n);s.parentNode=t,a.push(s)}return a}function p(e,t){let i=e.position;i&&i.start&&i.end&&((0,n.ok)("number"==typeof i.start.offset),(0,n.ok)("number"==typeof i.end.offset),t.sourceCodeLocation={startLine:i.start.line,startCol:i.start.column,startOffset:i.start.offset,endLine:i.end.line,endCol:i.end.column,endOffset:i.end.offset})}},89441:e=>{"use strict";var t;e.s({CODE_POINTS:()=>t,REPLACEMENT_CHARACTER:()=>i,SEQUENCES:()=>a,getSurrogatePairCodePoint:()=>o,isControlCodePoint:()=>l,isSurrogate:()=>s,isSurrogatePair:()=>r,isUndefinedCodePoint:()=>c});let n=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),i="�";!function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z"}(t||(t={}));let a={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function s(e){return e>=55296&&e<=57343}function r(e){return e>=56320&&e<=57343}function o(e,t){return(e-55296)*1024+9216+t}function l(e){return 32!==e&&10!==e&&13!==e&&9!==e&&12!==e&&e>=1&&e<=31||e>=127&&e<=159}function c(e){return e>=64976&&e<=65007||n.has(e)}},943655:e=>{"use strict";var t;e.s({ERR:()=>t}),function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"}(t||(t={}))},236944:e=>{"use strict";e.s({Preprocessor:()=>i});var t=e.i(89441),n=e.i(943655);class i{get col(){return this.pos-this.lineStartPos+Number(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(e,t){let{line:n,col:i,offset:a}=this,s=i+t,r=a+t;return{code:e,startLine:n,endLine:n,startCol:s,endCol:s,startOffset:r,endOffset:r}}_err(e){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(e,0)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(e){if(this.pos!==this.html.length-1){let n=this.html.charCodeAt(this.pos+1);if((0,t.isSurrogatePair)(n))return this.pos++,this._addGap(),(0,t.getSurrogatePairCodePoint)(e,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,t.CODE_POINTS.EOF;return this._err(n.ERR.surrogateInInputStream),e}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(e,t){this.html.length>0?this.html+=e:this.html=e,this.endOfChunkHit=!1,this.lastChunkWritten=t}insertHtmlAtCurrentPos(e){this.html=this.html.substring(0,this.pos+1)+e+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(e,t){if(this.pos+e.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(t)return this.html.startsWith(e,this.pos);for(let t=0;t<e.length;t++)if((32|this.html.charCodeAt(this.pos+t))!==e.charCodeAt(t))return!1;return!0}peek(e){let n=this.pos+e;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,t.CODE_POINTS.EOF;let i=this.html.charCodeAt(n);return i===t.CODE_POINTS.CARRIAGE_RETURN?t.CODE_POINTS.LINE_FEED:i}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,t.CODE_POINTS.EOF;let e=this.html.charCodeAt(this.pos);return e===t.CODE_POINTS.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,t.CODE_POINTS.LINE_FEED):e===t.CODE_POINTS.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,(0,t.isSurrogate)(e)&&(e=this._processSurrogate(e)),null===this.handler.onParseError||e>31&&e<127||e===t.CODE_POINTS.LINE_FEED||e===t.CODE_POINTS.CARRIAGE_RETURN||e>159&&e<64976||this._checkForProblematicCharacters(e),e)}_checkForProblematicCharacters(e){(0,t.isControlCodePoint)(e)?this._err(n.ERR.controlCharacterInInputStream):(0,t.isUndefinedCodePoint)(e)&&this._err(n.ERR.noncharacterInInputStream)}retreat(e){for(this.pos-=e;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}constructor(e){this.handler=e,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=65536,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}}},858284:e=>{"use strict";var t;function n(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}e.s({TokenType:()=>t,getTokenAttr:()=>n}),function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"}(t||(t={}))},23755:e=>{"use strict";e.s({htmlDecodeTree:()=>t});let t=new Uint16Array('ᵁ<Õıʊҝջאٵ۞ޢߖࠏ੊ઑඡ๭༉༦჊ረዡᐕᒝᓃᓟᔥ\0\0\0\0\0\0ᕫᛍᦍᰒᷝ὾⁠↰⊍⏀⏻⑂⠤⤒ⴈ⹈⿎〖㊺㘹㞬㣾㨨㩱㫠㬮ࠀEMabcfglmnoprstu\\bfms¦³¹ÈÏlig耻Æ䃆P耻&䀦cute耻Á䃁reve;䄂Āiyx}rc耻Â䃂;䐐r;쀀\ud835\udd04rave耻À䃀pha;䎑acr;䄀d;橓Āgp¡on;䄄f;쀀\ud835\udd38plyFunction;恡ing耻Å䃅Ācs¾Ãr;쀀\ud835\udc9cign;扔ilde耻Ã䃃ml耻Ä䃄ЀaceforsuåûþėĜĢħĪĀcrêòkslash;或Ŷöø;櫧ed;挆y;䐑ƀcrtąċĔause;戵noullis;愬a;䎒r;쀀\ud835\udd05pf;쀀\ud835\udd39eve;䋘còēmpeq;扎܀HOacdefhilorsuōőŖƀƞƢƵƷƺǜȕɳɸɾcy;䐧PY耻©䂩ƀcpyŝŢźute;䄆Ā;iŧŨ拒talDifferentialD;慅leys;愭ȀaeioƉƎƔƘron;䄌dil耻Ç䃇rc;䄈nint;戰ot;䄊ĀdnƧƭilla;䂸terDot;䂷òſi;䎧rcleȀDMPTǇǋǑǖot;抙inus;抖lus;投imes;抗oĀcsǢǸkwiseContourIntegral;戲eCurlyĀDQȃȏoubleQuote;思uote;怙ȀlnpuȞȨɇɕonĀ;eȥȦ户;橴ƀgitȯȶȺruent;扡nt;戯ourIntegral;戮ĀfrɌɎ;愂oduct;成nterClockwiseContourIntegral;戳oss;樯cr;쀀\ud835\udc9epĀ;Cʄʅ拓ap;才րDJSZacefiosʠʬʰʴʸˋ˗ˡ˦̳ҍĀ;oŹʥtrahd;椑cy;䐂cy;䐅cy;䐏ƀgrsʿ˄ˇger;怡r;憡hv;櫤Āayː˕ron;䄎;䐔lĀ;t˝˞戇a;䎔r;쀀\ud835\udd07Āaf˫̧Ācm˰̢riticalȀADGT̖̜̀̆cute;䂴oŴ̋̍;䋙bleAcute;䋝rave;䁠ilde;䋜ond;拄ferentialD;慆Ѱ̽\0\0\0͔͂\0Ѕf;쀀\ud835\udd3bƀ;DE͈͉͍䂨ot;惜qual;扐blèCDLRUVͣͲ΂ϏϢϸontourIntegraìȹoɴ͹\0\0ͻ»͉nArrow;懓Āeo·ΤftƀARTΐΖΡrrow;懐ightArrow;懔eåˊngĀLRΫτeftĀARγιrrow;柸ightArrow;柺ightArrow;柹ightĀATϘϞrrow;懒ee;抨pɁϩ\0\0ϯrrow;懑ownArrow;懕erticalBar;戥ǹABLRTaВЪаўѿͼrrowƀ;BUНОТ憓ar;椓pArrow;懵reve;䌑eft˒к\0ц\0ѐightVector;楐eeVector;楞ectorĀ;Bљњ憽ar;楖ightǔѧ\0ѱeeVector;楟ectorĀ;BѺѻ懁ar;楗eeĀ;A҆҇护rrow;憧ĀctҒҗr;쀀\ud835\udc9frok;䄐ࠀNTacdfglmopqstuxҽӀӄӋӞӢӧӮӵԡԯԶՒ՝ՠեG;䅊H耻Ð䃐cute耻É䃉ƀaiyӒӗӜron;䄚rc耻Ê䃊;䐭ot;䄖r;쀀\ud835\udd08rave耻È䃈ement;戈ĀapӺӾcr;䄒tyɓԆ\0\0ԒmallSquare;旻erySmallSquare;斫ĀgpԦԪon;䄘f;쀀\ud835\udd3csilon;䎕uĀaiԼՉlĀ;TՂՃ橵ilde;扂librium;懌Āci՗՚r;愰m;橳a;䎗ml耻Ë䃋Āipժկsts;戃onentialE;慇ʀcfiosօֈ֍ֲ׌y;䐤r;쀀\ud835\udd09lledɓ֗\0\0֣mallSquare;旼erySmallSquare;斪Ͱֺ\0ֿ\0\0ׄf;쀀\ud835\udd3dAll;戀riertrf;愱cò׋؀JTabcdfgorstר׬ׯ׺؀ؒؖ؛؝أ٬ٲcy;䐃耻>䀾mmaĀ;d׷׸䎓;䏜reve;䄞ƀeiy؇،ؐdil;䄢rc;䄜;䐓ot;䄠r;쀀\ud835\udd0a;拙pf;쀀\ud835\udd3eeater̀EFGLSTصلَٖٛ٦qualĀ;Lؾؿ扥ess;招ullEqual;执reater;檢ess;扷lantEqual;橾ilde;扳cr;쀀\ud835\udca2;扫ЀAacfiosuڅڋږڛڞڪھۊRDcy;䐪Āctڐڔek;䋇;䁞irc;䄤r;愌lbertSpace;愋ǰگ\0ڲf;愍izontalLine;攀Āctۃۅòکrok;䄦mpńېۘownHumðįqual;扏܀EJOacdfgmnostuۺ۾܃܇܎ܚܞܡܨ݄ݸދޏޕcy;䐕lig;䄲cy;䐁cute耻Í䃍Āiyܓܘrc耻Î䃎;䐘ot;䄰r;愑rave耻Ì䃌ƀ;apܠܯܿĀcgܴܷr;䄪inaryI;慈lieóϝǴ݉\0ݢĀ;eݍݎ戬Āgrݓݘral;戫section;拂isibleĀCTݬݲomma;恣imes;恢ƀgptݿރވon;䄮f;쀀\ud835\udd40a;䎙cr;愐ilde;䄨ǫޚ\0ޞcy;䐆l耻Ï䃏ʀcfosuެ޷޼߂ߐĀiyޱ޵rc;䄴;䐙r;쀀\ud835\udd0dpf;쀀\ud835\udd41ǣ߇\0ߌr;쀀\ud835\udca5rcy;䐈kcy;䐄΀HJacfosߤߨ߽߬߱ࠂࠈcy;䐥cy;䐌ppa;䎚Āey߶߻dil;䄶;䐚r;쀀\ud835\udd0epf;쀀\ud835\udd42cr;쀀\ud835\udca6րJTaceflmostࠥࠩࠬࡐࡣ঳সে্਷ੇcy;䐉耻<䀼ʀcmnpr࠷࠼ࡁࡄࡍute;䄹bda;䎛g;柪lacetrf;愒r;憞ƀaeyࡗ࡜ࡡron;䄽dil;䄻;䐛Āfsࡨ॰tԀACDFRTUVarࡾࢩࢱࣦ࣠ࣼयज़ΐ४Ānrࢃ࢏gleBracket;柨rowƀ;BR࢙࢚࢞憐ar;懤ightArrow;懆eiling;挈oǵࢷ\0ࣃbleBracket;柦nǔࣈ\0࣒eeVector;楡ectorĀ;Bࣛࣜ懃ar;楙loor;挊ightĀAV࣯ࣵrrow;憔ector;楎Āerँगeƀ;AVउऊऐ抣rrow;憤ector;楚iangleƀ;BEतथऩ抲ar;槏qual;抴pƀDTVषूौownVector;楑eeVector;楠ectorĀ;Bॖॗ憿ar;楘ectorĀ;B॥०憼ar;楒ightáΜs̀EFGLSTॾঋকঝঢভqualGreater;拚ullEqual;扦reater;扶ess;檡lantEqual;橽ilde;扲r;쀀\ud835\udd0fĀ;eঽা拘ftarrow;懚idot;䄿ƀnpw৔ਖਛgȀLRlr৞৷ਂਐeftĀAR০৬rrow;柵ightArrow;柷ightArrow;柶eftĀarγਊightáοightáϊf;쀀\ud835\udd43erĀLRਢਬeftArrow;憙ightArrow;憘ƀchtਾੀੂòࡌ;憰rok;䅁;扪Ѐacefiosuਗ਼੝੠੷੼અઋ઎p;椅y;䐜Ādl੥੯iumSpace;恟lintrf;愳r;쀀\ud835\udd10nusPlus;戓pf;쀀\ud835\udd44cò੶;䎜ҀJacefostuણધભીଔଙඑ඗ඞcy;䐊cute;䅃ƀaey઴હાron;䅇dil;䅅;䐝ƀgswે૰଎ativeƀMTV૓૟૨ediumSpace;怋hiĀcn૦૘ë૙eryThiî૙tedĀGL૸ଆreaterGreateòٳessLesóੈLine;䀊r;쀀\ud835\udd11ȀBnptଢନଷ଺reak;恠BreakingSpace;䂠f;愕ڀ;CDEGHLNPRSTV୕ୖ୪୼஡௫ఄ౞಄ದ೘ൡඅ櫬Āou୛୤ngruent;扢pCap;扭oubleVerticalBar;戦ƀlqxஃஊ஛ement;戉ualĀ;Tஒஓ扠ilde;쀀≂̸ists;戄reater΀;EFGLSTஶஷ஽௉௓௘௥扯qual;扱ullEqual;쀀≧̸reater;쀀≫̸ess;批lantEqual;쀀⩾̸ilde;扵umpń௲௽ownHump;쀀≎̸qual;쀀≏̸eĀfsఊధtTriangleƀ;BEచఛడ拪ar;쀀⧏̸qual;括s̀;EGLSTవశ఼ౄోౘ扮qual;扰reater;扸ess;쀀≪̸lantEqual;쀀⩽̸ilde;扴estedĀGL౨౹reaterGreater;쀀⪢̸essLess;쀀⪡̸recedesƀ;ESಒಓಛ技qual;쀀⪯̸lantEqual;拠ĀeiಫಹverseElement;戌ghtTriangleƀ;BEೋೌ೒拫ar;쀀⧐̸qual;拭ĀquೝഌuareSuĀbp೨೹setĀ;E೰ೳ쀀⊏̸qual;拢ersetĀ;Eഃആ쀀⊐̸qual;拣ƀbcpഓതൎsetĀ;Eഛഞ쀀⊂⃒qual;抈ceedsȀ;ESTലള഻െ抁qual;쀀⪰̸lantEqual;拡ilde;쀀≿̸ersetĀ;E൘൛쀀⊃⃒qual;抉ildeȀ;EFT൮൯൵ൿ扁qual;扄ullEqual;扇ilde;扉erticalBar;戤cr;쀀\ud835\udca9ilde耻Ñ䃑;䎝܀Eacdfgmoprstuvලෂ෉෕ෛ෠෧෼ขภยา฿ไlig;䅒cute耻Ó䃓Āiy෎ීrc耻Ô䃔;䐞blac;䅐r;쀀\ud835\udd12rave耻Ò䃒ƀaei෮ෲ෶cr;䅌ga;䎩cron;䎟pf;쀀\ud835\udd46enCurlyĀDQฎบoubleQuote;怜uote;怘;橔Āclวฬr;쀀\ud835\udcaaash耻Ø䃘iŬื฼de耻Õ䃕es;樷ml耻Ö䃖erĀBP๋๠Āar๐๓r;怾acĀek๚๜;揞et;掴arenthesis;揜Ҁacfhilors๿ງຊຏຒດຝະ໼rtialD;戂y;䐟r;쀀\ud835\udd13i;䎦;䎠usMinus;䂱Āipຢອncareplanåڝf;愙Ȁ;eio຺ູ໠໤檻cedesȀ;EST່້໏໚扺qual;檯lantEqual;扼ilde;找me;怳Ādp໩໮uct;戏ortionĀ;aȥ໹l;戝Āci༁༆r;쀀\ud835\udcab;䎨ȀUfos༑༖༛༟OT耻"䀢r;쀀\ud835\udd14pf;愚cr;쀀\ud835\udcac؀BEacefhiorsu༾གྷཇའཱིྦྷྪྭ႖ႩႴႾarr;椐G耻®䂮ƀcnrཎནབute;䅔g;柫rĀ;tཛྷཝ憠l;椖ƀaeyཧཬཱron;䅘dil;䅖;䐠Ā;vླྀཹ愜erseĀEUྂྙĀlq྇ྎement;戋uilibrium;懋pEquilibrium;楯r»ཹo;䎡ghtЀACDFTUVa࿁࿫࿳ဢဨၛႇϘĀnr࿆࿒gleBracket;柩rowƀ;BL࿜࿝࿡憒ar;懥eftArrow;懄eiling;按oǵ࿹\0စbleBracket;柧nǔည\0နeeVector;楝ectorĀ;Bဝသ懂ar;楕loor;挋Āerိ၃eƀ;AVဵံြ抢rrow;憦ector;楛iangleƀ;BEၐၑၕ抳ar;槐qual;抵pƀDTVၣၮၸownVector;楏eeVector;楜ectorĀ;Bႂႃ憾ar;楔ectorĀ;B႑႒懀ar;楓Āpuႛ႞f;愝ndImplies;楰ightarrow;懛ĀchႹႼr;愛;憱leDelayed;槴ڀHOacfhimoqstuფჱჷჽᄙᄞᅑᅖᅡᅧᆵᆻᆿĀCcჩხHcy;䐩y;䐨FTcy;䐬cute;䅚ʀ;aeiyᄈᄉᄎᄓᄗ檼ron;䅠dil;䅞rc;䅜;䐡r;쀀\ud835\udd16ortȀDLRUᄪᄴᄾᅉownArrow»ОeftArrow»࢚ightArrow»࿝pArrow;憑gma;䎣allCircle;战pf;쀀\ud835\udd4aɲᅭ\0\0ᅰt;戚areȀ;ISUᅻᅼᆉᆯ斡ntersection;抓uĀbpᆏᆞsetĀ;Eᆗᆘ抏qual;抑ersetĀ;Eᆨᆩ抐qual;抒nion;抔cr;쀀\ud835\udcaear;拆ȀbcmpᇈᇛሉላĀ;sᇍᇎ拐etĀ;Eᇍᇕqual;抆ĀchᇠህeedsȀ;ESTᇭᇮᇴᇿ扻qual;檰lantEqual;扽ilde;承Tháྌ;我ƀ;esሒሓሣ拑rsetĀ;Eሜም抃qual;抇et»ሓրHRSacfhiorsሾቄ቉ቕ቞ቱቶኟዂወዑORN耻Þ䃞ADE;愢ĀHc቎ቒcy;䐋y;䐦Ābuቚቜ;䀉;䎤ƀaeyብቪቯron;䅤dil;䅢;䐢r;쀀\ud835\udd17Āeiቻ኉ǲኀ\0ኇefore;戴a;䎘Ācn኎ኘkSpace;쀀  Space;怉ldeȀ;EFTካኬኲኼ戼qual;扃ullEqual;扅ilde;扈pf;쀀\ud835\udd4bipleDot;惛Āctዖዛr;쀀\ud835\udcafrok;䅦ૡዷጎጚጦ\0ጬጱ\0\0\0\0\0ጸጽ፷ᎅ\0᏿ᐄᐊᐐĀcrዻጁute耻Ú䃚rĀ;oጇገ憟cir;楉rǣጓ\0጖y;䐎ve;䅬Āiyጞጣrc耻Û䃛;䐣blac;䅰r;쀀\ud835\udd18rave耻Ù䃙acr;䅪Ādiፁ፩erĀBPፈ፝Āarፍፐr;䁟acĀekፗፙ;揟et;掵arenthesis;揝onĀ;P፰፱拃lus;抎Āgp፻፿on;䅲f;쀀\ud835\udd4cЀADETadps᎕ᎮᎸᏄϨᏒᏗᏳrrowƀ;BDᅐᎠᎤar;椒ownArrow;懅ownArrow;憕quilibrium;楮eeĀ;AᏋᏌ报rrow;憥ownáϳerĀLRᏞᏨeftArrow;憖ightArrow;憗iĀ;lᏹᏺ䏒on;䎥ing;䅮cr;쀀\ud835\udcb0ilde;䅨ml耻Ü䃜ҀDbcdefosvᐧᐬᐰᐳᐾᒅᒊᒐᒖash;披ar;櫫y;䐒ashĀ;lᐻᐼ抩;櫦Āerᑃᑅ;拁ƀbtyᑌᑐᑺar;怖Ā;iᑏᑕcalȀBLSTᑡᑥᑪᑴar;戣ine;䁼eparator;杘ilde;所ThinSpace;怊r;쀀\ud835\udd19pf;쀀\ud835\udd4dcr;쀀\ud835\udcb1dash;抪ʀcefosᒧᒬᒱᒶᒼirc;䅴dge;拀r;쀀\ud835\udd1apf;쀀\ud835\udd4ecr;쀀\ud835\udcb2Ȁfiosᓋᓐᓒᓘr;쀀\ud835\udd1b;䎞pf;쀀\ud835\udd4fcr;쀀\ud835\udcb3ҀAIUacfosuᓱᓵᓹᓽᔄᔏᔔᔚᔠcy;䐯cy;䐇cy;䐮cute耻Ý䃝Āiyᔉᔍrc;䅶;䐫r;쀀\ud835\udd1cpf;쀀\ud835\udd50cr;쀀\ud835\udcb4ml;䅸ЀHacdefosᔵᔹᔿᕋᕏᕝᕠᕤcy;䐖cute;䅹Āayᕄᕉron;䅽;䐗ot;䅻ǲᕔ\0ᕛoWidtè૙a;䎖r;愨pf;愤cr;쀀\ud835\udcb5௡ᖃᖊᖐ\0ᖰᖶᖿ\0\0\0\0ᗆᗛᗫᙟ᙭\0ᚕ᚛ᚲᚹ\0ᚾcute耻á䃡reve;䄃̀;Ediuyᖜᖝᖡᖣᖨᖭ戾;쀀∾̳;房rc耻â䃢te肻´̆;䐰lig耻æ䃦Ā;r²ᖺ;쀀\ud835\udd1erave耻à䃠ĀepᗊᗖĀfpᗏᗔsym;愵èᗓha;䎱ĀapᗟcĀclᗤᗧr;䄁g;樿ɤᗰ\0\0ᘊʀ;adsvᗺᗻᗿᘁᘇ戧nd;橕;橜lope;橘;橚΀;elmrszᘘᘙᘛᘞᘿᙏᙙ戠;榤e»ᘙsdĀ;aᘥᘦ戡ѡᘰᘲᘴᘶᘸᘺᘼᘾ;榨;榩;榪;榫;榬;榭;榮;榯tĀ;vᙅᙆ戟bĀ;dᙌᙍ抾;榝Āptᙔᙗh;戢»¹arr;捼Āgpᙣᙧon;䄅f;쀀\ud835\udd52΀;Eaeiop዁ᙻᙽᚂᚄᚇᚊ;橰cir;橯;扊d;手s;䀧roxĀ;e዁ᚒñᚃing耻å䃥ƀctyᚡᚦᚨr;쀀\ud835\udcb6;䀪mpĀ;e዁ᚯñʈilde耻ã䃣ml耻ä䃤Āciᛂᛈoninôɲnt;樑ࠀNabcdefiklnoprsu᛭ᛱᜰ᜼ᝃᝈ᝸᝽០៦ᠹᡐᜍ᤽᥈ᥰot;櫭Ācrᛶ᜞kȀcepsᜀᜅᜍᜓong;扌psilon;䏶rime;怵imĀ;e᜚᜛戽q;拍Ŷᜢᜦee;抽edĀ;gᜬᜭ挅e»ᜭrkĀ;t፜᜷brk;掶Āoyᜁᝁ;䐱quo;怞ʀcmprtᝓ᝛ᝡᝤᝨausĀ;eĊĉptyv;榰séᜌnoõēƀahwᝯ᝱ᝳ;䎲;愶een;扬r;쀀\ud835\udd1fg΀costuvwឍឝឳេ៕៛៞ƀaiuបពរðݠrc;旯p»፱ƀdptឤឨឭot;樀lus;樁imes;樂ɱឹ\0\0ើcup;樆ar;昅riangleĀdu៍្own;施p;斳plus;樄eåᑄåᒭarow;植ƀako៭ᠦᠵĀcn៲ᠣkƀlst៺֫᠂ozenge;槫riangleȀ;dlr᠒᠓᠘᠝斴own;斾eft;旂ight;斸k;搣Ʊᠫ\0ᠳƲᠯ\0ᠱ;斒;斑4;斓ck;斈ĀeoᠾᡍĀ;qᡃᡆ쀀=⃥uiv;쀀≡⃥t;挐Ȁptwxᡙᡞᡧᡬf;쀀\ud835\udd53Ā;tᏋᡣom»Ꮜtie;拈؀DHUVbdhmptuvᢅᢖᢪᢻᣗᣛᣬ᣿ᤅᤊᤐᤡȀLRlrᢎᢐᢒᢔ;敗;敔;敖;敓ʀ;DUduᢡᢢᢤᢦᢨ敐;敦;敩;敤;敧ȀLRlrᢳᢵᢷᢹ;敝;敚;敜;教΀;HLRhlrᣊᣋᣍᣏᣑᣓᣕ救;敬;散;敠;敫;敢;敟ox;槉ȀLRlrᣤᣦᣨᣪ;敕;敒;攐;攌ʀ;DUduڽ᣷᣹᣻᣽;敥;敨;攬;攴inus;抟lus;択imes;抠ȀLRlrᤙᤛᤝ᤟;敛;敘;攘;攔΀;HLRhlrᤰᤱᤳᤵᤷ᤻᤹攂;敪;敡;敞;攼;攤;攜Āevģ᥂bar耻¦䂦Ȁceioᥑᥖᥚᥠr;쀀\ud835\udcb7mi;恏mĀ;e᜚᜜lƀ;bhᥨᥩᥫ䁜;槅sub;柈Ŭᥴ᥾lĀ;e᥹᥺怢t»᥺pƀ;Eeįᦅᦇ;檮Ā;qۜۛೡᦧ\0᧨ᨑᨕᨲ\0ᨷᩐ\0\0᪴\0\0᫁\0\0ᬡᬮ᭍᭒\0᯽\0ᰌƀcpr᦭ᦲ᧝ute;䄇̀;abcdsᦿᧀᧄ᧊᧕᧙戩nd;橄rcup;橉Āau᧏᧒p;橋p;橇ot;橀;쀀∩︀Āeo᧢᧥t;恁îړȀaeiu᧰᧻ᨁᨅǰ᧵\0᧸s;橍on;䄍dil耻ç䃧rc;䄉psĀ;sᨌᨍ橌m;橐ot;䄋ƀdmnᨛᨠᨦil肻¸ƭptyv;榲t脀¢;eᨭᨮ䂢räƲr;쀀\ud835\udd20ƀceiᨽᩀᩍy;䑇ckĀ;mᩇᩈ朓ark»ᩈ;䏇r΀;Ecefms᩟᩠ᩢᩫ᪤᪪᪮旋;槃ƀ;elᩩᩪᩭ䋆q;扗eɡᩴ\0\0᪈rrowĀlr᩼᪁eft;憺ight;憻ʀRSacd᪒᪔᪖᪚᪟»ཇ;擈st;抛irc;抚ash;抝nint;樐id;櫯cir;槂ubsĀ;u᪻᪼晣it»᪼ˬ᫇᫔᫺\0ᬊonĀ;eᫍᫎ䀺Ā;qÇÆɭ᫙\0\0᫢aĀ;t᫞᫟䀬;䁀ƀ;fl᫨᫩᫫戁îᅠeĀmx᫱᫶ent»᫩eóɍǧ᫾\0ᬇĀ;dኻᬂot;橭nôɆƀfryᬐᬔᬗ;쀀\ud835\udd54oäɔ脀©;sŕᬝr;愗Āaoᬥᬩrr;憵ss;朗Ācuᬲᬷr;쀀\ud835\udcb8Ābpᬼ᭄Ā;eᭁᭂ櫏;櫑Ā;eᭉᭊ櫐;櫒dot;拯΀delprvw᭠᭬᭷ᮂᮬᯔ᯹arrĀlr᭨᭪;椸;椵ɰ᭲\0\0᭵r;拞c;拟arrĀ;p᭿ᮀ憶;椽̀;bcdosᮏᮐᮖᮡᮥᮨ截rcap;橈Āauᮛᮞp;橆p;橊ot;抍r;橅;쀀∪︀Ȁalrv᮵ᮿᯞᯣrrĀ;mᮼᮽ憷;椼yƀevwᯇᯔᯘqɰᯎ\0\0ᯒreã᭳uã᭵ee;拎edge;拏en耻¤䂤earrowĀlrᯮ᯳eft»ᮀight»ᮽeäᯝĀciᰁᰇoninôǷnt;戱lcty;挭ঀAHabcdefhijlorstuwz᰸᰻᰿ᱝᱩᱵᲊᲞᲬᲷ᳻᳿ᴍᵻᶑᶫᶻ᷆᷍rò΁ar;楥Ȁglrs᱈ᱍ᱒᱔ger;怠eth;愸òᄳhĀ;vᱚᱛ怐»ऊūᱡᱧarow;椏aã̕Āayᱮᱳron;䄏;䐴ƀ;ao̲ᱼᲄĀgrʿᲁr;懊tseq;橷ƀglmᲑᲔᲘ耻°䂰ta;䎴ptyv;榱ĀirᲣᲨsht;楿;쀀\ud835\udd21arĀlrᲳᲵ»ࣜ»သʀaegsv᳂͸᳖᳜᳠mƀ;oș᳊᳔ndĀ;ș᳑uit;晦amma;䏝in;拲ƀ;io᳧᳨᳸䃷de脀÷;o᳧ᳰntimes;拇nø᳷cy;䑒cɯᴆ\0\0ᴊrn;挞op;挍ʀlptuwᴘᴝᴢᵉᵕlar;䀤f;쀀\ud835\udd55ʀ;emps̋ᴭᴷᴽᵂqĀ;d͒ᴳot;扑inus;戸lus;戔quare;抡blebarwedgåúnƀadhᄮᵝᵧownarrowóᲃarpoonĀlrᵲᵶefôᲴighôᲶŢᵿᶅkaro÷གɯᶊ\0\0ᶎrn;挟op;挌ƀcotᶘᶣᶦĀryᶝᶡ;쀀\ud835\udcb9;䑕l;槶rok;䄑Ādrᶰᶴot;拱iĀ;fᶺ᠖斿Āah᷀᷃ròЩaòྦangle;榦Āci᷒ᷕy;䑟grarr;柿ऀDacdefglmnopqrstuxḁḉḙḸոḼṉṡṾấắẽỡἪἷὄ὎὚ĀDoḆᴴoôᲉĀcsḎḔute耻é䃩ter;橮ȀaioyḢḧḱḶron;䄛rĀ;cḭḮ扖耻ê䃪lon;払;䑍ot;䄗ĀDrṁṅot;扒;쀀\ud835\udd22ƀ;rsṐṑṗ檚ave耻è䃨Ā;dṜṝ檖ot;檘Ȁ;ilsṪṫṲṴ檙nters;揧;愓Ā;dṹṺ檕ot;檗ƀapsẅẉẗcr;䄓tyƀ;svẒẓẕ戅et»ẓpĀ1;ẝẤĳạả;怄;怅怃ĀgsẪẬ;䅋p;怂ĀgpẴẸon;䄙f;쀀\ud835\udd56ƀalsỄỎỒrĀ;sỊị拕l;槣us;橱iƀ;lvỚớở䎵on»ớ;䏵ȀcsuvỪỳἋἣĀioữḱrc»Ḯɩỹ\0\0ỻíՈantĀglἂἆtr»ṝess»Ṻƀaeiἒ἖Ἒls;䀽st;扟vĀ;DȵἠD;橸parsl;槥ĀDaἯἳot;打rr;楱ƀcdiἾὁỸr;愯oô͒ĀahὉὋ;䎷耻ð䃰Āmrὓὗl耻ë䃫o;悬ƀcipὡὤὧl;䀡sôծĀeoὬὴctatioîՙnentialåչৡᾒ\0ᾞ\0ᾡᾧ\0\0ῆῌ\0ΐ\0ῦῪ \0 ⁚llingdotseñṄy;䑄male;晀ƀilrᾭᾳ῁lig;耀ﬃɩᾹ\0\0᾽g;耀ﬀig;耀ﬄ;쀀\ud835\udd23lig;耀ﬁlig;쀀fjƀaltῙ῜ῡt;晭ig;耀ﬂns;斱of;䆒ǰ΅\0ῳf;쀀\ud835\udd57ĀakֿῷĀ;vῼ´拔;櫙artint;樍Āao‌⁕Ācs‑⁒α‚‰‸⁅⁈\0⁐β•‥‧‪‬\0‮耻½䂽;慓耻¼䂼;慕;慙;慛Ƴ‴\0‶;慔;慖ʴ‾⁁\0\0⁃耻¾䂾;慗;慜5;慘ƶ⁌\0⁎;慚;慝8;慞l;恄wn;挢cr;쀀\ud835\udcbbࢀEabcdefgijlnorstv₂₉₟₥₰₴⃰⃵⃺⃿℃ℒℸ̗ℾ⅒↞Ā;lٍ₇;檌ƀcmpₐₕ₝ute;䇵maĀ;dₜ᳚䎳;檆reve;䄟Āiy₪₮rc;䄝;䐳ot;䄡Ȁ;lqsؾق₽⃉ƀ;qsؾٌ⃄lanô٥Ȁ;cdl٥⃒⃥⃕c;檩otĀ;o⃜⃝檀Ā;l⃢⃣檂;檄Ā;e⃪⃭쀀⋛︀s;檔r;쀀\ud835\udd24Ā;gٳ؛mel;愷cy;䑓Ȁ;Eajٚℌℎℐ;檒;檥;檤ȀEaesℛℝ℩ℴ;扩pĀ;p℣ℤ檊rox»ℤĀ;q℮ℯ檈Ā;q℮ℛim;拧pf;쀀\ud835\udd58Āci⅃ⅆr;愊mƀ;el٫ⅎ⅐;檎;檐茀>;cdlqr׮ⅠⅪⅮⅳⅹĀciⅥⅧ;檧r;橺ot;拗Par;榕uest;橼ʀadelsↄⅪ←ٖ↛ǰ↉\0↎proø₞r;楸qĀlqؿ↖lesó₈ií٫Āen↣↭rtneqq;쀀≩︀Å↪ԀAabcefkosy⇄⇇⇱⇵⇺∘∝∯≨≽ròΠȀilmr⇐⇔⇗⇛rsðᒄf»․ilôکĀdr⇠⇤cy;䑊ƀ;cwࣴ⇫⇯ir;楈;憭ar;意irc;䄥ƀalr∁∎∓rtsĀ;u∉∊晥it»∊lip;怦con;抹r;쀀\ud835\udd25sĀew∣∩arow;椥arow;椦ʀamopr∺∾≃≞≣rr;懿tht;戻kĀlr≉≓eftarrow;憩ightarrow;憪f;쀀\ud835\udd59bar;怕ƀclt≯≴≸r;쀀\ud835\udcbdasè⇴rok;䄧Ābp⊂⊇ull;恃hen»ᱛૡ⊣\0⊪\0⊸⋅⋎\0⋕⋳\0\0⋸⌢⍧⍢⍿\0⎆⎪⎴cute耻í䃭ƀ;iyݱ⊰⊵rc耻î䃮;䐸Ācx⊼⊿y;䐵cl耻¡䂡ĀfrΟ⋉;쀀\ud835\udd26rave耻ì䃬Ȁ;inoܾ⋝⋩⋮Āin⋢⋦nt;樌t;戭fin;槜ta;愩lig;䄳ƀaop⋾⌚⌝ƀcgt⌅⌈⌗r;䄫ƀelpܟ⌏⌓inåގarôܠh;䄱f;抷ed;䆵ʀ;cfotӴ⌬⌱⌽⍁are;愅inĀ;t⌸⌹戞ie;槝doô⌙ʀ;celpݗ⍌⍐⍛⍡al;抺Āgr⍕⍙eróᕣã⍍arhk;樗rod;樼Ȁcgpt⍯⍲⍶⍻y;䑑on;䄯f;쀀\ud835\udd5aa;䎹uest耻¿䂿Āci⎊⎏r;쀀\ud835\udcbenʀ;EdsvӴ⎛⎝⎡ӳ;拹ot;拵Ā;v⎦⎧拴;拳Ā;iݷ⎮lde;䄩ǫ⎸\0⎼cy;䑖l耻ï䃯̀cfmosu⏌⏗⏜⏡⏧⏵Āiy⏑⏕rc;䄵;䐹r;쀀\ud835\udd27ath;䈷pf;쀀\ud835\udd5bǣ⏬\0⏱r;쀀\ud835\udcbfrcy;䑘kcy;䑔Ѐacfghjos␋␖␢␧␭␱␵␻ppaĀ;v␓␔䎺;䏰Āey␛␠dil;䄷;䐺r;쀀\ud835\udd28reen;䄸cy;䑅cy;䑜pf;쀀\ud835\udd5ccr;쀀\ud835\udcc0஀ABEHabcdefghjlmnoprstuv⑰⒁⒆⒍⒑┎┽╚▀♎♞♥♹♽⚚⚲⛘❝❨➋⟀⠁⠒ƀart⑷⑺⑼rò৆òΕail;椛arr;椎Ā;gঔ⒋;檋ar;楢ॣ⒥\0⒪\0⒱\0\0\0\0\0⒵Ⓔ\0ⓆⓈⓍ\0⓹ute;䄺mptyv;榴raîࡌbda;䎻gƀ;dlࢎⓁⓃ;榑åࢎ;檅uo耻«䂫rЀ;bfhlpst࢙ⓞⓦⓩ⓫⓮⓱⓵Ā;f࢝ⓣs;椟s;椝ë≒p;憫l;椹im;楳l;憢ƀ;ae⓿─┄檫il;椙Ā;s┉┊檭;쀀⪭︀ƀabr┕┙┝rr;椌rk;杲Āak┢┬cĀek┨┪;䁻;䁛Āes┱┳;榋lĀdu┹┻;榏;榍Ȁaeuy╆╋╖╘ron;䄾Ādi═╔il;䄼ìࢰâ┩;䐻Ȁcqrs╣╦╭╽a;椶uoĀ;rนᝆĀdu╲╷har;楧shar;楋h;憲ʀ;fgqs▋▌উ◳◿扤tʀahlrt▘▤▷◂◨rrowĀ;t࢙□aé⓶arpoonĀdu▯▴own»њp»०eftarrows;懇ightƀahs◍◖◞rrowĀ;sࣴࢧarpoonó྘quigarro÷⇰hreetimes;拋ƀ;qs▋ও◺lanôবʀ;cdgsব☊☍☝☨c;檨otĀ;o☔☕橿Ā;r☚☛檁;檃Ā;e☢☥쀀⋚︀s;檓ʀadegs☳☹☽♉♋pproøⓆot;拖qĀgq♃♅ôউgtò⒌ôছiíলƀilr♕࣡♚sht;楼;쀀\ud835\udd29Ā;Eজ♣;檑š♩♶rĀdu▲♮Ā;l॥♳;楪lk;斄cy;䑙ʀ;achtੈ⚈⚋⚑⚖rò◁orneòᴈard;楫ri;旺Āio⚟⚤dot;䅀ustĀ;a⚬⚭掰che»⚭ȀEaes⚻⚽⛉⛔;扨pĀ;p⛃⛄檉rox»⛄Ā;q⛎⛏檇Ā;q⛎⚻im;拦Ѐabnoptwz⛩⛴⛷✚✯❁❇❐Ānr⛮⛱g;柬r;懽rëࣁgƀlmr⛿✍✔eftĀar০✇ightá৲apsto;柼ightá৽parrowĀlr✥✩efô⓭ight;憬ƀafl✶✹✽r;榅;쀀\ud835\udd5dus;樭imes;樴š❋❏st;戗áፎƀ;ef❗❘᠀旊nge»❘arĀ;l❤❥䀨t;榓ʀachmt❳❶❼➅➇ròࢨorneòᶌarĀ;d྘➃;業;怎ri;抿̀achiqt➘➝ੀ➢➮➻quo;怹r;쀀\ud835\udcc1mƀ;egল➪➬;檍;檏Ābu┪➳oĀ;rฟ➹;怚rok;䅂萀<;cdhilqrࠫ⟒☹⟜⟠⟥⟪⟰Āci⟗⟙;檦r;橹reå◲mes;拉arr;楶uest;橻ĀPi⟵⟹ar;榖ƀ;ef⠀भ᠛旃rĀdu⠇⠍shar;楊har;楦Āen⠗⠡rtneqq;쀀≨︀Å⠞܀Dacdefhilnopsu⡀⡅⢂⢎⢓⢠⢥⢨⣚⣢⣤ઃ⣳⤂Dot;戺Ȁclpr⡎⡒⡣⡽r耻¯䂯Āet⡗⡙;時Ā;e⡞⡟朠se»⡟Ā;sျ⡨toȀ;dluျ⡳⡷⡻owîҌefôएðᏑker;斮Āoy⢇⢌mma;権;䐼ash;怔asuredangle»ᘦr;쀀\ud835\udd2ao;愧ƀcdn⢯⢴⣉ro耻µ䂵Ȁ;acdᑤ⢽⣀⣄sôᚧir;櫰ot肻·Ƶusƀ;bd⣒ᤃ⣓戒Ā;uᴼ⣘;横ţ⣞⣡p;櫛ò−ðઁĀdp⣩⣮els;抧f;쀀\ud835\udd5eĀct⣸⣽r;쀀\ud835\udcc2pos»ᖝƀ;lm⤉⤊⤍䎼timap;抸ఀGLRVabcdefghijlmoprstuvw⥂⥓⥾⦉⦘⧚⧩⨕⨚⩘⩝⪃⪕⪤⪨⬄⬇⭄⭿⮮ⰴⱧⱼ⳩Āgt⥇⥋;쀀⋙̸Ā;v⥐௏쀀≫⃒ƀelt⥚⥲⥶ftĀar⥡⥧rrow;懍ightarrow;懎;쀀⋘̸Ā;v⥻ే쀀≪⃒ightarrow;懏ĀDd⦎⦓ash;抯ash;抮ʀbcnpt⦣⦧⦬⦱⧌la»˞ute;䅄g;쀀∠⃒ʀ;Eiop඄⦼⧀⧅⧈;쀀⩰̸d;쀀≋̸s;䅉roø඄urĀ;a⧓⧔普lĀ;s⧓ସǳ⧟\0⧣p肻 ଷmpĀ;e௹ఀʀaeouy⧴⧾⨃⨐⨓ǰ⧹\0⧻;橃on;䅈dil;䅆ngĀ;dൾ⨊ot;쀀⩭̸p;橂;䐽ash;怓΀;Aadqsxஒ⨩⨭⨻⩁⩅⩐rr;懗rĀhr⨳⨶k;椤Ā;oᏲᏰot;쀀≐̸uiöୣĀei⩊⩎ar;椨í஘istĀ;s஠டr;쀀\ud835\udd2bȀEest௅⩦⩹⩼ƀ;qs஼⩭௡ƀ;qs஼௅⩴lanô௢ií௪Ā;rஶ⪁»ஷƀAap⪊⪍⪑rò⥱rr;憮ar;櫲ƀ;svྍ⪜ྌĀ;d⪡⪢拼;拺cy;䑚΀AEadest⪷⪺⪾⫂⫅⫶⫹rò⥦;쀀≦̸rr;憚r;急Ȁ;fqs఻⫎⫣⫯tĀar⫔⫙rro÷⫁ightarro÷⪐ƀ;qs఻⪺⫪lanôౕĀ;sౕ⫴»శiíౝĀ;rవ⫾iĀ;eచథiäඐĀpt⬌⬑f;쀀\ud835\udd5f膀¬;in⬙⬚⬶䂬nȀ;Edvஉ⬤⬨⬮;쀀⋹̸ot;쀀⋵̸ǡஉ⬳⬵;拷;拶iĀ;vಸ⬼ǡಸ⭁⭃;拾;拽ƀaor⭋⭣⭩rȀ;ast୻⭕⭚⭟lleì୻l;쀀⫽⃥;쀀∂̸lint;樔ƀ;ceಒ⭰⭳uåಥĀ;cಘ⭸Ā;eಒ⭽ñಘȀAait⮈⮋⮝⮧rò⦈rrƀ;cw⮔⮕⮙憛;쀀⤳̸;쀀↝̸ghtarrow»⮕riĀ;eೋೖ΀chimpqu⮽⯍⯙⬄୸⯤⯯Ȁ;cerല⯆ഷ⯉uå൅;쀀\ud835\udcc3ortɭ⬅\0\0⯖ará⭖mĀ;e൮⯟Ā;q൴൳suĀbp⯫⯭å೸åഋƀbcp⯶ⰑⰙȀ;Ees⯿ⰀഢⰄ抄;쀀⫅̸etĀ;eഛⰋqĀ;qണⰀcĀ;eലⰗñസȀ;EesⰢⰣൟⰧ抅;쀀⫆̸etĀ;e൘ⰮqĀ;qൠⰣȀgilrⰽⰿⱅⱇìௗlde耻ñ䃱çృiangleĀlrⱒⱜeftĀ;eచⱚñదightĀ;eೋⱥñ೗Ā;mⱬⱭ䎽ƀ;esⱴⱵⱹ䀣ro;愖p;怇ҀDHadgilrsⲏⲔⲙⲞⲣⲰⲶⳓⳣash;抭arr;椄p;쀀≍⃒ash;抬ĀetⲨⲬ;쀀≥⃒;쀀>⃒nfin;槞ƀAetⲽⳁⳅrr;椂;쀀≤⃒Ā;rⳊⳍ쀀<⃒ie;쀀⊴⃒ĀAtⳘⳜrr;椃rie;쀀⊵⃒im;쀀∼⃒ƀAan⳰⳴ⴂrr;懖rĀhr⳺⳽k;椣Ā;oᏧᏥear;椧ቓ᪕\0\0\0\0\0\0\0\0\0\0\0\0\0ⴭ\0ⴸⵈⵠⵥ⵲ⶄᬇ\0\0ⶍⶫ\0ⷈⷎ\0ⷜ⸙⸫⸾⹃Ācsⴱ᪗ute耻ó䃳ĀiyⴼⵅrĀ;c᪞ⵂ耻ô䃴;䐾ʀabios᪠ⵒⵗǈⵚlac;䅑v;樸old;榼lig;䅓Ācr⵩⵭ir;榿;쀀\ud835\udd2cͯ⵹\0\0⵼\0ⶂn;䋛ave耻ò䃲;槁Ābmⶈ෴ar;榵Ȁacitⶕ⶘ⶥⶨrò᪀Āir⶝ⶠr;榾oss;榻nå๒;槀ƀaeiⶱⶵⶹcr;䅍ga;䏉ƀcdnⷀⷅǍron;䎿;榶pf;쀀\ud835\udd60ƀaelⷔ⷗ǒr;榷rp;榹΀;adiosvⷪⷫⷮ⸈⸍⸐⸖戨rò᪆Ȁ;efmⷷⷸ⸂⸅橝rĀ;oⷾⷿ愴f»ⷿ耻ª䂪耻º䂺gof;抶r;橖lope;橗;橛ƀclo⸟⸡⸧ò⸁ash耻ø䃸l;折iŬⸯ⸴de耻õ䃵esĀ;aǛ⸺s;樶ml耻ö䃶bar;挽ૡ⹞\0⹽\0⺀⺝\0⺢⺹\0\0⻋ຜ\0⼓\0\0⼫⾼\0⿈rȀ;astЃ⹧⹲຅脀¶;l⹭⹮䂶leìЃɩ⹸\0\0⹻m;櫳;櫽y;䐿rʀcimpt⺋⺏⺓ᡥ⺗nt;䀥od;䀮il;怰enk;怱r;쀀\ud835\udd2dƀimo⺨⺰⺴Ā;v⺭⺮䏆;䏕maô੶ne;明ƀ;tv⺿⻀⻈䏀chfork»´;䏖Āau⻏⻟nĀck⻕⻝kĀ;h⇴⻛;愎ö⇴sҀ;abcdemst⻳⻴ᤈ⻹⻽⼄⼆⼊⼎䀫cir;樣ir;樢Āouᵀ⼂;樥;橲n肻±ຝim;樦wo;樧ƀipu⼙⼠⼥ntint;樕f;쀀\ud835\udd61nd耻£䂣Ԁ;Eaceinosu່⼿⽁⽄⽇⾁⾉⾒⽾⾶;檳p;檷uå໙Ā;c໎⽌̀;acens່⽙⽟⽦⽨⽾pproø⽃urlyeñ໙ñ໎ƀaes⽯⽶⽺pprox;檹qq;檵im;拨iíໟmeĀ;s⾈ຮ怲ƀEas⽸⾐⽺ð⽵ƀdfp໬⾙⾯ƀals⾠⾥⾪lar;挮ine;挒urf;挓Ā;t໻⾴ï໻rel;抰Āci⿀⿅r;쀀\ud835\udcc5;䏈ncsp;怈̀fiopsu⿚⋢⿟⿥⿫⿱r;쀀\ud835\udd2epf;쀀\ud835\udd62rime;恗cr;쀀\ud835\udcc6ƀaeo⿸〉〓tĀei⿾々rnionóڰnt;樖stĀ;e【】䀿ñἙô༔઀ABHabcdefhilmnoprstux぀けさすムㄎㄫㅇㅢㅲㆎ㈆㈕㈤㈩㉘㉮㉲㊐㊰㊷ƀartぇおがròႳòϝail;検aròᱥar;楤΀cdenqrtとふへみわゔヌĀeuねぱ;쀀∽̱te;䅕iãᅮmptyv;榳gȀ;del࿑らるろ;榒;榥å࿑uo耻»䂻rր;abcfhlpstw࿜ガクシスゼゾダッデナp;極Ā;f࿠ゴs;椠;椳s;椞ë≝ð✮l;楅im;楴l;憣;憝Āaiパフil;椚oĀ;nホボ戶aló༞ƀabrョリヮrò៥rk;杳ĀakンヽcĀekヹ・;䁽;䁝Āes㄂㄄;榌lĀduㄊㄌ;榎;榐Ȁaeuyㄗㄜㄧㄩron;䅙Ādiㄡㄥil;䅗ì࿲âヺ;䑀Ȁclqsㄴㄷㄽㅄa;椷dhar;楩uoĀ;rȎȍh;憳ƀacgㅎㅟངlȀ;ipsླྀㅘㅛႜnåႻarôྩt;断ƀilrㅩဣㅮsht;楽;쀀\ud835\udd2fĀaoㅷㆆrĀduㅽㅿ»ѻĀ;l႑ㆄ;楬Ā;vㆋㆌ䏁;䏱ƀgns㆕ㇹㇼht̀ahlrstㆤㆰ㇂㇘㇤㇮rrowĀ;t࿜ㆭaéトarpoonĀduㆻㆿowîㅾp»႒eftĀah㇊㇐rrowó࿪arpoonóՑightarrows;應quigarro÷ニhreetimes;拌g;䋚ingdotseñἲƀahm㈍㈐㈓rò࿪aòՑ;怏oustĀ;a㈞㈟掱che»㈟mid;櫮Ȁabpt㈲㈽㉀㉒Ānr㈷㈺g;柭r;懾rëဃƀafl㉇㉊㉎r;榆;쀀\ud835\udd63us;樮imes;樵Āap㉝㉧rĀ;g㉣㉤䀩t;榔olint;樒arò㇣Ȁachq㉻㊀Ⴜ㊅quo;怺r;쀀\ud835\udcc7Ābu・㊊oĀ;rȔȓƀhir㊗㊛㊠reåㇸmes;拊iȀ;efl㊪ၙᠡ㊫方tri;槎luhar;楨;愞ൡ㋕㋛㋟㌬㌸㍱\0㍺㎤\0\0㏬㏰\0㐨㑈㑚㒭㒱㓊㓱\0㘖\0\0㘳cute;䅛quï➺Ԁ;Eaceinpsyᇭ㋳㋵㋿㌂㌋㌏㌟㌦㌩;檴ǰ㋺\0㋼;檸on;䅡uåᇾĀ;dᇳ㌇il;䅟rc;䅝ƀEas㌖㌘㌛;檶p;檺im;择olint;樓iíሄ;䑁otƀ;be㌴ᵇ㌵担;橦΀Aacmstx㍆㍊㍗㍛㍞㍣㍭rr;懘rĀhr㍐㍒ë∨Ā;oਸ਼਴t耻§䂧i;䀻war;椩mĀin㍩ðnuóñt;朶rĀ;o㍶⁕쀀\ud835\udd30Ȁacoy㎂㎆㎑㎠rp;景Āhy㎋㎏cy;䑉;䑈rtɭ㎙\0\0㎜iäᑤaraì⹯耻­䂭Āgm㎨㎴maƀ;fv㎱㎲㎲䏃;䏂Ѐ;deglnprካ㏅㏉㏎㏖㏞㏡㏦ot;橪Ā;q኱ኰĀ;E㏓㏔檞;檠Ā;E㏛㏜檝;檟e;扆lus;樤arr;楲aròᄽȀaeit㏸㐈㐏㐗Āls㏽㐄lsetmé㍪hp;樳parsl;槤Ādlᑣ㐔e;挣Ā;e㐜㐝檪Ā;s㐢㐣檬;쀀⪬︀ƀflp㐮㐳㑂tcy;䑌Ā;b㐸㐹䀯Ā;a㐾㐿槄r;挿f;쀀\ud835\udd64aĀdr㑍ЂesĀ;u㑔㑕晠it»㑕ƀcsu㑠㑹㒟Āau㑥㑯pĀ;sᆈ㑫;쀀⊓︀pĀ;sᆴ㑵;쀀⊔︀uĀbp㑿㒏ƀ;esᆗᆜ㒆etĀ;eᆗ㒍ñᆝƀ;esᆨᆭ㒖etĀ;eᆨ㒝ñᆮƀ;afᅻ㒦ְrť㒫ֱ»ᅼaròᅈȀcemt㒹㒾㓂㓅r;쀀\ud835\udcc8tmîñiì㐕aræᆾĀar㓎㓕rĀ;f㓔ឿ昆Āan㓚㓭ightĀep㓣㓪psiloîỠhé⺯s»⡒ʀbcmnp㓻㕞ሉ㖋㖎Ҁ;Edemnprs㔎㔏㔑㔕㔞㔣㔬㔱㔶抂;櫅ot;檽Ā;dᇚ㔚ot;櫃ult;櫁ĀEe㔨㔪;櫋;把lus;檿arr;楹ƀeiu㔽㕒㕕tƀ;en㔎㕅㕋qĀ;qᇚ㔏eqĀ;q㔫㔨m;櫇Ābp㕚㕜;櫕;櫓c̀;acensᇭ㕬㕲㕹㕻㌦pproø㋺urlyeñᇾñᇳƀaes㖂㖈㌛pproø㌚qñ㌗g;晪ڀ123;Edehlmnps㖩㖬㖯ሜ㖲㖴㗀㗉㗕㗚㗟㗨㗭耻¹䂹耻²䂲耻³䂳;櫆Āos㖹㖼t;檾ub;櫘Ā;dሢ㗅ot;櫄sĀou㗏㗒l;柉b;櫗arr;楻ult;櫂ĀEe㗤㗦;櫌;抋lus;櫀ƀeiu㗴㘉㘌tƀ;enሜ㗼㘂qĀ;qሢ㖲eqĀ;q㗧㗤m;櫈Ābp㘑㘓;櫔;櫖ƀAan㘜㘠㘭rr;懙rĀhr㘦㘨ë∮Ā;oਫ਩war;椪lig耻ß䃟௡㙑㙝㙠ዎ㙳㙹\0㙾㛂\0\0\0\0\0㛛㜃\0㜉㝬\0\0\0㞇ɲ㙖\0\0㙛get;挖;䏄rë๟ƀaey㙦㙫㙰ron;䅥dil;䅣;䑂lrec;挕r;쀀\ud835\udd31Ȁeiko㚆㚝㚵㚼ǲ㚋\0㚑eĀ4fኄኁaƀ;sv㚘㚙㚛䎸ym;䏑Ācn㚢㚲kĀas㚨㚮pproø዁im»ኬsðኞĀas㚺㚮ð዁rn耻þ䃾Ǭ̟㛆⋧es膀×;bd㛏㛐㛘䃗Ā;aᤏ㛕r;樱;樰ƀeps㛡㛣㜀á⩍Ȁ;bcf҆㛬㛰㛴ot;挶ir;櫱Ā;o㛹㛼쀀\ud835\udd65rk;櫚á㍢rime;怴ƀaip㜏㜒㝤dåቈ΀adempst㜡㝍㝀㝑㝗㝜㝟ngleʀ;dlqr㜰㜱㜶㝀㝂斵own»ᶻeftĀ;e⠀㜾ñम;扜ightĀ;e㊪㝋ñၚot;旬inus;樺lus;樹b;槍ime;樻ezium;揢ƀcht㝲㝽㞁Āry㝷㝻;쀀\ud835\udcc9;䑆cy;䑛rok;䅧Āio㞋㞎xô᝷headĀlr㞗㞠eftarro÷ࡏightarrow»ཝऀAHabcdfghlmoprstuw㟐㟓㟗㟤㟰㟼㠎㠜㠣㠴㡑㡝㡫㢩㣌㣒㣪㣶ròϭar;楣Ācr㟜㟢ute耻ú䃺òᅐrǣ㟪\0㟭y;䑞ve;䅭Āiy㟵㟺rc耻û䃻;䑃ƀabh㠃㠆㠋ròᎭlac;䅱aòᏃĀir㠓㠘sht;楾;쀀\ud835\udd32rave耻ù䃹š㠧㠱rĀlr㠬㠮»ॗ»ႃlk;斀Āct㠹㡍ɯ㠿\0\0㡊rnĀ;e㡅㡆挜r»㡆op;挏ri;旸Āal㡖㡚cr;䅫肻¨͉Āgp㡢㡦on;䅳f;쀀\ud835\udd66̀adhlsuᅋ㡸㡽፲㢑㢠ownáᎳarpoonĀlr㢈㢌efô㠭ighô㠯iƀ;hl㢙㢚㢜䏅»ᏺon»㢚parrows;懈ƀcit㢰㣄㣈ɯ㢶\0\0㣁rnĀ;e㢼㢽挝r»㢽op;挎ng;䅯ri;旹cr;쀀\ud835\udccaƀdir㣙㣝㣢ot;拰lde;䅩iĀ;f㜰㣨»᠓Āam㣯㣲rò㢨l耻ü䃼angle;榧ހABDacdeflnoprsz㤜㤟㤩㤭㦵㦸㦽㧟㧤㧨㧳㧹㧽㨁㨠ròϷarĀ;v㤦㤧櫨;櫩asèϡĀnr㤲㤷grt;榜΀eknprst㓣㥆㥋㥒㥝㥤㦖appá␕othinçẖƀhir㓫⻈㥙opô⾵Ā;hᎷ㥢ïㆍĀiu㥩㥭gmá㎳Ābp㥲㦄setneqĀ;q㥽㦀쀀⊊︀;쀀⫋︀setneqĀ;q㦏㦒쀀⊋︀;쀀⫌︀Āhr㦛㦟etá㚜iangleĀlr㦪㦯eft»थight»ၑy;䐲ash»ံƀelr㧄㧒㧗ƀ;beⷪ㧋㧏ar;抻q;扚lip;拮Ābt㧜ᑨaòᑩr;쀀\ud835\udd33tré㦮suĀbp㧯㧱»ജ»൙pf;쀀\ud835\udd67roð໻tré㦴Ācu㨆㨋r;쀀\ud835\udccbĀbp㨐㨘nĀEe㦀㨖»㥾nĀEe㦒㨞»㦐igzag;榚΀cefoprs㨶㨻㩖㩛㩔㩡㩪irc;䅵Ādi㩀㩑Ābg㩅㩉ar;機eĀ;qᗺ㩏;扙erp;愘r;쀀\ud835\udd34pf;쀀\ud835\udd68Ā;eᑹ㩦atèᑹcr;쀀\ud835\udcccૣណ㪇\0㪋\0㪐㪛\0\0㪝㪨㪫㪯\0\0㫃㫎\0㫘ៜ៟tré៑r;쀀\ud835\udd35ĀAa㪔㪗ròσrò৶;䎾ĀAa㪡㪤ròθrò৫að✓is;拻ƀdptឤ㪵㪾Āfl㪺ឩ;쀀\ud835\udd69imåឲĀAa㫇㫊ròώròਁĀcq㫒ីr;쀀\ud835\udccdĀpt៖㫜ré។Ѐacefiosu㫰㫽㬈㬌㬑㬕㬛㬡cĀuy㫶㫻te耻ý䃽;䑏Āiy㬂㬆rc;䅷;䑋n耻¥䂥r;쀀\ud835\udd36cy;䑗pf;쀀\ud835\udd6acr;쀀\ud835\udcceĀcm㬦㬩y;䑎l耻ÿ䃿Ԁacdefhiosw㭂㭈㭔㭘㭤㭩㭭㭴㭺㮀cute;䅺Āay㭍㭒ron;䅾;䐷ot;䅼Āet㭝㭡træᕟa;䎶r;쀀\ud835\udd37cy;䐶grarr;懝pf;쀀\ud835\udd6bcr;쀀\ud835\udccfĀjn㮅㮇;怍j;怌'.split("").map(e=>e.charCodeAt(0)))},658466:e=>{"use strict";e.s({xmlDecodeTree:()=>t});let t=new Uint16Array("Ȁaglq	\x15\x18\x1bɭ\x0f\0\0\x12p;䀦os;䀧t;䀾t;䀼uot;䀢".split("").map(e=>e.charCodeAt(0)))},943590:e=>{"use strict";var t;e.s({fromCodePoint:()=>i,replaceCodePoint:()=>a});let n=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),i=null!=(t=String.fromCodePoint)?t:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|1023&e),t+=String.fromCharCode(e)};function a(e){var t;return e>=55296&&e<=57343||e>1114111?65533:null!=(t=n.get(e))?t:e}},14887:e=>{"use strict";e.s({DecodingMode:()=>a,EntityDecoder:()=>c});var t,n,i,a,s=e.i(23755),r=e.i(658466),o=e.i(943590);function l(e){return e>=t.ZERO&&e<=t.NINE}!function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"}(t||(t={})),!function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"}(n||(n={})),!function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"}(i||(i={})),function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"}(a||(a={}));class c{startEntity(e){this.decodeMode=e,this.state=i.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,n){switch(this.state){case i.EntityStart:if(e.charCodeAt(n)===t.NUM)return this.state=i.NumericStart,this.consumed+=1,this.stateNumericStart(e,n+1);return this.state=i.NamedEntity,this.stateNamedEntity(e,n);case i.NumericStart:return this.stateNumericStart(e,n);case i.NumericDecimal:return this.stateNumericDecimal(e,n);case i.NumericHex:return this.stateNumericHex(e,n);case i.NamedEntity:return this.stateNamedEntity(e,n)}}stateNumericStart(e,n){return n>=e.length?-1:(32|e.charCodeAt(n))===t.LOWER_X?(this.state=i.NumericHex,this.consumed+=1,this.stateNumericHex(e,n+1)):(this.state=i.NumericDecimal,this.stateNumericDecimal(e,n))}addToNumericResult(e,t,n,i){if(t!==n){let a=n-t;this.result=this.result*Math.pow(i,a)+Number.parseInt(e.substr(t,a),i),this.consumed+=a}}stateNumericHex(e,n){let i=n;for(;n<e.length;){var a;let s=e.charCodeAt(n);if(!l(s)&&(!((a=s)>=t.UPPER_A)||!(a<=t.UPPER_F))&&(!(a>=t.LOWER_A)||!(a<=t.LOWER_F)))return this.addToNumericResult(e,i,n,16),this.emitNumericEntity(s,3);n+=1}return this.addToNumericResult(e,i,n,16),-1}stateNumericDecimal(e,t){let n=t;for(;t<e.length;){let i=e.charCodeAt(t);if(!l(i))return this.addToNumericResult(e,n,t,10),this.emitNumericEntity(i,2);t+=1}return this.addToNumericResult(e,n,t,10),-1}emitNumericEntity(e,n){var i;if(this.consumed<=n)return null==(i=this.errors)||i.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===t.SEMI)this.consumed+=1;else if(this.decodeMode===a.Strict)return 0;return this.emitCodePoint((0,o.replaceCodePoint)(this.result),this.consumed),this.errors&&(e!==t.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,i){let{decodeTree:s}=this,r=s[this.treeIndex],o=(r&n.VALUE_LENGTH)>>14;for(;i<e.length;i++,this.excess++){let c=e.charCodeAt(i);if(this.treeIndex=function(e,t,i,a){let s=(t&n.BRANCH_LENGTH)>>7,r=t&n.JUMP_TABLE;if(0===s)return 0!==r&&a===r?i:-1;if(r){let t=a-r;return t<0||t>=s?-1:e[i+t]-1}let o=i,l=o+s-1;for(;o<=l;){let t=o+l>>>1,n=e[t];if(n<a)o=t+1;else{if(!(n>a))return e[t+s];l=t-1}}return -1}(s,r,this.treeIndex+Math.max(1,o),c),this.treeIndex<0)return 0===this.result||this.decodeMode===a.Attribute&&(0===o||function(e){var n;return e===t.EQUALS||(n=e)>=t.UPPER_A&&n<=t.UPPER_Z||n>=t.LOWER_A&&n<=t.LOWER_Z||l(n)}(c))?0:this.emitNotTerminatedNamedEntity();if(0!=(o=((r=s[this.treeIndex])&n.VALUE_LENGTH)>>14)){if(c===t.SEMI)return this.emitNamedEntityData(this.treeIndex,o,this.consumed+this.excess);this.decodeMode!==a.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return -1}emitNotTerminatedNamedEntity(){var e;let{result:t,decodeTree:i}=this,a=(i[t]&n.VALUE_LENGTH)>>14;return this.emitNamedEntityData(t,a,this.consumed),null==(e=this.errors)||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,t,i){let{decodeTree:a}=this;return this.emitCodePoint(1===t?a[e]&~n.VALUE_LENGTH:a[e+1],i),3===t&&this.emitCodePoint(a[e+2],i),i}end(){var e;switch(this.state){case i.NamedEntity:return 0!==this.result&&(this.decodeMode!==a.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case i.NumericDecimal:return this.emitNumericEntity(0,2);case i.NumericHex:return this.emitNumericEntity(0,3);case i.NumericStart:return null==(e=this.errors)||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case i.EntityStart:return 0}}constructor(e,t,n){this.decodeTree=e,this.emitCodePoint=t,this.errors=n,this.state=i.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=a.Strict}}s.htmlDecodeTree,r.xmlDecodeTree},706747:e=>{"use strict";e.s({}),e.i(23755),e.i(658466),e.i(943590),e.i(14887)},195083:e=>{"use strict";var t,n,i,a,s;e.s({ATTRS:()=>n,DOCUMENT_MODE:()=>i,NS:()=>t,NUMBERED_HEADERS:()=>u,SPECIAL_ELEMENTS:()=>c,TAG_ID:()=>s,TAG_NAMES:()=>a,getTagID:()=>o,hasUnescapedText:()=>h}),function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"}(t||(t={})),function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"}(n||(n={})),function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"}(i||(i={})),function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SEARCH="search",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"}(a||(a={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SEARCH=94]="SEARCH",e[e.SECTION=95]="SECTION",e[e.SELECT=96]="SELECT",e[e.SOURCE=97]="SOURCE",e[e.SMALL=98]="SMALL",e[e.SPAN=99]="SPAN",e[e.STRIKE=100]="STRIKE",e[e.STRONG=101]="STRONG",e[e.STYLE=102]="STYLE",e[e.SUB=103]="SUB",e[e.SUMMARY=104]="SUMMARY",e[e.SUP=105]="SUP",e[e.TABLE=106]="TABLE",e[e.TBODY=107]="TBODY",e[e.TEMPLATE=108]="TEMPLATE",e[e.TEXTAREA=109]="TEXTAREA",e[e.TFOOT=110]="TFOOT",e[e.TD=111]="TD",e[e.TH=112]="TH",e[e.THEAD=113]="THEAD",e[e.TITLE=114]="TITLE",e[e.TR=115]="TR",e[e.TRACK=116]="TRACK",e[e.TT=117]="TT",e[e.U=118]="U",e[e.UL=119]="UL",e[e.SVG=120]="SVG",e[e.VAR=121]="VAR",e[e.WBR=122]="WBR",e[e.XMP=123]="XMP"}(s||(s={}));let r=new Map([[a.A,s.A],[a.ADDRESS,s.ADDRESS],[a.ANNOTATION_XML,s.ANNOTATION_XML],[a.APPLET,s.APPLET],[a.AREA,s.AREA],[a.ARTICLE,s.ARTICLE],[a.ASIDE,s.ASIDE],[a.B,s.B],[a.BASE,s.BASE],[a.BASEFONT,s.BASEFONT],[a.BGSOUND,s.BGSOUND],[a.BIG,s.BIG],[a.BLOCKQUOTE,s.BLOCKQUOTE],[a.BODY,s.BODY],[a.BR,s.BR],[a.BUTTON,s.BUTTON],[a.CAPTION,s.CAPTION],[a.CENTER,s.CENTER],[a.CODE,s.CODE],[a.COL,s.COL],[a.COLGROUP,s.COLGROUP],[a.DD,s.DD],[a.DESC,s.DESC],[a.DETAILS,s.DETAILS],[a.DIALOG,s.DIALOG],[a.DIR,s.DIR],[a.DIV,s.DIV],[a.DL,s.DL],[a.DT,s.DT],[a.EM,s.EM],[a.EMBED,s.EMBED],[a.FIELDSET,s.FIELDSET],[a.FIGCAPTION,s.FIGCAPTION],[a.FIGURE,s.FIGURE],[a.FONT,s.FONT],[a.FOOTER,s.FOOTER],[a.FOREIGN_OBJECT,s.FOREIGN_OBJECT],[a.FORM,s.FORM],[a.FRAME,s.FRAME],[a.FRAMESET,s.FRAMESET],[a.H1,s.H1],[a.H2,s.H2],[a.H3,s.H3],[a.H4,s.H4],[a.H5,s.H5],[a.H6,s.H6],[a.HEAD,s.HEAD],[a.HEADER,s.HEADER],[a.HGROUP,s.HGROUP],[a.HR,s.HR],[a.HTML,s.HTML],[a.I,s.I],[a.IMG,s.IMG],[a.IMAGE,s.IMAGE],[a.INPUT,s.INPUT],[a.IFRAME,s.IFRAME],[a.KEYGEN,s.KEYGEN],[a.LABEL,s.LABEL],[a.LI,s.LI],[a.LINK,s.LINK],[a.LISTING,s.LISTING],[a.MAIN,s.MAIN],[a.MALIGNMARK,s.MALIGNMARK],[a.MARQUEE,s.MARQUEE],[a.MATH,s.MATH],[a.MENU,s.MENU],[a.META,s.META],[a.MGLYPH,s.MGLYPH],[a.MI,s.MI],[a.MO,s.MO],[a.MN,s.MN],[a.MS,s.MS],[a.MTEXT,s.MTEXT],[a.NAV,s.NAV],[a.NOBR,s.NOBR],[a.NOFRAMES,s.NOFRAMES],[a.NOEMBED,s.NOEMBED],[a.NOSCRIPT,s.NOSCRIPT],[a.OBJECT,s.OBJECT],[a.OL,s.OL],[a.OPTGROUP,s.OPTGROUP],[a.OPTION,s.OPTION],[a.P,s.P],[a.PARAM,s.PARAM],[a.PLAINTEXT,s.PLAINTEXT],[a.PRE,s.PRE],[a.RB,s.RB],[a.RP,s.RP],[a.RT,s.RT],[a.RTC,s.RTC],[a.RUBY,s.RUBY],[a.S,s.S],[a.SCRIPT,s.SCRIPT],[a.SEARCH,s.SEARCH],[a.SECTION,s.SECTION],[a.SELECT,s.SELECT],[a.SOURCE,s.SOURCE],[a.SMALL,s.SMALL],[a.SPAN,s.SPAN],[a.STRIKE,s.STRIKE],[a.STRONG,s.STRONG],[a.STYLE,s.STYLE],[a.SUB,s.SUB],[a.SUMMARY,s.SUMMARY],[a.SUP,s.SUP],[a.TABLE,s.TABLE],[a.TBODY,s.TBODY],[a.TEMPLATE,s.TEMPLATE],[a.TEXTAREA,s.TEXTAREA],[a.TFOOT,s.TFOOT],[a.TD,s.TD],[a.TH,s.TH],[a.THEAD,s.THEAD],[a.TITLE,s.TITLE],[a.TR,s.TR],[a.TRACK,s.TRACK],[a.TT,s.TT],[a.U,s.U],[a.UL,s.UL],[a.SVG,s.SVG],[a.VAR,s.VAR],[a.WBR,s.WBR],[a.XMP,s.XMP]]);function o(e){var t;return null!=(t=r.get(e))?t:s.UNKNOWN}let l=s,c={[t.HTML]:new Set([l.ADDRESS,l.APPLET,l.AREA,l.ARTICLE,l.ASIDE,l.BASE,l.BASEFONT,l.BGSOUND,l.BLOCKQUOTE,l.BODY,l.BR,l.BUTTON,l.CAPTION,l.CENTER,l.COL,l.COLGROUP,l.DD,l.DETAILS,l.DIR,l.DIV,l.DL,l.DT,l.EMBED,l.FIELDSET,l.FIGCAPTION,l.FIGURE,l.FOOTER,l.FORM,l.FRAME,l.FRAMESET,l.H1,l.H2,l.H3,l.H4,l.H5,l.H6,l.HEAD,l.HEADER,l.HGROUP,l.HR,l.HTML,l.IFRAME,l.IMG,l.INPUT,l.LI,l.LINK,l.LISTING,l.MAIN,l.MARQUEE,l.MENU,l.META,l.NAV,l.NOEMBED,l.NOFRAMES,l.NOSCRIPT,l.OBJECT,l.OL,l.P,l.PARAM,l.PLAINTEXT,l.PRE,l.SCRIPT,l.SECTION,l.SELECT,l.SOURCE,l.STYLE,l.SUMMARY,l.TABLE,l.TBODY,l.TD,l.TEMPLATE,l.TEXTAREA,l.TFOOT,l.TH,l.THEAD,l.TITLE,l.TR,l.TRACK,l.UL,l.WBR,l.XMP]),[t.MATHML]:new Set([l.MI,l.MO,l.MN,l.MS,l.MTEXT,l.ANNOTATION_XML]),[t.SVG]:new Set([l.TITLE,l.FOREIGN_OBJECT,l.DESC]),[t.XLINK]:new Set,[t.XML]:new Set,[t.XMLNS]:new Set},u=new Set([l.H1,l.H2,l.H3,l.H4,l.H5,l.H6]),d=new Set([a.STYLE,a.SCRIPT,a.XMP,a.IFRAME,a.NOEMBED,a.NOFRAMES,a.PLAINTEXT]);function h(e,t){return d.has(e)||t&&e===a.NOSCRIPT}},181991:e=>{"use strict";e.s({Tokenizer:()=>f,TokenizerMode:()=>c});var t,n=e.i(236944),i=e.i(89441),a=e.i(858284);e.i(706747);var s=e.i(23755),r=e.i(14887),o=e.i(943655),l=e.i(195083);!function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=72]="AMBIGUOUS_AMPERSAND"}(t||(t={}));let c={DATA:t.DATA,RCDATA:t.RCDATA,RAWTEXT:t.RAWTEXT,SCRIPT_DATA:t.SCRIPT_DATA,PLAINTEXT:t.PLAINTEXT,CDATA_SECTION:t.CDATA_SECTION};function u(e){return e>=i.CODE_POINTS.LATIN_CAPITAL_A&&e<=i.CODE_POINTS.LATIN_CAPITAL_Z}function d(e){return e>=i.CODE_POINTS.LATIN_SMALL_A&&e<=i.CODE_POINTS.LATIN_SMALL_Z||u(e)}function h(e){return d(e)||e>=i.CODE_POINTS.DIGIT_0&&e<=i.CODE_POINTS.DIGIT_9}function p(e){return e===i.CODE_POINTS.SPACE||e===i.CODE_POINTS.LINE_FEED||e===i.CODE_POINTS.TABULATION||e===i.CODE_POINTS.FORM_FEED}function m(e){return p(e)||e===i.CODE_POINTS.SOLIDUS||e===i.CODE_POINTS.GREATER_THAN_SIGN}class f{_err(e){var t,n;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;null==(n=(t=this.handler).onParseError)||n.call(t,this.preprocessor.getError(e,i))}getCurrentLocation(e){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-e,startOffset:this.preprocessor.offset-e,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;let e=this._consume();this._ensureHibernation()||this._callState(e)}this.inLoop=!1}}pause(){this.paused=!0}resume(e){if(!this.paused)throw Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||null==e||e())}write(e,t,n){this.active=!0,this.preprocessor.write(e,t),this._runParsingLoop(),this.paused||null==n||n()}insertHtmlAtCurrentPos(e){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(e),this._runParsingLoop()}_ensureHibernation(){return!!this.preprocessor.endOfChunkHit&&(this.preprocessor.retreat(this.consumedAfterSnapshot),this.consumedAfterSnapshot=0,this.active=!1,!0)}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_advanceBy(e){this.consumedAfterSnapshot+=e;for(let t=0;t<e;t++)this.preprocessor.advance()}_consumeSequenceIfMatch(e,t){return!!this.preprocessor.startsWith(e,t)&&(this._advanceBy(e.length-1),!0)}_createStartTagToken(){this.currentToken={type:a.TokenType.START_TAG,tagName:"",tagID:l.TAG_ID.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:a.TokenType.END_TAG,tagName:"",tagID:l.TAG_ID.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(e){this.currentToken={type:a.TokenType.COMMENT,data:"",location:this.getCurrentLocation(e)}}_createDoctypeToken(e){this.currentToken={type:a.TokenType.DOCTYPE,name:e,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(e,t){this.currentCharacterToken={type:e,chars:t,location:this.currentLocation}}_createAttr(e){this.currentAttr={name:e,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var e,t;let n=this.currentToken;null===(0,a.getTokenAttr)(n,this.currentAttr.name)?(n.attrs.push(this.currentAttr),n.location&&this.currentLocation&&((null!=(e=(t=n.location).attrs)?e:t.attrs=Object.create(null))[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue())):this._err(o.ERR.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(e){this._emitCurrentCharacterToken(e.location),this.currentToken=null,e.location&&(e.location.endLine=this.preprocessor.line,e.location.endCol=this.preprocessor.col+1,e.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){let e=this.currentToken;this.prepareToken(e),e.tagID=(0,l.getTagID)(e.tagName),e.type===a.TokenType.START_TAG?(this.lastStartTagName=e.tagName,this.handler.onStartTag(e)):(e.attrs.length>0&&this._err(o.ERR.endTagWithAttributes),e.selfClosing&&this._err(o.ERR.endTagWithTrailingSolidus),this.handler.onEndTag(e)),this.preprocessor.dropParsedChunk()}emitCurrentComment(e){this.prepareToken(e),this.handler.onComment(e),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(e){this.prepareToken(e),this.handler.onDoctype(e),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(e){if(this.currentCharacterToken){switch(e&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=e.startLine,this.currentCharacterToken.location.endCol=e.startCol,this.currentCharacterToken.location.endOffset=e.startOffset),this.currentCharacterToken.type){case a.TokenType.CHARACTER:this.handler.onCharacter(this.currentCharacterToken);break;case a.TokenType.NULL_CHARACTER:this.handler.onNullCharacter(this.currentCharacterToken);break;case a.TokenType.WHITESPACE_CHARACTER:this.handler.onWhitespaceCharacter(this.currentCharacterToken)}this.currentCharacterToken=null}}_emitEOFToken(){let e=this.getCurrentLocation(0);e&&(e.endLine=e.startLine,e.endCol=e.startCol,e.endOffset=e.startOffset),this._emitCurrentCharacterToken(e),this.handler.onEof({type:a.TokenType.EOF,location:e}),this.active=!1}_appendCharToCurrentCharacterToken(e,t){if(this.currentCharacterToken)if(this.currentCharacterToken.type===e){this.currentCharacterToken.chars+=t;return}else this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();this._createCharacterToken(e,t)}_emitCodePoint(e){let t=p(e)?a.TokenType.WHITESPACE_CHARACTER:e===i.CODE_POINTS.NULL?a.TokenType.NULL_CHARACTER:a.TokenType.CHARACTER;this._appendCharToCurrentCharacterToken(t,String.fromCodePoint(e))}_emitChars(e){this._appendCharToCurrentCharacterToken(a.TokenType.CHARACTER,e)}_startCharacterReference(){this.returnState=this.state,this.state=t.CHARACTER_REFERENCE,this.entityStartPos=this.preprocessor.pos,this.entityDecoder.startEntity(this._isCharacterReferenceInAttribute()?r.DecodingMode.Attribute:r.DecodingMode.Legacy)}_isCharacterReferenceInAttribute(){return this.returnState===t.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===t.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===t.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(e){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(e):this._emitCodePoint(e)}_callState(e){switch(this.state){case t.DATA:this._stateData(e);break;case t.RCDATA:this._stateRcdata(e);break;case t.RAWTEXT:this._stateRawtext(e);break;case t.SCRIPT_DATA:this._stateScriptData(e);break;case t.PLAINTEXT:this._statePlaintext(e);break;case t.TAG_OPEN:this._stateTagOpen(e);break;case t.END_TAG_OPEN:this._stateEndTagOpen(e);break;case t.TAG_NAME:this._stateTagName(e);break;case t.RCDATA_LESS_THAN_SIGN:this._stateRcdataLessThanSign(e);break;case t.RCDATA_END_TAG_OPEN:this._stateRcdataEndTagOpen(e);break;case t.RCDATA_END_TAG_NAME:this._stateRcdataEndTagName(e);break;case t.RAWTEXT_LESS_THAN_SIGN:this._stateRawtextLessThanSign(e);break;case t.RAWTEXT_END_TAG_OPEN:this._stateRawtextEndTagOpen(e);break;case t.RAWTEXT_END_TAG_NAME:this._stateRawtextEndTagName(e);break;case t.SCRIPT_DATA_LESS_THAN_SIGN:this._stateScriptDataLessThanSign(e);break;case t.SCRIPT_DATA_END_TAG_OPEN:this._stateScriptDataEndTagOpen(e);break;case t.SCRIPT_DATA_END_TAG_NAME:this._stateScriptDataEndTagName(e);break;case t.SCRIPT_DATA_ESCAPE_START:this._stateScriptDataEscapeStart(e);break;case t.SCRIPT_DATA_ESCAPE_START_DASH:this._stateScriptDataEscapeStartDash(e);break;case t.SCRIPT_DATA_ESCAPED:this._stateScriptDataEscaped(e);break;case t.SCRIPT_DATA_ESCAPED_DASH:this._stateScriptDataEscapedDash(e);break;case t.SCRIPT_DATA_ESCAPED_DASH_DASH:this._stateScriptDataEscapedDashDash(e);break;case t.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:this._stateScriptDataEscapedLessThanSign(e);break;case t.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:this._stateScriptDataEscapedEndTagOpen(e);break;case t.SCRIPT_DATA_ESCAPED_END_TAG_NAME:this._stateScriptDataEscapedEndTagName(e);break;case t.SCRIPT_DATA_DOUBLE_ESCAPE_START:this._stateScriptDataDoubleEscapeStart(e);break;case t.SCRIPT_DATA_DOUBLE_ESCAPED:this._stateScriptDataDoubleEscaped(e);break;case t.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:this._stateScriptDataDoubleEscapedDash(e);break;case t.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:this._stateScriptDataDoubleEscapedDashDash(e);break;case t.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:this._stateScriptDataDoubleEscapedLessThanSign(e);break;case t.SCRIPT_DATA_DOUBLE_ESCAPE_END:this._stateScriptDataDoubleEscapeEnd(e);break;case t.BEFORE_ATTRIBUTE_NAME:this._stateBeforeAttributeName(e);break;case t.ATTRIBUTE_NAME:this._stateAttributeName(e);break;case t.AFTER_ATTRIBUTE_NAME:this._stateAfterAttributeName(e);break;case t.BEFORE_ATTRIBUTE_VALUE:this._stateBeforeAttributeValue(e);break;case t.ATTRIBUTE_VALUE_DOUBLE_QUOTED:this._stateAttributeValueDoubleQuoted(e);break;case t.ATTRIBUTE_VALUE_SINGLE_QUOTED:this._stateAttributeValueSingleQuoted(e);break;case t.ATTRIBUTE_VALUE_UNQUOTED:this._stateAttributeValueUnquoted(e);break;case t.AFTER_ATTRIBUTE_VALUE_QUOTED:this._stateAfterAttributeValueQuoted(e);break;case t.SELF_CLOSING_START_TAG:this._stateSelfClosingStartTag(e);break;case t.BOGUS_COMMENT:this._stateBogusComment(e);break;case t.MARKUP_DECLARATION_OPEN:this._stateMarkupDeclarationOpen(e);break;case t.COMMENT_START:this._stateCommentStart(e);break;case t.COMMENT_START_DASH:this._stateCommentStartDash(e);break;case t.COMMENT:this._stateComment(e);break;case t.COMMENT_LESS_THAN_SIGN:this._stateCommentLessThanSign(e);break;case t.COMMENT_LESS_THAN_SIGN_BANG:this._stateCommentLessThanSignBang(e);break;case t.COMMENT_LESS_THAN_SIGN_BANG_DASH:this._stateCommentLessThanSignBangDash(e);break;case t.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:this._stateCommentLessThanSignBangDashDash(e);break;case t.COMMENT_END_DASH:this._stateCommentEndDash(e);break;case t.COMMENT_END:this._stateCommentEnd(e);break;case t.COMMENT_END_BANG:this._stateCommentEndBang(e);break;case t.DOCTYPE:this._stateDoctype(e);break;case t.BEFORE_DOCTYPE_NAME:this._stateBeforeDoctypeName(e);break;case t.DOCTYPE_NAME:this._stateDoctypeName(e);break;case t.AFTER_DOCTYPE_NAME:this._stateAfterDoctypeName(e);break;case t.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._stateAfterDoctypePublicKeyword(e);break;case t.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:this._stateBeforeDoctypePublicIdentifier(e);break;case t.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:this._stateDoctypePublicIdentifierDoubleQuoted(e);break;case t.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:this._stateDoctypePublicIdentifierSingleQuoted(e);break;case t.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:this._stateAfterDoctypePublicIdentifier(e);break;case t.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:this._stateBetweenDoctypePublicAndSystemIdentifiers(e);break;case t.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._stateAfterDoctypeSystemKeyword(e);break;case t.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:this._stateBeforeDoctypeSystemIdentifier(e);break;case t.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:this._stateDoctypeSystemIdentifierDoubleQuoted(e);break;case t.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:this._stateDoctypeSystemIdentifierSingleQuoted(e);break;case t.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:this._stateAfterDoctypeSystemIdentifier(e);break;case t.BOGUS_DOCTYPE:this._stateBogusDoctype(e);break;case t.CDATA_SECTION:this._stateCdataSection(e);break;case t.CDATA_SECTION_BRACKET:this._stateCdataSectionBracket(e);break;case t.CDATA_SECTION_END:this._stateCdataSectionEnd(e);break;case t.CHARACTER_REFERENCE:this._stateCharacterReference();break;case t.AMBIGUOUS_AMPERSAND:this._stateAmbiguousAmpersand(e);break;default:throw Error("Unknown state")}}_stateData(e){switch(e){case i.CODE_POINTS.LESS_THAN_SIGN:this.state=t.TAG_OPEN;break;case i.CODE_POINTS.AMPERSAND:this._startCharacterReference();break;case i.CODE_POINTS.NULL:this._err(o.ERR.unexpectedNullCharacter),this._emitCodePoint(e);break;case i.CODE_POINTS.EOF:this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateRcdata(e){switch(e){case i.CODE_POINTS.AMPERSAND:this._startCharacterReference();break;case i.CODE_POINTS.LESS_THAN_SIGN:this.state=t.RCDATA_LESS_THAN_SIGN;break;case i.CODE_POINTS.NULL:this._err(o.ERR.unexpectedNullCharacter),this._emitChars(i.REPLACEMENT_CHARACTER);break;case i.CODE_POINTS.EOF:this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateRawtext(e){switch(e){case i.CODE_POINTS.LESS_THAN_SIGN:this.state=t.RAWTEXT_LESS_THAN_SIGN;break;case i.CODE_POINTS.NULL:this._err(o.ERR.unexpectedNullCharacter),this._emitChars(i.REPLACEMENT_CHARACTER);break;case i.CODE_POINTS.EOF:this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateScriptData(e){switch(e){case i.CODE_POINTS.LESS_THAN_SIGN:this.state=t.SCRIPT_DATA_LESS_THAN_SIGN;break;case i.CODE_POINTS.NULL:this._err(o.ERR.unexpectedNullCharacter),this._emitChars(i.REPLACEMENT_CHARACTER);break;case i.CODE_POINTS.EOF:this._emitEOFToken();break;default:this._emitCodePoint(e)}}_statePlaintext(e){switch(e){case i.CODE_POINTS.NULL:this._err(o.ERR.unexpectedNullCharacter),this._emitChars(i.REPLACEMENT_CHARACTER);break;case i.CODE_POINTS.EOF:this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateTagOpen(e){if(d(e))this._createStartTagToken(),this.state=t.TAG_NAME,this._stateTagName(e);else switch(e){case i.CODE_POINTS.EXCLAMATION_MARK:this.state=t.MARKUP_DECLARATION_OPEN;break;case i.CODE_POINTS.SOLIDUS:this.state=t.END_TAG_OPEN;break;case i.CODE_POINTS.QUESTION_MARK:this._err(o.ERR.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=t.BOGUS_COMMENT,this._stateBogusComment(e);break;case i.CODE_POINTS.EOF:this._err(o.ERR.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break;default:this._err(o.ERR.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=t.DATA,this._stateData(e)}}_stateEndTagOpen(e){if(d(e))this._createEndTagToken(),this.state=t.TAG_NAME,this._stateTagName(e);else switch(e){case i.CODE_POINTS.GREATER_THAN_SIGN:this._err(o.ERR.missingEndTagName),this.state=t.DATA;break;case i.CODE_POINTS.EOF:this._err(o.ERR.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break;default:this._err(o.ERR.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=t.BOGUS_COMMENT,this._stateBogusComment(e)}}_stateTagName(e){let n=this.currentToken;switch(e){case i.CODE_POINTS.SPACE:case i.CODE_POINTS.LINE_FEED:case i.CODE_POINTS.TABULATION:case i.CODE_POINTS.FORM_FEED:this.state=t.BEFORE_ATTRIBUTE_NAME;break;case i.CODE_POINTS.SOLIDUS:this.state=t.SELF_CLOSING_START_TAG;break;case i.CODE_POINTS.GREATER_THAN_SIGN:this.state=t.DATA,this.emitCurrentTagToken();break;case i.CODE_POINTS.NULL:this._err(o.ERR.unexpectedNullCharacter),n.tagName+=i.REPLACEMENT_CHARACTER;break;case i.CODE_POINTS.EOF:this._err(o.ERR.eofInTag),this._emitEOFToken();break;default:n.tagName+=String.fromCodePoint(u(e)?e+32:e)}}_stateRcdataLessThanSign(e){e===i.CODE_POINTS.SOLIDUS?this.state=t.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=t.RCDATA,this._stateRcdata(e))}_stateRcdataEndTagOpen(e){d(e)?(this.state=t.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(e)):(this._emitChars("</"),this.state=t.RCDATA,this._stateRcdata(e))}handleSpecialEndTag(e){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();switch(this._createEndTagToken(),this.currentToken.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case i.CODE_POINTS.SPACE:case i.CODE_POINTS.LINE_FEED:case i.CODE_POINTS.TABULATION:case i.CODE_POINTS.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=t.BEFORE_ATTRIBUTE_NAME,!1;case i.CODE_POINTS.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=t.SELF_CLOSING_START_TAG,!1;case i.CODE_POINTS.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=t.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=t.RCDATA,this._stateRcdata(e))}_stateRawtextLessThanSign(e){e===i.CODE_POINTS.SOLIDUS?this.state=t.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=t.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagOpen(e){d(e)?(this.state=t.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(e)):(this._emitChars("</"),this.state=t.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=t.RAWTEXT,this._stateRawtext(e))}_stateScriptDataLessThanSign(e){switch(e){case i.CODE_POINTS.SOLIDUS:this.state=t.SCRIPT_DATA_END_TAG_OPEN;break;case i.CODE_POINTS.EXCLAMATION_MARK:this.state=t.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break;default:this._emitChars("<"),this.state=t.SCRIPT_DATA,this._stateScriptData(e)}}_stateScriptDataEndTagOpen(e){d(e)?(this.state=t.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(e)):(this._emitChars("</"),this.state=t.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=t.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStart(e){e===i.CODE_POINTS.HYPHEN_MINUS?(this.state=t.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=t.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStartDash(e){e===i.CODE_POINTS.HYPHEN_MINUS?(this.state=t.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=t.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscaped(e){switch(e){case i.CODE_POINTS.HYPHEN_MINUS:this.state=t.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break;case i.CODE_POINTS.LESS_THAN_SIGN:this.state=t.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break;case i.CODE_POINTS.NULL:this._err(o.ERR.unexpectedNullCharacter),this._emitChars(i.REPLACEMENT_CHARACTER);break;case i.CODE_POINTS.EOF:this._err(o.ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateScriptDataEscapedDash(e){switch(e){case i.CODE_POINTS.HYPHEN_MINUS:this.state=t.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break;case i.CODE_POINTS.LESS_THAN_SIGN:this.state=t.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break;case i.CODE_POINTS.NULL:this._err(o.ERR.unexpectedNullCharacter),this.state=t.SCRIPT_DATA_ESCAPED,this._emitChars(i.REPLACEMENT_CHARACTER);break;case i.CODE_POINTS.EOF:this._err(o.ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this.state=t.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedDashDash(e){switch(e){case i.CODE_POINTS.HYPHEN_MINUS:this._emitChars("-");break;case i.CODE_POINTS.LESS_THAN_SIGN:this.state=t.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break;case i.CODE_POINTS.GREATER_THAN_SIGN:this.state=t.SCRIPT_DATA,this._emitChars(">");break;case i.CODE_POINTS.NULL:this._err(o.ERR.unexpectedNullCharacter),this.state=t.SCRIPT_DATA_ESCAPED,this._emitChars(i.REPLACEMENT_CHARACTER);break;case i.CODE_POINTS.EOF:this._err(o.ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this.state=t.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedLessThanSign(e){e===i.CODE_POINTS.SOLIDUS?this.state=t.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:d(e)?(this._emitChars("<"),this.state=t.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(e)):(this._emitChars("<"),this.state=t.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagOpen(e){d(e)?(this.state=t.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(e)):(this._emitChars("</"),this.state=t.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=t.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscapeStart(e){if(this.preprocessor.startsWith(i.SEQUENCES.SCRIPT,!1)&&m(this.preprocessor.peek(i.SEQUENCES.SCRIPT.length))){this._emitCodePoint(e);for(let e=0;e<i.SEQUENCES.SCRIPT.length;e++)this._emitCodePoint(this._consume());this.state=t.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=t.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscaped(e){switch(e){case i.CODE_POINTS.HYPHEN_MINUS:this.state=t.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break;case i.CODE_POINTS.LESS_THAN_SIGN:this.state=t.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break;case i.CODE_POINTS.NULL:this._err(o.ERR.unexpectedNullCharacter),this._emitChars(i.REPLACEMENT_CHARACTER);break;case i.CODE_POINTS.EOF:this._err(o.ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDash(e){switch(e){case i.CODE_POINTS.HYPHEN_MINUS:this.state=t.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break;case i.CODE_POINTS.LESS_THAN_SIGN:this.state=t.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break;case i.CODE_POINTS.NULL:this._err(o.ERR.unexpectedNullCharacter),this.state=t.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(i.REPLACEMENT_CHARACTER);break;case i.CODE_POINTS.EOF:this._err(o.ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this.state=t.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDashDash(e){switch(e){case i.CODE_POINTS.HYPHEN_MINUS:this._emitChars("-");break;case i.CODE_POINTS.LESS_THAN_SIGN:this.state=t.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break;case i.CODE_POINTS.GREATER_THAN_SIGN:this.state=t.SCRIPT_DATA,this._emitChars(">");break;case i.CODE_POINTS.NULL:this._err(o.ERR.unexpectedNullCharacter),this.state=t.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(i.REPLACEMENT_CHARACTER);break;case i.CODE_POINTS.EOF:this._err(o.ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this.state=t.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedLessThanSign(e){e===i.CODE_POINTS.SOLIDUS?(this.state=t.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=t.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateScriptDataDoubleEscapeEnd(e){if(this.preprocessor.startsWith(i.SEQUENCES.SCRIPT,!1)&&m(this.preprocessor.peek(i.SEQUENCES.SCRIPT.length))){this._emitCodePoint(e);for(let e=0;e<i.SEQUENCES.SCRIPT.length;e++)this._emitCodePoint(this._consume());this.state=t.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=t.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateBeforeAttributeName(e){switch(e){case i.CODE_POINTS.SPACE:case i.CODE_POINTS.LINE_FEED:case i.CODE_POINTS.TABULATION:case i.CODE_POINTS.FORM_FEED:break;case i.CODE_POINTS.SOLIDUS:case i.CODE_POINTS.GREATER_THAN_SIGN:case i.CODE_POINTS.EOF:this.state=t.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break;case i.CODE_POINTS.EQUALS_SIGN:this._err(o.ERR.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=t.ATTRIBUTE_NAME;break;default:this._createAttr(""),this.state=t.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateAttributeName(e){switch(e){case i.CODE_POINTS.SPACE:case i.CODE_POINTS.LINE_FEED:case i.CODE_POINTS.TABULATION:case i.CODE_POINTS.FORM_FEED:case i.CODE_POINTS.SOLIDUS:case i.CODE_POINTS.GREATER_THAN_SIGN:case i.CODE_POINTS.EOF:this._leaveAttrName(),this.state=t.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break;case i.CODE_POINTS.EQUALS_SIGN:this._leaveAttrName(),this.state=t.BEFORE_ATTRIBUTE_VALUE;break;case i.CODE_POINTS.QUOTATION_MARK:case i.CODE_POINTS.APOSTROPHE:case i.CODE_POINTS.LESS_THAN_SIGN:this._err(o.ERR.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(e);break;case i.CODE_POINTS.NULL:this._err(o.ERR.unexpectedNullCharacter),this.currentAttr.name+=i.REPLACEMENT_CHARACTER;break;default:this.currentAttr.name+=String.fromCodePoint(u(e)?e+32:e)}}_stateAfterAttributeName(e){switch(e){case i.CODE_POINTS.SPACE:case i.CODE_POINTS.LINE_FEED:case i.CODE_POINTS.TABULATION:case i.CODE_POINTS.FORM_FEED:break;case i.CODE_POINTS.SOLIDUS:this.state=t.SELF_CLOSING_START_TAG;break;case i.CODE_POINTS.EQUALS_SIGN:this.state=t.BEFORE_ATTRIBUTE_VALUE;break;case i.CODE_POINTS.GREATER_THAN_SIGN:this.state=t.DATA,this.emitCurrentTagToken();break;case i.CODE_POINTS.EOF:this._err(o.ERR.eofInTag),this._emitEOFToken();break;default:this._createAttr(""),this.state=t.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateBeforeAttributeValue(e){switch(e){case i.CODE_POINTS.SPACE:case i.CODE_POINTS.LINE_FEED:case i.CODE_POINTS.TABULATION:case i.CODE_POINTS.FORM_FEED:break;case i.CODE_POINTS.QUOTATION_MARK:this.state=t.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break;case i.CODE_POINTS.APOSTROPHE:this.state=t.ATTRIBUTE_VALUE_SINGLE_QUOTED;break;case i.CODE_POINTS.GREATER_THAN_SIGN:this._err(o.ERR.missingAttributeValue),this.state=t.DATA,this.emitCurrentTagToken();break;default:this.state=t.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(e)}}_stateAttributeValueDoubleQuoted(e){switch(e){case i.CODE_POINTS.QUOTATION_MARK:this.state=t.AFTER_ATTRIBUTE_VALUE_QUOTED;break;case i.CODE_POINTS.AMPERSAND:this._startCharacterReference();break;case i.CODE_POINTS.NULL:this._err(o.ERR.unexpectedNullCharacter),this.currentAttr.value+=i.REPLACEMENT_CHARACTER;break;case i.CODE_POINTS.EOF:this._err(o.ERR.eofInTag),this._emitEOFToken();break;default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueSingleQuoted(e){switch(e){case i.CODE_POINTS.APOSTROPHE:this.state=t.AFTER_ATTRIBUTE_VALUE_QUOTED;break;case i.CODE_POINTS.AMPERSAND:this._startCharacterReference();break;case i.CODE_POINTS.NULL:this._err(o.ERR.unexpectedNullCharacter),this.currentAttr.value+=i.REPLACEMENT_CHARACTER;break;case i.CODE_POINTS.EOF:this._err(o.ERR.eofInTag),this._emitEOFToken();break;default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueUnquoted(e){switch(e){case i.CODE_POINTS.SPACE:case i.CODE_POINTS.LINE_FEED:case i.CODE_POINTS.TABULATION:case i.CODE_POINTS.FORM_FEED:this._leaveAttrValue(),this.state=t.BEFORE_ATTRIBUTE_NAME;break;case i.CODE_POINTS.AMPERSAND:this._startCharacterReference();break;case i.CODE_POINTS.GREATER_THAN_SIGN:this._leaveAttrValue(),this.state=t.DATA,this.emitCurrentTagToken();break;case i.CODE_POINTS.NULL:this._err(o.ERR.unexpectedNullCharacter),this.currentAttr.value+=i.REPLACEMENT_CHARACTER;break;case i.CODE_POINTS.QUOTATION_MARK:case i.CODE_POINTS.APOSTROPHE:case i.CODE_POINTS.LESS_THAN_SIGN:case i.CODE_POINTS.EQUALS_SIGN:case i.CODE_POINTS.GRAVE_ACCENT:this._err(o.ERR.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(e);break;case i.CODE_POINTS.EOF:this._err(o.ERR.eofInTag),this._emitEOFToken();break;default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAfterAttributeValueQuoted(e){switch(e){case i.CODE_POINTS.SPACE:case i.CODE_POINTS.LINE_FEED:case i.CODE_POINTS.TABULATION:case i.CODE_POINTS.FORM_FEED:this._leaveAttrValue(),this.state=t.BEFORE_ATTRIBUTE_NAME;break;case i.CODE_POINTS.SOLIDUS:this._leaveAttrValue(),this.state=t.SELF_CLOSING_START_TAG;break;case i.CODE_POINTS.GREATER_THAN_SIGN:this._leaveAttrValue(),this.state=t.DATA,this.emitCurrentTagToken();break;case i.CODE_POINTS.EOF:this._err(o.ERR.eofInTag),this._emitEOFToken();break;default:this._err(o.ERR.missingWhitespaceBetweenAttributes),this.state=t.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateSelfClosingStartTag(e){switch(e){case i.CODE_POINTS.GREATER_THAN_SIGN:this.currentToken.selfClosing=!0,this.state=t.DATA,this.emitCurrentTagToken();break;case i.CODE_POINTS.EOF:this._err(o.ERR.eofInTag),this._emitEOFToken();break;default:this._err(o.ERR.unexpectedSolidusInTag),this.state=t.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateBogusComment(e){let n=this.currentToken;switch(e){case i.CODE_POINTS.GREATER_THAN_SIGN:this.state=t.DATA,this.emitCurrentComment(n);break;case i.CODE_POINTS.EOF:this.emitCurrentComment(n),this._emitEOFToken();break;case i.CODE_POINTS.NULL:this._err(o.ERR.unexpectedNullCharacter),n.data+=i.REPLACEMENT_CHARACTER;break;default:n.data+=String.fromCodePoint(e)}}_stateMarkupDeclarationOpen(e){this._consumeSequenceIfMatch(i.SEQUENCES.DASH_DASH,!0)?(this._createCommentToken(i.SEQUENCES.DASH_DASH.length+1),this.state=t.COMMENT_START):this._consumeSequenceIfMatch(i.SEQUENCES.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(i.SEQUENCES.DOCTYPE.length+1),this.state=t.DOCTYPE):this._consumeSequenceIfMatch(i.SEQUENCES.CDATA_START,!0)?this.inForeignNode?this.state=t.CDATA_SECTION:(this._err(o.ERR.cdataInHtmlContent),this._createCommentToken(i.SEQUENCES.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=t.BOGUS_COMMENT):this._ensureHibernation()||(this._err(o.ERR.incorrectlyOpenedComment),this._createCommentToken(2),this.state=t.BOGUS_COMMENT,this._stateBogusComment(e))}_stateCommentStart(e){switch(e){case i.CODE_POINTS.HYPHEN_MINUS:this.state=t.COMMENT_START_DASH;break;case i.CODE_POINTS.GREATER_THAN_SIGN:{this._err(o.ERR.abruptClosingOfEmptyComment),this.state=t.DATA;let e=this.currentToken;this.emitCurrentComment(e);break}default:this.state=t.COMMENT,this._stateComment(e)}}_stateCommentStartDash(e){let n=this.currentToken;switch(e){case i.CODE_POINTS.HYPHEN_MINUS:this.state=t.COMMENT_END;break;case i.CODE_POINTS.GREATER_THAN_SIGN:this._err(o.ERR.abruptClosingOfEmptyComment),this.state=t.DATA,this.emitCurrentComment(n);break;case i.CODE_POINTS.EOF:this._err(o.ERR.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break;default:n.data+="-",this.state=t.COMMENT,this._stateComment(e)}}_stateComment(e){let n=this.currentToken;switch(e){case i.CODE_POINTS.HYPHEN_MINUS:this.state=t.COMMENT_END_DASH;break;case i.CODE_POINTS.LESS_THAN_SIGN:n.data+="<",this.state=t.COMMENT_LESS_THAN_SIGN;break;case i.CODE_POINTS.NULL:this._err(o.ERR.unexpectedNullCharacter),n.data+=i.REPLACEMENT_CHARACTER;break;case i.CODE_POINTS.EOF:this._err(o.ERR.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break;default:n.data+=String.fromCodePoint(e)}}_stateCommentLessThanSign(e){let n=this.currentToken;switch(e){case i.CODE_POINTS.EXCLAMATION_MARK:n.data+="!",this.state=t.COMMENT_LESS_THAN_SIGN_BANG;break;case i.CODE_POINTS.LESS_THAN_SIGN:n.data+="<";break;default:this.state=t.COMMENT,this._stateComment(e)}}_stateCommentLessThanSignBang(e){e===i.CODE_POINTS.HYPHEN_MINUS?this.state=t.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=t.COMMENT,this._stateComment(e))}_stateCommentLessThanSignBangDash(e){e===i.CODE_POINTS.HYPHEN_MINUS?this.state=t.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=t.COMMENT_END_DASH,this._stateCommentEndDash(e))}_stateCommentLessThanSignBangDashDash(e){e!==i.CODE_POINTS.GREATER_THAN_SIGN&&e!==i.CODE_POINTS.EOF&&this._err(o.ERR.nestedComment),this.state=t.COMMENT_END,this._stateCommentEnd(e)}_stateCommentEndDash(e){let n=this.currentToken;switch(e){case i.CODE_POINTS.HYPHEN_MINUS:this.state=t.COMMENT_END;break;case i.CODE_POINTS.EOF:this._err(o.ERR.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break;default:n.data+="-",this.state=t.COMMENT,this._stateComment(e)}}_stateCommentEnd(e){let n=this.currentToken;switch(e){case i.CODE_POINTS.GREATER_THAN_SIGN:this.state=t.DATA,this.emitCurrentComment(n);break;case i.CODE_POINTS.EXCLAMATION_MARK:this.state=t.COMMENT_END_BANG;break;case i.CODE_POINTS.HYPHEN_MINUS:n.data+="-";break;case i.CODE_POINTS.EOF:this._err(o.ERR.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break;default:n.data+="--",this.state=t.COMMENT,this._stateComment(e)}}_stateCommentEndBang(e){let n=this.currentToken;switch(e){case i.CODE_POINTS.HYPHEN_MINUS:n.data+="--!",this.state=t.COMMENT_END_DASH;break;case i.CODE_POINTS.GREATER_THAN_SIGN:this._err(o.ERR.incorrectlyClosedComment),this.state=t.DATA,this.emitCurrentComment(n);break;case i.CODE_POINTS.EOF:this._err(o.ERR.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break;default:n.data+="--!",this.state=t.COMMENT,this._stateComment(e)}}_stateDoctype(e){switch(e){case i.CODE_POINTS.SPACE:case i.CODE_POINTS.LINE_FEED:case i.CODE_POINTS.TABULATION:case i.CODE_POINTS.FORM_FEED:this.state=t.BEFORE_DOCTYPE_NAME;break;case i.CODE_POINTS.GREATER_THAN_SIGN:this.state=t.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e);break;case i.CODE_POINTS.EOF:{this._err(o.ERR.eofInDoctype),this._createDoctypeToken(null);let e=this.currentToken;e.forceQuirks=!0,this.emitCurrentDoctype(e),this._emitEOFToken();break}default:this._err(o.ERR.missingWhitespaceBeforeDoctypeName),this.state=t.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e)}}_stateBeforeDoctypeName(e){if(u(e))this._createDoctypeToken(String.fromCharCode(e+32)),this.state=t.DOCTYPE_NAME;else switch(e){case i.CODE_POINTS.SPACE:case i.CODE_POINTS.LINE_FEED:case i.CODE_POINTS.TABULATION:case i.CODE_POINTS.FORM_FEED:break;case i.CODE_POINTS.NULL:this._err(o.ERR.unexpectedNullCharacter),this._createDoctypeToken(i.REPLACEMENT_CHARACTER),this.state=t.DOCTYPE_NAME;break;case i.CODE_POINTS.GREATER_THAN_SIGN:{this._err(o.ERR.missingDoctypeName),this._createDoctypeToken(null);let e=this.currentToken;e.forceQuirks=!0,this.emitCurrentDoctype(e),this.state=t.DATA;break}case i.CODE_POINTS.EOF:{this._err(o.ERR.eofInDoctype),this._createDoctypeToken(null);let e=this.currentToken;e.forceQuirks=!0,this.emitCurrentDoctype(e),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(e)),this.state=t.DOCTYPE_NAME}}_stateDoctypeName(e){let n=this.currentToken;switch(e){case i.CODE_POINTS.SPACE:case i.CODE_POINTS.LINE_FEED:case i.CODE_POINTS.TABULATION:case i.CODE_POINTS.FORM_FEED:this.state=t.AFTER_DOCTYPE_NAME;break;case i.CODE_POINTS.GREATER_THAN_SIGN:this.state=t.DATA,this.emitCurrentDoctype(n);break;case i.CODE_POINTS.NULL:this._err(o.ERR.unexpectedNullCharacter),n.name+=i.REPLACEMENT_CHARACTER;break;case i.CODE_POINTS.EOF:this._err(o.ERR.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break;default:n.name+=String.fromCodePoint(u(e)?e+32:e)}}_stateAfterDoctypeName(e){let n=this.currentToken;switch(e){case i.CODE_POINTS.SPACE:case i.CODE_POINTS.LINE_FEED:case i.CODE_POINTS.TABULATION:case i.CODE_POINTS.FORM_FEED:break;case i.CODE_POINTS.GREATER_THAN_SIGN:this.state=t.DATA,this.emitCurrentDoctype(n);break;case i.CODE_POINTS.EOF:this._err(o.ERR.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break;default:this._consumeSequenceIfMatch(i.SEQUENCES.PUBLIC,!1)?this.state=t.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(i.SEQUENCES.SYSTEM,!1)?this.state=t.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(o.ERR.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=t.BOGUS_DOCTYPE,this._stateBogusDoctype(e))}}_stateAfterDoctypePublicKeyword(e){let n=this.currentToken;switch(e){case i.CODE_POINTS.SPACE:case i.CODE_POINTS.LINE_FEED:case i.CODE_POINTS.TABULATION:case i.CODE_POINTS.FORM_FEED:this.state=t.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break;case i.CODE_POINTS.QUOTATION_MARK:this._err(o.ERR.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=t.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break;case i.CODE_POINTS.APOSTROPHE:this._err(o.ERR.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=t.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break;case i.CODE_POINTS.GREATER_THAN_SIGN:this._err(o.ERR.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=t.DATA,this.emitCurrentDoctype(n);break;case i.CODE_POINTS.EOF:this._err(o.ERR.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break;default:this._err(o.ERR.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=t.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypePublicIdentifier(e){let n=this.currentToken;switch(e){case i.CODE_POINTS.SPACE:case i.CODE_POINTS.LINE_FEED:case i.CODE_POINTS.TABULATION:case i.CODE_POINTS.FORM_FEED:break;case i.CODE_POINTS.QUOTATION_MARK:n.publicId="",this.state=t.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break;case i.CODE_POINTS.APOSTROPHE:n.publicId="",this.state=t.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break;case i.CODE_POINTS.GREATER_THAN_SIGN:this._err(o.ERR.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=t.DATA,this.emitCurrentDoctype(n);break;case i.CODE_POINTS.EOF:this._err(o.ERR.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break;default:this._err(o.ERR.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=t.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypePublicIdentifierDoubleQuoted(e){let n=this.currentToken;switch(e){case i.CODE_POINTS.QUOTATION_MARK:this.state=t.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break;case i.CODE_POINTS.NULL:this._err(o.ERR.unexpectedNullCharacter),n.publicId+=i.REPLACEMENT_CHARACTER;break;case i.CODE_POINTS.GREATER_THAN_SIGN:this._err(o.ERR.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=t.DATA;break;case i.CODE_POINTS.EOF:this._err(o.ERR.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break;default:n.publicId+=String.fromCodePoint(e)}}_stateDoctypePublicIdentifierSingleQuoted(e){let n=this.currentToken;switch(e){case i.CODE_POINTS.APOSTROPHE:this.state=t.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break;case i.CODE_POINTS.NULL:this._err(o.ERR.unexpectedNullCharacter),n.publicId+=i.REPLACEMENT_CHARACTER;break;case i.CODE_POINTS.GREATER_THAN_SIGN:this._err(o.ERR.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=t.DATA;break;case i.CODE_POINTS.EOF:this._err(o.ERR.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break;default:n.publicId+=String.fromCodePoint(e)}}_stateAfterDoctypePublicIdentifier(e){let n=this.currentToken;switch(e){case i.CODE_POINTS.SPACE:case i.CODE_POINTS.LINE_FEED:case i.CODE_POINTS.TABULATION:case i.CODE_POINTS.FORM_FEED:this.state=t.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break;case i.CODE_POINTS.GREATER_THAN_SIGN:this.state=t.DATA,this.emitCurrentDoctype(n);break;case i.CODE_POINTS.QUOTATION_MARK:this._err(o.ERR.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=t.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break;case i.CODE_POINTS.APOSTROPHE:this._err(o.ERR.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=t.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break;case i.CODE_POINTS.EOF:this._err(o.ERR.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break;default:this._err(o.ERR.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=t.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBetweenDoctypePublicAndSystemIdentifiers(e){let n=this.currentToken;switch(e){case i.CODE_POINTS.SPACE:case i.CODE_POINTS.LINE_FEED:case i.CODE_POINTS.TABULATION:case i.CODE_POINTS.FORM_FEED:break;case i.CODE_POINTS.GREATER_THAN_SIGN:this.emitCurrentDoctype(n),this.state=t.DATA;break;case i.CODE_POINTS.QUOTATION_MARK:n.systemId="",this.state=t.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break;case i.CODE_POINTS.APOSTROPHE:n.systemId="",this.state=t.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break;case i.CODE_POINTS.EOF:this._err(o.ERR.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break;default:this._err(o.ERR.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=t.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateAfterDoctypeSystemKeyword(e){let n=this.currentToken;switch(e){case i.CODE_POINTS.SPACE:case i.CODE_POINTS.LINE_FEED:case i.CODE_POINTS.TABULATION:case i.CODE_POINTS.FORM_FEED:this.state=t.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break;case i.CODE_POINTS.QUOTATION_MARK:this._err(o.ERR.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=t.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break;case i.CODE_POINTS.APOSTROPHE:this._err(o.ERR.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=t.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break;case i.CODE_POINTS.GREATER_THAN_SIGN:this._err(o.ERR.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=t.DATA,this.emitCurrentDoctype(n);break;case i.CODE_POINTS.EOF:this._err(o.ERR.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break;default:this._err(o.ERR.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=t.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypeSystemIdentifier(e){let n=this.currentToken;switch(e){case i.CODE_POINTS.SPACE:case i.CODE_POINTS.LINE_FEED:case i.CODE_POINTS.TABULATION:case i.CODE_POINTS.FORM_FEED:break;case i.CODE_POINTS.QUOTATION_MARK:n.systemId="",this.state=t.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break;case i.CODE_POINTS.APOSTROPHE:n.systemId="",this.state=t.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break;case i.CODE_POINTS.GREATER_THAN_SIGN:this._err(o.ERR.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=t.DATA,this.emitCurrentDoctype(n);break;case i.CODE_POINTS.EOF:this._err(o.ERR.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break;default:this._err(o.ERR.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=t.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypeSystemIdentifierDoubleQuoted(e){let n=this.currentToken;switch(e){case i.CODE_POINTS.QUOTATION_MARK:this.state=t.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break;case i.CODE_POINTS.NULL:this._err(o.ERR.unexpectedNullCharacter),n.systemId+=i.REPLACEMENT_CHARACTER;break;case i.CODE_POINTS.GREATER_THAN_SIGN:this._err(o.ERR.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=t.DATA;break;case i.CODE_POINTS.EOF:this._err(o.ERR.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break;default:n.systemId+=String.fromCodePoint(e)}}_stateDoctypeSystemIdentifierSingleQuoted(e){let n=this.currentToken;switch(e){case i.CODE_POINTS.APOSTROPHE:this.state=t.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break;case i.CODE_POINTS.NULL:this._err(o.ERR.unexpectedNullCharacter),n.systemId+=i.REPLACEMENT_CHARACTER;break;case i.CODE_POINTS.GREATER_THAN_SIGN:this._err(o.ERR.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=t.DATA;break;case i.CODE_POINTS.EOF:this._err(o.ERR.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break;default:n.systemId+=String.fromCodePoint(e)}}_stateAfterDoctypeSystemIdentifier(e){let n=this.currentToken;switch(e){case i.CODE_POINTS.SPACE:case i.CODE_POINTS.LINE_FEED:case i.CODE_POINTS.TABULATION:case i.CODE_POINTS.FORM_FEED:break;case i.CODE_POINTS.GREATER_THAN_SIGN:this.emitCurrentDoctype(n),this.state=t.DATA;break;case i.CODE_POINTS.EOF:this._err(o.ERR.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break;default:this._err(o.ERR.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=t.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBogusDoctype(e){let n=this.currentToken;switch(e){case i.CODE_POINTS.GREATER_THAN_SIGN:this.emitCurrentDoctype(n),this.state=t.DATA;break;case i.CODE_POINTS.NULL:this._err(o.ERR.unexpectedNullCharacter);break;case i.CODE_POINTS.EOF:this.emitCurrentDoctype(n),this._emitEOFToken()}}_stateCdataSection(e){switch(e){case i.CODE_POINTS.RIGHT_SQUARE_BRACKET:this.state=t.CDATA_SECTION_BRACKET;break;case i.CODE_POINTS.EOF:this._err(o.ERR.eofInCdata),this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateCdataSectionBracket(e){e===i.CODE_POINTS.RIGHT_SQUARE_BRACKET?this.state=t.CDATA_SECTION_END:(this._emitChars("]"),this.state=t.CDATA_SECTION,this._stateCdataSection(e))}_stateCdataSectionEnd(e){switch(e){case i.CODE_POINTS.GREATER_THAN_SIGN:this.state=t.DATA;break;case i.CODE_POINTS.RIGHT_SQUARE_BRACKET:this._emitChars("]");break;default:this._emitChars("]]"),this.state=t.CDATA_SECTION,this._stateCdataSection(e)}}_stateCharacterReference(){let e=this.entityDecoder.write(this.preprocessor.html,this.preprocessor.pos);if(e<0)if(this.preprocessor.lastChunkWritten)e=this.entityDecoder.end();else{this.active=!1,this.preprocessor.pos=this.preprocessor.html.length-1,this.consumedAfterSnapshot=0,this.preprocessor.endOfChunkHit=!0;return}0===e?(this.preprocessor.pos=this.entityStartPos,this._flushCodePointConsumedAsCharacterReference(i.CODE_POINTS.AMPERSAND),this.state=!this._isCharacterReferenceInAttribute()&&h(this.preprocessor.peek(1))?t.AMBIGUOUS_AMPERSAND:this.returnState):this.state=this.returnState}_stateAmbiguousAmpersand(e){h(e)?this._flushCodePointConsumedAsCharacterReference(e):(e===i.CODE_POINTS.SEMICOLON&&this._err(o.ERR.unknownNamedCharacterReference),this.state=this.returnState,this._callState(e))}constructor(e,a){this.options=e,this.handler=a,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=t.DATA,this.returnState=t.DATA,this.entityStartPos=0,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new n.Preprocessor(a),this.currentLocation=this.getCurrentLocation(-1),this.entityDecoder=new r.EntityDecoder(s.htmlDecodeTree,(e,t)=>{this.preprocessor.pos=this.entityStartPos+t-1,this._flushCodePointConsumedAsCharacterReference(e)},a.onParseError?{missingSemicolonAfterCharacterReference:()=>{this._err(o.ERR.missingSemicolonAfterCharacterReference,1)},absenceOfDigitsInNumericCharacterReference:e=>{this._err(o.ERR.absenceOfDigitsInNumericCharacterReference,this.entityStartPos-this.preprocessor.pos+e)},validateNumericCharacterReference:e=>{let t=function(e){if(e===i.CODE_POINTS.NULL)return o.ERR.nullCharacterReference;if(e>1114111)return o.ERR.characterReferenceOutsideUnicodeRange;if((0,i.isSurrogate)(e))return o.ERR.surrogateCharacterReference;if((0,i.isUndefinedCodePoint)(e))return o.ERR.noncharacterCharacterReference;if((0,i.isControlCodePoint)(e)||e===i.CODE_POINTS.CARRIAGE_RETURN)return o.ERR.controlCharacterReference;return null}(e);t&&this._err(t,1)}}:void 0)}}},751327:e=>{"use strict";e.s({OpenElementStack:()=>p});var t=e.i(195083);let n=new Set([t.TAG_ID.DD,t.TAG_ID.DT,t.TAG_ID.LI,t.TAG_ID.OPTGROUP,t.TAG_ID.OPTION,t.TAG_ID.P,t.TAG_ID.RB,t.TAG_ID.RP,t.TAG_ID.RT,t.TAG_ID.RTC]),i=new Set([...n,t.TAG_ID.CAPTION,t.TAG_ID.COLGROUP,t.TAG_ID.TBODY,t.TAG_ID.TD,t.TAG_ID.TFOOT,t.TAG_ID.TH,t.TAG_ID.THEAD,t.TAG_ID.TR]),a=new Set([t.TAG_ID.APPLET,t.TAG_ID.CAPTION,t.TAG_ID.HTML,t.TAG_ID.MARQUEE,t.TAG_ID.OBJECT,t.TAG_ID.TABLE,t.TAG_ID.TD,t.TAG_ID.TEMPLATE,t.TAG_ID.TH]),s=new Set([...a,t.TAG_ID.OL,t.TAG_ID.UL]),r=new Set([...a,t.TAG_ID.BUTTON]),o=new Set([t.TAG_ID.ANNOTATION_XML,t.TAG_ID.MI,t.TAG_ID.MN,t.TAG_ID.MO,t.TAG_ID.MS,t.TAG_ID.MTEXT]),l=new Set([t.TAG_ID.DESC,t.TAG_ID.FOREIGN_OBJECT,t.TAG_ID.TITLE]),c=new Set([t.TAG_ID.TR,t.TAG_ID.TEMPLATE,t.TAG_ID.HTML]),u=new Set([t.TAG_ID.TBODY,t.TAG_ID.TFOOT,t.TAG_ID.THEAD,t.TAG_ID.TEMPLATE,t.TAG_ID.HTML]),d=new Set([t.TAG_ID.TABLE,t.TAG_ID.TEMPLATE,t.TAG_ID.HTML]),h=new Set([t.TAG_ID.TD,t.TAG_ID.TH]);class p{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}_indexOf(e){return this.items.lastIndexOf(e,this.stackTop)}_isInTemplate(){return this.currentTagId===t.TAG_ID.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===t.NS.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(e,t){this.stackTop++,this.items[this.stackTop]=e,this.current=e,this.tagIDs[this.stackTop]=t,this.currentTagId=t,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(e,t,!0)}pop(){let e=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!0)}replace(e,t){let n=this._indexOf(e);this.items[n]=t,n===this.stackTop&&(this.current=t)}insertAfter(e,t,n){let i=this._indexOf(e)+1;this.items.splice(i,0,t),this.tagIDs.splice(i,0,n),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.current&&void 0!==this.currentTagId&&this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(e){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(e,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==t.NS.HTML)this.shortenToLength(Math.max(n,0))}shortenToLength(e){for(;this.stackTop>=e;){let t=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,this.stackTop<e)}}popUntilElementPopped(e){let t=this._indexOf(e);this.shortenToLength(Math.max(t,0))}popUntilPopped(e,t){let n=this._indexOfTagNames(e,t);this.shortenToLength(Math.max(n,0))}popUntilNumberedHeaderPopped(){this.popUntilPopped(t.NUMBERED_HEADERS,t.NS.HTML)}popUntilTableCellPopped(){this.popUntilPopped(h,t.NS.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(e,t){for(let n=this.stackTop;n>=0;n--)if(e.has(this.tagIDs[n])&&this.treeAdapter.getNamespaceURI(this.items[n])===t)return n;return -1}clearBackTo(e,t){let n=this._indexOfTagNames(e,t);this.shortenToLength(n+1)}clearBackToTableContext(){this.clearBackTo(d,t.NS.HTML)}clearBackToTableBodyContext(){this.clearBackTo(u,t.NS.HTML)}clearBackToTableRowContext(){this.clearBackTo(c,t.NS.HTML)}remove(e){let t=this._indexOf(e);t>=0&&(t===this.stackTop?this.pop():(this.items.splice(t,1),this.tagIDs.splice(t,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===t.TAG_ID.BODY?this.items[1]:null}contains(e){return this._indexOf(e)>-1}getCommonAncestor(e){let t=this._indexOf(e)-1;return t>=0?this.items[t]:null}isRootHtmlElementCurrent(){return 0===this.stackTop&&this.tagIDs[0]===t.TAG_ID.HTML}hasInDynamicScope(e,n){for(let i=this.stackTop;i>=0;i--){let a=this.tagIDs[i];switch(this.treeAdapter.getNamespaceURI(this.items[i])){case t.NS.HTML:if(a===e)return!0;if(n.has(a))return!1;break;case t.NS.SVG:if(l.has(a))return!1;break;case t.NS.MATHML:if(o.has(a))return!1}}return!0}hasInScope(e){return this.hasInDynamicScope(e,a)}hasInListItemScope(e){return this.hasInDynamicScope(e,s)}hasInButtonScope(e){return this.hasInDynamicScope(e,r)}hasNumberedHeaderInScope(){for(let e=this.stackTop;e>=0;e--){let n=this.tagIDs[e];switch(this.treeAdapter.getNamespaceURI(this.items[e])){case t.NS.HTML:if(t.NUMBERED_HEADERS.has(n))return!0;if(a.has(n))return!1;break;case t.NS.SVG:if(l.has(n))return!1;break;case t.NS.MATHML:if(o.has(n))return!1}}return!0}hasInTableScope(e){for(let n=this.stackTop;n>=0;n--)if(this.treeAdapter.getNamespaceURI(this.items[n])===t.NS.HTML)switch(this.tagIDs[n]){case e:return!0;case t.TAG_ID.TABLE:case t.TAG_ID.HTML:return!1}return!0}hasTableBodyContextInTableScope(){for(let e=this.stackTop;e>=0;e--)if(this.treeAdapter.getNamespaceURI(this.items[e])===t.NS.HTML)switch(this.tagIDs[e]){case t.TAG_ID.TBODY:case t.TAG_ID.THEAD:case t.TAG_ID.TFOOT:return!0;case t.TAG_ID.TABLE:case t.TAG_ID.HTML:return!1}return!0}hasInSelectScope(e){for(let n=this.stackTop;n>=0;n--)if(this.treeAdapter.getNamespaceURI(this.items[n])===t.NS.HTML)switch(this.tagIDs[n]){case e:return!0;case t.TAG_ID.OPTION:case t.TAG_ID.OPTGROUP:break;default:return!1}return!0}generateImpliedEndTags(){for(;void 0!==this.currentTagId&&n.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;void 0!==this.currentTagId&&i.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(e){for(;void 0!==this.currentTagId&&this.currentTagId!==e&&i.has(this.currentTagId);)this.pop()}constructor(e,n,i){this.treeAdapter=n,this.handler=i,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=t.TAG_ID.UNKNOWN,this.current=e}}},617984:e=>{"use strict";var t;e.s({EntryType:()=>t,FormattingElementList:()=>i}),!function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"}(t||(t={}));let n={type:t.Marker};class i{_getNoahArkConditionCandidates(e,n){let i=[],a=n.length,s=this.treeAdapter.getTagName(e),r=this.treeAdapter.getNamespaceURI(e);for(let e=0;e<this.entries.length;e++){let n=this.entries[e];if(n.type===t.Marker)break;let{element:o}=n;if(this.treeAdapter.getTagName(o)===s&&this.treeAdapter.getNamespaceURI(o)===r){let t=this.treeAdapter.getAttrList(o);t.length===a&&i.push({idx:e,attrs:t})}}return i}_ensureNoahArkCondition(e){if(this.entries.length<3)return;let t=this.treeAdapter.getAttrList(e),n=this._getNoahArkConditionCandidates(e,t);if(n.length<3)return;let i=new Map(t.map(e=>[e.name,e.value])),a=0;for(let e=0;e<n.length;e++){let t=n[e];t.attrs.every(e=>i.get(e.name)===e.value)&&(a+=1)>=3&&this.entries.splice(t.idx,1)}}insertMarker(){this.entries.unshift(n)}pushElement(e,n){this._ensureNoahArkCondition(e),this.entries.unshift({type:t.Element,element:e,token:n})}insertElementAfterBookmark(e,n){let i=this.entries.indexOf(this.bookmark);this.entries.splice(i,0,{type:t.Element,element:e,token:n})}removeEntry(e){let t=this.entries.indexOf(e);-1!==t&&this.entries.splice(t,1)}clearToLastMarker(){let e=this.entries.indexOf(n);-1===e?this.entries.length=0:this.entries.splice(0,e+1)}getElementEntryInScopeWithTagName(e){let n=this.entries.find(n=>n.type===t.Marker||this.treeAdapter.getTagName(n.element)===e);return n&&n.type===t.Element?n:null}getElementEntry(e){return this.entries.find(n=>n.type===t.Element&&n.element===e)}constructor(e){this.treeAdapter=e,this.entries=[],this.bookmark=null}}},692403:e=>{"use strict";e.s({defaultTreeAdapter:()=>n});var t=e.i(195083);let n={createDocument:()=>({nodeName:"#document",mode:t.DOCUMENT_MODE.NO_QUIRKS,childNodes:[]}),createDocumentFragment:()=>({nodeName:"#document-fragment",childNodes:[]}),createElement:(e,t,n)=>({nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}),createCommentNode:e=>({nodeName:"#comment",data:e,parentNode:null}),createTextNode:e=>({nodeName:"#text",value:e,parentNode:null}),appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){let i=e.childNodes.indexOf(n);e.childNodes.splice(i,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent:e=>e.content,setDocumentType(e,t,i,a){let s=e.childNodes.find(e=>"#documentType"===e.nodeName);s?(s.name=t,s.publicId=i,s.systemId=a):n.appendChild(e,{nodeName:"#documentType",name:t,publicId:i,systemId:a,parentNode:null})},setDocumentMode(e,t){e.mode=t},getDocumentMode:e=>e.mode,detachNode(e){if(e.parentNode){let t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){let i=e.childNodes[e.childNodes.length-1];if(n.isTextNode(i)){i.value+=t;return}}n.appendChild(e,n.createTextNode(t))},insertTextBefore(e,t,i){let a=e.childNodes[e.childNodes.indexOf(i)-1];a&&n.isTextNode(a)?a.value+=t:n.insertBefore(e,n.createTextNode(t),i)},adoptAttributes(e,t){let n=new Set(e.attrs.map(e=>e.name));for(let i=0;i<t.length;i++)n.has(t[i].name)||e.attrs.push(t[i])},getFirstChild:e=>e.childNodes[0],getChildNodes:e=>e.childNodes,getParentNode:e=>e.parentNode,getAttrList:e=>e.attrs,getTagName:e=>e.tagName,getNamespaceURI:e=>e.namespaceURI,getTextNodeContent:e=>e.value,getCommentNodeContent:e=>e.data,getDocumentTypeNodeName:e=>e.name,getDocumentTypeNodePublicId:e=>e.publicId,getDocumentTypeNodeSystemId:e=>e.systemId,isTextNode:e=>"#text"===e.nodeName,isCommentNode:e=>"#comment"===e.nodeName,isDocumentTypeNode:e=>"#documentType"===e.nodeName,isElementNode:e=>Object.prototype.hasOwnProperty.call(e,"tagName"),setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation:e=>e.sourceCodeLocation,updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}}},810767:e=>{"use strict";e.s({getDocumentMode:()=>u,isConforming:()=>c});var t=e.i(195083);let n="html",i=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],a=[...i,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],s=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),r=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],o=[...r,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function l(e,t){return t.some(t=>e.startsWith(t))}function c(e){return e.name===n&&null===e.publicId&&(null===e.systemId||"about:legacy-compat"===e.systemId)}function u(e){if(e.name!==n)return t.DOCUMENT_MODE.QUIRKS;let{systemId:c}=e;if(c&&"http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd"===c.toLowerCase())return t.DOCUMENT_MODE.QUIRKS;let{publicId:u}=e;if(null!==u){if(u=u.toLowerCase(),s.has(u))return t.DOCUMENT_MODE.QUIRKS;let e=null===c?a:i;if(l(u,e))return t.DOCUMENT_MODE.QUIRKS;if(l(u,e=null===c?r:o))return t.DOCUMENT_MODE.LIMITED_QUIRKS}return t.DOCUMENT_MODE.NO_QUIRKS}},973899:e=>{"use strict";e.s({adjustTokenMathMLAttrs:()=>l,adjustTokenSVGAttrs:()=>c,adjustTokenSVGTagName:()=>d,adjustTokenXMLAttrs:()=>u,causesExit:()=>o,isIntegrationPoint:()=>h});var t=e.i(195083);let n={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},i=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),a=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:t.NS.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:t.NS.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:t.NS.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:t.NS.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:t.NS.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:t.NS.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:t.NS.XLINK}],["xml:lang",{prefix:"xml",name:"lang",namespace:t.NS.XML}],["xml:space",{prefix:"xml",name:"space",namespace:t.NS.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:t.NS.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:t.NS.XMLNS}]]),s=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),r=new Set([t.TAG_ID.B,t.TAG_ID.BIG,t.TAG_ID.BLOCKQUOTE,t.TAG_ID.BODY,t.TAG_ID.BR,t.TAG_ID.CENTER,t.TAG_ID.CODE,t.TAG_ID.DD,t.TAG_ID.DIV,t.TAG_ID.DL,t.TAG_ID.DT,t.TAG_ID.EM,t.TAG_ID.EMBED,t.TAG_ID.H1,t.TAG_ID.H2,t.TAG_ID.H3,t.TAG_ID.H4,t.TAG_ID.H5,t.TAG_ID.H6,t.TAG_ID.HEAD,t.TAG_ID.HR,t.TAG_ID.I,t.TAG_ID.IMG,t.TAG_ID.LI,t.TAG_ID.LISTING,t.TAG_ID.MENU,t.TAG_ID.META,t.TAG_ID.NOBR,t.TAG_ID.OL,t.TAG_ID.P,t.TAG_ID.PRE,t.TAG_ID.RUBY,t.TAG_ID.S,t.TAG_ID.SMALL,t.TAG_ID.SPAN,t.TAG_ID.STRONG,t.TAG_ID.STRIKE,t.TAG_ID.SUB,t.TAG_ID.SUP,t.TAG_ID.TABLE,t.TAG_ID.TT,t.TAG_ID.U,t.TAG_ID.UL,t.TAG_ID.VAR]);function o(e){let n=e.tagID;return n===t.TAG_ID.FONT&&e.attrs.some(e=>{let{name:n}=e;return n===t.ATTRS.COLOR||n===t.ATTRS.SIZE||n===t.ATTRS.FACE})||r.has(n)}function l(e){for(let t=0;t<e.attrs.length;t++)if("definitionurl"===e.attrs[t].name){e.attrs[t].name="definitionURL";break}}function c(e){for(let t=0;t<e.attrs.length;t++){let n=i.get(e.attrs[t].name);null!=n&&(e.attrs[t].name=n)}}function u(e){for(let t=0;t<e.attrs.length;t++){let n=a.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function d(e){let n=s.get(e.tagName);null!=n&&(e.tagName=n,e.tagID=(0,t.getTagID)(e.tagName))}function h(e,i,a,s){return(!s||s===t.NS.HTML)&&function(e,i,a){if(i===t.NS.MATHML&&e===t.TAG_ID.ANNOTATION_XML){for(let e=0;e<a.length;e++)if(a[e].name===t.ATTRS.ENCODING){let t=a[e].value.toLowerCase();return t===n.TEXT_HTML||t===n.APPLICATION_XML}}return i===t.NS.SVG&&(e===t.TAG_ID.FOREIGN_OBJECT||e===t.TAG_ID.DESC||e===t.TAG_ID.TITLE)}(e,i,a)||(!s||s===t.NS.MATHML)&&i===t.NS.MATHML&&(e===t.TAG_ID.MI||e===t.TAG_ID.MO||e===t.TAG_ID.MN||e===t.TAG_ID.MS||e===t.TAG_ID.MTEXT)}},318538:e=>{"use strict";e.s({Parser:()=>f});var t,n=e.i(181991),i=e.i(751327),a=e.i(617984),s=e.i(692403),r=e.i(810767),o=e.i(973899),l=e.i(943655),c=e.i(89441),u=e.i(195083),d=e.i(858284);!function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"}(t||(t={}));let h={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},p=new Set([u.TAG_ID.TABLE,u.TAG_ID.TBODY,u.TAG_ID.TFOOT,u.TAG_ID.THEAD,u.TAG_ID.TR]),m={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:s.defaultTreeAdapter,onParseError:null};class f{static parse(e,t){let n=new this(t);return n.tokenizer.write(e,!0),n.document}static getFragmentParser(e,n){let i={...m,...n};null!=e||(e=i.treeAdapter.createElement(u.TAG_NAMES.TEMPLATE,u.NS.HTML,[]));let a=i.treeAdapter.createElement("documentmock",u.NS.HTML,[]),s=new this(i,a,e);return s.fragmentContextID===u.TAG_ID.TEMPLATE&&s.tmplInsertionModeStack.unshift(t.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){let e=this.treeAdapter.getFirstChild(this.document),t=this.treeAdapter.createDocumentFragment();return this._adoptNodes(e,t),t}_err(e,t,n){var i;if(!this.onParseError)return;let a=null!=(i=e.location)?i:h,s={code:t,startLine:a.startLine,startCol:a.startCol,startOffset:a.startOffset,endLine:n?a.startLine:a.endLine,endCol:n?a.startCol:a.endCol,endOffset:n?a.startOffset:a.endOffset};this.onParseError(s)}onItemPush(e,t,n){var i,a;null==(a=(i=this.treeAdapter).onItemPush)||a.call(i,e),n&&this.openElements.stackTop>0&&this._setContextModes(e,t)}onItemPop(e,t){var n,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(e,this.currentToken),null==(i=(n=this.treeAdapter).onItemPop)||i.call(n,e,this.openElements.current),t){let e,t;0===this.openElements.stackTop&&this.fragmentContext?(e=this.fragmentContext,t=this.fragmentContextID):{current:e,currentTagId:t}=this.openElements,this._setContextModes(e,t)}}_setContextModes(e,t){let n=e===this.document||e&&this.treeAdapter.getNamespaceURI(e)===u.NS.HTML;this.currentNotInHTML=!n,this.tokenizer.inForeignNode=!n&&void 0!==e&&void 0!==t&&!this._isIntegrationPoint(t,e)}_switchToTextParsing(e,n){this._insertElement(e,u.NS.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=t.TEXT}switchToPlaintextParsing(){this.insertionMode=t.TEXT,this.originalInsertionMode=t.IN_BODY,this.tokenizer.state=n.TokenizerMode.PLAINTEXT}_getAdjustedCurrentElement(){return 0===this.openElements.stackTop&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let e=this.fragmentContext;for(;e;){if(this.treeAdapter.getTagName(e)===u.TAG_NAMES.FORM){this.formElement=e;break}e=this.treeAdapter.getParentNode(e)}}_initTokenizerForFragmentParsing(){if(this.fragmentContext&&this.treeAdapter.getNamespaceURI(this.fragmentContext)===u.NS.HTML)switch(this.fragmentContextID){case u.TAG_ID.TITLE:case u.TAG_ID.TEXTAREA:this.tokenizer.state=n.TokenizerMode.RCDATA;break;case u.TAG_ID.STYLE:case u.TAG_ID.XMP:case u.TAG_ID.IFRAME:case u.TAG_ID.NOEMBED:case u.TAG_ID.NOFRAMES:case u.TAG_ID.NOSCRIPT:this.tokenizer.state=n.TokenizerMode.RAWTEXT;break;case u.TAG_ID.SCRIPT:this.tokenizer.state=n.TokenizerMode.SCRIPT_DATA;break;case u.TAG_ID.PLAINTEXT:this.tokenizer.state=n.TokenizerMode.PLAINTEXT}}_setDocumentType(e){let t=e.name||"",n=e.publicId||"",i=e.systemId||"";if(this.treeAdapter.setDocumentType(this.document,t,n,i),e.location){let t=this.treeAdapter.getChildNodes(this.document).find(e=>this.treeAdapter.isDocumentTypeNode(e));t&&this.treeAdapter.setNodeSourceCodeLocation(t,e.location)}}_attachElementToTree(e,t){if(this.options.sourceCodeLocationInfo){let n=t&&{...t,startTag:t};this.treeAdapter.setNodeSourceCodeLocation(e,n)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(e);else{let t=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(null!=t?t:this.document,e)}}_appendElement(e,t){let n=this.treeAdapter.createElement(e.tagName,t,e.attrs);this._attachElementToTree(n,e.location)}_insertElement(e,t){let n=this.treeAdapter.createElement(e.tagName,t,e.attrs);this._attachElementToTree(n,e.location),this.openElements.push(n,e.tagID)}_insertFakeElement(e,t){let n=this.treeAdapter.createElement(e,u.NS.HTML,[]);this._attachElementToTree(n,null),this.openElements.push(n,t)}_insertTemplate(e){let t=this.treeAdapter.createElement(e.tagName,u.NS.HTML,e.attrs),n=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(t,n),this._attachElementToTree(t,e.location),this.openElements.push(t,e.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(n,null)}_insertFakeRootElement(){let e=this.treeAdapter.createElement(u.TAG_NAMES.HTML,u.NS.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(e,null),this.treeAdapter.appendChild(this.openElements.current,e),this.openElements.push(e,u.TAG_ID.HTML)}_appendCommentNode(e,t){let n=this.treeAdapter.createCommentNode(e.data);this.treeAdapter.appendChild(t,n),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(n,e.location)}_insertCharacters(e){let t,n;if(this._shouldFosterParentOnInsertion()?({parent:t,beforeElement:n}=this._findFosterParentingLocation(),n?this.treeAdapter.insertTextBefore(t,e.chars,n):this.treeAdapter.insertText(t,e.chars)):(t=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(t,e.chars)),!e.location)return;let i=this.treeAdapter.getChildNodes(t),a=n?i.lastIndexOf(n):i.length,s=i[a-1];if(this.treeAdapter.getNodeSourceCodeLocation(s)){let{endLine:t,endCol:n,endOffset:i}=e.location;this.treeAdapter.updateNodeSourceCodeLocation(s,{endLine:t,endCol:n,endOffset:i})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(s,e.location)}_adoptNodes(e,t){for(let n=this.treeAdapter.getFirstChild(e);n;n=this.treeAdapter.getFirstChild(e))this.treeAdapter.detachNode(n),this.treeAdapter.appendChild(t,n)}_setEndLocation(e,t){if(this.treeAdapter.getNodeSourceCodeLocation(e)&&t.location){let n=t.location,i=this.treeAdapter.getTagName(e),a=t.type===d.TokenType.END_TAG&&i===t.tagName?{endTag:{...n},endLine:n.endLine,endCol:n.endCol,endOffset:n.endOffset}:{endLine:n.startLine,endCol:n.startCol,endOffset:n.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(e,a)}}shouldProcessStartTagTokenInForeignContent(e){let t,n;return!!this.currentNotInHTML&&(0===this.openElements.stackTop&&this.fragmentContext?(t=this.fragmentContext,n=this.fragmentContextID):{current:t,currentTagId:n}=this.openElements,(e.tagID!==u.TAG_ID.SVG||this.treeAdapter.getTagName(t)!==u.TAG_NAMES.ANNOTATION_XML||this.treeAdapter.getNamespaceURI(t)!==u.NS.MATHML)&&(this.tokenizer.inForeignNode||(e.tagID===u.TAG_ID.MGLYPH||e.tagID===u.TAG_ID.MALIGNMARK)&&void 0!==n&&!this._isIntegrationPoint(n,t,u.NS.HTML)))}_processToken(e){switch(e.type){case d.TokenType.CHARACTER:this.onCharacter(e);break;case d.TokenType.NULL_CHARACTER:this.onNullCharacter(e);break;case d.TokenType.COMMENT:this.onComment(e);break;case d.TokenType.DOCTYPE:this.onDoctype(e);break;case d.TokenType.START_TAG:this._processStartTag(e);break;case d.TokenType.END_TAG:this.onEndTag(e);break;case d.TokenType.EOF:this.onEof(e);break;case d.TokenType.WHITESPACE_CHARACTER:this.onWhitespaceCharacter(e)}}_isIntegrationPoint(e,t,n){let i=this.treeAdapter.getNamespaceURI(t),a=this.treeAdapter.getAttrList(t);return o.isIntegrationPoint(e,i,a,n)}_reconstructActiveFormattingElements(){let e=this.activeFormattingElements.entries.length;if(e){let t=this.activeFormattingElements.entries.findIndex(e=>e.type===a.EntryType.Marker||this.openElements.contains(e.element)),n=-1===t?e-1:t-1;for(let e=n;e>=0;e--){let t=this.activeFormattingElements.entries[e];this._insertElement(t.token,this.treeAdapter.getNamespaceURI(t.element)),t.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=t.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(u.TAG_ID.P),this.openElements.popUntilTagNamePopped(u.TAG_ID.P)}_resetInsertionMode(){for(let e=this.openElements.stackTop;e>=0;e--)switch(0===e&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[e]){case u.TAG_ID.TR:this.insertionMode=t.IN_ROW;return;case u.TAG_ID.TBODY:case u.TAG_ID.THEAD:case u.TAG_ID.TFOOT:this.insertionMode=t.IN_TABLE_BODY;return;case u.TAG_ID.CAPTION:this.insertionMode=t.IN_CAPTION;return;case u.TAG_ID.COLGROUP:this.insertionMode=t.IN_COLUMN_GROUP;return;case u.TAG_ID.TABLE:this.insertionMode=t.IN_TABLE;return;case u.TAG_ID.BODY:this.insertionMode=t.IN_BODY;return;case u.TAG_ID.FRAMESET:this.insertionMode=t.IN_FRAMESET;return;case u.TAG_ID.SELECT:return void this._resetInsertionModeForSelect(e);case u.TAG_ID.TEMPLATE:this.insertionMode=this.tmplInsertionModeStack[0];return;case u.TAG_ID.HTML:this.insertionMode=this.headElement?t.AFTER_HEAD:t.BEFORE_HEAD;return;case u.TAG_ID.TD:case u.TAG_ID.TH:if(e>0){this.insertionMode=t.IN_CELL;return}break;case u.TAG_ID.HEAD:if(e>0){this.insertionMode=t.IN_HEAD;return}}this.insertionMode=t.IN_BODY}_resetInsertionModeForSelect(e){if(e>0)for(let n=e-1;n>0;n--){let e=this.openElements.tagIDs[n];if(e===u.TAG_ID.TEMPLATE)break;if(e===u.TAG_ID.TABLE){this.insertionMode=t.IN_SELECT_IN_TABLE;return}}this.insertionMode=t.IN_SELECT}_isElementCausesFosterParenting(e){return p.has(e)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&void 0!==this.openElements.currentTagId&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let e=this.openElements.stackTop;e>=0;e--){let t=this.openElements.items[e];switch(this.openElements.tagIDs[e]){case u.TAG_ID.TEMPLATE:if(this.treeAdapter.getNamespaceURI(t)===u.NS.HTML)return{parent:this.treeAdapter.getTemplateContent(t),beforeElement:null};break;case u.TAG_ID.TABLE:{let n=this.treeAdapter.getParentNode(t);if(n)return{parent:n,beforeElement:t};return{parent:this.openElements.items[e-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(e){let t=this._findFosterParentingLocation();t.beforeElement?this.treeAdapter.insertBefore(t.parent,e,t.beforeElement):this.treeAdapter.appendChild(t.parent,e)}_isSpecialElement(e,t){let n=this.treeAdapter.getNamespaceURI(e);return u.SPECIAL_ELEMENTS[n].has(t)}onCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){var n,i;return void(n=this,i=e,n._insertCharacters(i),n.framesetOk=!1)}switch(this.insertionMode){case t.INITIAL:A(this,e);break;case t.BEFORE_HTML:x(this,e);break;case t.BEFORE_HEAD:I(this,e);break;case t.IN_HEAD:v(this,e);break;case t.IN_HEAD_NO_SCRIPT:S(this,e);break;case t.AFTER_HEAD:D(this,e);break;case t.IN_BODY:case t.IN_CAPTION:case t.IN_CELL:case t.IN_TEMPLATE:b(this,e);break;case t.TEXT:case t.IN_SELECT:case t.IN_SELECT_IN_TABLE:this._insertCharacters(e);break;case t.IN_TABLE:case t.IN_TABLE_BODY:case t.IN_ROW:j(this,e);break;case t.IN_TABLE_TEXT:V(this,e);break;case t.IN_COLUMN_GROUP:q(this,e);break;case t.AFTER_BODY:en(this,e);break;case t.AFTER_AFTER_BODY:ei(this,e)}}onNullCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){var n,i;return void(n=this,(i=e).chars=c.REPLACEMENT_CHARACTER,n._insertCharacters(i))}switch(this.insertionMode){case t.INITIAL:A(this,e);break;case t.BEFORE_HTML:x(this,e);break;case t.BEFORE_HEAD:I(this,e);break;case t.IN_HEAD:v(this,e);break;case t.IN_HEAD_NO_SCRIPT:S(this,e);break;case t.AFTER_HEAD:D(this,e);break;case t.TEXT:this._insertCharacters(e);break;case t.IN_TABLE:case t.IN_TABLE_BODY:case t.IN_ROW:j(this,e);break;case t.IN_COLUMN_GROUP:q(this,e);break;case t.AFTER_BODY:en(this,e);break;case t.AFTER_AFTER_BODY:ei(this,e)}}onComment(e){var n,i,a,s;if(this.skipNextNewLine=!1,this.currentNotInHTML)return void g(this,e);switch(this.insertionMode){case t.INITIAL:case t.BEFORE_HTML:case t.BEFORE_HEAD:case t.IN_HEAD:case t.IN_HEAD_NO_SCRIPT:case t.AFTER_HEAD:case t.IN_BODY:case t.IN_TABLE:case t.IN_CAPTION:case t.IN_COLUMN_GROUP:case t.IN_TABLE_BODY:case t.IN_ROW:case t.IN_CELL:case t.IN_SELECT:case t.IN_SELECT_IN_TABLE:case t.IN_TEMPLATE:case t.IN_FRAMESET:case t.AFTER_FRAMESET:g(this,e);break;case t.IN_TABLE_TEXT:Y(this,e);break;case t.AFTER_BODY:n=this,i=e,n._appendCommentNode(i,n.openElements.items[0]);break;case t.AFTER_AFTER_BODY:case t.AFTER_AFTER_FRAMESET:a=this,s=e,a._appendCommentNode(s,a.document)}}onDoctype(e){switch(this.skipNextNewLine=!1,this.insertionMode){case t.INITIAL:var n=this,i=e;n._setDocumentType(i);let a=i.forceQuirks?u.DOCUMENT_MODE.QUIRKS:r.getDocumentMode(i);r.isConforming(i)||n._err(i,l.ERR.nonConformingDoctype),n.treeAdapter.setDocumentMode(n.document,a),n.insertionMode=t.BEFORE_HTML;break;case t.BEFORE_HEAD:case t.IN_HEAD:case t.IN_HEAD_NO_SCRIPT:case t.AFTER_HEAD:this._err(e,l.ERR.misplacedDoctype);break;case t.IN_TABLE_TEXT:Y(this,e)}}onStartTag(e){this.skipNextNewLine=!1,this.currentToken=e,this._processStartTag(e),e.selfClosing&&!e.ackSelfClosing&&this._err(e,l.ERR.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(e){this.shouldProcessStartTagTokenInForeignContent(e)?function(e,t){if(o.causesExit(t))ea(e),e._startTagOutsideForeignContent(t);else{let n=e._getAdjustedCurrentElement(),i=e.treeAdapter.getNamespaceURI(n);i===u.NS.MATHML?o.adjustTokenMathMLAttrs(t):i===u.NS.SVG&&(o.adjustTokenSVGTagName(t),o.adjustTokenSVGAttrs(t)),o.adjustTokenXMLAttrs(t),t.selfClosing?e._appendElement(t,i):e._insertElement(t,i),t.ackSelfClosing=!0}}(this,e):this._startTagOutsideForeignContent(e)}_startTagOutsideForeignContent(e){switch(this.insertionMode){case t.INITIAL:A(this,e);break;case t.BEFORE_HTML:n=this,(i=e).tagID===u.TAG_ID.HTML?(n._insertElement(i,u.NS.HTML),n.insertionMode=t.BEFORE_HEAD):x(n,i);break;case t.BEFORE_HEAD:var n,i,a,s,r,o,c=this,d=e;switch(d.tagID){case u.TAG_ID.HTML:M(c,d);break;case u.TAG_ID.HEAD:c._insertElement(d,u.NS.HTML),c.headElement=c.openElements.current,c.insertionMode=t.IN_HEAD;break;default:I(c,d)}break;case t.IN_HEAD:_(this,e);break;case t.IN_HEAD_NO_SCRIPT:var h=this,p=e;switch(p.tagID){case u.TAG_ID.HTML:M(h,p);break;case u.TAG_ID.BASEFONT:case u.TAG_ID.BGSOUND:case u.TAG_ID.HEAD:case u.TAG_ID.LINK:case u.TAG_ID.META:case u.TAG_ID.NOFRAMES:case u.TAG_ID.STYLE:_(h,p);break;case u.TAG_ID.NOSCRIPT:h._err(p,l.ERR.nestedNoscriptInHead);break;default:S(h,p)}break;case t.AFTER_HEAD:var m=this,f=e;switch(f.tagID){case u.TAG_ID.HTML:M(m,f);break;case u.TAG_ID.BODY:m._insertElement(f,u.NS.HTML),m.framesetOk=!1,m.insertionMode=t.IN_BODY;break;case u.TAG_ID.FRAMESET:m._insertElement(f,u.NS.HTML),m.insertionMode=t.IN_FRAMESET;break;case u.TAG_ID.BASE:case u.TAG_ID.BASEFONT:case u.TAG_ID.BGSOUND:case u.TAG_ID.LINK:case u.TAG_ID.META:case u.TAG_ID.NOFRAMES:case u.TAG_ID.SCRIPT:case u.TAG_ID.STYLE:case u.TAG_ID.TEMPLATE:case u.TAG_ID.TITLE:m._err(f,l.ERR.abandonedHeadElementChild),m.openElements.push(m.headElement,u.TAG_ID.HEAD),_(m,f),m.openElements.remove(m.headElement);break;case u.TAG_ID.HEAD:m._err(f,l.ERR.misplacedStartTagForHeadElement);break;default:D(m,f)}break;case t.IN_BODY:M(this,e);break;case t.IN_TABLE:B(this,e);break;case t.IN_TABLE_TEXT:Y(this,e);break;case t.IN_CAPTION:var T=this,g=e;let E=g.tagID;z.has(E)?T.openElements.hasInTableScope(u.TAG_ID.CAPTION)&&(T.openElements.generateImpliedEndTags(),T.openElements.popUntilTagNamePopped(u.TAG_ID.CAPTION),T.activeFormattingElements.clearToLastMarker(),T.insertionMode=t.IN_TABLE,B(T,g)):M(T,g);break;case t.IN_COLUMN_GROUP:W(this,e);break;case t.IN_TABLE_BODY:K(this,e);break;case t.IN_ROW:X(this,e);break;case t.IN_CELL:var C=this,v=e;let y=v.tagID;z.has(y)?(C.openElements.hasInTableScope(u.TAG_ID.TD)||C.openElements.hasInTableScope(u.TAG_ID.TH))&&(C._closeTableCell(),X(C,v)):M(C,v);break;case t.IN_SELECT:Z(this,e);break;case t.IN_SELECT_IN_TABLE:var N=this,b=e;let O=b.tagID;O===u.TAG_ID.CAPTION||O===u.TAG_ID.TABLE||O===u.TAG_ID.TBODY||O===u.TAG_ID.TFOOT||O===u.TAG_ID.THEAD||O===u.TAG_ID.TR||O===u.TAG_ID.TD||O===u.TAG_ID.TH?(N.openElements.popUntilTagNamePopped(u.TAG_ID.SELECT),N._resetInsertionMode(),N._processStartTag(b)):Z(N,b);break;case t.IN_TEMPLATE:var R=this,P=e;switch(P.tagID){case u.TAG_ID.BASE:case u.TAG_ID.BASEFONT:case u.TAG_ID.BGSOUND:case u.TAG_ID.LINK:case u.TAG_ID.META:case u.TAG_ID.NOFRAMES:case u.TAG_ID.SCRIPT:case u.TAG_ID.STYLE:case u.TAG_ID.TEMPLATE:case u.TAG_ID.TITLE:_(R,P);break;case u.TAG_ID.CAPTION:case u.TAG_ID.COLGROUP:case u.TAG_ID.TBODY:case u.TAG_ID.TFOOT:case u.TAG_ID.THEAD:R.tmplInsertionModeStack[0]=t.IN_TABLE,R.insertionMode=t.IN_TABLE,B(R,P);break;case u.TAG_ID.COL:R.tmplInsertionModeStack[0]=t.IN_COLUMN_GROUP,R.insertionMode=t.IN_COLUMN_GROUP,W(R,P);break;case u.TAG_ID.TR:R.tmplInsertionModeStack[0]=t.IN_TABLE_BODY,R.insertionMode=t.IN_TABLE_BODY,K(R,P);break;case u.TAG_ID.TD:case u.TAG_ID.TH:R.tmplInsertionModeStack[0]=t.IN_ROW,R.insertionMode=t.IN_ROW,X(R,P);break;default:R.tmplInsertionModeStack[0]=t.IN_BODY,R.insertionMode=t.IN_BODY,M(R,P)}break;case t.AFTER_BODY:a=this,(s=e).tagID===u.TAG_ID.HTML?M(a,s):en(a,s);break;case t.IN_FRAMESET:var k=this,L=e;switch(L.tagID){case u.TAG_ID.HTML:M(k,L);break;case u.TAG_ID.FRAMESET:k._insertElement(L,u.NS.HTML);break;case u.TAG_ID.FRAME:k._appendElement(L,u.NS.HTML),L.ackSelfClosing=!0;break;case u.TAG_ID.NOFRAMES:_(k,L)}break;case t.AFTER_FRAMESET:var w=this,G=e;switch(G.tagID){case u.TAG_ID.HTML:M(w,G);break;case u.TAG_ID.NOFRAMES:_(w,G)}break;case t.AFTER_AFTER_BODY:r=this,(o=e).tagID===u.TAG_ID.HTML?M(r,o):ei(r,o);break;case t.AFTER_AFTER_FRAMESET:var j=this,F=e;switch(F.tagID){case u.TAG_ID.HTML:M(j,F);break;case u.TAG_ID.NOFRAMES:_(j,F)}}}onEndTag(e){this.skipNextNewLine=!1,this.currentToken=e,this.currentNotInHTML?function(e,t){if(t.tagID===u.TAG_ID.P||t.tagID===u.TAG_ID.BR){ea(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){let i=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(i)===u.NS.HTML){e._endTagOutsideForeignContent(t);break}let a=e.treeAdapter.getTagName(i);if(a.toLowerCase()===t.tagName){t.tagName=a,e.openElements.shortenToLength(n);break}}}(this,e):this._endTagOutsideForeignContent(e)}_endTagOutsideForeignContent(e){switch(this.insertionMode){case t.INITIAL:A(this,e);break;case t.BEFORE_HTML:var n,i,a,s,r,o,c=this,d=e;let h=d.tagID;(h===u.TAG_ID.HTML||h===u.TAG_ID.HEAD||h===u.TAG_ID.BODY||h===u.TAG_ID.BR)&&x(c,d);break;case t.BEFORE_HEAD:var p=this,m=e;let f=m.tagID;f===u.TAG_ID.HEAD||f===u.TAG_ID.BODY||f===u.TAG_ID.HTML||f===u.TAG_ID.BR?I(p,m):p._err(m,l.ERR.endTagWithoutMatchingOpenElement);break;case t.IN_HEAD:var T=this,g=e;switch(g.tagID){case u.TAG_ID.HEAD:T.openElements.pop(),T.insertionMode=t.AFTER_HEAD;break;case u.TAG_ID.BODY:case u.TAG_ID.BR:case u.TAG_ID.HTML:v(T,g);break;case u.TAG_ID.TEMPLATE:C(T,g);break;default:T._err(g,l.ERR.endTagWithoutMatchingOpenElement)}break;case t.IN_HEAD_NO_SCRIPT:var E=this,_=e;switch(_.tagID){case u.TAG_ID.NOSCRIPT:E.openElements.pop(),E.insertionMode=t.IN_HEAD;break;case u.TAG_ID.BR:S(E,_);break;default:E._err(_,l.ERR.endTagWithoutMatchingOpenElement)}break;case t.AFTER_HEAD:var y=this,N=e;switch(N.tagID){case u.TAG_ID.BODY:case u.TAG_ID.HTML:case u.TAG_ID.BR:D(y,N);break;case u.TAG_ID.TEMPLATE:C(y,N);break;default:y._err(N,l.ERR.endTagWithoutMatchingOpenElement)}break;case t.IN_BODY:w(this,e);break;case t.TEXT:n=this,e.tagID===u.TAG_ID.SCRIPT&&(null==(i=n.scriptHandler)||i.call(n,n.openElements.current)),n.openElements.pop(),n.insertionMode=n.originalInsertionMode;break;case t.IN_TABLE:F(this,e);break;case t.IN_TABLE_TEXT:Y(this,e);break;case t.IN_CAPTION:var b=this,O=e;let R=O.tagID;switch(R){case u.TAG_ID.CAPTION:case u.TAG_ID.TABLE:b.openElements.hasInTableScope(u.TAG_ID.CAPTION)&&(b.openElements.generateImpliedEndTags(),b.openElements.popUntilTagNamePopped(u.TAG_ID.CAPTION),b.activeFormattingElements.clearToLastMarker(),b.insertionMode=t.IN_TABLE,R===u.TAG_ID.TABLE&&F(b,O));break;case u.TAG_ID.BODY:case u.TAG_ID.COL:case u.TAG_ID.COLGROUP:case u.TAG_ID.HTML:case u.TAG_ID.TBODY:case u.TAG_ID.TD:case u.TAG_ID.TFOOT:case u.TAG_ID.TH:case u.TAG_ID.THEAD:case u.TAG_ID.TR:break;default:w(b,O)}break;case t.IN_COLUMN_GROUP:var P=this,k=e;switch(k.tagID){case u.TAG_ID.COLGROUP:P.openElements.currentTagId===u.TAG_ID.COLGROUP&&(P.openElements.pop(),P.insertionMode=t.IN_TABLE);break;case u.TAG_ID.TEMPLATE:C(P,k);break;case u.TAG_ID.COL:break;default:q(P,k)}break;case t.IN_TABLE_BODY:Q(this,e);break;case t.IN_ROW:J(this,e);break;case t.IN_CELL:var M=this,L=e;let G=L.tagID;switch(G){case u.TAG_ID.TD:case u.TAG_ID.TH:M.openElements.hasInTableScope(G)&&(M.openElements.generateImpliedEndTags(),M.openElements.popUntilTagNamePopped(G),M.activeFormattingElements.clearToLastMarker(),M.insertionMode=t.IN_ROW);break;case u.TAG_ID.TABLE:case u.TAG_ID.TBODY:case u.TAG_ID.TFOOT:case u.TAG_ID.THEAD:case u.TAG_ID.TR:M.openElements.hasInTableScope(G)&&(M._closeTableCell(),J(M,L));break;case u.TAG_ID.BODY:case u.TAG_ID.CAPTION:case u.TAG_ID.COL:case u.TAG_ID.COLGROUP:case u.TAG_ID.HTML:break;default:w(M,L)}break;case t.IN_SELECT:$(this,e);break;case t.IN_SELECT_IN_TABLE:var j=this,B=e;let U=B.tagID;U===u.TAG_ID.CAPTION||U===u.TAG_ID.TABLE||U===u.TAG_ID.TBODY||U===u.TAG_ID.TFOOT||U===u.TAG_ID.THEAD||U===u.TAG_ID.TR||U===u.TAG_ID.TD||U===u.TAG_ID.TH?j.openElements.hasInTableScope(U)&&(j.openElements.popUntilTagNamePopped(u.TAG_ID.SELECT),j._resetInsertionMode(),j.onEndTag(B)):$(j,B);break;case t.IN_TEMPLATE:a=this,(s=e).tagID===u.TAG_ID.TEMPLATE&&C(a,s);break;case t.AFTER_BODY:et(this,e);break;case t.IN_FRAMESET:r=this,e.tagID===u.TAG_ID.FRAMESET&&!r.openElements.isRootHtmlElementCurrent()&&(r.openElements.pop(),r.fragmentContext||r.openElements.currentTagId===u.TAG_ID.FRAMESET||(r.insertionMode=t.AFTER_FRAMESET));break;case t.AFTER_FRAMESET:o=this,e.tagID===u.TAG_ID.HTML&&(o.insertionMode=t.AFTER_AFTER_FRAMESET);break;case t.AFTER_AFTER_BODY:ei(this,e)}}onEof(e){switch(this.insertionMode){case t.INITIAL:A(this,e);break;case t.BEFORE_HTML:x(this,e);break;case t.BEFORE_HEAD:I(this,e);break;case t.IN_HEAD:v(this,e);break;case t.IN_HEAD_NO_SCRIPT:S(this,e);break;case t.AFTER_HEAD:D(this,e);break;case t.IN_BODY:case t.IN_TABLE:case t.IN_CAPTION:case t.IN_COLUMN_GROUP:case t.IN_TABLE_BODY:case t.IN_ROW:case t.IN_CELL:case t.IN_SELECT:case t.IN_SELECT_IN_TABLE:G(this,e);break;case t.TEXT:var n,i;n=this,i=e,n._err(i,l.ERR.eofInElementThatCanContainOnlyText),n.openElements.pop(),n.insertionMode=n.originalInsertionMode,n.onEof(i);break;case t.IN_TABLE_TEXT:Y(this,e);break;case t.IN_TEMPLATE:ee(this,e);break;case t.AFTER_BODY:case t.IN_FRAMESET:case t.AFTER_FRAMESET:case t.AFTER_AFTER_BODY:case t.AFTER_AFTER_FRAMESET:E(this,e)}}onWhitespaceCharacter(e){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,e.chars.charCodeAt(0)===c.CODE_POINTS.LINE_FEED)){if(1===e.chars.length)return;e.chars=e.chars.substr(1)}if(this.tokenizer.inForeignNode)return void this._insertCharacters(e);switch(this.insertionMode){case t.IN_HEAD:case t.IN_HEAD_NO_SCRIPT:case t.AFTER_HEAD:case t.TEXT:case t.IN_COLUMN_GROUP:case t.IN_SELECT:case t.IN_SELECT_IN_TABLE:case t.IN_FRAMESET:case t.AFTER_FRAMESET:this._insertCharacters(e);break;case t.IN_BODY:case t.IN_CAPTION:case t.IN_CELL:case t.IN_TEMPLATE:case t.AFTER_BODY:case t.AFTER_AFTER_BODY:case t.AFTER_AFTER_FRAMESET:N(this,e);break;case t.IN_TABLE:case t.IN_TABLE_BODY:case t.IN_ROW:j(this,e);break;case t.IN_TABLE_TEXT:H(this,e)}}constructor(e,s,r=null,o=null){this.fragmentContext=r,this.scriptHandler=o,this.currentToken=null,this.stopped=!1,this.insertionMode=t.INITIAL,this.originalInsertionMode=t.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...m,...e},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=null!=s?s:this.treeAdapter.createDocument(),this.tokenizer=new n.Tokenizer(this.options,this),this.activeFormattingElements=new a.FormattingElementList(this.treeAdapter),this.fragmentContextID=r?(0,u.getTagID)(this.treeAdapter.getTagName(r)):u.TAG_ID.UNKNOWN,this._setContextModes(null!=r?r:this.document,this.fragmentContextID),this.openElements=new i.OpenElementStack(this.document,this.treeAdapter,this)}}function T(e,t){for(let n=0;n<8;n++){let n=function(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):L(e,t),n}(e,t);if(!n)break;let i=function(e,t){let n=null,i=e.openElements.stackTop;for(;i>=0;i--){let a=e.openElements.items[i];if(a===t.element)break;e._isSpecialElement(a,e.openElements.tagIDs[i])&&(n=a)}return n||(e.openElements.shortenToLength(Math.max(i,0)),e.activeFormattingElements.removeEntry(t)),n}(e,n);if(!i)break;e.activeFormattingElements.bookmark=n;let a=function(e,t,n){let i=t,a=e.openElements.getCommonAncestor(t);for(let s=0,r=a;r!==n;s++,r=a){a=e.openElements.getCommonAncestor(r);let n=e.activeFormattingElements.getElementEntry(r),o=n&&s>=3;!n||o?(o&&e.activeFormattingElements.removeEntry(n),e.openElements.remove(r)):(r=function(e,t){let n=e.treeAdapter.getNamespaceURI(t.element),i=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,i),t.element=i,i}(e,n),i===t&&(e.activeFormattingElements.bookmark=n),e.treeAdapter.detachNode(i),e.treeAdapter.appendChild(r,i),i=r)}return i}(e,i,n.element),s=e.openElements.getCommonAncestor(n.element);e.treeAdapter.detachNode(a),s&&function(e,t,n){let i=e.treeAdapter.getTagName(t),a=(0,u.getTagID)(i);if(e._isElementCausesFosterParenting(a))e._fosterParentElement(n);else{let i=e.treeAdapter.getNamespaceURI(t);a===u.TAG_ID.TEMPLATE&&i===u.NS.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}(e,s,a);let r=e.treeAdapter.getNamespaceURI(n.element),{token:o}=n,l=e.treeAdapter.createElement(o.tagName,r,o.attrs);e._adoptNodes(i,l),e.treeAdapter.appendChild(i,l),e.activeFormattingElements.insertElementAfterBookmark(l,o),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(i,l,o.tagID)}}function g(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function E(e,t){if(e.stopped=!0,t.location){let n=2*!e.fragmentContext;for(let i=e.openElements.stackTop;i>=n;i--)e._setEndLocation(e.openElements.items[i],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){let n=e.openElements.items[0],i=e.treeAdapter.getNodeSourceCodeLocation(n);if(i&&!i.endTag&&(e._setEndLocation(n,t),e.openElements.stackTop>=1)){let n=e.openElements.items[1],i=e.treeAdapter.getNodeSourceCodeLocation(n);i&&!i.endTag&&e._setEndLocation(n,t)}}}}function A(e,n){e._err(n,l.ERR.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,u.DOCUMENT_MODE.QUIRKS),e.insertionMode=t.BEFORE_HTML,e._processToken(n)}function x(e,n){e._insertFakeRootElement(),e.insertionMode=t.BEFORE_HEAD,e._processToken(n)}function I(e,n){e._insertFakeElement(u.TAG_NAMES.HEAD,u.TAG_ID.HEAD),e.headElement=e.openElements.current,e.insertionMode=t.IN_HEAD,e._processToken(n)}function _(e,i){switch(i.tagID){case u.TAG_ID.HTML:M(e,i);break;case u.TAG_ID.BASE:case u.TAG_ID.BASEFONT:case u.TAG_ID.BGSOUND:case u.TAG_ID.LINK:case u.TAG_ID.META:e._appendElement(i,u.NS.HTML),i.ackSelfClosing=!0;break;case u.TAG_ID.TITLE:e._switchToTextParsing(i,n.TokenizerMode.RCDATA);break;case u.TAG_ID.NOSCRIPT:e.options.scriptingEnabled?e._switchToTextParsing(i,n.TokenizerMode.RAWTEXT):(e._insertElement(i,u.NS.HTML),e.insertionMode=t.IN_HEAD_NO_SCRIPT);break;case u.TAG_ID.NOFRAMES:case u.TAG_ID.STYLE:e._switchToTextParsing(i,n.TokenizerMode.RAWTEXT);break;case u.TAG_ID.SCRIPT:e._switchToTextParsing(i,n.TokenizerMode.SCRIPT_DATA);break;case u.TAG_ID.TEMPLATE:e._insertTemplate(i),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=t.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(t.IN_TEMPLATE);break;case u.TAG_ID.HEAD:e._err(i,l.ERR.misplacedStartTagForHeadElement);break;default:v(e,i)}}function C(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==u.TAG_ID.TEMPLATE&&e._err(t,l.ERR.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(u.TAG_ID.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,l.ERR.endTagWithoutMatchingOpenElement)}function v(e,n){e.openElements.pop(),e.insertionMode=t.AFTER_HEAD,e._processToken(n)}function S(e,n){let i=n.type===d.TokenType.EOF?l.ERR.openElementsLeftAfterEof:l.ERR.disallowedContentInNoscriptInHead;e._err(n,i),e.openElements.pop(),e.insertionMode=t.IN_HEAD,e._processToken(n)}function D(e,n){e._insertFakeElement(u.TAG_NAMES.BODY,u.TAG_ID.BODY),e.insertionMode=t.IN_BODY,y(e,n)}function y(e,t){switch(t.type){case d.TokenType.CHARACTER:b(e,t);break;case d.TokenType.WHITESPACE_CHARACTER:N(e,t);break;case d.TokenType.COMMENT:g(e,t);break;case d.TokenType.START_TAG:M(e,t);break;case d.TokenType.END_TAG:w(e,t);break;case d.TokenType.EOF:G(e,t)}}function N(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function b(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function O(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,u.NS.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function R(e){let t=(0,d.getTokenAttr)(e,u.ATTRS.TYPE);return null!=t&&"hidden"===t.toLowerCase()}function P(e,t){e._switchToTextParsing(t,n.TokenizerMode.RAWTEXT)}function k(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,u.NS.HTML)}function M(e,i){switch(i.tagID){case u.TAG_ID.I:case u.TAG_ID.S:case u.TAG_ID.B:case u.TAG_ID.U:case u.TAG_ID.EM:case u.TAG_ID.TT:case u.TAG_ID.BIG:case u.TAG_ID.CODE:case u.TAG_ID.FONT:case u.TAG_ID.SMALL:case u.TAG_ID.STRIKE:case u.TAG_ID.STRONG:e._reconstructActiveFormattingElements(),e._insertElement(i,u.NS.HTML),e.activeFormattingElements.pushElement(e.openElements.current,i);break;case u.TAG_ID.A:let a=e.activeFormattingElements.getElementEntryInScopeWithTagName(u.TAG_NAMES.A);a&&(T(e,i),e.openElements.remove(a.element),e.activeFormattingElements.removeEntry(a)),e._reconstructActiveFormattingElements(),e._insertElement(i,u.NS.HTML),e.activeFormattingElements.pushElement(e.openElements.current,i);break;case u.TAG_ID.H1:case u.TAG_ID.H2:case u.TAG_ID.H3:case u.TAG_ID.H4:case u.TAG_ID.H5:case u.TAG_ID.H6:e.openElements.hasInButtonScope(u.TAG_ID.P)&&e._closePElement(),void 0!==e.openElements.currentTagId&&u.NUMBERED_HEADERS.has(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(i,u.NS.HTML);break;case u.TAG_ID.P:case u.TAG_ID.DL:case u.TAG_ID.OL:case u.TAG_ID.UL:case u.TAG_ID.DIV:case u.TAG_ID.DIR:case u.TAG_ID.NAV:case u.TAG_ID.MAIN:case u.TAG_ID.MENU:case u.TAG_ID.ASIDE:case u.TAG_ID.CENTER:case u.TAG_ID.FIGURE:case u.TAG_ID.FOOTER:case u.TAG_ID.HEADER:case u.TAG_ID.HGROUP:case u.TAG_ID.DIALOG:case u.TAG_ID.DETAILS:case u.TAG_ID.ADDRESS:case u.TAG_ID.ARTICLE:case u.TAG_ID.SEARCH:case u.TAG_ID.SECTION:case u.TAG_ID.SUMMARY:case u.TAG_ID.FIELDSET:case u.TAG_ID.BLOCKQUOTE:case u.TAG_ID.FIGCAPTION:e.openElements.hasInButtonScope(u.TAG_ID.P)&&e._closePElement(),e._insertElement(i,u.NS.HTML);break;case u.TAG_ID.LI:case u.TAG_ID.DD:case u.TAG_ID.DT:e.framesetOk=!1;let s=i.tagID;for(let t=e.openElements.stackTop;t>=0;t--){let n=e.openElements.tagIDs[t];if(s===u.TAG_ID.LI&&n===u.TAG_ID.LI||(s===u.TAG_ID.DD||s===u.TAG_ID.DT)&&(n===u.TAG_ID.DD||n===u.TAG_ID.DT)){e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n);break}if(n!==u.TAG_ID.ADDRESS&&n!==u.TAG_ID.DIV&&n!==u.TAG_ID.P&&e._isSpecialElement(e.openElements.items[t],n))break}e.openElements.hasInButtonScope(u.TAG_ID.P)&&e._closePElement(),e._insertElement(i,u.NS.HTML);break;case u.TAG_ID.BR:case u.TAG_ID.IMG:case u.TAG_ID.WBR:case u.TAG_ID.AREA:case u.TAG_ID.EMBED:case u.TAG_ID.KEYGEN:O(e,i);break;case u.TAG_ID.HR:e.openElements.hasInButtonScope(u.TAG_ID.P)&&e._closePElement(),e._appendElement(i,u.NS.HTML),e.framesetOk=!1,i.ackSelfClosing=!0;break;case u.TAG_ID.RB:case u.TAG_ID.RTC:e.openElements.hasInScope(u.TAG_ID.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(i,u.NS.HTML);break;case u.TAG_ID.RT:case u.TAG_ID.RP:e.openElements.hasInScope(u.TAG_ID.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(u.TAG_ID.RTC),e._insertElement(i,u.NS.HTML);break;case u.TAG_ID.PRE:case u.TAG_ID.LISTING:e.openElements.hasInButtonScope(u.TAG_ID.P)&&e._closePElement(),e._insertElement(i,u.NS.HTML),e.skipNextNewLine=!0,e.framesetOk=!1;break;case u.TAG_ID.XMP:e.openElements.hasInButtonScope(u.TAG_ID.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(i,n.TokenizerMode.RAWTEXT);break;case u.TAG_ID.SVG:e._reconstructActiveFormattingElements(),o.adjustTokenSVGAttrs(i),o.adjustTokenXMLAttrs(i),i.selfClosing?e._appendElement(i,u.NS.SVG):e._insertElement(i,u.NS.SVG),i.ackSelfClosing=!0;break;case u.TAG_ID.HTML:0===e.openElements.tmplCount&&e.treeAdapter.adoptAttributes(e.openElements.items[0],i.attrs);break;case u.TAG_ID.BASE:case u.TAG_ID.LINK:case u.TAG_ID.META:case u.TAG_ID.STYLE:case u.TAG_ID.TITLE:case u.TAG_ID.SCRIPT:case u.TAG_ID.BGSOUND:case u.TAG_ID.BASEFONT:case u.TAG_ID.TEMPLATE:_(e,i);break;case u.TAG_ID.BODY:let r=e.openElements.tryPeekProperlyNestedBodyElement();r&&0===e.openElements.tmplCount&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(r,i.attrs));break;case u.TAG_ID.FORM:let l=e.openElements.tmplCount>0;(!e.formElement||l)&&(e.openElements.hasInButtonScope(u.TAG_ID.P)&&e._closePElement(),e._insertElement(i,u.NS.HTML),l||(e.formElement=e.openElements.current));break;case u.TAG_ID.NOBR:e._reconstructActiveFormattingElements(),e.openElements.hasInScope(u.TAG_ID.NOBR)&&(T(e,i),e._reconstructActiveFormattingElements()),e._insertElement(i,u.NS.HTML),e.activeFormattingElements.pushElement(e.openElements.current,i);break;case u.TAG_ID.MATH:e._reconstructActiveFormattingElements(),o.adjustTokenMathMLAttrs(i),o.adjustTokenXMLAttrs(i),i.selfClosing?e._appendElement(i,u.NS.MATHML):e._insertElement(i,u.NS.MATHML),i.ackSelfClosing=!0;break;case u.TAG_ID.TABLE:e.treeAdapter.getDocumentMode(e.document)!==u.DOCUMENT_MODE.QUIRKS&&e.openElements.hasInButtonScope(u.TAG_ID.P)&&e._closePElement(),e._insertElement(i,u.NS.HTML),e.framesetOk=!1,e.insertionMode=t.IN_TABLE;break;case u.TAG_ID.INPUT:e._reconstructActiveFormattingElements(),e._appendElement(i,u.NS.HTML),R(i)||(e.framesetOk=!1),i.ackSelfClosing=!0;break;case u.TAG_ID.PARAM:case u.TAG_ID.TRACK:case u.TAG_ID.SOURCE:e._appendElement(i,u.NS.HTML),i.ackSelfClosing=!0;break;case u.TAG_ID.IMAGE:i.tagName=u.TAG_NAMES.IMG,i.tagID=u.TAG_ID.IMG,O(e,i);break;case u.TAG_ID.BUTTON:e.openElements.hasInScope(u.TAG_ID.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(u.TAG_ID.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(i,u.NS.HTML),e.framesetOk=!1;break;case u.TAG_ID.APPLET:case u.TAG_ID.OBJECT:case u.TAG_ID.MARQUEE:e._reconstructActiveFormattingElements(),e._insertElement(i,u.NS.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1;break;case u.TAG_ID.IFRAME:e.framesetOk=!1,e._switchToTextParsing(i,n.TokenizerMode.RAWTEXT);break;case u.TAG_ID.SELECT:e._reconstructActiveFormattingElements(),e._insertElement(i,u.NS.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===t.IN_TABLE||e.insertionMode===t.IN_CAPTION||e.insertionMode===t.IN_TABLE_BODY||e.insertionMode===t.IN_ROW||e.insertionMode===t.IN_CELL?t.IN_SELECT_IN_TABLE:t.IN_SELECT;break;case u.TAG_ID.OPTION:case u.TAG_ID.OPTGROUP:e.openElements.currentTagId===u.TAG_ID.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(i,u.NS.HTML);break;case u.TAG_ID.NOEMBED:case u.TAG_ID.NOFRAMES:P(e,i);break;case u.TAG_ID.FRAMESET:let c=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&c&&(e.treeAdapter.detachNode(c),e.openElements.popAllUpToHtmlElement(),e._insertElement(i,u.NS.HTML),e.insertionMode=t.IN_FRAMESET);break;case u.TAG_ID.TEXTAREA:e._insertElement(i,u.NS.HTML),e.skipNextNewLine=!0,e.tokenizer.state=n.TokenizerMode.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=t.TEXT;break;case u.TAG_ID.NOSCRIPT:e.options.scriptingEnabled?P(e,i):k(e,i);break;case u.TAG_ID.PLAINTEXT:e.openElements.hasInButtonScope(u.TAG_ID.P)&&e._closePElement(),e._insertElement(i,u.NS.HTML),e.tokenizer.state=n.TokenizerMode.PLAINTEXT;break;case u.TAG_ID.COL:case u.TAG_ID.TH:case u.TAG_ID.TD:case u.TAG_ID.TR:case u.TAG_ID.HEAD:case u.TAG_ID.FRAME:case u.TAG_ID.TBODY:case u.TAG_ID.TFOOT:case u.TAG_ID.THEAD:case u.TAG_ID.CAPTION:case u.TAG_ID.COLGROUP:break;default:k(e,i)}}function L(e,t){let n=t.tagName,i=t.tagID;for(let t=e.openElements.stackTop;t>0;t--){let a=e.openElements.items[t],s=e.openElements.tagIDs[t];if(i===s&&(i!==u.TAG_ID.UNKNOWN||e.treeAdapter.getTagName(a)===n)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.stackTop>=t&&e.openElements.shortenToLength(t);break}if(e._isSpecialElement(a,s))break}}function w(e,n){switch(n.tagID){case u.TAG_ID.A:case u.TAG_ID.B:case u.TAG_ID.I:case u.TAG_ID.S:case u.TAG_ID.U:case u.TAG_ID.EM:case u.TAG_ID.TT:case u.TAG_ID.BIG:case u.TAG_ID.CODE:case u.TAG_ID.FONT:case u.TAG_ID.NOBR:case u.TAG_ID.SMALL:case u.TAG_ID.STRIKE:case u.TAG_ID.STRONG:T(e,n);break;case u.TAG_ID.P:e.openElements.hasInButtonScope(u.TAG_ID.P)||e._insertFakeElement(u.TAG_NAMES.P,u.TAG_ID.P),e._closePElement();break;case u.TAG_ID.DL:case u.TAG_ID.UL:case u.TAG_ID.OL:case u.TAG_ID.DIR:case u.TAG_ID.DIV:case u.TAG_ID.NAV:case u.TAG_ID.PRE:case u.TAG_ID.MAIN:case u.TAG_ID.MENU:case u.TAG_ID.ASIDE:case u.TAG_ID.BUTTON:case u.TAG_ID.CENTER:case u.TAG_ID.FIGURE:case u.TAG_ID.FOOTER:case u.TAG_ID.HEADER:case u.TAG_ID.HGROUP:case u.TAG_ID.DIALOG:case u.TAG_ID.ADDRESS:case u.TAG_ID.ARTICLE:case u.TAG_ID.DETAILS:case u.TAG_ID.SEARCH:case u.TAG_ID.SECTION:case u.TAG_ID.SUMMARY:case u.TAG_ID.LISTING:case u.TAG_ID.FIELDSET:case u.TAG_ID.BLOCKQUOTE:case u.TAG_ID.FIGCAPTION:let i=n.tagID;e.openElements.hasInScope(i)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(i));break;case u.TAG_ID.LI:e.openElements.hasInListItemScope(u.TAG_ID.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(u.TAG_ID.LI),e.openElements.popUntilTagNamePopped(u.TAG_ID.LI));break;case u.TAG_ID.DD:case u.TAG_ID.DT:let a=n.tagID;e.openElements.hasInScope(a)&&(e.openElements.generateImpliedEndTagsWithExclusion(a),e.openElements.popUntilTagNamePopped(a));break;case u.TAG_ID.H1:case u.TAG_ID.H2:case u.TAG_ID.H3:case u.TAG_ID.H4:case u.TAG_ID.H5:case u.TAG_ID.H6:e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped());break;case u.TAG_ID.BR:e._reconstructActiveFormattingElements(),e._insertFakeElement(u.TAG_NAMES.BR,u.TAG_ID.BR),e.openElements.pop(),e.framesetOk=!1;break;case u.TAG_ID.BODY:if(e.openElements.hasInScope(u.TAG_ID.BODY)&&(e.insertionMode=t.AFTER_BODY,e.options.sourceCodeLocationInfo)){let t=e.openElements.tryPeekProperlyNestedBodyElement();t&&e._setEndLocation(t,n)}break;case u.TAG_ID.HTML:e.openElements.hasInScope(u.TAG_ID.BODY)&&(e.insertionMode=t.AFTER_BODY,et(e,n));break;case u.TAG_ID.FORM:let s=e.openElements.tmplCount>0,{formElement:r}=e;s||(e.formElement=null),(r||s)&&e.openElements.hasInScope(u.TAG_ID.FORM)&&(e.openElements.generateImpliedEndTags(),s?e.openElements.popUntilTagNamePopped(u.TAG_ID.FORM):r&&e.openElements.remove(r));break;case u.TAG_ID.APPLET:case u.TAG_ID.OBJECT:case u.TAG_ID.MARQUEE:let o=n.tagID;e.openElements.hasInScope(o)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(o),e.activeFormattingElements.clearToLastMarker());break;case u.TAG_ID.TEMPLATE:C(e,n);break;default:L(e,n)}}function G(e,t){e.tmplInsertionModeStack.length>0?ee(e,t):E(e,t)}function j(e,n){if(void 0!==e.openElements.currentTagId&&p.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=t.IN_TABLE_TEXT,n.type){case d.TokenType.CHARACTER:V(e,n);break;case d.TokenType.WHITESPACE_CHARACTER:H(e,n)}else U(e,n)}function B(e,n){switch(n.tagID){case u.TAG_ID.TD:case u.TAG_ID.TH:case u.TAG_ID.TR:e.openElements.clearBackToTableContext(),e._insertFakeElement(u.TAG_NAMES.TBODY,u.TAG_ID.TBODY),e.insertionMode=t.IN_TABLE_BODY,K(e,n);break;case u.TAG_ID.STYLE:case u.TAG_ID.SCRIPT:case u.TAG_ID.TEMPLATE:_(e,n);break;case u.TAG_ID.COL:e.openElements.clearBackToTableContext(),e._insertFakeElement(u.TAG_NAMES.COLGROUP,u.TAG_ID.COLGROUP),e.insertionMode=t.IN_COLUMN_GROUP,W(e,n);break;case u.TAG_ID.FORM:e.formElement||0!==e.openElements.tmplCount||(e._insertElement(n,u.NS.HTML),e.formElement=e.openElements.current,e.openElements.pop());break;case u.TAG_ID.TABLE:e.openElements.hasInTableScope(u.TAG_ID.TABLE)&&(e.openElements.popUntilTagNamePopped(u.TAG_ID.TABLE),e._resetInsertionMode(),e._processStartTag(n));break;case u.TAG_ID.TBODY:case u.TAG_ID.TFOOT:case u.TAG_ID.THEAD:e.openElements.clearBackToTableContext(),e._insertElement(n,u.NS.HTML),e.insertionMode=t.IN_TABLE_BODY;break;case u.TAG_ID.INPUT:R(n)?e._appendElement(n,u.NS.HTML):U(e,n),n.ackSelfClosing=!0;break;case u.TAG_ID.CAPTION:e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(n,u.NS.HTML),e.insertionMode=t.IN_CAPTION;break;case u.TAG_ID.COLGROUP:e.openElements.clearBackToTableContext(),e._insertElement(n,u.NS.HTML),e.insertionMode=t.IN_COLUMN_GROUP;break;default:U(e,n)}}function F(e,t){switch(t.tagID){case u.TAG_ID.TABLE:e.openElements.hasInTableScope(u.TAG_ID.TABLE)&&(e.openElements.popUntilTagNamePopped(u.TAG_ID.TABLE),e._resetInsertionMode());break;case u.TAG_ID.TEMPLATE:C(e,t);break;case u.TAG_ID.BODY:case u.TAG_ID.CAPTION:case u.TAG_ID.COL:case u.TAG_ID.COLGROUP:case u.TAG_ID.HTML:case u.TAG_ID.TBODY:case u.TAG_ID.TD:case u.TAG_ID.TFOOT:case u.TAG_ID.TH:case u.TAG_ID.THEAD:case u.TAG_ID.TR:break;default:U(e,t)}}function U(e,t){let n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,y(e,t),e.fosterParentingEnabled=n}function H(e,t){e.pendingCharacterTokens.push(t)}function V(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function Y(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)U(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}let z=new Set([u.TAG_ID.CAPTION,u.TAG_ID.COL,u.TAG_ID.COLGROUP,u.TAG_ID.TBODY,u.TAG_ID.TD,u.TAG_ID.TFOOT,u.TAG_ID.TH,u.TAG_ID.THEAD,u.TAG_ID.TR]);function W(e,t){switch(t.tagID){case u.TAG_ID.HTML:M(e,t);break;case u.TAG_ID.COL:e._appendElement(t,u.NS.HTML),t.ackSelfClosing=!0;break;case u.TAG_ID.TEMPLATE:_(e,t);break;default:q(e,t)}}function q(e,n){e.openElements.currentTagId===u.TAG_ID.COLGROUP&&(e.openElements.pop(),e.insertionMode=t.IN_TABLE,e._processToken(n))}function K(e,n){switch(n.tagID){case u.TAG_ID.TR:e.openElements.clearBackToTableBodyContext(),e._insertElement(n,u.NS.HTML),e.insertionMode=t.IN_ROW;break;case u.TAG_ID.TH:case u.TAG_ID.TD:e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(u.TAG_NAMES.TR,u.TAG_ID.TR),e.insertionMode=t.IN_ROW,X(e,n);break;case u.TAG_ID.CAPTION:case u.TAG_ID.COL:case u.TAG_ID.COLGROUP:case u.TAG_ID.TBODY:case u.TAG_ID.TFOOT:case u.TAG_ID.THEAD:e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=t.IN_TABLE,B(e,n));break;default:B(e,n)}}function Q(e,n){let i=n.tagID;switch(n.tagID){case u.TAG_ID.TBODY:case u.TAG_ID.TFOOT:case u.TAG_ID.THEAD:e.openElements.hasInTableScope(i)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=t.IN_TABLE);break;case u.TAG_ID.TABLE:e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=t.IN_TABLE,F(e,n));break;case u.TAG_ID.BODY:case u.TAG_ID.CAPTION:case u.TAG_ID.COL:case u.TAG_ID.COLGROUP:case u.TAG_ID.HTML:case u.TAG_ID.TD:case u.TAG_ID.TH:case u.TAG_ID.TR:break;default:F(e,n)}}function X(e,n){switch(n.tagID){case u.TAG_ID.TH:case u.TAG_ID.TD:e.openElements.clearBackToTableRowContext(),e._insertElement(n,u.NS.HTML),e.insertionMode=t.IN_CELL,e.activeFormattingElements.insertMarker();break;case u.TAG_ID.CAPTION:case u.TAG_ID.COL:case u.TAG_ID.COLGROUP:case u.TAG_ID.TBODY:case u.TAG_ID.TFOOT:case u.TAG_ID.THEAD:case u.TAG_ID.TR:e.openElements.hasInTableScope(u.TAG_ID.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=t.IN_TABLE_BODY,K(e,n));break;default:B(e,n)}}function J(e,n){switch(n.tagID){case u.TAG_ID.TR:e.openElements.hasInTableScope(u.TAG_ID.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=t.IN_TABLE_BODY);break;case u.TAG_ID.TABLE:e.openElements.hasInTableScope(u.TAG_ID.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=t.IN_TABLE_BODY,Q(e,n));break;case u.TAG_ID.TBODY:case u.TAG_ID.TFOOT:case u.TAG_ID.THEAD:(e.openElements.hasInTableScope(n.tagID)||e.openElements.hasInTableScope(u.TAG_ID.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=t.IN_TABLE_BODY,Q(e,n));break;case u.TAG_ID.BODY:case u.TAG_ID.CAPTION:case u.TAG_ID.COL:case u.TAG_ID.COLGROUP:case u.TAG_ID.HTML:case u.TAG_ID.TD:case u.TAG_ID.TH:break;default:F(e,n)}}function Z(e,t){switch(t.tagID){case u.TAG_ID.HTML:M(e,t);break;case u.TAG_ID.OPTION:e.openElements.currentTagId===u.TAG_ID.OPTION&&e.openElements.pop(),e._insertElement(t,u.NS.HTML);break;case u.TAG_ID.OPTGROUP:e.openElements.currentTagId===u.TAG_ID.OPTION&&e.openElements.pop(),e.openElements.currentTagId===u.TAG_ID.OPTGROUP&&e.openElements.pop(),e._insertElement(t,u.NS.HTML);break;case u.TAG_ID.HR:e.openElements.currentTagId===u.TAG_ID.OPTION&&e.openElements.pop(),e.openElements.currentTagId===u.TAG_ID.OPTGROUP&&e.openElements.pop(),e._appendElement(t,u.NS.HTML),t.ackSelfClosing=!0;break;case u.TAG_ID.INPUT:case u.TAG_ID.KEYGEN:case u.TAG_ID.TEXTAREA:case u.TAG_ID.SELECT:e.openElements.hasInSelectScope(u.TAG_ID.SELECT)&&(e.openElements.popUntilTagNamePopped(u.TAG_ID.SELECT),e._resetInsertionMode(),t.tagID!==u.TAG_ID.SELECT&&e._processStartTag(t));break;case u.TAG_ID.SCRIPT:case u.TAG_ID.TEMPLATE:_(e,t)}}function $(e,t){switch(t.tagID){case u.TAG_ID.OPTGROUP:e.openElements.stackTop>0&&e.openElements.currentTagId===u.TAG_ID.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===u.TAG_ID.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===u.TAG_ID.OPTGROUP&&e.openElements.pop();break;case u.TAG_ID.OPTION:e.openElements.currentTagId===u.TAG_ID.OPTION&&e.openElements.pop();break;case u.TAG_ID.SELECT:e.openElements.hasInSelectScope(u.TAG_ID.SELECT)&&(e.openElements.popUntilTagNamePopped(u.TAG_ID.SELECT),e._resetInsertionMode());break;case u.TAG_ID.TEMPLATE:C(e,t)}}function ee(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(u.TAG_ID.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):E(e,t)}function et(e,n){var i;if(n.tagID===u.TAG_ID.HTML){if(e.fragmentContext||(e.insertionMode=t.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===u.TAG_ID.HTML){e._setEndLocation(e.openElements.items[0],n);let t=e.openElements.items[1];!t||(null==(i=e.treeAdapter.getNodeSourceCodeLocation(t))?void 0:i.endTag)||e._setEndLocation(t,n)}}else en(e,n)}function en(e,n){e.insertionMode=t.IN_BODY,y(e,n)}function ei(e,n){e.insertionMode=t.IN_BODY,y(e,n)}function ea(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==u.NS.HTML&&void 0!==e.openElements.currentTagId&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}},651405:e=>{"use strict";function t(e,t){return function(n){let i,a=0,s="";for(;i=e.exec(n);)a!==i.index&&(s+=n.substring(a,i.index)),s+=t.get(i[0].charCodeAt(0)),a=i.index+1;return s+n.substring(a)}}e.s({escapeAttribute:()=>n,escapeText:()=>i}),null==String.prototype.codePointAt||((e,t)=>e.codePointAt(t));let n=t(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),i=t(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]]))},576857:e=>{"use strict";e.s({});var t=e.i(195083);e.i(651405);var n=e.i(692403);t.TAG_NAMES.AREA,t.TAG_NAMES.BASE,t.TAG_NAMES.BASEFONT,t.TAG_NAMES.BGSOUND,t.TAG_NAMES.BR,t.TAG_NAMES.COL,t.TAG_NAMES.EMBED,t.TAG_NAMES.FRAME,t.TAG_NAMES.HR,t.TAG_NAMES.IMG,t.TAG_NAMES.INPUT,t.TAG_NAMES.KEYGEN,t.TAG_NAMES.LINK,t.TAG_NAMES.META,t.TAG_NAMES.PARAM,t.TAG_NAMES.SOURCE,t.TAG_NAMES.TRACK,t.TAG_NAMES.WBR,n.defaultTreeAdapter},552536:e=>{"use strict";e.s({}),e.i(318538),e.i(692403),e.i(576857),e.i(943655),e.i(973899),e.i(195083),e.i(858284),e.i(181991)},471675:e=>{"use strict";e.s({}),e.i(318538),e.i(692403),e.i(576857),e.i(943655),e.i(973899),e.i(195083),e.i(858284),e.i(181991),e.i(552536)},757566:e=>{"use strict";e.s({Token:()=>t});var t=e.i(858284)},874978:e=>{"use strict";e.s({html:()=>t});var t=e.i(195083)},203398:e=>{"use strict";e.s({raw:()=>T});var t=e.i(502646),n=e.i(444982),i=e.i(625778),a=e.i(204545);e.i(471675);var s=e.i(318538),r=e.i(757566),o=e.i(181991),l=e.i(874978),c=e.i(107723),u=e.i(792021),d=e.i(871336),h=e.i(521390);let p=/<(\/?)(iframe|noembed|noframes|plaintext|script|style|textarea|title|xmp)(?=[\t\n\f\r />])/gi,m=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),f={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function T(e,t){let i=function(e){let t="root"===e.type?e.children[0]:e;return!!(t&&("doctype"===t.type||"element"===t.type&&"html"===t.tagName.toLowerCase()))}(e),a=(0,h.zwitch)("type",{handlers:{root:E,element:A,text:x,comment:_,doctype:I,raw:C},unknown:v}),r={parser:i?new s.Parser(f):s.Parser.getFragmentParser(void 0,f),handle(e){a(e,r)},stitches:!1,options:t||{}};a(e,r),S(r,(0,c.pointStart)());let o=i?r.parser.document:r.parser.getFragment(),l=(0,n.fromParse5)(o,{file:r.options.file});return(r.stitches&&(0,u.visit)(l,"comment",function(e,t,n){if(e.value.stitch&&n&&void 0!==t)return n.children[t]=e.value.stitch,t}),"root"===l.type&&1===l.children.length&&l.children[0].type===e.type)?l.children[0]:l}function g(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function E(e,t){g(e.children,t)}function A(e,t){(function(e,t){let n=e.tagName.toLowerCase();if(t.parser.tokenizer.state===o.TokenizerMode.PLAINTEXT)return;S(t,(0,c.pointStart)(e));let a=t.parser.openElements.current,s="namespaceURI"in a?a.namespaceURI:d.webNamespaces.html;s===d.webNamespaces.html&&"svg"===n&&(s=d.webNamespaces.svg);let u=(0,i.toParse5)({...e,children:[]},{space:s===d.webNamespaces.svg?"svg":"html"}),h={type:r.Token.TokenType.START_TAG,tagName:n,tagID:l.html.getTagID(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in u?u.attrs:[],location:y(e)};t.parser.currentToken=h,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=n})(e,t),g(e.children,t),function(e,t){let n=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&a.htmlVoidElements.includes(n)||t.parser.tokenizer.state===o.TokenizerMode.PLAINTEXT)return;S(t,(0,c.pointEnd)(e));let i={type:r.Token.TokenType.END_TAG,tagName:n,tagID:l.html.getTagID(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:y(e)};t.parser.currentToken=i,t.parser._processToken(t.parser.currentToken),n===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===o.TokenizerMode.RCDATA||t.parser.tokenizer.state===o.TokenizerMode.RAWTEXT||t.parser.tokenizer.state===o.TokenizerMode.SCRIPT_DATA)&&(t.parser.tokenizer.state=o.TokenizerMode.DATA)}(e,t)}function x(e,t){t.parser.tokenizer.state>4&&(t.parser.tokenizer.state=0);let n={type:r.Token.TokenType.CHARACTER,chars:e.value,location:y(e)};S(t,(0,c.pointStart)(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function I(e,t){let n={type:r.Token.TokenType.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:y(e)};S(t,(0,c.pointStart)(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function _(e,t){let n=e.value,i={type:r.Token.TokenType.COMMENT,data:n,location:y(e)};S(t,(0,c.pointStart)(e)),t.parser.currentToken=i,t.parser._processToken(t.parser.currentToken)}function C(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,D(t,(0,c.pointStart)(e)),t.parser.tokenizer.write(t.options.tagfilter?e.value.replace(p,"&lt;$1$2"):e.value,!1),t.parser.tokenizer._runParsingLoop(),72===t.parser.tokenizer.state||78===t.parser.tokenizer.state){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;let e=t.parser.tokenizer._consume();t.parser.tokenizer._callState(e)}}function v(e,n){if(n.options.passThrough&&n.options.passThrough.includes(e.type)){var i;n.stitches=!0;let a="children"in(i=e)?(0,t.default)({...i,children:[]}):(0,t.default)(i);"children"in e&&"children"in a&&(a.children=T({type:"root",children:e.children},n.options).children),_({type:"comment",value:{stitch:a}},n)}else{let t="";throw m.has(e.type)&&(t=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),Error("Cannot compile `"+e.type+"` node"+t)}}function S(e,t){D(e,t);let n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=o.TokenizerMode.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function D(e,t){if(t&&void 0!==t.offset){let n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function y(e){let t=(0,c.pointStart)(e)||{line:void 0,column:void 0,offset:void 0},n=(0,c.pointEnd)(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}},214769:e=>{"use strict";e.s({default:()=>n});var t=e.i(203398);function n(e){return function(n,i){return(0,t.raw)(n,{...e,file:i})}}},183501:e=>{"use strict";e.s({ChatV2Step:()=>i});var t=e.i(290479),n=e.i(972899);let i=e=>{let{icon:i,title:a,results:s,resultsText:r="results",isLoading:o=!1}=e,l=!!(s&&s>0);return(0,t.jsxs)("div",{className:"flex items-center  gap-2  h-[20px] select-none relative min-w-0 ".concat(o?"shimmer-container":""),children:[(0,t.jsx)(n.Icon,{as:i,className:"text-text-secondary flex-shrink-0"}),(0,t.jsxs)("p",{className:"text-sm text-text-secondary truncate min-w-0",children:[a," ",l&&(0,t.jsxs)("span",{className:"text-feint-foreground",children:[" ",s," ",r]})]})]})}},298807:e=>{"use strict";e.s({SearchResultsSection:()=>c});var t=e.i(290479),n=e.i(996481),i=e.i(34818),a=e.i(373150),s=e.i(289702),r=e.i(389938),o=e.i(972899),l=e.i(183501);let c=e=>{let{id:c,icon:u,title:d,resultsCount:h,isLoading:p,children:m,resultsText:f="results",defaultOpen:T=!1}=e,[g,E]=(0,a.useState)(T),A=(!p||"questions"===f)&&(null!=h&&h>0||T);return(0,t.jsxs)(r.Collapsible,{open:g,onOpenChange:A?E:void 0,className:"flex flex-col gap-6",children:[(0,t.jsx)(r.CollapsibleTrigger,{asChild:!0,disabled:!A,children:(0,t.jsxs)("div",{className:(0,s.cn)("flex items-center gap-2",A&&"cursor-pointer"),children:[(0,t.jsx)(l.ChatV2Step,{icon:u,results:h,title:d,resultsText:f,isLoading:p}),A&&(0,t.jsx)(i.motion.div,{animate:{rotate:90*!!g},transition:{duration:.2,ease:"easeInOut"},children:(0,t.jsx)(o.Icon,{className:"text-feint-foreground",as:n.ChevronRight})})]})}),(0,t.jsx)(r.CollapsibleContent,{children:A&&(0,t.jsx)("div",{className:"flex flex-col w-full border rounded-4 p-4",children:m})})]},c)}},789643:e=>{"use strict";e.s({default:()=>d});var t=e.i(290479),n=e.i(874133),i=e.i(486137),a=e.i(516555),s=e.i(373150),r=e.i(214769),o=e.i(280859),l=e.i(972899),c=e.i(298807);let u={p:e=>{let{children:n}=e;return(0,t.jsx)("span",{children:n})},a:e=>{let{href:n,children:i}=e;return(0,t.jsx)("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"underline",children:i})},strong:e=>{let{children:n}=e;return(0,t.jsx)("strong",{className:"font-semibold",children:n})},em:e=>{let{children:n}=e;return(0,t.jsx)("em",{className:"italic",children:n})},i:e=>{let{children:n}=e;return(0,t.jsx)("i",{className:"italic",children:n})}},d=e=>{let{part:d}=e,[h,p]=(0,s.useState)(!1),[m,f]=(0,s.useState)(!1),T=d.status,g="pending"===T,E=d.data,A=(null==E?void 0:E.citations)||[],x=(null==E?void 0:E.processedCount)||0;return(0,t.jsx)(c.SearchResultsSection,{id:d.id,icon:a.MessageSquareQuote,defaultOpen:!0,title:g?"Creating citation".concat((null==E?void 0:E.totalDocuments)&&E.totalDocuments>1?"s":""):"Created citation".concat(1!==A.length?"s":""),isLoading:g,children:(0,t.jsxs)("div",{className:"w-full py-6 px-7",children:[g&&0===x&&(0,t.jsx)("div",{className:" text-text-secondary",children:"Loading"}),g&&x>0&&(0,t.jsx)("div",{className:"text-text-secondary",children:"Loading"}),"error"===T&&(0,t.jsx)("div",{className:"text-sm text-destructive",children:"An error occurred while generating citations. Please try again."}),"success"===T&&0===A.length&&(0,t.jsx)("div",{className:"text-text-secondary",children:"No documents with sufficient metadata found for citation generation."}),"success"===T&&A.length>0&&(0,t.jsxs)("div",{className:"relative group text-sm",onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1),children:[1===A.length?(0,t.jsx)("div",{className:"text-text-secondary pr-9",children:(0,t.jsx)(o.Streamdown,{components:u,rehypePlugins:[r.default],children:A[0].citation})}):(0,t.jsx)("ol",{className:"list-decimal list-inside space-y-2 pr-9",children:A.map(e=>(0,t.jsx)("li",{className:"text-text-secondary",children:(0,t.jsx)(o.Streamdown,{components:u,className:"inline",rehypePlugins:[r.default],children:e.citation})},e.id))}),m&&(0,t.jsx)("div",{onClick:()=>{let e=A.map((e,t)=>{let n=A.length>1?"".concat(t+1,". "):"",i=(e=>{let t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText||""})(e.citation);return"".concat(n).concat(i)}).join("\n\n");navigator.clipboard.writeText(e),p(!0),setTimeout(()=>p(!1),2e3)},className:"absolute top-0 -right-4 flex items-center gap-4 px-3 py-3 text-sm rounded-4 hover:bg-accent cursor-pointer transition-colors",children:(0,t.jsx)(l.Icon,{as:h?n.Check:i.Copy,className:"size-7 text-text-secondary"})})]})]})})}},128536:e=>{"use strict";e.s({MixedFlashcardCarousel:()=>a});var t=e.i(290479),n=e.i(373150),i=e.i(296709);let a=e=>{let{flashcards:a,isGenerating:s=!1}=e,[r,o]=(0,n.useState)(0);return(0,t.jsx)(i.default,{flashcards:a,isGenerating:s,currentIndex:r,onIndexChange:o})}},16515:e=>{"use strict";e.s({FlashcardGenerationSection:()=>u});var t=e.i(290479),n=e.i(381612),i=e.i(996481),a=e.i(373150),s=e.i(289702),r=e.i(389938),o=e.i(972899),l=e.i(128536),c=e.i(183501);let u=e=>{let{id:u,icon:d,title:h,resultsCount:p,isLoading:m,flashcardData:f}=e,[T,g]=(0,a.useState)(!0),E=!m&&p>0;return(0,t.jsxs)(r.Collapsible,{open:T,onOpenChange:E?g:void 0,className:"flex flex-col gap-6",children:[(0,t.jsx)(r.CollapsibleTrigger,{asChild:!0,disabled:!E,children:(0,t.jsxs)("div",{className:(0,s.cn)("flex items-center gap-2",E&&"cursor-pointer"),children:[(0,t.jsx)(c.ChatV2Step,{icon:d,results:p,title:h,isLoading:m}),E&&(0,t.jsx)(o.Icon,{className:"text-feint-foreground",as:T?n.ChevronDown:i.ChevronRight})]})}),(0,t.jsx)(r.CollapsibleContent,{children:E&&(0,t.jsx)("div",{className:"flex flex-col w-full border rounded-6 p-7",children:(0,t.jsx)("div",{className:"flex justify-center items-center h-[520px] w-full relative overflow-hidden  ",children:(0,t.jsx)(l.MixedFlashcardCarousel,{flashcards:(null==f?void 0:f.flashcards)||[],isGenerating:m})})})})]},u)}},436519:e=>{"use strict";e.s({differenceInCalendarMonths:()=>n});var t=e.i(163015);function n(e,n){let i=(0,t.toDate)(e),a=(0,t.toDate)(n);return 12*(i.getFullYear()-a.getFullYear())+(i.getMonth()-a.getMonth())}},745451:e=>{"use strict";e.s({isLastDayOfMonth:()=>a});var t=e.i(93744),n=e.i(362060),i=e.i(163015);function a(e){let a=(0,i.toDate)(e);return+(0,t.endOfDay)(a)==+(0,n.endOfMonth)(a)}},780504:e=>{"use strict";e.s({differenceInMonths:()=>s});var t=e.i(585689),n=e.i(436519),i=e.i(745451),a=e.i(163015);function s(e,s){let r,o=(0,a.toDate)(e),l=(0,a.toDate)(s),c=(0,t.compareAsc)(o,l),u=Math.abs((0,n.differenceInCalendarMonths)(o,l));if(u<1)r=0;else{1===o.getMonth()&&o.getDate()>27&&o.setDate(30),o.setMonth(o.getMonth()-c*u);let n=(0,t.compareAsc)(o,l)===-c;(0,i.isLastDayOfMonth)((0,a.toDate)(e))&&1===u&&1===(0,t.compareAsc)(e,l)&&(n=!1),r=c*(u-Number(n))}return 0===r?0:r}},21740:e=>{"use strict";e.s({formatDistance:()=>c});var t=e.i(585689),n=e.i(734664),i=e.i(780504),a=e.i(428309),s=e.i(163015),r=e.i(445897),o=e.i(314870),l=e.i(203802);function c(e,c,u){var d,h;let p,m,f,T=(0,o.getDefaultOptions)(),g=null!=(h=null!=(d=null==u?void 0:u.locale)?d:T.locale)?h:r.defaultLocale,E=(0,t.compareAsc)(e,c);if(isNaN(E))throw RangeError("Invalid time value");let A=Object.assign({},u,{addSuffix:null==u?void 0:u.addSuffix,comparison:E});E>0?(p=(0,s.toDate)(c),m=(0,s.toDate)(e)):(p=(0,s.toDate)(e),m=(0,s.toDate)(c));let x=(0,a.differenceInSeconds)(m,p),I=Math.round((x-((0,l.getTimezoneOffsetInMilliseconds)(m)-(0,l.getTimezoneOffsetInMilliseconds)(p))/1e3)/60);if(I<2)if(null==u?void 0:u.includeSeconds)if(x<5)return g.formatDistance("lessThanXSeconds",5,A);else if(x<10)return g.formatDistance("lessThanXSeconds",10,A);else if(x<20)return g.formatDistance("lessThanXSeconds",20,A);else if(x<40)return g.formatDistance("halfAMinute",0,A);else if(x<60)return g.formatDistance("lessThanXMinutes",1,A);else return g.formatDistance("xMinutes",1,A);else if(0===I)return g.formatDistance("lessThanXMinutes",1,A);else return g.formatDistance("xMinutes",I,A);if(I<45)return g.formatDistance("xMinutes",I,A);if(I<90)return g.formatDistance("aboutXHours",1,A);if(I<n.minutesInDay){let e=Math.round(I/60);return g.formatDistance("aboutXHours",e,A)}if(I<2520)return g.formatDistance("xDays",1,A);else if(I<n.minutesInMonth){let e=Math.round(I/n.minutesInDay);return g.formatDistance("xDays",e,A)}else if(I<2*n.minutesInMonth)return f=Math.round(I/n.minutesInMonth),g.formatDistance("aboutXMonths",f,A);if((f=(0,i.differenceInMonths)(m,p))<12){let e=Math.round(I/n.minutesInMonth);return g.formatDistance("xMonths",e,A)}{let e=f%12,t=Math.trunc(f/12);return e<3?g.formatDistance("aboutXYears",t,A):e<9?g.formatDistance("overXYears",t,A):g.formatDistance("almostXYears",t+1,A)}}},635450:e=>{"use strict";e.s({formatDistanceToNow:()=>i});var t=e.i(350684),n=e.i(21740);function i(e,i){return(0,n.formatDistance)(e,(0,t.constructNow)(e),i)}},525461:e=>{"use strict";e.s({default:()=>c});var t=e.i(290479),n=e.i(635450),i=e.i(608294),a=e.i(227348),s=e.i(136250),r=e.i(373150),o=e.i(298807);let l=(0,a.atomFamily)(e=>(0,a.atomWithStorage)("form-decomposition-".concat(e),{completedIds:[],totalQuestions:0,startedAt:new Date})),c=e=>{let{part:a}=e,c=a.status,u="pending"===c,[d,h]=(0,i.useAtom)(l(a.id));return(0,r.useEffect)(()=>{a.completedId&&!d.completedIds.includes(a.completedId)&&h({...d,completedIds:[...d.completedIds,a.completedId]})},[a.completedId,d.completedIds,h]),(0,r.useEffect)(()=>{!d.totalQuestions&&a.numberOfQuestions&&h({...d,totalQuestions:a.numberOfQuestions})},[d.totalQuestions,a.numberOfQuestions,h]),(0,t.jsx)(o.SearchResultsSection,{id:a.id,icon:s.ClockFading,title:u?"Completing form":"Completed form",resultsCount:d.totalQuestions,isLoading:u,resultsText:"questions",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 w-fit p-6 text-text-secondary text-sm",children:[u&&0===d.completedIds.length&&(0,t.jsx)("span",{children:"Breaking up response"}),u&&d.completedIds.length>0&&(0,t.jsxs)("span",{children:["Answered ",d.completedIds.length," of"," ",d.totalQuestions," questions"]}),"success"===c&&(0,t.jsx)("span",{children:"Completed form"}),!a.duration&&d.startedAt&&(0,t.jsx)("span",{className:"text-feint-foreground",children:(0,n.formatDistanceToNow)(d.startedAt)}),a.duration&&(0,t.jsxs)("span",{className:"text-feint-foreground",children:[Math.floor(a.duration/60)>0&&"".concat(Math.floor(a.duration/60),"m "),(a.duration%60).toFixed(1),"s"]})]})})}},419605:e=>{"use strict";e.s({})},513070:e=>{"use strict";e.s({}),e.i(419605)},611925:e=>{"use strict";e.s({DialogContext:()=>t});let t=e.i(373150).createContext(void 0)},218437:e=>{"use strict";e.s({DialogRootContext:()=>i,useDialogRootContext:()=>s,useOptionalDialogRootContext:()=>a});var t=e.i(373150),n=e.i(611925);let i=t.createContext(void 0);function a(){let e=t.useContext(i),a=t.useContext(n.DialogContext);if(void 0!==a||void 0!==e)return{...e,...a}}function s(){let e=t.useContext(i),a=t.useContext(n.DialogContext);if(void 0===a)throw Error("Base UI: DialogRootContext is missing. Dialog parts must be placed within <Dialog.Root>.");return{...e,...a}}},378573:e=>{"use strict";e.s({useRefWithInit:()=>i});var t=e.i(373150);let n={};function i(e,i){let a=t.useRef(n);return a.current===n&&(a.current=e(i)),a}},954200:e=>{"use strict";e.s({useMergedRefs:()=>n,useMergedRefsN:()=>i});var t=e.i(378573);function n(e,n,i,r){var o,l,c,u,d;let h=(0,t.useRefWithInit)(a).current;return o=h,l=e,c=n,u=i,d=r,(o.refs[0]!==l||o.refs[1]!==c||o.refs[2]!==u||o.refs[3]!==d)&&s(h,[e,n,i,r]),h.callback}function i(e){var n,i;let r=(0,t.useRefWithInit)(a).current;return n=r,i=e,(n.refs.length!==i.length||n.refs.some((e,t)=>e!==i[t]))&&s(r,e),r.callback}function a(){return{callback:null,cleanup:null,refs:[]}}function s(e,t){if(e.refs=t,t.every(e=>null==e)){e.callback=null;return}e.callback=n=>{if(e.cleanup&&(e.cleanup(),e.cleanup=null),null!=n){let i=Array(t.length).fill(null);for(let e=0;e<t.length;e+=1){let a=t[e];if(null!=a)switch(typeof a){case"function":{let t=a(n);"function"==typeof t&&(i[e]=t);break}case"object":a.current=n}}e.cleanup=()=>{for(let e=0;e<t.length;e+=1){let n=t[e];if(null!=n)switch(typeof n){case"function":{let t=i[e];"function"==typeof t?t():n(null);break}case"object":n.current=null}}}}}}},803532:e=>{"use strict";e.s({isReactVersionAtLeast:()=>n});let t=parseInt(e.i(373150).version,10);function n(e){return t>=e}},102978:e=>{"use strict";function t(e,t){return e&&!t?e:!e&&t?t:e||t?{...e,...t}:void 0}e.s({mergeObjects:()=>t})},503671:e=>{"use strict";function t(e,t){let n={};for(let i in e){let a=e[i];if(null==t?void 0:t.hasOwnProperty(i)){let e=t[i](a);null!=e&&Object.assign(n,e);continue}!0===a?n["data-".concat(i.toLowerCase())]="":a&&(n["data-".concat(i.toLowerCase())]=a.toString())}return n}e.s({getStyleHookProps:()=>t})},20720:e=>{"use strict";function t(e,t){return"function"==typeof e?e(t):e}e.s({resolveClassName:()=>t})},842192:e=>{"use strict";e.s({makeEventPreventable:()=>l,mergeClassNames:()=>c,mergeProps:()=>i,mergePropsN:()=>a});var t=e.i(102978);let n={};function i(e,t,i,a,r){let l={...o(e,n)};return t&&(l=s(l,t)),i&&(l=s(l,i)),a&&(l=s(l,a)),r&&(l=s(l,r)),l}function a(e){if(0===e.length)return n;if(1===e.length)return o(e[0],n);let t={...o(e[0],n)};for(let n=1;n<e.length;n+=1)t=s(t,e[n]);return t}function s(e,n){return r(n)?n(e):function(e,n){if(!n)return e;for(let i in n){let a=n[i];switch(i){case"style":e[i]=(0,t.mergeObjects)(e.style,a);break;case"className":e[i]=c(e.className,a);break;default:!function(e,t){let n=e.charCodeAt(0),i=e.charCodeAt(1),a=e.charCodeAt(2);return 111===n&&110===i&&a>=65&&a<=90&&("function"==typeof t||void 0===t)}(i,a)?e[i]=a:e[i]=function(e,t){return t?e?n=>{var i;if(null!=(i=n)&&"object"==typeof i&&"nativeEvent"in i){l(n);let i=t(n);return n.baseUIHandlerPrevented||null==e||e(n),i}let a=t(n);return null==e||e(n),a}:t:e}(e[i],a)}}return e}(e,n)}function r(e){return"function"==typeof e}function o(e,t){return r(e)?e(t):null!=e?e:n}function l(e){return e.preventBaseUIHandler=()=>{e.baseUIHandlerPrevented=!0},e}function c(e,t){return t?e?t+" "+e:t:e}},108521:e=>{"use strict";e.s({CLICK_TRIGGER_IDENTIFIER:()=>n,EMPTY_OBJECT:()=>t});let t={},n="data-base-ui-click-trigger"},348580:e=>{"use strict";e.s({useRenderElement:()=>u});var t=e.i(373150),n=e.i(954200),i=e.i(803532),a=e.i(102978),s=e.i(503671),r=e.i(20720),o=e.i(842192),l=e.i(108521),c=e.i(290479);function u(e,i){var u;let h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},p=i.render,m=function(e){var i;let c,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{className:h,render:p}=e,{state:m=l.EMPTY_OBJECT,ref:f,props:T,disableStyleHooks:g,customStyleHookMapping:E,enabled:A=!0}=u,x=A?(0,r.resolveClassName)(h,m):void 0;!0!==g&&(c=t.useMemo(()=>A?(0,s.getStyleHookProps)(m,E):l.EMPTY_OBJECT,[m,E,A]));let I=A&&null!=(i=(0,a.mergeObjects)(c,Array.isArray(T)?(0,o.mergePropsN)(T):T))?i:l.EMPTY_OBJECT;return("undefined"!=typeof document&&(A?Array.isArray(f)?I.ref=(0,n.useMergedRefsN)([I.ref,d(p),...f]):I.ref=(0,n.useMergedRefs)(I.ref,d(p),f):(0,n.useMergedRefs)(null,null)),A)?(void 0!==x&&(I.className=(0,o.mergeClassNames)(I.className,x)),I):l.EMPTY_OBJECT}(i,h);return!1===h.enabled?null:function(e,n,i,a){if(n){if("function"==typeof n)return n(i,a);let e=(0,o.mergeProps)(i,n.props);return e.ref=i.ref,t.cloneElement(n,e)}if(e&&"string"==typeof e){var s,r;return s=e,r=i,"button"===s?(0,c.jsx)("button",{type:"button",...r}):"img"===s?(0,c.jsx)("img",{alt:"",...r}):t.createElement(s,r)}throw Error("Base UI: Render element or function are not defined.")}(e,p,m,null!=(u=h.state)?u:l.EMPTY_OBJECT)}function d(e){return e&&"function"!=typeof e?(0,i.isReactVersionAtLeast)(19)?e.props.ref:e.ref:null}},761298:e=>{"use strict";e.s({TransitionStatusDataAttributes:()=>t,transitionStatusMapping:()=>a});let t=function(e){return e.startingStyle="data-starting-style",e.endingStyle="data-ending-style",e}({}),n={[t.startingStyle]:""},i={[t.endingStyle]:""},a={transitionStatus:e=>"starting"===e?n:"ending"===e?i:null}},866533:e=>{"use strict";e.s({CommonPopupDataAttributes:()=>n,popupStateMapping:()=>c,triggerOpenStateMapping:()=>l});var t=e.i(761298);let n=function(e){return e.open="data-open",e.closed="data-closed",e[e.startingStyle=t.TransitionStatusDataAttributes.startingStyle]="startingStyle",e[e.endingStyle=t.TransitionStatusDataAttributes.endingStyle]="endingStyle",e.anchorHidden="data-anchor-hidden",e}({}),i=function(e){return e.popupOpen="data-popup-open",e.pressed="data-pressed",e}({}),a={[i.popupOpen]:""};i.popupOpen,i.pressed;let s={[n.open]:""},r={[n.closed]:""},o={[n.anchorHidden]:""},l={open:e=>e?a:null},c={open:e=>e?s:r,anchorHidden:e=>e?o:null}},942908:e=>{"use strict";e.s({DialogBackdrop:()=>o});var t=e.i(373150),n=e.i(218437),i=e.i(348580),a=e.i(866533),s=e.i(761298);let r={...a.popupStateMapping,...s.transitionStatusMapping},o=t.forwardRef(function(e,a){let{render:s,className:o,forceRender:l=!1,...c}=e,{open:u,nested:d,mounted:h,transitionStatus:p,backdropRef:m}=(0,n.useDialogRootContext)(),f=t.useMemo(()=>({open:u,transitionStatus:p}),[u,p]);return(0,i.useRenderElement)("div",e,{state:f,ref:[m,a],customStyleHookMapping:r,props:[{role:"presentation",hidden:!h,style:{userSelect:"none",WebkitUserSelect:"none"}},c],enabled:l||!d})})},555295:e=>{"use strict";e.s({useEventCallback:()=>s});var t=e.i(373150),n=e.i(378573);let i=t["useInsertionEffect".concat(Math.random().toFixed(1)).slice(0,-3)],a=i&&i!==t.useLayoutEffect?i:e=>e();function s(e){let t=(0,n.useRefWithInit)(r).current;return t.next=e,a(t.effect),t.trampoline}function r(){let e={next:void 0,callback:o,trampoline:function(){for(var t,n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];return null==(t=e.callback)?void 0:t.call(e,...i)},effect:()=>{e.callback=e.next}};return e}function o(){}},313680:e=>{"use strict";e.s({useIsoLayoutEffect:()=>n});var t=e.i(373150);let n="undefined"!=typeof document?t.useLayoutEffect:()=>{}},170787:e=>{"use strict";e.s({useCompositeRootContext:()=>i});var t=e.i(373150);let n=t.createContext(void 0);function i(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=t.useContext(n);if(void 0===i&&!e)throw Error("Base UI: CompositeRootContext is missing. Composite parts must be placed within <Composite.Root>.");return i}},94722:e=>{"use strict";e.s({useFocusableWhenDisabled:()=>n});var t=e.i(373150);function n(e){let{focusableWhenDisabled:n,disabled:i,composite:a=!1,tabIndex:s=0,isNativeButton:r}=e,o=a&&!1!==n,l=a&&!1===n;return{props:t.useMemo(()=>{let e={onKeyDown(e){i&&n&&"Tab"!==e.key&&e.preventDefault()}};return a||(e.tabIndex=s,!r&&i&&(e.tabIndex=n?s:-1)),(r&&(n||o)||!r&&i)&&(e["aria-disabled"]=i),r&&(!n||l)&&(e.disabled=i),e},[a,i,n,o,l,r,s])}}},508950:e=>{"use strict";e.s({useButton:()=>o});var t=e.i(373150),n=e.i(555295),i=e.i(313680),a=e.i(842192),s=e.i(170787),r=e.i(94722);function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{disabled:o=!1,focusableWhenDisabled:l,tabIndex:c=0,native:u=!0}=e,d=t.useRef(null),h=void 0!==(0,s.useCompositeRootContext)(!0),p=(0,n.useEventCallback)(()=>{let e=d.current;return!!((null==e?void 0:e.tagName)==="A"&&(null==e?void 0:e.href))}),{props:m}=(0,r.useFocusableWhenDisabled)({focusableWhenDisabled:l,disabled:o,composite:h,tabIndex:c,isNativeButton:u});return(0,i.useIsoLayoutEffect)(()=>{let e=d.current;e instanceof HTMLButtonElement&&h&&o&&void 0===m.disabled&&e.disabled&&(e.disabled=!1)},[o,m.disabled,h]),{getButtonProps:t.useCallback(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{onClick:t,onMouseDown:n,onKeyUp:i,onKeyDown:s,onPointerDown:r,...l}=e,c=u?"button":void 0;return(0,a.mergeProps)({type:c,onClick(e){if(o)return void e.preventDefault();null==t||t(e)},onMouseDown(e){o||null==n||n(e)},onKeyDown(e){if(o||((0,a.makeEventPreventable)(e),null==s||s(e)),e.baseUIHandlerPrevented)return;let n=e.target===e.currentTarget&&!u&&!p()&&!o,i="Enter"===e.key,r=" "===e.key;n&&((r||i)&&e.preventDefault(),i&&(null==t||t(e)))},onKeyUp(e){o||((0,a.makeEventPreventable)(e),null==i||i(e)),!e.baseUIHandlerPrevented&&(e.target!==e.currentTarget||u||o||" "!==e.key||null==t||t(e))},onPointerDown(e){if(o)return void e.preventDefault();null==r||r(e)}},u?void 0:{role:"button"},m,l)},[o,m,u,p]),buttonRef:d}}},605520:e=>{"use strict";e.s({useDialogClose:()=>a});var t=e.i(555295),n=e.i(508950),i=e.i(842192);function a(e){let{open:a,setOpen:s,disabled:r,nativeButton:o}=e,l=(0,t.useEventCallback)(e=>{a&&s(!1,e.nativeEvent,"close-press")}),{getButtonProps:c,buttonRef:u}=(0,n.useButton)({disabled:r,native:o});return{getRootProps:e=>(0,i.mergeProps)({onClick:l},e,c),ref:u}}},346956:e=>{"use strict";e.s({DialogClose:()=>s});var t=e.i(373150),n=e.i(605520),i=e.i(218437),a=e.i(348580);let s=t.forwardRef(function(e,s){let{render:r,className:o,disabled:l=!1,nativeButton:c=!0,...u}=e,{open:d,setOpen:h}=(0,i.useDialogRootContext)(),{getRootProps:p,ref:m}=(0,n.useDialogClose)({disabled:l,open:d,setOpen:h,nativeButton:c}),f=t.useMemo(()=>({disabled:l}),[l]);return(0,a.useRenderElement)("button",e,{state:f,ref:[s,m],props:[u,p]})})},871952:e=>{"use strict";e.s({SafeReact:()=>t});let t={...e.i(373150)}},928878:e=>{"use strict";e.s({useId:()=>s});var t=e.i(373150),n=e.i(871952);let i=0,a=n.SafeReact.useId;function s(e,n){if(void 0!==a){let t=a();return null!=e?e:n?"".concat(n,"-").concat(t):t}return function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"mui",[a,s]=t.useState(e),r=e||a;return t.useEffect(()=>{null==a&&(i+=1,s("".concat(n,"-").concat(i)))},[a,n]),r}(e,n)}},191564:e=>{"use strict";e.s({useBaseUiId:()=>n});var t=e.i(928878);function n(e){return(0,t.useId)(e,"base-ui")}},704572:e=>{"use strict";e.s({DialogDescription:()=>r});var t=e.i(373150),n=e.i(313680),i=e.i(218437),a=e.i(348580),s=e.i(191564);let r=t.forwardRef(function(e,t){let{render:r,className:o,id:l,...c}=e,{setDescriptionElementId:u}=(0,i.useDialogRootContext)(),d=(0,s.useBaseUiId)(l);return(0,n.useIsoLayoutEffect)(()=>(u(d),()=>{u(void 0)}),[d,u]),(0,a.useRenderElement)("p",e,{ref:t,props:[{id:d},c]})})},295941:e=>{"use strict";e.s({inertValue:()=>n});var t=e.i(803532);function n(e){return(0,t.isReactVersionAtLeast)(19)?e:e?"true":void 0}},454863:e=>{"use strict";e.s({useLatestRef:()=>i});var t=e.i(313680),n=e.i(378573);function i(e){let i=(0,n.useRefWithInit)(a,e).current;return i.next=e,(0,t.useIsoLayoutEffect)(i.effect),i}function a(e){let t={current:e,next:e,effect:()=>{t.current=t.next}};return t}},234447:e=>{"use strict";e.s({visuallyHidden:()=>t});let t={clip:"rect(0 0 0 0)",overflow:"hidden",whiteSpace:"nowrap",position:"fixed",top:0,left:0,border:0,padding:0,width:1,height:1,margin:-1}},755458:e=>{"use strict";e.s({useOnMount:()=>i});var t=e.i(373150);let n=[];function i(e){t.useEffect(e,n)}},182826:e=>{"use strict";e.s({Timeout:()=>a,useTimeout:()=>s});var t=e.i(11968),n=e.i(378573),i=e.i(755458);class a{static create(){return new a}start(e,t){this.clear(),this.currentId=setTimeout(()=>{this.currentId=0,t()},e)}isStarted(){return 0!==this.currentId}constructor(){(0,t._)(this,"currentId",0),(0,t._)(this,"clear",()=>{0!==this.currentId&&(clearTimeout(this.currentId),this.currentId=0)}),(0,t._)(this,"disposeEffect",()=>this.clear)}}function s(){let e=(0,n.useRefWithInit)(a.create).current;return(0,i.useOnMount)(e.disposeEffect),e}},107160:e=>{"use strict";e.s({isAndroid:()=>l,isIOS:()=>r,isJSDOM:()=>c,isSafari:()=>o,isWebKit:()=>s});let t="undefined"!=typeof navigator,n=function(){var e,n;if(!t)return{platform:"",maxTouchPoints:-1};let i=navigator.userAgentData;return(null==i?void 0:i.platform)?{platform:i.platform,maxTouchPoints:navigator.maxTouchPoints}:{platform:null!=(e=navigator.platform)?e:"",maxTouchPoints:null!=(n=navigator.maxTouchPoints)?n:-1}}(),i=function(){var e;if(!t)return"";let n=navigator.userAgentData;return(null==n?void 0:n.platform)?n.platform:null!=(e=navigator.platform)?e:""}(),a=function(){if(!t)return"";let e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(e=>{let{brand:t,version:n}=e;return"".concat(t,"/").concat(n)}).join(" "):navigator.userAgent}(),s="undefined"!=typeof CSS&&!!CSS.supports&&CSS.supports("-webkit-backdrop-filter:none"),r="MacIntel"===n.platform&&n.maxTouchPoints>1||/iP(hone|ad|od)|iOS/.test(n.platform);t&&/firefox/i.test(a);let o=t&&/apple/i.test(navigator.vendor),l=t&&/android/i.test(i)||/android/i.test(a);t&&i.toLowerCase().startsWith("mac")&&navigator.maxTouchPoints;let c=a.includes("jsdom/")},34320:e=>{"use strict";e.s({FocusGuard:()=>r});var t=e.i(373150),n=e.i(313680),i=e.i(107160),a=e.i(234447),s=e.i(290479);let r=t.forwardRef(function(e,r){let[o,l]=t.useState();(0,n.useIsoLayoutEffect)(()=>{i.isSafari&&l("button")},[]);let c={ref:r,tabIndex:0,role:o,"aria-hidden":!o||void 0,style:a.visuallyHidden};return(0,s.jsx)("span",{...e,...c,"data-base-ui-focus-guard":""})})},261302:e=>{"use strict";e.s({ACTIVE_KEY:()=>n,FOCUSABLE_ATTRIBUTE:()=>t,SELECTED_KEY:()=>i,TYPEABLE_SELECTOR:()=>a});let t="data-base-ui-focusable",n="active",i="selected",a="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])"},738661:e=>{"use strict";e.s({activeElement:()=>i,contains:()=>a,getDocument:()=>l,getFloatingFocusElement:()=>u,getTarget:()=>s,isEventTargetWithin:()=>r,isRootElement:()=>o,isTypeableCombobox:()=>c});var t=e.i(184678);e.i(107160);var n=e.i(261302);function i(e){var t;let n=e.activeElement;for(;(null==n||null==(t=n.shadowRoot)?void 0:t.activeElement)!=null;)n=n.shadowRoot.activeElement;return n}function a(e,n){var i;if(!e||!n)return!1;let a=null==(i=n.getRootNode)?void 0:i.call(n);if(e.contains(n))return!0;if(a&&(0,t.isShadowRoot)(a)){let t=n;for(;t;){if(e===t)return!0;t=t.parentNode||t.host}}return!1}function s(e){return"composedPath"in e?e.composedPath()[0]:e.target}function r(e,t){return null!=t&&("composedPath"in e?e.composedPath().includes(t):null!=e.target&&t.contains(e.target))}function o(e){return e.matches("html,body")}function l(e){return(null==e?void 0:e.ownerDocument)||document}function c(e){return!!e&&"combobox"===e.getAttribute("role")&&(0,t.isHTMLElement)(e)&&e.matches(n.TYPEABLE_SELECTOR)}function u(e){return e?e.hasAttribute(n.FOCUSABLE_ATTRIBUTE)?e:e.querySelector("[".concat(n.FOCUSABLE_ATTRIBUTE,"]"))||e:null}},39333:e=>{"use strict";e.s({isMouseLikePointerType:()=>r,isReactEvent:()=>i,isVirtualClick:()=>a,isVirtualPointerEvent:()=>s,stopEvent:()=>n});var t=e.i(107160);function n(e){e.preventDefault(),e.stopPropagation()}function i(e){return"nativeEvent"in e}function a(e){return 0===e.mozInputSource&&!!e.isTrusted||(t.isAndroid&&e.pointerType?"click"===e.type&&1===e.buttons:0===e.detail&&!e.pointerType)}function s(e){return!t.isJSDOM&&(!t.isAndroid&&0===e.width&&0===e.height||t.isAndroid&&1===e.width&&1===e.height&&0===e.pressure&&0===e.detail&&"mouse"===e.pointerType||e.width<1&&e.height<1&&0===e.pressure&&0===e.detail&&"touch"===e.pointerType)}function r(e,t){let n=["mouse","pen"];return t||n.push("",void 0),n.includes(e)}},268842:e=>{"use strict";function t(e,t){var n;let i=[],a=null==(n=e.find(e=>e.id===t))?void 0:n.parentId;for(;a;){let t=e.find(e=>e.id===a);a=null==t?void 0:t.parentId,t&&(i=i.concat(t))}return i}e.s({getNodeAncestors:()=>t,getNodeChildren:()=>function e(t,n){let i=!(arguments.length>2)||void 0===arguments[2]||arguments[2];return t.filter(e=>{var t;return e.parentId===n&&(!i||(null==(t=e.context)?void 0:t.open))}).flatMap(n=>[n,...e(t,n.id,i)])}})},341782:e=>{"use strict";e.s({disableFocusInside:()=>l,enableFocusInside:()=>c,getNextTabbable:()=>s,getPreviousTabbable:()=>r,getTabbableOptions:()=>i,isOutsideEvent:()=>o});var t=e.i(209768),n=e.i(738661);let i=()=>({getShadowRoot:!0,displayCheck:"function"==typeof ResizeObserver&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function a(e,a){let s=(0,t.tabbable)(e,i()),r=s.length;if(0===r)return;let o=(0,n.activeElement)((0,n.getDocument)(e)),l=s.indexOf(o);return s[-1===l?1===a?0:r-1:l+a]}function s(e){return a((0,n.getDocument)(e).body,1)||e}function r(e){return a((0,n.getDocument)(e).body,-1)||e}function o(e,t){let i=t||e.currentTarget,a=e.relatedTarget;return!a||!(0,n.contains)(i,a)}function l(e){(0,t.tabbable)(e,i()).forEach(e=>{e.dataset.tabindex=e.getAttribute("tabindex")||"",e.setAttribute("tabindex","-1")})}function c(e){e.querySelectorAll("[data-tabindex]").forEach(e=>{let t=e.dataset.tabindex;delete e.dataset.tabindex,t?e.setAttribute("tabindex",t):e.removeAttribute("tabindex")})}},875981:e=>{"use strict";function t(e){return"data-base-ui-".concat(e)}e.s({createAttribute:()=>t})},445287:e=>{"use strict";e.s({enqueueFocus:()=>n});let t=0;function n(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{preventScroll:i=!1,cancelPrevious:a=!0,sync:s=!1}=n;a&&cancelAnimationFrame(t);let r=()=>null==e?void 0:e.focus({preventScroll:i});s?r():t=requestAnimationFrame(r)}},978319:e=>{"use strict";e.s({markOthers:()=>c});var t=e.i(184678),n=e.i(738661);let i={inert:new WeakMap,"aria-hidden":new WeakMap,none:new WeakMap};function a(e){return"inert"===e?i.inert:"aria-hidden"===e?i["aria-hidden"]:i.none}let s=new WeakSet,r={},o=0,l=e=>e&&(e.host||l(e.parentNode));function c(e){let c=arguments.length>1&&void 0!==arguments[1]&&arguments[1],u=arguments.length>2&&void 0!==arguments[2]&&arguments[2],d=(0,n.getDocument)(e[0]).body;return function(e,n,c,u){let d="data-base-ui-inert",h=u?"inert":c?"aria-hidden":null,p=e.map(e=>{if(n.contains(e))return e;let t=l(e);return n.contains(t)?t:null}).filter(e=>null!=e),m=new Set,f=new Set(p),T=[];r[d]||(r[d]=new WeakMap);let g=r[d];return p.forEach(function e(t){!(!t||m.has(t))&&(m.add(t),t.parentNode&&e(t.parentNode))}),function e(n){!n||f.has(n)||[].forEach.call(n.children,n=>{if("script"!==(0,t.getNodeName)(n))if(m.has(n))e(n);else{let e=h?n.getAttribute(h):null,t=null!==e&&"false"!==e,i=a(h),r=(i.get(n)||0)+1,o=(g.get(n)||0)+1;i.set(n,r),g.set(n,o),T.push(n),1===r&&t&&s.add(n),1===o&&n.setAttribute(d,""),!t&&h&&n.setAttribute(h,"inert"===h?"":"true")}})}(n),m.clear(),o+=1,()=>{T.forEach(e=>{let t=a(h),n=(t.get(e)||0)-1,i=(g.get(e)||0)-1;t.set(e,n),g.set(e,i),n||(!s.has(e)&&h&&e.removeAttribute(h),s.delete(e)),i||e.removeAttribute(d)}),(o-=1)||(i.inert=new WeakMap,i["aria-hidden"]=new WeakMap,i.none=new WeakMap,s=new WeakSet,r={})}}(e.concat(Array.from(d.querySelectorAll("[aria-live]"))),d,c,u)}},597641:e=>{"use strict";e.s({FloatingPortal:()=>m,usePortalContext:()=>h});var t=e.i(373150),n=e.i(784445),i=e.i(184678),a=e.i(928878),s=e.i(313680),r=e.i(234447),o=e.i(34320),l=e.i(341782),c=e.i(875981),u=e.i(290479);let d=t.createContext(null),h=()=>t.useContext(d),p=(0,c.createAttribute)("portal");function m(e){let{children:c,id:m,root:f,preserveTabOrder:T=!0}=e,g=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{id:n,root:r}=e,o=(0,a.useId)(),l=h(),[c,u]=t.useState(null),d=t.useRef(null);return(0,s.useIsoLayoutEffect)(()=>()=>{null==c||c.remove(),queueMicrotask(()=>{d.current=null})},[c]),(0,s.useIsoLayoutEffect)(()=>{if(!o||d.current)return;let e=n?document.getElementById(n):null;if(!e)return;let t=document.createElement("div");t.id=o,t.setAttribute(p,""),e.appendChild(t),d.current=t,u(t)},[n,o]),(0,s.useIsoLayoutEffect)(()=>{if(null===r||!o||d.current)return;let e=r||(null==l?void 0:l.portalNode);e&&!(0,i.isNode)(e)&&(e=e.current),e=e||document.body;let t=null;n&&((t=document.createElement("div")).id=n,e.appendChild(t));let a=document.createElement("div");a.id=o,a.setAttribute(p,""),(e=t||e).appendChild(a),d.current=a,u(a)},[n,r,o,l]),c}({id:m,root:f}),[E,A]=t.useState(null),x=t.useRef(null),I=t.useRef(null),_=t.useRef(null),C=t.useRef(null),v=null==E?void 0:E.modal,S=null==E?void 0:E.open,D=!!E&&!E.modal&&E.open&&T&&!!(f||g);return t.useEffect(()=>{if(g&&T&&!v)return g.addEventListener("focusin",e,!0),g.addEventListener("focusout",e,!0),()=>{g.removeEventListener("focusin",e,!0),g.removeEventListener("focusout",e,!0)};function e(e){g&&(0,l.isOutsideEvent)(e)&&("focusin"===e.type?l.enableFocusInside:l.disableFocusInside)(g)}},[g,T,v]),t.useEffect(()=>{g&&(S||(0,l.enableFocusInside)(g))},[S,g]),(0,u.jsxs)(d.Provider,{value:t.useMemo(()=>({preserveTabOrder:T,beforeOutsideRef:x,afterOutsideRef:I,beforeInsideRef:_,afterInsideRef:C,portalNode:g,setFocusManagerState:A}),[T,g]),children:[D&&g&&(0,u.jsx)(o.FocusGuard,{"data-type":"outside",ref:x,onFocus:e=>{if((0,l.isOutsideEvent)(e,g)){var t;null==(t=_.current)||t.focus()}else{let e=E?E.domReference:null,t=(0,l.getPreviousTabbable)(e);null==t||t.focus()}}}),D&&g&&(0,u.jsx)("span",{"aria-owns":g.id,style:r.visuallyHidden}),g&&n.createPortal(c,g),D&&g&&(0,u.jsx)(o.FocusGuard,{"data-type":"outside",ref:I,onFocus:e=>{if((0,l.isOutsideEvent)(e,g)){var t;null==(t=C.current)||t.focus()}else{let t=E?E.domReference:null,n=(0,l.getNextTabbable)(t);null==n||n.focus(),(null==E?void 0:E.closeOnFocusOut)&&(null==E||E.onOpenChange(!1,e.nativeEvent,"focus-out"))}}})]})}},737486:e=>{"use strict";function t(){let e=new Map;return{emit(t,n){var i;null==(i=e.get(t))||i.forEach(e=>e(n))},on(t,n){e.has(t)||e.set(t,new Set),e.get(t).add(n)},off(t,n){var i;null==(i=e.get(t))||i.delete(n)}}}e.s({createEventEmitter:()=>t})},382352:e=>{"use strict";e.s({useFloatingParentNodeId:()=>a,useFloatingTree:()=>s});var t=e.i(373150);e.i(928878),e.i(313680),e.i(737486),e.i(290479);let n=t.createContext(null),i=t.createContext(null),a=()=>{var e;return(null==(e=t.useContext(n))?void 0:e.id)||null},s=()=>t.useContext(i)},700398:e=>{"use strict";e.s({FloatingFocusManager:()=>D});var t=e.i(373150),n=e.i(209768),i=e.i(184678),a=e.i(954200),s=e.i(454863),r=e.i(555295),o=e.i(313680),l=e.i(234447),c=e.i(182826),u=e.i(34320),d=e.i(738661),h=e.i(39333),p=e.i(268842),m=e.i(341782),f=e.i(875981),T=e.i(445287),g=e.i(978319),E=e.i(597641),A=e.i(382352),x=e.i(108521),I=e.i(290479);let _=[];function C(){_=_.filter(e=>e.isConnected)}function v(){return C(),_[_.length-1]}function S(e,t){var i;if(!t.current.includes("floating")&&!(null==(i=e.getAttribute("role"))?void 0:i.includes("dialog")))return;let a=(0,m.getTabbableOptions)(),s=(0,n.focusable)(e,a).filter(e=>{let t=e.getAttribute("data-tabindex")||"";return(0,n.isTabbable)(e,a)||e.hasAttribute("data-tabindex")&&!t.startsWith("-")}),r=e.getAttribute("tabindex");t.current.includes("floating")||0===s.length?"0"!==r&&e.setAttribute("tabindex","0"):("-1"!==r||e.hasAttribute("data-tabindex")&&"-1"!==e.getAttribute("data-tabindex"))&&(e.setAttribute("tabindex","-1"),e.setAttribute("data-tabindex","-1"))}function D(e){let{context:D,children:y,disabled:N=!1,order:b=["content"],initialFocus:O=0,returnFocus:R=!0,restoreFocus:P=!1,modal:k=!0,closeOnFocusOut:M=!0,getInsideElements:L=()=>[]}=e,{open:w,onOpenChange:G,events:j,dataRef:B,elements:{domReference:F,floating:U}}=D,H=(0,r.useEventCallback)(()=>{var e;return null==(e=B.current.floatingContext)?void 0:e.nodeId}),V=(0,r.useEventCallback)(L),Y="number"==typeof O&&O<0,z=(0,d.isTypeableCombobox)(F)&&Y,W=(0,s.useLatestRef)(b),q=(0,s.useLatestRef)(O),K=(0,s.useLatestRef)(R),Q=(0,A.useFloatingTree)(),X=(0,E.usePortalContext)(),J=t.useRef(null),Z=t.useRef(null),$=t.useRef(!1),ee=t.useRef(!1),et=t.useRef(-1),en=(0,c.useTimeout)(),ei=null!=X,ea=(0,d.getFloatingFocusElement)(U),es=(0,r.useEventCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ea;return e?(0,n.tabbable)(e,(0,m.getTabbableOptions)()):[]}),er=(0,r.useEventCallback)(e=>{let t=es(e);return W.current.map(()=>t).filter(Boolean).flat()});t.useEffect(()=>{if(N||!k)return;function e(e){"Tab"===e.key&&(0,d.contains)(ea,(0,d.activeElement)((0,d.getDocument)(ea)))&&0===es().length&&!z&&(0,h.stopEvent)(e)}let t=(0,d.getDocument)(ea);return t.addEventListener("keydown",e),()=>{t.removeEventListener("keydown",e)}},[N,F,ea,k,W,z,es,er]),t.useEffect(()=>{if(!N&&U)return U.addEventListener("focusin",e),()=>{U.removeEventListener("focusin",e)};function e(e){let t=(0,d.getTarget)(e),n=es().indexOf(t);-1!==n&&(et.current=n)}},[N,U,es]),t.useEffect(()=>{if(N||!M)return;function e(){ee.current=!0}function t(e){let t=e.relatedTarget,n=e.currentTarget,a=(0,d.getTarget)(e);queueMicrotask(()=>{let s=H(),r=!((0,d.contains)(F,t)||(0,d.contains)(U,t)||(0,d.contains)(t,U)||(0,d.contains)(null==X?void 0:X.portalNode,t)||(null==t?void 0:t.hasAttribute((0,f.createAttribute)("focus-guard")))||Q&&((0,p.getNodeChildren)(Q.nodesRef.current,s).find(e=>{var n,i;return(0,d.contains)(null==(n=e.context)?void 0:n.elements.floating,t)||(0,d.contains)(null==(i=e.context)?void 0:i.elements.domReference,t)})||(0,p.getNodeAncestors)(Q.nodesRef.current,s).find(e=>{var n,i,a;return[null==(n=e.context)?void 0:n.elements.floating,(0,d.getFloatingFocusElement)(null==(i=e.context)?void 0:i.elements.floating)].includes(t)||(null==(a=e.context)?void 0:a.elements.domReference)===t})));if(n===F&&ea&&S(ea,W),P&&n!==F&&!(null==a?void 0:a.isConnected)&&(0,d.activeElement)((0,d.getDocument)(ea))===(0,d.getDocument)(ea).body){(0,i.isHTMLElement)(ea)&&ea.focus();let e=et.current,t=es(),n=t[e]||t[t.length-1]||ea;(0,i.isHTMLElement)(n)&&n.focus()}if(B.current.insideReactTree){B.current.insideReactTree=!1;return}if(ee.current){ee.current=!1;return}(z||!k)&&t&&r&&t!==v()&&($.current=!0,G(!1,e,"focus-out"))})}let n=!!(!Q&&X);function a(){B.current.insideReactTree=!0,en.start(0,()=>{B.current.insideReactTree=!1})}if(U&&(0,i.isHTMLElement)(F))return F.addEventListener("focusout",t),F.addEventListener("pointerdown",e),U.addEventListener("focusout",t),n&&U.addEventListener("focusout",a,!0),()=>{F.removeEventListener("focusout",t),F.removeEventListener("pointerdown",e),U.removeEventListener("focusout",t),n&&U.removeEventListener("focusout",a,!0)}},[N,F,U,ea,k,Q,X,G,M,P,es,z,H,W,B,en]);let eo=t.useRef(null),el=t.useRef(null),ec=(0,a.useMergedRefs)(eo,null==X?void 0:X.beforeInsideRef),eu=(0,a.useMergedRefs)(el,null==X?void 0:X.afterInsideRef);t.useEffect(()=>{var e,t,n;if(N||!U)return;let i=Array.from((null==X||null==(e=X.portalNode)?void 0:e.querySelectorAll("[".concat((0,f.createAttribute)("portal"),"]")))||[]),a=[U,null==(n=(Q?(0,p.getNodeAncestors)(Q.nodesRef.current,H()):[]).find(e=>{var t;return(0,d.isTypeableCombobox)((null==(t=e.context)?void 0:t.elements.domReference)||null)}))||null==(t=n.context)?void 0:t.elements.domReference,...i,...V(),J.current,Z.current,eo.current,el.current,null==X?void 0:X.beforeOutsideRef.current,null==X?void 0:X.afterOutsideRef.current,z?F:null].filter(e=>null!=e),s=(0,g.markOthers)(a,k||z);return()=>{s()}},[N,F,U,k,W,X,z,Q,H,V]),(0,o.useIsoLayoutEffect)(()=>{if(N||!(0,i.isHTMLElement)(ea))return;let e=(0,d.getDocument)(ea),t=(0,d.activeElement)(e);queueMicrotask(()=>{let e=er(ea),n=q.current,i=("number"==typeof n?e[n]:n.current)||ea,a=(0,d.contains)(ea,t);Y||a||!w||(0,T.enqueueFocus)(i,{preventScroll:i===ea})})},[N,w,ea,Y,er,q]),(0,o.useIsoLayoutEffect)(()=>{var e;if(N||!ea)return;let t=(0,d.getDocument)(ea);function a(e){let{reason:t,event:n,nested:i}=e;if(["hover","safe-polygon"].includes(t)&&"mouseleave"===n.type&&($.current=!0),"outside-press"===t)if(i)$.current=!1;else if((0,h.isVirtualClick)(n)||(0,h.isVirtualPointerEvent)(n))$.current=!1;else{let e=!1;document.createElement("div").focus({get preventScroll(){return e=!0,!1}}),e?$.current=!1:$.current=!0}}e=(0,d.activeElement)(t),C(),e&&"body"!==(0,i.getNodeName)(e)&&(_.push(e),_.length>20&&(_=_.slice(-20))),j.on("openchange",a);let s=t.createElement("span");return s.setAttribute("tabindex","-1"),s.setAttribute("aria-hidden","true"),Object.assign(s.style,l.visuallyHidden),ei&&F&&F.insertAdjacentElement("afterend",s),()=>{j.off("openchange",a);let e=(0,d.activeElement)(t),r=(0,d.contains)(U,e)||Q&&(0,p.getNodeChildren)(Q.nodesRef.current,H(),!1).some(t=>{var n;return(0,d.contains)(null==(n=t.context)?void 0:n.elements.floating,e)}),o=function(){if("boolean"==typeof K.current){let e=F||v();return e&&e.isConnected?e:s}return K.current.current||s}();queueMicrotask(()=>{let a=function(e){let t=(0,m.getTabbableOptions)();return(0,n.isTabbable)(e,t)?e:(0,n.tabbable)(e,t)[0]||e}(o);K.current&&!$.current&&(0,i.isHTMLElement)(a)&&(a===e||e===t.body||r)&&a.focus({preventScroll:!0}),s.remove()})}},[N,U,ea,K,B,j,Q,ei,F,H]),t.useEffect(()=>{queueMicrotask(()=>{$.current=!1})},[N]),t.useEffect(()=>{if(N||!w)return;function e(e){let t=(0,d.getTarget)(e);(null==t?void 0:t.closest("[".concat(x.CLICK_TRIGGER_IDENTIFIER,"]")))&&(ee.current=!0)}let t=(0,d.getDocument)(ea);return t.addEventListener("pointerdown",e,!0),()=>{t.removeEventListener("pointerdown",e,!0)}},[N,w,ea]),(0,o.useIsoLayoutEffect)(()=>{if(!N&&X)return X.setFocusManagerState({modal:k,closeOnFocusOut:M,open:w,onOpenChange:G,domReference:F}),()=>{X.setFocusManagerState(null)}},[N,X,k,w,G,M,F]),(0,o.useIsoLayoutEffect)(()=>{if(!N&&ea)return S(ea,W),()=>{queueMicrotask(C)}},[N,ea,W]);let ed=!N&&(!k||!z)&&(ei||k);return(0,I.jsxs)(t.Fragment,{children:[ed&&(0,I.jsx)(u.FocusGuard,{"data-type":"inside",ref:ec,onFocus:e=>{if(k){let e=er();(0,T.enqueueFocus)(e[e.length-1])}else if((null==X?void 0:X.preserveTabOrder)&&X.portalNode)if($.current=!1,(0,m.isOutsideEvent)(e,X.portalNode)){let e=(0,m.getNextTabbable)(F);null==e||e.focus()}else{var t;null==(t=X.beforeOutsideRef.current)||t.focus()}}}),y,ed&&(0,I.jsx)(u.FocusGuard,{"data-type":"inside",ref:eu,onFocus:e=>{if(k)(0,T.enqueueFocus)(er()[0]);else if((null==X?void 0:X.preserveTabOrder)&&X.portalNode)if(M&&($.current=!0),(0,m.isOutsideEvent)(e,X.portalNode)){let e=(0,m.getPreviousTabbable)(F);null==e||e.focus()}else{var t;null==(t=X.afterOutsideRef.current)||t.focus()}}})]})}},491921:e=>{"use strict";e.s({COMPOSITE_KEYS:()=>s});let t="ArrowUp",n="ArrowDown",i="ArrowLeft",a="ArrowRight";[...new Set([...new Set([i,a]),...new Set([t,n])])];let s=new Set([t,n,i,a,"Home","End"])},5093:e=>{"use strict";e.s({useDialogPopup:()=>a});var t=e.i(373150),n=e.i(954200),i=e.i(491921);function a(e){let{descriptionElementId:a,initialFocus:s,mounted:r,openMethod:o,ref:l,setPopupElement:c,titleElementId:u}=e,d=t.useRef(null),h=(0,n.useMergedRefs)(l,d,c),p=t.useCallback(e=>"touch"===e?d:0,[]),m=t.useMemo(()=>null==s?p(null!=o?o:""):"function"==typeof s?s(null!=o?o:""):s,[p,s,o]);return{popupProps:{"aria-labelledby":null!=u?u:void 0,"aria-describedby":null!=a?a:void 0,role:"dialog",tabIndex:-1,ref:h,hidden:!r,onKeyDown(e){i.COMPOSITE_KEYS.has(e.key)&&e.stopPropagation()}},resolvedInitialFocus:m}}},535138:e=>{"use strict";e.s({DialogPopupCssVars:()=>t});let t=function(e){return e.nestedDialogs="--nested-dialogs",e}({})},507977:e=>{"use strict";e.s({DialogPopupDataAttributes:()=>n});var t=e.i(866533);let n=function(e){return e[e.open=t.CommonPopupDataAttributes.open]="open",e[e.closed=t.CommonPopupDataAttributes.closed]="closed",e[e.startingStyle=t.CommonPopupDataAttributes.startingStyle]="startingStyle",e[e.endingStyle=t.CommonPopupDataAttributes.endingStyle]="endingStyle",e.nested="data-nested",e.nestedDialogOpen="data-nested-dialog-open",e}({})},640724:e=>{"use strict";e.s({InternalBackdrop:()=>i});var t=e.i(373150),n=e.i(290479);let i=t.forwardRef(function(e,t){let i,{cutout:a,...s}=e;if(a){let e=null==a?void 0:a.getBoundingClientRect();i="polygon(\n      0% 0%,\n      100% 0%,\n      100% 100%,\n      0% 100%,\n      0% 0%,\n      ".concat(e.left,"px ").concat(e.top,"px,\n      ").concat(e.left,"px ").concat(e.bottom,"px,\n      ").concat(e.right,"px ").concat(e.bottom,"px,\n      ").concat(e.right,"px ").concat(e.top,"px,\n      ").concat(e.left,"px ").concat(e.top,"px\n    )")}return(0,n.jsx)("div",{ref:t,role:"presentation","data-base-ui-inert":"",...s,style:{position:"fixed",inset:0,userSelect:"none",WebkitUserSelect:"none",clipPath:i}})})},313811:e=>{"use strict";e.s({DialogPortalContext:()=>n,useDialogPortalContext:()=>i});var t=e.i(373150);let n=t.createContext(void 0);function i(){let e=t.useContext(n);if(void 0===e)throw Error("Base UI: <Dialog.Portal> is missing.");return e}},387295:e=>{"use strict";e.s({AnimationFrame:()=>s,useAnimationFrame:()=>r});var t=e.i(11968),n=e.i(378573),i=e.i(755458);globalThis.requestAnimationFrame;let a=new class{request(e){let t=this.nextId;return this.nextId+=1,this.callbacks.push(e),this.callbacksCount+=1,this.isScheduled||(requestAnimationFrame(this.tick),this.isScheduled=!0),t}cancel(e){let t=e-this.startId;t<0||t>=this.callbacks.length||(this.callbacks[t]=null,this.callbacksCount-=1)}constructor(){(0,t._)(this,"callbacks",[]),(0,t._)(this,"callbacksCount",0),(0,t._)(this,"nextId",1),(0,t._)(this,"startId",1),(0,t._)(this,"isScheduled",!1),(0,t._)(this,"tick",e=>{this.isScheduled=!1;let t=this.callbacks,n=this.callbacksCount;if(this.callbacks=[],this.callbacksCount=0,this.startId=this.nextId,n>0)for(let n=0;n<t.length;n+=1){var i;null==(i=t[n])||i.call(t,e)}})}};class s{static create(){return new s}static request(e){return a.request(e)}static cancel(e){return a.cancel(e)}request(e){this.cancel(),this.currentId=a.request(()=>{this.currentId=null,e()})}constructor(){(0,t._)(this,"currentId",null),(0,t._)(this,"cancel",()=>{null!==this.currentId&&(a.cancel(this.currentId),this.currentId=null)}),(0,t._)(this,"disposeEffect",()=>this.cancel)}}function r(){let e=(0,n.useRefWithInit)(s.create).current;return(0,i.useOnMount)(e.disposeEffect),e}},557449:e=>{"use strict";e.s({useAnimationsFinished:()=>a});var t=e.i(784445),n=e.i(387295),i=e.i(555295);function a(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=(0,n.useAnimationFrame)();return(0,i.useEventCallback)(function(n){let i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(s.cancel(),null!=e){if("current"in e){if(null==e.current)return;i=e.current}else i=e;"function"!=typeof i.getAnimations||globalThis.BASE_UI_ANIMATIONS_DISABLED?n():s.request(()=>{function e(){i&&Promise.allSettled(i.getAnimations().map(e=>e.finished)).then(()=>{null!=r&&r.aborted||t.flushSync(n)})}a?s.request(e):e()})}})}},512081:e=>{"use strict";e.s({useOpenChangeComplete:()=>s});var t=e.i(373150),n=e.i(555295),i=e.i(454863),a=e.i(557449);function s(e){let{enabled:s=!0,open:r,ref:o,onComplete:l}=e,c=(0,i.useLatestRef)(r),u=(0,n.useEventCallback)(l),d=(0,a.useAnimationsFinished)(o,r);t.useEffect(()=>{s&&d(()=>{r===c.current&&u()})},[s,r,u,d,c])}},762936:e=>{"use strict";e.s({DialogPopup:()=>g});var t=e.i(373150),n=e.i(954200),i=e.i(295941),a=e.i(700398),s=e.i(5093),r=e.i(218437),o=e.i(348580),l=e.i(866533),c=e.i(761298),u=e.i(535138),d=e.i(507977),h=e.i(640724),p=e.i(313811),m=e.i(512081),f=e.i(290479);let T={...l.popupStateMapping,...c.transitionStatusMapping,nestedDialogOpen:e=>e?{[d.DialogPopupDataAttributes.nestedDialogOpen]:""}:null},g=t.forwardRef(function(e,l){let{className:c,finalFocus:d,initialFocus:g,render:E,...A}=e,{descriptionElementId:x,dismissible:I,floatingRootContext:_,getPopupProps:C,modal:v,mounted:S,nested:D,nestedOpenDialogCount:y,setOpen:N,open:b,openMethod:O,popupRef:R,setPopupElement:P,titleElementId:k,transitionStatus:M,onOpenChangeComplete:L,internalBackdropRef:w}=(0,r.useDialogRootContext)();(0,p.useDialogPortalContext)(),(0,m.useOpenChangeComplete)({open:b,ref:R,onComplete(){b&&(null==L||L(!0))}});let G=(0,n.useMergedRefs)(l,R),{popupProps:j,resolvedInitialFocus:B}=(0,s.useDialogPopup)({descriptionElementId:x,initialFocus:g,mounted:S,setOpen:N,openMethod:O,ref:G,setPopupElement:P,titleElementId:k}),F=y>0,U=t.useMemo(()=>({open:b,nested:D,transitionStatus:M,nestedDialogOpen:F}),[b,D,M,F]),H=(0,o.useRenderElement)("div",e,{state:U,props:[C(),j,{style:{[u.DialogPopupCssVars.nestedDialogs]:y}},A],customStyleHookMapping:T});return(0,f.jsxs)(t.Fragment,{children:[S&&!0===v&&(0,f.jsx)(h.InternalBackdrop,{ref:w,inert:(0,i.inertValue)(!b)}),(0,f.jsx)(a.FloatingFocusManager,{context:_,disabled:!S,closeOnFocusOut:I,initialFocus:B,returnFocus:d,modal:!1!==v,children:H})]})})},44263:e=>{"use strict";e.s({DialogPortal:()=>s}),e.i(373150);var t=e.i(597641),n=e.i(218437),i=e.i(313811),a=e.i(290479);function s(e){let{children:s,keepMounted:r=!1,container:o}=e,{mounted:l}=(0,n.useDialogRootContext)();return l||r?(0,a.jsx)(i.DialogPortalContext.Provider,{value:r,children:(0,a.jsx)(t.FloatingPortal,{root:o,children:s})}):null}},373988:e=>{"use strict";e.s({useControlled:()=>n});var t=e.i(373150);function n(e){let{controlled:n,default:i,name:a,state:s="value"}=e,{current:r}=t.useRef(void 0!==n),[o,l]=t.useState(i),c=t.useCallback(e=>{r||l(e)},[]);return[r?n:o,c]}},575272:e=>{"use strict";e.s({useClick:()=>s});var t=e.i(373150),n=e.i(387295),i=e.i(108521),a=e.i(39333);function s(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{open:r,onOpenChange:o,dataRef:l}=e,{enabled:c=!0,event:u="click",toggle:d=!0,ignoreMouse:h=!1,stickIfOpen:p=!0}=s,m=t.useRef(void 0),f=(0,n.useAnimationFrame)(),T=t.useMemo(()=>({onPointerDown(e){m.current=e.pointerType},onMouseDown(e){let t=m.current,n=e.nativeEvent;if(0!==e.button||"click"===u||(0,a.isMouseLikePointerType)(t,!0)&&h)return;let i=l.current.openEvent,s=null==i?void 0:i.type,c=!(r&&d&&(!i||!p||"click"===s||"mousedown"===s));f.request(()=>{o(c,n,"click")})},onClick(e){let t=m.current;if("mousedown"===u&&t){m.current=void 0;return}if((0,a.isMouseLikePointerType)(t,!0)&&h)return;let n=l.current.openEvent,i=null==n?void 0:n.type;o(!(r&&d&&(!n||!p||"click"===i||"mousedown"===i||"keydown"===i||"keyup"===i)),e.nativeEvent,"click")},onKeyDown(){m.current=void 0}}),[l,u,h,o,r,p,d,f]);return t.useMemo(()=>c?{reference:T}:i.EMPTY_OBJECT,[c,T])}},442777:e=>{"use strict";e.s({useDismiss:()=>h});var t=e.i(373150),n=e.i(184678),i=e.i(182826),a=e.i(555295),s=e.i(738661),r=e.i(39333),o=e.i(268842),l=e.i(382352),c=e.i(875981);let u={intentional:"onClick",sloppy:"onPointerDown"};function d(e){var t,n;return{escapeKey:"boolean"==typeof e?e:null!=(t=null==e?void 0:e.escapeKey)&&t,outsidePress:"boolean"==typeof e?e:null==(n=null==e?void 0:e.outsidePress)||n}}function h(e){let h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{open:p,onOpenChange:m,elements:f,dataRef:T}=e,{enabled:g=!0,escapeKey:E=!0,outsidePress:A=!0,outsidePressEvent:x="sloppy",referencePress:I=!1,referencePressEvent:_="sloppy",ancestorScroll:C=!1,bubbles:v,capture:S}=h,D=(0,l.useFloatingTree)(),y=(0,a.useEventCallback)("function"==typeof A?A:()=>!1),N="function"==typeof A?y:A,b=t.useRef(!1),{escapeKey:O,outsidePress:R}=d(v),{escapeKey:P,outsidePress:k}=d(S),M=t.useRef(null),L=(0,i.useTimeout)(),w=(0,i.useTimeout)(),G=t.useRef(!1),j=t.useRef(""),B=(0,a.useEventCallback)(e=>{j.current=e.pointerType}),F=(0,a.useEventCallback)(()=>{let e=j.current;return"string"==typeof x?x:x["pen"!==e&&e?e:"mouse"]}),U=(0,a.useEventCallback)(e=>{var t;if(!p||!g||!E||"Escape"!==e.key||G.current)return;let n=null==(t=T.current.floatingContext)?void 0:t.nodeId,i=D?(0,o.getNodeChildren)(D.nodesRef.current,n):[];if(!O&&(e.stopPropagation(),i.length>0)){let e=!0;if(i.forEach(t=>{var n;(null==(n=t.context)?void 0:n.open)&&!t.context.dataRef.current.__escapeKeyBubbles&&(e=!1)}),!e)return}m(!1,(0,r.isReactEvent)(e)?e.nativeEvent:e,"escape-key")}),H=(0,a.useEventCallback)(e=>{let t=F();return"intentional"===t&&"click"!==e.type||"sloppy"===t&&"click"===e.type}),V=(0,a.useEventCallback)(e=>{var t;let n=()=>{var t;U(e),null==(t=(0,s.getTarget)(e))||t.removeEventListener("keydown",n)};null==(t=(0,s.getTarget)(e))||t.addEventListener("keydown",n)}),Y=(0,a.useEventCallback)(e=>{var t;if(H(e))return;let i=T.current.insideReactTree;T.current.insideReactTree=!1;let a=b.current;if(b.current=!1,"intentional"===F()&&a||i||"function"==typeof N&&!N(e))return;let r=(0,s.getTarget)(e),l="[".concat((0,c.createAttribute)("inert"),"]"),u=(0,s.getDocument)(f.floating).querySelectorAll(l),d=(0,n.isElement)(r)?r:null;for(;d&&!(0,n.isLastTraversableNode)(d);){let e=(0,n.getParentNode)(d);if((0,n.isLastTraversableNode)(e)||!(0,n.isElement)(e))break;d=e}if(u.length&&(0,n.isElement)(r)&&!(0,s.isRootElement)(r)&&!(0,s.contains)(r,f.floating)&&Array.from(u).every(e=>!(0,s.contains)(d,e)))return;if((0,n.isHTMLElement)(r)){let t=(0,n.isLastTraversableNode)(r),i=(0,n.getComputedStyle)(r),a=/auto|scroll/,s=t||a.test(i.overflowX),o=t||a.test(i.overflowY),l=s&&r.clientWidth>0&&r.scrollWidth>r.clientWidth,c=o&&r.clientHeight>0&&r.scrollHeight>r.clientHeight,u="rtl"===i.direction,d=c&&(u?e.offsetX<=r.offsetWidth-r.clientWidth:e.offsetX>r.clientWidth),h=l&&e.offsetY>r.clientHeight;if(d||h)return}let h=null==(t=T.current.floatingContext)?void 0:t.nodeId,p=D&&(0,o.getNodeChildren)(D.nodesRef.current,h).some(t=>{var n;return(0,s.isEventTargetWithin)(e,null==(n=t.context)?void 0:n.elements.floating)});if((0,s.isEventTargetWithin)(e,f.floating)||(0,s.isEventTargetWithin)(e,f.domReference)||p)return;let g=D?(0,o.getNodeChildren)(D.nodesRef.current,h):[];if(g.length>0){let e=!0;if(g.forEach(t=>{var n;(null==(n=t.context)?void 0:n.open)&&!t.context.dataRef.current.__outsidePressBubbles&&(e=!1)}),!e)return}m(!1,e,"outside-press")}),z=(0,a.useEventCallback)(e=>{if(!("sloppy"!==F()||!p||!g||(0,s.isEventTargetWithin)(e,f.floating)||(0,s.isEventTargetWithin)(e,f.domReference))){if("touch"===e.pointerType){M.current={startTime:Date.now(),startX:e.clientX,startY:e.clientY,dismissOnPointerUp:!1,dismissOnMouseDown:!0},L.start(1e3,()=>{M.current&&(M.current.dismissOnPointerUp=!1,M.current.dismissOnMouseDown=!1)});return}Y(e)}}),W=(0,a.useEventCallback)(e=>{var t;if(H(e)||(L.clear(),"mousedown"===e.type&&M.current&&!M.current.dismissOnMouseDown))return;let n=()=>{var t;"pointerdown"===e.type?z(e):Y(e),null==(t=(0,s.getTarget)(e))||t.removeEventListener(e.type,n)};null==(t=(0,s.getTarget)(e))||t.addEventListener(e.type,n)}),q=(0,a.useEventCallback)(e=>{if("sloppy"!==F()||"touch"!==e.pointerType||!M.current||(0,s.isEventTargetWithin)(e,f.floating)||(0,s.isEventTargetWithin)(e,f.domReference))return;let t=Math.abs(e.clientX-M.current.startX),n=Math.abs(e.clientY-M.current.startY),i=Math.sqrt(t*t+n*n);i>5&&(M.current.dismissOnPointerUp=!0),i>10&&(Y(e),L.clear(),M.current=null)}),K=(0,a.useEventCallback)(e=>{"sloppy"!==F()||"touch"!==e.pointerType||!M.current||(0,s.isEventTargetWithin)(e,f.floating)||(0,s.isEventTargetWithin)(e,f.domReference)||(M.current.dismissOnPointerUp&&Y(e),L.clear(),M.current=null)});t.useEffect(()=>{if(!p||!g)return;T.current.__escapeKeyBubbles=O,T.current.__outsidePressBubbles=R;let e=new i.Timeout;function t(e){m(!1,e,"ancestor-scroll")}function a(){e.clear(),G.current=!0}function r(){e.start(5*!!(0,n.isWebKit)(),()=>{G.current=!1})}let o=(0,s.getDocument)(f.floating);o.addEventListener("pointerdown",B,!0),E&&(o.addEventListener("keydown",P?V:U,P),o.addEventListener("compositionstart",a),o.addEventListener("compositionend",r)),N&&(o.addEventListener("click",k?W:Y,k),o.addEventListener("pointerdown",k?W:Y,k),o.addEventListener("pointermove",q,k),o.addEventListener("pointerup",K,k),o.addEventListener("mousedown",W,k));let l=[];return C&&((0,n.isElement)(f.domReference)&&(l=(0,n.getOverflowAncestors)(f.domReference)),(0,n.isElement)(f.floating)&&(l=l.concat((0,n.getOverflowAncestors)(f.floating))),!(0,n.isElement)(f.reference)&&f.reference&&f.reference.contextElement&&(l=l.concat((0,n.getOverflowAncestors)(f.reference.contextElement)))),(l=l.filter(e=>{var t;return e!==(null==(t=o.defaultView)?void 0:t.visualViewport)})).forEach(e=>{e.addEventListener("scroll",t,{passive:!0})}),()=>{o.removeEventListener("pointerdown",B,!0),E&&(o.removeEventListener("keydown",P?V:U,P),o.removeEventListener("compositionstart",a),o.removeEventListener("compositionend",r)),N&&(o.removeEventListener("click",k?W:Y,k),o.removeEventListener("pointerdown",k?W:Y,k),o.removeEventListener("pointermove",q,k),o.removeEventListener("pointerup",K,k),o.removeEventListener("mousedown",W,k)),l.forEach(e=>{e.removeEventListener("scroll",t)}),e.clear()}},[T,f,E,N,x,p,m,C,g,O,R,U,P,V,Y,k,W,z,q,K,B]),t.useEffect(()=>{T.current.insideReactTree=!1},[T,N]);let Q=t.useMemo(()=>({onKeyDown:U,...I&&{[u[_]]:e=>{m(!1,e.nativeEvent,"reference-press")},..."intentional"!==_&&{onClick(e){m(!1,e.nativeEvent,"reference-press")}}}}),[U,m,I,_]),X=(0,a.useEventCallback)(e=>{let t=(0,s.getTarget)(e.nativeEvent);(0,s.contains)(f.floating,t)&&(b.current=!0)}),J=(0,a.useEventCallback)(()=>{T.current.insideReactTree=!0,w.start(0,()=>{T.current.insideReactTree=!1})}),Z=t.useMemo(()=>({onKeyDown:U,onMouseDown:X,onMouseUp:X,onPointerDownCapture:J,onMouseDownCapture:J,onClickCapture:J}),[U,X,J]);return t.useMemo(()=>g?{reference:Q,floating:Z}:{},[g,Q,Z])}},78420:e=>{"use strict";e.s({useFloatingRootContext:()=>r});var t=e.i(373150),n=e.i(555295),i=e.i(928878),a=e.i(737486),s=e.i(382352);function r(e){let{open:r=!1,onOpenChange:o,elements:l}=e,c=(0,i.useId)(),u=t.useRef({}),[d]=t.useState(()=>(0,a.createEventEmitter)()),h=null!=(0,s.useFloatingParentNodeId)(),[p,m]=t.useState(l.reference),f=(0,n.useEventCallback)((e,t,n)=>{u.current.openEvent=e?t:void 0,d.emit("openchange",{open:e,event:t,reason:n,nested:h}),null==o||o(e,t,n)}),T=t.useMemo(()=>({setPositionReference:m}),[]),g=t.useMemo(()=>({reference:p||l.reference||null,floating:l.floating||null,domReference:l.reference}),[p,l.reference,l.floating]);return t.useMemo(()=>({dataRef:u,open:r,onOpenChange:f,elements:g,events:d,floatingId:c,refs:T}),[r,f,g,d,c,T])}},745260:e=>{"use strict";e.s({useInteractions:()=>i});var t=e.i(373150),n=e.i(261302);function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=e.map(e=>null==e?void 0:e.reference),i=e.map(e=>null==e?void 0:e.floating),s=e.map(e=>null==e?void 0:e.item),r=t.useCallback(t=>a(t,e,"reference"),n),o=t.useCallback(t=>a(t,e,"floating"),i),l=t.useCallback(t=>a(t,e,"item"),s);return t.useMemo(()=>({getReferenceProps:r,getFloatingProps:o,getItemProps:l}),[r,o,l])}function a(e,t,i){let a=new Map,r="item"===i,o={};for(let t in"floating"===i&&(o.tabIndex=-1,o[n.FOCUSABLE_ATTRIBUTE]=""),e)r&&e&&(t===n.ACTIVE_KEY||t===n.SELECTED_KEY)||(o[t]=e[t]);for(let n=0;n<t.length;n+=1){var l;let c,u=null==(l=t[n])?void 0:l[i];(c="function"==typeof u?e?u(e):null:u)&&s(o,c,r,a)}return s(o,e,r,a),o}function s(e,t,i,a){for(let r in t){let o=t[r];if(!i||r!==n.ACTIVE_KEY&&r!==n.SELECTED_KEY)if(r.startsWith("on")){if(a.has(r)||a.set(r,[]),"function"==typeof o){var s;null==(s=a.get(r))||s.push(o),e[r]=function(){for(var e,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return null==(e=a.get(r))?void 0:e.map(e=>e(...n)).find(e=>void 0!==e)}}}else e[r]=o}}},262674:e=>{"use strict";e.s({useRole:()=>r});var t=e.i(373150),n=e.i(928878),i=e.i(738661),a=e.i(382352);let s=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function r(e){var r,o;let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{open:c,elements:u,floatingId:d}=e,{enabled:h=!0,role:p="dialog"}=l,m=(0,n.useId)(),f=(null==(r=u.domReference)?void 0:r.id)||m,T=t.useMemo(()=>{var e;return(null==(e=(0,i.getFloatingFocusElement)(u.floating))?void 0:e.id)||d},[u.floating,d]),g=null!=(o=s.get(p))?o:p,E=null!=(0,a.useFloatingParentNodeId)(),A=t.useMemo(()=>"tooltip"===g||"label"===p?{["aria-".concat("label"===p?"labelledby":"describedby")]:c?T:void 0}:{"aria-expanded":c?"true":"false","aria-haspopup":"alertdialog"===g?"dialog":g,"aria-controls":c?T:void 0,..."listbox"===g&&{role:"combobox"},..."menu"===g&&{id:f},..."menu"===g&&E&&{role:"menuitem"},..."select"===p&&{"aria-autocomplete":"none"},..."combobox"===p&&{"aria-autocomplete":"list"}},[g,T,E,c,f,p]),x=t.useMemo(()=>{let e={id:T,...g&&{role:g}};return"tooltip"===g||"label"===p?e:{...e,..."menu"===g&&{"aria-labelledby":f}}},[g,T,f,p]),I=t.useCallback(e=>{let{active:t,selected:n}=e,i={role:"option",...t&&{id:"".concat(T,"-fui-option")}};switch(p){case"select":case"combobox":return{...i,"aria-selected":n}}return{}},[T,p]);return t.useMemo(()=>h?{reference:A,floating:x,item:I}:{},[h,A,x,I])}},901251:e=>{"use strict";function t(e){return(null==e?void 0:e.ownerDocument)||document}e.s({ownerDocument:()=>t})},264050:e=>{"use strict";e.s({ownerWindow:()=>t.getWindow});var t=e.i(184678)},684288:e=>{"use strict";e.s({NOOP:()=>t});let t=()=>{}},802253:e=>{"use strict";e.s({useScrollLock:()=>p});var t=e.i(11968),n=e.i(107160),i=e.i(901251),a=e.i(264050),s=e.i(313680),r=e.i(182826),o=e.i(387295),l=e.i(684288);let c={},u={},d="",h=new class{acquire(e){return this.lockCount+=1,1===this.lockCount&&null===this.restore&&this.timeoutLock.start(0,()=>this.lock(e)),this.release}lock(e){if(0===this.lockCount||null!==this.restore)return;let t=(0,i.ownerDocument)(e).documentElement,s=(0,a.ownerWindow)(t).getComputedStyle(t).overflowY;if("hidden"===s||"clip"===s){this.restore=l.NOOP;return}let r=n.isIOS||!function(e){if("undefined"==typeof document)return!1;let t=(0,i.ownerDocument)(e);return(0,a.ownerWindow)(t).innerWidth-t.documentElement.clientWidth>0}(e);this.restore=r?function(e){let t=(0,i.ownerDocument)(e).documentElement,n=t.style.overflow;return t.style.overflow="hidden",()=>{t.style.overflow=n}}(e):function(e){var t,s;let r=(0,i.ownerDocument)(e),l=r.documentElement,h=r.body,p=(0,a.ownerWindow)(l),m=0,f=0,T=o.AnimationFrame.create();if(n.isWebKit&&(null!=(s=null==(t=p.visualViewport)?void 0:t.scale)?s:1)!==1)return()=>{};function g(){var e,t;let n=p.getComputedStyle(l),i=p.getComputedStyle(h);m=l.scrollTop,f=l.scrollLeft,c={scrollbarGutter:l.style.scrollbarGutter,overflowY:l.style.overflowY,overflowX:l.style.overflowX},d=l.style.scrollBehavior,u={position:h.style.position,height:h.style.height,width:h.style.width,boxSizing:h.style.boxSizing,overflowY:h.style.overflowY,overflowX:h.style.overflowX,scrollBehavior:h.style.scrollBehavior};let a="undefined"!=typeof CSS&&(null==(e=(t=CSS).supports)?void 0:e.call(t,"scrollbar-gutter","stable")),s=l.scrollHeight>l.clientHeight,r=l.scrollWidth>l.clientWidth,o="scroll"===n.overflowY||"scroll"===i.overflowY,T="scroll"===n.overflowX||"scroll"===i.overflowX,g=Math.max(0,p.innerWidth-l.clientWidth),E=Math.max(0,p.innerHeight-l.clientHeight),A=parseFloat(i.marginTop)+parseFloat(i.marginBottom),x=parseFloat(i.marginLeft)+parseFloat(i.marginRight);Object.assign(l.style,{scrollbarGutter:"stable",overflowY:!a&&(s||o)?"scroll":"hidden",overflowX:!a&&(r||T)?"scroll":"hidden"}),Object.assign(h.style,{position:"relative",height:A||E?"calc(100dvh - ".concat(A+E,"px)"):"100dvh",width:x||g?"calc(100vw - ".concat(x+g,"px)"):"100vw",boxSizing:"border-box",overflow:"hidden",scrollBehavior:"unset"}),h.scrollTop=m,h.scrollLeft=f,l.setAttribute("data-base-ui-scroll-locked",""),l.style.scrollBehavior="unset"}function E(){Object.assign(l.style,c),Object.assign(h.style,u),l.scrollTop=m,l.scrollLeft=f,l.removeAttribute("data-base-ui-scroll-locked"),l.style.scrollBehavior=d}function A(){E(),T.request(g)}return g(),p.addEventListener("resize",A),()=>{T.cancel(),E(),p.removeEventListener("resize",A)}}(e)}constructor(){(0,t._)(this,"lockCount",0),(0,t._)(this,"restore",null),(0,t._)(this,"timeoutLock",r.Timeout.create()),(0,t._)(this,"timeoutUnlock",r.Timeout.create()),(0,t._)(this,"release",()=>{this.lockCount-=1,0===this.lockCount&&this.restore&&this.timeoutUnlock.start(0,this.unlock)}),(0,t._)(this,"unlock",()=>{if(0===this.lockCount&&this.restore){var e;null==(e=this.restore)||e.call(this),this.restore=null}})}};function p(e){let{enabled:t=!0,mounted:a,open:r,referenceElement:o=null}=e;(0,s.useIsoLayoutEffect)(()=>{if(t&&n.isWebKit&&a&&!r){let e=(0,i.ownerDocument)(o),t=e.body.style.userSelect,n=e.body.style.webkitUserSelect;return e.body.style.userSelect="none",e.body.style.webkitUserSelect="none",()=>{e.body.style.userSelect=t,e.body.style.webkitUserSelect=n}}},[t,a,r,o]),(0,s.useIsoLayoutEffect)(()=>{if(t)return h.acquire(o)},[t,o])}},547052:e=>{"use strict";e.s({useTransitionStatus:()=>s});var t=e.i(373150),n=e.i(784445),i=e.i(313680),a=e.i(387295);function s(e){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],[o,l]=t.useState(e&&s?"idle":void 0),[c,u]=t.useState(e);return e&&!c&&(u(!0),l("starting")),e||!c||"ending"===o||r||l("ending"),e||c||"ending"!==o||l(void 0),(0,i.useIsoLayoutEffect)(()=>{if(!e&&c&&"ending"!==o&&r){let e=a.AnimationFrame.request(()=>{l("ending")});return()=>{a.AnimationFrame.cancel(e)}}},[e,c,o,r]),(0,i.useIsoLayoutEffect)(()=>{if(!e||s)return;let t=a.AnimationFrame.request(()=>{n.flushSync(()=>{l(void 0)})});return()=>{a.AnimationFrame.cancel(t)}},[s,e]),(0,i.useIsoLayoutEffect)(()=>{if(!e||!s)return;e&&c&&"idle"!==o&&l("starting");let t=a.AnimationFrame.request(()=>{l("idle")});return()=>{a.AnimationFrame.cancel(t)}},[s,e,c,l,o]),t.useMemo(()=>({mounted:c,setMounted:u,transitionStatus:o}),[c,o])}},804411:e=>{"use strict";e.s({useEnhancedClickHandler:()=>n});var t=e.i(373150);function n(e){let n=t.useRef(""),i=t.useCallback(t=>{t.defaultPrevented||(n.current=t.pointerType,e(t,t.pointerType))},[e]);return{onClick:t.useCallback(t=>{if(0===t.detail)return void e(t,"keyboard");"pointerType"in t&&e(t,t.pointerType),e(t,n.current),n.current=""},[e]),onPointerDown:i}}},859682:e=>{"use strict";e.s({useOpenInteractionType:()=>a});var t=e.i(373150),n=e.i(555295),i=e.i(804411);function a(e){let[a,s]=t.useState(null),r=(0,n.useEventCallback)((t,n)=>{e||s(n)}),o=(0,n.useEventCallback)(()=>{s(null)}),{onClick:l,onPointerDown:c}=(0,i.useEnhancedClickHandler)(r);return t.useMemo(()=>({openMethod:a,reset:o,triggerProps:{onClick:l,onPointerDown:c}}),[a,o,l,c])}},456467:e=>{"use strict";function t(e){if(e)return({"focus-out":"focus-out","escape-key":"escape-key","outside-press":"outside-press","list-navigation":"list-navigation",click:"trigger-press",hover:"trigger-hover",focus:"trigger-focus","reference-press":"trigger-press","safe-polygon":"trigger-hover","ancestor-scroll":void 0})[e]}e.s({translateOpenChangeReason:()=>t})},218278:e=>{"use strict";e.s({useDialogRoot:()=>f});var t=e.i(373150),n=e.i(373988),i=e.i(555295),a=e.i(575272),s=e.i(442777),r=e.i(78420),o=e.i(745260),l=e.i(262674),c=e.i(738661),u=e.i(802253),d=e.i(547052),h=e.i(859682),p=e.i(512081),m=e.i(456467);function f(e){let{defaultOpen:f,dismissible:T,modal:g,onNestedDialogClose:E,onNestedDialogOpen:A,onOpenChange:x,open:I,onOpenChangeComplete:_}=e,[C,v]=(0,n.useControlled)({controlled:I,default:f,name:"DialogRoot",state:"open"}),S=t.useRef(null),D=t.useRef(null),y=t.useRef(null),[N,b]=t.useState(void 0),[O,R]=t.useState(void 0),[P,k]=t.useState(null),[M,L]=t.useState(null),{mounted:w,setMounted:G,transitionStatus:j}=(0,d.useTransitionStatus)(C),{openMethod:B,triggerProps:F,reset:U}=(0,h.useOpenInteractionType)(C),H=(0,i.useEventCallback)((e,t,n)=>{null==x||x(e,t,n),v(e)}),V=(0,i.useEventCallback)(()=>{G(!1),null==_||_(!1),U()});(0,p.useOpenChangeComplete)({enabled:!e.actionsRef,open:C,ref:S,onComplete(){C||V()}}),t.useImperativeHandle(e.actionsRef,()=>({unmount:V}),[V]);let Y=(0,r.useFloatingRootContext)({elements:{reference:P,floating:M},open:C,onOpenChange:(e,t,n)=>{H(e,t,(0,m.translateOpenChangeReason)(n))}}),[z,W]=t.useState(0),q=0===z,K=(0,l.useRole)(Y),Q=(0,a.useClick)(Y),X=(0,s.useDismiss)(Y,{outsidePressEvent:"intentional",outsidePress(e){if(0!==e.button)return!1;let t=(0,c.getTarget)(e);return!!q&&!!T&&(!g||!!t&&(y.current===t||D.current===t))},escapeKey:q});(0,u.useScrollLock)({enabled:C&&!0===g,mounted:w,open:C,referenceElement:M});let{getReferenceProps:J,getFloatingProps:Z}=(0,o.useInteractions)([K,Q,X]);t.useEffect(()=>(A&&C&&A(z),E&&!C&&E(),()=>{E&&C&&E()}),[C,E,A,z]);let $=t.useCallback(e=>{W(e+1)},[]),ee=t.useCallback(()=>{W(0)},[]),et=t.useMemo(()=>J(F),[J,F]);return t.useMemo(()=>({modal:g,setOpen:H,open:C,titleElementId:N,setTitleElementId:b,descriptionElementId:O,setDescriptionElementId:R,onNestedDialogOpen:$,onNestedDialogClose:ee,nestedOpenDialogCount:z,openMethod:B,mounted:w,transitionStatus:j,triggerProps:et,getPopupProps:Z,setTriggerElement:k,setPopupElement:L,popupRef:S,backdropRef:D,internalBackdropRef:y,floatingRootContext:Y}),[g,H,C,N,O,$,ee,z,B,w,j,et,Z,Y])}},637850:e=>{"use strict";e.s({DialogRoot:()=>r});var t=e.i(373150),n=e.i(218437),i=e.i(611925),a=e.i(218278),s=e.i(290479);let r=function(e){let{children:r,defaultOpen:o=!1,dismissible:l=!0,modal:c=!0,onOpenChange:u,open:d,actionsRef:h,onOpenChangeComplete:p}=e,m=(0,n.useOptionalDialogRootContext)(),f=(0,a.useDialogRoot)({open:d,defaultOpen:o,onOpenChange:u,modal:c,dismissible:l,actionsRef:h,onOpenChangeComplete:p,onNestedDialogClose:null==m?void 0:m.onNestedDialogClose,onNestedDialogOpen:null==m?void 0:m.onNestedDialogOpen}),T=!!m,g=t.useMemo(()=>({...f,nested:T,onOpenChangeComplete:p}),[f,T,p]),E=t.useMemo(()=>({dismissible:l}),[l]);return(0,s.jsx)(i.DialogContext.Provider,{value:g,children:(0,s.jsx)(n.DialogRootContext.Provider,{value:E,children:r})})}},30484:e=>{"use strict";e.s({DialogTitle:()=>r});var t=e.i(373150),n=e.i(313680),i=e.i(218437),a=e.i(348580),s=e.i(191564);let r=t.forwardRef(function(e,t){let{render:r,className:o,id:l,...c}=e,{setTitleElementId:u}=(0,i.useDialogRootContext)(),d=(0,s.useBaseUiId)(l);return(0,n.useIsoLayoutEffect)(()=>(u(d),()=>{u(void 0)}),[d,u]),(0,a.useRenderElement)("h2",e,{ref:t,props:[{id:d},c]})})},178288:e=>{"use strict";e.s({DialogTrigger:()=>o});var t=e.i(373150),n=e.i(218437),i=e.i(508950),a=e.i(348580),s=e.i(866533),r=e.i(108521);let o=t.forwardRef(function(e,o){let{render:l,className:c,disabled:u=!1,nativeButton:d=!0,...h}=e,{open:p,setTriggerElement:m,triggerProps:f}=(0,n.useDialogRootContext)(),T=t.useMemo(()=>({disabled:u,open:p}),[u,p]),{getButtonProps:g,buttonRef:E}=(0,i.useButton)({disabled:u,native:d});return(0,a.useRenderElement)("button",e,{state:T,ref:[E,o,m],props:[f,{[r.CLICK_TRIGGER_IDENTIFIER]:""},h,g],customStyleHookMapping:s.triggerOpenStateMapping})})},1027:e=>{"use strict";e.s({Backdrop:()=>t.DialogBackdrop,Close:()=>n.DialogClose,Description:()=>i.DialogDescription,Popup:()=>a.DialogPopup,Portal:()=>s.DialogPortal,Root:()=>r.DialogRoot,Title:()=>o.DialogTitle,Trigger:()=>l.DialogTrigger});var t=e.i(942908),n=e.i(346956),i=e.i(704572),a=e.i(762936),s=e.i(44263),r=e.i(637850),o=e.i(30484),l=e.i(178288);e.i(419605)},327381:e=>{"use strict";e.s({Backdrop:()=>t.Backdrop,Close:()=>t.Close,Description:()=>t.Description,Popup:()=>t.Popup,Portal:()=>t.Portal,Root:()=>t.Root,Title:()=>t.Title,Trigger:()=>t.Trigger}),e.i(513070);var t=e.i(1027)},456064:e=>{"use strict";e.s({Dialog:()=>t});var t=e.i(327381)},620208:e=>{"use strict";function t(e){let{top:t,left:n,right:i,bottom:a}=e;return{x:{min:n,max:i},y:{min:t,max:a}}}function n(e){let{x:t,y:n}=e;return{top:n.min,right:t.max,bottom:n.max,left:t.min}}function i(e,t){if(!t)return e;let n=t({x:e.left,y:e.top}),i=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}e.s({convertBoundingBoxToBox:()=>t,convertBoxToBoundingBox:()=>n,transformBoxPoints:()=>i})},754268:e=>{"use strict";function t(e){return void 0===e||1===e}function n(e){let{scale:n,scaleX:i,scaleY:a}=e;return!t(n)||!t(i)||!t(a)}function i(e){return n(e)||a(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function a(e){var t,n;return(t=e.x)&&"0%"!==t||(n=e.y)&&"0%"!==n}e.s({has2DTranslate:()=>a,hasScale:()=>n,hasTransform:()=>i})},786145:e=>{"use strict";e.s({applyBoxDelta:()=>r,applyTreeDeltas:()=>o,scalePoint:()=>i,transformBox:()=>u,translateAxis:()=>l});var t=e.i(869514),n=e.i(754268);function i(e,t,n){return n+t*(e-n)}function a(e,t,n,i,a){return void 0!==a&&(e=i+a*(e-i)),i+n*(e-i)+t}function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;e.min=a(e.min,t,n,i,s),e.max=a(e.max,t,n,i,s)}function r(e,t){let{x:n,y:i}=t;s(e.x,n.translate,n.scale,n.originPoint),s(e.y,i.translate,i.scale,i.originPoint)}function o(e,t,i){let a,s,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=i.length;if(l){t.x=t.y=1;for(let c=0;c<l;c++){s=(a=i[c]).projectionDelta;let{visualElement:l}=a.options;(!l||!l.props.style||"contents"!==l.props.style.display)&&(o&&a.options.layoutScroll&&a.scroll&&a!==a.root&&u(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),s&&(t.x*=s.x.scale,t.y*=s.y.scale,r(e,s)),o&&(0,n.hasTransform)(a.latestValues)&&u(e,a.latestValues))}t.x<1.0000000000001&&t.x>.999999999999&&(t.x=1),t.y<1.0000000000001&&t.y>.999999999999&&(t.y=1)}}function l(e,t){e.min=e.min+t,e.max=e.max+t}function c(e,n,i,a){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5,o=(0,t.mixNumber)(e.min,e.max,r);s(e,n,i,o,a)}function u(e,t){c(e.x,t.x,t.scaleX,t.scale,t.originX),c(e.y,t.y,t.scaleY,t.scale,t.originY)}},661808:e=>{"use strict";e.s({measurePageBox:()=>a,measureViewportBox:()=>i});var t=e.i(620208),n=e.i(786145);function i(e,n){return(0,t.convertBoundingBoxToBox)((0,t.transformBoxPoints)(e.getBoundingClientRect(),n))}function a(e,t,a){let s=i(e,a),{scroll:r}=t;return r&&((0,n.translateAxis)(s.x,r.offset.x),(0,n.translateAxis)(s.y,r.offset.y)),s}},151477:e=>{"use strict";e.s({featureDefinitions:()=>n});let t={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},n={};for(let e in t)n[e]={isEnabled:n=>t[e].some(e=>!!n[e])}},924370:e=>{"use strict";e.s({createBox:()=>a,createDelta:()=>n});let t=()=>({translate:0,scale:1,origin:0,originPoint:0}),n=()=>({x:t(),y:t()}),i=()=>({min:0,max:0}),a=()=>({x:i(),y:i()})},873571:e=>{"use strict";e.s({isBrowser:()=>t});let t="undefined"!=typeof window},734596:e=>{"use strict";e.s({hasReducedMotionListener:()=>n,prefersReducedMotion:()=>t});let t={current:null},n={current:!1}},391667:e=>{"use strict";e.s({initPrefersReducedMotion:()=>i});var t=e.i(873571),n=e.i(734596);function i(){if(n.hasReducedMotionListener.current=!0,t.isBrowser)if(window.matchMedia){let e=window.matchMedia("(prefers-reduced-motion)"),t=()=>n.prefersReducedMotion.current=e.matches;e.addEventListener("change",t),t()}else n.prefersReducedMotion.current=!1}},172354:e=>{"use strict";e.s({visualElementStore:()=>t});let t=new WeakMap},745141:e=>{"use strict";function t(e){return null!==e&&"object"==typeof e&&"function"==typeof e.start}e.s({isAnimationControls:()=>t})},316188:e=>{"use strict";function t(e){return"string"==typeof e||Array.isArray(e)}e.s({isVariantLabel:()=>t})},526240:e=>{"use strict";e.s({variantPriorityOrder:()=>t,variantProps:()=>n});let t=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],n=["initial",...t]},238942:e=>{"use strict";e.s({isControllingVariants:()=>a,isVariantNode:()=>s});var t=e.i(745141),n=e.i(316188),i=e.i(526240);function a(e){return(0,t.isAnimationControls)(e.animate)||i.variantProps.some(t=>(0,n.isVariantLabel)(e[t]))}function s(e){return!!(a(e)||e.variants)}},878692:e=>{"use strict";e.s({updateMotionValuesFromProps:()=>i});var t=e.i(73145),n=e.i(349305);function i(e,i,a){for(let s in i){let r=i[s],o=a[s];if((0,t.isMotionValue)(r))e.addValue(s,r);else if((0,t.isMotionValue)(o))e.addValue(s,(0,n.motionValue)(r,{owner:e}));else if(o!==r)if(e.hasValue(s)){let t=e.getValue(s);!0===t.liveStyle?t.jump(r):t.hasAnimated||t.set(r)}else{let t=e.getStaticValue(s);e.addValue(s,(0,n.motionValue)(void 0!==t?t:r,{owner:e}))}}for(let t in a)void 0===i[t]&&e.removeValue(t);return i}},732822:e=>{"use strict";function t(e){let t=[{},{}];return null==e||e.values.forEach((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()}),t}function n(e,n,i,a){if("function"==typeof n){let[s,r]=t(a);n=n(void 0!==i?i:e.custom,s,r)}if("string"==typeof n&&(n=e.variants&&e.variants[n]),"function"==typeof n){let[s,r]=t(a);n=n(void 0!==i?i:e.custom,s,r)}return n}e.s({resolveVariantFromProps:()=>n})},828064:e=>{"use strict";e.s({VisualElement:()=>C});var t=e.i(328013),n=e.i(851625),i=e.i(515496),a=e.i(73145),s=e.i(156860),r=e.i(349305),o=e.i(649717),l=e.i(380594),c=e.i(407133),u=e.i(935099),d=e.i(669944),h=e.i(823658),p=e.i(833444),m=e.i(151477),f=e.i(924370),T=e.i(391667),g=e.i(734596),E=e.i(172354),A=e.i(238942),x=e.i(878692),I=e.i(732822);let _=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class C{scrapeMotionValuesFromProps(e,t,n){return{}}mount(e){var t;this.current=e,E.visualElementStore.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,t)=>this.bindToMotionValue(t,e)),g.hasReducedMotionListener.current||(0,T.initPrefersReducedMotion)(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||g.prefersReducedMotion.current),null==(t=this.parent)||t.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;for(let t in this.projection&&this.projection.unmount(),(0,i.cancelFrame)(this.notifyUpdate),(0,i.cancelFrame)(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),null==(e=this.parent)||e.removeChild(this),this.events)this.events[t].clear();for(let e in this.features){let t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),null!=this.enteringChildren||(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){let n;this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();let a=s.transformProps.has(e);a&&this.onBindTransform&&this.onBindTransform();let r=t.on("change",t=>{this.latestValues[e]=t,this.props.onUpdate&&i.frame.preRender(this.notifyUpdate),a&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});window.MotionCheckAppearSync&&(n=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{r(),n&&n(),t.owner&&t.stop()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in m.featureDefinitions){let t=m.featureDefinitions[e];if(!t)continue;let{isEnabled:n,Feature:i}=t;if(!this.features[e]&&i&&n(this.props)&&(this.features[e]=new i(this)),this.features[e]){let t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):(0,f.createBox)()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let t=0;t<_.length;t++){let n=_[t];this.propEventSubscriptions[n]&&(this.propEventSubscriptions[n](),delete this.propEventSubscriptions[n]);let i=e["on"+n];i&&(this.propEventSubscriptions[n]=this.on(n,i))}this.prevMotionValues=(0,x.updateMotionValuesFromProps)(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){let t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){let n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);let t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return void 0===n&&void 0!==t&&(n=(0,r.motionValue)(null===t?void 0:t,{owner:this}),this.addValue(e,n)),n}readValue(e,t){var n;let i=void 0===this.latestValues[e]&&this.current?null!=(n=this.getBaseTargetFromProps(this.props,e))?n:this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];return null!=i&&("string"==typeof i&&((0,d.isNumericalString)(i)||(0,h.isZeroValueString)(i))?i=parseFloat(i):!(0,o.findValueType)(i)&&l.complex.test(t)&&(i=(0,c.getAnimatableNone)(e,t)),this.setBaseTarget(e,(0,a.isMotionValue)(i)?i.get():i)),(0,a.isMotionValue)(i)?i.get():i}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){let t,{initial:n}=this.props;if("string"==typeof n||"object"==typeof n){var i;let a=(0,I.resolveVariantFromProps)(this.props,n,null==(i=this.presenceContext)?void 0:i.custom);a&&(t=a[e])}if(n&&void 0!==t)return t;let s=this.getBaseTargetFromProps(this.props,e);return void 0===s||(0,a.isMotionValue)(s)?void 0!==this.initialValues[e]&&void 0===t?void 0:this.baseTarget[e]:s}on(e,t){return this.events[e]||(this.events[e]=new p.SubscriptionManager),this.events[e].add(t)}notify(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){u.microtask.render(this.render)}constructor({parent:e,props:s,presenceContext:r,reducedMotionConfig:o,blockInitialAnimation:l,visualState:c},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=t.KeyframeResolver,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{let e=n.time.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,i.frame.render(this.render,!1,!0))};let{latestValues:d,renderState:h}=c;this.latestValues=d,this.baseTarget={...d},this.initialValues=s.initial?{...d}:{},this.renderState=h,this.parent=e,this.props=s,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=o,this.options=u,this.blockInitialAnimation=!!l,this.isControllingVariants=(0,A.isControllingVariants)(s),this.isVariantNode=(0,A.isVariantNode)(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);let{willChange:p,...m}=this.scrapeMotionValuesFromProps(s,{},this);for(let e in m){let t=m[e];void 0!==d[e]&&(0,a.isMotionValue)(t)&&t.set(d[e])}}}},446270:e=>{"use strict";e.s({DOMVisualElement:()=>a});var t=e.i(267097),n=e.i(73145),i=e.i(828064);class a extends i.VisualElement{sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,t){let{vars:n,style:i}=t;delete n[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);let{children:e}=this.props;(0,n.isMotionValue)(e)&&(this.childSubscription=e.on("change",e=>{this.current&&(this.current.textContent="".concat(e))}))}constructor(){super(...arguments),this.KeyframeResolver=t.DOMKeyframesResolver}}},153881:e=>{"use strict";e.s({buildTransform:()=>r});var t=e.i(156860),n=e.i(647621),i=e.i(986700);let a={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},s=t.transformPropOrder.length;function r(e,r,o){let l="",c=!0;for(let u=0;u<s;u++){let s=t.transformPropOrder[u],d=e[s];if(void 0===d)continue;let h=!0;if(!(h="number"==typeof d?d===+!!s.startsWith("scale"):0===parseFloat(d))||o){let e=(0,n.getValueAsType)(d,i.numberValueTypes[s]);if(!h){c=!1;let t=a[s]||s;l+="".concat(t,"(").concat(e,") ")}o&&(r[s]=e)}}return l=l.trim(),o?l=o(r,c?"":l):c&&(l="none"),l}},418687:e=>{"use strict";e.s({buildHTMLStyles:()=>r});var t=e.i(156860),n=e.i(518800),i=e.i(647621),a=e.i(986700),s=e.i(153881);function r(e,r,o){let{style:l,vars:c,transformOrigin:u}=e,d=!1,h=!1;for(let e in r){let s=r[e];if(t.transformProps.has(e)){d=!0;continue}if((0,n.isCSSVariableName)(e)){c[e]=s;continue}{let t=(0,i.getValueAsType)(s,a.numberValueTypes[e]);e.startsWith("origin")?(h=!0,u[e]=t):l[e]=t}}if(!r.transform&&(d||o?l.transform=(0,s.buildTransform)(r,e.transform,o):l.transform&&(l.transform="none")),h){let{originX:e="50%",originY:t="50%",originZ:n=0}=u;l.transformOrigin="".concat(e," ").concat(t," ").concat(n)}}},94484:e=>{"use strict";function t(e,t,n,i){let a,{style:s,vars:r}=t,o=e.style;for(a in s)o[a]=s[a];for(a in null==i||i.applyProjectionStyles(o,n),r)o.setProperty(a,r[a])}e.s({renderHTML:()=>t})},590322:e=>{"use strict";e.s({addScaleCorrector:()=>i,scaleCorrectors:()=>n});var t=e.i(518800);let n={};function i(e){for(let i in e)n[i]=e[i],(0,t.isCSSVariableName)(i)&&(n[i].isCSSVariable=!0)}},420233:e=>{"use strict";e.s({isForcedMotionValue:()=>i});var t=e.i(156860),n=e.i(590322);function i(e,i){let{layout:a,layoutId:s}=i;return t.transformProps.has(e)||e.startsWith("origin")||(a||void 0!==s)&&(!!n.scaleCorrectors[e]||"opacity"===e)}},707909:e=>{"use strict";e.s({scrapeMotionValuesFromProps:()=>i});var t=e.i(73145),n=e.i(420233);function i(e,i,a){let{style:s}=e,r={};for(let l in s){var o;((0,t.isMotionValue)(s[l])||i.style&&(0,t.isMotionValue)(i.style[l])||(0,n.isForcedMotionValue)(l,e)||(null==a||null==(o=a.getValue(l))?void 0:o.liveStyle)!==void 0)&&(r[l]=s[l])}return r}},249646:e=>{"use strict";e.s({HTMLVisualElement:()=>c});var t=e.i(156860),n=e.i(61469),i=e.i(518800),a=e.i(661808),s=e.i(446270),r=e.i(418687),o=e.i(94484),l=e.i(707909);class c extends s.DOMVisualElement{readValueFromInstance(e,a){var s;if(t.transformProps.has(a))return(null==(s=this.projection)?void 0:s.isProjecting)?(0,n.defaultTransformValue)(a):(0,n.readTransformValue)(e,a);{let t=window.getComputedStyle(e),n=((0,i.isCSSVariableName)(a)?t.getPropertyValue(a):t[a])||0;return"string"==typeof n?n.trim():n}}measureInstanceViewportBox(e,t){let{transformPagePoint:n}=t;return(0,a.measureViewportBox)(e,n)}build(e,t,n){(0,r.buildHTMLStyles)(e,t,n.transformTemplate)}scrapeMotionValuesFromProps(e,t,n){return(0,l.scrapeMotionValuesFromProps)(e,t,n)}constructor(){super(...arguments),this.type="html",this.renderInstance=o.renderHTML}}},777216:e=>{"use strict";e.s({camelToDash:()=>t});let t=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase()},5745:e=>{"use strict";e.s({buildSVGPath:()=>a});var t=e.i(20593);let n={offset:"stroke-dashoffset",array:"stroke-dasharray"},i={offset:"strokeDashoffset",array:"strokeDasharray"};function a(e,a){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=!(arguments.length>4)||void 0===arguments[4]||arguments[4];e.pathLength=1;let l=o?n:i;e[l.offset]=t.px.transform(-r);let c=t.px.transform(a),u=t.px.transform(s);e[l.array]="".concat(c," ").concat(u)}},812987:e=>{"use strict";e.s({buildSVGAttrs:()=>i});var t=e.i(418687),n=e.i(5745);function i(e,i,a,s,r){var o,l;let{attrX:c,attrY:u,attrScale:d,pathLength:h,pathSpacing:p=1,pathOffset:m=0,...f}=i;if((0,t.buildHTMLStyles)(e,f,s),a){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};let{attrs:T,style:g}=e;T.transform&&(g.transform=T.transform,delete T.transform),(g.transform||T.transformOrigin)&&(g.transformOrigin=null!=(o=T.transformOrigin)?o:"50% 50%",delete T.transformOrigin),g.transform&&(g.transformBox=null!=(l=null==r?void 0:r.transformBox)?l:"fill-box",delete T.transformBox),void 0!==c&&(T.x=c),void 0!==u&&(T.y=u),void 0!==d&&(T.scale=d),void 0!==h&&(0,n.buildSVGPath)(T,h,p,m,!1)}},956278:e=>{"use strict";e.s({camelCaseAttributes:()=>t});let t=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"])},768276:e=>{"use strict";e.s({isSVGTag:()=>t});let t=e=>"string"==typeof e&&"svg"===e.toLowerCase()},365745:e=>{"use strict";e.s({renderSVG:()=>a});var t=e.i(777216),n=e.i(94484),i=e.i(956278);function a(e,a,s,r){for(let s in(0,n.renderHTML)(e,a,void 0,r),a.attrs)e.setAttribute(i.camelCaseAttributes.has(s)?s:(0,t.camelToDash)(s),a.attrs[s])}},743422:e=>{"use strict";e.s({scrapeMotionValuesFromProps:()=>a});var t=e.i(73145),n=e.i(156860),i=e.i(707909);function a(e,a,s){let r=(0,i.scrapeMotionValuesFromProps)(e,a,s);for(let i in e)((0,t.isMotionValue)(e[i])||(0,t.isMotionValue)(a[i]))&&(r[-1!==n.transformPropOrder.indexOf(i)?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i]=e[i]);return r}},467188:e=>{"use strict";e.s({SVGVisualElement:()=>d});var t=e.i(156860),n=e.i(328781),i=e.i(924370),a=e.i(446270),s=e.i(777216),r=e.i(812987),o=e.i(956278),l=e.i(768276),c=e.i(365745),u=e.i(743422);class d extends a.DOMVisualElement{getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,i){if(t.transformProps.has(i)){let e=(0,n.getDefaultValueType)(i);return e&&e.default||0}return i=o.camelCaseAttributes.has(i)?i:(0,s.camelToDash)(i),e.getAttribute(i)}scrapeMotionValuesFromProps(e,t,n){return(0,u.scrapeMotionValuesFromProps)(e,t,n)}build(e,t,n){(0,r.buildSVGAttrs)(e,t,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,t,n,i){(0,c.renderSVG)(e,t,n,i)}mount(e){this.isSVGTag=(0,l.isSVGTag)(e.tagName),super.mount(e)}constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=i.createBox}}},17269:e=>{"use strict";e.s({lowercaseSVGElements:()=>t});let t=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"]},206853:e=>{"use strict";e.s({isSVGComponent:()=>n});var t=e.i(17269);function n(e){if("string"!=typeof e||e.includes("-"));else if(t.lowercaseSVGElements.indexOf(e)>-1||/[A-Z]/u.test(e))return!0;return!1}},228103:e=>{"use strict";e.s({createDomVisualElement:()=>s});var t=e.i(373150),n=e.i(249646),i=e.i(467188),a=e.i(206853);let s=(e,s)=>(0,a.isSVGComponent)(e)?new i.SVGVisualElement(s):new n.HTMLVisualElement(s,{allowProjection:e!==t.Fragment})},839226:e=>{"use strict";e.s({LayoutGroupContext:()=>t});let t=(0,e.i(373150).createContext)({})},605605:e=>{"use strict";e.s({LazyContext:()=>t});let t=(0,e.i(373150).createContext)({strict:!1})},700991:e=>{"use strict";e.s({MotionConfigContext:()=>t});let t=(0,e.i(373150).createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"})},60862:e=>{"use strict";e.s({MotionContext:()=>t});let t=(0,e.i(373150).createContext)({})},506445:e=>{"use strict";e.s({getCurrentTreeVariants:()=>i});var t=e.i(238942),n=e.i(316188);function i(e,i){if((0,t.isControllingVariants)(e)){let{initial:t,animate:i}=e;return{initial:!1===t||(0,n.isVariantLabel)(t)?t:void 0,animate:(0,n.isVariantLabel)(i)?i:void 0}}return!1!==e.inherit?i:{}}},952138:e=>{"use strict";e.s({useCreateMotionContext:()=>a});var t=e.i(373150),n=e.i(60862),i=e.i(506445);function a(e){let{initial:a,animate:r}=(0,i.getCurrentTreeVariants)(e,(0,t.useContext)(n.MotionContext));return(0,t.useMemo)(()=>({initial:a,animate:r}),[s(a),s(r)])}function s(e){return Array.isArray(e)?e.join(" "):e}},462729:e=>{"use strict";e.s({createHtmlRenderState:()=>t});let t=()=>({style:{},transform:{},transformOrigin:{},vars:{}})},440579:e=>{"use strict";e.s({copyRawValuesOnly:()=>r,useHTMLProps:()=>o});var t=e.i(73145),n=e.i(373150),i=e.i(420233),a=e.i(418687),s=e.i(462729);function r(e,n,a){for(let s in n)(0,t.isMotionValue)(n[s])||(0,i.isForcedMotionValue)(s,a)||(e[s]=n[s])}function o(e,t){let i={},o=function(e,t){let i=e.style||{},o={};return r(o,i,e),Object.assign(o,function(e,t){let{transformTemplate:i}=e;return(0,n.useMemo)(()=>{let e=(0,s.createHtmlRenderState)();return(0,a.buildHTMLStyles)(e,t,i),Object.assign({},e.vars,e.style)},[t])}(e,t)),o}(e,t);return e.drag&&!1!==e.dragListener&&(i.draggable=!1,o.userSelect=o.WebkitUserSelect=o.WebkitTouchCallout="none",o.touchAction=!0===e.drag?"none":"pan-".concat("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(i.tabIndex=0),i.style=o,i}},992221:e=>{"use strict";e.s({createSvgRenderState:()=>n});var t=e.i(462729);let n=()=>({...(0,t.createHtmlRenderState)(),attrs:{}})},412272:e=>{"use strict";e.s({useSVGProps:()=>r});var t=e.i(373150),n=e.i(440579),i=e.i(812987),a=e.i(992221),s=e.i(768276);function r(e,r,o,l){let c=(0,t.useMemo)(()=>{let t=(0,a.createSvgRenderState)();return(0,i.buildSVGAttrs)(t,r,(0,s.isSVGTag)(l),e.transformTemplate,e.style),{...t.attrs,style:{...t.style}}},[r]);if(e.style){let t={};(0,n.copyRawValuesOnly)(t,e.style,e),c.style={...t,...c.style}}return c}},535356:e=>{"use strict";e.s({isValidMotionProp:()=>n});let t=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function n(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||t.has(e)}},334033:e=>{"use strict";e.s({filterProps:()=>i});var t=e.i(535356);let n=e=>!(0,t.isValidMotionProp)(e);try{!function(e){"function"==typeof e&&(n=n=>n.startsWith("on")?!(0,t.isValidMotionProp)(n):e(n))}(e.r(680886).default)}catch(e){}function i(e,i,a){let s={};for(let r in e)("values"!==r||"object"!=typeof e.values)&&(n(r)||!0===a&&(0,t.isValidMotionProp)(r)||!i&&!(0,t.isValidMotionProp)(r)||e.draggable&&r.startsWith("onDrag"))&&(s[r]=e[r]);return s}},201395:e=>{"use strict";e.s({useRender:()=>o});var t=e.i(73145),n=e.i(373150),i=e.i(440579),a=e.i(412272),s=e.i(334033),r=e.i(206853);function o(e,o,l,c,u){let{latestValues:d}=c,h=arguments.length>5&&void 0!==arguments[5]&&arguments[5],p=((0,r.isSVGComponent)(e)?a.useSVGProps:i.useHTMLProps)(o,d,u,e),m=(0,s.filterProps)(o,"string"==typeof e,h),f=e!==n.Fragment?{...m,...p,ref:l}:{},{children:T}=o,g=(0,n.useMemo)(()=>(0,t.isMotionValue)(T)?T.get():T,[T]);return(0,n.createElement)(e,{...f,children:g})}},327879:e=>{"use strict";e.s({PresenceContext:()=>t});let t=(0,e.i(373150).createContext)(null)},653312:e=>{"use strict";e.s({useConstant:()=>n});var t=e.i(373150);function n(e){let n=(0,t.useRef)(null);return null===n.current&&(n.current=e()),n.current}},187640:e=>{"use strict";e.s({resolveMotionValue:()=>n});var t=e.i(73145);function n(e){return(0,t.isMotionValue)(e)?e.get():e}},706976:e=>{"use strict";e.s({makeUseVisualState:()=>c});var t=e.i(373150),n=e.i(745141),i=e.i(60862),a=e.i(327879),s=e.i(238942),r=e.i(732822),o=e.i(653312),l=e.i(187640);let c=e=>(c,u)=>{let d=(0,t.useContext)(i.MotionContext),h=(0,t.useContext)(a.PresenceContext),p=()=>(function(e,t,i,a){let{scrapeMotionValuesFromProps:o,createRenderState:c}=e;return{latestValues:function(e,t,i,a){let o={},c=a(e,{});for(let e in c)o[e]=(0,l.resolveMotionValue)(c[e]);let{initial:u,animate:d}=e,h=(0,s.isControllingVariants)(e),p=(0,s.isVariantNode)(e);t&&p&&!h&&!1!==e.inherit&&(void 0===u&&(u=t.initial),void 0===d&&(d=t.animate));let m=!!i&&!1===i.initial,f=(m=m||!1===u)?d:u;if(f&&"boolean"!=typeof f&&!(0,n.isAnimationControls)(f)){let t=Array.isArray(f)?f:[f];for(let n=0;n<t.length;n++){let i=(0,r.resolveVariantFromProps)(e,t[n]);if(i){let{transitionEnd:e,transition:t,...n}=i;for(let e in n){let t=n[e];if(Array.isArray(t)){let e=m?t.length-1:0;t=t[e]}null!==t&&(o[e]=t)}for(let t in e)o[t]=e[t]}}}return o}(t,i,a,o),renderState:c()}})(e,c,d,h);return u?p():(0,o.useConstant)(p)}},680902:e=>{"use strict";e.s({useHTMLVisualState:()=>a});var t=e.i(706976),n=e.i(462729),i=e.i(707909);let a=(0,t.makeUseVisualState)({scrapeMotionValuesFromProps:i.scrapeMotionValuesFromProps,createRenderState:n.createHtmlRenderState})},507325:e=>{"use strict";e.s({useSVGVisualState:()=>a});var t=e.i(706976),n=e.i(992221),i=e.i(743422);let a=(0,t.makeUseVisualState)({scrapeMotionValuesFromProps:i.scrapeMotionValuesFromProps,createRenderState:n.createSvgRenderState})},261388:e=>{"use strict";e.s({loadFeatures:()=>n});var t=e.i(151477);function n(e){for(let n in e)t.featureDefinitions[n]={...t.featureDefinitions[n],...e[n]}}},745053:e=>{"use strict";e.s({motionComponentSymbol:()=>t});let t=Symbol.for("motionComponentSymbol")},428491:e=>{"use strict";function t(e){return e&&"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}e.s({isRefObject:()=>t})},300012:e=>{"use strict";e.s({useMotionRef:()=>i});var t=e.i(373150),n=e.i(428491);function i(e,i,a){return(0,t.useCallback)(t=>{t&&e.onMount&&e.onMount(t),i&&(t?i.mount(t):i.unmount()),a&&("function"==typeof a?a(t):(0,n.isRefObject)(a)&&(a.current=t))},[i])}},526278:e=>{"use strict";e.s({optimizedAppearDataAttribute:()=>t});let t="data-"+(0,e.i(777216).camelToDash)("framerAppearId")},599286:e=>{"use strict";e.s({SwitchLayoutGroupContext:()=>t});let t=(0,e.i(373150).createContext)({})},711965:e=>{"use strict";e.s({useIsomorphicLayoutEffect:()=>n});var t=e.i(373150);let n=e.i(873571).isBrowser?t.useLayoutEffect:t.useEffect},638260:e=>{"use strict";e.s({useVisualElement:()=>u});var t=e.i(373150),n=e.i(526278),i=e.i(605605),a=e.i(700991),s=e.i(60862),r=e.i(327879),o=e.i(599286),l=e.i(428491),c=e.i(711965);function u(e,u,d,h,p){var m,f,T,g;let{visualElement:E}=(0,t.useContext)(s.MotionContext),A=(0,t.useContext)(i.LazyContext),x=(0,t.useContext)(r.PresenceContext),I=(0,t.useContext)(a.MotionConfigContext).reducedMotion,_=(0,t.useRef)(null);h=h||A.renderer,!_.current&&h&&(_.current=h(e,{visualState:u,parent:E,props:d,presenceContext:x,blockInitialAnimation:!!x&&!1===x.initial,reducedMotionConfig:I}));let C=_.current,v=(0,t.useContext)(o.SwitchLayoutGroupContext);C&&!C.projection&&p&&("html"===C.type||"svg"===C.type)&&function(e,t,n,i){let{layoutId:a,layout:s,drag:r,dragConstraints:o,layoutScroll:c,layoutRoot:u,layoutCrossfade:d}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:function e(t){if(t)return!1!==t.options.allowProjection?t.projection:e(t.parent)}(e.parent)),e.projection.setOptions({layoutId:a,layout:s,alwaysMeasureLayout:!!r||o&&(0,l.isRefObject)(o),visualElement:e,animationType:"string"==typeof s?s:"both",initialPromotionConfig:i,crossfade:d,layoutScroll:c,layoutRoot:u})}(_.current,d,p,v);let S=(0,t.useRef)(!1);(0,t.useInsertionEffect)(()=>{C&&S.current&&C.update(d,x)});let D=d[n.optimizedAppearDataAttribute],y=(0,t.useRef)(!!D&&!(null==(m=(f=window).MotionHandoffIsComplete)?void 0:m.call(f,D))&&(null==(T=(g=window).MotionHasOptimisedAnimation)?void 0:T.call(g,D)));return(0,c.useIsomorphicLayoutEffect)(()=>{C&&(S.current=!0,window.MotionIsMounted=!0,C.updateFeatures(),C.scheduleRenderMicrotask(),y.current&&C.animationState&&C.animationState.animateChanges())}),(0,t.useEffect)(()=>{C&&(!y.current&&C.animationState&&C.animationState.animateChanges(),y.current&&(queueMicrotask(()=>{var e,t;null==(e=(t=window).MotionHandoffMarkAsComplete)||e.call(t,D)}),y.current=!1),C.enteringChildren=void 0)}),C}},350046:e=>{"use strict";e.s({createMotionComponent:()=>E});var t=e.i(290479),n=e.i(373150),i=e.i(839226),a=e.i(605605),s=e.i(700991),r=e.i(60862),o=e.i(952138),l=e.i(201395),c=e.i(206853),u=e.i(680902),d=e.i(507325),h=e.i(873571),p=e.i(151477),m=e.i(261388),f=e.i(745053),T=e.i(300012),g=e.i(638260);function E(e){var E,A;let{forwardMotionProps:x=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},I=arguments.length>2?arguments[2]:void 0,_=arguments.length>3?arguments[3]:void 0;I&&(0,m.loadFeatures)(I);let C=(0,c.isSVGComponent)(e)?d.useSVGVisualState:u.useHTMLVisualState;function v(c,u){let d,m={...(0,n.useContext)(s.MotionConfigContext),...c,layoutId:function(e){let{layoutId:t}=e,a=(0,n.useContext)(i.LayoutGroupContext).id;return a&&void 0!==t?a+"-"+t:t}(c)},{isStatic:f}=m,E=(0,o.useCreateMotionContext)(c),A=C(c,f);if(!f&&h.isBrowser){(0,n.useContext)(a.LazyContext).strict;let t=function(e){let{drag:t,layout:n}=p.featureDefinitions;if(!t&&!n)return{};let i={...t,...n};return{MeasureLayout:(null==t?void 0:t.isEnabled(e))||(null==n?void 0:n.isEnabled(e))?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}(m);d=t.MeasureLayout,E.visualElement=(0,g.useVisualElement)(e,A,m,_,t.ProjectionNode)}return(0,t.jsxs)(r.MotionContext.Provider,{value:E,children:[d&&E.visualElement?(0,t.jsx)(d,{visualElement:E.visualElement,...m}):null,(0,l.useRender)(e,c,(0,T.useMotionRef)(A,E.visualElement,u),A,f,x)]})}v.displayName="motion.".concat("string"==typeof e?e:"create(".concat(null!=(A=null!=(E=e.displayName)?E:e.name)?A:"",")"));let S=(0,n.forwardRef)(v);return S[f.motionComponentSymbol]=e,S}},343245:e=>{"use strict";e.s({createMotionProxy:()=>n});var t=e.i(350046);function n(e,n){if("undefined"==typeof Proxy)return t.createMotionComponent;let i=new Map,a=(i,a)=>(0,t.createMotionComponent)(i,a,e,n);return new Proxy((e,t)=>a(e,t),{get:(s,r)=>"create"===r?a:(i.has(r)||i.set(r,(0,t.createMotionComponent)(r,void 0,e,n)),i.get(r))})}},89393:e=>{"use strict";e.s({resolveVariant:()=>n});var t=e.i(732822);function n(e,n,i){let a=e.getProps();return(0,t.resolveVariantFromProps)(a,n,void 0!==i?i:a.custom,e)}},242449:e=>{"use strict";e.s({isKeyframesTarget:()=>t});let t=e=>Array.isArray(e)},848266:e=>{"use strict";e.s({setTarget:()=>a});var t=e.i(349305),n=e.i(242449),i=e.i(89393);function a(e,a){let{transitionEnd:s={},transition:r={},...o}=(0,i.resolveVariant)(e,a)||{};for(let i in o={...o,...s}){var l;let a=(l=o[i],(0,n.isKeyframesTarget)(l)?l[l.length-1]||0:l);e.hasValue(i)?e.getValue(i).set(a):e.addValue(i,(0,t.motionValue)(a))}}},36714:e=>{"use strict";e.s({isWillChangeMotionValue:()=>n});var t=e.i(73145);function n(e){return!!((0,t.isMotionValue)(e)&&e.add)}},283719:e=>{"use strict";e.s({addValueToWillChange:()=>i});var t=e.i(347112),n=e.i(36714);function i(e,i){let a=e.getValue("willChange");if((0,n.isWillChangeMotionValue)(a))return a.add(i);if(!a&&t.MotionGlobalConfig.WillChange){let n=new t.MotionGlobalConfig.WillChange("auto");e.addValue("willChange",n),n.add(i)}}},797174:e=>{"use strict";e.s({getOptimisedAppearId:()=>n});var t=e.i(526278);function n(e){return e.props[t.optimizedAppearDataAttribute]}},197069:e=>{"use strict";e.s({getFinalKeyframe:()=>n});let t=e=>null!==e;function n(e,n,i){let{repeat:a,repeatType:s="loop"}=n,r=e.filter(t),o=a&&"loop"!==s&&a%2==1?0:r.length-1;return o&&void 0!==i?i:r[o]}},461485:e=>{"use strict";e.s({getDefaultTransition:()=>s});var t=e.i(156860);let n={type:"spring",stiffness:500,damping:25,restSpeed:10},i={type:"keyframes",duration:.8},a={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},s=(e,s)=>{let{keyframes:r}=s;return r.length>2?i:t.transformProps.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===r[1]?2*Math.sqrt(550):30,restSpeed:10}:n:a}},120520:e=>{"use strict";function t(e){let{when:t,delay:n,delayChildren:i,staggerChildren:a,staggerDirection:s,repeat:r,repeatType:o,repeatDelay:l,from:c,elapsed:u,...d}=e;return!!Object.keys(d).length}e.s({isTransitionDefined:()=>t})},427277:e=>{"use strict";e.s({animateMotionValue:()=>d});var t=e.i(291213),n=e.i(955998),i=e.i(515496),a=e.i(997841),s=e.i(967682),r=e.i(619344),o=e.i(347112),l=e.i(197069),c=e.i(461485),u=e.i(120520);let d=function(e,d,h){let p=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},m=arguments.length>4?arguments[4]:void 0,f=arguments.length>5?arguments[5]:void 0;return T=>{let g=(0,t.getValueTransition)(p,e)||{},E=g.delay||p.delay||0,{elapsed:A=0}=p;A-=(0,r.secondsToMilliseconds)(E);let x={keyframes:Array.isArray(h)?h:[null,h],ease:"easeOut",velocity:d.getVelocity(),...g,delay:-A,onUpdate:e=>{d.set(e),g.onUpdate&&g.onUpdate(e)},onComplete:()=>{T(),g.onComplete&&g.onComplete()},name:e,motionValue:d,element:f?void 0:m};(0,u.isTransitionDefined)(g)||Object.assign(x,(0,c.getDefaultTransition)(e,x)),x.duration&&(x.duration=(0,r.secondsToMilliseconds)(x.duration)),x.repeatDelay&&(x.repeatDelay=(0,r.secondsToMilliseconds)(x.repeatDelay)),void 0!==x.from&&(x.keyframes[0]=x.from);let I=!1;if(!1!==x.type&&(0!==x.duration||x.repeatDelay)||((0,n.makeAnimationInstant)(x),0===x.delay&&(I=!0)),(o.MotionGlobalConfig.instantAnimations||o.MotionGlobalConfig.skipAnimations)&&(I=!0,(0,n.makeAnimationInstant)(x),x.delay=0),x.allowFlatten=!g.type&&!g.ease,I&&!f&&void 0!==d.get()){let e=(0,l.getFinalKeyframe)(x.keyframes,g);if(void 0!==e)return void i.frame.update(()=>{x.onUpdate(e),x.onComplete()})}return g.isSync?new a.JSAnimation(x):new s.AsyncMotionValueAnimation(x)}}},935666:e=>{"use strict";e.s({animateTarget:()=>l});var t=e.i(291213),n=e.i(515496),i=e.i(287664),a=e.i(848266),s=e.i(283719),r=e.i(797174),o=e.i(427277);function l(e,l){let{delay:c=0,transitionOverride:u,type:d}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{transition:h=e.getDefaultTransition(),transitionEnd:p,...m}=l;u&&(h=u);let f=[],T=d&&e.animationState&&e.animationState.getState()[d];for(let a in m){var g;let l=e.getValue(a,null!=(g=e.latestValues[a])?g:null),u=m[a];if(void 0===u||T&&function(e,t){let{protectedKeys:n,needsAnimating:i}=e,a=n.hasOwnProperty(t)&&!0!==i[t];return i[t]=!1,a}(T,a))continue;let d={delay:c,...(0,t.getValueTransition)(h||{},a)},p=l.get();if(void 0!==p&&!l.isAnimating&&!Array.isArray(u)&&u===p&&!d.velocity)continue;let E=!1;if(window.MotionHandoffAnimation){let t=(0,r.getOptimisedAppearId)(e);if(t){let e=window.MotionHandoffAnimation(t,a,n.frame);null!==e&&(d.startTime=e,E=!0)}}(0,s.addValueToWillChange)(e,a),l.start((0,o.animateMotionValue)(a,l,u,e.shouldReduceMotion&&i.positionalKeys.has(a)?{type:!1}:d,e,E));let A=l.animation;A&&f.push(A)}return p&&Promise.all(f).then(()=>{n.frame.update(()=>{p&&(0,a.setTarget)(e,p)})}),f}},523077:e=>{"use strict";function t(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=Array.from(e).sort((e,t)=>e.sortNodePosition(t)).indexOf(t),r=e.size,o=(r-1)*i;return"function"==typeof n?n(s,r):1===a?s*i:o-s*i}e.s({calcChildStagger:()=>t})},585995:e=>{"use strict";e.s({animateVariant:()=>function e(a,s){var r;let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=(0,t.resolveVariant)(a,s,"exit"===o.type?null==(r=a.presenceContext)?void 0:r.custom:void 0),{transition:c=a.getDefaultTransition()||{}}=l||{};o.transitionOverride&&(c=o.transitionOverride);let u=l?()=>Promise.all((0,i.animateTarget)(a,l,o)):()=>Promise.resolve(),d=a.variantChildren&&a.variantChildren.size?function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,{delayChildren:i=0,staggerChildren:r,staggerDirection:l}=c;return function(t,i){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,l=arguments.length>6?arguments[6]:void 0,c=[];for(let u of t.variantChildren)u.notify("AnimationStart",i),c.push(e(u,i,{...l,delay:a+("function"==typeof s?0:s)+(0,n.calcChildStagger)(t.variantChildren,u,s,r,o)}).then(()=>u.notify("AnimationComplete",i)));return Promise.all(c)}(a,s,t,i,r,l,o)}:()=>Promise.resolve(),{when:h}=c;if(!h)return Promise.all([u(),d(o.delay)]);{let[e,t]="beforeChildren"===h?[u,d]:[d,u];return e().then(()=>t())}}});var t=e.i(89393),n=e.i(523077),i=e.i(935666)},374089:e=>{"use strict";e.s({animateVisualElement:()=>a});var t=e.i(89393),n=e.i(935666),i=e.i(585995);function a(e,a){let s,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.notify("AnimationStart",a),Array.isArray(a))s=Promise.all(a.map(t=>(0,i.animateVariant)(e,t,r)));else if("string"==typeof a)s=(0,i.animateVariant)(e,a,r);else{let i="function"==typeof a?(0,t.resolveVariant)(e,a,r.custom):a;s=Promise.all((0,n.animateTarget)(e,i,r))}return s.then(()=>{e.notify("AnimationComplete",a)})}},868151:e=>{"use strict";function t(e,t){if(!Array.isArray(t))return!1;let n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}e.s({shallowCompare:()=>t})},777764:e=>{"use strict";e.s({getVariantContext:()=>function e(a){if(!a)return;if(!a.isControllingVariants){let t=a.parent&&e(a.parent)||{};return void 0!==a.props.initial&&(t.initial=a.props.initial),t}let s={};for(let e=0;e<i;e++){let i=n.variantProps[e],r=a.props[i];((0,t.isVariantLabel)(r)||!1===r)&&(s[i]=r)}return s}});var t=e.i(316188),n=e.i(526240);let i=n.variantProps.length},698026:e=>{"use strict";e.s({createAnimationState:()=>h});var t=e.i(374089),n=e.i(523077),i=e.i(745141),a=e.i(242449),s=e.i(868151),r=e.i(777764),o=e.i(316188),l=e.i(89393),c=e.i(526240);let u=[...c.variantPriorityOrder].reverse(),d=c.variantPriorityOrder.length;function h(e){let c=n=>Promise.all(n.map(n=>{let{animation:i,options:a}=n;return(0,t.animateVisualElement)(e,i,a)})),h=m(),p=!0,f=t=>(n,i)=>{var a;let s=(0,l.resolveVariant)(e,i,"exit"===t?null==(a=e.presenceContext)?void 0:a.custom:void 0);if(s){let{transition:e,transitionEnd:t,...i}=s;n={...n,...i,...t}}return n};function T(t){let{props:m}=e,T=(0,r.getVariantContext)(e.parent)||{},g=[],E=new Set,A={},x=1/0;for(let r=0;r<d;r++){var I,_;let c=u[r],d=h[c],C=void 0!==m[c]?m[c]:T[c],v=(0,o.isVariantLabel)(C),S=c===t?d.isActive:null;!1===S&&(x=r);let D=C===T[c]&&C!==m[c]&&v;if(D&&p&&e.manuallyAnimateOnMount&&(D=!1),d.protectedKeys={...A},!d.isActive&&null===S||!C&&!d.prevProp||(0,i.isAnimationControls)(C)||"boolean"==typeof C)continue;let y=(I=d.prevProp,"string"==typeof(_=C)?_!==I:!!Array.isArray(_)&&!(0,s.shallowCompare)(_,I)),N=y||c===t&&d.isActive&&!D&&v||r>x&&v,b=!1,O=Array.isArray(C)?C:[C],R=O.reduce(f(c),{});!1===S&&(R={});let{prevResolvedValues:P={}}=d,k={...P,...R},M=t=>{N=!0,E.has(t)&&(b=!0,E.delete(t)),d.needsAnimating[t]=!0;let n=e.getValue(t);n&&(n.liveStyle=!1)};for(let e in k){let t=R[e],n=P[e];if(!A.hasOwnProperty(e))((0,a.isKeyframesTarget)(t)&&(0,a.isKeyframesTarget)(n)?(0,s.shallowCompare)(t,n):t===n)?void 0!==t&&E.has(e)?M(e):d.protectedKeys[e]=!0:null!=t?M(e):E.add(e)}d.prevProp=C,d.prevResolvedValues=R,d.isActive&&(A={...A,...R}),p&&e.blockInitialAnimation&&(N=!1);let L=D&&y,w=!L||b;N&&w&&g.push(...O.map(t=>{let i={type:c};if("string"==typeof t&&p&&!L&&e.manuallyAnimateOnMount&&e.parent){let{parent:a}=e,s=(0,l.resolveVariant)(a,t);if(a.enteringChildren&&s){let{delayChildren:t}=s.transition||{};i.delay=(0,n.calcChildStagger)(a.enteringChildren,e,t)}}return{animation:t,options:i}}))}if(E.size){let t={};if("boolean"!=typeof m.initial){let n=(0,l.resolveVariant)(e,Array.isArray(m.initial)?m.initial[0]:m.initial);n&&n.transition&&(t.transition=n.transition)}E.forEach(n=>{let i=e.getBaseTarget(n),a=e.getValue(n);a&&(a.liveStyle=!0),t[n]=null!=i?i:null}),g.push({animation:t})}let C=!!g.length;return p&&(!1===m.initial||m.initial===m.animate)&&!e.manuallyAnimateOnMount&&(C=!1),p=!1,C?c(g):Promise.resolve()}return{animateChanges:T,setActive:function(t,n){var i;if(h[t].isActive===n)return Promise.resolve();null==(i=e.variantChildren)||i.forEach(e=>{var i;return null==(i=e.animationState)?void 0:i.setActive(t,n)}),h[t].isActive=n;let a=T(t);for(let e in h)h[e].protectedKeys={};return a},setAnimateFunction:function(t){c=t(e)},getState:()=>h,reset:()=>{h=m(),p=!0}}}function p(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function m(){return{animate:p(!0),whileInView:p(),whileHover:p(),whileTap:p(),whileDrag:p(),whileFocus:p(),exit:p()}}},495146:e=>{"use strict";e.s({Feature:()=>t});class t{update(){}constructor(e){this.isMounted=!1,this.node=e}}},465634:e=>{"use strict";e.s({AnimationFeature:()=>a});var t=e.i(745141),n=e.i(698026),i=e.i(495146);class a extends i.Feature{updateAnimationControlsSubscription(){let{animate:e}=this.node.getProps();(0,t.isAnimationControls)(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){let{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),null==(e=this.unmountControls)||e.call(this)}constructor(e){super(e),e.animationState||(e.animationState=(0,n.createAnimationState)(e))}}},724353:e=>{"use strict";e.s({ExitAnimationFeature:()=>i});var t=e.i(495146);let n=0;class i extends t.Feature{update(){if(!this.node.presenceContext)return;let{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;let i=this.node.animationState.setActive("exit",!e);t&&!e&&i.then(()=>{t(this.id)})}mount(){let{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}constructor(){super(...arguments),this.id=n++}}},891302:e=>{"use strict";e.s({animations:()=>i});var t=e.i(465634),n=e.i(724353);let i={animation:{Feature:t.AnimationFeature},exit:{Feature:n.ExitAnimationFeature}}},481188:e=>{"use strict";function t(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{passive:!0};return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n)}e.s({addDomEvent:()=>t})},260407:e=>{"use strict";e.s({addPointerInfo:()=>i,extractEventInfo:()=>n});var t=e.i(51097);function n(e){return{point:{x:e.pageX,y:e.pageY}}}let i=e=>i=>(0,t.isPrimaryPointer)(i)&&e(i,n(i))},902787:e=>{"use strict";e.s({addPointerEvent:()=>i});var t=e.i(481188),n=e.i(260407);function i(e,i,a,s){return(0,t.addDomEvent)(e,i,(0,n.addPointerInfo)(a),s)}},961214:e=>{"use strict";e.s({calcBoxDelta:()=>s,calcLength:()=>n,calcRelativeBox:()=>o,calcRelativePosition:()=>c,isNear:()=>i});var t=e.i(869514);function n(e){return e.max-e.min}function i(e,t,n){return Math.abs(e-t)<=n}function a(e,i,a){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;e.origin=s,e.originPoint=(0,t.mixNumber)(i.min,i.max,e.origin),e.scale=n(a)/n(i),e.translate=(0,t.mixNumber)(a.min,a.max,e.origin)-e.originPoint,(e.scale>=.9999&&e.scale<=1.0001||isNaN(e.scale))&&(e.scale=1),(e.translate>=-.01&&e.translate<=.01||isNaN(e.translate))&&(e.translate=0)}function s(e,t,n,i){a(e.x,t.x,n.x,i?i.originX:void 0),a(e.y,t.y,n.y,i?i.originY:void 0)}function r(e,t,i){e.min=i.min+t.min,e.max=e.min+n(t)}function o(e,t,n){r(e.x,t.x,n.x),r(e.y,t.y,n.y)}function l(e,t,i){e.min=t.min-i.min,e.max=e.min+n(t)}function c(e,t,n){l(e.x,t.x,n.x),l(e.y,t.y,n.y)}},703316:e=>{"use strict";function t(e){return[e("x"),e("y")]}e.s({eachAxis:()=>t})},715572:e=>{"use strict";e.s({getContextWindow:()=>t});let t=e=>{let{current:t}=e;return t?t.ownerDocument.defaultView:null}},758515:e=>{"use strict";e.s({distance2D:()=>n});let t=(e,t)=>Math.abs(e-t);function n(e,n){return Math.sqrt(t(e.x,n.x)**2+t(e.y,n.y)**2)}},65799:e=>{"use strict";e.s({PanSession:()=>l});var t=e.i(515496),n=e.i(51097),i=e.i(416490),a=e.i(619344),s=e.i(902787),r=e.i(260407),o=e.i(758515);class l{updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),(0,t.cancelFrame)(this.updatePoint)}constructor(e,a,{transformPagePoint:l,contextWindow:u=window,dragSnapToOrigin:h=!1,distanceThreshold:p=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;let e=d(this.lastMoveEventInfo,this.history),n=null!==this.startEvent,i=(0,o.distance2D)(e.offset,{x:0,y:0})>=this.distanceThreshold;if(!n&&!i)return;let{point:a}=e,{timestamp:s}=t.frameData;this.history.push({...a,timestamp:s});let{onStart:r,onMove:l}=this.handlers;n||(r&&r(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),l&&l(this.lastMoveEvent,e)},this.handlePointerMove=(e,n)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=c(n,this.transformPagePoint),t.frame.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();let{onEnd:n,onSessionEnd:i,resumeAnimation:a}=this.handlers;if(this.dragSnapToOrigin&&a&&a(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;let s=d("pointercancel"===e.type?this.lastMoveEventInfo:c(t,this.transformPagePoint),this.history);this.startEvent&&n&&n(e,s),i&&i(e,s)},!(0,n.isPrimaryPointer)(e))return;this.dragSnapToOrigin=h,this.handlers=a,this.transformPagePoint=l,this.distanceThreshold=p,this.contextWindow=u||window;let m=c((0,r.extractEventInfo)(e),this.transformPagePoint),{point:f}=m,{timestamp:T}=t.frameData;this.history=[{...f,timestamp:T}];let{onSessionStart:g}=a;g&&g(e,d(m,this.history)),this.removeListeners=(0,i.pipe)((0,s.addPointerEvent)(this.contextWindow,"pointermove",this.handlePointerMove),(0,s.addPointerEvent)(this.contextWindow,"pointerup",this.handlePointerUp),(0,s.addPointerEvent)(this.contextWindow,"pointercancel",this.handlePointerUp))}}function c(e,t){return t?{point:t(e.point)}:e}function u(e,t){return{x:e.x-t.x,y:e.y-t.y}}function d(e,t){let{point:n}=e;return{point:n,delta:u(n,h(t)),offset:u(n,t[0]),velocity:function(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,i=null,s=h(e);for(;n>=0&&(i=e[n],!(s.timestamp-i.timestamp>(0,a.secondsToMilliseconds)(.1)));)n--;if(!i)return{x:0,y:0};let r=(0,a.millisecondsToSeconds)(s.timestamp-i.timestamp);if(0===r)return{x:0,y:0};let o={x:(s.x-i.x)/r,y:(s.y-i.y)/r};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}(t,.1)}}function h(e){return e[e.length-1]}},411104:e=>{"use strict";e.s({applyConstraints:()=>s,calcOrigin:()=>u,calcRelativeConstraints:()=>o,calcViewportConstraints:()=>c,defaultElastic:()=>h,rebaseAxisConstraints:()=>d,resolveDragElastic:()=>p});var t=e.i(869514),n=e.i(219130),i=e.i(620664),a=e.i(961214);function s(e,n,i){let{min:a,max:s}=n;return void 0!==a&&e<a?e=i?(0,t.mixNumber)(a,e,i.min):Math.max(e,a):void 0!==s&&e>s&&(e=i?(0,t.mixNumber)(s,e,i.max):Math.min(e,s)),e}function r(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function o(e,t){let{top:n,left:i,bottom:a,right:s}=t;return{x:r(e.x,i,s),y:r(e.y,n,a)}}function l(e,t){let n=t.min-e.min,i=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,i]=[i,n]),{min:n,max:i}}function c(e,t){return{x:l(e.x,t.x),y:l(e.y,t.y)}}function u(e,t){let s=.5,r=(0,a.calcLength)(e),o=(0,a.calcLength)(t);return o>r?s=(0,n.progress)(t.min,t.max-r,e.min):r>o&&(s=(0,n.progress)(e.min,e.max-o,t.min)),(0,i.clamp)(0,1,s)}function d(e,t){let n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}let h=.35;function p(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h;return!1===e?e=0:!0===e&&(e=h),{x:m(e,"left","right"),y:m(e,"top","bottom")}}function m(e,t,n){return{min:f(e,t),max:f(e,n)}}function f(e,t){return"number"==typeof e?e:e[t]||0}},201581:e=>{"use strict";e.s({VisualElementDragControls:()=>I});var t=e.i(515496),n=e.i(869514),i=e.i(524762),a=e.i(20593),s=e.i(777743),r=e.i(427277),o=e.i(481188),l=e.i(902787),c=e.i(260407),u=e.i(620208),d=e.i(961214),h=e.i(924370),p=e.i(703316),m=e.i(661808),f=e.i(715572),T=e.i(428491),g=e.i(283719),E=e.i(65799),A=e.i(411104);let x=new WeakMap;class I{start(e){let{snapToCursor:n=!1,distanceThreshold:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{presenceContext:r}=this.visualElement;if(r&&!1===r.isPresent)return;let o=e=>{let{dragSnapToOrigin:t}=this.getProps();t?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor((0,c.extractEventInfo)(e).point)},l=(e,n)=>{let{drag:s,dragPropagation:r,onDragStart:o}=this.getProps();if(s&&!r&&(this.openDragLock&&this.openDragLock(),this.openDragLock=(0,i.setDragLock)(s),!this.openDragLock))return;this.latestPointerEvent=e,this.latestPanInfo=n,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),(0,p.eachAxis)(e=>{let t=this.getAxisMotionValue(e).get()||0;if(a.percent.test(t)){let{projection:n}=this.visualElement;if(n&&n.layout){let i=n.layout.layoutBox[e];i&&(t=(0,d.calcLength)(i)*(parseFloat(t)/100))}}this.originPoint[e]=t}),o&&t.frame.postRender(()=>o(e,n)),(0,g.addValueToWillChange)(this.visualElement,"transform");let{animationState:l}=this.visualElement;l&&l.setActive("whileDrag",!0)},u=(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t;let{dragPropagation:n,dragDirectionLock:i,onDirectionLock:a,onDrag:s}=this.getProps();if(!n&&!this.openDragLock)return;let{offset:r}=t;if(i&&null===this.currentDirection){this.currentDirection=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}(r),null!==this.currentDirection&&a&&a(this.currentDirection);return}this.updateAxis("x",t.point,r),this.updateAxis("y",t.point,r),this.visualElement.render(),s&&s(e,t)},h=(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t,this.stop(e,t),this.latestPointerEvent=null,this.latestPanInfo=null},m=()=>(0,p.eachAxis)(e=>{var t;return"paused"===this.getAnimationState(e)&&(null==(t=this.getAxisMotionValue(e).animation)?void 0:t.play())}),{dragSnapToOrigin:T}=this.getProps();this.panSession=new E.PanSession(e,{onSessionStart:o,onStart:l,onMove:u,onSessionEnd:h,resumeAnimation:m},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:T,distanceThreshold:s,contextWindow:(0,f.getContextWindow)(this.visualElement)})}stop(e,n){let i=e||this.latestPointerEvent,a=n||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!a||!i)return;let{velocity:r}=a;this.startAnimation(r);let{onDragEnd:o}=this.getProps();o&&t.frame.postRender(()=>o(i,a))}cancel(){this.isDragging=!1;let{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;let{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){let{drag:i}=this.getProps();if(!n||!_(e,i,this.currentDirection))return;let a=this.getAxisMotionValue(e),s=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(s=(0,A.applyConstraints)(s,this.constraints[e],this.elastic[e])),a.set(s)}resolveConstraints(){var e;let{dragConstraints:t,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null==(e=this.visualElement.projection)?void 0:e.layout,a=this.constraints;t&&(0,T.isRefObject)(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=(0,A.calcRelativeConstraints)(i.layoutBox,t):this.constraints=!1,this.elastic=(0,A.resolveDragElastic)(n),a!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&(0,p.eachAxis)(e=>{!1!==this.constraints&&this.getAxisMotionValue(e)&&(this.constraints[e]=(0,A.rebaseAxisConstraints)(i.layoutBox[e],this.constraints[e]))})}resolveRefConstraints(){let{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!(0,T.isRefObject)(e))return!1;let n=e.current;(0,s.invariant)(null!==n,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.","drag-constraints-ref");let{projection:i}=this.visualElement;if(!i||!i.layout)return!1;let a=(0,m.measurePageBox)(n,i.root,this.visualElement.getTransformPagePoint()),r=(0,A.calcViewportConstraints)(i.layout.layoutBox,a);if(t){let e=t((0,u.convertBoxToBoundingBox)(r));this.hasMutatedConstraints=!!e,e&&(r=(0,u.convertBoundingBoxToBox)(e))}return r}startAnimation(e){let{drag:t,dragMomentum:n,dragElastic:i,dragTransition:a,dragSnapToOrigin:s,onDragTransitionEnd:r}=this.getProps(),o=this.constraints||{};return Promise.all((0,p.eachAxis)(r=>{if(!_(r,t,this.currentDirection))return;let l=o&&o[r]||{};s&&(l={min:0,max:0});let c={type:"inertia",velocity:n?e[r]:0,bounceStiffness:i?200:1e6,bounceDamping:i?40:1e7,timeConstant:750,restDelta:1,restSpeed:10,...a,...l};return this.startAxisValueAnimation(r,c)})).then(r)}startAxisValueAnimation(e,t){let n=this.getAxisMotionValue(e);return(0,g.addValueToWillChange)(this.visualElement,e),n.start((0,r.animateMotionValue)(e,n,0,t,this.visualElement,!1))}stopAnimation(){(0,p.eachAxis)(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){(0,p.eachAxis)(e=>{var t;return null==(t=this.getAxisMotionValue(e).animation)?void 0:t.pause()})}getAnimationState(e){var t;return null==(t=this.getAxisMotionValue(e).animation)?void 0:t.state}getAxisMotionValue(e){let t="_drag".concat(e.toUpperCase()),n=this.visualElement.getProps();return n[t]||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){(0,p.eachAxis)(t=>{let{drag:i}=this.getProps();if(!_(t,i,this.currentDirection))return;let{projection:a}=this.visualElement,s=this.getAxisMotionValue(t);if(a&&a.layout){let{min:i,max:r}=a.layout.layoutBox[t];s.set(e[t]-(0,n.mixNumber)(i,r,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;let{drag:e,dragConstraints:t}=this.getProps(),{projection:i}=this.visualElement;if(!(0,T.isRefObject)(t)||!i||!this.constraints)return;this.stopAnimation();let a={x:0,y:0};(0,p.eachAxis)(e=>{let t=this.getAxisMotionValue(e);if(t&&!1!==this.constraints){let n=t.get();a[e]=(0,A.calcOrigin)({min:n,max:n},this.constraints[e])}});let{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),(0,p.eachAxis)(t=>{if(!_(t,e,null))return;let i=this.getAxisMotionValue(t),{min:s,max:r}=this.constraints[t];i.set((0,n.mixNumber)(s,r,a[t]))})}addListeners(){if(!this.visualElement.current)return;x.set(this.visualElement,this);let e=this.visualElement.current,n=(0,l.addPointerEvent)(e,"pointerdown",e=>{let{drag:t,dragListener:n=!0}=this.getProps();t&&n&&this.start(e)}),i=()=>{let{dragConstraints:e}=this.getProps();(0,T.isRefObject)(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,s=a.addEventListener("measure",i);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),t.frame.read(i);let r=(0,o.addDomEvent)(window,"resize",()=>this.scalePositionWithinConstraints()),c=a.addEventListener("didUpdate",e=>{let{delta:t,hasLayoutChanged:n}=e;this.isDragging&&n&&((0,p.eachAxis)(e=>{let n=this.getAxisMotionValue(e);n&&(this.originPoint[e]+=t[e].translate,n.set(n.get()+t[e].translate))}),this.visualElement.render())});return()=>{r(),n(),s(),c&&c()}}getProps(){let e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:s=A.defaultElastic,dragMomentum:r=!0}=e;return{...e,drag:t,dragDirectionLock:n,dragPropagation:i,dragConstraints:a,dragElastic:s,dragMomentum:r}}constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=(0,h.createBox)(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}}function _(e,t,n){return(!0===t||t===e)&&(null===n||n===e)}},514187:e=>{"use strict";e.s({DragGesture:()=>a});var t=e.i(495146),n=e.i(379218),i=e.i(201581);class a extends t.Feature{mount(){let{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||n.noop}unmount(){this.removeGroupControls(),this.removeListeners()}constructor(e){super(e),this.removeGroupControls=n.noop,this.removeListeners=n.noop,this.controls=new i.VisualElementDragControls(e)}}},296719:e=>{"use strict";e.s({PanGesture:()=>l});var t=e.i(515496),n=e.i(379218),i=e.i(902787),a=e.i(495146),s=e.i(715572),r=e.i(65799);let o=e=>(n,i)=>{e&&t.frame.postRender(()=>e(n,i))};class l extends a.Feature{onPointerDown(e){this.session=new r.PanSession(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:(0,s.getContextWindow)(this.node)})}createPanHandlers(){let{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:a}=this.node.getProps();return{onSessionStart:o(e),onStart:o(n),onMove:i,onEnd:(e,n)=>{delete this.session,a&&t.frame.postRender(()=>a(e,n))}}}mount(){this.removePointerDownListener=(0,i.addPointerEvent)(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}constructor(){super(...arguments),this.removePointerDownListener=n.noop}}},764981:e=>{"use strict";e.s({usePresence:()=>i});var t=e.i(373150),n=e.i(327879);function i(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],i=(0,t.useContext)(n.PresenceContext);if(null===i)return[!0,null];let{isPresent:a,onExitComplete:s,register:r}=i,o=(0,t.useId)();(0,t.useEffect)(()=>{if(e)return r(o)},[e]);let l=(0,t.useCallback)(()=>e&&s&&s(o),[o,s,e]);return!a&&s?[!1,l]:[!0]}},673520:e=>{"use strict";e.s({globalProjectionState:()=>t});let t={hasAnimatedSinceResize:!0,hasEverUpdated:!1}},342896:e=>{"use strict";e.s({correctBorderRadius:()=>i});var t=e.i(20593);function n(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}let i={correct:(e,i)=>{if(!i.target)return e;if("string"==typeof e)if(!t.px.test(e))return e;else e=parseFloat(e);let a=n(e,i.target.x),s=n(e,i.target.y);return"".concat(a,"% ").concat(s,"%")}}},36359:e=>{"use strict";e.s({correctBoxShadow:()=>i});var t=e.i(380594),n=e.i(869514);let i={correct:(e,i)=>{let{treeScale:a,projectionDelta:s}=i,r=t.complex.parse(e);if(r.length>5)return e;let o=t.complex.createTransformer(e),l=+("number"!=typeof r[0]),c=s.x.scale*a.x,u=s.y.scale*a.y;r[0+l]/=c,r[1+l]/=u;let d=(0,n.mixNumber)(c,u,.5);return"number"==typeof r[2+l]&&(r[2+l]/=d),"number"==typeof r[3+l]&&(r[3+l]/=d),o(r)}}},460315:e=>{"use strict";e.s({MeasureLayout:()=>m});var t=e.i(290479),n=e.i(515496),i=e.i(935099),a=e.i(373150),s=e.i(764981),r=e.i(839226),o=e.i(599286),l=e.i(673520),c=e.i(342896),u=e.i(36359),d=e.i(590322);let h=!1;class p extends a.Component{componentDidMount(){let{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:i}=this.props,{projection:a}=e;(0,d.addScaleCorrector)(f),a&&(t.group&&t.group.add(a),n&&n.register&&i&&n.register(a),h&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),l.globalProjectionState.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){let{layoutDependency:t,visualElement:i,drag:a,isPresent:s}=this.props,{projection:r}=i;return r&&(r.isPresent=s,h=!0,a||e.layoutDependency!==t||void 0===t||e.isPresent!==s?r.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?r.promote():r.relegate()||n.frame.postRender(()=>{let e=r.getStack();e&&e.members.length||this.safeToRemove()}))),null}componentDidUpdate(){let{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),i.microtask.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){let{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:i}=e;h=!0,i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),n&&n.deregister&&n.deregister(i))}safeToRemove(){let{safeToRemove:e}=this.props;e&&e()}render(){return null}}function m(e){let[n,i]=(0,s.usePresence)(),l=(0,a.useContext)(r.LayoutGroupContext);return(0,t.jsx)(p,{...e,layoutGroup:l,switchLayoutGroup:(0,a.useContext)(o.SwitchLayoutGroupContext),isPresent:n,safeToRemove:i})}let f={borderRadius:{...c.correctBorderRadius,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:c.correctBorderRadius,borderTopRightRadius:c.correctBorderRadius,borderBottomLeftRadius:c.correctBorderRadius,borderBottomRightRadius:c.correctBorderRadius,boxShadow:u.correctBoxShadow}},852952:e=>{"use strict";e.s({animateSingleValue:()=>a});var t=e.i(73145),n=e.i(349305),i=e.i(427277);function a(e,a,s){let r=(0,t.isMotionValue)(e)?e:(0,n.motionValue)(e);return r.start((0,i.animateMotionValue)("",r,a,s)),r.animation}},731740:e=>{"use strict";e.s({compareByDepth:()=>t});let t=(e,t)=>e.depth-t.depth},74069:e=>{"use strict";e.s({FlatTree:()=>i});var t=e.i(104839),n=e.i(731740);class i{add(e){(0,t.addUniqueItem)(this.children,e),this.isDirty=!0}remove(e){(0,t.removeItem)(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(n.compareByDepth),this.isDirty=!1,this.children.forEach(e)}constructor(){this.children=[],this.isDirty=!1}}},156639:e=>{"use strict";e.s({delay:()=>i});var t=e.i(851625),n=e.i(515496);function i(e,i){let a=t.time.now(),s=t=>{let{timestamp:r}=t,o=r-a;o>=i&&((0,n.cancelFrame)(s),e(o-i))};return n.frame.setup(s,!0),()=>(0,n.cancelFrame)(s)}e.i(619344)},767375:e=>{"use strict";e.s({mixValues:()=>u});var t=e.i(869514),n=e.i(20593),i=e.i(219130),a=e.i(167949),s=e.i(379218);let r=["TopLeft","TopRight","BottomLeft","BottomRight"],o=r.length,l=e=>"string"==typeof e?parseFloat(e):e,c=e=>"number"==typeof e||n.px.test(e);function u(e,i,a,s,u,m){var f,T,g,E;u?(e.opacity=(0,t.mixNumber)(0,null!=(f=a.opacity)?f:1,h(s)),e.opacityExit=(0,t.mixNumber)(null!=(T=i.opacity)?T:1,0,p(s))):m&&(e.opacity=(0,t.mixNumber)(null!=(g=i.opacity)?g:1,null!=(E=a.opacity)?E:1,s));for(let u=0;u<o;u++){let o="border".concat(r[u],"Radius"),h=d(i,o),p=d(a,o);(void 0!==h||void 0!==p)&&(h||(h=0),p||(p=0),0===h||0===p||c(h)===c(p)?(e[o]=Math.max((0,t.mixNumber)(l(h),l(p),s),0),(n.percent.test(p)||n.percent.test(h))&&(e[o]+="%")):e[o]=p)}(i.rotate||a.rotate)&&(e.rotate=(0,t.mixNumber)(i.rotate||0,a.rotate||0,s))}function d(e,t){return void 0!==e[t]?e[t]:e.borderRadius}let h=m(0,.5,a.circOut),p=m(.5,.95,s.noop);function m(e,t,n){return a=>a<e?0:a>t?1:n((0,i.progress)(e,t,a))}},67114:e=>{"use strict";function t(e,t){e.min=t.min,e.max=t.max}function n(e,n){t(e.x,n.x),t(e.y,n.y)}function i(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}e.s({copyAxisDeltaInto:()=>i,copyBoxInto:()=>n})},388951:e=>{"use strict";e.s({removeBoxTransforms:()=>l});var t=e.i(20593),n=e.i(869514),i=e.i(786145);function a(e,t,n,a,s){return e-=t,e=(0,i.scalePoint)(e,1/n,a),void 0!==s&&(e=(0,i.scalePoint)(e,1/s,a)),e}function s(e,i,s,r,o){let[l,c,u]=s;!function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,o=arguments.length>4?arguments[4]:void 0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e;if(t.percent.test(i)&&(i=parseFloat(i),i=(0,n.mixNumber)(c.min,c.max,i/100)-c.min),"number"!=typeof i)return;let u=(0,n.mixNumber)(l.min,l.max,r);e===l&&(u-=i),e.min=a(e.min,i,s,u,o),e.max=a(e.max,i,s,u,o)}(e,i[l],i[c],i[u],i.scale,r,o)}let r=["x","scaleX","originX"],o=["y","scaleY","originY"];function l(e,t,n,i){s(e.x,t,r,n?n.x:void 0,i?i.x:void 0),s(e.y,t,o,n?n.y:void 0,i?i.y:void 0)}},478792:e=>{"use strict";e.s({aspectRatio:()=>l,axisDeltaEquals:()=>c,boxEquals:()=>s,boxEqualsRounded:()=>o,isDeltaZero:()=>i});var t=e.i(961214);function n(e){return 0===e.translate&&1===e.scale}function i(e){return n(e.x)&&n(e.y)}function a(e,t){return e.min===t.min&&e.max===t.max}function s(e,t){return a(e.x,t.x)&&a(e.y,t.y)}function r(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function o(e,t){return r(e.x,t.x)&&r(e.y,t.y)}function l(e){return(0,t.calcLength)(e.x)/(0,t.calcLength)(e.y)}function c(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}},893515:e=>{"use strict";e.s({NodeStack:()=>n});var t=e.i(104839);class n{add(e){(0,t.addUniqueItem)(this.members,e),e.scheduleRender()}remove(e){if((0,t.removeItem)(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){let e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){let t,n=this.members.findIndex(t=>e===t);if(0===n)return!1;for(let e=n;e>=0;e--){let n=this.members[e];if(!1!==n.isPresent){t=n;break}}return!!t&&(this.promote(t),!0)}promote(e,t){let n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);let{crossfade:i}=e.options;!1===i&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{let{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}constructor(){this.members=[]}}},756784:e=>{"use strict";function t(e,t,n){let i="",a=e.x.translate/t.x,s=e.y.translate/t.y,r=(null==n?void 0:n.z)||0;if((a||s||r)&&(i="translate3d(".concat(a,"px, ").concat(s,"px, ").concat(r,"px) ")),(1!==t.x||1!==t.y)&&(i+="scale(".concat(1/t.x,", ").concat(1/t.y,") ")),n){let{transformPerspective:e,rotate:t,rotateX:a,rotateY:s,skewX:r,skewY:o}=n;e&&(i="perspective(".concat(e,"px) ").concat(i)),t&&(i+="rotate(".concat(t,"deg) ")),a&&(i+="rotateX(".concat(a,"deg) ")),s&&(i+="rotateY(".concat(s,"deg) ")),r&&(i+="skewX(".concat(r,"deg) ")),o&&(i+="skewY(".concat(o,"deg) "))}let o=e.x.scale*t.x,l=e.y.scale*t.y;return(1!==o||1!==l)&&(i+="scale(".concat(o,", ").concat(l,")")),i||"none"}e.s({buildProjectionTransform:()=>t})},540264:e=>{"use strict";e.s({createProjectionNode:()=>w});var t=e.i(995093),n=e.i(322730),i=e.i(224151),a=e.i(515496),s=e.i(291213),r=e.i(851625),o=e.i(935099),l=e.i(529453),c=e.i(349305),u=e.i(869514),d=e.i(833444),h=e.i(620664),p=e.i(379218),m=e.i(852952),f=e.i(797174),T=e.i(74069),g=e.i(156639),E=e.i(187640),A=e.i(767375),x=e.i(67114),I=e.i(786145),_=e.i(961214),C=e.i(388951),v=e.i(924370),S=e.i(478792),D=e.i(893515),y=e.i(590322),N=e.i(756784),b=e.i(703316),O=e.i(754268),R=e.i(673520);let P={nodes:0,calculatedTargetDeltas:0,calculatedProjections:0},k=["","X","Y","Z"],M=0;function L(e,t,n,i){let{latestValues:a}=t;a[e]&&(n[e]=a[e],t.setStaticValue(e,0),i&&(i[e]=0))}function w(e){let{attachResizeListener:u,defaultParent:p,measureScroll:b,checkIsScrollRoot:w,resetTransform:ee}=e;return class{addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new d.SubscriptionManager),this.eventHandlers.get(e).add(t)}notifyListeners(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];let a=this.eventHandlers.get(e);a&&a.notify(...n)}hasListeners(e){return this.eventHandlers.has(e)}mount(e){if(this.instance)return;this.isSVG=(0,n.isSVGElement)(e)&&!(0,i.isSVGSVGElement)(e),this.instance=e;let{layoutId:t,layout:r,visualElement:o}=this.options;if(o&&!o.current&&o.mount(e),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(r||t)&&(this.isLayoutDirty=!0),u){let t,n=0,i=()=>this.root.updateBlockedByResize=!1;a.frame.read(()=>{n=window.innerWidth}),u(e,()=>{let e=window.innerWidth;e!==n&&(n=e,this.root.updateBlockedByResize=!0,t&&t(),t=(0,g.delay)(i,250),R.globalProjectionState.hasAnimatedSinceResize&&(R.globalProjectionState.hasAnimatedSinceResize=!1,this.nodes.forEach(z)))})}t&&this.root.registerSharedNode(t,this),!1!==this.options.animate&&o&&(t||r)&&this.addEventListener("didUpdate",e=>{let{delta:t,hasLayoutChanged:n,hasRelativeLayoutChanged:i,layout:a}=e;if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}let r=this.options.transition||o.getDefaultTransition()||$,{onLayoutAnimationStart:l,onLayoutAnimationComplete:c}=o.getProps(),u=!this.targetLayout||!(0,S.boxEqualsRounded)(this.targetLayout,a),d=!n&&i;if(this.options.layoutRoot||this.resumeFrom||d||n&&(u||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);let e={...(0,s.getValueTransition)(r,"layout"),onPlay:l,onComplete:c};(o.shouldReduceMotion||this.options.layoutRoot)&&(e.delay=0,e.type=!1),this.startAnimation(e),this.setAnimationOrigin(t,d)}else n||z(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=a})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);let e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),(0,a.cancelFrame)(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){!this.isUpdateBlocked()&&(this.isUpdating=!0,this.nodes&&this.nodes.forEach(K),this.animationId++)}getTransformTemplate(){let{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&function e(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;let{visualElement:n}=t.options;if(!n)return;let i=(0,f.getOptimisedAppearId)(n);if(window.MotionHasOptimisedAnimation(i,"transform")){let{layout:e,layoutId:n}=t.options;window.MotionCancelOptimisedAnimation(i,"transform",a.frame,!(e||n))}let{parent:s}=t;s&&!s.hasCheckedOptimisedAppear&&e(s)}(this),this.root.isUpdating||this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let e=0;e<this.path.length;e++){let t=this.path[e];t.shouldResetTransform=!0,t.updateScroll("snapshot"),t.options.layoutRoot&&t.willUpdate(!1)}let{layoutId:t,layout:n}=this.options;if(void 0===t&&!n)return;let i=this.getTransformTemplate();this.prevTransformTemplateValue=i?i(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(H);return}if(this.animationId<=this.animationCommitId)return void this.nodes.forEach(V);this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Y),this.nodes.forEach(G),this.nodes.forEach(j)):this.nodes.forEach(V),this.clearAllSnapshots();let e=r.time.now();a.frameData.delta=(0,h.clamp)(0,1e3/60,e-a.frameData.timestamp),a.frameData.timestamp=e,a.frameData.isProcessing=!0,a.frameSteps.update.process(a.frameData),a.frameSteps.preRender.process(a.frameData),a.frameSteps.render.process(a.frameData),a.frameData.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,o.microtask.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(U),this.sharedNodes.forEach(Q)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,a.frame.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){a.frame.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure(),!this.snapshot||(0,_.calcLength)(this.snapshot.measuredBox.x)||(0,_.calcLength)(this.snapshot.measuredBox.y)||(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let e=0;e<this.path.length;e++)this.path[e].updateScroll();let e=this.layout;this.layout=this.measure(!1),this.layoutCorrected=(0,v.createBox)(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);let{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"measure",t=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&this.instance){let t=w(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:b(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!ee)return;let e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!(0,S.isDeltaZero)(this.projectionDelta),n=this.getTransformTemplate(),i=n?n(this.latestValues,""):void 0,a=i!==this.prevTransformTemplateValue;e&&this.instance&&(t||(0,O.hasTransform)(this.latestValues)||a)&&(ee(this.instance,i),this.shouldResetTransform=!1,this.scheduleRender())}measure(){var e;let t=!(arguments.length>0)||void 0===arguments[0]||arguments[0],n=this.measurePageBox(),i=this.removeElementScroll(n);return t&&(i=this.removeTransform(i)),en((e=i).x),en(e.y),{animationId:this.root.animationId,measuredBox:n,layoutBox:i,latestValues:{},source:this.id}}measurePageBox(){var e;let{visualElement:t}=this.options;if(!t)return(0,v.createBox)();let n=t.measureViewportBox();if(!((null==(e=this.scroll)?void 0:e.wasRoot)||this.path.some(ea))){let{scroll:e}=this.root;e&&((0,I.translateAxis)(n.x,e.offset.x),(0,I.translateAxis)(n.y,e.offset.y))}return n}removeElementScroll(e){var t;let n=(0,v.createBox)();if((0,x.copyBoxInto)(n,e),null==(t=this.scroll)?void 0:t.wasRoot)return n;for(let t=0;t<this.path.length;t++){let i=this.path[t],{scroll:a,options:s}=i;i!==this.root&&a&&s.layoutScroll&&(a.wasRoot&&(0,x.copyBoxInto)(n,e),(0,I.translateAxis)(n.x,a.offset.x),(0,I.translateAxis)(n.y,a.offset.y))}return n}applyTransform(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=(0,v.createBox)();(0,x.copyBoxInto)(n,e);for(let e=0;e<this.path.length;e++){let i=this.path[e];!t&&i.options.layoutScroll&&i.scroll&&i!==i.root&&(0,I.transformBox)(n,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),(0,O.hasTransform)(i.latestValues)&&(0,I.transformBox)(n,i.latestValues)}return(0,O.hasTransform)(this.latestValues)&&(0,I.transformBox)(n,this.latestValues),n}removeTransform(e){let t=(0,v.createBox)();(0,x.copyBoxInto)(t,e);for(let e=0;e<this.path.length;e++){let n=this.path[e];if(!n.instance||!(0,O.hasTransform)(n.latestValues))continue;(0,O.hasScale)(n.latestValues)&&n.updateSnapshot();let i=(0,v.createBox)(),a=n.measurePageBox();(0,x.copyBoxInto)(i,a),(0,C.removeBoxTransforms)(t,n.latestValues,n.snapshot?n.snapshot.layoutBox:void 0,i)}return(0,O.hasTransform)(this.latestValues)&&(0,C.removeBoxTransforms)(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options={...this.options,...e,crossfade:void 0===e.crossfade||e.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==a.frameData.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(){var e;let n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=i.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=i.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=i.isSharedProjectionDirty);let s=!!this.resumingFrom||this!==i;if(!(n||s&&this.isSharedProjectionDirty||this.isProjectionDirty||(null==(e=this.parent)?void 0:e.isProjectionDirty)||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;let{layout:r,layoutId:o}=this.options;if(this.layout&&(r||o)){if(this.resolvedRelativeTargetAt=a.frameData.timestamp,!this.targetDelta&&!this.relativeTarget){let e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget=(0,v.createBox)(),this.relativeTargetOrigin=(0,v.createBox)(),(0,_.calcRelativePosition)(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),(0,x.copyBoxInto)(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){if(this.target||(this.target=(0,v.createBox)(),this.targetWithTransforms=(0,v.createBox)()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),(0,_.calcRelativeBox)(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):(0,x.copyBoxInto)(this.target,this.layout.layoutBox),(0,I.applyBoxDelta)(this.target,this.targetDelta)):(0,x.copyBoxInto)(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;let e=this.getClosestProjectingParent();e&&!!e.resumingFrom==!!this.resumingFrom&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget=(0,v.createBox)(),this.relativeTargetOrigin=(0,v.createBox)(),(0,_.calcRelativePosition)(this.relativeTargetOrigin,this.target,e.target),(0,x.copyBoxInto)(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}t.statsBuffer.value&&P.calculatedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||(0,O.hasScale)(this.parent.latestValues)||(0,O.has2DTranslate)(this.parent.latestValues)))if(this.parent.isProjecting())return this.parent;else return this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var e;let n=this.getLead(),i=!!this.resumingFrom||this!==n,s=!0;if((this.isProjectionDirty||(null==(e=this.parent)?void 0:e.isProjectionDirty))&&(s=!1),i&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(s=!1),this.resolvedRelativeTargetAt===a.frameData.timestamp&&(s=!1),s)return;let{layout:r,layoutId:o}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(r||o))return;(0,x.copyBoxInto)(this.layoutCorrected,this.layout.layoutBox);let l=this.treeScale.x,c=this.treeScale.y;(0,I.applyTreeDeltas)(this.layoutCorrected,this.treeScale,this.path,i),n.layout&&!n.target&&(1!==this.treeScale.x||1!==this.treeScale.y)&&(n.target=n.layout.layoutBox,n.targetWithTransforms=(0,v.createBox)());let{target:u}=n;if(!u){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}this.projectionDelta&&this.prevProjectionDelta?((0,x.copyAxisDeltaInto)(this.prevProjectionDelta.x,this.projectionDelta.x),(0,x.copyAxisDeltaInto)(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),(0,_.calcBoxDelta)(this.projectionDelta,this.layoutCorrected,u,this.latestValues),this.treeScale.x===l&&this.treeScale.y===c&&(0,S.axisDeltaEquals)(this.projectionDelta.x,this.prevProjectionDelta.x)&&(0,S.axisDeltaEquals)(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",u)),t.statsBuffer.value&&P.calculatedProjections++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(){var e;let t=!(arguments.length>0)||void 0===arguments[0]||arguments[0];if(null==(e=this.options.visualElement)||e.scheduleRender(),t){let e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=(0,v.createDelta)(),this.projectionDelta=(0,v.createDelta)(),this.projectionDeltaWithTransform=(0,v.createDelta)()}setAnimationOrigin(e){let t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.snapshot,a=i?i.latestValues:{},s={...this.latestValues},r=(0,v.createDelta)();this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!n;let o=(0,v.createBox)(),l=(i?i.source:void 0)!==(this.layout?this.layout.source:void 0),c=this.getStack(),u=!c||c.members.length<=1,d=!!(l&&!u&&!0===this.options.crossfade&&!this.path.some(Z));this.animationProgress=0,this.mixTargetDelta=n=>{var i,c,h,p;let m=n/1e3;X(r.x,e.x,m),X(r.y,e.y,m),this.setTargetDelta(r),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&((0,_.calcRelativePosition)(o,this.layout.layoutBox,this.relativeParent.layout.layoutBox),i=this.relativeTarget,c=this.relativeTargetOrigin,h=o,p=m,J(i.x,c.x,h.x,p),J(i.y,c.y,h.y,p),t&&(0,S.boxEquals)(this.relativeTarget,t)&&(this.isProjectionDirty=!1),t||(t=(0,v.createBox)()),(0,x.copyBoxInto)(t,this.relativeTarget)),l&&(this.animationValues=s,(0,A.mixValues)(s,a,this.latestValues,m,d,u)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=m},this.mixTargetDelta(1e3*!!this.options.layoutRoot)}startAnimation(e){var t,n,i;this.notifyListeners("animationStart"),null==(t=this.currentAnimation)||t.stop(),null==(i=this.resumingFrom)||null==(n=i.currentAnimation)||n.stop(),this.pendingAnimation&&((0,a.cancelFrame)(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=a.frame.update(()=>{R.globalProjectionState.hasAnimatedSinceResize=!0,l.activeAnimations.layout++,this.motionValue||(this.motionValue=(0,c.motionValue)(0)),this.currentAnimation=(0,m.animateSingleValue)(this.motionValue,[0,1e3],{...e,velocity:0,isSync:!0,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onStop:()=>{l.activeAnimations.layout--},onComplete:()=>{l.activeAnimations.layout--,e.onComplete&&e.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);let e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){let e=this.getLead(),{targetWithTransforms:t,target:n,layout:i,latestValues:a}=e;if(t&&n&&i){if(this!==e&&this.layout&&i&&ei(this.options.animationType,this.layout.layoutBox,i.layoutBox)){n=this.target||(0,v.createBox)();let t=(0,_.calcLength)(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+t;let i=(0,_.calcLength)(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+i}(0,x.copyBoxInto)(t,n),(0,I.transformBox)(t,a),(0,_.calcBoxDelta)(this.projectionDeltaWithTransform,this.layoutCorrected,t,a)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new D.NodeStack),this.sharedNodes.get(e).add(t);let n=t.options.initialPromotionConfig;t.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(t):void 0})}isLead(){let e=this.getStack();return!e||e.lead===this}getLead(){var e;let{layoutId:t}=this.options;return t&&(null==(e=this.getStack())?void 0:e.lead)||this}getPrevLead(){var e;let{layoutId:t}=this.options;return t?null==(e=this.getStack())?void 0:e.prevLead:void 0}getStack(){let{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote(){let{needsReset:e,transition:t,preserveFollowOpacity:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=this.getStack();i&&i.promote(this,n),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){let e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){let{visualElement:e}=this.options;if(!e)return;let t=!1,{latestValues:n}=e;if((n.z||n.rotate||n.rotateX||n.rotateY||n.rotateZ||n.skewX||n.skewY)&&(t=!0),!t)return;let i={};n.z&&L("z",e,i,this.animationValues);for(let t=0;t<k.length;t++)L("rotate".concat(k[t]),e,i,this.animationValues),L("skew".concat(k[t]),e,i,this.animationValues);for(let t in e.render(),i)e.setStaticValue(t,i[t]),this.animationValues&&(this.animationValues[t]=i[t]);e.scheduleRender()}applyProjectionStyles(e,t){if(!this.instance||this.isSVG)return;if(!this.isVisible){e.visibility="hidden";return}let n=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,e.visibility="",e.opacity="",e.pointerEvents=(0,E.resolveMotionValue)(null==t?void 0:t.pointerEvents)||"",e.transform=n?n(this.latestValues,""):"none";return}let i=this.getLead();if(!this.projectionDelta||!this.layout||!i.target){this.options.layoutId&&(e.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,e.pointerEvents=(0,E.resolveMotionValue)(null==t?void 0:t.pointerEvents)||""),this.hasProjected&&!(0,O.hasTransform)(this.latestValues)&&(e.transform=n?n({},""):"none",this.hasProjected=!1);return}e.visibility="";let a=i.animationValues||i.latestValues;this.applyTransformsToTarget();let s=(0,N.buildProjectionTransform)(this.projectionDeltaWithTransform,this.treeScale,a);n&&(s=n(a,s)),e.transform=s;let{x:r,y:o}=this.projectionDelta;if(e.transformOrigin="".concat(100*r.origin,"% ").concat(100*o.origin,"% 0"),i.animationValues){var l,c;e.opacity=i===this?null!=(c=null!=(l=a.opacity)?l:this.latestValues.opacity)?c:1:this.preserveOpacity?this.latestValues.opacity:a.opacityExit}else e.opacity=i===this?void 0!==a.opacity?a.opacity:"":void 0!==a.opacityExit?a.opacityExit:0;for(let t in y.scaleCorrectors){if(void 0===a[t])continue;let{correct:n,applyTo:r,isCSSVariable:o}=y.scaleCorrectors[t],l="none"===s?a[t]:n(a[t],i);if(r){let t=r.length;for(let n=0;n<t;n++)e[r[n]]=l}else o?this.options.visualElement.renderState.vars[t]=l:e[t]=l}this.options.layoutId&&(e.pointerEvents=i===this?(0,E.resolveMotionValue)(null==t?void 0:t.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>{var t;return null==(t=e.currentAnimation)?void 0:t.stop()}),this.root.nodes.forEach(H),this.root.sharedNodes.clear()}constructor(e={},n=null==p?void 0:p()){this.id=M++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,t.statsBuffer.value&&(P.nodes=P.calculatedTargetDeltas=P.calculatedProjections=0),this.nodes.forEach(B),this.nodes.forEach(W),this.nodes.forEach(q),this.nodes.forEach(F),t.statsBuffer.addProjectionMetrics&&t.statsBuffer.addProjectionMetrics(P)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=n?n.root||n:this,this.path=n?[...n.path,n]:[],this.parent=n,this.depth=n?n.depth+1:0;for(let e=0;e<this.path.length;e++)this.path[e].shouldResetTransform=!0;this.root===this&&(this.nodes=new T.FlatTree)}}}function G(e){e.updateLayout()}function j(e){var t;let n=(null==(t=e.resumeFrom)?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){let{layoutBox:t,measuredBox:i}=e.layout,{animationType:a}=e.options,s=n.source!==e.layout.source;"size"===a?(0,b.eachAxis)(e=>{let i=s?n.measuredBox[e]:n.layoutBox[e],a=(0,_.calcLength)(i);i.min=t[e].min,i.max=i.min+a}):ei(a,n.layoutBox,t)&&(0,b.eachAxis)(i=>{let a=s?n.measuredBox[i]:n.layoutBox[i],r=(0,_.calcLength)(t[i]);a.max=a.min+r,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[i].max=e.relativeTarget[i].min+r)});let r=(0,v.createDelta)();(0,_.calcBoxDelta)(r,t,n.layoutBox);let o=(0,v.createDelta)();s?(0,_.calcBoxDelta)(o,e.applyTransform(i,!0),n.measuredBox):(0,_.calcBoxDelta)(o,t,n.layoutBox);let l=!(0,S.isDeltaZero)(r),c=!1;if(!e.resumeFrom){let i=e.getClosestProjectingParent();if(i&&!i.resumeFrom){let{snapshot:a,layout:s}=i;if(a&&s){let r=(0,v.createBox)();(0,_.calcRelativePosition)(r,n.layoutBox,a.layoutBox);let o=(0,v.createBox)();(0,_.calcRelativePosition)(o,t,s.layoutBox),(0,S.boxEqualsRounded)(r,o)||(c=!0),i.options.layoutRoot&&(e.relativeTarget=o,e.relativeTargetOrigin=r,e.relativeParent=i)}}}e.notifyListeners("didUpdate",{layout:t,snapshot:n,delta:o,layoutDelta:r,hasLayoutChanged:l,hasRelativeLayoutChanged:c})}else if(e.isLead()){let{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function B(e){t.statsBuffer.value&&P.nodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function F(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function U(e){e.clearSnapshot()}function H(e){e.clearMeasurements()}function V(e){e.isLayoutDirty=!1}function Y(e){let{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function z(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function W(e){e.resolveTargetDelta()}function q(e){e.calcProjection()}function K(e){e.resetSkewAndRotation()}function Q(e){e.removeLeadSnapshot()}function X(e,t,n){e.translate=(0,u.mixNumber)(t.translate,0,n),e.scale=(0,u.mixNumber)(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function J(e,t,n,i){e.min=(0,u.mixNumber)(t.min,n.min,i),e.max=(0,u.mixNumber)(t.max,n.max,i)}function Z(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}let $={duration:.45,ease:[.4,0,.1,1]},ee=e=>"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),et=ee("applewebkit/")&&!ee("chrome/")?Math.round:p.noop;function en(e){e.min=et(e.min),e.max=et(e.max)}function ei(e,t,n){return"position"===e||"preserve-aspect"===e&&!(0,_.isNear)((0,S.aspectRatio)(t),(0,S.aspectRatio)(n),.2)}function ea(e){var t;return e!==e.root&&(null==(t=e.scroll)?void 0:t.wasRoot)}},800453:e=>{"use strict";e.s({DocumentProjectionNode:()=>n});var t=e.i(481188);let n=(0,e.i(540264).createProjectionNode)({attachResizeListener:(e,n)=>(0,t.addDomEvent)(e,"resize",n),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0})},799788:e=>{"use strict";e.s({HTMLProjectionNode:()=>a});var t=e.i(540264),n=e.i(800453);let i={current:void 0},a=(0,t.createProjectionNode)({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!i.current){let e=new n.DocumentProjectionNode({});e.mount(window),e.setOptions({layoutScroll:!0}),i.current=e}return i.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>"fixed"===window.getComputedStyle(e).position})},744561:e=>{"use strict";e.s({drag:()=>s});var t=e.i(514187),n=e.i(296719),i=e.i(460315),a=e.i(799788);let s={pan:{Feature:n.PanGesture},drag:{Feature:t.DragGesture,ProjectionNode:a.HTMLProjectionNode,MeasureLayout:i.MeasureLayout}}},687852:e=>{"use strict";e.s({HoverGesture:()=>r});var t=e.i(330978),n=e.i(515496),i=e.i(260407),a=e.i(495146);function s(e,t,a){let{props:s}=e;e.animationState&&s.whileHover&&e.animationState.setActive("whileHover","Start"===a);let r=s["onHover"+a];r&&n.frame.postRender(()=>r(t,(0,i.extractEventInfo)(t)))}class r extends a.Feature{mount(){let{current:e}=this.node;e&&(this.unmount=(0,t.hover)(e,(e,t)=>(s(this.node,t,"Start"),e=>s(this.node,e,"End"))))}unmount(){}}},528437:e=>{"use strict";e.s({FocusGesture:()=>a});var t=e.i(416490),n=e.i(481188),i=e.i(495146);class a extends i.Feature{onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(t){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=(0,t.pipe)((0,n.addDomEvent)(this.node.current,"focus",()=>this.onFocus()),(0,n.addDomEvent)(this.node.current,"blur",()=>this.onBlur()))}unmount(){}constructor(){super(...arguments),this.isActive=!1}}},275606:e=>{"use strict";e.s({PressGesture:()=>r});var t=e.i(951361),n=e.i(515496),i=e.i(260407),a=e.i(495146);function s(e,t,a){let{props:s}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&s.whileTap&&e.animationState.setActive("whileTap","Start"===a);let r=s["onTap"+("End"===a?"":a)];r&&n.frame.postRender(()=>r(t,(0,i.extractEventInfo)(t)))}class r extends a.Feature{mount(){let{current:e}=this.node;e&&(this.unmount=(0,t.press)(e,(e,t)=>(s(this.node,t,"Start"),(e,t)=>{let{success:n}=t;return s(this.node,e,n?"End":"Cancel")}),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}},308048:e=>{"use strict";e.s({observeIntersection:()=>s});let t=new WeakMap,n=new WeakMap,i=e=>{let n=t.get(e.target);n&&n(e)},a=e=>{e.forEach(i)};function s(e,i,s){let r=function(e){let{root:t,...i}=e,s=t||document;n.has(s)||n.set(s,{});let r=n.get(s),o=JSON.stringify(i);return r[o]||(r[o]=new IntersectionObserver(a,{root:t,...i})),r[o]}(i);return t.set(e,s),r.observe(e),()=>{t.delete(e),r.unobserve(e)}}},233090:e=>{"use strict";e.s({InViewFeature:()=>a});var t=e.i(495146),n=e.i(308048);let i={some:0,all:1};class a extends t.Feature{startObserver(){this.unmount();let{viewport:e={}}=this.node.getProps(),{root:t,margin:a,amount:s="some",once:r}=e,o={root:t?t.current:void 0,rootMargin:a,threshold:"number"==typeof s?s:i[s]},l=e=>{let{isIntersecting:t}=e;if(this.isInView===t||(this.isInView=t,r&&!t&&this.hasEnteredView))return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);let{onViewportEnter:n,onViewportLeave:i}=this.node.getProps(),a=t?n:i;a&&a(e)};return(0,n.observeIntersection)(this.node.current,o,l)}mount(){this.startObserver()}update(){if("undefined"==typeof IntersectionObserver)return;let{props:e,prevProps:t}=this.node;["amount","margin","root"].some(function(e){let{viewport:t={}}=e,{viewport:n={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=>t[e]!==n[e]}(e,t))&&this.startObserver()}unmount(){}constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}}},61980:e=>{"use strict";e.s({gestureAnimations:()=>a});var t=e.i(687852),n=e.i(528437),i=e.i(275606);let a={inView:{Feature:e.i(233090).InViewFeature},tap:{Feature:i.PressGesture},focus:{Feature:n.FocusGesture},hover:{Feature:t.HoverGesture}}},861222:e=>{"use strict";e.s({layout:()=>i});var t=e.i(799788),n=e.i(460315);let i={layout:{ProjectionNode:t.HTMLProjectionNode,MeasureLayout:n.MeasureLayout}}},928838:e=>{"use strict";e.s({featureBundle:()=>s});var t=e.i(891302),n=e.i(744561),i=e.i(61980),a=e.i(861222);let s={...t.animations,...i.gestureAnimations,...n.drag,...a.layout}},702355:e=>{"use strict";e.s({motion:()=>a});var t=e.i(228103),n=e.i(343245),i=e.i(928838);let a=(0,n.createMotionProxy)(i.featureBundle,t.createDomVisualElement)},63108:e=>{"use strict";e.s({useMotionValue:()=>s});var t=e.i(349305),n=e.i(373150),i=e.i(700991),a=e.i(653312);function s(e){let s=(0,a.useConstant)(()=>(0,t.motionValue)(e)),{isStatic:r}=(0,n.useContext)(i.MotionConfigContext);if(r){let[,t]=(0,n.useState)(e);(0,n.useEffect)(()=>s.on("change",t),[])}return s}},902944:e=>{"use strict";e.s({useCombineMotionValues:()=>a});var t=e.i(515496),n=e.i(711965),i=e.i(63108);function a(e,a){let s=(0,i.useMotionValue)(a()),r=()=>s.set(a());return r(),(0,n.useIsomorphicLayoutEffect)(()=>{let n=()=>t.frame.preRender(r,!1,!0),i=e.map(e=>e.on("change",n));return()=>{i.forEach(e=>e()),(0,t.cancelFrame)(r)}}),s}},380545:e=>{"use strict";e.s({useComputed:()=>i});var t=e.i(349305),n=e.i(902944);function i(e){t.collectMotionValues.current=[],e();let i=(0,n.useCombineMotionValues)(t.collectMotionValues.current,e);return t.collectMotionValues.current=void 0,i}},527320:e=>{"use strict";e.s({useTransform:()=>s});var t=e.i(578752),n=e.i(653312),i=e.i(902944),a=e.i(380545);function s(e,n,i,s){if("function"==typeof e)return(0,a.useComputed)(e);let o="function"==typeof n?n:(0,t.transform)(n,i,s);return Array.isArray(e)?r(e,o):r([e],e=>{let[t]=e;return o(t)})}function r(e,t){let a=(0,n.useConstant)(()=>[]);return(0,i.useCombineMotionValues)(e,()=>{a.length=0;let n=e.length;for(let t=0;t<n;t++)a[t]=e[t].get();return t(a)})}},425570:e=>{"use strict";e.s({useSpring:()=>o});var t=e.i(599198),n=e.i(73145),i=e.i(373150),a=e.i(700991),s=e.i(63108),r=e.i(527320);function o(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{isStatic:l}=(0,i.useContext)(a.MotionConfigContext),c=()=>(0,n.isMotionValue)(e)?e.get():e;if(l)return(0,r.useTransform)(c);let u=(0,s.useMotionValue)(c());return(0,i.useInsertionEffect)(()=>(0,t.attachSpring)(u,e,o),[u,JSON.stringify(o)]),u}},689759:e=>{"use strict";e.s({PopChild:()=>r});var t=e.i(290479),n=e.i(234720),i=e.i(373150),a=e.i(700991);class s extends i.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,i=(0,n.isHTMLElement)(e)&&e.offsetWidth||0,a=this.props.sizeRef.current;a.height=t.offsetHeight||0,a.width=t.offsetWidth||0,a.top=t.offsetTop,a.left=t.offsetLeft,a.right=i-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function r(e){let{children:n,isPresent:r,anchorX:o,root:l}=e,c=(0,i.useId)(),u=(0,i.useRef)(null),d=(0,i.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:h}=(0,i.useContext)(a.MotionConfigContext);return(0,i.useInsertionEffect)(()=>{let{width:e,height:t,top:n,left:i,right:a}=d.current;if(r||!u.current||!e||!t)return;u.current.dataset.motionPopId=c;let s=document.createElement("style");h&&(s.nonce=h);let p=null!=l?l:document.head;return p.appendChild(s),s.sheet&&s.sheet.insertRule('\n          [data-motion-pop-id="'.concat(c,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            ").concat("left"===o?"left: ".concat(i):"right: ".concat(a),"px !important;\n            top: ").concat(n,"px !important;\n          }\n        ")),()=>{p.contains(s)&&p.removeChild(s)}},[r]),(0,t.jsx)(s,{isPresent:r,childRef:u,sizeRef:d,children:i.cloneElement(n,{ref:u})})}},453444:e=>{"use strict";e.s({PresenceChild:()=>r});var t=e.i(290479),n=e.i(373150),i=e.i(327879),a=e.i(653312),s=e.i(689759);let r=e=>{let{children:r,initial:l,isPresent:c,onExitComplete:u,custom:d,presenceAffectsLayout:h,mode:p,anchorX:m,root:f}=e,T=(0,a.useConstant)(o),g=(0,n.useId)(),E=!0,A=(0,n.useMemo)(()=>(E=!1,{id:g,initial:l,isPresent:c,custom:d,onExitComplete:e=>{for(let t of(T.set(e,!0),T.values()))if(!t)return;u&&u()},register:e=>(T.set(e,!1),()=>T.delete(e))}),[c,T,u]);return h&&E&&(A={...A}),(0,n.useMemo)(()=>{T.forEach((e,t)=>T.set(t,!1))},[c]),n.useEffect(()=>{c||T.size||!u||u()},[c]),"popLayout"===p&&(r=(0,t.jsx)(s.PopChild,{isPresent:c,anchorX:m,root:f,children:r})),(0,t.jsx)(i.PresenceContext.Provider,{value:A,children:r})};function o(){return new Map}},427788:e=>{"use strict";e.s({getChildKey:()=>n,onlyElements:()=>i});var t=e.i(373150);let n=e=>e.key||"";function i(e){let n=[];return t.Children.forEach(e,e=>{(0,t.isValidElement)(e)&&n.push(e)}),n}},660570:e=>{"use strict";e.s({AnimatePresence:()=>c});var t=e.i(290479),n=e.i(373150),i=e.i(839226),a=e.i(653312),s=e.i(711965),r=e.i(453444),o=e.i(764981),l=e.i(427788);let c=e=>{let{children:c,custom:u,initial:d=!0,onExitComplete:h,presenceAffectsLayout:p=!0,mode:m="sync",propagate:f=!1,anchorX:T="left",root:g}=e,[E,A]=(0,o.usePresence)(f),x=(0,n.useMemo)(()=>(0,l.onlyElements)(c),[c]),I=f&&!E?[]:x.map(l.getChildKey),_=(0,n.useRef)(!0),C=(0,n.useRef)(x),v=(0,a.useConstant)(()=>new Map),[S,D]=(0,n.useState)(x),[y,N]=(0,n.useState)(x);(0,s.useIsomorphicLayoutEffect)(()=>{_.current=!1,C.current=x;for(let e=0;e<y.length;e++){let t=(0,l.getChildKey)(y[e]);I.includes(t)?v.delete(t):!0!==v.get(t)&&v.set(t,!1)}},[y,I.length,I.join("-")]);let b=[];if(x!==S){let e=[...x];for(let t=0;t<y.length;t++){let n=y[t],i=(0,l.getChildKey)(n);I.includes(i)||(e.splice(t,0,n),b.push(n))}return"wait"===m&&b.length&&(e=b),N((0,l.onlyElements)(e)),D(x),null}let{forceRender:O}=(0,n.useContext)(i.LayoutGroupContext);return(0,t.jsx)(t.Fragment,{children:y.map(e=>{let n=(0,l.getChildKey)(e),i=(!f||!!E)&&(x===y||I.includes(n));return(0,t.jsx)(r.PresenceChild,{isPresent:i,initial:(!_.current||!!d)&&void 0,custom:u,presenceAffectsLayout:p,mode:m,root:g,onExitComplete:i?void 0:()=>{if(!v.has(n))return;v.set(n,!0);let e=!0;v.forEach(t=>{t||(e=!1)}),e&&(null==O||O(),N(C.current),f&&(null==A||A()),h&&h())},anchorX:T,children:e},n)})})}},755639:e=>{"use strict";e.s({Cambio:()=>k});var t=e.i(373150),n=e.i(456064),i=e.i(702355),a=e.i(63108),s=e.i(425570),r=e.i(527320),o=e.i(660570);let l=t.default.createContext(null);function c(){let e=t.default.useContext(l);if(!e)throw Error("Cambio components must be used within a Cambio Root");return e}let u={snappy:{transition:{ease:[.19,1,.22,1],duration:.24},drag:{stiffness:600,damping:40,restDelta:.01}},smooth:{transition:{ease:[.42,0,.58,1],duration:.3},drag:{stiffness:350,damping:25,restDelta:.01}},bouncy:{transition:{type:"spring",stiffness:1200,damping:80,mass:4},drag:{stiffness:400,damping:30,restDelta:.01}},reduced:{transition:{ease:"linear",duration:.01},drag:{stiffness:1e3,damping:50,restDelta:.1}}};function d(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?u.reduced:u[e]}function h(e,t,n,i){let a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return a?"reduced":t||((null==i?void 0:i[e])?i[e]:null!=n?n:"smooth")}let p=i.motion.create(n.Dialog.Root),m=i.motion.create(n.Dialog.Trigger),f=i.motion.create(n.Dialog.Portal),T=i.motion.create(n.Dialog.Backdrop),g=i.motion.create(n.Dialog.Popup),E=i.motion.create(n.Dialog.Title),A={Root:p,Trigger:m,Portal:f,Backdrop:T,Popup:g,Title:E,Description:i.motion.create(n.Dialog.Description),Close:i.motion.create(n.Dialog.Close)},x=t.default.forwardRef(function(e,n){let{motion:i,...a}=e,{open:s,motion:r,motionVariants:o,reduceMotion:l}=c(),u=d(h("backdrop",i,r,o,l),l),{transition:p=u.transition,initial:m={opacity:0},animate:f={opacity:1},exit:T={opacity:0}}=a;return t.default.createElement(A.Backdrop,{...a,ref:n,transition:p,initial:m,animate:f,exit:T,style:{...a.style,display:"block"}})});x.displayName="Cambio.Backdrop";let I=t.default.memo(t.default.forwardRef(function(e,n){return t.default.createElement(A.Close,{ref:n,...e})}));I.displayName="Cambio.Close";let _=t.default.memo(t.default.forwardRef(function(e,n){return t.default.createElement(A.Description,{ref:n,...e})}));_.displayName="Cambio.Description";let C={stiffness:400,damping:30,restDelta:.01},v=[0,50,100],S=[1,.98,.95],D=[0,80],y=[1,.96],N=t.default.forwardRef(function(e,n){let{motion:i,...o}=e,{layoutId:l,open:u,onOpenChange:p,motion:m,motionVariants:f,reduceMotion:T,dismissible:g}=c(),[E,x]=(0,t.useState)(!1),I=(0,a.useMotionValue)(0),_=(0,a.useMotionValue)(0),N=d(h("popup",i,m,f,T),T),b=g?"boolean"==typeof g?g?{threshold:100,velocity:500}:null:{threshold:100,velocity:500,...g}:null,O=N.drag||C,R=(0,s.useSpring)(I,O),P=(0,s.useSpring)(_,O),k=(0,r.useTransform)([R,P],e=>{let[t,n]=e;return Math.hypot(t,n)}),M=(0,r.useTransform)(k,v,S),L=(0,r.useTransform)(k,D,y),w=(0,r.useTransform)(k,e=>Math.max(.1,1-Math.log(e/20+1)/4)),G=(0,t.useMemo)(()=>{if(!b)return{};let{threshold:e=60,velocity:t=300}=b;return{drag:!0,dragElastic:0,dragMomentum:!1,dragSnapToOrigin:!0,onDrag:(e,t)=>{E||x(!0);let n=w.get();I.set(t.offset.x*n),_.set(t.offset.y*n)},onDragEnd:(n,i)=>{x(!1);let a=Math.hypot(i.offset.x,i.offset.y);(Math.hypot(i.velocity.x,i.velocity.y)>t||a>e)&&p?p(!1):(I.set(0),_.set(0))}}},[b,p,I,_,E,w]),{transition:j=N.transition}=o;return t.default.createElement(A.Popup,{...o,...G,ref:n,layoutId:l,layoutCrossfade:!1,layout:!0,transition:j,style:{position:"fixed",top:"50%",left:"50%",translate:"-50% -50%",touchAction:b?"none":"auto",cursor:E?"grabbing":b?"grab":"default",userSelect:"none",WebkitUserSelect:"none",scale:M,opacity:L,x:R,y:P,...o.style}})});N.displayName="Cambio.Popup";let b=t.default.memo(t.default.forwardRef(function(e,n){let{open:i}=c();return t.default.createElement(o.AnimatePresence,null,i&&t.default.createElement(A.Portal,{keepMounted:!0,...e}))}));b.displayName="Cambio.Portal";let O=(0,t.forwardRef)(function(e,n){let i=(0,t.useId)(),{open:a,onOpenChange:s,defaultOpen:r=!1,layoutId:o="cambio-dialog-".concat(i),reduceMotion:c,motion:u,dismissible:h,...p}=e,[m,f]=(0,t.useState)(r),T=null!=a?a:m,g="boolean"==typeof c?c:"undefined"!=typeof window&&window.matchMedia("(prefers-reduced-motion: reduce)").matches,{preset:E,variants:x}="string"==typeof u?{preset:u}:"object"==typeof u?{preset:"smooth",variants:u}:{preset:"smooth"},I=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t&&!e?"reduced":null!=e?e:"smooth"}(E,g),_=d(I,g),C=(0,t.useCallback)((e,t,n)=>{s?s(e):f(e)},[s]);return t.default.createElement(l.Provider,{value:{layoutId:o,open:T,onOpenChange:e=>C(e),reduceMotion:g,motion:I,motionConfig:_,motionVariants:x,dismissible:h}},t.default.createElement(A.Root,{...p,open:T,onOpenChange:C}))});O.displayName="Cambio.Root";let R=t.default.memo(t.default.forwardRef(function(e,n){return t.default.createElement(A.Title,{ref:n,...e})}));R.displayName="Cambio.Title";let P=t.default.memo(t.default.forwardRef(function(e,n){let{motion:i,...a}=e,{open:s,layoutId:r}=c(),[o,l]=t.default.useState(1e3*!!s);t.default.useEffect(()=>{s&&l(1e3)},[s]);let u=t.default.useCallback(()=>{s||l(0)},[s]);return t.default.createElement(A.Trigger,{...a,ref:n,layoutId:r,layoutCrossfade:!1,onLayoutAnimationComplete:u,style:{position:"relative",zIndex:o,...a.style}})}));P.displayName="Cambio.Trigger";let k={Root:O,Trigger:P,Portal:b,Backdrop:x,Popup:N,Title:R,Description:_,Close:I}},643657:e=>{"use strict";e.s({ImageGenerationLoader:()=>r});var t=e.i(290479),n=e.i(34818);let i={exit:{opacity:0,scale:.95,transition:{delay:.2,duration:.3,ease:[.22,1,.36,1]}}},a={initial:{scale:0,opacity:0},animate:{scale:1,opacity:1,transition:{duration:.5,ease:"easeOut"}}},s={hidden:{scale:0,opacity:0},visible:e=>({scale:[0,1.1,1,1,0],opacity:[0,1,1,1,0],transition:{delay:e,duration:3,times:[0,.2,.4,.8,1],repeat:1/0,repeatType:"loop",ease:"easeInOut"}})},r=e=>{let{className:r=""}=e,o=Math.floor(5.5),l=Array.from({length:121},(e,t)=>{let n=Math.floor(t/11),i=t%11,a=Math.abs(n-o)+Math.abs(i-o);return{id:t,row:n,col:i,delay:.1*a,distance:a}});return(0,t.jsx)(n.motion.div,{className:"aspect-square relative overflow-hidden bg-background  ".concat(r),variants:i,exit:"exit",children:(0,t.jsx)(n.motion.div,{className:"relative w-full h-full",variants:a,initial:"initial",animate:"animate",children:(0,t.jsx)("div",{className:"absolute inset-0 rounded-sm",style:{padding:"3px"},children:(0,t.jsx)("div",{className:"w-full h-full rounded-sm relative",style:{padding:"8px"},children:(0,t.jsx)("div",{className:"w-full h-full grid gap-0.5",style:{gridTemplateColumns:"repeat(".concat(11,", 1fr)"),gridTemplateRows:"repeat(".concat(11,", 1fr)")},children:l.map(e=>(0,t.jsx)(n.motion.div,{className:"rounded-sm bg-foreground/10",style:{},variants:s,initial:"hidden",animate:"visible",custom:e.delay},e.id))})})})})})}},682631:e=>{"use strict";e.s({GeneratedImagePart:()=>p});var t=e.i(290479),n=e.i(289702),i=e.i(755639),a=e.i(381612),s=e.i(996481),r=e.i(579468),o=e.i(330462),l=e.i(373150),c=e.i(389938),u=e.i(972899),d=e.i(183501),h=e.i(643657);let p=e=>{let{part:p}=e,[m,f]=(0,l.useState)(!1),[T,g]=(0,l.useState)(!0),{imageUrl:E,status:A}=p;if(p.notGenerated)return null;if("error"===A)return(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,t.jsx)(r.Image,{className:"h-7 w-7 flex-shrink-0"}),"Image generation failed"]});let x="pending"===A||!E&&!m;return(0,t.jsxs)(c.Collapsible,{open:T,onOpenChange:g,className:"flex flex-col gap-6",children:[(0,t.jsx)(c.CollapsibleTrigger,{asChild:!0,children:(0,t.jsxs)("div",{className:(0,n.cn)("flex items-center gap-2 cursor-pointer"),children:[(0,t.jsx)(d.ChatV2Step,{icon:r.Image,title:"pending"===p.status?"Generating Image":"Generated Image",isLoading:x}),(0,t.jsx)(u.Icon,{className:"text-feint-foreground",as:T?a.ChevronDown:s.ChevronRight})]})}),(0,t.jsx)(c.CollapsibleContent,{children:(0,t.jsxs)("div",{className:"relative max-w-md z-0 w-full aspect-square",children:[(0,t.jsx)(o.AnimatePresence,{mode:"wait",children:(!E||"pending"!==A)&&!m&&(0,t.jsx)("div",{className:"max-w-md absolute z-[2] inset-0",children:(0,t.jsx)("div",{className:"rounded-lg border border-border bg-card overflow-hidden",children:(0,t.jsx)(h.ImageGenerationLoader,{})})})}),E&&(0,t.jsxs)(i.Cambio.Root,{motion:"smooth",dismissible:!0,children:[(0,t.jsx)(i.Cambio.Trigger,{className:"isolate w-full h-full cursor-zoom-in focus:outline-none",children:(0,t.jsx)("img",{src:E,alt:"Generated image",className:"w-full h-full  focus:outline-none rounded-lg border border-border outline-none object-cover transition-opacity duration-300 ".concat(m?"opacity-100":"opacity-0"),onLoad:()=>{f(!0)}})}),(0,t.jsxs)(i.Cambio.Portal,{children:[(0,t.jsx)(i.Cambio.Backdrop,{className:"fixed inset-0 bg-black/40"}),(0,t.jsx)(i.Cambio.Popup,{className:"focus:outline-none",children:(0,t.jsx)("img",{className:"pointer-events-none",src:E,alt:"Generated image (enlarged)"})})]})]})]})})]})}},107018:e=>{"use strict";e.s({ExternalLink:()=>t.default});var t=e.i(950995)},651335:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("file",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]])},23174:e=>{"use strict";e.s({File:()=>t.default});var t=e.i(651335)},223685:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("file-spreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]])},61781:e=>{"use strict";e.s({FileSpreadsheet:()=>t.default});var t=e.i(223685)},241750:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("presentation",[["path",{d:"M2 3h20",key:"91anmk"}],["path",{d:"M21 3v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V3",key:"2k9sn8"}],["path",{d:"m7 21 5-5 5 5",key:"bip4we"}]])},116013:e=>{"use strict";e.s({Presentation:()=>t.default});var t=e.i(241750)},478599:e=>{"use strict";e.s({default:()=>f});var t=e.i(290479),n=e.i(107018),i=e.i(23174),a=e.i(61781),s=e.i(360911),r=e.i(116013),o=e.i(373150),l=e.i(704255),c=e.i(861689),u=e.i(908945),d=e.i(972899),h=e.i(289702),p=e.i(298807);let m=e=>{let{result:c}=e,[p,m]=(0,o.useState)(!1),[f,T]=(0,o.useState)(!1),{integrationIngest:g}=(0,u.useIntegrationIngest)(),E=async()=>{try{T(!0),await g([{id:c.id,name:c.name}],"google-drive")}catch(e){console.error("Failed to add file to library:",e)}finally{T(!1)}};return(0,t.jsxs)("div",{onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),className:(0,h.cn)("flex items-center gap-4 text-sm py-3 px-3 rounded-4 transition-colors","hover:bg-accent"),children:[(0,t.jsx)(d.Icon,{as:(e=>e?e.includes("document")||e.includes("text")?s.FileText:e.includes("spreadsheet")||e.includes("excel")?a.FileSpreadsheet:e.includes("presentation")||e.includes("powerpoint")?r.Presentation:i.File:i.File)(c.mimeType),className:"flex-shrink-0"}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"truncate font-medium",children:c.name}),(0,t.jsx)("span",{className:"text-xs text-text-secondary shrink-0",children:(e=>e?e.includes("document")?"Doc":e.includes("spreadsheet")?"Sheet":e.includes("presentation")?"Slides":e.includes("pdf")?"PDF":"Drive":"File")(c.mimeType)})]}),(c.size||c.lastModified)&&(0,t.jsxs)("div",{className:"flex items-center gap-3 mt-1 text-xs text-text-secondary",children:[c.size&&(0,t.jsx)("span",{children:(e=>{if(!e)return"";let t=Math.floor(Math.log(e)/Math.log(1024));return"".concat((e/1024**t).toFixed(1)," ").concat(["B","KB","MB","GB"][t])})(c.size)}),c.lastModified&&(0,t.jsxs)("span",{children:["Modified ",(e=>{if(!e)return"";let t=new Date(e);return t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:t.getFullYear()!==new Date().getFullYear()?"numeric":void 0})})(c.lastModified)]})]})]}),(0,t.jsxs)("div",{className:(0,h.cn)("flex items-center gap-1 transition-opacity",p?"opacity-100":"opacity-0"),children:[(0,t.jsx)(l.Button,{variant:"ghost",size:"xxs",onClick:e=>{e.stopPropagation(),window.open(c.url,"_blank")},className:"p-1",title:"Open in Google Drive",children:(0,t.jsx)(n.ExternalLink,{className:"w-4 h-4"})}),(0,t.jsx)("p",{className:"text-xs text-text-secondary hover:underline cursor-pointer whitespace-nowrap",onClick:e=>{e.stopPropagation(),f||E()},children:f?"Adding...":"Add to library"})]})]},c.id)},f=e=>{let n="pending"===e.status;return(0,t.jsx)(p.SearchResultsSection,{id:e.id,icon:c.default,title:n?"Searching Google Drive...":"Searched Google Drive",resultsCount:e.results.length,isLoading:n,children:e.results.map(e=>(0,t.jsx)(m,{result:e},e.id))})}},496991:e=>{"use strict";e.s({default:()=>c});var t=e.i(290479),n=e.i(650639),i=e.i(972899),a=e.i(184901),s=e.i(502753),r=e.i(373150),o=e.i(298807);let l=e=>{let{result:s}=e,[o,l]=(0,r.useState)(!1),{onExternalSourceSubmit:c}=(0,n.useIngest)();return(0,t.jsxs)("div",{onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),className:"flex items-center gap-4 text-sm py-2 hover:bg-accent rounded-4 px-3",children:[(0,t.jsxs)("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-4 flex-1",children:[(0,t.jsx)(i.Icon,{as:a.ArrowUpRight,className:"flex-shrink-0"}),(0,t.jsxs)("div",{className:"flex flex-row items-center gap-3 min-w-0",children:[(0,t.jsx)("span",{className:"truncate max-w-[40ch] flex-1 min-w-0",children:s.name}),(0,t.jsx)("span",{className:"text-xs truncate text-text-secondary max-w-[20ch] min-w-[10ch] flex-shrink-0",children:new URL(s.url).hostname})]})]}),o&&(0,t.jsx)("p",{className:"text-feint-foreground text-xs flex-shrink-0 hover:underline cursor-pointer",onClick:()=>c(s.url),children:"Add to library"})]},s.id)},c=e=>{let n="pending"===e.status;return(0,t.jsx)(o.SearchResultsSection,{id:e.id,icon:s.Globe,title:n?"Searching the internet...":"Searched the internet",resultsCount:e.data.length,isLoading:n,children:e.data.map(e=>(0,t.jsx)(l,{result:e},e.id))})}},61881:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("library",[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]])},415081:e=>{"use strict";e.s({Library:()=>t.default});var t=e.i(61881)},353667:e=>{"use strict";e.s({default:()=>o});var t=e.i(290479),n=e.i(360911),i=e.i(415081),a=e.i(373150),s=e.i(298807);let r=e=>{let{result:i}=e,[s,r]=(0,a.useState)(!1);return(0,t.jsx)("div",{onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),className:"flex items-center gap-4 text-sm py-2 hover:bg-accent rounded-4 px-3",children:(0,t.jsxs)("a",{href:i.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-4 flex-1",children:[(0,t.jsx)(n.FileText,{className:"flex-shrink-0"}),(0,t.jsxs)("div",{className:"flex flex-row items-center gap-3 min-w-0",children:[(0,t.jsx)("span",{className:"truncate max-w-[40ch] flex-1 min-w-0",children:i.name}),(0,t.jsx)("span",{className:"text-xs text-text-secondary",children:"Mendeley"})]})]})},i.id)},o=e=>{let n="pending"===e.status;return(0,t.jsx)(s.SearchResultsSection,{id:e.id,icon:i.Library,title:n?"Searching Mendeley...":"Searched Mendeley",resultsCount:e.results.length,isLoading:n,children:e.results.map(e=>(0,t.jsx)(r,{result:e},e.id))})}},52276:e=>{"use strict";e.s({default:()=>p});var t=e.i(290479),n=e.i(23174),i=e.i(61781),a=e.i(360911),s=e.i(116013),r=e.i(373150),o=e.i(720238),l=e.i(908945),c=e.i(972899),u=e.i(289702),d=e.i(298807);let h=e=>{let{result:o}=e,[d,h]=(0,r.useState)(!1),[p,m]=(0,r.useState)(!1),{integrationIngest:f}=(0,l.useIntegrationIngest)(),T=async()=>{try{m(!0),await f([{id:o.id,name:o.name}],"onedrive")}catch(e){console.error("Failed to add file to library:",e)}finally{m(!1)}};return(0,t.jsxs)("div",{onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),className:"text-sm flex items-center py-2 hover:bg-accent rounded-4 px-3 gap-4",children:[(0,t.jsx)(c.Icon,{as:(e=>e?e.includes("document")||e.includes("text")?a.FileText:e.includes("spreadsheet")||e.includes("excel")?i.FileSpreadsheet:e.includes("presentation")||e.includes("powerpoint")?s.Presentation:n.File:n.File)(o.mimeType),className:"flex-shrink-0"}),(0,t.jsx)("p",{className:"truncate max-w-full",children:o.name}),(0,t.jsx)("div",{className:(0,u.cn)("flex items-center gap-1 transition-opacity ml-auto",d?"opacity-100":"opacity-0"),children:(0,t.jsx)("p",{className:"text-xs text-text-secondary hover:underline cursor-pointer whitespace-nowrap",onClick:e=>{e.stopPropagation(),p||T()},children:p?"Adding...":"Add to library"})})]},o.id)},p=e=>{let n="pending"===e.status;return(0,t.jsx)(d.SearchResultsSection,{id:e.id,icon:o.default,title:n?"Searching OneDrive...":"Searched OneDrive",resultsCount:e.results.length,isLoading:n,children:e.results.map(e=>(0,t.jsx)(h,{result:e},e.id))})}},540892:e=>{"use strict";e.s({PapersPart:()=>c});var t=e.i(290479),n=e.i(972899),i=e.i(650639),a=e.i(188246),s=e.i(360911),r=e.i(373150),o=e.i(298807);let l=e=>{let{id:a,name:o,url:l}=e,[c,u]=(0,r.useState)(!1),{onExternalSourceSubmit:d}=(0,i.useIngest)();return(0,t.jsxs)("div",{onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),className:"flex items-center gap-4 text-sm py-2 hover:bg-accent rounded-4 px-3",children:[(0,t.jsxs)("a",{href:l,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-4 flex-1",children:[(0,t.jsx)(n.Icon,{as:s.FileText,className:"flex-shrink-0"}),(0,t.jsx)("span",{className:"line-clamp-1 max-w-sm",children:o})]}),c&&(0,t.jsx)("p",{className:"text-feint-foreground text-xs flex-shrink-0 hover:underline cursor-pointer",onClick:()=>d(l),children:"Add to library"})]},a)},c=e=>{let n="pending"===e.status,i=e.data;return(0,t.jsx)(o.SearchResultsSection,{id:e.id,icon:a.BookOpen,title:n?"Searching web for papers...":"Searched web for papers",resultsCount:i.length,isLoading:n,children:i.map(e=>(0,t.jsx)(l,{id:e.id,name:e.name,url:e.url},e.id))})}},850691:e=>{"use strict";e.s({ReadingResourcePart:()=>o});var t=e.i(290479),n=e.i(998145),i=e.i(360911),a=e.i(736067),s=e.i(430266),r=e.i(183501);let o=e=>{var o;let l,{part:c}=e,u="pending"===c.status,d=c.payload;if("read-resource-external"===d.type)return(0,t.jsx)(r.ChatV2Step,{icon:a.Link,title:u?'Reading paper "'.concat(d.paperTitle,'"'):'Read paper "'.concat(d.paperTitle,'"'),isLoading:u});if("read-resource-website"===d.type)return(0,t.jsx)(r.ChatV2Step,{icon:a.Link,title:u?'Reading website "'.concat(d.url,'"'):'Read website "'.concat(d.url,'"'),isLoading:u});let h=(0,n.default)({type:d.chatbotType})||i.FileText,p=d.title,m=(l=d.chatbotType,(0,s.match)(l).with("DOCUMENT",()=>"Reading").with("GROUP",()=>"Reading").with("WORKSPACE",()=>"Reading").with("VIDEO",()=>"Watching").with("YOUTUBE",()=>"Watching").with("AUDIO",()=>"Listening to").with("RECORDING",()=>"Listening to").with("WEBSITE",()=>"Reading").with("IMAGE",()=>"Viewing").with("NOTE",()=>"Reading").with("TEXT",()=>"Reading").with("NOTION",()=>"Reading").with("NOTHING",()=>"Processing").otherwise(()=>"Reading")),f=(o=d.chatbotType,(0,s.match)(o).with("DOCUMENT",()=>"Read").with("GROUP",()=>"Read files in").with("WORKSPACE",()=>"Read").with("VIDEO",()=>"Watched").with("YOUTUBE",()=>"Watched").with("AUDIO",()=>"Listened to").with("RECORDING",()=>"Listened to").with("WEBSITE",()=>"Read").with("IMAGE",()=>"Viewed").with("NOTE",()=>"Read").with("TEXT",()=>"Read").with("NOTION",()=>"Read").with("NOTHING",()=>"Processed").otherwise(()=>"Read")),T=u?m:f;return(0,t.jsx)(r.ChatV2Step,{icon:h,title:(0,t.jsxs)(t.Fragment,{children:[T,(0,t.jsxs)("span",{className:"text-feint-foreground",children:[" ",p]})]}),isLoading:u})}},441348:e=>{"use strict";e.s({TextLoop:()=>r});var t=e.i(290479),n=e.i(289702),i=e.i(330462),a=e.i(34818),s=e.i(373150);function r(e){let{children:r,className:o,interval:l=2,transition:c={duration:.3},variants:u,onIndexChange:d,trigger:h=!0,mode:p="popLayout"}=e,[m,f]=(0,s.useState)(0),T=s.Children.toArray(r);return(0,s.useEffect)(()=>{if(!h)return;let e=setInterval(()=>{f(e=>{let t=(e+1)%T.length;return null==d||d(t),t})},1e3*l);return()=>clearInterval(e)},[T.length,l,d,h]),(0,t.jsx)("span",{className:(0,n.cn)("relative inline-block whitespace-nowrap",o),children:(0,t.jsx)(i.AnimatePresence,{mode:p,initial:!1,children:(0,t.jsx)(a.motion.span,{initial:"initial",animate:"animate",exit:"exit",transition:c,variants:u||{initial:{y:20,opacity:0},animate:{y:0,opacity:1},exit:{y:-20,opacity:0}},style:{display:"inline-block"},children:T[m]},m)})})}},330623:e=>{"use strict";e.s({SearchLibraryComponent:()=>h});var t=e.i(290479),n=e.i(441348),i=e.i(998145),a=e.i(969029),s=e.i(73310),r=e.i(227261),o=e.i(59938),l=e.i(86386),c=e.i(373150),u=e.i(972899),d=e.i(298807);let h=e=>{let{part:h}=e,[p,m]=(0,c.useState)(-1),[f,T]=(0,c.useState)(!1),g="pending"===h.status,E=(0,r.useChatbotStore)(e=>e.mode),A="chatbot"===E.type?E.chatbotId:void 0,x="chatbot"===E.type&&"GROUP"===E.chatbotType,{groupMembers:I}=(0,a.default)(x?A:null,x),{results:_}=(0,s.useRecentWorkspaceItems)(10,!x);(0,c.useEffect)(()=>{g?T(!0):T(!1)},[g]);let C=(0,c.useCallback)(e=>{m(0===e?-1:1)},[]);return(0,t.jsx)(d.SearchResultsSection,{id:h.id,icon:o.FolderSearch,title:(()=>{if(f){let e=x?I||[]:_||[];if(e.length>0){let i=e.filter(e=>"DOCUMENT"===e.type||"NOTE"===e.type||"WEBSITE"===e.type||"YOUTUBE"===e.type).slice(0,10).map(e=>e.name),a=[...new Set(i)].sort(()=>Math.random()-.5);if(i.length>0)return(0,t.jsxs)("span",{className:"inline-flex items-baseline space-x-2",children:[(0,t.jsx)("span",{children:"Read "}),(0,t.jsx)(n.TextLoop,{className:"text-sm ml-1",transition:{type:"spring",stiffness:150,damping:19,mass:1.2},interval:1.4,onIndexChange:C,variants:{initial:{y:-(20*p),rotateX:-(90*p),opacity:0,filter:"blur(4px)"},animate:{y:0,rotateX:0,opacity:1,filter:"blur(0px)"},exit:{y:-(20*p),rotateX:-(90*p),opacity:0,filter:"blur(4px)"}},children:a.map(e=>(0,t.jsx)("span",{children:e},e))})]})}}return g?"Reading workspace...":"Read workspace"})(),resultsCount:h.data.length,isLoading:g,children:h.data.map(e=>(0,t.jsxs)(l.default,{href:"/b/".concat(e.id),className:"flex items-center gap-4 text-sm py-2 hover:bg-accent rounded-4 px-3",children:[(0,t.jsx)(u.Icon,{as:(0,i.default)({type:e.type}),className:"flex-shrink-0"}),(0,t.jsx)("span",{className:"line-clamp-1",children:e.name})]},e.id))})}},494087:e=>{"use strict";e.s({default:()=>f});var t=e.i(290479),n=e.i(107018),i=e.i(23174),a=e.i(61781),s=e.i(360911),r=e.i(116013),o=e.i(373150),l=e.i(704255),c=e.i(833856),u=e.i(908945),d=e.i(972899),h=e.i(289702),p=e.i(298807);let m=e=>{let{result:c}=e,[p,m]=(0,o.useState)(!1),[f,T]=(0,o.useState)(!1),{integrationIngest:g}=(0,u.useIntegrationIngest)(),E=async()=>{try{T(!0),await g([{id:c.id,name:c.name}],"sharepoint")}catch(e){console.error("Failed to add file to library:",e)}finally{T(!1)}};return(0,t.jsxs)("div",{onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),className:(0,h.cn)("flex items-center gap-4 text-sm py-3 px-3 rounded-4 transition-colors","hover:bg-accent"),children:[(0,t.jsx)(d.Icon,{as:(e=>e?e.includes("document")||e.includes("text")?s.FileText:e.includes("spreadsheet")||e.includes("excel")?a.FileSpreadsheet:e.includes("presentation")||e.includes("powerpoint")?r.Presentation:i.File:i.File)(c.mimeType),className:"flex-shrink-0 w-5 h-5"}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"truncate font-medium",children:c.name}),(0,t.jsx)("span",{className:"text-xs text-text-secondary shrink-0",children:(e=>e?e.includes("document")?"Doc":e.includes("spreadsheet")?"Sheet":e.includes("presentation")?"Slides":e.includes("pdf")?"PDF":"SharePoint":"File")(c.mimeType)})]}),(c.size||c.lastModified)&&(0,t.jsxs)("div",{className:"flex items-center gap-3 mt-1 text-xs text-text-secondary",children:[c.size&&(0,t.jsx)("span",{children:(e=>{if(!e)return"";let t=Math.floor(Math.log(e)/Math.log(1024));return"".concat((e/1024**t).toFixed(1)," ").concat(["B","KB","MB","GB"][t])})(c.size)}),c.lastModified&&(0,t.jsxs)("span",{children:["Modified ",(e=>{if(!e)return"";let t=new Date(e);return t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:t.getFullYear()!==new Date().getFullYear()?"numeric":void 0})})(c.lastModified)]})]})]}),(0,t.jsxs)("div",{className:(0,h.cn)("flex items-center gap-1 transition-opacity",p?"opacity-100":"opacity-0"),children:[(0,t.jsx)(l.Button,{variant:"ghost",size:"xxs",onClick:e=>{e.stopPropagation(),window.open(c.url,"_blank")},className:"p-1",title:"Open in SharePoint",children:(0,t.jsx)(n.ExternalLink,{className:"w-4 h-4"})}),(0,t.jsx)("p",{className:"text-xs text-text-secondary hover:underline cursor-pointer whitespace-nowrap",onClick:e=>{e.stopPropagation(),f||E()},children:f?"Adding...":"Add to library"})]})]},c.id)},f=e=>{let n="pending"===e.status;return(0,t.jsx)(p.SearchResultsSection,{id:e.id,icon:c.default,title:n?"Searching SharePoint...":"Searched SharePoint",resultsCount:e.results.length,isLoading:n,children:e.results.map(e=>(0,t.jsx)(m,{result:e},e.id))})}},410954:e=>{"use strict";e.s({ThinkingSection:()=>u});var t=e.i(290479),n=e.i(381612),i=e.i(996481),a=e.i(856951),s=e.i(373150),r=e.i(389938),o=e.i(972899),l=e.i(512109),c=e.i(183501);let u=e=>{let{id:u,isLoading:d,duration:h,text:p,sources:m}=e,[f,T]=(0,s.useState)(d);return s.default.useEffect(()=>{d||T(!1)},[d]),(0,t.jsxs)(r.Collapsible,{open:f,onOpenChange:T,className:"flex flex-col gap-6",children:[(0,t.jsx)(r.CollapsibleTrigger,{asChild:!0,children:(0,t.jsxs)("div",{className:"cursor-pointer flex items-center gap-2",children:[(0,t.jsx)(c.ChatV2Step,{icon:a.Sparkle,title:d?"Thinking":"Thought for ".concat(h,"s"),isLoading:d}),(0,t.jsx)(o.Icon,{className:"text-feint-foreground",as:f?n.ChevronDown:i.ChevronRight})]})}),(0,t.jsx)(r.CollapsibleContent,{children:(0,t.jsx)("div",{"data-thinking":!0,className:"!text-text-secondary text-sm flex flex-col gap-2",children:(0,t.jsx)(l.default,{sources:m,markdownContent:p.replace(/<think>|<\/think>/g,"")})})})]},u)}},124660:e=>{"use strict";e.s({default:()=>l});var t=e.i(290479),n=e.i(650639),i=e.i(972899),a=e.i(359858),s=e.i(373150),r=e.i(298807);let o=e=>{let{result:r}=e,[o,l]=(0,s.useState)(!1),{onExternalSourceSubmit:c}=(0,n.useIngest)();return(0,t.jsxs)("div",{onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),className:"flex items-center gap-4 text-sm py-2 hover:bg-accent rounded-4 px-3",children:[(0,t.jsxs)("a",{href:r.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-4 flex-1",children:[(0,t.jsx)(i.Icon,{as:a.Youtube,className:"flex-shrink-0"}),(0,t.jsxs)("div",{className:"flex flex-row items-center gap-3 min-w-0",children:[(0,t.jsx)("span",{className:"truncate max-w-[40ch] flex-1 min-w-0",children:r.name}),(0,t.jsx)("span",{className:"text-xs text-text-secondary",children:"YouTube"})]})]}),o&&(0,t.jsx)("p",{className:"text-feint-foreground text-xs flex-shrink-0 hover:underline cursor-pointer",onClick:()=>c(r.url),children:"Add to library"})]},r.id)},l=e=>{let n="pending"===e.status;return(0,t.jsx)(r.SearchResultsSection,{id:e.id,icon:a.Youtube,title:n?"Searching YouTube videos...":"Searched YouTube videos",resultsCount:e.data.length,isLoading:n,children:e.data.map(e=>(0,t.jsx)(o,{result:e},e.id))})}},108416:e=>{"use strict";e.s({ChatV2AIMessagePart:()=>O});var t=e.i(290479),n=e.i(471851),i=e.i(373150),a=e.i(430266),s=e.i(289702),r=e.i(750766),o=e.i(512109),l=e.i(394505),c=e.i(375786),u=e.i(745628),d=e.i(403522),h=e.i(341664),p=e.i(221297),m=e.i(681299),f=e.i(925111),T=e.i(789643),g=e.i(16515),E=e.i(525461),A=e.i(682631),x=e.i(478599),I=e.i(496991),_=e.i(353667),C=e.i(52276),v=e.i(540892),S=e.i(850691),D=e.i(330623),y=e.i(494087),N=e.i(410954),b=e.i(124660);let O=e=>{let{part:O,sources:R=[],messageId:P,scrollContainerRef:k}=e,{chatId:M}=(0,h.useChatId)(),{uniqueSaveId:L}=(0,m.useChatUniqueId)(),w="pending"===O.status,G=(0,p.useChatV2Store)(e=>e.contentGenerationComplete),j=(0,i.useRef)(null),{selectionData:B,clearSelection:F}=(0,f.useChatTextSelection)(j);return(0,a.match)(O).with({type:"search-internet"},I.default).with({type:"search-library"},e=>(0,t.jsx)(D.SearchLibraryComponent,{part:e})).with({type:"search-papers"},v.PapersPart).with({type:"search-youtube"},b.default).with({type:"search-google-drive"},x.default).with({type:"search-onedrive"},C.default).with({type:"search-sharepoint"},y.default).with({type:"search-mendeley"},_.default).with({type:"thinking"},e=>{let n="pending"===O.status;return(0,t.jsx)(N.ThinkingSection,{id:O.id,isLoading:n,duration:e.duration,text:e.text,sources:R},O.id)}).with({type:"read-resource"},e=>(0,t.jsx)(S.ReadingResourcePart,{part:e})).with({type:"text"},e=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{ref:j,className:(0,s.cn)("flex flex-col gap-4 prose-md"),children:(0,t.jsx)(r.AnimatedStreamingText,{text:e.text,enableStreaming:w,duration:2,chatId:M||void 0,isContentGenerationComplete:G,children:e=>(0,t.jsx)(o.ChunkedChatMessageMarkdown,{sources:R,markdownContent:e},O.id)})}),B&&L&&(0,t.jsx)(u.ChatTextSelectionMenu,{selectedText:B.text,selectionRect:B.rect,onClose:F,chatbotId:L,scrollContainerRef:k})]})).with({type:"generate-flashcards"},e=>{let i="pending"===e.status;return(0,t.jsx)(g.FlashcardGenerationSection,{id:O.id,icon:n.Layers2,title:i?"Generating flashcards...":"Generated flashcards",resultsCount:e.data.cardCount||0,isLoading:i,flashcardData:e.data.flashcardData})}).with({type:"flashcards"},e=>(0,t.jsx)(d.default,{flashcards:e.flashcards},O.id)).with({type:"edit-note"},e=>(0,t.jsx)(l.ChatMessageEditMode,{isPartLoading:w,text:e.text},O.id)).with({type:"edit-quiz"},e=>(0,t.jsx)(c.ChatMessageQuizEditMode,{isPartLoading:w,data:e.data,messageId:P},O.id)).with({type:"form-decomposition"},e=>(0,t.jsx)(E.default,{part:e})).with({type:"citation-generation"},e=>(0,t.jsx)(T.default,{part:e})).with({type:"generate-image"},e=>(0,t.jsx)(A.GeneratedImagePart,{part:e})).otherwise(()=>null)}},858899:e=>{"use strict";e.s({useAttachmentUpload:()=>u});var t=e.i(45973),n=e.i(252390),i=e.i(814733),a=e.i(83755),s=e.i(490076),r=e.i(257140),o=e.i(373150),l=e.i(525094),c=e.i(681299);let u=function(e){let u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},[d,h]=(0,o.useState)(new Set),{mutateAsync:p}=i.api.aws.getSignedUploadUrl.useMutation(),{track:m}=(0,n.default)(),{uniqueSaveId:f}=(0,c.useChatUniqueId)(),{handleDocumentUpload:T}=(0,t.useDocumentAttachmentUpload)(),g=async(e,t)=>{try{h(new Set(e.map(e=>e.name)));let n=(await Promise.all(e.map(async e=>{try{let{signedUrl:n,url:i}=await p({fileName:e.name,fileType:e.type,type:"attachment",chatbotId:t}),a=await fetch(n,{method:"PUT",body:e,headers:{"Content-Type":e.type}});if(m("attachment_added",{type:e.type}),!a.ok)throw Error("Upload failed: ".concat(a.statusText));return{url:i,name:e.name,type:e.type}}catch(t){return console.error("Failed to upload ".concat(e.name,":"),t),null}}))).filter(e=>null!==e);if(n.length>0)return h(new Set),n.map(e=>{let n=e.name.split(".").slice(0,-1).join("."),i=e.name.split(".").pop();return{id:(0,r.nanoid)(),type:"input-attachment",data:{type:"image",url:(0,s.getAttachmentCdnUrl)(e.url,t),chatbotId:t,extension:i,name:n}}})}catch(e){var n;console.error(e),h(new Set),null==(n=u.onError)||n.call(u,e)}};return{handleFileChange:async t=>{if(!f)return;let n=["image/png","image/jpeg","image/webp","image/gif"];if(t.length>15)return void l.toast.error("You can only upload up to ".concat(15," files at once."));if(e.length+t.length>15)return void l.toast.error("You can only have ".concat(15," files in total. You currently have ").concat(e.length," files."));let i=[],s=[];for(let e of t){if(0===e.size){l.toast.error('File "'.concat(e.name,'" is empty'));continue}if(n.includes(e.type)){if(e.size>5242880){l.toast.error('Image "'.concat(e.name,'" exceeds 5MB limit'));continue}i.push(e)}else if((0,a.isSupportedDocumentType)(e)){if(e.size>0x3200000){l.toast.error('Document "'.concat(e.name,'" exceeds 50MB limit'));continue}s.push(e)}else l.toast.error('File "'.concat(e.name,'" is not an allowed file type. Please use supported formats.'))}if(s.length>0&&await T(s),i.length>0)return g(i,f)},isUploading:d.size>0}}},739804:e=>{"use strict";e.s({useEditorContent:()=>o,useThreadInputEditorTiptap:()=>l});var t=e.i(39888),n=e.i(647968),i=e.i(608294),a=e.i(373150);let s=(0,n.atom)(null),r=(0,n.atom)({editor:null,chatbotId:null,messageId:null}),o=()=>{let[e]=(0,i.useAtom)(r),{editor:n}=e,[o,l]=(0,i.useAtom)(s),c=(0,a.useMemo)(()=>{if(!n)return"";let{text:e}=(0,t.extractEditorContent)(n);return e},[n,o]);return{editorContent:o,setEditorContent:l,text:c,setTextValue:e=>{let t={type:"doc",content:e.split("\n").map(e=>({type:"paragraph",content:""!==e.trim()?[{type:"text",text:e}]:[]}))};null==n||n.commands.setContent(t),l(t)}}},l=()=>{let[e,t]=(0,i.useAtom)(r),{editor:n,chatbotId:a,messageId:s}=e;return{editor:n,messageId:s,chatbotId:a,setEditor:e=>{t(t=>({...t,editor:e}))},setChatbotId:e=>{t(t=>({...t,chatbotId:e}))},setMessageId:e=>{t(t=>({...t,messageId:e}))},cleanupEditor:()=>{null==n||n.commands.setContent(null)},setContent:e=>{null==n||n.commands.setContent(e)},removeMention:e=>(null==n||n.state.doc.descendants((t,i)=>"mention"!==t.type.name||t.attrs.id!==e||(null==n||n.commands.deleteRange({from:i,to:i+t.nodeSize}),!1)),null==n?void 0:n.getJSON())}}},657879:e=>{"use strict";e.s({useAppendMessage:()=>_});var t=e.i(209110),n=e.i(257140),i=e.i(525094),a=e.i(52333),s=e.i(885905),r=e.i(982152),o=e.i(969029),l=e.i(449097),c=e.i(852951),u=e.i(252390),d=e.i(814733),h=e.i(375199),p=e.i(486672),m=e.i(174527),f=e.i(865836),T=e.i(341664),g=e.i(295862),E=e.i(529133),A=e.i(380252),x=e.i(221297),I=e.i(658766);let _=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],{checkLimits:_}=(0,g.useCheckLimits)(),{updateChatbot:C}=(0,c.useWorkspaceActions)(),{user:v}=(0,s.useAuth)(),S=(0,h.isStaffEmail)(null==v?void 0:v.email)?l.allModels:l.models,D=(0,x.useChatV2Store)(e=>e.abortRef),y=(0,x.useChatV2Store)(e=>e.setIsLoading),N=(0,x.useChatV2Store)(e=>e.currentStreamIdRef),b=(0,x.useChatV2Store)(e=>e.messageIdRef),O=(0,x.useChatV2Store)(e=>e.mode),R=(0,x.useChatV2Store)(e=>e.isLoading),{getMembersFromAttachments:P}=(0,A.useV2GetMentionGroupMembers)(),{groupMembers:k}=(0,o.default)("chatbot"===O.type?O.chatbotId:null),{resetAttachments:M}=(0,r.useChatbotInput)(),{scrollToBottom:L}=(0,I.useScrollToBottom)(),{settings:w}=(0,l.useSettings)(),{track:G}=(0,u.default)(),j=(0,a.useConfirmationStore)(e=>e.openConfirmation),{mutateAsync:B}=d.api.chat.create.useMutation(),{handleStreamEvent:F}=(0,E.useHandleStream)(),{chatSources:U}=(0,m.useChatSources)(),H=d.api.useUtils(),{chatId:V,setChatId:Y}=(0,T.useChatId)(),{updateAllPendingPartsToSuccess:z}=(0,p.useUpdatePendingParts)(),{startStream:W,isStreaming:q,stopStream:K}=(0,f.useMessageStream)({chatId:V||"",onStreamEvent:F,onComplete:()=>{},tryReconnect:e}),Q=async e=>{let{input:a,attachments:s,editMessageId:r,modelName:o,maxLength:l,language:c,_chatSources:u}=e;if(R||q)return;if(0===a.length)return void i.toast.error("Input cannot be empty");if(!S.find(e=>e.name===o))return void i.toast.error("Please select a model");if(!w.maxLength)return void i.toast.error("Response length cannot be empty");if(_())return;M(),L();let d=new Set([...k.map(e=>e.id)]),h=/\[\[tool:(research):[^\]]+\]\]/.test(a),p=s.map(e=>"mention"===e.data.type?e.data.chatbotId:null).filter(e=>null!==e);h&&"chatbot"===O.type&&p.push(O.chatbotId);let m=P(p);y(!0);let f=V;if(!f){let e="chatbot"===O.type?{type:"main",chatbotId:O.chatbotId}:{type:"library"};f=(0,n.nanoid)(),await B({id:f,includedSources:[e]})}if(C(f,{updatedAt:new Date},"CHAT"),!f)return void i.toast.error("Failed to create chat");let T=u||U;(e=>{let{input:i,attachments:a,newChatId:s,maxLength:r,messageId:o,modelName:l,chatSources:c}=e;H.message.get.setInfiniteData({chatId:s,type:"individual",limit:t.MESSAGE_PAGINATION_LIMIT},e=>{if(!e)return e;if(e.pages.flatMap(e=>e.items).find(e=>e.id===o)){let t=e.pages.flatMap(e=>e.items),s=t.findIndex(e=>e.id===o),u=e.pages.map(e=>({...e,items:e.items.filter(e=>t.findIndex(t=>t.id===e.id)<=s)})).map(e=>({...e,items:e.items.map(e=>e.id===o?{...e,parts:[{id:(0,n.nanoid)(),type:"text",text:i}],attachments:a,metadata:{maxLength:r||250,modelName:l,chatSources:c}}:e)}));return{...e,pages:u}}return e}),V||Y(s)})({input:a,attachments:s,newChatId:f,messageId:r,maxLength:l,modelName:o,chatSources:T});try{var g;let{streamId:e}=await W({input:a,attachments:s,modelName:o,groupMemberIds:Array.from(d),maxLength:l,includeNotesInSearch:null!=(g=w.includeNotesInSearch)&&g,mode:O,language:c||w.language,chatSources:T,messageId:r,editMessageId:r,chatId:f,mentionIds:m});if(!e)throw Error("Failed to start stream");N.current=e,G("messageStreamStarted",{userPrompt:a,model:w.modelName,attachments:null==s?void 0:s.map(e=>e.data),mentionIds:m,chatId:f,language:w.language,maxLength:w.maxLength,mode:O,modelName:w.modelName,streamId:e})}catch(e){console.error("SSE streaming failed:",e),y(!1),N.current=null,i.toast.error("Failed to send message. Please try again.")}};return{append:(e,t,n,i,a,s)=>{j({title:"Edit previous message",description:"Responses after this message will be overwritten.",actionLabel:"Confirm",onAction:()=>{Q({input:e,attachments:t,editMessageId:n,modelName:i,maxLength:a,_chatSources:s})},cancelLabel:"Cancel",onCancel:()=>{}})},stopGeneration:()=>{D.current=!0,y(!1),K(),setTimeout(()=>{V&&b.current&&z(V,b.current)},100),N.current=null,G("messageGenerationStopped")}}}},959104:e=>{"use strict";e.s({useThreadAttachments:()=>i});var t=e.i(373150),n=e.i(858899);let i=(e,i)=>{let a=(0,t.useRef)(null),[s,r]=(0,t.useState)(!1),{handleFileChange:o,isUploading:l}=(0,n.useAttachmentUpload)(e),c=async t=>{let n=t.target.files;if(!n)return;let a=await o(Array.from(n));a&&i([...e,...a])};return(0,t.useEffect)(()=>{let e=()=>{s&&r(!1)};return window.addEventListener("focus",e),()=>window.removeEventListener("focus",e)},[s]),{fileInputRef:a,isFileInputOpen:s,setIsFileInputOpen:r,isUploading:l,handleFileChangeFn:c,openFileInput:()=>{var e;r(!0),null==(e=a.current)||e.click()}}}},492641:e=>{"use strict";e.s({ThreadTextLengthDropdown:()=>m});var t=e.i(290479),n=e.i(874133),i=e.i(381612),a=e.i(373150),s=e.i(972899),r=e.i(476440),o=e.i(885905),l=e.i(449097),c=e.i(252390),u=e.i(289702),d=e.i(704255),h=e.i(450807),p=e.i(448068);let m=(0,a.memo)(e=>{let{metadata:m,setMetadata:f}=e,{user:T,userPlanDetails:g}=(0,o.useAuth)(),{track:E}=(0,c.default)(),{showUpgrade:A}=(0,h.useUpgrade)(),[x,I]=(0,a.useState)(!1),_=(0,a.useMemo)(()=>{var e;return null!=(e=l.responseTypeOptions.find(e=>e.value===m.maxLength))?e:l.responseTypeOptions[0]},[m.maxLength]),C=(0,a.useCallback)(e=>{if(!T)return;let t=l.responseTypeOptions.find(t=>t.value===Number.parseInt(e,10));if(t){if(("Pro"===t.tier||"Premium"===t.tier)&&((null==g?void 0:g.planName)==="Free"||"Premium"===t.tier&&(null==g?void 0:g.planName)==="Pro")){A("maxLengthChange"),E("maxLengthChangeAttemptByFree",{userId:null==T?void 0:T.id}),E("Paywall Shown",{reason:"Max Length Change"}),I(!1);return}E("maxLengthChanged",{userId:null==T?void 0:T.id,maxLength:t.value}),f({...m,maxLength:t.value}),I(!1)}},[T,null==g?void 0:g.planName,A,E,m,f]);return(0,t.jsxs)(p.DropdownMenu,{open:x,onOpenChange:I,children:[(0,t.jsx)(r.PersistentTooltip,{content:"Response length",persistent:!1,asChild:!0,disabled:!1,children:(0,t.jsx)(p.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(d.Button,{type:"button",variant:"ghost",className:(0,u.cn)("group inline-flex items-center gap-2 px-5 py-2 rounded-4 text-sm font-medium transition-all duration-200 cursor-pointer","bg-secondary hover:bg-secondary-hoverSolid text-text-primary","focus-visible:ring-0 focus-visible:ring-offset-0","w-fit min-w-0 max-w-full"),size:"icon",disabled:!1,label:(null==_?void 0:_.label)||"Select length",trailingIcon:(0,t.jsx)(s.Icon,{as:i.ChevronDown,size:"sm"}),trailingIconSize:"sm",trailingIconClassName:"flex-shrink-0 transition-transform duration-200 group-aria-expanded:rotate-180"})})}),(0,t.jsx)(p.DropdownMenuContent,{align:"start",className:"w-[200px] p-2",onCloseAutoFocus:e=>e.preventDefault(),children:l.responseTypeOptions.map((e,i)=>(0,t.jsx)(p.DropdownMenuItem,{asChild:!0,children:(0,t.jsx)(d.Button,{variant:"ghost",size:"medium",className:"w-full justify-start h-auto py-2",onClick:t=>{t.preventDefault(),t.stopPropagation(),C(e.value.toString())},onKeyDown:t=>{("Enter"===t.key||" "===t.key)&&(t.preventDefault(),t.stopPropagation(),C(e.value.toString()))},trailingIcon:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[e.value===m.maxLength&&(0,t.jsx)(s.Icon,{as:n.Check,className:"h-7 w-7 text-blue"}),e.tier&&(null==g?void 0:g.planName)==="Free"&&(0,t.jsx)("span",{className:"text-xs text-blue bg-blue/10 px-3 py-1 rounded-2 font-medium",children:e.tier})]}),children:(0,t.jsx)("div",{className:"flex flex-col gap-1 w-full",children:(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsx)("div",{className:"flex items-center gap-3",children:(0,t.jsx)("span",{className:"font-medium",children:e.label})})})})})},"thread-text-length-".concat(i,"-").concat(e.label)))})]})})},771090:e=>{"use strict";e.s({default:()=>z});var t=e.i(290479),n=e.i(743305),i=e.i(592103),a=e.i(874133),s=e.i(381612),r=e.i(996481),o=e.i(59938),l=e.i(502753),c=e.i(453304),u=e.i(84324),d=e.i(243747),h=e.i(373150),p=e.i(525094),m=e.i(663018);e.i(567349);var f=e.i(111367),T=e.i(972899),g=e.i(476440),E=e.i(186776),A=e.i(627053),x=e.i(885905),I=e.i(527941),_=e.i(872967),C=e.i(950347),v=e.i(449097),S=e.i(252390),D=e.i(375199),y=e.i(289702),N=e.i(704255),b=e.i(450807),O=e.i(958962),R=e.i(448068),P=e.i(303652),k=e.i(463002),M=e.i(174527),L=e.i(656154),w=e.i(221297),G=e.i(657879),j=e.i(959104),B=e.i(739804),F=e.i(492641);let U=e=>e.includes("claude")||e.includes("anthropic")?O.AnthropicIcon:e.includes("gpt")||e.includes("o4")?O.OpenAIIcon:e.includes("gemini")?O.GoogleIcon:O.OpenAIIcon,H=e=>{let{icon:n,label:i,checked:a,onCheckedChange:s,disabled:r=!1}=e;return(0,t.jsxs)("div",{className:(0,y.cn)("flex items-center justify-between cursor-pointer hover:bg-secondary rounded-4 px-4 py-2",r?"opacity-50":""),children:[(0,t.jsxs)("div",{onClick:()=>{s(!a)},className:"flex items-center gap-4 w-full",children:[(0,t.jsx)(n,{className:"h-7 w-7 text-text-secondary"}),(0,t.jsx)("span",{className:"text-sm",children:i})]}),(0,t.jsx)(k.Switch,{checked:a,onCheckedChange:s,disabled:r})]})},V=e=>{let{metadata:i,setMetadata:r}=e,{user:o}=(0,x.useAuth)(),l=(0,D.isStaffEmail)(null==o?void 0:o.email)?v.allModels:v.models,{track:c}=(0,S.default)(),{showUpgrade:u}=(0,b.useUpgrade)(),{isFreePlan:d}=(0,C.default)(),p=(0,h.useMemo)(()=>l.find(e=>e.name===i.modelName),[l,i.modelName]),m=(0,h.useMemo)(()=>p?U(p.name):null,[p]),f=e=>{if(!o)return;let t=l.find(t=>t.name===e);if(t){if(d&&!(0,n.isDefaultModel)(t.name)){u("modelChange"),c("modelChangeAttemptByFree",{userId:null==o?void 0:o.id}),c("Paywall Shown",{reason:"Word Limit Exceeded"});return}c("chat_model_change",{userId:null==o?void 0:o.id,model:t.label}),r({...i,modelName:t.name})}};return(0,t.jsxs)(R.DropdownMenu,{children:[(0,t.jsx)(g.PersistentTooltip,{content:"Model",persistent:!1,asChild:!0,disabled:!1,children:(0,t.jsx)(R.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(N.Button,{type:"button",variant:"ghost",className:(0,y.cn)("group inline-flex items-center gap-2 px-5 py-2 rounded-4 text-sm font-medium transition-all duration-200 cursor-pointer","bg-secondary hover:bg-secondary-hoverSolid text-text-primary","focus-visible:ring-0 focus-visible:ring-offset-0","w-fit min-w-0 max-w-full"),size:"icon",disabled:!1,leadingIcon:m&&(0,t.jsx)(m,{size:14}),trailingIcon:(0,t.jsx)(T.Icon,{as:s.ChevronDown,className:"h-3.5 w-3.5 flex-shrink-0 transition-transform duration-200 group-aria-expanded:rotate-180"}),children:(0,t.jsx)("span",{className:"text-sm font-medium truncate min-w-0",children:(null==p?void 0:p.label)||"Select model"})})})}),(0,t.jsx)(R.DropdownMenuContent,{align:"start",className:"w-[200px] p-2",onCloseAutoFocus:e=>e.preventDefault(),children:(()=>{let e=l.filter(e=>"Basic"===e.tier),n=l.filter(e=>"Pro"===e.tier);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"px-2 py-2 text-xs font-medium text-text-secondary",children:"Basic"}),e.map((e,n)=>{let s=U(e.name);return(0,t.jsx)(R.DropdownMenuItem,{onSelect:()=>f(e.name),asChild:!0,children:(0,t.jsx)(N.Button,{variant:"ghost",size:"medium",className:"w-full justify-start h-auto py-2",leadingIcon:(0,t.jsx)(s,{size:14}),trailingIcon:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:["gpt-5"===e.name&&(0,t.jsx)("span",{className:"bg-blue/10 text-blue px-3 py-1 rounded-2 font-medium text-xs",children:"Beta"}),e.name===i.modelName&&(0,t.jsx)(T.Icon,{as:a.Check,className:"h-7 w-7 text-blue"})]}),label:e.label})},"normal-".concat(n,"-").concat(e.label))}),e.length>0&&n.length>0&&(0,t.jsx)("div",{className:"my-6"}),n.length>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"px-4 py-2 text-xs font-medium text-text-secondary",children:"Pro"}),n.map((e,n)=>{let s=U(e.name);return(0,t.jsx)(R.DropdownMenuItem,{onSelect:()=>f(e.name),asChild:!0,children:(0,t.jsx)(N.Button,{variant:"ghost",size:"medium",className:"w-full justify-start h-auto py-2",leadingIcon:(0,t.jsx)(s,{size:14}),trailingIcon:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:["gpt-5"===e.name&&(0,t.jsx)("span",{className:"bg-blue/10 text-blue px-3 py-1 rounded-2 font-medium text-xs",children:"Beta"}),e.name===i.modelName&&(0,t.jsx)(T.Icon,{as:a.Check,className:"h-7 w-7 text-blue"})]}),label:e.label})},"reasoning-".concat(n,"-").concat(e.label))})]})]})})()})]})},Y=e=>{var n,i,s,u;let{metadata:p,setMetadata:m}=e,{settings:_,updateSettings:C}=(0,v.useSettings)(),[D,b]=(0,h.useState)(!1),[O,k]=(0,h.useState)(!1),{user:L}=(0,x.useAuth)(),{track:G}=(0,S.default)(),{updateUser:j}=(0,I.default)(),B=(0,h.useMemo)(()=>{var e;return(null==(e=A.languages.find(e=>e.name===_.language))?void 0:e.name)||"English (US)"},[_.language]),F=(0,w.useChatV2Store)(e=>e.mode),{chatSources:U}=(0,M.useChatSources)(),V="chatbot"!==F.type,Y=null!=(n=p.chatSources)?n:U,z=e=>{let t=p.chatSources||{workspace:!1,internet:!1,modelKnowledge:!0},n={...t,[e]:!t[e]};m({...p,chatSources:n})};return(0,t.jsxs)(P.Popover,{open:D,onOpenChange:b,children:[(0,t.jsx)(g.PersistentTooltip,{content:"Settings",persistent:!1,asChild:!0,disabled:!1,children:(0,t.jsx)(P.PopoverTrigger,{asChild:!0,children:(0,t.jsx)(N.Button,{variant:"ghost",className:"hover:bg-popover-hover",size:"icon",children:(0,t.jsx)(d.Settings2,{className:"h-[14px] w-[14px] rotate-90 text-text-primary"})})})}),(0,t.jsxs)(P.PopoverContent,{align:"start",className:"p-2 flex flex-col w-[256px]",onCloseAutoFocus:e=>e.preventDefault(),children:[V&&Y&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(H,{icon:o.FolderSearch,label:"Workspace",checked:null!=(i=Y.workspace)&&i,onCheckedChange:()=>z("workspace")}),(0,t.jsx)(H,{icon:l.Globe,label:"Internet",checked:null!=(s=Y.internet)&&s,onCheckedChange:()=>z("internet")}),(0,t.jsx)(H,{icon:c.Lightbulb,label:"Model knowledge",checked:null!=(u=Y.modelKnowledge)&&u,onCheckedChange:()=>z("modelKnowledge")}),(0,t.jsx)(E.Separator,{orientation:"horizontal",className:"my-2"})]}),(0,t.jsxs)(R.DropdownMenu,{children:[(0,t.jsx)(R.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(N.Button,{variant:"ghost",className:"w-full hover:bg-secondary justify-between px-4 py-2 h-auto rounded-4",leadingIcon:(0,t.jsx)("span",{className:"text-sm text-text-secondary",children:"Language"}),trailingIcon:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{children:B}),(0,t.jsx)(T.Icon,{as:r.ChevronRight,className:"h-7 w-7"})]})})}),(0,t.jsx)(R.DropdownMenuContent,{side:"right",sideOffset:0,className:"w-[200px] p-2",children:(0,t.jsx)("div",{className:"p-1",children:(0,t.jsxs)(f.Command,{defaultValue:B,children:[(0,t.jsx)(f.CommandInput,{placeholder:"Search languages...",autoFocus:!0}),(0,t.jsxs)(f.CommandList,{className:"scrollbar-overlay",children:[(0,t.jsx)(f.CommandEmpty,{children:"No language found."}),(0,t.jsx)(f.CommandGroup,{className:"p-0",children:A.languages.map(e=>{let{name:n}=e;return(0,t.jsxs)(f.CommandItem,{value:n,onSelect:()=>{(e=>{G("languageInputChanged",{language:e}),C({..._,language:e}),k(!1)})(n)},children:[n,(0,t.jsx)(T.Icon,{className:(0,y.cn)("ml-auto h-7 w-7",n===B?"opacity-100":"opacity-0"),as:a.Check})]},n)})})]})]})})})]})]})]})},z=e=>{let{message:n,metadata:a,setMetadata:s,attachments:r,setAttachments:o,isPasteUploading:l}=e,c=(0,w.useChatV2Store)(e=>e.isLoading),{isDowntime:d}=(0,_.default)(),{fileInputRef:h,setIsFileInputOpen:f,handleFileChangeFn:T,isUploading:E,openFileInput:A}=(0,j.useThreadAttachments)(r,o),{append:x,stopGeneration:I}=(0,G.useAppendMessage)(!1),{text:C}=(0,B.useEditorContent)(),{editor:v}=(0,B.useThreadInputEditorTiptap)();return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex flex-row items-center justify-between w-full gap-4",children:[(0,t.jsxs)("div",{className:"flex flex-row gap-2 items-center min-w-0 flex-1",children:[(0,t.jsx)(L.MentionDropdown,{editor:v}),(0,t.jsx)(V,{metadata:a,setMetadata:s}),(0,t.jsx)(F.ThreadTextLengthDropdown,{metadata:a,setMetadata:s}),(0,t.jsx)(Y,{metadata:a,setMetadata:s})]}),(0,t.jsxs)("div",{className:"flex flex-row gap-2 flex-shrink-0",children:[(0,t.jsx)(g.PersistentTooltip,{content:"Add attachments",persistent:!1,asChild:!0,children:(0,t.jsx)(N.Button,{type:"button",variant:"ghost",className:"hover:bg-popover-hover",size:"icon",disabled:E||l||d,onClick:e=>{e.stopPropagation(),A()},children:E||l?(0,t.jsx)(m.LoadingSpinner,{variant:"small",color:"gray"}):(0,t.jsx)(u.Plus,{className:"h-[14px] w-[14px] text-text-primary"})})}),(0,t.jsx)("button",{disabled:!c&&(d||!C.length),onClick:()=>c?void I():a.modelName&&a.maxLength?void x(C,r,n.id,a.modelName,a.maxLength,a.chatSources):void p.toast.error("Please select the missing settings"),className:(0,y.cn)("disabled:opacity-50 disabled:cursor-not-allowed","flex justify-center items-center rounded-full p-3 ease-in transition-all duration-150 cursor-pointer bg-blue text-white",C.length||c?"":"bg-secondary dark:bg-secondary text-text-secondary"),children:c?(0,t.jsx)(O.StopIcon,{className:"h-7 w-7 p-1"}):(0,t.jsx)(i.ArrowUp,{className:"h-7 w-7"})})]})]}),(0,t.jsx)("input",{type:"file",ref:h,onChange:e=>{T(e),f(!1)},onClick:()=>f(!0),className:"hidden",multiple:!0,accept:".png,.jpg,.jpeg,.webp,.gif,.pdf"})]})}},64149:e=>{"use strict";e.s({default:()=>N});var t=e.i(290479),n=e.i(672614),i=e.i(309643);e.i(788606);var a=e.i(906250),s=e.i(277037),r=e.i(606982);e.i(987617);var o=e.i(56077),l=e.i(737137);e.i(131841);var c=e.i(968617),u=e.i(184782),d=e.i(38017),h=e.i(373150),p=e.i(525094),m=e.i(998145),f=e.i(972899),T=e.i(702461),g=e.i(853985),E=e.i(45973),A=e.i(653504),x=e.i(39888),I=e.i(83755),_=e.i(721749),C=e.i(221297),v=e.i(483699),S=e.i(657879),D=e.i(739804);let y=e=>{let{node:n}=e,{label:i,type:a,toolType:s}=n.attrs,r=(null==i?void 0:i.length)>32?"".concat(i.substring(0,32),"..."):i;return(0,t.jsxs)(u.NodeViewWrapper,{as:"span",className:"TOOL"===a?"mention h-[22px] leading-[22px] px-2 rounded-[6px] bg-blue/10 text-blue inline-flex items-center gap-2 text-sm font-medium align-top":"mention h-[22px] leading-[22px] px-2 rounded-[6px] bg-secondary text-text-secondary inline-flex items-center gap-2 text-sm font-medium align-top",children:["TOOL"===a?(0,t.jsx)(f.Icon,{as:(0,T.getToolIcon)(s),className:"flex-shrink-0 w-[14px] h-[14px] block leading-none m-0 p-0",style:{lineHeight:"1"}}):(0,t.jsx)(f.Icon,{as:(0,m.default)({type:a}),className:"flex-shrink-0 w-[14px] h-[14px] block leading-none m-0 p-0",style:{lineHeight:"1"}}),(0,t.jsx)("span",{children:r})]})},N=e=>{let{onBlur:m,message:f,metadata:T,attachments:N,onPastedFiles:b}=e,[O,R]=(0,h.useState)(!1),P=(0,C.useChatV2Store)(e=>e.isLoading),{setEditorContent:k}=(0,D.useEditorContent)(),{setEditor:M}=(0,D.useThreadInputEditorTiptap)(),L=(0,h.useRef)(null),w=(0,C.useChatV2Store)(e=>e.mode),G=(0,h.useMemo)(()=>{let e,t,n=f.parts.filter(e=>"text"===e.type).map(e=>e.text).join("\n"),i=e=>{let t,n=/(\[([^\]]+)\]\((https?:\/\/[^)]+)\))|(https?:\/\/[^\s\]]+)/g,i=[],a=0;for(t=n.exec(e);null!==t;){if(t.index>a){let n=e.slice(a,t.index);n&&i.push({type:"text",text:n})}if(t[1]){let e=t[2],n=t[3];i.push({type:"text",text:e,marks:[{type:"link",attrs:{href:n}}]})}else t[4]&&i.push({type:"text",text:t[4],marks:[{type:"link",attrs:{href:t[4]}}]});a=t.index+t[0].length,t=n.exec(e)}if(a<e.length){let t=e.slice(a);t&&i.push({type:"text",text:t})}return i.length>0?i:[{type:"text",text:e}]},a=[],s=0,r=/\[\[mention:([^:]+):([^:]+):([^\]]+)\]\]/g,o=/\[\[tool:([^:]+):([^\]]+)\]\]/g,l=[];for(e=r.exec(n);null!==e;)l.push({match:e,type:"mention"}),e=r.exec(n);for(t=o.exec(n);null!==t;)l.push({match:t,type:"tool"}),t=o.exec(n);for(let{match:e,type:t}of(l.sort((e,t)=>e.match.index-t.match.index),l)){if(e.index>s){let t=i(n.slice(s,e.index));a.push(...t)}if("mention"===t){let[,t,n,i]=e;if(!t||!n){console.warn("Invalid mention format - missing id or name:",e[0]);continue}let s=d.CHATBOT_TYPE_VALUES.includes(i)?i:"DOCUMENT",r=n.trim();if(0===r.length){console.warn("Invalid mention format - empty name:",e[0]);continue}a.push({type:"mention",attrs:{id:t.trim(),label:r,type:s}})}else if("tool"===t){let[,t,n]=e;if(!t||!n){console.warn("Invalid tool format - missing type or name:",e[0]);continue}a.push({type:"mention",attrs:{id:t.trim(),label:n.trim(),type:"TOOL",toolType:t.trim()}})}s=e.index+e[0].length}if(s<n.length){let e=i(n.slice(s));a.push(...e)}return{type:"doc",content:[{type:"paragraph",content:a.length>0?a:n?i(n):[]}]}},[f]),j=(0,h.useMemo)(()=>s.default.extend({addAttributes:()=>({id:{default:null,parseHTML:e=>e.getAttribute("data-id"),renderHTML:e=>({"data-id":e.id})},label:{default:null,parseHTML:e=>e.getAttribute("data-label"),renderHTML:e=>({"data-label":e.label})},type:{default:null,parseHTML:e=>e.getAttribute("data-mention-type")||e.getAttribute("data-type"),renderHTML:e=>({"data-type":e.type})},toolType:{default:null,parseHTML:e=>e.getAttribute("data-tool-type"),renderHTML:e=>({"data-tool-type":e.toolType})}}),renderText(e){let{node:t}=e,{id:n,label:i,type:a}=t.attrs;return"TOOL"===a?"[[tool:".concat(n,":").concat(i,"]]"):"[[mention:".concat(n,":").concat(i,":").concat(a,"]]")},addProseMirrorPlugins(){var e;return[...(null==(e=this.parent)?void 0:e.call(this))||[],new c.Plugin({key:new c.PluginKey("mentionPasteHandler"),props:{handlePaste:(e,t)=>{let n=t.clipboardData;if(!n)return!1;let i=n.getData("text/plain");if(!i)return!1;let a=[...i.matchAll(/\[\[mention:([^:]+):([\s\S]+?):([^\]]+)\]\]/g)],s=[...i.matchAll(/\[\[tool:([^:]+):([^\]]+)\]\]/g)];if(0===a.length&&0===s.length)return!1;let{state:r}=e,{tr:o}=r,{selection:l}=r;o=o.delete(l.from,l.to);let c=l.from,u=0;for(let{match:e,type:t}of[...a.map(e=>({match:e,type:"mention"})),...s.map(e=>({match:e,type:"tool"}))].sort((e,t)=>e.match.index-t.match.index)){if(e.index>u){let t=i.slice(u,e.index);t&&(o=o.insertText(t,c),c+=t.length)}if("mention"===t){let[,t,n,i]=e,a=this.type.create({id:t.trim(),label:n.trim(),type:i.trim()});o=o.insert(c,a),c+=1}else if("tool"===t){let[,t,n]=e,i=this.type.create({id:t.trim(),label:n.trim(),type:"TOOL",toolType:t.trim()});o=o.insert(c,i),c+=1}u=e.index+e[0].length}if(u<i.length){let e=i.slice(u);e&&(o=o.insertText(e,c))}return e.dispatch(o),!0}}})]},addInputRules(){return[{find:/\[\[mention:([^:]+):([\s\S]+?):([^\]]+)\]\]$/,handler:e=>{let{state:t,range:n,match:i}=e,[,a,s,r]=i,{tr:o}=t,l=n.from,c=n.to;o.replaceWith(l,c,this.type.create({id:a.trim(),label:s.trim(),type:r.trim()}))}},{find:/\[\[tool:([^:]+):([^\]]+)\]\]$/,handler:e=>{let{state:t,range:n,match:i}=e,[,a,s]=i,{tr:r}=t,o=n.from,l=n.to;r.replaceWith(o,l,this.type.create({id:a.trim(),label:s.trim(),type:"TOOL",toolType:a.trim()}))}}]}}).extend({addNodeView:()=>(0,u.ReactNodeViewRenderer)(y)}).configure({suggestion:(0,_.suggestion)()}),[]),B=(0,h.useMemo)(()=>[n.default,r.default,l.default,j,a.default,i.default,A.CustomLink.configure({HTMLAttributes:{class:"px-2 rounded-[6px] bg-blue/10 !text-blue inline text-sm font-medium break-all max-w-full"},openOnClick:!1,autolink:!0}),o.default.configure({placeholder:(0,v.getPlaceholderText)(w),emptyEditorClass:"is-editor-empty"})],[j,w]),{append:F}=(0,S.useAppendMessage)(!1),{handleDocumentUpload:U}=(0,E.useDocumentAttachmentUpload)(),H=async e=>{let t=e.filter(e=>e.type.startsWith("image/")),n=e.filter(I.isSupportedDocumentType),i=[];t.length>0&&b&&i.push(b(t)),n.length>0&&i.push(U(n)),i.length>0&&await Promise.all(i)},{createPasteHandler:V}=(0,g.usePasteFileHandlerGeneric)(H);(0,h.useEffect)(()=>{let e=new MutationObserver(e=>{for(let t of e)"childList"===t.type&&R(!!document.querySelector(".tippy-box"))});return e.observe(document.body,{childList:!0,subtree:!0}),()=>e.disconnect()},[]);let Y=(0,u.useEditor)({extensions:B,content:G,editable:!P,immediatelyRender:!1,shouldRerenderOnTransaction:!1,onUpdate:e=>{let{editor:t}=e;k(t.getJSON())},onCreate:e=>{let{editor:t}=e;M(t)},editorProps:{handleKeyDown:(e,t)=>{if("Enter"===t.key&&!t.shiftKey){if(O||!Y)return!1;if(!T.modelName||!T.maxLength)return void p.toast.error("Please select the missing settings");let{text:e,mentionAttachments:t}=(0,x.extractEditorContent)(Y),{latestAttachments:n}=(0,x.ensureLatestAttachmentsExists)(N,t);return F(e,n,f.id,T.modelName,T.maxLength,T.chatSources),!0}return!1},handlePaste:(e,t)=>(b&&V()(t),!1)},onBlur:()=>{null==m||m()}});return((0,h.useEffect)(()=>{Y&&!P&&Y.commands.focus("end")},[Y,P]),(0,h.useEffect)(()=>{Y&&Y.setEditable(!P)},[Y,P]),(0,v.useChatPlaceholder)(w,Y),Y)?(0,t.jsx)(u.EditorContent,{ref:L,className:"focus-within:outline-none overflow-auto leading-[22px] [&_.ProseMirror]:leading-[22px]",editor:Y},f.id):null}},783574:e=>{"use strict";e.s({default:()=>A});var t=e.i(290479),n=e.i(34818),i=e.i(772476),a=e.i(373150),s=e.i(998145),r=e.i(972899),o=e.i(885905),l=e.i(872967),c=e.i(969029),u=e.i(289702),d=e.i(530739),h=e.i(639480),p=e.i(895138),m=e.i(221297),f=e.i(858899),T=e.i(739804),g=e.i(771090),E=e.i(64149);let A=e=>{let A=(0,i.useAnimationControls)(),[x,I]=(0,a.useState)({modelName:e.message.metadata.modelName,maxLength:e.message.metadata.maxLength,chatSources:e.message.metadata.chatSources}),[_,C]=(0,a.useState)(e.message.attachments),[v,S]=(0,a.useState)(!1),{isDowntime:D}=(0,l.default)(),{userPlanDetails:y}=(0,o.useAuth)(),{handleFileChange:N}=(0,f.useAttachmentUpload)(_),b=(0,a.useCallback)(async e=>{try{S(!0);let t=await N(e);t&&C([..._,...t])}finally{S(!1)}},[_,N,C]),O=(0,m.useChatV2Store)(e=>e.mode),{groupMembers:R}=(0,c.default)("chatbot"===O.type&&"GROUP"===O.chatbotType?O.chatbotId:null),P="full-chat-library"===O.type,k=P?_:_.slice(1),M=P?_.length>0:_.length>1,{editor:L}=(0,T.useThreadInputEditorTiptap)();return(0,t.jsxs)("div",{className:(0,u.cn)("relative mb-6 flex flex-col text-sm  bg-none bg-transparent","chatbot"!==O.type&&"max-w-3xl mx-auto w-full"),children:[D&&(0,t.jsx)(h.default,{}),!D&&(null==y?void 0:y.planName.toLowerCase())==="free"&&(0,t.jsx)(p.default,{}),(0,t.jsxs)(n.motion.div,{animate:A,className:(0,u.cn)("flex z-0 flex-col justify-between gap-2 rounded-8 shadow-feint p-[1px] bg-borderSecondary overflow-hidden"),children:[("chatbot"===O.type&&O.chatbotName||"full-chat-library"!==O.type)&&(0,t.jsxs)(n.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},transition:{duration:.1,ease:"easeOut"},className:"flex flex-row items-center gap-4 px-6 pt-4 pb-2 text-text-secondary flex-nowrap min-w-0",children:[(0,t.jsx)(r.Icon,{size:"md",className:"flex-shrink-0",as:(0,s.default)({type:"chatbot"===O.type?O.chatbotType:"CHAT"})}),(0,t.jsx)("div",{className:"text-sm font-medium truncate min-w-0",children:"chatbot"===O.type?O.chatbotName||"Untitled":"Chat"}),"chatbot"===O.type&&"GROUP"===O.chatbotType&&(0,t.jsxs)("div",{className:"text-xs text-feint-foreground flex-shrink-0",children:[R.length," ",1===R.length?"file":"files"]})]}),(0,t.jsxs)("div",{onClick:e=>{let t=e.target;e.currentTarget.contains(t)&&e.isTrusted&&(t.closest("button, a, input, select, textarea")||null==L||L.commands.focus())},className:"relative flex flex-col justify-between  rounded-7 p-6 bg-popover max-h-[24rem] min-h-[76px]  gap-7",children:[M&&(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)(d.default,{attachments:k,disableAnimations:!0,onDelete:e=>{C(_.filter(t=>t.id!==e))}})}),(0,t.jsx)("div",{className:"flex-1 min-h-0 overflow-y-auto",children:(0,t.jsx)(E.default,{message:e.message,metadata:x,attachments:_,onPastedFiles:b})}),(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)(g.default,{message:e.message,metadata:x,setMetadata:I,attachments:_,setAttachments:C,isPasteUploading:v})})]})]})]})}},390630:e=>{"use strict";e.s({default:()=>I});var t=e.i(290479),n=e.i(650429),i=e.i(870007),a=e.i(874133),s=e.i(486137),r=e.i(765357),o=e.i(373150),l=e.i(289702),c=e.i(704255),u=e.i(302571),d=e.i(972899),h=e.i(476440),p=e.i(530739),m=e.i(337188),f=e.i(581732),T=e.i(179722),g=e.i(984630),E=e.i(221297),A=e.i(108416),x=e.i(783574);let I=e=>{let{message:I,userParts:_,userAttachments:C,isLatest:v=!1,isLastAIMessage:S=!1,scrollContainerRef:D}=e,[y,N]=(0,o.useState)(!1),[b,O]=(0,o.useState)(!1),R=(0,o.useRef)(null),P=(0,E.useChatV2Store)(e=>e.isLoading);(0,o.useEffect)(()=>{let e=e=>{if(R.current&&y){let t=R.current.contains(e.target),n=!!(document.querySelector('[data-radix-menu-content][data-state="open"]')||document.querySelector('[data-state="open"][role="menu"]')||document.querySelector("[data-radix-dropdown-menu-content]")||document.querySelector("[data-radix-popover-content]")||document.querySelector("[data-radix-select-content]")||document.querySelector('[role="switch"]')),i=document.querySelector('[data-state="visible"][class="tippy-box"]');t||n||i||N(!1)}};return document.addEventListener("mousedown",e,{capture:!0}),()=>{document.removeEventListener("mousedown",e,{capture:!0})}},[y]),(0,o.useEffect)(()=>{let e=e=>{"Escape"===e.key&&y&&N(!1)};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[y]);let k=(0,o.useRef)(null),M=(0,o.useRef)(null);(0,o.useEffect)(()=>{P||N(!1)},[P]);let[L,w]=(0,o.useState)(!1),{parts:G,role:j,attachments:B,sources:F}=I,U=G.find(e=>"error"===e.type);if(U)return(0,t.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,t.jsx)("div",{className:"flex gap-3 items-center",children:(0,t.jsxs)("div",{className:"px-4 py-2 rounded-6 text-destructive-solid bg-control-destructive flex gap-3 items-center select-none",children:[(0,t.jsx)(d.Icon,{as:i.AlertCircle}),(0,t.jsx)("p",{className:"text-sm tracking-[-0.16px] select-none",children:U.text})]})}),(0,t.jsx)(g.ChatRetry,{userParts:_,userAttachments:C})]});if("user"===j)return null==G||G.reduce((e,t)=>{if((null==t?void 0:t.type)==="text"){var n;return e+(null==t||null==(n=t.text)?void 0:n.length)}return e},0),y?(0,t.jsx)("div",{ref:R,children:(0,t.jsx)(x.default,{message:I,userParts:_,userAttachments:C})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.default,{id:"4e9c1a6f25968ad",children:"@container chat-messages (width<=679px){.user-message-container.jsx-4e9c1a6f25968ad{width:100%!important;max-width:100%!important;font-size:.875rem!important}}.user-message-content.jsx-4e9c1a6f25968ad{container-type:inline-size}@container chat-messages (height<=109px){.user-message-content.jsx-4e9c1a6f25968ad{padding:1rem 1.75rem!important}}"}),(0,t.jsxs)("div",{ref:k,className:"jsx-4e9c1a6f25968ad flex flex-col items-end w-full group",children:[(0,t.jsxs)("div",{ref:M,onClick:()=>N(!0),className:"jsx-4e9c1a6f25968ad user-message-container user-message-content flex flex-col gap-4 bg-popover-hover-solid rounded-6 border border-transparent cursor-pointer relative hover:border-border-primary px-9 py-6 max-w-2/3 w-2/3",children:[(0,t.jsx)(p.default,{attachments:B,disableAnimations:!0,isEditor:!0}),(0,t.jsx)(T.ChatMessageParts,{parts:G})]}),(0,t.jsxs)("div",{className:"jsx-4e9c1a6f25968ad w-full flex items-center justify-end gap-2 h-9 pt-4 text-text-secondary sm:opacity-0 sm:group-hover:opacity-100 transition-opacity duration-100 sm:pointer-events-none sm:group-hover:pointer-events-auto",children:[(0,t.jsx)(h.ReusableTooltip,{content:"Copy",asChild:!0,children:(0,t.jsx)(c.Button,{variant:"ghost",size:"xxs",onClick:()=>{navigator.clipboard.writeText(I.parts.filter(e=>"text"===e.type).map(e=>e.text).join(" ")),O(!0),setTimeout(()=>O(!1),2e3)},children:(0,t.jsx)(d.Icon,{as:b?a.Check:s.Copy})})}),(0,t.jsx)(h.ReusableTooltip,{content:"Edit",asChild:!0,children:(0,t.jsx)(c.Button,{variant:"ghost",size:"xxs",disabled:P,onClick:()=>N(!0),children:(0,t.jsx)(d.Icon,{as:r.PenLine})})})]})]})]});if("assistant"===j&&v&&P&&!G.length)return(0,t.jsx)(f.ChatV2MessageLoader,{});let H=G.length&&G.every(e=>"pending"!==e.status),V=F.length&&H?new Set(F.map(e=>"external-source"===e.type?"external-google-drive"===e.data.type?e.data.fileId:e.data.url:"external-database"===e.type?e.data.query:e.chatbotId).filter(e=>void 0!==e)):new Set;return(0,t.jsxs)("div",{className:"relative py-2 flex flex-col gap-8 w-full pb-10 group",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-8",children:[G.map(e=>(0,t.jsx)(A.ChatV2AIMessagePart,{part:e,sources:F,messageId:I.id,scrollContainerRef:D},e.id)),P&&v&&(0===G.length||G.every(e=>"pending"!==e.status))&&(0,t.jsx)(f.ChatV2MessageLoader,{})]}),(0,t.jsx)("div",{className:"flex flex-col gap-4 overflow-hidden min-h-[22px]",ref:k,children:!!H&&!P&&(0,t.jsxs)("div",{className:(0,l.cn)("flex flex-col gap-4",L||S?"opacity-100 pointer-events-auto":"sm:opacity-0 sm:group-hover:opacity-100 transition-opacity duration-100 sm:pointer-events-none sm:group-hover:pointer-events-auto"),children:[(0,t.jsxs)("div",{className:(0,l.cn)("w-full flex flex-row justify-end place-items-start",V.size&&"justify-between"),children:[V.size?(0,t.jsx)(c.Button,{variant:"ghost",className:"text-text-secondary leading-[14px] h-[22px] font-medium hover:text-text-secondary/70",size:"xxs",onClick:()=>w(!L),children:"".concat(V.size," source").concat(V.size>1?"s":"")}):null,(0,t.jsx)(m.default,{active:!0,id:I.id,parts:G,userParts:_,sources:F,userAttachments:C,modelName:I.metadata.modelName})]}),(0,t.jsx)(u.default,{showAll:L,sources:F})]})})]})}},359894:e=>{"use strict";e.s({ChatSelector:()=>p});var t=e.i(290479),n=e.i(373150),i=e.i(852951),a=e.i(227261),s=e.i(814733),r=e.i(739087),o=e.i(289702),l=e.i(185296),c=e.i(932402),u=e.i(365918),d=e.i(341664),h=e.i(221297);let p=()=>{let e=(0,h.useChatV2Store)(e=>e.mode),{chatId:p,setChatId:m}=(0,d.useChatId)(),f=(0,i.useWorkspaceChats)(e),{data:T,isLoading:g}=s.api.tours.byUser.useQuery(),{startTour:E,activeTour:A,tourQueue:x}=(0,l.useTour)(),I=(0,n.useRef)(!1),{onClick:_}=(0,c.useTourTarget)("previous-chats");return(0,n.useEffect)(()=>{!(!g&&Array.isArray(T))||x.some(e=>e===r.TourType.CHAT_FIRST_VISIT)||A===r.TourType.CHAT_FIRST_VISIT||(null==T?void 0:T.some(e=>e.type===r.TourType.CHAT_FIRST_VISIT&&e.completed))||I.current||(I.current=!0,setTimeout(()=>{E(r.TourType.CHAT_FIRST_VISIT)},3500))},[g,T,E,A,x]),(0,n.useEffect)(()=>{if(p)return;let t="chatbot"===e.type||(0,a.isLibraryView)(e);f.length>0&&t&&m([...f].sort((e,t)=>(t.lastViewedAt?new Date(t.lastViewedAt).getTime():0)-(e.lastViewedAt?new Date(e.lastViewedAt).getTime():0))[0].id)},[]),(0,t.jsxs)(u.Select,{value:null!=p?p:void 0,onValueChange:e=>{m(e)},onOpenChange:e=>{e&&_()},children:[(0,t.jsx)(u.SelectTrigger,{className:"w-fit max-w-[208px] bg-transparent",indicatorClassName:"text-text-primary ml-1",children:(0,t.jsx)("div",{className:"flex-1 truncate",id:"previous-chats",children:(0,t.jsx)(u.SelectValue,{placeholder:f.length?"Select a previous chat":"Previous chats"})})}),(0,t.jsx)(u.SelectContent,{className:"w-full max-w-[248px]",children:f.length?f.map(e=>(0,t.jsx)(u.SelectItem,{hideIcon:!0,value:e.id,className:(0,o.cn)("w-full",e.id===p&&"bg-popover-hover"),children:(0,t.jsx)("p",{className:"w-full max-w-[230px] truncate",children:e.name})},e.id)):(0,t.jsx)(u.SelectItem,{value:"no-chats",disabled:!0,onPointerDown:e=>{e.preventDefault(),e.stopPropagation()},onClick:e=>{e.preventDefault(),e.stopPropagation()},children:"No previous chats"})})]})}},456212:e=>{"use strict";e.s({ChatV2FallbackId:()=>s});var t=e.i(397711),n=e.i(373150),i=e.i(341664),a=e.i(221297);let s=()=>{let e=(0,a.useChatV2Store)(e=>e.mode),{chatId:s,setChatId:r}=(0,i.useChatId)(),o=(0,t.usePathname)(),l=(0,n.useMemo)(()=>{if(!o)return null;let e=o.match(/\/b\/([^/?]+)/);return(null==e?void 0:e[1])||null},[o]);return(0,n.useEffect)(()=>{!s&&l&&r(l)},[l,e.type]),null}},324918:e=>{"use strict";e.s({DownloadIcon:()=>t.default});var t=e.i(677959)},375751:e=>{"use strict";e.s({MessageSquareIcon:()=>t.default});var t=e.i(328379)},111031:e=>{"use strict";e.s({useChatV2Messages:()=>o});var t=e.i(597875),n=e.i(814733),i=e.i(375768),a=e.i(209110),s=e.i(373150),r=e.i(341664);let o=e=>{var o;let{isTeam:l}=e,{chatId:c}=(0,r.useChatId)(),{shareData:u}=(0,t.useIsSharedChat)(),d=null!=(o=null==u?void 0:u.chatId)?o:c,{data:h,isLoading:p,fetchNextPage:m,hasNextPage:f,isFetchingNextPage:T}=n.api.message.get.useInfiniteQuery(d?{chatId:d,type:l?"team":"individual",limit:a.MESSAGE_PAGINATION_LIMIT,sharedCreatedAt:(null==u?void 0:u.createdAt)?new Date(u.createdAt):void 0}:i.skipToken,{getNextPageParam:e=>e.nextCursor,refetchOnWindowFocus:!1});return{messages:(0,s.useMemo)(()=>h?[...h.pages].reverse().flatMap(e=>e.items).map(e=>{let{role:t,createdAt:n,...i}=e,s=i.metadata;return a.messageSchema.parse({role:t.toLowerCase(),createdAt:new Date(n),...i,metadata:{...s,maxLength:s.maxLength||void 0,modelName:s.modelName||void 0}})}):[],[h]),isLoading:p,fetchNextPage:m,isFetchingNextPage:T,hasNextPage:f}}},734517:e=>{"use strict";e.s({default:()=>m});var t=e.i(290479),n=e.i(343741),i=e.i(324918),a=e.i(492274),s=e.i(375751),r=e.i(373150),o=e.i(525094),l=e.i(704255),c=e.i(448068),u=e.i(972899),d=e.i(341664),h=e.i(221297),p=e.i(111031);let m=()=>{let e=(0,h.useChatV2Store)(e=>e.isTeam),{setChatId:m}=(0,d.useChatId)(),[f,T]=(0,r.useState)(!1),{messages:g}=(0,p.useChatV2Messages)({isTeam:e}),E=e=>e.map(e=>{let t="user"===e.role?"User":"Anara",n=e.parts.filter(e=>"text"===e.type).map(e=>"text"===e.type?e.text:"").join("\n");return"- ".concat(t,": ").concat(n,"\n\n")}).join(""),A=()=>{let e=E(g);navigator.clipboard.writeText(e),(0,o.toast)("Copied chat to clipboard")},x=()=>{let e=new Blob([E(g)],{type:"text/plain;charset=utf-8"}),t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download="chat-export.txt",document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(t),(0,o.toast)("Exported chat as TXT")};return(0,t.jsxs)(c.DropdownMenu,{open:f,onOpenChange:e=>{T(e)},children:[(0,t.jsx)(c.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(l.Button,{size:"icon",variant:"ghost",children:(0,t.jsx)(u.Icon,{as:a.EllipsisIcon})})}),(0,t.jsxs)(c.DropdownMenuContent,{align:"end",className:"w-[180px] p-2",children:[(0,t.jsx)(c.DropdownMenuItem,{asChild:!0,onSelect:()=>{m(null),T(!1)},children:(0,t.jsx)(l.Button,{variant:"ghost",size:"medium",className:"w-full justify-start",onClick:e=>{e.preventDefault(),e.stopPropagation(),m(null),T(!1)},leadingIcon:(0,t.jsx)(s.MessageSquareIcon,{className:"w-7 h-7"}),label:"New chat"})}),(0,t.jsx)(c.DropdownMenuItem,{asChild:!0,onSelect:()=>{A(),T(!1)},children:(0,t.jsx)(l.Button,{variant:"ghost",size:"medium",className:"w-full justify-start",onClick:e=>{e.preventDefault(),e.stopPropagation(),A(),T(!1)},leadingIcon:(0,t.jsx)(n.ClipboardIcon,{className:"w-7 h-7"}),label:"Copy messages"})}),(0,t.jsx)(c.DropdownMenuItem,{asChild:!0,onSelect:()=>{x(),T(!1)},children:(0,t.jsx)(l.Button,{variant:"ghost",size:"medium",className:"w-full justify-start",onClick:e=>{e.preventDefault(),e.stopPropagation(),x(),T(!1)},leadingIcon:(0,t.jsx)(i.DownloadIcon,{className:"w-7 h-7"}),label:"Export messages"})})]})]})}},187471:e=>{"use strict";e.s({isAfter:()=>n});var t=e.i(163015);function n(e,n){let i=(0,t.toDate)(e),a=(0,t.toDate)(n);return i.getTime()>a.getTime()}},125282:e=>{"use strict";e.s({default:()=>g});var t=e.i(290479),n=e.i(187471),i=e.i(369587),a=e.i(874133),s=e.i(486137),r=e.i(373150),o=e.i(252390),l=e.i(814733),c=e.i(704255),u=e.i(663018),d=e.i(972899),h=e.i(571227),p=e.i(303652),m=e.i(221297),f=e.i(111031);let T=()=>{var e,t;let n=null!=(t=null!=(e=i.env.NEXT_PUBLIC_SITE_URL)?e:i.env.NEXT_PUBLIC_VERCEL_URL)?t:"http://localhost:3000/";return(n=n.startsWith("http")?n:"https://".concat(n)).endsWith("/")?n:"".concat(n,"/")},g=e=>{var i,g;let{chatbotId:E,chatId:A}=e,[x,I]=(0,r.useState)(!1),{track:_}=(0,o.default)(),C=(0,m.useChatV2Store)(e=>e.isTeam),{messages:v}=(0,f.useChatV2Messages)({isTeam:C}),S=l.api.useUtils(),{data:D,isLoading:y}=l.api.share.lastPublish.useQuery({chatbotId:E,chatId:A}),{mutateAsync:N,isPending:b}=l.api.share.publish.useMutation({onSuccess:e=>{_("share_chatbot_published",{chatbotId:E}),S.share.lastPublish.setData({chatbotId:E,chatId:A},()=>e)}}),O="".concat(T().replace("https://",""),"s/").concat(null!=(g=null==D?void 0:D.id)?g:""),R=!!D,P=null==(i=v[v.length-1])?void 0:i.createdAt,k=P&&(null==D?void 0:D.createdAt)?(0,n.isAfter)(P,null==D?void 0:D.createdAt):null;return(0,t.jsxs)(p.Popover,{children:[(0,t.jsx)(p.PopoverTrigger,{asChild:!0,children:(0,t.jsx)(c.Button,{size:"xs",variant:"ghost",className:" h-11",children:"Share"})}),(0,t.jsxs)(p.PopoverContent,{align:"end",className:"px-6 py-4 w-[calc(100vw-2rem)] max-w-[450px] sm:w-[450px] mx-7 sm:mx-0",children:[y&&(0,t.jsx)("div",{className:"absolute top-0 left-0 h-full w-full flex justify-center items-center bg-background-primary z-10",children:(0,t.jsx)(u.LoadingSpinner,{variant:"small",color:"gray"})}),(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,t.jsx)("p",{className:"font-semibold text-sm",children:"Share"}),(0,t.jsx)(h.Input,{value:O,className:"focus:outline-none",disabled:!0}),(0,t.jsxs)("div",{className:"flex gap-4 justify-between items-center",children:[(0,t.jsx)("p",{className:"text-[#8D8D8D] text-xs font-medium",children:D?"Previous chat is shared.":"Anyone with the link can view this document and chat."}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(c.Button,{variant:"secondary",onClick:async()=>{let e=null==D?void 0:D.id;if(!e){let t=await N({chatbotId:E,chatId:A});e=null==t?void 0:t.id}navigator.clipboard.writeText("".concat(T().replace("https://",""),"s/").concat(e)),I(!0)},...!R&&{isLoading:b},size:"xs",className:"h-[30px]",leadingIcon:(0,t.jsx)(d.Icon,{as:x?a.Check:s.Copy}),children:R?x?"Copied":"Copy link":"Publish"}),R&&k&&(0,t.jsx)(c.Button,{isLoading:b,size:"xs",onClick:()=>{N({chatbotId:E,chatId:A}),I(!1)},className:"h-[30px]",children:"Republish"})]})]})]})]})]})}},409288:e=>{"use strict";e.s({ChatV2Navbar:()=>c});var t=e.i(290479),n=e.i(597875),i=e.i(359894),a=e.i(456212),s=e.i(341664),r=e.i(734517),o=e.i(125282),l=e.i(221297);let c=()=>{let e=(0,l.useChatV2Store)(e=>e.isTeam),c=(0,l.useChatV2Store)(e=>e.mode),u="chatbot"===c.type&&"GROUP"!==c.chatbotType&&"WORKSPACE"!==c.chatbotType&&!e,{chatId:d}=(0,s.useChatId)(),{shareData:h}=(0,n.useIsSharedChat)();return h||"full-chat-library"===c.type&&!c.isInLibraryWindow?(0,t.jsx)(a.ChatV2FallbackId,{}):(0,t.jsxs)("div",{className:"relative py-5 flex flex-row w-full items-center justify-between z-10 px-5 ",children:[(0,t.jsx)(i.ChatSelector,{}),(0,t.jsxs)("div",{className:"flex items-center ml-auto",children:[u&&"chatbot"===c.type&&d&&(0,t.jsx)(o.default,{chatbotId:c.chatbotId,chatId:d}),(0,t.jsx)(r.default,{})]})]})}},870177:e=>{"use strict";e.s({getBreakdownPromptByType:()=>t});let t=e=>{if(!e)return"Please provide a comprehensive breakdown of this document including:\n  \n  Document type and purpose\n  \n  Key sections and their content\n  \n  Main arguments or points\n  \n  Supporting evidence or data\n  \n  Target audience\n  \n  Key takeaways\n  \n  Structure and organization\n  \n  Important quotes or references\n  \n  Methodology (if applicable)\n  \n  Conclusions or recommendations\n  \n  Present the information in a clear, structured format that captures the essential content while maintaining readability.";let t=e.toLowerCase();return["research_paper","research","journal-article","preprint","proceedings-article","dissertation","proceedings","proceedings-series","grant","standard"].includes(t)?"Please create a summary table for the following research paper. The table should include:\n  \n  Title of the paper\n  \n  Authors\n  \n  Publication year\n  \n  Research question or objective\n  \n  Methodology\n  \n  Key findings\n  \n  Limitations\n  \n  Conclusions\n  \n  For each section, provide a brief but informative summary, capturing the essential information in a concise format. Use bullet points where appropriate to enhance readability. Ensure that the table provides a comprehensive overview of the paper's main components while being easy to scan and understand quickly.":["book","textbook","book-chapter","book-part","book-series","reference-book","monograph","edited-book"].includes(t)?"Please create a structured summary of this textbook. Include:\n  \n  Title and edition\n  \n  Author(s)\n  \n  Subject area and intended audience level\n  \n  Key concepts covered (bullet points)\n  \n  Learning objectives\n  \n  Main topics and subtopics (outline format)\n  \n  Important definitions and terminology\n  \n  Key examples or case studies\n  \n  Practice problems/exercises (if any)\n  \n  Summary of core takeaways\n  \n  Related topics or prerequisites\n  \n  Supplementary resources mentioned\n  \n  Present the information in a clear, hierarchical format that would help someone quickly understand the content and educational value.":["legal_document","policy_document"].includes(t)?"Please analyze this legal document and provide:\n  \n  Document type\n  \n  Issuing authority/parties involved\n  \n  Effective date\n  \n  Purpose and scope\n  \n  Key definitions\n  \n  Main provisions/requirements\n  \n  Obligations and rights\n  \n  Compliance requirements\n  \n  Enforcement mechanisms\n  \n  Terms and conditions\n  \n  Liability clauses\n  \n  Review/update cycle\n  \n  Exceptions process\n  \n  Related policies/documents\n  \n  Implementation guidance\n  \n  Present the information to clearly communicate both requirements and practical implications.":["presentation"].includes(t)?"Please analyze this presentation and provide:\n  \n  Title and presenter(s)\n  \n  Target audience\n  \n  Main objective\n  \n  Key messages\n  \n  Slide structure and flow\n  \n  Visual elements used\n  \n  Data visualization methods\n  \n  Key statistics/metrics\n  \n  Examples and case studies\n  \n  Supporting materials\n  \n  Technical requirements\n  \n  Engagement techniques\n  \n  Time allocation\n  \n  Follow-up resources\n  \n  Format the summary to capture both content and presentation strategy.":["white_paper","report","report-component","report-series"].includes(t)?"Please provide a structured analysis including:\n  \n  Title and publishing organization\n  \n  Publication date\n  \n  Executive summary\n  \n  Problem statement\n  \n  Market/situation analysis\n  \n  Methodology\n  \n  Key findings and metrics\n  \n  Proposed solutions/recommendations\n  \n  Implementation approach\n  \n  Case studies/examples\n  \n  ROI/benefits analysis\n  \n  Risk assessment\n  \n  Future roadmap\n  \n  Action items\n  \n  References/citations\n  \n  Format the information to highlight both analytical depth and actionable insights.":["article","review","editorial","letter"].includes(t)?"Please provide a comprehensive breakdown of this news article including:\n  \n  Title\n  \n  Author(s)\n  \n  Publication/source\n  \n  Publication date\n  \n  Type (news, opinion, review, etc.)\n  \n  Topic/subject area\n  \n  Main thesis or angle\n  \n  Key points covered\n  \n  Sources cited\n  \n  Expert quotes/opinions\n  \n  Context provided\n  \n  Supporting evidence\n  \n  Counterarguments presented\n  \n  Conclusions\n  \n  Target audience\n  \n\n  Present the information in a way that captures both the factual content and the article's narrative approach.":["medical_record"].includes(t)?"Please analyze this medical record and provide:\n  \n  Patient demographics\n  \n  Visit date/type\n  \n  Chief complaint\n  \n  History of present illness\n  \n  Past medical history\n  \n  Medications\n  \n  Allergies\n  \n  Physical examination\n  \n  Diagnostic results\n  \n  Assessment\n  \n  Treatment plan\n  \n  Follow-up instructions\n  \n  Referrals\n  \n  Provider information\n  \n  Documentation completeness\n  \n  Present the information in a way that maintains clinical relevance while protecting patient privacy.":["transcript"].includes(t)?"Please analyze this transcript and provide:\n  \n  Event type\n  \n  Date and duration\n  \n  Speakers/participants\n  \n  Context/setting\n  \n  Main topics discussed\n  \n  Key decisions/outcomes\n  \n  Action items\n  \n  Questions raised\n  \n  Follow-up items\n  \n  Notable quotes\n  \n  Technical terms used\n  \n  Emotional tone\n  \n  Areas of agreement\n  \n  Areas of conflict\n  \n  Next steps\n  \n  Present the information to capture both content and conversation dynamics.":["newsletter"].includes(t)?"Please provide a structured analysis of this newsletter including:\n  \n  Publication name/issue\n  \n  Date/frequency\n  \n  Target audience\n  \n  Main stories/topics\n  \n  News categories\n  \n  Editorial focus\n  \n  Featured content\n  \n  Promotional content\n  \n  Call to action\n  \n  Visual elements\n  \n  Distribution method\n  \n  Engagement metrics\n  \n  Special offers\n  \n  Industry updates\n  \n  Contact information\n  \n  Format the analysis to capture both content value and marketing strategy.":["technical_specification"].includes(t)?"Please analyze this technical specification and provide:\n  \n  Document version\n  \n  System/component name\n  \n  Purpose and scope\n  \n  Requirements\n  \n  Technical architecture\n  \n  Interface definitions\n  \n  Performance criteria\n  \n  Security requirements\n  \n  Data flow\n  \n  Error handling\n  \n  Testing requirements\n  \n  Dependencies\n  \n  Constraints\n  \n  Compliance requirements\n  \n  Implementation notes\n  \n  Present the information to be useful for both technical and non-technical stakeholders.":["spreadsheet"].includes(t)?"Please analyze this spreadsheet and provide:\n  \n  File overview\n  \n  Sheet structure\n  \n  Data categories\n  \n  Time period covered\n  \n  Key metrics/KPIs\n  \n  Calculation methods used\n  \n  Data sources\n  \n  Update frequency\n  \n  Dependencies\n  \n  Formulas used\n  \n  Data validation rules\n  \n  Pivot tables/charts\n  \n  Data quality issues\n  \n  Recommendations for improvement\n  \n  Present the analysis in a way that explains both the data structure and its business context.":["code","code_repository"].includes(t)?"Please provide a structured analysis of this code repository including:\n  \n  Repository name/project\n  \n  Primary language(s)\n  \n  Framework(s) used\n  \n  Project purpose\n  \n  Architecture overview\n  \n  Key components\n  \n  Dependencies\n  \n  Installation requirements\n  \n  File structure\n  \n  Main functionalities\n  \n  API documentation\n  \n  Testing approach\n  \n  Security considerations\n  \n  Performance metrics\n  \n  Deployment instructions\n  \n  Format the information to be useful for both developers and project stakeholders.":["blog_post","blog"].includes(t)?"Please analyze this blog post and provide:\n  \n  Title\n  \n  Author\n  \n  Publication date\n  \n  Blog/platform\n  \n  Topic category\n  \n  Target audience\n  \n  Main thesis/argument\n  \n  Key points\n  \n  Writing style\n  \n  Supporting media\n  \n  External links/references\n  \n  Call to action\n  \n  Comments/engagement\n  \n  SEO elements\n  \n  Related posts\n  \n  Present the analysis to capture both content value and engagement strategy.":["manual","guide"].includes(t)?"Please analyze this manual/guide and provide:\n  \n  Title and version/date\n  \n  Target user/audience\n  \n  Purpose and scope\n  \n  Prerequisites (if any)\n  \n  Main sections overview\n  \n  Step-by-step procedures\n  \n  Key features/functions covered\n  \n  Technical requirements\n  \n  Safety warnings or notices\n  \n  Troubleshooting guidance\n  \n  Reference information\n  \n  Common issues addressed\n  \n  Related documentation\n  \n  Screenshots/diagrams\n  \n  Quick reference summary\n  \n  Format the information to serve as a quick-reference guide while preserving critical technical details and safety information.":["dataset","component"].includes(t)?"Please analyze this technical content and provide:\n  \n  Title and version\n  \n  Creator/maintainer\n  \n  Purpose and scope\n  \n  Technical specifications\n  \n  Data structure/format\n  \n  Implementation details\n  \n  Usage requirements\n  \n  Dependencies\n  \n  Quality metrics\n  \n  Documentation\n  \n  Testing/validation\n  \n  Known limitations\n  \n  Integration guidelines\n  \n  Maintenance notes\n  \n  Support resources\n  \n  Present the information to be useful for both technical and non-technical stakeholders.":"Please provide a comprehensive breakdown of this document including:\n  \n  Document type and purpose\n  \n  Key sections and their content\n  \n  Main arguments or points\n  \n  Supporting evidence or data\n  \n  Target audience\n  \n  Key takeaways\n  \n  Structure and organization\n  \n  Important quotes or references\n  \n  Methodology (if applicable)\n  \n  Conclusions or recommendations\n  \n  Present the information in a clear, structured format that captures the essential content while maintaining readability."}},614336:e=>{"use strict";e.s({default:()=>u});var t=e.i(290479),n=e.i(373150),i=e.i(836826),a=e.i(252390),s=e.i(870177),r=e.i(597875),o=e.i(663018),l=e.i(719772);let c=[{title:"breakdown",prompt:""},{title:"practice questions",prompt:"Please generate comprehensive practice questions based on this content. Include:\n\n1. Multiple-choice questions with:\n   - Four plausible answer choices\n   - Clear explanations for both correct and incorrect answers\n   - Different difficulty levels (basic recall to complex analysis)\n\n2. Short-answer questions that:\n   - Test deeper understanding of concepts\n   - Require application of knowledge\n   - Include sample answers and key points to cover\n\n3. Case study or scenario-based questions that:\n   - Apply concepts to real-world situations\n   - Test problem-solving abilities\n   - Include step-by-step solution approaches\n\nFor each question, provide:\n- Learning objective being tested\n- Difficulty level (Basic/Intermediate/Advanced)\n- Estimated time to answer\n- Detailed answer explanations with references to specific sections\n\nEnsure questions cover key concepts and encourage critical thinking rather than just memorization."},{title:"study guide",prompt:"Please create a comprehensive study guide that includes:\n\n1. Key Concepts Overview:\n   - Main topics and subtopics\n   - Essential definitions and terminology\n   - Core principles and frameworks\n\n2. Learning Objectives:\n   - What you should know after studying each section\n   - Skills you should be able to demonstrate\n   - Concepts you should be able to apply\n\n3. Content Organization:\n   - Hierarchical breakdown of topics\n   - Relationships between different concepts\n   - Progressive learning path from basics to advanced\n\n4. Study Resources:\n   - Important sections to focus on\n   - Visual aids (diagrams, charts, etc.)\n   - Examples and applications\n\n5. Review Strategies:\n   - Key points to remember\n   - Common misconceptions to avoid\n   - Practice exercises and self-assessment tools\n\nFormat the guide with clear sections, bullet points, and emphasis on critical information. Include both theoretical understanding and practical applications."}];function u(e){let{suggestions:u,summary:d,chatbotId:h,documentType:p}=e,{isSharedChat:m}=(0,r.useIsSharedChat)(),{setTextValue:f}=(0,l.useEditorContent)(),[T,g]=(0,n.useState)(!1),E=(0,n.useRef)(null);(0,n.useLayoutEffect)(()=>{let e,t=new ResizeObserver(t=>{clearTimeout(e),e=setTimeout(()=>{let e=t[0];if(e){let t=e.contentRect.width<450;g(e=>e!==t?t:e)}},16)});if(E.current){var n;t.observe(E.current),g((null==(n=E.current.getBoundingClientRect())?void 0:n.width)<450)}return()=>{clearTimeout(e),t.disconnect()}},[]);let{track:A}=(0,a.default)(),[x,I]=(0,n.useState)(!0),_=(0,n.useRef)(null);return((0,i.useOnClickOutside)(_,e=>{_.current&&!_.current.contains(e.target)&&I(!0)}),u&&d&&p)?(0,t.jsxs)("div",{ref:E,className:"bg-background-object shadow-feint rounded-6 border border-border-primary",children:[(0,t.jsxs)("div",{className:"pb-7",children:[(0,t.jsx)("h2",{className:"pt-7 pl-8 text-xs font-semibold text-text-secondary5 mb-[2px]",children:"Summary"}),(0,t.jsxs)("div",{className:"relative group mx-6 p-4 hover:bg-control-primary cursor-pointer rounded-4",children:[(0,t.jsx)("p",{ref:_,onClick:()=>I(!1),className:"text-sm font-medium leading-[19px] border-none resize-none\n            ".concat(x?"overflow-hidden max-h-[76px] line-clamp-4":""),style:{...x&&{display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:4,lineClamp:4,overflow:"hidden"}},children:d}),x&&(0,t.jsx)("span",{className:"absolute right-0 bg-control-primary pt-2 p-4 bottom-0 rounded-4 invisible pointer-events-none group-hover:visible text-xs font-semibold text-text-primary",children:"Show all"})]})]}),(0,t.jsxs)("div",{className:"flex p-2 pt-0 gap-2 ".concat(T?"flex-col":"flex-row"),children:[(0,t.jsxs)("div",{className:"".concat(T?"w-full":"w-2/3"),children:[(0,t.jsx)("h2",{className:"pl-7 text-xs font-semibold text-text-secondary5 mb-4",children:"Quick actions"}),c.map(e=>(0,t.jsx)("button",{disabled:m,onClick:()=>{A("chat_suggestions_category_clicked",{chatbotId:h,quickAction:e}),"breakdown"===e.title?f((0,s.getBreakdownPromptByType)(p)):f(e.prompt)},className:"text-sm pl-7 disabled:opacity-50 first-letter:uppercase font-medium w-full text-left leading-[19px] p-[10px] rounded-4 hover:bg-control-primary transition-colors",children:e.title},e.title))]}),(0,t.jsxs)("div",{className:"".concat(T?"w-full pt-9":"w-4/3"),children:[(0,t.jsx)("h2",{className:"text-xs font-semibold  text-text-secondary5 mb-4 pl-7",children:"Suggested questions"}),u.map((e,n)=>(0,t.jsx)("button",{disabled:m,onClick:()=>{A("chat_suggestions_prompt_clicked",{chatbotId:h,question:e}),f(e)},className:"text-sm leading-[19px] disabled:opacity-50 pl-7 font-medium w-full text-left hover:bg-control-primary p-[10px] rounded-4 transition-colors",children:e},"".concat(n+1,"-button")))]})]})]}):(0,t.jsx)("div",{className:"flex justify-center items-center h-full min-h-[400px] border rounded-4",children:(0,t.jsx)(o.LoadingSpinner,{color:"gray",variant:void 0})})}},751758:e=>{"use strict";e.s({default:()=>n});var t=e.i(373150);let n=e=>{let{messages:n,fetchNextPage:i,hasNextPage:a,isFetchingNextPage:s}=e,r=(0,t.useRef)(null),[o,l]=(0,t.useState)(!1),c=(0,t.useRef)(0),u=(0,t.useRef)(0),d=(0,t.useRef)(null),h=(0,t.useCallback)(e=>{!s&&o&&(d.current&&d.current.disconnect(),d.current=new IntersectionObserver(e=>{e[0].isIntersecting&&a&&(r.current&&(c.current=r.current.scrollHeight),u.current=n.length,null==i||i())},{threshold:.1,rootMargin:"100px 0px 0px 0px"}),e&&d.current.observe(e))},[s,a,i,o,n.length]);return(0,t.useEffect)(()=>{if(!s&&n.length>u.current&&u.current>0&&r.current){let e=r.current.scrollHeight-c.current;e>0&&(r.current.scrollTop+=e),u.current=0}},[s,n.length,r]),(0,t.useEffect)(()=>{if(n.length<=0)return;let e=setTimeout(()=>{l(!0)},500);return()=>clearTimeout(e)},[n.length]),{topMessageRef:h,scrollRef:r,initialRenderComplete:o}}},954148:e=>{"use strict";e.s({default:()=>a});var t=e.i(375768),n=e.i(885905),i=e.i(814733);let a=e=>{var a,s,r;let{user:o}=(0,n.useAuth)(),l="chatbot"===e.type?e:null,c=(e=>!!e&&"GROUP"!==e&&"NOTE"!==e&&"RECORDING"!==e&&"NOTHING"!==e)(null==l?void 0:l.chatbotType),u=null==l?void 0:l.chatbotId,{data:d,isLoading:h}=i.api.chatbotSuggestions.byId.useQuery(u?{chatbotId:u,language:null!=(a=null==o?void 0:o.language)?a:"English (US)"}:t.skipToken,{enabled:c}),p=null==d?void 0:d.documentType,m=!h&&c&&p?p:null;return{suggestions:null!=(s=null==d?void 0:d.suggestions)?s:[],summary:null!=(r=null==d?void 0:d.summary)?r:null,isLoading:h,chatbotId:u,suggestionsEnabled:c&&!!m,documentType:m}}},972936:e=>{"use strict";e.s({default:()=>E});var t=e.i(290479),n=e.i(373150),i=e.i(180560),a=e.i(663018),s=e.i(1195),r=e.i(175745),o=e.i(453349),l=e.i(308332),c=e.i(581732),u=e.i(470891),d=e.i(390630),h=e.i(409288),p=e.i(221297),m=e.i(614336),f=e.i(111031),T=e.i(751758),g=e.i(954148);let E=e=>{let{mode:E,isTeam:A}=e,{messages:x,isLoading:I,..._}=(0,f.useChatV2Messages)({isTeam:A}),{suggestionsEnabled:C,suggestions:v,documentType:S,summary:D}=(0,g.default)(E),{topMessageRef:y,scrollRef:N,initialRenderComplete:b}=(0,T.default)({..._,isLoading:I,messages:x}),O=(0,n.useRef)(null),R=(0,n.useRef)(null),P=(0,n.useRef)(null),k=(0,n.useRef)(null),M=(0,n.useRef)(null),L=x.filter(e=>"user"===e.role).pop(),w=x[x.length-1],G=x.length>0,[j,B]=(0,n.useState)(0),F=(0,n.useCallback)(e=>{if(P.current&&(P.current.disconnect(),P.current=null),N&&"current"in N&&(N.current=e),e){let t=()=>{B(e.offsetHeight)};t(),P.current=new ResizeObserver(()=>{t()}),P.current.observe(e)}},[]);(0,n.useEffect)(()=>()=>{P.current&&P.current.disconnect()},[]);let U="chatbot"===E.type&&("GROUP"===E.chatbotType||"DOCUMENT"===E.chatbotType||"QUIZ"===E.chatbotType||"NOTE"===E.chatbotType),H=G&&(C&&"chatbot"===E.type||x.length>1)?j>0?"".concat(j-(U?364:324),"px"):"calc(100vh - 48px)":"auto";(0,n.useEffect)(()=>{if(!L||!N.current||!M.current)return;let e=N.current,t=M.current;if(!e.querySelector(".chat-content"))return;let n=x[x.length-1],i=x.filter(e=>"user"===e.role);(null==n?void 0:n.role)==="user"&&(C&&"chatbot"===E.type||i.length>1)&&setTimeout(()=>{let n=t.offsetHeight,i=t.offsetTop,a=Math.min(n,66);e.scrollTo({top:i+n-a-16,behavior:"smooth"})},100)},[null==L?void 0:L.id,I]);let V=(0,n.useCallback)(e=>{if(O.current){O.current.style.height="".concat(e+72,"px");let t=O.current.querySelector(".progressive-blur-container");t&&(t.style.height="".concat(e+32,"px"))}},[]),Y=(0,n.useCallback)(e=>{if(R.current&&(R.current.disconnect(),R.current=null),e){let t=()=>{V(e.offsetHeight)};t(),R.current=new ResizeObserver(()=>{t()}),R.current.observe(e)}},[V]);return(0,t.jsxs)(p.default.Provider,{initialValue:{isTeam:A,mode:E},children:[(0,t.jsx)(o.ChatV2InitialQuery,{}),(0,t.jsx)(l.ChatV2LastViewed,{}),(0,t.jsx)(i.default,{children:(0,t.jsxs)("div",{ref:k,className:"flex h-full w-full flex-col transition-all relative",style:{containerType:"inline-size",containerName:"chat-v2"},children:[(0,t.jsx)(h.ChatV2Navbar,{}),(0,t.jsx)(u.default,{ref:F,children:I?(0,t.jsx)("div",{className:"absolute inset-0  flex items-center justify-center",children:(0,t.jsx)("div",{className:"flex flex-col items-center",children:(0,t.jsx)(a.LoadingSpinner,{color:"gray",variant:void 0})})}):(0,t.jsxs)(t.Fragment,{children:[C&&"chatbot"===E.type&&(0,t.jsx)(m.default,{suggestions:v,summary:D,documentType:S,chatbotId:E.chatbotId}),0===x.length&&!C&&(0,t.jsx)(s.ChatEmptyPlaceholder,{}),_.isFetchingNextPage&&(0,t.jsx)("div",{className:"flex justify-center py-2",children:(0,t.jsx)(a.LoadingSpinner,{color:"gray",variant:void 0})}),x.map((e,n)=>{var i,a;let s=x.slice(0,n).reverse().find(e=>"user"===e.role),r=s?s.parts:[],o=s?s.attachments:[],l="user"===e.role&&(null==(i=x.filter(e=>"user"===e.role).pop())?void 0:i.id)===e.id,c="assistant"===e.role&&(null==(a=x.filter(e=>"assistant"===e.role).pop())?void 0:a.id)===e.id,u=G&&C&&"chatbot"===E.type||n>1;return(0,t.jsx)("div",{ref:0===n&&_.hasNextPage&&b?y:l?M:null,style:{minHeight:"assistant"===e.role&&n===x.length-1&&u?H:void 0},children:(0,t.jsx)(d.default,{message:e,userParts:r,userAttachments:o,isLatest:n===x.length-1,isLastAIMessage:c,scrollContainerRef:N})},e.id)}),G&&(null==w?void 0:w.role)==="user"&&(C&&"chatbot"===E.type||x.length>1)&&(0,t.jsx)("div",{style:{minHeight:H},className:"relative py-2 flex flex-col gap-8 w-full pb-10 opacity-100",children:(0,t.jsx)(c.ChatV2MessageLoader,{})})]})}),(0,t.jsx)("div",{ref:O,className:"pointer-events-none absolute left-1/2 bottom-0 max-w-[calc(754px+2rem)] w-full -translate-x-1/2 bg-gradient-to-t from-background to-transparent via-background",style:{height:"128px"},children:(0,t.jsxs)("div",{className:"progressive-blur-container",style:{height:"100px"},children:[(0,t.jsx)("div",{className:"blur-filter"}),(0,t.jsx)("div",{className:"blur-filter"}),(0,t.jsx)("div",{className:"blur-filter"}),(0,t.jsx)("div",{className:"blur-filter"}),(0,t.jsx)("div",{className:"blur-filter"}),(0,t.jsx)("div",{className:"blur-filter"}),(0,t.jsx)("div",{className:"blur-filter"})]})}),(0,t.jsx)("div",{ref:Y,className:"absolute left-1/2 bottom-0 max-w-[calc(754px+2rem)] w-full -translate-x-1/2 px-7",children:(0,t.jsx)(r.ChatV2Bottom,{})})]})})]})}},597126:e=>{"use strict";e.s({default:()=>s});var t=e.i(290479),n=e.i(663018),i=e.i(852951),a=e.i(972936);let s=e=>{let{mode:s}=e,{isLoading:r}=(0,i.useChatStatus)(s);return r?(0,t.jsx)("div",{className:"flex h-full w-full items-center justify-center bg-background-primary",children:(0,t.jsx)("div",{className:"flex flex-col items-center",children:(0,t.jsx)(n.LoadingSpinner,{color:"gray"})})}):(0,t.jsx)(a.default,{isTeam:!1,mode:s})}},903402:e=>{"use strict";e.s({default:()=>t});let t=(0,e.i(238959).default)("folder-plus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]])},910528:e=>{"use strict";e.s({FolderPlus:()=>t.default});var t=e.i(903402)},134050:e=>{"use strict";e.s({default:()=>T});var t=e.i(290479),n=e.i(885905),i=e.i(872967),a=e.i(950347),s=e.i(382680),r=e.i(985132),o=e.i(732946),l=e.i(608294),c=e.i(910528),u=e.i(34818),d=e.i(373150),h=e.i(525094),p=e.i(724648),m=e.i(592316),f=e.i(231512);let T=e=>{let{children:T,folderId:g,folderName:E}=e,{user:A}=(0,n.useAuth)(),{ingestFile:x}=(0,f.default)(),{ingestCustomVideo:I}=(0,m.default)(),{ingestCustomAudio:_}=(0,p.default)(),{limits:C,usage:v}=(0,a.default)(),{checkImportLimit:S}=(0,s.useImportLimitCheck)(),[D,y]=(0,d.useState)(!1),{isDowntime:N}=(0,i.default)(),b=(0,l.useSetAtom)(r.addUploadingFilesAtom),O=(0,l.useSetAtom)(r.updateUploadingFileAtom),R=(0,d.useRef)(0),P=async e=>{e.preventDefault(),e.stopPropagation(),R.current=0,y(!1);let t=e.target;if(t.closest("[data-hovering]")||t.closest(".ChatV2InputContainer")||t.closest('[class*="ChatV2Input"]'))return;if(N)return void h.toast.error("Import unavailable. We'll be back online soon!");if(!A)return;let n=Array.from(e.dataTransfer.files).filter(o.isValidFile);if(0===n.length)return void h.toast.info("No valid files found");if((null==C?void 0:C.legacyImportLimit)&&v&&S({shouldThrow:!1})){let e=C.legacyImportLimit-v.legacyImportCount;n.length>e&&(n.splice(e),h.toast.info("We will only process ".concat(e," files because of import limits.")))}let i=b(n.map(e=>({name:e.name})));Promise.race(n.map(async(e,t)=>{let n=i[t];if(!n)return console.error("Mismatch between input files and state files"),null;try{let t=null;if(t="video/mp4"===e.type?await I([e],!1):e.type.startsWith("audio/")?await _([e],!1):await x(e,g))return O({id:n.id,status:"IN_PROGRESS",chatbotId:t}),t;return O({id:n.id,status:"FAILED",errorMessage:"File could not be processed."}),null}catch(i){console.error("Error ingesting file:",e.name,i);let t=i instanceof Error?i.message:"Upload failed";return O({id:n.id,status:"FAILED",errorMessage:t}),null}}).map(e=>e.catch(()=>null))).catch(()=>null)};return(0,t.jsxs)("div",{className:"relative w-full h-full",onDragEnter:e=>{e.preventDefault(),e.stopPropagation();let t=e.target;!(t.closest("[data-hovering]")||t.closest(".ChatV2InputContainer")||t.closest('[class*="ChatV2Input"]'))&&(0,o.hasValidDragItems)(e.dataTransfer)&&(R.current++,1===R.current&&y(!0))},onDragOver:e=>{e.preventDefault(),e.stopPropagation();let t=e.target;if((t.closest("[data-hovering]")||t.closest(".ChatV2InputContainer")||t.closest('[class*="ChatV2Input"]'))&&D){y(!1),R.current=0;return}},onDragLeave:e=>{e.preventDefault(),e.stopPropagation(),R.current--,0===R.current&&y(!1)},onDrop:P,"data-folder-dropzone":g,"data-folder-dropzone-active":D,children:[D&&(0,t.jsxs)(u.motion.div,{className:"absolute inset-0 bg-control-primary/80 z-40 flex flex-col justify-center items-center gap-7",initial:"hidden",animate:"visible",exit:"hidden",variants:{hidden:{opacity:0},visible:{opacity:1}},transition:{duration:.1},children:[(0,t.jsx)(c.FolderPlus,{className:"text-text-secondary",size:28}),(0,t.jsxs)("div",{className:"flex flex-col gap-2 items-center",children:[(0,t.jsx)("h2",{className:"text-text-primary text-base font-medium",children:"Add to folder"}),(0,t.jsxs)("p",{className:"text-text-primary text-sm opacity-80",children:['Drop files here to add them to "',E,'"']})]})]}),T]})}},363665:e=>{"use strict";e.s({default:()=>c});var t=e.i(290479),n=e.i(704255),i=e.i(998145),a=e.i(972899),s=e.i(793956),r=e.i(252390),o=e.i(467231),l=e.i(86386);let c=e=>{let{item:{title:c,author:u,citedByCount:d,publishedDate:h,doiUrl:p,pdfUrl:m,chatbotId:f,type:T},isLibrary:g=!1}=e,{track:E}=(0,r.default)(),{triggerUpload:A,isPendingUpload:x,isPendingChatbot:I}=(0,s.useUploadUrl)(),_=x||I;return(0,t.jsxs)("div",{className:"p-6 flex flex-col gap-2 items-start border border-border-primary rounded-4",children:[(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsxs)("p",{className:"line-clamp-2 items-center",style:{wordBreak:"break-word"},children:[(0,t.jsx)(a.Icon,{className:"inline h-[15px] w-[15px] align-[-2px]",as:(0,i.default)({type:T||"DOCUMENT"})})," ",c.trim()]}),(0,t.jsxs)("div",{className:"flex flex-row gap-2 text-xs leading-[12px] mt-4 items-center",children:[(0,t.jsx)("p",{className:"text-[#666666] line-clamp-3",children:(null==u?void 0:u[0])||""}),(null==u?void 0:u.length)&&u.length>1&&(0,t.jsxs)("p",{className:"text-[#666666] rounded-6 bg-control-primary p-1 ",children:["+",u.length-1]})]})]}),(0,t.jsxs)("div",{className:"flex items-center w-full mt-4",children:[(0,t.jsxs)("div",{className:"flex flex-wrap flex-row items-center gap-6 text-xs text-[#666666]",children:[(0,t.jsxs)("div",{className:"flex gap-2 items-center",children:[h&&(0,t.jsx)("p",{children:(0,o.getYear)(h)}),h&&null!==d&&(0,t.jsx)("p",{children:"•"}),null!==d&&(0,t.jsxs)("p",{children:[null!=d?d:0," citations"]})]}),(m||p)&&(0,t.jsx)("p",{children:"•"}),m&&(0,t.jsxs)("a",{href:m,target:"_blank",className:" hover:text-text-primary",children:[(0,t.jsx)("span",{className:"underline",children:"PDF"}),"↗"]}),p&&(0,t.jsxs)("a",{href:p,target:"_blank",className:" hover:text-text-primary",children:[(0,t.jsx)("span",{className:"underline",children:"DOI"}),"↗"]})]}),(0,t.jsxs)("div",{className:"flex gap-2 ml-auto",children:[m&&!g&&(0,t.jsx)(n.Button,{isLoading:_,disabled:_,className:"text-xs h-9 ",size:"xs",variant:"secondary",onClick:()=>{A({title:c,pdfUrl:m,onTrigger:()=>{E("related_item_added_to_library")}})},children:"Add to library"}),g&&(0,t.jsx)(l.default,{href:"/b/".concat(f),children:(0,t.jsx)(n.Button,{variant:"secondary",size:"xs",className:"text-xs h-9",children:"Open"})})]})]})]})}},779423:e=>{"use strict";e.s({default:()=>i});var t=e.i(814733),n=e.i(373150);let i=e=>{let{input:i}=e,{data:a,isLoading:s}=t.api.exa.queryRelated.useQuery(i,{enabled:i.length>2}),{data:r,isLoading:o}=t.api.openAlex.query.useQuery(i,{enabled:i.length>2});return{sources:(0,n.useMemo)(()=>a||r||[],[a,r]),isLoading:s||o}}},165159:e=>{"use strict";e.s({default:()=>d});var t=e.i(290479),n=e.i(814733),i=e.i(143129),a=e.i(373150),s=e.i(663018),r=e.i(497365),o=e.i(476440),l=e.i(363665),c=e.i(779423);let u=()=>{let[e,n]=(0,a.useState)("Reading...");return(0,a.useEffect)(()=>{let e=["Reading...","Learning...","Searching...","Thinking..."],t=0,i=setInterval(()=>{t=(t+1)%e.length,n(e[t])},2e3);return()=>clearInterval(i)},[]),(0,t.jsxs)("div",{className:"gap-4 h-9 flex flex-row items-center justify-start rounded-4",children:[(0,t.jsx)(s.LoadingSpinner,{variant:"small",color:"gray"}),(0,t.jsx)("div",{className:"flex flex-row justify-center items-center gap-2 rounded-4",children:(0,t.jsx)("p",{className:"font-body leading-none text-xs font-medium text-text-secondary3",children:e})})]})},d=e=>{var s,d;let{metadata:h,type:p,chatbotId:m}=e,[f,T]=(0,a.useState)(void 0),g=(0,a.useRef)(null),E=(0,a.useRef)(null),A=(0,a.useRef)(null),x=(0,a.useRef)(null),I="DOCUMENT"===p&&(null==h?void 0:h.openAlexId)&&""!==h.openAlexId||!1,{data:_,isPending:C}=n.api.openAlex.getCitations.useQuery({openAlexId:null!=(s=null==h?void 0:h.openAlexId)?s:""},{enabled:I}),{data:v,isPending:S}=n.api.openAlex.getReferences.useQuery({openAlexId:null!=(d=null==h?void 0:h.openAlexId)?d:""},{enabled:I}),{data:D,isPending:y}=n.api.related.chatbots.useQuery(m),{sources:N,isLoading:b}=(0,c.default)({input:(null==h?void 0:h.summary)||""}),O=I&&(C||S)||b||y;return(0,t.jsx)("div",{className:"flex-none h-full flex flex-col bg-bgDark transition-all ease-in-out duration-200 z-20 overflow-visible transform",children:O?(0,t.jsx)("div",{className:"px-4",children:(0,t.jsx)(u,{})}):(0,t.jsx)("div",{className:"flex flex-col w-full min-w-0 h-full gap-[26px]",children:(0,t.jsx)("div",{className:"flex flex-col transition-all ease-in-out duration-200",children:(0,t.jsxs)(r.Accordion,{type:"single",collapsible:!0,className:"w-full space-y-7 px-3",value:f,onValueChange:e=>{if(T(e),!e)return;let t={"cited-by":g,"cited-here":E,"related-library":A,"related-internet":x}[e];(null==t?void 0:t.current)&&setTimeout(()=>{var e;null==(e=t.current)||e.scrollIntoView({behavior:"smooth",block:"start"})},100)},children:["DOCUMENT"===p&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(r.AccordionItem,{value:"cited-by",className:"border-none",ref:g,children:[(0,t.jsx)(r.AccordionTrigger,{className:"text-sm hover:bg-control-primary p-4 leading-4 items-center",variant:"chevron",children:(0,t.jsxs)("div",{className:"flex flex-row gap-4 items-center",children:["Cited by",(0,t.jsx)(o.ReusableTooltip,{asChild:!0,content:"Records that cited this file",children:(0,t.jsx)("div",{children:(0,t.jsx)(i.InfoIcon,{strokeWidth:2,className:"w-7 h-7 text-text-secondary"})})})]})}),(0,t.jsxs)(r.AccordionContent,{className:"px-4 pb-0 pt-4 space-y-5",children:[null==_?void 0:_.map(e=>(0,t.jsx)(l.default,{item:e},e.id)),!(null==_?void 0:_.length)&&(0,t.jsx)("p",{className:"text-sm text-text-primary",children:"No cited by papers available"})]})]}),(0,t.jsx)("div",{className:"h-px bg-border mx-4"}),(0,t.jsxs)(r.AccordionItem,{value:"cited-here",className:"border-none",ref:E,children:[(0,t.jsx)(r.AccordionTrigger,{className:"text-sm hover:bg-control-primary p-4 leading-4",variant:"chevron",children:(0,t.jsxs)("div",{className:"flex flex-row gap-4 items-center",children:["Cited here",(0,t.jsx)(o.ReusableTooltip,{asChild:!0,content:"References that current file cites",children:(0,t.jsx)("div",{children:(0,t.jsx)(i.InfoIcon,{strokeWidth:2,className:"w-7 h-7 text-text-secondary"})})})]})}),(0,t.jsxs)(r.AccordionContent,{className:"px-4 pb-0 pt-4 space-y-5",children:[null==v?void 0:v.map(e=>(0,t.jsx)(l.default,{item:e},e.id)),!(null==v?void 0:v.length)&&(0,t.jsx)("p",{className:"text-sm text-text-primary",children:"No cited here papers available"})]})]}),(0,t.jsx)("div",{className:"h-px bg-border mx-4"})]}),(0,t.jsxs)(r.AccordionItem,{value:"related-library",className:"border-none",ref:A,children:[(0,t.jsx)(r.AccordionTrigger,{className:"text-sm hover:bg-control-primary p-4 leading-4",variant:"chevron",children:(0,t.jsxs)("div",{className:"flex flex-row gap-4 items-center",children:["Related in library",(0,t.jsx)(o.ReusableTooltip,{asChild:!0,content:"Related files from your library",children:(0,t.jsx)("div",{children:(0,t.jsx)(i.InfoIcon,{strokeWidth:2,className:"w-7 h-7 text-text-secondary"})})})]})}),(0,t.jsxs)(r.AccordionContent,{className:"px-4 pb-0 pt-4 space-y-5",children:[null==D?void 0:D.map(e=>(0,t.jsx)(l.default,{item:e,isLibrary:!0},e.id)),!(null==D?void 0:D.length)&&(0,t.jsx)("p",{className:"text-sm text-text-primary",children:"No related papers in library available"})]})]}),(0,t.jsx)("div",{className:"h-px bg-border"}),(0,t.jsxs)(r.AccordionItem,{value:"related-internet",className:"border-none",ref:x,children:[(0,t.jsx)(r.AccordionTrigger,{className:"text-sm hover:bg-control-primary p-4 leading-4",variant:"chevron",children:(0,t.jsxs)("div",{className:"flex flex-row gap-4 items-center",children:["Related from internet",(0,t.jsx)(o.ReusableTooltip,{asChild:!0,content:"Related files from the internet",children:(0,t.jsx)("div",{children:(0,t.jsx)(i.InfoIcon,{strokeWidth:2,className:"w-7 h-7 text-text-secondary"})})})]})}),(0,t.jsxs)(r.AccordionContent,{className:"px-4 pb-0 pt-4 space-y-5",children:[null==N?void 0:N.map(e=>(0,t.jsx)(l.default,{item:e},e.id)),!(null==N?void 0:N.length)&&(0,t.jsx)("p",{className:"text-sm text-text-primary",children:"No related papers from internet available"})]})]})]})})})})}},876771:e=>{"use strict";e.s({METADATA_TOOLTIPS:()=>t});let t={doi:"A unique alphanumeric string assigned to a document or publication, such as a journal article, to provide a permanent link to its location.",isbn:"International Standard Book Number - a unique identifier for books, consisting of 10 or 13 digits.",issn:"International Standard Serial Number - an 8-digit code used to identify newspapers, journals, magazines and periodicals.",publication:"The name of the journal, magazine, newspaper, or other publication where this work was published.",volume:"The volume number of the journal or publication, typically indicating the year or sequence of publication.",issue:"The issue number within a volume, often indicating the specific publication date within that volume.",pages:'The page numbers where this article or work appears in the publication (e.g., "123-145" or "45").',publicationDate:"The date when this work was officially published or made available.",published:"The date when this work was officially published or made available.",authors:"The individual(s) who wrote or contributed to this work.",title:"The main title or name of this document, article, or publication.",abstract:"A brief summary of the main points, findings, or arguments presented in this work.",tags:"Keywords or labels that describe the topics, themes, or subject areas covered in this work.",keywords:"Keywords or labels that describe the topics, themes, or subject areas covered in this work.",url:"A web address where this document or publication can be accessed online.",citationCount:"The number of times this work has been cited or referenced by other publications.",summary:"A brief description or overview of the content and main points of this work.",fileType:"The format or type of file (e.g., PDF, Word document, image, audio, video)."}},741742:e=>{"use strict";e.s({default:()=>h});var t=e.i(290479),n=e.i(281127),i=e.i(184901),a=e.i(373150),s=e.i(230277),r=e.i(362881),o=e.i(972899),l=e.i(303652),c=e.i(476440),u=e.i(252390),d=e.i(289702);let h=e=>{let{form:h,name:p,label:m,cellType:f,disabled:T=!1,readOnly:g=!1,isDate:E=!1,tooltip:A}=e,[x,I]=(0,a.useState)(!1),[_,C]=(0,a.useState)(""),[v,S]=(0,a.useState)(!1),[D,y]=(0,a.useState)(null),N=(0,a.useRef)(null),b=(0,a.useRef)(null),O=h.watch(p),{track:R}=(0,u.default)(),P=(0,a.useCallback)(e=>{R("inlineFieldEdited",{fieldType:"date",hasValue:null!=e}),h.setValue(p,e,{shouldDirty:!0})},[h,p,R]),k=(0,a.useCallback)((e,t)=>{let n=e.trim();if(""===n)return null;if("number"===t){if(!/^-?\d*\.?\d*$/.test(n))return"Numbers only";if(Number.isNaN(Number(n)))return"Invalid number"}if("url"===t){if(!/^https?:\/\//i.test(n))return"URL must start with http:// or https://";if(!/^https?:\/\/[^/\s]+\.[^/\s]+/i.test(n))return"URL must contain a valid domain";try{new URL(n)}catch(e){return"Invalid URL format"}}if("doi"===t){let e=/^10\.\d{4,9}\/[-._;()/:A-Z0-9]+$/i.test(n),t=/^https?:\/\/(doi\.org|dx\.doi\.org)\/10\.\d{4,9}\/[-._;()/:A-Z0-9]+$/i.test(n);if(!e&&!t)return"DOI must be 10.xxxx/suffix or https://doi.org/10.xxxx/suffix"}if("isbn"===t){let e=n.replace(/[-\s]/g,"");if(!/^[\dX-\s]*$/i.test(n))return"ISBN can only contain digits, X, hyphens, and spaces";if(10===e.length){if(!/^\d{9}[\dX]$/i.test(e))return"ISBN-10 must be 10 digits, last digit can be X";let t=0;for(let n=0;n<9;n++)t+=Number.parseInt(e[n],10)*(10-n);let n=e[9].toUpperCase(),i=(11-t%11)%11;if(n!==(10===i?"X":i.toString()))return"Invalid ISBN-10 checksum"}else if(13===e.length){if(!/^\d{13}$/.test(e))return"ISBN-13 must be 13 digits";let t=0;for(let n=0;n<12;n++)t+=Number.parseInt(e[n],10)*(n%2==0?1:3);if(Number.parseInt(e[12],10)!==(10-t%10)%10)return"Invalid ISBN-13 checksum"}else if(e.length>0)return"ISBN must be 10 or 13 digits (hyphens allowed)"}if("issn"===t){if(!/^\d{4}-\d{3}[\dX]$/i.test(n))return"ISSN must be in format 1234-567X (8 digits with hyphen)";let e=n.replace("-","").slice(0,7),t=0;for(let n=0;n<7;n++)t+=Number.parseInt(e[n],10)*(8-n);let i=n[8].toUpperCase(),a=(11-t%11)%11;if(i!==(10===a?"X":11===a?"0":a.toString()))return"Invalid ISSN checksum"}return null},[]),M=(0,a.useCallback)(e=>{let t=e.trim();if(t.match(/^(?:(?:https?:\/\/)?(?:dx\.)?doi\.org\/)?10\.\d{4,5}\/[-._;()/:A-Z0-9]+$/i)){var n;let e=null==(n=t.match(/10\.\d{4,5}\/[-._;()/:A-Z0-9]+/i))?void 0:n[0];e&&window.open("https://doi.org/".concat(e),"_blank","rel=noopener");return}t.startsWith("http")&&window.open(t,"_blank","rel=noopener")},[]),L=(0,a.useCallback)(()=>{if(!O)return"Unavailable";let e=O instanceof Date?O:new Date(O);return Number.isNaN(e.getTime())?"Invalid date":(0,n.format)(e,"MMM d, yyyy")},[O]),w=(0,a.useCallback)(()=>{S(!1)},[]);(0,a.useEffect)(()=>{if(x&&"tags"!==f&&"authors"!==f){let e=O||"";C(e),y(k(String(e),f)),setTimeout(()=>{var e,t;"summary"===f?null==(e=b.current)||e.focus():null==(t=N.current)||t.focus()},0)}},[x,O,f,k]);let G=()=>{if(!m)return null;let e=(0,t.jsx)("p",{className:"text-text-secondary5 min-w-20 max-w-30 w-24 flex-shrink-0 py-4 h-fit whitespace-nowrap text-left",children:m});return A?(0,t.jsx)(c.ReusableTooltip,{content:A,position:"left",align:"start",className:"max-w-[200px] text-left",asChild:!0,children:e}):e};if("tags"===f||"authors"===f)return(0,t.jsxs)("div",{className:"flex flex-row gap-4 items-center",children:[G(),(0,t.jsxs)("div",{className:"w-full h-[34px] flex items-center px-3 py-2 rounded-4 hover:bg-control-primary transition-all duration-200 relative",children:[(0,t.jsx)(r.EditableTableCell,{getValue:()=>"authors"===f&&"string"==typeof O?O.split(",").map(e=>e.trim()).filter(Boolean):O,row:{index:0},column:{id:p},table:{options:{meta:{updateData:(e,t,n)=>{R("inlineFieldEdited",{fieldType:f,hasValue:null!=n&&""!==n,valueLength:Array.isArray(n)?n.length:+(null!=n)}),h.setValue(p,n,{shouldDirty:!0})}}}},cellType:f,disabled:T,readOnly:g}),(!O||Array.isArray(O)&&0===O.length)&&(0,t.jsx)("span",{className:"text-text-secondary text-sm absolute left-3 pointer-events-none",children:"Unavailable"})]})]});if(E&&"date"===f)return(0,t.jsxs)("div",{className:"flex flex-row gap-4 items-center",children:[G(),(0,t.jsx)("div",{className:"w-full h-[34px] flex items-center px-3 py-2 rounded-4 hover:bg-control-primary transition-all duration-200",children:T||g?(0,t.jsx)("div",{className:"w-full h-full flex items-center",children:(0,t.jsx)("span",{className:(0,d.cn)("text-sm truncate",{"opacity-60":T||g}),children:O?L():(0,t.jsx)("span",{className:"text-text-secondary",children:"Unavailable"})})}):(0,t.jsxs)(l.Popover,{open:v,onOpenChange:e=>{e?S(!0):w()},children:[(0,t.jsx)(l.PopoverTrigger,{asChild:!0,children:(0,t.jsx)("div",{className:"w-full h-full flex items-center cursor-pointer",children:(0,t.jsx)("span",{className:"text-sm truncate",children:O?L():(0,t.jsx)("span",{className:"text-text-secondary",children:"Unavailable"})})})}),(0,t.jsx)(l.PopoverContent,{className:"w-auto p-0 -ml-[11px]",align:"start",sideOffset:-31,onOpenAutoFocus:e=>e.preventDefault(),children:(0,t.jsx)(s.Calendar,{mode:"single",selected:O?new Date(O):void 0,onSelect:e=>{e?P(e):P(null),S(!1)}})})]})})]});let j=()=>{if(!k(_,f)){if(R("inlineFieldEdited",{fieldType:f,hasValue:null!=_&&""!==_,valueLength:"string"==typeof _?_.length:+(null!=_)}),"number"===f){let e=_?Number(_):null;h.setValue(p,e,{shouldDirty:!0})}else E?h.setValue(p,_?new Date("".concat(_,"T00:00:00.000Z")):null,{shouldDirty:!0}):h.setValue(p,_||null,{shouldDirty:!0});I(!1),y(null)}},B=e=>{"Enter"===e.key&&"summary"!==f?(e.preventDefault(),j()):"Escape"===e.key&&(e.preventDefault(),C(O||""),I(!1),y(null))},F=()=>{if(!O&&0!==O){if(!m){let e="summary"===p?"summary":"abstract"===p?"abstract":"content";return"No ".concat(e," available")}return"number"===f?"0":"Unavailable"}if(E){let e=O instanceof Date?O:new Date(O);return Number.isNaN(e.getTime())?"Invalid date":(0,n.format)(e,"MMM d, yyyy")}return String(O)};return(0,t.jsxs)("div",{className:(0,d.cn)(m?"flex flex-row gap-4 items-center":"w-full"),children:[m&&G(),(0,t.jsx)("div",{className:"w-full",children:x?"summary"===f?(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("textarea",{ref:b,value:_,onChange:e=>{let t=e.target.value;C(t),y(k(t,f))},onBlur:j,onKeyDown:B,className:(0,d.cn)("w-full p-3 border-2 rounded-4 outline-none resize-none","bg-background-primary text-sm min-h-[100px]",{"border-destructive bg-[#FFEAEE] dark:bg-[#44010e]":D,"border-blue-500":!D}),placeholder:m?"Enter ".concat(m.toLowerCase(),"..."):"Enter text..."}),D&&(0,t.jsx)("div",{className:"absolute top-full left-0 mt-1 px-2 py-1 bg-destructive text-white text-xs rounded-3 shadow-shadowLow z-50 whitespace-nowrap",children:D})]}):(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{ref:N,type:"number"===f?"text":E?"date":"text",value:_,onChange:e=>{let t=e.target.value;C(t),y(k(t,f))},onBlur:j,onKeyDown:B,className:(0,d.cn)("w-full h-[34px] px-3 py-2 ring-2 rounded-4 outline-none","bg-background-primary text-sm","placeholder:text-text-secondary text-text-primary",{"ring-destructive bg-[#FFEAEE] dark:bg-[#44010e]":D,"ring-blue":!D}),placeholder:m?"Enter ".concat(m,"..."):"Enter text..."}),D&&(0,t.jsx)("div",{className:"absolute top-full left-0 mt-1 px-2 py-1 bg-destructive text-white text-xs rounded-3 shadow-shadowLow z-50 whitespace-nowrap",children:D})]}):(0,t.jsx)("div",{onClick:()=>!T&&!g&&I(!0),className:(0,d.cn)("w-full px-3 py-2 rounded-4 text-sm h-[34px] flex items-center","transition-all duration-200","summary"===f&&"min-h-[100px] items-start pt-3",{"cursor-pointer hover:bg-control-primary":!T&&!g,"cursor-default opacity-60":T||g}),children:"url"===p&&(O||0===O)?(0,t.jsxs)("div",{onClick:e=>{e.stopPropagation(),M(String(O))},className:"flex items-center gap-2 text-blue cursor-pointer hover:bg-blue/10 -mx-3 px-3 py-2 rounded-4 transition-all duration-200",children:[(0,t.jsx)("span",{className:"truncate",children:F()}),(0,t.jsx)(o.Icon,{as:i.ArrowUpRight,className:"flex-shrink-0 w-7 h-7"})]}):(0,t.jsx)("span",{className:(0,d.cn)("summary"===f?"":"truncate"),children:O||0===O?F():(0,t.jsx)("span",{className:"text-text-secondary",children:F()})})})})]})}},504064:e=>{"use strict";e.s({getDirtyValues:()=>function e(t,n){return Object.keys(t).reduce((i,a)=>{let s=t[a];if(!s)return i;let r="object"==typeof s,o=Array.isArray(s),l=r&&!o?e(s,n[a]):n[a];return{...i,[a]:o?n[a]:l}},{})}})},285984:e=>{"use strict";e.s({default:()=>x,getDocType:()=>A});var t=e.i(290479),n=e.i(173341),i=e.i(86386),a=e.i(397711),s=e.i(373150),r=e.i(430266),o=e.i(966882),l=e.i(497365),c=e.i(594315),u=e.i(959757),d=e.i(476440),h=e.i(876771),p=e.i(449097),m=e.i(147271),f=e.i(511618),T=e.i(814733),g=e.i(741742),E=e.i(504064);let A=e=>(0,r.match)(e).with("DOCUMENT",()=>"Document").with("VIDEO",()=>"Video").with("AUDIO",()=>"Audio").with("IMAGE",()=>"Image").with("YOUTUBE",()=>"YouTube Video").with("RECORDING",()=>"Audio Recording").with("WEBSITE",()=>"Website").with("NOTE",()=>"Note").with("NOTION",()=>"Notion Document").with("WORKSPACE",()=>"Workspace").otherwise(()=>"Unknown"),x=e=>{var r,x,I,_,C;let{metadata:v,id:S,type:D,createdAt:y,status:N}=e,b=(0,u.useForm)({schema:n.documentMetadataSchema,defaultValues:{...v,abstract:null==v||null==(r=v.abstract)?void 0:r.trim(),openAccess:null!=(x=null==v?void 0:v.openAccess)&&x,isRetracted:null!=(I=null==v?void 0:v.isRetracted)&&I,isParatext:null!=(_=null==v?void 0:v.isParatext)&&_,citationCount:null!=(C=null==v?void 0:v.citationCount)?C:0,date:(null==v?void 0:v.date)?new Date(v.date):null,updated:(null==v?void 0:v.updated)?new Date(v.updated):null,publicationDate:(null==v?void 0:v.publicationDate)?new Date(v.publicationDate):null}}),{setReturnPage:O}=(0,p.useSettings)(),R=(0,a.usePathname)(),P=(0,a.useSearchParams)(),k=(0,s.useRef)(null),M=(0,s.useRef)(null),L=(0,s.useRef)(null),w=(0,s.useRef)(null),G=T.api.useUtils(),{updateName:j}=(0,m.useUpdateName)(),B=(0,s.useRef)(new Set),{mutate:F}=T.api.documentMetadata.generate.useMutation({onSuccess:e=>{e&&G.documentMetadata.byId.setData({chatbotId:S},e)}});(0,s.useEffect)(()=>{if(v){var e,t,n,i,a;b.reset({...v,abstract:null==v||null==(e=v.abstract)?void 0:e.trim(),openAccess:null!=(t=null==v?void 0:v.openAccess)&&t,isRetracted:null!=(n=null==v?void 0:v.isRetracted)&&n,isParatext:null!=(i=null==v?void 0:v.isParatext)&&i,citationCount:null!=(a=null==v?void 0:v.citationCount)?a:0,date:(null==v?void 0:v.date)?new Date(v.date):null,updated:(null==v?void 0:v.updated)?new Date(v.updated):null,publicationDate:(null==v?void 0:v.publicationDate)?new Date(v.publicationDate):null})}},[S]),(0,s.useEffect)(()=>{B.current.has(S)||null!==v&&(!v||(null==v?void 0:v.summary))||"SUCCESS"!==N||(B.current.add(S),F({chatbotId:S}))},[v]);let{mutate:U}=T.api.documentMetadata.update.useMutation({onSuccess:e=>{e&&G.workspace.all.invalidate()}}),{data:H}=T.api.citations.formatFromMetadata.useQuery({chatbotId:S}),V=(0,s.useCallback)(e=>{let t=(0,E.getDirtyValues)(b.formState.dirtyFields,e);t.title&&"string"==typeof t.title&&j({id:S,name:t.title,type:"CHATBOT"}),U({...t,...t.authors&&"string"==typeof t.authors&&{authors:t.authors.split(",").map(e=>e.trim()).filter(Boolean)},...void 0!==t.citationCount&&{citationCount:null===t.citationCount?void 0:t.citationCount},chatbotId:S,metadataFetchVersion:n.METADATA_FETCH_VERSION,metadataFetchAttempted:!0})},[S,U,j]),Y=(0,o.useDebouncedCallback)(()=>{b.handleSubmit(V)()},1e3),z=b.watch();return(0,s.useEffect)(()=>{b.formState.isDirty&&Y()},[JSON.stringify(z)]),(0,t.jsx)(u.Form,{...b,children:(0,t.jsx)("form",{className:"w-full",children:(0,t.jsx)("fieldset",{className:"flex flex-col w-full min-w-0 h-full",children:(0,t.jsxs)(l.Accordion,{type:"multiple",defaultValue:["details","summary","abstract","citation"],className:"w-full space-y-7 px-3",onValueChange:e=>{let t=e[e.length-1];t&&(e=>{let t={details:k,summary:M,abstract:L,citation:w}[e];(null==t?void 0:t.current)&&setTimeout(()=>{var e;null==(e=t.current)||e.scrollIntoView({behavior:"smooth",block:"start"})},100)})(t)},children:[(0,t.jsxs)(l.AccordionItem,{value:"details",className:"border-none",ref:k,children:[(0,t.jsx)(l.AccordionTrigger,{className:"text-sm hover:bg-control-primary p-4 leading-4",variant:"chevron",children:"File details"}),(0,t.jsx)(l.AccordionContent,{className:"px-4 pb-0 pt-4",children:(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsxs)("div",{className:"flex flex-row gap-9 items-center",children:[(0,t.jsx)(d.ReusableTooltip,{content:h.METADATA_TOOLTIPS.fileType,position:"left",align:"start",className:"max-w-[200px] text-left",children:(0,t.jsx)("p",{className:"text-text-secondary5 min-w-20 h-fit text-left",children:"File type"})}),(0,t.jsx)("p",{className:"w-full p-3 hover:bg-control-primary rounded-4",children:A(D)})]}),(0,t.jsx)(g.default,{form:b,name:"title",label:"Title",cellType:"text",tooltip:h.METADATA_TOOLTIPS.title}),(0,t.jsx)(g.default,{form:b,name:"authors",label:"Authors",cellType:"authors",tooltip:h.METADATA_TOOLTIPS.authors}),(0,t.jsx)(g.default,{form:b,name:"publication",label:"Publication",cellType:"text",tooltip:h.METADATA_TOOLTIPS.publication}),(0,t.jsx)(g.default,{form:b,name:"volume",label:"Volume",cellType:"text",tooltip:h.METADATA_TOOLTIPS.volume}),(0,t.jsx)(g.default,{form:b,name:"issue",label:"Issue",cellType:"text",tooltip:h.METADATA_TOOLTIPS.issue}),(0,t.jsx)(g.default,{form:b,name:"pages",label:"Pages",cellType:"text",tooltip:h.METADATA_TOOLTIPS.pages}),(0,t.jsx)(g.default,{form:b,name:"citationCount",label:"Citation count",cellType:"number",tooltip:h.METADATA_TOOLTIPS.citationCount}),(0,t.jsx)(g.default,{form:b,name:"publicationDate",label:"Published",cellType:"date",isDate:!0,tooltip:h.METADATA_TOOLTIPS.publicationDate}),(0,t.jsx)(g.default,{form:b,name:"doi",label:"DOI",cellType:"doi",tooltip:h.METADATA_TOOLTIPS.doi}),(0,t.jsx)(g.default,{form:b,name:"isbn",label:"ISBN",cellType:"isbn",tooltip:h.METADATA_TOOLTIPS.isbn}),(0,t.jsx)(g.default,{form:b,name:"issn",label:"ISSN",cellType:"issn",tooltip:h.METADATA_TOOLTIPS.issn}),(0,t.jsx)(g.default,{form:b,name:"keywords",label:"Tags",cellType:"tags",tooltip:h.METADATA_TOOLTIPS.tags}),(0,t.jsx)(g.default,{form:b,name:"url",label:"URL",cellType:"url",tooltip:h.METADATA_TOOLTIPS.url}),(0,t.jsxs)("div",{className:"flex flex-row gap-4 items-center",children:[(0,t.jsx)("p",{className:"text-text-secondary5 min-w-20 max-w-30 w-28 py-4 h-fit whitespace-nowrap text-left",children:"Added"}),(0,t.jsx)("p",{className:"w-full p-3 hover:bg-control-primary rounded-4",children:new Date(y).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})})]}),(0,t.jsxs)("div",{className:"flex flex-row gap-4 items-center",children:[(0,t.jsx)("p",{className:"text-text-secondary5 min-w-20 max-w-30 w-28 py-4 h-fit whitespace-nowrap text-left",children:"Viewed"}),(0,t.jsx)("p",{className:"w-full p-3 hover:bg-control-primary rounded-4",children:new Date().toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})})]})]})})]}),(0,t.jsx)("div",{className:"h-px bg-border"}),(0,t.jsxs)(l.AccordionItem,{value:"summary",className:"border-none",ref:M,children:[(0,t.jsx)(l.AccordionTrigger,{className:"text-sm hover:bg-control-primary p-4 leading-4",variant:"chevron",children:"Summary"}),(0,t.jsx)(l.AccordionContent,{className:"px-4 pb-0 pt-4",children:(0,t.jsx)(g.default,{form:b,name:"summary",label:"",cellType:"summary"})})]}),(0,t.jsx)("div",{className:"h-px bg-border"}),(0,t.jsxs)(l.AccordionItem,{value:"abstract",className:"border-none",ref:L,children:[(0,t.jsx)(l.AccordionTrigger,{className:"text-sm hover:bg-control-primary p-4 leading-4",variant:"chevron",children:"Abstract"}),(0,t.jsx)(l.AccordionContent,{className:"px-4 pb-0 pt-4",children:(0,t.jsx)(g.default,{form:b,name:"abstract",label:"",cellType:"summary"})})]}),(0,t.jsx)("div",{className:"h-px bg-border"}),(0,t.jsxs)(l.AccordionItem,{value:"citation",className:"border-none",ref:w,children:[(0,t.jsx)(l.AccordionTrigger,{className:"text-sm hover:bg-control-primary p-4 leading-4",variant:"chevron",children:"Full citation"}),(0,t.jsx)(l.AccordionContent,{className:"px-4 pb-0 pt-4",children:H?(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,t.jsxs)("span",{className:"text-sm text-text-secondary",children:["Change the citation format in"," ",(0,t.jsx)(i.default,{className:"underline cursor-pointer hover:text-text-primary hover:opacity-80 transition ease-in-out duration-150",href:"/settings/preferences",onClick:()=>{var e;O("".concat(R,"?").concat(null!=(e=null==P?void 0:P.toString())?e:""))},children:"settings"}),"."]}),(0,t.jsxs)("div",{className:"group relative",children:[(0,t.jsx)("span",{className:"prose text-text-primary prose-a:text-text-primary prose-a:whitespace-pre-wrap break-words text-sm font-medium pr-13",dangerouslySetInnerHTML:{__html:(0,f.makeUrlsClickable)(H)}}),(0,t.jsx)(c.CopyCitationButton,{content:H||"",className:"absolute top-0 right-0 opacity-0 group-hover:opacity-100 transition-opacity bg-background-primary/80 backdrop-blur-sm"})]})]}):(0,t.jsx)("p",{className:"text-sm text-text-primary",children:"No citation available"})})]})]})})})})}},577685:e=>{"use strict";e.s({default:()=>h});var t=e.i(290479),n=e.i(373150),i=e.i(966882),a=e.i(555168),s=e.i(497365),r=e.i(959757),o=e.i(814733),l=e.i(285984),c=e.i(741742),u=e.i(504064);let d=a.z.object({title:a.z.string().nullish(),date:a.z.date().nullish(),summary:a.z.string().nullish()}),h=e=>{var a,h;let{metadata:p,chatbot:m}=e,f=(0,r.useForm)({schema:d,defaultValues:{title:null!=(a=null==p?void 0:p.title)?a:m.name,summary:null!=(h=null==p?void 0:p.summary)?h:"",date:m.createdAt}}),T=(0,n.useRef)(null),g=(0,n.useRef)(null),{mutate:E}=o.api.documentMetadata.update.useMutation({onSuccess:e=>{f.reset({...e})}}),A=(0,n.useCallback)(e=>{E({...(0,u.getDirtyValues)(f.formState.dirtyFields,e),chatbotId:m.id})},[]),x=(0,i.useDebouncedCallback)(()=>{f.handleSubmit(A)()},1e3),I=f.watch();return(0,n.useEffect)(()=>{f.formState.isDirty&&x()},[JSON.stringify(I)]),(0,t.jsx)(r.Form,{...f,children:(0,t.jsxs)(s.Accordion,{type:"multiple",defaultValue:["details","summary"],className:"w-full space-y-7 px-3",onValueChange:e=>{let t=e[e.length-1];t&&(e=>{let t={details:T,summary:g}[e];(null==t?void 0:t.current)&&setTimeout(()=>{var e;null==(e=t.current)||e.scrollIntoView({behavior:"smooth",block:"start"})},100)})(t)},children:[(0,t.jsxs)(s.AccordionItem,{value:"details",className:"border-none",ref:T,children:[(0,t.jsx)(s.AccordionTrigger,{className:"text-sm hover:bg-control-primary p-4 leading-4",variant:"chevron",children:"File details"}),(0,t.jsx)(s.AccordionContent,{className:"px-4 pb-0 pt-4",children:(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsxs)("div",{className:"flex flex-row gap-7 items-center",children:[(0,t.jsx)("p",{className:"text-text-secondary5 min-w-20 py-4 h-fit",children:"File type"}),(0,t.jsx)("p",{className:"w-full p-3 hover:bg-control-primary rounded-4",children:(0,l.getDocType)(m.type)})]}),(0,t.jsx)(c.default,{form:f,name:"title",label:"Title",cellType:"text"}),(0,t.jsx)(c.default,{form:f,name:"keywords",label:"Tags",cellType:"tags"}),(0,t.jsxs)("div",{className:"flex flex-row gap-7 items-center",children:[(0,t.jsx)("p",{className:"text-text-secondary5 min-w-20 py-4 h-fit",children:"Added"}),(0,t.jsx)("p",{className:"w-full p-3 hover:bg-control-primary rounded-4",children:new Date(m.createdAt).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})})]}),(0,t.jsxs)("div",{className:"flex flex-row gap-7 items-center",children:[(0,t.jsx)("p",{className:"text-text-secondary5 min-w-20 py-4 h-fit",children:"Viewed"}),(0,t.jsx)("p",{className:"w-full p-3 hover:bg-control-primary rounded-4",children:new Date().toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})})]})]})})]}),(0,t.jsx)("div",{className:"h-px bg-border"}),(0,t.jsxs)(s.AccordionItem,{value:"summary",className:"border-none",ref:g,children:[(0,t.jsx)(s.AccordionTrigger,{className:"text-sm hover:bg-control-primary p-4 leading-4",variant:"chevron",children:"Summary"}),(0,t.jsx)(s.AccordionContent,{className:"px-4 pb-0 pt-4",children:(0,t.jsx)(c.default,{form:f,name:"summary",label:"",cellType:"summary"})})]})]})})}},480200:e=>{"use strict";e.s({default:()=>d});var t=e.i(290479),n=e.i(497365),i=e.i(959757),a=e.i(814733),s=e.i(173341),r=e.i(373150),o=e.i(966882),l=e.i(285984),c=e.i(741742),u=e.i(504064);let d=e=>{var d,h,p,m,f,T;let{metadata:g,chatbot:E}=e,A=(0,i.useForm)({schema:s.documentMetadataSchema,defaultValues:{...g,url:null!=(d=null==g?void 0:g.url)?d:E.url,title:null!=(h=null==g?void 0:g.title)?h:E.name,date:E.createdAt,openAccess:null!=(p=null==g?void 0:g.openAccess)&&p,isRetracted:null!=(m=null==g?void 0:g.isRetracted)&&m,isParatext:null!=(f=null==g?void 0:g.isParatext)&&f,citationCount:null!=(T=null==g?void 0:g.citationCount)?T:0,updated:(null==g?void 0:g.updated)?new Date(g.updated):null,publicationDate:(null==g?void 0:g.publicationDate)?new Date(g.publicationDate):null}}),x=(0,r.useRef)(null),I=(0,r.useRef)(null),{mutate:_}=a.api.documentMetadata.update.useMutation({onSuccess:e=>{A.reset({...e})}}),C=(0,r.useCallback)(e=>{var t,n;let i=(0,u.getDirtyValues)(A.formState.dirtyFields,e);_({...i,chatbotId:E.id,metadataFetchVersion:null!=(t=i.metadataFetchVersion)?t:s.METADATA_FETCH_VERSION,metadataFetchAttempted:null==(n=i.metadataFetchAttempted)||n})},[]),v=(0,o.useDebouncedCallback)(()=>{A.handleSubmit(C)()},1e3),S=A.watch();return(0,r.useEffect)(()=>{A.formState.isDirty&&v()},[JSON.stringify(S)]),(0,t.jsx)(i.Form,{...A,children:(0,t.jsxs)(n.Accordion,{type:"multiple",defaultValue:["details","summary"],className:"w-full space-y-7 px-3",onValueChange:e=>{let t=e[e.length-1];t&&(e=>{let t={details:x,summary:I}[e];(null==t?void 0:t.current)&&setTimeout(()=>{var e;null==(e=t.current)||e.scrollIntoView({behavior:"smooth",block:"start"})},100)})(t)},children:[(0,t.jsxs)(n.AccordionItem,{value:"details",className:"border-none",ref:x,children:[(0,t.jsx)(n.AccordionTrigger,{className:"text-sm hover:bg-control-primary p-4 leading-4",variant:"chevron",children:"File details"}),(0,t.jsx)(n.AccordionContent,{className:"px-4 pb-0 pt-4",children:(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsxs)("div",{className:"flex flex-row gap-7 items-center",children:[(0,t.jsx)("p",{className:"text-text-secondary5 min-w-20 py-4 h-fit",children:"File type"}),(0,t.jsx)("p",{className:"w-full p-3 hover:bg-control-primary rounded-4",children:(0,l.getDocType)(E.type)})]}),(0,t.jsx)(c.default,{form:A,name:"title",label:"Title",cellType:"text"}),(0,t.jsx)(c.default,{form:A,name:"url",label:"URL",cellType:"text"}),(0,t.jsx)(c.default,{form:A,name:"keywords",label:"Tags",cellType:"tags"}),(0,t.jsxs)("div",{className:"flex flex-row gap-7 items-center",children:[(0,t.jsx)("p",{className:"text-text-secondary5 min-w-20 py-4 h-fit",children:"Added"}),(0,t.jsx)("p",{className:"w-full p-3 hover:bg-control-primary rounded-4",children:new Date(E.createdAt).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})})]}),(0,t.jsxs)("div",{className:"flex flex-row gap-7 items-center",children:[(0,t.jsx)("p",{className:"text-text-secondary5 min-w-20 py-4 h-fit",children:"Viewed"}),(0,t.jsx)("p",{className:"w-full p-3 hover:bg-control-primary rounded-4",children:new Date().toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})})]})]})})]}),(0,t.jsx)("div",{className:"h-px bg-border"}),(0,t.jsxs)(n.AccordionItem,{value:"summary",className:"border-none",ref:I,children:[(0,t.jsx)(n.AccordionTrigger,{className:"text-sm hover:bg-control-primary p-4 leading-4",variant:"chevron",children:"Summary"}),(0,t.jsx)(n.AccordionContent,{className:"px-4 pb-0 pt-4",children:(0,t.jsx)(c.default,{form:A,name:"summary",label:"",cellType:"summary"})})]})]})})}},361281:e=>{"use strict";e.s({default:()=>C});var t=e.i(290479),n=e.i(608294),i=e.i(874133),a=e.i(486137),s=e.i(15749),r=e.i(672330),o=e.i(765357),l=e.i(611988),c=e.i(749248),u=e.i(373150),d=e.i(555168),h=e.i(704255),p=e.i(663018),m=e.i(448068),f=e.i(959757),T=e.i(972899),g=e.i(850028),E=e.i(428625),A=e.i(800328),x=e.i(252390),I=e.i(910173),_=e.i(315566);let C=e=>{let{chatbotId:C}=e,{savedAnnotations:v,isLoading:S,handleDeleteAnnotation:D,handleCopyToChat:y,handleUpdateAnnotation:N,handleCopyContents:b}=(0,A.useDocumentAnnotations)(C),O=(0,n.useAtomValue)(E.annotationNavigationAtom),[R,P]=(0,u.useState)(null),k=(0,u.useRef)(null),[M,L]=(0,u.useState)(null),[w,G]=(0,u.useState)(null),{track:j}=(0,x.default)(),B=(0,f.useForm)({defaultValues:{comment:""},schema:d.z.object({comment:d.z.string()})}),F=(0,u.useCallback)(()=>{let e=k.current;if(!e)return;e.style.height="20px";let t=R?16:5,n=Math.min(Math.ceil(e.scrollHeight/Number.parseFloat(getComputedStyle(e).lineHeight)),t);e.style.height="".concat(20*n,"px")},[R]);(0,u.useEffect)(()=>{k.current&&F()},[F,R]),(0,u.useEffect)(()=>{R&&setTimeout(()=>{B.setFocus("comment")},200)},[R,B]);let U=(0,u.useCallback)(e=>{if(!R)return;let t=v.find(e=>e.id===R);if(!t)return;let n={id:t.id,pageNumber:t.pageNumber,highlights:t.highlights,color:t.color,borderColor:t.borderColor,comment:e.comment,createdAt:new Date(t.createdAt),updatedAt:new Date(t.updatedAt),metadata:{chatbotId:t.chatbotId,text:t.text,userId:t.userId,userDisplayName:t.userDisplayName}};j(t.comment?"annotation_comment_updated":"annotation_comment_added",{location:"sidebar"}),N(R,n),P(null)},[R,v,N]),{ref:H,...V}=B.register("comment"),Y=e=>{k.current=e,H(e)},[z,W]=(0,u.useState)(null),q=_.BASE_HIGHLIGHT_COLORS,K=[...v].sort((e,t)=>{if(e.pageNumber!==t.pageNumber)return e.pageNumber-t.pageNumber;let n=e.highlights[0],i=t.highlights[0];return n&&i?n.top-i.top:0}),Q=z?K.filter(e=>{let t=(e=>{let t=_.BASE_HIGHLIGHT_COLORS.find(t=>t.backgroundColor===e);return(null==t?void 0:t.colorName)?t.backgroundColor:null})(z);return!!t&&e.color===t}):K,X=(0,u.useCallback)(e=>{O&&(O({id:e.id,pageNumber:e.pageNumber,highlights:e.highlights,color:e.color,borderColor:e.borderColor,comment:e.comment||"",createdAt:new Date(e.createdAt),updatedAt:new Date(e.updatedAt),metadata:{chatbotId:e.chatbotId,text:e.text,userId:e.userId,userDisplayName:e.userDisplayName}}),j("annotation_scrolled_to",{location:"sidebar"}))},[O]);return(0,t.jsxs)("div",{className:"flex-none h-full flex flex-col bg-bgDark transition-all ease-in-out duration-200 z-20 overflow-visible transform",children:[(0,t.jsxs)("div",{className:"px-4 flex flex-row items-center justify-between pb-4",children:[(0,t.jsx)("h2",{className:"text-sm font-medium tracking-[-0.32px] text-text-secondary",children:"All annotations"}),(0,t.jsxs)(m.DropdownMenu,{children:[(0,t.jsx)(m.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsxs)(h.Button,{variant:"ghost",size:"icon",className:"h-11 w-11 relative",children:[(0,t.jsx)(T.Icon,{as:l.SlidersHorizontal,className:"h-7 w-7"}),z&&(0,t.jsx)("span",{className:"absolute top-2 right-1 h-[7px] w-[7px] rounded-full bg-blue"})]})}),(0,t.jsx)(m.DropdownMenuContent,{align:"end",className:"w-[200px] p-2",sideOffset:6,children:q.map(e=>{let{name:n,backgroundColor:a,borderColor:s}=e;return(0,t.jsx)(m.DropdownMenuItem,{asChild:!0,onSelect:()=>W(z===a?null:a),children:(0,t.jsx)(h.Button,{variant:"ghost",size:"medium",className:"w-full justify-between",onClick:e=>{e.preventDefault(),e.stopPropagation(),W(z===a?null:a)},leadingIcon:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("span",{className:"h-7 w-7 flex-shrink-0 rounded-full border",style:{backgroundColor:a,borderColor:s}}),(0,t.jsx)("span",{children:n})]}),trailingIcon:a===z?(0,t.jsx)(i.Check,{className:"h-7 w-7 text-blue"}):void 0})},"".concat(n,"-").concat(a))})})]})]}),S?(0,t.jsx)("div",{className:"px-4",children:(0,t.jsx)(p.LoadingSpinner,{})}):(0,t.jsx)("div",{className:"flex flex-col w-full min-w-0 h-full overflow-auto",children:(0,t.jsxs)("div",{className:"flex flex-col space-y-5",children:[!Q.length&&(0,t.jsx)("div",{className:"px-4 text-left text-text-secondary/50 text-sm pt-9 text-balance",children:"No annotations available. Select text in the PDF viewer and click 'Highlight' to add"}),null==Q?void 0:Q.map(e=>{var n;return(0,t.jsxs)("div",{onClick:()=>X(e),className:"flex flex-col bg-popover rounded-4 overflow-hidden cursor-pointer border border-border-primary hover:bg-popover-hover/30 dark:hover:bg-popover-hover",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-6 pb-4",children:[(0,t.jsxs)("div",{className:"flex flex-row gap-4 items-center",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-full bg-popover-hover items-center justify-center text-center",children:(0,t.jsx)("p",{className:"text-xs text-text-secondary uppercase px-2 py-[5px] leading-[11px]",children:(null==e||null==(n=e.userDisplayName)?void 0:n.length)?null==e?void 0:e.userDisplayName.charAt(0):"U"})}),(0,t.jsx)("p",{className:"text-sm font-medium",children:e.userDisplayName||"User"}),e.updatedAt&&(0,t.jsx)("p",{className:"text-xs leading-5 pt-1 font-medium text-text-secondary",children:(0,g.formatTimeAgo)(new Date(e.updatedAt))})]}),(0,t.jsxs)(m.DropdownMenu,{open:w===e.id,onOpenChange:t=>{G(t?e.id:null),t||L(null)},children:[(0,t.jsx)(m.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(h.Button,{className:"h-11 w-11 font-medium hover:bg-popover-hover",variant:"ghost",id:"noteMenuButton",size:"xs",leadingIcon:(0,t.jsx)(T.Icon,{as:s.Ellipsis})})}),(0,t.jsxs)(m.DropdownMenuContent,{align:"end",className:"w-[200px] p-2",sideOffset:6,children:[(0,t.jsx)(m.DropdownMenuItem,{asChild:!0,onSelect:()=>{P(e.id),B.reset({comment:e.comment||""}),G(null)},children:(0,t.jsx)(h.Button,{variant:"ghost",size:"medium",className:"w-full justify-start",onClick:t=>{t.preventDefault(),t.stopPropagation(),P(e.id),B.reset({comment:e.comment||""}),G(null)},leadingIcon:(0,t.jsx)(T.Icon,{as:o.PenLine}),label:"Edit comment"})}),(0,t.jsx)(m.DropdownMenuItem,{asChild:!0,onSelect:()=>{b({text:e.text,comment:e.comment||"",chatbotId:e.chatbotId}),j("annotation_copied",{location:"sidebar"}),G(null)},children:(0,t.jsx)(h.Button,{variant:"ghost",size:"medium",className:"w-full justify-start",onClick:t=>{t.preventDefault(),t.stopPropagation(),b({text:e.text,comment:e.comment||"",chatbotId:e.chatbotId}),j("annotation_copied",{location:"sidebar"}),G(null)},leadingIcon:(0,t.jsx)(T.Icon,{as:a.Copy}),label:"Copy contents"})}),(0,t.jsx)(m.DropdownMenuItem,{asChild:!0,onSelect:()=>{y(e.text,e.highlights,e.chatbotId),j("annotation_added_to_chat",{location:"sidebar"}),G(null)},children:(0,t.jsx)(h.Button,{variant:"ghost",size:"medium",className:"w-full justify-start",onClick:t=>{t.preventDefault(),t.stopPropagation(),y(e.text,e.highlights,e.chatbotId),j("annotation_added_to_chat",{location:"sidebar"}),G(null)},leadingIcon:(0,t.jsx)(T.Icon,{as:r.MessageSquare}),label:"Add to chat"})}),(0,t.jsx)(m.DropdownMenuItem,{asChild:!0,onSelect:t=>{M!==e.id?(t.preventDefault(),t.stopPropagation(),L(e.id)):(D(e.id),j("annotation_deleted",{location:"sidebar"}),G(null))},children:(0,t.jsx)(h.Button,{variant:M===e.id?"destructive":"ghost",size:"medium",className:"w-full justify-start",onClick:t=>{t.preventDefault(),t.stopPropagation(),M!==e.id?L(e.id):(D(e.id),j("annotation_deleted",{location:"sidebar"}),G(null))},leadingIcon:(0,t.jsx)(T.Icon,{as:M===e.id?i.Check:c.Trash}),label:M===e.id?"Confirm":"Delete annotation"})})]})]})]}),(0,t.jsxs)("div",{className:"px-6 pb-6",children:[(0,t.jsx)("div",{className:"px-4 mt-2 mb-6 rounded border-l-[3px]",style:{borderLeftColor:(e=>{let t=(e=>({"rgba(255, 204, 0, 0.25)":"yellow","rgba(249, 115, 22, 0.25)":"orange","rgba(34, 197, 94, 0.25)":"green","rgba(59, 130, 246, 0.25)":"blue","rgba(168, 85, 247, 0.25)":"purple","rgba(239, 68, 68, 0.25)":"red","rgba(255, 204, 0, 0.1)":"yellow","rgba(249, 115, 22, 0.1)":"orange","rgba(34, 197, 94, 0.1)":"green","rgba(59, 130, 246, 0.1)":"blue","rgba(168, 85, 247, 0.1)":"purple","rgba(239, 68, 68, 0.1)":"red","var(--highlight-yellow)":"yellow","var(--highlight-orange)":"orange","var(--highlight-green)":"green","var(--highlight-blue)":"blue","var(--highlight-purple)":"purple","var(--highlight-red)":"red"})[e]||e||"orange")(e);return(0,I.getHighlightColorByName)(t).borderColor})(e.color||"orange")},children:(0,t.jsx)("p",{className:"text-sm text-text-secondary line-clamp-3 overflow-hidden",children:e.text})}),R===e.id?(0,t.jsx)(f.Form,{...B,children:(0,t.jsx)("form",{onSubmit:B.handleSubmit(U),className:"w-full mt-4",children:(0,t.jsxs)("div",{className:"w-full flex flex-col items-center gap-6",children:[(0,t.jsx)("textarea",{...V,ref:Y,className:"w-full text-sm focus:outline-none placeholder:text-text-secondary bg-transparent resize-none p-0 leading-[1.5] min-h-8 max-h-[220px] overflow-y-auto scrollbar-hide",placeholder:"Add comment",style:{height:"20px",boxSizing:"content-box"},onInput:F,onKeyDown:e=>{"Enter"===e.key&&!e.shiftKey&&(e.preventDefault(),B.formState.isValid&&B.handleSubmit(U)())}}),(0,t.jsxs)("div",{className:"w-full flex flex-row gap-4 justify-end",children:[(0,t.jsx)(h.Button,{size:"xs",variant:"secondary",className:"px-5",onClick:()=>{P(null)},children:"Cancel"}),(0,t.jsx)(h.Button,{type:"submit",size:"xs",className:"px-5",disabled:!B.formState.isValid&&B.formState.isDirty,children:"Save"})]})]})})}):e.comment&&(0,t.jsx)("p",{className:"text-sm text-textSecondary mt-4 line-clamp-3 break-words",children:e.comment})]})]},e.id)})]})})]})}},750853:e=>{"use strict";e.s({default:()=>T});var t=e.i(290479),n=e.i(165159),i=e.i(987065),a=e.i(91410),s=e.i(51785),r=e.i(252390),o=e.i(814733),l=e.i(373150),c=e.i(430266),u=e.i(663018),d=e.i(285984),h=e.i(577685),p=e.i(480200),m=e.i(361281);let f=e=>"sidebarMetadata.activeTab.".concat(e),T=e=>{let{chatbotId:T,active:g="info"}=e,[E,A]=l.default.useState(()=>sessionStorage.getItem(f(T))||g),x=o.api.useUtils(),{data:I,isLoading:_}=o.api.documentMetadata.byId.useQuery({chatbotId:T}),{data:C}=o.api.related.tags.useQuery(T),v=x.documentMetadata.generate.isMutating(),{track:S}=(0,r.default)();(0,l.useEffect)(()=>{"related"===E&&S("related_sidebar_opened"),"annotations"===E&&S("annotations_sidebar_opened"),"info"===E&&S("info_sidebar_opened"),sessionStorage.setItem(f(T),E)},[E,T]);let{chatbot:D}=(0,s.default)({id:T});if(_||v>0||!D)return(0,t.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,t.jsx)("div",{className:"flex flex-col items-center",children:(0,t.jsx)(u.LoadingSpinner,{color:"gray",variant:void 0})})});let y=D.type;return(0,t.jsxs)("div",{className:"flex flex-col gap-7 h-full pt-6",children:[(0,t.jsxs)(a.ToggleGroup,{value:E,onValueChange:e=>{e&&A(e)},type:"single",defaultValue:"info",className:"w-fit ml-6",children:[(0,t.jsx)(a.ToggleGroupItem,{size:"sm",value:"info",className:"text-sm leading-[14px] font-semibold",children:"Details"}),"GROUP"!==y&&(0,t.jsx)(a.ToggleGroupItem,{size:"sm",value:"related",className:"text-sm leading-[14px] font-semibold",children:"Related"}),"DOCUMENT"===y&&(0,t.jsx)(a.ToggleGroupItem,{size:"sm",value:"annotations",className:"text-sm leading-[14px] font-semibold",children:"Annotations"})]}),(0,t.jsxs)(i.ScrollArea,{className:"h-full pb-9 px-4",children:[(0,c.match)(y).with("YOUTUBE","VIDEO","WEBSITE",()=>{if("info"===E)return(0,t.jsx)(p.default,{metadata:I,chatbot:D})}).with("DOCUMENT",()=>{if("info"===E){var e;return(0,t.jsx)(d.default,{metadata:I,id:D.id,status:null==D||null==(e=D.ingestionStatus)?void 0:e.status,createdAt:D.createdAt,type:D.type},D.id)}if("annotations"===E)return(0,t.jsx)(m.default,{chatbotId:D.id},D.id)}).with("WORKSPACE","GROUP","NOTHING",()=>{if("info"===E)return(0,t.jsx)("p",{className:"text-text-primary pl-6 text-sm",children:"No information available for this item"})}).otherwise(()=>{if("info"===E)return(0,t.jsx)(h.default,{metadata:I,chatbot:D,tags:null==C?void 0:C.tags})}),"related"===E&&(0,t.jsx)(n.default,{metadata:I,type:D.type,chatbotId:D.id})]})]})}},78417:e=>{"use strict";e.s({differenceInDays:()=>i});var t=e.i(641988),n=e.i(163015);function i(e,i){let s=(0,n.toDate)(e),r=(0,n.toDate)(i),o=a(s,r),l=Math.abs((0,t.differenceInCalendarDays)(s,r));s.setDate(s.getDate()-o*l);let c=Number(a(s,r)===-o),u=o*(l-c);return 0===u?0:u}function a(e,t){let n=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return n<0?-1:n>0?1:n}},478201:e=>{"use strict";e.s({default:()=>m});var t=e.i(290479),n=e.i(227261),i=e.i(410601),a=e.i(280694),s=e.i(814733),r=e.i(78417),o=e.i(281127),l=e.i(777772),c=e.i(216897),u=e.i(94371),d=e.i(373150),h=e.i(704255),p=e.i(663018);let m=e=>{let{noteId:m,onClose:f}=e,{editor:T}=(0,i.useGlobalEditor)(m),g=(0,n.useChatbotStore)(e=>e.toggleHistorySidebar),{selectedVersion:E,isPreviewingVersion:A,selectVersion:x}=(0,a.default)(m),{data:I,isLoading:_,refetch:C}=s.api.noteVersion.getVersions.useQuery({noteId:m},{refetchInterval:3e4,refetchOnWindowFocus:!0,refetchOnMount:!0,refetchOnReconnect:!0,staleTime:5e3,gcTime:1e4});return((0,d.useEffect)(()=>{!A&&T&&C()},[A,T,C]),_)?(0,t.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,t.jsx)(p.LoadingSpinner,{color:"gray",variant:"small"})}):(0,t.jsxs)("div",{className:"w-full h-full bg-background-primary py-3 px-5 flex flex-col",children:[(0,t.jsx)("div",{className:"flex flex-row justify-between items-center h-13 mb-3",children:(0,t.jsxs)(h.Button,{variant:"ghost",size:"xs",onClick:()=>{g(),f()},children:[(0,t.jsx)(u.ChevronLeft,{className:"h-7 w-7"})," Document history"]})}),(0,t.jsx)("div",{className:"overflow-y-auto flex-grow",children:(null==I?void 0:I.length)?(0,t.jsx)("div",{className:"space-y-4",children:null==I?void 0:I.map(e=>(0,t.jsx)("div",{className:"px-4 py-2 rounded-4 cursor-pointer hover:bg-control-primary flex justify-between items-center ".concat((null==E?void 0:E.id)===e.id?"bg-control-primary":""),onClick:()=>(e=>{e.contents&&x({...e,_selectionTimestamp:Date.now(),_timestamp:Date.now()})})({...e,createdAt:new Date(e.createdAt)}),children:(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"font-medium text-sm",children:(e=>{let t=(0,o.format)(e,"h:mm a");if((0,l.isToday)(e))return"Today, ".concat(t);if((0,c.isYesterday)(e))return"Yesterday, ".concat(t);let n=(0,r.differenceInDays)(new Date,e);return"".concat(n," day").concat(1===n?"":"s"," ago, ").concat(t)})(new Date(e.updatedAt))}),(0,t.jsx)("span",{className:"text-xs leading-[20px] text-text-secondary",children:e.createdBy})]})},e.id))}):(0,t.jsx)("div",{className:"flex flex-col items-center justify-center h-full text-text-secondary",children:(0,t.jsx)("p",{className:"text-center text-sm",children:"No versions saved yet."})})})]})}},219731:e=>{"use strict";e.s({ChatbotRightSidebar:()=>u});var t=e.i(290479),n=e.i(227261),i=e.i(330462),a=e.i(791884),s=e.i(34818),r=e.i(750853),o=e.i(478201),l=e.i(986216);let c={initial:{opacity:0,x:20},animate:{opacity:1,x:0,transition:{duration:.075,ease:a.easeInOut}},exit:{opacity:0,x:-20,transition:{duration:.075,ease:a.easeInOut}}},u=e=>{let{isActive:a}=e,u=(0,n.useChatbotStore)(e=>e.active),d=(0,n.useChatbotStore)(e=>e.setAll),h=(0,n.useChatbotStore)(e=>e.mode),p=(0,n.useChatbotStore)(e=>e.collapseRightSidebar);return a?(0,t.jsxs)(i.AnimatePresence,{mode:"wait",children:[u.some(e=>e.startsWith("metadata"))&&"chatbot"===h.type&&(0,t.jsx)(s.motion.div,{variants:c,initial:"initial",animate:"animate",exit:"exit",className:"h-full",children:(0,t.jsx)(r.default,{chatbotId:h.chatbotId,active:(e=>{var t;return(null==(t=e.find(e=>e.startsWith("metadata")))?void 0:t.split(".")[1])||"info"})(u)},h.chatbotId)},"metadata"),u.includes("notes")&&(0,t.jsx)(s.motion.div,{variants:c,initial:"initial",animate:"animate",exit:"exit",className:"h-full",children:(0,t.jsx)(l.default,{})},"notes"),u.includes("note-history")&&"chatbot"===h.type&&(0,t.jsx)(s.motion.div,{variants:c,initial:"initial",animate:"animate",exit:"exit",className:"h-full",children:(0,t.jsx)(o.default,{noteId:h.chatbotId,onClose:()=>{p(),d(u.filter(e=>"note-history"!==e))}})},"note-history")]}):null}},850496:e=>{"use strict";e.s({ChatbotSidebarPanelGroup:()=>r});var t=e.i(290479),n=e.i(966641),i=e.i(227261),a=e.i(373150),s=e.i(608087);let r=e=>{let{children:r}=e,o=(0,i.useChatbotStore)(e=>e.active),l=(0,a.useRef)(null),{windowWidth:c,breakpoints:u}=(0,n.useWindowWidth)(),d=c<=u.sm;return(0,a.useLayoutEffect)(()=>{let e=l.current;if(!e)return;let t=e.getLayout(),n=t.length;if(0===n)return;let i=o.includes("notes")||o.some(e=>e.startsWith("metadata"))||o.includes("note-history"),a=[];switch(n){case 1:a=[100];break;case 2:a=i?[70,30]:[67,33];break;case 3:a=o.includes("chat")&&!i?[67,33,0]:[100/3,100/3,100/3];break;default:console.warn("Unexpected number of panels (".concat(n,"), defaulting to equal layout.")),a=Array(n).fill(100/n)}let s=a.length!==t.length;s||(s=a.some((e,n)=>Math.abs(e-t[n])>.1)),s&&e.setLayout(a)},[o]),(0,t.jsx)(s.ResizablePanelGroup,{ref:l,className:"h-full",direction:d?"vertical":"horizontal",children:r})}},724291:e=>{"use strict";e.s({default:()=>g});var t=e.i(290479),n=e.i(118246),i=e.i(373150),a=e.i(430266),s=e.i(913659),r=e.i(852951),o=e.i(227261),l=e.i(289702),c=e.i(597126),u=e.i(597875),d=e.i(134050),h=e.i(608087),p=e.i(418094),m=e.i(219731),f=e.i(850496),T=e.i(885493);let g=()=>{let e=(0,o.useChatbotStore)(e=>e.active),g=(0,o.useChatbotStore)(e=>e.setAll),E=(0,o.useChatbotStore)(e=>e.collapseRightSidebar),{ismetadataPersisted:A,isChatPersisted:x}=(0,s.usePersistedSidebar)(),[I,_]=(0,n.useQueryState)("referrer",n.parseAsString),C=(0,r.useWorkspaceWithFolderNames)(),v=(0,o.useChatbotStore)(e=>e.mode),{shareData:S,isLoading:D}=(0,u.useIsSharedChat)(),y=null==S?void 0:S.chatbot,N=(0,i.useMemo)(()=>(0,o.isLibraryView)(v)?{view:100,chat:0,hideViewPanel:!1}:"full-chat-library"===v.type?{view:0,chat:100,hideViewPanel:!0}:"chatbot"===v.type?(0,a.match)(v.chatbotType).with("NOTE",()=>({view:100,chat:0,hideViewPanel:!1})).with("GROUP",()=>({view:100,chat:0,hideViewPanel:!1})).otherwise(()=>({view:67,chat:33,hideViewPanel:!1})):{view:100,chat:0,hideViewPanel:!1},[v]),b=(0,i.useRef)(null);(0,i.useEffect)(()=>{let e="chatbot"===v.type?v.chatbotId:null;if(e===b.current)return;b.current=e;let t=(0,o.getDefaults)(v);"open"!==A||t.includes("metadata")||"chatbot"!==v.type||"NOTHING"===v.chatbotType||"GROUP"===v.chatbotType?"closed"===A&&t.includes("metadata")&&(t=t.filter(e=>"metadata"!==e)):t.push("metadata"),"open"!==x||t.includes("chat")?"closed"===x&&t.includes("chat")&&"chatbot"===v.type&&"NOTHING"!==v.chatbotType&&(t=t.filter(e=>"chat"!==e)):t.push("chat"),"sidebar"!==I||t.includes("chat")||t.push("chat"),g(t)},[v,A,x,I]);let{isResizing:O}=(0,h.useIsResizing)(),R=e.includes("chat"),P=e.includes("notes")||e.includes("metadata")||e.includes("note-history"),k="chatbot"===v.type&&"GROUP"===v.chatbotType,M="full-chat-library"===v.type,L=(0,i.useMemo)(()=>"chatbot"===v.type?null==C?void 0:C.find(e=>e.id===v.chatbotId):null,[C,v]),w="chatbot"===v.type&&"GROUP"===v.chatbotType;return(0,i.useEffect)(()=>{let t=t=>{"Escape"===t.key&&(0,o.isLibraryView)(v)&&R&&g(e.filter(e=>"chat"!==e))};return document.addEventListener("keydown",t),()=>{document.removeEventListener("keydown",t)}},[v,R,e,g]),(0,t.jsxs)(f.ChatbotSidebarPanelGroup,{children:[(0,t.jsx)(h.ResizablePanel,{defaultSize:N.view,...N.hideViewPanel&&{maxSize:0},order:1,id:"view",children:("chatbot"===v.type||"full-chat-library"===v.type)&&(k||(0,o.isLibraryView)(v)?w&&!M?(0,t.jsx)(d.default,{folderId:v.chatbotId,folderName:(null==L?void 0:L.name)||"Untitled Folder",children:(0,t.jsx)(T.GroupChatbot,{})}):(0,t.jsx)(T.GroupChatbot,{}):"chatbot"===v.type&&!D&&(0,t.jsx)(p.default,{chatbotId:(null==y?void 0:y.id)||v.chatbotId,isChatOpen:R}))}),(0,t.jsx)(h.ResizableHandle,{id:"chat",className:(0,l.cn)(!R&&"hidden",N.hideViewPanel&&"hidden","z-20")}),(0,t.jsx)(h.ResizablePanel,{className:(0,l.cn)(!O&&"transition-all duration-200 ease-in-out"),order:2,id:"chat",defaultSize:N.chat,...!R&&{maxSize:0},...R&&{minSize:25},children:R&&(0,t.jsx)(c.default,{mode:v})}),(0,t.jsx)(h.ResizableHandle,{id:"right",className:(0,l.cn)(!P&&"hidden")}),(0,t.jsx)(h.ResizablePanel,{className:(0,l.cn)(!O&&"transition-all duration-200 ease-in-out"),order:4,id:"right",collapsible:!0,defaultSize:0,...!P&&{maxSize:0},onCollapse:()=>E(),children:(0,t.jsx)(m.ChatbotRightSidebar,{isActive:P})})]})}}}]);

//# sourceMappingURL=6f49a852e6bd6bf5.js.map